---
description: Конструкторы поставщиков услуг должны попытаться сократить время выполнения синхронных операций.
ms.assetid: eb264ab7-15bb-4cd5-8af8-f979f02a7a39
title: Синхронные запросы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3684b1fa8ea2bca1b7fb777663f2c4e50ffd36a3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105674357"
---
# <a name="synchronous-requests"></a><span data-ttu-id="69232-103">Синхронные запросы</span><span class="sxs-lookup"><span data-stu-id="69232-103">Synchronous Requests</span></span>

<span data-ttu-id="69232-104">Конструкторы поставщиков услуг должны попытаться сократить время выполнения синхронных операций.</span><span class="sxs-lookup"><span data-stu-id="69232-104">Service provider designers should try to keep the execution time of synchronous operations short.</span></span> <span data-ttu-id="69232-105">Например, в момент инициализации вызывается операция "Открыть", которая подготавливает поставщик услуг и TAPI для последующих операций на устройстве.</span><span class="sxs-lookup"><span data-stu-id="69232-105">For example, there is an "Open" operation called at initialization time that prepares the service provider and TAPI for subsequent operations on a device.</span></span> <span data-ttu-id="69232-106">Поставщик услуг, реализация которого разделяется между клиентским компьютером и выделенным сервером, может иметь разумную уверенность, что он может взаимодействовать с удаленным сервером.</span><span class="sxs-lookup"><span data-stu-id="69232-106">A service provider whose implementation is split between the client computer and a dedicated server may have reasonable confidence that it can communicate with its remote server.</span></span> <span data-ttu-id="69232-107">Его реализация "Open" может просто выделить и инициализировать структуры данных для представления устройства и возврата, отложив сквозную связь до тех пор, пока не запрашиваются некоторые реальные операции.</span><span class="sxs-lookup"><span data-stu-id="69232-107">Its implementation of "Open" might just allocate and initialize data structures to represent the device and return, postponing end-to-end communication until some real operation is requested.</span></span>

<span data-ttu-id="69232-108">Любая такая "Оптимистическая" реализация синхронной операции может впоследствии привести к ограничениям ресурсов или удаленным сбоям связи.</span><span class="sxs-lookup"><span data-stu-id="69232-108">Any such "optimistic" implementation of a synchronous operation can later encounter resource limitations or remote communication failures.</span></span> <span data-ttu-id="69232-109">Как правило, даже «консервативный» подход не может полностью предотвратить эти проблемы. разработчики поставщиков услуг должны выбрать оптимальный компромисс между надежностью и производительностью.</span><span class="sxs-lookup"><span data-stu-id="69232-109">In general, even a "conservative" approach cannot entirely prevent these problems; service-provider designers must choose the best tradeoff between reliability and performance.</span></span> <span data-ttu-id="69232-110">Сбой такого рода должен быть корректно обработан везде, где это возможно.</span><span class="sxs-lookup"><span data-stu-id="69232-110">A failure of this kind should be handled gracefully wherever possible.</span></span> <span data-ttu-id="69232-111">С точки зрения ТСПИ устройств они должны оставаться действительными для «бухгалтерского учета», даже если они возвращают состояние сбоя для любой запрошенной операции.</span><span class="sxs-lookup"><span data-stu-id="69232-111">From the point of view of TSPI devices, they should remain valid for "bookkeeping" purposes even if they return failure status for any operation requested.</span></span>

<span data-ttu-id="69232-112">Реализация оптимистичного подхода для синхронных запросов не должна выполняться за счет правильной семантики операции.</span><span class="sxs-lookup"><span data-stu-id="69232-112">Implementing an optimistic approach for synchronous requests should not be done at the expense of correct semantics for the operation.</span></span> <span data-ttu-id="69232-113">При возврате к примеру "Open", если открытие устройства должно занимать и зарезервировать неограниченный, неразделяемый ресурс, такой как коммуникационные порты, это, скорее всего, сделает это, даже если оно занимает много времени.</span><span class="sxs-lookup"><span data-stu-id="69232-113">Returning to the "Open" example, if opening a device needs to compete for and reserve a scarce, nonsharable resource such as communication ports, it should probably do so even if it is time-consuming.</span></span>

<span data-ttu-id="69232-114">**Интерфейс TAPI 2. x:** Операция, которая завершается синхронно, выполняет всю обработку в вызове функции, сделанной приложением.</span><span class="sxs-lookup"><span data-stu-id="69232-114">**TAPI 2.x:** An operation that completes synchronously performs all of its processing in the function call made by the application.</span></span> <span data-ttu-id="69232-115">Функция возвращает различные значения в зависимости от успешности или неудачи:</span><span class="sxs-lookup"><span data-stu-id="69232-115">The function returns different values depending on its success or failure:</span></span>

-   <span data-ttu-id="69232-116">**Синхронное выполнение.**</span><span class="sxs-lookup"><span data-stu-id="69232-116">**Synchronous Success.**</span></span> <span data-ttu-id="69232-117">Если запрос или служба, соответствующие функции, были успешно выполнены, функция возвращает ноль, что указывает на успешное выполнение.</span><span class="sxs-lookup"><span data-stu-id="69232-117">If the request or service corresponding to the function has been carried out successfully, the function returns zero, indicating success.</span></span> <span data-ttu-id="69232-118">Все значения, записанные в результате вызова функции, являются надежными и могут использоваться немедленно.</span><span class="sxs-lookup"><span data-stu-id="69232-118">Any values written as a result of the function call are reliable and can be used immediately.</span></span>
-   <span data-ttu-id="69232-119">**Синхронный сбой.**</span><span class="sxs-lookup"><span data-stu-id="69232-119">**Synchronous Failure.**</span></span> <span data-ttu-id="69232-120">Если функция обнаруживает ошибку и запрос не выполняется, для определения ошибки возвращается отрицательный номер ошибки.</span><span class="sxs-lookup"><span data-stu-id="69232-120">If the function detects an error and the request is not carried out, a negative error number is returned to identify the error.</span></span>

 

 



