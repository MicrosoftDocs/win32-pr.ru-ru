---
description: В следующей процедуре описано, как включить трассировку и ведение журнала отладки.
ms.assetid: 52381397-df75-4d81-a048-f0ed408ac6b8
title: Включение трассировки и ведения журнала отладки для производных MSP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3883d12c050f245cc58595c9a52586c4f01ba27f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105682973"
---
# <a name="how-to-enable-debug-tracinglogging-for-derived-msps"></a><span data-ttu-id="8f6b5-103">Включение трассировки и ведения журнала отладки для производных MSP</span><span class="sxs-lookup"><span data-stu-id="8f6b5-103">How to Enable Debug Tracing/Logging for Derived MSPs</span></span>

<span data-ttu-id="8f6b5-104">Во-первых, убедитесь, что реализация производного MSP выполнила рекомендации в предыдущем разделе относительно трассировки отладки (определение символа препроцессора МСПЛОГ, регистрация для трассировки во время DllMain и использование макроса LOG для трассировки).</span><span class="sxs-lookup"><span data-stu-id="8f6b5-104">First, make sure that the implementation of the derived MSP has followed the guidelines in the previous section with regard to debug tracing (defining the preprocessor symbol MSPLOG, registering for tracing during DllMain, and using the LOG macro for tracing).</span></span> <span data-ttu-id="8f6b5-105">Выясните, какое имя используется MSP при регистрации для трассировки (обычно это имя библиотеки DLL; оно упоминается как имя &lt; библиотеки DLL &gt; ).</span><span class="sxs-lookup"><span data-stu-id="8f6b5-105">Find out what name the MSP uses when registering for tracing (this should usually be the DLL's name; it is referred to below as "&lt;dll name&gt;").</span></span> <span data-ttu-id="8f6b5-106">Чтобы включить трассировку, воспользуйтесь редактором реестра ("Regedit.exe" или "Regedt32.exe"), чтобы выбрать раздел "HKEY \_ Local \_ Machine \\ программное обеспечение \\ Microsoft \\ Tracing" и выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8f6b5-106">To enable tracing, use a registry editor ("Regedit.exe" or "Regedt32.exe") to locate the key "HKEY\_LOCAL\_MACHINE\\Software\\Microsoft\\Tracing" and do the following.</span></span> <span data-ttu-id="8f6b5-107">Обратите внимание, что все указанные ниже значения, за исключением значения ЕнабледебугжертраЦинг, должны быть созданы автоматически после первого запуска MSP.</span><span class="sxs-lookup"><span data-stu-id="8f6b5-107">Note that all of the values mentioned below, except the EnableDebuggerTracing value, should be created automatically after running your MSP for the first time.</span></span>

-   <span data-ttu-id="8f6b5-108">Чтобы включить трассировку для отладчиков пользователя и режима ядра, установите  значение DWORD <dll name> \\ енабледебугжертраЦинг равным 1.</span><span class="sxs-lookup"><span data-stu-id="8f6b5-108">To enable tracing to user and kernel mode debuggers, set the **DWORD** value <dll name>\\EnableDebuggerTracing to 1.</span></span> <span data-ttu-id="8f6b5-109">При необходимости используйте параметр **DWORD** <dll name> \\ консолетраЦинг Mask, чтобы включить или отключить различные уровни вывода трассировки (значение по умолчанию — 0xFFFF0000, которое включает все уровни трассировки).</span><span class="sxs-lookup"><span data-stu-id="8f6b5-109">Optionally, use the **DWORD** value <dll name>\\ConsoleTracing Mask to enable or disable various levels of trace output (the default is 0xFFFF0000, which enables all trace levels).</span></span>
-   <span data-ttu-id="8f6b5-110">Чтобы включить трассировку в файле, установите значение **DWORD** <dll name> \\ енаблефилетраЦинг равным 1.</span><span class="sxs-lookup"><span data-stu-id="8f6b5-110">To enable tracing to a file, set the **DWORD** value <dll name>\\EnableFileTracing to 1.</span></span> <span data-ttu-id="8f6b5-111">При необходимости используйте строковое значение <dll name> \\ филедиректори для настройки расположения файла журнала.</span><span class="sxs-lookup"><span data-stu-id="8f6b5-111">Optionally, use the string value <dll name>\\FileDirectory to adjust the location of the log file.</span></span> <span data-ttu-id="8f6b5-112">При необходимости используйте значение **DWORD** филетраЦингмаск, <dll name> \\ чтобы включить или отключить различные уровни выходных данных трассировки (значение по умолчанию — 0xFFFF0000, которое включает все уровни трассировки).</span><span class="sxs-lookup"><span data-stu-id="8f6b5-112">Optionally, use the **DWORD** value <dll name>\\FileTracingMask to enable or disable various levels of trace output (the default is 0xFFFF0000, which enables all trace levels).</span></span>
-   <span data-ttu-id="8f6b5-113">Чтобы включить трассировку в отдельном окне консоли, разделенном на библиотеки DLL, установите значение **DWORD** енаблеконсолетраЦинг равным 1, а также задайте значение **DWORD** <dll name> \\ енаблеконсолетраЦинг равным 1.</span><span class="sxs-lookup"><span data-stu-id="8f6b5-113">To enable tracing to a separate console window, separated by DLL, set the **DWORD** value EnableConsoleTracing to 1, AND ALSO set the **DWORD** value <dll name>\\EnableConsoleTracing to 1.</span></span> <span data-ttu-id="8f6b5-114">При необходимости используйте параметр **DWORD** <dll name> \\ консолетраЦинг Mask, чтобы включить или отключить различные уровни вывода трассировки (значение по умолчанию — 0xFFFF0000, которое включает все уровни трассировки).</span><span class="sxs-lookup"><span data-stu-id="8f6b5-114">Optionally, use the **DWORD** value <dll name>\\ConsoleTracing Mask to enable or disable various levels of trace output (the default is 0xFFFF0000, which enables all trace levels).</span></span>

 

 



