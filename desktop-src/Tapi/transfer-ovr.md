---
description: Операция передачи позволяет приложению отправить подключенный в данный момент сеанс связи с другим адресом.
ms.assetid: b1027f09-74e1-4da8-b718-bb55a56dda1d
title: Перенос
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 724b9ade43e41ab95a5baa6dfe7d3269f4e4a174
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104080835"
---
# <a name="transfer"></a><span data-ttu-id="9960e-103">Перенос</span><span class="sxs-lookup"><span data-stu-id="9960e-103">Transfer</span></span>

<span data-ttu-id="9960e-104">Операция передачи позволяет приложению отправить подключенный в данный момент сеанс связи с другим адресом.</span><span class="sxs-lookup"><span data-stu-id="9960e-104">The transfer operation allows an application to send a currently connected communications session to a different address.</span></span>

<span data-ttu-id="9960e-105">TAPI предоставляет два механизма передачи текущего сеанса на другой адрес.</span><span class="sxs-lookup"><span data-stu-id="9960e-105">TAPI provides two mechanisms for transferring a current session to a different address.</span></span> <span data-ttu-id="9960e-106">*Передача скрытия* позволяет передать существующий сеанс на указанный адрес назначения за один этап.</span><span class="sxs-lookup"><span data-stu-id="9960e-106">*Blind transfer* allows an existing session to be transferred to a specified destination address in one phase.</span></span> <span data-ttu-id="9960e-107">При *переносе консультации* требуется наличие сеанса консультации в дополнение к текущему сеансу для настройки перемещения, а затем завершение перемещения.</span><span class="sxs-lookup"><span data-stu-id="9960e-107">*Consultation transfer* requires the existence of a consultation session in addition to the current session to set up for the transfer, and then completion of the transfer.</span></span> <span data-ttu-id="9960e-108">Вариант между этими двумя типами часто основан на возможностях поставщика услуг, так как некоторые поставщики служб не поддерживают перенос с потерей.</span><span class="sxs-lookup"><span data-stu-id="9960e-108">The choice between these two types is frequently based on service provider capabilities because some service providers do not support blind transfer.</span></span> <span data-ttu-id="9960e-109">В некоторых случаях требуется, чтобы консултативе мог переносить предпочтительный метод, даже если возможна перенаправление слепых.</span><span class="sxs-lookup"><span data-stu-id="9960e-109">In some cases, application needs may make the consultative transfer the preferred method even where blind transfer is possible.</span></span>

<span data-ttu-id="9960e-110">Операция преобразования «вслепую» по сути является такой же, как в TAPI 2 и TAPI 3, но консултативеная перенаправление на несколько разных шаблонов.</span><span class="sxs-lookup"><span data-stu-id="9960e-110">The blind transfer operation is basically the same under TAPI 2 and TAPI 3, but consultative transfer follows slightly different patterns.</span></span>

<span data-ttu-id="9960e-111">**Интерфейс TAPI 2. x:** Консултативе-перенос начинается с вызова [**линесетуптрансфер**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer), который помещает существующий вызов на удержании консультации и идентифицирует этот вызов как цель для следующего запроса на завершение перемещения.</span><span class="sxs-lookup"><span data-stu-id="9960e-111">**TAPI 2.x:** Consultative transfer starts with invoking [**lineSetupTransfer**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer), which places the existing call on consultation hold, and identifies this call as the target for the next transfer-completion request.</span></span> <span data-ttu-id="9960e-112">Функция **линесетуптрансфер** также выделяет вызов консультации, который можно использовать для установления вызова консультации с стороной, для которой будет передан вызов.</span><span class="sxs-lookup"><span data-stu-id="9960e-112">The **lineSetupTransfer** function also allocates a consultation call that can be used to establish the consultation call with the party to which the call will be transferred.</span></span> <span data-ttu-id="9960e-113">Приложение может набрать расширение целевой стороны в вызове консультации (с помощью [**линедиал**](/windows/win32/api/tapi/nf-tapi-linedial)) или удалить и освободить вызов консультации, а вместо этого активировать существующий Удерживаемый вызов (с помощью [**линеунхолд**](/windows/win32/api/tapi/nf-tapi-lineunhold)), если он поддерживается параметром.</span><span class="sxs-lookup"><span data-stu-id="9960e-113">The application can dial the extension of the destination party on the consultation call (using [**lineDial**](/windows/win32/api/tapi/nf-tapi-linedial)), or it can drop and deallocate the consultation call and instead activate an existing held call (using [**lineUnhold**](/windows/win32/api/tapi/nf-tapi-lineunhold)), if supported by the switch.</span></span> <span data-ttu-id="9960e-114">В то время как первоначальный вызов находится на удержании, а вызов консультации активен, приложение может переключаться между этими вызовами с помощью [**линесвафолд**](/windows/win32/api/tapi/nf-tapi-lineswaphold).</span><span class="sxs-lookup"><span data-stu-id="9960e-114">While the initial call is on consultation hold and the consultation call is active, the application can toggle between these calls using [**lineSwapHold**](/windows/win32/api/tapi/nf-tapi-lineswaphold).</span></span>

<span data-ttu-id="9960e-115">**Интерфейс TAPI 2. x:** Приложения завершают перенос консултативе с помощью [**линекомплететрансфер**](/windows/win32/api/tapi/nf-tapi-linecompletetransfer).</span><span class="sxs-lookup"><span data-stu-id="9960e-115">**TAPI 2.x:** Applications complete the consultative transfer using [**lineCompleteTransfer**](/windows/win32/api/tapi/nf-tapi-linecompletetransfer).</span></span> <span data-ttu-id="9960e-116">Оба вызова будут возвращены в состояние *простоя* .</span><span class="sxs-lookup"><span data-stu-id="9960e-116">Both calls will revert to the *idle* state.</span></span>

<span data-ttu-id="9960e-117">Приложения могут использовать функцию одноэтапного перемещения во многих УАТС (нажатие одной кнопки для установки консультации) путем установки параметра *лпкаллпарамс* в **линекаллпарамфлагс \_ Онестептрансфер** в [ \_ константах линекаллпарамфлагс](./linecallparamflags--constants.md) при вызове [**линесетуптрансфер**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer).</span><span class="sxs-lookup"><span data-stu-id="9960e-117">Applications can use the "one-step transfer" feature of many PBXs (a single button press to establish a consultation transfer) by setting the *lpCallParams* parameter to the **LINECALLPARAMFLAGS\_ONESTEPTRANSFER** member of the [LINECALLPARAMFLAGS\_ constants](./linecallparamflags--constants.md) when calling [**lineSetupTransfer**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer).</span></span>

<span data-ttu-id="9960e-118">**Интерфейс TAPI 3. x:** Консултативе-перемещение начинается с использования [**итаддресс:: креатекалл**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall) для создания вызова консультации с новым адресом назначения.</span><span class="sxs-lookup"><span data-stu-id="9960e-118">**TAPI 3.x:** Consultative transfer starts with using [**ITAddress::CreateCall**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall) to create a consultation call to the new destination address.</span></span> <span data-ttu-id="9960e-119">[**Итбасиккаллконтрол:: перемещение**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-transfer) затем вызывается для исходного объекта вызова с помощью указателя на новый объект метода консультации в качестве параметра.</span><span class="sxs-lookup"><span data-stu-id="9960e-119">[**ITBasicCallControl::Transfer**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-transfer) is then called on the original call object using a pointer to the new consultation call object as a parameter.</span></span> <span data-ttu-id="9960e-120">Вызов [**итбасиккаллконтрол:: Finish**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-finish) на объекте консультации Call, затем завершает перемещение.</span><span class="sxs-lookup"><span data-stu-id="9960e-120">Calling [**ITBasicCallControl::Finish**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-finish) on the consultation call object then completes the transfer.</span></span>

<span data-ttu-id="9960e-121">Приложение должно освободить ресурсы сеанса после успешного завершения операции перемещения.</span><span class="sxs-lookup"><span data-stu-id="9960e-121">The application must release session resources following the successful completion of a transfer operation.</span></span>

<span data-ttu-id="9960e-122">Не все поставщики служб поддерживают использование этой операции.</span><span class="sxs-lookup"><span data-stu-id="9960e-122">Not all service providers support use of this operation.</span></span>

<span data-ttu-id="9960e-123">**Интерфейс TAPI 2. x:** См. раздел [**линеблиндтрансфер**](/windows/win32/api/tapi/nf-tapi-lineblindtransfer), [**линесетуптрансфер**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer), [**линекомплететрансфер**](/windows/win32/api/tapi/nf-tapi-linecompletetransfer).</span><span class="sxs-lookup"><span data-stu-id="9960e-123">**TAPI 2.x:** See [**lineBlindTransfer**](/windows/win32/api/tapi/nf-tapi-lineblindtransfer), [**lineSetupTransfer**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer), [**lineCompleteTransfer**](/windows/win32/api/tapi/nf-tapi-linecompletetransfer).</span></span>

<span data-ttu-id="9960e-124">**Интерфейс TAPI 3. x:** См. раздел [**итбасиккаллконтрол:: блиндтрансфер**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-blindtransfer), [**Итаддресс:: креатекалл**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall), [**итбасиккаллконтрол:: передает**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-transfer), [**итбасиккаллконтрол:: Finish**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-finish).</span><span class="sxs-lookup"><span data-stu-id="9960e-124">**TAPI 3.x:** See [**ITBasicCallControl::BlindTransfer**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-blindtransfer), [**ITAddress::CreateCall**](/windows/desktop/api/tapi3if/nf-tapi3if-itaddress-createcall), [**ITBasicCallControl::Transfer**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-transfer), [**ITBasicCallControl::Finish**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-finish).</span></span>

 

 
