---
description: Предположим, что в качестве примера приложение вызывает функцию TAPI Линеконфигдиалог, которая предназначена для открытия диалогового окна, позволяющего настроить параметры поставщика услуг, связанные с указанным устройством.
ms.assetid: a388d192-a327-4e67-968b-344d80c19fb1
title: Функции, предназначенные для создания пользовательского интерфейса
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fa360effd2a1504d2325be2131c430664f1e7a5c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103991128"
---
# <a name="functions-designed-to-generate-ui"></a><span data-ttu-id="8f604-103">Функции, предназначенные для создания пользовательского интерфейса</span><span class="sxs-lookup"><span data-stu-id="8f604-103">Functions Designed to Generate UI</span></span>

<span data-ttu-id="8f604-104">Предположим, что в качестве примера приложение вызывает функцию TAPI [**линеконфигдиалог**](/windows/win32/api/tapi/nf-tapi-lineconfigdialog) , которая предназначена для открытия диалогового окна, позволяющего настроить параметры поставщика услуг, связанные с указанным устройством.</span><span class="sxs-lookup"><span data-stu-id="8f604-104">Assume for the purposes of an example that the application calls the TAPI [**lineConfigDialog**](/windows/win32/api/tapi/nf-tapi-lineconfigdialog) function, which is designed to open a dialog box to allow configuration of service provider options related to the specified line device.</span></span> <span data-ttu-id="8f604-105">В ответ на этот вызов TAPI запрашивает ТАПИСРВ для вызова [**тспи \_ провидеруиидентифи**](/windows/win32/api/tspi/nf-tspi-tspi_provideruiidentify) в поставщике услуг телефонии, ПОЛУЧАЯ имя библиотеки DLL пользовательского интерфейса TSP.</span><span class="sxs-lookup"><span data-stu-id="8f604-105">In response to this call, TAPI requests TAPISRV to call [**TSPI\_providerUIIdentify**](/windows/win32/api/tspi/nf-tspi-tspi_provideruiidentify) in the telephony service provider, obtaining the name of the TSP UI DLL.</span></span>

<span data-ttu-id="8f604-106">В контексте приложения TAPI загружает библиотеку DLL пользовательского интерфейса TSP и вызывает функцию [**туиспи \_ линеконфигдиалог**](/windows/win32/api/tspi/nf-tspi-tuispi_lineconfigdialog) с параметрами, предоставленными приложением, и включает указатель на функцию [*дллкаллбаккпрок*](/windows/win32/api/tspi/nc-tspi-tuispidllcallback) TAPI.</span><span class="sxs-lookup"><span data-stu-id="8f604-106">In the application's context, TAPI loads the TSP UI DLL and calls the [**TUISPI\_lineConfigDialog**](/windows/win32/api/tspi/nf-tspi-tuispi_lineconfigdialog) function with the parameters supplied by the application, and including a pointer to the TAPI [*DllCallbackProc*](/windows/win32/api/tspi/nc-tspi-tuispidllcallback) function.</span></span> <span data-ttu-id="8f604-107">Библиотека DLL пользовательского интерфейса TSP отображает диалоговое окно Конфигурация, при необходимости вызывая функцию *дллкаллбаккпрок* , чтобы получить от поставщика услуг телефонии сведения для отображения.</span><span class="sxs-lookup"><span data-stu-id="8f604-107">The TSP UI DLL displays the configuration dialog box, calling the *DllCallbackProc* function as necessary to obtain from the telephony service provider the information to display.</span></span> <span data-ttu-id="8f604-108">При каждом вызове функции *ДЛЛКАЛЛБАККПРОК* TAPI запрашивает таписрв для вызова функции [**тспи \_ провидерженерикдиалогдата**](/windows/win32/api/tspi/nf-tspi-tspi_providergenericdialogdata) поставщика услуг телефонии, ПЕРЕДАВАЯ блок параметров из библиотеки DLL пользовательского интерфейса и ВОЗВРАЩАЯ блок параметров в библиотеку DLL пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="8f604-108">Each time the *DllCallbackProc* function is called, TAPI requests TAPISRV to call the telephony service provider's [**TSPI\_providerGenericDialogData**](/windows/win32/api/tspi/nf-tspi-tspi_providergenericdialogdata) function, passing in the parameter block from the UI DLL, and returning the parameter block to the UI DLL.</span></span> <span data-ttu-id="8f604-109">Библиотека DLL пользовательского интерфейса передает любые изменения конфигурации поставщику услуг телефонии, вызывая *дллкаллбаккпрок*.</span><span class="sxs-lookup"><span data-stu-id="8f604-109">The UI DLL conveys any configuration changes to the telephony service provider by calling *DllCallbackProc*.</span></span>

<span data-ttu-id="8f604-110">После завершения функции библиотека DLL пользовательского интерфейса возвращает из (в данном случае) [**туиспи \_ линеконфигдиалог**](/windows/win32/api/tspi/nf-tspi-tuispi_lineconfigdialog).</span><span class="sxs-lookup"><span data-stu-id="8f604-110">When the function is complete, the UI DLL returns from (in this case) [**TUISPI\_lineConfigDialog**](/windows/win32/api/tspi/nf-tspi-tuispi_lineconfigdialog).</span></span> <span data-ttu-id="8f604-111">TAPI вызывает функцию [**FreeLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-freelibrary) для освобождения библиотеки DLL пользовательского интерфейса и возвращает в приложение.</span><span class="sxs-lookup"><span data-stu-id="8f604-111">TAPI calls the [**FreeLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-freelibrary) function to release the UI DLL, and returns to the application.</span></span>

 

 
