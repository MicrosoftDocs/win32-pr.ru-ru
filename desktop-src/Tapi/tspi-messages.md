---
description: В этом разделе содержится список сообщений в интерфейсе поставщика услуг телефонии (ТСПИ).
ms.assetid: 3d8bf980-81d6-49db-954f-af72458365dc
title: Сообщения ТСПИ
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f5772a1ccb0c07f03b2a17348ecf5e4834bb97a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105674255"
---
# <a name="tspi-messages"></a><span data-ttu-id="b7555-103">Сообщения ТСПИ</span><span class="sxs-lookup"><span data-stu-id="b7555-103">TSPI Messages</span></span>

<span data-ttu-id="b7555-104">В этом разделе содержится список сообщений в интерфейсе поставщика услуг телефонии (ТСПИ).</span><span class="sxs-lookup"><span data-stu-id="b7555-104">This section contains a list of the messages in the Telephony Service Provider Interface (TSPI).</span></span> <span data-ttu-id="b7555-105">Эти сообщения используются для уведомления TAPI о возникновении асинхронных событий, которые могут произойти в рамках поставщика услуг.</span><span class="sxs-lookup"><span data-stu-id="b7555-105">These messages are used to notify TAPI of the occurrence of asynchronous events that spontaneously occur within the service provider.</span></span> <span data-ttu-id="b7555-106">Поставщик услуг передает эти события в TAPI, вызывая функцию обратного вызова [**линивент**](/windows/win32/api/tspi/nc-tspi-lineevent) или [**фонивент**](/windows/desktop/api/tspi/nc-tspi-phoneevent) , в зависимости от того, сообщает ли поставщик услуг о событии на линии, вызове или телефонном устройстве.</span><span class="sxs-lookup"><span data-stu-id="b7555-106">The service provider passes these events to TAPI by calling a [**LINEEVENT**](/windows/win32/api/tspi/nc-tspi-lineevent) or [**PHONEEVENT**](/windows/desktop/api/tspi/nc-tspi-phoneevent) callback function, depending on whether the service provider is reporting an event on a line, call, or phone device.</span></span> <span data-ttu-id="b7555-107">Процедура **линивент** для отчетов о событиях, происходящих в строке или вызове, предоставляется поставщику услуг во время открытия строки с помощью функции [**тспи \_ линеопен**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen) .</span><span class="sxs-lookup"><span data-stu-id="b7555-107">The **LINEEVENT** procedure for reporting events occurring on a line or call is supplied to the service provider at the time the line is opened with the [**TSPI\_lineOpen**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen) function.</span></span> <span data-ttu-id="b7555-108">Процедура **фонивент** для отчетов о событиях, происходящих на телефоне, предоставляется с помощью функции [**тспи \_ фонеопен**](/windows/win32/api/tspi/nf-tspi-tspi_phoneopen) .</span><span class="sxs-lookup"><span data-stu-id="b7555-108">The **PHONEEVENT** procedure for reporting events occurring on a phone is supplied with the [**TSPI\_phoneOpen**](/windows/win32/api/tspi/nf-tspi-tspi_phoneopen) function.</span></span>

<span data-ttu-id="b7555-109">Эти ненавязчивые события отменяются TAPI в том смысле, что они не являются прямым ответом на любой запрос.</span><span class="sxs-lookup"><span data-stu-id="b7555-109">These spontaneous events are unsolicited by TAPI in the sense that they are not a direct response to any request.</span></span> <span data-ttu-id="b7555-110">Эти события отличаются от отчетов о завершении запросов, выполняемых TAPI.</span><span class="sxs-lookup"><span data-stu-id="b7555-110">These events contrast with those reporting completion of requests made by TAPI.</span></span> <span data-ttu-id="b7555-111">Такие события завершения выводятся через функцию обратного вызова [**асинхронного \_ завершения**](/windows/win32/api/tspi/nc-tspi-async_completion) .</span><span class="sxs-lookup"><span data-stu-id="b7555-111">Such completion events are reported through the [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) callback function.</span></span>

<span data-ttu-id="b7555-112">Профили параметров для процедур с неиспользуемыми событиями включают параметры, определяющие соответствующий объект, для которого сообщается событие (Телефон, строка или вызов).</span><span class="sxs-lookup"><span data-stu-id="b7555-112">The parameter profiles for the spontaneous event procedures include parameters that identify the relevant object for which the event is being reported (phone, line, or call).</span></span> <span data-ttu-id="b7555-113">Идентификация выполняется в виде непрозрачного маркера, точная интерпретация которого не публикуется ТСПИ.</span><span class="sxs-lookup"><span data-stu-id="b7555-113">The identification is in the form of an opaque handle whose exact interpretation is not published by TSPI.</span></span> <span data-ttu-id="b7555-114">TAPI внутренне определяет связь между этими непрозрачными дескрипторами и любыми структурами данных, используемыми для представления устройств.</span><span class="sxs-lookup"><span data-stu-id="b7555-114">TAPI internally determines the relationship between these opaque handles and whatever data structures it used to represent the devices.</span></span>

<span data-ttu-id="b7555-115">Профиль параметров для процедур нестрогого события также включает параметр Message, определяющий тип сообщения.</span><span class="sxs-lookup"><span data-stu-id="b7555-115">The parameter profile for spontaneous event procedures also includes a message parameter identifying the type of the message.</span></span> <span data-ttu-id="b7555-116">Каждый тип сообщений имеет соответствующее определение, которое определяет включаемые дескрипторы, а также другие параметры и их значения.</span><span class="sxs-lookup"><span data-stu-id="b7555-116">Each message type has a corresponding definition that determines the handles that are included, along with other parameters and their meanings.</span></span> <span data-ttu-id="b7555-117">Между сообщениями, отображаемыми на уровне ТСПИ, и на уровне TAPI существует очень строгая корреспонденция.</span><span class="sxs-lookup"><span data-stu-id="b7555-117">There is a very strong correspondence between the messages appearing at the TSPI level and those that appear at the TAPI level.</span></span> <span data-ttu-id="b7555-118">Ниже приведены общие правила корреспонденции.</span><span class="sxs-lookup"><span data-stu-id="b7555-118">These are the general rules of correspondence:</span></span>

-   <span data-ttu-id="b7555-119">Набор сообщений практически идентичен.</span><span class="sxs-lookup"><span data-stu-id="b7555-119">The set of messages is nearly identical.</span></span> <span data-ttu-id="b7555-120">Если сообщения совпадают, то на уровне ТСПИ используется одно и то же имя и значение сообщения.</span><span class="sxs-lookup"><span data-stu-id="b7555-120">Where messages correspond, the same message name and value is used at the TSPI level.</span></span>
-   <span data-ttu-id="b7555-121">Дескрипторы, отображаемые на уровне ТСПИ, являются непрозрачными типами, определенными спецификацией ТСПИ.</span><span class="sxs-lookup"><span data-stu-id="b7555-121">Handles appearing at the TSPI level are the opaque types defined by the TSPI specification.</span></span> <span data-ttu-id="b7555-122">Эти типы (и их интерпретация) отличаются от этих типов на уровне TAPI, хотя они ссылаются на один класс устройства.</span><span class="sxs-lookup"><span data-stu-id="b7555-122">These types (and their interpretation) differ from those at the TAPI level, although they refer to the same class of device.</span></span> <span data-ttu-id="b7555-123">Например, когда сообщение TAPI включает в себя обработчик ХЛИНЕ, соответствующее сообщение ТСПИ обычно включает в себя маркер [**хтапилине**](htapiline.md) .</span><span class="sxs-lookup"><span data-stu-id="b7555-123">For example, where a TAPI message includes an HLINE handle, the corresponding TSPI message would typically include an [**HTAPILINE**](htapiline.md) handle.</span></span>
-   <span data-ttu-id="b7555-124">Нет *двкаллбаккинстанце* данных, передаваемых обратному вызову.</span><span class="sxs-lookup"><span data-stu-id="b7555-124">There is no *dwCallbackInstance* data passed to the callback.</span></span>
-   <span data-ttu-id="b7555-125">Параметры *dwParam1*, *dwParam2* и *dwParam3* , как правило, ИДЕНТИЧНЫ соответствующим параметрам для сообщения TAPI.</span><span class="sxs-lookup"><span data-stu-id="b7555-125">The *dwParam1*, *dwParam2*, and *dwParam3* parameters are usually identical to the corresponding parameters for the TAPI message.</span></span>
-   <span data-ttu-id="b7555-126">Сообщения, ориентированные на строки и вызовы, передаются в другую процедуру обратного вызова, чем сообщения, ориентированные на телефон.</span><span class="sxs-lookup"><span data-stu-id="b7555-126">Line-oriented and call-oriented messages are passed to a different callback procedure than phone-oriented messages.</span></span>

<span data-ttu-id="b7555-127">Для каждого сообщения в этом разделе перечислены следующие элементы.</span><span class="sxs-lookup"><span data-stu-id="b7555-127">For each message, this section lists the following items:</span></span>

-   <span data-ttu-id="b7555-128">Назначение сообщения</span><span class="sxs-lookup"><span data-stu-id="b7555-128">The purpose of the message</span></span>
-   <span data-ttu-id="b7555-129">Процедура обратного вызова, к которой передается сообщение</span><span class="sxs-lookup"><span data-stu-id="b7555-129">The callback procedure to which this message is passed</span></span>
-   <span data-ttu-id="b7555-130">Описание параметров сообщения</span><span class="sxs-lookup"><span data-stu-id="b7555-130">A description of the message parameters</span></span>
-   <span data-ttu-id="b7555-131">Необязательные комментарии об использовании сообщения</span><span class="sxs-lookup"><span data-stu-id="b7555-131">Optional comments about using the message</span></span>
-   <span data-ttu-id="b7555-132">Необязательные ссылки на другие функции, сообщения и структуры данных</span><span class="sxs-lookup"><span data-stu-id="b7555-132">Optional references to other functions, messages, and data structures</span></span>
-   <span data-ttu-id="b7555-133">Необязательные комментарии, сравнивающие это сообщение с интерфейсом TAPI</span><span class="sxs-lookup"><span data-stu-id="b7555-133">Optional comments comparing this message to the TAPI interface</span></span>

<span data-ttu-id="b7555-134">Некоторые сообщения используются для уведомления TAPI об изменении состояния объекта.</span><span class="sxs-lookup"><span data-stu-id="b7555-134">Certain messages are used to notify TAPI about a change in an object's status.</span></span> <span data-ttu-id="b7555-135">Эти сообщения предоставляют маркер непрозрачного объекта TAPI и указывает, какой элемент состояния изменился.</span><span class="sxs-lookup"><span data-stu-id="b7555-135">These messages provide the TAPI opaque object handle and an indication of which status item has changed.</span></span> <span data-ttu-id="b7555-136">Затем TAPI может вызвать соответствующую функцию "Get Status" объекта, чтобы получить полное состояние объекта.</span><span class="sxs-lookup"><span data-stu-id="b7555-136">TAPI can subsequently call an appropriate "get status" function of the object to obtain the object's full status.</span></span>

<span data-ttu-id="b7555-137">При возникновении события сообщение может быть или не отправлено в TAPI.</span><span class="sxs-lookup"><span data-stu-id="b7555-137">When an event occurs, a message may or may not be sent to TAPI.</span></span> <span data-ttu-id="b7555-138">Для некоторых типов событий, таких как изменение состояния, TAPI указывает набор изменений состояния, в которых он заинтересован.</span><span class="sxs-lookup"><span data-stu-id="b7555-138">For some event types, such as status changes, TAPI specifies a set of status changes in which it is interested.</span></span> <span data-ttu-id="b7555-139">Поставщик услуг должен ограничить события сообщений о состоянии и сообщения об изменении состояния, содержащиеся в этом наборе.</span><span class="sxs-lookup"><span data-stu-id="b7555-139">The service provider is advised to limit the status-change message events it reports to those included in this set.</span></span> <span data-ttu-id="b7555-140">Поставщик услуг не должен соответствовать этому ограничению.</span><span class="sxs-lookup"><span data-stu-id="b7555-140">The service provider is not required to adhere to this limit.</span></span> <span data-ttu-id="b7555-141">Иными словами, он может сообщать больше изменений, чем строго требуется.</span><span class="sxs-lookup"><span data-stu-id="b7555-141">In other words, it may report more changes than are strictly necessary.</span></span> <span data-ttu-id="b7555-142">Однако он должен попытаться наблюдать за пределами производительности.</span><span class="sxs-lookup"><span data-stu-id="b7555-142">However, it should try to observe the limit for performance reasons.</span></span>

<span data-ttu-id="b7555-143">\_Сообщение ответа строки не используется на уровне тспи.</span><span class="sxs-lookup"><span data-stu-id="b7555-143">The LINE\_REPLY message is not used at the TSPI level.</span></span> <span data-ttu-id="b7555-144">Завершение асинхронного запроса сообщается с помощью обратного вызова [**асинхронного \_ завершения**](/windows/win32/api/tspi/nc-tspi-async_completion) .</span><span class="sxs-lookup"><span data-stu-id="b7555-144">Completion of an asynchronous request is reported using the [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) callback.</span></span>

<span data-ttu-id="b7555-145">\_Ответное сообщение для телефона не используется на уровне тспи.</span><span class="sxs-lookup"><span data-stu-id="b7555-145">The PHONE\_REPLY message is not used at the TSPI level.</span></span> <span data-ttu-id="b7555-146">Завершение асинхронного запроса сообщается с помощью обратного вызова [**асинхронного \_ завершения**](/windows/win32/api/tspi/nc-tspi-async_completion) .</span><span class="sxs-lookup"><span data-stu-id="b7555-146">Completion of an asynchronous request is reported using the [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) callback.</span></span>

<span data-ttu-id="b7555-147">Дополнительные сведения см. в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="b7555-147">For more information see the following topics:</span></span>

-   [<span data-ttu-id="b7555-148">Сообщения устройства ТСПИ Line</span><span class="sxs-lookup"><span data-stu-id="b7555-148">TSPI Line Device Messages</span></span>](tspi-line-device-messages.md)
-   [<span data-ttu-id="b7555-149">Сообщения устройства ТСПИ Phone</span><span class="sxs-lookup"><span data-stu-id="b7555-149">TSPI Phone Device Messages</span></span>](tspi-phone-device-messages.md)

 

 
