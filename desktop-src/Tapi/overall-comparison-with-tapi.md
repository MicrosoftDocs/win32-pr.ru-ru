---
description: Спецификация ТСПИ очень тесно связана с спецификациями для TAPI 2,2 (TAPI/C).
ms.assetid: 2c51f7e3-c741-4736-9611-2327d65b427e
title: Общее сравнение с TAPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fce81d569d042cdd3eeb87088b1b7027858ca806
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105673847"
---
# <a name="overall-comparison-with-tapi"></a><span data-ttu-id="55a85-103">Общее сравнение с TAPI</span><span class="sxs-lookup"><span data-stu-id="55a85-103">Overall Comparison with TAPI</span></span>

<span data-ttu-id="55a85-104">Спецификация ТСПИ очень тесно связана с спецификациями для TAPI 2,2 (TAPI/C).</span><span class="sxs-lookup"><span data-stu-id="55a85-104">The TSPI specification is very closely related to the specifications for TAPI 2.2 (TAPI/C).</span></span> <span data-ttu-id="55a85-105">Большинство функций в одной из них имеют соответствующую функцию в другой.</span><span class="sxs-lookup"><span data-stu-id="55a85-105">Most of the functions in one have a corresponding function in the other.</span></span> <span data-ttu-id="55a85-106">Обычная корреспонденция выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="55a85-106">The usual correspondence is as follows:</span></span>

-   <span data-ttu-id="55a85-107">Функции ТСПИ имеют те же имена, что и функции TAPI, за исключением того, что они добавляются к «**тспи \_**».</span><span class="sxs-lookup"><span data-stu-id="55a85-107">TSPI functions have the same names as TAPI functions except that they are prepended with "**TSPI\_**".</span></span> <span data-ttu-id="55a85-108">Например, функция TAPI [**линеакцепт**](/windows/win32/api/tapi/nf-tapi-lineaccept) соответствует функции тспи [**тспи \_ линеакцепт**](/windows/win32/api/tspi/nf-tspi-tspi_lineaccept).</span><span class="sxs-lookup"><span data-stu-id="55a85-108">For example, the TAPI function [**lineAccept**](/windows/win32/api/tapi/nf-tapi-lineaccept) corresponds to the TSPI function [**TSPI\_lineAccept**](/windows/win32/api/tspi/nf-tspi-tspi_lineaccept).</span></span>
-   <span data-ttu-id="55a85-109">Процедуры, допускающие асинхронную операцию, вставляют в качестве первого параметра параметр *дврекуестид* типа [DRV \_ REQUESTID](drv-requestid.md) .</span><span class="sxs-lookup"><span data-stu-id="55a85-109">Procedures that allow asynchronous operation insert a *dwRequestID* parameter of type [DRV\_REQUESTID](drv-requestid.md) as their first parameter.</span></span> <span data-ttu-id="55a85-110">Этот параметр определяет значение, которое должно быть возвращено для указания асинхронной операции и для асинхронного завершения.</span><span class="sxs-lookup"><span data-stu-id="55a85-110">This parameter specifies the value to be returned to indicate asynchronous operation and to report asynchronous completion.</span></span>
-   <span data-ttu-id="55a85-111">параметры *хкалл* типа хкалл заменяются параметрами *хдкалл* типа [хдрвкалл](hdrvline.md), указывающими на маркер поставщика услуг для вызова.</span><span class="sxs-lookup"><span data-stu-id="55a85-111">*hCall* parameters of type HCALL are replaced with *hdCall* parameters of type [HDRVCALL](hdrvline.md), indicating the service provider's handle for the call.</span></span>
-   <span data-ttu-id="55a85-112">параметры *хлине* типа хлине заменяются параметрами *хдлине* типа [хдрвлине](hdrvline.md), которые указывают на маркер поставщика услуг для строки.</span><span class="sxs-lookup"><span data-stu-id="55a85-112">*hLine* parameters of type HLINE are replaced with *hdLine* parameters of -type [HDRVLINE](hdrvline.md), indicating the service provider's handle for the line.</span></span>
-   <span data-ttu-id="55a85-113">параметры *хфоне* типа хфоне заменяются параметрами *хдфоне* типа [хдрвфоне](hdrvphone.md), которые указывают на маркер поставщика услуг для телефона.</span><span class="sxs-lookup"><span data-stu-id="55a85-113">*hPhone* parameters of type HPHONE are replaced with *hdPhone* parameters of type [HDRVPHONE](hdrvphone.md), indicating the service provider's handle for the phone.</span></span>
-   <span data-ttu-id="55a85-114">Процедуры, создающие новый вызов, например [**тспи \_ линемакекалл**](/windows/win32/api/tspi/nf-tspi-tspi_linemakecall), заменяют один параметр *Лфкалл* двумя параметрами: *хткалл* типа [хтапикалл](htapicall.md) , который передает маркер TAPI для вызова, и *лфдкалл* типа лфдрвкалл, который указывает расположение, в которое поставщик услуг должен записать новый маркер для вызова.</span><span class="sxs-lookup"><span data-stu-id="55a85-114">Procedures that create a new call, such as [**TSPI\_lineMakeCall**](/windows/win32/api/tspi/nf-tspi-tspi_linemakecall), replace a single *lphCall* parameter with two parameters: an *htCall* of type [HTAPICALL](htapicall.md) parameter that passes in the TAPI handle for the call, and an *lphdCall* of type LPHDRVCALL that indicates the location to which the service provider must write its new handle for the call.</span></span> <span data-ttu-id="55a85-115">Аналогичное разбиение параметров происходит в [**тспи \_ Линеопен**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen) и [**тспи \_ фонеопен**](/windows/win32/api/tspi/nf-tspi-tspi_phoneopen).</span><span class="sxs-lookup"><span data-stu-id="55a85-115">A similar split of parameters occurs in [**TSPI\_lineOpen**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen) and [**TSPI\_phoneOpen**](/windows/win32/api/tspi/nf-tspi-tspi_phoneopen).</span></span>
-   <span data-ttu-id="55a85-116">На уровне ТСПИ отсутствует понятие "привилегия", связанное с дескрипторами устройств.</span><span class="sxs-lookup"><span data-stu-id="55a85-116">At the TSPI level, there is no notion of "privilege" associated with device handles.</span></span> <span data-ttu-id="55a85-117">Более того, на уровне API каждое приложение, имеющее устройство или обработчик вызова, имеет другой обработчик, но TAPI объединяет их в единый маркер на стороне поставщика услуг.</span><span class="sxs-lookup"><span data-stu-id="55a85-117">Furthermore, at the API level, each application that has a device or call handle has a different handle, but TAPI merges these into a single handle in the service provider side.</span></span> <span data-ttu-id="55a85-118">Как следствие, коды ошибок и сообщения о состоянии, относящиеся к привилегиям и числу клиентов, использующих устройство, не отображаются на уровне ТСПИ.</span><span class="sxs-lookup"><span data-stu-id="55a85-118">As a consequence, the error codes and status messages relating to privilege and number of clients using a device do not appear at the TSPI level.</span></span>

<span data-ttu-id="55a85-119">Набор функций TAPI не сопоставлен друг с одной на наборе функций ТСПИ.</span><span class="sxs-lookup"><span data-stu-id="55a85-119">The set of TAPI functions do not map one to one onto the set of TSPI functions.</span></span> <span data-ttu-id="55a85-120">В частности, функции, связанные с привилегией, переводом номера телефона и обменом данными между приложениями, обрабатываются TAPI и не имеют соответствующей функции в ТСПИ.</span><span class="sxs-lookup"><span data-stu-id="55a85-120">In particular, functions related to privilege, phone number translation, and interapplication communication are handled by TAPI and have no corresponding function in TSPI.</span></span> <span data-ttu-id="55a85-121">Другие функции, например, используемые для настройки и инициализации поставщика служб, не имеют соответствующих функций в TAPI.</span><span class="sxs-lookup"><span data-stu-id="55a85-121">Other functions, such as those used for service-provider configuration and initialization, have no corresponding functions in TAPI.</span></span>

 

 
