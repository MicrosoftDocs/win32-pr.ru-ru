---
description: Многие приложения зависят от отношения времени между событиями мультимедиа (например, число полученных разрядов DTMF) для определения природы запрошенной операции.
ms.assetid: 8d25a31f-de40-4c74-b8e7-a81fbfd47db2
title: Таймеры событий мультимедиа
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4a584518c9c33e8991bd2388f01cb863bab1c7a3
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "105684765"
---
# <a name="media-event-timers"></a><span data-ttu-id="ad79a-103">Таймеры событий мультимедиа</span><span class="sxs-lookup"><span data-stu-id="ad79a-103">Media Event Timers</span></span>

<span data-ttu-id="ad79a-104">Многие приложения зависят от отношения времени между событиями мультимедиа (например, число полученных разрядов DTMF) для определения природы запрошенной операции.</span><span class="sxs-lookup"><span data-stu-id="ad79a-104">Many applications depend on the timing relationship between media events (for example, DTMF digits received) to determine the nature of a requested operation.</span></span> <span data-ttu-id="ad79a-105">Например, в приложении для работы с голосовыми сообщениями две последовательные цифры DTMF "1" могут означать "резервное копирование двух сегментов" или "воспроизведение с начала сообщения" в зависимости от того, сколько времени прошло между двумя цифрами.</span><span class="sxs-lookup"><span data-stu-id="ad79a-105">For example, in a voice mail application, two consecutive DTMF "1" digits may mean "back up two segments" or "replay from beginning of message", depending on how much time elapsed between the two digits.</span></span> <span data-ttu-id="ad79a-106">В клиентской или серверной среде, если обнаружение DTMF выполняется на отдельном процессоре, отличном от того, на котором запущено приложение, задержка в локальной сети очень высока, так как связь времени между событиями мультимедиа будет отклонена, и в результате эти различия по времени могут быть потеряны или станут ненадежными.</span><span class="sxs-lookup"><span data-stu-id="ad79a-106">In a client/server environment, if the DTMF detection is being performed on a separate processor from the one on which the application is running, latency in the local area network makes it very likely that the timing relationship between media events will be skewed, with the result that these timing-based differences could be lost or become unreliable.</span></span>

<span data-ttu-id="ad79a-107">Для устранения этой проблемы несколько сообщений TAPI могут иметь метку времени.</span><span class="sxs-lookup"><span data-stu-id="ad79a-107">To resolve this issue, several TAPI messages can be timestamped.</span></span> <span data-ttu-id="ad79a-108">Так как это относительная продолжительность между этими событиями, то "время события" не имеет значения, а также время, относящееся к моменту времени, для этих отметок времени используется время в миллисекундах "с момента запуска Windows", возвращаемого функцией [**жеттикккаунт**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-gettickcount) .</span><span class="sxs-lookup"><span data-stu-id="ad79a-108">Because it is the relative timing between these events that is important, the "clock time" of the event is not important, and sub-second timing is involved, these timestamps use the millisecond-resolution "time since Windows started" returned by the [**GetTickCount**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-gettickcount) function.</span></span> <span data-ttu-id="ad79a-109">Приложения должны иметь в виду, что это счетчик тактов на сервере (или на компьютере, на котором работает поставщик услуг, непосредственно управляющее оборудованием), и не обязательно является компьютером, на котором выполняются приложения. Таким же отметка времени в этих сообщениях TAPI может сравниваться только друг с другом, а не со значением, возвращаемым функцией **жеттикккаунт** на процессоре, на котором выполняется приложение.</span><span class="sxs-lookup"><span data-stu-id="ad79a-109">Applications must be aware that this is the tick count on the server (or machine where the service provider directly managing the hardware is running), and is not necessarily the same machine on which the application is executing; thus, the timestamps in these TAPI messages can only be compared to each other, and not to the value returned by **GetTickCount** on the processor on which the application is running.</span></span>

<span data-ttu-id="ad79a-110">К сообщениям TAPI, которые могут быть отметкой времени, относятся: [**Line \_ гасердигитс**](line-gatherdigits.md), [**\_ монитордигитс**](line-monitordigits.md) [**строки, \_**](line-generate.md)Line [**\_ монитормедиа**](line-monitormedia.md)и [**Line \_ монитортоне**](line-monitortone.md).</span><span class="sxs-lookup"><span data-stu-id="ad79a-110">The TAPI messages that can be timestamped are: [**LINE\_GATHERDIGITS**](line-gatherdigits.md), [**LINE\_GENERATE**](line-generate.md), [**LINE\_MONITORDIGITS**](line-monitordigits.md), [**LINE\_MONITORMEDIA**](line-monitormedia.md), and [**LINE\_MONITORTONE**](line-monitortone.md).</span></span> <span data-ttu-id="ad79a-111">Счетчик тактов вставляется в *dwParam3* этих сообщений.</span><span class="sxs-lookup"><span data-stu-id="ad79a-111">The tick count is inserted into *dwParam3* of these messages.</span></span> <span data-ttu-id="ad79a-112">Если значение метки времени не поддерживается поставщиком услуг (который указывается параметром поставщика услуг *dwParam3* в этих сообщениях равным 0), то интерфейс TAPI будет вставлять счетчик тактов в *dwParam3* всех этих сообщений (он может быть наклонен немного, но меньше, чем если бы приложение выполняло такое же действие после того, как сообщения проходят схему межпроцессного взаимодействия).</span><span class="sxs-lookup"><span data-stu-id="ad79a-112">If timestamping is not supported by the service provider (which is indicated by the service provider setting *dwParam3* in these messages to 0), then TAPI itself will insert the tick count into *dwParam3* of all of these messages (it can be skewed somewhat, but less than if the application did the same after the messages had traversed an interprocess communication scheme).</span></span>

 

 
