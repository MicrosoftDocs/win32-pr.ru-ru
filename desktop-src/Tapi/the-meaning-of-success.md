---
description: Когда опертион возвращает значение SUCCESs, функция успешно продвигается до точки, определяемой API в функции по каждой функции.
ms.assetid: e4077d77-dee1-4f1a-a6ee-20ca2f92a1ec
title: Значение успеха
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d183695e9dce9df88dea5fe9464f16163130cd0f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105683900"
---
# <a name="the-meaning-of-success"></a><span data-ttu-id="affa3-103">Значение успеха</span><span class="sxs-lookup"><span data-stu-id="affa3-103">The Meaning of SUCCESS</span></span>

## <a name="tapi-2x"></a><span data-ttu-id="affa3-104">Интерфейс TAPI 2. x</span><span class="sxs-lookup"><span data-stu-id="affa3-104">TAPI 2.x</span></span>

<span data-ttu-id="affa3-105">Если операция возвращает индикатор успеха (синхронно по возвращении функции для синхронных операций или асинхронно через [**\_ ответ на строку**](./line-reply.md) или [**\_ ответное**](./phone-reply.md) сообщение по телефону для асинхронных операций), предполагается, что выполняются следующие условия:</span><span class="sxs-lookup"><span data-stu-id="affa3-105">When an operation returns a SUCCESS indication (either synchronously upon function return for synchronous operations, or asynchronously through a [**LINE\_REPLY**](./line-reply.md) or [**PHONE\_REPLY**](./phone-reply.md) message for asynchronous operations), the following is assumed to be true:</span></span>

-   <span data-ttu-id="affa3-106">Функция успешно продвигается до точки, определяемой API на основе функции.</span><span class="sxs-lookup"><span data-stu-id="affa3-106">The function has successfully progressed to a point that is defined by the API on a function-by-function basis.</span></span> <span data-ttu-id="affa3-107">После достижения этой точки либо операция полностью завершается, либо она находится в состоянии, что независимые сообщения о состоянии будут сообщать приложению о последующем выполнении.</span><span class="sxs-lookup"><span data-stu-id="affa3-107">After that point has been reached, either the operation is completely finished, or it will be in a state such that independent state messages will inform the application about subsequent progress.</span></span>

    <span data-ttu-id="affa3-108">Например, реализация [**линемакекалл**](/windows/win32/api/tapi/nf-tapi-linemakecall) поставщика услуг должна возвращать значение Success, а не позднее, когда вызов переходит в состояние продолжения вызова.</span><span class="sxs-lookup"><span data-stu-id="affa3-108">For example, a service provider's implementation of [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall) should return SUCCESS no later than when the call enters the proceeding call state.</span></span> <span data-ttu-id="affa3-109">В идеале поставщик должен сообщать об успешном выполнении как можно скорее, например, когда вызов попадает в состояние гудка звонка (если применимо).</span><span class="sxs-lookup"><span data-stu-id="affa3-109">Ideally, the provider should indicate SUCCESS as soon as possible, such as when the call enters the dial tone call state (if applicable).</span></span> <span data-ttu-id="affa3-110">После того как в приложение будет возвращен успешный результат, строки \_ каллстате сообщения будут сообщать приложению о ходе выполнения вызова.</span><span class="sxs-lookup"><span data-stu-id="affa3-110">Once SUCCESS has been returned to the application, LINE\_CALLSTATE messages will inform the application about the progress of the call.</span></span> <span data-ttu-id="affa3-111">Поставщики услуг, которые отменяют возврат индикации успеха **линемакекалл** , например до завершения набора номера, должны учитывать, что это означает, что поставщик не имеет недостатков, так как удобство использования на уровне приложения может быть значительно ограничено.</span><span class="sxs-lookup"><span data-stu-id="affa3-111">Service providers that delay returning the **lineMakeCall** SUCCESS indication, for example, until after dialing is complete, must be aware that this places that provider at a disadvantage because the usability at the application level may be severely limited.</span></span> <span data-ttu-id="affa3-112">Например, пользователь не сможет отменить запрос на настройку вызова, пока не будет выполнен вызов и все цифры были отправлены в коммутатор.</span><span class="sxs-lookup"><span data-stu-id="affa3-112">For example, it would not be possible for a user to cancel the call setup request in progress until after dialing is complete and all digits had been sent to the switch.</span></span>

-   <span data-ttu-id="affa3-113">Функции, возвращающие сведения (например, [**линежеткаллинфо**](/windows/win32/api/tapi/nf-tapi-linegetcallinfo)), ВОЗвращают успешно, только если запрашиваемые данные доступны для приложения.</span><span class="sxs-lookup"><span data-stu-id="affa3-113">Functions that return information (such as [**lineGetCallInfo**](/windows/win32/api/tapi/nf-tapi-linegetcallinfo)) return SUCCESS only when the requested information is available to the application.</span></span> <span data-ttu-id="affa3-114">Функции, возвращающие дескрипторы (для строк или вызовов), могут возвращать значение SUCCESs только после того, как дескриптор является допустимым.</span><span class="sxs-lookup"><span data-stu-id="affa3-114">Functions that return handles (to lines or calls), can return SUCCESS only after the handle is valid.</span></span> <span data-ttu-id="affa3-115">Сообщения не должны отправляться по этой строке или вызываться до успешного указания функции, вызвавшей ее создание.</span><span class="sxs-lookup"><span data-stu-id="affa3-115">No messages should be sent about that line or call prior to the SUCCESS indication of the function that caused its creation.</span></span> <span data-ttu-id="affa3-116">Поставщик услуг отвечает за подавление таких сообщений.</span><span class="sxs-lookup"><span data-stu-id="affa3-116">The service provider is responsible for suppressing such messages.</span></span>
-   <span data-ttu-id="affa3-117">Функции, которые обеспечивают выполнение определенных постоянных условий (например, [**линемонитордигитс**](/windows/win32/api/tapi/nf-tapi-linemonitordigits)), возвращают результат только после включения условия, а не при повторном удалении условия (например, не после завершения отслеживания всех цифр).</span><span class="sxs-lookup"><span data-stu-id="affa3-117">Functions that enable certain permanent conditions (such as [**lineMonitorDigits**](/windows/win32/api/tapi/nf-tapi-linemonitordigits)) return SUCCESS only after the condition is enabled, not when the condition is removed again (for example, not when all digit monitoring has completed).</span></span>
-   <span data-ttu-id="affa3-118">Функции управления вызовом (такие как [**линехолд**](/windows/win32/api/tapi/nf-tapi-linehold) или [**линесетуптрансфер**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer), но не [**линемакекалл**](/windows/win32/api/tapi/nf-tapi-linemakecall)) возвращают успешное выполнение после завершения операции.</span><span class="sxs-lookup"><span data-stu-id="affa3-118">Call-control functions (such as [**lineHold**](/windows/win32/api/tapi/nf-tapi-linehold) or [**lineSetupTransfer**](/windows/win32/api/tapi/nf-tapi-linesetuptransfer), but not [**lineMakeCall**](/windows/win32/api/tapi/nf-tapi-linemakecall)) return SUCCESS when the operation is completed.</span></span> <span data-ttu-id="affa3-119">Некоторые телефонные сети не предоставляют подтверждения (положительные или отрицательные) о завершении определенных запросов, выполняемых поставщиками служб.</span><span class="sxs-lookup"><span data-stu-id="affa3-119">Some telephone networks do not provide acknowledgment (positive or negative) about the completion of certain requests made by service providers.</span></span> <span data-ttu-id="affa3-120">В таких ситуациях поставщик услуг должен принять решение об успешном или неуспешном выполнении запроса.</span><span class="sxs-lookup"><span data-stu-id="affa3-120">In such situations, the service provider must decide upon success or failure of the request.</span></span> <span data-ttu-id="affa3-121">Таким образом, успешное завершение может означать, что поставщик услуг инициировал действия для выполнения запроса, но не обязательно что-то еще.</span><span class="sxs-lookup"><span data-stu-id="affa3-121">Therefore, SUCCESS may indicate that the service provider has initiated actions to fulfill the request, but not necessarily anything more.</span></span> <span data-ttu-id="affa3-122">Например, поставщик может не получить подтверждение голосами подтверждающими для своего запроса от коммутатора, хотя он уже отправил в приложение сообщение об успешном выполнении.</span><span class="sxs-lookup"><span data-stu-id="affa3-122">For example, the provider may receive no affirmative acknowledgment to its request from the switch, although it has already sent a success message to the application.</span></span>

## <a name="tapi-3x"></a><span data-ttu-id="affa3-123">Интерфейс TAPI 3. x</span><span class="sxs-lookup"><span data-stu-id="affa3-123">TAPI 3.x</span></span>

<span data-ttu-id="affa3-124">Когда операция возвращает индикатор успеха (синхронно по возвращении функции для синхронных операций или асинхронно с вызовом асинхронной процедуры обратного вызова асинхронного [**\_ выполнения**](/windows/win32/api/tspi/nc-tspi-async_completion) ), предполагается, что выполняются следующие условия:</span><span class="sxs-lookup"><span data-stu-id="affa3-124">When an operation returns a SUCCESS indication (either synchronously upon function return for synchronous operations, or asynchronously with a call to the [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) callback procedure for asynchronous operations), then the following are assumed to be true:</span></span>

-   <span data-ttu-id="affa3-125">Функция успешно продвигается до точки, определенной поставщиком услуг.</span><span class="sxs-lookup"><span data-stu-id="affa3-125">The function has successfully progressed up to a service-provider-defined point.</span></span> <span data-ttu-id="affa3-126">Поставщик услуг определяет точку на уровне функций.</span><span class="sxs-lookup"><span data-stu-id="affa3-126">The service provider defines the point on a function-by-function basis.</span></span> <span data-ttu-id="affa3-127">После достижения этого момента операция завершается полностью или находится в состоянии, что последующие независимые сообщения о состоянии будут сообщать приложению о ходе выполнения.</span><span class="sxs-lookup"><span data-stu-id="affa3-127">After reaching that point, either the operation is completely finished, or it is in a state such that subsequent independent state messages will inform the application about progress.</span></span>
-   <span data-ttu-id="affa3-128">Функции, возвращающие сведения (например, [**тспи \_ Линепарк**](/windows/win32/api/tspi/nf-tspi-tspi_linepark) или [**тспи \_ ЛИНЕДЕВСПЕЦИФИК**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific)), возвращают успешно, только если запрашиваемая информация доступна вызывающему объекту.</span><span class="sxs-lookup"><span data-stu-id="affa3-128">Functions that return information (such as [**TSPI\_linePark**](/windows/win32/api/tspi/nf-tspi-tspi_linepark) or [**TSPI\_lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific)) return SUCCESS only when the requested information is available to the caller.</span></span> <span data-ttu-id="affa3-129">Функции, возвращающие дескрипторы (к открытым строкам, открытым телефонам или вызовам), возвращают дескрипторы немедленно при возврате функции.</span><span class="sxs-lookup"><span data-stu-id="affa3-129">Functions that return handles (to opened lines, opened phones, or calls) return the handles immediately on function return.</span></span> <span data-ttu-id="affa3-130">Как поставщик услуг, так и вызывающий объект должны рассматривать дескрипторы как "еще не действительные", пока не будет указано окончательное значение успешного завершения.</span><span class="sxs-lookup"><span data-stu-id="affa3-130">Both the service provider and the caller must treat the handles as "not yet valid" until the eventual SUCCESS indication.</span></span> <span data-ttu-id="affa3-131">Поставщик услуг отвечает за предотвращение любых сообщений обратного вызова в процедуру [**линивент**](/windows/win32/api/tspi/nc-tspi-lineevent) или [**фонивент**](/windows/desktop/api/tspi/nc-tspi-phoneevent) , связанную с этой открытой строкой, открытым телефоном или вызовом до тех пор, пока не появится индикатор успеха.</span><span class="sxs-lookup"><span data-stu-id="affa3-131">The service provider is responsible for preventing any callback messages to the [**LINEEVENT**](/windows/win32/api/tspi/nc-tspi-lineevent) or [**PHONEEVENT**](/windows/desktop/api/tspi/nc-tspi-phoneevent) procedure about that opened line, opened phone, or call until after the SUCCESS indication.</span></span> <span data-ttu-id="affa3-132">Если итоговый результат является ошибкой, любой возвращаемый обработчик сразу становится недействительным без каких-либо дальнейших действий.</span><span class="sxs-lookup"><span data-stu-id="affa3-132">If the eventual result is an error, any handle returned immediately becomes invalid without any further action.</span></span>
-   <span data-ttu-id="affa3-133">Функции, которые поддерживают определенные постоянные условия (например, [**тспи \_ линемонитордигитс**](/windows/win32/api/tspi/nf-tspi-tspi_linemonitordigits)), возвращают результат только после включения условия, а не при повторном удалении условия (например, не при завершении контроля цифр).</span><span class="sxs-lookup"><span data-stu-id="affa3-133">Functions that enable certain permanent conditions (like [**TSPI\_lineMonitorDigits**](/windows/win32/api/tspi/nf-tspi-tspi_linemonitordigits)) return SUCCESS only after the condition is enabled, not when the condition is removed again (for example, not when digit monitoring is complete).</span></span>
-   <span data-ttu-id="affa3-134">Функции управления вызовом (такие как [**тспи \_ Линехолд**](/windows/win32/api/tspi/nf-tspi-tspi_linehold) и [**тспи \_ линесетуптрансфер**](/windows/win32/api/tspi/nf-tspi-tspi_linesetuptransfer), но не [**ТСПИ \_ линемакекалл**](/windows/win32/api/tspi/nf-tspi-tspi_linemakecall)) возвращают успешное выполнение после завершения операции.</span><span class="sxs-lookup"><span data-stu-id="affa3-134">Call control functions (such as [**TSPI\_lineHold**](/windows/win32/api/tspi/nf-tspi-tspi_linehold) and [**TSPI\_lineSetupTransfer**](/windows/win32/api/tspi/nf-tspi-tspi_linesetuptransfer), but not [**TSPI\_lineMakeCall**](/windows/win32/api/tspi/nf-tspi-tspi_linemakecall)) return SUCCESS when the operation is completed.</span></span> <span data-ttu-id="affa3-135">В средах телефонии, не предоставляющих положительных подтверждений этих функций, поставщик услуг вынужден принять оптимальное решение относительно успеха или неудачи функции.</span><span class="sxs-lookup"><span data-stu-id="affa3-135">In telephony environments that do not provide positive acknowledgment of these functions, the service provider is forced to make a best-effort decision as to the success or failure of the function.</span></span>
-   <span data-ttu-id="affa3-136">Реализация [**тспи \_ линемакекалл**](/windows/win32/api/tspi/nf-tspi-tspi_linemakecall) поставщика услуг должна ВОЗвращать значение Success, а не позднее, когда вызов переходит в состояние *продолжения* вызова.</span><span class="sxs-lookup"><span data-stu-id="affa3-136">A service provider's implementation of [**TSPI\_lineMakeCall**](/windows/win32/api/tspi/nf-tspi-tspi_linemakecall) must return SUCCESS no later than when the call enters the *proceeding* call state.</span></span> <span data-ttu-id="affa3-137">В идеале поставщик указывает на успешное выполнение как можно скорее, например, когда вызов переходит в состояние вызова *диалтоне* (если применимо).</span><span class="sxs-lookup"><span data-stu-id="affa3-137">Ideally, the provider indicates SUCCESS as soon as possible, such as when the call enters the *dialtone* call state (if applicable).</span></span> <span data-ttu-id="affa3-138">Когда в приложение возвращается значение SUCCESs, [**строки \_ каллстате**](/previous-versions/windows/desktop/legacy/ms725219(v=vs.85)) сообщения сообщают вызывающей стороне о ходе вызова.</span><span class="sxs-lookup"><span data-stu-id="affa3-138">When SUCCESS is returned to the application, [**LINE\_CALLSTATE**](/previous-versions/windows/desktop/legacy/ms725219(v=vs.85)) messages inform the caller about the progress of the call.</span></span> <span data-ttu-id="affa3-139">Поставщики услуг, которые отдерживают возврат **тспи \_ линемакекалл** успешного выполнения, например до завершения набора номера, значительно ограничивают гибкость на уровне приложения.</span><span class="sxs-lookup"><span data-stu-id="affa3-139">Service providers that delay returning the **TSPI\_lineMakeCall** SUCCESS indication, for example, until after dialing is complete, severely limit flexibility at the application level.</span></span> <span data-ttu-id="affa3-140">Задержка при возврате успеха в **тспи \_ линемакекалл** не позволяет пользователю отменить запрос на настройку вызова, пока не будет выполнен вызов, а все цифры будут отправлены в коммутатор.</span><span class="sxs-lookup"><span data-stu-id="affa3-140">Delay in returning SUCCESS in **TSPI\_lineMakeCall** prevents a user from canceling the call setup request in progress until after dialing is complete, and all digits are sent to the switch.</span></span>

 

 
