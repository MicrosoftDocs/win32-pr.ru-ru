---
description: Поставщики услуг реализуют подробные элементы управления телефонными устройствами. Поставщик услуг телефонии (TSP) предоставляет элементы управления вызовами и поставщик службы мультимедиа, если он существует, предоставляет контроль над потоком мультимедиа.
ms.assetid: eb63d55e-4a2b-4bc0-8001-99772f418d72
title: Поставщики услуг
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 424c11d5b99af7440835e8822a5631e1b36f48cb
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103999753"
---
# <a name="service-providers"></a><span data-ttu-id="98a07-104">Поставщики услуг</span><span class="sxs-lookup"><span data-stu-id="98a07-104">Service Providers</span></span>

<span data-ttu-id="98a07-105">Поставщики услуг реализуют подробные элементы управления телефонными устройствами.</span><span class="sxs-lookup"><span data-stu-id="98a07-105">Service providers implement detailed telephony device controls.</span></span> <span data-ttu-id="98a07-106">Поставщик услуг телефонии (TSP) предоставляет элементы управления вызовами и поставщик службы мультимедиа, если он существует, предоставляет контроль над потоком мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="98a07-106">A telephony service provider (TSP) provides call controls and a media service provider, if it exists, provides control over the media stream.</span></span>

<span data-ttu-id="98a07-107">Все поставщики услуг телефонии выполняются в процессе ТАПИСРВ.</span><span class="sxs-lookup"><span data-stu-id="98a07-107">All telephony service providers execute in the TAPISRV process.</span></span> <span data-ttu-id="98a07-108">Поставщики услуг могут создавать потоки в контексте ТАПИСРВ, необходимые для выполнения их работы, и быть уверенными, что ни один из ресурсов, создаваемых ими, не будет уничтожен при выходе какого бы то ни было отдельного приложения.</span><span class="sxs-lookup"><span data-stu-id="98a07-108">Service providers can create threads in the TAPISRV context as needed to do their work, and be confident that none of the resources they create will be destroyed by the exit of any individual application.</span></span> <span data-ttu-id="98a07-109">Сервер TAPI преобразует команды приложения по мере необходимости в единый набор команд, известный как интерфейс поставщика услуг телефонии (ТСПИ).</span><span class="sxs-lookup"><span data-stu-id="98a07-109">The TAPI Server translates application commands as needed into a consistent set of commands known as the Telephony Service Provider Interface (TSPI).</span></span>

<span data-ttu-id="98a07-110">Поставщики служб мультимедиа выполняются в пространстве процесса приложения, что позволяет быстро реагировать на них в элементах управления мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="98a07-110">Media service providers execute in the process space of the application, allowing for the fast response sometimes required in media controls.</span></span> <span data-ttu-id="98a07-111">Библиотека DLL TAPI обеспечивает единообразное соблюдение интерфейса поставщика службы мультимедиа (МСПИ).</span><span class="sxs-lookup"><span data-stu-id="98a07-111">The TAPI DLL provides for consistent adherence to the Media Service Provider Interface (MSPI).</span></span>

<span data-ttu-id="98a07-112">Дополнительные сведения о поставщиках услуг см. в статье [Общие сведения о поставщике услуг TAPI](./tapi-service-provider-overview.md).</span><span class="sxs-lookup"><span data-stu-id="98a07-112">For more detailed coverage of the service providers, please see [TAPI Service Provider Overview](./tapi-service-provider-overview.md).</span></span>

<span data-ttu-id="98a07-113">Под библиотекой DLL поставщика услуг телефонии поставщик услуг может использовать любые системные функции или другие необходимые компоненты.</span><span class="sxs-lookup"><span data-stu-id="98a07-113">Underneath the telephony service provider DLL, the service provider can use any system functions or other components necessary.</span></span> <span data-ttu-id="98a07-114">К этим функциям относятся [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) и [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol), работающие с независимыми поставщиками аппаратно-ориентированного и сервисного режима ядра, а также стандартные устройства, такие как последовательные и параллельные порты для управления внешними локально подключенными устройствами.</span><span class="sxs-lookup"><span data-stu-id="98a07-114">These functions include [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) and [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol), which work with independent hardware vendor-designed kernel mode components and services, as well as standard devices such as serial and parallel ports to control external, locally attached devices.</span></span> <span data-ttu-id="98a07-115">Они также могут получать доступ к сетевым службам (таким как RPC, сокеты Windows и именованные каналы) для телефонии клиента/сервера.</span><span class="sxs-lookup"><span data-stu-id="98a07-115">They can also access network services (such as RPC, Windows Sockets, and Named Pipes) for client/server telephony.</span></span>

<span data-ttu-id="98a07-116">Библиотека DLL пользовательского интерфейса поставщика услуг телефонии загружается TAPI в процесс приложения, вызывающего любую функцию поставщика услуг, которая может отображать диалоговое окно (например, [**тспи \_ линеконфигдиалог**](/windows/win32/api/tspi/nf-tspi-tspi_lineconfigdialog)).</span><span class="sxs-lookup"><span data-stu-id="98a07-116">The Telephony service provider user interface DLL is loaded by TAPI into the process of an application that invokes any of the service provider functions that can display a dialog box (for example, [**TSPI\_lineConfigDialog**](/windows/win32/api/tspi/nf-tspi-tspi_lineconfigdialog)).</span></span> <span data-ttu-id="98a07-117">Поставщик услуг также может вызвать загрузку и выполнение связанной с ним DLL пользовательского интерфейса в процессе работы приложения, если поставщик услуг должен отображать пользовательский интерфейс непредвиденным временем. Например, для отображения диалогового окна « **разговор/зависание** », отображаемого драйвером универсального модема (UNIMODEM) при использовании модема данных для вызова интерактивного речевого вызова с помощью [**тспи \_ линемакекалл**](/windows/win32/api/tspi/nf-tspi-tspi_linemakecall) (обычно не считается функцией, создающей пользовательский интерфейс).</span><span class="sxs-lookup"><span data-stu-id="98a07-117">The service provider can also cause its associated UI DLL to be loaded and executed in the process of an application if the service provider needs to display UI at unexpected times, such as to display the **Talk/Hang-up** dialog box displayed by the Universal Modem Driver (UNIMODEM) when a data modem is used to dial an interactive voice call using [**TSPI\_lineMakeCall**](/windows/win32/api/tspi/nf-tspi-tspi_linemakecall) (not normally considered to be a UI-generating function).</span></span>

<span data-ttu-id="98a07-118">Обработчик запросов прокси-сервера — это полное приложение телефонии, которое обычно выполняется на сервере телефонии (на том же сервере, на котором выполняется поставщик услуг телефонии для связанных устройств).</span><span class="sxs-lookup"><span data-stu-id="98a07-118">The proxy request handler is a full telephony application that normally executes on a telephony server (the same server on which the telephony service provider is executing for the associated line devices).</span></span> <span data-ttu-id="98a07-119">Эта архитектура, а не архитектура поставщика службы ВОСА, используется, когда конкретная служба более правильно реализована в приложении, чем в драйвере на сервере.</span><span class="sxs-lookup"><span data-stu-id="98a07-119">This architecture, rather than the WOSA service provider architecture, is used when a particular service is more appropriately implemented in an application than in a driver on the server.</span></span> <span data-ttu-id="98a07-120">Например, ACD-функции управления агентами реализуются в обработчике запросов прокси, а не в поставщике услуг.</span><span class="sxs-lookup"><span data-stu-id="98a07-120">For example, the ACD Agent management functions are implemented in a proxy request handler rather than in a service provider.</span></span>

<span data-ttu-id="98a07-121">Поставщик службы драйвера UNIMODEM для управления модемом доступен в операционных системах Windows Server 2003, Windows XP, Windows 2000 и Windows NT.</span><span class="sxs-lookup"><span data-stu-id="98a07-121">The UNIMODEM driver service provider for modem control is available on Windows Server 2003 operating systems, Windows XP, Windows 2000, and Windows NT.</span></span> <span data-ttu-id="98a07-122">Телефон Windows также включает универсальный интерфейс поставщика услуг телефонии (ТСПИ) в режиме ядра (КМДДСП), позволяющий реализовать поставщики услуг как драйверы устройств в режиме ядра.</span><span class="sxs-lookup"><span data-stu-id="98a07-122">Windows Telephony also includes a generic kernel-mode Telephony Service Provider Interface (TSPI) mapper, KMDDSP, that allows service providers to be implemented as kernel-mode device drivers.</span></span>

 

 
