---
title: Использование функций настройки монитора High-Level
description: Использование функций настройки монитора High-Level
ms.assetid: 23e5d45d-a924-4119-b21d-b24764b53a94
keywords:
- монитор, функции
- мониторинг, функции конфигурации высокого уровня
- мониторинг, перечисление физических мониторов
- монитор, непрерывные параметры
- Конфигурация мониторинга, функции высокоуровневой конфигурации
- мониторинг конфигурации, функции
- Конфигурация монитора, перечисление физических мониторов
- Конфигурация монитора, непрерывные параметры
- Перечисление физических мониторов
- функции конфигурации высокого уровня
- Параметры непрерывного монитора
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ff494388aac91d8aacd92ed4fe345722ea18659f
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "105661709"
---
# <a name="using-the-high-level-monitor-configuration-functions"></a><span data-ttu-id="eaef5-114">Использование функций настройки монитора High-Level</span><span class="sxs-lookup"><span data-stu-id="eaef5-114">Using the High-Level Monitor Configuration Functions</span></span>

## <a name="enumerating-physical-monitors"></a><span data-ttu-id="eaef5-115">Перечисление физических мониторов</span><span class="sxs-lookup"><span data-stu-id="eaef5-115">Enumerating Physical Monitors</span></span>

<span data-ttu-id="eaef5-116">Существует несколько функций, которые перечисляют устройства вывода, включая [**енумдисплаймониторс**](/windows/desktop/api/winuser/nf-winuser-enumdisplaymonitors) и [**мониторфромвиндов**](/windows/desktop/api/winuser/nf-winuser-monitorfromwindow).</span><span class="sxs-lookup"><span data-stu-id="eaef5-116">There are several functions that enumerate display devices, including [**EnumDisplayMonitors**](/windows/desktop/api/winuser/nf-winuser-enumdisplaymonitors) and [**MonitorFromWindow**](/windows/desktop/api/winuser/nf-winuser-monitorfromwindow).</span></span> <span data-ttu-id="eaef5-117">Эти функции описаны в документации по Windows GDI в разделе [несколько мониторов монитора](/windows/desktop/gdi/multiple-display-monitors).</span><span class="sxs-lookup"><span data-stu-id="eaef5-117">These functions are documented in the Windows GDI documentation, under the topic [Multiple Display Monitors](/windows/desktop/gdi/multiple-display-monitors).</span></span> <span data-ttu-id="eaef5-118">Эти функции возвращают дескрипторы **хмонитор** .</span><span class="sxs-lookup"><span data-stu-id="eaef5-118">These functions return **HMONITOR** handles.</span></span> <span data-ttu-id="eaef5-119">Несмотря на имя, обработчик **хмонитор** может быть связан с более чем одним физическим монитором.</span><span class="sxs-lookup"><span data-stu-id="eaef5-119">Despite the name, however, an **HMONITOR** handle can be associated with more than one physical monitor.</span></span> <span data-ttu-id="eaef5-120">Чтобы настроить параметры на мониторе, приложение должно получить уникальный маркер физического монитора, вызвав [**жетфисикалмониторсфромхмонитор**](/windows/desktop/api/PhysicalMonitorEnumerationAPI/nf-physicalmonitorenumerationapi-getphysicalmonitorsfromhmonitor).</span><span class="sxs-lookup"><span data-stu-id="eaef5-120">To configure the settings on a monitor, the application must get a unique handle to the physical monitor by calling [**GetPhysicalMonitorsFromHMONITOR**](/windows/desktop/api/PhysicalMonitorEnumerationAPI/nf-physicalmonitorenumerationapi-getphysicalmonitorsfromhmonitor).</span></span>

<span data-ttu-id="eaef5-121">Если приложение использует Direct3D, вы можете получить маркер монитора из устройства Direct3D, вызвав [**GetPhysicalMonitorsFromIDirect3DDevice9**](/windows/desktop/api/PhysicalMonitorEnumerationAPI/nf-physicalmonitorenumerationapi-getphysicalmonitorsfromidirect3ddevice9).</span><span class="sxs-lookup"><span data-stu-id="eaef5-121">If your application uses Direct3D, you can get a monitor handle from a Direct3D device by calling [**GetPhysicalMonitorsFromIDirect3DDevice9**](/windows/desktop/api/PhysicalMonitorEnumerationAPI/nf-physicalmonitorenumerationapi-getphysicalmonitorsfromidirect3ddevice9).</span></span>

## <a name="supported-functions"></a><span data-ttu-id="eaef5-122">Поддерживаемые функции</span><span class="sxs-lookup"><span data-stu-id="eaef5-122">Supported Functions</span></span>

<span data-ttu-id="eaef5-123">Монитор может не поддерживать все функции конфигурации монитора.</span><span class="sxs-lookup"><span data-stu-id="eaef5-123">A monitor might not support all of the monitor configuration functions.</span></span> <span data-ttu-id="eaef5-124">Чтобы узнать, какие функции поддерживает монитор, вызовите [**жетмониторкапабилитиес**](/windows/desktop/api/HighLevelMonitorConfigurationAPI/nf-highlevelmonitorconfigurationapi-getmonitorcapabilities).</span><span class="sxs-lookup"><span data-stu-id="eaef5-124">To find out which functions a monitor supports, call [**GetMonitorCapabilities**](/windows/desktop/api/HighLevelMonitorConfigurationAPI/nf-highlevelmonitorconfigurationapi-getmonitorcapabilities).</span></span>

## <a name="continuous-monitor-settings"></a><span data-ttu-id="eaef5-125">Параметры непрерывного монитора</span><span class="sxs-lookup"><span data-stu-id="eaef5-125">Continuous Monitor Settings</span></span>

<span data-ttu-id="eaef5-126">Параметр *непрерывного* монитора, который может варьироваться от минимального до максимального значения.</span><span class="sxs-lookup"><span data-stu-id="eaef5-126">A *continuous* monitor setting is one that can range between some minimum and maximum value.</span></span> <span data-ttu-id="eaef5-127">Большинство функций конфигурации монитора высокого уровня управляют параметрами непрерывного монитора.</span><span class="sxs-lookup"><span data-stu-id="eaef5-127">Most of the high-level monitor configuration functions control continuous monitor settings.</span></span> <span data-ttu-id="eaef5-128">Например, яркость и контрастность — непрерывные параметры.</span><span class="sxs-lookup"><span data-stu-id="eaef5-128">For example, brightness and contrast are continuous settings.</span></span>

<span data-ttu-id="eaef5-129">В параметрах непрерывного монитора не определены реальные единицы.</span><span class="sxs-lookup"><span data-stu-id="eaef5-129">Continuous monitor settings do not have defined real-world units.</span></span> <span data-ttu-id="eaef5-130">Единицы являются произвольными и могут изменяться от одного производителя к другому.</span><span class="sxs-lookup"><span data-stu-id="eaef5-130">The units are arbitrary and can vary from one manufacturer to another.</span></span> <span data-ttu-id="eaef5-131">Если два монитора имеют одинаковое значение яркости, например, один монитор может выглядеть намного ярче, чем другой.</span><span class="sxs-lookup"><span data-stu-id="eaef5-131">If two monitors have the same brightness value, for example, one monitor might look much brighter than another.</span></span> <span data-ttu-id="eaef5-132">Как правило, приложение будет представлять собой ползунки или элементы управления "вверх-вниз" для пользователя.</span><span class="sxs-lookup"><span data-stu-id="eaef5-132">Typically, an application will present slider controls or up-down controls to the user.</span></span> <span data-ttu-id="eaef5-133">Затем пользователь может настроить параметры, чтобы обеспечить наилучшее субъективное качество.</span><span class="sxs-lookup"><span data-stu-id="eaef5-133">The user can then adjust the settings to give the best subjective quality.</span></span>

## <a name="changes-in-monitor-state"></a><span data-ttu-id="eaef5-134">Изменения в состоянии монитора</span><span class="sxs-lookup"><span data-stu-id="eaef5-134">Changes in Monitor State</span></span>

<span data-ttu-id="eaef5-135">Монитор может изменять состояния по различным причинам, включая следующие:</span><span class="sxs-lookup"><span data-stu-id="eaef5-135">A monitor can change states for various reasons, including:</span></span>

-   <span data-ttu-id="eaef5-136">Пользователь изменяет параметры с помощью элементов управления на передней панели монитора.</span><span class="sxs-lookup"><span data-stu-id="eaef5-136">The user changes the settings with the monitor's front-panel controls.</span></span>
-   <span data-ttu-id="eaef5-137">Пользователь изменяет разрешение экрана монитора, частоту обновления или глубину.</span><span class="sxs-lookup"><span data-stu-id="eaef5-137">The user changes the monitor's screen resolution, refresh rate, or bit depth.</span></span>
-   <span data-ttu-id="eaef5-138">Приложение использует низкоуровневые функции монитора для изменения параметра, недоступного в функциях высокого уровня.</span><span class="sxs-lookup"><span data-stu-id="eaef5-138">The application uses the low-level monitor functions to change a setting that is not accessible from the high-level functions.</span></span>
-   <span data-ttu-id="eaef5-139">Приложение вызывает [**ресторемониторфакториколордефаултс**](/windows/desktop/api/HighLevelMonitorConfigurationAPI/nf-highlevelmonitorconfigurationapi-restoremonitorfactorycolordefaults) или [**ресторемониторфакторидефаултс**](/windows/desktop/api/HighLevelMonitorConfigurationAPI/nf-highlevelmonitorconfigurationapi-restoremonitorfactorydefaults).</span><span class="sxs-lookup"><span data-stu-id="eaef5-139">The application calls [**RestoreMonitorFactoryColorDefaults**](/windows/desktop/api/HighLevelMonitorConfigurationAPI/nf-highlevelmonitorconfigurationapi-restoremonitorfactorycolordefaults) or [**RestoreMonitorFactoryDefaults**](/windows/desktop/api/HighLevelMonitorConfigurationAPI/nf-highlevelmonitorconfigurationapi-restoremonitorfactorydefaults).</span></span>

<span data-ttu-id="eaef5-140">Все эти события могут изменять параметры монитора.</span><span class="sxs-lookup"><span data-stu-id="eaef5-140">All of these events can change monitor settings.</span></span> <span data-ttu-id="eaef5-141">Они также могут изменять минимальное и максимальное значения параметра.</span><span class="sxs-lookup"><span data-stu-id="eaef5-141">They can also change the minimum and maximum value of a setting.</span></span>

## <a name="dependencies-among-monitor-settings"></a><span data-ttu-id="eaef5-142">Зависимости между параметрами монитора</span><span class="sxs-lookup"><span data-stu-id="eaef5-142">Dependencies Among Monitor Settings</span></span>

<span data-ttu-id="eaef5-143">Изменение цветовой температуры может изменить текущий диск и получить параметры, а также обратную замену.</span><span class="sxs-lookup"><span data-stu-id="eaef5-143">Changing the color temperature can change the current drive and gain settings, and the reverse is also true.</span></span> <span data-ttu-id="eaef5-144">Это единственные зависимости между функциями конфигурации монитора высокого уровня.</span><span class="sxs-lookup"><span data-stu-id="eaef5-144">Those are the only dependencies among the high-level monitor configuration functions.</span></span> <span data-ttu-id="eaef5-145">Другие параметры могут быть доступны только через функции монитора низкого уровня.</span><span class="sxs-lookup"><span data-stu-id="eaef5-145">Other settings might be accessible only through the low-level monitor functions.</span></span> <span data-ttu-id="eaef5-146">Между этими параметрами и параметрами высокого уровня могут существовать зависимости.</span><span class="sxs-lookup"><span data-stu-id="eaef5-146">There might be dependencies between those settings and the high-level settings.</span></span> <span data-ttu-id="eaef5-147">Эти зависимости связаны с конкретным поставщиком.</span><span class="sxs-lookup"><span data-stu-id="eaef5-147">These dependencies are vendor-specific.</span></span> <span data-ttu-id="eaef5-148">Приложение может решить эту проблему несколькими способами:</span><span class="sxs-lookup"><span data-stu-id="eaef5-148">An application can handle this problem in several ways:</span></span>

-   <span data-ttu-id="eaef5-149">Используйте только функции высокого уровня.</span><span class="sxs-lookup"><span data-stu-id="eaef5-149">Use only high-level functions.</span></span>
-   <span data-ttu-id="eaef5-150">После вызова функции низкого уровня получите текущее значение всех параметров монитора.</span><span class="sxs-lookup"><span data-stu-id="eaef5-150">After calling a low-level function, get the current value of every monitor setting.</span></span> <span data-ttu-id="eaef5-151">К сожалению, этот подход может быть очень трудоемким, поскольку получение каждого параметра занимает около 40 миллисекунд.</span><span class="sxs-lookup"><span data-stu-id="eaef5-151">Unfortunately, this approach can be slow, because getting each setting takes about 40 milliseconds.</span></span>
-   <span data-ttu-id="eaef5-152">Используйте низкоуровневые функции только с конкретными моделями мониторинга, поведение которых вы понимаете.</span><span class="sxs-lookup"><span data-stu-id="eaef5-152">Use low-level functions only with specific monitor models whose behavior you understand.</span></span>

## <a name="disabled-monitor-settings"></a><span data-ttu-id="eaef5-153">Отключенные параметры монитора</span><span class="sxs-lookup"><span data-stu-id="eaef5-153">Disabled Monitor Settings</span></span>

<span data-ttu-id="eaef5-154">Приложение не может отключить какие-либо параметры монитора, вызвав функции монитора высокого уровня.</span><span class="sxs-lookup"><span data-stu-id="eaef5-154">An application cannot disable any monitor settings by calling the high-level monitor functions.</span></span> <span data-ttu-id="eaef5-155">Однако приложение может случайно отключить параметр, если он использует низкоуровневые функции для изменения параметра монитора, который не поддерживается функциями высокого уровня.</span><span class="sxs-lookup"><span data-stu-id="eaef5-155">However, an application might accidentally disable a setting if it uses the low-level functions to change a monitor setting that is not supported by the high-level functions.</span></span> <span data-ttu-id="eaef5-156">Кроме того, пользователь может отключить параметр с помощью элемента управления на передней панели.</span><span class="sxs-lookup"><span data-stu-id="eaef5-156">Also, a user might disable a setting by using the front-panel control.</span></span> <span data-ttu-id="eaef5-157">Это поведение зависит от поставщика.</span><span class="sxs-lookup"><span data-stu-id="eaef5-157">These behaviors are vendor-specific.</span></span>

<span data-ttu-id="eaef5-158">Если параметр монитора становится отключенным, любая функция, которая устанавливает или получает этот параметр, завершится ошибкой и установит параметр монитора "код последней ошибки \_ отключен" \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="eaef5-158">If a monitor setting becomes disabled, any function that sets or retrieves that setting will fail and set the last-error code to ERROR\_DISABLED\_MONITOR\_SETTING.</span></span> <span data-ttu-id="eaef5-159">В этом случае приложение может выполнить одно из следующих действий:</span><span class="sxs-lookup"><span data-stu-id="eaef5-159">When this occurs, the application can do one of the following:</span></span>

-   <span data-ttu-id="eaef5-160">Отобразится сообщение об ошибке и предложение пользователю, которое попытается настроить параметр с помощью элемента управления на передней панели.</span><span class="sxs-lookup"><span data-stu-id="eaef5-160">Display an error message and suggest to the user that he or she try adjusting the setting by using the front-panel control.</span></span>
-   <span data-ttu-id="eaef5-161">Вызовите функцию [**ресторемониторфакторидефаултс**](/windows/desktop/api/HighLevelMonitorConfigurationAPI/nf-highlevelmonitorconfigurationapi-restoremonitorfactorydefaults) .</span><span class="sxs-lookup"><span data-stu-id="eaef5-161">Call the [**RestoreMonitorFactoryDefaults**](/windows/desktop/api/HighLevelMonitorConfigurationAPI/nf-highlevelmonitorconfigurationapi-restoremonitorfactorydefaults) function.</span></span> <span data-ttu-id="eaef5-162">Если монитор имеет \_ \_ заводские \_ значения по умолчанию для \_ восстановления \_ \_ , включает флаг параметров монитора, эта функция включает все параметры монитора, которые поддерживаются функциями монитора высокого уровня.</span><span class="sxs-lookup"><span data-stu-id="eaef5-162">If a monitor has the MC\_RESTORE\_FACTORY\_DEFAULTS\_ENABLES\_MONITOR\_SETTINGS capabilities flag, this function enables all of the monitor settings that are supported by the high-level monitor functions.</span></span> <span data-ttu-id="eaef5-163">К сожалению, функция также сбрасывает параметры монитора до заводских настроек по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="eaef5-163">Unfortunately, the function also resets the monitor settings to their factory default.</span></span>

## <a name="related-topics"></a><span data-ttu-id="eaef5-164">См. также</span><span class="sxs-lookup"><span data-stu-id="eaef5-164">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="eaef5-165">Использование конфигурации монитора</span><span class="sxs-lookup"><span data-stu-id="eaef5-165">Using Monitor Configuration</span></span>](using-monitor-configuration.md)
</dt> </dl>

 

 