---
title: Вопросы безопасности пользовательский интерфейс Windows
description: В этом разделе содержатся сведения о вопросах безопасности в пользовательском интерфейсе Windows.
ms.assetid: D560E59A-D6C8-40a9-AABB-DE5A47C94E6E
keywords:
- Пользовательский интерфейс Windows, безопасность
- безопасность для пользовательского интерфейса Windows
- Безопасность строк
- ввод пользователя, проверка
- Проверка входных данных пользователя
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 71b714de3ab12cb10d6e5d9a2e251c34eeeff7a5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104070428"
---
# <a name="security-considerations-windows-user-interface"></a><span data-ttu-id="97fd6-108">Вопросы безопасности: Пользовательский интерфейс Windows</span><span class="sxs-lookup"><span data-stu-id="97fd6-108">Security Considerations: Windows User Interface</span></span>

<span data-ttu-id="97fd6-109">В этом разделе содержатся сведения о вопросах безопасности в пользовательском интерфейсе Windows.</span><span class="sxs-lookup"><span data-stu-id="97fd6-109">This topic provides information about security considerations in the Windows User Interface.</span></span> <span data-ttu-id="97fd6-110">В этом разделе не приводятся все, что необходимо знать о проблемах безопасности.</span><span class="sxs-lookup"><span data-stu-id="97fd6-110">This topic doesn't provide all you need to know about security issues.</span></span> <span data-ttu-id="97fd6-111">Вместо этого используйте его в качестве отправной точки и ссылки для этой области технологий.</span><span class="sxs-lookup"><span data-stu-id="97fd6-111">Instead, use it as a starting point and reference for this technology area.</span></span>

<span data-ttu-id="97fd6-112">Благодаря увеличению взаимодействия компьютеров разработчики теперь должны быть связаны с безопасностью приложений.</span><span class="sxs-lookup"><span data-stu-id="97fd6-112">With the increase in computer interconnectivity, developers now must concern themselves with application security.</span></span> <span data-ttu-id="97fd6-113">Однако безопасность также повышает безопасность и надежность приложений. Поэтому это еще один способ, который разработчик может обеспечить хорошее взаимодействие с пользователем.</span><span class="sxs-lookup"><span data-stu-id="97fd6-113">However, security also enhances general application safety and robustness; therefore it is another way that the developer can provide a good user experience.</span></span> <span data-ttu-id="97fd6-114">В следующих разделах рассматриваются некоторые потенциальные проблемы безопасности при использовании пользовательского интерфейса Windows.</span><span class="sxs-lookup"><span data-stu-id="97fd6-114">The following topics discuss some potential security concerns when using the Windows User Interface.</span></span>

-   [<span data-ttu-id="97fd6-115">Рекомендации по строкам</span><span class="sxs-lookup"><span data-stu-id="97fd6-115">String Considerations</span></span>](#string-considerations)
-   [<span data-ttu-id="97fd6-116">Ввод данных пользователем</span><span class="sxs-lookup"><span data-stu-id="97fd6-116">User Input</span></span>](#user-input)
-   [<span data-ttu-id="97fd6-117">Оповещения системы безопасности</span><span class="sxs-lookup"><span data-stu-id="97fd6-117">Security Alerts</span></span>](#security-alerts)
-   [<span data-ttu-id="97fd6-118">См. также</span><span class="sxs-lookup"><span data-stu-id="97fd6-118">Related topics</span></span>](#related-topics)

## <a name="string-considerations"></a><span data-ttu-id="97fd6-119">Рекомендации по строкам</span><span class="sxs-lookup"><span data-stu-id="97fd6-119">String Considerations</span></span>

<span data-ttu-id="97fd6-120">Многие функции, сообщения и макросы используют строки в своих параметрах.</span><span class="sxs-lookup"><span data-stu-id="97fd6-120">Many functions, messages, and macros use strings in their parameters.</span></span> <span data-ttu-id="97fd6-121">Однако часто строки не проверяются на завершение значений NULL или для длины.</span><span class="sxs-lookup"><span data-stu-id="97fd6-121">However, often the strings are not checked for null-termination or for length.</span></span> <span data-ttu-id="97fd6-122">Связанная проблема заключается в неправильном вычислении длины строки или буфера.</span><span class="sxs-lookup"><span data-stu-id="97fd6-122">A related concern is miscalculating the length of a string or buffer.</span></span> <span data-ttu-id="97fd6-123">В любом случае это может привести к переполнению буфера или усечению данных, что может негативно повлиять на работу приложения.</span><span class="sxs-lookup"><span data-stu-id="97fd6-123">In either case, this can lead to buffer overflow or data truncation, which can affect your application adversely.</span></span> <span data-ttu-id="97fd6-124">Дополнительные сведения о переполнении буфера и других вопросах безопасности см. в статье *написание безопасного кода* с помощью Майкла Ховарда и Дэвида Леблана, Microsoft Press, 2002.</span><span class="sxs-lookup"><span data-stu-id="97fd6-124">For more information about buffer overruns and other security concerns, see *Writing Secure Code* by Michael Howard and David Leblanc, Microsoft Press, 2002.</span></span>

<span data-ttu-id="97fd6-125">Для безопасного управления строками необходимо выполнить следующие действия.</span><span class="sxs-lookup"><span data-stu-id="97fd6-125">To handle strings in a safe manner, you should do the following:</span></span>

-   <span data-ttu-id="97fd6-126">Проверьте строки на наличие завершения null или для соответствующей длины.</span><span class="sxs-lookup"><span data-stu-id="97fd6-126">Check strings for null-termination or for the proper length, as appropriate.</span></span>
-   <span data-ttu-id="97fd6-127">Следите за тем, чтобы определить длину строки или буфера, особенно если она содержит значения **TCHAR** .</span><span class="sxs-lookup"><span data-stu-id="97fd6-127">Take special care to determine the length of a string or buffer, especially when it contains **TCHAR** values.</span></span>
-   <span data-ttu-id="97fd6-128">Если вы создаете строку или используете строку, которая использовалась ранее, инициализируйте ее нулем или вставьте нулевой признак конца, если это уместно.</span><span class="sxs-lookup"><span data-stu-id="97fd6-128">If you create a string or use a string that was used previously, initialize it to zero or insert a null-terminator, as appropriate.</span></span>

<span data-ttu-id="97fd6-129">Кроме того, при работе со строками рассмотрите возможность использования функций [стрсафе](/windows/desktop/menurc/strsafe-ovw) .</span><span class="sxs-lookup"><span data-stu-id="97fd6-129">In addition, consider using the [StrSafe](/windows/desktop/menurc/strsafe-ovw) functions when dealing with strings.</span></span> <span data-ttu-id="97fd6-130">Эти функции предназначены для безопасного управления строками.</span><span class="sxs-lookup"><span data-stu-id="97fd6-130">These functions are designed to handle strings safely.</span></span>

## <a name="user-input"></a><span data-ttu-id="97fd6-131">Ввод данных пользователем</span><span class="sxs-lookup"><span data-stu-id="97fd6-131">User Input</span></span>

<span data-ttu-id="97fd6-132">Пользовательский интерфейс Windows имеет дело с получением информации от пользователей и реагированию на них.</span><span class="sxs-lookup"><span data-stu-id="97fd6-132">The Windows user interface is concerned with getting and responding to information from users.</span></span> <span data-ttu-id="97fd6-133">Однако пользователи, которые вводят неверные данные, могут нарушить работу приложения, независимо от того, планируется ли это сделать.</span><span class="sxs-lookup"><span data-stu-id="97fd6-133">However, users who enter incorrect data can disrupt your application, whether or not they intend to do so.</span></span> <span data-ttu-id="97fd6-134">Таким же условием является то, что все входные данные должны быть проверены.</span><span class="sxs-lookup"><span data-stu-id="97fd6-134">Thus, the cardinal rule is that all input must be validated.</span></span>

<span data-ttu-id="97fd6-135">Основной задачей являются строковые данные, которые рассматриваются в разделе [рекомендации по строкам](#string-considerations).</span><span class="sxs-lookup"><span data-stu-id="97fd6-135">Of primary concern is string data, which is discussed in [String Considerations](#string-considerations).</span></span> <span data-ttu-id="97fd6-136">Однако перед использованием приложения все типы входных данных должны быть проверены.</span><span class="sxs-lookup"><span data-stu-id="97fd6-136">However, all types of input should be validated before being used by your application.</span></span> <span data-ttu-id="97fd6-137">Еще одна проблема заключается в том, что данные проверяются в одной точке, но изменяются до их использования, например при получении сообщений, которые выдают длину текста.</span><span class="sxs-lookup"><span data-stu-id="97fd6-137">Another concern is when data is validated at one point but changes before it is used, for example, when receiving messages that give the length of text.</span></span> <span data-ttu-id="97fd6-138">Поэтому, если есть вероятность, что данные могут измениться, следует проверить данные непосредственно перед их использованием.</span><span class="sxs-lookup"><span data-stu-id="97fd6-138">So, if there is a chance the data might change, you should check the data just before you use it</span></span>

## <a name="security-alerts"></a><span data-ttu-id="97fd6-139">Оповещения системы безопасности</span><span class="sxs-lookup"><span data-stu-id="97fd6-139">Security Alerts</span></span>

<span data-ttu-id="97fd6-140">В следующей таблице перечислены функции, которые при неправильном использовании могут поставить под угрозу безопасность приложений.</span><span class="sxs-lookup"><span data-stu-id="97fd6-140">The following table lists features that, if used incorrectly, can compromise the security of your applications.</span></span>



| <span data-ttu-id="97fd6-141">Функция</span><span class="sxs-lookup"><span data-stu-id="97fd6-141">Feature</span></span>                                                                                                                                                   | <span data-ttu-id="97fd6-142">Меры по снижению риска</span><span class="sxs-lookup"><span data-stu-id="97fd6-142">Mitigation</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="97fd6-143">**жетатомнаме**</span><span class="sxs-lookup"><span data-stu-id="97fd6-143">**GetAtomName**</span></span>](/windows/desktop/api/winbase/nf-winbase-getatomnamea)                                                                                                               | <span data-ttu-id="97fd6-144">Будьте внимательны при указании размера буфера.</span><span class="sxs-lookup"><span data-stu-id="97fd6-144">Be careful when specifying the size of the buffer.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [<span data-ttu-id="97fd6-145">**глобалжетатомнаме**</span><span class="sxs-lookup"><span data-stu-id="97fd6-145">**GlobalGetAtomName**</span></span>](/windows/desktop/api/winbase/nf-winbase-globalgetatomnamea)                                                                                                   | <span data-ttu-id="97fd6-146">Глобальные строковые атомы доступны для любого приложения.</span><span class="sxs-lookup"><span data-stu-id="97fd6-146">Global string atoms are accessible to any application.</span></span> <span data-ttu-id="97fd6-147">Однако если другое приложение не работает, оно может неспособно обменять счетчики ссылок и удалять их.</span><span class="sxs-lookup"><span data-stu-id="97fd6-147">However, if another application is careless, it could mishandle their reference counts and delete them.</span></span> <span data-ttu-id="97fd6-148">Вместо этого следует использовать глобальные целочисленные атомы.</span><span class="sxs-lookup"><span data-stu-id="97fd6-148">You should consider using global integer atoms instead.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [<span data-ttu-id="97fd6-149">**имперсонатеддеклиентвиндов**</span><span class="sxs-lookup"><span data-stu-id="97fd6-149">**ImpersonateDdeClientWindow**</span></span>](/windows/desktop/api/dde/nf-dde-impersonateddeclientwindow)                                                                                 | <span data-ttu-id="97fd6-150">В случае сбоя функции последующие клиентские запросы выполняются в контексте безопасности вызывающего процесса.</span><span class="sxs-lookup"><span data-stu-id="97fd6-150">If the function fails, subsequent client requests are made in the security context of the calling process.</span></span> <span data-ttu-id="97fd6-151">Это может быть проблемой, если вызывающий процесс выполняется как учетная запись с высоким уровнем привилегий.</span><span class="sxs-lookup"><span data-stu-id="97fd6-151">This can be a problem if the calling process is running as a highly privileged account.</span></span> <span data-ttu-id="97fd6-152">Таким образом, если вызов завершается с ошибкой или вызывает ошибку, выполнение запроса клиента не продолжается.</span><span class="sxs-lookup"><span data-stu-id="97fd6-152">Therefore, if the call fails or raises an error do not continue execution of the client request.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="97fd6-153">**ддеимперсонатеклиент**</span><span class="sxs-lookup"><span data-stu-id="97fd6-153">**DdeImpersonateClient**</span></span>](/windows/desktop/api/ddeml/nf-ddeml-ddeimpersonateclient)                                                                                             | <span data-ttu-id="97fd6-154">В случае сбоя функции последующие клиентские запросы выполняются в контексте безопасности вызывающего процесса.</span><span class="sxs-lookup"><span data-stu-id="97fd6-154">If the function fails, subsequent client requests are made in the security context of the calling process.</span></span> <span data-ttu-id="97fd6-155">Это может быть проблемой, если вызывающий процесс выполняется как учетная запись с высоким уровнем привилегий.</span><span class="sxs-lookup"><span data-stu-id="97fd6-155">This can be a problem if the calling process is running as a highly privileged account.</span></span> <span data-ttu-id="97fd6-156">Таким образом, если вызов завершается с ошибкой или вызывает ошибку, выполнение запроса клиента не продолжается.</span><span class="sxs-lookup"><span data-stu-id="97fd6-156">Therefore, if the call fails or raises an error do not continue execution of the client request.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="97fd6-157">**жетклипбоардформатнаме**</span><span class="sxs-lookup"><span data-stu-id="97fd6-157">**GetClipboardFormatName**</span></span>](/windows/desktop/api/winuser/nf-winuser-getclipboardformatnamea)                                                                                         | <span data-ttu-id="97fd6-158">Неправильное вычисление правильного размера буфера *лпсзформатнаме* , особенно если приложение используется в версиях ANSI и Юникод, может привести к переполнению буфера.</span><span class="sxs-lookup"><span data-stu-id="97fd6-158">Miscalculating the proper size of the *lpszFormatName* buffer, especially when the application is used in both ANSI and Unicode versions, can cause a buffer overflow.</span></span> <span data-ttu-id="97fd6-159">Кроме того, обратите внимание, что строка усекается, если она длиннее, чем параметр *кчмакскаунт* , что может привести к потерям информации.</span><span class="sxs-lookup"><span data-stu-id="97fd6-159">Also, note that the string is truncated if it is longer than the *cchMaxCount* parameter, which can lead to loss of information.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [<span data-ttu-id="97fd6-160">**жетменустринг**</span><span class="sxs-lookup"><span data-stu-id="97fd6-160">**GetMenuString**</span></span>](/windows/desktop/api/winuser/nf-winuser-getmenustringa)                                                                                                           | <span data-ttu-id="97fd6-161">Параметр *лпстринг* является буфером **TCHAR** , а *нмакскаунт* — длиной строки меню в **TCHAR** s.</span><span class="sxs-lookup"><span data-stu-id="97fd6-161">The *lpString* parameter is a **TCHAR** buffer, and *nMaxCount* is the length of the menu string in **TCHAR** s.</span></span> <span data-ttu-id="97fd6-162">Неправильное изменение размера этих параметров может привести к длине строки меню в символах.</span><span class="sxs-lookup"><span data-stu-id="97fd6-162">Sizing these parameters incorrectly can is the length of the menu string in characters.</span></span> <span data-ttu-id="97fd6-163">Неправильное изменение размера этих параметров может привести к усечению строки, что приведет к потере данных.</span><span class="sxs-lookup"><span data-stu-id="97fd6-163">Sizing these parameters incorrectly can cause truncation of the string, leading to possible loss of data.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="97fd6-164">[**Жетстрингтипеа**](/windows/desktop/api/winnls/nf-winnls-getstringtypea), [**жетстрингтипикс**](/windows/win32/api/stringapiset/nf-stringapiset-getstringtypeexw), [**жетстрингтипев**](/windows/desktop/api/stringapiset/nf-stringapiset-getstringtypew)</span><span class="sxs-lookup"><span data-stu-id="97fd6-164">[**GetStringTypeA**](/windows/desktop/api/winnls/nf-winnls-getstringtypea), [**GetStringTypeEx**](/windows/win32/api/stringapiset/nf-stringapiset-getstringtypeexw), [**GetStringTypeW**](/windows/desktop/api/stringapiset/nf-stringapiset-getstringtypew)</span></span> | <span data-ttu-id="97fd6-165">Чтобы избежать переполнения буфера, правильно задайте размер буфера *лпчартипе* .</span><span class="sxs-lookup"><span data-stu-id="97fd6-165">To avoid a buffer overflow, set the size of the *lpCharType* buffer correctly.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="97fd6-166">**LoadLibrary**</span><span class="sxs-lookup"><span data-stu-id="97fd6-166">**LoadLibrary**</span></span>](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya)                                                                                                                       | <span data-ttu-id="97fd6-167">Неправильное использование **LoadLibrary** может нарушить безопасность приложения, загрузив НЕПРАВИЛЬНУЮ библиотеку DLL.</span><span class="sxs-lookup"><span data-stu-id="97fd6-167">Using **LoadLibrary** incorrectly can compromise the security of your application by loading the wrong DLL.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="97fd6-168">**лоадстринг**</span><span class="sxs-lookup"><span data-stu-id="97fd6-168">**LoadString**</span></span>](/windows/desktop/api/winuser/nf-winuser-loadstringa)                                                                                                                 | <span data-ttu-id="97fd6-169">Неверное использование включает в себя указание неправильного размера в параметре *нбуффермакс* .</span><span class="sxs-lookup"><span data-stu-id="97fd6-169">Incorrect use includes specifying the wrong size in the *nBufferMax* parameter.</span></span> <span data-ttu-id="97fd6-170">Например, sizeof (*лпбуффер*) предоставляет размер буфера в байтах, что может привести к переполнению буфера для версии Юникода функции.</span><span class="sxs-lookup"><span data-stu-id="97fd6-170">For example, sizeof(*lpBuffer*) gives the size of the buffer in bytes, which could lead to a buffer overflow for the Unicode version of the function.</span></span> <span data-ttu-id="97fd6-171">Ситуации переполнения буфера являются причиной многих проблем безопасности в приложениях.</span><span class="sxs-lookup"><span data-stu-id="97fd6-171">Buffer overflow situations are the cause of many security problems in applications.</span></span> <span data-ttu-id="97fd6-172">В этом случае использование `sizeof(lpBuffer)/sizeof(TCHAR)` предоставляет правильный размер буфера.</span><span class="sxs-lookup"><span data-stu-id="97fd6-172">In this case, using `sizeof(lpBuffer)/sizeof(TCHAR)` gives the proper size of the buffer.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="97fd6-173">**лстркат**</span><span class="sxs-lookup"><span data-stu-id="97fd6-173">**lstrcat**</span></span>](/windows/desktop/api/winbase/nf-winbase-lstrcata)                                                                                                                       | <span data-ttu-id="97fd6-174">Эта функция использует структурированную обработку исключений (SEH) для перехвата нарушений доступа и других ошибок.</span><span class="sxs-lookup"><span data-stu-id="97fd6-174">This function uses structured exception handling (SEH) to catch access violations and other errors.</span></span> <span data-ttu-id="97fd6-175">Когда эта функция перехватывает ошибки SEH, она возвращает **значение NULL** без значения NULL, завершая строку и без значения NULL, без значений NULL, завершая строку и не уведомляя вызывающую ошибку.</span><span class="sxs-lookup"><span data-stu-id="97fd6-175">When this function catches SEH errors, it returns **NULL** without null-terminating the string and without NULL without null-terminating the string and without notifying the caller of the error.</span></span> <span data-ttu-id="97fd6-176">Вызывающий объект не является надежным, чтобы предположить, что недостаток места является условием ошибки.</span><span class="sxs-lookup"><span data-stu-id="97fd6-176">The caller is not safe to assume that insufficient space is the error condition.</span></span> <span data-ttu-id="97fd6-177">Первый аргумент *lpString1* должен быть достаточно большим для хранения *lpString2* и закрывающего " \\ 0", в противном случае может произойти переполнение буфера.</span><span class="sxs-lookup"><span data-stu-id="97fd6-177">The first argument, *lpString1*, must be large enough to hold *lpString2* and the closing '\\0', otherwise a buffer overrun may occur.</span></span> <span data-ttu-id="97fd6-178">Переполнение буфера может привести к атаке типа "отказ в обслуживании" для приложения, если возникает нарушение прав доступа.</span><span class="sxs-lookup"><span data-stu-id="97fd6-178">Buffer overruns may lead to a denial of service attack against the application if an access violation occurs.</span></span> <span data-ttu-id="97fd6-179">В худшем случае переполнение буфера может позволить злоумышленнику внедрить исполняемый код в процесс, особенно если *lpString1* является буфером на основе стека.</span><span class="sxs-lookup"><span data-stu-id="97fd6-179">In the worst case, a buffer overrun may allow an attacker to inject executable code into your process, especially if *lpString1* is a stack-based buffer.</span></span> <span data-ttu-id="97fd6-180">Рассмотрите возможность использования одного из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="97fd6-180">Consider using one of the following alternatives.</span></span> <span data-ttu-id="97fd6-181">[**Стрингкбкат**](/windows/desktop/api/strsafe/nf-strsafe-stringcbcata) или [**стрингкчкат**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcata).</span><span class="sxs-lookup"><span data-stu-id="97fd6-181">[**StringCbCat**](/windows/desktop/api/strsafe/nf-strsafe-stringcbcata) or [**StringCchCat**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcata).</span></span>                                                                                                                                                                                       |
| [<span data-ttu-id="97fd6-182">**лстркпи**</span><span class="sxs-lookup"><span data-stu-id="97fd6-182">**lstrcpy**</span></span>](/windows/desktop/api/winbase/nf-winbase-lstrcpya)                                                                                                                       | <span data-ttu-id="97fd6-183">Эта функция использует структурированную обработку исключений (SEH) для перехвата нарушений доступа и других ошибок.</span><span class="sxs-lookup"><span data-stu-id="97fd6-183">This function uses structured exception handling (SEH) to catch access violations and other errors.</span></span> <span data-ttu-id="97fd6-184">Когда эта функция перехватывает ошибки SEH, она возвращает **значение NULL** без значения NULL, завершая строку и без значения NULL, без значений NULL, завершая строку и не уведомляя вызывающую ошибку.</span><span class="sxs-lookup"><span data-stu-id="97fd6-184">When this function catches SEH errors, it returns **NULL** without null-terminating the string and without NULL without null-terminating the string and without notifying the caller of the error.</span></span> <span data-ttu-id="97fd6-185">Вызывающий объект не является надежным, чтобы предположить, что недостаток места является условием ошибки.</span><span class="sxs-lookup"><span data-stu-id="97fd6-185">The caller is not safe to assume that insufficient space is the error condition.</span></span> <span data-ttu-id="97fd6-186">Первый аргумент *lpString1* должен быть достаточно большим для хранения *lpString2* и закрывающего " \\ 0", в противном случае может произойти переполнение буфера.</span><span class="sxs-lookup"><span data-stu-id="97fd6-186">The first argument, *lpString1*, must be large enough to hold *lpString2* and the closing '\\0', otherwise a buffer overrun may occur.</span></span> <span data-ttu-id="97fd6-187">Переполнение буфера может привести к атаке типа "отказ в обслуживании" для приложения, если возникает нарушение прав доступа.</span><span class="sxs-lookup"><span data-stu-id="97fd6-187">Buffer overruns may lead to a denial of service attack against the application if an access violation occurs.</span></span> <span data-ttu-id="97fd6-188">В худшем случае переполнение буфера может позволить злоумышленнику внедрить исполняемый код в процесс, особенно если *lpString1* является буфером на основе стека.</span><span class="sxs-lookup"><span data-stu-id="97fd6-188">In the worst case, a buffer overrun may allow an attacker to inject executable code into your process, especially if *lpString1* is a stack-based buffer.</span></span> <span data-ttu-id="97fd6-189">Вместо этого рекомендуется использовать [**стрингкчкопи**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) .</span><span class="sxs-lookup"><span data-stu-id="97fd6-189">Consider using [**StringCchCopy**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) instead.</span></span>                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="97fd6-190">**лстркпин**</span><span class="sxs-lookup"><span data-stu-id="97fd6-190">**lstrcpyn**</span></span>](/windows/desktop/api/winbase/nf-winbase-lstrcpyna)                                                                                                                     | <span data-ttu-id="97fd6-191">Эта функция использует структурированную обработку исключений (SEH) для перехвата нарушений доступа и других ошибок.</span><span class="sxs-lookup"><span data-stu-id="97fd6-191">This function uses structured exception handling (SEH) to catch access violations and other errors.</span></span> <span data-ttu-id="97fd6-192">Когда эта функция перехватывает ошибки SEH, она возвращает **значение NULL** без значения NULL, завершая строку и без значения NULL, без значений NULL, завершая строку и не уведомляя вызывающую ошибку.</span><span class="sxs-lookup"><span data-stu-id="97fd6-192">When this function catches SEH errors, it returns **NULL** without null-terminating the string and without NULL without null-terminating the string and without notifying the caller of the error.</span></span> <span data-ttu-id="97fd6-193">Вызывающий объект не является надежным, чтобы предположить, что недостаток места является условием ошибки.</span><span class="sxs-lookup"><span data-stu-id="97fd6-193">The caller is not safe to assume that insufficient space is the error condition.</span></span> <span data-ttu-id="97fd6-194">Если *lpString1* недостаточно велик для хранения скопированной строки, может произойти переполнение буфера.</span><span class="sxs-lookup"><span data-stu-id="97fd6-194">If *lpString1* is not large enough to contain the copied string, a buffer overrun can occur.</span></span> <span data-ttu-id="97fd6-195">Кроме того, при копировании всей строки Обратите внимание, что [sizeof](https://msdn.microsoft.com/library/0w557fh7(VS.71).aspx) возвращает число байтов, а не **WCHAR**, что **sizeof** возвращает число байтов, а не символов, что является неправильным для версии Юникода этой функции.</span><span class="sxs-lookup"><span data-stu-id="97fd6-195">Also, when copying an entire string, note that [sizeof](https://msdn.microsoft.com/library/0w557fh7(VS.71).aspx) returns the number of bytes rather than **WCHAR**, that **sizeof** returns the number of bytes rather than characters, which is incorrect for the Unicode version of this function.</span></span> <span data-ttu-id="97fd6-196">Переполнение буфера может привести к атаке типа "отказ в обслуживании" для приложения, если возникает нарушение прав доступа.</span><span class="sxs-lookup"><span data-stu-id="97fd6-196">Buffer overruns can cause a denial of service attack against the application if an access violation occurs.</span></span> <span data-ttu-id="97fd6-197">В худшем случае переполнение буфера может позволить злоумышленнику внедрить исполняемый код в процесс, особенно если *lpString1* является буфером на основе стека.</span><span class="sxs-lookup"><span data-stu-id="97fd6-197">In the worst case, a buffer overrun may allow an attacker to inject executable code into your process, especially if *lpString1* is a stack-based buffer.</span></span> <span data-ttu-id="97fd6-198">Вместо этого рекомендуется использовать [**стрингкчкопи**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) .</span><span class="sxs-lookup"><span data-stu-id="97fd6-198">Consider using [**StringCchCopy**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) instead.</span></span> |
| [<span data-ttu-id="97fd6-199">**lstrlen**</span><span class="sxs-lookup"><span data-stu-id="97fd6-199">**lstrlen**</span></span>](/windows/desktop/api/winbase/nf-winbase-lstrlena)                                                                                                                       | <span data-ttu-id="97fd6-200">[**lstrlen**](/windows/desktop/api/winbase/nf-winbase-lstrlena) предполагает, что *лпстринг* является строкой, завершающейся нулем.</span><span class="sxs-lookup"><span data-stu-id="97fd6-200">[**lstrlen**](/windows/desktop/api/winbase/nf-winbase-lstrlena) assumes that *lpString* is a null-terminated string.</span></span> <span data-ttu-id="97fd6-201">Если это не так, это может привести к переполнению буфера или атаке типа "отказ в обслуживании" для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="97fd6-201">If it is not, this could lead to a buffer overrun or a denial of service attack against your application.</span></span> <span data-ttu-id="97fd6-202">Рассмотрите возможность использования одного из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="97fd6-202">Consider using one of the following alternatives.</span></span> <span data-ttu-id="97fd6-203">[**Стрингкбленгс**](/windows/desktop/api/strsafe/nf-strsafe-stringcblengtha) или [**стрингкчленгс**](/windows/desktop/api/strsafe/nf-strsafe-stringcchlengtha).</span><span class="sxs-lookup"><span data-stu-id="97fd6-203">[**StringCbLength**](/windows/desktop/api/strsafe/nf-strsafe-stringcblengtha) or [**StringCchLength**](/windows/desktop/api/strsafe/nf-strsafe-stringcchlengtha).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="97fd6-204">**вспринтф**</span><span class="sxs-lookup"><span data-stu-id="97fd6-204">**wsprintf**</span></span>](/windows/desktop/api/winuser/nf-winuser-wsprintfa)                                                                                                                     | <span data-ttu-id="97fd6-205">Строка, возвращаемая в *лпаут* , не гарантированно завершается нулем.</span><span class="sxs-lookup"><span data-stu-id="97fd6-205">The string returned in *lpOut* is not guaranteed to be null-terminated.</span></span> <span data-ttu-id="97fd6-206">Кроме того, Избегайте формата "% s", что может привести к переполнению буфера.</span><span class="sxs-lookup"><span data-stu-id="97fd6-206">Also, avoid the %s format, which can lead to a buffer overrun.</span></span> <span data-ttu-id="97fd6-207">Если возникает нарушение прав доступа, это приводит к отказу в обслуживании приложения.</span><span class="sxs-lookup"><span data-stu-id="97fd6-207">If an access violation occurs it causes a denial of service against your application.</span></span> <span data-ttu-id="97fd6-208">В худшем случае злоумышленник может внедрить исполняемый код.</span><span class="sxs-lookup"><span data-stu-id="97fd6-208">In the worse case, an attacker can inject executable code.</span></span> <span data-ttu-id="97fd6-209">Рассмотрите возможность использования одного из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="97fd6-209">Consider using one of the following alternatives.</span></span> <span data-ttu-id="97fd6-210">[**Стрингкбпринтф**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**стрингкбпринтфекс**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**стрингкбвпринтф**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**стрингкбвпринтфекс**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**стрингкчпринтф**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa)или [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).</span><span class="sxs-lookup"><span data-stu-id="97fd6-210">[**StringCbPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**StringCbPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**StringCbVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**StringCbVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa), or [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).</span></span>                                                                                                                                                                                                                                                                                                                                         |
| [<span data-ttu-id="97fd6-211">**ввспринтф**</span><span class="sxs-lookup"><span data-stu-id="97fd6-211">**wvsprintf**</span></span>](/windows/desktop/api/winuser/nf-winuser-wvsprintfa)                                                                                                                   | <span data-ttu-id="97fd6-212">Строка, возвращаемая в *лпаутпут* , не гарантированно завершается нулем.</span><span class="sxs-lookup"><span data-stu-id="97fd6-212">The string returned in *lpOutput* is not guaranteed to be null-terminated.</span></span> <span data-ttu-id="97fd6-213">Кроме того, старайтесь не использовать формат% s, что может привести к переполнению буфера.</span><span class="sxs-lookup"><span data-stu-id="97fd6-213">Also, avoid the use of the %s format, which can lead to a buffer overrun.</span></span> <span data-ttu-id="97fd6-214">Это может привести к отказу в обслуживании, если это приводит к нарушению прав доступа, или злоумышленник может внедрить исполняемый код.</span><span class="sxs-lookup"><span data-stu-id="97fd6-214">This can lead to a denial of service if it results in an access violation, or an attacker may inject executable code.</span></span> <span data-ttu-id="97fd6-215">Рассмотрите возможность использования одного из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="97fd6-215">Consider using one of the following alternatives.</span></span> <span data-ttu-id="97fd6-216">[**Стрингкбпринтф**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**стрингкбпринтфекс**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**стрингкбвпринтф**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**стрингкбвпринтфекс**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**стрингкчпринтф**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa)или [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).</span><span class="sxs-lookup"><span data-stu-id="97fd6-216">[**StringCbPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**StringCbPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**StringCbVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**StringCbVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa), or [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).</span></span>                                                                                                                                                                                                                                                                                                                                                      |



 

## <a name="related-topics"></a><span data-ttu-id="97fd6-217">См. также</span><span class="sxs-lookup"><span data-stu-id="97fd6-217">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="97fd6-218">Microsoft Security</span><span class="sxs-lookup"><span data-stu-id="97fd6-218">Microsoft Security</span></span>](https://www.microsoft.com/security/)
</dt> <dt>

[<span data-ttu-id="97fd6-219">Безопасность и идентификация</span><span class="sxs-lookup"><span data-stu-id="97fd6-219">Security and Identity</span></span>](/windows/desktop/security)
</dt> <dt>

<span data-ttu-id="97fd6-220">[Индекс руководства по безопасности](/previous-versions/msp-n-p/ff650055(v=pandp.10))</span><span class="sxs-lookup"><span data-stu-id="97fd6-220">[Security How Tos Index](/previous-versions/msp-n-p/ff650055(v=pandp.10))</span></span>
</dt> <dt>

[<span data-ttu-id="97fd6-221">Материалы по безопасности TechNet</span><span class="sxs-lookup"><span data-stu-id="97fd6-221">TechNet Security Resources</span></span>](https://www.microsoft.com/technet/security/default.mspx)
</dt> <dt>

[<span data-ttu-id="97fd6-222">Рекомендации по использованию API безопасности</span><span class="sxs-lookup"><span data-stu-id="97fd6-222">Best Practices for the Security APIs</span></span>](/windows/desktop/SecBP/best-practices-for-the-security-apis)
</dt> </dl>

 

 