---
title: Контроль учетных записей пользователей (основы проектирования)
description: Хорошо спроектированный интерфейс управления учетными записями пользователей помогает предотвратить нежелательные изменения в масштабе всей системы, что предсказуемо и требует минимальных усилий.
ms.assetid: c4b83537-c600-4b24-bda6-df7a82719ab1
ms.topic: article
ms.date: 10/20/2020
ms.openlocfilehash: bb1424254a91f935073e57bbde2c7124fd838b32
ms.sourcegitcommit: 099ecdda1e83618b844387405da0db0ebda93a65
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/04/2021
ms.locfileid: "111443215"
---
# <a name="user-account-control"></a><span data-ttu-id="2450f-103">контроль учетных записей</span><span class="sxs-lookup"><span data-stu-id="2450f-103">User Account Control</span></span>

> [!NOTE]
> <span data-ttu-id="2450f-104">Это руководство по проектированию было создано для Windows 7 и не Обновлено для более новых версий Windows.</span><span class="sxs-lookup"><span data-stu-id="2450f-104">This design guide was created for Windows 7 and has not been updated for newer versions of Windows.</span></span> <span data-ttu-id="2450f-105">Многие рекомендации по-прежнему применяются в принципе, но презентация и примеры не соответствуют нашим [текущим руководствам по проектированию](/windows/uwp/design/).</span><span class="sxs-lookup"><span data-stu-id="2450f-105">Much of the guidance still applies in principle, but the presentation and examples do not reflect our [current design guidance](/windows/uwp/design/).</span></span>

<span data-ttu-id="2450f-106">Хорошо спроектированный интерфейс управления учетными записями пользователей помогает предотвратить нежелательные изменения в масштабе всей системы, что предсказуемо и требует минимальных усилий.</span><span class="sxs-lookup"><span data-stu-id="2450f-106">A well designed User Account Control experience helps prevent unwanted system-wide changes in a way that is predictable and requires minimal effort.</span></span>

<span data-ttu-id="2450f-107">При включенной функции контроля учетных записей (UAC) Интерактивные администраторы обычно работают с минимальными правами пользователя, но они могут самостоятельно повышать уровень для выполнения административных задач, предоставляя явное согласие с пользовательским интерфейсом согласия.</span><span class="sxs-lookup"><span data-stu-id="2450f-107">With User Account Control (UAC) fully enabled, interactive administrators normally run with least user privileges, but they can self-elevate to perform administrative tasks by giving explicit consent with the Consent UI.</span></span> <span data-ttu-id="2450f-108">К таким административным задачам относятся установка программного обеспечения и драйверов, изменение параметров на уровне системы, просмотр и изменение других учетных записей пользователей, а также запуск средств администрирования.</span><span class="sxs-lookup"><span data-stu-id="2450f-108">Such administrative tasks include installing software and drivers, changing system-wide settings, viewing or changing other user accounts, and running administrative tools.</span></span>

<span data-ttu-id="2450f-109">В состоянии с наименьшим уровнем привилегий администраторы называются защищенными администраторами.</span><span class="sxs-lookup"><span data-stu-id="2450f-109">In their least-privileged state, administrators are referred to as Protected administrators.</span></span> <span data-ttu-id="2450f-110">В состоянии с повышенными правами они называются администраторами с повышенными правами.</span><span class="sxs-lookup"><span data-stu-id="2450f-110">In their elevated state, they are referred to as Elevated administrators.</span></span> <span data-ttu-id="2450f-111">В отличие от этого, стандартные пользователи не могут повышать свою поправку, но они могут попросить администратора повысить их уровень с помощью пользовательского интерфейса учетных данных.</span><span class="sxs-lookup"><span data-stu-id="2450f-111">By contrast, Standard users can't elevate by themselves, but they can ask an administrator to elevate them using the Credential UI.</span></span> <span data-ttu-id="2450f-112">Встроенная учетная запись администратора не требует повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-112">The Built-in Administrator account doesn't require elevation.</span></span>

![<span data-ttu-id="2450f-113">снимок экрана с сообщением безопасности "разрешить программу"</span><span class="sxs-lookup"><span data-stu-id="2450f-113">screen shot of 'allow program' security message</span></span> ](images/winenv-uac-image1.png)

<span data-ttu-id="2450f-114">Пользовательский интерфейс согласия, используемый для повышения прав администратора у защищенных администраторов.</span><span class="sxs-lookup"><span data-stu-id="2450f-114">The Consent UI, used to elevate Protected administrators to have administrative privileges.</span></span>

![<span data-ttu-id="2450f-115">снимок экрана с запросом пароля</span><span class="sxs-lookup"><span data-stu-id="2450f-115">screen shot of message asking for password</span></span> ](images/winenv-uac-image2.png)

<span data-ttu-id="2450f-116">Пользовательский интерфейс учетных данных, используемый для повышения уровня обычных пользователей.</span><span class="sxs-lookup"><span data-stu-id="2450f-116">The Credential UI, used to elevate Standard users.</span></span>

<span data-ttu-id="2450f-117">UAC предоставляет следующие преимущества.</span><span class="sxs-lookup"><span data-stu-id="2450f-117">UAC provides the following benefits:</span></span>

-   <span data-ttu-id="2450f-118">Это сокращает количество программ, работающих с повышенными привилегиями, помогая предотвратить случайное изменение системных настроек пользователями, а также предотвратить появление вредоносных программ на уровне системы.</span><span class="sxs-lookup"><span data-stu-id="2450f-118">It reduces the number of programs that run with elevated privileges, therefore helping to prevent users from accidentally changing their system settings, and helping to prevent "malware" from gaining system-wide access.</span></span> <span data-ttu-id="2450f-119">При отказе повышения прав вредоносные программы могут влиять только на данные текущего пользователя.</span><span class="sxs-lookup"><span data-stu-id="2450f-119">When elevation is denied, malware is only able to affect the current user's data.</span></span> <span data-ttu-id="2450f-120">Без повышения прав вредоносные программы не могут вносить изменения на уровне системы или влиять на работу других пользователей.</span><span class="sxs-lookup"><span data-stu-id="2450f-120">Without elevation, malware can't make system-wide changes or affect other users.</span></span>
-   <span data-ttu-id="2450f-121">В [управляемых средах](glossary.md)хорошо спроектированные возможности контроля учетных записей позволяют пользователям работать в качестве обычных пользователей, удаляя ненужные ограничения.</span><span class="sxs-lookup"><span data-stu-id="2450f-121">For [managed environments](glossary.md), well designed UAC experiences allow users to be more productive when running as Standard users by removing unnecessary restrictions.</span></span>
-   <span data-ttu-id="2450f-122">Он дает обычным пользователям возможность попросить администраторов предоставить им разрешение на выполнение административных задач в текущем сеансе.</span><span class="sxs-lookup"><span data-stu-id="2450f-122">It gives Standard users the ability to ask administrators to give them permission to perform administrative tasks within their current session.</span></span>
-   <span data-ttu-id="2450f-123">Для домашних сред это обеспечивает более эффективный родительский контроль над изменениями на уровне системы, включая устанавливаемое программное обеспечение.</span><span class="sxs-lookup"><span data-stu-id="2450f-123">For home environments, it enables better parental control over system-wide changes, including what software is installed.</span></span>

<span data-ttu-id="2450f-124">**Разработчики:** Сведения о реализации см. в статье [перепроектирование ПОЛЬЗОВАТЕЛЬСКОГО интерфейса для обеспечения совместимости с UAC](/previous-versions/bb756990(v=msdn.10)).</span><span class="sxs-lookup"><span data-stu-id="2450f-124">**Developers:** For implementation information, see [Redesign Your UI for UAC Compatibility](/previous-versions/bb756990(v=msdn.10)).</span></span>

<span data-ttu-id="2450f-125">В Windows Vista защищенные администраторы могут получать уведомления обо всех изменениях системы или нет.</span><span class="sxs-lookup"><span data-stu-id="2450f-125">In Windows Vista, Protected administrators can choose to be notified about all system changes or none.</span></span> <span data-ttu-id="2450f-126">Параметр UAC по умолчанию уведомляет обо всех изменениях, независимо от их происхождения.</span><span class="sxs-lookup"><span data-stu-id="2450f-126">The UAC default setting is to notify about all changes, no matter what their origin.</span></span> <span data-ttu-id="2450f-127">Когда вы получите соответствующее сообщение, ваш рабочий стол будет недоступен, и вы должны либо утвердить или отклонить запрос в диалоговом окне UAC, прежде чем выполнять другие действия на компьютере.</span><span class="sxs-lookup"><span data-stu-id="2450f-127">When you're notified, your desktop will be dimmed, and you must either approve or deny the request in the UAC dialog box before you can do anything else on your computer.</span></span> <span data-ttu-id="2450f-128">Модуль затемнения рабочего стола называется [защищенным рабочим столом](glossary.md) , так как другие программы не могут работать, пока они недоступны.</span><span class="sxs-lookup"><span data-stu-id="2450f-128">The dimming of your desktop is referred to as the [secure desktop](glossary.md) because other programs can't run while it's dimmed.</span></span>

<span data-ttu-id="2450f-129">В Windows 7 появились два промежуточных параметра контроля учетных записей для защищенных администраторов в дополнение к двум из Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="2450f-129">Windows 7 introduces two intermediate UAC settings for Protected administrators, in addition to the two from Windows Vista.</span></span> <span data-ttu-id="2450f-130">Первый — уведомлять пользователей только при внесении изменений программой, поэтому администраторы автоматически получают повышенные права при внесении изменений.</span><span class="sxs-lookup"><span data-stu-id="2450f-130">The first is to notify users only when a program is making the change, so administrators are automatically elevated when they make a change themselves.</span></span> <span data-ttu-id="2450f-131">Это параметр UAC по умолчанию в Windows 7, а также использует безопасный рабочий стол.</span><span class="sxs-lookup"><span data-stu-id="2450f-131">This is the UAC default setting in Windows 7, and it also makes use of the secure desktop.</span></span>

<span data-ttu-id="2450f-132">Второй промежуточный параметр в Windows 7 совпадает с первым, за исключением того, что он не использует безопасный рабочий стол.</span><span class="sxs-lookup"><span data-stu-id="2450f-132">The second intermediate setting in Windows 7 is the same as the first except that it doesn't use the secure desktop.</span></span>

![<span data-ttu-id="2450f-133">снимок экрана с четырьмя параметрами контроля учетных записей в Windows 7</span><span class="sxs-lookup"><span data-stu-id="2450f-133">screen shot of four uac settings in windows 7</span></span> ](images/winenv-uac-image3.png)

<span data-ttu-id="2450f-134">В Windows 7 введены два промежуточных параметра контроля учетных записей.</span><span class="sxs-lookup"><span data-stu-id="2450f-134">Windows 7 introduces two intermediate UAC settings.</span></span>

<span data-ttu-id="2450f-135">**Примечание.** Рекомендации по написанию [кода для поддержки управления учетными записями пользователей](/previous-versions/aa905330(v=msdn.10)) представлены в отдельной статье.</span><span class="sxs-lookup"><span data-stu-id="2450f-135">**Note:** Guidelines related to writing [code to support User Account Control](/previous-versions/aa905330(v=msdn.10)) are presented in a separate article.</span></span>

## <a name="design-concepts"></a><span data-ttu-id="2450f-136">Принципы проектирования</span><span class="sxs-lookup"><span data-stu-id="2450f-136">Design concepts</span></span>

<span data-ttu-id="2450f-137">**Цели**</span><span class="sxs-lookup"><span data-stu-id="2450f-137">**Goals**</span></span>

<span data-ttu-id="2450f-138">Хорошо спроектированное управление учетными записями пользователей имеет следующие цели:</span><span class="sxs-lookup"><span data-stu-id="2450f-138">A well designed User Account Control experience has the following goals:</span></span>

-   <span data-ttu-id="2450f-139">**Исключите ненужные права на повышение прав.**</span><span class="sxs-lookup"><span data-stu-id="2450f-139">**Eliminate unnecessary elevation.**</span></span> <span data-ttu-id="2450f-140">Пользователям следует повышать права только для выполнения задач, требующих прав администратора.</span><span class="sxs-lookup"><span data-stu-id="2450f-140">Users should have to elevate only to perform tasks that require administrative privileges.</span></span> <span data-ttu-id="2450f-141">Все остальные задачи должны быть спроектированы таким образом, чтобы избавиться от необходимости повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-141">All other tasks should be designed to eliminate the need for elevation.</span></span> <span data-ttu-id="2450f-142">Зачастую для устаревшего программного обеспечения требуются права администратора, которые не требуют записи в разделы реестра HKLM или HKCR, а также файлы программы или системные папки Windows.</span><span class="sxs-lookup"><span data-stu-id="2450f-142">Often legacy software requires administrator privileges unnecessarily by writing to the HKLM or HKCR registry sections, or the Program Files or Windows System folders.</span></span>
-   <span data-ttu-id="2450f-143">**Быть прогнозируемым.**</span><span class="sxs-lookup"><span data-stu-id="2450f-143">**Be predictable.**</span></span> <span data-ttu-id="2450f-144">Обычным пользователям необходимо знать, какие задачи требуют администратора для выполнения или не могут быть выполнены вообще в управляемых средах.</span><span class="sxs-lookup"><span data-stu-id="2450f-144">Standard users need to know which tasks require an administrator to perform or cannot be performed at all in managed environments.</span></span> <span data-ttu-id="2450f-145">Администраторам необходимо знать, какие задачи требуют повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-145">Administrators need to know which tasks require elevation.</span></span> <span data-ttu-id="2450f-146">Если им не удается точно предсказать потребность в повышении точности, они, скорее всего, выдают согласие на задачи администрирования, когда они не должны.</span><span class="sxs-lookup"><span data-stu-id="2450f-146">If they can't predict the need for elevation accurately, they are more likely to give consent for administrative tasks when they shouldn't.</span></span>
-   <span data-ttu-id="2450f-147">**Требовать минимальных усилий.**</span><span class="sxs-lookup"><span data-stu-id="2450f-147">**Require minimal effort.**</span></span> <span data-ttu-id="2450f-148">Задачи, требующие прав администратора, должны быть спроектированы таким образом, чтобы требовать одного повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-148">Tasks that require administrative privileges should be designed to require a single elevation.</span></span> <span data-ttu-id="2450f-149">Задачи, для которых требуется несколько прав, быстро становятся утомительными.</span><span class="sxs-lookup"><span data-stu-id="2450f-149">Tasks that require multiple elevations quickly become tedious.</span></span>
-   <span data-ttu-id="2450f-150">**Возврат к минимальным привилегиям.**</span><span class="sxs-lookup"><span data-stu-id="2450f-150">**Revert to least privileges.**</span></span> <span data-ttu-id="2450f-151">После завершения задачи, требующей прав администратора, программа должна вернуться к минимальному состоянию прав доступа.</span><span class="sxs-lookup"><span data-stu-id="2450f-151">Once a task that requires administrative privileges is complete, the program should revert to the least privilege state.</span></span>

<span data-ttu-id="2450f-152">**Последовательность задач повышения прав**</span><span class="sxs-lookup"><span data-stu-id="2450f-152">**Elevation task flow**</span></span>

<span data-ttu-id="2450f-153">Если задача требует повышения прав, она включает следующие шаги:</span><span class="sxs-lookup"><span data-stu-id="2450f-153">When a task requires elevation, it has the following steps:</span></span>

1.  <span data-ttu-id="2450f-154">**Точка входа.**</span><span class="sxs-lookup"><span data-stu-id="2450f-154">**Entry point.**</span></span> <span data-ttu-id="2450f-155">Задачи, требующие немедленного повышения прав после включения UAC, имеют точки входа, помеченные защитой UAC.</span><span class="sxs-lookup"><span data-stu-id="2450f-155">Tasks that require immediate elevation when UAC is fully enabled have entry points marked with the UAC shield.</span></span> <span data-ttu-id="2450f-156">В этом случае пользователи должны видеть пользовательский интерфейс повышения прав сразу после нажатия этих команд, и они должны быть очень осторожными, если они видят пользовательский интерфейс повышения прав из задач, у которых нет щита.</span><span class="sxs-lookup"><span data-stu-id="2450f-156">In this case, users should expect to see an Elevation UI immediately after clicking such commands and they should be extra cautious when they see Elevation UI from tasks that don't have a shield.</span></span>

    ![<span data-ttu-id="2450f-157">снимок экрана значков экранирования UAC и их меток</span><span class="sxs-lookup"><span data-stu-id="2450f-157">screen shot of uac shield icons and their labels</span></span> ](images/winenv-uac-image4.png)

    <span data-ttu-id="2450f-158">В этом примере элементам панели управления родительский элемент управления и учетные записи пользователей требуется повышение прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-158">In this example, the parental control and user accounts control panel items require elevation.</span></span>

    <span data-ttu-id="2450f-159">Если UAC частично включен или полностью отключен, экранирование UAC по-прежнему отображается, чтобы указать, что задача включает изменения на уровне системы и, следовательно, требует повышения прав, даже если пользователь может не видеть пользовательский интерфейс повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-159">When UAC is partially enabled or turned off completely, the UAC shield is still displayed to indicate that the task involves system-level changes and therefore requires elevation, even if the user might not see Elevation UI.</span></span> <span data-ttu-id="2450f-160">Постоянное отображение щита контроля учетных записей для задач, требующих повышения прав, обеспечивает простой и прогнозируемый пользовательский интерфейс.</span><span class="sxs-lookup"><span data-stu-id="2450f-160">Always displaying the UAC shield for tasks that require elevation keeps the UI simple and predictable.</span></span>

2.  <span data-ttu-id="2450f-161">**Полномочий.**</span><span class="sxs-lookup"><span data-stu-id="2450f-161">**Elevation.**</span></span> <span data-ttu-id="2450f-162">Для защищенных администраторов задача запрашивает согласие с помощью пользовательского интерфейса согласия.</span><span class="sxs-lookup"><span data-stu-id="2450f-162">For Protected Administrators, the task requests consent using the Consent UI.</span></span> <span data-ttu-id="2450f-163">Для обычных пользователей задача запрашивает учетные данные администратора с помощью пользовательского интерфейса учетных данных.</span><span class="sxs-lookup"><span data-stu-id="2450f-163">For Standard users, the task requests administrator credentials using the Credential UI.</span></span>

    ![<span data-ttu-id="2450f-164">снимок экрана двух типов повышения прав</span><span class="sxs-lookup"><span data-stu-id="2450f-164">screen shot of two types of elevation</span></span> ](images/winenv-uac-image5.png)

    <span data-ttu-id="2450f-165">В этих примерах показан пользовательский интерфейс учетных данных и пользовательский интерфейс согласия.</span><span class="sxs-lookup"><span data-stu-id="2450f-165">These examples show the Credential UI and the Consent UI.</span></span>

3.  <span data-ttu-id="2450f-166">**Отдельный процесс с повышенными правами.**</span><span class="sxs-lookup"><span data-stu-id="2450f-166">**Separate elevated process.**</span></span> <span data-ttu-id="2450f-167">На внутреннем уровне создается новый процесс с повышенными правами для выполнения задачи.</span><span class="sxs-lookup"><span data-stu-id="2450f-167">Internally, a new elevated process is created to perform the task.</span></span>
4.  <span data-ttu-id="2450f-168">**Возврат к минимальным привилегиям.**</span><span class="sxs-lookup"><span data-stu-id="2450f-168">**Revert to least privilege.**</span></span> <span data-ttu-id="2450f-169">При необходимости вернитесь к минимальным привилегиям для выполнения действий, которые не требуют повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-169">If necessary, revert to least privilege to complete any steps that don't require elevation.</span></span>

<span data-ttu-id="2450f-170">Обратите внимание, что задачи не запоминают состояния с повышенными правами.</span><span class="sxs-lookup"><span data-stu-id="2450f-170">Note that tasks don't "remember" elevated states.</span></span> <span data-ttu-id="2450f-171">Например, если пользователь перемещается назад и вперед по точке входа в мастере, пользователь должен каждый раз повышать уровень.</span><span class="sxs-lookup"><span data-stu-id="2450f-171">For example, if the user navigates back and forth over an elevation entry point in a wizard, the user must elevate each time.</span></span>

## <a name="usage-patterns"></a><span data-ttu-id="2450f-172">Варианты использования</span><span class="sxs-lookup"><span data-stu-id="2450f-172">Usage patterns</span></span>

<span data-ttu-id="2450f-173">Управление учетными записями пользователей имеет несколько шаблонов использования (в порядке предпочтения):</span><span class="sxs-lookup"><span data-stu-id="2450f-173">User Account Control has several usage patterns (in order of preference):</span></span>

1.  <span data-ttu-id="2450f-174">**Работать для обычных пользователей.**</span><span class="sxs-lookup"><span data-stu-id="2450f-174">**Work for Standard users.**</span></span> <span data-ttu-id="2450f-175">Разработайте эту функцию для всех пользователей, ограничив ее область до текущего пользователя.</span><span class="sxs-lookup"><span data-stu-id="2450f-175">Design the feature for all users by limiting its scope to the current user.</span></span> <span data-ttu-id="2450f-176">Ограничивая параметры для текущего пользователя (в отличие от уровня системы), вы полностью Устраните необходимость в пользовательском интерфейсе повышения прав и решите пользователям выполнить задачу.</span><span class="sxs-lookup"><span data-stu-id="2450f-176">By limiting settings to the current user (as opposed to system-wide), you eliminate the need for an Elevation UI entirely, and enable users to complete the task.</span></span>

    <span data-ttu-id="2450f-177">**Неправильно**:</span><span class="sxs-lookup"><span data-stu-id="2450f-177">**Incorrect:**</span></span>

    ![<span data-ttu-id="2450f-178">снимок экрана сообщения: у вас нет прав доступа</span><span class="sxs-lookup"><span data-stu-id="2450f-178">screen shot of message: you do not have privilege</span></span> ](images/winenv-uac-image6.png)

    <span data-ttu-id="2450f-179">В этом примере пользователям Windows XP были предоставлены права администратора для просмотра или изменения текущего часового пояса.</span><span class="sxs-lookup"><span data-stu-id="2450f-179">In this example, Windows XP users had to have administrative privileges to view or change the current time zone.</span></span>

    <span data-ttu-id="2450f-180">**Правильно:**</span><span class="sxs-lookup"><span data-stu-id="2450f-180">**Correct:**</span></span>

    ![<span data-ttu-id="2450f-181">снимок экрана — диалоговое окно "Дата и время"</span><span class="sxs-lookup"><span data-stu-id="2450f-181">screen shot of date and time dialog box</span></span> ](images/winenv-uac-image7.png)

    <span data-ttu-id="2450f-182">В этом примере функция часового пояса была переработана в Windows 7 и Windows Vista для всех пользователей.</span><span class="sxs-lookup"><span data-stu-id="2450f-182">In this example, the time zone feature was redesigned in Windows 7 and Windows Vista to work for all users.</span></span>

2.  <span data-ttu-id="2450f-183">**Иметь отдельные элементы пользовательского интерфейса для обычных пользователей и администраторов.**</span><span class="sxs-lookup"><span data-stu-id="2450f-183">**Have separate UI elements for Standard users and administrators.**</span></span> <span data-ttu-id="2450f-184">Четкое разделение стандартных задач пользователя от административных задач.</span><span class="sxs-lookup"><span data-stu-id="2450f-184">Clearly separate Standard user tasks from administrative tasks.</span></span> <span data-ttu-id="2450f-185">Предоставьте всем пользователям доступ к полезной информации только для чтения.</span><span class="sxs-lookup"><span data-stu-id="2450f-185">Give all users access to useful read-only information.</span></span> <span data-ttu-id="2450f-186">Четко выявление административных задач с помощью щита UAC.</span><span class="sxs-lookup"><span data-stu-id="2450f-186">Clearly identify administrative tasks with the UAC shield.</span></span>

    ![<span data-ttu-id="2450f-187">Рисунок щита контроля учетных записей с повышенными требованиями</span><span class="sxs-lookup"><span data-stu-id="2450f-187">graphic of uac shield showing elevation required</span></span> ](images/winenv-uac-image8.png)

    <span data-ttu-id="2450f-188">В этом примере элемент панели управления "система" показывает свое состояние всем пользователям, но изменение параметров на уровне системы требует повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-188">In this example, the System control panel item shows its state to all users, but changing the system-wide settings requires elevation.</span></span>

3.  <span data-ttu-id="2450f-189">**Разрешить обычным пользователям попытаться выполнить задачу и повысить уровень их отказа.**</span><span class="sxs-lookup"><span data-stu-id="2450f-189">**Allow Standard users to attempt task, and to elevate on failure.**</span></span> <span data-ttu-id="2450f-190">Если обычные пользователи могут просматривать сведения и могут вносить некоторые изменения без повышения прав, предоставьте им доступ к пользовательскому интерфейсу и дождитесь их повышения только в случае сбоя задачи.</span><span class="sxs-lookup"><span data-stu-id="2450f-190">If Standard users can view the information and are able to make some changes without elevation, allow them to access the UI and have them elevate only if the task fails.</span></span> <span data-ttu-id="2450f-191">Этот подход подходит, когда обычные пользователи имеют ограниченный доступ, например свойства собственных файлов в проводнике Windows.</span><span class="sxs-lookup"><span data-stu-id="2450f-191">This approach is suitable when Standard users have limited access, such as with properties of their own files in Windows Explorer.</span></span> <span data-ttu-id="2450f-192">Он также подходит для параметров на гибридных страницах панели управления.</span><span class="sxs-lookup"><span data-stu-id="2450f-192">It is also suitable for settings on Control Panel hybrid hub pages.</span></span>

    ![<span data-ttu-id="2450f-193">снимок экрана: сообщение об отказе в доступе</span><span class="sxs-lookup"><span data-stu-id="2450f-193">screen shot of access is denied message</span></span> ](images/winenv-uac-image9.png)

    <span data-ttu-id="2450f-194">В этом примере пользователь пытался изменить свойства файла программы, но не имел достаточных привилегий.</span><span class="sxs-lookup"><span data-stu-id="2450f-194">In this example, the user attempted to change program file properties but didn't have sufficient privileges.</span></span> <span data-ttu-id="2450f-195">Пользователь может повысить уровень прав и повторить попытку.</span><span class="sxs-lookup"><span data-stu-id="2450f-195">The user can elevate and try again.</span></span>

4.  <span data-ttu-id="2450f-196">**Работать только для администраторов.**</span><span class="sxs-lookup"><span data-stu-id="2450f-196">**Work for administrators only.**</span></span> <span data-ttu-id="2450f-197">Используйте этот подход только для административных функций и программ!</span><span class="sxs-lookup"><span data-stu-id="2450f-197">Use this approach only for administrator features and programs!</span></span> <span data-ttu-id="2450f-198">Если функция предназначена только для администраторов (и не имеет путей перехода или полезных сведений только для чтения для обычных пользователей), то перед отображением пользовательского интерфейса можно запросить учетные данные администратора в точке входа.</span><span class="sxs-lookup"><span data-stu-id="2450f-198">If a feature is intended only for administrators (and has no navigation paths or useful read-only information for Standard users), you can prompt for administrator credentials at the entry point before showing any UI.</span></span> <span data-ttu-id="2450f-199">Используйте этот подход для продолжительных мастеров и [потоков страниц](glossary.md) , если всем путям требуются права администратора.</span><span class="sxs-lookup"><span data-stu-id="2450f-199">Use this approach for lengthy wizards and [page flows](glossary.md) when all paths require administrative privileges.</span></span>

    <span data-ttu-id="2450f-200">Если вся программа предназначена только для администраторов, пометьте ее как запрос учетных данных администратора для запуска.</span><span class="sxs-lookup"><span data-stu-id="2450f-200">If the entire program is for administrators only, mark it to prompt for administrator credentials in order to launch.</span></span> <span data-ttu-id="2450f-201">Windows отображает такие значки программ с наложением щита UAC.</span><span class="sxs-lookup"><span data-stu-id="2450f-201">Windows displays such program icons with the UAC shield overlay.</span></span>

    ![<span data-ttu-id="2450f-202">снимок экрана с эмблемой Windows и наложением щита UAC</span><span class="sxs-lookup"><span data-stu-id="2450f-202">screen shot of windows logo and uac shield overlay</span></span> ](images/winenv-uac-image10.png)

    <span data-ttu-id="2450f-203">В этом примере программе требуются права администратора для запуска.</span><span class="sxs-lookup"><span data-stu-id="2450f-203">In this example, the program requires administrative privileges to launch.</span></span>

## <a name="guidelines"></a><span data-ttu-id="2450f-204">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="2450f-204">Guidelines</span></span>

### <a name="uac-shield-icon"></a><span data-ttu-id="2450f-205">Значок щита UAC</span><span class="sxs-lookup"><span data-stu-id="2450f-205">UAC shield icon</span></span>

-   <span data-ttu-id="2450f-206">**Отображение элементов управления с помощью щита UAC, чтобы указать, что задача требует немедленного повышения прав при полном включении UAC,** даже если UAC в настоящее время не включен полностью.</span><span class="sxs-lookup"><span data-stu-id="2450f-206">**Display controls with the UAC shield to indicate that the task requires immediate elevation when UAC is fully enabled,** even if UAC isn't currently fully enabled.</span></span> <span data-ttu-id="2450f-207">Если для всех путей мастера и [потока страниц](glossary.md) требуется повышение прав, отобразите экранирование UAC в точке входа задачи.</span><span class="sxs-lookup"><span data-stu-id="2450f-207">If all paths of a wizard and [page flow](glossary.md) require elevation, display the UAC shield at the task's entry point.</span></span> <span data-ttu-id="2450f-208">Правильное использование экранирования UAC помогает пользователям предсказать, когда требуется повышение прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-208">Proper use of the UAC shield helps users predict when elevation is required.</span></span>
-   <span data-ttu-id="2450f-209">**Если программа поддерживает несколько версий Windows, отобразите экранирование UAC, если хотя бы одна версия требует повышения прав.**</span><span class="sxs-lookup"><span data-stu-id="2450f-209">**If your program supports multiple versions of Windows, display the UAC shield if at least one version requires elevation.**</span></span> <span data-ttu-id="2450f-210">Так как Windows XP не требует повышения прав, рекомендуется удалить экранирования UAC для Windows XP, если это возможно, и без ущерба для производительности.</span><span class="sxs-lookup"><span data-stu-id="2450f-210">Because Windows XP never requires elevation, consider removing the UAC shields for Windows XP if you can do so consistently and without harming performance.</span></span>
-   <span data-ttu-id="2450f-211">**Не выводите панель UAC для задач, не требующих повышения прав в большинстве контекстов.**</span><span class="sxs-lookup"><span data-stu-id="2450f-211">**Don't display the UAC shield for tasks that don't require elevation in most contexts.**</span></span> <span data-ttu-id="2450f-212">Так как этот подход иногда является ошибочным, предпочтительным подходом является использование правильно экранированной контекстной команды.</span><span class="sxs-lookup"><span data-stu-id="2450f-212">Because this approach will sometimes be misleading, the preferred approach is to use a properly shielded contextual command instead.</span></span>

    ![<span data-ttu-id="2450f-213">снимок экрана файлов фотографий в проводнике Windows</span><span class="sxs-lookup"><span data-stu-id="2450f-213">screen shot of photo files in windows explorer</span></span> ](images/winenv-uac-image11.png)

    <span data-ttu-id="2450f-214">Так как команда "создать папку" требует повышения прав только при использовании в системных папках, она отображается без щита контроля учетных записей.</span><span class="sxs-lookup"><span data-stu-id="2450f-214">Because the New folder command requires elevation only when used in system folders, it is displayed without a UAC shield.</span></span>

-   <span data-ttu-id="2450f-215">Экранирование UAC может отображаться на следующих элементах управления:</span><span class="sxs-lookup"><span data-stu-id="2450f-215">The UAC shield can be displayed on the following controls:</span></span>

    <span data-ttu-id="2450f-216">**Командные кнопки:**</span><span class="sxs-lookup"><span data-stu-id="2450f-216">**Command buttons:**</span></span>

    ![<span data-ttu-id="2450f-217">снимок экрана с кнопкой "команда" со значком щита UAC</span><span class="sxs-lookup"><span data-stu-id="2450f-217">screen shot of command button with uac shield icon</span></span> ](images/winenv-uac-image12.png)

    <span data-ttu-id="2450f-218">Командная кнопка, которая требует немедленного повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-218">A command button that requires immediate elevation.</span></span>

    <span data-ttu-id="2450f-219">**Ссылки на команды:**</span><span class="sxs-lookup"><span data-stu-id="2450f-219">**Command links:**</span></span>

    ![<span data-ttu-id="2450f-220">снимок экрана с ссылкой на команду со значком щита UAC</span><span class="sxs-lookup"><span data-stu-id="2450f-220">screen shot of command link with uac shield icon</span></span> ](images/winenv-uac-image13.png)

    <span data-ttu-id="2450f-221">Ссылка на команду, которая требует немедленного повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-221">A command link that requires immediate elevation.</span></span>

    <span data-ttu-id="2450f-222">**Источники**</span><span class="sxs-lookup"><span data-stu-id="2450f-222">**Links:**</span></span>

    ![<span data-ttu-id="2450f-223">снимок экрана со ссылкой "изменить учетную запись" с защитой UAC</span><span class="sxs-lookup"><span data-stu-id="2450f-223">screen shot of change account link with uac shield</span></span> ](images/winenv-uac-image14.png)

    <span data-ttu-id="2450f-224">Ссылка, которая требует немедленного повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-224">A link that requires immediate elevation.</span></span>

    <span data-ttu-id="2450f-225">**Ярлык**</span><span class="sxs-lookup"><span data-stu-id="2450f-225">**Menus:**</span></span>

    ![<span data-ttu-id="2450f-226">снимок экрана меню с защитой UAC</span><span class="sxs-lookup"><span data-stu-id="2450f-226">screen shot of menu with uac shield</span></span> ](images/winenv-uac-image15.png)

    <span data-ttu-id="2450f-227">Раскрывающееся меню, для которого требуется немедленное повышение прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-227">A drop-down menu that requires immediate elevation.</span></span>

-   <span data-ttu-id="2450f-228">Так как задачи не запоминают привилегированные состояния, **не следует изменять экранирование UAC для отражения состояния.**</span><span class="sxs-lookup"><span data-stu-id="2450f-228">Because tasks don't remember elevated states, **don't change the UAC shield to reflect state.**</span></span>
-   <span data-ttu-id="2450f-229">**Отображение щита UAC, даже если контроль учетных записей отключен или пользователь использует встроенную учетную запись администратора.**</span><span class="sxs-lookup"><span data-stu-id="2450f-229">**Display the UAC shield even if User Account Control has been turned off or the user is using the Built-in Administrator account.**</span></span> <span data-ttu-id="2450f-230">Единообразное отображение щита UAC упрощает программирование и предоставляет пользователям сведения о характере задачи.</span><span class="sxs-lookup"><span data-stu-id="2450f-230">Consistently displaying the UAC shield is easier to program, and provides users with information about the nature of the task.</span></span>

### <a name="elevation"></a><span data-ttu-id="2450f-231">Elevation</span><span class="sxs-lookup"><span data-stu-id="2450f-231">Elevation</span></span>

-   <span data-ttu-id="2450f-232">**По возможности разрабатывать задачи, выполняемые обычными пользователями без повышения прав.**</span><span class="sxs-lookup"><span data-stu-id="2450f-232">**Whenever possible, design tasks to be performed by Standard users without elevation.**</span></span> <span data-ttu-id="2450f-233">Предоставьте всем пользователям доступ к полезной информации только для чтения.</span><span class="sxs-lookup"><span data-stu-id="2450f-233">Give all users access to useful read-only information.</span></span>
-   <span data-ttu-id="2450f-234">**Повышение уровня для отдельных задач, а не на уровне отдельных параметров.**</span><span class="sxs-lookup"><span data-stu-id="2450f-234">**Elevate on a per task basis, not on a per setting basis.**</span></span> <span data-ttu-id="2450f-235">Не смешивать стандартные параметры пользователя с административными параметрами на одной странице или в диалоговом окне.</span><span class="sxs-lookup"><span data-stu-id="2450f-235">Don't mix Standard user settings with administrative settings in a single page or dialog box.</span></span> <span data-ttu-id="2450f-236">Например, если обычные пользователи могут изменять некоторые параметры, но не все, разделите их как отдельную поверхность пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="2450f-236">For example, if Standard users can change some but not all settings, split those settings out as a separate UI surface.</span></span>

    <span data-ttu-id="2450f-237">**Неправильно**:</span><span class="sxs-lookup"><span data-stu-id="2450f-237">**Incorrect:**</span></span>

    ![<span data-ttu-id="2450f-238">снимок экрана — диалоговое окно "Параметры даты и времени"</span><span class="sxs-lookup"><span data-stu-id="2450f-238">screen shot of date and time settings dialog box</span></span> ](images/winenv-uac-image16.png)

    <span data-ttu-id="2450f-239">В этом примере стандартные параметры пользователя неправильно смешиваются с административными параметрами.</span><span class="sxs-lookup"><span data-stu-id="2450f-239">In this example, Standard user settings are incorrectly mixed with administrative settings.</span></span>

    <span data-ttu-id="2450f-240">**Правильно:**</span><span class="sxs-lookup"><span data-stu-id="2450f-240">**Correct:**</span></span>

    ![<span data-ttu-id="2450f-241">снимок экрана того же диалогового окна без экранирования UAC</span><span class="sxs-lookup"><span data-stu-id="2450f-241">screen shot of same dialog box without uac shields</span></span> ](images/winenv-uac-image17.png)

    <span data-ttu-id="2450f-242">В этом примере параметры для изменения даты и времени находятся в отдельном диалоговом окне, доступном только для администраторов.</span><span class="sxs-lookup"><span data-stu-id="2450f-242">In this example, the settings for changing the date and time are in a separate dialog box, available only to administrators.</span></span> <span data-ttu-id="2450f-243">Параметры часового пояса доступны для обычных пользователей и не смешиваются с административными параметрами.</span><span class="sxs-lookup"><span data-stu-id="2450f-243">The time zone settings are available to Standard users, and are not mixed with administrative settings.</span></span>

-   <span data-ttu-id="2450f-244">**Не учитывайте необходимость повышения уровня при определении необходимости отображения или отключения элемента управления.**</span><span class="sxs-lookup"><span data-stu-id="2450f-244">**Don't consider the need to elevate when determining if a control should be displayed or disabled.**</span></span> <span data-ttu-id="2450f-245">Это вызвано следующими соображениями.</span><span class="sxs-lookup"><span data-stu-id="2450f-245">This is because:</span></span>
    -   <span data-ttu-id="2450f-246">В неуправляемых средах Предположим, что стандартные пользователи могут повысить уровень прав, запрашивая администратора.</span><span class="sxs-lookup"><span data-stu-id="2450f-246">In unmanaged environments, assume that Standard users could elevate by asking an administrator.</span></span> <span data-ttu-id="2450f-247">Отключение элементов управления, требующих повышения прав, помешает пользователям повышать права администратора.</span><span class="sxs-lookup"><span data-stu-id="2450f-247">Disabling controls that require elevation would prevent users from having administrators elevate.</span></span>
    -   <span data-ttu-id="2450f-248">В управляемых средах предполагается, что обычные пользователи не могут повышать уровень прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-248">In managed environments, assume that Standard users can't elevate at all.</span></span> <span data-ttu-id="2450f-249">Удаление элементов управления, требующих повышения прав, помешает пользователям знать, когда следует перестать смотреть.</span><span class="sxs-lookup"><span data-stu-id="2450f-249">Removing controls that require elevation would prevent users from knowing when to stop looking.</span></span>
-   <span data-ttu-id="2450f-250">**Чтобы устранить ненужные повышения прав, сделайте следующее:**</span><span class="sxs-lookup"><span data-stu-id="2450f-250">**To eliminate unnecessary elevation:**</span></span>
    -   <span data-ttu-id="2450f-251">**Если для задачи может потребоваться повышение прав, повышение прав как можно позднее.**</span><span class="sxs-lookup"><span data-stu-id="2450f-251">**If a task might require elevation, elevate as late as possible.**</span></span> <span data-ttu-id="2450f-252">Если задаче требуется [Подтверждение](mess-confirm.md), ОТОБРАЗИТСЯ пользовательский интерфейс повышения прав только после подтверждения пользователя.</span><span class="sxs-lookup"><span data-stu-id="2450f-252">If a task needs a [confirmation](mess-confirm.md), display the elevation UI only after the user has confirmed.</span></span> <span data-ttu-id="2450f-253">Если задача всегда требует повышения прав, повышение прав в точке входа.</span><span class="sxs-lookup"><span data-stu-id="2450f-253">If a task always requires elevation, elevate at its entry point.</span></span>
    -   <span data-ttu-id="2450f-254">**После повышения привилегий Следите за тем, чтобы повышенные полномочия стали ненужными.**</span><span class="sxs-lookup"><span data-stu-id="2450f-254">**Once elevated, stay elevated until elevated privileges are no longer necessary.**</span></span> <span data-ttu-id="2450f-255">Для выполнения одной задачи пользователям не нужно повышать уровень прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-255">Users shouldn't have to elevate multiple times to perform a single task.</span></span>
    -   <span data-ttu-id="2450f-256">**Если пользователям необходимо повысить уровень, чтобы внести изменения, но не вносить никаких изменений, оставьте кнопки положительной фиксации включенными, но обработайте фиксацию как отмену.**</span><span class="sxs-lookup"><span data-stu-id="2450f-256">**If users must elevate to make a change but choose not to make any changes, leave the positive commit buttons enabled but handle the commit as a cancel.**</span></span> <span data-ttu-id="2450f-257">Это устраняет необходимость в повышении прав для закрытия окна.</span><span class="sxs-lookup"><span data-stu-id="2450f-257">Doing so eliminates users having to elevate just to close a window.</span></span>
    -   <span data-ttu-id="2450f-258">**Неправильно**:</span><span class="sxs-lookup"><span data-stu-id="2450f-258">**Incorrect:**</span></span>
    -   ![<span data-ttu-id="2450f-259">снимок экрана окна с активной кнопкой только на одну кнопку</span><span class="sxs-lookup"><span data-stu-id="2450f-259">screen shot of window with only one button active</span></span> ](images/winenv-uac-image18.png)
    -   <span data-ttu-id="2450f-260">В этом примере кнопка Сохранить изменения отключена, чтобы избежать ненужных прав, но становится доступной при изменении пользователем выделения.</span><span class="sxs-lookup"><span data-stu-id="2450f-260">In this example, the Save Changes button is disabled to avoid an unnecessary elevation, but becomes enabled when users change the selection.</span></span> <span data-ttu-id="2450f-261">Однако кнопка «отключенная фиксация» делает его недоступным для пользователей.</span><span class="sxs-lookup"><span data-stu-id="2450f-261">However, the disabled commit button makes it look like users really don't have a choice.</span></span>
-   <span data-ttu-id="2450f-262">**Не отображать сообщение об ошибке при сбое задач, так как пользователи отказались от повышения прав.**</span><span class="sxs-lookup"><span data-stu-id="2450f-262">**Don't display an error message when tasks fail because users chose not to elevate.**</span></span> <span data-ttu-id="2450f-263">Предположим, что пользователи намеренно решили не продолжать работу, поэтому они не будут рассматриваться как ошибки.</span><span class="sxs-lookup"><span data-stu-id="2450f-263">Assume that users intentionally chose not to proceed, so they won't regard this situation as an error.</span></span>

    <span data-ttu-id="2450f-264">**Неправильно**:</span><span class="sxs-lookup"><span data-stu-id="2450f-264">**Incorrect:**</span></span>

    ![<span data-ttu-id="2450f-265">снимок экрана сообщения: не удается запустить восстановление Fabrikam</span><span class="sxs-lookup"><span data-stu-id="2450f-265">screen shot of message: fabrikam restore can't run</span></span> ](images/winenv-uac-image19.png)

    <span data-ttu-id="2450f-266">В этом примере, если пользователь решил не повышать уровень прав, то при восстановлении Fabrikam сообщение об ошибке выдается неправильно.</span><span class="sxs-lookup"><span data-stu-id="2450f-266">In this example, Fabrikam Restore incorrectly gives an error message when the user decides to not elevate.</span></span>

-   <span data-ttu-id="2450f-267">**Не выводите предупреждения, объясняющие, что пользователям может потребоваться повысить привилегии для выполнения задач.**</span><span class="sxs-lookup"><span data-stu-id="2450f-267">**Don't display warnings to explain that users might need to elevate their privileges to perform tasks.**</span></span> <span data-ttu-id="2450f-268">Позвольте пользователям обнаруживать этот факт самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="2450f-268">Let users discover this fact on their own.</span></span>
-   <span data-ttu-id="2450f-269">**Отобразите панель UAC и пользовательский интерфейс повышения прав на основе следующей таблицы.**</span><span class="sxs-lookup"><span data-stu-id="2450f-269">**Display the UAC shield and elevation UI based on the following table:**</span></span>

    | <span data-ttu-id="2450f-270">Объект</span><span class="sxs-lookup"><span data-stu-id="2450f-270">Object</span></span> | <span data-ttu-id="2450f-271">Условия</span><span class="sxs-lookup"><span data-stu-id="2450f-271">Circumstance</span></span> | <span data-ttu-id="2450f-272">Где разместить экранирование UAC</span><span class="sxs-lookup"><span data-stu-id="2450f-272">Where to put UAC shield</span></span> | <span data-ttu-id="2450f-273">Когда следует повышать уровень</span><span class="sxs-lookup"><span data-stu-id="2450f-273">When to elevate</span></span> |
    |-----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="2450f-274">Программа</span><span class="sxs-lookup"><span data-stu-id="2450f-274">Program</span></span><br/>    | <span data-ttu-id="2450f-275">Вся программа предназначена только для администраторов.</span><span class="sxs-lookup"><span data-stu-id="2450f-275">Entire program is for administrators only.</span></span><br/>                                                                                                            | ![<span data-ttu-id="2450f-276">снимок экрана с эмблемой Windows и наложением щита UAC</span><span class="sxs-lookup"><span data-stu-id="2450f-276">screen shot of windows logo and uac shield overlay</span></span> ](images/winenv-uac-image10.png)<br/> <span data-ttu-id="2450f-277">Наложение UAC щита на значке программы.</span><span class="sxs-lookup"><span data-stu-id="2450f-277">UAC shield overlay on program icon.</span></span><br/>                                                                       | <span data-ttu-id="2450f-278">Отображение пользовательского интерфейса повышения прав при запуске.</span><span class="sxs-lookup"><span data-stu-id="2450f-278">Display elevation UI at launch.</span></span><br/>                                                           |
    | <span data-ttu-id="2450f-279">Команда</span><span class="sxs-lookup"><span data-stu-id="2450f-279">Command</span></span><br/>    | <span data-ttu-id="2450f-280">Вся команда предназначена только для администраторов.</span><span class="sxs-lookup"><span data-stu-id="2450f-280">Entire command is for administrators only.</span></span><br/>                                                                                                            | ![<span data-ttu-id="2450f-281">снимок экрана с ссылкой "изменение учетной записи" и щита UAC</span><span class="sxs-lookup"><span data-stu-id="2450f-281">screen shot of change account link and uac shield</span></span> ](images/winenv-uac-image14.png)<br/> <span data-ttu-id="2450f-282">Экранирование UAC на кнопке или ссылке.</span><span class="sxs-lookup"><span data-stu-id="2450f-282">UAC shield on command button or link.</span></span><br/>                                                                      | <span data-ttu-id="2450f-283">Отображать пользовательский интерфейс повышения прав при нажатии кнопки или ссылки, но после каких-либо подтверждений.</span><span class="sxs-lookup"><span data-stu-id="2450f-283">Display elevation UI when command button or link is clicked, but after any confirmations.</span></span><br/> |
    | <span data-ttu-id="2450f-284">Команда</span><span class="sxs-lookup"><span data-stu-id="2450f-284">Command</span></span><br/>    | <span data-ttu-id="2450f-285">Команда отображает полезные сведения только для чтения, соответствующие всем пользователям, но изменения требуют прав администратора.</span><span class="sxs-lookup"><span data-stu-id="2450f-285">Command displays useful read-only information appropriate for all users, but changes require administrative privileges.</span></span><br/>                               | ![<span data-ttu-id="2450f-286">снимок экрана с ссылкой "изменить параметры" и защитой UAC</span><span class="sxs-lookup"><span data-stu-id="2450f-286">screen shot of change settings link and uac shield</span></span> ](images/winenv-uac-image8.png)<br/> <span data-ttu-id="2450f-287">Экранирование UAC на кнопке или ссылке для внесения изменений.</span><span class="sxs-lookup"><span data-stu-id="2450f-287">UAC shield on command button or link to make changes.</span></span><br/>                                                      | <span data-ttu-id="2450f-288">Отображать пользовательский интерфейс повышения прав при нажатии кнопки Command, но после каких-либо подтверждений.</span><span class="sxs-lookup"><span data-stu-id="2450f-288">Display elevation UI when command button is clicked, but after any confirmations.</span></span><br/>         |
    | <span data-ttu-id="2450f-289">Команда</span><span class="sxs-lookup"><span data-stu-id="2450f-289">Command</span></span><br/>    | <span data-ttu-id="2450f-290">Обычные пользователи могут просматривать информацию и, возможно, вносить некоторые изменения без повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-290">Standard users can view the information and possibly make some changes without elevation.</span></span> <span data-ttu-id="2450f-291">разрешить обычным пользователям предпринимать попытки и повысить уровень их сбоев.</span><span class="sxs-lookup"><span data-stu-id="2450f-291">allow standard users to attempt, and to elevate on failure.</span></span><br/> | ![<span data-ttu-id="2450f-292">снимок экрана с сообщением об ошибке с значком UAC при нажатии кнопки "повторить"</span><span class="sxs-lookup"><span data-stu-id="2450f-292">screen shot of error with uac icon on retry button</span></span> ](images/winenv-uac-image9.png)<br/> <span data-ttu-id="2450f-293">Не показывать экранирование UAC для команды, но отображать ее для повышения прав в случае сбоя команды.</span><span class="sxs-lookup"><span data-stu-id="2450f-293">Don't show the UAC shield for the command, but show it for the elevation entry point if the command fails.</span></span><br/> | <span data-ttu-id="2450f-294">Отображать пользовательский интерфейс повышения прав, когда пользователь повторяет команду.</span><span class="sxs-lookup"><span data-stu-id="2450f-294">Display elevation UI when user retries the command.</span></span><br/>                                       |
    | <span data-ttu-id="2450f-295">Шаг задачи</span><span class="sxs-lookup"><span data-stu-id="2450f-295">Task step</span></span><br/>  | <span data-ttu-id="2450f-296">Для всех последующих шагов требуется повышение прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-296">All subsequent steps require elevation.</span></span><br/>                                                                                                               | ![<span data-ttu-id="2450f-297">снимок экрана с кнопкой "Следующая команда" с защитой UAC</span><span class="sxs-lookup"><span data-stu-id="2450f-297">screen shot of next command button with uac shield</span></span> ](images/winenv-uac-image20.png)<br/> <span data-ttu-id="2450f-298">Экранирование UAC на кнопке Next (или аналогичной).</span><span class="sxs-lookup"><span data-stu-id="2450f-298">UAC shield on Next button (or equivalent).</span></span><br/>                                                                | <span data-ttu-id="2450f-299">Отображать пользовательский интерфейс повышения прав при нажатии кнопки "Далее" или "другая фиксация".</span><span class="sxs-lookup"><span data-stu-id="2450f-299">Display elevation UI when Next or other commit button is clicked.</span></span><br/>                         |
    | <span data-ttu-id="2450f-300">Шаг задачи</span><span class="sxs-lookup"><span data-stu-id="2450f-300">Task step</span></span><br/>  | <span data-ttu-id="2450f-301">Для некоторых ветвей требуется повышение прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-301">Some branches require elevation.</span></span><br/>                                                                                                                      | ![<span data-ttu-id="2450f-302">снимок экрана со ссылкой на команду с защитой UAC</span><span class="sxs-lookup"><span data-stu-id="2450f-302">screen shot of command link with uac shield</span></span> ](images/winenv-uac-image21.png)<br/> <span data-ttu-id="2450f-303">Экранирование UAC для ссылок на команды, требующих повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-303">UAC shield on command links that require elevation.</span></span><br/>                                                              | <span data-ttu-id="2450f-304">Отображать пользовательский интерфейс повышения прав при щелчке ссылок на команды с помощью щита UAC.</span><span class="sxs-lookup"><span data-stu-id="2450f-304">Display elevation UI when command links with UAC shield are clicked.</span></span><br/>                      |

    

     

### <a name="elevation-ui"></a><span data-ttu-id="2450f-305">Пользовательский интерфейс повышения прав</span><span class="sxs-lookup"><span data-stu-id="2450f-305">Elevation UI</span></span>

-   <span data-ttu-id="2450f-306">**Если пользователь предоставляет недействительную учетную запись (имя или пароль) или не имеет прав администратора, просто откройте пользовательский интерфейс учетных данных.**</span><span class="sxs-lookup"><span data-stu-id="2450f-306">**If the user provides an account that isn't valid (name or password) or doesn't have administrator privileges, just redisplay the Credential UI.**</span></span> <span data-ttu-id="2450f-307">Не отображать сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="2450f-307">Don't display an error message.</span></span>
-   <span data-ttu-id="2450f-308">**Если пользователь отменяет пользовательский интерфейс учетных данных, верните пользователя обратно в исходный пользовательский интерфейс.**</span><span class="sxs-lookup"><span data-stu-id="2450f-308">**If the user cancels the Credential UI, return the user back to the original UI.**</span></span> <span data-ttu-id="2450f-309">Не отображать сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="2450f-309">Don't display an error message.</span></span>
-   <span data-ttu-id="2450f-310">Если контроль учетных записей отключен и Стандартный пользователь пытается выполнить задачу, требующую повышения прав, укажите сообщение об ошибке "Эта задача требует прав администратора.</span><span class="sxs-lookup"><span data-stu-id="2450f-310">If User Account Control has been turned off and a Standard user attempts to perform a task that requires elevation, provide an error message that states "This task requires administrator privileges.</span></span> <span data-ttu-id="2450f-311">Для выполнения этой задачи необходимо войти в систему с помощью учетной записи администратора.</span><span class="sxs-lookup"><span data-stu-id="2450f-311">To perform this task, you must log on using an administrator account."</span></span>

![<span data-ttu-id="2450f-312">снимок экрана с сообщением о том, что задача требует привилегий</span><span class="sxs-lookup"><span data-stu-id="2450f-312">screen shot of task requires privileges message</span></span> ](images/winenv-uac-image22.png)

<span data-ttu-id="2450f-313">В этом примере контроль учетных записей отключен, поэтому в сообщении об ошибке объясняется, что пользователь должен использовать учетную запись администратора.</span><span class="sxs-lookup"><span data-stu-id="2450f-313">In this example, User Account Control has been turned off so an error message explains that the user must use an administrator account.</span></span>

### <a name="wizards"></a><span data-ttu-id="2450f-314">Мастера</span><span class="sxs-lookup"><span data-stu-id="2450f-314">Wizards</span></span>

-   <span data-ttu-id="2450f-315">**Не повышать их несколько раз.**</span><span class="sxs-lookup"><span data-stu-id="2450f-315">**Don't elevate multiple times.**</span></span> <span data-ttu-id="2450f-316">После повышения прав мастера он должен оставаться повышенным.</span><span class="sxs-lookup"><span data-stu-id="2450f-316">Once a wizard is elevated, it should stay elevated.</span></span>
-   <span data-ttu-id="2450f-317">Если задача выполняется в мастере, поставьте экранирование UAC на кнопку "Далее" на странице фиксации (в которой должна быть указана более [конкретная метка](win-wizards.md)).</span><span class="sxs-lookup"><span data-stu-id="2450f-317">If the task is performed within the wizard, put a UAC shield on the Commit page's "Next" button (which should be given a more [specific label](win-wizards.md)).</span></span> <span data-ttu-id="2450f-318">При фиксации пользователя:</span><span class="sxs-lookup"><span data-stu-id="2450f-318">When the user commits:</span></span>
    -   <span data-ttu-id="2450f-319">Если Следующая страница является страницей хода выполнения, перейдите на эту страницу и модально Отобразите пользовательский интерфейс повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-319">If the next page is a Progress page, advance to that page and modally display the elevation UI.</span></span> <span data-ttu-id="2450f-320">После успешного повышения прав выполните задачу.</span><span class="sxs-lookup"><span data-stu-id="2450f-320">After successful elevation, perform the task.</span></span>
    -   <span data-ttu-id="2450f-321">Если Следующая страница является страницей завершения, перейдите на эту страницу (но временно замените ее содержимое на "ожидание разрешения...") и модально Отобразите пользовательский интерфейс повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-321">If the next page is a Completion page, advance to that page (but temporarily replace its contents with "Waiting for permission...") and modally display the elevation UI.</span></span> <span data-ttu-id="2450f-322">После успешного повышения прав выполните задачу, а затем отобразите содержимое страницы завершения.</span><span class="sxs-lookup"><span data-stu-id="2450f-322">After successful elevation, perform the task, and then display the Completion page contents.</span></span>
    -   <span data-ttu-id="2450f-323">Если пользователь отменяет пользовательский интерфейс повышения прав, вернитесь на страницу фиксации.</span><span class="sxs-lookup"><span data-stu-id="2450f-323">If the user cancels the elevation UI, return to the Commit page.</span></span> <span data-ttu-id="2450f-324">Это позволит пользователю повторить попытку.</span><span class="sxs-lookup"><span data-stu-id="2450f-324">Doing so allows the user to try again.</span></span>
-   <span data-ttu-id="2450f-325">Если задача выполняется после завершения работы мастера, добавьте экранирование контроля учетных записей на кнопке завершения на странице фиксации (для которой должна быть указана более [конкретная метка](win-wizards.md)).</span><span class="sxs-lookup"><span data-stu-id="2450f-325">If the task is performed after the wizard completes, put a UAC shield on the Commit page's "Finish" button (which should be given a more [specific label](win-wizards.md)).</span></span> <span data-ttu-id="2450f-326">При фиксации пользователя:</span><span class="sxs-lookup"><span data-stu-id="2450f-326">When the user commits:</span></span>
    -   <span data-ttu-id="2450f-327">Остаться на странице фиксации и модально отобразить пользовательский интерфейс повышения прав.</span><span class="sxs-lookup"><span data-stu-id="2450f-327">Remain on the Commit page and modally display the elevation UI.</span></span> <span data-ttu-id="2450f-328">После успешного повышения прав закройте мастер.</span><span class="sxs-lookup"><span data-stu-id="2450f-328">After successful elevation, close the wizard.</span></span>
    -   <span data-ttu-id="2450f-329">Если пользователь отменяет пользовательский интерфейс повышения прав, вернитесь на страницу фиксации.</span><span class="sxs-lookup"><span data-stu-id="2450f-329">If the user cancels the elevation UI, return to the Commit page.</span></span> <span data-ttu-id="2450f-330">Это позволит пользователю повторить попытку.</span><span class="sxs-lookup"><span data-stu-id="2450f-330">Doing so allows the user to try again.</span></span>
-   <span data-ttu-id="2450f-331">Для продолжительных мастеров, предназначенных только для администраторов, перед отображением пользовательского интерфейса вы можете запросить учетные данные администратора в точке входа.</span><span class="sxs-lookup"><span data-stu-id="2450f-331">For lengthy wizards intended only for administrators, you can prompt for administrator credentials at the entry point before showing any UI.</span></span>

## <a name="text"></a><span data-ttu-id="2450f-332">text</span><span class="sxs-lookup"><span data-stu-id="2450f-332">Text</span></span>

-   <span data-ttu-id="2450f-333">**Не используйте многоточие только потому, что для команды требуется повышение прав.**</span><span class="sxs-lookup"><span data-stu-id="2450f-333">**Don't use an ellipsis just because a command requires elevation.**</span></span> <span data-ttu-id="2450f-334">Потребность в повышении прав указывается с помощью щита UAC.</span><span class="sxs-lookup"><span data-stu-id="2450f-334">The need to elevate is indicated with the UAC shield.</span></span>

## <a name="documentation"></a><span data-ttu-id="2450f-335">Документация</span><span class="sxs-lookup"><span data-stu-id="2450f-335">Documentation</span></span>

<span data-ttu-id="2450f-336">При ссылке на контроль учетных записей пользователей:</span><span class="sxs-lookup"><span data-stu-id="2450f-336">When referring to User Account Control:</span></span>

-   <span data-ttu-id="2450f-337">Обратитесь к компоненту как контроль учетных записей (при первом упоминании) или UAC (при последующем упоминании), не используйте учетную запись пользователя с минимальными правами или LUA.</span><span class="sxs-lookup"><span data-stu-id="2450f-337">Refer to the feature as User Account Control (on first mention) or UAC (on subsequent mention), not Least-privileged User Account or LUA.</span></span>
-   <span data-ttu-id="2450f-338">В качестве обычных пользователей обратитесь к пользователям, не являющимся администраторами.</span><span class="sxs-lookup"><span data-stu-id="2450f-338">Refer to non-administrators as Standard users.</span></span>
-   <span data-ttu-id="2450f-339">Обратитесь к встроенным администраторам компьютеров в качестве встроенных администраторов.</span><span class="sxs-lookup"><span data-stu-id="2450f-339">Refer to built-in computer administrators as Built-in administrators.</span></span>

<span data-ttu-id="2450f-340">В пользовательской документации:</span><span class="sxs-lookup"><span data-stu-id="2450f-340">In user documentation:</span></span>

-   <span data-ttu-id="2450f-341">Обратитесь к акту о предоставлении согласия на выполнение административной задачи как предоставление разрешения.</span><span class="sxs-lookup"><span data-stu-id="2450f-341">Refer to the act of giving consent to perform an administrative task as giving permission.</span></span>

<span data-ttu-id="2450f-342">В программировании и другой технической документации:</span><span class="sxs-lookup"><span data-stu-id="2450f-342">In programming and other technical documentation:</span></span>

-   <span data-ttu-id="2450f-343">Сведения о предоставлении согласия на выполнение административной задачи в качестве повышения прав см. в этой статье.</span><span class="sxs-lookup"><span data-stu-id="2450f-343">Refer to the act of giving consent to perform an administrative task as elevation.</span></span>
-   <span data-ttu-id="2450f-344">В контексте контроля учетных записей следует обращаться к администраторам как к защищенным администраторам при отсутствии повышенных прав, а также при повышении прав администратора.</span><span class="sxs-lookup"><span data-stu-id="2450f-344">In the context of UAC, refer to administrators as Protected administrators when not elevated, and Elevated administrators after elevation.</span></span>
-   <span data-ttu-id="2450f-345">Обратитесь к диалоговому окну, используемому для ввода пароля в качестве пользовательского интерфейса учетных данных.</span><span class="sxs-lookup"><span data-stu-id="2450f-345">Refer to the dialog box used to enter passwords as the Credential UI.</span></span> <span data-ttu-id="2450f-346">Обратитесь к диалоговому окну, используемому для предоставления согласия в качестве пользовательского интерфейса согласия.</span><span class="sxs-lookup"><span data-stu-id="2450f-346">Refer to the dialog box used to give consent as the Consent UI.</span></span> <span data-ttu-id="2450f-347">Как правило, в качестве пользовательского интерфейса повышения прав см.</span><span class="sxs-lookup"><span data-stu-id="2450f-347">Refer to both generally as Elevation UI.</span></span>

