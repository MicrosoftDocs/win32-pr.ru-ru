---
title: Развертывание Direct3D 11 для разработчиков игр
description: В этой статье описывается, как при необходимости развернуть компоненты Direct3D 11 в системе.
ms.assetid: 1fd43638-0d67-4a94-3be6-8789095f491e
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd935aedee23ba731bc74e52c0773e6f02e5b5fc
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104260973"
---
# <a name="direct3d-11-deployment-for-game-developers"></a><span data-ttu-id="9f408-103">Развертывание Direct3D 11 для разработчиков игр</span><span class="sxs-lookup"><span data-stu-id="9f408-103">Direct3D 11 deployment for game developers</span></span>

<span data-ttu-id="9f408-104">В этой статье описывается, как при необходимости развернуть компоненты Direct3D 11 в системе.</span><span class="sxs-lookup"><span data-stu-id="9f408-104">This article describes how to deploy the Direct3D 11 components on a system if necessary.</span></span>

-   [<span data-ttu-id="9f408-105">Обзор</span><span class="sxs-lookup"><span data-stu-id="9f408-105">Overview</span></span>](#overview)
-   [<span data-ttu-id="9f408-106">Direct3D 11,3</span><span class="sxs-lookup"><span data-stu-id="9f408-106">Direct3D 11.3</span></span>](#direct3d-113)
-   [<span data-ttu-id="9f408-107">Direct3D 11,2</span><span class="sxs-lookup"><span data-stu-id="9f408-107">Direct3D 11.2</span></span>](#direct3d-112)
-   [<span data-ttu-id="9f408-108">Direct3D 11,1</span><span class="sxs-lookup"><span data-stu-id="9f408-108">Direct3D 11.1</span></span>](#direct3d-111)
-   [<span data-ttu-id="9f408-109">D3D11InstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="9f408-109">D3D11InstallHelper.dll</span></span>](#d3d11installhelperdll)
-   [<span data-ttu-id="9f408-110">D3D11Install.exe</span><span class="sxs-lookup"><span data-stu-id="9f408-110">D3D11Install.exe</span></span>](#d3d11installexe)
-   [<span data-ttu-id="9f408-111">Интеграция в программы установки</span><span class="sxs-lookup"><span data-stu-id="9f408-111">Integrating into Installation Programs</span></span>](#integrating-into-installation-programs)
    -   [<span data-ttu-id="9f408-112">Интеграция с InstallShield</span><span class="sxs-lookup"><span data-stu-id="9f408-112">Integrating into InstallShield</span></span>](#integrating-into-installshield)
    -   [<span data-ttu-id="9f408-113">Интеграция в пакет MSI</span><span class="sxs-lookup"><span data-stu-id="9f408-113">Integrating into an MSI Package</span></span>](#integrating-into-an-msi-package)
-   [<span data-ttu-id="9f408-114">Советы по отладке</span><span class="sxs-lookup"><span data-stu-id="9f408-114">Debugging Tips</span></span>](#debugging-tips)
-   [<span data-ttu-id="9f408-115">Параметры организации</span><span class="sxs-lookup"><span data-stu-id="9f408-115">Corporate Settings</span></span>](#corporate-settings)
-   [<span data-ttu-id="9f408-116">Связанные статьи</span><span class="sxs-lookup"><span data-stu-id="9f408-116">Related Articles</span></span>](#related-articles)

## <a name="overview"></a><span data-ttu-id="9f408-117">Обзор</span><span class="sxs-lookup"><span data-stu-id="9f408-117">Overview</span></span>

<span data-ttu-id="9f408-118">API Direct3D 11 расширяет существующий API Direct3D 10,1 с поддержкой многопоточной отрисовки и создания ресурсов, шейдера вычислений, тесселяции оборудования, BC6H/BC7 и сжатия текстур, а также HLSL модели шейдеров 5,0 с помощью динамической компоновки шейдеров.</span><span class="sxs-lookup"><span data-stu-id="9f408-118">The Direct3D 11 API extends the existing Direct3D 10.1 API with support for multithreaded rendering and resource creation, Compute Shader, hardware tessellation, BC6H/BC7 texture compression, and HLSL Shader Model 5.0 with Dynamic Shader Linkage.</span></span> <span data-ttu-id="9f408-119">Помимо компонента Direct3D 11, в среду выполнения DirectX 11 включены некоторые дополнительные графические компоненты: Direct3D 11, DXGI 1,1, 10level9 Feature Levels, WARP10 Software Rendering Device, Direct2D, DirectWrite и обновленный Direct3D 10,1 с поддержкой 10level9 и WARP10.</span><span class="sxs-lookup"><span data-stu-id="9f408-119">In addition to the Direct3D 11 component, a number of additional graphics components are included in the DirectX 11 runtime: Direct3D 11, DXGI 1.1, 10level9 feature levels, WARP10 software rendering device, Direct2D, DirectWrite, and an updated Direct3D 10.1 with support for 10level9 and WARP10.</span></span> <span data-ttu-id="9f408-120">Сведения об этих и других графических компонентах Windows см. [в статье интерфейсы API графики в Windows](graphics-apis-in-windows-vista.md).</span><span class="sxs-lookup"><span data-stu-id="9f408-120">For information on these and other Windows graphics components, see [Graphics APIs in Windows](graphics-apis-in-windows-vista.md).</span></span>

<span data-ttu-id="9f408-121">Все эти новые графические компоненты встроены в операционные системы Windows 7 и Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="9f408-121">All of these new graphics components are built into the Windows 7 and Windows Server 2008 R2 operating systems.</span></span> <span data-ttu-id="9f408-122">API-интерфейс Direct3D 11 и связанные компоненты также можно установить в Windows Vista с помощью обновления системы из Центр обновления Windows; см. статью базы знаний [KB 971644](https://support.microsoft.com/kb/971644).</span><span class="sxs-lookup"><span data-stu-id="9f408-122">The Direct3D 11 API and related components can also be installed on Windows Vista by using a system update from Windows Update; see Knowledge Base article [KB 971644](https://support.microsoft.com/kb/971644).</span></span> <span data-ttu-id="9f408-123">Для этого обновления требуется Windows Vista и пакет обновления 2 (SP2).</span><span class="sxs-lookup"><span data-stu-id="9f408-123">This update requires Windows Vista and Service Pack 2.</span></span> <span data-ttu-id="9f408-124">Конечные пользователи с включенным автоматическим обновлением, таким образом, будут иметь установленные компоненты Direct3D 11, как и все пользователи Windows 7.</span><span class="sxs-lookup"><span data-stu-id="9f408-124">End-users with automatic updates enabled will, therefore, likely already have the Direct3D 11 components installed, as will all Windows 7 users.</span></span>

<span data-ttu-id="9f408-125">Пример D3D11InstallHelper предназначен для упрощения обнаружения API Direct3D 11, автоматической установки обновления системы, если это применимо к компьютеру конечного пользователя, и предоставления соответствующих сообщений пользователю при ручной процедуре, если требуется более новый пакет обновления.</span><span class="sxs-lookup"><span data-stu-id="9f408-125">The D3D11InstallHelper sample is designed to simplify detection of the Direct3D 11 API, automatically install the system update if applicable to an end-user's computer, and to provide appropriate messages to the end-user on manual procedure if a newer Service Pack is required.</span></span>

> [!Note]  
> <span data-ttu-id="9f408-126">Компилятор HLSL (D3DCompile \* . dll) и библиотека служебной программы D3DX для Direct3D 11 (D3DX11 \* . dll) не встроены в любую версию операционной системы Windows, но их можно развернуть как часть установщика приложения с помощью существующей технологии директсетуп; дополнительные сведения об использовании директсетуп см. в статье [Установка DirectX для разработчиков игр](/windows/desktop/DxTechArts/directx-setup-for-game-developers).</span><span class="sxs-lookup"><span data-stu-id="9f408-126">The HLSL compiler (D3DCompile\*.dll) and the D3DX utility library for Direct3D 11 (D3DX11\*.dll) are not built into any version of the Windows operating system, but they can be deployed as part of an application's installer by using the existing DirectSetup technology; for more information about using DirectSetup, see [DirectX Installation for Game Developers](/windows/desktop/DxTechArts/directx-setup-for-game-developers).</span></span> <span data-ttu-id="9f408-127">"Effects 11" доступен в виде библиотеки поддержки общего источника, которая [влияет на обновление Direct3D 11](https://github.com/Microsoft/FX11), и может быть включена непосредственно в приложение (во многом подобно библиотеке служебной программы дксут).</span><span class="sxs-lookup"><span data-stu-id="9f408-127">"Effects 11" is available as a shared source support library at [Effects for Direct3D 11 Update](https://github.com/Microsoft/FX11), and you can include it directly into an app (much like the DXUT utility library).</span></span> <span data-ttu-id="9f408-128">Поэтому у него нет дополнительных требований к повторному распространению во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="9f408-128">Thus, it doesn't have any additional run-time redistribution requirements.</span></span>

## <a name="direct3d-113"></a><span data-ttu-id="9f408-129">Direct3D 11,3</span><span class="sxs-lookup"><span data-stu-id="9f408-129">Direct3D 11.3</span></span>

<span data-ttu-id="9f408-130">Windows 10 поставляется с API-интерфейсом Direct3D 11,3, встроенным в.</span><span class="sxs-lookup"><span data-stu-id="9f408-130">Windows 10 ships with the Direct3D 11.3 API built in.</span></span> <span data-ttu-id="9f408-131">Список новых функций в API Direct3D 11,3 см. в разделе [функции direct3d 11,3](/windows/desktop/direct3d11/direct3d-11-3-features) .</span><span class="sxs-lookup"><span data-stu-id="9f408-131">See [Direct3D 11.3 Features](/windows/desktop/direct3d11/direct3d-11-3-features) for a list of new features in the Direct3D 11.3 API.</span></span>

## <a name="direct3d-112"></a><span data-ttu-id="9f408-132">Direct3D 11,2</span><span class="sxs-lookup"><span data-stu-id="9f408-132">Direct3D 11.2</span></span>

<span data-ttu-id="9f408-133">Windows 8.1 и Windows Server 2012 R2 поставляются с API-интерфейсом Direct3D 11,2, встроенным в.</span><span class="sxs-lookup"><span data-stu-id="9f408-133">Windows 8.1 and Windows Server 2012 R2 ship with the Direct3D 11.2 API built in.</span></span> <span data-ttu-id="9f408-134">Список новых функций в API Direct3D 11,2 см. в разделе [функции direct3d 11,2](/windows/desktop/direct3d11/direct3d-11-2-features) .</span><span class="sxs-lookup"><span data-stu-id="9f408-134">See [Direct3D 11.2 Features](/windows/desktop/direct3d11/direct3d-11-2-features) for a list of new features in the Direct3D 11.2 API.</span></span>

## <a name="direct3d-111"></a><span data-ttu-id="9f408-135">Direct3D 11,1</span><span class="sxs-lookup"><span data-stu-id="9f408-135">Direct3D 11.1</span></span>

<span data-ttu-id="9f408-136">Windows 8 и Windows Server 2012 поставляются с [API-интерфейсом Direct3D 11,1](/windows/desktop/direct3d11/direct3d-11-1-features) , встроенным в.</span><span class="sxs-lookup"><span data-stu-id="9f408-136">Windows 8 and Windows Server 2012 ship with the [Direct3D 11.1 API](/windows/desktop/direct3d11/direct3d-11-1-features) built in.</span></span> <span data-ttu-id="9f408-137">Частичная поддержка API Direct3D 11,1 доступна в Windows 7 или Windows Server 2008 R2 с установленным [обновлением платформы для Windows 7](https://support.microsoft.com/kb/2670838) .</span><span class="sxs-lookup"><span data-stu-id="9f408-137">Partial support for the Direct3D 11.1 API is available on Windows 7 or Windows Server 2008 R2 with the [Platform Update for Windows 7](https://support.microsoft.com/kb/2670838) installed.</span></span> <span data-ttu-id="9f408-138">Дополнительные сведения об обновлении платформы для Windows 7 см. в [статье обновление платформы для Windows 7](platform-update-for-windows-7.md).</span><span class="sxs-lookup"><span data-stu-id="9f408-138">For more info about the Platform Update for Windows 7, see [Platform Update for Windows 7](platform-update-for-windows-7.md).</span></span>

## <a name="d3d11installhelperdll"></a><span data-ttu-id="9f408-139">D3D11InstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="9f408-139">D3D11InstallHelper.dll</span></span>

<span data-ttu-id="9f408-140">D3D11InstallHelper.dll размещает основные функциональные возможности для обнаружения компонентов Direct3D 11 и выполнения обновления системы через службу Центр обновления Windows, если это применимо.</span><span class="sxs-lookup"><span data-stu-id="9f408-140">D3D11InstallHelper.dll hosts the core functionality for detecting Direct3D 11 components, and performing the system update through the Windows Update service if applicable.</span></span> <span data-ttu-id="9f408-141">Библиотека DLL не отображает сообщения или диалоговые окна непосредственно.</span><span class="sxs-lookup"><span data-stu-id="9f408-141">The DLL displays no messages or dialog boxes directly.</span></span>

<span data-ttu-id="9f408-142">Библиотека DLL состоит из следующих точек входа:</span><span class="sxs-lookup"><span data-stu-id="9f408-142">The DLL consists of the following entry points:</span></span>

<dl> <dt>

<span data-ttu-id="9f408-143"><span id="CheckDirect3D11Status"></span><span id="checkdirect3d11status"></span><span id="CHECKDIRECT3D11STATUS"></span>CheckDirect3D11Status</span><span class="sxs-lookup"><span data-stu-id="9f408-143"><span id="CheckDirect3D11Status"></span><span id="checkdirect3d11status"></span><span id="CHECKDIRECT3D11STATUS"></span>CheckDirect3D11Status</span></span>
</dt> <dd>

<span data-ttu-id="9f408-144">Эта функция выполняет необходимые проверки и возвращает состояние Direct3D 11 на этом компьютере.</span><span class="sxs-lookup"><span data-stu-id="9f408-144">This function performs the necessary checks and returns the status of Direct3D 11 on this computer.</span></span> <span data-ttu-id="9f408-145">Эта функция не требует прав администратора.</span><span class="sxs-lookup"><span data-stu-id="9f408-145">This function does not require administrator rights.</span></span>

-   <span data-ttu-id="9f408-146">Состояние D3D11IH \_ состояние \_ установлено указывает на то, что Direct3D 11 уже установлен на компьютере и готов к использованию.</span><span class="sxs-lookup"><span data-stu-id="9f408-146">A status of D3D11IH\_STATUS\_INSTALLED indicates that Direct3D 11 is already installed on the computer and is ready for use.</span></span>
-   <span data-ttu-id="9f408-147">\_Состояние D3D11IH \_ не \_ поддерживается указывает, что эта версия Windows не поддерживает Direct3D 11 или связанные технологии.</span><span class="sxs-lookup"><span data-stu-id="9f408-147">D3D11IH\_STATUS\_NOT\_SUPPORTED indicates that this version of Windows does not support Direct3D 11 or related technologies.</span></span>
-   <span data-ttu-id="9f408-148">Состояние D3D11IH \_ \_ требуется \_ Последняя версия \_ SP означает, что пользователь должен установить последний пакет обновления для Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="9f408-148">A status of D3D11IH\_STATUS\_NEED\_LATEST\_SP indicates that the latest Windows Vista Service Pack should be installed by the user.</span></span>
-   <span data-ttu-id="9f408-149">Наконец, состояние D3D11IH \_ \_ требуется \_ Обновление означает, что в системе не установлен Direct3D 11, но обновление системы применяется к этой версии Windows.</span><span class="sxs-lookup"><span data-stu-id="9f408-149">Finally, a status of D3D11IH\_STATUS\_REQUIRES\_UPDATE indicates that the system does not have Direct3D 11 installed, but that the system update does apply to this version of Windows.</span></span>

</dd> <dt>

<span data-ttu-id="9f408-150"><span id="DoUpdateForDirect3D11"></span><span id="doupdatefordirect3d11"></span><span id="DOUPDATEFORDIRECT3D11"></span>DoUpdateForDirect3D11</span><span class="sxs-lookup"><span data-stu-id="9f408-150"><span id="DoUpdateForDirect3D11"></span><span id="doupdatefordirect3d11"></span><span id="DOUPDATEFORDIRECT3D11"></span>DoUpdateForDirect3D11</span></span>
</dt> <dd>

<span data-ttu-id="9f408-151">Эта функция использует Центр обновления Windows API для выполнения обновления системы для установки Direct3D 11 в этой системе, если это применимо.</span><span class="sxs-lookup"><span data-stu-id="9f408-151">This function uses the Windows Update API to perform the system update for installing Direct3D 11 on this system, if applicable.</span></span> <span data-ttu-id="9f408-152">Обратите внимание, что этой функции требуется сетевое подключение, чтобы Центр обновления Windows успешно, а также права администратора.</span><span class="sxs-lookup"><span data-stu-id="9f408-152">Note that this function requires network connectivity to Windows Update to succeed, as well as administrative rights.</span></span> <span data-ttu-id="9f408-153">Он принимает необязательную функцию обратного вызова Progress и указатель контекста пользователя и возвращает окончательный код результата по завершении.</span><span class="sxs-lookup"><span data-stu-id="9f408-153">It takes an optional progress callback function and user-context pointer, and returns a final result code when complete.</span></span>

-   <span data-ttu-id="9f408-154">\_ \_ Полученный результат D3D11IH указывает на то, что обновление системы было применено и готово к использованию, в то время как D3D11IH \_ result \_ Success \_ reboot указывает, что обновление системы требует перезагрузки компьютера до его завершения.</span><span class="sxs-lookup"><span data-stu-id="9f408-154">The D3D11IH\_RESULT\_SUCCESS result indicates that the system update was applied and is ready for use, while D3D11IH\_RESULT\_SUCCESS\_REBOOT indicates that the system update requires the computer is restarted before it is complete.</span></span> <span data-ttu-id="9f408-155">Обратите внимание, что эта функция не запланирует перезагрузку системы.</span><span class="sxs-lookup"><span data-stu-id="9f408-155">Note that this function does not schedule a system restart.</span></span>
-   <span data-ttu-id="9f408-156">D3D11IH \_ result \_ не \_ поддерживается указывает, что обновление системы не применяется к этой версии Windows.</span><span class="sxs-lookup"><span data-stu-id="9f408-156">D3D11IH\_RESULT\_NOT\_SUPPORTED indicates that the system update does not apply to this version of Windows.</span></span> <span data-ttu-id="9f408-157">Этот результат не должен возникать, если эта функция вызывается только после получения \_ состояния D3D11IH \_ требуется \_ состояние обновления от CheckDirect3D11Status.</span><span class="sxs-lookup"><span data-stu-id="9f408-157">This result should not occur if this function is only called after getting a D3D11IH\_STATUS\_REQUIRES\_UPDATE status from CheckDirect3D11Status.</span></span>
-   <span data-ttu-id="9f408-158">Результат D3D11IH- \_ обновления результата \_ \_ не \_ найден, указывает на то, что пакет обновления системы не найден на центр обновления Windows серверах.</span><span class="sxs-lookup"><span data-stu-id="9f408-158">A result of D3D11IH\_RESULT\_UPDATE\_NOT\_FOUND indicates that the system update package was not found on the Windows Update servers.</span></span>
-   <span data-ttu-id="9f408-159">Если Центр обновления Windows скачивание или установка завершается сбоем, то \_ в \_ результате загрузки обновления результатов D3D11IH \_ не удалось загрузиться, \_ или D3D11IH \_ \_ \_ не удалось установить обновление результатов \_ .</span><span class="sxs-lookup"><span data-stu-id="9f408-159">If the Windows Update download or installation fails, then D3D11IH\_RESULT\_UPDATE\_DOWNLOAD\_FAILED or D3D11IH\_RESULT\_UPDATE\_INSTALL\_FAILED will be returned as the result.</span></span>
-   <span data-ttu-id="9f408-160">Если в Центр обновления Windows API возвращается ошибка сетевого подключения, \_ \_ \_ \_ возвращается результат ошибки службы WU, указывающий на то, что проблема может быть временной или связанной с конфигурацией сети или параметрами брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="9f408-160">If a network connectivity error is returned from the Windows Update API, then the D3D11IH\_RESULT\_WU\_SERVICE\_ERROR result is returned, indicating that the problem might be intermittent or related to network configuration or firewall settings.</span></span> <span data-ttu-id="9f408-161">Повторная попытка обновить функцию может быть выполнена.</span><span class="sxs-lookup"><span data-stu-id="9f408-161">Trying the update function again may succeed.</span></span>

</dd> </dl>

<span data-ttu-id="9f408-162">Дополнительные сведения об API Центр обновления Windows см. в разделе [API агента Центр обновления Windows](/windows/desktop/Wua_Sdk/portal-client).</span><span class="sxs-lookup"><span data-stu-id="9f408-162">For more information on the Windows Update API, see [Windows Update Agent API](/windows/desktop/Wua_Sdk/portal-client).</span></span>

## <a name="d3d11installexe"></a><span data-ttu-id="9f408-163">D3D11Install.exe</span><span class="sxs-lookup"><span data-stu-id="9f408-163">D3D11Install.exe</span></span>

> [!Note]  
> <span data-ttu-id="9f408-164">Для выполнения D3D11Install.exe требуется D3D11InstallHelper.dll.</span><span class="sxs-lookup"><span data-stu-id="9f408-164">D3D11Install.exe requires D3D11InstallHelper.dll to execute.</span></span>

<span data-ttu-id="9f408-165">D3D11Install.exe — это средство для использования D3D11InstallHelper.dll в качестве автономного установщика с сообщениями пользовательского интерфейса и пользователя, а также выступает в качестве примера для правильного использования библиотеки DLL.</span><span class="sxs-lookup"><span data-stu-id="9f408-165">D3D11Install.exe is a tool for using D3D11InstallHelper.dll as a stand-alone installer complete with UI and end-user messages, as well as acting as an example for proper use of the DLL.</span></span> <span data-ttu-id="9f408-166">Этот процесс завершается с 0, если Direct3D 11 уже установлен, если обновление системы применяется успешно без перезагрузки системы, если требуется установка пакета обновления или если Direct3D 11 не поддерживается этим компьютером.</span><span class="sxs-lookup"><span data-stu-id="9f408-166">The process exits with a 0 if Direct3D 11 is already installed, if the system update applies successfully without requiring a system restart, if a Service Pack installation is required, or if Direct3D 11 is not supported by this computer.</span></span> <span data-ttu-id="9f408-167">Значение 1 возвращается, если обновление системы установлено успешно и для завершения требуется перезагрузка системы.</span><span class="sxs-lookup"><span data-stu-id="9f408-167">A 1 is returned if the system update is applied successfully and requires a system restart to complete.</span></span> <span data-ttu-id="9f408-168">Для других условий возникновения ошибок возвращается значение 2.</span><span class="sxs-lookup"><span data-stu-id="9f408-168">A 2 is returned for other error conditions.</span></span> <span data-ttu-id="9f408-169">Обратите внимание, что для запуска этого исполняемого файла требуются права администратора и манифест, который запрашивает повышение прав при запуске в Windows Vista или Windows 7 с включенным контролем учетных записей.</span><span class="sxs-lookup"><span data-stu-id="9f408-169">Note that this executable file requires administrator rights to run, and it has a manifest that requests elevation when run on Windows Vista or Windows 7 with UAC enabled.</span></span> <span data-ttu-id="9f408-170">D3D11Install.exe можно использовать в качестве автономного средства для развертывания обновления Direct3D 11. также его можно использовать непосредственно установщиками.</span><span class="sxs-lookup"><span data-stu-id="9f408-170">D3D11Install.exe can be used as a stand-alone tool for deploying the Direct3D 11 update, or it can be used directly by installers.</span></span>

<span data-ttu-id="9f408-171">Он поддерживает следующие параметры командной строки:</span><span class="sxs-lookup"><span data-stu-id="9f408-171">It supports the following command-line switches:</span></span>

<dl> <dt>

<span data-ttu-id="9f408-172"><span id="_quiet__"></span><span id="_QUIET__"></span>/quiet</span><span class="sxs-lookup"><span data-stu-id="9f408-172"><span id="_quiet__"></span><span id="_QUIET__"></span>/quiet</span></span> 
</dt> <dd>

<span data-ttu-id="9f408-173">Не отображает сообщения, приглашения, диалоговые окна и сообщения об ошибках.</span><span class="sxs-lookup"><span data-stu-id="9f408-173">Displays no messages, prompts, progress dialog boxes, or error messages.</span></span>

</dd> <dt>

<span data-ttu-id="9f408-174"><span id="_passive__"></span><span id="_PASSIVE__"></span>/passive</span><span class="sxs-lookup"><span data-stu-id="9f408-174"><span id="_passive__"></span><span id="_PASSIVE__"></span>/passive</span></span> 
</dt> <dd>

<span data-ttu-id="9f408-175">Не отображает сообщения, приглашения или сообщения об ошибках, но отображается диалоговое окно Ход выполнения.</span><span class="sxs-lookup"><span data-stu-id="9f408-175">Displays no messages, prompts, or error messages, but will show the progress dialog box.</span></span>

</dd> <dt>

<span data-ttu-id="9f408-176"><span id="_minimal__"></span><span id="_MINIMAL__"></span>/минимал</span><span class="sxs-lookup"><span data-stu-id="9f408-176"><span id="_minimal__"></span><span id="_MINIMAL__"></span>/minimal</span></span> 
</dt> <dd>

<span data-ttu-id="9f408-177">Показывает только минимальные запросы.</span><span class="sxs-lookup"><span data-stu-id="9f408-177">Shows only minimal prompts.</span></span>

</dd> <dt>

<span data-ttu-id="9f408-178"><span id="_y__"></span><span id="_Y__"></span>/y</span><span class="sxs-lookup"><span data-stu-id="9f408-178"><span id="_y__"></span><span id="_Y__"></span>/y</span></span> 
</dt> <dd>

<span data-ttu-id="9f408-179">Подавляет запрос на подтверждение установки обновления (при необходимости и применимо) для стандартной и минимальной установки.</span><span class="sxs-lookup"><span data-stu-id="9f408-179">Suppresses prompting to confirm installing the update, if needed and applicable, for a standard and minimal installation.</span></span>

</dd> <dt>

<span data-ttu-id="9f408-180"><span id="_langid_decimal__"></span><span id="_LANGID_DECIMAL__"></span>/лангид Decimal</span><span class="sxs-lookup"><span data-stu-id="9f408-180"><span id="_langid_decimal__"></span><span id="_LANGID_DECIMAL__"></span>/langid decimal</span></span> 
</dt> <dd>

<span data-ttu-id="9f408-181">Указывает, какой код языка следует использовать при отображении сообщений конечных пользователей и ресурсов диалоговых окон.</span><span class="sxs-lookup"><span data-stu-id="9f408-181">Forces which language identifier code to use when displaying end-user messages and dialog box resources.</span></span> <span data-ttu-id="9f408-182">Значение по умолчанию — 1024, в котором используется параметр языка по умолчанию системы.</span><span class="sxs-lookup"><span data-stu-id="9f408-182">The default value is 1024, which uses the system default language setting.</span></span>

</dd> <dt>

<span data-ttu-id="9f408-183"><span id="_wu__"></span><span id="_WU__"></span>/ву</span><span class="sxs-lookup"><span data-stu-id="9f408-183"><span id="_wu__"></span><span id="_WU__"></span>/wu</span></span> 
</dt> <dd>

<span data-ttu-id="9f408-184">Принудительное использование Центр обновления Windows, а не системного по умолчанию, которое может быть Windows Server Update Services (WSUS), работающем на управляемом сервере или другой нестандартной конфигурации.</span><span class="sxs-lookup"><span data-stu-id="9f408-184">Forces use of Windows Update rather than the system default, which may be Windows Server Update Services (WSUS) running on a managed server or some other non-standard configuration.</span></span>

</dd> </dl>

## <a name="integrating-into-installation-programs"></a><span data-ttu-id="9f408-185">Интеграция в программы установки</span><span class="sxs-lookup"><span data-stu-id="9f408-185">Integrating into installation programs</span></span>

<span data-ttu-id="9f408-186">Чтобы обеспечить поддержку простой установки, необходимо выполнить [технические требования 3,1 для игр для Windows](/windows/desktop/DxTechArts/games-for-windows-technical-requirements-1-1-0006), чтобы любые запросы конечных пользователей преддавались на ранних этапах процесса установки, а также чтобы убедиться в отсутствии нескольких запросов на повышение прав, связанных с UAC.</span><span class="sxs-lookup"><span data-stu-id="9f408-186">To comply with Support Easy Installation, [Technical Requirement 3.1 for Games for Windows](/windows/desktop/DxTechArts/games-for-windows-technical-requirements-1-1-0006), care needs to be taken so that any end-user prompts are presented early in the installation process, and to ensure that there are not multiple UAC-related elevation prompts.</span></span> <span data-ttu-id="9f408-187">Для достижения этой цели существует три основных варианта.</span><span class="sxs-lookup"><span data-stu-id="9f408-187">There are three basic choices for achieving this goal:</span></span>

1.  <span data-ttu-id="9f408-188">Самый простой способ — выполнить D3D11Install.exe с параметром командной строки **/минимал**.</span><span class="sxs-lookup"><span data-stu-id="9f408-188">The most basic method is to execute the D3D11Install.exe with the command-line switch **/minimal**.</span></span> <span data-ttu-id="9f408-189">Это необходимо сделать на ранних этапах работы установщика Q&A, а установка должна использовать возвращаемое значение 1, чтобы указать, что необходимо запланировать перезапуск в конце установки.</span><span class="sxs-lookup"><span data-stu-id="9f408-189">This should be done early in the installer Q&A, and the installation should use the return value of 1 to indicate that a restart should be scheduled at the end of the installation.</span></span> <span data-ttu-id="9f408-190">Для запуска программы требуются права администратора.</span><span class="sxs-lookup"><span data-stu-id="9f408-190">Executing the program requires administrative rights.</span></span>
2.  <span data-ttu-id="9f408-191">Используйте D3D11InstallHelper.dll напрямую, чтобы определить необходимость обновления, предоставив всем пользовательским сообщениям, необходимым для состояния D3D11IH состояния, \_ \_ требуется \_ Последняя версия \_ SP, где разрешение требует ручных действий пользователя.</span><span class="sxs-lookup"><span data-stu-id="9f408-191">Use D3D11InstallHelper.dll directly to detect the need for the update, providing any end-user messages necessary for the status D3D11IH\_STATUS\_NEED\_LATEST\_SP, where the resolution requires manual user operations.</span></span> <span data-ttu-id="9f408-192">Результат состояния D3D11IH " \_ \_ не поддерживается" \_ может использоваться для управления установкой связанных с Direct3D 11 ресурсов или как условие ошибки для приложений Direct3D 11, но в противном случае оно не обязательно должно быть полезным сообщением конечного пользователя.</span><span class="sxs-lookup"><span data-stu-id="9f408-192">The status result of D3D11IH\_STATUS\_NOT\_SUPPORTED could be used to control installation of Direct3D 11–related assets, or as an error condition for Direct3D 11–only applications, but it is otherwise not necessarily a useful end-user message.</span></span> <span data-ttu-id="9f408-193">Для состояния D3D11IH состояние \_ \_ требуется \_ обновление. установщик может напрямую использовать точку входа DLL DoUpdateForDirect3D11 для выполнения обновления и обработки различных результирующих сообщений конечного пользователя.</span><span class="sxs-lookup"><span data-stu-id="9f408-193">For the status D3D11IH\_STATUS\_REQUIRES\_UPDATE, the installer can directly use the DLL entry point DoUpdateForDirect3D11 to perform the update and handle the various resulting end-user messages.</span></span> <span data-ttu-id="9f408-194">Примеры стандартных сообщений можно найти, изучив диалоговое окно D3D11Install.exe и ресурсы таблицы строк.</span><span class="sxs-lookup"><span data-stu-id="9f408-194">Examples of standard messages can be found by examining the D3D11Install.exe dialog box and string table resources.</span></span> <span data-ttu-id="9f408-195">Для точки входа обновления требуются права администратора.</span><span class="sxs-lookup"><span data-stu-id="9f408-195">The update entry point requires administrator rights.</span></span>
3.  <span data-ttu-id="9f408-196">Гибридный подход заключается в проверке состояния с D3D11InstallHelper.dll, а в случае с кодом состояния D3D11IH для \_ состояния " \_ требуется \_ Последняя версия \_ SP или D3D11IH" \_ \_ требуется \_ обновление, D3D11Install.exe можно выполнить с параметрами **/минимал** и **/y** , чтобы отобразить диалоговое окно или выполнить обновление по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="9f408-196">A hybrid approach is to check status with D3D11InstallHelper.dll, and in the case of the status code D3D11IH\_STATUS\_NEED\_LATEST\_SP or D3D11IH\_STATUS\_REQUIRES\_UPDATE, D3D11Install.exe can be executed with the switches **/minimal** and **/y** to display the dialog box or to perform the update, as needed.</span></span> <span data-ttu-id="9f408-197">Эти действия должны выполняться на ранних этапах процесса установки, как правило, сразу после&Q, а для запуска исполняемого файла требуются права администратора.</span><span class="sxs-lookup"><span data-stu-id="9f408-197">These steps should be performed early in the installation process, usually immediately after the Q&A, and running the executable requires administrative rights.</span></span>

### <a name="integrating-into-installshield"></a><span data-ttu-id="9f408-198">Интеграция с InstallShield</span><span class="sxs-lookup"><span data-stu-id="9f408-198">Integrating into InstallShield</span></span>

<span data-ttu-id="9f408-199">Обработка развертывания Direct3D 11 из Инсталлскрипт InstallShield легко выполняется с помощью примера D3D11InstallHelper.</span><span class="sxs-lookup"><span data-stu-id="9f408-199">Handling the Direct3D 11 deployment from InstallShield's InstallScript is easily done using the D3D11InstallHelper sample.</span></span> <span data-ttu-id="9f408-200">Шаги, необходимые для интеграции с InstallShield с помощью Инсталлскрипт, приведены ниже (при использовании метода 3, описанного в предыдущем разделе):</span><span class="sxs-lookup"><span data-stu-id="9f408-200">The steps required to integrate with InstallShield using InstallScript are as follows (using method 3, described in the previous section):</span></span>

1.  <span data-ttu-id="9f408-201">Откройте проект Инсталлскрипт в редакторе InstallShield.</span><span class="sxs-lookup"><span data-stu-id="9f408-201">Open an InstallScript project in the InstallShield editor.</span></span>
2.  <span data-ttu-id="9f408-202">Добавьте D3D11InstallHelper.dll и D3D11Install.exe в проект в **файлах поддержки**.</span><span class="sxs-lookup"><span data-stu-id="9f408-202">Add D3D11InstallHelper.dll and D3D11Install.exe to the project in **Support Files**.</span></span>

    <span data-ttu-id="9f408-203">**Добавление файлов в проект InstallShield**</span><span class="sxs-lookup"><span data-stu-id="9f408-203">**To add the files to the InstallShield Project**</span></span>

    1.  <span data-ttu-id="9f408-204">На вкладке **конструктор установки** щелкните **файлы поддержки и объявления** в разделе **поведение и логика** в области навигации слева.</span><span class="sxs-lookup"><span data-stu-id="9f408-204">On the **Installation Designer** tab, click **Support Files/Billboards** under **Behavior and Logic** in the navigation pane on the left.</span></span>
    2.  <span data-ttu-id="9f408-205">Щелкните **независимый от языка**, затем щелкните правой кнопкой мыши в окне **файлы** и выберите команду **Вставить файлы**.</span><span class="sxs-lookup"><span data-stu-id="9f408-205">Click **Language Independent**, then right-click in the **Files** window and select **Insert Files**.</span></span> <span data-ttu-id="9f408-206">Перейдите к добавлению D3D11InstallHelper.dll и D3D11Install.exe.</span><span class="sxs-lookup"><span data-stu-id="9f408-206">Browse to add D3D11InstallHelper.dll and D3D11Install.exe.</span></span> <span data-ttu-id="9f408-207">По умолчанию эти файлы находятся в папке: корневые \\ примеры SDK \\ C++ \\ Прочие \\ bin \\ x86</span><span class="sxs-lookup"><span data-stu-id="9f408-207">The default location for these files is: SDK root\\Samples\\C++\\Misc\\Bin\\x86</span></span>

3.  <span data-ttu-id="9f408-208">В обозревателе Инсталлскрипт щелкните файл Инсталлскрипт (обычно Setup. RUL), который будет вызывать библиотеку DLL или исполняемый файл, расположенный в разделе **поведение и логика** в области навигации слева.</span><span class="sxs-lookup"><span data-stu-id="9f408-208">In the InstallScript explorer, click the InstallScript file (usually Setup.rul) that will call the DLL or executable, located under **Behavior and Logic** in the navigation pane on the left.</span></span>
4.  <span data-ttu-id="9f408-209">Вставьте следующий Инсталлскрипт в файл, расположенный ближе к началу:</span><span class="sxs-lookup"><span data-stu-id="9f408-209">Paste the following InstallScript into the file near the top:</span></span>

    ``` syntax
#define D3D11IH_STATUS_INSTALLED       0
#define D3D11IH_STATUS_NOT_SUPPORTED   1
#define D3D11IH_STATUS_REQUIRES_UPDATE 2
#define D3D11IH_STATUS_NEED_LATEST_SP  3
#define D3D11IH_STATUS_ERROR           -1
    prototype NUMBER D3D11InstallHelper.CheckDirect3D11StatusIS();

#define D3D11IH_RESULT_SUCCESS                0
#define D3D11IH_RESULT_SUCCESS_REBOOT         1
#define D3D11IH_RESULT_NOT_SUPPORTED          2
#define D3D11IH_RESULT_UPDATE_NOT_FOUND       3
#define D3D11IH_RESULT_UPDATE_DOWNLOAD_FAILED 4
#define D3D11IH_RESULT_UPDATE_INSTALL_FAILED  5
#define D3D11IH_RESULT_WU_SERVICE_ERROR       6
#define D3D11IH_RESULT_ERROR                  -1
    prototype NUMBER D3D11InstallHelper.DoUpdateForDirect3D11IS(BOOL);
    ```

5.  <span data-ttu-id="9f408-210">Вставьте следующий Инсталлскрипт в файл в функции **онфирстуибефоре** непосредственно перед возвращаемым 0:</span><span class="sxs-lookup"><span data-stu-id="9f408-210">Paste the following InstallScript into the file in the **OnFirstUIBefore** function, just before the return 0:</span></span>

    ``` syntax
    Dlg_D3D11:
        UseDLL( SUPPORTDIR ^ "D3D11InstallHelper.DLL" );
        nResult = D3D11InstallHelper.CheckDirect3D11StatusIS();   
        UnUseDLL( SUPPORTDIR ^ "D3D11InstallHelper.DLL" );
        
        if ( nResult = D3D11IH_STATUS_REQUIRES_UPDATE
             || nResult = D3D11IH_STATUS_NEED_LATEST_SP) then
            nResult = LaunchAppAndWait(
    SUPPORTDIR^"D3D11Install.exe",
    "/minimal /y", WAIT);
            if ( nResult < 0 ) then
                MessageBox("Unable to launch D3D11Install.exe",
     SEVERE);
            elseif ( nResult == 1 ) then
                BATCH_INSTALL = 1;
            endif;          
        endif;
    ```

### <a name="integrating-into-an-msi-package"></a><span data-ttu-id="9f408-211">Интеграция в пакет MSI</span><span class="sxs-lookup"><span data-stu-id="9f408-211">Integrating into an MSI package</span></span>

<span data-ttu-id="9f408-212">Ниже приведено общее описание действий, необходимых для интеграции развертывания Direct3D 11 с помощью настраиваемых действий MSI (с помощью метода 3, описанного выше в этом разделе):</span><span class="sxs-lookup"><span data-stu-id="9f408-212">The following is a high-level description of the steps required to integrate Direct3D 11 deployment using MSI custom actions (using method 3, described earlier in this topic):</span></span>

1.  <span data-ttu-id="9f408-213">Добавьте в таблицу свойств MSI свойство с именем **RelativePathToD3D11IH** , содержащее относительный путь к D3D11Install.exe и D3D11InstallHelper.dll во время установки (обычно это происходит в образе носителя).</span><span class="sxs-lookup"><span data-stu-id="9f408-213">Add a property to the MSI Property table called **RelativePathToD3D11IH** that contains the relative path to D3D11Install.exe and D3D11InstallHelper.dll during installation (this is typically in the media image).</span></span> <span data-ttu-id="9f408-214">Это также задает для свойства MSI D3D11IH \_ состояние, возвращенное CheckDirect3D11Status (строковое свойство равно символу перечисления или "ошибка").</span><span class="sxs-lookup"><span data-stu-id="9f408-214">This also sets an MSI property D3D11IH\_STATUS to the status returned by CheckDirect3D11Status (a string property equal to the enumeration symbol or "ERROR").</span></span>
2.  <span data-ttu-id="9f408-215">После действия Костфинализе вызовите функцию D3D11InstallHelper.dll **SetD3D11InstallMSIProperties** в качестве немедленного настраиваемого действия, чтобы задать соответствующие свойства MSI для других настраиваемых действий.</span><span class="sxs-lookup"><span data-stu-id="9f408-215">After the CostFinalize action, call the D3D11InstallHelper.dll function **SetD3D11InstallMSIProperties** as an immediate custom action to set the appropriate MSI properties for the other custom actions.</span></span>
3.  <span data-ttu-id="9f408-216">После установки активируйте отложенное настраиваемое действие после действия Инсталлфилес, которое вызывает функцию D3D11InstallHelper.dll **DoD3D11InstallUsingMSI**.</span><span class="sxs-lookup"><span data-stu-id="9f408-216">Upon installation, trigger a deferred custom action after the InstallFiles action that calls the D3D11InstallHelper.dll function **DoD3D11InstallUsingMSI**.</span></span> <span data-ttu-id="9f408-217">Пользовательское действие должно установить флаг msidbCustomActionTypeNoImpersonate для запуска в контексте с повышенными привилегиями.</span><span class="sxs-lookup"><span data-stu-id="9f408-217">The custom action must set the flag msidbCustomActionTypeNoImpersonate to run in an elevated context.</span></span>
4.  <span data-ttu-id="9f408-218">После действия функции InstallFinalize вызовите функцию D3D11InstallHelper.dll **FinishD3D11InstallUsingMSI** в качестве немедленного настраиваемого действия для выполнения кода результата запроса на перезагрузку, если это необходимо.</span><span class="sxs-lookup"><span data-stu-id="9f408-218">After the InstallFinalize action, call the D3D11InstallHelper.dll function **FinishD3D11InstallUsingMSI** as an immediate custom action to handle the successful reboot request result code, if needed.</span></span>

<span data-ttu-id="9f408-219">Эта процедура подробно описана в следующих инструкциях, в которых описывается процесс, который можно выполнить с помощью редактора MSI, например [редактора Orca](/windows/desktop/Msi/orca-exe).</span><span class="sxs-lookup"><span data-stu-id="9f408-219">This procedure is described in detail in the following instructions, which describe a process that can be done using an MSI editor, such as the [Orca editor](/windows/desktop/Msi/orca-exe).</span></span> <span data-ttu-id="9f408-220">Некоторые редакторы MSI содержат мастера, упрощающие некоторые из этих действий по настройке.</span><span class="sxs-lookup"><span data-stu-id="9f408-220">Some MSI editors have wizards that simplify some of these configuration steps.</span></span>

<span data-ttu-id="9f408-221">**Настройка пакета MSI для интеграции с D3D11InstallHelper.dll**</span><span class="sxs-lookup"><span data-stu-id="9f408-221">**To configure an MSI package for integration with D3D11InstallHelper.dll**</span></span>

1.  <span data-ttu-id="9f408-222">Откройте пакет MSI в Orca.</span><span class="sxs-lookup"><span data-stu-id="9f408-222">Open the MSI package in Orca.</span></span>
2.  <span data-ttu-id="9f408-223">Добавьте строку, показанную в следующей таблице, в двоичную таблицу в пакете MSI.</span><span class="sxs-lookup"><span data-stu-id="9f408-223">Add the row shown in the following table to the Binary table in the MSI package.</span></span>

    | <span data-ttu-id="9f408-224">Имя</span><span class="sxs-lookup"><span data-stu-id="9f408-224">Name</span></span>    | <span data-ttu-id="9f408-225">Данные</span><span class="sxs-lookup"><span data-stu-id="9f408-225">Data</span></span>                                         |
    |---------|----------------------------------------------|
    | <span data-ttu-id="9f408-226">D3D11IH</span><span class="sxs-lookup"><span data-stu-id="9f408-226">D3D11IH</span></span> | <span data-ttu-id="9f408-227">Путь к файлу DLL \\D3D11InstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="9f408-227">File path to the DLL\\D3D11InstallHelper.dll</span></span> |

    

     

    > [!Note]  
    > <span data-ttu-id="9f408-228">Этот файл будет внедрен в пакет MSI, поэтому этот шаг необходимо выполнять каждый раз при повторной компиляции D3D11InstallHelper.dll.</span><span class="sxs-lookup"><span data-stu-id="9f408-228">This file will be embedded in the MSI package, so you must do this step every time that you recompile D3D11InstallHelper.dll.</span></span>

     

3.  <span data-ttu-id="9f408-229">Добавьте строки, показанные в следующей таблице, в таблицу CustomAction в пакете MSI.</span><span class="sxs-lookup"><span data-stu-id="9f408-229">Add the rows shown in the following table to the CustomAction table in the MSI package.</span></span> 

    | <span data-ttu-id="9f408-230">Действие</span><span class="sxs-lookup"><span data-stu-id="9f408-230">Action</span></span>              | <span data-ttu-id="9f408-231">Тип</span><span class="sxs-lookup"><span data-stu-id="9f408-231">Type</span></span>                                                                                                                                                                   | <span data-ttu-id="9f408-232">Источник</span><span class="sxs-lookup"><span data-stu-id="9f408-232">Source</span></span>  | <span data-ttu-id="9f408-233">Назначение</span><span class="sxs-lookup"><span data-stu-id="9f408-233">Target</span></span>                       |
    |---------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|------------------------------|
    | <span data-ttu-id="9f408-234">Direct3D11SetProps</span><span class="sxs-lookup"><span data-stu-id="9f408-234">Direct3D11SetProps</span></span>  | <span data-ttu-id="9f408-235">Мсидбкустомактионтипедлл + Мсидбкустомактионтипебинаридата + Мсидбкустомактионтипеконтинуе = 65</span><span class="sxs-lookup"><span data-stu-id="9f408-235">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span></span>                                                                        | <span data-ttu-id="9f408-236">D3D11IH</span><span class="sxs-lookup"><span data-stu-id="9f408-236">D3D11IH</span></span> | <span data-ttu-id="9f408-237">SetD3D11InstallMSIProperties</span><span class="sxs-lookup"><span data-stu-id="9f408-237">SetD3D11InstallMSIProperties</span></span> |
    | <span data-ttu-id="9f408-238">Direct3D11DoInstall</span><span class="sxs-lookup"><span data-stu-id="9f408-238">Direct3D11DoInstall</span></span> | <span data-ttu-id="9f408-239">Мсидбкустомактионтипедлл + Мсидбкустомактионтипебинаридата + Мсидбкустомактионтипеконтинуе + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span><span class="sxs-lookup"><span data-stu-id="9f408-239">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 3137</span></span> | <span data-ttu-id="9f408-240">D3D11IH</span><span class="sxs-lookup"><span data-stu-id="9f408-240">D3D11IH</span></span> | <span data-ttu-id="9f408-241">DoD3D11InstallUsingMSI</span><span class="sxs-lookup"><span data-stu-id="9f408-241">DoD3D11InstallUsingMSI</span></span>       |
    | <span data-ttu-id="9f408-242">Direct3D11Finish</span><span class="sxs-lookup"><span data-stu-id="9f408-242">Direct3D11Finish</span></span>    | <span data-ttu-id="9f408-243">Мсидбкустомактионтипедлл + Мсидбкустомактионтипебинаридата + Мсидбкустомактионтипеконтинуе = 65</span><span class="sxs-lookup"><span data-stu-id="9f408-243">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeContinue = 65</span></span>                                                                        | <span data-ttu-id="9f408-244">D3D11IH</span><span class="sxs-lookup"><span data-stu-id="9f408-244">D3D11IH</span></span> | <span data-ttu-id="9f408-245">FinishD3D11InstallUsingMSI</span><span class="sxs-lookup"><span data-stu-id="9f408-245">FinishD3D11InstallUsingMSI</span></span>   |

    

     

4.  <span data-ttu-id="9f408-246">Добавьте значения, показанные для действия, условия и последовательности в следующей таблице, в таблицу Инсталлексекутесекуенце в пакете MSI.</span><span class="sxs-lookup"><span data-stu-id="9f408-246">Add the values shown for Action, Condition, and Sequence in the following table to the InstallExecuteSequence table in the MSI package.</span></span> 

    | <span data-ttu-id="9f408-247">Действие</span><span class="sxs-lookup"><span data-stu-id="9f408-247">Action</span></span>              | <span data-ttu-id="9f408-248">Условие</span><span class="sxs-lookup"><span data-stu-id="9f408-248">Condition</span></span>     | <span data-ttu-id="9f408-249">Последовательность</span><span class="sxs-lookup"><span data-stu-id="9f408-249">Sequence</span></span> | <span data-ttu-id="9f408-250">Примечания</span><span class="sxs-lookup"><span data-stu-id="9f408-250">Notes</span></span>                                                                                                                                                          |
    |---------------------|---------------|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="9f408-251">Direct3D11SetProps</span><span class="sxs-lookup"><span data-stu-id="9f408-251">Direct3D11SetProps</span></span>  |               | <span data-ttu-id="9f408-252">1016</span><span class="sxs-lookup"><span data-stu-id="9f408-252">1016</span></span>     | <span data-ttu-id="9f408-253">Порядковый номер помещает действие в ближайшее время после Костфинализе.</span><span class="sxs-lookup"><span data-stu-id="9f408-253">The sequence number places the action soon after CostFinalize.</span></span>                                                                                                 |
    | <span data-ttu-id="9f408-254">Direct3D11DoInstall</span><span class="sxs-lookup"><span data-stu-id="9f408-254">Direct3D11DoInstall</span></span> | <span data-ttu-id="9f408-255">НЕ установлено</span><span class="sxs-lookup"><span data-stu-id="9f408-255">NOT Installed</span></span> | <span data-ttu-id="9f408-256">4004</span><span class="sxs-lookup"><span data-stu-id="9f408-256">4004</span></span>     | <span data-ttu-id="9f408-257">Это пользовательское действие выполняется только во время новой установки для всех пользователей.</span><span class="sxs-lookup"><span data-stu-id="9f408-257">This custom action will only happen during a new installation for all users.</span></span> <span data-ttu-id="9f408-258">Порядковый номер помещает действие после Инсталлфилес и после отката.</span><span class="sxs-lookup"><span data-stu-id="9f408-258">The sequence number places the action after InstallFiles and after the rollbacks.</span></span> |
    | <span data-ttu-id="9f408-259">Direct3D11Finish</span><span class="sxs-lookup"><span data-stu-id="9f408-259">Direct3D11Finish</span></span>    |               | <span data-ttu-id="9f408-260">6615</span><span class="sxs-lookup"><span data-stu-id="9f408-260">6615</span></span>     | <span data-ttu-id="9f408-261">Порядковый номер помещает действие в ближайшее время после функции InstallFinalize.</span><span class="sxs-lookup"><span data-stu-id="9f408-261">The sequence number places the action soon after InstallFinalize.</span></span>                                                                                              |

    

     

5.  <span data-ttu-id="9f408-262">Добавьте строку, показанную в следующей таблице, в таблицу **свойств** в пакете MSI.</span><span class="sxs-lookup"><span data-stu-id="9f408-262">Add the row shown in the following table to the **Property** table in the MSI package.</span></span> 

    | <span data-ttu-id="9f408-263">Свойство</span><span class="sxs-lookup"><span data-stu-id="9f408-263">Property</span></span>              | <span data-ttu-id="9f408-264">Значение</span><span class="sxs-lookup"><span data-stu-id="9f408-264">Value</span></span>                                                                        |
    |-----------------------|------------------------------------------------------------------------------|
    | <span data-ttu-id="9f408-265">RelativePathToD3D11IH</span><span class="sxs-lookup"><span data-stu-id="9f408-265">RelativePathToD3D11IH</span></span> | <span data-ttu-id="9f408-266">относительный путь к файлу, содержащий D3D11Install.exe и D3D11InstallHelper.dll</span><span class="sxs-lookup"><span data-stu-id="9f408-266">relative file path that contains D3D11Install.exe and D3D11InstallHelper.dll</span></span> |

    

     

    > [!Note]  
    > <span data-ttu-id="9f408-267">Расположение, указанное в пути, указывается относительно расположения, указанного в пути установки, например Redist \\ .</span><span class="sxs-lookup"><span data-stu-id="9f408-267">The location specified by the path is relative to the location specified by the installation path—for example, "redist\\".</span></span>

     

6.  <span data-ttu-id="9f408-268">Сохраните пакет MSI.</span><span class="sxs-lookup"><span data-stu-id="9f408-268">Save the MSI package.</span></span> <span data-ttu-id="9f408-269">Более подробные сведения о пакетах MSI и установщик Windows см. в разделе [установщик Windows](/windows/desktop/Msi/windows-installer-portal).</span><span class="sxs-lookup"><span data-stu-id="9f408-269">For more detailed information about MSI packages and Windows Installer, see [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span></span>

## <a name="debugging-tips"></a><span data-ttu-id="9f408-270">Советы по отладке</span><span class="sxs-lookup"><span data-stu-id="9f408-270">Debugging tips</span></span>

<span data-ttu-id="9f408-271">И D3D11InstallHelper.dll, и D3D11Install.exe могут быть построены с помощью отладочной конфигурации в Visual Studio, и эти версии будут печатать сообщения в стандартный механизм вывода данных отладки Windows.</span><span class="sxs-lookup"><span data-stu-id="9f408-271">Both D3D11InstallHelper.dll and D3D11Install.exe can be built with the Debug configuration in Visual Studio, and these versions will print messages to the standard Windows debug output mechanism.</span></span>

## <a name="corporate-settings"></a><span data-ttu-id="9f408-272">Параметры организации</span><span class="sxs-lookup"><span data-stu-id="9f408-272">Corporate settings</span></span>

<span data-ttu-id="9f408-273">Пример D3D11InstallHelper предназначен для стандартного развертывания с помощью Центр обновления Windows, который является наиболее распространенным сценарием для установки игр потребителями.</span><span class="sxs-lookup"><span data-stu-id="9f408-273">The D3D11InstallHelper sample is designed for standard deployment through Windows Update, which is the most common scenario for installation of a game by consumers.</span></span> <span data-ttu-id="9f408-274">Однако многие разработчики игр, работающие с издателями и в Studios разработки, делают это в корпоративных параметрах, имеющих локально управляемый сервер, предоставляющий обновления программного обеспечения с помощью технологии Windows Server Update Services (WSUS).</span><span class="sxs-lookup"><span data-stu-id="9f408-274">However, Many game developers, working for publishers and in development studios, do so in enterprise settings that have a locally managed server providing software updates by using Windows Server Update Services (WSUS) technology.</span></span> <span data-ttu-id="9f408-275">В среде этого типа Локальный ИТ-администратор имеет возможность управления тем, какие обновления становятся доступными для компьютеров в корпоративной сети, а Стандартная пользовательская версия обновления KB 971644 недоступна.</span><span class="sxs-lookup"><span data-stu-id="9f408-275">In this type of environment, the local IT administrator has approval control over which updates are made available to computers within the corporate network, and the standard consumer version of update KB 971644 is not available.</span></span>

<span data-ttu-id="9f408-276">Существует три основных решения для развертывания DirectX 11 в корпоративном или корпоративном параметре:</span><span class="sxs-lookup"><span data-stu-id="9f408-276">There are three basic solutions for deploying DirectX 11 in corporate/enterprise settings:</span></span>

-   <span data-ttu-id="9f408-277">В некоторых конфигурациях можно напрямую проверить Центр обновления Windows, а не использовать локально управляемый WSUS-сервер.</span><span class="sxs-lookup"><span data-stu-id="9f408-277">In some configurations, it is possible to directly check Windows Update rather than use the locally managed WSUS server.</span></span> <span data-ttu-id="9f408-278">По этой причине D3D11InstallHelper поддерживает параметр командной строки **/Ву** .</span><span class="sxs-lookup"><span data-stu-id="9f408-278">For this reason, D3D11InstallHelper supports the **/wu** command-line switch.</span></span> <span data-ttu-id="9f408-279">Однако не все корпоративные сети разрешают подключения к общедоступным серверам Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="9f408-279">However, not all corporate networks allow connections to the public Microsoft servers.</span></span>
-   <span data-ttu-id="9f408-280">Локальный ИТ-администратор может утвердить KB 971512, поддерживаемое корпоративным обновлением из WSUS, которое включает в себя API Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="9f408-280">The local IT administrator can approve KB 971512, an enterprise-supported update deployed from WSUS, that includes the Direct3D 11 API.</span></span> <span data-ttu-id="9f408-281">Это единственный вариант, позволяющий стандартному пользователю получить обновление Direct3D 11 в полностью заблокированной среде.</span><span class="sxs-lookup"><span data-stu-id="9f408-281">This is the only option for a Standard User to obtain the Direct3D 11 update in an environment that is fully locked down.</span></span>
-   <span data-ttu-id="9f408-282">Кроме того, [KB 971512](https://support.microsoft.com/kb/971512/) можно установить вручную.</span><span class="sxs-lookup"><span data-stu-id="9f408-282">Alternatively, [KB 971512](https://support.microsoft.com/kb/971512/) can be manually installed.</span></span>

<span data-ttu-id="9f408-283">Очень редко компьютер-любителей может получать обновления только с локально управляемого WSUS-сервера, и только разработчики в крупных организациях, скорее всего, будут находиться в таких средах.</span><span class="sxs-lookup"><span data-stu-id="9f408-283">It is very rare that a gamer's computer can only get updates from a locally managed WSUS server, and it is only developers in large organizations who are likely to be in such environments.</span></span>

## <a name="related-articles"></a><span data-ttu-id="9f408-284">Похожие статьи</span><span class="sxs-lookup"><span data-stu-id="9f408-284">Related articles</span></span>

[<span data-ttu-id="9f408-285">Брандмауэр Windows для разработчиков игр</span><span class="sxs-lookup"><span data-stu-id="9f408-285">Windows Firewall for Game Developers</span></span>](/windows/desktop/DxTechArts/games-and-firewalls)

[<span data-ttu-id="9f408-286">Обозреватель игр Windows для разработчиков игр</span><span class="sxs-lookup"><span data-stu-id="9f408-286">Windows Games Explorer for Game Developers</span></span>](/windows/desktop/DxTechArts/windows-game-explorer-integration)