---
description: Active Directory предоставляет базу данных учетных записей, которую центр распространения ключей (KDC) использует для получения сведений о субъектах безопасности в домене.
ms.assetid: 560ef22c-dd4f-49f8-9e15-a45dbf17df01
title: База данных учетных записей
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0713d8f7b4336f43172fcd5cda18aa9d25c702fb
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103998681"
---
# <a name="account-database"></a><span data-ttu-id="f8bb8-103">База данных учетных записей</span><span class="sxs-lookup"><span data-stu-id="f8bb8-103">Account Database</span></span>

<span data-ttu-id="f8bb8-104">Active Directory предоставляет базу данных учетных записей, которую [*центр распространения ключей*](/windows/desktop/SecGloss/k-gly) (KDC) использует для получения сведений о [*субъектах безопасности*](/windows/desktop/SecGloss/s-gly) в домене.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-104">Active Directory provides the account database that the [*Key Distribution Center*](/windows/desktop/SecGloss/k-gly) (KDC) uses to obtain information about [*security principals*](/windows/desktop/SecGloss/s-gly) in the domain.</span></span> <span data-ttu-id="f8bb8-105">Каждый участник представлен объектом Account в каталоге.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-105">Each principal is represented by an account object in the directory.</span></span> <span data-ttu-id="f8bb8-106">Ключ [*шифрования*](/windows/desktop/SecGloss/e-gly) , используемый для связи с пользователем, компьютером или службой, хранится в качестве атрибута объекта учетной записи этого субъекта безопасности.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-106">The [*encryption*](/windows/desktop/SecGloss/e-gly) key used in communicating with a user, computer, or service is stored as an attribute of the account object of that security principal.</span></span>

<span data-ttu-id="f8bb8-107">Только контроллеры домена являются Active Directory серверами.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-107">Only domain controllers are Active Directory servers.</span></span> <span data-ttu-id="f8bb8-108">Каждый контроллер домена хранит доступную для записи копию каталога, поэтому учетные записи можно создавать, сбрасывать пароли и изменять членство в группах на любом контроллере домена.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-108">Each domain controller keeps a writable copy of the directory, so accounts can be created, passwords reset, and group membership modified at any domain controller.</span></span> <span data-ttu-id="f8bb8-109">Изменения, внесенные в одну реплику каталога, автоматически распространяются на все остальные реплики.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-109">Changes made to one replica of the directory are automatically propagated to all other replicas.</span></span> <span data-ttu-id="f8bb8-110">Windows реплицирует банк данных для Active Directory с помощью собственного протокола репликации с несколькими хозяевами, использующего безопасное подключение удаленного вызова процедур между партнерами репликации.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-110">Windows replicates the information store for the Active Directory using a proprietary multiple-master replication protocol that uses a secure remote procedure call connection between replication partners.</span></span> <span data-ttu-id="f8bb8-111">Для обеспечения взаимной [*проверки подлинности*](/windows/desktop/SecGloss/a-gly) и шифрования соединение использует [*протокол проверки подлинности Kerberos*](/windows/desktop/SecGloss/k-gly) .</span><span class="sxs-lookup"><span data-stu-id="f8bb8-111">The connection uses the [*Kerberos authentication protocol*](/windows/desktop/SecGloss/k-gly) to provide mutual [*authentication*](/windows/desktop/SecGloss/a-gly) and encryption.</span></span>

<span data-ttu-id="f8bb8-112">Физическое хранение данных учетной записи управляется [агентом системы каталогов](/windows/desktop/AD/directory-system-agent), защищенным процессом, интегрированным с [*локальным центром безопасности*](/windows/desktop/SecGloss/l-gly) (LSA) на контроллере домена.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-112">Physical storage of account data is managed by the [Directory System Agent](/windows/desktop/AD/directory-system-agent), a protected process integrated with the [*Local Security Authority*](/windows/desktop/SecGloss/l-gly) (LSA) on the domain controller.</span></span> <span data-ttu-id="f8bb8-113">Клиентам службы каталогов никогда не предоставляется прямой доступ к хранилищу данных.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-113">Clients of the directory service are never given direct access to the data store.</span></span> <span data-ttu-id="f8bb8-114">Любой клиент, которому требуется доступ к сведениям о каталоге, должен подключиться к агенту системы каталогов, а затем найти, прочитать и записать объекты каталога и их атрибуты.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-114">Any client that wants access to directory information must connect to the Directory System Agent and then search for, read, and write directory objects and their attributes.</span></span>

<span data-ttu-id="f8bb8-115">Запросы на доступ к объекту или атрибуту в каталоге подлежат проверке с помощью механизмов управления доступом Windows.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-115">Requests to access an object or attribute in the directory are subject to validation by Windows access control mechanisms.</span></span> <span data-ttu-id="f8bb8-116">Как и объекты файлов и папок в файловой системе NTFS, объекты в Active Directory защищены [*списками управления доступом*](/windows/desktop/SecGloss/a-gly) (ACL), которые указывают, кто имеет доступ к объекту и каким образом.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-116">Like file and folder objects in the NTFS file system, objects in the Active Directory are protected by [*access control lists*](/windows/desktop/SecGloss/a-gly) (ACLs) that specify who can access the object and in what way.</span></span> <span data-ttu-id="f8bb8-117">Однако в отличие от файлов и папок, Active Directory объекты имеют список управления доступом для каждого из их атрибутов.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-117">Unlike files and folders, however, Active Directory objects have an ACL for each of their attributes.</span></span> <span data-ttu-id="f8bb8-118">Таким словами, атрибуты конфиденциальных данных учетной записи могут быть защищены более узкими разрешениями, чем предоставлены другим атрибутам учетной записи.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-118">Thus attributes for sensitive account information can be protected by more restrictive permissions than those granted for other attributes of the account.</span></span>

<span data-ttu-id="f8bb8-119">Наиболее конфиденциальная информация о учетной записи — это, конечно, пароль.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-119">The most sensitive information about an account is of course its password.</span></span> <span data-ttu-id="f8bb8-120">Несмотря на то, что атрибут Password объекта Account хранит ключ шифрования, полученный на основе пароля, а не самого пароля, этот ключ очень удобен для злоумышленника.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-120">Although the password attribute of an account object stores an encryption key derived from a password, not the password itself, this key is just as useful to an intruder.</span></span> <span data-ttu-id="f8bb8-121">Таким образом, доступ к атрибуту Password объекта Account предоставляется только владельцу учетной записи, но не никому другому, а не администраторам.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-121">Therefore, access to the password attribute of an account object is granted only to the account holder, never to anyone else, not even administrators.</span></span> <span data-ttu-id="f8bb8-122">Только процессы с базовыми правами доверенных вычислений — процессы, выполняющиеся в [*контексте*](/windows/desktop/SecGloss/c-gly) безопасности LSA, могут читать и изменять данные паролей.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-122">Only processes with Trusted Computing Base privilege—processes running in the security [*context*](/windows/desktop/SecGloss/c-gly) of the LSA—are allowed to read or change password information.</span></span>

<span data-ttu-id="f8bb8-123">Чтобы не выполнять автономную атаку с доступом пользователя к ленте резервного копирования контроллера домена, атрибут Password объекта Account дополнительно защищается вторым шифрованием с помощью системного ключа.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-123">To hinder an offline attack by someone with access to the backup tape of a domain controller, the password attribute of an account object is further protected by a second encryption using a system key.</span></span> <span data-ttu-id="f8bb8-124">Этот ключ шифрования может храниться на съемных носителях, чтобы его можно было защищать отдельно или сохранить на контроллере домена, но защитить с помощью распределенного механизма.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-124">This encryption key can be stored on removable media so that it can be safeguarded separately, or it can be stored on the domain controller but protected by a dispersal mechanism.</span></span> <span data-ttu-id="f8bb8-125">Администраторы получают возможность выбрать место хранения системного ключа и использовать несколько алгоритмов для шифрования атрибутов паролей.</span><span class="sxs-lookup"><span data-stu-id="f8bb8-125">Administrators are given the option to choose where the system key is stored and which of several algorithms is used to encrypt password attributes.</span></span>

 

 
