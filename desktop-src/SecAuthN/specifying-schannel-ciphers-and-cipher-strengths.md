---
description: Указание шифров SChannel и стойкости шифров
ms.assetid: b87d3e72-df7b-4a00-854e-c3706565ed7d
title: Указание шифров SChannel и стойкости шифров
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b04ec37cfea633814881fba5bfd71ad15205a1bd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105664160"
---
# <a name="specifying-schannel-ciphers-and-cipher-strengths"></a><span data-ttu-id="3910f-103">Указание шифров SChannel и стойкости шифров</span><span class="sxs-lookup"><span data-stu-id="3910f-103">Specifying Schannel Ciphers and Cipher Strengths</span></span>

<span data-ttu-id="3910f-104">Для обмена данными между клиентом и сервером по умолчанию канал Schannel обеспечивает согласование наилучшего шифра, доступного на основе включенных в реестре.</span><span class="sxs-lookup"><span data-stu-id="3910f-104">For client/server information exchanges, the default behavior of Schannel is to negotiate the best cipher available based on those enabled in the registry.</span></span> <span data-ttu-id="3910f-105">Приложения могут ограничить шифры и стойкости шифра, разрешенные для соединения, с помощью членов структуры учетных данных [**SChannel \_**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) следующим образом:</span><span class="sxs-lookup"><span data-stu-id="3910f-105">Applications may limit the ciphers and cipher strengths allowed for a connection by using members of the [**SCHANNEL\_CRED**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) structure as follows:</span></span>

1.  <span data-ttu-id="3910f-106">Задайте для элемента **палгсуппортедалгс** массив [**\_ идентификаторов ALG**](../seccrypto/alg-id.md) , содержащий допустимые шифры.</span><span class="sxs-lookup"><span data-stu-id="3910f-106">Set the **palgSupportedAlgs** member to an array of [**ALG\_ID**](../seccrypto/alg-id.md) containing the allowable ciphers.</span></span> <span data-ttu-id="3910f-107">Дополнительные сведения см. в разделе Идентификаторы шифров.</span><span class="sxs-lookup"><span data-stu-id="3910f-107">For more information, see Cipher IDs.</span></span>
2.  <span data-ttu-id="3910f-108">Задайте для элементов **двминимумЦиферстренгс** и/или **двмаксимумЦиферстренгс** допустимые минимальные и максимальные сильные стороны.</span><span class="sxs-lookup"><span data-stu-id="3910f-108">Set the **dwMinimumCipherStrength** and/or **dwMaximumCipherStrength** members to the allowable minimum and maximum strengths.</span></span> <span data-ttu-id="3910f-109">Дополнительные сведения см. в разделе значения стойкости шифра.</span><span class="sxs-lookup"><span data-stu-id="3910f-109">For more information, see Cipher Strength Values.</span></span>
3.  <span data-ttu-id="3910f-110">Передайте структуру учетных данных [**\_ SChannel**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) (с помощью параметра *паусдата* ) в вызове функции [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) .</span><span class="sxs-lookup"><span data-stu-id="3910f-110">Pass the [**SCHANNEL\_CRED**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) structure (by means of the *pAuthData* parameter) in a call to the [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) function.</span></span> <span data-ttu-id="3910f-111">Эта функция возвращает маркер учетных данных.</span><span class="sxs-lookup"><span data-stu-id="3910f-111">This function returns a credentials handle.</span></span>
4.  <span data-ttu-id="3910f-112">Укажите обработчик учетных данных в вызове клиентской функции [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) или функции [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) на стороне сервера.</span><span class="sxs-lookup"><span data-stu-id="3910f-112">Specify the credentials handle in a call to the client-side [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function or the server-side [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span>

## <a name="cipher-ids"></a><span data-ttu-id="3910f-113">Идентификаторы шифров</span><span class="sxs-lookup"><span data-stu-id="3910f-113">Cipher IDs</span></span>

<span data-ttu-id="3910f-114">Поведением по умолчанию Schannel является запрос лучшего шифра, доступного на основе записей Schannel в системном реестре.</span><span class="sxs-lookup"><span data-stu-id="3910f-114">The default behavior of Schannel is to request the best cipher available based on Schannel entries in the system registry.</span></span> <span data-ttu-id="3910f-115">Не изменяйте системный реестр; параметры, которые он содержит для канала SChannel, используются глобально и повлияют на другие приложения.</span><span class="sxs-lookup"><span data-stu-id="3910f-115">Do not change the system registry; the settings it contains for Schannel are used globally and will affect other applications.</span></span> <span data-ttu-id="3910f-116">Список допустимых констант см. в разделе [**\_ идентификатор алгоритма**](../seccrypto/alg-id.md).</span><span class="sxs-lookup"><span data-stu-id="3910f-116">For the list of valid constants, see [**ALG\_ID**](../seccrypto/alg-id.md).</span></span>

## <a name="cipher-strength-values"></a><span data-ttu-id="3910f-117">Значения стойкости шифра</span><span class="sxs-lookup"><span data-stu-id="3910f-117">Cipher Strength Values</span></span>

<span data-ttu-id="3910f-118">Эта функция SChannel обычно используется для ограничения подключения к внутренним или экспортируемым шифрам стойкости.</span><span class="sxs-lookup"><span data-stu-id="3910f-118">This Schannel feature is typically used to limit a connection to either domestic or export strength ciphers.</span></span> <span data-ttu-id="3910f-119">Внутренние сильные стороны включают 56 и 128 бит, а сила экспорта ограничена 56 битами.</span><span class="sxs-lookup"><span data-stu-id="3910f-119">Domestic strengths include 56, and 128 bits, while export strength is limited to 56 bits.</span></span> <span data-ttu-id="3910f-120">Если для параметра минимальное и максимальное значение установлено значение нуль SChannel, будут использоваться все доступные стойкости шифра.</span><span class="sxs-lookup"><span data-stu-id="3910f-120">If you set the minimum and maximum values to zero Schannel will use all available cipher strengths.</span></span>

<span data-ttu-id="3910f-121">Используя TLS или SSL 3,0, установите для элемента **двминимумЦиферстренгс** значение-1 (отрицательное значение), чтобы включить комплекты шифров со значением "null Cipher", которые предоставляют подписи, но не шифруются.</span><span class="sxs-lookup"><span data-stu-id="3910f-121">Using TLS or SSL 3.0, set the **dwMinimumCipherStrength** member to -1 (negative one) to enable the "Null Cipher" cipher suites, which provide signatures but no encryption.</span></span> <span data-ttu-id="3910f-122">Если для **двмаксимумЦиферстренгс** также задано значение-1, будут включены только наборы "нулевое шифрование".</span><span class="sxs-lookup"><span data-stu-id="3910f-122">If **dwMaximumCipherStrength** is also set to -1 then only the "Null Cipher" suites will be enabled.</span></span> <span data-ttu-id="3910f-123">Этот параметр предназначен только для разработки и не должен использоваться в рабочих системах.</span><span class="sxs-lookup"><span data-stu-id="3910f-123">This setting is intended for development only and should not be used in production systems.</span></span>

## <a name="querying-cipher-information"></a><span data-ttu-id="3910f-124">Запрос сведений о шифрах</span><span class="sxs-lookup"><span data-stu-id="3910f-124">Querying Cipher Information</span></span>

<span data-ttu-id="3910f-125">Чтобы получить параметры стойкости шифра для учетных данных, вызовите функцию [**куерикредентиалсаттрибутес**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) и укажите \_ \_ стойкости шифра SECPKG attr в \_ качестве параметра *улаттрибуте* .</span><span class="sxs-lookup"><span data-stu-id="3910f-125">To retrieve the cipher strength settings for a credential, call the [**QueryCredentialsAttributes**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) function and specify SECPKG\_ATTR\_CIPHER\_STRENGTHS as the *ulAttribute* parameter.</span></span>

<span data-ttu-id="3910f-126">Чтобы получить список поддерживаемых алгоритмов для учетных данных, вызовите [**куерикредентиалсаттрибутес**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) с SECPKG \_ attr \_ Supported \_ АЛГС в качестве параметра *улаттрибуте* .</span><span class="sxs-lookup"><span data-stu-id="3910f-126">To retrieve the list of supported algorithms for a credential, call the [**QueryCredentialsAttributes**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) with SECPKG\_ATTR\_SUPPORTED\_ALGS as the *ulAttribute* parameter.</span></span>

 

 
