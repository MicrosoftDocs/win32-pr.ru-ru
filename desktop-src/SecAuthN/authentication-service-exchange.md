---
description: Пользователь начинает входить в сеть, вводя имя для входа и пароль. Клиент Kerberos на рабочей станции пользователя преобразует пароль в ключ шифрования и сохраняет результат в программной переменной.
ms.assetid: fcb3b601-9953-474c-9a08-1fa25706f3d7
title: Проверка подлинности службы Exchange
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c14121ed33ae0ac169c590b03dfb0b395306d11f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105647445"
---
# <a name="authentication-service-exchange"></a>Проверка подлинности службы Exchange

Пользователь начинает входить в сеть, вводя имя для входа и пароль. Клиент [*Kerberos*](/windows/desktop/SecGloss/k-gly) на рабочей станции пользователя преобразует пароль в ключ шифрования и сохраняет результат в программной переменной.

Затем клиент запрашивает [*учетные данные*](/windows/desktop/SecGloss/c-gly) для службы предоставления билетов (TGS) [*центр распространения ключей*](/windows/desktop/SecGloss/k-gly) (KDC), отправив службе проверки подлинности KDC сообщение типа КРБ \_ As \_ req (запрос на обслуживание проверки подлинности Kerberos). Первая часть этого сообщения указывает пользователя и запрашиваемую службу TGS. Вторая часть сообщения содержит данные предварительной проверки подлинности, предназначенные для подтверждения того, что пользователь знает пароль. Это просто сообщение средства проверки подлинности, которое шифруется с помощью [*главного ключа*](/windows/desktop/SecGloss/m-gly) , полученного из пароля входа пользователя.

Когда KDC получает КРБ \_ в качестве \_ требования, он находит пользователя в своей базе данных, получает главный ключ связанного пользователя, расшифровывает данные предварительной проверки подлинности и вычисляет метку времени в. Если метка времени допустима, KDC может быть уверен, что данные предварительной проверки подлинности были зашифрованы с помощью главного ключа пользователя и поэтому клиент является подлинным.

После того как KDC проверит удостоверение пользователя, он создает учетные данные, которые клиент может предоставить TGS, следующим образом.

1.  KDC продает [*ключ сеанса*](/windows/desktop/SecGloss/s-gly) входа и шифрует копию с помощью главного ключа пользователя.
2.  KDC внедряет еще одну копию ключа сеанса входа и данные авторизации пользователя в билет предоставления билетов (TGT) и шифрует билет TGT с помощью собственного главного ключа KDC.
3.  KDC отправляет эти учетные данные обратно клиенту, отвечая на сообщение типа КРБ \_ As \_ представитель (ответ службы проверки подлинности Kerberos).
4.  Когда клиент получает ответ, он использует ключ, полученный от пароля пользователя, для расшифровки нового ключа сеанса входа.
5.  Клиент сохраняет новый ключ в кэше билетов.
6.  Клиент извлекает TGT из сообщения и сохраняет его в кэше билетов.

 

 
