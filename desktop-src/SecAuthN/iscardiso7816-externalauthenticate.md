---
description: Конструирует команду блока данных протокола приложения (КАТЕГОРИЯХ APDU), которая условно обновляет состояние безопасности, проверяя удостоверение компьютера, когда смарт-карта не доверяет ей.
ms.assetid: 6db063d5-48a7-4c8b-ae84-cbcf34edc79d
title: 'Метод ISCardISO7816:: Екстерналаусентикате (Скардссп. h)'
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- ISCardISO7816.ExternalAuthenticate
api_type:
- COM
api_location:
- Scardssp.dll
ms.openlocfilehash: 1c8d56b6f2210974bd86dbecea06f16b68548659
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104423818"
---
# <a name="iscardiso7816externalauthenticate-method"></a>Метод ISCardISO7816:: Екстерналаусентикате

\[Метод **екстерналаусентикате** доступен для использования в операционных системах, указанных в разделе требования. Он недоступен для использования в Windows Server 2003 с пакетом обновления 1 (SP1) и более поздней версии, Windows Vista, Windows Server 2008 и последующих версиях операционной системы. [Модули смарт-карт](/previous-versions/windows/desktop/secsmart/smart-card-modules) предоставляют аналогичные функции.\]

Метод **екстерналаусентикате** конструирует команду [*блока данных протокола приложения*](../secgloss/a-gly.md) (категориях APDU), которая условно обновляет состояние безопасности, проверяя удостоверение компьютера, когда [*смарт-карта*](../secgloss/s-gly.md) не доверяет ей.

В команде используется результат (да или нет) вычисления картой (в зависимости от запроса, ранее выданного картой, например \_ команды "получить \_ запрос"), ключа (возможно, секрета), сохраненного на карте, и данных проверки подлинности, передаваемых устройством интерфейса.

## <a name="syntax"></a>Синтаксис


```C++
HRESULT ExternalAuthenticate(
  [in]      BYTE         byAlgorithmRef,
  [in]      BYTE         bySecretRef,
  [in]      LPBYTEBUFFER pChallenge,
  [in, out] LPSCARDCMD   *ppCmd
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*бялгорисмреф* \[ окне\]
</dt> <dd>

Ссылка на алгоритм в карточке.

Если это значение равно нулю, это означает, что сведения не указаны. Ссылка на алгоритм известна либо перед выдачей команды, либо в поле данных.

</dd> <dt>

*бисекретреф* \[ окне\]
</dt> <dd>

Ссылка на секрет.



| Значение                                                                                                                                                                                    | Значение                                                                                                                                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="No_Info"></span><span id="no_info"></span><span id="NO_INFO"></span><dl> <dt>**Нет сведений**</dt> </dl>                     | Разрядное расположение: 00000000<br/> Сведения не предоставляются. Ссылка на секрет известен либо перед выдачей команды, либо в поле данных.<br/> |
| <span id="Global_ref"></span><span id="global_ref"></span><span id="GLOBAL_REF"></span><dl> <dt>**Глобальная ссылка**</dt> </dl>         | Битовое расположение: 0-------<br/> Глобальные эталонные данные (ключ, определяемый протоколом MF).<br/>                                                                                       |
| <span id="Specific_ref"></span><span id="specific_ref"></span><span id="SPECIFIC_REF"></span><dl> <dt>**Конкретная ссылка**</dt> </dl> | Битовое расположение: 1-------<br/> Конкретные ссылочные данные (ключ, определяемый DF).<br/>                                                                                      |
| <span id="RFU"></span><span id="rfu"></span><dl> <dt>**рфу**</dt> </dl>                                                           | Разрядное расположение:-XX-----<br/> 00 (другие значения — РФУ).<br/>                                                                                                        |
| <span id="Secret"></span><span id="secret"></span><span id="SECRET"></span><dl> <dt>**Владел**</dt> </dl>                         | Разрядное расположение:---XXXXX<br/> Номер секрета.<br/>                                                                                                             |



 

</dd> <dt>

*пчалленже* \[ окне\]
</dt> <dd>

Указатель на данные, связанные с проверкой подлинности. Этот параметр может иметь **значение NULL**.

</dd> <dt>

*ппкмд* \[ в, out\]
</dt> <dd>

На входе — указатель на объект интерфейса [**искардкмд**](iscardcmd.md) или **значение NULL**.

При возвращении он заполняется командой КАТЕГОРИЯХ APDU, созданной этой операцией. Если для *ппкмд* было задано **значение NULL**, то объект [*смарт-карты*](../secgloss/s-gly.md) [**искардкмд**](iscardcmd.md) создается внутренне и возвращается с помощью указателя *ппкмд* .

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Метод возвращает одно из следующих возможных значений.



| Код возврата                                                                                   | Описание                                          |
|-----------------------------------------------------------------------------------------------|------------------------------------------------------|
| <dl> <dt>**\_ОК**</dt> </dl>          | Операция выполнена успешно.<br/>     |
| <dl> <dt>**E \_ INVALIDARG**</dt> </dl>  | Передан недопустимый параметр.<br/> |
| <dl> <dt>**\_указатель E**</dt> </dl>     | Передан неверный указатель.<br/>              |
| <dl> <dt>**E \_ OUTOFMEMORY**</dt> </dl> | Недостаточно памяти.<br/>                            |



 

## <a name="remarks"></a>Комментарии

Для успешного выполнения инкапсулированной команды последний запрос, полученный из карточки, должен быть допустимым.

Неудачные сравнения могут быть записаны на карту (например, чтобы ограничить число дальнейших попыток использования эталонных данных).

Список всех методов, предоставляемых этим интерфейсом, см. в разделе [**ISCardISO7816**](iscardiso7816.md).

Кроме приведенных выше кодов ошибок COM, этот интерфейс может возвращать код ошибки смарт-карты, если для завершения запроса была вызвана функция смарт-карты. Дополнительные сведения см. в статье [возвращаемые значения смарт-карты](authentication-return-values.md).

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|-----------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Только для \[ классических приложений Windows XP\]<br/>                                             |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2003\]<br/>                                    |
| Окончание поддержки клиента<br/>    | Windows XP<br/>                                                                   |
| Поддержка конца сервера<br/>    | Windows Server 2003<br/>                                                          |
| Header<br/>                   | <dl> <dt>Скардссп. h</dt> </dl>   |
| Библиотека типов<br/>             | <dl> <dt>Скардсрв. tlb</dt> </dl> |
| DLL<br/>                      | <dl> <dt>Scardssp.dll</dt> </dl> |
| IID<br/>                      | IID \_ ISCardISO7816 определен как 53B6AA68-3F56-11D0-916B-00AA00C18068<br/>        |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**интерналаусентикате**](iscardiso7816-internalauthenticate.md)
</dt> <dt>

[**ISCardISO7816**](iscardiso7816.md)
</dt> </dl>

 

 
