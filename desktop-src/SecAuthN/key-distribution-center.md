---
description: Центр распространения ключей (KDC) реализуется как служба домена. Он использует Active Directory в качестве базы данных учетной записи и глобальный каталог для направления ссылок в Кдкс в других доменах.
ms.assetid: f2a7c87c-9be7-4fd8-8ecd-4edf1f2336ef
title: центр распространения ключей
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8f473fc3b84fed05e157fa700e7549f025979a90
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104080910"
---
# <a name="key-distribution-center"></a><span data-ttu-id="e56d2-104">центр распространения ключей</span><span class="sxs-lookup"><span data-stu-id="e56d2-104">Key Distribution Center</span></span>

<span data-ttu-id="e56d2-105">Центр распространения ключей (KDC) реализуется как служба домена.</span><span class="sxs-lookup"><span data-stu-id="e56d2-105">The Key Distribution Center (KDC) is implemented as a domain service.</span></span> <span data-ttu-id="e56d2-106">Он использует Active Directory в качестве базы данных учетной записи и глобальный каталог для направления ссылок в Кдкс в других доменах.</span><span class="sxs-lookup"><span data-stu-id="e56d2-106">It uses the Active Directory as its account database and the Global Catalog for directing referrals to KDCs in other domains.</span></span>

<span data-ttu-id="e56d2-107">Как и в других реализациях [*протокола Kerberos*](../secgloss/k-gly.md), KDC представляет собой единый процесс, который предоставляет две службы:</span><span class="sxs-lookup"><span data-stu-id="e56d2-107">As in other implementations of the [*Kerberos protocol*](../secgloss/k-gly.md), the KDC is a single process that provides two services:</span></span>

-   <span data-ttu-id="e56d2-108">Служба проверки подлинности (AS)</span><span class="sxs-lookup"><span data-stu-id="e56d2-108">Authentication Service (AS)</span></span>

    <span data-ttu-id="e56d2-109">Эта служба выдает билеты предоставления билетов (TGT) для подключения к службе предоставления билетов в своем собственном домене или в любом доверенном домене.</span><span class="sxs-lookup"><span data-stu-id="e56d2-109">This service issues ticket-granting tickets (TGTs) for connection to the ticket-granting service in its own domain or in any trusted domain.</span></span> <span data-ttu-id="e56d2-110">Прежде чем клиент сможет запросить билет на другом компьютере, он должен запросить TGT из службы проверки подлинности в домене учетной записи клиента.</span><span class="sxs-lookup"><span data-stu-id="e56d2-110">Before a client can ask for a ticket to another computer, it must request a TGT from the authentication service in the client's account domain.</span></span> <span data-ttu-id="e56d2-111">Служба проверки подлинности возвращает TGT для службы предоставления билетов в домене целевого компьютера.</span><span class="sxs-lookup"><span data-stu-id="e56d2-111">The authentication service returns a TGT for the ticket-granting service in the target computer's domain.</span></span> <span data-ttu-id="e56d2-112">TGT можно использовать повторно до истечения срока действия, но первый доступ к службе предоставления билетов на любой домен всегда требует обращения к службе проверки подлинности в домене учетной записи клиента.</span><span class="sxs-lookup"><span data-stu-id="e56d2-112">The TGT can be reused until it expires, but the first access to any domain's ticket-granting service always requires a trip to the authentication service in the client's account domain.</span></span>

-   <span data-ttu-id="e56d2-113">Служба Ticket-Granting (TGS)</span><span class="sxs-lookup"><span data-stu-id="e56d2-113">Ticket-Granting Service (TGS)</span></span>

    <span data-ttu-id="e56d2-114">Эта служба выдает билеты для подключения к компьютерам в своем собственном домене.</span><span class="sxs-lookup"><span data-stu-id="e56d2-114">This service issues tickets for connection to computers in its own domain.</span></span> <span data-ttu-id="e56d2-115">Когда клиенты хотят получить доступ к компьютеру, они обращаются к службе предоставления билетов в домене целевого компьютера, представляют TGT и запрашивают билет на компьютере.</span><span class="sxs-lookup"><span data-stu-id="e56d2-115">When clients want access to a computer, they contact the ticket-granting service in the target computer's domain, present a TGT, and ask for a ticket to the computer.</span></span> <span data-ttu-id="e56d2-116">Билет можно использовать повторно до истечения срока его действия, но первый доступ к любому компьютеру всегда требует обращения к службе предоставления билетов в домене учетной записи целевого компьютера.</span><span class="sxs-lookup"><span data-stu-id="e56d2-116">The ticket can be reused until it expires, but the first access to any computer always requires a trip to the ticket-granting service in the target computer's account domain.</span></span>

<span data-ttu-id="e56d2-117">KDC для домена размещается на контроллере домена, как и Active Directory домена.</span><span class="sxs-lookup"><span data-stu-id="e56d2-117">The KDC for a domain is located on a domain controller, as is the Active Directory for the domain.</span></span> <span data-ttu-id="e56d2-118">Обе службы запускаются автоматически с помощью [*локального центра безопасности*](../secgloss/l-gly.md) (LSA) контроллера домена и выполняются в рамках процесса LSA.</span><span class="sxs-lookup"><span data-stu-id="e56d2-118">Both services are started automatically by the domain controller's [*Local Security Authority*](../secgloss/l-gly.md) (LSA) and run as part of the LSA's process.</span></span> <span data-ttu-id="e56d2-119">Ни одна из служб не может быть остановлена.</span><span class="sxs-lookup"><span data-stu-id="e56d2-119">Neither service can be stopped.</span></span> <span data-ttu-id="e56d2-120">Если KDC недоступен для сетевых клиентов, Active Directory также недоступен, а контроллер домена больше не управляет этим доменом.</span><span class="sxs-lookup"><span data-stu-id="e56d2-120">If the KDC is unavailable to network clients, then the Active Directory is also unavailable—and the domain controller is no longer controlling the domain.</span></span> <span data-ttu-id="e56d2-121">Система обеспечивает доступность этих и других доменных служб, позволяя каждому домену иметь несколько контроллеров домена и всех узлов.</span><span class="sxs-lookup"><span data-stu-id="e56d2-121">The system ensures availability of these and other domain services by allowing each domain to have several domain controllers, all peers.</span></span> <span data-ttu-id="e56d2-122">Любой контроллер домена может принимать запросы проверки подлинности и запросы на предоставление билетов, адресованные в KDC домена.</span><span class="sxs-lookup"><span data-stu-id="e56d2-122">Any domain controller can accept authentication requests and ticket-granting requests addressed to the domain's KDC.</span></span>

<span data-ttu-id="e56d2-123">Имя [*участника безопасности*](../secgloss/s-gly.md) , используемое KDC в любом домене, — krbtgt, как указано в [RFC 4120](https://www.ietf.org/rfc/rfc4120.txt).</span><span class="sxs-lookup"><span data-stu-id="e56d2-123">The [*security principal*](../secgloss/s-gly.md) name used by the KDC in any domain is "krbtgt", as specified by [RFC 4120](https://www.ietf.org/rfc/rfc4120.txt).</span></span> <span data-ttu-id="e56d2-124">Учетная запись для этого субъекта безопасности создается автоматически при создании нового домена.</span><span class="sxs-lookup"><span data-stu-id="e56d2-124">An account for this security principal is created automatically when a new domain is created.</span></span> <span data-ttu-id="e56d2-125">Учетная запись не может быть удалена, а имя изменить нельзя.</span><span class="sxs-lookup"><span data-stu-id="e56d2-125">The account cannot be deleted, nor can the name be changed.</span></span> <span data-ttu-id="e56d2-126">Значение случайного пароля назначается учетной записи автоматически системой во время создания домена.</span><span class="sxs-lookup"><span data-stu-id="e56d2-126">A random password value is assigned to the account automatically by the system during the creation of the domain.</span></span> <span data-ttu-id="e56d2-127">Пароль для учетной записи KDC используется для получения криптографического ключа для шифрования и расшифровки TGT, которую он выдает.</span><span class="sxs-lookup"><span data-stu-id="e56d2-127">The password for the KDC's account is used to derive a cryptographic key for encrypting and decrypting the TGTs that it issues.</span></span> <span data-ttu-id="e56d2-128">Пароль для учетной записи доверия домена используется для получения ключа между областями для шифрования ссылочных билетов.</span><span class="sxs-lookup"><span data-stu-id="e56d2-128">The password for a domain trust account is used to derive an inter-realm key for encrypting referral tickets.</span></span>

<span data-ttu-id="e56d2-129">Все экземпляры KDC в домене используют учетную запись домена для субъекта безопасности KRBTGT.</span><span class="sxs-lookup"><span data-stu-id="e56d2-129">All instances of the KDC within a domain use the domain account for the security principal "krbtgt".</span></span> <span data-ttu-id="e56d2-130">Клиенты разадресают сообщения в KDC домена, включая имя участника службы, "KRBTGT" и имя домена.</span><span class="sxs-lookup"><span data-stu-id="e56d2-130">Clients address messages to a domain's KDC by including both the service's principal name, "krbtgt", and the name of the domain.</span></span> <span data-ttu-id="e56d2-131">Оба элемента информации также используются в билетах для выяснения выдающего центра.</span><span class="sxs-lookup"><span data-stu-id="e56d2-131">Both items of information are also used in tickets to identify the issuing authority.</span></span> <span data-ttu-id="e56d2-132">Сведения о формах имен и соглашениях об адресации см. в [документе RFC 4120](https://www.ietf.org/rfc/rfc4120.txt).</span><span class="sxs-lookup"><span data-stu-id="e56d2-132">For information about name forms and addressing conventions, see [RFC 4120](https://www.ietf.org/rfc/rfc4120.txt).</span></span>

 

 
