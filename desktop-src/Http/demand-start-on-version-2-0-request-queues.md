---
title: Запуск запроса в очереди запросов версии 2,0
description: .
ms.assetid: 84a744b7-1b0e-4fa7-8015-4840251aa856
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 78d618ea3fa38a856eba743d2bf60bfbfec9a633
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "103987522"
---
# <a name="demand-start-on-version-20-request-queues"></a><span data-ttu-id="c7282-103">Запуск запроса в очереди запросов версии 2,0</span><span class="sxs-lookup"><span data-stu-id="c7282-103">Demand Start on Version 2.0 Request Queues</span></span>

<span data-ttu-id="c7282-104">Функция Demand Start в очередях запросов API версии 2,0 сервера HTTP позволяет приложению контроллера отложить создание экземпляра рабочего процесса до тех пор, пока первый запрос не поступит в очередь запросов.</span><span class="sxs-lookup"><span data-stu-id="c7282-104">The demand start feature of the HTTP Server version 2.0 API request queues allows controller application to delay worker process instantiation until the first request arrives on the request queue.</span></span> <span data-ttu-id="c7282-105">Таким же приложениям можно избежать использования ресурсов, пока они не потребуются.</span><span class="sxs-lookup"><span data-stu-id="c7282-105">Thus, the applications can avoid consuming resources until they are required.</span></span> <span data-ttu-id="c7282-106">Дополнительные сведения о приложении контроллера см. в разделе " [Именованная очередь запросов](named-request-queue.md) ".</span><span class="sxs-lookup"><span data-stu-id="c7282-106">For more information about the controller application, see the [Named Request Queue](named-request-queue.md) topic.</span></span>

## <a name="asynchronous-demand-start"></a><span data-ttu-id="c7282-107">Запуск асинхронного запроса</span><span class="sxs-lookup"><span data-stu-id="c7282-107">Asynchronous Demand Start</span></span>

<span data-ttu-id="c7282-108">Приложение контроллера вызывает [**хттпваитфордемандстарт**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) с маркером в очередь запросов для инициации уведомления о запуске спроса.</span><span class="sxs-lookup"><span data-stu-id="c7282-108">The controller application calls [**HttpWaitForDemandStart**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) with the handle to the request queue to initiate a demand start notification.</span></span> <span data-ttu-id="c7282-109">Для асинхронного завершения приложение предоставляет структуру OVERLAPPED в параметре *поверлаппед* .</span><span class="sxs-lookup"><span data-stu-id="c7282-109">For asynchronous completion, the application supplies the overlapped structure in the *pOverlapped* parameter.</span></span> <span data-ttu-id="c7282-110">Когда **хттпваитфордемандстарт** вызывается асинхронно, приложение контроллера получает уведомления, когда первый запрос поступает в очередь запросов.</span><span class="sxs-lookup"><span data-stu-id="c7282-110">When **HttpWaitForDemandStart** is called asynchronously, the controller application is notified when the first request arrives on the request queue.</span></span> <span data-ttu-id="c7282-111">После завершения уведомления о запуске запроса приложение контроллера может зарегистрироваться для получения другого уведомления о начале спроса в очереди запросов.</span><span class="sxs-lookup"><span data-stu-id="c7282-111">After the demand start notification completes, the controller application can register for another demand start notification on the request queue.</span></span>

<span data-ttu-id="c7282-112">API HTTP-сервера не позволяет использовать более одного уведомления о запуске для очереди запросов.</span><span class="sxs-lookup"><span data-stu-id="c7282-112">The HTTP Server API does not allow more than one simultaneous demand start notification for a request queue.</span></span> <span data-ttu-id="c7282-113">Однако по завершении уведомления о запуске необработанного спроса приложение вызывает [**хттпваитфордемандстарт**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) еще раз, чтобы запустить несколько рабочих процессов в очереди запросов.</span><span class="sxs-lookup"><span data-stu-id="c7282-113">However, when the outstanding demand start notification completes, the application calls [**HttpWaitForDemandStart**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) again to start multiple worker processes on the request queue.</span></span> <span data-ttu-id="c7282-114">HTTP не применяет ограничения на количество уведомлений о запуске спроса или на число рабочих процессов, работающих в очереди запросов.</span><span class="sxs-lookup"><span data-stu-id="c7282-114">HTTP does not enforce limitations on the number of demand start notifications or the number of worker processes operating on the request queue.</span></span> <span data-ttu-id="c7282-115">Однако приложения контроллера могут принудительно применить количество рабочих процессов, разрешенных в очереди запросов.</span><span class="sxs-lookup"><span data-stu-id="c7282-115">The controller applications can, however, enforce the number of worker processes allowed on a request queue.</span></span>

<span data-ttu-id="c7282-116">API HTTP-сервера поддерживает отмену асинхронных вызовов [**хттпваитфордемандстарт**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) .</span><span class="sxs-lookup"><span data-stu-id="c7282-116">The HTTP Server API supports canceling asynchronous [**HttpWaitForDemandStart**](/windows/desktop/api/Http/nf-http-httpwaitfordemandstart) calls.</span></span> <span data-ttu-id="c7282-117">Приложения могут использовать [**канцелиоекс**](/windows/desktop/FileIO/cancelioex-func) с перекрывающейся структурой, предоставляемой в *поверлаппед*, для отмены ожидающего вызова **хттпваитфордемандстарт** .</span><span class="sxs-lookup"><span data-stu-id="c7282-117">Applications can use [**CancelIoEx**](/windows/desktop/FileIO/cancelioex-func) with the overlapped structure supplied in *pOverlapped*, to cancel an outstanding **HttpWaitForDemandStart** call.</span></span>

## <a name="synchronous-demand-start"></a><span data-ttu-id="c7282-118">Запуск синхронного запроса</span><span class="sxs-lookup"><span data-stu-id="c7282-118">Synchronous Demand Start</span></span>

<span data-ttu-id="c7282-119">Запуск синхронного запроса не рекомендуется, так как приложение блокируется до поступления запроса в очередь запросов.</span><span class="sxs-lookup"><span data-stu-id="c7282-119">Synchronous demand start is not recommended because the application blocks until a request arrives on the request queue.</span></span>

 

 