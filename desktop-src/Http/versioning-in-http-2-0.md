---
title: Управление версиями (API сервера HTTP)
description: API-интерфейс версии 2,0 сервера HTTP применяет Управление версиями с областью действия объекта для определения версии API.
ms.assetid: 2c2d7501-85e0-44ec-aa42-01372b29266e
keywords:
- Управление версиями в API версии 2,0 сервера HTTP
- API-интерфейс версии 2,0 сервера HTTP, управление версиями
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5221ff7a93bb24e7e0b8a1b9f7c2399012cdbe95
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "104134918"
---
# <a name="versioning-http-server-api"></a><span data-ttu-id="b8f0b-105">Управление версиями (API сервера HTTP)</span><span class="sxs-lookup"><span data-stu-id="b8f0b-105">Versioning (HTTP Server API)</span></span>

<span data-ttu-id="b8f0b-106">API-интерфейс версии 2,0 сервера HTTP делает устаревшими очереди запросов версии 1,0 и сопоставления URL-адресов с очередью запросов.</span><span class="sxs-lookup"><span data-stu-id="b8f0b-106">The HTTP Server version 2.0 API makes obsolete the version 1.0 request queues and URL associations with the request queue.</span></span> <span data-ttu-id="b8f0b-107">Управление версиями на уровне объектов позволяет приложениям предоставлять сведения о версии для конкретного приложения.</span><span class="sxs-lookup"><span data-stu-id="b8f0b-107">Object-scoped versioning allows applications to supply application-specific version information.</span></span> <span data-ttu-id="b8f0b-108">Приложения могут автоматически вызывать правильную версию структур для операционной системы, в которой она запущена.</span><span class="sxs-lookup"><span data-stu-id="b8f0b-108">An applications can automatically call the correct version of structures for the operating system on which it is running.</span></span>

## <a name="request-queues"></a><span data-ttu-id="b8f0b-109">Запросы очередей</span><span class="sxs-lookup"><span data-stu-id="b8f0b-109">Request Queues</span></span>

<span data-ttu-id="b8f0b-110">Начиная с версии 2,0 API сервера HTTP, очереди запросов создаются с помощью [**хттпкреатерекуесткуеуе**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) , что делает устаревшую функцию версии 1,0 [**хттпкреатехттфандле**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle) .</span><span class="sxs-lookup"><span data-stu-id="b8f0b-110">Starting with HTTP Server version 2.0 API, request queues are created with [**HttpCreateRequestQueue**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) making obsolete the version 1.0 [**HttpCreateHttpHandle**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle) function.</span></span> <span data-ttu-id="b8f0b-111">Группы URL-адресов вводятся в версии 2,0 с помощью функции [**хттпкреатеурлграуп**](/windows/desktop/api/Http/nf-http-httpcreateurlgroup) .</span><span class="sxs-lookup"><span data-stu-id="b8f0b-111">URL groups are introduced in version 2.0 with the [**HttpCreateUrlGroup**](/windows/desktop/api/Http/nf-http-httpcreateurlgroup) function.</span></span> <span data-ttu-id="b8f0b-112">URL-адреса добавляются в группу с помощью [**хттпаддурлтаурлграуп**](/windows/desktop/api/Http/nf-http-httpaddurltourlgroup) , что делает устаревшую функцию версии 1,0 [**хттпаддурл**](/windows/desktop/api/Http/nf-http-httpaddurl) .</span><span class="sxs-lookup"><span data-stu-id="b8f0b-112">URLs are added to the group using [**HttpAddUrlToUrlGroup**](/windows/desktop/api/Http/nf-http-httpaddurltourlgroup) which makes obsolete the version 1.0 [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) function.</span></span> <span data-ttu-id="b8f0b-113">Группы URL-адресов версии 2,0 не должны использоваться с очередями запросов версии 1,0.</span><span class="sxs-lookup"><span data-stu-id="b8f0b-113">Version 2.0 URL groups must not be used with version 1.0 request queues.</span></span>

<span data-ttu-id="b8f0b-114">Начиная с версии 2,0, следующие функции версии 1,0 устарели и не могут использоваться с очередями запросов версии 2,0:</span><span class="sxs-lookup"><span data-stu-id="b8f0b-114">Starting with version 2.0, the following version 1.0 functions are obsolete and cannot be used with version 2.0 request queues:</span></span>

-   [<span data-ttu-id="b8f0b-115">**хттпкреатехттфандле**</span><span class="sxs-lookup"><span data-stu-id="b8f0b-115">**HttpCreateHttpHandle**</span></span>](/windows/desktop/api/Http/nf-http-httpcreatehttphandle)
-   [<span data-ttu-id="b8f0b-116">**хттпаддурл**</span><span class="sxs-lookup"><span data-stu-id="b8f0b-116">**HttpAddUrl**</span></span>](/windows/desktop/api/Http/nf-http-httpaddurl)
-   [<span data-ttu-id="b8f0b-117">**хттпремовеурл**</span><span class="sxs-lookup"><span data-stu-id="b8f0b-117">**HttpRemoveUrl**</span></span>](/windows/desktop/api/Http/nf-http-httpremoveurl)

<span data-ttu-id="b8f0b-118">Дополнительные сведения о настройке групп URL-адресов см. в разделе [Настройка группы URL-адресов](configuring-the-url-group.md) .</span><span class="sxs-lookup"><span data-stu-id="b8f0b-118">For more information about configuring URL groups, see the [Configuring the URL Group](configuring-the-url-group.md) topic.</span></span> <span data-ttu-id="b8f0b-119">Дополнительные сведения о очередях запросов версии 2,0 см. в разделе " [Именованная очередь запросов](named-request-queue.md) ".</span><span class="sxs-lookup"><span data-stu-id="b8f0b-119">For more information about version 2.0 request queues, see the [Named Request Queue](named-request-queue.md) topic.</span></span>

## <a name="object-scoped-versioning"></a><span data-ttu-id="b8f0b-120">Управление версиями Object-Scoped</span><span class="sxs-lookup"><span data-stu-id="b8f0b-120">Object-Scoped Versioning</span></span>

<span data-ttu-id="b8f0b-121">В версии 1,0 приложение предоставляет версию API HTTP-сервера в вызове [**хттпинитиализе**](/windows/desktop/api/Http/nf-http-httpinitialize).</span><span class="sxs-lookup"><span data-stu-id="b8f0b-121">In version 1.0, the application supplies the HTTP Server API version in the call to [**HttpInitialize**](/windows/desktop/api/Http/nf-http-httpinitialize).</span></span> <span data-ttu-id="b8f0b-122">Сведения о версии принимаются только от первого приложения, которое вызвало **хттпинитиализе** , и применяется ко всем приложениям API HTTP-сервера в одном процессе.</span><span class="sxs-lookup"><span data-stu-id="b8f0b-122">The version information is accepted only from the first application that called **HttpInitialize** and is applied to all the HTTP Server API applications in the same process.</span></span> <span data-ttu-id="b8f0b-123">Начиная с API версии 2,0, сведения о глобальной версии, предоставляемые в вызове **хттпинитиализе** , не используются.</span><span class="sxs-lookup"><span data-stu-id="b8f0b-123">Starting with the version 2.0 API, the global version information supplied in the call to **HttpInitialize** is not used.</span></span> <span data-ttu-id="b8f0b-124">Для приложений версии 2,0 версия API сервера HTTP передается в параметре version при создании очереди запросов или сеанса сервера с помощью [**хттпкреатерекуесткуеуе**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) или [**хттпкреатесерверсессион**](/windows/desktop/api/Http/nf-http-httpcreateserversession).</span><span class="sxs-lookup"><span data-stu-id="b8f0b-124">For version 2.0 applications, the HTTP Server API version is passed in the Version parameter when the request queue or server session is created by [**HttpCreateRequestQueue**](/windows/desktop/api/Http/nf-http-httpcreaterequestqueue) or [**HttpCreateServerSession**](/windows/desktop/api/Http/nf-http-httpcreateserversession).</span></span> <span data-ttu-id="b8f0b-125">При создании очереди запросов с версией 1,0 [**хттпкреатехттфандле**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle)она автоматически помечается как версия 1,0.</span><span class="sxs-lookup"><span data-stu-id="b8f0b-125">When the request queue is created with the version 1.0 [**HttpCreateHttpHandle**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle), it is automatically marked as version 1.0.</span></span> <span data-ttu-id="b8f0b-126">Приложения версии 1,0 и 2,0 могут выполняться в одном процессе.</span><span class="sxs-lookup"><span data-stu-id="b8f0b-126">Both version 1.0 and version 2.0 applications can run in the same process.</span></span>

<span data-ttu-id="b8f0b-127">Структуры [**HTTP- \_ запросов**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)) и [**HTTP- \_ ответов**](http-response.md) обновляются для включения сведений о проверке подлинности в API-интерфейс версии 2,0 сервера HTTP.</span><span class="sxs-lookup"><span data-stu-id="b8f0b-127">The [**HTTP\_REQUEST**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)) and [**HTTP\_RESPONSE**](http-response.md) structures are updated to include authentication information in the HTTP Server version 2.0 API.</span></span> <span data-ttu-id="b8f0b-128">[**Протокол HTTP \_ ЗАПРОСЫ \_ v1**](/windows/desktop/api/Http/ns-http-http_request_v1) и [**HTTP \_ \_ версии 2**](/windows/desktop/api/Http/ns-http-http_request_v2) относятся к версии API, используемой приложением.</span><span class="sxs-lookup"><span data-stu-id="b8f0b-128">[**HTTP\_REQUEST\_V1**](/windows/desktop/api/Http/ns-http-http_request_v1) and [**HTTP\_REQUEST\_V2**](/windows/desktop/api/Http/ns-http-http_request_v2) are specific to the version of the API used by the application.</span></span> <span data-ttu-id="b8f0b-129">Однако приложения не должны использовать эти структуры непосредственно в своем коде. Вместо этого они должны использовать **HTTP- \_ запрос** для получения правильной версии в зависимости от версии очереди запросов, в которой был получен запрос.</span><span class="sxs-lookup"><span data-stu-id="b8f0b-129">However, applications should not use these structures directly in their code; instead they should use **HTTP\_REQUEST** to get the correct version based on the version of the request queue on which the request was received.</span></span> <span data-ttu-id="b8f0b-130">Кроме того, имейте в виду, что размер структуры **HTTP- \_ запроса** зависит от версии операционной системы, в которой компилируется код.</span><span class="sxs-lookup"><span data-stu-id="b8f0b-130">Also, be aware that size of the **HTTP\_REQUEST** structure is based on the version of the operating system under which the code is compiled.</span></span>

 

 
