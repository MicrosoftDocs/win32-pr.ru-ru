---
title: Обработка регистраций
description: API-интерфейсы сервера HTTP используют базу данных маршрутизации для применения проверок доступа во время регистрации.
ms.assetid: d72aa213-b8e8-4fe9-b98c-41114d2cea56
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7c1e02d2511d9967454d5cbddd93b2c0380d1172
ms.sourcegitcommit: 73417d55867c804274a55abe5ca71bcba7006119
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/20/2020
ms.locfileid: "104488499"
---
# <a name="processing-registrations"></a><span data-ttu-id="84187-103">Обработка регистраций</span><span class="sxs-lookup"><span data-stu-id="84187-103">Processing Registrations</span></span>

<span data-ttu-id="84187-104">API-интерфейсы сервера HTTP используют базу данных маршрутизации для применения проверок доступа во время регистрации.</span><span class="sxs-lookup"><span data-stu-id="84187-104">The HTTP Server APIs use the routing database to apply access checks during registrations.</span></span> <span data-ttu-id="84187-105">Регистрация для [UrlPrefix](urlprefix-strings.md) должна пройти ряд проверок доступа, чтобы убедиться, что пользователь, регистрирующий для пространства имен, имеет права доступа.</span><span class="sxs-lookup"><span data-stu-id="84187-105">A registration for a [UrlPrefix](urlprefix-strings.md) must pass a series of access checks to ensure that the user registering for the namespace has access rights.</span></span> <span data-ttu-id="84187-106">Используйте функцию [**хттпаддурл**](/windows/desktop/api/Http/nf-http-httpaddurl) для добавления новой регистрации.</span><span class="sxs-lookup"><span data-stu-id="84187-106">Use the [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) function to add a new registration.</span></span>

<span data-ttu-id="84187-107">**Добавление новой регистрации с помощью Хттпаддурл**</span><span class="sxs-lookup"><span data-stu-id="84187-107">**To add a new registration with HttpAddUrl**</span></span>

1.  <span data-ttu-id="84187-108">Если номер порта в UrlPrefix содержит резервирования или регистрации для схемы, отличной от схемы в UrlPrefix, регистрация завершается ошибкой.</span><span class="sxs-lookup"><span data-stu-id="84187-108">If the port number in the UrlPrefix has reservations or registrations for a scheme different from the scheme in the UrlPrefix, the registration fails.</span></span> <span data-ttu-id="84187-109">Протоколы HTTP и HTTPS не поддерживаются в одном и том же порте.</span><span class="sxs-lookup"><span data-stu-id="84187-109">HTTP and HTTPS cannot be supported on the same port.</span></span>
2.  <span data-ttu-id="84187-110">Регистрация будет вставлена в соответствующий контейнер для регистрации.</span><span class="sxs-lookup"><span data-stu-id="84187-110">The registration is slotted into the appropriate bucket for the registration.</span></span> <span data-ttu-id="84187-111">Контейнеры основаны на типе узла URL-адреса, как описано в разделе [Маршрутизация входящих запросов](routing-incoming-requests.md) .</span><span class="sxs-lookup"><span data-stu-id="84187-111">The buckets are based on the host type of the URL as outlined in the [Routing Incoming Requests](routing-incoming-requests.md) section.</span></span> <span data-ttu-id="84187-112">Следующие шаги относятся к конкретному сегменту.</span><span class="sxs-lookup"><span data-stu-id="84187-112">The following steps are relative to this particular bucket.</span></span>
3.  <span data-ttu-id="84187-113">Если повторяющаяся регистрационная запись существует, возвращает код ошибки.</span><span class="sxs-lookup"><span data-stu-id="84187-113">If a duplicate registration entry exists, return an error code.</span></span>
4.  <span data-ttu-id="84187-114">Выберите записи резервирования с компонентами схемы, узла и порта, равными параметрам UrlPrefix.</span><span class="sxs-lookup"><span data-stu-id="84187-114">Select reservation entries with scheme, host and port components that are equal to those of the UrlPrefix.</span></span> <span data-ttu-id="84187-115">В этом случае нахождение записи с наибольшим совпадением **relativeUri** .</span><span class="sxs-lookup"><span data-stu-id="84187-115">From these, locate the entry with the longest **relativeUri** match.</span></span> <span data-ttu-id="84187-116">Если запись существует, проверьте разрешения на основе списка управления доступом, связанного с этой записью, и возвратите значение Success.</span><span class="sxs-lookup"><span data-stu-id="84187-116">If the entry exists, check permissions based on the ACL associated with that entry and return success.</span></span> <span data-ttu-id="84187-117">Если запись не существует, возвращает код ошибки, которая \_ уже \_ существует.</span><span class="sxs-lookup"><span data-stu-id="84187-117">If the entry does not exist, return an ERROR\_ALREADY\_EXISTS code.</span></span>

<span data-ttu-id="84187-118">В следующих примерах демонстрируется процесс установки регистрации в базе данных маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="84187-118">The following examples illustrate the process to install a registration in the routing database.</span></span> <span data-ttu-id="84187-119">В базе данных маршрутизации существуют резервирования 1 и 2.</span><span class="sxs-lookup"><span data-stu-id="84187-119">Reservations 1 and 2 exist in the routing database.</span></span>

-   <span data-ttu-id="84187-120">Резервирование 1 `https://+:80/vroot/subdir/` . для пользователей а и в. Это резервирование помещается в контейнер "+".</span><span class="sxs-lookup"><span data-stu-id="84187-120">Reservation 1: `https://+:80/vroot/subdir/` for User A and User C. This reservation is placed in the "+" bucket.</span></span>
-   <span data-ttu-id="84187-121">Резервирование 2 — `https://adatum.com:80/vroot/` для пользователя б. Это резервирование помещается в контейнер "явный узел".</span><span class="sxs-lookup"><span data-stu-id="84187-121">Reservation 2: `https://adatum.com:80/vroot/` for User B. This reservation is placed in the "Explicit Host" bucket.</span></span>
-   <span data-ttu-id="84187-122">Регистрация: `https://+:80/vroot/subdir/` пользователь б завершается сбоем из-за резервирования 1.</span><span class="sxs-lookup"><span data-stu-id="84187-122">Registration: `https://+:80/vroot/subdir/` by User B fails due to reservation 1.</span></span>
-   <span data-ttu-id="84187-123">Регистрация: `https://adatum.com:80/vroot/subdir/` пользователь б будет выполнен из-за резервирования 2.</span><span class="sxs-lookup"><span data-stu-id="84187-123">Registration: `https://adatum.com:80/vroot/subdir/` by User B succeeds due to reservation 2.</span></span>
-   <span data-ttu-id="84187-124">Регистрация. `https://adatum.com:80/vroot/subdir/` пользователь в завершается сбоем из-за более явного резервирования 2.</span><span class="sxs-lookup"><span data-stu-id="84187-124">Registration: `https://adatum.com:80/vroot/subdir/` by User C fails due to the more explicit reservation 2.</span></span> <span data-ttu-id="84187-125">Строгое резервирование с подстановочными знаками не имеет смысла в контексте явного резервирования или регистрации.</span><span class="sxs-lookup"><span data-stu-id="84187-125">The strong wildcard reservation does not have meaning within the context of the explicit reservation or registration.</span></span>
-   <span data-ttu-id="84187-126">Регистрация. `https://+:80/vroot/subdir/` пользователь A проходит успешную попытку из-за резервирования 1.</span><span class="sxs-lookup"><span data-stu-id="84187-126">Registration: `https://+:80/vroot/subdir/` by User A succeeds due to reservation 1.</span></span>
-   <span data-ttu-id="84187-127">Регистрация: `https://adatum.com:80/vroot/anotherdir/` пользователь б будет выполнен из-за резервирования 2.</span><span class="sxs-lookup"><span data-stu-id="84187-127">Registration: `https://adatum.com:80/vroot/anotherdir/` by User B succeeds due to reservation 2.</span></span>

<span data-ttu-id="84187-128">Проверка доступа для регистрации не включает проверки привилегий делегирования.</span><span class="sxs-lookup"><span data-stu-id="84187-128">The access check for registration does not include checks for delegation privileges.</span></span> <span data-ttu-id="84187-129">Нет проверок доступа на основе резервирований (см. [**хттпремовеурл**](/windows/desktop/api/Http/nf-http-httpremoveurl)).</span><span class="sxs-lookup"><span data-stu-id="84187-129">There are no access checks based on reservations (see [**HttpRemoveUrl**](/windows/desktop/api/Http/nf-http-httpremoveurl)).</span></span> <span data-ttu-id="84187-130">Единственным требованием для удаления регистрации является то, что в вызывающем процессе должна быть создана регистрация.</span><span class="sxs-lookup"><span data-stu-id="84187-130">The only requirement for deleting a registration us that the calling process must have created the registration.</span></span>

 

 




