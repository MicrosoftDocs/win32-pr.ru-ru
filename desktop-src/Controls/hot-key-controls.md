---
title: Сведения об элементах управления горячей клавиши
description: Ключевой элемент управления — это окно, которое позволяет пользователю ввести сочетание клавиш, которое будет использоваться в качестве сочетания клавиш.
ms.assetid: 5f011459-4c30-45d4-9668-19f575b041ce
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dec45d61df535025cff00fee6428f604aa670bf3
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "103794011"
---
# <a name="about-hot-key-controls"></a><span data-ttu-id="f1766-103">Сведения об элементах управления горячей клавиши</span><span class="sxs-lookup"><span data-stu-id="f1766-103">About Hot Key Controls</span></span>

<span data-ttu-id="f1766-104">Ключевой элемент управления — это окно, которое позволяет пользователю ввести сочетание клавиш, которое будет использоваться в качестве сочетания клавиш.</span><span class="sxs-lookup"><span data-stu-id="f1766-104">A hot key control is a window that enables the user to enter a combination of keystrokes to be used as a hot key.</span></span> <span data-ttu-id="f1766-105">Горячая клавиша — это сочетание клавиш, которое пользователь может нажать для быстрого выполнения действия.</span><span class="sxs-lookup"><span data-stu-id="f1766-105">A hot key is a key combination that the user can press to perform an action quickly.</span></span> <span data-ttu-id="f1766-106">Например, пользователь может создать горячую клавишу, которая активирует заданное окно и переводит его в начало z-порядка.</span><span class="sxs-lookup"><span data-stu-id="f1766-106">For example, a user can create a hot key that activates a given window and brings it to the top of the z-order.</span></span> <span data-ttu-id="f1766-107">Элемент управления горячими ключами отображает варианты выбора пользователя и гарантирует, что пользователь выбрал допустимое сочетание клавиш.</span><span class="sxs-lookup"><span data-stu-id="f1766-107">The hot key control displays the user's choices and ensures that the user selects a valid key combination.</span></span> <span data-ttu-id="f1766-108">На следующем снимке экрана показано, как при нажатии клавиши ALT в диалоговом окне появляется элемент управления "горячие клавиши".</span><span class="sxs-lookup"><span data-stu-id="f1766-108">The following screen shot shows how a hot key control appears in a dialog box after the user presses the Alt key.</span></span>

![снимок экрана с диалоговым окном, содержащим элемент управления "горячая" клавиша](images/hotkey.png)

## <a name="using-hot-key-controls"></a><span data-ttu-id="f1766-110">Использование элементов управления горячими ключами</span><span class="sxs-lookup"><span data-stu-id="f1766-110">Using Hot Key Controls</span></span>

<span data-ttu-id="f1766-111">Когда пользователь вводит сочетание клавиш для использования в качестве сочетания клавиш, имена ключей отображаются в элементе управления горячего ключа.</span><span class="sxs-lookup"><span data-stu-id="f1766-111">When the user enters a key combination to be used as a hot key, the names of the keys appear in the hot key control.</span></span> <span data-ttu-id="f1766-112">Сочетание клавиш может состоять из клавиши-модификатора (например, CTRL, ALT или SHIFT) и сопутствующего ключа (например, клавиши с символом, клавиши со стрелкой, клавиши-функции и т. д.).</span><span class="sxs-lookup"><span data-stu-id="f1766-112">A key combination can consist of a modifier key (such as CTRL, ALT, or SHIFT) and an accompanying key (such as a character key, an arrow key, a function key, and so on).</span></span>

<span data-ttu-id="f1766-113">После того как пользователь выбрал сочетание клавиш, приложение извлекает сочетание клавиш из элемента управления горячими ключами и использует его для настройки сочетания клавиш в системе.</span><span class="sxs-lookup"><span data-stu-id="f1766-113">After the user has chosen a key combination, the application retrieves the key combination from the hot key control and uses it to set up a hot key in the system.</span></span> <span data-ttu-id="f1766-114">Информация, полученная из элемента управления "горячая клавиша", включает флаг, указывающий клавишу-модификатор и код виртуального ключа сопутствующего ключа.</span><span class="sxs-lookup"><span data-stu-id="f1766-114">The information retrieved from the hot key control includes a flag indicating the modifier key and the virtual key code of the accompanying key.</span></span>

<span data-ttu-id="f1766-115">Приложение может использовать сведения, предоставляемые ключевым элементом управления для настройки глобального горячего ключа или сочетания клавиш для конкретного потока.</span><span class="sxs-lookup"><span data-stu-id="f1766-115">The application can use the information provided by a hot key control to set up a global hot key or a thread-specific hot key.</span></span> <span data-ttu-id="f1766-116">Глобальный горячий ключ связан с определенным окном; Он позволяет пользователю активировать окно из любой части системы.</span><span class="sxs-lookup"><span data-stu-id="f1766-116">A global hot key is associated with a particular window; it allows the user to activate the window from any part of the system.</span></span> <span data-ttu-id="f1766-117">Приложение устанавливает глобальный горячий ключ с помощью сообщения [**WM \_ сесоткэй**](/windows/desktop/inputdev/wm-sethotkey) .</span><span class="sxs-lookup"><span data-stu-id="f1766-117">An application sets a global hot key by using the [**WM\_SETHOTKEY**](/windows/desktop/inputdev/wm-sethotkey) message.</span></span> <span data-ttu-id="f1766-118">Когда пользователь нажимает на глобальную горячую клавишу, окно, указанное в **WM \_ сесоткэй** , получает сообщение [**WM \_ сискомманд**](/windows/desktop/menurc/wm-syscommand) , которое указывает значение [**\_ сочетания клавиш SC**](/windows/desktop/inputdev/wm-sethotkey) .</span><span class="sxs-lookup"><span data-stu-id="f1766-118">Whenever the user presses a global hot key, the window specified in **WM\_SETHOTKEY** receives a [**WM\_SYSCOMMAND**](/windows/desktop/menurc/wm-syscommand) message that specifies the [**SC\_HOTKEY**](/windows/desktop/inputdev/wm-sethotkey) value.</span></span> <span data-ttu-id="f1766-119">Это сообщение активирует окно, которое его получает.</span><span class="sxs-lookup"><span data-stu-id="f1766-119">This message activates the window that receives it.</span></span> <span data-ttu-id="f1766-120">Сочетание клавиш остается действительным до тех пор, пока приложение, вызвавшее **WM \_ сесоткэй** , не завершит работу.</span><span class="sxs-lookup"><span data-stu-id="f1766-120">The hot key remains valid until the application that called **WM\_SETHOTKEY** exits.</span></span>

<span data-ttu-id="f1766-121">Горячая клавиша для конкретного потока создает сообщение [**с \_ сочетанием клавиш WM**](/windows/desktop/inputdev/wm-hotkey) , которое публикуется в начале определенного потока, чтобы оно было удалено следующей итерацией цикла обработки сообщений.</span><span class="sxs-lookup"><span data-stu-id="f1766-121">A thread-specific hot key generates a [**WM\_HOTKEY**](/windows/desktop/inputdev/wm-hotkey) message that is posted to the beginning of a particular thread so that it is removed by the next iteration of the message loop.</span></span> <span data-ttu-id="f1766-122">Приложение устанавливает горячую клавишу для конкретного потока с помощью функции [**RegisterHotKey**](/windows/desktop/api/winuser/nf-winuser-registerhotkey) .</span><span class="sxs-lookup"><span data-stu-id="f1766-122">An application sets a thread-specific hot key by using the [**RegisterHotKey**](/windows/desktop/api/winuser/nf-winuser-registerhotkey) function.</span></span>

### <a name="hot-key-control-messages"></a><span data-ttu-id="f1766-123">Управляющие сообщения горячих ключей</span><span class="sxs-lookup"><span data-stu-id="f1766-123">Hot Key Control Messages</span></span>

<span data-ttu-id="f1766-124">После создания элемента управления горячим ключом приложение взаимодействует с ним с помощью трех сообщений: [**ХКМ \_ сетрулес**](hkm-setrules.md), [**ХКМ \_ сесоткэй**](hkm-sethotkey.md)и ХКМ- [**\_ горячих клавиш**](hkm-gethotkey.md).</span><span class="sxs-lookup"><span data-stu-id="f1766-124">After creating a hot key control, an application interacts with it by using three messages: [**HKM\_SETRULES**](hkm-setrules.md), [**HKM\_SETHOTKEY**](hkm-sethotkey.md), and [**HKM\_GETHOTKEY**](hkm-gethotkey.md).</span></span>

<span data-ttu-id="f1766-125">Приложение может отправить сообщение [**ХКМ \_ сетрулес**](hkm-setrules.md) , чтобы задать сочетание клавиш CTRL, Alt и Shift, которые считаются недопустимыми сочетаниями клавиш.</span><span class="sxs-lookup"><span data-stu-id="f1766-125">An application can send the [**HKM\_SETRULES**](hkm-setrules.md) message to specify a set of CTRL, ALT, and SHIFT key combinations that are considered invalid hot keys.</span></span> <span data-ttu-id="f1766-126">Если в приложении указано недопустимое сочетание клавиш, необходимо также указать сочетание модификатора по умолчанию, которое будет использоваться, когда пользователь выберет недопустимую комбинацию.</span><span class="sxs-lookup"><span data-stu-id="f1766-126">If the application specifies an invalid key combination, it should also specify a default modifier combination to use when the user selects the invalid combination.</span></span> <span data-ttu-id="f1766-127">Когда пользователь вводит недопустимое сочетание, система выполняет логическую операцию OR с недопустимым сочетанием и сочетанием по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="f1766-127">When the user enters the invalid combination, the system performs a logical OR operation on the invalid combination and the default combination.</span></span> <span data-ttu-id="f1766-128">Результат считается допустимым сочетанием; он преобразуется в строку и отображается в элементе управления.</span><span class="sxs-lookup"><span data-stu-id="f1766-128">The result is considered a valid combination; it is converted to a string and displayed in the control.</span></span>

<span data-ttu-id="f1766-129">Сообщение [**ХКМ \_ сесоткэй**](hkm-sethotkey.md) позволяет приложению установить сочетание клавиш для элемента управления "горячая клавиша".</span><span class="sxs-lookup"><span data-stu-id="f1766-129">The [**HKM\_SETHOTKEY**](hkm-sethotkey.md) message allows an application to set the hot key combination for a hot key control.</span></span> <span data-ttu-id="f1766-130">Это сообщение также обычно используется при создании элемента управления "горячие клавиши".</span><span class="sxs-lookup"><span data-stu-id="f1766-130">This message is also typically used when the hot key control is created.</span></span>

<span data-ttu-id="f1766-131">Приложения используют сообщение [**ХКМ \_**](hkm-gethotkey.md) для получения виртуального ключа и флаги модификатора для горячих клавиш, выбранных пользователем.</span><span class="sxs-lookup"><span data-stu-id="f1766-131">Applications use the [**HKM\_GETHOTKEY**](hkm-gethotkey.md) message to retrieve the virtual key code and modifier flags of the hot key chosen by the user.</span></span>

### <a name="hot-key-control-notifications"></a><span data-ttu-id="f1766-132">Уведомления об управлении ключами</span><span class="sxs-lookup"><span data-stu-id="f1766-132">Hot Key Control Notifications</span></span>

<span data-ttu-id="f1766-133">Элемент управления "горячий ключ" не отправляет коды уведомлений через сообщение [**WM \_ Notify**](wm-notify.md) .</span><span class="sxs-lookup"><span data-stu-id="f1766-133">The hot key control does not send any notification codes via the [**WM\_NOTIFY**](wm-notify.md) message.</span></span> <span data-ttu-id="f1766-134">Однако при изменении содержимого элемента управления будет отправлено уведомление о [ \_ смене на короткое](en-change.md) время через сообщение [**\_ командной строки WM**](/windows/desktop/menurc/wm-command) .</span><span class="sxs-lookup"><span data-stu-id="f1766-134">It will, however, send the [EN\_CHANGE](en-change.md) notification via the [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) message when the user changes the contents of the control.</span></span>

### <a name="default-hot-key-message-processing"></a><span data-ttu-id="f1766-135">Обработка сообщений об активных ключах по умолчанию</span><span class="sxs-lookup"><span data-stu-id="f1766-135">Default Hot Key Message Processing</span></span>

<span data-ttu-id="f1766-136">В этом разделе описываются сообщения окна, обрабатываемые процедурой окна для предварительно определенного класса стандартного окна [**\_ класса**](common-control-window-classes.md) , используемого с элементами управления горячими ключами.</span><span class="sxs-lookup"><span data-stu-id="f1766-136">This section describes the window messages handled by the window procedure for the pre defined [**HOTKEY\_CLASS**](common-control-window-classes.md) window class used with hot key controls.</span></span>



|                                                |                                                                                                                                                                                                                                                                                                                                               |
|------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f1766-137">**Message**</span><span class="sxs-lookup"><span data-stu-id="f1766-137">**Message**</span></span>                                    | <span data-ttu-id="f1766-138">**Обработка выполнена**</span><span class="sxs-lookup"><span data-stu-id="f1766-138">**Processing performed**</span></span>                                                                                                                                                                                                                                                                                                                      |
| [<span data-ttu-id="f1766-139">**WM \_ char**</span><span class="sxs-lookup"><span data-stu-id="f1766-139">**WM\_CHAR**</span></span>](/windows/desktop/inputdev/wm-char)               | <span data-ttu-id="f1766-140">Извлекает код виртуального ключа.</span><span class="sxs-lookup"><span data-stu-id="f1766-140">Retrieves the virtual key code.</span></span>                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="f1766-141">**\_Создание WM**</span><span class="sxs-lookup"><span data-stu-id="f1766-141">**WM\_CREATE**</span></span>](/windows/desktop/winmsg/wm-create)             | <span data-ttu-id="f1766-142">Инициализирует элемент управления горячими ключами, очищает все правила горячего ключа и использует системный шрифт.</span><span class="sxs-lookup"><span data-stu-id="f1766-142">Initializes the hot key control, clears any hot key rules, and uses the system font.</span></span>                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="f1766-143">**WM \_ ерасебкгнд**</span><span class="sxs-lookup"><span data-stu-id="f1766-143">**WM\_ERASEBKGND**</span></span>](/windows/desktop/winmsg/wm-erasebkgnd)     | <span data-ttu-id="f1766-144">Скрывает курсор, вызывает функцию [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) и снова отображает курсор.</span><span class="sxs-lookup"><span data-stu-id="f1766-144">Hides the caret, calls the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function, and shows the caret again.</span></span>                                                                                                                                                                                                                                     |
| [<span data-ttu-id="f1766-145">**WM \_ жетдлгкоде**</span><span class="sxs-lookup"><span data-stu-id="f1766-145">**WM\_GETDLGCODE**</span></span>](/windows/desktop/dlgbox/wm-getdlgcode)     | <span data-ttu-id="f1766-146">Возвращает сочетание значений [**длгк \_ Вантчарс**](/windows/desktop/dlgbox/wm-getdlgcode) и [**длгк \_ вантарровс**](/windows/desktop/dlgbox/wm-getdlgcode) .</span><span class="sxs-lookup"><span data-stu-id="f1766-146">Returns a combination of the [**DLGC\_WANTCHARS**](/windows/desktop/dlgbox/wm-getdlgcode) and [**DLGC\_WANTARROWS**](/windows/desktop/dlgbox/wm-getdlgcode) values.</span></span>                                                                                                                                               |
| [<span data-ttu-id="f1766-147">**WM, \_ Шрифт**</span><span class="sxs-lookup"><span data-stu-id="f1766-147">**WM\_GETFONT**</span></span>](/windows/desktop/winmsg/wm-getfont)           | <span data-ttu-id="f1766-148">Извлекает шрифт.</span><span class="sxs-lookup"><span data-stu-id="f1766-148">Retrieves the font.</span></span>                                                                                                                                                                                                                                                                                                                           |
| [<span data-ttu-id="f1766-149">**WM \_ KeyDown**</span><span class="sxs-lookup"><span data-stu-id="f1766-149">**WM\_KEYDOWN**</span></span>](/windows/desktop/inputdev/wm-keydown)         | <span data-ttu-id="f1766-150">Вызывает функцию [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) , если КЛАВИШа введена, табуляция, пробела, Del, ESC или BACKSPACE.</span><span class="sxs-lookup"><span data-stu-id="f1766-150">Calls the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function if the key is ENTER, TAB, SPACE BAR, DEL, ESC, or BACKSPACE.</span></span> <span data-ttu-id="f1766-151">Если клавиша SHIFT, CTRL или ALT, она проверяет, является ли комбинация допустимой, и, если это так, устанавливает горячие клавиши, используя сочетание.</span><span class="sxs-lookup"><span data-stu-id="f1766-151">If the key is SHIFT, CTRL, or ALT, it checks whether the combination is valid and, if it is, sets the hot key using the combination.</span></span> <span data-ttu-id="f1766-152">Все остальные ключи задаются в виде горячих ключей без проверки их достоверности первыми.</span><span class="sxs-lookup"><span data-stu-id="f1766-152">All other keys are set as hot keys without their validity being checked first.</span></span> |
| [<span data-ttu-id="f1766-153">**WM \_ KEYUP**</span><span class="sxs-lookup"><span data-stu-id="f1766-153">**WM\_KEYUP**</span></span>](/windows/desktop/inputdev/wm-keyup)             | <span data-ttu-id="f1766-154">Извлекает код виртуального ключа.</span><span class="sxs-lookup"><span data-stu-id="f1766-154">Retrieves the virtual key code.</span></span>                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="f1766-155">**WM \_ киллфокус**</span><span class="sxs-lookup"><span data-stu-id="f1766-155">**WM\_KILLFOCUS**</span></span>](/windows/desktop/inputdev/wm-killfocus)     | <span data-ttu-id="f1766-156">Уничтожает курсор.</span><span class="sxs-lookup"><span data-stu-id="f1766-156">Destroys the caret.</span></span>                                                                                                                                                                                                                                                                                                                           |
| [<span data-ttu-id="f1766-157">**WM \_ лбуттондовн**</span><span class="sxs-lookup"><span data-stu-id="f1766-157">**WM\_LBUTTONDOWN**</span></span>](/windows/desktop/inputdev/wm-lbuttondown) | <span data-ttu-id="f1766-158">Устанавливает фокус на окно.</span><span class="sxs-lookup"><span data-stu-id="f1766-158">Sets the focus to the window.</span></span>                                                                                                                                                                                                                                                                                                                 |
| [<span data-ttu-id="f1766-159">**WM \_ нккреате**</span><span class="sxs-lookup"><span data-stu-id="f1766-159">**WM\_NCCREATE**</span></span>](/windows/desktop/winmsg/wm-nccreate)         | <span data-ttu-id="f1766-160">Задает стиль окна [**WS \_ ex \_ клиентедже**](/windows/desktop/winmsg/extended-window-styles) .</span><span class="sxs-lookup"><span data-stu-id="f1766-160">Sets the [**WS\_EX\_CLIENTEDGE**](/windows/desktop/winmsg/extended-window-styles) window style.</span></span>                                                                                                                                                                                                                              |
| [<span data-ttu-id="f1766-161">**WM \_ Paint**</span><span class="sxs-lookup"><span data-stu-id="f1766-161">**WM\_PAINT**</span></span>](/windows/desktop/gdi/wm-paint)                  | <span data-ttu-id="f1766-162">Закрашивает элемент управления горячим ключом.</span><span class="sxs-lookup"><span data-stu-id="f1766-162">Paints the hot key control.</span></span>                                                                                                                                                                                                                                                                                                                   |
| [<span data-ttu-id="f1766-163">**WM \_ SETFOCUS**</span><span class="sxs-lookup"><span data-stu-id="f1766-163">**WM\_SETFOCUS**</span></span>](/windows/desktop/inputdev/wm-setfocus)       | <span data-ttu-id="f1766-164">Создает и отображает курсор.</span><span class="sxs-lookup"><span data-stu-id="f1766-164">Creates and shows the caret.</span></span>                                                                                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="f1766-165">**WM \_ сетфонт**</span><span class="sxs-lookup"><span data-stu-id="f1766-165">**WM\_SETFONT**</span></span>](/windows/desktop/winmsg/wm-setfont)           | <span data-ttu-id="f1766-166">Задает шрифт.</span><span class="sxs-lookup"><span data-stu-id="f1766-166">Sets the font.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="f1766-167">**WM \_ сисчар**</span><span class="sxs-lookup"><span data-stu-id="f1766-167">**WM\_SYSCHAR**</span></span>](/windows/desktop/menurc/wm-syschar)           | <span data-ttu-id="f1766-168">Извлекает код виртуального ключа.</span><span class="sxs-lookup"><span data-stu-id="f1766-168">Retrieves the virtual key code.</span></span>                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="f1766-169">**WM \_ сискэйдовн**</span><span class="sxs-lookup"><span data-stu-id="f1766-169">**WM\_SYSKEYDOWN**</span></span>](/windows/desktop/inputdev/wm-syskeydown)   | <span data-ttu-id="f1766-170">Вызывает функцию [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) , если КЛАВИШа введена, табуляция, пробела, Del, ESC или BACKSPACE.</span><span class="sxs-lookup"><span data-stu-id="f1766-170">Calls the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function if the key is ENTER, TAB, SPACE BAR, DEL, ESC, or BACKSPACE.</span></span> <span data-ttu-id="f1766-171">Если клавиша SHIFT, CTRL или ALT, она проверяет, является ли комбинация допустимой, и, если это так, устанавливает горячие клавиши, используя сочетание.</span><span class="sxs-lookup"><span data-stu-id="f1766-171">If the key is SHIFT, CTRL, or ALT, it checks whether the combination is valid and, if it is, sets the hot key using the combination.</span></span> <span data-ttu-id="f1766-172">Все остальные ключи задаются в виде горячих ключей без проверки их достоверности первыми.</span><span class="sxs-lookup"><span data-stu-id="f1766-172">All other keys are set as hot keys without their validity being checked first.</span></span> |
| [<span data-ttu-id="f1766-173">**WM \_ сискэйуп**</span><span class="sxs-lookup"><span data-stu-id="f1766-173">**WM\_SYSKEYUP**</span></span>](/windows/desktop/inputdev/wm-syskeyup)       | <span data-ttu-id="f1766-174">Извлекает код виртуального ключа.</span><span class="sxs-lookup"><span data-stu-id="f1766-174">Retrieves the virtual key code.</span></span>                                                                                                                                                                                                                                                                                                               |



 

 

 