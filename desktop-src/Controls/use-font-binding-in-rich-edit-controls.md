---
title: Использование привязки шрифтов в элементах управления Rich Edit
description: Microsoft Rich Edit 3,0 присваивает набор символов обычным текстовым символам в зависимости от контекста.
ms.assetid: 975B9C33-6766-4FF1-A93E-2169C140CEE9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ea17c2f8e0e8c1b57611839a5bbf992f9af6bf65
ms.sourcegitcommit: f0ca63c18dc52c357d3398af7be766d2bdd40be7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/17/2020
ms.locfileid: "103890348"
---
# <a name="how-to-use-font-binding-in-rich-edit-controls"></a><span data-ttu-id="84edd-103">Использование привязки шрифтов в элементах управления Rich Edit</span><span class="sxs-lookup"><span data-stu-id="84edd-103">How to Use Font Binding in Rich Edit Controls</span></span>

<span data-ttu-id="84edd-104">Microsoft Rich Edit 3,0 присваивает набор символов обычным текстовым символам в зависимости от контекста.</span><span class="sxs-lookup"><span data-stu-id="84edd-104">Microsoft Rich Edit 3.0 assigns a character set to plain-text characters depending on their context.</span></span> <span data-ttu-id="84edd-105">Ниже приведены некоторые примеры.</span><span class="sxs-lookup"><span data-stu-id="84edd-105">Some examples are:</span></span>

-   <span data-ttu-id="84edd-106">Греческим символам присваивается **Греческий \_ символ charset**.</span><span class="sxs-lookup"><span data-stu-id="84edd-106">Greek characters are assigned **GREEK\_CHARSET**.</span></span>
-   <span data-ttu-id="84edd-107">Символам хангыль назначается **\_ знак азбуки хангыль**.</span><span class="sxs-lookup"><span data-stu-id="84edd-107">Hangul symbols are assigned **HANGUL\_CHARSET**.</span></span>
-   <span data-ttu-id="84edd-108">Китайские иероглифы назначаются **символов shiftjis \_ CharSet** , если рядом с ними расположены символы Кана, или **GB2312 \_ CharSet** , если поблизости не найдено ни одного символа Кана.</span><span class="sxs-lookup"><span data-stu-id="84edd-108">Chinese characters are assigned **SHIFTJIS\_CHARSET** if kana characters are found nearby, or **GB2312\_CHARSET** if no kana are found nearby.</span></span>
-   <span data-ttu-id="84edd-109">Ненейтральные знаки ANSI присваиваются набору символов **ANSI \_** в любом событии.</span><span class="sxs-lookup"><span data-stu-id="84edd-109">Non-neutral ANSI characters are assigned **ANSI\_CHARSET** in any event.</span></span>

> [!Note]  
> <span data-ttu-id="84edd-110">Элемент управления "поле форматированного ввода" использует Юникод внутренним образом, поэтому использование наборов символов отличается от исходного, используемого в спецификациях шрифтов.</span><span class="sxs-lookup"><span data-stu-id="84edd-110">The rich edit control uses Unicode internally, so this use of character sets differs from the original one used in font specifications.</span></span> <span data-ttu-id="84edd-111">Но структура [**чарформат**](/windows/win32/api/richedit/ns-richedit-charformata) имеет четко определенное место для кодировки.</span><span class="sxs-lookup"><span data-stu-id="84edd-111">But the [**CHARFORMAT**](/windows/win32/api/richedit/ns-richedit-charformata) structure has a well-defined place for the character set.</span></span>

 

<span data-ttu-id="84edd-112">Независимым символам, таким как пробелы и цифры, присваивается набор символов в зависимости от контекста.</span><span class="sxs-lookup"><span data-stu-id="84edd-112">Neutral characters like blanks and digits are assigned a character set depending on their context.</span></span> <span data-ttu-id="84edd-113">Например, пустая строка, заключенная в символы одного набора символов, получает эту кодировку.</span><span class="sxs-lookup"><span data-stu-id="84edd-113">For example, a blank surrounded by characters of the same character set gets that character set.</span></span> <span data-ttu-id="84edd-114">Нейтральные знаки и цифры, используемые для двунаправленного текста, назначаются наборам символов способом, основанным на двунаправленном алгоритме Юникода.</span><span class="sxs-lookup"><span data-stu-id="84edd-114">Neutrals and digits used for bidirectional text are assigned character sets in a way that is based on the Unicode bidirectional algorithm.</span></span>

## <a name="what-you-need-to-know"></a><span data-ttu-id="84edd-115">Что необходимо знать</span><span class="sxs-lookup"><span data-stu-id="84edd-115">What you need to know</span></span>

### <a name="technologies"></a><span data-ttu-id="84edd-116">Технологии</span><span class="sxs-lookup"><span data-stu-id="84edd-116">Technologies</span></span>

-   [<span data-ttu-id="84edd-117">Элементы управления Windows</span><span class="sxs-lookup"><span data-stu-id="84edd-117">Windows Controls</span></span>](window-controls.md)

### <a name="prerequisites"></a><span data-ttu-id="84edd-118">Предварительные условия</span><span class="sxs-lookup"><span data-stu-id="84edd-118">Prerequisites</span></span>

-   <span data-ttu-id="84edd-119">C/C++</span><span class="sxs-lookup"><span data-stu-id="84edd-119">C/C++</span></span>
-   <span data-ttu-id="84edd-120">Программирование пользовательского интерфейса Windows</span><span class="sxs-lookup"><span data-stu-id="84edd-120">Windows User Interface Programming</span></span>

## <a name="instructions"></a><span data-ttu-id="84edd-121">Инструкции</span><span class="sxs-lookup"><span data-stu-id="84edd-121">Instructions</span></span>

### <a name="use-font-binding-in-a-rich-edit-control"></a><span data-ttu-id="84edd-122">Использовать привязку шрифтов в элементе управления Rich Edit</span><span class="sxs-lookup"><span data-stu-id="84edd-122">Use Font Binding in a Rich Edit Control</span></span>

<span data-ttu-id="84edd-123">После того как кодировка будет назначена, Расширенное редактирование просматривает текст вокруг точки вставки вперед и назад, чтобы найти ближайшие шрифты, которые использовались для наборов символов.</span><span class="sxs-lookup"><span data-stu-id="84edd-123">After character sets are assigned, Rich Edit scans the text around the insertion point forward and backward to find the nearest fonts that have been used for the character sets.</span></span> <span data-ttu-id="84edd-124">Если для кодировки не найден шрифт, Rich Edit использует шрифт, выбранный клиентом для этой кодировки.</span><span class="sxs-lookup"><span data-stu-id="84edd-124">If no font is found for a character set, Rich Edit uses the font chosen by the client for that character set.</span></span> <span data-ttu-id="84edd-125">Если клиент не указал шрифт для кодировки, Rich Edit использует шрифт по умолчанию для этой кодировки.</span><span class="sxs-lookup"><span data-stu-id="84edd-125">If the client hasn't specified a font for the character set, Rich Edit uses the default font for that character set.</span></span> <span data-ttu-id="84edd-126">Если клиенту требуется какой бы то ни было другой шрифт, клиент всегда может изменить его, но этот подход будет работать в большинстве случаев.</span><span class="sxs-lookup"><span data-stu-id="84edd-126">If the client wants some other font, the client can always change it, but this approach will work most of the time.</span></span> <span data-ttu-id="84edd-127">Текущий выбор шрифта по умолчанию основан на следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="84edd-127">The current default font choices are based on the following table.</span></span> <span data-ttu-id="84edd-128">Обратите внимание, что шрифты по умолчанию задаются для каждого процесса, и существуют отдельные списки для использования пользовательского интерфейса и для использования без пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="84edd-128">Note that the default fonts are set per-process, and there are separate lists for UI usage and for non-UI usage.</span></span>



| <span data-ttu-id="84edd-129">Язык</span><span class="sxs-lookup"><span data-stu-id="84edd-129">Language</span></span>                    | <span data-ttu-id="84edd-130">Имя шрифта пользовательского интерфейса</span><span class="sxs-lookup"><span data-stu-id="84edd-130">UI font name</span></span>  | <span data-ttu-id="84edd-131">Размер шрифта пользовательского интерфейса</span><span class="sxs-lookup"><span data-stu-id="84edd-131">UI font size</span></span> | <span data-ttu-id="84edd-132">имя шрифта, не относящегося к пользовательскому интерфейсу</span><span class="sxs-lookup"><span data-stu-id="84edd-132">non-UI font name</span></span> | <span data-ttu-id="84edd-133">Размер шрифта, не относящегося к пользовательскому интерфейсу</span><span class="sxs-lookup"><span data-stu-id="84edd-133">non-UI font size</span></span> |
|-----------------------------|---------------|--------------|------------------|------------------|
| <span data-ttu-id="84edd-134">Западная, CE, ME, вьетнамский</span><span class="sxs-lookup"><span data-stu-id="84edd-134">Western, CE, ME, Vietnamese</span></span> | <span data-ttu-id="84edd-135">Tahoma</span><span class="sxs-lookup"><span data-stu-id="84edd-135">Tahoma</span></span>        | <span data-ttu-id="84edd-136">8</span><span class="sxs-lookup"><span data-stu-id="84edd-136">8</span></span>            | <span data-ttu-id="84edd-137">Arial</span><span class="sxs-lookup"><span data-stu-id="84edd-137">Arial</span></span>            | <span data-ttu-id="84edd-138">10</span><span class="sxs-lookup"><span data-stu-id="84edd-138">10</span></span>               |
| <span data-ttu-id="84edd-139">Японский</span><span class="sxs-lookup"><span data-stu-id="84edd-139">Japanese</span></span>                    | <span data-ttu-id="84edd-140">Microsoft UI Gothic</span><span class="sxs-lookup"><span data-stu-id="84edd-140">MS UI Gothic</span></span>  | <span data-ttu-id="84edd-141">9</span><span class="sxs-lookup"><span data-stu-id="84edd-141">9</span></span>            | <span data-ttu-id="84edd-142">MS P Gothic</span><span class="sxs-lookup"><span data-stu-id="84edd-142">MS P Gothic</span></span>      | <span data-ttu-id="84edd-143">10</span><span class="sxs-lookup"><span data-stu-id="84edd-143">10</span></span>               |
| <span data-ttu-id="84edd-144">Корейский</span><span class="sxs-lookup"><span data-stu-id="84edd-144">Korean</span></span>                      | <span data-ttu-id="84edd-145">Gulim</span><span class="sxs-lookup"><span data-stu-id="84edd-145">Gulim</span></span>         | <span data-ttu-id="84edd-146">9</span><span class="sxs-lookup"><span data-stu-id="84edd-146">9</span></span>            | <span data-ttu-id="84edd-147">Gulim</span><span class="sxs-lookup"><span data-stu-id="84edd-147">Gulim</span></span>            | <span data-ttu-id="84edd-148">9</span><span class="sxs-lookup"><span data-stu-id="84edd-148">9</span></span>                |
| <span data-ttu-id="84edd-149">Китайский (упрощенный)</span><span class="sxs-lookup"><span data-stu-id="84edd-149">Simplified Chinese</span></span>          | <span data-ttu-id="84edd-150">SimSun</span><span class="sxs-lookup"><span data-stu-id="84edd-150">Simsun</span></span>        | <span data-ttu-id="84edd-151">9</span><span class="sxs-lookup"><span data-stu-id="84edd-151">9</span></span>            | <span data-ttu-id="84edd-152">SimSun</span><span class="sxs-lookup"><span data-stu-id="84edd-152">SimSun</span></span>           | <span data-ttu-id="84edd-153">10</span><span class="sxs-lookup"><span data-stu-id="84edd-153">10</span></span>               |
| <span data-ttu-id="84edd-154">Китайский (традиционный)</span><span class="sxs-lookup"><span data-stu-id="84edd-154">Traditional Chinese</span></span>         | <span data-ttu-id="84edd-155">пминглиу</span><span class="sxs-lookup"><span data-stu-id="84edd-155">PMingLiU</span></span>      | <span data-ttu-id="84edd-156">9</span><span class="sxs-lookup"><span data-stu-id="84edd-156">9</span></span>            | <span data-ttu-id="84edd-157">пминглиу</span><span class="sxs-lookup"><span data-stu-id="84edd-157">PMingLiU</span></span>         | <span data-ttu-id="84edd-158">9</span><span class="sxs-lookup"><span data-stu-id="84edd-158">9</span></span>                |
| <span data-ttu-id="84edd-159">Тайский</span><span class="sxs-lookup"><span data-stu-id="84edd-159">Thai</span></span>                        | <span data-ttu-id="84edd-160">MS Sans Serif</span><span class="sxs-lookup"><span data-stu-id="84edd-160">MS Sans Serif</span></span> | <span data-ttu-id="84edd-161">8</span><span class="sxs-lookup"><span data-stu-id="84edd-161">8</span></span>            | <span data-ttu-id="84edd-162">Tahoma</span><span class="sxs-lookup"><span data-stu-id="84edd-162">Tahoma</span></span>           | <span data-ttu-id="84edd-163">14</span><span class="sxs-lookup"><span data-stu-id="84edd-163">14</span></span>               |
| <span data-ttu-id="84edd-164">Символы</span><span class="sxs-lookup"><span data-stu-id="84edd-164">Symbols</span></span>                     | <span data-ttu-id="84edd-165">Шрифт</span><span class="sxs-lookup"><span data-stu-id="84edd-165">Wingdings</span></span>     | <span data-ttu-id="84edd-166">8</span><span class="sxs-lookup"><span data-stu-id="84edd-166">8</span></span>            | <span data-ttu-id="84edd-167">Шрифт</span><span class="sxs-lookup"><span data-stu-id="84edd-167">Wingdings</span></span>        | <span data-ttu-id="84edd-168">10</span><span class="sxs-lookup"><span data-stu-id="84edd-168">10</span></span>               |
| <span data-ttu-id="84edd-169">Девангари</span><span class="sxs-lookup"><span data-stu-id="84edd-169">Devanagari</span></span>                  | <span data-ttu-id="84edd-170">Mangal</span><span class="sxs-lookup"><span data-stu-id="84edd-170">Mangal</span></span>        | <span data-ttu-id="84edd-171">8</span><span class="sxs-lookup"><span data-stu-id="84edd-171">8</span></span>            | <span data-ttu-id="84edd-172">Mangal</span><span class="sxs-lookup"><span data-stu-id="84edd-172">Mangal</span></span>           | <span data-ttu-id="84edd-173">10</span><span class="sxs-lookup"><span data-stu-id="84edd-173">10</span></span>               |
| <span data-ttu-id="84edd-174">Тамильский</span><span class="sxs-lookup"><span data-stu-id="84edd-174">Tamil</span></span>                       | <span data-ttu-id="84edd-175">ласа</span><span class="sxs-lookup"><span data-stu-id="84edd-175">Latha</span></span>         | <span data-ttu-id="84edd-176">8</span><span class="sxs-lookup"><span data-stu-id="84edd-176">8</span></span>            | <span data-ttu-id="84edd-177">ласа</span><span class="sxs-lookup"><span data-stu-id="84edd-177">Latha</span></span>            | <span data-ttu-id="84edd-178">10</span><span class="sxs-lookup"><span data-stu-id="84edd-178">10</span></span>               |
| <span data-ttu-id="84edd-179">Грузинский, армянский</span><span class="sxs-lookup"><span data-stu-id="84edd-179">Georgian, Armenian</span></span>          | <span data-ttu-id="84edd-180">Arial Unicode</span><span class="sxs-lookup"><span data-stu-id="84edd-180">Arial Unicode</span></span> | <span data-ttu-id="84edd-181">8</span><span class="sxs-lookup"><span data-stu-id="84edd-181">8</span></span>            | <span data-ttu-id="84edd-182">Arial Unicode</span><span class="sxs-lookup"><span data-stu-id="84edd-182">Arial Unicode</span></span>    | <span data-ttu-id="84edd-183">10</span><span class="sxs-lookup"><span data-stu-id="84edd-183">10</span></span>               |



 

<span data-ttu-id="84edd-184">Таким образом, в таблице привязки шрифтов по умолчанию (записи имеют кодировку, имя шрифта и размер), форматированное редактирование позволяет кодировке ANSI \_ соответствовать нескольким наборам символов, в то время как соответствующий набор символов соответствует другим шрифтам в зависимости от типа "один к одному".</span><span class="sxs-lookup"><span data-stu-id="84edd-184">Therefore, in the default font-binding table (entries have a character set, font name, and size), Rich Edit allows ANSI\_CHARSET to match several character sets, while the appropriate character set matches other fonts on a one-to-one basis.</span></span> <span data-ttu-id="84edd-185">Точнее, форматированное редактирование использует набор \_ символов ANSI всякий раз, когда не будет найден другой альтернативный вариант.</span><span class="sxs-lookup"><span data-stu-id="84edd-185">More precisely, rich edit uses the ANSI\_CHARSET choice whenever no other alternative is found.</span></span> <span data-ttu-id="84edd-186">Вы сможете указать большую степень детализации, чем это. Например, назначьте конкретный набор символов АРАБСКого алфавита \_ для арабских запусков, конкретный Греческий шрифт для греческого языка и т. д.</span><span class="sxs-lookup"><span data-stu-id="84edd-186">You will be able to specify a finer granularity than this; for example, assign a specific ARABIC\_CHARSET for Arabic runs, a specific Greek font for Greek runs, and so on.</span></span> <span data-ttu-id="84edd-187">Такая более детальная степень детализации также будет использована, если шрифт с требуемой отметкой набора символов находится где-то в документе перед областью, привязанной к шрифту.</span><span class="sxs-lookup"><span data-stu-id="84edd-187">This finer granularity will also be used if a font with the desired character set stamp is found somewhere in the document before the area that is being font-bound.</span></span>

<span data-ttu-id="84edd-188">Обратите внимание, что Расширенное редактирование в настоящее время не обрабатывает отсутствующий глиф в шрифте, который требует поддержки набора символов, но является неполным.</span><span class="sxs-lookup"><span data-stu-id="84edd-188">Note that Rich Edit does not currently handle a missing glyph in a font that claims to support a character set but is incomplete.</span></span> <span data-ttu-id="84edd-189">Во время показа в сложном сценарии Расширенное редактирование позволяет понять, что такой глиф отсутствует, но не приводит к тому, что в резервном хранилище будет использоваться новый шрифт.</span><span class="sxs-lookup"><span data-stu-id="84edd-189">At display time in a complex script, Rich Edit does end up knowing that such a glyph is missing, but it does not cause the backing store to use a new font.</span></span> <span data-ttu-id="84edd-190">Как правило, это достигается с помощью базового шрифта, связывающего операционную систему.</span><span class="sxs-lookup"><span data-stu-id="84edd-190">Normally, the underlying font linking of the operating system will accomplish this.</span></span>

## <a name="remarks"></a><span data-ttu-id="84edd-191">Комментарии</span><span class="sxs-lookup"><span data-stu-id="84edd-191">Remarks</span></span>

<span data-ttu-id="84edd-192">**Расширенное редактирование 4,1:** Чтобы задать шрифт по умолчанию для скрипта, вызовите [**EM \_ Сетчарформат**](em-setcharformat.md) с [**CHARFORMAT2**](/windows/desktop/api/Richedit/ns-richedit-charformat2a), указав значения для элементов **ихеигхт**, **бчарсет**, **бпитчандфамили**, **сзфаценаме** и **LCID** .</span><span class="sxs-lookup"><span data-stu-id="84edd-192">**Rich Edit 4.1:** To set the default font for a script, call [**EM\_SETCHARFORMAT**](em-setcharformat.md) with [**CHARFORMAT2**](/windows/desktop/api/Richedit/ns-richedit-charformat2a), specifying values for the **yHeight**, **bCharSet**, **bPitchAndFamily**, **szFaceName**, and **lcid** members.</span></span> <span data-ttu-id="84edd-193">Кроме того, чтобы получить шрифт по умолчанию для конкретной кодовой страницы, вызовите [**EM \_ Жетчарформат**](em-getcharformat.md) с **CHARFORMAT2**, указав значения для элементов **бчарсет** и **LCID** .</span><span class="sxs-lookup"><span data-stu-id="84edd-193">Also, to get the default font for a specific code page, call [**EM\_GETCHARFORMAT**](em-getcharformat.md) with **CHARFORMAT2**, specifying values for the **bCharSet** and **lcid** members.</span></span>

## <a name="related-topics"></a><span data-ttu-id="84edd-194">См. также</span><span class="sxs-lookup"><span data-stu-id="84edd-194">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="84edd-195">Использование элементов управления Rich Edit</span><span class="sxs-lookup"><span data-stu-id="84edd-195">Using Rich Edit Controls</span></span>](using-rich-edit-controls.md)
</dt> <dt>

<span data-ttu-id="84edd-196">[Демонстрация стандартных элементов управления Windows (Кппвиндовскоммонконтролс)](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/master/OneCodeTeam/Windows%20common%20controls%20demo%20(CppWindowsCommonControls)/%5BC++%5D-Windows%20common%20controls%20demo%20(CppWindowsCommonControls)/C++/CppWindowsCommonControls)</span><span class="sxs-lookup"><span data-stu-id="84edd-196">[Windows common controls demo (CppWindowsCommonControls)](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/master/OneCodeTeam/Windows%20common%20controls%20demo%20(CppWindowsCommonControls)/%5BC++%5D-Windows%20common%20controls%20demo%20(CppWindowsCommonControls)/C++/CppWindowsCommonControls)</span></span>
</dt> </dl>

 

 




