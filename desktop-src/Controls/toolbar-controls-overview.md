---
title: Сведения об элементах управления ToolBar
description: Панель инструментов — это элемент управления, содержащий одну или несколько кнопок.
ms.assetid: b5a00a81-8d23-4844-8b0a-776e7cceced8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 263d95b13ddee54561cf1b0bb9d003d5d34cdf8d
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "103987908"
---
# <a name="about-toolbar-controls"></a><span data-ttu-id="aae0b-103">Сведения об элементах управления ToolBar</span><span class="sxs-lookup"><span data-stu-id="aae0b-103">About Toolbar Controls</span></span>

<span data-ttu-id="aae0b-104">Панель инструментов — это элемент управления, содержащий одну или несколько кнопок.</span><span class="sxs-lookup"><span data-stu-id="aae0b-104">A toolbar is a control that contains one or more buttons.</span></span> <span data-ttu-id="aae0b-105">Каждая кнопка при щелчке пользователем отправляет сообщение командной строки родительскому окну.</span><span class="sxs-lookup"><span data-stu-id="aae0b-105">Each button, when clicked by a user, sends a command message to the parent window.</span></span> <span data-ttu-id="aae0b-106">Как правило, кнопки на панели инструментов соответствуют элементам меню приложения, что предоставляет пользователю дополнительный и более прямой способ доступа к командам приложения.</span><span class="sxs-lookup"><span data-stu-id="aae0b-106">Typically, the buttons in a toolbar correspond to items in the application's menu, providing an additional and more direct way for the user to access an application's commands.</span></span>

<span data-ttu-id="aae0b-107">На следующем снимке экрана показано окно, содержащее простую панель инструментов для файловых операций.</span><span class="sxs-lookup"><span data-stu-id="aae0b-107">The following screen shot shows a window that contains a simple toolbar for file operations.</span></span> <span data-ttu-id="aae0b-108">Приложение включило стили оформления.</span><span class="sxs-lookup"><span data-stu-id="aae0b-108">The application has enabled visual styles.</span></span> <span data-ttu-id="aae0b-109">Кнопка сохранить — «горячий», так как курсор наводится на него при попытке выполнить снимок экрана.</span><span class="sxs-lookup"><span data-stu-id="aae0b-109">The Save button is "hot" because the cursor was hovering over it when the screen shot was taken.</span></span> <span data-ttu-id="aae0b-110">Реальный внешний вид элемента управления зависит от операционной системы и темы, выбранной пользователем.</span><span class="sxs-lookup"><span data-stu-id="aae0b-110">The actual appearance of the control varies depending on the operating system and the user-selected theme.</span></span>

![снимок экрана окна с панелью инструментов с тремя кнопками; одна кнопка является активной](images/tb-withstyles.png)

<span data-ttu-id="aae0b-112">На следующем снимке экрана показан тот же элемент управления в приложении, которое было скомпилировано без включенных стилей оформления.</span><span class="sxs-lookup"><span data-stu-id="aae0b-112">The following screen shot shows the same control in an application that was compiled without visual styles enabled.</span></span>

![снимок экрана окна без стилей оформления: ни одна из кнопок не выглядит активно](images/tb-wostyles.png)

<span data-ttu-id="aae0b-114">В следующих разделах рассматриваются возможности, которые следует учитывать при планировании панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-114">The following topics discuss features to consider when planning a toolbar.</span></span> <span data-ttu-id="aae0b-115">Конкретные сведения о реализации и примеры кода см. в разделе [Использование элементов управления ToolBar](using-toolbar-controls.md).</span><span class="sxs-lookup"><span data-stu-id="aae0b-115">For specific information on implementation, and example code, see [Using Toolbar Controls](using-toolbar-controls.md).</span></span>

-   [<span data-ttu-id="aae0b-116">Указание размера и расположения панели инструментов</span><span class="sxs-lookup"><span data-stu-id="aae0b-116">Specifying Toolbar Size and Position</span></span>](#specifying-toolbar-size-and-position)
-   [<span data-ttu-id="aae0b-117">Прозрачные панели инструментов</span><span class="sxs-lookup"><span data-stu-id="aae0b-117">Transparent Toolbars</span></span>](#transparent-toolbars)
-   [<span data-ttu-id="aae0b-118">Панели инструментов в стиле списка</span><span class="sxs-lookup"><span data-stu-id="aae0b-118">List-style Toolbars</span></span>](#list-style-toolbars)
-   [<span data-ttu-id="aae0b-119">Определение изображений для кнопок</span><span class="sxs-lookup"><span data-stu-id="aae0b-119">Defining Button Images</span></span>](#defining-button-images)
    -   [<span data-ttu-id="aae0b-120">Определение изображений на кнопке с помощью точечных рисунков</span><span class="sxs-lookup"><span data-stu-id="aae0b-120">Defining Button Images by Using Bitmaps</span></span>](#defining-button-images-by-using-bitmaps)
    -   [<span data-ttu-id="aae0b-121">Определение изображений для кнопок с помощью списков изображений</span><span class="sxs-lookup"><span data-stu-id="aae0b-121">Defining Button Images by Using Image Lists</span></span>](#defining-button-images-by-using-image-lists)
-   [<span data-ttu-id="aae0b-122">Определение текста для кнопок</span><span class="sxs-lookup"><span data-stu-id="aae0b-122">Defining Text for Buttons</span></span>](#defining-text-for-buttons)
-   [<span data-ttu-id="aae0b-123">Добавление кнопок панели инструментов</span><span class="sxs-lookup"><span data-stu-id="aae0b-123">Adding Toolbar Buttons</span></span>](#adding-toolbar-buttons)
    -   [<span data-ttu-id="aae0b-124">Стили кнопок панели инструментов</span><span class="sxs-lookup"><span data-stu-id="aae0b-124">Toolbar Button Styles</span></span>](#toolbar-button-styles)
    -   [<span data-ttu-id="aae0b-125">Состояния кнопок панели инструментов</span><span class="sxs-lookup"><span data-stu-id="aae0b-125">Toolbar Button States</span></span>](#toolbar-button-states)
    -   [<span data-ttu-id="aae0b-126">Идентификатор команды</span><span class="sxs-lookup"><span data-stu-id="aae0b-126">Command Identifier</span></span>](#command-identifier)
    -   [<span data-ttu-id="aae0b-127">Размер и расположение кнопки</span><span class="sxs-lookup"><span data-stu-id="aae0b-127">Button Size and Position</span></span>](#button-size-and-position)
-   [<span data-ttu-id="aae0b-128">Включение настройки</span><span class="sxs-lookup"><span data-stu-id="aae0b-128">Enabling Customization</span></span>](#enabling-customization)
-   [<span data-ttu-id="aae0b-129">Включение оперативного отслеживания</span><span class="sxs-lookup"><span data-stu-id="aae0b-129">Enabling Hot-tracking</span></span>](#enabling-hot-tracking)

## <a name="specifying-toolbar-size-and-position"></a><span data-ttu-id="aae0b-130">Указание размера и расположения панели инструментов</span><span class="sxs-lookup"><span data-stu-id="aae0b-130">Specifying Toolbar Size and Position</span></span>

<span data-ttu-id="aae0b-131">При создании панели инструментов с помощью [**креатетулбарекс**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex)функция позволяет задать высоту и ширину панели инструментов в пикселях.</span><span class="sxs-lookup"><span data-stu-id="aae0b-131">If you create a toolbar using [**CreateToolbarEx**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex), the function enables you to specify in pixels the height and width of the toolbar.</span></span>

> [!Note]  
> <span data-ttu-id="aae0b-132">Использовать [**креатетулбарекс**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex) не рекомендуется, так как он не поддерживает новые возможности панелей инструментов, включая списки изображений.</span><span class="sxs-lookup"><span data-stu-id="aae0b-132">Using [**CreateToolbarEx**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex) is not recommended, as it does not support new features of toolbars, including image lists.</span></span> <span data-ttu-id="aae0b-133">Дополнительные сведения о создании панелей инструментов см. [в разделе Использование элементов управления ToolBar](using-toolbar-controls.md).</span><span class="sxs-lookup"><span data-stu-id="aae0b-133">For more information about creating toolbars, see [Using Toolbar Controls](using-toolbar-controls.md).</span></span>

 

<span data-ttu-id="aae0b-134">Функция [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) не имеет параметров для указания размера панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-134">The [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function does not have parameters for specifying toolbar size.</span></span> <span data-ttu-id="aae0b-135">Процедура окна панели инструментов автоматически задает размер и расположение окна панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-135">The toolbar window procedure automatically sets the size and position of the toolbar window.</span></span> <span data-ttu-id="aae0b-136">Высота основана на высоте кнопок на панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-136">The height is based on the height of the buttons in the toolbar.</span></span> <span data-ttu-id="aae0b-137">Ширина совпадает с шириной клиентской области родительского окна.</span><span class="sxs-lookup"><span data-stu-id="aae0b-137">The width is the same as the width of the parent window's client area.</span></span> <span data-ttu-id="aae0b-138">Чтобы изменить параметры автоматического размера, отправьте [**ТБ \_ сетбуттонсизе**](tb-setbuttonsize.md) -сообщения.</span><span class="sxs-lookup"><span data-stu-id="aae0b-138">To change the automatic size settings, send a [**TB\_SETBUTTONSIZE**](tb-setbuttonsize.md) message.</span></span> <span data-ttu-id="aae0b-139">Стандартные стили управления [**CCS \_**](common-control-styles.md) и [**CCS \_ снизу**](common-control-styles.md) определяют, располагается ли панель инструментов вдоль верхней или нижней части клиентской области.</span><span class="sxs-lookup"><span data-stu-id="aae0b-139">The [**CCS\_TOP**](common-control-styles.md) and [**CCS\_BOTTOM**](common-control-styles.md) common control styles determine whether the toolbar is positioned along the top or bottom of the client area.</span></span> <span data-ttu-id="aae0b-140">По умолчанию панель инструментов имеет **\_ верхний стиль CCS** .</span><span class="sxs-lookup"><span data-stu-id="aae0b-140">By default, a toolbar has the **CCS\_TOP** style.</span></span>

<span data-ttu-id="aae0b-141">Кроме того, окно панели инструментов автоматически корректирует размер панели инструментов при получении сообщения об [**\_ изменении размера WM**](/windows/desktop/winmsg/wm-size) или [**ТБ \_**](tb-autosize.md) .</span><span class="sxs-lookup"><span data-stu-id="aae0b-141">Also, the toolbar window procedure automatically adjusts the size of the toolbar whenever it receives a [**WM\_SIZE**](/windows/desktop/winmsg/wm-size) or [**TB\_AUTOSIZE**](tb-autosize.md) message.</span></span> <span data-ttu-id="aae0b-142">Приложение должно отправлять любое из этих сообщений при изменении размера родительского окна или после отправки сообщения, которое требует настройки размера панели инструментов, например, [**\_ сетбуттонсизеного**](tb-setbuttonsize.md) сообщения размером ТБ.</span><span class="sxs-lookup"><span data-stu-id="aae0b-142">An application should send either of these messages whenever the size of the parent window changes or after sending a message that requires adjusting the size of the toolbar—for example, a [**TB\_SETBUTTONSIZE**](tb-setbuttonsize.md) message.</span></span>

<span data-ttu-id="aae0b-143">Поведение панели инструментов по умолчанию для изменения размера и позиционирования можно отключить, установив стандартные стили управления [**CCS \_ Норесизе**](common-control-styles.md) и [**CCS \_ нопаренталигн**](common-control-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="aae0b-143">The toolbar default sizing and positioning behaviors can be turned off by setting the [**CCS\_NORESIZE**](common-control-styles.md) and [**CCS\_NOPARENTALIGN**](common-control-styles.md) common control styles.</span></span> <span data-ttu-id="aae0b-144">Элементы управления "панель инструментов", размещенные элементами управления главной панели, должны устанавливать эти стили, так как размеры элементов управления главной панели и их расположение.</span><span class="sxs-lookup"><span data-stu-id="aae0b-144">Toolbar controls that are hosted by rebar controls must set these styles because the rebar control sizes and positions the toolbar.</span></span>

## <a name="transparent-toolbars"></a><span data-ttu-id="aae0b-145">Прозрачные панели инструментов</span><span class="sxs-lookup"><span data-stu-id="aae0b-145">Transparent Toolbars</span></span>

<span data-ttu-id="aae0b-146">Элементы управления ToolBar поддерживают прозрачный внешний вид, который позволяет отображать клиентскую область на панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-146">Toolbar controls support a transparent look that allows the client area under the toolbar to show through.</span></span> <span data-ttu-id="aae0b-147">Существует два вида прозрачных панелей инструментов с плоскими кнопками и трехмерными кнопками.</span><span class="sxs-lookup"><span data-stu-id="aae0b-147">There are two kinds of transparent toolbars, ones with flat buttons and ones with three-dimensional buttons.</span></span> <span data-ttu-id="aae0b-148">Если вы хотите, чтобы приложение соответствовало интерфейсу Windows, используйте панель инструментов плоского прозрачного стиля.</span><span class="sxs-lookup"><span data-stu-id="aae0b-148">If you want your application to match the Windows interface, use the flat transparent style toolbar.</span></span>

<span data-ttu-id="aae0b-149">На следующем снимке экрана показаны два вида прозрачных панелей инструментов, не использующих стили оформления.</span><span class="sxs-lookup"><span data-stu-id="aae0b-149">The following screen shot shows the two kinds of transparent toolbars, not using visual styles.</span></span>

![снимок экрана двух окон с различными стилями панелей инструментов, но обе панели инструментов являются прозрачными](images/toolbartrans.jpg)

<span data-ttu-id="aae0b-151">На следующем снимке экрана показана прозрачная панель инструментов, которая может отображаться в Windows Vista с включенными стилями оформления.</span><span class="sxs-lookup"><span data-stu-id="aae0b-151">The following screen shot shows a transparent toolbar as it might appear in Windows Vista, with visual styles enabled.</span></span> <span data-ttu-id="aae0b-152">Цвет фона диалогового окна был изменен, чтобы сделать прозрачность более очевидной.</span><span class="sxs-lookup"><span data-stu-id="aae0b-152">The background color of the dialog box has been changed to make the transparency more obvious.</span></span>

![снимок экрана окна в Windows Vista с прозрачной панелью инструментов](images/tb-transparent.png)

<span data-ttu-id="aae0b-154">Чтобы создать прозрачную панель инструментов, необходимо только добавить [**тбстиле \_ Flat**](toolbar-control-and-button-styles.md) или [**тбстиле, \_ прозрачный**](toolbar-control-and-button-styles.md) для параметра стиля окна [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa).</span><span class="sxs-lookup"><span data-stu-id="aae0b-154">To create a transparent toolbar, all you need to do is add [**TBSTYLE\_FLAT**](toolbar-control-and-button-styles.md) or [**TBSTYLE\_TRANSPARENT**](toolbar-control-and-button-styles.md) to the window style parameter of [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa).</span></span> <span data-ttu-id="aae0b-155">Если не требуется, чтобы линия отображалась в нижней части панели инструментов, не используйте стиль окна [**\_ границы WS**](/windows/desktop/winmsg/window-styles) .</span><span class="sxs-lookup"><span data-stu-id="aae0b-155">If you do not want a line to appear to indicate the bottom of the toolbar, do not use the [**WS\_BORDER**](/windows/desktop/winmsg/window-styles) window style.</span></span>

> [!Note]  
> <span data-ttu-id="aae0b-156">При использовании стилей оформления панели инструментов по умолчанию могут быть плоскими.</span><span class="sxs-lookup"><span data-stu-id="aae0b-156">When using visual styles, toolbars may be flat by default.</span></span>

 

## <a name="list-style-toolbars"></a><span data-ttu-id="aae0b-157">Панели инструментов в стиле списка</span><span class="sxs-lookup"><span data-stu-id="aae0b-157">List-style Toolbars</span></span>

<span data-ttu-id="aae0b-158">Кнопки панели инструментов позволяют отображать как текст, так и точечные рисунки.</span><span class="sxs-lookup"><span data-stu-id="aae0b-158">Toolbar buttons enable you to display both text and bitmaps.</span></span> <span data-ttu-id="aae0b-159">Кнопки на панели инструментов, созданной с помощью стиля [**\_ списка тбстиле**](toolbar-control-and-button-styles.md) , размещают текст справа от точечного рисунка, а не под ним.</span><span class="sxs-lookup"><span data-stu-id="aae0b-159">The buttons on a toolbar created with the [**TBSTYLE\_LIST**](toolbar-control-and-button-styles.md) style place text to the right of the bitmap instead of under it.</span></span>

<span data-ttu-id="aae0b-160">На следующем снимке экрана показана панель инструментов со стилем списка.</span><span class="sxs-lookup"><span data-stu-id="aae0b-160">The following screen shot shows a toolbar with the list style.</span></span>

![снимок экрана панели инструментов с текстом справа от каждого значка](images/tb-liststyle.png)

<span data-ttu-id="aae0b-162">Вы можете использовать стиль панели инструментов [**\_ список тбстиле**](toolbar-control-and-button-styles.md) в сочетании с [**\_ плоским**](toolbar-control-and-button-styles.md) стилем тбстиле, чтобы создать панель инструментов с плоскими кнопками.</span><span class="sxs-lookup"><span data-stu-id="aae0b-162">You can use the [**TBSTYLE\_LIST**](toolbar-control-and-button-styles.md) toolbar style in combination with the [**TBSTYLE\_FLAT**](toolbar-control-and-button-styles.md) style to create a toolbar with flat buttons.</span></span>

## <a name="defining-button-images"></a><span data-ttu-id="aae0b-163">Определение изображений для кнопок</span><span class="sxs-lookup"><span data-stu-id="aae0b-163">Defining Button Images</span></span>

<span data-ttu-id="aae0b-164">Существует два способа задания изображений для кнопок — по точечным рисункам или по спискам изображений.</span><span class="sxs-lookup"><span data-stu-id="aae0b-164">There are two ways to specify the images for buttons—by bitmaps or by image lists.</span></span> <span data-ttu-id="aae0b-165">Приложение должно выбрать используемый метод.</span><span class="sxs-lookup"><span data-stu-id="aae0b-165">An application must choose which method to use.</span></span> <span data-ttu-id="aae0b-166">Они не могут использовать оба метода с одним и тем же элементом управления ToolBar.</span><span class="sxs-lookup"><span data-stu-id="aae0b-166">It cannot use both methods with the same toolbar control.</span></span> <span data-ttu-id="aae0b-167">Обратите внимание, что функция [**креатетулбарекс**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex) использует метод Bitmap.</span><span class="sxs-lookup"><span data-stu-id="aae0b-167">Note that the [**CreateToolbarEx**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex) function uses the bitmap method.</span></span> <span data-ttu-id="aae0b-168">Приложения, которые хотят использовать метод списка изображений, должны использовать функцию [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) для создания элемента управления ToolBar.</span><span class="sxs-lookup"><span data-stu-id="aae0b-168">Applications that want to use the image list method must use the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function to create the toolbar control.</span></span>

### <a name="defining-button-images-by-using-bitmaps"></a><span data-ttu-id="aae0b-169">Определение изображений на кнопке с помощью точечных рисунков</span><span class="sxs-lookup"><span data-stu-id="aae0b-169">Defining Button Images by Using Bitmaps</span></span>

<span data-ttu-id="aae0b-170">Каждая кнопка на панели инструментов может включать растровый рисунок.</span><span class="sxs-lookup"><span data-stu-id="aae0b-170">Each button in a toolbar can include a bitmapped image.</span></span> <span data-ttu-id="aae0b-171">Панель инструментов использует внутренний список для хранения сведений, необходимых для рисования изображений.</span><span class="sxs-lookup"><span data-stu-id="aae0b-171">A toolbar uses an internal list to store the information that it needs to draw the images.</span></span> <span data-ttu-id="aae0b-172">При вызове функции [**креатетулбарекс**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex) вы указываете монохромный или цветной точечный рисунок, содержащий начальные изображения, а панель инструментов добавляет эти сведения во внутренний список изображений.</span><span class="sxs-lookup"><span data-stu-id="aae0b-172">When you call the [**CreateToolbarEx**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex) function, you specify a monochrome or color bitmap that contains the initial images, and the toolbar adds the information to the internal list of images.</span></span> <span data-ttu-id="aae0b-173">Дополнительные образы можно добавить позже с помощью сообщения [**\_ аддбитмап ТБ**](tb-addbitmap.md) .</span><span class="sxs-lookup"><span data-stu-id="aae0b-173">You can add additional images later by using the [**TB\_ADDBITMAP**](tb-addbitmap.md) message.</span></span>

<span data-ttu-id="aae0b-174">Каждый образ содержит индекс, начинающийся с нуля.</span><span class="sxs-lookup"><span data-stu-id="aae0b-174">Each image has a zero-based index.</span></span> <span data-ttu-id="aae0b-175">Первое изображение, добавленное во внутренний список, имеет индекс 0, второе изображение имеет индекс 1 и т. д.</span><span class="sxs-lookup"><span data-stu-id="aae0b-175">The first image added to the internal list has an index of 0, the second image has an index of 1, and so on.</span></span> <span data-ttu-id="aae0b-176">[**ТБ \_ АДДБИТМАП**](tb-addbitmap.md) добавляет изображения в конец списка и возвращает индекс первого нового добавленного изображения.</span><span class="sxs-lookup"><span data-stu-id="aae0b-176">[**TB\_ADDBITMAP**](tb-addbitmap.md) adds images to the end of the list and returns the index of the first new image that it added.</span></span> <span data-ttu-id="aae0b-177">Чтобы связать изображение с кнопкой, необходимо отправить сообщение [**\_ Аддбуттонс в ТБ**](tb-addbuttons.md) и указать индекс изображения после добавления растровых изображений во внутренний список изображений.</span><span class="sxs-lookup"><span data-stu-id="aae0b-177">To associate the image with a button, you must send a [**TB\_ADDBUTTONS**](tb-addbuttons.md) message and specify the image's index after you add bitmaps to the internal image list.</span></span>

<span data-ttu-id="aae0b-178">В Windows предполагается, что все растровые изображения панели инструментов имеют одинаковый размер.</span><span class="sxs-lookup"><span data-stu-id="aae0b-178">Windows assumes that all of a toolbar's bitmapped images are the same size.</span></span> <span data-ttu-id="aae0b-179">Размер указывается при создании панели инструментов с помощью [**креатетулбарекс**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex).</span><span class="sxs-lookup"><span data-stu-id="aae0b-179">You specify the size when you create the toolbar by using [**CreateToolbarEx**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex).</span></span> <span data-ttu-id="aae0b-180">Если для создания панели инструментов используется функция [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) , то размер изображений устанавливается равным значениям по умолчанию 16 на 15 пикселей.</span><span class="sxs-lookup"><span data-stu-id="aae0b-180">If you use the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function to create a toolbar, the size of the images is set to the default dimensions of 16 by 15 pixels.</span></span> <span data-ttu-id="aae0b-181">Можно использовать сообщение [**\_ Сетбитмапсизе размером ТБ**](tb-setbitmapsize.md) для изменения размеров растровых изображений, но это необходимо сделать перед добавлением изображений во внутренний список.</span><span class="sxs-lookup"><span data-stu-id="aae0b-181">You can use the [**TB\_SETBITMAPSIZE**](tb-setbitmapsize.md) message to change the dimensions of the bitmapped images, but you must do so before adding any images to the internal list.</span></span>

### <a name="defining-button-images-by-using-image-lists"></a><span data-ttu-id="aae0b-182">Определение изображений для кнопок с помощью списков изображений</span><span class="sxs-lookup"><span data-stu-id="aae0b-182">Defining Button Images by Using Image Lists</span></span>

<span data-ttu-id="aae0b-183">Изображения кнопок также можно хранить в наборе [списков изображений](image-lists.md).</span><span class="sxs-lookup"><span data-stu-id="aae0b-183">You can also store button images in a set of [Image Lists](image-lists.md).</span></span> <span data-ttu-id="aae0b-184">Список изображений — это набор изображений одного размера, на каждый из которых можно ссылаться по индексу.</span><span class="sxs-lookup"><span data-stu-id="aae0b-184">An image list is a collection of images of the same size, each of which can be referred to by its index.</span></span> <span data-ttu-id="aae0b-185">Списки изображений используются для управления большими наборами значков или точечных рисунков.</span><span class="sxs-lookup"><span data-stu-id="aae0b-185">Image lists are used to manage large sets of icons or bitmaps.</span></span> <span data-ttu-id="aae0b-186">Для отображения кнопок в различных состояниях можно использовать до трех различных списков изображений, как показано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="aae0b-186">You can use up to three different image lists to display buttons in various states, as shown in the following table.</span></span>



|          |                                                                                                                                                                                              |
|----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="aae0b-187">Норм.</span><span class="sxs-lookup"><span data-stu-id="aae0b-187">Normal</span></span>   | <span data-ttu-id="aae0b-188">Кнопки в состоянии по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="aae0b-188">Buttons in their default state.</span></span>                                                                                                                                                              |
| <span data-ttu-id="aae0b-189">Горячий</span><span class="sxs-lookup"><span data-stu-id="aae0b-189">Hot</span></span>      | <span data-ttu-id="aae0b-190">Кнопки, нажимаемые под указателем или нажатой.</span><span class="sxs-lookup"><span data-stu-id="aae0b-190">Buttons that are under the pointer or pressed.</span></span> <span data-ttu-id="aae0b-191">Активные элементы поддерживаются только в элементах управления "панель инструментов" с [**\_ неструктурированным**](toolbar-control-and-button-styles.md) стилем тбстиле.</span><span class="sxs-lookup"><span data-stu-id="aae0b-191">Hot items are supported only in toolbar controls that have the [**TBSTYLE\_FLAT**](toolbar-control-and-button-styles.md) style.</span></span> |
| <span data-ttu-id="aae0b-192">Выключено</span><span class="sxs-lookup"><span data-stu-id="aae0b-192">Disabled</span></span> | <span data-ttu-id="aae0b-193">Отключенные кнопки.</span><span class="sxs-lookup"><span data-stu-id="aae0b-193">Buttons that are disabled.</span></span>                                                                                                                                                                   |



 

<span data-ttu-id="aae0b-194">После уничтожения панели инструментов приложения должны освобождать все созданные им списки образов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-194">After the toolbar is destroyed, applications must free any image lists they have created.</span></span>

## <a name="defining-text-for-buttons"></a><span data-ttu-id="aae0b-195">Определение текста для кнопок</span><span class="sxs-lookup"><span data-stu-id="aae0b-195">Defining Text for Buttons</span></span>

<span data-ttu-id="aae0b-196">Каждая кнопка может отображать строку в дополнение к изображению или вместо него.</span><span class="sxs-lookup"><span data-stu-id="aae0b-196">Each button can display a string in addition to, or instead of, an image.</span></span> <span data-ttu-id="aae0b-197">Панель инструментов поддерживает внутренний список, содержащий все строки, доступные кнопкам панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-197">A toolbar maintains an internal list that contains all the strings available to toolbar buttons.</span></span> <span data-ttu-id="aae0b-198">Вы добавляете строки во внутренний список с помощью сообщения [**\_ ADDSTRING ТБ**](tb-addstring.md) , указывая адрес буфера, содержащего добавляемые строки.</span><span class="sxs-lookup"><span data-stu-id="aae0b-198">You add strings to the internal list by using the [**TB\_ADDSTRING**](tb-addstring.md) message, specifying the address of the buffer containing the strings to add.</span></span> <span data-ttu-id="aae0b-199">Каждая строка должна завершаться нулем, а последняя строка должна завершаться двумя символами NULL.</span><span class="sxs-lookup"><span data-stu-id="aae0b-199">Each string must be null-terminated, and the last string must be terminated with two null characters.</span></span>

<span data-ttu-id="aae0b-200">Каждая строка содержит индекс, начинающийся с нуля.</span><span class="sxs-lookup"><span data-stu-id="aae0b-200">Each string has a zero-based index.</span></span> <span data-ttu-id="aae0b-201">Первая строка, добавленная во внутренний список строк, имеет индекс 0, вторая строка имеет индекс 1 и т. д.</span><span class="sxs-lookup"><span data-stu-id="aae0b-201">The first string added to the internal list of strings has an index of 0, the second string has an index of 1, and so on.</span></span> <span data-ttu-id="aae0b-202">[**ТБ \_ ADDSTRING**](tb-addstring.md) добавляет строки в конец списка и возвращает индекс первой новой строки.</span><span class="sxs-lookup"><span data-stu-id="aae0b-202">[**TB\_ADDSTRING**](tb-addstring.md) adds strings to the end of the list and returns the index of the first new string.</span></span> <span data-ttu-id="aae0b-203">Чтобы связать строку с кнопкой, используется индекс строки.</span><span class="sxs-lookup"><span data-stu-id="aae0b-203">You use a string's index to associate the string with a button.</span></span>

<span data-ttu-id="aae0b-204">Использование [**ТБ \_ ADDSTRING**](tb-addstring.md) — не единственный способ добавления строк на панель инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-204">Using [**TB\_ADDSTRING**](tb-addstring.md) is not the only way to add strings to a toolbar.</span></span> <span data-ttu-id="aae0b-205">Строку можно отобразить в кнопке, передав указатель строки в члене **истринг** структуры [**тббуттон**](/windows/desktop/api/Commctrl/ns-commctrl-tbbutton) , которая передается в [**ТБ \_ аддбуттонс**](tb-addbuttons.md).</span><span class="sxs-lookup"><span data-stu-id="aae0b-205">You can display a string in a button by passing a string pointer in the **iString** member of the [**TBBUTTON**](/windows/desktop/api/Commctrl/ns-commctrl-tbbutton) structure that is passed to [**TB\_ADDBUTTONS**](tb-addbuttons.md).</span></span> <span data-ttu-id="aae0b-206">Кроме того, можно использовать [**ТБ \_ сетбуттонинфо**](tb-setbuttoninfo.md) для назначения текста кнопке панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-206">Additionally, you can use [**TB\_SETBUTTONINFO**](tb-setbuttoninfo.md) to assign text to a toolbar button.</span></span>

## <a name="adding-toolbar-buttons"></a><span data-ttu-id="aae0b-207">Добавление кнопок панели инструментов</span><span class="sxs-lookup"><span data-stu-id="aae0b-207">Adding Toolbar Buttons</span></span>

<span data-ttu-id="aae0b-208">Если для создания панели инструментов используется функция [**креатетулбарекс**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex) , можно добавить кнопки на панель инструментов, заполнив массив структур [**тббуттон**](/windows/desktop/api/Commctrl/ns-commctrl-tbbutton) и указав адрес массива в вызове функции.</span><span class="sxs-lookup"><span data-stu-id="aae0b-208">If you use the [**CreateToolbarEx**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex) function to create a toolbar, you can add buttons to the toolbar by filling an array of [**TBBUTTON**](/windows/desktop/api/Commctrl/ns-commctrl-tbbutton) structures and specifying the address of the array in the function call.</span></span> <span data-ttu-id="aae0b-209">Однако функция [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) не имеет параметра для передачи структуры **тббуттон** .</span><span class="sxs-lookup"><span data-stu-id="aae0b-209">However, the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function does not have a parameter for passing a **TBBUTTON** structure.</span></span> <span data-ttu-id="aae0b-210">**CreateWindowEx** создает пустую панель инструментов, заполняемую при отправке сообщения [**\_ аддбуттонс ТБ**](tb-addbuttons.md) , указывая адрес структуры **тббуттон** .</span><span class="sxs-lookup"><span data-stu-id="aae0b-210">**CreateWindowEx** creates an empty toolbar that you fill by sending a [**TB\_ADDBUTTONS**](tb-addbuttons.md) message, specifying the address of a **TBBUTTON** structure.</span></span>

<span data-ttu-id="aae0b-211">После создания панели инструментов можно добавить кнопки, отправив в [**ТБ \_ Инсертбуттон**](tb-insertbutton.md) или [**ТБ \_ аддбуттонс**](tb-addbuttons.md) сообщение.</span><span class="sxs-lookup"><span data-stu-id="aae0b-211">After a toolbar is created, you can add buttons by sending a [**TB\_INSERTBUTTON**](tb-insertbutton.md) or [**TB\_ADDBUTTONS**](tb-addbuttons.md) message.</span></span> <span data-ttu-id="aae0b-212">Каждая кнопка описывается структурой [**тббуттон**](/windows/desktop/api/Commctrl/ns-commctrl-tbbutton) , определяющей атрибуты кнопки, включая индексы ее строки и точечного рисунка, а также ее стиль, состояние, идентификатор команды и определяемое приложением 32-разрядное значение.</span><span class="sxs-lookup"><span data-stu-id="aae0b-212">Each button is described by a [**TBBUTTON**](/windows/desktop/api/Commctrl/ns-commctrl-tbbutton) structure, which defines the attributes of the button, including the indexes of its string and bitmap as well as its style, state, command identifier, and application-defined 32-bit value.</span></span>

> [!Note]  
> <span data-ttu-id="aae0b-213">Если для создания панели инструментов используется функция [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) , перед добавлением каких-либо кнопок необходимо отправить сообщение [**\_ буттонструктсизе ТБ**](tb-buttonstructsize.md) .</span><span class="sxs-lookup"><span data-stu-id="aae0b-213">If you use the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function to create a toolbar, you must send the [**TB\_BUTTONSTRUCTSIZE**](tb-buttonstructsize.md) message before adding any buttons.</span></span> <span data-ttu-id="aae0b-214">Сообщение передает размер структуры [**тббуттон**](/windows/desktop/api/Commctrl/ns-commctrl-tbbutton) на панель инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-214">The message passes the size of the [**TBBUTTON**](/windows/desktop/api/Commctrl/ns-commctrl-tbbutton) structure to the toolbar.</span></span>

 

### <a name="toolbar-button-styles"></a><span data-ttu-id="aae0b-215">Стили кнопок панели инструментов</span><span class="sxs-lookup"><span data-stu-id="aae0b-215">Toolbar Button Styles</span></span>

<span data-ttu-id="aae0b-216">Стиль кнопки определяет, как отображается кнопка и как она реагирует на вводимые пользователем данные.</span><span class="sxs-lookup"><span data-stu-id="aae0b-216">A button's style determines how the button appears and how it responds to user input.</span></span> <span data-ttu-id="aae0b-217">Например, стиль [**\_ кнопки бтнс**](toolbar-control-and-button-styles.md) создает кнопку на панели инструментов, которая ведет себя как стандартная кнопка "Отправить".</span><span class="sxs-lookup"><span data-stu-id="aae0b-217">For instance, the [**BTNS\_BUTTON**](toolbar-control-and-button-styles.md) style creates a toolbar button that behaves like a standard push button.</span></span> <span data-ttu-id="aae0b-218">Кнопка с стилем [**\_ проверки бтнс**](toolbar-control-and-button-styles.md) похожа на стандартную кнопку Push, за исключением того, что она переключает между нажатым и ненажатым состоянием при каждом нажатии пользователем.</span><span class="sxs-lookup"><span data-stu-id="aae0b-218">A button that has the [**BTNS\_CHECK**](toolbar-control-and-button-styles.md) style is similar to a standard push button, except it toggles between the pressed and nonpressed states each time the user clicks it.</span></span>

<span data-ttu-id="aae0b-219">Вы можете создавать группы кнопок панели инструментов, которые действуют как переключатели, используя [**\_ группу Бтнс**](toolbar-control-and-button-styles.md) или [**бтнс \_ чеккграуп**](toolbar-control-and-button-styles.md) Style.</span><span class="sxs-lookup"><span data-stu-id="aae0b-219">You can create groups of toolbar buttons that act like radio buttons by using the [**BTNS\_GROUP**](toolbar-control-and-button-styles.md) or [**BTNS\_CHECKGROUP**](toolbar-control-and-button-styles.md) style.</span></span> <span data-ttu-id="aae0b-220">Это приводит к нажатию кнопки, пока пользователь не выберет другую кнопку в группе.</span><span class="sxs-lookup"><span data-stu-id="aae0b-220">This causes a button to stay pressed until the user chooses another button in the group.</span></span> <span data-ttu-id="aae0b-221">Группа определяется как непрерывная коллекция кнопок, все с **бтнс \_ группой** или **бтнс \_ чеккграуп** Style.</span><span class="sxs-lookup"><span data-stu-id="aae0b-221">A group is defined as a contiguous collection of buttons, all with the **BTNS\_GROUP** or **BTNS\_CHECKGROUP** style.</span></span>

<span data-ttu-id="aae0b-222">Стиль [**бтнс \_ Sep**](toolbar-control-and-button-styles.md) создает небольшой зазор между кнопками или выводит «вдавленное» между кнопками на плоских панелях инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-222">The [**BTNS\_SEP**](toolbar-control-and-button-styles.md) style creates a small gap between buttons or draws an etch between buttons on flat toolbars.</span></span> <span data-ttu-id="aae0b-223">Кнопка с стилем **бтнс \_ Sep** не получает входные данные пользователя.</span><span class="sxs-lookup"><span data-stu-id="aae0b-223">A button with the **BTNS\_SEP** style does not receive user input.</span></span>

<span data-ttu-id="aae0b-224">В версии 5,80 стандартных элементов управления появились некоторые новые стили кнопок панели инструментов и переименованы некоторые из старых стилей.</span><span class="sxs-lookup"><span data-stu-id="aae0b-224">Version 5.80 of the common controls introduced some new toolbar button styles and renamed some of the older styles.</span></span> <span data-ttu-id="aae0b-225">Все флаги стиля кнопки теперь начинаются с БТНС \_ XXX вместо тбстиле \_ xxx.</span><span class="sxs-lookup"><span data-stu-id="aae0b-225">All button style flags now begin with BTNS\_XXX instead of TBSTYLE\_XXX.</span></span> <span data-ttu-id="aae0b-226">Список и описание стилей кнопок см. в разделе [стили элементов управления и кнопок панели инструментов](toolbar-control-and-button-styles.md).</span><span class="sxs-lookup"><span data-stu-id="aae0b-226">For a listing and discussion of the button styles, see [Toolbar Control and Button Styles](toolbar-control-and-button-styles.md).</span></span>

### <a name="toolbar-button-states"></a><span data-ttu-id="aae0b-227">Состояния кнопок панели инструментов</span><span class="sxs-lookup"><span data-stu-id="aae0b-227">Toolbar Button States</span></span>

<span data-ttu-id="aae0b-228">Каждая кнопка на панели инструментов имеет состояние.</span><span class="sxs-lookup"><span data-stu-id="aae0b-228">Each button in a toolbar has a state.</span></span> <span data-ttu-id="aae0b-229">Панель инструментов обновляет состояние кнопки в соответствии с действиями пользователя, например нажатием кнопки.</span><span class="sxs-lookup"><span data-stu-id="aae0b-229">The toolbar updates a button's state to reflect user actions, such as clicking the button.</span></span> <span data-ttu-id="aae0b-230">Состояние указывает, находится ли кнопка в данный момент нажата или не нажата, включена или отключена, скрыта или видима.</span><span class="sxs-lookup"><span data-stu-id="aae0b-230">The state indicates whether the button is currently pressed or not pressed, enabled or disabled, hidden or visible.</span></span> <span data-ttu-id="aae0b-231">Несмотря на то, что приложение задает начальное состояние кнопки при добавлении кнопки на панель инструментов, оно может изменить и получить состояние, отправив на панель инструментов сообщения в [**терабайтах \_**](tb-getstate.md) [**\_ SETSTATE и ТБ**](tb-setstate.md) .</span><span class="sxs-lookup"><span data-stu-id="aae0b-231">Although an application sets a button's initial state when adding the button to the toolbar, it can change and retrieve the state by sending [**TB\_GETSTATE**](tb-getstate.md) and [**TB\_SETSTATE**](tb-setstate.md) messages to the toolbar.</span></span> <span data-ttu-id="aae0b-232">Список состояний кнопок панели инструментов см. в разделе [состояния панелей инструментов](toolbar-button-states.md).</span><span class="sxs-lookup"><span data-stu-id="aae0b-232">For a list of toolbar button states, see [Toolbar States](toolbar-button-states.md).</span></span>

### <a name="command-identifier"></a><span data-ttu-id="aae0b-233">Идентификатор команды</span><span class="sxs-lookup"><span data-stu-id="aae0b-233">Command Identifier</span></span>

<span data-ttu-id="aae0b-234">Каждой кнопке назначен определенный приложением идентификатор команды.</span><span class="sxs-lookup"><span data-stu-id="aae0b-234">Each button has an application-defined command identifier associated with it.</span></span> <span data-ttu-id="aae0b-235">Идентификаторы кнопок обычно определяются в файле заголовка приложения.</span><span class="sxs-lookup"><span data-stu-id="aae0b-235">Button identifiers are usually defined in an application header file.</span></span> <span data-ttu-id="aae0b-236">Например, кнопка Вставить может быть определена следующим образом:</span><span class="sxs-lookup"><span data-stu-id="aae0b-236">For example, a Paste button can be defined as:</span></span>


```
#define ID_PASTE 100
```



<span data-ttu-id="aae0b-237">Когда пользователь нажимает кнопку, панель инструментов отправляет родительскому окну [**\_ команду WM**](/windows/desktop/menurc/wm-command) или сообщение [**WM \_ Notify**](wm-notify.md) , которая содержит идентификатор команды.</span><span class="sxs-lookup"><span data-stu-id="aae0b-237">When the user selects a button, the toolbar sends the parent window a [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) or [**WM\_NOTIFY**](wm-notify.md) message that includes the command identifier of the button.</span></span> <span data-ttu-id="aae0b-238">Родительское окно проверяет идентификатор команды и выполняет команду, связанную с кнопкой.</span><span class="sxs-lookup"><span data-stu-id="aae0b-238">The parent window examines the command identifier and carries out the command associated with the button.</span></span> <span data-ttu-id="aae0b-239">Сведения о том, когда элементы управления отправляют **\_ Командные сообщения WM** и когда отправляют **\_ уведомления WM**, см. в разделе "Примечания" документации [**WM \_ Notify**](wm-notify.md) .</span><span class="sxs-lookup"><span data-stu-id="aae0b-239">For information about when controls send **WM\_COMMAND** messages and when they send **WM\_NOTIFY**, see the Remarks section of the [**WM\_NOTIFY**](wm-notify.md) documentation.</span></span>

### <a name="button-size-and-position"></a><span data-ttu-id="aae0b-240">Размер и расположение кнопки</span><span class="sxs-lookup"><span data-stu-id="aae0b-240">Button Size and Position</span></span>

<span data-ttu-id="aae0b-241">Панель инструментов отслеживает свои кнопки путем назначения каждой кнопки индекса позиции.</span><span class="sxs-lookup"><span data-stu-id="aae0b-241">A toolbar keeps track of its buttons by assigning each button a position index.</span></span> <span data-ttu-id="aae0b-242">Индекс отсчитывается от нуля; Это значит, что крайняя левая кнопка имеет индекс 0, кнопка Next справа имеет индекс 1 и т. д.</span><span class="sxs-lookup"><span data-stu-id="aae0b-242">The index is zero-based; that is, the leftmost button has an index of 0, the next button to the right has an index of 1, and so on.</span></span> <span data-ttu-id="aae0b-243">Приложение должно указывать индекс кнопки при отправке сообщений для получения сведений о кнопке или задании атрибутов кнопки.</span><span class="sxs-lookup"><span data-stu-id="aae0b-243">An application must specify the index of a button when sending messages to retrieve information about the button or to set the button's attributes.</span></span>

<span data-ttu-id="aae0b-244">Панель инструментов обновляет индексы позиций по мере вставки и удаления кнопок.</span><span class="sxs-lookup"><span data-stu-id="aae0b-244">A toolbar updates the position indexes as buttons are inserted and removed.</span></span> <span data-ttu-id="aae0b-245">Приложение может получить индекс текущей позиции кнопки с помощью сообщения [**\_ коммандтоиндекс ТБ**](tb-commandtoindex.md) .</span><span class="sxs-lookup"><span data-stu-id="aae0b-245">An application can retrieve the current position index of a button by using the [**TB\_COMMANDTOINDEX**](tb-commandtoindex.md) message.</span></span> <span data-ttu-id="aae0b-246">В сообщении указывается идентификатор команды для кнопки, а в окне панели инструментов используется идентификатор для нахождение кнопки и возврата индекса позиции.</span><span class="sxs-lookup"><span data-stu-id="aae0b-246">The message specifies the command identifier of a button, and the toolbar window uses the identifier to locate the button and return its position index.</span></span>

<span data-ttu-id="aae0b-247">Все кнопки на панели инструментов имеют одинаковый размер.</span><span class="sxs-lookup"><span data-stu-id="aae0b-247">All buttons in a toolbar are the same size.</span></span> <span data-ttu-id="aae0b-248">Функция [**креатетулбарекс**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex) требует задать начальный размер кнопок при создании панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-248">The [**CreateToolbarEx**](/windows/desktop/api/Commctrl/nf-commctrl-createtoolbarex) function requires you to set the initial size of the buttons when you create the toolbar.</span></span> <span data-ttu-id="aae0b-249">При использовании функции [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) начальным размером присваивается размер по умолчанию в 24 – 22 пикселях.</span><span class="sxs-lookup"><span data-stu-id="aae0b-249">When you use the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function, the initial size is set to the default dimensions of 24 by 22 pixels.</span></span> <span data-ttu-id="aae0b-250">Можно использовать сообщение [**\_ Сетбуттонсизе размером ТБ**](tb-setbuttonsize.md) , чтобы изменить размер кнопки, но это необходимо сделать перед добавлением кнопок на панель инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-250">You can use the [**TB\_SETBUTTONSIZE**](tb-setbuttonsize.md) message to change the button size, but you must do so before adding any buttons to the toolbar.</span></span> <span data-ttu-id="aae0b-251">Сообщение [**\_ Жетитемрект размером ТБ**](tb-getitemrect.md) получает текущие размеры кнопок.</span><span class="sxs-lookup"><span data-stu-id="aae0b-251">The [**TB\_GETITEMRECT**](tb-getitemrect.md) message retrieves the current dimensions of the buttons.</span></span>

<span data-ttu-id="aae0b-252">При добавлении строки, которая длиннее любой строки в данный момент на панели инструментов, панель инструментов автоматически сбрасывает ширину своих кнопок.</span><span class="sxs-lookup"><span data-stu-id="aae0b-252">When you add a string that is longer than any string currently in the toolbar, the toolbar automatically resets the width of its buttons.</span></span> <span data-ttu-id="aae0b-253">Ширина задается для размещения самой длинной строки на панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-253">The width is set to accommodate the longest string in the toolbar.</span></span>

## <a name="enabling-customization"></a><span data-ttu-id="aae0b-254">Включение настройки</span><span class="sxs-lookup"><span data-stu-id="aae0b-254">Enabling Customization</span></span>

<span data-ttu-id="aae0b-255">На панели инструментов есть встроенные функции настройки, которые можно сделать доступными для пользователя, предоставив панели инструментов [**\_ Настраиваемый**](common-control-styles.md) стиль Common Control (CCS).</span><span class="sxs-lookup"><span data-stu-id="aae0b-255">A toolbar has built-in customization features that you can make available to the user by giving the toolbar the [**CCS\_ADJUSTABLE**](common-control-styles.md) common control style.</span></span> <span data-ttu-id="aae0b-256">Функции настройки позволяют пользователю перетащить кнопку на новую позицию или удалить ее, перетащив с панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-256">The customization features allow the user to drag a button to a new position or to remove a button by dragging it off the toolbar.</span></span> <span data-ttu-id="aae0b-257">Кроме того, пользователь может дважды щелкнуть панель инструментов, чтобы открыть диалоговое окно Настройка панели инструментов, которое позволяет пользователю добавить, удалить и переупорядочить кнопки панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-257">In addition, the user can double-click the toolbar to display the Customize Toolbar dialog box, which allows the user to add, delete, and rearrange toolbar buttons.</span></span> <span data-ttu-id="aae0b-258">Чтобы открыть диалоговое окно, используйте сообщение [**\_ CUSTOMIZE (ТБ**](tb-customize.md) ) для настройки.</span><span class="sxs-lookup"><span data-stu-id="aae0b-258">To display the dialog box, use the [**TB\_CUSTOMIZE**](tb-customize.md) message.</span></span> <span data-ttu-id="aae0b-259">Приложение определяет, доступны ли функции настройки пользователю, и определяет область, в которой пользователь может настраивать панель инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-259">An application determines whether the customization features are available to the user and controls the extent to which the user can customize the toolbar.</span></span>

<span data-ttu-id="aae0b-260">В рамках процесса настройки приложениям часто приходится сохранять и восстанавливать состояние панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-260">As part of the customization process, applications often need to save and restore a toolbar's state.</span></span> <span data-ttu-id="aae0b-261">Например, многие приложения сохраняют состояние панели инструментов до того, как пользователь начнет настраивать панель инструментов в случае, когда пользователь позже захочет восстановить исходное состояние панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-261">For instance, many applications store the toolbar state before the user begins customizing the toolbar in case the user later wants to restore the toolbar to its original state.</span></span> <span data-ttu-id="aae0b-262">Элемент управления ToolBar не сохраняет запись о состоянии преднастройки автоматически.</span><span class="sxs-lookup"><span data-stu-id="aae0b-262">The toolbar control does not automatically keep a record of its precustomization state.</span></span> <span data-ttu-id="aae0b-263">Приложение должно сохранить состояние панели инструментов, чтобы восстановить ее.</span><span class="sxs-lookup"><span data-stu-id="aae0b-263">Your application must save the toolbar state in order to restore it.</span></span> <span data-ttu-id="aae0b-264">Дополнительные сведения см. [в разделе Использование элементов управления ToolBar](using-toolbar-controls.md).</span><span class="sxs-lookup"><span data-stu-id="aae0b-264">For more information, see [Using Toolbar Controls](using-toolbar-controls.md).</span></span>

## <a name="enabling-hot-tracking"></a><span data-ttu-id="aae0b-265">Включение оперативного отслеживания</span><span class="sxs-lookup"><span data-stu-id="aae0b-265">Enabling Hot-tracking</span></span>

<span data-ttu-id="aae0b-266">«Горячее» отслеживание означает, что при перемещении указателя над элементом внешний вид кнопки изменяется.</span><span class="sxs-lookup"><span data-stu-id="aae0b-266">Hot-tracking means that when the pointer moves over an item, the button's appearance changes.</span></span> <span data-ttu-id="aae0b-267">При включении стилей оформления панели инструментов по умолчанию поддерживают функцию оперативного отслеживания.</span><span class="sxs-lookup"><span data-stu-id="aae0b-267">When visual styles are enabled, toolbars support hot-tracking by default.</span></span> <span data-ttu-id="aae0b-268">В противном случае, только элементы управления панели инструментов, созданные с помощью [**\_ плоского стиля тбстиле**](toolbar-control-and-button-styles.md) , поддерживают горячее отслеживание.</span><span class="sxs-lookup"><span data-stu-id="aae0b-268">Otherwise, only toolbar controls created with the [**TBSTYLE\_FLAT**](toolbar-control-and-button-styles.md) style support hot-tracking.</span></span> <span data-ttu-id="aae0b-269">Можно использовать другие стили окна в сочетании с **тбстиле \_ Flat** для создания панелей инструментов, обеспечивающих возможность оперативного отслеживания, но имеющих разный вид на плоской панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="aae0b-269">You can use other window styles in combination with **TBSTYLE\_FLAT** to produce toolbars that enable hot-tracking but have a different appearance from a flat toolbar.</span></span> <span data-ttu-id="aae0b-270">Дополнительные сведения см. [в разделе Использование элементов управления ToolBar](using-toolbar-controls.md).</span><span class="sxs-lookup"><span data-stu-id="aae0b-270">For more information, see [Using Toolbar Controls](using-toolbar-controls.md).</span></span>

 

 