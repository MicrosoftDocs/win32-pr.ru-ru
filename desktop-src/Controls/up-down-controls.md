---
title: Сведения об элементах управления Up-Down
description: Элемент управления "вверх-вниз" — это пара кнопок со стрелками, которые пользователь может щелкнуть для увеличения или уменьшения значения, например, для прокрутки или числа, отображаемого в сопровождающем элементе управления (называемом дружественным окном).
ms.assetid: ae2c0283-9cad-40d1-b8a6-a90484a95f56
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2cc8dad15a8254b138cae4175cc16b1ef3111745
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "103794088"
---
# <a name="about-up-down-controls"></a><span data-ttu-id="baeb9-103">Сведения об элементах управления Up-Down</span><span class="sxs-lookup"><span data-stu-id="baeb9-103">About Up-Down Controls</span></span>

<span data-ttu-id="baeb9-104">Элемент управления "вверх-вниз" — это пара кнопок со стрелками, которые пользователь может щелкнуть для увеличения или уменьшения значения, например, для прокрутки или числа, отображаемого в сопровождающем элементе управления (называемом дружественным окном).</span><span class="sxs-lookup"><span data-stu-id="baeb9-104">An up-down control is a pair of arrow buttons that the user can click to increment or decrement a value, such as a scroll position or a number displayed in a companion control (called a buddy window).</span></span>

<span data-ttu-id="baeb9-105">Для пользователя элемент управления "вверх-вниз" и его окно часто выглядят как один элемент управления.</span><span class="sxs-lookup"><span data-stu-id="baeb9-105">To the user, an up-down control and its buddy window often look like a single control.</span></span> <span data-ttu-id="baeb9-106">Можно указать, что элемент управления "вверх-вниз" автоматически располагается рядом с окном собеседника и автоматически задает заголовок окна собеседника в его текущем положении.</span><span class="sxs-lookup"><span data-stu-id="baeb9-106">You can specify that an up-down control automatically position itself next to its buddy window and that it automatically set the caption of the buddy window to its current position.</span></span> <span data-ttu-id="baeb9-107">Например, можно использовать элемент управления "вверх-вниз" с элементом управления "поле ввода", чтобы запросить у пользователя числовые входные данные.</span><span class="sxs-lookup"><span data-stu-id="baeb9-107">For example, you can use an up-down control with an edit control to prompt the user for numeric input.</span></span> <span data-ttu-id="baeb9-108">На следующем рисунке показан элемент управления "вверх/вниз" с элементом управления "поле ввода" в качестве своего окна собеседника — сочетание, которое иногда называют элементом управления "Счетчик".</span><span class="sxs-lookup"><span data-stu-id="baeb9-108">The following illustration shows an up-down control with an edit control as its buddy window, a combination that is sometimes referred to as a spinner control.</span></span>

![снимок экрана с коротким, широким прямоугольным элементом управления со стрелками вверх и вниз на правой границе](images/updown.jpg)

<span data-ttu-id="baeb9-110">В этом разделе рассматриваются следующие темы.</span><span class="sxs-lookup"><span data-stu-id="baeb9-110">The following topics are discussed in this section.</span></span>

-   [<span data-ttu-id="baeb9-111">Стили элементов управления "вверх/вниз"</span><span class="sxs-lookup"><span data-stu-id="baeb9-111">Up-Down Control Styles</span></span>](#up-down-control-styles)
-   [<span data-ttu-id="baeb9-112">Позиционирование и ускорение</span><span class="sxs-lookup"><span data-stu-id="baeb9-112">Position and Acceleration</span></span>](#position-and-acceleration)
-   [<span data-ttu-id="baeb9-113">Up-Down по умолчанию управляет обработкой сообщений</span><span class="sxs-lookup"><span data-stu-id="baeb9-113">Default Up-Down Controls Message Processing</span></span>](#default-up-down-controls-message-processing)

## <a name="up-down-control-styles"></a><span data-ttu-id="baeb9-114">Стили элементов управления Up-Down</span><span class="sxs-lookup"><span data-stu-id="baeb9-114">Up-Down Control Styles</span></span>

<span data-ttu-id="baeb9-115">С помощью стилей окон можно управлять характеристиками элемента управления "вверх/вниз", например, как он позиционируется относительно окна собеседника, определяет, задается ли текст его собеседника и обрабатывает ли он клавиши Стрелка вверх и стрелка вниз.</span><span class="sxs-lookup"><span data-stu-id="baeb9-115">Using window styles, you can manipulate characteristics of an up-down control, such as how it positions itself relative to its buddy window, whether it sets the text of its buddy window, and whether it processes the UP ARROW and DOWN ARROW keys.</span></span>

<span data-ttu-id="baeb9-116">Элемент управления "вверх-вниз" с стилем [**доменов обновления \_ Алигнлефт**](up-down-control-styles.md) или [**доменов обновления \_ алигнригхт**](up-down-control-styles.md) соответствует левому или правому краю окна собеседника.</span><span class="sxs-lookup"><span data-stu-id="baeb9-116">An up-down control with the [**UDS\_ALIGNLEFT**](up-down-control-styles.md) or [**UDS\_ALIGNRIGHT**](up-down-control-styles.md) style aligns with the left or right edge of its buddy window.</span></span> <span data-ttu-id="baeb9-117">Ширина окна собеседника уменьшается в соответствии с шириной элемента управления "вверх-вниз".</span><span class="sxs-lookup"><span data-stu-id="baeb9-117">The width of the buddy window is decreased to accommodate the width of the up-down control.</span></span>

<span data-ttu-id="baeb9-118">Элемент управления "вверх-вниз" с стилем [**доменов обновления \_ сетбуддинт**](up-down-control-styles.md) устанавливает заголовок его окна при каждом изменении текущей должности.</span><span class="sxs-lookup"><span data-stu-id="baeb9-118">An up-down control with the [**UDS\_SETBUDDYINT**](up-down-control-styles.md) style sets the caption of its buddy window whenever the current position changes.</span></span> <span data-ttu-id="baeb9-119">Элемент управления вставляет разделитель тысяч между всеми тремя цифрами десятичной строки, если не [**указан \_ стиль доменов обновления**](up-down-control-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="baeb9-119">The control inserts a thousands separator between every three digits of a decimal string unless the [**UDS\_NOTHOUSANDS**](up-down-control-styles.md) style is specified.</span></span> <span data-ttu-id="baeb9-120">Если окно «собеседник» является списком, то элемент управления "вверх-вниз" задает его текущий выбор, а не его заголовок.</span><span class="sxs-lookup"><span data-stu-id="baeb9-120">If the buddy window is a list box, an up-down control sets its current selection instead of its caption.</span></span>

<span data-ttu-id="baeb9-121">Можно указать стиль [**доменов обновления \_ арровкэйс**](up-down-control-styles.md) , чтобы предоставить интерфейс клавиатуры для элемента управления "вверх/вниз".</span><span class="sxs-lookup"><span data-stu-id="baeb9-121">You can specify the [**UDS\_ARROWKEYS**](up-down-control-styles.md) style to provide a keyboard interface for an up-down control.</span></span> <span data-ttu-id="baeb9-122">Если этот стиль указан, элемент управления обрабатывает клавиши со стрелками вверх и вниз.</span><span class="sxs-lookup"><span data-stu-id="baeb9-122">If this style is specified, the control processes the up and down arrow keys.</span></span> <span data-ttu-id="baeb9-123">Элемент управления также подклассают окно, чтобы он мог обработать эти ключи, когда в окне собеседника находится фокус.</span><span class="sxs-lookup"><span data-stu-id="baeb9-123">The control also subclasses the buddy window so that it can process these keys when the buddy window has the focus.</span></span>

<span data-ttu-id="baeb9-124">Если для горизонтальной прокрутки используется элемент управления "вверх-вниз", можно указать стиль [**доменов обновления \_ горизонтали**](up-down-control-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="baeb9-124">If you use an up-down control for horizontal scrolling, you can specify the [**UDS\_HORZ**](up-down-control-styles.md) style.</span></span> <span data-ttu-id="baeb9-125">Этот стиль приводит к тому, что стрелки вверх-вниз элемента управления указываются слева и справа, а не вверх и вниз.</span><span class="sxs-lookup"><span data-stu-id="baeb9-125">This style causes the up-down control's arrows to point left and right instead of up and down.</span></span>

<span data-ttu-id="baeb9-126">По умолчанию Текущая позиции не изменяется, если пользователь пытается увеличить или уменьшить значение, выходящее за пределы максимального или минимального значения.</span><span class="sxs-lookup"><span data-stu-id="baeb9-126">By default, the current position does not change if the user attempts to increment it or decrement it beyond the maximum or minimum value.</span></span> <span data-ttu-id="baeb9-127">Это поведение можно изменить с помощью стиля [**\_ переноса доменов обновления**](up-down-control-styles.md) , чтобы значение "переносится" на противоположный крайний край.</span><span class="sxs-lookup"><span data-stu-id="baeb9-127">You can change this behavior by using the [**UDS\_WRAP**](up-down-control-styles.md) style, so the position "wraps" to the opposite extreme.</span></span> <span data-ttu-id="baeb9-128">Например, приращение после верхнего предела переносит обратно к нижнему пределу.</span><span class="sxs-lookup"><span data-stu-id="baeb9-128">For example, incrementing past the upper limit wraps the position back to the lower limit.</span></span>

## <a name="position-and-acceleration"></a><span data-ttu-id="baeb9-129">Позиционирование и ускорение</span><span class="sxs-lookup"><span data-stu-id="baeb9-129">Position and Acceleration</span></span>

<span data-ttu-id="baeb9-130">После создания элемента управления "вверх-вниз" можно изменить текущую, минимальную и максимальную координаты элемента управления, отправив сообщения.</span><span class="sxs-lookup"><span data-stu-id="baeb9-130">After an up-down control is created, you can change the control's current position, minimum position, and maximum position by sending messages.</span></span> <span data-ttu-id="baeb9-131">Кроме того, можно изменить базу системы счисления, используемую для вывода текущей позиции в окне собеседника, и скорость, с которой текущая позиции изменяется при щелчке стрелки вверх или вниз.</span><span class="sxs-lookup"><span data-stu-id="baeb9-131">You can also change the radix base used to display the current position in the buddy window and the rate at which the current position changes when the up or down arrow is clicked.</span></span>

<span data-ttu-id="baeb9-132">Чтобы получить текущую точку элемента управления "вверх-вниз", используйте сообщение [**\_ жетпос UDM**](udm-getpos.md) .</span><span class="sxs-lookup"><span data-stu-id="baeb9-132">To retrieve the current position of an up-down control, use the [**UDM\_GETPOS**](udm-getpos.md) message.</span></span> <span data-ttu-id="baeb9-133">Для элемента управления "вверх/вниз" с дружественным окном текущее расположение является числом в заголовке окна собеседника.</span><span class="sxs-lookup"><span data-stu-id="baeb9-133">For an up-down control with a buddy window, the current position is the number in the buddy window's caption.</span></span> <span data-ttu-id="baeb9-134">Так как заголовок мог быть изменен (например, пользователь мог изменить текст элемента управления "поле ввода"), элемент управления "вверх-вниз" получает текущий заголовок и обновляет его текущую точку соответственно.</span><span class="sxs-lookup"><span data-stu-id="baeb9-134">Because the caption may have changed (for example, the user may have edited the text of an edit control), the up-down control retrieves the current caption and updates its current position accordingly.</span></span>

<span data-ttu-id="baeb9-135">Заголовок окна собеседника может быть десятичной или шестнадцатеричной строкой в зависимости от основания системы счисления (то есть с основанием 10 или 16) элемента управления "вверх/вниз".</span><span class="sxs-lookup"><span data-stu-id="baeb9-135">The buddy window's caption may be either a decimal or hexadecimal string, depending on the radix base (that is, either base 10 or 16) of the up-down control.</span></span> <span data-ttu-id="baeb9-136">Вы можете задать основание системы счисления с помощью сообщения [**\_ сетбасе UDM**](udm-setbase.md) и получить основание системы счисления с помощью сообщения polybase [**UDM \_**](udm-getbase.md) .</span><span class="sxs-lookup"><span data-stu-id="baeb9-136">You can set the radix base by using the [**UDM\_SETBASE**](udm-setbase.md) message and retrieve the radix base by using the [**UDM\_GETBASE**](udm-getbase.md) message.</span></span>

<span data-ttu-id="baeb9-137">В [**сообщении \_ сетпос UDM**](udm-setpos.md) задается текущее расположение дружественного окна.</span><span class="sxs-lookup"><span data-stu-id="baeb9-137">The [**UDM\_SETPOS**](udm-setpos.md) message sets the current position of a buddy window.</span></span> <span data-ttu-id="baeb9-138">Обратите внимание, что в отличие от полосы прокрутки, элемент управления "вверх-вниз" автоматически меняет свое текущее расположение при нажатии клавиш со стрелками вверх и вниз.</span><span class="sxs-lookup"><span data-stu-id="baeb9-138">Note that unlike a scroll bar, an up-down control automatically changes its current position when the up and down arrows are clicked.</span></span> <span data-ttu-id="baeb9-139">Поэтому приложению не нужно задавать текущую точку при обработке сообщения [**WM \_ VSCROLL**](wm-vscroll.md) или [**WM \_ HSCROLL**](wm-hscroll.md) .</span><span class="sxs-lookup"><span data-stu-id="baeb9-139">An application, therefore, does not need to set the current position when processing the [**WM\_VSCROLL**](wm-vscroll.md) or [**WM\_HSCROLL**](wm-hscroll.md) message.</span></span>

<span data-ttu-id="baeb9-140">Минимальное и максимальное положение элемента управления "вверх/вниз" можно изменить с помощью сообщения [**\_ SETRANGE UDM**](udm-setrange.md) .</span><span class="sxs-lookup"><span data-stu-id="baeb9-140">You can change the minimum and maximum positions of an up-down control by using the [**UDM\_SETRANGE**](udm-setrange.md) message.</span></span> <span data-ttu-id="baeb9-141">Максимальное значение может быть меньше минимального, а в этом случае при нажатии кнопки со стрелкой вверх текущее расположение уменьшается.</span><span class="sxs-lookup"><span data-stu-id="baeb9-141">The maximum position may be less than the minimum, and in that case clicking the up arrow button decreases the current position.</span></span> <span data-ttu-id="baeb9-142">Чтобы поместить его другим способом, можно перейти к максимальному положению.</span><span class="sxs-lookup"><span data-stu-id="baeb9-142">To put it another way, up means moving toward the maximum position.</span></span> <span data-ttu-id="baeb9-143">Чтобы получить минимальные и максимальные позиции для элемента управления "вверх/вниз", [**Используйте \_ сообщение "многомерная модель UDM**](udm-getrange.md) ".</span><span class="sxs-lookup"><span data-stu-id="baeb9-143">To retrieve the minimum and maximum positions for an up-down control, use the [**UDM\_GETRANGE**](udm-getrange.md) message.</span></span>

<span data-ttu-id="baeb9-144">Можно управлять частотой изменения позиции, когда пользователь удерживает кнопку со стрелкой, настроив ускоренный элемент управления.</span><span class="sxs-lookup"><span data-stu-id="baeb9-144">You can control the rate at which the position changes when the user holds down an arrow button by setting the up-down control's acceleration.</span></span> <span data-ttu-id="baeb9-145">Ускорение определяется массивом структур [**удакцел**](/windows/desktop/api/Commctrl/ns-commctrl-udaccel) .</span><span class="sxs-lookup"><span data-stu-id="baeb9-145">The acceleration is defined by an array of [**UDACCEL**](/windows/desktop/api/Commctrl/ns-commctrl-udaccel) structures.</span></span> <span data-ttu-id="baeb9-146">Каждая структура задает интервал времени и число единиц, на которое увеличивается или уменьшается в конце этого интервала.</span><span class="sxs-lookup"><span data-stu-id="baeb9-146">Each structure specifies a time interval and the number of units by which to increment or decrement at the end of that interval.</span></span> <span data-ttu-id="baeb9-147">Чтобы задать ускорение, используйте сообщение [**\_ сетакцел UDM**](udm-setaccel.md) .</span><span class="sxs-lookup"><span data-stu-id="baeb9-147">To set the acceleration, use the [**UDM\_SETACCEL**](udm-setaccel.md) message.</span></span> <span data-ttu-id="baeb9-148">Чтобы получить сведения об ускорении, используйте сообщение необязательности [**UDM \_**](udm-getaccel.md) .</span><span class="sxs-lookup"><span data-stu-id="baeb9-148">To retrieve acceleration information, use the [**UDM\_GETACCEL**](udm-getaccel.md) message.</span></span>

## <a name="default-up-down-controls-message-processing"></a><span data-ttu-id="baeb9-149">Up-Down по умолчанию управляет обработкой сообщений</span><span class="sxs-lookup"><span data-stu-id="baeb9-149">Default Up-Down Controls Message Processing</span></span>

<span data-ttu-id="baeb9-150">В этом разделе описаны стандартные сообщения Windows, обрабатываемые элементом управления "вверх/вниз".</span><span class="sxs-lookup"><span data-stu-id="baeb9-150">This section describes the standard Windows messages processed by an up-down control.</span></span>



| <span data-ttu-id="baeb9-151">Сообщение</span><span class="sxs-lookup"><span data-stu-id="baeb9-151">Message</span></span>                                        | <span data-ttu-id="baeb9-152">Обработка выполнена</span><span class="sxs-lookup"><span data-stu-id="baeb9-152">Processing performed</span></span>                                                                                                                                                                                         |
|------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="baeb9-153">**\_Создание WM**</span><span class="sxs-lookup"><span data-stu-id="baeb9-153">**WM\_CREATE**</span></span>](/windows/desktop/winmsg/wm-create)             | <span data-ttu-id="baeb9-154">Выделяет и инициализирует закрытую структуру данных и сохраняет ее адрес как данные окна.</span><span class="sxs-lookup"><span data-stu-id="baeb9-154">Allocates and initializes a private data structure and saves its address as window data.</span></span>                                                                                                                     |
| [<span data-ttu-id="baeb9-155">**WM \_ destroy**</span><span class="sxs-lookup"><span data-stu-id="baeb9-155">**WM\_DESTROY**</span></span>](/windows/desktop/winmsg/wm-destroy)           | <span data-ttu-id="baeb9-156">Освобождает данные, выделенные во время обработки с [**\_ созданием WM**](/windows/desktop/winmsg/wm-create) .</span><span class="sxs-lookup"><span data-stu-id="baeb9-156">Frees data allocated during [**WM\_CREATE**](/windows/desktop/winmsg/wm-create) processing.</span></span>                                                                                                                                   |
| [<span data-ttu-id="baeb9-157">**\_Включение WM**</span><span class="sxs-lookup"><span data-stu-id="baeb9-157">**WM\_ENABLE**</span></span>](/windows/desktop/winmsg/wm-enable)             | <span data-ttu-id="baeb9-158">Делает недействительным окно.</span><span class="sxs-lookup"><span data-stu-id="baeb9-158">Invalidates the window.</span></span>                                                                                                                                                                                      |
| [<span data-ttu-id="baeb9-159">**WM \_ KeyDown**</span><span class="sxs-lookup"><span data-stu-id="baeb9-159">**WM\_KEYDOWN**</span></span>](/windows/desktop/inputdev/wm-keydown)         | <span data-ttu-id="baeb9-160">Изменяет текущую точку в случае нажатия клавиши со стрелкой вверх или стрелки вниз.</span><span class="sxs-lookup"><span data-stu-id="baeb9-160">Changes the current position in the case of an UP ARROW or DOWN ARROW key.</span></span>                                                                                                                                   |
| [<span data-ttu-id="baeb9-161">**WM \_ KEYUP**</span><span class="sxs-lookup"><span data-stu-id="baeb9-161">**WM\_KEYUP**</span></span>](/windows/desktop/inputdev/wm-keyup)             | <span data-ttu-id="baeb9-162">Завершает изменение расположения.</span><span class="sxs-lookup"><span data-stu-id="baeb9-162">Completes the position change.</span></span>                                                                                                                                                                               |
| [<span data-ttu-id="baeb9-163">**WM \_ лбуттондовн**</span><span class="sxs-lookup"><span data-stu-id="baeb9-163">**WM\_LBUTTONDOWN**</span></span>](/windows/desktop/inputdev/wm-lbuttondown) | <span data-ttu-id="baeb9-164">Захватывает мышь.</span><span class="sxs-lookup"><span data-stu-id="baeb9-164">Captures the mouse.</span></span> <span data-ttu-id="baeb9-165">Если окно собеседника является полем редактирования или списком, оно устанавливает фокус на окно собеседника.</span><span class="sxs-lookup"><span data-stu-id="baeb9-165">If the buddy window is an edit control or list box, it sets the focus to the buddy window.</span></span> <span data-ttu-id="baeb9-166">Если мышь находится над кнопкой вверх или вниз, она начинает изменять расположение и устанавливает таймер.</span><span class="sxs-lookup"><span data-stu-id="baeb9-166">If the mouse is over the up or down button, it begins changing the position and sets a timer.</span></span> |
| [<span data-ttu-id="baeb9-167">**WM \_ лбуттонуп**</span><span class="sxs-lookup"><span data-stu-id="baeb9-167">**WM\_LBUTTONUP**</span></span>](/windows/desktop/inputdev/wm-lbuttonup)     | <span data-ttu-id="baeb9-168">Завершает изменение расположения и отпускает захват мыши, если элемент управления "вверх-вниз" захватил мышь.</span><span class="sxs-lookup"><span data-stu-id="baeb9-168">Completes the position change and releases the mouse capture if the up-down control has captured the mouse.</span></span> <span data-ttu-id="baeb9-169">Если окно собеседника является элементом управления редактированием, он выделяет весь текст в элементе управления Edit.</span><span class="sxs-lookup"><span data-stu-id="baeb9-169">If the buddy window is an edit control, it selects all the text in the edit control.</span></span>             |
| [<span data-ttu-id="baeb9-170">**WM \_ Paint**</span><span class="sxs-lookup"><span data-stu-id="baeb9-170">**WM\_PAINT**</span></span>](/windows/desktop/gdi/wm-paint)                  | <span data-ttu-id="baeb9-171">Закрашивает элемент управления "вверх-вниз".</span><span class="sxs-lookup"><span data-stu-id="baeb9-171">Paints the up-down control.</span></span> <span data-ttu-id="baeb9-172">Если параметр *wParam* не равен null, то элемент управления предполагает, что значение является **HDC** и рисует его с помощью контекста устройства.</span><span class="sxs-lookup"><span data-stu-id="baeb9-172">If the *wParam* parameter is non-NULL, the control assumes that the value is an **HDC** and paints using that device context.</span></span>                                                    |
| [<span data-ttu-id="baeb9-173">**\_таймер WM**</span><span class="sxs-lookup"><span data-stu-id="baeb9-173">**WM\_TIMER**</span></span>](/windows/desktop/winmsg/wm-timer)               | <span data-ttu-id="baeb9-174">Изменяет текущую точку, если мышь удерживается над кнопкой, и пройдет достаточный интервал.</span><span class="sxs-lookup"><span data-stu-id="baeb9-174">Changes the current position if the mouse is being held down over a button and a sufficient interval has elapsed.</span></span>                                                                                            |



 

 

 