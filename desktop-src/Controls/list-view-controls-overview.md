---
title: Сведения об элементах управления List-View
description: Элемент управления "представление списка" — это окно, в котором отображается коллекция элементов.
ms.assetid: 163f7778-690c-4166-b0c5-c7be1a03ae98
ms.topic: article
ms.date: 05/31/2018
ms.custom: project-verbatim
ms.openlocfilehash: 592684378b4264319d790b1e2e05eb9e0ae37f28
ms.sourcegitcommit: 0f7a8198bacd5493ab1e78a9583c7a3578794765
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/25/2021
ms.locfileid: "110424334"
---
# <a name="about-list-view-controls"></a><span data-ttu-id="e3874-103">Сведения об элементах управления List-View</span><span class="sxs-lookup"><span data-stu-id="e3874-103">About List-View Controls</span></span>

<span data-ttu-id="e3874-104">См. [пример виртуального элемента управления ListView](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/winui/controls/common/vlistvw).</span><span class="sxs-lookup"><span data-stu-id="e3874-104">See the [Virtual listview control sample](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/winui/controls/common/vlistvw).</span></span>

<span data-ttu-id="e3874-105">Элемент управления "представление списка" — это окно, в котором отображается коллекция элементов.</span><span class="sxs-lookup"><span data-stu-id="e3874-105">A list-view control is a window that displays a collection of items.</span></span> <span data-ttu-id="e3874-106">Элементы управления "список-представление" предоставляют несколько способов упорядочивания и отображения элементов, а гораздо более гибкие, [чем простые списки](list-boxes.md).</span><span class="sxs-lookup"><span data-stu-id="e3874-106">List-view controls provide several ways to arrange and display items and are much more flexible than simple [List Boxes](list-boxes.md).</span></span> <span data-ttu-id="e3874-107">Например, дополнительные сведения о каждом элементе могут отображаться в столбцах справа от значка и метки.</span><span class="sxs-lookup"><span data-stu-id="e3874-107">For example, additional information about each item can be displayed in columns to the right of the icon and label.</span></span>

-   [<span data-ttu-id="e3874-108">Просмотр стилей и представлений в виде списка</span><span class="sxs-lookup"><span data-stu-id="e3874-108">List-View Styles and Views</span></span>](#list-view-styles-and-views)
    -   [<span data-ttu-id="e3874-109">Расширенные стили List-View</span><span class="sxs-lookup"><span data-stu-id="e3874-109">Extended List-View Styles</span></span>](#extended-list-view-styles)
-   [<span data-ttu-id="e3874-110">Стиль виртуальной List-View</span><span class="sxs-lookup"><span data-stu-id="e3874-110">Virtual List-View Style</span></span>](#virtual-list-view-style)
    -   [<span data-ttu-id="e3874-111">Создание виртуального List-View элемента управления</span><span class="sxs-lookup"><span data-stu-id="e3874-111">Creating a Virtual List-View Control</span></span>](#creating-a-virtual-list-view-control)
    -   [<span data-ttu-id="e3874-112">Проблемы совместимости</span><span class="sxs-lookup"><span data-stu-id="e3874-112">Compatibility Issues</span></span>](#compatibility-issues)
    -   [<span data-ttu-id="e3874-113">Обработка кодов уведомлений элемента управления Virtual List-View</span><span class="sxs-lookup"><span data-stu-id="e3874-113">Handling Virtual List-View Control Notification Codes</span></span>](#handling-virtual-list-view-control-notification-codes)
    -   [<span data-ttu-id="e3874-114">Управление кэшем</span><span class="sxs-lookup"><span data-stu-id="e3874-114">Cache Management</span></span>](#cache-management)
-   [<span data-ttu-id="e3874-115">Просмотр рабочих областей списка</span><span class="sxs-lookup"><span data-stu-id="e3874-115">List-View Working Areas</span></span>](#list-view-working-areas)
-   [<span data-ttu-id="e3874-116">Списки изображений в виде списка</span><span class="sxs-lookup"><span data-stu-id="e3874-116">List-View Image Lists</span></span>](#list-view-image-lists)
-   [<span data-ttu-id="e3874-117">Элементы представления списка и подэлементы</span><span class="sxs-lookup"><span data-stu-id="e3874-117">List-View Items and Subitems</span></span>](#list-view-items-and-subitems)
    -   [<span data-ttu-id="e3874-118">Список состояний элементов представления списка</span><span class="sxs-lookup"><span data-stu-id="e3874-118">List-View Item States</span></span>](#list-view-item-states)
    -   [<span data-ttu-id="e3874-119">Элементы обратного вызова и маска обратного вызова</span><span class="sxs-lookup"><span data-stu-id="e3874-119">Callback Items and the Callback Mask</span></span>](#callback-items-and-the-callback-mask)
    -   [<span data-ttu-id="e3874-120">Позиция элемента в представлении списка</span><span class="sxs-lookup"><span data-stu-id="e3874-120">List-View Item Position</span></span>](#list-view-item-position)
    -   [<span data-ttu-id="e3874-121">Упорядочение, сортировка и поиск элементов</span><span class="sxs-lookup"><span data-stu-id="e3874-121">Arranging, Sorting, and Finding Items</span></span>](#arranging-sorting-and-finding-items)
-   [<span data-ttu-id="e3874-122">Столбцы списка</span><span class="sxs-lookup"><span data-stu-id="e3874-122">List-View Columns</span></span>](#list-view-columns)
-   [<span data-ttu-id="e3874-123">Расположение прокрутки в представлении списка</span><span class="sxs-lookup"><span data-stu-id="e3874-123">List-View Scroll Position</span></span>](#list-view-scroll-position)
-   [<span data-ttu-id="e3874-124">Изменение меток в виде списка</span><span class="sxs-lookup"><span data-stu-id="e3874-124">List-View Label Editing</span></span>](#list-view-label-editing)
-   [<span data-ttu-id="e3874-125">Цвета представления списка</span><span class="sxs-lookup"><span data-stu-id="e3874-125">List-View Colors</span></span>](#list-view-colors)
-   [<span data-ttu-id="e3874-126">Упорядочение элементов списка по группам</span><span class="sxs-lookup"><span data-stu-id="e3874-126">Arranging List Items by Group</span></span>](#arranging-list-items-by-group)
-   [<span data-ttu-id="e3874-127">Метки вставки</span><span class="sxs-lookup"><span data-stu-id="e3874-127">Insertion Marks</span></span>](#insertion-marks)

## <a name="list-view-styles-and-views"></a><span data-ttu-id="e3874-128">Стили и представления List-View</span><span class="sxs-lookup"><span data-stu-id="e3874-128">List-View Styles and Views</span></span>

<span data-ttu-id="e3874-129">Элементы управления "представление списка" могут отображать элементы в пяти различных представлениях.</span><span class="sxs-lookup"><span data-stu-id="e3874-129">List-view controls can display items in five different views.</span></span> <span data-ttu-id="e3874-130">Стиль окна элемента управления задает представление по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="e3874-130">The control's window style specifies the default view.</span></span> <span data-ttu-id="e3874-131">Дополнительные стили окна определяют выравнивание элементов и функций для конкретного элемента управления.</span><span class="sxs-lookup"><span data-stu-id="e3874-131">Additional window styles specify the alignment of items and control-specific features.</span></span> <span data-ttu-id="e3874-132">В следующей таблице описаны представления.</span><span class="sxs-lookup"><span data-stu-id="e3874-132">The following table describes the views.</span></span>



| <span data-ttu-id="e3874-133">Имя представления</span><span class="sxs-lookup"><span data-stu-id="e3874-133">View Name</span></span>             | <span data-ttu-id="e3874-134">Описание</span><span class="sxs-lookup"><span data-stu-id="e3874-134">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e3874-135">Представление значков</span><span class="sxs-lookup"><span data-stu-id="e3874-135">Icon view</span></span>             | <span data-ttu-id="e3874-136">Определяется стилем [**окна \_ значка LVS**](list-view-window-styles.md) или путем передачи **\_ \_ значка представления LV** с сообщением [**\_ сетвиев LVM**](lvm-setview.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-136">Specified by the [**LVS\_ICON**](list-view-window-styles.md) window style or by passing **LV\_VIEW\_ICON** with the [**LVM\_SETVIEW**](lvm-setview.md) message.</span></span> <span data-ttu-id="e3874-137">Каждый элемент отображается в виде полноразмерного значка с расположенной под ним меткой.</span><span class="sxs-lookup"><span data-stu-id="e3874-137">Each item appears as a full-sized icon with a label below it.</span></span> <span data-ttu-id="e3874-138">Пользователь может перетаскивать элементы в любое место в окне списка.</span><span class="sxs-lookup"><span data-stu-id="e3874-138">The user can drag the items to any location in the list-view window.</span></span>                                                                                                                                                                                                                                         |
| <span data-ttu-id="e3874-139">Небольшое представление значка</span><span class="sxs-lookup"><span data-stu-id="e3874-139">Small icon view</span></span>       | <span data-ttu-id="e3874-140">Определяется стилем окна [**LVS \_ маленькие значки**](list-view-window-styles.md) или путем передачи **представления LV \_ \_ маленькие значки** с [**LVM \_ сетвиев**](lvm-setview.md).</span><span class="sxs-lookup"><span data-stu-id="e3874-140">Specified by the [**LVS\_SMALLICON**](list-view-window-styles.md) window style or by passing **LV\_VIEW\_SMALLICON** with [**LVM\_SETVIEW**](lvm-setview.md).</span></span> <span data-ttu-id="e3874-141">Каждый элемент отображается в виде маленького значка с меткой справа от нее.</span><span class="sxs-lookup"><span data-stu-id="e3874-141">Each item appears as a small icon with the label to the right of it.</span></span> <span data-ttu-id="e3874-142">Пользователь может перетащить элементы в любое место.</span><span class="sxs-lookup"><span data-stu-id="e3874-142">The user can drag the items to any location.</span></span>                                                                                                                                                                                                                                                       |
| <span data-ttu-id="e3874-143">Представление списка</span><span class="sxs-lookup"><span data-stu-id="e3874-143">List view</span></span>             | <span data-ttu-id="e3874-144">Указывается в стиле [**окна \_ списка LVS**](list-view-window-styles.md) или путем передачи **\_ \_ списка представлений LV** с помощью [**LVM \_ сетвиев**](lvm-setview.md).</span><span class="sxs-lookup"><span data-stu-id="e3874-144">Specified by the [**LVS\_LIST**](list-view-window-styles.md) window style or by passing **LV\_VIEW\_LIST** with [**LVM\_SETVIEW**](lvm-setview.md).</span></span> <span data-ttu-id="e3874-145">Каждый элемент отображается в виде маленького значка с меткой справа от него.</span><span class="sxs-lookup"><span data-stu-id="e3874-145">Each item appears as a small icon with a label to the right of it.</span></span> <span data-ttu-id="e3874-146">Элементы размещаются в столбцах, и пользователь не может перетащить их в произвольное расположение.</span><span class="sxs-lookup"><span data-stu-id="e3874-146">Items are arranged in columns and the user cannot drag them to an arbitrary location.</span></span>                                                                                                                                                                                                                               |
| <span data-ttu-id="e3874-147">Представление отчета (сведения)</span><span class="sxs-lookup"><span data-stu-id="e3874-147">Report (details) view</span></span> | <span data-ttu-id="e3874-148">Указывается в стиле [**окна \_ отчета LVS**](list-view-window-styles.md) или путем передачи **\_ \_ сведений о представлении LV** с помощью [**LVM \_ сетвиев**](lvm-setview.md).</span><span class="sxs-lookup"><span data-stu-id="e3874-148">Specified by the [**LVS\_REPORT**](list-view-window-styles.md) window style or by passing **LV\_VIEW\_DETAILS** with [**LVM\_SETVIEW**](lvm-setview.md).</span></span> <span data-ttu-id="e3874-149">Каждый элемент отображается в отдельной строке со сведениями, упорядоченными в столбцах.</span><span class="sxs-lookup"><span data-stu-id="e3874-149">Each item appears on its own line, with information arranged in columns.</span></span> <span data-ttu-id="e3874-150">Крайний левый столбец всегда выравнивается по левому краю и содержит маленький значок и метку.</span><span class="sxs-lookup"><span data-stu-id="e3874-150">The leftmost column is always left justified and contains the small icon and label.</span></span> <span data-ttu-id="e3874-151">Последующие столбцы содержат подэлементы, указанные в приложении.</span><span class="sxs-lookup"><span data-stu-id="e3874-151">Subsequent columns contain subitems as specified by the application.</span></span> <span data-ttu-id="e3874-152">Каждый столбец имеет заголовок, если не указать также стиль окна [**LVS \_ ноколумнхеадер**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-152">Each column has a header, unless you also specify the [**LVS\_NOCOLUMNHEADER**](list-view-window-styles.md) window style.</span></span> |
| <span data-ttu-id="e3874-153">Мозаика</span><span class="sxs-lookup"><span data-stu-id="e3874-153">Tile View</span></span>             | <span data-ttu-id="e3874-154">**Версии 6 и более поздних версий.**</span><span class="sxs-lookup"><span data-stu-id="e3874-154">**Version 6 and later.**</span></span> <span data-ttu-id="e3874-155">Задается передачей **\_ \_ плитки представления LV** с помощью [**LVM \_ сетвиев**](lvm-setview.md).</span><span class="sxs-lookup"><span data-stu-id="e3874-155">Specified by passing **LV\_VIEW\_TILE** with [**LVM\_SETVIEW**](lvm-setview.md).</span></span> <span data-ttu-id="e3874-156">Каждый элемент отображается в виде полного значка с меткой одной или нескольких строк рядом с ней.</span><span class="sxs-lookup"><span data-stu-id="e3874-156">Each item appears as a full-sized icon with a label of one or more lines beside it.</span></span>                                                                                                                                                                                                                                                                                                                                                        |



 

<span data-ttu-id="e3874-157">На следующем снимке экрана используются представления для отображения различных объемов сведений о каждом из семи pets.</span><span class="sxs-lookup"><span data-stu-id="e3874-157">The following screen shots use views to show different amounts of information about each of seven pets.</span></span> <span data-ttu-id="e3874-158">В представлениях показано, как может выглядеть информация в Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="e3874-158">The views demonstrate how the information might appear on Windows Vista.</span></span> <span data-ttu-id="e3874-159">Визуальные стили для элемента управления были установлены в тему "Explorer" с помощью [**SetWindowTheme**](/windows/desktop/api/Uxtheme/nf-uxtheme-setwindowtheme).</span><span class="sxs-lookup"><span data-stu-id="e3874-159">The visual styles for the control have been set to the "Explorer" theme by using [**SetWindowTheme**](/windows/desktop/api/Uxtheme/nf-uxtheme-setwindowtheme).</span></span>

<span data-ttu-id="e3874-160">На следующем снимке экрана показано подробное представление.</span><span class="sxs-lookup"><span data-stu-id="e3874-160">The following screen shot shows the details view.</span></span>

![снимок экрана, отображающий сведения в пяти столбцах и семь строках](images/lv-detailsview.png)

<span data-ttu-id="e3874-162">На следующем снимке экрана показан вид значка.</span><span class="sxs-lookup"><span data-stu-id="e3874-162">The following screen shot shows the icon view.</span></span>

![снимок экрана, на котором показаны только названия домашних животных и значков, указывающих на виды цветов](images/lv-iconview.png)

<span data-ttu-id="e3874-164">На следующем снимке экрана показано представление списка.</span><span class="sxs-lookup"><span data-stu-id="e3874-164">The following screen shot shows the list view.</span></span>

![снимок экрана, показывающий, что для каждого домашнего животного крупного значка рядом с текстом названия домашнего животного, пород и цены](images/lv-listview.png)

<span data-ttu-id="e3874-166">На следующем снимке экрана показано мозаичное представление.</span><span class="sxs-lookup"><span data-stu-id="e3874-166">The following screen shot shows the tile view.</span></span>

![Мозаичное представление.](images/lv-tileview.png)

<span data-ttu-id="e3874-168">Тип представления можно изменить после создания элемента управления "представление списка".</span><span class="sxs-lookup"><span data-stu-id="e3874-168">You can change the view type after you create a list-view control.</span></span> <span data-ttu-id="e3874-169">Чтобы извлечь и изменить стиль окна, используйте функции [**жетвиндовлонг**](/windows/desktop/api/winuser/nf-winuser-getwindowlonga) и [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) .</span><span class="sxs-lookup"><span data-stu-id="e3874-169">To retrieve and change the window style, use the [**GetWindowLong**](/windows/desktop/api/winuser/nf-winuser-getwindowlonga) and [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) functions.</span></span> <span data-ttu-id="e3874-170">Чтобы определить стили окна текущего представления, используйте значение [**LVS \_ типемаск**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-170">To determine the window styles of the current view, use the [**LVS\_TYPEMASK**](list-view-window-styles.md) value.</span></span>

<span data-ttu-id="e3874-171">Можно управлять способом упорядочения элементов в виде значков или мелких значков, указывая стиль окна [**LVS \_ алигнтоп**](list-view-window-styles.md) (по умолчанию) или [**LVS \_ алигнлефт**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-171">You can control the way items are arranged in icon or small icon view by specifying either the [**LVS\_ALIGNTOP**](list-view-window-styles.md) (default) or [**LVS\_ALIGNLEFT**](list-view-window-styles.md) window style.</span></span>

<span data-ttu-id="e3874-172">Выравнивание можно изменить после создания элемента управления "представление списка".</span><span class="sxs-lookup"><span data-stu-id="e3874-172">You can change the alignment after you create a list-view control.</span></span> <span data-ttu-id="e3874-173">Чтобы определить текущее выравнивание, используйте значение [**LVS \_ алигнмаск**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-173">To determine the current alignment, use the [**LVS\_ALIGNMASK**](list-view-window-styles.md) value.</span></span>

<span data-ttu-id="e3874-174">Дополнительные стили окна предоставляют другие параметры, например, может ли пользователь изменять метки или выбирать несколько элементов за раз.</span><span class="sxs-lookup"><span data-stu-id="e3874-174">Additional window styles provide other options, such as whether a user can edit labels or select more than one item at a time.</span></span> <span data-ttu-id="e3874-175">Полный список см. в разделе [стили окон в виде списка](list-view-window-styles.md).</span><span class="sxs-lookup"><span data-stu-id="e3874-175">For a complete list, see [List-View Window Styles](list-view-window-styles.md).</span></span>

### <a name="extended-list-view-styles"></a><span data-ttu-id="e3874-176">Расширенные стили List-View</span><span class="sxs-lookup"><span data-stu-id="e3874-176">Extended List-View Styles</span></span>

<span data-ttu-id="e3874-177">Расширенные стили элемента управления "представление списка" предоставляют такие параметры, как флажки, плоские полосы прокрутки, линии сетки и оперативное отслеживание.</span><span class="sxs-lookup"><span data-stu-id="e3874-177">The extended list-view control styles provide options such as check boxes, flat scroll bars, grid lines, and hot-tracking.</span></span> <span data-ttu-id="e3874-178">Полный список см. в разделе [расширенные List-View стили](extended-list-view-styles.md).</span><span class="sxs-lookup"><span data-stu-id="e3874-178">For a complete list, see [Extended List-View Styles](extended-list-view-styles.md).</span></span> <span data-ttu-id="e3874-179">Нет доступа к расширенным стилям представления списка таким же образом, как стандартные стили окна.</span><span class="sxs-lookup"><span data-stu-id="e3874-179">You do not access extended list-view styles in the same manner as standard window styles.</span></span> <span data-ttu-id="e3874-180">Для внесения расширенных изменений стилей не используются функции [**жетвиндовлонг**](/windows/desktop/api/winuser/nf-winuser-getwindowlonga) и [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) .</span><span class="sxs-lookup"><span data-stu-id="e3874-180">You do not use the [**GetWindowLong**](/windows/desktop/api/winuser/nf-winuser-getwindowlonga) and [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) functions to make extended style changes.</span></span>

<span data-ttu-id="e3874-181">Существует два сообщения, которые задают и извлекают расширенные сведения о стиле, [**LVM \_ Сетекстендедлиствиевстиле**](lvm-setextendedlistviewstyle.md) и [**LVM \_ жетекстендедлиствиевстиле**](lvm-getextendedlistviewstyle.md).</span><span class="sxs-lookup"><span data-stu-id="e3874-181">There are two messages that set and retrieve extended style information, [**LVM\_SETEXTENDEDLISTVIEWSTYLE**](lvm-setextendedlistviewstyle.md) and [**LVM\_GETEXTENDEDLISTVIEWSTYLE**](lvm-getextendedlistviewstyle.md).</span></span> <span data-ttu-id="e3874-182">Вместо того, чтобы отправлять сообщения явным образом, можно использовать следующие соответствующие макросы: [**ListView \_ сетекстендедлиствиевстиле**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setextendedlistviewstyle), [**ListView \_ сетекстендедлиствиевстиликс**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setextendedlistviewstyleex)и [**ListView \_ жетекстендедлиствиевстиле**](/windows/desktop/api/Commctrl/nf-commctrl-listview_getextendedlistviewstyle).</span><span class="sxs-lookup"><span data-stu-id="e3874-182">Instead of sending the messages explicitly, you can use the following corresponding macros: [**ListView\_SetExtendedListViewStyle**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setextendedlistviewstyle), [**ListView\_SetExtendedListViewStyleEx**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setextendedlistviewstyleex), and [**ListView\_GetExtendedListViewStyle**](/windows/desktop/api/Commctrl/nf-commctrl-listview_getextendedlistviewstyle).</span></span>

## <a name="virtual-list-view-style"></a><span data-ttu-id="e3874-183">Стиль виртуальной List-View</span><span class="sxs-lookup"><span data-stu-id="e3874-183">Virtual List-View Style</span></span>

<span data-ttu-id="e3874-184">Представление виртуального списка — это элемент управления "представление списка", имеющий стиль [**LVS \_ овнердата**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-184">A virtual list view is a list-view control that has the [**LVS\_OWNERDATA**](list-view-window-styles.md) style.</span></span> <span data-ttu-id="e3874-185">Этот стиль позволяет элементу управления управлять миллионами элементов, поскольку владелец получает нагрузку на управление данными элементов.</span><span class="sxs-lookup"><span data-stu-id="e3874-185">This style enables the control to handle millions of items because the owner receives the burden of managing item data.</span></span> <span data-ttu-id="e3874-186">Это позволяет использовать виртуальный элемент управления "представление списка" с большими базами данных, где уже имеются определенные методы доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="e3874-186">This allows you to use the virtual list-view control with large databases of information, where specific methods of data access are already in place.</span></span>

<span data-ttu-id="e3874-187">Виртуальный элемент управления "список" содержит очень мало сведений об элементе.</span><span class="sxs-lookup"><span data-stu-id="e3874-187">A virtual list-view control maintains very little item information itself.</span></span> <span data-ttu-id="e3874-188">За исключением выбора элементов и сведений о фокусе, владелец элемента управления должен управлять всеми сведениями об элементе.</span><span class="sxs-lookup"><span data-stu-id="e3874-188">Except for the item selection and focus information, the owner of the control must manage all item information.</span></span> <span data-ttu-id="e3874-189">Другие процессы запрашивают сведения об элементе от владельца с помощью кодов уведомления [ЛВН \_ жетдиспинфо](lvn-getdispinfo.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-189">Other processes request item information from the owner by using [LVN\_GETDISPINFO](lvn-getdispinfo.md) notification codes.</span></span>

<span data-ttu-id="e3874-190">Поскольку этот тип элемента управления "список" предназначен для больших наборов данных, рекомендуется кэшировать запрошенные данные элемента для повышения производительности получения.</span><span class="sxs-lookup"><span data-stu-id="e3874-190">Because this type of list control is intended for large data sets, it is recommended that you cache requested item data to improve retrieval performance.</span></span> <span data-ttu-id="e3874-191">Представление списка предоставляет механизм указания кэша, помогающий оптимизировать кэш.</span><span class="sxs-lookup"><span data-stu-id="e3874-191">The list view provides a cache-hinting mechanism to assist in optimizing the cache.</span></span> <span data-ttu-id="e3874-192">Указание реализуется в виде кода уведомления [ЛВН \_ одкачехинт](lvn-odcachehint.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-192">The hint is implemented in the form of an [LVN\_ODCACHEHINT](lvn-odcachehint.md) notification code.</span></span>

### <a name="creating-a-virtual-list-view-control"></a><span data-ttu-id="e3874-193">Создание виртуального List-View элемента управления</span><span class="sxs-lookup"><span data-stu-id="e3874-193">Creating a Virtual List-View Control</span></span>

<span data-ttu-id="e3874-194">Вы создаете элементы управления виртуального списка с помощью функции [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) или [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) , указывая стиль окна [**LVS \_ овнердата**](list-view-window-styles.md) как часть параметра функции *двстиле* .</span><span class="sxs-lookup"><span data-stu-id="e3874-194">You create virtual list-view controls using the [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) or [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function, specifying the [**LVS\_OWNERDATA**](list-view-window-styles.md) window style as part of the *dwStyle* function parameter.</span></span> <span data-ttu-id="e3874-195">Динамическое переключение на стиль **LVS \_ овнердата** и из него не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="e3874-195">Dynamically switching to and from the **LVS\_OWNERDATA** style is not supported.</span></span>

<span data-ttu-id="e3874-196">Стиль [**LVS \_ овнердата**](list-view-window-styles.md) можно использовать в сочетании с большинством стилей окон, кроме стиля [**LVS \_ сортасцендинг**](list-view-window-styles.md) или [**LVS \_ сортдесцендинг**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-196">You can use the [**LVS\_OWNERDATA**](list-view-window-styles.md) style in combination with most other window styles, except the [**LVS\_SORTASCENDING**](list-view-window-styles.md) or [**LVS\_SORTDESCENDING**](list-view-window-styles.md) style.</span></span> <span data-ttu-id="e3874-197">Все виртуальные элементы управления представлениями по умолчанию имеют стиль [**\_ автоупорядочивания LVS**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-197">All virtual list-view controls default to the [**LVS\_AUTOARRANGE**](list-view-window-styles.md) style.</span></span>

<span data-ttu-id="e3874-198">Чтобы включить отображение элементов в списке, необходимо сначала отправить сообщение [**LVM \_ сетитемкаунт**](lvm-setitemcount.md) либо явно, либо с помощью макроса [**\_ сетитемкаунтекс ListView**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setitemcountex) .</span><span class="sxs-lookup"><span data-stu-id="e3874-198">To enable items to be displayed in the list, you must first send the [**LVM\_SETITEMCOUNT**](lvm-setitemcount.md) message, either explicitly or by using the [**ListView\_SetItemCountEx**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setitemcountex) macro.</span></span>

<span data-ttu-id="e3874-199">Следующие сообщения не поддерживаются в стиле [**LVS \_ Овнердата**](list-view-window-styles.md) : [**LVM \_ енаблеграупвиев**](lvm-enablegroupview.md), [**LVM \_ жетитемтекст**](lvm-getitemtext.md), [**LVM \_ сеттилеинфо**](lvm-settileinfo.md)и [**LVM \_ мапидтоиндекс**](lvm-mapidtoindex.md).</span><span class="sxs-lookup"><span data-stu-id="e3874-199">The following messages are not supported under the [**LVS\_OWNERDATA**](list-view-window-styles.md) style: [**LVM\_ENABLEGROUPVIEW**](lvm-enablegroupview.md), [**LVM\_GETITEMTEXT**](lvm-getitemtext.md), [**LVM\_SETTILEINFO**](lvm-settileinfo.md), and [**LVM\_MAPIDTOINDEX**](lvm-mapidtoindex.md).</span></span>

### <a name="compatibility-issues"></a><span data-ttu-id="e3874-200">Проблемы совместимости</span><span class="sxs-lookup"><span data-stu-id="e3874-200">Compatibility Issues</span></span>

<span data-ttu-id="e3874-201">Все четыре из стилей «список» — «значок», «маленький значок», «список» и «отчет» — поддерживают стиль [**LVS \_ овнердата**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-201">All four of the list-view styles—icon, small icon, list, and report view—support the [**LVS\_OWNERDATA**](list-view-window-styles.md) style.</span></span> <span data-ttu-id="e3874-202">Элементы управления "представление списка", имеющие стиль **LVS \_ овнердата** , не хранят никаких сведений об элементе.</span><span class="sxs-lookup"><span data-stu-id="e3874-202">List-view controls that have the **LVS\_OWNERDATA** style do not store any item-specific information.</span></span> <span data-ttu-id="e3874-203">Таким образом, единственные допустимые флаги состояния элемента, которые можно применить к элементу, — [**лвис \_ Selected**](list-view-item-states.md) и [**лвис \_ Focused**](list-view-item-states.md).</span><span class="sxs-lookup"><span data-stu-id="e3874-203">Therefore, the only valid item state flags that you can apply to an item are [**LVIS\_SELECTED**](list-view-item-states.md) and [**LVIS\_FOCUSED**](list-view-item-states.md).</span></span> <span data-ttu-id="e3874-204">Другие сведения о состоянии не сохраняются.</span><span class="sxs-lookup"><span data-stu-id="e3874-204">No other state information is stored.</span></span> <span data-ttu-id="e3874-205">В частности, элемент управления "представление списка" не поддерживает изображения состояния или оверлея для каждого элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-205">In particular, the list-view control does not maintain state or overlay images for each item.</span></span> <span data-ttu-id="e3874-206">Тем не менее, элемент управления "список" можно использовать для запроса приложения этих образов, отправив ему сообщение [**LVM \_ сеткаллбаккмаск**](lvm-setcallbackmask.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-206">However, you can have the list-view control query your application for these images by sending it an [**LVM\_SETCALLBACKMASK**](lvm-setcallbackmask.md) message.</span></span>

<span data-ttu-id="e3874-207">Большинство управляющих сообщений списка и связанных с ними макросов полностью поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="e3874-207">Most list-view control messages and the associated macros are fully supported.</span></span> <span data-ttu-id="e3874-208">Однако некоторые сообщения имеют ограничения или не поддерживаются при использовании стиля [**LVS \_ овнердата**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-208">However, some messages have limitations or are unsupported when you use the [**LVS\_OWNERDATA**](list-view-window-styles.md) style.</span></span> <span data-ttu-id="e3874-209">В следующей таблице перечислены затронутые сообщения.</span><span class="sxs-lookup"><span data-stu-id="e3874-209">The following table summarizes the affected messages.</span></span>



| <span data-ttu-id="e3874-210">Сообщение</span><span class="sxs-lookup"><span data-stu-id="e3874-210">Message</span></span>                                             | <span data-ttu-id="e3874-211">Ограничение</span><span class="sxs-lookup"><span data-stu-id="e3874-211">Limitation</span></span>                                                                                                                                                                                                                                                      |
|-----------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="e3874-212">**LVM \_**</span><span class="sxs-lookup"><span data-stu-id="e3874-212">**LVM\_ARRANGE**</span></span>](lvm-arrange.md)                 | <span data-ttu-id="e3874-213">Не поддерживает стиль **\_ SNAPTOGRID лва** .</span><span class="sxs-lookup"><span data-stu-id="e3874-213">Does not support the **LVA\_SNAPTOGRID** style.</span></span>                                                                                                                                                                                                                 |
| [<span data-ttu-id="e3874-214">**LVM \_ делетеаллитемс**</span><span class="sxs-lookup"><span data-stu-id="e3874-214">**LVM\_DELETEALLITEMS**</span></span>](lvm-deleteallitems.md)   | <span data-ttu-id="e3874-215">Устанавливает число элементов в ноль и очищает все внутренние переменные выделения, но фактически не удаляет элементы.</span><span class="sxs-lookup"><span data-stu-id="e3874-215">Sets the item count to zero and clears all internal selection variables, but it does not actually delete any items.</span></span> <span data-ttu-id="e3874-216">Он создает обратный вызов уведомления.</span><span class="sxs-lookup"><span data-stu-id="e3874-216">It makes a notification callback.</span></span>                                                                                                           |
| [<span data-ttu-id="e3874-217">**LVM \_ DELETEITEM**</span><span class="sxs-lookup"><span data-stu-id="e3874-217">**LVM\_DELETEITEM**</span></span>](lvm-deleteitem.md)           | <span data-ttu-id="e3874-218">Поддерживается только для целостности выбора и фактически не удаляет элемент.</span><span class="sxs-lookup"><span data-stu-id="e3874-218">Is supported for selection integrity only and does not actually delete an item.</span></span>                                                                                                                                                                                 |
| [<span data-ttu-id="e3874-219">**LVM \_ жетитемстате**</span><span class="sxs-lookup"><span data-stu-id="e3874-219">**LVM\_GETITEMSTATE**</span></span>](lvm-getitemstate.md)       | <span data-ttu-id="e3874-220">Возвращает только состояния фокуса и выбора (то есть состояния, хранящиеся в элементе управления "представление списка").</span><span class="sxs-lookup"><span data-stu-id="e3874-220">Returns only focus and selection states (that is, those states stored by the list-view control).</span></span>                                                                                                                                                                |
| [<span data-ttu-id="e3874-221">**LVM \_ жетнекститем**</span><span class="sxs-lookup"><span data-stu-id="e3874-221">**LVM\_GETNEXTITEM**</span></span>](lvm-getnextitem.md)         | <span data-ttu-id="e3874-222">Не поддерживает критерий поиска в представлении списка **лвни \_ Вырезать**, **лвни \_ Hidden** или **лвни \_ дрофилитед**.</span><span class="sxs-lookup"><span data-stu-id="e3874-222">Does not support the list-view search criteria **LVNI\_CUT**, **LVNI\_HIDDEN**, or **LVNI\_DROPHILITED**.</span></span> <span data-ttu-id="e3874-223">Поддерживаются все остальные критерии.</span><span class="sxs-lookup"><span data-stu-id="e3874-223">All other criteria are supported.</span></span>                                                                                                                     |
| [<span data-ttu-id="e3874-224">**LVM \_ жетворкареас**</span><span class="sxs-lookup"><span data-stu-id="e3874-224">**LVM\_GETWORKAREAS**</span></span>](lvm-getworkareas.md)       | <span data-ttu-id="e3874-225">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="e3874-225">Is not supported.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="e3874-226">**LVM \_ INSERTITEM**</span><span class="sxs-lookup"><span data-stu-id="e3874-226">**LVM\_INSERTITEM**</span></span>](lvm-insertitem.md)           | <span data-ttu-id="e3874-227">Поддерживается только для целостности выбора.</span><span class="sxs-lookup"><span data-stu-id="e3874-227">Is supported for selection integrity only.</span></span>                                                                                                                                                                                                                      |
| [<span data-ttu-id="e3874-228">**LVM \_ сетитем**</span><span class="sxs-lookup"><span data-stu-id="e3874-228">**LVM\_SETITEM**</span></span>](lvm-setitem.md)                 | <span data-ttu-id="e3874-229">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="e3874-229">Is not supported.</span></span> <span data-ttu-id="e3874-230">Чтобы задать состояние элемента, используйте сообщение [**\_ сетитемстате ListView**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setitemstate) .</span><span class="sxs-lookup"><span data-stu-id="e3874-230">To set the item state, use the [**ListView\_SetItemState**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setitemstate) message.</span></span>                                                                                                                                               |
| [<span data-ttu-id="e3874-231">**LVM \_ сетитемкаунт**</span><span class="sxs-lookup"><span data-stu-id="e3874-231">**LVM\_SETITEMCOUNT**</span></span>](lvm-setitemcount.md)       | <span data-ttu-id="e3874-232">Задает число элементов, находящихся в данный момент в списке.</span><span class="sxs-lookup"><span data-stu-id="e3874-232">Sets the number of items currently in the list.</span></span> <span data-ttu-id="e3874-233">Если элемент управления "представление списка" отправляет уведомление, которое запрашивает данные для любого элемента вплоть до заданного максимального значения, владелец должен быть готов к предоставлению этих данных.</span><span class="sxs-lookup"><span data-stu-id="e3874-233">If the list-view control sends a notification that requests data for any item up to the maximum set, the owner must be prepared to supply that data.</span></span> <span data-ttu-id="e3874-234">Параметры сообщения поддерживают элементы управления "представление виртуального списка".</span><span class="sxs-lookup"><span data-stu-id="e3874-234">The message parameters support virtual list-view controls.</span></span> |
| [<span data-ttu-id="e3874-235">**LVM \_ сетитемпоситион**</span><span class="sxs-lookup"><span data-stu-id="e3874-235">**LVM\_SETITEMPOSITION**</span></span>](lvm-setitemposition.md) | <span data-ttu-id="e3874-236">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="e3874-236">Is not supported.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="e3874-237">**LVM \_ сетитемстате**</span><span class="sxs-lookup"><span data-stu-id="e3874-237">**LVM\_SETITEMSTATE**</span></span>](lvm-setitemstate.md)       | <span data-ttu-id="e3874-238">Позволяет изменять только состояния выбора и фокуса для элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-238">Allows only the selection and focus states to be changed for the item.</span></span>                                                                                                                                                                                          |
| [<span data-ttu-id="e3874-239">**LVM \_ сетитемтекст**</span><span class="sxs-lookup"><span data-stu-id="e3874-239">**LVM\_SETITEMTEXT**</span></span>](lvm-setitemtext.md)         | <span data-ttu-id="e3874-240">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="e3874-240">Is not supported.</span></span> <span data-ttu-id="e3874-241">Ответственность за сопровождение текстов элементов лежит на приложении.</span><span class="sxs-lookup"><span data-stu-id="e3874-241">It is the application's responsibility to maintain the item texts.</span></span>                                                                                                                                                                            |
| [<span data-ttu-id="e3874-242">**LVM \_ сетворкареас**</span><span class="sxs-lookup"><span data-stu-id="e3874-242">**LVM\_SETWORKAREAS**</span></span>](lvm-setworkareas.md)       | <span data-ttu-id="e3874-243">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="e3874-243">Is not supported.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="e3874-244">**LVM \_ сортитемс**</span><span class="sxs-lookup"><span data-stu-id="e3874-244">**LVM\_SORTITEMS**</span></span>](lvm-sortitems.md)             | <span data-ttu-id="e3874-245">Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="e3874-245">Is not supported.</span></span> <span data-ttu-id="e3874-246">Это обязанность приложения для представления элементов в нужном порядке.</span><span class="sxs-lookup"><span data-stu-id="e3874-246">It is the application's responsibility to present the items in the desired order.</span></span>                                                                                                                                                             |



 

### <a name="handling-virtual-list-view-control-notification-codes"></a><span data-ttu-id="e3874-247">Обработка кодов уведомлений элемента управления Virtual List-View</span><span class="sxs-lookup"><span data-stu-id="e3874-247">Handling Virtual List-View Control Notification Codes</span></span>

<span data-ttu-id="e3874-248">Элементы управления "представление списка" с использованием стиля [**LVS \_ овнердата**](list-view-window-styles.md) отправляют те же коды уведомлений, что и другие элементы управления "представление списка", и два дополнительных элемента: [ЛВН \_ одкачехинт](lvn-odcachehint.md) и [ЛВН \_ одфиндитем](lvn-odfinditem.md).</span><span class="sxs-lookup"><span data-stu-id="e3874-248">List-view controls with the [**LVS\_OWNERDATA**](list-view-window-styles.md) style send the same notification codes as other list-view controls and two additional ones: [LVN\_ODCACHEHINT](lvn-odcachehint.md) and [LVN\_ODFINDITEM](lvn-odfinditem.md).</span></span> <span data-ttu-id="e3874-249">Ниже приведены наиболее распространенные уведомления, которые отправляются элементом управления "представление списка" с **LVS \_ овнердата** .</span><span class="sxs-lookup"><span data-stu-id="e3874-249">The following are the most common notifications that the list-view control with the **LVS\_OWNERDATA** style sends.</span></span>



|      <span data-ttu-id="e3874-250">Уведомление</span><span class="sxs-lookup"><span data-stu-id="e3874-250">Notification</span></span>                    |     <span data-ttu-id="e3874-251">Описание</span><span class="sxs-lookup"><span data-stu-id="e3874-251">Description</span></span>                         |
|-----------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="e3874-252">ЛВН \_ жетдиспинфо</span><span class="sxs-lookup"><span data-stu-id="e3874-252">LVN\_GETDISPINFO</span></span>](lvn-getdispinfo.md) | <span data-ttu-id="e3874-253">Виртуальный элемент управления "список" содержит очень небольшие сведения о элементах.</span><span class="sxs-lookup"><span data-stu-id="e3874-253">A virtual list-view control maintains very little item information on its own.</span></span> <span data-ttu-id="e3874-254">В результате он часто отправляет код уведомления [ЛВН \_ жетдиспинфо](lvn-getdispinfo.md) для запроса сведений об элементе.</span><span class="sxs-lookup"><span data-stu-id="e3874-254">As a result, it often sends the [LVN\_GETDISPINFO](lvn-getdispinfo.md) notification code to request item information.</span></span> <span data-ttu-id="e3874-255">Это сообщение обрабатывается во многом так же, как элементы обратного вызова в стандартном элементе управления "список".</span><span class="sxs-lookup"><span data-stu-id="e3874-255">This message is handled in much the same way as callback items in a standard list control.</span></span> <span data-ttu-id="e3874-256">Так как количество элементов, поддерживаемое элементом управления, может быть очень большим, кэширование данных элементов повышает производительность.</span><span class="sxs-lookup"><span data-stu-id="e3874-256">Because the number of items supported by the control can be very large, caching item data improves performance.</span></span> <span data-ttu-id="e3874-257">При обработке ЛВН \_ жетдиспинфо владелец элемента управления сначала пытается предоставить запрошенную информацию об элементе из кэша (Дополнительные сведения см. в разделе [Управление кэшем](#cache-management)).</span><span class="sxs-lookup"><span data-stu-id="e3874-257">When handling LVN\_GETDISPINFO, the owner of the control first attempts to supply requested item information from the cache (for more information, see [Cache Management](#cache-management)).</span></span> <span data-ttu-id="e3874-258">Если запрошенный элемент не кэшируется, владелец должен быть подготовлен для предоставления информации другими способами.</span><span class="sxs-lookup"><span data-stu-id="e3874-258">If the requested item is not cached, the owner must be prepared to supply the information by other means.</span></span> |
| [<span data-ttu-id="e3874-259">ЛВН \_ одкачехинт</span><span class="sxs-lookup"><span data-stu-id="e3874-259">LVN\_ODCACHEHINT</span></span>](lvn-odcachehint.md) | <span data-ttu-id="e3874-260">Виртуальное представление списка отправляет код уведомления [ЛВН \_ одкачехинт](lvn-odcachehint.md) для помощи в оптимизации кэша.</span><span class="sxs-lookup"><span data-stu-id="e3874-260">A virtual list view sends the [LVN\_ODCACHEHINT](lvn-odcachehint.md) notification code to assist in optimizing the cache.</span></span> <span data-ttu-id="e3874-261">Код уведомления предоставляет Инклюзивные значения индекса для диапазона элементов, которые рекомендуется кэшировать.</span><span class="sxs-lookup"><span data-stu-id="e3874-261">The notification code provides inclusive index values for a range of items that it recommends be cached.</span></span> <span data-ttu-id="e3874-262">После получения кода уведомления владелец должен быть подготовлен к загрузке кэша со сведениями об элементе для запрошенного диапазона, чтобы информация была доступна при отправке сообщения [ \_ жетдиспинфо ЛВН](lvn-getdispinfo.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-262">Upon receiving the notification code, the owner must be prepared to load the cache with item information for the requested range so that the information will be readily available when an [LVN\_GETDISPINFO](lvn-getdispinfo.md) message is sent.</span></span>                                                                                                                                                                                                                                   |
| [<span data-ttu-id="e3874-263">ЛВН \_ одфиндитем</span><span class="sxs-lookup"><span data-stu-id="e3874-263">LVN\_ODFINDITEM</span></span>](lvn-odfinditem.md)   | <span data-ttu-id="e3874-264">Код уведомления [ЛВН \_ одфиндитем](lvn-odfinditem.md) отправляется виртуальным элементом управления "представление списка", когда элементу управления требуется владелец для поиска конкретного элемента обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="e3874-264">The [LVN\_ODFINDITEM](lvn-odfinditem.md) notification code is sent by a virtual list-view control when the control needs the owner to find a particular callback item.</span></span> <span data-ttu-id="e3874-265">Код уведомления отправляется, когда элемент управления "список" получает быстрый доступ к ключу или при получении сообщения [**LVM \_ FINDITEM**](lvm-finditem.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-265">The notification code is sent when the list-view control receives quick key access or when it receives an [**LVM\_FINDITEM**](lvm-finditem.md) message.</span></span> <span data-ttu-id="e3874-266">Данные поиска отправляются в виде структуры [**лвфиндинфо**](/windows/win32/api/commctrl/ns-commctrl-lvfindinfoa) , которая является членом структуры [**нмлвфиндитем**](/windows/win32/api/commctrl/ns-commctrl-nmlvfinditema) .</span><span class="sxs-lookup"><span data-stu-id="e3874-266">Search information is sent in the form of an [**LVFINDINFO**](/windows/win32/api/commctrl/ns-commctrl-lvfindinfoa) structure, which is a member of the [**NMLVFINDITEM**](/windows/win32/api/commctrl/ns-commctrl-nmlvfinditema) structure.</span></span> <span data-ttu-id="e3874-267">Владелец должен быть подготовлен для поиска элемента, совпадающего со сведениями, заданными элементом управления "представление списка".</span><span class="sxs-lookup"><span data-stu-id="e3874-267">The owner must be prepared to search for an item that matches the information given by the list-view control.</span></span> <span data-ttu-id="e3874-268">Владелец возвращает индекс элемента в случае успеха или значение-1, если соответствующий элемент не найден.</span><span class="sxs-lookup"><span data-stu-id="e3874-268">The owner returns the index of the item if successful, or -1 if no matching item is found.</span></span>               |



 

### <a name="cache-management"></a><span data-ttu-id="e3874-269">Управление кэшем</span><span class="sxs-lookup"><span data-stu-id="e3874-269">Cache Management</span></span>

<span data-ttu-id="e3874-270">Элемент управления "представление списка" с стилем [**LVS \_ овнердата**](list-view-window-styles.md) создает большое количество кодов уведомлений [ЛВН \_ жетдиспинфо](lvn-getdispinfo.md) и, чтобы помочь оптимизировать кэш, сообщение [ЛВН \_ одкачехинт](lvn-odcachehint.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-270">A list-view control with the [**LVS\_OWNERDATA**](list-view-window-styles.md) style produces a large number of [LVN\_GETDISPINFO](lvn-getdispinfo.md) notification codes and, to assist in optimizing the cache, an [LVN\_ODCACHEHINT](lvn-odcachehint.md) message.</span></span> <span data-ttu-id="e3874-271">\_Сообщения ОДКАЧЕХИНТ ЛВН содержат сведения о рекомендуемых элементах, включаемых в кэш.</span><span class="sxs-lookup"><span data-stu-id="e3874-271">LVN\_ODCACHEHINT messages provide information about the recommended items to include within the cache.</span></span> <span data-ttu-id="e3874-272">Эти сообщения отправляются [**как \_ уведомления WM notify**](wm-notify.md) , а значение *lParam* выступает в качестве адреса структуры [**нмлвкачехинт**](/windows/win32/api/commctrl/ns-commctrl-nmlvcachehint) .</span><span class="sxs-lookup"><span data-stu-id="e3874-272">These messages are sent as [**WM\_NOTIFY**](wm-notify.md) messages, with the *lParam* value acting as the address of an [**NMLVCACHEHINT**](/windows/win32/api/commctrl/ns-commctrl-nmlvcachehint) structure.</span></span>

<span data-ttu-id="e3874-273">Структура [**нмлвкачехинт**](/windows/win32/api/commctrl/ns-commctrl-nmlvcachehint) включает два целочисленных элемента, **ифром** и **загруженного**, которые представляют включающие конечные точки диапазона элементов, которые, скорее всего, понадобятся.</span><span class="sxs-lookup"><span data-stu-id="e3874-273">The [**NMLVCACHEHINT**](/windows/win32/api/commctrl/ns-commctrl-nmlvcachehint) structure includes two integer members, **iFrom** and **iTo**, that represent the inclusive endpoints of a range of items that most likely will be needed.</span></span> <span data-ttu-id="e3874-274">Владелец должен быть подготовлен для загрузки кэша со сведениями об элементе для каждого из элементов в рекомендуемом диапазоне.</span><span class="sxs-lookup"><span data-stu-id="e3874-274">The owner must be prepared to load the cache with the item information for each of the items within the recommended range.</span></span>

<span data-ttu-id="e3874-275">Элементу управления "список" часто требуется информация об элементе для первого элемента (смещение 0).</span><span class="sxs-lookup"><span data-stu-id="e3874-275">The list control often needs item information for the first item (offset 0).</span></span> <span data-ttu-id="e3874-276">Код уведомления [ЛВН \_ одкачехинт](lvn-odcachehint.md) может не всегда содержать элемент 0, но он должен быть всегда включен в кэш.</span><span class="sxs-lookup"><span data-stu-id="e3874-276">The [LVN\_ODCACHEHINT](lvn-odcachehint.md) notification code might not always include item 0, but it must always be included in the cache.</span></span>

<span data-ttu-id="e3874-277">К последним элементам в списке часто обращаются.</span><span class="sxs-lookup"><span data-stu-id="e3874-277">The last items in the list are accessed often.</span></span> <span data-ttu-id="e3874-278">Таким образом, владелец может захотеть разместить второй кэш, содержащий элементы в конце списка.</span><span class="sxs-lookup"><span data-stu-id="e3874-278">Therefore, the owner might want to keep a second cache that includes the items at the end of the list.</span></span> <span data-ttu-id="e3874-279">Запрошенный диапазон от [ЛВН \_ одкачехинт](lvn-odcachehint.md) можно проверить по отношению к конечному кэшу, чтобы сделать его доступным автоматически, а не повторно загружать один и тот же конечный диапазон каждый раз.</span><span class="sxs-lookup"><span data-stu-id="e3874-279">The requested range from [LVN\_ODCACHEHINT](lvn-odcachehint.md) can be checked against the end cache to make it available automatically instead of reloading the same end range each time.</span></span>

## <a name="list-view-working-areas"></a><span data-ttu-id="e3874-280">List-View рабочих областей</span><span class="sxs-lookup"><span data-stu-id="e3874-280">List-View Working Areas</span></span>

<span data-ttu-id="e3874-281">Элементы управления "представление списка" поддерживают рабочие области, которые являются прямоугольными виртуальными областями, используемыми элементом управления "представление списка" для размещения элементов.</span><span class="sxs-lookup"><span data-stu-id="e3874-281">List-view controls support working areas, which are rectangular virtual areas that the list-view control uses to arrange its items.</span></span> <span data-ttu-id="e3874-282">Рабочая область не является окном и не может иметь видимую границу.</span><span class="sxs-lookup"><span data-stu-id="e3874-282">A working area is not a window and cannot have a visible border.</span></span> <span data-ttu-id="e3874-283">По умолчанию элемент управления "представление списка" не имеет рабочих областей.</span><span class="sxs-lookup"><span data-stu-id="e3874-283">By default, the list-view control has no working areas.</span></span> <span data-ttu-id="e3874-284">Создавая рабочую область, можно создать пустую границу слева, сверху или справа от элементов или вызвать горизонтальную полосу прокрутки, если обычно это не будет.</span><span class="sxs-lookup"><span data-stu-id="e3874-284">By creating a working area, you can create an empty border on the left, top, or right of the items or cause a horizontal scroll bar to be displayed when there normally would not be one.</span></span>

<span data-ttu-id="e3874-285">При создании рабочей области элементы, находящиеся в рабочей области, становятся членами рабочей области.</span><span class="sxs-lookup"><span data-stu-id="e3874-285">When a working area is created, items that lie within the working area become members of the working area.</span></span> <span data-ttu-id="e3874-286">Аналогично, если элемент перемещается в рабочую область, элемент становится членом этой рабочей области.</span><span class="sxs-lookup"><span data-stu-id="e3874-286">Similarly, if an item is moved into a working area, the item becomes a member of that working area.</span></span> <span data-ttu-id="e3874-287">Если элемент не находится в рабочей области, он автоматически станет членом первой рабочей области (index 0).</span><span class="sxs-lookup"><span data-stu-id="e3874-287">If an item does not lie within any working area, it automatically becomes a member of the first (index 0) working area.</span></span> <span data-ttu-id="e3874-288">Чтобы разместить новый элемент в определенной рабочей области, сначала необходимо создать элемент, а затем использовать сообщение [**LVM \_ Сетитемпоситион**](lvm-setitemposition.md) или [**LVM \_ SETITEMPOSITION32**](lvm-setitemposition32.md) , чтобы переместить его в нужную рабочую область.</span><span class="sxs-lookup"><span data-stu-id="e3874-288">To place new item within a specific working area, you must first create the item and then use either the [**LVM\_SETITEMPOSITION**](lvm-setitemposition.md) or the [**LVM\_SETITEMPOSITION32**](lvm-setitemposition32.md) message to move it into the desired working area.</span></span>

<span data-ttu-id="e3874-289">На следующем рисунке показан пример элемента управления "представление списка", который содержит четыре рабочие области, каждый из которых находится в другой квадранте клиентской области.</span><span class="sxs-lookup"><span data-stu-id="e3874-289">The following illustration is an example of a list-view control that contains four working areas, each in a different quadrant of the client area.</span></span>

![снимок экрана элемента управления "представление списка" с одной рабочей областью в каждом квадранте клиентской области](images/working.jpg)

<span data-ttu-id="e3874-291">Для создания различных областей в одном представлении можно использовать несколько рабочих областей.</span><span class="sxs-lookup"><span data-stu-id="e3874-291">Multiple working areas can be used for creating different areas within one view.</span></span> <span data-ttu-id="e3874-292">Можно создавать области в одном представлении с разными значениями.</span><span class="sxs-lookup"><span data-stu-id="e3874-292">You can create areas in a single view that have different meanings.</span></span> <span data-ttu-id="e3874-293">Например, представление файловой системы может иметь область для файлов для чтения и записи и другую область для файлов только для чтения.</span><span class="sxs-lookup"><span data-stu-id="e3874-293">For example, a view of a file system might have an area for read/write files and another area for read-only files.</span></span> <span data-ttu-id="e3874-294">Пользователь может классифицировать элементы, поместив их в разные рабочие области.</span><span class="sxs-lookup"><span data-stu-id="e3874-294">The user can categorize items by placing them in different working areas.</span></span> <span data-ttu-id="e3874-295">Если файл перемещен в область только для чтения, он автоматически становится доступен только для чтения.</span><span class="sxs-lookup"><span data-stu-id="e3874-295">If a file is moved into the read-only area, it will automatically become read-only.</span></span>

<span data-ttu-id="e3874-296">Несколько рабочих областей могут пересекаться, но все элементы, находящиеся внутри пересечения, становятся членами области с нижним индексом. Поэтому лучше избегать такой ситуации.</span><span class="sxs-lookup"><span data-stu-id="e3874-296">Multiple working areas can intersect, but any items that lie within the intersection become members of the area with the lower index; therefore, it is best to avoid this situation.</span></span> <span data-ttu-id="e3874-297">При сортировке нескольких рабочих областей элементы сортируются по сравнению с другими элементами в той же рабочей области.</span><span class="sxs-lookup"><span data-stu-id="e3874-297">When sorting multiple work areas, the items are sorted compared to the other items in the same working area.</span></span>

<span data-ttu-id="e3874-298">Количество рабочих областей можно получить с помощью сообщения [**LVM \_ жетнумберофворкареас**](lvm-getnumberofworkareas.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-298">The number of working areas can be retrieved with the [**LVM\_GETNUMBEROFWORKAREAS**](lvm-getnumberofworkareas.md) message.</span></span> <span data-ttu-id="e3874-299">Рабочие области изменяются с помощью сообщения [**LVM \_ сетворкареас**](lvm-setworkareas.md) и могут быть получены с сообщением [**LVM \_ жетворкареас**](lvm-getworkareas.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-299">The working areas are changed with the [**LVM\_SETWORKAREAS**](lvm-setworkareas.md) message and can be retrieved with the [**LVM\_GETWORKAREAS**](lvm-getworkareas.md) message.</span></span> <span data-ttu-id="e3874-300">Оба этих сообщения принимают адрес массива структур [**Rect**](/previous-versions//dd162897(v=vs.85)) как *lParam* и число структур **Rect** как *wParam*.</span><span class="sxs-lookup"><span data-stu-id="e3874-300">Both of these messages take the address of an array of [**RECT**](/previous-versions//dd162897(v=vs.85)) structures as the *lParam* and the number of **RECT** structures as the *wParam*.</span></span> <span data-ttu-id="e3874-301">**Левый** и **верхний** члены этих структур задают координаты верхнего левого угла рабочей области, а **правый** и **Нижний** угол рабочей области задаются в правом нижнем углу.</span><span class="sxs-lookup"><span data-stu-id="e3874-301">The **left** and **top** members of these structures specify the coordinates of the upper-left corner (the origin) of the working area, and the **right** and **bottom** members specify the lower-right corner of the working area.</span></span> <span data-ttu-id="e3874-302">Все координаты находятся в клиентских координатах представления списка.</span><span class="sxs-lookup"><span data-stu-id="e3874-302">All the coordinates are in client coordinates of the list view.</span></span> <span data-ttu-id="e3874-303">Максимально допустимое количество рабочих областей определяется значением параметра **LV \_ Max \_ воркареас** .</span><span class="sxs-lookup"><span data-stu-id="e3874-303">The maximum number of working areas allowed is defined by the **LV\_MAX\_WORKAREAS** value.</span></span>

<span data-ttu-id="e3874-304">Изменение рабочей области не влияет на элементы управления "представление списка", которые имеют представление [**LVS \_ List**](list-view-window-styles.md) или [**LVS \_ Report**](list-view-window-styles.md) , но рабочие области будут поддерживаться при изменении типа представления.</span><span class="sxs-lookup"><span data-stu-id="e3874-304">Changing the working area has no effect on list-view controls that have the [**LVS\_LIST**](list-view-window-styles.md) or [**LVS\_REPORT**](list-view-window-styles.md) view, but the working areas will be maintained when the view type is changed.</span></span> <span data-ttu-id="e3874-305">С помощью [**\_ значка LVS**](list-view-window-styles.md) и представлений [**\_ маленькие значки LVS**](list-view-window-styles.md) можно изменить рабочую область, чтобы изменять способ отображения элементов.</span><span class="sxs-lookup"><span data-stu-id="e3874-305">With the [**LVS\_ICON**](list-view-window-styles.md) and [**LVS\_SMALLICON**](list-view-window-styles.md) views, the working area can be modified to change the way the items are displayed.</span></span> <span data-ttu-id="e3874-306">Ширина рабочей области (справа налево), превышающая ширину клиента элемента управления, приводит к тому, что элементы упаковываются по этой ширине и горизонтальная полоса прокрутки отображается.</span><span class="sxs-lookup"><span data-stu-id="e3874-306">Making the width of the working area (right - left) greater than the client width of the control causes the items to be wrapped at that width and the horizontal scroll bar to be displayed.</span></span> <span data-ttu-id="e3874-307">Если ширина рабочей области ограничена, чем ширина клиентской области элемента управления, элементы будут упаковываться в рабочую область, а не в клиентскую область.</span><span class="sxs-lookup"><span data-stu-id="e3874-307">Making the width of the working area narrower than the width of the control's client area causes the items to be wrapped within the working area and not the client area.</span></span> <span data-ttu-id="e3874-308">Установка для **левого** или **верхнего** элемента положительного значения приводит к отображению элементов, начиная с рабочей области, создавая пустое пространство между границей элемента управления и элементами.</span><span class="sxs-lookup"><span data-stu-id="e3874-308">Setting the **left** or **top** member to a positive value causes the items to be displayed starting at the working area, creating an empty space between the edge of the control and the items.</span></span> <span data-ttu-id="e3874-309">Можно также создать пустое пространство между правым ребром элемента управления и элементами, сделав ширину рабочей области меньше, чем ширина клиента элемента управления.</span><span class="sxs-lookup"><span data-stu-id="e3874-309">An empty space can also be created between the right edge of the control and the items by making the width of the working area less than the client width of the control.</span></span>

## <a name="list-view-image-lists"></a><span data-ttu-id="e3874-310">List-View списки изображений</span><span class="sxs-lookup"><span data-stu-id="e3874-310">List-View Image Lists</span></span>

<span data-ttu-id="e3874-311">По умолчанию элемент управления "представление списка" не отображает изображения элементов.</span><span class="sxs-lookup"><span data-stu-id="e3874-311">By default, a list-view control does not display item images.</span></span> <span data-ttu-id="e3874-312">Чтобы отобразить изображения элементов, необходимо создать списки изображений и связать их с элементом управления.</span><span class="sxs-lookup"><span data-stu-id="e3874-312">To display item images, you must create image lists and associate them with the control.</span></span> <span data-ttu-id="e3874-313">Элемент управления "представление списка" может содержать три списка изображений:</span><span class="sxs-lookup"><span data-stu-id="e3874-313">A list-view control can have three image lists:</span></span>

-   <span data-ttu-id="e3874-314">Список изображений, содержащий значки с полным размером, отображаемые, когда элемент управления находится в представлении значков.</span><span class="sxs-lookup"><span data-stu-id="e3874-314">An image list that contains full-sized icons displayed when the control is in icon view.</span></span>
-   <span data-ttu-id="e3874-315">Список изображений, содержащий мелкие значки, которые отображаются, когда элемент управления находится в представлении мелких значков, в режиме списка или в представлении отчетов.</span><span class="sxs-lookup"><span data-stu-id="e3874-315">An image list that contains small icons displayed when the control is in small icon view, list view, or report view.</span></span>
-   <span data-ttu-id="e3874-316">Список изображений, содержащий изображения состояний, которые отображаются слева от значка полного или большого размера.</span><span class="sxs-lookup"><span data-stu-id="e3874-316">An image list that contains state images, which are displayed to the left of the full-sized or small icon.</span></span> <span data-ttu-id="e3874-317">Для обозначения состояний элементов, определенных приложением, можно использовать изображения состояний, например флажки установлен и снят.</span><span class="sxs-lookup"><span data-stu-id="e3874-317">You can use state images, such as checked and cleared check boxes, to indicate application-defined item states.</span></span> <span data-ttu-id="e3874-318">Изображения состояния отображаются в виде значков, в виде мелких значков, в режиме списка и в представлении отчетов.</span><span class="sxs-lookup"><span data-stu-id="e3874-318">State images are displayed in icon view, small icon view, list view, and report view.</span></span>

<span data-ttu-id="e3874-319">Списки изображений полного и маленького значков также могут содержать *изображения наложения*, предназначенные для прозрачного рисования на значках элементов.</span><span class="sxs-lookup"><span data-stu-id="e3874-319">The full-sized and small icon image lists can also contain *overlay images*, which are designed to be drawn transparently over the item icons.</span></span>

<span data-ttu-id="e3874-320">Чтобы использовать изображения наложения в элементе управления "представление списка":</span><span class="sxs-lookup"><span data-stu-id="e3874-320">To use overlay images in a list-view control:</span></span>

1.  <span data-ttu-id="e3874-321">Вызовите [**функцию \_ сетоверлайимаже ImageList**](/windows/desktop/api/Commctrl/nf-commctrl-imagelist_setoverlayimage) , чтобы назначить индекс изображения оверлея изображению в списках изображений полного и маленького значков.</span><span class="sxs-lookup"><span data-stu-id="e3874-321">Call the [**ImageList\_SetOverlayImage**](/windows/desktop/api/Commctrl/nf-commctrl-imagelist_setoverlayimage) function to assign an overlay image index to an image in the full-sized and small icon image lists.</span></span> <span data-ttu-id="e3874-322">Изображение оверлея определяется с помощью индекса, отсчитываемый от единицы.</span><span class="sxs-lookup"><span data-stu-id="e3874-322">An overlay image is identified by a one-based index.</span></span>
2.  <span data-ttu-id="e3874-323">Индекс изображения оверлея можно связать с элементом при вызове макроса [**ListView \_ InsertItem**](/windows/desktop/api/Commctrl/nf-commctrl-listview_insertitem) или [**ListView \_ сетитем**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setitem) .</span><span class="sxs-lookup"><span data-stu-id="e3874-323">You can associate an overlay image index with an item when you call the [**ListView\_InsertItem**](/windows/desktop/api/Commctrl/nf-commctrl-listview_insertitem) or [**ListView\_SetItem**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setitem) macro.</span></span> <span data-ttu-id="e3874-324">Используйте макрос [**индекстуверлаймаск**](/windows/desktop/api/Commctrl/nf-commctrl-indextooverlaymask) , чтобы указать индекс изображения оверлея в элементе **State** структуры [**лвитем**](/windows/win32/api/commctrl/ns-commctrl-lvitema) элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-324">Use the [**INDEXTOOVERLAYMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextooverlaymask) macro to specify an overlay image index in the **state** member of the item's [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure.</span></span> <span data-ttu-id="e3874-325">Необходимо также задать биты [**лвис \_ оверлаймаск**](list-view-item-states.md) в элементе **статемаск** .</span><span class="sxs-lookup"><span data-stu-id="e3874-325">You must also set the [**LVIS\_OVERLAYMASK**](list-view-item-states.md) bits in the **stateMask** member.</span></span>

<span data-ttu-id="e3874-326">Если задан список изображений состояния, элемент управления "представление списка" резервирует место слева от значка каждого элемента для изображения состояния.</span><span class="sxs-lookup"><span data-stu-id="e3874-326">If a state image list is specified, a list-view control reserves space to the left of each item's icon for a state image.</span></span>

<span data-ttu-id="e3874-327">Чтобы связать изображение состояния с элементом, используйте макрос [**индекстостатеимажемаск**](/windows/desktop/api/Commctrl/nf-commctrl-indextostateimagemask) , чтобы указать индекс изображения состояния в элементе **State** структуры [**лвитем**](/windows/win32/api/commctrl/ns-commctrl-lvitema) .</span><span class="sxs-lookup"><span data-stu-id="e3874-327">To associate a state image with an item, use the [**INDEXTOSTATEIMAGEMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextostateimagemask) macro to specify a state image index in the **state** member of the [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure.</span></span> <span data-ttu-id="e3874-328">Индекс определяет изображение в списке изображений состояния элемента управления.</span><span class="sxs-lookup"><span data-stu-id="e3874-328">The index identifies an image in the control's state image list.</span></span> <span data-ttu-id="e3874-329">Хотя индексы списка изображений отсчитываются от нуля, элемент управления использует индексы, основанные на единицах, для задания изображений состояния.</span><span class="sxs-lookup"><span data-stu-id="e3874-329">Although image list indexes are zero-based, the control uses one-based indexes to identify state images.</span></span> <span data-ttu-id="e3874-330">Нулевой индекс изображения состояния указывает, что у элемента нет изображения состояния.</span><span class="sxs-lookup"><span data-stu-id="e3874-330">A state image index of zero indicates that an item has no state image.</span></span>

<span data-ttu-id="e3874-331">По умолчанию, когда элемент управления "представление списка" уничтожается, он удаляет назначенные ему списки изображений.</span><span class="sxs-lookup"><span data-stu-id="e3874-331">By default, when a list-view control is destroyed, it destroys the image lists assigned to it.</span></span> <span data-ttu-id="e3874-332">Однако если элемент управления "список" имеет стиль окна [**LVS \_ шареимажелистс**](list-view-window-styles.md) , приложение несет ответственность за уничтожение списков изображений, когда они больше не используются.</span><span class="sxs-lookup"><span data-stu-id="e3874-332">However, if a list-view control has the [**LVS\_SHAREIMAGELISTS**](list-view-window-styles.md) window style, the application is responsible for destroying the image lists when they are no longer in use.</span></span> <span data-ttu-id="e3874-333">Этот стиль следует указывать при назначении одних и тех же списков изображений нескольким элементам управления "список-представление"; в противном случае несколько элементов управления могут попытаться уничтожить один и тот же список изображений.</span><span class="sxs-lookup"><span data-stu-id="e3874-333">You should specify this style if you assign the same image lists to multiple list-view controls; otherwise, more than one control might try to destroy the same image list.</span></span>

## <a name="list-view-items-and-subitems"></a><span data-ttu-id="e3874-334">List-View элементы и подэлементы</span><span class="sxs-lookup"><span data-stu-id="e3874-334">List-View Items and Subitems</span></span>

<span data-ttu-id="e3874-335">Каждый элемент в элементе управления "представление списка" имеет значок, метку, текущее состояние и значение, определенное приложением.</span><span class="sxs-lookup"><span data-stu-id="e3874-335">Each item in a list-view control has an icon, a label, a current state, and an application-defined value.</span></span> <span data-ttu-id="e3874-336">С помощью сообщений в виде списка можно добавлять, изменять и удалять элементы, а также получать сведения об элементах.</span><span class="sxs-lookup"><span data-stu-id="e3874-336">By using list-view messages, you can add, modify, and delete items as well as retrieve information about items.</span></span>

<span data-ttu-id="e3874-337">Каждый элемент может иметь один или несколько *подэлементов*.</span><span class="sxs-lookup"><span data-stu-id="e3874-337">Each item can have one or more *subitems*.</span></span> <span data-ttu-id="e3874-338">Подэлемент — это строка, которая в представлении отчетов отображается в столбце, отдельном от значка и метки элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-338">A subitem is a string that, in report view, is displayed in a column separate from the item's icon and label.</span></span> <span data-ttu-id="e3874-339">Чтобы указать текст подэлемента, используйте сообщение [**LVM \_ Сетитемтекст**](lvm-setitemtext.md) или [**LVM \_ сетитем**](lvm-setitem.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-339">To specify the text of a subitem, use the [**LVM\_SETITEMTEXT**](lvm-setitemtext.md) or [**LVM\_SETITEM**](lvm-setitem.md) message.</span></span> <span data-ttu-id="e3874-340">Все элементы в элементе управления "представление списка" имеют одинаковое количество подэлементов.</span><span class="sxs-lookup"><span data-stu-id="e3874-340">All items in a list-view control have the same number of subitems.</span></span> <span data-ttu-id="e3874-341">Количество подэлементов определяется числом столбцов в элементе управления "представление списка".</span><span class="sxs-lookup"><span data-stu-id="e3874-341">The number of subitems is determined by the number of columns in the list-view control.</span></span> <span data-ttu-id="e3874-342">При добавлении столбца к элементу управления "представление списка" указывается связанный с ним индекс подэлемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-342">When you add a column to a list-view control, you specify its associated subitem index.</span></span>

<span data-ttu-id="e3874-343">Структура [**лвитем**](/windows/win32/api/commctrl/ns-commctrl-lvitema) определяет элемент представления списка или подэлемент.</span><span class="sxs-lookup"><span data-stu-id="e3874-343">The [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure defines a list-view item or subitem.</span></span> <span data-ttu-id="e3874-344">Элемент **Член iItem** — это Отсчитываемый от нуля индекс элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-344">The **iItem** member is the zero-based index of the item.</span></span> <span data-ttu-id="e3874-345">Элемент **iSubItem** — это Отсчитываемый от единицы индекс подэлемента или нуль, если структура содержит сведения об элементе.</span><span class="sxs-lookup"><span data-stu-id="e3874-345">The **iSubItem** member is the one-based index of a subitem or zero if the structure contains information about an item.</span></span> <span data-ttu-id="e3874-346">Дополнительные члены определяют текст, значок, состояние и данные элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-346">Additional members specify the item's text, icon, state, and item data.</span></span> <span data-ttu-id="e3874-347">*Данные элемента* — это определяемое приложением значение, связанное с элементом представления списка.</span><span class="sxs-lookup"><span data-stu-id="e3874-347">*Item data* is an application-defined value associated with a list-view item.</span></span>

<span data-ttu-id="e3874-348">Чтобы добавить элемент в элемент управления "представление списка", используйте сообщение [**LVM \_ INSERTITEM**](lvm-insertitem.md) , указав адрес структуры [**лвитем**](/windows/win32/api/commctrl/ns-commctrl-lvitema) .</span><span class="sxs-lookup"><span data-stu-id="e3874-348">To add an item to a list-view control, use the [**LVM\_INSERTITEM**](lvm-insertitem.md) message, specifying the address of an [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure.</span></span> <span data-ttu-id="e3874-349">Перед добавлением нескольких элементов можно отправить элемент управления с сообщением [**LVM \_ сетитемкаунт**](lvm-setitemcount.md) , указав количество элементов, которые в конечном итоге будет содержать элемент управления.</span><span class="sxs-lookup"><span data-stu-id="e3874-349">Before adding multiple items, you can send the control an [**LVM\_SETITEMCOUNT**](lvm-setitemcount.md) message, specifying the number of items the control will ultimately contain.</span></span> <span data-ttu-id="e3874-350">Это сообщение позволяет элементу управления "представление списка" перераспределять внутренние структуры данных только один раз, а не каждый раз, когда вы добавляете элемент.</span><span class="sxs-lookup"><span data-stu-id="e3874-350">This message enables the list-view control to reallocate its internal data structures only once rather than every time you add an item.</span></span> <span data-ttu-id="e3874-351">Количество элементов в элементе управления "представление списка" можно определить с помощью сообщения [**LVM \_ GETITEMCOUNT**](lvm-getitemcount.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-351">You can determine the number of items in a list-view control by using the [**LVM\_GETITEMCOUNT**](lvm-getitemcount.md) message.</span></span> <span data-ttu-id="e3874-352">При добавлении большого количества элементов в элемент управления "представление списка" можно ускорить процесс, отключив перерисовку перед добавлением элементов, а затем добавив перерисовку после добавления элементов.</span><span class="sxs-lookup"><span data-stu-id="e3874-352">If you are adding a large number of items to a list-view control, you can speed up the process by disabling redrawing before adding the items, then enable redrawing after the items are added.</span></span> <span data-ttu-id="e3874-353">Используйте сообщение [**WM \_ сетредрав**](/windows/desktop/gdi/wm-setredraw) для включения и отключения перерисовки.</span><span class="sxs-lookup"><span data-stu-id="e3874-353">Use the [**WM\_SETREDRAW**](/windows/desktop/gdi/wm-setredraw) message to enable and disable redrawing.</span></span>

<span data-ttu-id="e3874-354">Чтобы изменить атрибуты элемента представления списка, используйте сообщение [**LVM \_ сетитем**](lvm-setitem.md) , указав адрес структуры [**лвитем**](/windows/win32/api/commctrl/ns-commctrl-lvitema) .</span><span class="sxs-lookup"><span data-stu-id="e3874-354">To change the attributes of a list-view item, use the [**LVM\_SETITEM**](lvm-setitem.md) message, specifying the address of an [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure.</span></span> <span data-ttu-id="e3874-355">Элемент **маски** этой структуры задает атрибуты элементов, которые необходимо изменить.</span><span class="sxs-lookup"><span data-stu-id="e3874-355">The **mask** member of this structure specifies the item attributes you want to change.</span></span> <span data-ttu-id="e3874-356">Например, чтобы изменить только текст элемента или подэлемента, используйте сообщение [**LVM \_ сетитемтекст**](lvm-setitemtext.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-356">For example, to change only the text of an item or subitem, use the [**LVM\_SETITEMTEXT**](lvm-setitemtext.md) message.</span></span>

<span data-ttu-id="e3874-357">Чтобы получить сведения об элементе представления списка, используйте сообщение LVM- [**\_ Item**](lvm-getitem.md) , указав адрес структуры [**лвитем**](/windows/win32/api/commctrl/ns-commctrl-lvitema) для заполнения.</span><span class="sxs-lookup"><span data-stu-id="e3874-357">To retrieve information about a list-view item, use the [**LVM\_GETITEM**](lvm-getitem.md) message, specifying the address of the [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure to fill in.</span></span> <span data-ttu-id="e3874-358">Элемент **маски** этой структуры указывает извлекаемые атрибуты элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-358">The **mask** member of this structure specifies the item attributes to be retrieved.</span></span> <span data-ttu-id="e3874-359">Чтобы получить текст элемента или подэлемента, используйте сообщение [**LVM \_ жетитемтекст**](lvm-getitemtext.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-359">To retrieve only an item or subitem's text, use the [**LVM\_GETITEMTEXT**](lvm-getitemtext.md) message.</span></span>

<span data-ttu-id="e3874-360">Чтобы удалить элемент представления списка, используйте сообщение [**LVM \_ DELETEITEM**](lvm-deleteitem.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-360">To delete a list-view item, use the [**LVM\_DELETEITEM**](lvm-deleteitem.md) message.</span></span> <span data-ttu-id="e3874-361">Вы можете удалить все элементы в элементе управления "представление списка" с помощью сообщения [**LVM \_ делетеаллитемс**](lvm-deleteallitems.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-361">You can delete all items in a list-view control by using the [**LVM\_DELETEALLITEMS**](lvm-deleteallitems.md) message.</span></span>

### <a name="list-view-item-states"></a><span data-ttu-id="e3874-362">Состояния элементов List-View</span><span class="sxs-lookup"><span data-stu-id="e3874-362">List-View Item States</span></span>

<span data-ttu-id="e3874-363">Состояние элемента — это значение, которое указывает доступность элемента, указывает действия пользователя или иным образом отражает состояние элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-363">An item's state is a value that specifies the item's availability, indicates user actions, or otherwise reflects the item's status.</span></span> <span data-ttu-id="e3874-364">Элемент управления "представление списка" изменяет некоторые биты состояния, например, когда пользователь выбирает элемент.</span><span class="sxs-lookup"><span data-stu-id="e3874-364">A list-view control changes some state bits, such as when the user selects an item.</span></span> <span data-ttu-id="e3874-365">Приложение может изменить другие биты состояния, чтобы отключить или скрыть элемент или указать изображение оверлея или изображение состояния.</span><span class="sxs-lookup"><span data-stu-id="e3874-365">An application might change other state bits to disable or hide the item or to specify an overlay image or state image.</span></span> <span data-ttu-id="e3874-366">Дополнительные сведения о изображениях наложения и изображениях состояний см. в разделе [списки изображений в виде списка](#list-view-image-lists).</span><span class="sxs-lookup"><span data-stu-id="e3874-366">For more information about overlay images and state images, see [List-View Image Lists](#list-view-image-lists).</span></span>

<span data-ttu-id="e3874-367">Состояние элемента задается элементом **State** структуры [**лвитем**](/windows/win32/api/commctrl/ns-commctrl-lvitema) .</span><span class="sxs-lookup"><span data-stu-id="e3874-367">An item's state is specified by the **state** member of the [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure.</span></span> <span data-ttu-id="e3874-368">При указании или изменении состояния элемента элемент **статемаск** указывает, какие биты состояния необходимо изменить.</span><span class="sxs-lookup"><span data-stu-id="e3874-368">When you specify or change an item's state, the **stateMask** member specifies which state bits you need to change.</span></span> <span data-ttu-id="e3874-369">Состояние элемента можно изменить с помощью сообщения [**LVM \_ сетитемстате**](lvm-setitemstate.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-369">You can change an item's state by using the [**LVM\_SETITEMSTATE**](lvm-setitemstate.md) message.</span></span> <span data-ttu-id="e3874-370">Состояние элемента можно указать при его создании или при изменении его атрибутов с помощью сообщения [**LVM \_ сетитем**](lvm-setitem.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-370">You can specify an item's state when you create it or when you change its attributes by using the [**LVM\_SETITEM**](lvm-setitem.md) message.</span></span> <span data-ttu-id="e3874-371">Чтобы определить текущее состояние элемента, используйте сообщение [**LVM \_ Жетитемстате**](lvm-getitemstate.md) или [**LVM \_**](lvm-getitem.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-371">To determine an item's current state, use the [**LVM\_GETITEMSTATE**](lvm-getitemstate.md) or [**LVM\_GETITEM**](lvm-getitem.md) message.</span></span>

<span data-ttu-id="e3874-372">Чтобы задать изображение оверлея элемента, элемент **статемаск** структуры [**лвитем**](/windows/win32/api/commctrl/ns-commctrl-lvitema) должен включать значение [**лвис \_ оверлаймаск**](list-view-item-states.md) , а элемент **State** должен включать Отсчитываемый от единицы индекс изображения оверлея, смещенного влево 8 бит, с помощью макроса [**индекстуверлаймаск**](/windows/desktop/api/Commctrl/nf-commctrl-indextooverlaymask) .</span><span class="sxs-lookup"><span data-stu-id="e3874-372">To set an item's overlay image, the **stateMask** member of the [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure must include the [**LVIS\_OVERLAYMASK**](list-view-item-states.md) value, and the **state** member must include the one-based index of the overlay image shifted left 8 bits by using the [**INDEXTOOVERLAYMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextooverlaymask) macro.</span></span> <span data-ttu-id="e3874-373">Индекс может быть равен нулю, чтобы не указывать изображение оверлея.</span><span class="sxs-lookup"><span data-stu-id="e3874-373">The index can be zero to specify no overlay image.</span></span>

<span data-ttu-id="e3874-374">Чтобы задать изображение состояния элемента, элемент **статемаск** структуры [**лвитем**](/windows/win32/api/commctrl/ns-commctrl-lvitema) должен включать значение [**лвис \_ статеимажемаск**](list-view-item-states.md) , а элемент **State** должен включать Отсчитываемый от единицы индекс изображения состояния, смещенного влево 12 бит, с помощью макроса [**индекстостатеимажемаск**](/windows/desktop/api/Commctrl/nf-commctrl-indextostateimagemask) .</span><span class="sxs-lookup"><span data-stu-id="e3874-374">To set an item's state image, the **stateMask** member of the [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure must include the [**LVIS\_STATEIMAGEMASK**](list-view-item-states.md) value, and the **state** member must include the one-based index of the state image shifted left 12 bits by using the [**INDEXTOSTATEIMAGEMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextostateimagemask) macro.</span></span> <span data-ttu-id="e3874-375">Индекс может быть равен нулю, чтобы не указывать изображение состояния.</span><span class="sxs-lookup"><span data-stu-id="e3874-375">The index can be zero to specify no state image.</span></span>

### <a name="callback-items-and-the-callback-mask"></a><span data-ttu-id="e3874-376">Элементы обратного вызова и маска обратного вызова</span><span class="sxs-lookup"><span data-stu-id="e3874-376">Callback Items and the Callback Mask</span></span>

<span data-ttu-id="e3874-377">Для каждого из его элементов элемент управления "представление списка" обычно хранит текст метки, индекс списка изображений значков элемента и набор битовых флагов для состояния элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-377">For each of its items, a list-view control typically stores the label text, the image list index of the item's icons, and a set of bit flags for the item's state.</span></span> <span data-ttu-id="e3874-378">Можно определить элементы обратного вызова или изменить маску обратного вызова элемента управления, чтобы указать, что приложение, а не элемент управления, хранит некоторые или все эти сведения.</span><span class="sxs-lookup"><span data-stu-id="e3874-378">You can define callback items or change the control's callback mask to indicate that the application, rather than the control, stores some or all of this information.</span></span> <span data-ttu-id="e3874-379">Если в приложении хранятся некоторые из этих сведений, вы можете использовать обратные вызовы.</span><span class="sxs-lookup"><span data-stu-id="e3874-379">You might want to use callbacks if your application stores some of this information.</span></span>

<span data-ttu-id="e3874-380">*Элемент обратного вызова* в элементе управления "представление списка" — это элемент, для которого приложение хранит индекс текста или значка либо и то, и другое.</span><span class="sxs-lookup"><span data-stu-id="e3874-380">A *callback item* in a list-view control is an item for which the application stores the text or icon index, or both.</span></span> <span data-ttu-id="e3874-381">Вы можете определить элементы обратного вызова при отправке сообщения [**LVM \_ INSERTITEM**](lvm-insertitem.md) для добавления элемента в элемент управления "список".</span><span class="sxs-lookup"><span data-stu-id="e3874-381">You can define callback items when you send the [**LVM\_INSERTITEM**](lvm-insertitem.md) message to add an item to the list-view control.</span></span> <span data-ttu-id="e3874-382">Если приложение сохраняет текст для элемента или подэлемента, установите для элемента **псзтекст** структуры [**Лвитем**](/windows/win32/api/commctrl/ns-commctrl-lvitema) элемента значение **LPSTR \_ тексткаллбакк**.</span><span class="sxs-lookup"><span data-stu-id="e3874-382">If the application stores the text for the item or subitem, set the **pszText** member of the item's [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure to **LPSTR\_TEXTCALLBACK**.</span></span> <span data-ttu-id="e3874-383">Если приложение хранит индекс значка для элемента, установите для элемента **иимаже** структуры **лвитем** элемента значение **\_ имажекаллбакк**.</span><span class="sxs-lookup"><span data-stu-id="e3874-383">If the application stores the icon index for an item, set the **iImage** member of the item's **LVITEM** structure to **I\_IMAGECALLBACK**.</span></span>

<span data-ttu-id="e3874-384">*Маска обратного вызова* элемента управления "представление списка" представляет собой набор битовых флагов, указывающих состояния элементов, для которых приложение, а не элемент управления, сохраняет текущие данные.</span><span class="sxs-lookup"><span data-stu-id="e3874-384">The *callback mask* of a list-view control is a set of bit flags that specify the item states for which the application, rather than the control, stores the current data.</span></span> <span data-ttu-id="e3874-385">Маска обратного вызова применяется ко всем элементам элемента управления, в отличие от конструкции элемента обратного вызова, которая применяется к конкретному элементу.</span><span class="sxs-lookup"><span data-stu-id="e3874-385">The callback mask applies to all of the control's items, unlike the callback item designation, which applies to a specific item.</span></span> <span data-ttu-id="e3874-386">По умолчанию маска обратного вызова равна нулю, то есть элемент управления "список" хранит все сведения о состоянии элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-386">The callback mask is zero by default, meaning that the list-view control stores all item state information.</span></span> <span data-ttu-id="e3874-387">После создания элемента управления "представление списка" и инициализации его элементов можно отправить сообщение [**LVM \_ сеткаллбаккмаск**](lvm-setcallbackmask.md) , чтобы изменить маску обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="e3874-387">After creating a list-view control and initializing its items, you can send the [**LVM\_SETCALLBACKMASK**](lvm-setcallbackmask.md) message to change the callback mask.</span></span> <span data-ttu-id="e3874-388">Чтобы получить текущую маску обратного вызова, отправьте сообщение [**LVM \_ жеткаллбаккмаск**](lvm-getcallbackmask.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-388">To retrieve the current callback mask, send the [**LVM\_GETCALLBACKMASK**](lvm-getcallbackmask.md) message.</span></span>

<span data-ttu-id="e3874-389">Если элемент управления "представление списка" должен отображать или сортировать элемент списка представления, для которого приложение хранит сведения о обратном вызове, элемент управления отправляет код уведомления [ЛВН \_ жетдиспинфо](lvn-getdispinfo.md) в родительское окно элемента управления.</span><span class="sxs-lookup"><span data-stu-id="e3874-389">When a list-view control must display or sort a list-view item for which the application stores callback information, the control sends the [LVN\_GETDISPINFO](lvn-getdispinfo.md) notification code to the control's parent window.</span></span> <span data-ttu-id="e3874-390">Это сообщение указывает структуру [**нмлвдиспинфо**](/windows/win32/api/commctrl/ns-commctrl-nmlvdispinfoa) , которая содержит необходимый тип информации и определяет элемент или подэлемент для извлечения.</span><span class="sxs-lookup"><span data-stu-id="e3874-390">This message specifies an [**NMLVDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmlvdispinfoa) structure that contains the type of information required and identifies the item or subitem to retrieve.</span></span> <span data-ttu-id="e3874-391">Родительскому окну необходимо обработать ЛВН \_ жетдиспинфо для предоставления запрошенных данных.</span><span class="sxs-lookup"><span data-stu-id="e3874-391">The parent window must process LVN\_GETDISPINFO to provide the requested data.</span></span>

<span data-ttu-id="e3874-392">Если элемент управления "представление списка" обнаруживает изменение в сведениях о обратном вызове элемента, например изменение текста, значка или сведений о состоянии, элемент управления отправляет код уведомления [ЛВН \_ сетдиспинфо](lvn-setdispinfo.md) , чтобы уведомить вас об изменении.</span><span class="sxs-lookup"><span data-stu-id="e3874-392">If the list-view control detects a change in an item's callback information, such as a change in the text, icon, or state information, the control sends an [LVN\_SETDISPINFO](lvn-setdispinfo.md) notification code to notify you of the change.</span></span>

<span data-ttu-id="e3874-393">При изменении атрибутов или битов элемента обратного вызова используйте сообщение об [**\_ обновлении LVM**](lvm-update.md) , чтобы заставить элемент управления перерисовывать элемент.</span><span class="sxs-lookup"><span data-stu-id="e3874-393">If you change a callback item's attributes or state bits, you use the [**LVM\_UPDATE**](lvm-update.md) message to force the control to repaint the item.</span></span> <span data-ttu-id="e3874-394">Это сообщение также приводит к тому, что элемент управления упорядочивает свои элементы, если он имеет стиль [**\_ автоупорядочивания LVS**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-394">This message also causes the control to arrange its items if it has the [**LVS\_AUTOARRANGE**](list-view-window-styles.md) style.</span></span> <span data-ttu-id="e3874-395">Можно использовать сообщение [**LVM \_ редравитемс**](lvm-redrawitems.md) для перерисовки диапазона элементов путем непроверки соответствующих частей клиентской области элемента управления списка.</span><span class="sxs-lookup"><span data-stu-id="e3874-395">You can use the [**LVM\_REDRAWITEMS**](lvm-redrawitems.md) message to redraw a range of items by invalidating the corresponding portions of the list-view control's client area.</span></span>

<span data-ttu-id="e3874-396">Эффективно используя элементы обратного вызова и маску обратного вызова, можно гарантировать, что каждый атрибут элемента будет храниться только в одном месте.</span><span class="sxs-lookup"><span data-stu-id="e3874-396">By effectively using callback items and the callback mask, you can ensure that each item attribute is maintained in only one place.</span></span> <span data-ttu-id="e3874-397">Это может упростить работу приложения, но единственным сохраненным пространством является память, которая в противном случае потребуется для хранения меток элементов и текста подэлементов.</span><span class="sxs-lookup"><span data-stu-id="e3874-397">Doing this can simplify your application, but the only space saved is the memory that would otherwise be required to store item labels and subitem text.</span></span>

### <a name="list-view-item-position"></a><span data-ttu-id="e3874-398">Позиция List-View элемента</span><span class="sxs-lookup"><span data-stu-id="e3874-398">List-View Item Position</span></span>

<span data-ttu-id="e3874-399">У каждого элемента списка-представления есть позиция и размер, которые можно получить и задать с помощью сообщений.</span><span class="sxs-lookup"><span data-stu-id="e3874-399">Every list-view item has a position and size, which you can retrieve and set using messages.</span></span> <span data-ttu-id="e3874-400">Можно также определить, какой элемент находится в указанной позиции.</span><span class="sxs-lookup"><span data-stu-id="e3874-400">You can also determine which item, if any, is at a specified position.</span></span> <span data-ttu-id="e3874-401">Позиция элементов списка-представлений задается в *координатах представления*, которые являются координатами клиента в смещении по позиции прокрутки.</span><span class="sxs-lookup"><span data-stu-id="e3874-401">The position of list-view items is specified in *view coordinates*, which are client coordinates offset by the scroll position.</span></span>

<span data-ttu-id="e3874-402">Чтобы извлечь и задать позицию элемента, используйте сообщения [**LVM \_ Жетитемпоситион**](lvm-getitemposition.md) и [**LVM \_ сетитемпоситион**](lvm-setitemposition.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-402">To retrieve and set an item's position, use the [**LVM\_GETITEMPOSITION**](lvm-getitemposition.md) and [**LVM\_SETITEMPOSITION**](lvm-setitemposition.md) messages.</span></span> <span data-ttu-id="e3874-403">**LVM \_ ЖЕТИТЕМПОСИТИОН** работает для всех представлений, но **LVM \_ сетитемпоситион** работает только для просмотра значков и мелких значков.</span><span class="sxs-lookup"><span data-stu-id="e3874-403">**LVM\_GETITEMPOSITION** works for all views, but **LVM\_SETITEMPOSITION** works only for icon and small icon views.</span></span>

<span data-ttu-id="e3874-404">Вы можете определить, какой элемент находится в определенном расположении, используя сообщение [**LVM \_ HITTEST**](lvm-hittest.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-404">You can determine which item, if any, is at a particular location by using the [**LVM\_HITTEST**](lvm-hittest.md) message.</span></span>

<span data-ttu-id="e3874-405">Чтобы получить ограничивающий прямоугольник для элемента списка или только для его значка или метки, используйте сообщение [**LVM \_ жетитемрект**](lvm-getitemrect.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-405">To retrieve the bounding rectangle for a list item or only for its icon or label, use the [**LVM\_GETITEMRECT**](lvm-getitemrect.md) message.</span></span>

### <a name="arranging-sorting-and-finding-items"></a><span data-ttu-id="e3874-406">Упорядочение, сортировка и поиск элементов</span><span class="sxs-lookup"><span data-stu-id="e3874-406">Arranging, Sorting, and Finding Items</span></span>

<span data-ttu-id="e3874-407">Сообщения в виде списка можно использовать для упорядочения и сортировки элементов, а также для поиска элементов на основе их атрибутов или позиций.</span><span class="sxs-lookup"><span data-stu-id="e3874-407">You can use list-view messages to arrange and sort items and to find items based on their attributes or positions.</span></span> <span data-ttu-id="e3874-408">Размещение элементов перемещения для выровняйте по сетке, но индексы элементов не меняются.</span><span class="sxs-lookup"><span data-stu-id="e3874-408">Arranging repositions items to align on a grid, but the indexes of the items do not change.</span></span> <span data-ttu-id="e3874-409">Сортировка изменяет последовательность элементов (и их соответствующие индексы), а затем перемещает их соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="e3874-409">Sorting changes the sequence of items (and their corresponding indexes) and then repositions them accordingly.</span></span> <span data-ttu-id="e3874-410">Элементы можно упорядочивать только по значкам и мелким значкам, но элементы можно сортировать в любом представлении.</span><span class="sxs-lookup"><span data-stu-id="e3874-410">You can arrange items only in icon and small icon views, but you can sort items in any view.</span></span> <span data-ttu-id="e3874-411">Чтобы найти элементы, необходимо отправить сообщения представления списка, указывающие расположение или свойство элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-411">To find items, you send list-view messages that specify an item location or property.</span></span>

<span data-ttu-id="e3874-412">Для упорядочивания элементов используйте сообщение [**LVM \_ упорядочивать**](lvm-arrange.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-412">To arrange items, use the [**LVM\_ARRANGE**](lvm-arrange.md) message.</span></span> <span data-ttu-id="e3874-413">Можно обеспечить, чтобы элементы были упорядочены в любое время, указав стиль окна [**\_ автоупорядочивания LVS**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-413">You can ensure that items are arranged at all times by specifying the [**LVS\_AUTOARRANGE**](list-view-window-styles.md) window style.</span></span>

<span data-ttu-id="e3874-414">Чтобы отсортировать элементы, используйте сообщение [**LVM \_ сортитемс**](lvm-sortitems.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-414">To sort items, use the [**LVM\_SORTITEMS**](lvm-sortitems.md) message.</span></span> <span data-ttu-id="e3874-415">При сортировке с помощью этого сообщения указывается функция обратного вызова, определяемая приложением, которую вызывает элемент управления View List для сравнения относительного порядка любых двух элементов.</span><span class="sxs-lookup"><span data-stu-id="e3874-415">When you sort using this message, you specify an application-defined callback function that the list-view control calls to compare the relative order of any two items.</span></span> <span data-ttu-id="e3874-416">Элемент управления передает функции сравнения данные элемента, связанные с каждым из этих двух элементов.</span><span class="sxs-lookup"><span data-stu-id="e3874-416">The control passes to the comparison function the item data associated with each of the two items.</span></span> <span data-ttu-id="e3874-417">Данные элемента — это значение, указанное в элементе **lParam** структуры [**лвитем**](/windows/win32/api/commctrl/ns-commctrl-lvitema) элемента при вставке в список.</span><span class="sxs-lookup"><span data-stu-id="e3874-417">The item data is the value that was specified in the **lParam** member of the item's [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure when it was inserted into the list.</span></span> <span data-ttu-id="e3874-418">Указав соответствующие данные элемента и предоставив соответствующую функцию сравнения, можно отсортировать элементы по их метке, любому подэлементу или любому другому свойству.</span><span class="sxs-lookup"><span data-stu-id="e3874-418">By specifying the appropriate item data and supplying an appropriate comparison function, you can sort items by their label, by any subitem, or by any other property.</span></span> <span data-ttu-id="e3874-419">Обратите внимание, что элементы сортировки не упорядочивают соответствующие подэлементы.</span><span class="sxs-lookup"><span data-stu-id="e3874-419">Note that sorting items does not reorder the corresponding subitems.</span></span> <span data-ttu-id="e3874-420">Когда элементы переупорядочиваются, их соответствующие подэлементы переносятся вместе с ними. то есть все строки хранятся вместе.</span><span class="sxs-lookup"><span data-stu-id="e3874-420">When items are reordered, their corresponding subitems are carried with them; that is, whole rows are kept together.</span></span> <span data-ttu-id="e3874-421">Чтобы упорядочить столбцы отдельно друг от друга, отсоединение подэлементов от их элементов, необходимо повторно создать столбцы после сортировки с помощью [**LVM \_ сетитем**](lvm-setitem.md).</span><span class="sxs-lookup"><span data-stu-id="e3874-421">To order the columns separately from one another, detaching the subitems from their items, you must regenerate the columns after sorting using [**LVM\_SETITEM**](lvm-setitem.md).</span></span>

<span data-ttu-id="e3874-422">Можно гарантировать, что элемент управления "представление списка" всегда сортируется с указанием стиля окна [**LVS \_ Сортасцендинг**](list-view-window-styles.md) или [**LVS \_ сортдесцендинг**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-422">You can ensure that a list-view control is always sorted by specifying the [**LVS\_SORTASCENDING**](list-view-window-styles.md) or [**LVS\_SORTDESCENDING**](list-view-window-styles.md) window style.</span></span> <span data-ttu-id="e3874-423">Элементы управления с этими стилями используют текст метки элементов для сортировки в порядке возрастания или убывания.</span><span class="sxs-lookup"><span data-stu-id="e3874-423">Controls with these styles use the label text of the items to sort them in ascending or descending order.</span></span> <span data-ttu-id="e3874-424">Невозможно предоставить функцию сравнения при использовании этих стилей окна.</span><span class="sxs-lookup"><span data-stu-id="e3874-424">You cannot supply a comparison function when using these window styles.</span></span> <span data-ttu-id="e3874-425">Если элемент управления "представление списка" имеет один из этих стилей, [**сообщение \_ LVM INSERTITEM**](lvm-insertitem.md) будет неудачным, если вы попытаетесь вставить элемент с **LPSTR \_ тексткаллбакк** в качестве элемента **псзтекст** структуры [**лвитем**](/windows/win32/api/commctrl/ns-commctrl-lvitema) .</span><span class="sxs-lookup"><span data-stu-id="e3874-425">If a list-view control has either of these styles, an [**LVM\_INSERTITEM**](lvm-insertitem.md) message will fail if you try to insert an item that has **LPSTR\_TEXTCALLBACK** as the **pszText** member of its [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure.</span></span>

<span data-ttu-id="e3874-426">Элемент List-View с конкретными свойствами можно найти с помощью сообщения [**LVM \_ FINDITEM**](lvm-finditem.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-426">You can find a list-view item with specific properties by using the [**LVM\_FINDITEM**](lvm-finditem.md) message.</span></span> <span data-ttu-id="e3874-427">Элемент списка, расположенный в указанном состоянии и имеющий указанную связь с данным элементом, можно найти с помощью сообщения [**LVM \_ жетнекститем**](lvm-getnextitem.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-427">You can find a list-view item that is in a specified state and has a specified relationship to a given item by using the [**LVM\_GETNEXTITEM**](lvm-getnextitem.md) message.</span></span> <span data-ttu-id="e3874-428">Например, можно получить следующий выбранный элемент справа от указанного элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-428">For example, you can retrieve the next selected item to the right of a specified item.</span></span>

## <a name="list-view-columns"></a><span data-ttu-id="e3874-429">List-View столбцы</span><span class="sxs-lookup"><span data-stu-id="e3874-429">List-View Columns</span></span>

<span data-ttu-id="e3874-430">Столбцы управляют способом отображения элементов и их подэлементов в представлении отчетов.</span><span class="sxs-lookup"><span data-stu-id="e3874-430">Columns control the way items and their subitems are displayed in report view.</span></span> <span data-ttu-id="e3874-431">Каждый столбец имеет заголовок и ширину и связан с конкретным подэлементом. подэлемент ноль — это значок и метка элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-431">Each column has a title and width and is associated with a specific subitem; subitem zero is the item's icon and label.</span></span> <span data-ttu-id="e3874-432">Атрибуты столбца определяются структурой [**LVCOLUMN**](/windows/win32/api/commctrl/ns-commctrl-lvcolumna) .</span><span class="sxs-lookup"><span data-stu-id="e3874-432">The attributes of a column are defined by an [**LVCOLUMN**](/windows/win32/api/commctrl/ns-commctrl-lvcolumna) structure.</span></span>

<span data-ttu-id="e3874-433">Чтобы добавить столбец в элемент управления "представление списка", используйте сообщение [**LVM \_ инсертколумн**](lvm-insertcolumn.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-433">To add a column to a list-view control, use the [**LVM\_INSERTCOLUMN**](lvm-insertcolumn.md) message.</span></span> <span data-ttu-id="e3874-434">Чтобы удалить столбец, используйте сообщение [**LVM \_ делетеколумн**](lvm-deletecolumn.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-434">To delete a column, use the [**LVM\_DELETECOLUMN**](lvm-deletecolumn.md) message.</span></span>

> [!Note]  
> <span data-ttu-id="e3874-435">Удаление нулевого столбца элемента управления "представление списка" поддерживается только в ComCtl32.dll версии 6 и более поздних.</span><span class="sxs-lookup"><span data-stu-id="e3874-435">Deleting column zero of a list-view control is supported only in ComCtl32.dll version 6 and later.</span></span> <span data-ttu-id="e3874-436">Версия 5 также поддерживает удаление нулевого столбца, но только после использования [**CCM \_ сетверсион**](ccm-setversion.md) для установки версии 5 или более поздней.</span><span class="sxs-lookup"><span data-stu-id="e3874-436">Version 5 also supports deleting column zero, but only after you use [**CCM\_SETVERSION**](ccm-setversion.md) to set the version to 5 or later.</span></span> <span data-ttu-id="e3874-437">Версии до версии 5 не поддерживают удаление нулевого столбца.</span><span class="sxs-lookup"><span data-stu-id="e3874-437">Versions prior to version 5 do not support deleting column zero.</span></span>

 

<span data-ttu-id="e3874-438">Можно извлекать и изменять свойства существующего столбца с помощью сообщений [**LVM \_**](lvm-getcolumn.md) и [**LVM \_ сетколумн**](lvm-setcolumn.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-438">You can retrieve and change the properties of an existing column by using the [**LVM\_GETCOLUMN**](lvm-getcolumn.md) and [**LVM\_SETCOLUMN**](lvm-setcolumn.md) messages.</span></span> <span data-ttu-id="e3874-439">Чтобы извлечь или изменить ширину столбца, используйте сообщения [**LVM \_ Жетколумнвидс**](lvm-getcolumnwidth.md) и [**LVM \_ сетколумнвидс**](lvm-setcolumnwidth.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-439">To retrieve or change a column's width, use the [**LVM\_GETCOLUMNWIDTH**](lvm-getcolumnwidth.md) and [**LVM\_SETCOLUMNWIDTH**](lvm-setcolumnwidth.md) messages.</span></span>

<span data-ttu-id="e3874-440">Если не задан стиль окна [**LVS \_ ноколумнхеадер**](list-view-window-styles.md) , в представлении отчета отображаются заголовки столбцов.</span><span class="sxs-lookup"><span data-stu-id="e3874-440">Unless the [**LVS\_NOCOLUMNHEADER**](list-view-window-styles.md) window style is specified, column headers appear in report view.</span></span> <span data-ttu-id="e3874-441">Пользователь может щелкнуть заголовок столбца, что приведет к отправке кода уведомления [**ЛВН \_ колумнкликк**](lvn-columnclick.md) в родительское окно.</span><span class="sxs-lookup"><span data-stu-id="e3874-441">The user can click a column header, causing an [**LVN\_COLUMNCLICK**](lvn-columnclick.md) notification code to be sent to the parent window.</span></span> <span data-ttu-id="e3874-442">Как правило, родительское окно сортирует элемент управления "список" по заданному столбцу при щелчке.</span><span class="sxs-lookup"><span data-stu-id="e3874-442">Typically, the parent window sorts the list-view control by the specified column when this clicking occurs.</span></span> <span data-ttu-id="e3874-443">Пользователь может также перетаскивать направляющие столбцов между заголовками для изменения размера столбцов.</span><span class="sxs-lookup"><span data-stu-id="e3874-443">The user can also drag the column guides between the headers to size the columns.</span></span>

<span data-ttu-id="e3874-444">Элементы управления "представление списка" могут отображать изображения рядом с заголовками столбцов.</span><span class="sxs-lookup"><span data-stu-id="e3874-444">List-view controls can display images next to column titles.</span></span> <span data-ttu-id="e3874-445">Чтобы реализовать эту функцию, укажите значение **\_ изображения лвкф** и назначьте индекс изображения элементу **иимаже** в структуре [**LVCOLUMN**](/windows/win32/api/commctrl/ns-commctrl-lvcolumna) .</span><span class="sxs-lookup"><span data-stu-id="e3874-445">To implement this feature, specify the **LVCF\_IMAGE** value and assign the index of the image to the **iImage** member in the [**LVCOLUMN**](/windows/win32/api/commctrl/ns-commctrl-lvcolumna) structure.</span></span>

<span data-ttu-id="e3874-446">Элементы управления "представление списка" могут задавать порядок, в котором отображаются столбцы.</span><span class="sxs-lookup"><span data-stu-id="e3874-446">List-view controls can set the order in which columns are displayed.</span></span> <span data-ttu-id="e3874-447">Чтобы реализовать эту функцию, укажите значение **\_ порядка лвкф** и назначьте порядок столбцов элементу **иордер** в структуре [**LVCOLUMN**](/windows/win32/api/commctrl/ns-commctrl-lvcolumna) .</span><span class="sxs-lookup"><span data-stu-id="e3874-447">To implement this feature, specify the **LVCF\_ORDER** value and assign the column order to the **iOrder** member in the [**LVCOLUMN**](/windows/win32/api/commctrl/ns-commctrl-lvcolumna) structure.</span></span> <span data-ttu-id="e3874-448">Порядок столбцов основан на отсчете от нуля и находится в порядке слева направо.</span><span class="sxs-lookup"><span data-stu-id="e3874-448">The column order is zero-based and is in left-to-right order.</span></span> <span data-ttu-id="e3874-449">Например, ноль обозначает крайний левый столбец.</span><span class="sxs-lookup"><span data-stu-id="e3874-449">For example, zero indicates the leftmost column.</span></span>

## <a name="list-view-scroll-position"></a><span data-ttu-id="e3874-450">List-View позицией прокрутки</span><span class="sxs-lookup"><span data-stu-id="e3874-450">List-View Scroll Position</span></span>

<span data-ttu-id="e3874-451">Если не указан стиль окна [**LVS- \_ Scroll**](list-view-window-styles.md) , элемент управления "представление списка" можно прокручивать, чтобы показать больше элементов, чем может уместиться в клиентской области элемента управления.</span><span class="sxs-lookup"><span data-stu-id="e3874-451">Unless the [**LVS\_NOSCROLL**](list-view-window-styles.md) window style is specified, a list-view control can be scrolled to show more items than can fit in the client area of the control.</span></span> <span data-ttu-id="e3874-452">Можно получить позицию прокрутки элемента управления списка и связанную с ним информацию, прокрутить элемент управления "представление списка" на указанное значение или прокрутить элемент управления "представление списка" таким образом, чтобы указанный элемент списка был видим.</span><span class="sxs-lookup"><span data-stu-id="e3874-452">You can retrieve a list-view control's scroll position and related information, scroll a list-view control by a specified amount, or scroll a list-view control so that a specified list item is visible.</span></span>

<span data-ttu-id="e3874-453">В представлении значков или мелкие значки текущая точка прокрутки определяется *источником представления*.</span><span class="sxs-lookup"><span data-stu-id="e3874-453">In icon view or small icon view, the current scroll position is defined by the *view origin*.</span></span> <span data-ttu-id="e3874-454">Источник представления — это набор координат относительно видимой области элемента управления "представление списка", который соответствует координатам представления (0, 0).</span><span class="sxs-lookup"><span data-stu-id="e3874-454">The view origin is the set of coordinates, relative to the visible area of the list-view control, that correspond to the view coordinates (0, 0).</span></span> <span data-ttu-id="e3874-455">Для получения текущего источника представления используйте сообщение [**LVM \_ Origin**](lvm-getorigin.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-455">To retrieve the current view origin, use the [**LVM\_GETORIGIN**](lvm-getorigin.md) message.</span></span> <span data-ttu-id="e3874-456">Это сообщение должно использоваться только в виде значков или мелких значков; Он возвращает ошибку в списке или в представлении отчетов.</span><span class="sxs-lookup"><span data-stu-id="e3874-456">This message should be used only in icon or small icon view; it returns an error in list or report view.</span></span>

<span data-ttu-id="e3874-457">В списке или представлении отчетов текущая позиция прокрутки определяется *верхним индексом*.</span><span class="sxs-lookup"><span data-stu-id="e3874-457">In list or report view, the current scroll position is defined by the *top index*.</span></span> <span data-ttu-id="e3874-458">Верхний индекс — это индекс первого видимого элемента в элементе управления "представление списка".</span><span class="sxs-lookup"><span data-stu-id="e3874-458">The top index is the index of the first visible item in the list-view control.</span></span> <span data-ttu-id="e3874-459">Чтобы получить текущий индекс Top, используйте сообщение [**LVM \_ жеттопиндекс**](lvm-gettopindex.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-459">To retrieve the current top index, use the [**LVM\_GETTOPINDEX**](lvm-gettopindex.md) message.</span></span> <span data-ttu-id="e3874-460">Это сообщение возвращает допустимый результат только в списке или представлении отчетов; Он возвращает ноль в виде значка или мелкого значка.</span><span class="sxs-lookup"><span data-stu-id="e3874-460">This message returns a valid result only in list or report view; it returns zero in icon or small icon view.</span></span>

<span data-ttu-id="e3874-461">Можно использовать сообщение [**LVM \_ жетвиеврект**](lvm-getviewrect.md) для получения ограничивающего прямоугольника всех элементов в элементе управления "представление списка" относительно видимой области элемента управления.</span><span class="sxs-lookup"><span data-stu-id="e3874-461">You can use the [**LVM\_GETVIEWRECT**](lvm-getviewrect.md) message to retrieve the bounding rectangle of all items in a list-view control, relative to the visible area of the control.</span></span>

<span data-ttu-id="e3874-462">Сообщение [**LVM \_ жеткаунтперпаже**](lvm-getcountperpage.md) возвращает количество элементов, которые помещаются на одной странице элемента управления "список".</span><span class="sxs-lookup"><span data-stu-id="e3874-462">The [**LVM\_GETCOUNTPERPAGE**](lvm-getcountperpage.md) message returns the number of items that fit in one page of the list-view control.</span></span> <span data-ttu-id="e3874-463">Это сообщение возвращает допустимый результат только в представлениях списка и отчетов. в представлениях «значок» и «мелкие значки» возвращается общее число элементов.</span><span class="sxs-lookup"><span data-stu-id="e3874-463">This message returns a valid result only in list and report views; in icon and small icon views, it returns the total number of items.</span></span>

<span data-ttu-id="e3874-464">Чтобы прокручивать элемент управления "представление списка" по заданному объему, используйте сообщение [**\_ прокрутки LVM**](lvm-scroll.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-464">To scroll a list-view control by a specific amount, use the [**LVM\_SCROLL**](lvm-scroll.md) message.</span></span> <span data-ttu-id="e3874-465">С помощью сообщения [**LVM \_ енсуревисибле**](lvm-ensurevisible.md) можно прокручивать элемент управления "список", если это необходимо, чтобы убедиться, что указанный элемент является видимым.</span><span class="sxs-lookup"><span data-stu-id="e3874-465">Using the [**LVM\_ENSUREVISIBLE**](lvm-ensurevisible.md) message, you can scroll the list-view control, if necessary, to ensure that a specified item is visible.</span></span>

## <a name="list-view-label-editing"></a><span data-ttu-id="e3874-466">Изменение меток List-View</span><span class="sxs-lookup"><span data-stu-id="e3874-466">List-View Label Editing</span></span>

<span data-ttu-id="e3874-467">Элемент управления "представление списка", имеющий стиль окна [**LVS \_ едитлабелс**](list-view-window-styles.md) , позволяет пользователю изменять метки элементов на месте.</span><span class="sxs-lookup"><span data-stu-id="e3874-467">A list-view control that has the [**LVS\_EDITLABELS**](list-view-window-styles.md) window style enables a user to edit item labels in place.</span></span> <span data-ttu-id="e3874-468">Пользователь начинает редактирование, щелкая метку элемента, который находится в фокусе.</span><span class="sxs-lookup"><span data-stu-id="e3874-468">The user begins editing by clicking the label of an item that has the focus.</span></span> <span data-ttu-id="e3874-469">Кроме того, приложение может начать редактирование автоматически с помощью сообщения [**LVM \_ едитлабел**](lvm-editlabel.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-469">Alternatively, an application can begin editing automatically by using the [**LVM\_EDITLABEL**](lvm-editlabel.md) message.</span></span> <span data-ttu-id="e3874-470">Элемент управления "представление списка" уведомляет родительское окно о начале редактирования, а также о его отмене или завершении.</span><span class="sxs-lookup"><span data-stu-id="e3874-470">The list-view control notifies the parent window when editing begins and when it is canceled or completed.</span></span> <span data-ttu-id="e3874-471">По завершении редактирования родительское окно отвечает за обновление метки элемента, если это уместно.</span><span class="sxs-lookup"><span data-stu-id="e3874-471">When editing is completed, the parent window is responsible for updating the item's label, if appropriate.</span></span>

<span data-ttu-id="e3874-472">При начале редактирования метки создается, размещается и инициализируется [элемент управления Edit](edit-controls.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-472">When label editing begins, an [edit control](edit-controls.md) is created, positioned, and initialized.</span></span> <span data-ttu-id="e3874-473">Перед отображением элемент управления "представление списка" отправляет родительскому окну код уведомления [ЛВН \_ бегинлабеледит](lvn-beginlabeledit.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-473">Before it is displayed, the list-view control sends its parent window an [LVN\_BEGINLABELEDIT](lvn-beginlabeledit.md) notification code.</span></span> <span data-ttu-id="e3874-474">Если необходимо изменить процесс редактирования меток, можно реализовать обработчик для этого уведомления.</span><span class="sxs-lookup"><span data-stu-id="e3874-474">If you need to modify the label editing process, you can implement a handler for this notification.</span></span>

<span data-ttu-id="e3874-475">Один из способов использования обработчика уведомлений [ЛВН \_ бегинлабеледит](lvn-beginlabeledit.md) — управлять тем, какие метки пользователь может изменять.</span><span class="sxs-lookup"><span data-stu-id="e3874-475">One use for an [LVN\_BEGINLABELEDIT](lvn-beginlabeledit.md) notification handler is to control which labels the user can edit.</span></span> <span data-ttu-id="e3874-476">Чтобы предотвратить изменение метки, возвращайте ненулевое значение.</span><span class="sxs-lookup"><span data-stu-id="e3874-476">To prevent label editing, return a nonzero value.</span></span> <span data-ttu-id="e3874-477">Чтобы настроить изменение метки, обработчик уведомлений получает дескриптор элемента управления Editing, отправляя сообщение [**LVM \_ жетедитконтрол**](lvm-geteditcontrol.md) в элемент управления List-View.</span><span class="sxs-lookup"><span data-stu-id="e3874-477">To customize label editing, have the notification handler retrieve a handle to the edit control by sending an [**LVM\_GETEDITCONTROL**](lvm-geteditcontrol.md) message to the list-view control.</span></span> <span data-ttu-id="e3874-478">После получения этого маркера можно настроить элемент управления "поле ввода", отправив обычные \_ сообщения EM XXX.</span><span class="sxs-lookup"><span data-stu-id="e3874-478">Once you have that handle, you can customize the edit control by sending the usual EM\_XXX messages.</span></span> <span data-ttu-id="e3874-479">Например, чтобы ограничить объем текста, который пользователь может ввести, отправьте сообщение об элементе управления Edit [**\_ лимиттекст EM**](em-limittext.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-479">For instance, to limit the amount of text a user can enter, send the edit control an [**EM\_LIMITTEXT**](em-limittext.md) message.</span></span> <span data-ttu-id="e3874-480">Можно изменить текст элемента управления "поле ввода" по умолчанию на [**SetWindowText**](/windows/desktop/api/winuser/nf-winuser-setwindowtexta).</span><span class="sxs-lookup"><span data-stu-id="e3874-480">You can change the edit control's default text with [**SetWindowText**](/windows/desktop/api/winuser/nf-winuser-setwindowtexta).</span></span> <span data-ttu-id="e3874-481">Можно даже создать подкласс элемента управления "поле ввода" для перехвата и удаления недопустимых символов.</span><span class="sxs-lookup"><span data-stu-id="e3874-481">You can even subclass the edit control to intercept and discard invalid characters.</span></span>

<span data-ttu-id="e3874-482">Когда изменение метки отменено или завершено, элемент управления "представление списка" отправляет родительскому окну код уведомления [ЛВН \_ ендлабеледит](lvn-endlabeledit.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-482">When label editing is canceled or completed, a list-view control sends its parent window an [LVN\_ENDLABELEDIT](lvn-endlabeledit.md) notification code.</span></span> <span data-ttu-id="e3874-483">Параметр *lParam* является адресом структуры [**нмлвдиспинфо**](/windows/win32/api/commctrl/ns-commctrl-nmlvdispinfoa) .</span><span class="sxs-lookup"><span data-stu-id="e3874-483">The *lParam* parameter is the address of an [**NMLVDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmlvdispinfoa) structure.</span></span> <span data-ttu-id="e3874-484">**Элемент** этой структуры является структурой [**лвитем**](/windows/win32/api/commctrl/ns-commctrl-lvitema) , членом которой **Член iItem** является определение элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-484">The **item** member of this structure is an [**LVITEM**](/windows/win32/api/commctrl/ns-commctrl-lvitema) structure whose **iItem** member identifies the item.</span></span> <span data-ttu-id="e3874-485">Если редактирование отменено, элемент **псзтекст** структуры **Лвитем** имеет **значение NULL**. в противном случае **псзтекст** является адресом редактируемого текста.</span><span class="sxs-lookup"><span data-stu-id="e3874-485">If editing is canceled, the **pszText** member of the **LVITEM** structure is **NULL**; otherwise, **pszText** is the address of the edited text.</span></span> <span data-ttu-id="e3874-486">Родительское окно отвечает за обновление метки элемента, если требуется разместить новую метку.</span><span class="sxs-lookup"><span data-stu-id="e3874-486">The parent window is responsible for updating the item's label if it wants to keep the new label.</span></span>

## <a name="list-view-colors"></a><span data-ttu-id="e3874-487">Цвета List-View</span><span class="sxs-lookup"><span data-stu-id="e3874-487">List-View Colors</span></span>

<span data-ttu-id="e3874-488">Приложение может извлекать и задавать три цвета для элемента управления "представление списка".</span><span class="sxs-lookup"><span data-stu-id="e3874-488">An application can retrieve and set three colors for a list-view control.</span></span>



| <span data-ttu-id="e3874-489">Color</span><span class="sxs-lookup"><span data-stu-id="e3874-489">Color</span></span>                   | <span data-ttu-id="e3874-490">Сообщения, используемые для получения и задания цветов</span><span class="sxs-lookup"><span data-stu-id="e3874-490">Messages used to retrieve and set colors</span></span>                                                             |
|-------------------------|------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e3874-491">Цвет текста</span><span class="sxs-lookup"><span data-stu-id="e3874-491">Text color</span></span>              | <span data-ttu-id="e3874-492">[**LVM \_ жеттекстколор**](lvm-gettextcolor.md), [ **LVM \_ сеттекстколор**](lvm-settextcolor.md)</span><span class="sxs-lookup"><span data-stu-id="e3874-492">[**LVM\_GETTEXTCOLOR**](lvm-gettextcolor.md), [**LVM\_SETTEXTCOLOR**](lvm-settextcolor.md)</span></span>         |
| <span data-ttu-id="e3874-493">Цвет фона текста</span><span class="sxs-lookup"><span data-stu-id="e3874-493">Text background color</span></span>   | <span data-ttu-id="e3874-494">[**LVM \_ жеттекстбкколор**](lvm-gettextbkcolor.md), [ **LVM \_ сеттекстбкколор**](lvm-settextbkcolor.md)</span><span class="sxs-lookup"><span data-stu-id="e3874-494">[**LVM\_GETTEXTBKCOLOR**](lvm-gettextbkcolor.md), [**LVM\_SETTEXTBKCOLOR**](lvm-settextbkcolor.md)</span></span> |
| <span data-ttu-id="e3874-495">Цвет фона окна</span><span class="sxs-lookup"><span data-stu-id="e3874-495">Window background color</span></span> | <span data-ttu-id="e3874-496">[**LVM \_ жетбкколор**](lvm-getbkcolor.md), [ **LVM \_ сетбкколор**](lvm-setbkcolor.md)</span><span class="sxs-lookup"><span data-stu-id="e3874-496">[**LVM\_GETBKCOLOR**](lvm-getbkcolor.md), [**LVM\_SETBKCOLOR**](lvm-setbkcolor.md)</span></span>                 |



 

<span data-ttu-id="e3874-497">Чтобы более значительно настроить внешний вид элемента управления "представление списка", используйте [NM \_ кустомдрав (представление списка)](nm-customdraw-list-view.md) или используйте стили оформления (см. раздел [стили оформления](themes-overview.md) и [Включение визуальных стилей](cookbook-overview.md)).</span><span class="sxs-lookup"><span data-stu-id="e3874-497">To customize the appearance of a list-view control more significantly, use [NM\_CUSTOMDRAW (list view)](nm-customdraw-list-view.md) or use visual styles (see [Visual Styles](themes-overview.md) and [Enabling Visual Styles](cookbook-overview.md)).</span></span>

## <a name="arranging-list-items-by-group"></a><span data-ttu-id="e3874-498">Упорядочение элементов списка по группам</span><span class="sxs-lookup"><span data-stu-id="e3874-498">Arranging List Items by Group</span></span>

<span data-ttu-id="e3874-499">Функции группирования элемента управления "представление списка" позволяют визуально группировать логически связанные наборы элементов.</span><span class="sxs-lookup"><span data-stu-id="e3874-499">The grouping features of the list-view control enable you to visually group logically related sets of items.</span></span> <span data-ttu-id="e3874-500">Группы можно создавать на основе свойств, атрибутов или других характеристик элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-500">Groups can be created based on item properties, attributes, or other characteristics.</span></span> <span data-ttu-id="e3874-501">Обычно эти группы разделяются на экране горизонтальным верхним колонтитулом, содержащим имя группы.</span><span class="sxs-lookup"><span data-stu-id="e3874-501">These groups are typically separated on the screen by a horizontal header that contains the name of the group.</span></span> <span data-ttu-id="e3874-502">На следующем снимке экрана показаны сгруппированные элементы.</span><span class="sxs-lookup"><span data-stu-id="e3874-502">The following screen shot shows grouped items.</span></span>

![снимок экрана элемента управления "список" с собаки в одной группе и кошки в другой группе](images/lv-groups.png)

<span data-ttu-id="e3874-504">Структура [**лвграуп**](/windows/win32/api/commctrl/ns-commctrl-lvgroup) используется для хранения сведений о группе, например текста верхнего и нижнего колонтитула, текущего состояния группы и т. д.</span><span class="sxs-lookup"><span data-stu-id="e3874-504">You use the [**LVGROUP**](/windows/win32/api/commctrl/ns-commctrl-lvgroup) structure to store information about a group, such as the header and footer text, the current state of the group, and so on.</span></span> <span data-ttu-id="e3874-505">API группирования включает сообщения, позволяющие управлять группами и элементами групп путем добавления элементов в группы, добавления групп в представления, сортировки элементов групп и запросов групп для размера элемента и других сведений.</span><span class="sxs-lookup"><span data-stu-id="e3874-505">The grouping API includes messages that enable you to manage groups and group elements by adding items to groups, adding groups to views, sorting group items, and querying groups for item size and other information.</span></span> <span data-ttu-id="e3874-506">Например, можно задать и получить параметры вывода для каждой группы с помощью макросов [**ListView \_ Сетграупметрикс**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setgroupmetrics) и [**ListView \_ жетграупметрикс**](/windows/desktop/api/Commctrl/nf-commctrl-listview_getgroupmetrics) .</span><span class="sxs-lookup"><span data-stu-id="e3874-506">For example, you can set and retrieve display parameters for each group by using the [**ListView\_SetGroupMetrics**](/windows/desktop/api/Commctrl/nf-commctrl-listview_setgroupmetrics) and [**ListView\_GetGroupMetrics**](/windows/desktop/api/Commctrl/nf-commctrl-listview_getgroupmetrics) macros.</span></span>

<span data-ttu-id="e3874-507">Группирование доступно во всех представлениях, кроме представления списка.</span><span class="sxs-lookup"><span data-stu-id="e3874-507">Grouping is available in all views except list view.</span></span> <span data-ttu-id="e3874-508">Он недоступен для элементов управления, имеющих стиль [**LVS \_ овнердата**](list-view-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="e3874-508">It is not available on controls that have the [**LVS\_OWNERDATA**](list-view-window-styles.md) style.</span></span>

<span data-ttu-id="e3874-509">Дополнительные сведения см. [в разделе Использование элементов управления List-View](using-list-view-controls.md).</span><span class="sxs-lookup"><span data-stu-id="e3874-509">For more information, see [Using List-View Controls](using-list-view-controls.md).</span></span>

## <a name="insertion-marks"></a><span data-ttu-id="e3874-510">Метки вставки</span><span class="sxs-lookup"><span data-stu-id="e3874-510">Insertion Marks</span></span>

<span data-ttu-id="e3874-511">Метки вставки показывают пользователей, в которых будут помещены перетаскиваемые элементы.</span><span class="sxs-lookup"><span data-stu-id="e3874-511">Insertion marks show users where dragged items will be placed.</span></span> <span data-ttu-id="e3874-512">Метки вставки, отображаемые в текущий момент, когда пользователь перетаскивает элемент в меню " **Пуск** " или панель быстрого запуска.</span><span class="sxs-lookup"><span data-stu-id="e3874-512">Insertion marks currently display when the user drags an item into the **Start** menu or Quick Launch bar.</span></span> <span data-ttu-id="e3874-513">Метка вставки также работает для списков, для которых настроено автоматическое расположение.</span><span class="sxs-lookup"><span data-stu-id="e3874-513">The insertion mark also works for lists that are set to autoarrange.</span></span> <span data-ttu-id="e3874-514">Когда пользователь перетаскивает элемент на точку между двумя другими элементами, метка вставки показывает ожидаемое новое расположение элемента.</span><span class="sxs-lookup"><span data-stu-id="e3874-514">When a user drags an item to a point between two other items, the insertion mark shows the item's expected new location.</span></span> <span data-ttu-id="e3874-515">На следующем снимке экрана показана метка вставки.</span><span class="sxs-lookup"><span data-stu-id="e3874-515">The following screen shot shows an insertion mark.</span></span>

![снимок экрана, на котором показана метка вставки при перетаскивании одного файла между двумя другими в элементе управления "представление списка"](images/insertmark.png)

<span data-ttu-id="e3874-517">Элементы API пометки вставки позволяют размещать метки вставки, предоставляя сообщения и флаги, которые выполняют обнаружение попаданий, которые определяют расположение и внешний вид метки вставки по элементу, а также запрашивают сведения о текущем размере и внешнем виде метки вставки.</span><span class="sxs-lookup"><span data-stu-id="e3874-517">The insertion mark API elements enable placement of insertion marks by providing messages and flags that perform hit detection, that specify the location and appearance of the insertion mark by item, and that query for information about the current size and appearance of the insertion mark.</span></span>

## <a name="see-also"></a><span data-ttu-id="e3874-518">См. также</span><span class="sxs-lookup"><span data-stu-id="e3874-518">See also</span></span>

* [<span data-ttu-id="e3874-519">Пример виртуального элемента управления ListView</span><span class="sxs-lookup"><span data-stu-id="e3874-519">Virtual listview control sample</span></span>](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/winui/controls/common/vlistvw)
