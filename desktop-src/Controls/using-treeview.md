---
title: Использование элементов управления Tree-View
description: В этом разделе содержатся сведения о реализации и примеры кода для работы с элементами управления "дерево-представление".
ms.assetid: 37736770-5030-4f8a-a020-6897ed5f4e96
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d9ed8d1040a635964e772b8399a5c476e67f9aba
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "105654379"
---
# <a name="using-tree-view-controls"></a><span data-ttu-id="84140-103">Использование элементов управления Tree-View</span><span class="sxs-lookup"><span data-stu-id="84140-103">Using Tree-View Controls</span></span>

<span data-ttu-id="84140-104">В этом разделе содержатся сведения о реализации и примеры кода для работы с элементами управления "дерево-представление".</span><span class="sxs-lookup"><span data-stu-id="84140-104">This section contains implementation details and example code for working with tree-view controls.</span></span>

## <a name="in-this-section"></a><span data-ttu-id="84140-105">В этом разделе</span><span class="sxs-lookup"><span data-stu-id="84140-105">In this section</span></span>



| <span data-ttu-id="84140-106">Раздел</span><span class="sxs-lookup"><span data-stu-id="84140-106">Topic</span></span>                                                                                | <span data-ttu-id="84140-107">Описание</span><span class="sxs-lookup"><span data-stu-id="84140-107">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|--------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="84140-108">Создание элемента управления Tree-View</span><span class="sxs-lookup"><span data-stu-id="84140-108">How to Create a Tree-View Control</span></span>](create-a-tree-view-control.md)<br/>       | <span data-ttu-id="84140-109">Чтобы создать элемент управления представления в виде дерева, используйте функцию [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) , указав значение [**WC \_ TREEVIEW**](common-control-window-classes.md) для класса Window.</span><span class="sxs-lookup"><span data-stu-id="84140-109">To create a tree-view control, use the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function, specifying the [**WC\_TREEVIEW**](common-control-window-classes.md) value for the window class.</span></span> <span data-ttu-id="84140-110">Класс окна древовидного представления регистрируется в адресном пространстве приложения при загрузке библиотеки DLL общего контроля.</span><span class="sxs-lookup"><span data-stu-id="84140-110">The tree-view window class is registered in the application's address space when the common control DLL is loaded.</span></span> <span data-ttu-id="84140-111">Чтобы убедиться, что библиотека DLL загружена, используйте функцию [**иниткоммонконтролс**](/windows/desktop/api/Commctrl/nf-commctrl-initcommoncontrols) .</span><span class="sxs-lookup"><span data-stu-id="84140-111">To ensure that the DLL is loaded, use the [**InitCommonControls**](/windows/desktop/api/Commctrl/nf-commctrl-initcommoncontrols) function.</span></span> <br/>                                                                    |
| [<span data-ttu-id="84140-112">Инициализация списка изображений</span><span class="sxs-lookup"><span data-stu-id="84140-112">How to Initialize the Image List</span></span>](initialize-the-image-list.md)<br/>         | <span data-ttu-id="84140-113">Каждый элемент в элементе управления "дерево" может иметь два связанных с ним изображения.</span><span class="sxs-lookup"><span data-stu-id="84140-113">Every item in a tree-view control can have two images associated with it.</span></span> <span data-ttu-id="84140-114">Элемент отображает одно изображение, если оно выбрано, а другое — нет.</span><span class="sxs-lookup"><span data-stu-id="84140-114">An item displays one image when it is selected and the other when it is not.</span></span> <span data-ttu-id="84140-115">Чтобы включить изображения с элементами представления в виде дерева, сначала используйте функции [списков изображений](image-lists.md) , чтобы создать список изображений и добавить в него изображения.</span><span class="sxs-lookup"><span data-stu-id="84140-115">To include images with tree-view items, first use the [Image Lists](image-lists.md) functions to create an image list and add images to it.</span></span> <span data-ttu-id="84140-116">Затем свяжите список изображений с элементом управления "дерево-представление", используя сообщение [**TVM \_ сетимажелист**](tvm-setimagelist.md) .</span><span class="sxs-lookup"><span data-stu-id="84140-116">Then associate the image list with the tree-view control by using the [**TVM\_SETIMAGELIST**](tvm-setimagelist.md) message.</span></span> <br/>                                                                     |
| [<span data-ttu-id="84140-117">Добавление Tree-View элементов</span><span class="sxs-lookup"><span data-stu-id="84140-117">How to Add Tree-View Items</span></span>](add-tree-view-items.md)<br/>                     | <span data-ttu-id="84140-118">Вы добавляете элемент в элемент управления "дерево", отправляя сообщение [**TVM \_ INSERTITEM**](tvm-insertitem.md) в элемент управления.</span><span class="sxs-lookup"><span data-stu-id="84140-118">You add an item to a tree-view control by sending the [**TVM\_INSERTITEM**](tvm-insertitem.md) message to the control.</span></span> <span data-ttu-id="84140-119">Сообщение включает адрес структуры [**твинсертструкт**](/windows/win32/api/commctrl/ns-commctrl-tvinsertstructa) , задавая родительский элемент, элемент, после которого вставляется новый элемент, и структуру [**твитем**](/windows/win32/api/commctrl/ns-commctrl-tvitema) , определяющую атрибуты элемента.</span><span class="sxs-lookup"><span data-stu-id="84140-119">The message includes the address of a [**TVINSERTSTRUCT**](/windows/win32/api/commctrl/ns-commctrl-tvinsertstructa) structure, specifying the parent item, the item after which the new item is inserted, and a [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) structure that defines the attributes of the item.</span></span> <span data-ttu-id="84140-120">Атрибуты включают метку элемента, его выбранные и невыбранные изображения, а также 32-разрядное значение, определяемое приложением.</span><span class="sxs-lookup"><span data-stu-id="84140-120">The attributes include the item's label, its selected and nonselected images, and a 32-bit application-defined value.</span></span> <br/> |
| [<span data-ttu-id="84140-121">Перетаскивание элемента Tree-View</span><span class="sxs-lookup"><span data-stu-id="84140-121">How to Drag a Tree-View Item</span></span>](drag-a-tree-view-item.md)<br/>                 | <span data-ttu-id="84140-122">В этом разделе демонстрируется код для обработки перетаскивания элементов представления в виде дерева.</span><span class="sxs-lookup"><span data-stu-id="84140-122">This topic demonstrates code for handling dragging and dropping of tree-view items.</span></span> <span data-ttu-id="84140-123">Пример кода состоит из трех функций.</span><span class="sxs-lookup"><span data-stu-id="84140-123">The sample code consists of three functions.</span></span> <span data-ttu-id="84140-124">Первая функция начинает операцию перетаскивания, вторая функция перетаскивает изображение, а третья функция завершает операцию перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="84140-124">The first function begins the drag operation, the second function drags the image, and the third function ends the drag operation.</span></span> <br/>                                                                                                                                                                                                                                  |
| [<span data-ttu-id="84140-125">Работа с индексами изображений состояний</span><span class="sxs-lookup"><span data-stu-id="84140-125">How to Work With State Image Indexes</span></span>](work-with-state-image-indexes.md)<br/> | <span data-ttu-id="84140-126">Часто возникает путаница с тем, как задать и извлечь индекс изображения состояния в элементе управления "дерево-представление".</span><span class="sxs-lookup"><span data-stu-id="84140-126">There is often confusion about how to set and retrieve the state image index in a tree-view control.</span></span> <span data-ttu-id="84140-127">В следующих примерах демонстрируется правильный метод установки и получения индекса изображения состояния.</span><span class="sxs-lookup"><span data-stu-id="84140-127">The following examples demonstrate the proper method for setting and retrieving the state image index.</span></span> <span data-ttu-id="84140-128">В примерах предполагается, что в элементе управления "дерево" установлены только два индекса состояния: "снят" и "Проверено".</span><span class="sxs-lookup"><span data-stu-id="84140-128">The examples assume that there are only two state image indexes in the tree-view control, unchecked and checked.</span></span> <span data-ttu-id="84140-129">Если приложение содержит более двух, эти функции необходимо изменить, чтобы обрабатывать этот случай.</span><span class="sxs-lookup"><span data-stu-id="84140-129">If your application contains more than two, these functions will need to be modified to handle that case.</span></span> <br/>                                                               |
| [<span data-ttu-id="84140-130">Использование Tree-View Инфотипс</span><span class="sxs-lookup"><span data-stu-id="84140-130">How to Use Tree-View Infotips</span></span>](use-tree-view-infotips.md)<br/>               | <span data-ttu-id="84140-131">При применении стиля [**\_ подсказки «телевизоры**](tree-view-control-window-styles.md) » к элементу управления древовидного представления он создает [ТВН \_ жетинфотип](tvn-getinfotip.md) уведомления при наведении курсора на элемент в представлении в виде дерева.</span><span class="sxs-lookup"><span data-stu-id="84140-131">When you apply the [**TVS\_INFOTIP**](tree-view-control-window-styles.md) style to a tree-view control, it generates [TVN\_GETINFOTIP](tvn-getinfotip.md) notifications when the cursor is over an item in the tree view.</span></span> <span data-ttu-id="84140-132">Отвечая на это уведомление, можно задать текст, отображаемый в подсказке.</span><span class="sxs-lookup"><span data-stu-id="84140-132">By responding to this notification, you can set the text that appears in the infotip.</span></span> <br/>                                                                                                                                                                                    |



 

 

