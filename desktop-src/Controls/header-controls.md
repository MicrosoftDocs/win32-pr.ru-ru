---
title: Сведения об элементах управления "заголовок"
description: Элемент управления "заголовок" — это окно, которое обычно располагается над столбцами текста или чисел. Он содержит заголовок для каждого столбца, который можно разделить на части.
ms.assetid: b464fb9a-e342-4209-ba6f-15b5388f3914
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a6d9beaa9dc3bd8eb94d749ec271902a480b853e
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "103793951"
---
# <a name="about-header-controls"></a><span data-ttu-id="a607d-104">Сведения об элементах управления "заголовок"</span><span class="sxs-lookup"><span data-stu-id="a607d-104">About Header Controls</span></span>

<span data-ttu-id="a607d-105">Элемент управления "заголовок" — это окно, которое обычно располагается над столбцами текста или чисел.</span><span class="sxs-lookup"><span data-stu-id="a607d-105">A header control is a window that is usually positioned above columns of text or numbers.</span></span> <span data-ttu-id="a607d-106">Он содержит заголовок для каждого столбца, который можно разделить на части.</span><span class="sxs-lookup"><span data-stu-id="a607d-106">It contains a title for each column, and it can be divided into parts.</span></span> <span data-ttu-id="a607d-107">Пользователь может перетаскивать разделители, разделяющие части, для установки ширины каждого столбца.</span><span class="sxs-lookup"><span data-stu-id="a607d-107">The user can drag the dividers that separate the parts to set the width of each column.</span></span> <span data-ttu-id="a607d-108">На следующем рисунке показан элемент управления "заголовок" со столбцами с метками, которые предоставляют подробные сведения о файлах в каталоге.</span><span class="sxs-lookup"><span data-stu-id="a607d-108">The following illustration shows a header control that has labeled columns that give detailed information about files in a directory.</span></span>

![снимок экрана — диалоговое окно с элементом управления "заголовок с тремя столбцами"](images/header.png)

<span data-ttu-id="a607d-110">Элемент управления "заголовок" можно создать с помощью функции [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) , указав класс [**окна \_ заголовка WC**](common-control-window-classes.md) и соответствующие [стили элемента управления заголовка](header-control-styles.md).</span><span class="sxs-lookup"><span data-stu-id="a607d-110">You can create a header control by using the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function, specifying the [**WC\_HEADER**](common-control-window-classes.md) window class and the appropriate [Header Control Styles](header-control-styles.md).</span></span> <span data-ttu-id="a607d-111">Этот класс окна регистрируется при загрузке библиотеки DLL общих элементов управления.</span><span class="sxs-lookup"><span data-stu-id="a607d-111">This window class is registered when the common control DLL is loaded.</span></span> <span data-ttu-id="a607d-112">Чтобы убедиться, что библиотека DLL загружена, используйте функцию [**InitCommonControlsEx**](/windows/desktop/api/Commctrl/nf-commctrl-initcommoncontrolsex) .</span><span class="sxs-lookup"><span data-stu-id="a607d-112">To ensure that this DLL is loaded, use the [**InitCommonControlsEx**](/windows/desktop/api/Commctrl/nf-commctrl-initcommoncontrolsex) function.</span></span> <span data-ttu-id="a607d-113">После создания элемента управления "заголовок" его можно разделить на части, задать текст в каждой части и управлять внешним видом окна с помощью сообщений в окне заголовка.</span><span class="sxs-lookup"><span data-stu-id="a607d-113">After you create a header control, you can divide it into parts, set the text in each part, and control the appearance of the window by using header window messages.</span></span>

<span data-ttu-id="a607d-114">Элемент управления "заголовок" может быть создан как дочернее окно другого элемента управления, например списка.</span><span class="sxs-lookup"><span data-stu-id="a607d-114">A header control can be created as a child window of another control, such as a list box.</span></span> <span data-ttu-id="a607d-115">Однако родительский элемент управления не знает элемент управления "заголовок" и не допускает пространство, занимаемое заголовком, в результате чего элементы списка будут отображаться позади заголовка.</span><span class="sxs-lookup"><span data-stu-id="a607d-115">However, the parent control is not aware of the header control and does not allow for the space taken up by the header, with the result that list items will appear behind the header.</span></span> <span data-ttu-id="a607d-116">Если вы хотите использовать элемент управления "заголовок" в списке или другом элементе управления, родительский элемент управления должен быть нарисован владельцем, чтобы все элементы отображались в правильном положении.</span><span class="sxs-lookup"><span data-stu-id="a607d-116">If you wish to use a header control in a list box or other control, the parent control must be owner-drawn so that all items are displayed in the correct position.</span></span>

<span data-ttu-id="a607d-117">Элементы управления "представление списка" уже имеют элементы управления "заголовок".</span><span class="sxs-lookup"><span data-stu-id="a607d-117">List-view controls already have header controls.</span></span> <span data-ttu-id="a607d-118">Вместо создания элемента управления "заголовок" для элемента управления "представление списка" для получения существующего элемента управления используется [**LVMный \_**](lvm-getheader.md) верхний колонтитул или [**ListView \_**](/windows/desktop/api/Commctrl/nf-commctrl-listview_getheader) .</span><span class="sxs-lookup"><span data-stu-id="a607d-118">Instead of creating a header control for a list-view control, you use [**LVM\_GETHEADER**](lvm-getheader.md) or [**ListView\_GetHeader**](/windows/desktop/api/Commctrl/nf-commctrl-listview_getheader) to retrieve the existing control.</span></span>

-   [<span data-ttu-id="a607d-119">Размер и расположение элемента управления заголовка</span><span class="sxs-lookup"><span data-stu-id="a607d-119">Header Control Size and Position</span></span>](#header-control-size-and-position)
-   [<span data-ttu-id="a607d-120">Элементы</span><span class="sxs-lookup"><span data-stu-id="a607d-120">Items</span></span>](#items)
-   [<span data-ttu-id="a607d-121">Элементы управления "заголовок, рисуемые владельцем"</span><span class="sxs-lookup"><span data-stu-id="a607d-121">Owner-Drawn Header Controls</span></span>](#owner-drawn-header-controls)
-   [<span data-ttu-id="a607d-122">Фильтры элемента управления заголовка</span><span class="sxs-lookup"><span data-stu-id="a607d-122">Header Control Filters</span></span>](#header-control-filters)
-   [<span data-ttu-id="a607d-123">Обработка сообщений элемента управления заголовков по умолчанию</span><span class="sxs-lookup"><span data-stu-id="a607d-123">Default Header Control Message Processing</span></span>](#default-header-control-message-processing)

## <a name="header-control-size-and-position"></a><span data-ttu-id="a607d-124">Размер и расположение элемента управления заголовка</span><span class="sxs-lookup"><span data-stu-id="a607d-124">Header Control Size and Position</span></span>

<span data-ttu-id="a607d-125">Как правило, необходимо задать размер и расположение элемента управления "заголовок" в соответствии с границами определенного прямоугольника, например клиентской областью окна.</span><span class="sxs-lookup"><span data-stu-id="a607d-125">Typically, you must set the size and position of a header control to fit within the boundaries of a particular rectangle, such as the client area of a window.</span></span> <span data-ttu-id="a607d-126">С помощью сообщения [**\_ макета HDM**](hdm-layout.md) можно получить соответствующие значения размера и расположения из элемента управления "заголовок".</span><span class="sxs-lookup"><span data-stu-id="a607d-126">By using the [**HDM\_LAYOUT**](hdm-layout.md) message, you can retrieve the appropriate size and position values from the header control.</span></span>

<span data-ttu-id="a607d-127">При отправке [**\_ макета HDM**](hdm-layout.md)указывается адрес структуры [**хдлайаут**](/windows/win32/api/commctrl/ns-commctrl-hdlayout) , которая содержит координаты прямоугольника, занимаемого элементом управления "заголовок", и предоставляет указатель на структуру [**WINDOWPOS**](/windows/win32/api/winuser/ns-winuser-windowpos) .</span><span class="sxs-lookup"><span data-stu-id="a607d-127">When sending [**HDM\_LAYOUT**](hdm-layout.md), you specify the address of an [**HDLAYOUT**](/windows/win32/api/commctrl/ns-commctrl-hdlayout) structure that contains the coordinates of the rectangle that the header control is to occupy and provides a pointer to a [**WINDOWPOS**](/windows/win32/api/winuser/ns-winuser-windowpos) structure.</span></span> <span data-ttu-id="a607d-128">Элемент управления заполняет структуру **WINDOWPOS** значениями размера и положения, подходящими для позиционирования элемента управления вдоль верхней границы заданного прямоугольника.</span><span class="sxs-lookup"><span data-stu-id="a607d-128">The control fills the **WINDOWPOS** structure with size and position values appropriate for positioning the control along the top of the specified rectangle.</span></span> <span data-ttu-id="a607d-129">Значение Height представляет собой сумму высоты горизонтальных границ элемента управления и среднюю высоту символов в шрифте, выделенном в контексте устройства элемента управления.</span><span class="sxs-lookup"><span data-stu-id="a607d-129">The height value is the sum of the heights of the control's horizontal borders and the average height of characters in the font currently selected into the control's device context.</span></span>

<span data-ttu-id="a607d-130">Если вы хотите использовать [**\_ Макет HDM**](hdm-layout.md) для установки начального размера и расположения элемента управления "заголовок", установите исходное состояние видимости элемента управления, чтобы оно было скрыто.</span><span class="sxs-lookup"><span data-stu-id="a607d-130">If you want to use [**HDM\_LAYOUT**](hdm-layout.md) to set the initial size and position of a header control, set the initial visibility state of the control so that it is hidden.</span></span> <span data-ttu-id="a607d-131">После отправки **\_ макета HDM** для получения значений размера и расположения можно использовать функцию [**SetWindowPos**](/windows/desktop/api/winuser/nf-winuser-setwindowpos) для установки нового размера, расположения и состояния видимости.</span><span class="sxs-lookup"><span data-stu-id="a607d-131">After sending **HDM\_LAYOUT** to retrieve the size and position values, you can use the [**SetWindowPos**](/windows/desktop/api/winuser/nf-winuser-setwindowpos) function to set the new size, position, and visibility state.</span></span>

## <a name="items"></a><span data-ttu-id="a607d-132">Элементы</span><span class="sxs-lookup"><span data-stu-id="a607d-132">Items</span></span>

<span data-ttu-id="a607d-133">Элемент управления "заголовок" обычно имеет несколько элементов заголовка, определяющих столбцы элемента управления.</span><span class="sxs-lookup"><span data-stu-id="a607d-133">A header control typically has several header items that define the columns of the control.</span></span> <span data-ttu-id="a607d-134">Добавьте элемент в элемент управления "заголовок", отправив [**сообщение \_ INSERTITEM HDM**](hdm-insertitem.md) в элемент управления.</span><span class="sxs-lookup"><span data-stu-id="a607d-134">You add an item to a header control by sending the [**HDM\_INSERTITEM**](hdm-insertitem.md) message to the control.</span></span> <span data-ttu-id="a607d-135">Сообщение содержит адрес структуры [**хдитем**](/windows/win32/api/commctrl/ns-commctrl-hditema) .</span><span class="sxs-lookup"><span data-stu-id="a607d-135">The message includes the address of an [**HDITEM**](/windows/win32/api/commctrl/ns-commctrl-hditema) structure.</span></span> <span data-ttu-id="a607d-136">Эта структура определяет свойства элемента заголовка, которые могут включать строку, Растровое изображение, исходный размер и определенное приложением значение **lParam** .</span><span class="sxs-lookup"><span data-stu-id="a607d-136">This structure defines the properties of the header item, which can include a string, a bitmapped image, an initial size, and an application-defined **LPARAM** value.</span></span>

<span data-ttu-id="a607d-137">Элемент **FMT** структуры [**хдитем**](/windows/win32/api/commctrl/ns-commctrl-hditema) элемента может включать флаг **ХДФ \_ String** или **ХДФ \_ Bitmap** , чтобы указать, отображает ли элемент управления строку или точечный рисунок элемента.</span><span class="sxs-lookup"><span data-stu-id="a607d-137">The **fmt** member of an item's [**HDITEM**](/windows/win32/api/commctrl/ns-commctrl-hditema) structure can include either the **HDF\_STRING** or **HDF\_BITMAP** flag to indicate whether the control displays the item's string or bitmap.</span></span> <span data-ttu-id="a607d-138">Если требуется отобразить как строку, так и растровое изображение, создайте рисуемый владельцем элемент, установив для элемента **FMT** флаг **ХДФ \_ овнердрав** .</span><span class="sxs-lookup"><span data-stu-id="a607d-138">If you want to display both a string and a bitmap, create an owner-drawn item by setting the **fmt** member to include the **HDF\_OWNERDRAW** flag.</span></span> <span data-ttu-id="a607d-139">Структура **хдитем** также задает флаги форматирования, которые указывают элементу управления, следует ли выровнять по центру, по левому краю или по правому краю строку или точечный рисунок в прямоугольнике элемента.</span><span class="sxs-lookup"><span data-stu-id="a607d-139">The **HDITEM** structure also specifies formatting flags that tell the control whether to center, left-align, or right-align the string or bitmap in the item's rectangle.</span></span>

<span data-ttu-id="a607d-140">[**Разъем HDM \_ INSERTITEM**](hdm-insertitem.md) возвращает индекс только что добавленного элемента.</span><span class="sxs-lookup"><span data-stu-id="a607d-140">[**HDM\_INSERTITEM**](hdm-insertitem.md) returns the index of the newly added item.</span></span> <span data-ttu-id="a607d-141">Индекс в других сообщениях можно использовать для задания свойств или получения сведений об элементе.</span><span class="sxs-lookup"><span data-stu-id="a607d-141">You can use the index in other messages to set properties or retrieve information about the item.</span></span> <span data-ttu-id="a607d-142">Вы можете удалить элемент с помощью сообщения [**HDM \_ DELETEITEM**](hdm-deleteitem.md) , указав индекс удаляемого элемента.</span><span class="sxs-lookup"><span data-stu-id="a607d-142">You can delete an item by using the [**HDM\_DELETEITEM**](hdm-deleteitem.md) message, specifying the index of the item to delete.</span></span>

<span data-ttu-id="a607d-143">Можно использовать сообщение [**\_ сетитем HDM**](hdm-setitem.md) , чтобы задать свойства существующего элемента заголовка и сообщение о [**\_ доэлементе HDM**](hdm-getitem.md) для получения текущих свойств элемента.</span><span class="sxs-lookup"><span data-stu-id="a607d-143">You can use the [**HDM\_SETITEM**](hdm-setitem.md) message to set the properties of an existing header item and the [**HDM\_GETITEM**](hdm-getitem.md) message to retrieve the current properties of an item.</span></span> <span data-ttu-id="a607d-144">Чтобы получить количество элементов в элементе управления "заголовок", используйте сообщение [**HDM \_ GETITEMCOUNT**](hdm-getitemcount.md) .</span><span class="sxs-lookup"><span data-stu-id="a607d-144">To retrieve a count of the items in a header control, use the [**HDM\_GETITEMCOUNT**](hdm-getitemcount.md) message.</span></span>

## <a name="owner-drawn-header-controls"></a><span data-ttu-id="a607d-145">Owner-Drawn элементы управления "заголовок"</span><span class="sxs-lookup"><span data-stu-id="a607d-145">Owner-Drawn Header Controls</span></span>

<span data-ttu-id="a607d-146">Отдельные элементы элемента управления "заголовок" можно определить как элементы, рисуемые владельцем.</span><span class="sxs-lookup"><span data-stu-id="a607d-146">You can define individual items of a header control to be owner-drawn items.</span></span> <span data-ttu-id="a607d-147">Использование этой методики обеспечивает больший контроль, чем в случае, если бы вы имели в виду элемент заголовка.</span><span class="sxs-lookup"><span data-stu-id="a607d-147">Using this technique gives you more control than you would otherwise have over the appearance of a header item.</span></span>

<span data-ttu-id="a607d-148">Можно использовать сообщение [**\_ INSERTITEM HDM**](hdm-insertitem.md) , чтобы вставить новый рисуемый владельцем элемент в элемент управления заголовка или сообщение [**\_ сетитем HDM**](hdm-setitem.md) , чтобы изменить существующий элемент на рисуемый владельцем элемент.</span><span class="sxs-lookup"><span data-stu-id="a607d-148">You can use the [**HDM\_INSERTITEM**](hdm-insertitem.md) message to insert a new owner-drawn item into a header control or the [**HDM\_SETITEM**](hdm-setitem.md) message to change an existing item to an owner-drawn item.</span></span> <span data-ttu-id="a607d-149">Оба сообщения включают адрес структуры [**хдитем**](/windows/win32/api/commctrl/ns-commctrl-hditema) , для которой элемент **FMT** должен иметь значение **\_ овнердрав ХДФ** .</span><span class="sxs-lookup"><span data-stu-id="a607d-149">Both messages include the address of an [**HDITEM**](/windows/win32/api/commctrl/ns-commctrl-hditema) structure, which should have the **fmt** member set to the **HDF\_OWNERDRAW** value.</span></span>

<span data-ttu-id="a607d-150">Когда элемент управления "заголовок" должен нарисовать рисуемый владельцем элемент, он отправляет сообщение [**WM \_ DRAWITEM**](wm-drawitem.md) в родительское окно.</span><span class="sxs-lookup"><span data-stu-id="a607d-150">When a header control must draw an owner-drawn item, it sends the [**WM\_DRAWITEM**](wm-drawitem.md) message to the parent window.</span></span> <span data-ttu-id="a607d-151">Параметр *wParam* сообщения представляет собой идентификатор дочернего окна элемента управления заголовка, а параметр *lParam* — адрес структуры [**дравитемструкт**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) .</span><span class="sxs-lookup"><span data-stu-id="a607d-151">The *wParam* parameter of the message is the child window identifier of the header control, and the *lParam* parameter is an address of a [**DRAWITEMSTRUCT**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) structure.</span></span> <span data-ttu-id="a607d-152">Родительское окно использует сведения в структуре для рисования элемента.</span><span class="sxs-lookup"><span data-stu-id="a607d-152">The parent window uses the information in the structure to draw the item.</span></span> <span data-ttu-id="a607d-153">Для рисуемого владельцем элемента в элементе управления "заголовок" Структура **дравитемструкт** содержит следующие сведения.</span><span class="sxs-lookup"><span data-stu-id="a607d-153">For an owner-drawn item in a header control, the **DRAWITEMSTRUCT** structure contains the following information.</span></span>



| <span data-ttu-id="a607d-154">Член</span><span class="sxs-lookup"><span data-stu-id="a607d-154">Member</span></span>         | <span data-ttu-id="a607d-155">Описание</span><span class="sxs-lookup"><span data-stu-id="a607d-155">Description</span></span>                                                                                                                                            |
|----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a607d-156">**ктлтипе**</span><span class="sxs-lookup"><span data-stu-id="a607d-156">**CtlType**</span></span>    | <span data-ttu-id="a607d-157">[**ODT \_**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) Тип элемента управления, рисуемый владельцем заголовка.</span><span class="sxs-lookup"><span data-stu-id="a607d-157">[**ODT\_HEADER**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) owner-drawn control type.</span></span>                                                                                        |
| <span data-ttu-id="a607d-158">**ктлид**</span><span class="sxs-lookup"><span data-stu-id="a607d-158">**CtlID**</span></span>      | <span data-ttu-id="a607d-159">Идентификатор дочернего окна элемента управления "заголовок".</span><span class="sxs-lookup"><span data-stu-id="a607d-159">Child-window identifier of the header control.</span></span>                                                                                                         |
| <span data-ttu-id="a607d-160">**itemID**</span><span class="sxs-lookup"><span data-stu-id="a607d-160">**itemID**</span></span>     | <span data-ttu-id="a607d-161">Индекс рисуемого элемента.</span><span class="sxs-lookup"><span data-stu-id="a607d-161">Index of the item to be drawn.</span></span>                                                                                                                         |
| <span data-ttu-id="a607d-162">**итемактион**</span><span class="sxs-lookup"><span data-stu-id="a607d-162">**itemAction**</span></span> | <span data-ttu-id="a607d-163">[**Ода \_ ДРАВЕНТИРЕ**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) , флаг действия рисования.</span><span class="sxs-lookup"><span data-stu-id="a607d-163">[**ODA\_DRAWENTIRE**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) drawing-action flag.</span></span>                                                                                         |
| <span data-ttu-id="a607d-164">**ItemState**</span><span class="sxs-lookup"><span data-stu-id="a607d-164">**itemState**</span></span>  | <span data-ttu-id="a607d-165">[**ODS \_ ВЫБРАННЫЙ**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) флаг действия рисования, если курсор находится на элементе и кнопка мыши не работает.</span><span class="sxs-lookup"><span data-stu-id="a607d-165">[**ODS\_SELECTED**](/windows/win32/api/winuser/ns-winuser-drawitemstruct) drawing-action flag if the cursor is on the item and the mouse button is down.</span></span> <span data-ttu-id="a607d-166">В противном случае этот элемент равен нулю.</span><span class="sxs-lookup"><span data-stu-id="a607d-166">Otherwise, this member is zero.</span></span> |
| <span data-ttu-id="a607d-167">**хвндитем**</span><span class="sxs-lookup"><span data-stu-id="a607d-167">**hwndItem**</span></span>   | <span data-ttu-id="a607d-168">Обработчик для элемента управления "заголовок".</span><span class="sxs-lookup"><span data-stu-id="a607d-168">Handle to the header control.</span></span>                                                                                                                          |
| <span data-ttu-id="a607d-169">**hDC**</span><span class="sxs-lookup"><span data-stu-id="a607d-169">**hDC**</span></span>        | <span data-ttu-id="a607d-170">Обработайте с контекстом устройства элемента управления "заголовок".</span><span class="sxs-lookup"><span data-stu-id="a607d-170">Handle to the device context of the header control.</span></span>                                                                                                    |
| <span data-ttu-id="a607d-171">**rcItem**</span><span class="sxs-lookup"><span data-stu-id="a607d-171">**rcItem**</span></span>     | <span data-ttu-id="a607d-172">Координаты рисуемого элемента заголовка.</span><span class="sxs-lookup"><span data-stu-id="a607d-172">Coordinates of the header item to be drawn.</span></span> <span data-ttu-id="a607d-173">Координаты задаются относительно левого верхнего угла элемента управления "заголовок".</span><span class="sxs-lookup"><span data-stu-id="a607d-173">The coordinates are relative to the upper-left corner of the header control.</span></span>                               |
| <span data-ttu-id="a607d-174">**итемдата**</span><span class="sxs-lookup"><span data-stu-id="a607d-174">**itemData**</span></span>   | <span data-ttu-id="a607d-175">Определяемое приложением 32-разрядное значение, связанное с элементом.</span><span class="sxs-lookup"><span data-stu-id="a607d-175">Application-defined 32-bit value associated with the item.</span></span>                                                                                             |



 

## <a name="header-control-filters"></a><span data-ttu-id="a607d-176">Фильтры элемента управления заголовка</span><span class="sxs-lookup"><span data-stu-id="a607d-176">Header Control Filters</span></span>

<span data-ttu-id="a607d-177">Указав стиль окна [**HDS \_ филтербар**](header-control-styles.md) для элемента управления "заголовок", можно включить размещение полей редактирования фильтра под заголовками столбцов.</span><span class="sxs-lookup"><span data-stu-id="a607d-177">By specifying the [**HDS\_FILTERBAR**](header-control-styles.md) window style for a header control, you can enable the placement of filter edit boxes underneath the column headings.</span></span> <span data-ttu-id="a607d-178">Рядом с полем ввода появляется кнопка фильтра.</span><span class="sxs-lookup"><span data-stu-id="a607d-178">A filter button appears beside the edit box.</span></span> <span data-ttu-id="a607d-179">Можно реализовать фильтрацию, реагируя на коды уведомлений [ХДН \_ бегинфилтередит](hdn-beginfilteredit.md), [ХДН \_ Ендфилтередит](hdn-endfilteredit.md), [ХДН \_ филтербтнкликк](hdn-filterbtnclick.md)или [ХДН \_ ](hdn-filterchange.md) филтерчанже.</span><span class="sxs-lookup"><span data-stu-id="a607d-179">You can implement filtering by responding to [HDN\_BEGINFILTEREDIT](hdn-beginfilteredit.md), [HDN\_ENDFILTEREDIT](hdn-endfilteredit.md), [HDN\_FILTERBTNCLICK](hdn-filterbtnclick.md), or [HDN\_FILTERCHANGE](hdn-filterchange.md) notification codes.</span></span>

<span data-ttu-id="a607d-180">По умолчанию поле ввода содержит запрос на ввод текста пользователем.</span><span class="sxs-lookup"><span data-stu-id="a607d-180">By default, the edit box contains a prompt for the user to enter text.</span></span> <span data-ttu-id="a607d-181">Окно редактирования можно восстановить в это состояние по умолчанию, используя [**заголовок \_ Клеарфилтер**](/windows/desktop/api/Commctrl/nf-commctrl-header_clearfilter) или [**заголовок \_ клеараллфилтерс**](/windows/desktop/api/Commctrl/nf-commctrl-header_clearallfilters).</span><span class="sxs-lookup"><span data-stu-id="a607d-181">You can restore the edit box to this default state by using [**Header\_ClearFilter**](/windows/desktop/api/Commctrl/nf-commctrl-header_clearfilter) or [**Header\_ClearAllFilters**](/windows/desktop/api/Commctrl/nf-commctrl-header_clearallfilters).</span></span>

<span data-ttu-id="a607d-182">В следующем примере кода показано, как извлечь элемент управления "заголовок" из элемента управления "представление списка" и добавить строку фильтра.</span><span class="sxs-lookup"><span data-stu-id="a607d-182">The following code example shows how to retrieve the header control from a list-view control and add a filter bar.</span></span>


```
// hList is the HWND of the list-view control.
HWND hHeader = ListView_GetHeader(hList);
LONG_PTR styles = GetWindowLongPtr(hHeader, GWL_STYLE);
SetWindowLongPtr(g_hHeader, GWL_STYLE, styles | HDS_FILTERBAR);
```



## <a name="default-header-control-message-processing"></a><span data-ttu-id="a607d-183">Обработка сообщений элемента управления заголовков по умолчанию</span><span class="sxs-lookup"><span data-stu-id="a607d-183">Default Header Control Message Processing</span></span>

<span data-ttu-id="a607d-184">В этом разделе описываются сообщения окна, обрабатываемые процедурой окна для класса окна [**\_ заголовка WC**](common-control-window-classes.md) .</span><span class="sxs-lookup"><span data-stu-id="a607d-184">This section describes the window messages handled by the window procedure for the [**WC\_HEADER**](common-control-window-classes.md) window class.</span></span>



| <span data-ttu-id="a607d-185">Сообщение</span><span class="sxs-lookup"><span data-stu-id="a607d-185">Message</span></span>                                            | <span data-ttu-id="a607d-186">Обработка выполнена</span><span class="sxs-lookup"><span data-stu-id="a607d-186">Processing performed</span></span>                                                                                                                                                                                                                                                                                          |
|----------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="a607d-187">**\_Создание WM**</span><span class="sxs-lookup"><span data-stu-id="a607d-187">**WM\_CREATE**</span></span>](/windows/desktop/winmsg/wm-create)                 | <span data-ttu-id="a607d-188">Инициализирует элемент управления "заголовок".</span><span class="sxs-lookup"><span data-stu-id="a607d-188">Initializes the header control.</span></span>                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="a607d-189">**WM \_ destroy**</span><span class="sxs-lookup"><span data-stu-id="a607d-189">**WM\_DESTROY**</span></span>](/windows/desktop/winmsg/wm-destroy)               | <span data-ttu-id="a607d-190">Отменяет инициализацию элемента управления "заголовок".</span><span class="sxs-lookup"><span data-stu-id="a607d-190">Uninitializes the header control.</span></span>                                                                                                                                                                                                                                                                             |
| [<span data-ttu-id="a607d-191">**WM \_ ерасебкгнд**</span><span class="sxs-lookup"><span data-stu-id="a607d-191">**WM\_ERASEBKGND**</span></span>](/windows/desktop/winmsg/wm-erasebkgnd)         | <span data-ttu-id="a607d-192">Заполняет фон элемента управления "заголовок", используя текущий цвет фона элемента управления.</span><span class="sxs-lookup"><span data-stu-id="a607d-192">Fills the background of the header control using the control's current background color.</span></span>                                                                                                                                                                                                                      |
| [<span data-ttu-id="a607d-193">**WM \_ жетдлгкоде**</span><span class="sxs-lookup"><span data-stu-id="a607d-193">**WM\_GETDLGCODE**</span></span>](/windows/desktop/dlgbox/wm-getdlgcode)         | <span data-ttu-id="a607d-194">Возвращает сочетание значений [**длгк \_ Ванттаб**](/windows/desktop/dlgbox/wm-getdlgcode) и [**длгк \_ вантарровс**](/windows/desktop/dlgbox/wm-getdlgcode) .</span><span class="sxs-lookup"><span data-stu-id="a607d-194">Returns a combination of the [**DLGC\_WANTTAB**](/windows/desktop/dlgbox/wm-getdlgcode) and [**DLGC\_WANTARROWS**](/windows/desktop/dlgbox/wm-getdlgcode) values.</span></span>                                                                                                                     |
| [<span data-ttu-id="a607d-195">**WM, \_ Шрифт**</span><span class="sxs-lookup"><span data-stu-id="a607d-195">**WM\_GETFONT**</span></span>](/windows/desktop/winmsg/wm-getfont)               | <span data-ttu-id="a607d-196">Возвращает маркер текущего шрифта, который используется элементом управления "заголовок" для рисования текста.</span><span class="sxs-lookup"><span data-stu-id="a607d-196">Returns the handle to the current font, which is used by the header control to draw its text.</span></span>                                                                                                                                                                                                                 |
| [<span data-ttu-id="a607d-197">**WM \_ лбуттондблклк**</span><span class="sxs-lookup"><span data-stu-id="a607d-197">**WM\_LBUTTONDBLCLK**</span></span>](/windows/desktop/inputdev/wm-lbuttondblclk) | <span data-ttu-id="a607d-198">Захватывает ввод мыши.</span><span class="sxs-lookup"><span data-stu-id="a607d-198">Captures mouse input.</span></span> <span data-ttu-id="a607d-199">Если курсор мыши находится на разделителе, элемент управления отправляет код уведомления [ХДН \_ бегинтракк](hdn-begintrack.md) и начинает перетаскивать разделитель.</span><span class="sxs-lookup"><span data-stu-id="a607d-199">If the mouse cursor is on a divider, the control sends the [HDN\_BEGINTRACK](hdn-begintrack.md) notification code and begins dragging the divider.</span></span> <span data-ttu-id="a607d-200">Если курсор находится на элементе, элемент отображается в нажатом состоянии.</span><span class="sxs-lookup"><span data-stu-id="a607d-200">If the cursor is on an item, the item is displayed in the pressed state.</span></span>                                                            |
| [<span data-ttu-id="a607d-201">**WM \_ лбуттондовн**</span><span class="sxs-lookup"><span data-stu-id="a607d-201">**WM\_LBUTTONDOWN**</span></span>](/windows/desktop/inputdev/wm-lbuttondown)     | <span data-ttu-id="a607d-202">То же, что и сообщение [**WM \_ лбуттондблклк**](/windows/desktop/inputdev/wm-lbuttondblclk) .</span><span class="sxs-lookup"><span data-stu-id="a607d-202">Same as the [**WM\_LBUTTONDBLCLK**](/windows/desktop/inputdev/wm-lbuttondblclk) message.</span></span>                                                                                                                                                                                                                                       |
| [<span data-ttu-id="a607d-203">**WM \_ лбуттонуп**</span><span class="sxs-lookup"><span data-stu-id="a607d-203">**WM\_LBUTTONUP**</span></span>](/windows/desktop/inputdev/wm-lbuttonup)         | <span data-ttu-id="a607d-204">Освобождает захват мыши.</span><span class="sxs-lookup"><span data-stu-id="a607d-204">Releases the mouse capture.</span></span> <span data-ttu-id="a607d-205">Если элемент управления отслеживает перемещение мыши, он отправляет код уведомления [ХДН \_ ендтракк](hdn-endtrack.md) и перерисовывает элемент управления "заголовок".</span><span class="sxs-lookup"><span data-stu-id="a607d-205">If the control was tracking mouse movement, it sends the [HDN\_ENDTRACK](hdn-endtrack.md) notification code and redraws the header control.</span></span> <span data-ttu-id="a607d-206">В противном случае элемент управления отправляет код уведомления [ХДН \_ итемкликк](hdn-itemclick.md) и перерисовывает элемент заголовка, который был выбран.</span><span class="sxs-lookup"><span data-stu-id="a607d-206">Otherwise, the control sends the [HDN\_ITEMCLICK](hdn-itemclick.md) notification code and redraws the header item that was clicked.</span></span> |
| [<span data-ttu-id="a607d-207">**WM \_ MOUSEMOVE**</span><span class="sxs-lookup"><span data-stu-id="a607d-207">**WM\_MOUSEMOVE**</span></span>](/windows/desktop/inputdev/wm-mousemove)         | <span data-ttu-id="a607d-208">При перетаскивании разделителя элемент управления отправляет код уведомления [ХДН \_ Track](hdn-track.md) и отображает элемент в новой позиции.</span><span class="sxs-lookup"><span data-stu-id="a607d-208">If a divider is being dragged, the control sends the [HDN\_TRACK](hdn-track.md) notification code and displays the item at the new position.</span></span> <span data-ttu-id="a607d-209">Если левая кнопка мыши не нажата и курсор находится на элементе, элемент отображается в нажатом состоянии.</span><span class="sxs-lookup"><span data-stu-id="a607d-209">If the left mouse button is down and the cursor is on an item, the item is displayed in the pressed state.</span></span>                                                      |
| [<span data-ttu-id="a607d-210">**WM \_ нккреате**</span><span class="sxs-lookup"><span data-stu-id="a607d-210">**WM\_NCCREATE**</span></span>](/windows/desktop/winmsg/wm-nccreate)             | <span data-ttu-id="a607d-211">Выделяет и инициализирует внутреннюю структуру данных.</span><span class="sxs-lookup"><span data-stu-id="a607d-211">Allocates and initializes an internal data structure.</span></span>                                                                                                                                                                                                                                                         |
| [<span data-ttu-id="a607d-212">**WM \_ нкдестрой**</span><span class="sxs-lookup"><span data-stu-id="a607d-212">**WM\_NCDESTROY**</span></span>](/windows/desktop/winmsg/wm-ncdestroy)           | <span data-ttu-id="a607d-213">Освобождает ресурсы, выделенные элементом управления "заголовок" после того, как элемент управления "заголовок" не инициализирован.</span><span class="sxs-lookup"><span data-stu-id="a607d-213">Frees the resources allocated by the header control after the header control is uninitialized.</span></span>                                                                                                                                                                                                                |
| [<span data-ttu-id="a607d-214">**WM \_ Paint**</span><span class="sxs-lookup"><span data-stu-id="a607d-214">**WM\_PAINT**</span></span>](/windows/desktop/gdi/wm-paint)                      | <span data-ttu-id="a607d-215">Закрашивает недопустимый регион элемента управления "заголовок".</span><span class="sxs-lookup"><span data-stu-id="a607d-215">Paints the invalid region of the header control.</span></span> <span data-ttu-id="a607d-216">Если параметр *wParam* не равен null, то элемент управления предполагает, что значение является HDC и рисует его с помощью контекста устройства.</span><span class="sxs-lookup"><span data-stu-id="a607d-216">If the *wParam* parameter is non-NULL, the control assumes that the value is an HDC and paints using that device context.</span></span>                                                                                                                                    |
| [<span data-ttu-id="a607d-217">**WM \_ сеткурсор**</span><span class="sxs-lookup"><span data-stu-id="a607d-217">**WM\_SETCURSOR**</span></span>](/windows/desktop/menurc/wm-setcursor)           | <span data-ttu-id="a607d-218">Задает форму курсора в зависимости от того, находится курсор на разделителе или в элементе заголовка.</span><span class="sxs-lookup"><span data-stu-id="a607d-218">Sets the cursor shape, depending on whether the cursor is on a divider or in a header item.</span></span>                                                                                                                                                                                                                   |
| [<span data-ttu-id="a607d-219">**WM \_ сетфонт**</span><span class="sxs-lookup"><span data-stu-id="a607d-219">**WM\_SETFONT**</span></span>](/windows/desktop/winmsg/wm-setfont)               | <span data-ttu-id="a607d-220">Выбирает новый маркер шрифта в контексте устройства для элемента управления "заголовок".</span><span class="sxs-lookup"><span data-stu-id="a607d-220">Selects a new font handle into the device context for the header control.</span></span>                                                                                                                                                                                                                                     |



 

 

 