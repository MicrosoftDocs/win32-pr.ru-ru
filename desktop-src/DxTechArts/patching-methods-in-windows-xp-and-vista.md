---
title: Установка исправлений для игр в Windows XP, Windows Vista и Windows 7
description: В этой статье рассматриваются некоторые методы установки исправлений, которые будут хорошо работать в Windows Vista и Windows 7, а также в Windows XP.
ms.assetid: 27be805a-bffd-a9f8-2207-2a9a4822ba48
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 95ae0b1455cae61b8372f81e6928977743084c9e
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "105681654"
---
# <a name="patching-game-software-in-windows-xp-windows-vista-and-windows-7"></a><span data-ttu-id="7d23c-103">Установка исправлений для игр в Windows XP, Windows Vista и Windows 7</span><span class="sxs-lookup"><span data-stu-id="7d23c-103">Patching Game Software in Windows XP, Windows Vista, and Windows 7</span></span>

<span data-ttu-id="7d23c-104">В Windows Vista и Windows 7 имеется ряд функций, позволяющих повысить безопасность операционной системы.</span><span class="sxs-lookup"><span data-stu-id="7d23c-104">Windows Vista and Windows 7 have a number of features to make the operating system more secure.</span></span> <span data-ttu-id="7d23c-105">Добавленная безопасность означает, что применение исправлений к программному обеспечению не так просто, как было в прошлом.</span><span class="sxs-lookup"><span data-stu-id="7d23c-105">Added security means that applying patches to software is not as simple as it was in the past.</span></span> <span data-ttu-id="7d23c-106">В этой статье рассматриваются некоторые методы установки исправлений, которые будут хорошо работать в Windows Vista и Windows 7, а также в Windows XP.</span><span class="sxs-lookup"><span data-stu-id="7d23c-106">This article examines some methods of patching that will work well in Windows Vista and Windows 7, as well as Windows XP.</span></span>

<span data-ttu-id="7d23c-107">Существуют две основные категории игр, для которых требуются исправления:</span><span class="sxs-lookup"><span data-stu-id="7d23c-107">There are two main categories of games that require patches:</span></span>

-   <span data-ttu-id="7d23c-108">Игры, для которых требуются только случайные исправления, например большинство автономных игр.</span><span class="sxs-lookup"><span data-stu-id="7d23c-108">Games that require only occasional patches, such as most offline games.</span></span>
-   <span data-ttu-id="7d23c-109">Игры, требующие частого исправления, например большинство Интернет-игр.</span><span class="sxs-lookup"><span data-stu-id="7d23c-109">Games that require frequent patches, such as most online games.</span></span>

<span data-ttu-id="7d23c-110">В этой статье также приводится краткое введение в контроль учетных записей (UAC), которое служит фоновым описанием прав, которые разработчики могут рассчитывать в Windows Vista и Windows 7.</span><span class="sxs-lookup"><span data-stu-id="7d23c-110">This article also offers a brief introduction to the User Account Control (UAC) to serve as background about the rights that developers can expect users to have in Windows Vista and Windows 7.</span></span>

-   [<span data-ttu-id="7d23c-111">Контроль учетных записей пользователей</span><span class="sxs-lookup"><span data-stu-id="7d23c-111">User Account Control</span></span>](#user-account-control)
-   [<span data-ttu-id="7d23c-112">Игры, для которых требуются только случайные исправления</span><span class="sxs-lookup"><span data-stu-id="7d23c-112">Games that Require Only Occasional Patches</span></span>](#games-that-require-only-occasional-patches)
    -   [<span data-ttu-id="7d23c-113">Метод 1. Использование установщик Windows для редких исправлений</span><span class="sxs-lookup"><span data-stu-id="7d23c-113">Method 1: Use Windows Installer for Occasional Patches</span></span>](#method-1-use-windows-installer-for-occasional-patches)
    -   [<span data-ttu-id="7d23c-114">Метод 2. требование наличия прав администратора для применения исправлений</span><span class="sxs-lookup"><span data-stu-id="7d23c-114">Method 2: Require Administrator Rights to Apply Patches</span></span>](#method-2-require-administrator-rights-to-apply-patches)
-   [<span data-ttu-id="7d23c-115">Игры, требующие частых исправлений</span><span class="sxs-lookup"><span data-stu-id="7d23c-115">Games that Require Frequent Patches</span></span>](#games-that-require-frequent-patches)
    -   [<span data-ttu-id="7d23c-116">Способ 3. Установка для каждого пользователя</span><span class="sxs-lookup"><span data-stu-id="7d23c-116">Method 3: Install Per-User</span></span>](#method-3-install-per-user)
    -   [<span data-ttu-id="7d23c-117">Метод 4. Установка в общую папку Per-Computer</span><span class="sxs-lookup"><span data-stu-id="7d23c-117">Method 4: Install to a Common Per-Computer Location</span></span>](#method-4-install-to-a-common-per-computer-location)
    -   [<span data-ttu-id="7d23c-118">Другие возможности</span><span class="sxs-lookup"><span data-stu-id="7d23c-118">Other Possibilities</span></span>](#other-possibilities)
-   [<span data-ttu-id="7d23c-119">Сводка</span><span class="sxs-lookup"><span data-stu-id="7d23c-119">Summary</span></span>](#summary)

## <a name="user-account-control"></a><span data-ttu-id="7d23c-120">контроль учетных записей</span><span class="sxs-lookup"><span data-stu-id="7d23c-120">User Account Control</span></span>

<span data-ttu-id="7d23c-121">Windows Vista и Windows 7 имеют два основных типа учетных записей пользователей: стандартные пользователи и Администраторы.</span><span class="sxs-lookup"><span data-stu-id="7d23c-121">Windows Vista and Windows 7 have two primary types of user accounts: Standard User and Administrator.</span></span> <span data-ttu-id="7d23c-122">Учетная запись обычного пользователя имеет несколько ограничений доступа. Например, он не может записывать данные в файловую систему в папке% SystemDrive% \\ Program Files или в реестр на \_ локальном компьютере hKey \_ .</span><span class="sxs-lookup"><span data-stu-id="7d23c-122">A Standard User account has several access restrictions; for example, it cannot write data to the file system in %SystemDrive%\\Program Files or to the registry in the HKEY\_LOCAL\_MACHINE.</span></span> <span data-ttu-id="7d23c-123">Это влияет на применение исправлений к игре, если она установлена в расположении, доступном только для чтения.</span><span class="sxs-lookup"><span data-stu-id="7d23c-123">This has implications for applying patches to a game if it is installed in a read-only location.</span></span> <span data-ttu-id="7d23c-124">В отличие от Windows XP, учетная запись обычного пользователя гораздо более распространена в Windows Vista и Windows 7.</span><span class="sxs-lookup"><span data-stu-id="7d23c-124">Unlike in Windows XP, the Standard User account is much more common in Windows Vista and Windows 7.</span></span> <span data-ttu-id="7d23c-125">Учетные записи обычных пользователей также требуются для важных функций операционной системы, таких как родительский контроль.</span><span class="sxs-lookup"><span data-stu-id="7d23c-125">Standard User accounts are also required for important features of the operating system, like parental controls.</span></span> <span data-ttu-id="7d23c-126">Родительский контроль требует, чтобы дочерняя учетная запись была обычным пользователем, и повышенная учетная запись для администратора даже одной игры не позволяет родительским элементам управления работать со всеми другими играми.</span><span class="sxs-lookup"><span data-stu-id="7d23c-126">Parental controls require that the child account be Standard User, and elevating such an account to Administrator for even one game prevents parental controls from working with all other games.</span></span> <span data-ttu-id="7d23c-127">Поэтому важно, чтобы игры были разработаны для обычных пользователей.</span><span class="sxs-lookup"><span data-stu-id="7d23c-127">So, it important for games to be designed for Standard User.</span></span>

<span data-ttu-id="7d23c-128">В Windows Vista и Windows 7 имеется более новая модель для прав пользователей, которая помогает предотвратить запуск программ, пытающихся выполнять операции, которые пользователь не намеревается или не авторизует.</span><span class="sxs-lookup"><span data-stu-id="7d23c-128">Windows Vista and Windows 7 have a newer model for user rights, to help prevent users from running programs that attempt to perform operations that the user doesn't intend or authorize.</span></span> <span data-ttu-id="7d23c-129">Для этого контроль учетных записей пользователей (ранее назывался учетной записью пользователя с минимальными правами или LUA) позволяет пользователям работать на компьютере с минимальными правами, в то время как при необходимости можно легко запускать приложения, требующие прав более высокого уровня.</span><span class="sxs-lookup"><span data-stu-id="7d23c-129">To that end, User Account Control (formerly called Least-privileged User Account or LUA) enables users to operate the computer with low-level rights most of the time, while being able to easily run applications that require higher-level rights, when necessary.</span></span> <span data-ttu-id="7d23c-130">Это означает, что учетные записи обычных пользователей и учетные записи администраторов запускают приложения с правами обычного пользователя, но только учетные записи администратора могут предоставлять приложениям повышенные права.</span><span class="sxs-lookup"><span data-stu-id="7d23c-130">This means that Standard User accounts and Administrator accounts both run applications with Standard User rights, but only Administrator accounts have the ability to grant elevated rights to applications.</span></span> <span data-ttu-id="7d23c-131">Операционная система запрашивает у пользователей учетные записи администратора для явного согласия перед запуском приложения с повышенными правами, и если программа, требующая прав администратора, запускается на стандартной учетной записи пользователя, система запрашивает утверждение администратором.</span><span class="sxs-lookup"><span data-stu-id="7d23c-131">The operating system asks users with Administrator accounts for explicit consent before running an application with elevated rights, and if a program that requires Administrator rights is run on a Standard User account, the system prompts for Administrator approval.</span></span>

## <a name="games-that-require-only-occasional-patches"></a><span data-ttu-id="7d23c-132">Игры, для которых требуются только случайные исправления</span><span class="sxs-lookup"><span data-stu-id="7d23c-132">Games that Require Only Occasional Patches</span></span>

<span data-ttu-id="7d23c-133">Некоторым играм требуется лишь несколько исправлений на протяжении всего жизненного цикла.</span><span class="sxs-lookup"><span data-stu-id="7d23c-133">Some games only require a few patches throughout their lifecycle.</span></span> <span data-ttu-id="7d23c-134">Для этой частоты исправлений можно использовать два метода: распространять исправления в виде пакетов установщик Windows, которые обычно не нуждаются в правах администратора или используют другой тип распространения, который непосредственно изменяет файлы игры.</span><span class="sxs-lookup"><span data-stu-id="7d23c-134">Two methods that you can employ for this frequency of patching are to distribute patches as Windows Installer packages, which does not generally require Administrator rights, or to use some other type of distribution that directly modifies game files.</span></span>

> [!Note]  
> <span data-ttu-id="7d23c-135">Независимо от того, требуется ли для игры частое исправление, для установки или удаления приложений обычно требуются права администратора.</span><span class="sxs-lookup"><span data-stu-id="7d23c-135">Regardless of whether a game requires frequent patching, applications typically require Administrator rights to be installed or removed.</span></span>

 

### <a name="method-1-use-windows-installer-for-occasional-patches"></a><span data-ttu-id="7d23c-136">Метод 1. Использование установщик Windows для редких исправлений</span><span class="sxs-lookup"><span data-stu-id="7d23c-136">Method 1: Use Windows Installer for Occasional Patches</span></span>

<span data-ttu-id="7d23c-137">В этом методе установщик Windows используется для установки пакета (MSI-файл) и исправления установщик Windows (MSP-файл) для установки исправлений.</span><span class="sxs-lookup"><span data-stu-id="7d23c-137">In this method, a Windows Installer is used to install a package (.msi file) and a Windows Installer patch (.msp file) is distributed to install patches.</span></span> <span data-ttu-id="7d23c-138">Пакет должен иметь таблицу Мсипатчцертификате, а исправление должно иметь цифровую подпись сертификата в таблице.</span><span class="sxs-lookup"><span data-stu-id="7d23c-138">The package must have an MsiPatchCertificate table, and the patch must be digitally signed by a certificate in the table.</span></span> <span data-ttu-id="7d23c-139">Дополнительные сведения о цифровой подписи можно найти в [подписывания Authenticode для разработчиков игр](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers).</span><span class="sxs-lookup"><span data-stu-id="7d23c-139">More information about digital signing can be found at [Authenticode Signing for Game Developers](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers).</span></span>

<span data-ttu-id="7d23c-140">Дополнительные сведения и требования для использования этого метода исправления можно найти в документации по установщик Windows:</span><span class="sxs-lookup"><span data-stu-id="7d23c-140">More details and requirements to use this patching method can be found in the Windows Installer documentation:</span></span>

-   [<span data-ttu-id="7d23c-141">Установка исправлений и обновления</span><span class="sxs-lookup"><span data-stu-id="7d23c-141">Patching and Upgrades</span></span>](/windows/desktop/Msi/patching-and-upgrades)
-   [<span data-ttu-id="7d23c-142">Исправление контроля учетных записей пользователей (UAC)</span><span class="sxs-lookup"><span data-stu-id="7d23c-142">User Account Control (UAC) Patching</span></span>](/windows/desktop/Msi/user-account-control--uac--patching)

<span data-ttu-id="7d23c-143">Недостаток этого метода заключается в том, что если игра не была установлена со съемного носителя в Windows XP, для установки исправлений требуются права администратора.</span><span class="sxs-lookup"><span data-stu-id="7d23c-143">The disadvantage to this method is that if the game was not installed from removable media on Windows XP, then patching requires Administrator rights.</span></span> <span data-ttu-id="7d23c-144">Однако это не является слишком ограничивающим, поскольку большинство пользователей в Windows XP и ограничение на программное обеспечение, установленное со съемного носителя, отсутствует в Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="7d23c-144">However, this not likely to be too restrictive, because most users administrators on Windows XP, and the restriction to software installed from removable media is not present on Windows Vista.</span></span>

<span data-ttu-id="7d23c-145">Основным преимуществом этого метода является то, что исправления могут применяться учетной записью обычного пользователя, не требуя запроса и проверки подлинности для повышенных прав.</span><span class="sxs-lookup"><span data-stu-id="7d23c-145">The main advantage of this method is that patches can be applied by a Standard User account without requiring a prompt and authentication for elevated rights.</span></span> <span data-ttu-id="7d23c-146">Это обеспечивает лучшую работу пользователей, так как для игры пользователю с учетной записью обычного пользователя не нужно спрашивать пользователя с учетной записью администратора для установки исправления или предоставления учетной записи обычного пользователя с постоянными правами администратора.</span><span class="sxs-lookup"><span data-stu-id="7d23c-146">This provides a better user experience, because to play a game, a user with a Standard User account doesn't need to ask someone with an Administrator account to install the patch or to provide the Standard User account with permanent Administrator rights.</span></span>

<span data-ttu-id="7d23c-147">Возможно, этот метод может работать в играх, требующих частых исправлений, но издержки на использование пакетов установщик Windows, в плане интеграции сборки и поддержки большого количества файлов, могут сделать этот метод менее желательным, чем другие.</span><span class="sxs-lookup"><span data-stu-id="7d23c-147">It is possible that this method might work for games that require frequent patches, but the overhead of using Windows Installer packages, in terms of build integration and supporting large numbers of files, might make this method less desirable than others.</span></span>

### <a name="method-2-require-administrator-rights-to-apply-patches"></a><span data-ttu-id="7d23c-148">Метод 2. требование наличия прав администратора для применения исправлений</span><span class="sxs-lookup"><span data-stu-id="7d23c-148">Method 2: Require Administrator Rights to Apply Patches</span></span>

<span data-ttu-id="7d23c-149">В этом методе для запуска исполняемого файла, который применяет исправление, требуются права администратора.</span><span class="sxs-lookup"><span data-stu-id="7d23c-149">In this method, the executable file that applies the patch requires Administrator rights to run.</span></span> <span data-ttu-id="7d23c-150">С правами администратора исполняемый файл установки исправлений может напрямую изменять файлы игры, расположенные в файлах программы% SystemDrive% \\ .</span><span class="sxs-lookup"><span data-stu-id="7d23c-150">With Administrator rights, the patching executable can directly modify the game files located in %SystemDrive%\\Program Files.</span></span>

<span data-ttu-id="7d23c-151">Преимущество этого метода заключается в его простоте.</span><span class="sxs-lookup"><span data-stu-id="7d23c-151">The advantage of this method is its simplicity.</span></span> <span data-ttu-id="7d23c-152">Однако этот метод не подходит, если игра требует частого исправления, так как если пользователю с обычной учетной записью пользователя требуется играть в игру, требующую частых исправлений, например в интерактивной игре с несколькими игроками, у этого пользователя есть два варианта:</span><span class="sxs-lookup"><span data-stu-id="7d23c-152">However, this method is unsuitable if the game needs frequent patches, because if a user with a Standard User account wants to play a game that requires frequent patches, like a massively multi-player online game, then that user has two choices:</span></span>

-   <span data-ttu-id="7d23c-153">Получите администратора для входа в систему и исправления игры, что может оказаться неудобным для обеих сторон.</span><span class="sxs-lookup"><span data-stu-id="7d23c-153">Get an Administrator to log on and patch the game, which might be inconvenient for both parties.</span></span>
-   <span data-ttu-id="7d23c-154">Повысьте права администратора у своей учетной записи.</span><span class="sxs-lookup"><span data-stu-id="7d23c-154">Have his or her account permanently elevated with Administrator rights.</span></span>

> [!Note]  
> <span data-ttu-id="7d23c-155">Последнее решение не только ослабляет безопасность системы в целом, но и предотвращает работу важных функций, таких как родительский контроль.</span><span class="sxs-lookup"><span data-stu-id="7d23c-155">The latter solution not only weakens the security of the system as a whole, but it prevents important features, like parental controls, from working.</span></span>

 

<span data-ttu-id="7d23c-156">При реализации этого метода исполняемый файл, который применяет исправление, должен отличаться от исполняемого файла игры.</span><span class="sxs-lookup"><span data-stu-id="7d23c-156">When implementing this method, the executable file that applies the patch must be different from the game executable.</span></span> <span data-ttu-id="7d23c-157">Манифест исполняемого файла установки исправлений должен указывать requireAdministrator для requestedExecutionLevel, чтобы обозначить его как приложение, для которого требуются права администратора.</span><span class="sxs-lookup"><span data-stu-id="7d23c-157">The manifest of the patching executable should specify requireAdministrator for requestedExecutionLevel to denote it as an application that requires Administrator rights.</span></span> <span data-ttu-id="7d23c-158">Дополнительные сведения о том, как это сделать, можно найти в статье рекомендации [для разработчиков и рекомендации для приложений в среде с минимальными привилегиями](/previous-versions/dotnet/articles/aa480150(v=msdn.10))в "схема манифеста приложения".</span><span class="sxs-lookup"><span data-stu-id="7d23c-158">More information about how to do this can be found at [Developer Best Practices and Guidelines for Applications in a Least Privileged Environment](/previous-versions/dotnet/articles/aa480150(v=msdn.10)), in "Application Manifest Schema."</span></span>

<span data-ttu-id="7d23c-159">При использовании этого метода даже с параметрами в манифесте исполняемый файл по-прежнему может запускаться без прав администратора в двух случаях:</span><span class="sxs-lookup"><span data-stu-id="7d23c-159">When this method is used, even with the settings in the manifest, the executable file might still be launched without Administrator rights in two cases:</span></span>

-   <span data-ttu-id="7d23c-160">Если операционной системой является Windows XP, а учетная запись пользователя является ограниченным пользователем.</span><span class="sxs-lookup"><span data-stu-id="7d23c-160">If the operating system is Windows XP, and the user's account is a Restricted User.</span></span>
-   <span data-ttu-id="7d23c-161">Если операционной системой является Windows Vista или Windows 7, учетная запись пользователя является стандартным пользователем, а UAC отключен.</span><span class="sxs-lookup"><span data-stu-id="7d23c-161">If the operating system is Windows Vista or Windows 7, the user's account is a Standard User, and UAC is disabled.</span></span>

<span data-ttu-id="7d23c-162">Оба из них являются редкими сценариями потребителя.</span><span class="sxs-lookup"><span data-stu-id="7d23c-162">Both of these are rare consumer scenarios.</span></span> <span data-ttu-id="7d23c-163">Тем не менее, необходимо, чтобы манифест имел права администратора и вызывал [**исусеранадмин**](/windows/desktop/api/shlobj_core/nf-shlobj_core-isuseranadmin). Если эта функция возвращает значение FALSE, отображается сообщение об ошибке "требуются права администратора".</span><span class="sxs-lookup"><span data-stu-id="7d23c-163">However, the patcher should have the manifest require Administrator rights, and it should call [**IsUserAnAdmin**](/windows/desktop/api/shlobj_core/nf-shlobj_core-isuseranadmin); if this function returns FALSE, the error message "Administrator rights are required" is displayed.</span></span>

<span data-ttu-id="7d23c-164">В целом, метод 1 предпочтительнее для игр, в которых требуется всего несколько исправлений в течение всего времени существования.</span><span class="sxs-lookup"><span data-stu-id="7d23c-164">Overall, method 1 is preferable for games that need just a few patches over their lifetimes.</span></span>

## <a name="games-that-require-frequent-patches"></a><span data-ttu-id="7d23c-165">Игры, требующие частых исправлений</span><span class="sxs-lookup"><span data-stu-id="7d23c-165">Games that Require Frequent Patches</span></span>

<span data-ttu-id="7d23c-166">Многие Интернет-игры постоянно улучшаются и обычно нуждаются в регулярных исправлениях.</span><span class="sxs-lookup"><span data-stu-id="7d23c-166">Many Internet-based games are being improved continuously, and they usually require regular patches.</span></span> <span data-ttu-id="7d23c-167">Для этих игр можно применить исправления для каждого пользователя или компьютера, как описано в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="7d23c-167">For these games, patches could be applied per-user or per-computer, as discussed in the follow topics.</span></span> <span data-ttu-id="7d23c-168">К другим возможным решениям относится изменение списка ACL, защищающего \\ программные файлы% systemdrive% или создание настраиваемой службы.</span><span class="sxs-lookup"><span data-stu-id="7d23c-168">Other possible solutions include altering the ACL that protects %SystemDrive%\\Program Files or creating a custom service.</span></span>

### <a name="method-3-install-per-user"></a><span data-ttu-id="7d23c-169">Метод 3. Установка Per-User</span><span class="sxs-lookup"><span data-stu-id="7d23c-169">Method 3: Install Per-User</span></span>

<span data-ttu-id="7d23c-170">Один из рекомендуемых и простых подходов — установить всю игру в подпапку "на пользователя" локальной папки данных приложения, которую можно найти, вызвав [**шжетфолдерпас**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) с CSid \_ Local \_ APPDATA.</span><span class="sxs-lookup"><span data-stu-id="7d23c-170">One recommended and easy approach is to install the entire game to a per-user subfolder of the local application data folder, which you can find by calling [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) with CSIDL\_LOCAL\_APPDATA.</span></span> <span data-ttu-id="7d23c-171">Пример пути — C: \\ Documents and Settings \\ имя пользователя \\ Local Settings \\ ексамплегаме данных приложения \\ .</span><span class="sxs-lookup"><span data-stu-id="7d23c-171">An example path is C:\\Documents and Settings\\user name\\Local Settings\\Application Data\\ExampleGame.</span></span> <span data-ttu-id="7d23c-172">Такое расположение позволяет приложению, работающему с правами обычного пользователя, напрямую изменять файлы игр.</span><span class="sxs-lookup"><span data-stu-id="7d23c-172">Such a location allows an application running with Standard User rights to directly modify game files.</span></span>

<span data-ttu-id="7d23c-173">Однако существует недостаток этого подхода, если компьютер имеет несколько пользователей: на каждом из них установлена копия игры, а исправления должны быть загружены и применены каждым пользователем.</span><span class="sxs-lookup"><span data-stu-id="7d23c-173">However, there is a disadvantage to this approach when a computer has multiple users: each user has a copy of the game installed, and patches must be downloaded and applied by each user.</span></span> <span data-ttu-id="7d23c-174">Это теряет не только время и место на диске, но и увеличивает использование полосы пропускания сети для сервера, который предоставляет исправления.</span><span class="sxs-lookup"><span data-stu-id="7d23c-174">This wastes not only users' time and disk space, but it also increases use of network bandwidth to the server that provides patches.</span></span> <span data-ttu-id="7d23c-175">Кроме того, поскольку любое приложение с правами обычного пользователя может изменять игру, исполняемые файлы игр менее защищены; чтобы решить, является ли это приемлемой, разработчику игр.</span><span class="sxs-lookup"><span data-stu-id="7d23c-175">Also, because any application with standard user rights can modify the game, game executables are less protected; it is up to the game manufacturer to decide if this is acceptable or not.</span></span>

### <a name="method-4-install-to-a-common-per-computer-location"></a><span data-ttu-id="7d23c-176">Метод 4. Установка в общую папку Per-Computer</span><span class="sxs-lookup"><span data-stu-id="7d23c-176">Method 4: Install to a Common Per-Computer Location</span></span>

<span data-ttu-id="7d23c-177">Другой способ — установить неисполняемые данные игры в подкаталог пути, указанном в [**шжетфолдерпас**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) CSid. \_ \_ пример пути — C: \\ Documents and Settings \\ All Users \\ Application Data \\ ексамплегаме.</span><span class="sxs-lookup"><span data-stu-id="7d23c-177">Another method is to install the non-executable game data to a subdirectory of the path specified by [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) CSIDL\_COMMON\_APPDATA; an example path is C:\\Documents and Settings\\All Users\\Application Data\\ExampleGame.</span></span> <span data-ttu-id="7d23c-178">Это общее расположение для всех пользователей, которое может быть изменено приложениями, запускаемыми с правами обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="7d23c-178">This is a shared location for all users, and it can be modified by applications that run with Standard User rights.</span></span> <span data-ttu-id="7d23c-179">Этот метод позволяет избежать необходимости повторного применения крупных исправлений, когда игра воспроизводится из нескольких учетных записей.</span><span class="sxs-lookup"><span data-stu-id="7d23c-179">This method minimizes the need to reapply large patches when the game is played from more than one account.</span></span> <span data-ttu-id="7d23c-180">Исполняемые файлы для игры должны храниться в файлах% SystemDrive%, \\ чтобы свести к сведению риск для других учетных записей в системе.</span><span class="sxs-lookup"><span data-stu-id="7d23c-180">Executable files for the game should be kept in %SystemDrive%\\Programs Files to minimize the risk to other accounts on the system.</span></span> <span data-ttu-id="7d23c-181">Исполняемые файлы должны проверять целостность нового содержимого в общем каталоге, так как это расположение может быть изменено программой или пользователем с правами обычного пользователя. Рассмотрите возможность использования [**мапфилеандчекксум**](/windows/desktop/api/imagehlp/nf-imagehlp-mapfileandchecksuma) для вычисления контрольной суммы файлов.</span><span class="sxs-lookup"><span data-stu-id="7d23c-181">The executable files should verify the integrity of the new content in the shared directory, since that location can be modified by a program or person with Standard User rights; consider using [**MapFileAndCheckSum**](/windows/desktop/api/imagehlp/nf-imagehlp-mapfileandchecksuma) to compute a checksum of the files.</span></span>

<span data-ttu-id="7d23c-182">Этот метод имеет преимущество работы как в Windows XP, так и в Windows Vista, и ему не требуются права администратора.</span><span class="sxs-lookup"><span data-stu-id="7d23c-182">This method has the advantage of working equally well on both Windows XP and Windows Vista, and it doesn't require Administrator rights.</span></span>

### <a name="other-possibilities"></a><span data-ttu-id="7d23c-183">Другие возможности</span><span class="sxs-lookup"><span data-stu-id="7d23c-183">Other Possibilities</span></span>

<span data-ttu-id="7d23c-184">За пределами уже обсуждаемых методов можно изменить список ACL для \\ папки "Program Files" программы% systemdrive% \\ \\ при установке игры, чтобы средство исправления может записывать файлы в игры непосредственно, даже при запуске с правами обычного пользователя.</span><span class="sxs-lookup"><span data-stu-id="7d23c-184">Outside of the methods already discussed, another possibility is to alter the ACL of %SystemDrive%\\Program Files\\Game Folder\\ when installing the game so that a patching tool can write directly to the game's files even when run with Standard User rights.</span></span> <span data-ttu-id="7d23c-185">Хотя это и не является сложной задачей, она обходит защиту системы безопасности, которую система предложит файлам игры, и предоставляет вредоносным программам возможность изменять содержимое каталога.</span><span class="sxs-lookup"><span data-stu-id="7d23c-185">While this is not difficult, it does bypass the security protection that the system offers to the game's files and provides an opportunity for malicious programs to alter the contents of the directory.</span></span> <span data-ttu-id="7d23c-186">Это не рекомендуется, поэтому настоятельно рекомендуется использовать вместо него альтернативный вариант.</span><span class="sxs-lookup"><span data-stu-id="7d23c-186">This is not advisable, and it is strongly recommended that an alternative be used instead.</span></span>

<span data-ttu-id="7d23c-187">Последняя возможность — написать пользовательскую службу.</span><span class="sxs-lookup"><span data-stu-id="7d23c-187">One final possibility is to write a custom service.</span></span> <span data-ttu-id="7d23c-188">Как правило, написание пользовательской службы для исправлений игр не является хорошей идеей, так как это усложняется и подвержено ошибкам.</span><span class="sxs-lookup"><span data-stu-id="7d23c-188">In general, writing a custom service to patch games is not a good idea, because doing so is complicated and error-prone.</span></span> <span data-ttu-id="7d23c-189">Рекомендуется выполнить исправление, используя другие методы, описанные в этой статье.</span><span class="sxs-lookup"><span data-stu-id="7d23c-189">It is recommended that patching be done by use of other methods discussed in this article.</span></span> <span data-ttu-id="7d23c-190">Однако при объединении с решениями борьбы-Памятка по или борьбы с пиратством может потребоваться пользовательская служба.</span><span class="sxs-lookup"><span data-stu-id="7d23c-190">However, a custom service might be necessary when combined with anti-cheat or anti-piracy solutions.</span></span> <span data-ttu-id="7d23c-191">Такая служба должна поддерживать большое количество игр и разработана таким образом, чтобы загружать только файлы исправлений и записывать их только в каталог установки для целевой игры.</span><span class="sxs-lookup"><span data-stu-id="7d23c-191">Such a service should support a large number of games and be designed so that it can only download the patch files and write only to the installation directory for the target game.</span></span> <span data-ttu-id="7d23c-192">Важно, чтобы служба была невелика, иметь минимальную контактную зону, уязвимую для атак, и использовать как можно меньше системных ресурсов, если игра не запущена.</span><span class="sxs-lookup"><span data-stu-id="7d23c-192">It is important that the service be small, have a minimal surface area that is vulnerable to attack, and use as few system resources as possible when the game is not running.</span></span>

## <a name="summary"></a><span data-ttu-id="7d23c-193">Сводка</span><span class="sxs-lookup"><span data-stu-id="7d23c-193">Summary</span></span>

<span data-ttu-id="7d23c-194">В конечном итоге вам нужно решить, какой метод реализовать.</span><span class="sxs-lookup"><span data-stu-id="7d23c-194">Ultimately, it is up to you to decide which method to implement.</span></span> <span data-ttu-id="7d23c-195">Необходимо взвесить факторы, которые важны для вас.</span><span class="sxs-lookup"><span data-stu-id="7d23c-195">You need to weigh the factors are that are important to you.</span></span> <span data-ttu-id="7d23c-196">Безопасность, периодичность установки исправлений, простота использования клиентом, Рабочая нагрузка, необходимая для реализации, сложности решения и соответствия функций платформы, — это факторы, которые каждый разработчик должен учитывать перед принятием решения о конкретном методе.</span><span class="sxs-lookup"><span data-stu-id="7d23c-196">Security, frequency of patching, ease of use by customer, workload required to implement, complexity of solution, and platform feature compliance are the factors that each developer must consider before deciding on a particular method.</span></span>

<span data-ttu-id="7d23c-197">Дополнительные сведения о защите учетных записей можно найти в статье [требования к разработке приложений Windows Vista для контроля учетных записей пользователей (UAC)](/previous-versions/aa905330(v=msdn.10)).</span><span class="sxs-lookup"><span data-stu-id="7d23c-197">You can find more information about user account protection in [Windows Vista Application Development Requirements for User Account Control (UAC)](/previous-versions/aa905330(v=msdn.10)).</span></span>

 

 