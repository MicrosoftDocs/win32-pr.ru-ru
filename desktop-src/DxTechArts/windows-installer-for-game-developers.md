---
title: установщик Windows для разработчиков игр
description: В этой статье приводятся общие сведения о установщик Windows, специально предназначенных для разработчиков игр. Подробную документацию по функциям и интерфейсам API, упомянутым в этой статье, можно найти в пакете SDK для платформы Windows.
ms.assetid: 07401792-b34b-71c9-18f8-a11c916c7d81
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0e44227b633f7f9491b8a69bc06aa7945941a154
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104413214"
---
# <a name="windows-installer-for-game-developers"></a><span data-ttu-id="6a324-104">установщик Windows для разработчиков игр</span><span class="sxs-lookup"><span data-stu-id="6a324-104">Windows Installer for Game Developers</span></span>

<span data-ttu-id="6a324-105">Показывает, как установщик Windows можно использовать для установки игр на компьютерах конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="6a324-105">Shows how Windows Installer can be used to install games on end-user machines.</span></span> <span data-ttu-id="6a324-106">Установщик Windows обеспечивает полную поддержку настраиваемого пользовательского интерфейса, а также установку исправлений.</span><span class="sxs-lookup"><span data-stu-id="6a324-106">Windows Installer offers full support for a customized user interface, as well as for patching.</span></span>

<span data-ttu-id="6a324-107">Microsoft установщик Windows — это предпочтительный API для установки программного обеспечения на компьютерах под управлением Windows.</span><span class="sxs-lookup"><span data-stu-id="6a324-107">Microsoft Windows Installer is the preferred API for installing software on Windows-based computers.</span></span> <span data-ttu-id="6a324-108">Хотя многие функции установщик Windows предназначены для поддержки развертывания бизнес-приложений в корпоративной среде, установщик Windows также вполне подходит для установки игр на компьютерах конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="6a324-108">While many of the features of Windows Installer are designed to support deployment of business applications in a corporate environment, Windows Installer is also completely suitable for installing games on end-user machines.</span></span> <span data-ttu-id="6a324-109">Основные преимущества использования установщик Windows для установки игр:</span><span class="sxs-lookup"><span data-stu-id="6a324-109">The primary advantages of using Windows Installer for game installation are:</span></span>

-   <span data-ttu-id="6a324-110">Надежная Отмена установки</span><span class="sxs-lookup"><span data-stu-id="6a324-110">Reliable uninstall</span></span>
-   <span data-ttu-id="6a324-111">Возможность установки содержимого по запросу</span><span class="sxs-lookup"><span data-stu-id="6a324-111">Ability to install content on demand</span></span>
-   <span data-ttu-id="6a324-112">Поддержка полностью настраиваемого пользовательского интерфейса</span><span class="sxs-lookup"><span data-stu-id="6a324-112">Support for completely custom user interface</span></span>
-   <span data-ttu-id="6a324-113">Эффективная установка исправлений</span><span class="sxs-lookup"><span data-stu-id="6a324-113">Efficient patching</span></span>

<span data-ttu-id="6a324-114">В этой статье приводятся общие сведения о установщик Windows, специально предназначенных для разработчиков игр.</span><span class="sxs-lookup"><span data-stu-id="6a324-114">This article gives an overview of Windows Installer, specifically targeted to game developers.</span></span> <span data-ttu-id="6a324-115">Подробную документацию по функциям и интерфейсам API, упомянутым в этой статье, можно найти в пакете SDK для платформы Windows.</span><span class="sxs-lookup"><span data-stu-id="6a324-115">For detailed documentation on the features and APIs mentioned in this article, please refer to the Windows Platform SDK.</span></span>

-   [<span data-ttu-id="6a324-116">Обзор</span><span class="sxs-lookup"><span data-stu-id="6a324-116">Overview</span></span>](#overview)
-   [<span data-ttu-id="6a324-117">Основные понятия установщик Windows</span><span class="sxs-lookup"><span data-stu-id="6a324-117">Key Windows Installer Concepts</span></span>](#key-windows-installer-concepts)
    -   [<span data-ttu-id="6a324-118">Components</span><span class="sxs-lookup"><span data-stu-id="6a324-118">Components</span></span>](#components)
    -   [<span data-ttu-id="6a324-119">Функции</span><span class="sxs-lookup"><span data-stu-id="6a324-119">Features</span></span>](#features)
-   [<span data-ttu-id="6a324-120">Состояния установки</span><span class="sxs-lookup"><span data-stu-id="6a324-120">Install States</span></span>](#install-states)
-   [<span data-ttu-id="6a324-121">Установка по запросу</span><span class="sxs-lookup"><span data-stu-id="6a324-121">Install on Demand</span></span>](#install-on-demand)
-   [<span data-ttu-id="6a324-122">Настраиваемый пользовательский</span><span class="sxs-lookup"><span data-stu-id="6a324-122">Custom User Interface</span></span>](#custom-user-interface)
-   [<span data-ttu-id="6a324-123">Исправления</span><span class="sxs-lookup"><span data-stu-id="6a324-123">Patching</span></span>](#patching)
-   [<span data-ttu-id="6a324-124">Другие ресурсы</span><span class="sxs-lookup"><span data-stu-id="6a324-124">Other Resources</span></span>](#other-resources)

## <a name="overview"></a><span data-ttu-id="6a324-125">Обзор</span><span class="sxs-lookup"><span data-stu-id="6a324-125">Overview</span></span>

<span data-ttu-id="6a324-126">Все настройки на основе установщик Windows используют файл базы данных установки, называемый MSI-файлом, для описания способа установки приложения.</span><span class="sxs-lookup"><span data-stu-id="6a324-126">All Windows Installer-based setups use an installation database file called an MSI file to describe how the application is to be installed.</span></span> <span data-ttu-id="6a324-127">Файл MSI содержит сведения о том, какие файлы, разделы реестра, ярлыки, сопоставления файлов и другие элементы приложений должны быть установлены.</span><span class="sxs-lookup"><span data-stu-id="6a324-127">The MSI file contains information on what files, registry keys, desktop shortcuts, file associations, and other application elements are to be installed.</span></span> <span data-ttu-id="6a324-128">Фактически устанавливаемые файлы могут быть сжаты в самом MSI-файле, упакованы и сжаты в отдельные "CAB-файлы" или храниться в другом месте на установочном носителе как отдельные несжатые файлы.</span><span class="sxs-lookup"><span data-stu-id="6a324-128">The actual files to be installed can be compressed within the MSI file itself, bundled and compressed into separate "cabinet files", or stored elsewhere on the installation media as individual uncompressed files.</span></span> <span data-ttu-id="6a324-129">Файл MSI также может ссылаться на внешние реализованные действия, чтобы разрешить действия, для которых файл MSI не разрешается изначально.</span><span class="sxs-lookup"><span data-stu-id="6a324-129">The MSI file can also reference externally implemented custom actions, in order to allow for actions for which the MSI file does not natively allow.</span></span>

<span data-ttu-id="6a324-130">При необходимости MSI-файл может содержать пользовательский интерфейс, позволяющий пользователю выполнить процесс установки.</span><span class="sxs-lookup"><span data-stu-id="6a324-130">An MSI file can optionally contain a user interface to guide the user through the installation process.</span></span> <span data-ttu-id="6a324-131">Этот пользовательский интерфейс подходит для большинства приложений.</span><span class="sxs-lookup"><span data-stu-id="6a324-131">This UI is adequate for most applications.</span></span> <span data-ttu-id="6a324-132">Однако он имеет вид обычного приложения Windows, и многие разработчики игр предпочитают, чтобы приложение настройки поддерживало внешний вид самой игры, чтобы обеспечить более единообразное взаимодействие с конечным пользователем.</span><span class="sxs-lookup"><span data-stu-id="6a324-132">However, it has the look and feel of a regular Windows application, and many game developers prefer to have their setup application maintain the look and feel of the game itself, in order to provide a more consistent end-user experience.</span></span> <span data-ttu-id="6a324-133">Для поддержки этого полностью настраиваемого пользовательского интерфейса приложение установки может отключить встроенный пользовательский интерфейс установщик Windows и работать с ним целиком.</span><span class="sxs-lookup"><span data-stu-id="6a324-133">To support this fully custom UI scenario, a setup application can turn off Windows Installer's built-in UI, and handle the entire user interface itself.</span></span> <span data-ttu-id="6a324-134">Установщик Windows API предоставляет механизм обратного вызова, позволяющий пользовательскому ИНТЕРФЕЙСу установки получать уведомления о ходе установки, а также важные события, такие как запросы на изменение диска.</span><span class="sxs-lookup"><span data-stu-id="6a324-134">The Windows Installer API exposes a callback mechanism to allow a custom setup UI to be notified of the progress of the installation, as well as important events such as disk change requests.</span></span>

<span data-ttu-id="6a324-135">Установщик Windows не является комплексным решением для создания настроек.</span><span class="sxs-lookup"><span data-stu-id="6a324-135">Windows Installer is not an end-to-end solution for creating setups.</span></span> <span data-ttu-id="6a324-136">Это только API, который может использоваться программой установки для выполнения фактической установки файлов, разделов реестра, ярлыков рабочего стола и других элементов приложения.</span><span class="sxs-lookup"><span data-stu-id="6a324-136">It is only an API that can be used by a setup program to do the actual installation of files, registry keys, desktop shortcuts, and other elements of the application.</span></span> <span data-ttu-id="6a324-137">Последние версии всех основных средств коммерческой настройки (например, InstallShield, разумно и Microsoft Visual Studio) поддерживают установщик Windows.</span><span class="sxs-lookup"><span data-stu-id="6a324-137">Recent versions of all of the major commercial setup tools (for example, InstallShield, WISE, and Microsoft Visual Studio) support Windows Installer.</span></span> <span data-ttu-id="6a324-138">Эти средства предоставляют удобные пользовательские интерфейсы для создания программы установки для игры, но они полагаются на установщик Windows API, чтобы выполнить большую часть фактической установки.</span><span class="sxs-lookup"><span data-stu-id="6a324-138">These tools provide convenient user interfaces for creating the setup for a game, but they rely on the Windows Installer API to do much of the actual installation.</span></span> <span data-ttu-id="6a324-139">Эти средства также можно использовать только для создания базы данных MSI, содержащей пакет установки, который затем можно установить из пользовательского интерфейса установки.</span><span class="sxs-lookup"><span data-stu-id="6a324-139">These tools can also be used just to build an MSI database containing the setup package, which can then be installed from a custom-written setup UI.</span></span> <span data-ttu-id="6a324-140">В качестве альтернативы сторонним средствам установщик Windows API предоставляет все функции, необходимые для программного создания базы данных MSI и управления ей, а пакет SDK для платформы Windows включает в себя средство редактирования базы данных MSI, которое называется Orca.</span><span class="sxs-lookup"><span data-stu-id="6a324-140">As an alternative to third-party tools, the Windows Installer API provides all of the functions necessary for creating and manipulating an MSI database programmatically, and the Windows Platform SDK includes a bare-bones MSI database-editing tool called Orca.</span></span>

## <a name="key-windows-installer-concepts"></a><span data-ttu-id="6a324-141">Основные понятия установщик Windows</span><span class="sxs-lookup"><span data-stu-id="6a324-141">Key Windows Installer Concepts</span></span>

<span data-ttu-id="6a324-142">Ниже приведены установщик Windows компоненты и компоненты.</span><span class="sxs-lookup"><span data-stu-id="6a324-142">Here are the Windows Installer components and features.</span></span>

### <a name="components"></a><span data-ttu-id="6a324-143">Компоненты</span><span class="sxs-lookup"><span data-stu-id="6a324-143">Components</span></span>

<span data-ttu-id="6a324-144">Приложение состоит из одного или нескольких компонентов, идентифицируемых по ИДЕНТИФИКАТОРу компонента GUID.</span><span class="sxs-lookup"><span data-stu-id="6a324-144">An application is made up of one or more components, identified by a GUID component ID.</span></span> <span data-ttu-id="6a324-145">Компонент — это атомарная единица; она либо полностью установлена, либо не установлена вообще.</span><span class="sxs-lookup"><span data-stu-id="6a324-145">A component is an atomic unit; it is either entirely installed or not installed at all.</span></span> <span data-ttu-id="6a324-146">Компонент может состоять из одного файла, нескольких файлов, разделов реестра, ярлыков рабочего стола или их сочетания.</span><span class="sxs-lookup"><span data-stu-id="6a324-146">A component can consist of a single file, multiple files, registry keys, desktop shortcuts, or some combination thereof.</span></span> <span data-ttu-id="6a324-147">Ресурсы (файлы и т. д.) внутри компонента должны быть уникальными для этого компонента. два компонента не могут содержать один и тот же ресурс.</span><span class="sxs-lookup"><span data-stu-id="6a324-147">The resources (files, and so on) within a component must be unique to that component-no two components can contain the same resource.</span></span> <span data-ttu-id="6a324-148">Компонент не устанавливается явным образом. Он устанавливается только как часть компонента (см. ниже).</span><span class="sxs-lookup"><span data-stu-id="6a324-148">A component is never installed explicitly; it is only installed as part of a feature (see following).</span></span>

### <a name="features"></a><span data-ttu-id="6a324-149">Компоненты</span><span class="sxs-lookup"><span data-stu-id="6a324-149">Features</span></span>

<span data-ttu-id="6a324-150">Компонент — это группа компонентов, определяемая ИДЕНТИФИКАТОРом функции GUID.</span><span class="sxs-lookup"><span data-stu-id="6a324-150">A feature is a group of components, identified by a GUID feature ID.</span></span> <span data-ttu-id="6a324-151">В отличие от компонентов, несколько компонентов могут содержать один и тот же компонент.</span><span class="sxs-lookup"><span data-stu-id="6a324-151">Unlike components, multiple features may contain the same component.</span></span> <span data-ttu-id="6a324-152">Компонент, совместно используемый несколькими компонентами, будет установлен, если какие-либо из этих компонентов установлены и удалены только после удаления всех компонентов, ссылающихся на этот компонент.</span><span class="sxs-lookup"><span data-stu-id="6a324-152">A component shared between multiple features will be installed if any of those features is installed, and removed only when all features that reference the component have been uninstalled.</span></span> <span data-ttu-id="6a324-153">Установка компонента может быть выполнена автоматически в рамках установки продукта или вручную с помощью API [**мсиконфигурефеатуре**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) .</span><span class="sxs-lookup"><span data-stu-id="6a324-153">Installation of a feature can be done automatically as part of the installation of a product, or it can be done manually using the [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) API.</span></span>

<span data-ttu-id="6a324-154">Хотя некоторые игры имеют несколько "компонентов", которые могут устанавливаться независимо, установщик Windows концепция компонента все еще полезна.</span><span class="sxs-lookup"><span data-stu-id="6a324-154">Although few games have multiple "features" that can be installed independently, the Windows Installer concept of a feature is still useful.</span></span> <span data-ttu-id="6a324-155">Поскольку установщик Windows функция — это лишь набор компонентов, которые можно установить вместе, игры могут использовать функции для объединения всего содержимого, необходимого для конкретного этапа игры.</span><span class="sxs-lookup"><span data-stu-id="6a324-155">Since a Windows Installer feature is nothing more than a collection of components that can be installed together, games can use features to group together all of the content needed for a particular stage of the game.</span></span> <span data-ttu-id="6a324-156">Например, игра, ориентированная на уровень, может определять одну функцию на уровень, состоящую из всего содержимого, необходимого для этого уровня.</span><span class="sxs-lookup"><span data-stu-id="6a324-156">For example, a level-oriented game could define one feature per level, consisting of all of the content required for that level.</span></span> <span data-ttu-id="6a324-157">Это позволит игре устанавливать содержимое на один уровень за раз в самой игре, а не устанавливать все содержимое всех уровней во время первоначальной установки.</span><span class="sxs-lookup"><span data-stu-id="6a324-157">This would allow the game to install the content one level at a time from within the game itself, rather than installing all of the content for all of the levels during the initial installation.</span></span>

## <a name="install-states"></a><span data-ttu-id="6a324-158">Состояния установки</span><span class="sxs-lookup"><span data-stu-id="6a324-158">Install States</span></span>

<span data-ttu-id="6a324-159">С каждым компонентом или компонентом связано состояние установки, которое определяет, доступен ли компонент или компонент, и если да, то где установлены файлы для компонента или функции.</span><span class="sxs-lookup"><span data-stu-id="6a324-159">Each component or feature has an associated install state, which determines whether the component or feature is available, and if so, where the files for the component or feature are installed.</span></span> <span data-ttu-id="6a324-160">Возможные состояния установки для компонента:</span><span class="sxs-lookup"><span data-stu-id="6a324-160">The possible install states for a feature are:</span></span>

<dl> <dt>

<span data-ttu-id="6a324-161"><span id="Absent"></span><span id="absent"></span><span id="ABSENT"></span>Отсутствии</span><span class="sxs-lookup"><span data-stu-id="6a324-161"><span id="Absent"></span><span id="absent"></span><span id="ABSENT"></span>Absent</span></span>
</dt> <dd>

<span data-ttu-id="6a324-162">Эта функция не установлена, поэтому она недоступна.</span><span class="sxs-lookup"><span data-stu-id="6a324-162">The feature is not installed and is therefore inaccessible.</span></span>

</dd> <dt>

<span data-ttu-id="6a324-163"><span id="Local"></span><span id="local"></span><span id="LOCAL"></span>Языковые</span><span class="sxs-lookup"><span data-stu-id="6a324-163"><span id="Local"></span><span id="local"></span><span id="LOCAL"></span>Local</span></span>
</dt> <dd>

<span data-ttu-id="6a324-164">Эта функция доступна и устанавливается для запуска с локального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="6a324-164">The feature is available and is installed to run from the local hard drive.</span></span>

</dd> <dt>

<span data-ttu-id="6a324-165"><span id="Source"></span><span id="source"></span><span id="SOURCE"></span>Источника</span><span class="sxs-lookup"><span data-stu-id="6a324-165"><span id="Source"></span><span id="source"></span><span id="SOURCE"></span>Source</span></span>
</dt> <dd>

<span data-ttu-id="6a324-166">Эта функция доступна и устанавливается для запуска с оригинального исходного носителя (обычно это компакт-диск или диск DVD).</span><span class="sxs-lookup"><span data-stu-id="6a324-166">The feature is available and is installed to run from the original source media (usually a CD or DVD).</span></span>

</dd> <dt>

<span data-ttu-id="6a324-167"><span id="Advertised"></span><span id="advertised"></span><span id="ADVERTISED"></span>Объявленных</span><span class="sxs-lookup"><span data-stu-id="6a324-167"><span id="Advertised"></span><span id="advertised"></span><span id="ADVERTISED"></span>Advertised</span></span>
</dt> <dd>

<span data-ttu-id="6a324-168">Компонент не установлен, но его можно установить по запросу с помощью API [**мсиконфигурефеатуре**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) .</span><span class="sxs-lookup"><span data-stu-id="6a324-168">The feature is not installed, but can be installed on demand using the [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) API.</span></span> <span data-ttu-id="6a324-169">Когда компонент фактически установлен, он может быть установлен либо в локальное, либо в исходном состоянии.</span><span class="sxs-lookup"><span data-stu-id="6a324-169">When the feature is actually installed, it can be installed either to the Local or Source state.</span></span>

</dd> </dl>

<span data-ttu-id="6a324-170">Компонент может иметь любое из указанных выше состояний, за исключением "объявлено".</span><span class="sxs-lookup"><span data-stu-id="6a324-170">A component can have any of the above states except for "Advertised."</span></span> <span data-ttu-id="6a324-171">Если компонент является частью объявленной функции, компонент будет отображаться как "отсутствует", пока не будет установлен компонент.</span><span class="sxs-lookup"><span data-stu-id="6a324-171">If a component is part of an advertised feature, the component will appear as "Absent" until the feature is installed.</span></span>

## <a name="install-on-demand"></a><span data-ttu-id="6a324-172">Установка по запросу</span><span class="sxs-lookup"><span data-stu-id="6a324-172">Install on Demand</span></span>

<span data-ttu-id="6a324-173">Установщик Windows позволяет приложению помечать функции как объявленные, то есть эта функция еще не установлена, но доступна для установки во время выполнения, если это необходимо.</span><span class="sxs-lookup"><span data-stu-id="6a324-173">Windows Installer allows an application to mark features as Advertised, meaning that the feature is not yet installed, but is available to install at runtime if it is needed.</span></span> <span data-ttu-id="6a324-174">Установка компонентов в среде выполнения называется "Установка по запросу".</span><span class="sxs-lookup"><span data-stu-id="6a324-174">Installing features at runtime is known as "Install on Demand."</span></span> <span data-ttu-id="6a324-175">Игры могут использовать установку по запросу, чтобы радикально сократить время, необходимое для первоначальной настройки игры, отложив установку содержимого игры, пока оно не понадобится во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="6a324-175">Games can use Install on Demand to drastically reduce the time required for the initial game setup by deferring the installation of game content until it is needed at runtime.</span></span> <span data-ttu-id="6a324-176">Задержка, необходимая для установки содержимого во время выполнения, часто может быть частично или полностью скрыта путем выполнения установки по требованию в фоновом потоке, в то время как пользователь в противном случае занят игрой.</span><span class="sxs-lookup"><span data-stu-id="6a324-176">The delay required to install the content at runtime can often be partially or completely hidden by doing the on-demand installation in a background thread, while the user is otherwise occupied with the game.</span></span>

## <a name="custom-user-interface"></a><span data-ttu-id="6a324-177">Настраиваемый пользовательский</span><span class="sxs-lookup"><span data-stu-id="6a324-177">Custom User Interface</span></span>

<span data-ttu-id="6a324-178">Хотя установщик Windows предоставляет пользовательский интерфейс по умолчанию, который помогает пользователю устанавливать приложение, этот интерфейс выглядит так же, как и для стандартного приложения Windows.</span><span class="sxs-lookup"><span data-stu-id="6a324-178">Although Windows Installer provides a default user interface that guides the user through the installation of the application, this interface looks like that of a standard Windows application.</span></span> <span data-ttu-id="6a324-179">Многие разработчики игр предпочитают, что их пользовательский интерфейс установки выглядит так же, как и сама игра, чтобы предоставить пользователю впечатление от амбианце игры.</span><span class="sxs-lookup"><span data-stu-id="6a324-179">Many game developers prefer that their installation UI have the same look and feel as the game itself, to provide the user with a taste of the game's ambiance.</span></span> <span data-ttu-id="6a324-180">Для этого установщик Windows позволяет полностью отключить встроенный пользовательский интерфейс, позволяя разработчику предоставлять полностью настраиваемый пользовательский интерфейс.</span><span class="sxs-lookup"><span data-stu-id="6a324-180">To support this, Windows Installer allows its built-in user interface to be completely disabled, allowing the developer to provide a completely custom UI.</span></span>

<span data-ttu-id="6a324-181">Программа выборочной установки сначала отключает встроенный пользовательский интерфейс установщик Windows с помощью API [**мсисетинтерналуи**](/windows/desktop/api/msi/nf-msi-msisetinternalui) , чтобы установить уровень ПОЛЬЗОВАТЕЛЬСКОГО интерфейса инсталлуилевел \_ None.</span><span class="sxs-lookup"><span data-stu-id="6a324-181">The custom setup program first disables Windows Installer's built-in user interface using the [**MsiSetInternalUI**](/windows/desktop/api/msi/nf-msi-msisetinternalui) API to set the UI level to INSTALLUILEVEL\_NONE.</span></span> <span data-ttu-id="6a324-182">Затем он вызывает API [**мсисетекстерналуи**](/windows/desktop/api/msi/nf-msi-msisetexternaluia) , чтобы указать функцию обратного вызова, которая будет вызываться в процессе установки для уведомления программы установки о ключевых событиях во время установки.</span><span class="sxs-lookup"><span data-stu-id="6a324-182">It then calls the [**MsiSetExternalUI**](/windows/desktop/api/msi/nf-msi-msisetexternaluia) API to specify a callback function that will be called during the installation process to notify the setup program of key events during the installation.</span></span>

<span data-ttu-id="6a324-183">Фактически процесс установки запускается путем вызова API [**мсиинсталлпродукт**](/windows/desktop/api/msi/nf-msi-msiinstallproducta) .</span><span class="sxs-lookup"><span data-stu-id="6a324-183">The actual installation process is then started by calling the [**MsiInstallProduct**](/windows/desktop/api/msi/nf-msi-msiinstallproducta) API.</span></span> <span data-ttu-id="6a324-184">Этот API принимает строку параметра, которая позволяет вызывающей стороне указать значения для именованных свойств.</span><span class="sxs-lookup"><span data-stu-id="6a324-184">This API accepts a parameter string that allows the caller to specify values for named properties.</span></span> <span data-ttu-id="6a324-185">Эти свойства можно использовать в самой базе данных установки для настройки способа установки приложения.</span><span class="sxs-lookup"><span data-stu-id="6a324-185">These properties can be used within the installation database itself to customize how the application is to be installed.</span></span> <span data-ttu-id="6a324-186">Эти свойства можно использовать для указания следующих параметров:</span><span class="sxs-lookup"><span data-stu-id="6a324-186">These properties can be used to specify:</span></span>

-   <span data-ttu-id="6a324-187">Каталог, в который должно быть установлено приложение</span><span class="sxs-lookup"><span data-stu-id="6a324-187">The directory to which the application is to be installed</span></span>
-   <span data-ttu-id="6a324-188">Какие компоненты должны быть установлены локально и должны быть установлены для запуска с компакт-диска или DVD-диска (например, чтобы обеспечить выбор между минимальной установкой и полной установкой);</span><span class="sxs-lookup"><span data-stu-id="6a324-188">Which features are to be installed locally and which are to be installed to run from the CD/DVD (for example, to enable choosing between a minimal install and a full install)</span></span>
-   <span data-ttu-id="6a324-189">Должно ли приложение устанавливаться для всех пользователей компьютера или только для текущего пользователя</span><span class="sxs-lookup"><span data-stu-id="6a324-189">Whether the application should be installed for all users of the machine, or for only the current user</span></span>

<span data-ttu-id="6a324-190">Во время установки программа установки использует сообщения уведомления, отправленные в функцию обратного вызова, чтобы определить, когда следует обновить пользовательский интерфейс индикатора хода выполнения, когда пользователю будет предложено вставить следующий компакт-диск или когда уведомить пользователя об ошибке в процессе установки.</span><span class="sxs-lookup"><span data-stu-id="6a324-190">During the course of the installation, the setup program uses the notification messages sent to its callback function to determine when to update its progress indicator UI, when to prompt the user to insert the next CD, or when to notify the user about an error in the installation process.</span></span>

## <a name="patching"></a><span data-ttu-id="6a324-191">установка исправлений;</span><span class="sxs-lookup"><span data-stu-id="6a324-191">Patching</span></span>

<span data-ttu-id="6a324-192">Установщик Windows позволяет устанавливать исправления для установленных приложений, применяя файл исправления.</span><span class="sxs-lookup"><span data-stu-id="6a324-192">Windows Installer allows installed applications to be patched by applying a patch file.</span></span> <span data-ttu-id="6a324-193">Файл исправления содержит новые файлы, которые будут добавлены с помощью исправления, файлы, которые были изменены с помощью исправления, и список изменений, которые необходимо внести в базу данных установки.</span><span class="sxs-lookup"><span data-stu-id="6a324-193">A patch file contains the new files to be added by the patch, the files that are modified by the patch, and a list of changes to make to the installation database.</span></span> <span data-ttu-id="6a324-194">Для экономии места вместо хранения полного содержимого файла, измененного с помощью исправления, файл исправления фактически содержит только различия между исходной версией файла и новой версией файла.</span><span class="sxs-lookup"><span data-stu-id="6a324-194">To conserve space, instead of storing the complete contents of a file changed by the patch, the patch file actually contains only the differences between the original version of the file and the new version of the file.</span></span>

<span data-ttu-id="6a324-195">Чтобы создать исправление, необходимо установить образ установки для каждой версии приложения, с которой нужно обновить обновление, а также образ установки для новой обновленной версии приложения.</span><span class="sxs-lookup"><span data-stu-id="6a324-195">In order to create a patch, you need the setup image for each of the versions of the application that you wish the patch to upgrade from, as well as the setup image for the new, upgraded version of the application.</span></span> <span data-ttu-id="6a324-196">Образ установки состоит из базы данных MSI и всех фактических файлов данных для приложения.</span><span class="sxs-lookup"><span data-stu-id="6a324-196">A setup image consists of the MSI database and all of the actual data files for the application.</span></span> <span data-ttu-id="6a324-197">Лучшим способом создания образа установки для новой версии приложения является копирование образа установки из предыдущей версии приложения, а затем внесение любых изменений, необходимых для обновления этой копии в исправленной версии.</span><span class="sxs-lookup"><span data-stu-id="6a324-197">The best way to create a setup image for a new version of the application is to copy the setup image from the previous version of the application, and then make any changes necessary to update that copy to the patched version.</span></span>

<span data-ttu-id="6a324-198">После получения всех необходимых образов установки можно создать исправления с помощью Msimsp.exe, который представляет собой средство создания исправлений, доступное в составе пакета Platform SDK.</span><span class="sxs-lookup"><span data-stu-id="6a324-198">Once you have all of the necessary setup images, you can create the patches using Msimsp.exe, which is a patch creation tool available as part of the Platform SDK.</span></span> <span data-ttu-id="6a324-199">Средство запросит расположение каждого из образов установки, а затем определит, как эффективно представить различия между последовательными версиями.</span><span class="sxs-lookup"><span data-stu-id="6a324-199">The tool will ask for the locations of each of the setup images, and then determine how to efficiently represent the differences between the successive versions.</span></span> <span data-ttu-id="6a324-200">Выходные данные средства — это окончательный файл исправления (определяется расширением MSP).</span><span class="sxs-lookup"><span data-stu-id="6a324-200">The output of the tool is the final patch file (identified by the extension MSP).</span></span> <span data-ttu-id="6a324-201">Чтобы установить исправление программным способом, вызовите API [**мсиапплипатч**](/windows/desktop/api/msi/nf-msi-msiapplypatcha) .</span><span class="sxs-lookup"><span data-stu-id="6a324-201">In order to install the patch programmatically, call the [**MsiApplyPatch**](/windows/desktop/api/msi/nf-msi-msiapplypatcha) API.</span></span> <span data-ttu-id="6a324-202">Пользователь также может установить обновление вручную, дважды щелкнув MSP-файл в проводнике.</span><span class="sxs-lookup"><span data-stu-id="6a324-202">The user can also install the patch manually by double-clicking on the MSP file in Explorer.</span></span>

## <a name="other-resources"></a><span data-ttu-id="6a324-203">Другие ресурсы</span><span class="sxs-lookup"><span data-stu-id="6a324-203">Other Resources</span></span>

-   <span data-ttu-id="6a324-204">Подробные сведения об API установщик Windows см. в разделе [установщик Windows](/windows/desktop/Msi/windows-installer-portal).</span><span class="sxs-lookup"><span data-stu-id="6a324-204">For detailed info on the Windows Installer API, see [Windows Installer](/windows/desktop/Msi/windows-installer-portal).</span></span>
-   <span data-ttu-id="6a324-205">Сведения о рекомендациях по установке игр см. в статье [Установка и обслуживание игр](/windows/desktop/DxTechArts/installation-and-maintenance-of-games).</span><span class="sxs-lookup"><span data-stu-id="6a324-205">For info on best practices for game installation, see [Installation and Maintenance of Games](/windows/desktop/DxTechArts/installation-and-maintenance-of-games).</span></span>

 

 