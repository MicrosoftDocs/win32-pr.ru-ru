---
title: Установка и обслуживание игр
description: В этой статье описывается набор рекомендаций, которые помогут сократить время, необходимое для установки игры, предотвращения ненужных обращений в службу поддержки и позволить пользователям быстро и просто начать играть в игру как можно быстрее.
ms.assetid: c953165d-2318-ca06-a895-abedcbcb594c
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de171fd76654eb3b6edb8818ec073c4ef5ba8ca4
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104339129"
---
# <a name="installation-and-maintenance-of-games"></a><span data-ttu-id="78dbb-103">Установка и обслуживание игр</span><span class="sxs-lookup"><span data-stu-id="78dbb-103">Installation and Maintenance of Games</span></span>

<span data-ttu-id="78dbb-104">В этой статье описывается набор рекомендаций, которые помогут сократить время, необходимое для установки игры, предотвращения ненужных обращений в службу поддержки и позволить пользователям быстро и просто начать играть в игру как можно быстрее.</span><span class="sxs-lookup"><span data-stu-id="78dbb-104">This article describes a set of best practices that can help reduce user frustration about the time required to install a game, prevent unnecessary support calls, and allow users to start playing your game as quickly and painlessly as possible.</span></span>

-   [<span data-ttu-id="78dbb-105">Начальная установка</span><span class="sxs-lookup"><span data-stu-id="78dbb-105">Initial Installation</span></span>](#initial-installation)
    -   [<span data-ttu-id="78dbb-106">Упрощение пользовательского интерфейса установки</span><span class="sxs-lookup"><span data-stu-id="78dbb-106">Streamlining the Installation UI</span></span>](#streamlining-the-installation-ui)
    -   [<span data-ttu-id="78dbb-107">Сокращение времени, необходимого для установки</span><span class="sxs-lookup"><span data-stu-id="78dbb-107">Reducing the Time Required for Installation</span></span>](#reducing-the-time-required-for-installation)
    -   [<span data-ttu-id="78dbb-108">Минимальная установка</span><span class="sxs-lookup"><span data-stu-id="78dbb-108">Minimal Installation</span></span>](#minimal-installation)
    -   [<span data-ttu-id="78dbb-109">Установка по запросу</span><span class="sxs-lookup"><span data-stu-id="78dbb-109">Install on Demand</span></span>](#install-on-demand)
-   [<span data-ttu-id="78dbb-110">Игра после установки</span><span class="sxs-lookup"><span data-stu-id="78dbb-110">Post-Installation Game-Play</span></span>](#post-installation-game-play)
    -   [<span data-ttu-id="78dbb-111">Загрузка</span><span class="sxs-lookup"><span data-stu-id="78dbb-111">AutoRun</span></span>](#autorun)
    -   [<span data-ttu-id="78dbb-112">Преобразование установки установки по запросу в полную установку</span><span class="sxs-lookup"><span data-stu-id="78dbb-112">Converting an Install-on-Demand Installation to a Full Installation</span></span>](#converting-an-install-on-demand-installation-to-a-full-installation)
    -   [<span data-ttu-id="78dbb-113">Обслуживание программного обеспечения и содержимого игр</span><span class="sxs-lookup"><span data-stu-id="78dbb-113">Maintenance of Game Software and Content</span></span>](#maintenance-of-game-software-and-content)
    -   [<span data-ttu-id="78dbb-114">Проверка наличия обновлений автоматически</span><span class="sxs-lookup"><span data-stu-id="78dbb-114">Checking for Updates Automatically</span></span>](#checking-for-updates-automatically)
    -   [<span data-ttu-id="78dbb-115">Автоматическая загрузка исправлений</span><span class="sxs-lookup"><span data-stu-id="78dbb-115">Downloading Patches Automatically</span></span>](#downloading-patches-automatically)
-   [<span data-ttu-id="78dbb-116">Другие ресурсы</span><span class="sxs-lookup"><span data-stu-id="78dbb-116">Other Resources</span></span>](#other-resources)
-   [<span data-ttu-id="78dbb-117">См. также</span><span class="sxs-lookup"><span data-stu-id="78dbb-117">Related topics</span></span>](#related-topics)

## <a name="initial-installation"></a><span data-ttu-id="78dbb-118">Начальная установка</span><span class="sxs-lookup"><span data-stu-id="78dbb-118">Initial Installation</span></span>

<span data-ttu-id="78dbb-119">Пользователи приобретают игры, так как они пользуются их воспроизведением, а не потому, что они могут их установить.</span><span class="sxs-lookup"><span data-stu-id="78dbb-119">Users buy games because they enjoy playing them, not because they enjoy installing them.</span></span> <span data-ttu-id="78dbb-120">Для конечных пользователей установка игры должна быть быстрой, простой и понятной.</span><span class="sxs-lookup"><span data-stu-id="78dbb-120">Installing a game should be as quick, straightforward, and as painless as possible for the end user.</span></span> <span data-ttu-id="78dbb-121">В идеале конечные пользователи даже не должны видеть пользовательский интерфейс установки. они должны иметь возможность просто удалить игровой диск в лоток и начать играть.</span><span class="sxs-lookup"><span data-stu-id="78dbb-121">Ideally, end users should not even see an installation UI; they should be able to just drop the game disc into the tray and begin playing.</span></span>

### <a name="streamlining-the-installation-ui"></a><span data-ttu-id="78dbb-122">Упрощение пользовательского интерфейса установки</span><span class="sxs-lookup"><span data-stu-id="78dbb-122">Streamlining the Installation UI</span></span>

<span data-ttu-id="78dbb-123">Общие аспекты существующих пользовательских интерфейсов установки игр мешают работе конечного пользователя.</span><span class="sxs-lookup"><span data-stu-id="78dbb-123">Common aspects of existing game installation UIs interfere with the desired end-user experience:</span></span>

-   <span data-ttu-id="78dbb-124">Запросите ненужные вопросы пользователя.</span><span class="sxs-lookup"><span data-stu-id="78dbb-124">Asking the user unnecessary questions.</span></span>

    <span data-ttu-id="78dbb-125">Например, многие игры запрашивают, хочет ли пользователь установить DirectX.</span><span class="sxs-lookup"><span data-stu-id="78dbb-125">For example, many games ask if the user wants to install DirectX.</span></span> <span data-ttu-id="78dbb-126">Если для игры требуется запуск Microsoft DirectX, а правильная версия DirectX еще не установлена, игра должна просто установить DirectX.</span><span class="sxs-lookup"><span data-stu-id="78dbb-126">If the game requires Microsoft DirectX to run, and the right version of DirectX isn't installed already, the game should simply install DirectX.</span></span>

-   <span data-ttu-id="78dbb-127">Задавайте вопросы пользователей о том, что большинство пользователей ответит таким же образом.</span><span class="sxs-lookup"><span data-stu-id="78dbb-127">Asking the user questions that a vast majority of users will answer in the same way.</span></span>

    <span data-ttu-id="78dbb-128">Для обычных пользователей параметры по умолчанию для пути установки, расположения меню "Пуск" и т. д. являются все правильно.</span><span class="sxs-lookup"><span data-stu-id="78dbb-128">For typical users, the default settings for installation path, Start menu location, and so on, are all fine.</span></span> <span data-ttu-id="78dbb-129">Предлагают дополнительные параметры для пользователей, желающих изменить эти параметры.</span><span class="sxs-lookup"><span data-stu-id="78dbb-129">Offer advanced options for users who want to change these settings.</span></span>

<span data-ttu-id="78dbb-130">Пользовательский интерфейс установки должен позволять обычным пользователям начать играть в игру как можно скорее.</span><span class="sxs-lookup"><span data-stu-id="78dbb-130">The installation UI should be designed to allow the typical user to begin playing the game as soon as possible.</span></span> <span data-ttu-id="78dbb-131">Если функция автозапуска включена на компьютере пользователя (по умолчанию), программа установки должна предположить, что пользователь хочет как можно быстрее воспроизвести игру, минуя все ненужные вопросы.</span><span class="sxs-lookup"><span data-stu-id="78dbb-131">If AutoRun is enabled on the user's computer, which is the default, the setup program should assume that the user wants to be playing the game as soon as possible, bypassing any unnecessary questions.</span></span> <span data-ttu-id="78dbb-132">Установка рограмма[Install by Demand](#install-on-demand)m должна начать установку игры в путь установки по умолчанию, предпочтительно с помощью программы установки, как описано в разделе.</span><span class="sxs-lookup"><span data-stu-id="78dbb-132">The setup progra[Install on Demand](#install-on-demand)m should begin installing the game to the default installation path, preferably using a setup like that described in .</span></span> <span data-ttu-id="78dbb-133">Можно дать пользователям возможность изменить параметры установки перед автоматическим запуском установки.</span><span class="sxs-lookup"><span data-stu-id="78dbb-133">It is appropriate to give users a chance to change the installation settings before automatically starting the installation.</span></span> <span data-ttu-id="78dbb-134">Тем не менее, это следует сделать, запрашивая у пользователя нажатие клавиши для расширенных параметров установки, а затем продолжайте автоматически с параметрами по умолчанию, если пользователь не найдет на этот ключ в течение пяти – 10 секунд.</span><span class="sxs-lookup"><span data-stu-id="78dbb-134">However, this should be accomplished by prompting the user to hit a key for advanced setup options, and then proceeding automatically with the default options if the user does not hit that key within five to ten seconds.</span></span>

<span data-ttu-id="78dbb-135">Если функция автозапуска не включена на компьютере пользователя, программа установки должна предположить, что пользователю не нужно, чтобы программа установки автоматически начинала установку игры.</span><span class="sxs-lookup"><span data-stu-id="78dbb-135">If AutoRun is not enabled on the user's computer, the setup program should assume that the user does not want the setup program to begin installing the game automatically.</span></span> <span data-ttu-id="78dbb-136">Если программа установки запускается другими способами, отличными от AutoRun, она должна запустить пользовательский интерфейс расширенной установки.</span><span class="sxs-lookup"><span data-stu-id="78dbb-136">If the setup program is started by some means other than AutoRun, it should launch the advanced setup UI.</span></span>

### <a name="reducing-the-time-required-for-installation"></a><span data-ttu-id="78dbb-137">Сокращение времени, необходимого для установки</span><span class="sxs-lookup"><span data-stu-id="78dbb-137">Reducing the Time Required for Installation</span></span>

<span data-ttu-id="78dbb-138">Сегодня большинство игр Microsoft Windows занимает от пяти минут до половины часа, чтобы завершить процесс установки.</span><span class="sxs-lookup"><span data-stu-id="78dbb-138">Most Microsoft Windows games today take anywhere from five minutes to half an hour to finish the installation process.</span></span> <span data-ttu-id="78dbb-139">В отличие от этого, большинство консолей консоли не требует более тридцати секунд с момента вставки пользователем игрового компактного диска на то время, когда пользователь сможет играть в игру.</span><span class="sxs-lookup"><span data-stu-id="78dbb-139">In contrast, most console games take no more than thirty seconds from the time the user inserts the game CD to the time the user can play the game.</span></span> <span data-ttu-id="78dbb-140">Это различие обусловлено тем, что большинство игр Windows рассчитаны на наиболее частое выполнение (если не все) их содержимого с жесткого диска компьютера; консоли, в которых отсутствует место для постоянного хранения больших объемов содержимого, необходимо, чтобы содержимое было запущено с исходного носителя.</span><span class="sxs-lookup"><span data-stu-id="78dbb-140">This difference is due to the fact that most Windows games are designed to run most, if not all, of their content from the computer's hard drive; consoles, which lack a place to permanently store large amounts of content, require that the content be run from the source media.</span></span> <span data-ttu-id="78dbb-141">Хотя загрузка содержимого с локального жесткого диска обеспечивает более быструю загрузку в игру, недостатком является то, что все это содержимое должно быть скопировано с исходного носителя на жесткий диск в некоторый момент времени.</span><span class="sxs-lookup"><span data-stu-id="78dbb-141">While loading content from the local hard drive makes for faster in-game load times, the downside is that all of that content has to be copied from the source media to the hard drive at some point.</span></span> <span data-ttu-id="78dbb-142">В большинстве игр Windows все содержимое копируется на жесткий диск в рамках процесса установки.</span><span class="sxs-lookup"><span data-stu-id="78dbb-142">Most Windows games choose to copy all of the content to the hard drive all at once, as part of an installation process.</span></span> <span data-ttu-id="78dbb-143">Это отменяет первоначальный опыт пользователя в игре, представляя пользователю смотреть индикатор выполнения в течение нескольких минут, прежде чем играть в игру.</span><span class="sxs-lookup"><span data-stu-id="78dbb-143">This detracts from the user's initial experience with the game by making the user watch a progress bar for several minutes before being able to play the game.</span></span>

<span data-ttu-id="78dbb-144">Существует два подхода, которые можно использовать для минимизации времени, затраченного на первоначальное выполнение установки игры: [Минимальная установка](#minimal-installation) и [Установка по запросу](#install-on-demand).</span><span class="sxs-lookup"><span data-stu-id="78dbb-144">There are two approaches that can be used to minimize the time spent initially installing the game: [Minimal Installation](#minimal-installation) and [Install on Demand](#install-on-demand).</span></span>

### <a name="minimal-installation"></a><span data-ttu-id="78dbb-145">Минимальная установка</span><span class="sxs-lookup"><span data-stu-id="78dbb-145">Minimal Installation</span></span>

<span data-ttu-id="78dbb-146">В случае минимальной установки игра устанавливает на жесткий диск только минимальный набор содержимого.</span><span class="sxs-lookup"><span data-stu-id="78dbb-146">In a minimal installation scenario, the game installs only a bare minimum set of content to the hard drive.</span></span> <span data-ttu-id="78dbb-147">Обычно это состоит только из исполняемых файлов и библиотек DLL.</span><span class="sxs-lookup"><span data-stu-id="78dbb-147">Usually, this consists of only the game executable and DLLs.</span></span> <span data-ttu-id="78dbb-148">Доступ к остальной части содержимого осуществляется непосредственно с исходного носителя.</span><span class="sxs-lookup"><span data-stu-id="78dbb-148">The remainder of the content is accessed directly from the source media.</span></span> <span data-ttu-id="78dbb-149">Это радикально сокращает время, необходимое для установки, так как исполняемый файл игры редко превышает 10-20 МБ.</span><span class="sxs-lookup"><span data-stu-id="78dbb-149">This drastically reduces the time required to install, since a game's executable is rarely larger than 10-20 MB.</span></span> <span data-ttu-id="78dbb-150">Недостаток заключается в том, что игра занимает больше времени для загрузки содержимого во время игры, поскольку она должна загружаться с более медленного исходного носителя.</span><span class="sxs-lookup"><span data-stu-id="78dbb-150">The drawback is that the game takes longer to load content during the game, since it must load it from the slower source media.</span></span>

<span data-ttu-id="78dbb-151">Чтобы создать минимальную конфигурацию установки в процессе установки на основе установщик Windows:</span><span class="sxs-lookup"><span data-stu-id="78dbb-151">To create a minimal installation configuration in a Windows Installer-based setup:</span></span>

-   <span data-ttu-id="78dbb-152">Сгруппируйте все компоненты, которые должны быть установлены на жестком диске, в компонент, помеченный для установки локально.</span><span class="sxs-lookup"><span data-stu-id="78dbb-152">Group all of the components to be installed to the hard drive into a feature that is marked to install locally.</span></span>

    <span data-ttu-id="78dbb-153">Этот компонент будет называться функцией начальной загрузки.</span><span class="sxs-lookup"><span data-stu-id="78dbb-153">This feature will be referred to as the "Bootstrap" feature.</span></span>

-   <span data-ttu-id="78dbb-154">Сгруппируйте все компоненты, которые должны быть запущены с исходного носителя, в функцию, помеченную как "запустить из источника".</span><span class="sxs-lookup"><span data-stu-id="78dbb-154">Group all of the components that are to be run from the source media into a feature that is marked as "run from source."</span></span>
-   <span data-ttu-id="78dbb-155">При открытии файла, который может находиться на исходном носителе, используйте функцию [**мсижеткомпонентпас**](/windows/desktop/api/msi/nf-msi-msigetcomponentpatha) , чтобы определить путь к файлу, а не жестко закодировать путь.</span><span class="sxs-lookup"><span data-stu-id="78dbb-155">When opening a file that might be on the source media, use the [**MsiGetComponentPath**](/windows/desktop/api/msi/nf-msi-msigetcomponentpatha) function to determine the path to the file, instead of hard-coding the path.</span></span>

    <span data-ttu-id="78dbb-156">Это гарантирует, что файл можно будет найти, даже если буква диска на компакт-диске пользователя или DVD-диска была изменена.</span><span class="sxs-lookup"><span data-stu-id="78dbb-156">Doing so ensures that the file can be found even if the drive letter of the user's CD/DVD drive changes.</span></span>

-   <span data-ttu-id="78dbb-157">Сжимать содержимое, которое остается на компакт-диске или DVD-диске.</span><span class="sxs-lookup"><span data-stu-id="78dbb-157">Compress content that stays on the CD/DVD.</span></span>

    <span data-ttu-id="78dbb-158">Объем времени ЦП, затраченный на распаковку содержимого, обычно скрыт скоростью передачи данных с CD-или DVD-диска.</span><span class="sxs-lookup"><span data-stu-id="78dbb-158">The amount of CPU time spent decompressing the content will usually be hidden by the slow transfer rate of data from the CD/DVD drive.</span></span>

-   <span data-ttu-id="78dbb-159">Группирование содержимого в большие непрерывные файлы и доступ к ним в последовательном порядке.</span><span class="sxs-lookup"><span data-stu-id="78dbb-159">Group content into large, contiguous files and access it in sequential order.</span></span>

    <span data-ttu-id="78dbb-160">Время поиска дисководов компакт-и DVD-дисков абисмал по сравнению с жесткими дисками, а большинство дисководов компакт-и DVD-дисков не достигает пиковых скоростей передачи, если только они не считывают большой непрерывный файл.</span><span class="sxs-lookup"><span data-stu-id="78dbb-160">The seek times of CD/DVD drives are abysmal compared to those of hard drives, and most CD/DVD drives don't reach peak transfer rates unless they are reading a large, contiguous file.</span></span>

-   <span data-ttu-id="78dbb-161">Разметьте содержимое на компакт-диске или DVD-диске в том порядке, в котором он может быть доступен.</span><span class="sxs-lookup"><span data-stu-id="78dbb-161">Lay out content on the CD/DVD in the order that it is likely to be accessed.</span></span>

    <span data-ttu-id="78dbb-162">Время поиска значительно сокращается, если доступ к файлам осуществляется в том же порядке, что и их структура на диске.</span><span class="sxs-lookup"><span data-stu-id="78dbb-162">Seek times are greatly reduced when files are accessed in the same order as their on-disk layout.</span></span>

### <a name="install-on-demand"></a><span data-ttu-id="78dbb-163">Установка по запросу</span><span class="sxs-lookup"><span data-stu-id="78dbb-163">Install on Demand</span></span>

<span data-ttu-id="78dbb-164">В сценарии установки по запросу, как и для минимальной установки, игра изначально устанавливается на жесткий диск только для тех файлов, которые необходимы для запуска игры.</span><span class="sxs-lookup"><span data-stu-id="78dbb-164">In an install-on-demand scenario, as for minimal installation, the game initially installs to the hard drive only those files necessary to start the game.</span></span> <span data-ttu-id="78dbb-165">Однако вместо доступа к остальному содержимому исходного носителя каждый раз, когда он необходим, игра фактически устанавливает каждый фрагмент содержимого на жесткий диск по мере необходимости в первый раз, а затем обращается к нему с локального жесткого диска при каждом последующем использовании.</span><span class="sxs-lookup"><span data-stu-id="78dbb-165">However, instead of accessing the remaining content from the source media every time it is needed, the game actually installs each piece of content to the hard drive as it is needed for the first time, and then accesses it from the local hard drive on each subsequent use.</span></span> <span data-ttu-id="78dbb-166">Время, необходимое для первоначальной установки, равно тому же, что и в случае минимальной установки, но после первого обращения к каждому фрагменту содержимого повышается время загрузки.</span><span class="sxs-lookup"><span data-stu-id="78dbb-166">The time required for the initial installation is just as small as in for a minimal installation, but after the first time that each piece of content is accessed, the load times improve.</span></span>

<span data-ttu-id="78dbb-167">Чтобы создать конфигурацию по запросу в процессе установки на основе установщик Windows, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="78dbb-167">To create an install-on-demand configuration in a Windows Installer-based setup:</span></span>

-   <span data-ttu-id="78dbb-168">Сгруппируйте все компоненты, которые должны быть изначально установлены на жесткий диск, в компонент, помеченный для установки локально.</span><span class="sxs-lookup"><span data-stu-id="78dbb-168">Group all of the components to be initially installed to the hard drive into a feature that is marked to install locally.</span></span>

    <span data-ttu-id="78dbb-169">Обратите внимание, что это аналогично функции начальной загрузки для минимальной установки.</span><span class="sxs-lookup"><span data-stu-id="78dbb-169">Note that this is identical to the Bootstrap feature for a minimal installation.</span></span>

-   <span data-ttu-id="78dbb-170">Сгруппируйте оставшееся содержимое в несколько компонентов на основе компонентов, которые, скорее всего, будут использоваться вместе.</span><span class="sxs-lookup"><span data-stu-id="78dbb-170">Group the remaining content into multiple features based on components likely to be used together.</span></span>

    <span data-ttu-id="78dbb-171">Например, в игре на основе уровня сгруппируйте все содержимое, используемое на определенном уровне, в одну функцию.</span><span class="sxs-lookup"><span data-stu-id="78dbb-171">For example, in a level-based game, group all the content used on a given level into one feature.</span></span> <span data-ttu-id="78dbb-172">Обратите внимание, что установщик Windows позволяет совместно использовать компонент несколькими компонентами, поэтому при наличии содержимого, используемого на нескольких уровнях, можно добавить это содержимое в функции для всех необходимых уровней без репликации содержимого.</span><span class="sxs-lookup"><span data-stu-id="78dbb-172">Note that Windows Installer allows a component to be shared by multiple features, so if you have content that is used on multiple levels, you can add that content to the features for all of the necessary levels without replicating the content.</span></span> <span data-ttu-id="78dbb-173">Все эти функции должны быть помечены как "объявленные", что означает, что они не будут устанавливаться изначально, но могут быть установлены позже по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="78dbb-173">All of these features should be marked as "Advertised", which means that they won't be installed initially, but can be installed later as needed.</span></span>

-   <span data-ttu-id="78dbb-174">Если требуется файл, сначала проверьте, установлен ли этот файл с помощью функции [**мсикуерифеатурестате**](/windows/desktop/api/msi/nf-msi-msiqueryfeaturestatea).</span><span class="sxs-lookup"><span data-stu-id="78dbb-174">When a file is needed, first check whether the file is already installed using the function [**MsiQueryFeatureState**](/windows/desktop/api/msi/nf-msi-msiqueryfeaturestatea).</span></span>

    <span data-ttu-id="78dbb-175">Если он еще не установлен (то есть INSTALLSTATE \_ объявляется), вызовите функцию [**мсиконфигурефеатуре**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) , чтобы установить компонент локально.</span><span class="sxs-lookup"><span data-stu-id="78dbb-175">If it is not yet installed (that is, its state is INSTALLSTATE\_ADVERTISED), call the function [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) to install the feature locally.</span></span> <span data-ttu-id="78dbb-176">При открытии файла после его установки вызовите [**мсижеткомпонентпас**](/windows/desktop/api/msi/nf-msi-msigetcomponentpatha) , чтобы определить путь к файлу.</span><span class="sxs-lookup"><span data-stu-id="78dbb-176">When opening the file after it is installed, call [**MsiGetComponentPath**](/windows/desktop/api/msi/nf-msi-msigetcomponentpatha) to determine the path to the file.</span></span> <span data-ttu-id="78dbb-177">Хотя это и не является обязательным для этого сценария (поскольку содержимое всегда будет установлено на жесткий диск до его использования), это упрощает поддержку минимальной установки в дополнение к установке по запросу.</span><span class="sxs-lookup"><span data-stu-id="78dbb-177">While not strictly necessary for this scenario (since the content will always be installed to the hard drive before it is used), this makes it easier to support minimal installation in addition to installation on demand.</span></span>

-   <span data-ttu-id="78dbb-178">Если возможно, предвидите, какое содержимое скоро будет необходимо использовать, и установите его в фоновом режиме во время простоя.</span><span class="sxs-lookup"><span data-stu-id="78dbb-178">If possible, anticipate what content is likely to be needed soon, and install it in the background during idle time.</span></span>

    <span data-ttu-id="78dbb-179">Установка в фоновом режиме наиболее уместна, если игра находится в точке, которая не требует от всех последних задолжений производительности компьютера. Например, при отображении вступительного фильма, вырезанного сцены, меню и т. д.</span><span class="sxs-lookup"><span data-stu-id="78dbb-179">Background installation is most appropriate when the game is at a point that doesn't need every last ounce of performance out of the computer; for example, while displaying an intro movie, cut-scene, menu, and so on.</span></span>

-   <span data-ttu-id="78dbb-180">Создайте параметр в меню параметров игры, чтобы принудительно установить все остальное содержимое.</span><span class="sxs-lookup"><span data-stu-id="78dbb-180">Create an option in the game's options menu to force installation of all remaining content.</span></span>

    <span data-ttu-id="78dbb-181">Для реализации этой функции создайте функцию, которая является родителем всех функций установки по запросу, а затем вызовите [**мсиконфигурефеатуре**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) , чтобы установить этот главный компонент локально.</span><span class="sxs-lookup"><span data-stu-id="78dbb-181">To implement this, create a feature that is a parent of all of the install-on-demand features, and then call [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) to install this master feature locally.</span></span> <span data-ttu-id="78dbb-182">Это приведет к тому, что также будут установлены и локальные компоненты.</span><span class="sxs-lookup"><span data-stu-id="78dbb-182">This will cause the subfeatures to be installed locally as well.</span></span>

-   <span data-ttu-id="78dbb-183">Макет содержимого должен быть аналогичен для минимальной установки, за исключением того, что содержимое должно быть кластеризовано только с другим содержимым, которое, скорее всего, потребуется одновременно (например, все содержимое одного уровня должно быть вместе).</span><span class="sxs-lookup"><span data-stu-id="78dbb-183">Content layout should be similar to that for a minimal installation, except that content should be clustered only with other content that is likely to be needed at the same time (for example, all of the content for one level should be together).</span></span>

## <a name="post-installation-game-play"></a><span data-ttu-id="78dbb-184">Game-Play после установки</span><span class="sxs-lookup"><span data-stu-id="78dbb-184">Post-Installation Game-Play</span></span>

### <a name="autorun"></a><span data-ttu-id="78dbb-185">Загрузка</span><span class="sxs-lookup"><span data-stu-id="78dbb-185">AutoRun</span></span>

<span data-ttu-id="78dbb-186">Чтобы воспроизвести уже установленную игру, пользователю нужно только удалить установочный диск в области дисков.</span><span class="sxs-lookup"><span data-stu-id="78dbb-186">To play a game that is already installed, the user should only need to drop the installation disc in the drive tray.</span></span> <span data-ttu-id="78dbb-187">Первое, что должно сделать исполняемый файл автозапуска на диске — проверить, установлена ли игра, и, если да, запустить игру.</span><span class="sxs-lookup"><span data-stu-id="78dbb-187">The first thing that the AutoRun executable on the disc should do is to check to see if the game has already been installed, and if so, launch the game.</span></span> <span data-ttu-id="78dbb-188">При условии, что игра была установлена с помощью установки на основе установщик Windows, проверка того, установлена ли игра, может быть выполнена с помощью одного вызова функции [**мсикуерипродуктстате**](/windows/desktop/api/msi/nf-msi-msiqueryproductstatea).</span><span class="sxs-lookup"><span data-stu-id="78dbb-188">Assuming that the game was installed using a Windows Installer-based setup, the check to determine if the game is installed can be accomplished with a single call to the function [**MsiQueryProductState**](/windows/desktop/api/msi/nf-msi-msiqueryproductstatea).</span></span>

### <a name="converting-an-install-on-demand-installation-to-a-full-installation"></a><span data-ttu-id="78dbb-189">Преобразование установки установки по запросу в полную установку</span><span class="sxs-lookup"><span data-stu-id="78dbb-189">Converting an Install-on-Demand Installation to a Full Installation</span></span>

<span data-ttu-id="78dbb-190">Хотя установка по запросу позволяет пользователю начать играть игру намного раньше, чем полная установка, пользователю может потребоваться явно установить оставшуюся часть содержимого игры на локальный жесткий диск.</span><span class="sxs-lookup"><span data-stu-id="78dbb-190">While an install-on-demand installation allows the user to begin playing the game much sooner than a full installation, a user may want to explicitly install the remainder of the game content to the local hard drive.</span></span> <span data-ttu-id="78dbb-191">Пользователь может захотеть иметь возможность играть в игру, не требуя наличия исходного носителя, или она может просто не допустить более длительного времени загрузки, полученного в результате установки содержимого по требованию.</span><span class="sxs-lookup"><span data-stu-id="78dbb-191">The user may want to be able to play the game without requiring the source media, or he or she may simply want to avoid the longer in-game load times that result from installing content on demand.</span></span> <span data-ttu-id="78dbb-192">Если программа установки игры использует установщик Windows, игра может предоставить параметр в пользовательском интерфейсе вариантов в игре, чтобы завершить установку оставшегося содержимого.</span><span class="sxs-lookup"><span data-stu-id="78dbb-192">If the game's setup uses Windows Installer, the game can provide an option in the in-game options UI to finish installing the remaining content.</span></span> <span data-ttu-id="78dbb-193">Когда пользователь выбирает этот параметр, игра может вызвать [**мсиконфигурефеатуре**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) для принудительной установки остальных компонентов. для этого не требуется порождение отдельного приложения установки.</span><span class="sxs-lookup"><span data-stu-id="78dbb-193">When the user selects this option, the game can call [**MsiConfigureFeature**](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea) to force the remaining features to be installed locally; there is no need to spawn a separate setup application to do so.</span></span>

### <a name="maintenance-of-game-software-and-content"></a><span data-ttu-id="78dbb-194">Обслуживание программного обеспечения и содержимого игр</span><span class="sxs-lookup"><span data-stu-id="78dbb-194">Maintenance of Game Software and Content</span></span>

<span data-ttu-id="78dbb-195">Одним из преимуществ использования игр Windows в играх является относительная простота, с которой издатель может выпускать обновления для игры после первоначального выпуска.</span><span class="sxs-lookup"><span data-stu-id="78dbb-195">One of the advantages that Windows games have over console games is the relative ease with which the publisher can release updates to the game after its initial release.</span></span> <span data-ttu-id="78dbb-196">Если эти обновления познакомится с новым содержимым или просто исправляют ошибки, важно, чтобы процесс обновления был как можно более простым для конечного пользователя.</span><span class="sxs-lookup"><span data-stu-id="78dbb-196">Whether these updates introduce new content or just fix bugs, it is important to make the update process as easy as possible for the end user.</span></span> <span data-ttu-id="78dbb-197">Процесс обновления еще более важен для Интернет-игр, что обычно требует, чтобы все пользователи выполняли последнюю версию игры для подключения.</span><span class="sxs-lookup"><span data-stu-id="78dbb-197">The update process is even more important for online games, which typically require that all users are running the latest version of the game in order to connect.</span></span>

### <a name="checking-for-updates-automatically"></a><span data-ttu-id="78dbb-198">Проверка наличия обновлений автоматически</span><span class="sxs-lookup"><span data-stu-id="78dbb-198">Checking for Updates Automatically</span></span>

<span data-ttu-id="78dbb-199">Пользователям не следует забывать о необходимости искать исправления.</span><span class="sxs-lookup"><span data-stu-id="78dbb-199">Users should not have to remember to go looking for patches.</span></span> <span data-ttu-id="78dbb-200">Если для игры доступно обновление, пользователь должен по крайней мере получать уведомления, и в идеале это исправление уже должно быть загружено.</span><span class="sxs-lookup"><span data-stu-id="78dbb-200">If there is an update available for the game, the user should at least be notified, and ideally, the patch should already be downloaded.</span></span>

<span data-ttu-id="78dbb-201">Чтобы проверить наличие обновлений в игре, можно просто подключиться к веб-серверу, размещенному на издателе, с помощью определенного URL-адреса и скачать текстовый файл, указывающий номер версии последней доступной версии игры, а также URL-адрес для скачивания пакета, который будет обновлять игру до последней версии.</span><span class="sxs-lookup"><span data-stu-id="78dbb-201">A simple way for a game to check for updates is to connect to a Web server hosted by the publisher using a specific URL, and download a text file that specifies the version number of the latest available version of the game, along with a URL from which to download a package that will update the game to the latest version.</span></span>

<span data-ttu-id="78dbb-202">Проверка наличия обновлений каждый раз, когда пользователь воспроизводит игру, достаточно для того, чтобы убедиться, что у пользователя установлена последняя версия.</span><span class="sxs-lookup"><span data-stu-id="78dbb-202">Checking for updates each time that the user plays the game is adequate to make sure that the user is running the latest version.</span></span> <span data-ttu-id="78dbb-203">Однако если наличие нового обновления обнаруживается непосредственно перед тем, как пользователь пытается воспроизвести игру, пользователь может принудительно отложить воспроизведение игры до завершения загрузки обновления.</span><span class="sxs-lookup"><span data-stu-id="78dbb-203">However, if the existence of a new update is discovered immediately before the user tries to play the game, the user may be forced to delay playing the game until the update has finished downloading.</span></span> <span data-ttu-id="78dbb-204">При больших обновлениях или медленных подключениях эта задержка может быть указана в течение часов.</span><span class="sxs-lookup"><span data-stu-id="78dbb-204">For large updates or slow connections, this delay may be on the order of hours.</span></span> <span data-ttu-id="78dbb-205">Чтобы не допустить принудительного ожидания пользователя перед воспроизведением игры, игра может использовать планировщик задач для планирования периодической проверки наличия новых обновлений.</span><span class="sxs-lookup"><span data-stu-id="78dbb-205">To avoid forcing the user to wait before playing the game, the game can use Task Scheduler to schedule periodic checks for new updates.</span></span> <span data-ttu-id="78dbb-206">При обнаружении обновления игра может сразу же начать загрузку обновления, чтобы она была полностью скачана и готова к установке при следующем запуске игры.</span><span class="sxs-lookup"><span data-stu-id="78dbb-206">If an update is detected, the game can begin downloading the update immediately, so that it is likely to be completely downloaded and ready to install by the next time the user plays the game.</span></span>

### <a name="downloading-patches-automatically"></a><span data-ttu-id="78dbb-207">Автоматическая загрузка исправлений</span><span class="sxs-lookup"><span data-stu-id="78dbb-207">Downloading Patches Automatically</span></span>

<span data-ttu-id="78dbb-208">После того как игра обнаружит, что доступно новое обновление, необходимо немедленно начать загрузку обновления.</span><span class="sxs-lookup"><span data-stu-id="78dbb-208">Once the game has detected that a new update is available, it should immediately begin downloading the update.</span></span> <span data-ttu-id="78dbb-209">Так как задача, которая проверяет наличие обновлений, обычно выполняется в фоновом режиме без вмешательства пользователя, загрузка должна быть как можно более незаметной.</span><span class="sxs-lookup"><span data-stu-id="78dbb-209">Since the task that checks for updates is typically running silently in the background, the download needs to be as unobtrusive as possible.</span></span> <span data-ttu-id="78dbb-210">Фоновая интеллектуальная служба передачи (BITS) — это функция операционной системы, которая позволяет приложениям скачивать файлы из Интернета, даже если само приложение не работает.</span><span class="sxs-lookup"><span data-stu-id="78dbb-210">The Background Intelligent Transfer Service (BITS) is an operating system feature that allows applications to download files from the Internet even while the application itself is not running.</span></span> <span data-ttu-id="78dbb-211">Задания загрузки BITS выполняются только после входа пользователя в систему и только в том случае, если компьютер уже подключен к сети.</span><span class="sxs-lookup"><span data-stu-id="78dbb-211">BITS download jobs run only when the user is logged on, and only when the machine is already connected to the network.</span></span> <span data-ttu-id="78dbb-212">Служба BITS не будет пытаться принудительно подключить компьютер к сети.</span><span class="sxs-lookup"><span data-stu-id="78dbb-212">BITS will not attempt to force the machine to connect to the network on its own.</span></span> <span data-ttu-id="78dbb-213">Если пользователь отключится от сети или выйдет из системы, задание BITS приостанавливается и будет возобновлено при следующем входе пользователя в сеть и подключения к ней.</span><span class="sxs-lookup"><span data-stu-id="78dbb-213">If the user disconnects from the network, or logs off, the BITS job is paused, and will resume downloading the next time the user logs in and connects to the network.</span></span> <span data-ttu-id="78dbb-214">Приложение может настроить задания BITS для использования только пропускной способности сети, которая в противном случае останется неиспользуемой, чтобы предотвратить влияние задания на производительность других приложений, которые могут использовать сеть (например, Интернет-игру).</span><span class="sxs-lookup"><span data-stu-id="78dbb-214">The application can configure its BITS jobs to use only network bandwidth that would otherwise remain unused, in order to prevent the job from impacting the performance of any other applications that might be using the network (for example, an online game).</span></span> <span data-ttu-id="78dbb-215">Служба BITS доступна в Windows XP и Windows 2000 с пакетом обновления 3 (SP3).</span><span class="sxs-lookup"><span data-stu-id="78dbb-215">BITS is available on Windows XP and Windows 2000 Service Pack 3.</span></span>

## <a name="other-resources"></a><span data-ttu-id="78dbb-216">Другие ресурсы</span><span class="sxs-lookup"><span data-stu-id="78dbb-216">Other Resources</span></span>

<span data-ttu-id="78dbb-217">Дополнительные сведения о технологиях, упоминаемых в этой статье, см. в соответствующих разделах библиотеки MSDN:</span><span class="sxs-lookup"><span data-stu-id="78dbb-217">For more information on the technologies referenced in this article, refer to the relevant sections of the MSDN Library:</span></span>

-   [<span data-ttu-id="78dbb-218">Установщик Windows</span><span class="sxs-lookup"><span data-stu-id="78dbb-218">Windows Installer</span></span>](/windows/desktop/Msi/windows-installer-portal)
-   [<span data-ttu-id="78dbb-219">Планировщик заданий</span><span class="sxs-lookup"><span data-stu-id="78dbb-219">Task Scheduler</span></span>](/windows/desktop/TaskSchd/task-scheduler-start-page)
-   <span data-ttu-id="78dbb-220">[Фоновая интеллектуальная служба передачи](/windows/desktop/Bits/background-intelligent-transfer-service-portal) (бит)</span><span class="sxs-lookup"><span data-stu-id="78dbb-220">[Background Intelligent Transfer Service](/windows/desktop/Bits/background-intelligent-transfer-service-portal) (BITS)</span></span>

<span data-ttu-id="78dbb-221">Дополнительные сведения об использовании установщик Windows для игр см. в статье «Введение в установщик Windows для разработчиков игр» в следующий месяц.</span><span class="sxs-lookup"><span data-stu-id="78dbb-221">For more information on using Windows Installer for games, tune in to next month's Driving DirectX column, "Introduction to Windows Installer for Game Developers."</span></span>

## <a name="related-topics"></a><span data-ttu-id="78dbb-222">См. также</span><span class="sxs-lookup"><span data-stu-id="78dbb-222">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="78dbb-223">**мсиконфигурефеатуре**</span><span class="sxs-lookup"><span data-stu-id="78dbb-223">**MsiConfigureFeature**</span></span>](/windows/desktop/api/msi/nf-msi-msiconfigurefeaturea)
</dt> <dt>

[<span data-ttu-id="78dbb-224">**мсикуерипродуктстате**</span><span class="sxs-lookup"><span data-stu-id="78dbb-224">**MsiQueryProductState**</span></span>](/windows/desktop/api/msi/nf-msi-msiqueryproductstatea)
</dt> <dt>

[<span data-ttu-id="78dbb-225">**мсикуерифеатурестате**</span><span class="sxs-lookup"><span data-stu-id="78dbb-225">**MsiQueryFeatureState**</span></span>](/windows/desktop/api/msi/nf-msi-msiqueryfeaturestatea)
</dt> <dt>

[<span data-ttu-id="78dbb-226">**мсижеткомпонентпас**</span><span class="sxs-lookup"><span data-stu-id="78dbb-226">**MsiGetComponentPath**</span></span>](/windows/desktop/api/msi/nf-msi-msigetcomponentpatha)
</dt> </dl>

 

 