---
title: Советы и рекомендации по разработке игр
description: В этой статье рассматриваются рекомендации по использованию в разработке игр.
ms.assetid: 20956529-42ed-722b-cfa3-e3230d89fdd7
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9ba4f02d5e1a2e3da2e50feedd89f085a0c063be
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103890821"
---
# <a name="best-security-practices-in-game-development"></a><span data-ttu-id="d3c2c-103">Советы и рекомендации по разработке игр</span><span class="sxs-lookup"><span data-stu-id="d3c2c-103">Best Security Practices in Game Development</span></span>

<span data-ttu-id="d3c2c-104">В этой статье рассматриваются рекомендации по использованию в разработке игр.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-104">This article discusses best practices to use in game development.</span></span>

-   [<span data-ttu-id="d3c2c-105">Введение</span><span class="sxs-lookup"><span data-stu-id="d3c2c-105">Introduction</span></span>](#introduction)
-   [<span data-ttu-id="d3c2c-106">Примеры небезопасного кода</span><span class="sxs-lookup"><span data-stu-id="d3c2c-106">Examples of Insecure Code</span></span>](#examples-of-insecure-code)
-   [<span data-ttu-id="d3c2c-107">Способы повышения безопасности</span><span class="sxs-lookup"><span data-stu-id="d3c2c-107">Ways to improve security</span></span>](#ways-to-improve-security)
-   [<span data-ttu-id="d3c2c-108">Сводка</span><span class="sxs-lookup"><span data-stu-id="d3c2c-108">Summary</span></span>](#summary)

## <a name="introduction"></a><span data-ttu-id="d3c2c-109">Введение</span><span class="sxs-lookup"><span data-stu-id="d3c2c-109">Introduction</span></span>

<span data-ttu-id="d3c2c-110">Увеличение числа людей, играющих онлайн-игры и игры с пользовательским содержимым.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-110">An increasing number of people play online games and games with user-made content.</span></span> <span data-ttu-id="d3c2c-111">Это, в сочетании с повышением безопасности операционной системы Microsoft Windows, означает, что игры являются растущим и более заманчивым целевым объектом, который злоумышленники могут использовать.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-111">This, combined with the increasing security of the Microsoft Windows Operating System, means that games are a growing and more tempting target for attackers to exploit.</span></span> <span data-ttu-id="d3c2c-112">Разработчики игр должны прилагать особое внимание на то, чтобы игры, которые они выпускают, не создают новые бреши в системе безопасности для атак злоумышленников.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-112">Game developers should place a strong emphasis on making sure that the games they release aren't creating new security holes for attackers to exploit.</span></span> <span data-ttu-id="d3c2c-113">Разработчики игр несут ответственность за защиту компьютеров клиентов от вредоносных данных в сети, изменений пользователей или несанкционированного доступа.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-113">Game developers have a responsibility and a vested interest in helping to prevent their customers' computers from being hacked by malicious network data, user modifications, or tampering.</span></span> <span data-ttu-id="d3c2c-114">Если уязвимостью воспользоваться злоумышленником, это может привести к потере клиентов и/или денег.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-114">If a vulnerability is exploited, it could result in losing customers and/or money.</span></span> <span data-ttu-id="d3c2c-115">В этой статье описаны некоторые распространенные методы и средства для повышения безопасности кода без чрезмерного роста времени разработки.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-115">This article outlines and explains some common methods and tools to increase code security without over-inflating development time.</span></span>

<span data-ttu-id="d3c2c-116">Три наиболее распространенные ошибки, вносимые командой разработчиков при выпуске продукта:</span><span class="sxs-lookup"><span data-stu-id="d3c2c-116">The three most common mistakes made by a development team when releasing a product are:</span></span>

-   <span data-ttu-id="d3c2c-117">Требуются права администратора.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-117">Requiring administrative privileges.</span></span> <span data-ttu-id="d3c2c-118">Для игр не требуются права администратора.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-118">Games should not require administrative privileges.</span></span> <span data-ttu-id="d3c2c-119">Дополнительные сведения см. в разделе [Управление учетными записями пользователей для разработчиков игр](./user-account-control-for-game-developers.md).</span><span class="sxs-lookup"><span data-stu-id="d3c2c-119">For more details, see [User Account Control for Game Developers](./user-account-control-for-game-developers.md).</span></span>
-   <span data-ttu-id="d3c2c-120">Не использовать автоматическую защиту.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-120">Not using automated protection.</span></span> <span data-ttu-id="d3c2c-121">Обычно разработчики не используют **/GS**, **/SAFESEH** или **/НКС**.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-121">Developers are generally not using **/GS**, **/SAFESEH**, or **/NX**.</span></span> <span data-ttu-id="d3c2c-122">Использование этих флагов компиляции и компоновки позволяет обнаруживать или устранять многие основные бреши в системе безопасности без значительного увеличения рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-122">Using these compile/link flags can spot or eliminate many basic security holes without significantly increasing workload.</span></span> <span data-ttu-id="d3c2c-123">Эти флаги обсуждаются далее в этой статье.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-123">These flags are discussed later in this article.</span></span>
-   <span data-ttu-id="d3c2c-124">Использование запрещенных интерфейсов API.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-124">Using forbidden APIs.</span></span> <span data-ttu-id="d3c2c-125">Существует множество API-интерфейсов (**strcpy**, **strncpy** и т. д.), которые подвержены ошибкам программиста и легко создают бреши в системе безопасности.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-125">There are many APIs (**strcpy**, **strncpy**, and so on) that are prone to programmer error and easily generate security holes.</span></span> <span data-ttu-id="d3c2c-126">Разработчики должны заменить эти API своими версиями.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-126">Developers should replace these APIs with the safe versions.</span></span> <span data-ttu-id="d3c2c-127">Visual Studio 2005 поставляется с инструментом для анализа двоичных файлов, которые могут автоматически проверять объектные файлы на наличие ссылок на ненадежные интерфейсы API.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-127">Visual Studio 2005 comes with a tool for analyzing binary files that can automatically check object files for references to unsafe APIs.</span></span> <span data-ttu-id="d3c2c-128">Дополнительные сведения о том, что делать с данными, созданными с помощью этого средства, см. в статье [стоек атаки в коде с помощью надежных библиотек C и C++ для Visual Studio 2005](/archive/msdn-magazine/2005/may/repel-attacks-with-visual-studio-2005-safe-c-and-c-libraries) с помощью Martyn Ловелл.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-128">For more information on what to do with information generated with this tool, see [Repel Attacks on Your Code with the Visual Studio 2005 Safe C and C++ Libraries](/archive/msdn-magazine/2005/may/repel-attacks-with-visual-studio-2005-safe-c-and-c-libraries) by Martyn Lovell.</span></span> <span data-ttu-id="d3c2c-129">Кроме того, можно получить файл заголовка запрещено [. h](https://www.microsoft.com/downloads/details.aspx?FamilyID=6aed14bd-4766-4d9d-9ee2-fa86aad1e3c9) , который может помочь в удалении заблокированных функций из кода.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-129">Also, you can get the [banned.h](https://www.microsoft.com/downloads/details.aspx?FamilyID=6aed14bd-4766-4d9d-9ee2-fa86aad1e3c9) header file that can help you remove banned functions from code.</span></span>

<span data-ttu-id="d3c2c-130">Каждая из перечисленных ошибок является не только распространенной, но легко исправимой без существенных изменений в рабочей нагрузке разработки, стандартам кодирования или функциональности.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-130">Each of the listed mistakes is not only common but is easily correctable with no significant change in development workload, coding standards, or functionality.</span></span>

## <a name="examples-of-insecure-code"></a><span data-ttu-id="d3c2c-131">Примеры небезопасного кода</span><span class="sxs-lookup"><span data-stu-id="d3c2c-131">Examples of Insecure Code</span></span>

<span data-ttu-id="d3c2c-132">Ниже приведен простой пример, позволяющий злоумышленнику выполнить атаку переполнения буфера:</span><span class="sxs-lookup"><span data-stu-id="d3c2c-132">The following is a simple example of all it takes to allow an attacker to perform a buffer overrun attack:</span></span>


```
void GetPlayerName(char *pDatafromNet)
{
    char playername[256]; 
    strncpy(playername, pDatafromNet, strlen(pDatafromNet));

    // ...
}
```



<span data-ttu-id="d3c2c-133">На поверхности код выглядит нормально — он вызывает Сейф функции, как и в конце концов.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-133">On the surface this code looks ok — it calls a safe function, after all.</span></span> <span data-ttu-id="d3c2c-134">Данные из сети копируются в буфер, который составляет 256 байт.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-134">Data from the network is copied into a buffer that is 256 bytes.</span></span> <span data-ttu-id="d3c2c-135">Функция **strncpy** основывается на поиске терминатора NULL в исходной строке или ограничивается указанным количеством буферов.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-135">The **strncpy** function relies on finding a NULL terminator in the source string or is limited by the provided buffer count.</span></span> <span data-ttu-id="d3c2c-136">Проблема заключается в том, что размер буфера неправильный.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-136">The problem is that the buffer size is incorrect.</span></span> <span data-ttu-id="d3c2c-137">Если данные из сети не прошли проверку или размер буфера неправильный (как в этом примере), злоумышленник может просто предоставить большой буфер для перезаписи данных стека, после того как буфер завершится с любыми данными в сетевом пакете.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-137">If data from the network isn't validated or the buffer size is wrong (as in this example), an attacker could simply provide a large buffer to overwrite stack data, after the buffer ends, with any data in the network packet.</span></span> <span data-ttu-id="d3c2c-138">Это позволит злоумышленнику выполнить произвольный код, перезаписав указатель инструкций и изменив обратный адрес.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-138">This would allow the attacker to execute arbitrary code by overwriting the instruction pointer and changing the return address.</span></span> <span data-ttu-id="d3c2c-139">Основное занятие этого примера — никогда не доверять входным данным, пока не будет выполнена проверка.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-139">The most basic lesson of this example is to never trust input until it has been verified.</span></span>

<span data-ttu-id="d3c2c-140">Даже если данные не поступают из сети изначально, это потенциально может быть риском.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-140">Even if data doesn't come from the network initially, there still is potential risk.</span></span> <span data-ttu-id="d3c2c-141">Разработка современных игр требует много людей, разрабатывая, разрабатывая и тестируя одну и ту же базу кода.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-141">Modern game development requires many people designing, developing, and testing the same code base.</span></span> <span data-ttu-id="d3c2c-142">Нет способа выяснить, как функция будет вызываться в будущем.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-142">There is no way to know how the function will be called in the future.</span></span> <span data-ttu-id="d3c2c-143">Всегда спрашивать, откуда поступили данные и что может контролировать злоумышленник?</span><span class="sxs-lookup"><span data-stu-id="d3c2c-143">Always ask yourself where the data came from and what could an attacker control?</span></span> <span data-ttu-id="d3c2c-144">Хотя сетевые атаки являются наиболее распространенными, они не являются единственными методами создания брешей в системе безопасности.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-144">While network-based attacks are the most common, they are not the only methods of creating security holes.</span></span> <span data-ttu-id="d3c2c-145">Может ли злоумышленник создать Mod или изменить сохраненный файл способом, открывающим брешь в системе безопасности?</span><span class="sxs-lookup"><span data-stu-id="d3c2c-145">Could an attacker create a mod or edit a saved file in a way that opens a security hole?</span></span> <span data-ttu-id="d3c2c-146">Как насчет предоставляемых пользователем образов и звуковых файлов?</span><span class="sxs-lookup"><span data-stu-id="d3c2c-146">What about user-supplied image and sound files?</span></span> <span data-ttu-id="d3c2c-147">Вредоносные версии этих файлов можно публиковать в Интернете и создавать опасные риски безопасности для клиентов.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-147">Malicious versions of these files could be posted on the Internet and create dangerous security risks for your customers.</span></span>

<span data-ttu-id="d3c2c-148">В качестве побочной заметки используйте стрсафе. h или Сейф CRT вместо **strncpy** , чтобы исправить пример.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-148">As a side note, use strsafe.h or Safe CRT instead of **strncpy** to correct the example.</span></span> <span data-ttu-id="d3c2c-149">Безопасный CRT — это полное обновление системы безопасности среды выполнения C, которое входит в состав Visual Studio 2005.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-149">Safe CRT is a complete security overhaul of the C Runtime and comes with part of Visual Studio 2005.</span></span> <span data-ttu-id="d3c2c-150">Дополнительные сведения о безопасной CRT можно найти в статье [улучшения безопасности в CRT](https://msdn.microsoft.com/library/8ef0s5kh(VS.80).aspx) с помощью Майкла Ховарда.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-150">More information about Safe CRT can be found in [Security Enhancements in the CRT](https://msdn.microsoft.com/library/8ef0s5kh(VS.80).aspx) by Michael Howard.</span></span>

## <a name="ways-to-improve-security"></a><span data-ttu-id="d3c2c-151">Способы повышения безопасности</span><span class="sxs-lookup"><span data-stu-id="d3c2c-151">Ways to improve security</span></span>

<span data-ttu-id="d3c2c-152">Существует несколько способов повышения безопасности в цикле разработки.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-152">There are several ways to improve security in the development cycle.</span></span> <span data-ttu-id="d3c2c-153">Ниже приведены некоторые из лучших способов.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-153">Here are some of the best ways:</span></span>

<dl> <dt>

<span data-ttu-id="d3c2c-154"><span id="Reading_about_security"></span><span id="reading_about_security"></span><span id="READING_ABOUT_SECURITY"></span>Чтение сведений о безопасности</span><span class="sxs-lookup"><span data-stu-id="d3c2c-154"><span id="Reading_about_security"></span><span id="reading_about_security"></span><span id="READING_ABOUT_SECURITY"></span>Reading about security</span></span>
</dt> <dd>

<span data-ttu-id="d3c2c-155">Книга, *написание безопасного кода, второй выпуск* Майкла Ховарда и Дэвид Леблана, предоставляет подробное и четкое объяснение стратегий и методов предотвращения атак и устранения уязвимостей.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-155">The book, *Writing Secure Code, Second Edition* by Michael Howard and David LeBlanc, provides an in-depth and clear explanation of strategies and methods of preventing attacks and mitigating exploits.</span></span> <span data-ttu-id="d3c2c-156">Начиная с методов проектирования безопасности в выпуске с учетом методов защиты сетевых приложений, книга охватывает все аспекты, необходимые разработчикам игр для защиты, их продуктов и клиентов от злоумышленников.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-156">Starting with methods of designing security into a release to techniques for securing network applications, the book covers all aspects that a game developer needs to help protect themselves, their products, and their customers from attackers.</span></span> <span data-ttu-id="d3c2c-157">Книгу можно использовать для прививать языка и региональных параметров безопасности в среде разработки Studio.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-157">The book can be used to instill a culture of security in a development studio.</span></span> <span data-ttu-id="d3c2c-158">Не следует просто думать о безопасности кода как о проблеме разработчика или в проблеме тестера.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-158">Don't just think of code security as a developer's problem or a tester's problem.</span></span> <span data-ttu-id="d3c2c-159">Безопасность как любая команда — от руководителя программы до конструктора до тестеров — следует подумать о том, когда они работают над проектом.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-159">Think of security as something the whole team — from program manager to designer to developer to tester — should be thinking about when they work on a project.</span></span> <span data-ttu-id="d3c2c-160">Чем больше глаз является частью процесса проверки, тем больше вероятность перехватывать бреши в системе безопасности до выпуска.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-160">The more eyes that are part of the review process, the greater the chance of catching a security hole prior to release.</span></span>

<span data-ttu-id="d3c2c-161">При *написании безопасного кода второй выпуск* можно найти на конференции [Microsoft Learning](https://www.microsoftpressstore.com/store/writing-secure-code-9780735617223) , а более общие сведения о безопасности можно найти в [Фендингх будущих атак, уменьшая контактную зону](/previous-versions/ms972812(v=msdn.10)) Майкла Ховарда.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-161">*Writing Secure Code, Second Edition* can be found at [Microsoft Learning](https://www.microsoftpressstore.com/store/writing-secure-code-9780735617223) and more general security information can be found in [Fending Off Future Attacks by Reducing Attack Surface](/previous-versions/ms972812(v=msdn.10)) by Michael Howard.</span></span>

<span data-ttu-id="d3c2c-162">Майкл Говард, Дэвид Леблана и Джон Виега написали другую книгу по теме, охватывающую все распространенные операционные системы и языки программирования, а также *19 тупиковые Синс безопасности программного обеспечения*.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-162">Michael Howard, David LeBlanc, and John Viega have written another book on the subject that covers all common operating systems and programming languages entitled, *19 Deadly Sins of Software Security*.</span></span>

<span data-ttu-id="d3c2c-163">Презентации по безопасности, касающиеся игр, можно найти на странице загрузки [презентаций для разработчиков Microsoft XNA](/previous-versions/dn629515(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="d3c2c-163">Security presentations focused on games can be found at the [Microsoft XNA Developer Presentations](/previous-versions/dn629515(v=msdn.10)) download page.</span></span>

</dd> <dt>

<span data-ttu-id="d3c2c-164"><span id="Threat_Modeling_Analysis"></span><span id="threat_modeling_analysis"></span><span id="THREAT_MODELING_ANALYSIS"></span>Анализ моделирования угроз</span><span class="sxs-lookup"><span data-stu-id="d3c2c-164"><span id="Threat_Modeling_Analysis"></span><span id="threat_modeling_analysis"></span><span id="THREAT_MODELING_ANALYSIS"></span>Threat Modeling Analysis</span></span>
</dt> <dd>

<span data-ttu-id="d3c2c-165">Анализ моделирования угроз — это хороший способ оценки безопасности системы, а не на определенном языке или с помощью средства, но в широком, сквозном методе, который можно выполнить на нескольких собраниях.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-165">A threat modeling analysis is a good way of assessing system security, not in a specific language or by using a tool, but in a broad, end-to-end method that can be accomplished in a few meetings.</span></span> <span data-ttu-id="d3c2c-166">При правильной реализации модель потоков может определить все сильные и слабые стороны системы, не добавляя в проект значительную рабочую нагрузку или время собрания.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-166">When implemented properly, a thread model can identify all of the strengths and weaknesses of a system, without adding significant workload or meeting time to the project.</span></span> <span data-ttu-id="d3c2c-167">Метод моделирования угроз также подчеркивает концепцию оценки безопасности системы до и во время процесса разработки, чтобы обеспечить комплексную оценку, в то же время сосредоточиться на самых рискованных функциях.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-167">The method of threat modeling also emphasizes the idea of assessing system security prior to and during the development process to help ensure that a comprehensive assessment is being made while focusing on the most risky features.</span></span> <span data-ttu-id="d3c2c-168">Его можно рассматривать как профилировщик для обеспечения безопасности.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-168">It can be thought of as a profiler for security.</span></span> <span data-ttu-id="d3c2c-169">Если не использовать конкретный язык или полагаться на конкретное средство, моделирование угроз можно использовать в любой среде разработки, работающей над любым проектом в любом жанре.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-169">By not being based on a particular language or relying on a specific tool, threat modeling can be used in any development studio working on any project in any genre.</span></span> <span data-ttu-id="d3c2c-170">Моделирование угроз — это отличный метод, позволяющий отнести идею о безопасности всех сотрудников, а не о проблемах других пользователей.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-170">Threat modeling is also an excellent method of reinforcing the idea that security is everyone's responsibility and not someone else's problem.</span></span>

<span data-ttu-id="d3c2c-171">При моделировании угроз Обратите особое внимание на следующее:</span><span class="sxs-lookup"><span data-stu-id="d3c2c-171">When threat modeling, pay special attention to:</span></span>

-   <span data-ttu-id="d3c2c-172">Источники данных UDP</span><span class="sxs-lookup"><span data-stu-id="d3c2c-172">UDP data sources</span></span>
-   <span data-ttu-id="d3c2c-173">Источники данных, для которых не требуется проверка подлинности</span><span class="sxs-lookup"><span data-stu-id="d3c2c-173">Data sources that don't require authentication</span></span>
-   <span data-ttu-id="d3c2c-174">Источники данных, которые часто и обычно проверяются в ходе сбора информации с широкими масштабами</span><span class="sxs-lookup"><span data-stu-id="d3c2c-174">Data sources that are frequently and normally probed as part of wide-scale information gathering</span></span>
-   <span data-ttu-id="d3c2c-175">Любая возможность клиента напрямую передавать данные другим клиентам.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-175">Any ability of a client to directly send data to other clients</span></span>

<span data-ttu-id="d3c2c-176">Это области, которые имеют хороший потенциал для слабых мест безопасности.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-176">These are the areas that have good potential for security weaknesses.</span></span>

<span data-ttu-id="d3c2c-177">Дополнительные сведения о моделировании угроз см. в статье [моделирование](https://technet.microsoft.com/security/) угроз в центре разработки безопасности MSDN и в книге [моделирование угроз](https://www.amazon.com/Threat-Modeling-Microsoft-Professional-Swiderski/dp/0735619913) по Федору Свидерски и Window Снайдер.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-177">More on Threat Modeling can be found at [Threat Modeling](https://technet.microsoft.com/security/) on the MSDN Security Development Center and in the book [Threat Modeling](https://www.amazon.com/Threat-Modeling-Microsoft-Professional-Swiderski/dp/0735619913) by Frank Swiderski and Window Snyder.</span></span>

</dd> <dt>

<span data-ttu-id="d3c2c-178"><span id="Data_Execution_Prevention___NX_"></span><span id="data_execution_prevention___nx_"></span><span id="DATA_EXECUTION_PREVENTION___NX_"></span>Предотвращение выполнения данных (/НКС)</span><span class="sxs-lookup"><span data-stu-id="d3c2c-178"><span id="Data_Execution_Prevention___NX_"></span><span id="data_execution_prevention___nx_"></span><span id="DATA_EXECUTION_PREVENTION___NX_"></span>Data Execution Prevention (/NX)</span></span>
</dt> <dd>

<span data-ttu-id="d3c2c-179">Последним средством, снижающим опасность нескольких эксплойтов, является предотвращение выполнения данных (DEP).</span><span class="sxs-lookup"><span data-stu-id="d3c2c-179">A recent tool in mitigating multiple exploits is data execution prevention (DEP).</span></span> <span data-ttu-id="d3c2c-180">Если включить параметр **/НКС** в команду Build, Visual Studio пометит страницы памяти с флагами, которые обозначают, имеет ли код право на выполнение или нет.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-180">If you include the switch **/NX** in the build command, Visual Studio will mark memory pages with flags that denote whether the code has the right to execute or not.</span></span> <span data-ttu-id="d3c2c-181">Любая программа, попытка выполнения которой на странице памяти, не помеченной с помощью разрешения EXECUTE, приведет к принудительному завершению работы программы.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-181">Any program attempting to execute in a memory page not flagged with EXECUTE permission will cause a forcible termination of the program.</span></span> <span data-ttu-id="d3c2c-182">Защита применяется на уровне процессора и повлияет на разработчиков, использующих самостоятельно изменяемый код или компиляторы собственного JIT-языка.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-182">The prevention is enforced on the processor level and will impact developers who are using self-modifying code or native JIT language compilers.</span></span> <span data-ttu-id="d3c2c-183">Сейчас только процессоры AMD Athlon64 и Opteron и процессоры Intel Itanium и новейшей версии 4 поддерживают предотвращение выполнения, но все 32-разрядные и 64-разрядные процессоры будут поддерживать предотвращение выполнения в будущем.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-183">Currently, only AMD's Athlon64 and Opteron processors and Intel's Itanium and latest Pentium 4 processors support execution prevention, but it is expected that all 32-bit and 64-bit processors will support execution prevention in the future.</span></span> <span data-ttu-id="d3c2c-184">(Схема защиты от копирования, используемая разработчиком, может зависеть от предотвращения выполнения, но корпорация Майкрософт работает с поставщиками защиты от копирования, чтобы уменьшить влияние.) Мы рекомендуем использовать DEP.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-184">(A copy-protection scheme used by a developer may be affected by execution prevention, but Microsoft has been working with copy-protection vendors to minimize the impact.) It is a good practice to use DEP.</span></span>

<span data-ttu-id="d3c2c-185">Дополнительные сведения о DEP см. в разделе [предотвращение выполнения данных](../memory/data-execution-prevention.md).</span><span class="sxs-lookup"><span data-stu-id="d3c2c-185">For more details on DEP, see [Data Execution Prevention](../memory/data-execution-prevention.md).</span></span>

</dd> <dt>

<span data-ttu-id="d3c2c-186"><span id="Buffer_Security_Check___GS__and_Image_has_Safe_Exception_Handlers___SAFESEH_"></span><span id="buffer_security_check___gs__and_image_has_safe_exception_handlers___safeseh_"></span><span id="BUFFER_SECURITY_CHECK___GS__AND_IMAGE_HAS_SAFE_EXCEPTION_HANDLERS___SAFESEH_"></span>Проверка безопасности буфера (/GS) и Image имеет безопасный обработчик исключений (/SAFESEH)</span><span class="sxs-lookup"><span data-stu-id="d3c2c-186"><span id="Buffer_Security_Check___GS__and_Image_has_Safe_Exception_Handlers___SAFESEH_"></span><span id="buffer_security_check___gs__and_image_has_safe_exception_handlers___safeseh_"></span><span id="BUFFER_SECURITY_CHECK___GS__AND_IMAGE_HAS_SAFE_EXCEPTION_HANDLERS___SAFESEH_"></span>Buffer Security Check (/GS) and Image has Safe Exception Handlers (/SAFESEH)</span></span>
</dt> <dd>

<span data-ttu-id="d3c2c-187">*Проверка безопасности буфера*, заданная с помощью флага компилятора **/GS**, и *Image имеет безопасные обработчики исключений*, заданные флагом компоновщика **/SAFESEH** (впервые реализованный в Visual Studio .NET 2003), может значительно упростить задачу разработчика по защите кода.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-187">*Buffer Security Check*, specified by the compiler flag **/GS**, and *Image has Safe Exception Handlers*, specified by the linker flag **/SAFESEH** (first implemented in Visual Studio .NET 2003), can make the developer's job of securing code a little easier.</span></span>

<span data-ttu-id="d3c2c-188">Использование флага **/GS** приводит к тому, что компилятор создает проверку на наличие некоторых форм переполнения буфера на основе стека, которые могут быть использованы для перезаписи возвращаемого адреса функции.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-188">Using the **/GS** flag causes the compiler to construct a check for some forms of stack-based buffer overruns that could be exploited to overwrite the return address of a function.</span></span> <span data-ttu-id="d3c2c-189">Использование **/GS** не обнаруживает все возможные переполнения буфера и не должно считаться перехватывать все, но хорошей защитной технологией.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-189">Using **/GS** will not detect every potential buffer overrun and shouldn't be considered a catch-all, but a good defense-in-depth technology.</span></span>

<span data-ttu-id="d3c2c-190">Использование флага **/SAFESEH** дает указание компоновщику создать только исполняемый файл или библиотеку DLL, если он также может формировать таблицу безнадежных обработчиков исключений исполняемого файла или библиотеки DLL.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-190">Using the **/SAFESEH** flag will instruct the linker to only generate an executable or DLL if it can also generate a table of the safe exception handlers of the executable or DLL.</span></span> <span data-ttu-id="d3c2c-191">Безопасность структурированной обработки исключений (SafeSEH) устраняет обработку исключений как цель атак переполнения буфера, гарантируя, что до отправки исключения обработчик исключений регистрируется в таблице функций, расположенной в файле изображения.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-191">Safe Structured Exception Handling (SafeSEH) eliminates exception handling as a target of buffer overrun attacks by ensuring that, before an exception is dispatched, the exception handler is registered in the function table located within the image file.</span></span> <span data-ttu-id="d3c2c-192">Эти преимущества защиты включены в Windows XP с пакетом обновления 2 (SP2), Windows Server 2003, Windows Vista и Windows 7.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-192">These protection benefits are enabled with Windows XP SP2, Windows Server 2003, Windows Vista, and Windows 7.</span></span> <span data-ttu-id="d3c2c-193">Кроме того, для правильной работы параметр **/SAFESEH** должен использоваться в методе ALL-или Nothing.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-193">Also for **/SAFESEH** to work properly, it must be used in an all-or-nothing method.</span></span> <span data-ttu-id="d3c2c-194">Все библиотеки, содержащие код, привязанный к исполняемому файлу или библиотеке DLL, должны быть скомпилированы с параметром **/SAFESEH** , иначе таблица не будет создана.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-194">All libraries containing code bound to an executable or DLL must be compiled with **/SAFESEH** or the table will not be generated.</span></span>

<span data-ttu-id="d3c2c-195">Дополнительные сведения о [проверке безопасности буфера](https://msdn.microsoft.com/library/8dbf701c(vs.71).aspx) (**/GS**) и [образе, которые имеют безопасный обработчик исключений](https://msdn.microsoft.com/library/9a89h429(vs.71).aspx) (**/SAFESEH**), можно найти в MSDN.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-195">More information about [Buffer Security Check](https://msdn.microsoft.com/library/8dbf701c(vs.71).aspx) (**/GS**) and [Image has Safe Exception Handlers](https://msdn.microsoft.com/library/9a89h429(vs.71).aspx) (**/SAFESEH**) can be found in MSDN.</span></span>

<span data-ttu-id="d3c2c-196">См. также сведения о [флаге **/SDL**](/cpp/build/reference/sdl-enable-additional-security-checks?view=vs-2019) 2012 Microsoft Visual Studio и усовершенствованиях Visual Studio 2012 [для флага **/GS**](https://www.microsoft.com/security/blog/2012/01/26/enhancements-to-gs-in-visual-studio-11/).</span><span class="sxs-lookup"><span data-stu-id="d3c2c-196">See also info about Microsoft Visual Studio 2012's [**/SDL** flag](/cpp/build/reference/sdl-enable-additional-security-checks?view=vs-2019) and Visual Studio 2012's [enhancements to the **/GS** flag](https://www.microsoft.com/security/blog/2012/01/26/enhancements-to-gs-in-visual-studio-11/).</span></span>

</dd> <dt>

<span data-ttu-id="d3c2c-197"><span id="PREfast"></span><span id="prefast"></span><span id="PREFAST"></span>PREfast</span><span class="sxs-lookup"><span data-stu-id="d3c2c-197"><span id="PREfast"></span><span id="prefast"></span><span id="PREFAST"></span>PREfast</span></span>
</dt> <dd>

<span data-ttu-id="d3c2c-198">Экспресс-выпуск — это бесплатное средство, предлагаемое корпорацией Майкрософт, которое анализирует пути выполнения в скомпилированном C или C++ для поиска ошибок времени выполнения.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-198">PREfast is a free tool offered by Microsoft that analyzes execution paths in compiled C or C++ to help find run-time bugs.</span></span> <span data-ttu-id="d3c2c-199">Предбыстрый запуск осуществляется путем работы с всеми путями выполнения во всех функциях и оценки каждого пути для проблем.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-199">PREfast operates by working through all execution paths in all functions and assessing each path for problems.</span></span> <span data-ttu-id="d3c2c-200">Это средство, первоначально используемое для разработки драйверов и другого кода ядра, помогает разработчикам игр сэкономить время, устраняя некоторые ошибки, которые трудно найти или игнорировать компилятором.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-200">Originally used to develop drivers and other kernel code, this tool can help game developers save time by eliminating some bugs that are hard to find or are ignored by the compiler.</span></span> <span data-ttu-id="d3c2c-201">Быстрое использование — это отличный способ сократить рабочую нагрузку и сосредоточиться на усилиях группы разработки и тестирования.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-201">Using PREfast is an excellent way of reducing workload and focusing the efforts of both the development team and test team.</span></span> <span data-ttu-id="d3c2c-202">В Visual Studio Team Suite и Visual Studio Team Edition for Software Developers в качестве средств анализа кода, включенного параметром компилятора **/Analyze**.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-202">PREfast is available in Visual Studio Team Suite and Visual Studio Team Edition for Software Developers as Code Analysis, enabled by the compiler switch **/analyze**.</span></span> <span data-ttu-id="d3c2c-203">(Этот параметр также доступен в бесплатной версии компилятора, поставляемой с пакетом средств разработки программного обеспечения Windows.)</span><span class="sxs-lookup"><span data-stu-id="d3c2c-203">(This option is also available in the free version of the compiler that ships with the Windows Software Development Kit.)</span></span>

> [!Note]  
> <span data-ttu-id="d3c2c-204">Visual Studio 2012 поддерживает **/Analyze** во всех выпусках.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-204">Visual Studio 2012 supports **/analyze** in all editions.</span></span> <span data-ttu-id="d3c2c-205">Дополнительные сведения о доступности анализа кода во всех выпусках Visual Studio см. в разделе [новые возможности анализа кода](/archive/blogs/codeanalysis/?m=20123).</span><span class="sxs-lookup"><span data-stu-id="d3c2c-205">For more info about code analysis availability in all editions of Visual Studio, see [What’s New in Code Analysis](/archive/blogs/codeanalysis/?m=20123).</span></span>

 

<span data-ttu-id="d3c2c-206">Используя заметку заголовка (особенно для аргументов указателя буфера), можно использовать дополнительные проблемы, например перезапись ошибок памяти, общий источник сбоев и потенциальных уязвимостей безопасности.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-206">Through the use of header annotation (particularly for buffer pointer arguments), PREfast can expose additional issues, such as memory overwrite bugs, a common source of crashes and potential security vulnerabilities.</span></span> <span data-ttu-id="d3c2c-207">Это делается с помощью стандартного языка аннотирования (SAL), который представляет собой форму пометки для прототипов функций C/C++, которые предоставляют дополнительные сведения о предполагаемой семантике аргумента указателя и корреляции с параметрами длины, объявленными размерами буфера и т. д. Все заголовки для операционных систем Windows записываются в заметки, и Добавление знака SAL в заголовках общедоступных API в собственных библиотеках позволяет выполнять более подробные и агрессивные проверки в коде клиента для таких API.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-207">This is done by using the Standard Annotation Language (SAL), which is a form of mark-up for C/C++ function prototypes that provide additional information about expected pointer argument semantics and correlation with length parameters, declared buffer sizes, etc. All of the headers for Windows operating systems are annotated, and adding SAL mark-up in public API headers in your own libraries enables PREfast to perform more detailed and aggressive checks in your client code for such APIs.</span></span> <span data-ttu-id="d3c2c-208">Введение в SAL и ссылки на дополнительные сведения см. в записи блога Майкла Ховарда «[Краткое введение по стандартному языку аннотирования (SAL)](/archive/blogs/michael_howard/a-brief-introduction-to-the-standard-annotation-language-sal)».</span><span class="sxs-lookup"><span data-stu-id="d3c2c-208">For an introduction to SAL and links to more information, see Michael Howard's blog entry, "[A Brief Introduction to the Standard Annotation Language (SAL)](/archive/blogs/michael_howard/a-brief-introduction-to-the-standard-annotation-language-sal)."</span></span>

</dd> <dt>

<span data-ttu-id="d3c2c-209"><span id="Windows_Application_Verifier"></span><span id="windows_application_verifier"></span><span id="WINDOWS_APPLICATION_VERIFIER"></span>средство проверки приложений Windows</span><span class="sxs-lookup"><span data-stu-id="d3c2c-209"><span id="Windows_Application_Verifier"></span><span id="windows_application_verifier"></span><span id="WINDOWS_APPLICATION_VERIFIER"></span>Windows Application Verifier</span></span>
</dt> <dd>

<span data-ttu-id="d3c2c-210">Средство проверки приложений Windows или AppVerifier могут помочь инженерам-испытателям, предоставляя несколько функций в одном средстве.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-210">The Windows Application Verifier, or AppVerifier, can help testers by providing multiple functions in one tool.</span></span> <span data-ttu-id="d3c2c-211">AppVerifier — это средство, разработанное для того, чтобы сделать распространенные ошибки программирования более тестируемыми.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-211">The AppVerifier is a tool that was developed to make common programming errors more testable.</span></span> <span data-ttu-id="d3c2c-212">AppVerifier может проверять параметры, передаваемые в вызовы API, вставлять ошибочные входные данные для проверки возможности обработки ошибок и записывать изменения в реестр и файловую систему.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-212">AppVerifier can check parameters passed to API calls, inject erroneous input to check error handling ability, and log changes to the registry and file system.</span></span> <span data-ttu-id="d3c2c-213">AppVerifier также может обнаруживать переполнения буфера в куче, проверять, правильно ли определен список управления доступом (ACL) и обеспечивать безопасность использования API-интерфейсов сокетов.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-213">AppVerifier can also detect buffer overruns in the heap, check that an Access Control List (ACL) has been properly defined, and enforce the safe use of socket APIs.</span></span> <span data-ttu-id="d3c2c-214">Хотя это и не является исчерпывающим, AppVerifier может быть одним из средств на панели элементов тестировщика, чтобы помочь среде разработки выпускать качественный продукт.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-214">While not exhaustive, AppVerifier can be one tool in the tester's toolbox to help a development studio release a quality product.</span></span>

<span data-ttu-id="d3c2c-215">Дополнительные сведения о средство проверки приложений см. в статье [средство проверки приложений](/previous-versions/visualstudio/visual-studio-2008/ms220948(v=vs.90)) и [использование средство проверки приложений в жизненном цикле разработки программного обеспечения](/previous-versions/aa480483(v=msdn.10)) на сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-215">For more information about Application Verifier, see [Application Verifier](/previous-versions/visualstudio/visual-studio-2008/ms220948(v=vs.90)) and [Using Application Verifier Within Your Software Development Lifecycle](/previous-versions/aa480483(v=msdn.10)) on MSDN.</span></span>

</dd> <dt>

<span data-ttu-id="d3c2c-216"><span id="Fuzz_Testing"></span><span id="fuzz_testing"></span><span id="FUZZ_TESTING"></span>Тестирование методом Монте</span><span class="sxs-lookup"><span data-stu-id="d3c2c-216"><span id="Fuzz_Testing"></span><span id="fuzz_testing"></span><span id="FUZZ_TESTING"></span>Fuzz Testing</span></span>
</dt> <dd>

<span data-ttu-id="d3c2c-217">*Тестирование методом Монте-Карло* — это частично автоматизированный метод тестирования, который может улучшить текущие методологии тестирования.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-217">*Fuzz testing* is a semi-automated method of testing that can enhance current testing methodologies.</span></span> <span data-ttu-id="d3c2c-218">Центральная идея тестирования методом Монте-Карло заключается в полной оценке всех входных данных за счет ввода произвольной информации для просмотра перерывов; Сюда входят все сетевые данные, МОДС и сохраненные игры и т. д. Тестирование методом Монте-Карло довольно просто.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-218">The central idea behind fuzz testing is to make a full assessment of all inputs by inputing random data to see what breaks; this includes all network data, mods and saved games, etc. Fuzz testing is fairly easy to do.</span></span> <span data-ttu-id="d3c2c-219">Просто измените правильно сформированные файлы или сетевые данные путем вставки случайных байтов, зеркального отображения смежных байтов или отрицания числовых значений.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-219">Simply alter well-formed files or network data by inserting random bytes, flipping adjacent bytes, or negating numerical values.</span></span> <span data-ttu-id="d3c2c-220">0xFF, 0xFFFF, 0xFFFFFFFF, 0x00, символ 0x0000, 0x00000000 и 0x80000000 — это значения, которые хорошо подходят для обеспечения безопасности при тестировании методом монтеного тестирования.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-220">0xff, 0xffff, 0xffffffff, 0x00, 0x0000, 0x00000000, and 0x80000000 are values that are good at exposing security holes while fuzz testing.</span></span> <span data-ttu-id="d3c2c-221">Вы можете наблюдать за полученными сочетаниями взаимодействия с помощью AppVerifier.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-221">You can observe the resulting interaction combinations using AppVerifier.</span></span> <span data-ttu-id="d3c2c-222">Хотя нечеткость не является исчерпывающей, ее легко реализовать и автоматизировать, и она может перехватить более сомнительны и непредсказуемые ошибки.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-222">While fuzzing is not exhaustive, it is easy to implement and automate, and it can catch the more elusive and unpredictable bugs.</span></span>

<span data-ttu-id="d3c2c-223">Дополнительные сведения о тестировании методом Монте: [Gamefest 2007](/previous-versions/dn629515(v=msdn.10)) см. *в статье Практическое руководство по обеспечению безопасности игр*.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-223">For more information on fuzz testing, see the [Gamefest 2007](/previous-versions/dn629515(v=msdn.10)) presentation *Practical Steps in Game Security*.</span></span>

</dd> <dt>

<span data-ttu-id="d3c2c-224"><span id="Authenticode_Signing"></span><span id="authenticode_signing"></span><span id="AUTHENTICODE_SIGNING"></span>Подписывание Authenticode</span><span class="sxs-lookup"><span data-stu-id="d3c2c-224"><span id="Authenticode_Signing"></span><span id="authenticode_signing"></span><span id="AUTHENTICODE_SIGNING"></span>Authenticode Signing</span></span>
</dt> <dd>

<span data-ttu-id="d3c2c-225">Authenticode — это метод, гарантирующий, что исполняемые файлы, DLL-файлы и пакеты установщика Windows (MSI-файлы), получаемые пользователем, не изменяются с того, что был выпущен разработчик.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-225">Authenticode is a method of ensuring that executable files, DLL files, and Windows installer packages (.msi files) that the user receives are unaltered from what a developer released.</span></span> <span data-ttu-id="d3c2c-226">Используя сочетание принципов шифрования, доверенных сущностей и отраслевых стандартов, Authenticode проверяет целостность исполняемого содержимого.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-226">By using a combination of cryptographic principles, trusted entities, and industry standards, Authenticode verifies the integrity of executable content.</span></span> <span data-ttu-id="d3c2c-227">Корпорация Майкрософт предоставляет криптографический API-интерфейс CryptoAPI, который можно использовать для автоматического обнаружения искажений подписанного кода.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-227">Microsoft provides a cryptographic API, CryptoAPI, that can be used to auto-detect tampering of signed code.</span></span> <span data-ttu-id="d3c2c-228">Если после выпуска возникает утечка безопасности, сертификат может быть отозван, и весь код, подписанный этим сертификатом, перестанет проходить проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-228">If a security leak occurs after a release, a certificate can be revoked and all code signed with that certificate will stop authenticating.</span></span> <span data-ttu-id="d3c2c-229">Отзыв сертификата приведет к отмене проверки всех наименований, подписанных этим сертификатом.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-229">Revoking a certificate will revoke the validation of all titles signed with that certificate.</span></span> <span data-ttu-id="d3c2c-230">Windows разработана для работы с подписыванием Authenticode и предупреждает пользователя о неподписанном коде в конкретных ситуациях, которые могут представлять компьютер пользователя для атаки.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-230">Windows has been designed to work with Authenticode signing and will alert a user of unsigned code, in specific situations, that could expose a user's PC to attack.</span></span>

<span data-ttu-id="d3c2c-231">Authenticode не следует рассматривать как метод устранения проблем безопасности, но метод обнаружения незаконного изменения после выпуска исполняемого файла.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-231">Authenticode should not be considered a method of eliminating security issues, but a method of detecting tampering after an executable has been released.</span></span> <span data-ttu-id="d3c2c-232">Исполняемый файл или библиотека DLL, содержащая уязвимость системы безопасности, может быть подписана и проверена с помощью Authenticode, но она по-прежнему будет выдавать проблемы безопасности для новой системы.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-232">An executable or DLL that contains an exploitable security issue can be signed and verified using Authenticode, but it will still introduce the security issue to the new system.</span></span> <span data-ttu-id="d3c2c-233">Только после того, как продукт или обновление будут проверены на безопасность, следует подписать код, чтобы убедиться, что у пользователей есть выпуск, который не был изменен.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-233">Only after a product or update has been verified to be secure should the code be signed to assure users that they have a release that hasn't been tampered with.</span></span>

<span data-ttu-id="d3c2c-234">Даже если разработчик полагает, что их выпуски не изменяются, другие технологии и службы полагаются на Authenticode.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-234">Even if a developer feels that there is no threat of their releases being modified, other technologies and services rely on Authenticode.</span></span> <span data-ttu-id="d3c2c-235">Подписывание кода легко интегрируется и автоматизируется. нет причин, по которым разработчики не должны иметь подписанные выпуски.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-235">Code signing is easy to integrate and automate; there is no reason for developers to not have their releases signed.</span></span>

<span data-ttu-id="d3c2c-236">Дополнительные сведения о подписывании Authenticode см. в статье [Подписывание Authenticode для разработчиков игр](./authenticode-signing-for-game-developers.md).</span><span class="sxs-lookup"><span data-stu-id="d3c2c-236">For more information on Authenticode signing, see [Authenticode Signing for Game Developers](./authenticode-signing-for-game-developers.md).</span></span>

</dd> <dt>

<span data-ttu-id="d3c2c-237"><span id="Minimize_Privileges"></span><span id="minimize_privileges"></span><span id="MINIMIZE_PRIVILEGES"></span>Уменьшение привилегий</span><span class="sxs-lookup"><span data-stu-id="d3c2c-237"><span id="Minimize_Privileges"></span><span id="minimize_privileges"></span><span id="MINIMIZE_PRIVILEGES"></span>Minimize Privileges</span></span>
</dt> <dd>

<span data-ttu-id="d3c2c-238">В общих процессах следует запускать с минимальным набором привилегий, необходимых для работы.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-238">In general processes should run with the minimum set of privileges required to operate.</span></span> <span data-ttu-id="d3c2c-239">В Windows Vista и Windows 7 это достигается с помощью [контроля учетных записей](./user-account-control-for-game-developers.md), что позволяет запускать игру от имени обычного пользователя, а не администратора.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-239">On Windows Vista and Windows 7, this is accomplished by using [User Account Control](./user-account-control-for-game-developers.md), allowing the game to run as a Standard User rather than an administrator.</span></span> <span data-ttu-id="d3c2c-240">Для Windows XP обычно игры всегда работают от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-240">For Windows XP, typically games are always running as administrator.</span></span> <span data-ttu-id="d3c2c-241">Даже в Windows Vista и Windows 7 иногда требуется повысить права до полного уровня администратора для некоторых конкретных операций.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-241">Even on Windows Vista and Windows 7, it is sometimes necessary to elevate to full administrator rights for some specific operations.</span></span>

<span data-ttu-id="d3c2c-242">В случаях, когда процесс выполняется с полными правами администратора, фактически требуется лишь несколько прав, помимо тех, которые относятся к стандартному пользователю.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-242">In the cases where the process is running with full administrative rights, usually only a few rights beyond those of a Standard User are actually required.</span></span> <span data-ttu-id="d3c2c-243">Административный доступ включает множество прав, которые не требуются для правильного кода, но могут использоваться злоумышленниками с некоторыми слабыми местами в процессе.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-243">Administrative access includes many rights that are not required by legitimate code, but could be used by an attacker, through some weakness in the process.</span></span> <span data-ttu-id="d3c2c-244">К примерам таких прав относятся \_ SE \_ -Take Ownership, SE \_ Debug, SE \_ Create \_ Token, SE \_ ассигнпримаритокен, SE \_ TCB, SE \_ Security, SE \_ Load \_ Driver, SE, СЕ \_ BACKUP, \_ SE \_ RESTORE, SE \_ Shutdown и SE \_ Audit (см. раздел [константы права](../secauthz/privilege-constants.md)).</span><span class="sxs-lookup"><span data-stu-id="d3c2c-244">Examples of such rights include SE\_TAKE\_OWNERSHIP, SE\_DEBUG, SE\_CREATE\_TOKEN, SE\_ASSIGNPRIMARYTOKEN, SE\_TCB, SE\_SECURITY, SE\_LOAD\_DRIVER, SE\_SYSTEMTIME, SE\_BACKUP, SE\_RESTORE, SE\_SHUTDOWN, and SE\_AUDIT (see [Priviledge Constants](../secauthz/privilege-constants.md)).</span></span>

<span data-ttu-id="d3c2c-245">Хотя процесс не может получить больше прав после запуска, он может легко получить права.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-245">While a process cannot gain more rights once started, it can easily give up rights.</span></span> <span data-ttu-id="d3c2c-246">При запуске процесс может сразу же использовать API-интерфейсы Win32 для удаления ненужных прав.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-246">At startup, the process can immediately use Win32 APIs to remove rights that it does not require.</span></span>

</dd> <dt>

<span data-ttu-id="d3c2c-247"><span id="Utilize_Windows_Security_Features"></span><span id="utilize_windows_security_features"></span><span id="UTILIZE_WINDOWS_SECURITY_FEATURES"></span>Использование функций безопасности Windows</span><span class="sxs-lookup"><span data-stu-id="d3c2c-247"><span id="Utilize_Windows_Security_Features"></span><span id="utilize_windows_security_features"></span><span id="UTILIZE_WINDOWS_SECURITY_FEATURES"></span>Utilize Windows Security Features</span></span>
</dt> <dd>

<span data-ttu-id="d3c2c-248">Windows Vista и Windows 7 включают ряд новых функций, улучшающих безопасность кода.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-248">Windows Vista and Windows 7 includes a number of new features that improve code security.</span></span> <span data-ttu-id="d3c2c-249">[Управление учетными записями пользователей](./user-account-control-for-game-developers.md) , несомненно, является наиболее важным для понимания и принятия, но существуют и другие функции.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-249">[User Account Control](./user-account-control-for-game-developers.md) is certainly the most important one to understand and embrace, but there are other features as well.</span></span> <span data-ttu-id="d3c2c-250">В дополнение к технологиям Windows XP с пакетом обновления 2 (SP2), таким как брандмауэр Windows, предотвращение выполнения данных, проверка безопасности буфера и безопасный обработчик исключений, которые также доступны в Windows Vista и Windows 7, существует три новых функции безопасности, которые следует учитывать:</span><span class="sxs-lookup"><span data-stu-id="d3c2c-250">In addition to the Windows XP SP2 technologies, such as the Windows Firewall, Data Execution Prevention, Buffer Security Check, and Safe Exception Handlers which are also available on Windows Vista and Windows 7, there are three newer security features to consider:</span></span>

-   <span data-ttu-id="d3c2c-251">Функция случайного выбора макета адресного пространства.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-251">The opt-in Address Space Layout Randomization feature.</span></span> <span data-ttu-id="d3c2c-252">Это можно включить, связавсь с параметром **/DynamicBase** в visual Studio 2005 с пакетом обновления 1 (SP1) или visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-252">This is enabled by linking with the option **/DYNAMICBASE** on Visual Studio 2005 Service Pack 1 or Visual Studio 2008.</span></span> <span data-ttu-id="d3c2c-253">Это заставляет систему заменять позиции многих ключевых системных библиотек DLL в пространстве процесса, что усложняет написание злоумышленниками вредоносных программ, которые широко распространяются через Интернет.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-253">This causes the system to randomize the positions of many of the key system DLLs in your process space, making it much more difficult to write exploitable attack programs that propagate broadly across the Internet.</span></span> <span data-ttu-id="d3c2c-254">Этот флаг компоновщика не учитывается в Windows XP и более ранних версиях Windows.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-254">This linker flag is ignored by Windows XP and older versions of Windows.</span></span>
-   <span data-ttu-id="d3c2c-255">Повреждение кучи может привести к целому классу эксплойтов безопасности, поэтому система памяти Windows Vista и Windows 7 теперь поддерживает режим, который прерывает процесс при обнаружении повреждения кучи.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-255">Heap corruption can lead to an entire class of security exploits, so the memory system of Windows Vista and Windows 7 now supports a mode which terminates the process if heap corruption is detected.</span></span> <span data-ttu-id="d3c2c-256">Вызов [**HeapSetInformation**](/windows/win32/api/heapapi/nf-heapapi-heapsetinformation) с помощью **хеапенаблетермиантеонкорруптион** даст согласие на это поведение.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-256">Calling [**HeapSetInformation**](/windows/win32/api/heapapi/nf-heapapi-heapsetinformation) with **HeapEnableTermianteOnCorruption** will opt-in to this behavior.</span></span> <span data-ttu-id="d3c2c-257">Этот вызов завершается сбоем в Windows XP и более ранних версиях Windows.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-257">This call fails on Windows XP and older version of Windows.</span></span>
-   <span data-ttu-id="d3c2c-258">При написании служб их можно настроить с помощью новой функции, чтобы указать, какие привилегии действительно необходимы, а также ограничить доступ к ресурсам по определенному идентификатору безопасности.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-258">When writing services, they can be configured using a new feature to specify which privileges are actually required, as well as to limit resource access to a specific SID.</span></span> <span data-ttu-id="d3c2c-259">Это делается через [ChangeSeviceConfig2](/windows/win32/api/winsvc/nf-winsvc-changeserviceconfig2a), используя конфигурацию службы \_ \_ необходимые \_ привилегии \_ сведения и \_ \_ идентификатор безопасности службы настройки службы \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="d3c2c-259">This is done through [ChangeSeviceConfig2](/windows/win32/api/winsvc/nf-winsvc-changeserviceconfig2a), using SERVICE\_CONFIG\_REQUIRED\_PRIVILEGES\_INFO and SERVICE\_CONFIG\_SERVICE\_SID\_INFO.</span></span>

</dd> </dl>

## <a name="summary"></a><span data-ttu-id="d3c2c-260">Сводка</span><span class="sxs-lookup"><span data-stu-id="d3c2c-260">Summary</span></span>

<span data-ttu-id="d3c2c-261">Разработка игры для текущего и будущего рынка — дорогостоящая и трудоемкая.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-261">Developing a game for the current and future marketplace is costly and time consuming.</span></span> <span data-ttu-id="d3c2c-262">Выпуск игры с проблемами безопасности в конечном итоге повлечет за собой большую стоимость и время для правильного исправления.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-262">Releasing a game with security issues will ultimately cost more money and time to properly fix.</span></span> <span data-ttu-id="d3c2c-263">Таким образом, все разработчики игр могут интегрировать средства и методы для устранения угроз безопасности до выпуска.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-263">So, it is in the interests of all game developers to integrate tools and techniques to mitigate security exploits prior to release.</span></span>

<span data-ttu-id="d3c2c-264">Сведения, приведенные в этой статье, являются введением в то, что может сделать разработчик, чтобы помочь им и клиентам.</span><span class="sxs-lookup"><span data-stu-id="d3c2c-264">The information in this article is just an introduction to what a development studio can do to help themselves and their customers.</span></span> <span data-ttu-id="d3c2c-265">Дополнительные сведения об общих рекомендациях по обеспечению безопасности и сведениях о безопасности можно найти в [центре разработчиков безопасности Майкрософт](https://technet.microsoft.com/security/).</span><span class="sxs-lookup"><span data-stu-id="d3c2c-265">More information of general security practices and security information can be found at [Microsoft Security Developer Center](https://technet.microsoft.com/security/).</span></span>

 

 