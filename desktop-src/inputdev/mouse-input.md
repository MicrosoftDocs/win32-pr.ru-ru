---
title: Ввод с помощью мыши (ввод с клавиатуры и мыши)
description: В этом разделе описывается, как система предоставляет входные данные мыши для приложения и как приложение получает и обрабатывает эти входные данные.
ms.assetid: vs|winui|~\winui\windowsuserinterface\userinput\mouseinput.htm
keywords:
- Ввод данных пользователем, ввод с помощью мыши
- захват вводимых пользователем данных, ввод с помощью мыши
- ввод мыши
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f7cc21c9c02a91330483c7b65f7be076bb82e171
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "105701019"
---
# <a name="mouse-input-keyboard-and-mouse-input"></a>Ввод с помощью мыши (ввод с клавиатуры и мыши)

В этом разделе описывается, как система предоставляет входные данные мыши для приложения и как приложение получает и обрабатывает эти входные данные.

## <a name="in-this-section"></a>В этом разделе



| Раздел                                                         | Описание                                                       |
|---------------------------------------------------------------|-------------------------------------------------------------------|
| [О вводе с помощью мыши](about-mouse-input.md)<br/>         | В этом разделе рассматривается ввод с помощью мыши.<br/>                      |
| [Использование ввода с помощью мыши](using-mouse-input.md)<br/>         | В этом разделе рассматриваются задачи, связанные с вводом с помощью мыши.<br/> |
| [Справочник по входным указателям мыши](mouse-input-reference.md)<br/> |                                                                   |



 

### <a name="functions"></a>Функции



| Имя                                                      | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|-----------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**\_TrackMouseEven**](/windows/win32/api/commctrl/nf-commctrl-_trackmouseevent)             | Отправляет сообщения, когда указатель мыши покидает окно или наводится на окно в течение заданного промежутка времени. Эта функция вызывает [**TrackMouseEven**](/windows/win32/api/winuser/nf-winuser-trackmouseevent) , если она существует, в противном случае она эмулирует ее.<br/>                                                                                                                                                                                                                                                                                                              |
| [**драгдетект**](/windows/win32/api/winuser/nf-winuser-dragdetect)                          | Захватывает мышь и отслеживает ее движение, пока пользователь не отпустит левую кнопку мыши, не нажмет клавишу ESC или не переместит мышь за пределы прямоугольника перетаскивания, в котором находится указанная точка. Ширина и высота прямоугольника перетаскивания задаются значениями **SM \_ Кксдраг** и **SM \_ Цидраг** , возвращаемыми функцией [**жетсистемметрикс**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) .<br/>                                                                                                                                                               |
| [**енаблемаусеинпоинтер**](/windows/desktop/api/winuser/nf-winuser-enablemouseinpointer) | Позволяет мыши работать в качестве указывающего устройства. <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [**Захват**](/windows/win32/api/winuser/nf-winuser-getcapture)                          | Извлекает маркер окна (при его наличии), которое захватило мышь. Захват мыши может осуществляться только по одному окну. Это окно получает ввод с помощью мыши независимо от того, находится ли курсор внутри его границ. <br/>                                                                                                                                                                                                                                                                                                                        |
| [**жетдаублекликктиме**](/windows/win32/api/winuser/nf-winuser-getdoubleclicktime)          | Извлекает текущее время двойного щелчка мыши. Двойной щелчок — это последовательность из двух щелчков кнопки мыши, вторая в течение заданного времени после первой. Время двойного щелчка — это максимальное число миллисекунд, которое может произойти между первым и вторым щелчком двойного щелчка. <br/>                                                                                                                                                                                                              |
| [**жетмаусемовепоинтсекс**](/windows/win32/api/winuser/nf-winuser-getmousemovepointsex)      | Извлекает журнал до 64 предыдущих координат мыши или пера.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [**релеасекаптуре**](/windows/win32/api/winuser/nf-winuser-releasecapture)                  | Освобождает захват мыши из окна в текущем потоке и восстанавливает нормальную обработку ввода мыши. Окно, захваченное мышью, получает все входные данные мыши независимо от положения курсора, за исключением случаев нажатия кнопки мыши, когда активная активная кнопка находится в окне другого потока. <br/>                                                                                                                                                                                                          |
| [**сеткаптуре**](/windows/win32/api/winuser/nf-winuser-setcapture)                          | Устанавливает захват мыши в указанное окно, принадлежащее текущему потоку. [**Сеткаптуре**](/windows/win32/api/winuser/nf-winuser-setcapture) захватывает ввод с помощью мыши, когда указатель мыши находится над окном записи, или когда кнопка мыши была нажата в то время, когда указатель мыши находится над окном записи, и кнопка остается недоступной. Захват мыши может осуществляться только по одному окну за раз.<br/> Если курсор мыши находится над окном, созданным другим потоком, система направит ввод с помощью мыши в указанное окно, только если кнопка мыши не нажата.<br/> |
| [**сетдаублекликктиме**](/windows/win32/api/winuser/nf-winuser-setdoubleclicktime)          | Задает время двойного щелчка мыши. Двойной щелчок — это последовательность из двух щелчков кнопки мыши, вторая в течение заданного времени после первой. Время двойного щелчка — это максимальное число миллисекунд, которое может произойти между первым и вторым щелчками двойного щелчка. <br/>                                                                                                                                                                                                                            |
| [**свапмаусебуттон**](/windows/win32/api/winuser/nf-winuser-swapmousebutton)                | Изменяет значение левой и правой кнопок мыши на противоположное или восстанавливает его. <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [**TrackMouseEven**](/windows/win32/api/winuser/nf-winuser-trackmouseevent)                | Отправляет сообщения, когда указатель мыши покидает окно или наводится на окно в течение заданного промежутка времени.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                     |



 

Следующая функция устарела.



| Функция                            | Описание                                            |
|-------------------------------------|--------------------------------------------------------|
| [**\_событие мыши**](/windows/win32/api/winuser/nf-winuser-mouse_event) | Синтезирование движения мыши и нажатия кнопок.<br/> |



 

### <a name="notifications"></a>Уведомления



| Имя                                              | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|---------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**WM \_ каптуречанжед**](wm-capturechanged.md)   | Отправляется в окно, которое теряет захват мыши.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [**WM \_ лбуттондблклк**](wm-lbuttondblclk.md)     | Посылается, когда пользователь дважды щелкает левую кнопку мыши, когда курсор находится в клиентской области окна. Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь.<br/>                                                                                                                                                                                             |
| [**WM \_ лбуттондовн**](wm-lbuttondown.md)         | Посылается, когда пользователь нажимает левую кнопку мыши, когда курсор находится в клиентской области окна. Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь.<br/>                                                                                                                                                                                                   |
| [**WM \_ лбуттонуп**](wm-lbuttonup.md)             | Публикуется, когда пользователь отпускает левую кнопку мыши, когда курсор находится в клиентской области окна. Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь.<br/>                                                                                                                                                                                                  |
| [**WM \_ мбуттондблклк**](wm-mbuttondblclk.md)     | Публикуется, когда пользователь дважды щелкает среднюю кнопку мыши, когда курсор находится в клиентской области окна. Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь.<br/>                                                                                                                                                                                           |
| [**WM \_ мбуттондовн**](wm-mbuttondown.md)         | Посылается, когда пользователь нажимает среднюю кнопку мыши, когда курсор находится в клиентской области окна. Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь.<br/>                                                                                                                                                                                                 |
| [**WM \_ мбуттонуп**](wm-mbuttonup.md)             | Публикуется, когда пользователь отпускает среднюю кнопку мыши, когда курсор находится в клиентской области окна. Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь.<br/>                                                                                                                                                                                                |
| [**WM \_ маусеактивате**](wm-mouseactivate.md)     | Посылается, когда курсор находится в неактивном окне, и пользователь нажимает кнопку мыши. Родительское окно получает это сообщение, только если дочернее окно передает его функции [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) .<br/>                                                                                                                                                                                                                                                   |
| [**WM \_ маусеховер**](wm-mousehover.md)           | Отправляется в окно при наведении курсора на клиентскую область окна в течение периода времени, указанного в предыдущем вызове метода [**TrackMouseEven**](/windows/win32/api/winuser/nf-winuser-trackmouseevent).<br/>                                                                                                                                                                                                                                                                                               |
| [**WM \_ маусехвхил**](wm-mousehwheel.md)         | Отправляется в окно фокуса, когда колесо горизонтальной прокрутки мыши вращается или поворачивается. Функция [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca)распространяет сообщение родительскому окну. Не должно быть внутренней пересылки сообщения, так как **дефвиндовпрок** распространяет его на родительскую цепочку до тех пор, пока не обнаружит окно, которое его обрабатывает.<br/>                                                                                                                  |
| [**WM \_ MOUSELEAVE**](wm-mouseleave.md)           | Отправляется в окно, когда курсор покидает клиентскую область окна, указанное в предыдущем вызове метода [**TrackMouseEven**](/windows/win32/api/winuser/nf-winuser-trackmouseevent).<br/>                                                                                                                                                                                                                                                                                                                           |
| [**WM \_ MOUSEMOVE**](wm-mousemove.md)             | Отправляется в окно при перемещении курсора. Если мышь не захвачена, сообщение отправляется в окно, содержащее курсор. В противном случае сообщение отправляется в окно, которое захватывает мышь.<br/>                                                                                                                                                                                                                                                          |
| [**WM \_ маусевхил**](wm-mousewheel.md)           | Посылается в окно фокуса при вращении колесика мыши. Функция [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) распространяет сообщение родительскому окну. Не должно быть внутренней пересылки сообщения, так как **дефвиндовпрок** распространяет его на родительскую цепочку до тех пор, пока не обнаружит окно, которое его обрабатывает.<br/>                                                                                                                                              |
| [**WM \_ нчиттест**](wm-nchittest.md)             | Отправляется в окно, чтобы определить, какая часть окна соответствует определенной координате экрана. Это может произойти, например, при перемещении курсора, при нажатии или отпускании кнопки мыши или в ответ на вызов функции, такой как [**виндовфромпоинт**](/windows/desktop/api/winuser/nf-winuser-windowfrompoint). Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь.<br/> |
| [**WM \_ нклбуттондблклк**](wm-nclbuttondblclk.md) | Посылается, когда пользователь дважды щелкает левую кнопку мыши, когда курсор находится внутри неклиентской области окна. Это сообщение отправляется в окно, содержащее курсор. Если окно захвачено мышью, это сообщение не отправляется.<br/>                                                                                                                                                                                                                         |
| [**WM \_ нклбуттондовн**](wm-nclbuttondown.md)     | Посылается, когда пользователь нажимает на левую кнопку мыши, когда курсор находится внутри неклиентской области окна. Это сообщение отправляется в окно, содержащее курсор. Если окно захвачено мышью, это сообщение не отправляется.<br/>                                                                                                                                                                                                                               |
| [**WM \_ нклбуттонуп**](wm-nclbuttonup.md)         | Посылается, когда пользователь отпускает левую кнопку мыши, когда курсор находится внутри неклиентской области окна. Это сообщение отправляется в окно, содержащее курсор. Если окно захвачено мышью, это сообщение не отправляется.<br/>                                                                                                                                                                                                                              |
| [**WM \_ нкмбуттондблклк**](wm-ncmbuttondblclk.md) | Размещается, когда пользователь дважды щелкает среднюю кнопку мыши, когда курсор находится внутри неклиентской области окна. Это сообщение отправляется в окно, содержащее курсор. Если окно захвачено мышью, это сообщение не отправляется.<br/>                                                                                                                                                                                                                       |
| [**WM \_ нкмбуттондовн**](wm-ncmbuttondown.md)     | Посылается, когда пользователь нажимает среднюю кнопку мыши, когда курсор находится внутри неклиентской области окна. Это сообщение отправляется в окно, содержащее курсор. Если окно захвачено мышью, это сообщение не отправляется.<br/>                                                                                                                                                                                                                             |
| [**WM \_ нкмбуттонуп**](wm-ncmbuttonup.md)         | Размещается, когда пользователь отпускает среднюю кнопку мыши, когда курсор находится внутри неклиентской области окна. Это сообщение отправляется в окно, содержащее курсор. Если окно захвачено мышью, это сообщение не отправляется.<br/>                                                                                                                                                                                                                            |
| [**WM \_ нкмаусеховер**](wm-ncmousehover.md)       | Отправляется в окно при наведении курсора на неклиентскую область окна в течение периода времени, указанного в предыдущем вызове метода [**TrackMouseEven**](/windows/win32/api/winuser/nf-winuser-trackmouseevent).<br/>                                                                                                                                                                                                                                                                                             |
| [**WM \_ нкмауселеаве**](wm-ncmouseleave.md)       | Передается в окно, когда курсор покидает неклиентскую область окна, указанную в предыдущем вызове метода [**TrackMouseEven**](/windows/win32/api/winuser/nf-winuser-trackmouseevent).<br/>                                                                                                                                                                                                                                                                                                                         |
| [**WM \_ нкмаусемове**](wm-ncmousemove.md)         | Передается в окно при перемещении курсора в неклиентскую область окна. Это сообщение отправляется в окно, содержащее курсор. Если окно захвачено мышью, это сообщение не отправляется.<br/>                                                                                                                                                                                                                                                        |
| [**WM \_ нкрбуттондблклк**](wm-ncrbuttondblclk.md) | Размещается, когда пользователь дважды щелкает правую кнопку мыши, когда курсор находится внутри неклиентской области окна. Это сообщение отправляется в окно, содержащее курсор. Если окно захвачено мышью, это сообщение не отправляется.<br/>                                                                                                                                                                                                                        |
| [**WM \_ нкрбуттондовн**](wm-ncrbuttondown.md)     | Посылается, когда пользователь нажимает правую кнопку мыши, когда курсор находится внутри неклиентской области окна. Это сообщение отправляется в окно, содержащее курсор. Если окно захвачено мышью, это сообщение не отправляется.<br/>                                                                                                                                                                                                                              |
| [**WM \_ нкрбуттонуп**](wm-ncrbuttonup.md)         | Посылается, когда пользователь отпускает правую кнопку мыши, когда курсор находится внутри неклиентской области окна. Это сообщение отправляется в окно, содержащее курсор. Если окно захвачено мышью, это сообщение не отправляется.<br/>                                                                                                                                                                                                                             |
| [**WM \_ нкксбуттондблклк**](wm-ncxbuttondblclk.md) | Публикуется, когда пользователь дважды щелкает первую или вторую кнопку X, пока курсор находится в неклиентской области окна. Это сообщение отправляется в окно, содержащее курсор. Если окно захвачено мышью, это сообщение не отправляется.<br/>                                                                                                                                                                                                                      |
| [**WM \_ нкксбуттондовн**](wm-ncxbuttondown.md)     | Посылается, когда пользователь нажимает первую или вторую кнопку X, пока курсор находится в неклиентской области окна. Это сообщение отправляется в окно, содержащее курсор. Если окно захвачено мышью, это сообщение не отправляется.<br/>                                                                                                                                                                                                                            |
| [**WM \_ нкксбуттонуп**](wm-ncxbuttonup.md)         | Публикуется, когда пользователь отпускает первую или вторую кнопку X, пока курсор находится в неклиентской области окна. Это сообщение отправляется в окно, содержащее курсор. Если окно захвачено мышью, это сообщение не отправляется.<br/>                                                                                                                                                                                                                           |
| [**WM \_ рбуттондблклк**](wm-rbuttondblclk.md)     | Размещается, когда пользователь дважды щелкает правую кнопку мыши, когда курсор находится в клиентской области окна. Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь.<br/>                                                                                                                                                                                            |
| [**WM \_ рбуттондовн**](wm-rbuttondown.md)         | Посылается, когда пользователь нажимает правую кнопку мыши, когда курсор находится в клиентской области окна. Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь.<br/>                                                                                                                                                                                                  |
| [**WM \_ рбуттонуп**](wm-rbuttonup.md)             | Публикуется, когда пользователь отпускает правую кнопку мыши, когда курсор находится в клиентской области окна. Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь.<br/>                                                                                                                                                                                                 |
| [**WM \_ ксбуттондблклк**](wm-xbuttondblclk.md)     | Посылается, когда пользователь дважды щелкает первую или вторую кнопку X, пока курсор находится в клиентской области окна. Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь.<br/>                                                                                                                                                                                      |
| [**WM \_ ксбуттондовн**](wm-xbuttondown.md)         | Посылается, когда пользователь нажимает первую или вторую кнопку X, пока курсор находится в клиентской области окна. Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь. <br/>                                                                                                                                                                                           |
| [**WM \_ ксбуттонуп**](wm-xbuttonup.md)             | Публикуется, когда пользователь отпускает первую или вторую кнопку X, пока курсор находится в клиентской области окна. Если мышь не захвачена, сообщение отправляется в окно под курсором. В противном случае сообщение отправляется в окно, которое захватывает мышь.<br/>                                                                                                                                                                                           |



 

### <a name="structures"></a>Структуры



| Имя                                           | Описание                                                                                                                                                                        |
|------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**маусемовепоинт**](/windows/win32/api/winuser/ns-winuser-mousemovepoint)       | Содержит сведения о положении мыши в экранных координатах.<br/>                                                                                                  |
| [**TRACKMOUSEEVEN**](/windows/win32/api/winuser/ns-winuser-trackmouseevent) | Используется функцией [**TrackMouseEven**](/windows/win32/api/winuser/nf-winuser-trackmouseevent) для наблюдения за тем, когда указатель мыши покидает окно или наводится на окно в течение заданного промежутка времени.<br/> |



 

 

