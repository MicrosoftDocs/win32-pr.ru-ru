---
title: Включение PnP для устройств
description: Включение PnP для устройств
ms.assetid: 510237a9-2b74-4c2e-ad45-3f45117289a6
keywords:
- Windows Диспетчер устройств мультимедиа, устройства PnP
- Диспетчер устройств, устройства PnP
- Программное обеспеченное программирование, устройства PnP
- поставщики услуг, устройства PnP
- Создание поставщиков услуг, устройств PnP
- Устройства PnP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e574aa0d5462c2fcbb0592e9d3faaf927cd7e5213e6eec3d8e7f016eabfb7abc
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118585002"
---
# <a name="enabling-pnp-for-devices"></a>Включение PnP для устройств

Windows Диспетчер устройств мультимедиа отслеживает уведомления о получении и удалении устройств, которые объявляют интерфейс устройства для воспроизведения аудиопотока. при поступлении такого устройства Windows Media диспетчер устройств запрашивает параметр устройства с именем *вмдмспклсид* для идентификатора класса поставщика услуг, ответственного за это устройство. Windows Диспетчер устройств мультимедиа вызывает [**IMDServiceProvider2:: креатедевице**](/windows/desktop/api/mswmdm/nf-mswmdm-imdserviceprovider2-createdevice) для этого поставщика услуг, чтобы создать объект устройства, который предоставляется приложению как объект [**ивмдмдевице**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmdevice) .

Поставщик услуг может либо работать с устройствами PnP, либо устройствами, не поддерживающими PnP. Он не может работать с обоими типами.

чтобы устройство работало с предыдущим механизмом (и, таким образом, включить уведомления о получении и удалении для устройства в Windows Media диспетчер устройств applications), должны выполняться следующие требования.

-   драйвер устройства этого устройства должен объявлять интерфейс устройства Windows Media диспетчер устройств Portable Audio Player. GUID для этого интерфейса устройства определяется следующим образом:

    ```
    {0xf33fdc04, 0xd1ac, 0x4e8e, {0x9a, 0x30, 0x19, 0xbb, 0xd4, 0xb1, 0x8, 0xae} }
    ```

    

    > [!Note]  
    > Устройство не должно объявлять этот интерфейс, если устройство объявляет интерфейс тома (определенный как Волумеклассгуид или GUID \_ девинтерфаце \_ в виниоктл. h). если устройство объявляет интерфейс тома, оно уже включено с поддержкой PnP в разделе Windows Media диспетчер устройств.

     

    -И/ИЛИ-

    новый подраздел реестра для поставщика услуг должен быть создан внутри подраздела HKEY \_ локальный \_ компьютер \\ программное обеспечение \\ Microsoft \\ Windows Media диспетчер устройств \\ кновндевицес. У этого ключа должно быть имя поставщика услуг, и в нем должны быть следующие две \_ записи реестра SZ:

    ```
    DeviceInterface         {25DBCE51-6C8F-4A72-8A6D-B54C2B4FC835}
    WMDMSPCLSID             {067B4B81-B1EC-489F-B111-940EBDC44EBE}
    ```

    

-   Устройство должно иметь параметр устройства с именем ВМДМСПКЛСИД. Значение этого параметра должно быть задано в качестве идентификатора CLSID поставщика службы в форме строки. Дополнительные сведения о параметрах устройств см. в разделе [Параметры устройства](device-parameters.md).

    > [!Note]  
    > Значение параметра должно быть идентификатором CLSID, а не ProgID поставщика услуг.

     

-   Поставщик услуг для этого устройства должен реализовать интерфейс IMDServiceProvider2.
-   ключ поставщика услуг в разделе HKEY \_ LOCAL \_ MACHINE \\ SOFTWARE \\ Microsoft \\ Windows Media диспетчер устройств \\ plugins \\ SP \\ "имя пакета обновления" должно содержать следующее значение DWORD
    ```
    PnPAware    1
    ```

    

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**Создание поставщика услуг**](creating-a-service-provider.md)
</dt> </dl>

 

 




