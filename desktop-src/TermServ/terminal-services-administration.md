---
title: службы удаленных рабочих столов администрирования
description: Службы удаленных рабочих столов API позволяет перечислять и управлять серверами узлов сеансов удаленный рабочий стол, сеансами клиентов и процессами.
ms.assetid: 85a9ed9d-79d6-4011-93a4-00847c689747
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e763a652335c85931225746334bc21db0e6e086d
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "105672343"
---
# <a name="remote-desktop-services-administration"></a><span data-ttu-id="78c4b-103">службы удаленных рабочих столов администрирования</span><span class="sxs-lookup"><span data-stu-id="78c4b-103">Remote Desktop Services Administration</span></span>

<span data-ttu-id="78c4b-104">Службы удаленных рабочих столов API позволяет перечислять и управлять серверами узлов сеансов удаленный рабочий стол, сеансами клиентов и процессами.</span><span class="sxs-lookup"><span data-stu-id="78c4b-104">The Remote Desktop Services API enables you to enumerate and manage Remote Desktop Session Host (RD Session Host) servers, client sessions, and processes.</span></span>

<span data-ttu-id="78c4b-105">Чтобы получить имена всех серверов узлов сеансов удаленных рабочих столов в домене, вызовите функцию [**нетсерверенум**](/windows/desktop/api/lmserver/nf-lmserver-netserverenum) для перечисления серверов типа ТЕРМИНАЛСЕРВЕР типа SV \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="78c4b-105">To retrieve the names of all the RD Session Host servers in a domain, call the [**NetServerEnum**](/windows/desktop/api/lmserver/nf-lmserver-netserverenum) function to enumerate servers of the SV\_TYPE\_TERMINALSERVER type.</span></span> <span data-ttu-id="78c4b-106">Чтобы открыть обработчик для конкретного сервера узла сеансов удаленных рабочих столов, передайте имя сервера в вызове функции [**втсопенсервер**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsopenservera) .</span><span class="sxs-lookup"><span data-stu-id="78c4b-106">To open a handle to a specific RD Session Host server, pass the server name in a call to the [**WTSOpenServer**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsopenservera) function.</span></span> <span data-ttu-id="78c4b-107">Завершив использование этого маркера, выпустите его, вызвав функцию [**втсклосесервер**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtscloseserver) .</span><span class="sxs-lookup"><span data-stu-id="78c4b-107">When you have finished using the handle, release it by calling the [**WTSCloseServer**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtscloseserver) function.</span></span>

<span data-ttu-id="78c4b-108">Вы можете использовать маркер, возвращенный **втсопенсервер** , для выполнения следующих операций на сервере.</span><span class="sxs-lookup"><span data-stu-id="78c4b-108">You can use the handle returned by **WTSOpenServer** to perform the following operations on the server.</span></span>



| <span data-ttu-id="78c4b-109">Функция</span><span class="sxs-lookup"><span data-stu-id="78c4b-109">Function</span></span>                                                         | <span data-ttu-id="78c4b-110">Операция</span><span class="sxs-lookup"><span data-stu-id="78c4b-110">Operation</span></span>                                                                                                                                                                                                         |
|------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="78c4b-111">**втсдисконнектсессион**</span><span class="sxs-lookup"><span data-stu-id="78c4b-111">**WTSDisconnectSession**</span></span>](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsdisconnectsession)             | <span data-ttu-id="78c4b-112">Отключает клиента от указанного сеанса.</span><span class="sxs-lookup"><span data-stu-id="78c4b-112">Disconnects the client from a specified session.</span></span> <span data-ttu-id="78c4b-113">Сеанс остается активным, и пользователь может снова войти в систему для подключения к тому же сеансу.</span><span class="sxs-lookup"><span data-stu-id="78c4b-113">The session remains active and the user can log on again to connect to the same session.</span></span>                                                                         |
| [<span data-ttu-id="78c4b-114">**втсенумератесессионс**</span><span class="sxs-lookup"><span data-stu-id="78c4b-114">**WTSEnumerateSessions**</span></span>](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsenumeratesessionsa)             | <span data-ttu-id="78c4b-115">Возвращает список сеансов на указанном сервере узла сеансов удаленных рабочих столов.</span><span class="sxs-lookup"><span data-stu-id="78c4b-115">Returns a list of sessions on the specified RD Session Host server.</span></span>                                                                                                                                               |
| [<span data-ttu-id="78c4b-116">**втсенумератепроцессес**</span><span class="sxs-lookup"><span data-stu-id="78c4b-116">**WTSEnumerateProcesses**</span></span>](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsenumerateprocessesa)           | <span data-ttu-id="78c4b-117">Возвращает список процессов на указанном сервере узла сеансов удаленных рабочих столов.</span><span class="sxs-lookup"><span data-stu-id="78c4b-117">Returns a list of processes on the specified RD Session Host server.</span></span>                                                                                                                                              |
| [<span data-ttu-id="78c4b-118">**втслогоффсессион**</span><span class="sxs-lookup"><span data-stu-id="78c4b-118">**WTSLogoffSession**</span></span>](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtslogoffsession)                     | <span data-ttu-id="78c4b-119">Выходит из указанного сеанса.</span><span class="sxs-lookup"><span data-stu-id="78c4b-119">Logs off the specified session.</span></span>                                                                                                                                                                                   |
| [<span data-ttu-id="78c4b-120">**втскуерисессионинформатион**</span><span class="sxs-lookup"><span data-stu-id="78c4b-120">**WTSQuerySessionInformation**</span></span>](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsquerysessioninformationa) | <span data-ttu-id="78c4b-121">Возвращает сведения о указанном сеансе на указанном сервере узла сеансов удаленных рабочих столов.</span><span class="sxs-lookup"><span data-stu-id="78c4b-121">Returns information about the specified session on the specified RD Session Host server.</span></span>                                                                                                                          |
| [<span data-ttu-id="78c4b-122">**втссендмессаже**</span><span class="sxs-lookup"><span data-stu-id="78c4b-122">**WTSSendMessage**</span></span>](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea)                         | <span data-ttu-id="78c4b-123">Отображает окно сообщения на экране клиента в указанном сеансе.</span><span class="sxs-lookup"><span data-stu-id="78c4b-123">Shows a message box on the client display of a specified session.</span></span>                                                                                                                                                 |
| [<span data-ttu-id="78c4b-124">**втсшутдовнсистем**</span><span class="sxs-lookup"><span data-stu-id="78c4b-124">**WTSShutdownSystem**</span></span>](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsshutdownsystem)                   | <span data-ttu-id="78c4b-125">Завершает работу и при необходимости перезапускает указанный сервер узла сеансов удаленных рабочих столов.</span><span class="sxs-lookup"><span data-stu-id="78c4b-125">Shuts down and optionally restarts a specified RD Session Host server.</span></span>                                                                                                                                            |
| [<span data-ttu-id="78c4b-126">**втстерминатепроцесс**</span><span class="sxs-lookup"><span data-stu-id="78c4b-126">**WTSTerminateProcess**</span></span>](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsterminateprocess)               | <span data-ttu-id="78c4b-127">Завершает указанный процесс на указанном сервере узла сеансов удаленных рабочих столов.</span><span class="sxs-lookup"><span data-stu-id="78c4b-127">Terminates a specified process on a specified RD Session Host server.</span></span>                                                                                                                                             |
| [<span data-ttu-id="78c4b-128">**втсвиртуалчаннелопен**</span><span class="sxs-lookup"><span data-stu-id="78c4b-128">**WTSVirtualChannelOpen**</span></span>](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsvirtualchannelopen)           | <span data-ttu-id="78c4b-129">Открывает обработчик для указанного виртуального канала на сервере.</span><span class="sxs-lookup"><span data-stu-id="78c4b-129">Opens a handle to the server end of a specified virtual channel.</span></span> <span data-ttu-id="78c4b-130">Дополнительные сведения о виртуальных каналах см. [в статье использование службы удаленных рабочих столов виртуальных каналов](using-terminal-services-virtual-channels.md).</span><span class="sxs-lookup"><span data-stu-id="78c4b-130">For more information about virtual channels, see [Using Remote Desktop Services Virtual Channels](using-terminal-services-virtual-channels.md).</span></span> |
| [<span data-ttu-id="78c4b-131">**втсваитсистемевент**</span><span class="sxs-lookup"><span data-stu-id="78c4b-131">**WTSWaitSystemEvent**</span></span>](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtswaitsystemevent)                 | <span data-ttu-id="78c4b-132">Ожидает события, например создание сеанса клиента или вход пользователя на сервер узла сеансов удаленных рабочих столов.</span><span class="sxs-lookup"><span data-stu-id="78c4b-132">Waits for an event, such as the creation of a client session or a user logging on to the RD Session Host server.</span></span>                                                                                                  |



 

<span data-ttu-id="78c4b-133">Некоторые из этих функций выделяют буферы для возвращения сведений вызывающему объекту.</span><span class="sxs-lookup"><span data-stu-id="78c4b-133">Several of these functions allocate buffers to return information to the caller.</span></span> <span data-ttu-id="78c4b-134">Завершив использование буфера, освободите его, вызвав функцию [**втсфримемори**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsfreememory) .</span><span class="sxs-lookup"><span data-stu-id="78c4b-134">When you have finished using the buffer, free it by calling the [**WTSFreeMemory**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsfreememory) function.</span></span>

 

 