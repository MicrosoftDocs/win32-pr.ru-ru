---
title: Пространства имен объектов ядра
description: Службы удаленных рабочих столов использует несколько пространств имен для объектов ядра; глобальное пространство имен используется главным образом службами в клиентских и серверных приложениях.
ms.assetid: 771e0bbf-bd73-4e87-aa1e-945c1287b517
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 20680a32c8b35e3fa2f1ab15c732683d424550f0
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "105681696"
---
# <a name="kernel-object-namespaces"></a><span data-ttu-id="89d07-103">Пространства имен объектов ядра</span><span class="sxs-lookup"><span data-stu-id="89d07-103">Kernel object namespaces</span></span>

<span data-ttu-id="89d07-104">Сервер службы удаленных рабочих столов имеет несколько пространств имен для следующих именованных объектов ядра: события, семафоры, мьютексы, ожидающие таймеры, объекты сопоставления файлов и объекты заданий.</span><span class="sxs-lookup"><span data-stu-id="89d07-104">A Remote Desktop Services server has multiple namespaces for the following named kernel objects: events, semaphores, mutexes, waitable timers, file-mapping objects, and job objects.</span></span> <span data-ttu-id="89d07-105">Существует глобальное пространство имен, используемое главным образом службами в клиентских и серверных приложениях.</span><span class="sxs-lookup"><span data-stu-id="89d07-105">There is a global namespace used primarily by services in client/server applications.</span></span> <span data-ttu-id="89d07-106">Кроме того, каждый сеанс клиента имеет отдельное пространство имен для этих объектов, например в Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="89d07-106">In addition, each client session has a separate namespace for these objects, such as in Windows Vista.</span></span>

<span data-ttu-id="89d07-107">Отдельные пространства имен клиентских сеансов позволяют нескольким клиентам запускать одни и те же приложения, не мешая друг другу.</span><span class="sxs-lookup"><span data-stu-id="89d07-107">The separate client session namespaces enable multiple clients to run the same applications without interfering with each other.</span></span> <span data-ttu-id="89d07-108">Для процессов, запущенных в сеансе клиента, по умолчанию система использует пространство имен сеанса.</span><span class="sxs-lookup"><span data-stu-id="89d07-108">For processes started under a client session, the system uses the session namespace by default.</span></span> <span data-ttu-id="89d07-109">Однако эти процессы могут использовать глобальное пространство имен, добавляя префикс "Global \\ " к имени объекта.</span><span class="sxs-lookup"><span data-stu-id="89d07-109">However, these processes can use the global namespace by prepending the "Global\\" prefix to the object name.</span></span> <span data-ttu-id="89d07-110">Например, следующий код вызывает функцию [**CreateEvent**](/windows/desktop/api/synchapi/nf-synchapi-createeventa) и создает объект события с именем ксапп в глобальном пространстве имен:</span><span class="sxs-lookup"><span data-stu-id="89d07-110">For example, the following code calls [**CreateEvent**](/windows/desktop/api/synchapi/nf-synchapi-createeventa) and creates an event object named CSAPP in the global namespace:</span></span>

> [!Note]  
> <span data-ttu-id="89d07-111">Глобальное пространство имен недоступно для приложений Магазина Windows.</span><span class="sxs-lookup"><span data-stu-id="89d07-111">The global namespace is not available for Windows Store apps.</span></span>

 

`CreateEvent( NULL, FALSE, FALSE, "Global\\CSAPP" );`

<span data-ttu-id="89d07-112">Приложения службы в среде службы удаленных рабочих столов по умолчанию используют глобальное пространство имен.</span><span class="sxs-lookup"><span data-stu-id="89d07-112">Service applications in a Remote Desktop Services environment use the global namespace by default.</span></span>

<span data-ttu-id="89d07-113">Нулевой сеанс используется только для служб размещения, а сеанс консоли отсутствует, в отличие от предыдущих версий Windows.</span><span class="sxs-lookup"><span data-stu-id="89d07-113">Session zero is only used for hosting services, and there is no console session, unlike previous versions of Windows.</span></span>

<span data-ttu-id="89d07-114">Глобальное пространство имен позволяет процессам в нескольких клиентских сеансах взаимодействовать с приложением службы.</span><span class="sxs-lookup"><span data-stu-id="89d07-114">The global namespace enables processes on multiple client sessions to communicate with a service application.</span></span> <span data-ttu-id="89d07-115">Например, приложение клиента/сервера может использовать объект Mutex для синхронизации.</span><span class="sxs-lookup"><span data-stu-id="89d07-115">For example, a client/server application might use a mutex object for synchronization.</span></span> <span data-ttu-id="89d07-116">Серверный модуль может создать объект Mutex в глобальном пространстве имен.</span><span class="sxs-lookup"><span data-stu-id="89d07-116">The server module can create the mutex object in the global namespace.</span></span> <span data-ttu-id="89d07-117">Затем клиентский сеанс может использовать глобальный \\ префикс для открытия объекта Mutex.</span><span class="sxs-lookup"><span data-stu-id="89d07-117">Then a client session can use the "Global\\" prefix to open the mutex object.</span></span>

<span data-ttu-id="89d07-118">Кроме того, глобальное пространство имен используется для приложений, использующих именованные объекты, чтобы обнаружить, что экземпляр приложения, выполняющегося в системе, уже запущен во всех сеансах.</span><span class="sxs-lookup"><span data-stu-id="89d07-118">Another use of the global namespace is for applications that use named objects to detect that there is already an instance of the application running in the system across all sessions.</span></span> <span data-ttu-id="89d07-119">Этот именованный объект должен быть создан или открыт в глобальном пространстве имен вместо пространства имен для каждого сеанса.</span><span class="sxs-lookup"><span data-stu-id="89d07-119">This named object must be created or opened in the global namespace instead of the per-session namespace.</span></span> <span data-ttu-id="89d07-120">Наиболее распространенный случай запуска приложения по одному сеансу поддерживается по умолчанию, так как именованный объект создается в пространстве имен каждого сеанса.</span><span class="sxs-lookup"><span data-stu-id="89d07-120">The more common case of running the application once per session is supported by default because the named object is created in a per session namespace.</span></span>

<span data-ttu-id="89d07-121">В дополнение к "глобальному \\ " префиксу клиентские процессы могут использовать префикс "Local \\ " для явного создания объекта в пространстве имен сеанса.</span><span class="sxs-lookup"><span data-stu-id="89d07-121">In addition to the "Global\\" prefix, client processes can use the "Local\\" prefix to explicitly create an object in their session namespace.</span></span> <span data-ttu-id="89d07-122">В этих ключевых словах учитывается регистр.</span><span class="sxs-lookup"><span data-stu-id="89d07-122">These keywords are case sensitive.</span></span>

<span data-ttu-id="89d07-123">Префикс "Session \\ " зарезервирован для использования системой, и его не следует использовать в именах объектов ядра.</span><span class="sxs-lookup"><span data-stu-id="89d07-123">The "Session\\" prefix is reserved for system use and you should not use it in names of kernel objects.</span></span>

<span data-ttu-id="89d07-124">Быстрое переключение пользователей реализуется с помощью службы удаленных рабочих столов сеансов.</span><span class="sxs-lookup"><span data-stu-id="89d07-124">Fast user switching is implemented by using Remote Desktop Services sessions.</span></span> <span data-ttu-id="89d07-125">Первый пользователь, воменяющий в систему, использует сеанс 1, следующий пользователь для входа в систему использует сеанс 2 и т. д.</span><span class="sxs-lookup"><span data-stu-id="89d07-125">The first user to log on uses session one, the next user to log on uses session two, and so on.</span></span> <span data-ttu-id="89d07-126">Имена объектов ядра должны соответствовать рекомендациям, описанным в службы удаленных рабочих столов, чтобы приложения поддерживали несколько пользователей.</span><span class="sxs-lookup"><span data-stu-id="89d07-126">Kernel object names must follow the guidelines outlined for Remote Desktop Services so that applications can support multiple users.</span></span>

<span data-ttu-id="89d07-127">Создание объекта сопоставления файлов в глобальном пространстве имен с помощью [**CreateFileMapping**](/windows/desktop/api/winbase/nf-winbase-createfilemappinga)из сеанса, отличного от нулевого сеанса, является привилегированной операцией.</span><span class="sxs-lookup"><span data-stu-id="89d07-127">The creation of a file-mapping object in the global namespace, by using [**CreateFileMapping**](/windows/desktop/api/winbase/nf-winbase-createfilemappinga), from a session other than session zero is a privileged operation.</span></span> <span data-ttu-id="89d07-128">Поэтому в приложении, работающем на произвольном сеансе удаленный рабочий стол узла сеансов (удаленных рабочих столов), необходимо включить [секреатеглобалпривилеже](/windows/desktop/SecAuthZ/authorization-constants) , чтобы успешно создать объект сопоставления файлов в глобальном пространстве имен.</span><span class="sxs-lookup"><span data-stu-id="89d07-128">Because of this, an application running in an arbitrary Remote Desktop Session Host (RD Session Host) server session must have [SeCreateGlobalPrivilege](/windows/desktop/SecAuthZ/authorization-constants) enabled in order to create a file-mapping object in the global namespace successfully.</span></span> <span data-ttu-id="89d07-129">Проверка прав ограничена созданием объектов сопоставления файлов и не применяется к открытию существующих.</span><span class="sxs-lookup"><span data-stu-id="89d07-129">The privilege check is limited to the creation of file-mapping objects, and does not apply to opening existing ones.</span></span> <span data-ttu-id="89d07-130">Например, если служба или система создает объект сопоставления файлов, любой процесс, выполняющийся в любом сеансе, может получить доступ к этому объекту сопоставления файлов при условии, что у пользователя есть необходимый доступ.</span><span class="sxs-lookup"><span data-stu-id="89d07-130">For example, if a service or the system creates a file-mapping object, any process running in any session can access that file-mapping object provided that the user has the necessary access.</span></span>

 

 