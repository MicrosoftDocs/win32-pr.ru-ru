---
title: ref - атрибут
description: Атрибут \ ref \ определяет указатель ссылки. Он используется просто для представления уровня косвенного обращения.
ms.assetid: db4ff938-0f38-4f77-bb65-f728ffd609e0
keywords:
- ref Attribute, MIDL
topic_type:
- apiref
api_name:
- ref
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 82bc5762eea78b3ce73ab3db58e9bb567b051675
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "103890505"
---
# <a name="ref-attribute"></a>ref - атрибут

Атрибут **\[ ref \]** определяет указатель ссылки. Он используется просто для представления уровня косвенного обращения.

``` syntax
pointer_default(ref)

typedef [ ref [[ , type-attribute-list ]] ] type-specifier declarator-list; 

typedef [ struct | union ] 
{
    [ ref [[ , field-attribute-list ]] ] type-specifier declarator-list;
    ...}

[[ [ function-attribute-list ] ]] type-specifier [[ptr-decl]] function-name(
    [ ref [[ , parameter-attribute-list ]] ] type-specifier [[standard-declarator]]
    , ...);
```

## <a name="parameters"></a>Параметры

<dl> <dt>

*Type-Attribute-List* 
</dt> <dd>

Указывает один или несколько атрибутов, применяемых к типу. К допустимым атрибутам типа относятся **\[** [**Handle**](handle.md), **\]** **\[** [**Switch \_ Type**](switch-type.md) **\]** , **\[** [**передает \_ as**](transmit-as.md) **\]** ; атрибуты указателя **\[ \] ref**, **\[** [**UNIQUE**](unique.md) **\]** или **\[** [**ptr**](ptr.md) **\]** ;, а также **\[** [**\_ маркер контекста**](context-handle.md)атрибутов использования **\]** , **\[** [**String**](string.md) **\]** и **\[** [**Ignore**](ignore.md) **\]** . Несколько атрибутов разделяются запятыми.

</dd> <dt>

*Описатель типа* 
</dt> <dd>

Задает [базовый тип](midl-base-types.md), [**структуру**](struct.md), [**объединение**](union.md)или тип [**перечисления**](enum.md) или идентификатор типа. Дополнительная спецификация хранилища может предшествовать *спецификатору типа*.

</dd> <dt>

*стандартные-деклараторы* 
</dt> <dd>

Задает стандартный декларатор C, например идентификатор, декларатор указателя или декларатор массива. Дополнительные сведения см. в разделе [атрибуты Array и Sized-Pointer](array-and-sized-pointer-attributes.md), [**массивы**](arrays-1.md), [массивы и указатели](/windows/desktop/Rpc/arrays-and-pointers).

</dd> <dt>

*декларатор-список* 
</dt> <dd>

Задает стандартные деклараторы C, такие как идентификаторы, деклараторы указателей и деклараторы массивов. Дополнительные сведения см. в разделе [атрибуты Array и Sized-Pointer](array-and-sized-pointer-attributes.md), [**массивы**](arrays-1.md), [массивы и указатели](/windows/desktop/Rpc/arrays-and-pointers). *Список деклараторов* состоит из одного или нескольких деклараторов, разделенных запятыми. Идентификатор параметра-Name в деклараторе функции является необязательным.

</dd> <dt>

*Список атрибутов Field* 
</dt> <dd>

Указывает ноль или более атрибутов полей, применимых к структуре, члену объединения или параметру функции. К допустимым атрибутам полей относятся: **\[** [**First \_**](first-is.md)—, **\]** **\[** [**Last \_ —**](last-is.md), **\]** **\[** [**length \_ —**](length-is.md) **\]** , **\[** [**Max \_ —**](max-is.md) **\]** , **\[** [**size \_ —**](size-is.md), **\]** строка атрибутов использования **\[** [](string.md) **\]** , **\[** [**Ignore**](ignore.md) **\]** и **\[** [**контекст контекста \_**](context-handle.md) **\]** ; атрибут указателя **\[ \] ref**, **\[** [**UNIQUE**](unique.md) **\]** , **\[** [**ptr**](ptr.md), **\]** и **\[** [**\_ Тип переключателя**](switch-type.md)атрибута Union **\]** . Несколько атрибутов полей разделяются запятыми.

</dd> <dt>

*Function-Attribute-List* 
</dt> <dd>

Указывает ноль или более атрибутов, которые применяются к функции. Допустимые атрибуты функции — **\[** [**обратный вызов**](callback.md) **\]** , **\[** [**локальный**](local.md) **\]** объект, атрибут указателя **\[ ref \]**, **\[** [**UNIQUE**](unique.md) **\]** или **\[** [**ptr**](ptr.md) **\]** ; и атрибуты использования **\[** [**строка**](string.md) **\]** , **\[** [**Ignore**](ignore.md) **\]** и **\[** [**Контекстный \_ маркер**](context-handle.md) **\]** .

</dd> <dt>

*PTR-decl* 
</dt> <dd>

Указывает по крайней мере один декларатор указателя, к которому применяется атрибут **\[ ref \]** . Декларатор указателя аналогичен декларатору указателя, используемому в C; Он создается из \* указателя, модификаторов, таких как **FAR**, и квалификатора [**const**](const.md).

</dd> <dt>

*имя функции* 
</dt> <dd>

Задает имя удаленной процедуры.

</dd> <dt>

*Parameter-список атрибутов* 
</dt> <dd>

Состоит из нуля или более атрибутов, подходящих для указанного типа параметра. Атрибуты параметров могут принимать и исключать **\[** [**атрибуты направления**](in.md) **\]** **\[** [](out-idl.md) **\]** . сначала атрибуты полей **\[** [**\_ :**](first-is.md) **\]** , **\[** [**Last \_ -**](last-is.md), **\]** **\[** [**length \_ —**](length-is.md) **\]** , **\[** [**Max \_ —**](max-is.md) **\]** , **\[** [**size \_ —**](size-is.md) **\]** и **\[** [**\_ Тип переключателя**](switch-type.md) **\]** ; атрибут указателя **\[ ref \]**, **\[** [**UNIQUE**](unique.md) **\]** или **\[** [**ptr**](ptr.md), **\]** а также **\[** [**\_ маркер контекста**](context-handle.md) атрибутов использования **\]** и **\[** [**строка**](string.md) **\]** . Атрибут использования **\[** [**Ignore**](ignore.md) **\]** не может использоваться в качестве атрибута параметра. Несколько атрибутов разделяются запятыми.

</dd> </dl>

## <a name="remarks"></a>Комментарии

Атрибут указателя может быть применен как атрибут типа, как атрибут поля, применяемый к члену структуры, члену объединения или параметру. или в качестве атрибута функции, который применяется к возвращаемому типу функции. Атрибут указателя также может присутствовать с **\[** ключевым словом [**указателя \_ по умолчанию**](pointer-default.md) **\]** .

Ссылочный указатель имеет следующие характеристики.

-   Всегда указывает на допустимое хранилище; никогда не имеет значения **null**. Указатель ссылки всегда может быть разыменован.
-   Никогда не изменяются во время вызова. Указатель ссылки всегда указывает на то же хранилище на клиенте до и после вызова.
-   Не выделяет новую память на клиенте. Данные, возвращаемые с сервера, записываются в существующее хранилище, указанное значением указателя ссылки перед вызовом.
-   Не вызывает присвоение псевдонимов. К хранилищу, на которое указывает указатель ссылки, нельзя обратиться с любого другого имени в функции.

Указатель ссылки не может использоваться в качестве типа указателя, возвращаемого функцией.

Если для параметра указателя верхнего уровня не задан атрибут, он рассматривается как указатель ссылки.

## <a name="examples"></a>Примеры

``` syntax
[unique] char * GetFirstName( 
    [in, ref] char * pszFullName);
```

## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**массивы**](arrays-1.md)
</dt> <dt>

[Массивы и указатели](/windows/desktop/Rpc/arrays-and-pointers)
</dt> <dt>

[Атрибуты массива и Sized-Pointer](array-and-sized-pointer-attributes.md)
</dt> <dt>

[Базовые типы MIDL](midl-base-types.md)
</dt> <dt>

[**обратный вызов**](callback.md)
</dt> <dt>

[**const**](const.md)
</dt> <dt>

[**Контекстный \_ маркер**](context-handle.md)
</dt> <dt>

[**перечисления**](enum.md)
</dt> <dt>

[**первый \_ —**](first-is.md)
</dt> <dt>

[**справиться**](handle.md)
</dt> <dt>

[**обращать**](ignore.md)
</dt> <dt>

[**Последний \_ —**](last-is.md)
</dt> <dt>

[**Длина \_ равна**](length-is.md)
</dt> <dt>

[**Языковые**](local.md)
</dt> <dt>

[**Максимальное \_ число**](max-is.md)
</dt> <dt>

[**заполняет**](out-idl.md)
</dt> <dt>

[**ptr**](ptr.md)
</dt> <dt>

[**размер \_ равен**](size-is.md)
</dt> <dt>

[**Строка**](string.md)
</dt> <dt>

[**struct**](struct.md)
</dt> <dt>

[**Тип коммутатора \_**](switch-type.md)
</dt> <dt>

[**передать \_ как**](transmit-as.md)
</dt> <dt>

[**наборов**](union.md)
</dt> <dt>

[**однозначно**](unique.md)
</dt> </dl>

 

 