---
title: атрибут обратного вызова
description: Атрибут \ callback \ объявляет статическую функцию обратного вызова, которая существует на стороне клиента распределенного приложения. Функции обратного вызова предоставляют серверу возможность выполнять код на клиенте.
ms.assetid: c78947ae-614c-4f33-9ab7-1231e5031f80
keywords:
- атрибут обратного вызова MIDL
topic_type:
- apiref
api_name:
- callback
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 379aa3cbef4df872f8b133017b1b06a6c73e8181
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "104412898"
---
# <a name="callback-attribute"></a>атрибут обратного вызова

Атрибут **\[ обратного вызова \]** объявляет статическую функцию обратного вызова, которая существует на стороне клиента распределенного приложения. Функции обратного вызова предоставляют серверу возможность выполнять код на клиенте.

``` syntax
[callback [ , function-attr-list] ] type-specifier [ptr-declarator] function-name(
        [ [attribute-list] ] type-specifier [declarator]
        , ...);
```

## <a name="parameters"></a>Параметры

<dl> <dt>

*Function-attr-список* 
</dt> <dd>

Указывает ноль или более атрибутов, которые применяются к функции. Допустимые атрибуты функции — **\[** [**Local**](local.md) **\]** ; атрибут указателя **\[** [**ref**](ref.md) **\]** , **\[** [**UNIQUE**](unique.md) **\]** или **\[** [**ptr**](ptr.md) **\]** ; и атрибут использования **\[** [**строка**](string.md) **\]** , **\[** [**Ignore**](ignore.md) **\]** и **\[** [**Контекстный \_ маркер**](context-handle.md) **\]** . Несколько атрибутов разделяются запятыми.

</dd> <dt>

*Описатель типа* 
</dt> <dd>

Задает [Базовый \_ тип](midl-base-types.md), [**структуру**](struct.md), [**объединение**](union.md), тип [**перечисления**](enum.md) или идентификатор типа. Дополнительная спецификация хранилища может предшествовать *спецификатору типа*.

</dd> <dt>

*декларатор указателя* 
</dt> <dd>

Указывает ноль или несколько деклараторов указателей. Декларатор указателя аналогичен декларатору указателя, используемому в C; Он создается из \* указателя, модификаторов, таких как **FAR**, и квалификатора [**const**](const.md).

</dd> <dt>

*имя функции* 
</dt> <dd>

Задает имя удаленной процедуры.

</dd> <dt>

*Список атрибутов* 
</dt> <dd>

Указывает ноль или более атрибутов направления, атрибутов полей, атрибутов использования и атрибутов указателя, подходящих для указанного типа параметра. Несколько атрибутов разделяются запятыми.

</dd> <dt>

*declarator* 
</dt> <dd>

Задает стандартные деклараторы C, такие как идентификаторы, деклараторы указателей и деклараторы массивов. Дополнительные сведения см. в разделе [атрибуты Array и Sized-Pointer](array-and-sized-pointer-attributes.md), [**массивы**](arrays-1.md), [массивы и указатели](/windows/desktop/Rpc/arrays-and-pointers). Идентификатор параметра-name является необязательным.

</dd> </dl>

## <a name="remarks"></a>Комментарии

Функция **\[ обратного вызова \]** полезна, когда сервер должен получить сведения от клиента. Если серверные приложения поддерживались в Windows 3. *x*, сервер может выполнить вызов удаленной процедуры в Windows 3. *x* сервер для получения необходимой информации. Функция обратного вызова выполняет ту же цель и позволяет серверу запросить у клиента информацию в контексте исходного вызова.

Обратные вызовы — это особые случаи удаленных вызовов, которые выполняются как часть одного потока. Обратный вызов выполняется в контексте удаленного вызова. Любая Удаленная процедура, определенная как часть того же интерфейса, что и статическая функция обратного вызова, может вызывать функцию обратного вызова.

Важно отметить, что использование \[ обратного вызова \] не рекомендуется в многопоточном программировании. Как однопотоковое программное обеспечение, оно не поддерживает требования безопасности для многопотоковой среды.

Функция **рпкканцелсреад** не может использоваться для отмены вызова, который может отправлять статический обратный вызов. Если определенный удаленный вызов процедуры никогда не приведет к обратному вызову, его можно отменить. В противном случае вызов можно отменить, только если он может гарантировать, что обратный вызов для него не был выдан.

Атрибут обратного вызова поддерживается только последовательностями, ориентированным на подключение, и локальным протоколом. Размер \[ \] данных для обратных вызовов в последовательности локальных протоколов ограничен 150 байт. Если интерфейс RPC использует последовательность протокола датаграммы, вызовы процедур с атрибутом обратного вызова завершатся ошибкой.

Дескрипторы не могут использоваться в качестве параметров в функциях обратного вызова. Поскольку обратные вызовы всегда выполняются в контексте вызова, маркер привязки, используемый клиентом для выполнения вызова сервера, также используется в качестве обработчика привязки от сервера к клиенту.

Обратные вызовы могут быть вложены в любую глубину.

## <a name="examples"></a>Примеры

``` syntax
[callback] HRESULT DisplayString([in, string] char * p1);
```

## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**массивы**](arrays-1.md)
</dt> <dt>

[Базовые типы MIDL](midl-base-types.md)
</dt> <dt>

[**const**](const.md)
</dt> <dt>

[**Контекстный \_ маркер**](context-handle.md)
</dt> <dt>

[**перечисления**](enum.md)
</dt> <dt>

[Файл определения интерфейса (IDL)](interface-definition-idl-file.md)
</dt> <dt>

[**обращать**](ignore.md)
</dt> <dt>

[**Языковые**](local.md)
</dt> <dt>

[**/осф**](-osf.md)
</dt> <dt>

[**ref**](ref.md)
</dt> <dt>

[**ptr**](ptr.md)
</dt> <dt>

[**Строка**](string.md)
</dt> <dt>

[**struct**](struct.md)
</dt> <dt>

[**наборов**](union.md)
</dt> <dt>

[**однозначно**](unique.md)
</dt> <dt>

[**рпкканцелсреад**](/windows/desktop/api/rpcdce/nf-rpcdce-rpccancelthread)
</dt> </dl>

 

 