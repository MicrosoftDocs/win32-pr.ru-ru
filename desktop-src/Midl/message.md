---
title: атрибут сообщения
description: Атрибут \ Message \ указывает, что удаленный вызов процедуры должен обрабатываться как сообщение от клиента серверу.
ms.assetid: ec616bf5-a845-4e7e-9f39-20947d2074f7
keywords:
- атрибут сообщения MIDL
topic_type:
- apiref
api_name:
- message
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 964f8dfd8652547bdf5bef25d1abe9acde8189a2
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "104487632"
---
# <a name="message-attribute"></a>атрибут сообщения

Атрибут **\[ Message \]** указывает, что удаленный вызов процедуры должен обрабатываться как сообщение от клиента серверу.

``` syntax
[message, optional-attribute-list] void function-name(
    [in, optional-parameter-attributes] param-name,. . .);
```

## <a name="parameters"></a>Параметры

<dl> <dt>

*список необязательных атрибутов* 
</dt> <dd>

Другие атрибуты, которые применяются к функции. **\[** [](local.md) **\]** **\[** [](nocode.md) **\]** **\[** [](code.md)**\]** **\[** [](optimize.md) **\]** С атрибутом **\[ Message \]** можно использовать только атрибуты Local, InAttribute, Code и optimize.

</dd> <dt>

*имя функции* 
</dt> <dd>

Имя функции, определенное в IDL-файле.

</dd> <dt>

*необязательные атрибуты-Parameter* 
</dt> <dd>

Ноль или несколько атрибутов MIDL, которые будут применены к параметру.

</dd> <dt>

*Param-Name* 
</dt> <dd>

Имя параметра, определенное в IDL-файле.

</dd> </dl>

## <a name="remarks"></a>Комментарии

Как сообщения от клиента, удаленные вызовы процедур с атрибутом **\[ сообщения \]** доставляются на сервер асинхронно через транспорт очереди сообщений [**нкадг \_ MQ**](ncadg-mq.md) . Можно указать обмен сообщениями в синхронном режиме, указав транспортный протокол **нкадг \_ MQ** без использования атрибута **\[ \] Message** .

При указании обмена сообщениями в асинхронном режиме атрибут **\[ Message \]** позволяет клиенту выполнить удаленный вызов процедуры и вернуться немедленно, даже если серверное приложение не отвечает. Если целевой сервер недоступен, вызов будет сохранен до тех пор, пока сервер не станет доступным.

Кроме того, Обмен сообщениями в асинхронном режиме позволяет управлять свойствами очереди сообщений для сервера. Дополнительные сведения о выборе качества обслуживания, приоритета вызова и времени жизни вызова для серверного процесса см. в разделе [**рпкбиндингсетоптион**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcbindingsetoption) .

К атрибуту **\[ Message \]** также применяются следующие ограничения.

-   Служба очередей сообщений Майкрософт должна быть реализована в системах клиента и сервера, и системы должны быть видимы друг с другом, как определено в области установки очереди сообщений.
-   Привязка должна использовать хорошо известные конечные точки и транспортный протокол [**нкадг \_ MQ**](ncadg-mq.md) .
-   Функция не может содержать выходные параметры или тип возвращаемого значения, отличный от [**void**](void.md). Обратите внимание, что Последнее ограничение делает атрибут **\[ сообщения \]** непригодным для методов интерфейса COM (Object) в настоящее время. Следующий выпуск MIDL позволяет функциям **\[ \] сообщений** возвращать \_ состояние ошибки \_ t или HRESULT.
-   Любой интерфейс, содержащий хотя бы один вызов **\[ \] сообщения** , должен быть зарегистрирован путем вызова [**рпксерверрегистериф**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcserverregisterif) или [**рпксерверрегистерифекс**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcserverregisterifex) перед вызовом [**рпксерверусепротсекепекс (нкадг \_ MQ)**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcserveruseprotseqepex). В противном случае вызовы, ожидающие очереди для сервера, будут считываться перед регистрацией интерфейса, и вызовы завершатся ошибкой.

## <a name="examples"></a>Примеры

``` syntax
[message] void DisplayString(
    [in, string] char * p1);
 
[message] void VarDataArray(
    [in, size_is(iSize)] ARRAY_TYPE lpMyArray,
    [in] int iSize,
    [in] unsigned long ulChksum);
```

## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**приведен**](code.md)
</dt> <dt>

[**Языковые**](local.md)
</dt> <dt>

[**нкадг \_ MQ**](ncadg-mq.md)
</dt> <dt>

[**nocode**](nocode.md)
</dt> <dt>

[**увеличить**](optimize.md)
</dt> <dt>

[Очередь сообщений RPC](/windows/desktop/Rpc/rpc-message-queuing)
</dt> <dt>

[**рпкбиндингсетоптион**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcbindingsetoption)
</dt> <dt>

[**рпкбиндингинкоптион**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcbindinginqoption)
</dt> <dt>

[**void**](void.md)
</dt> </dl>

 

 