---
description: Свойства представлены идентификаторами, известными как идентификаторы свойств (PID).
ms.assetid: a773c7b3-a1a2-4cce-ae5f-b54217ea06f4
title: Основные сведения о обработчиках свойств
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 564d6f8bd325e649ff1356869932521d8c1cd885
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104263882"
---
# <a name="understanding-property-handlers"></a><span data-ttu-id="0da9b-103">Основные сведения о обработчиках свойств</span><span class="sxs-lookup"><span data-stu-id="0da9b-103">Understanding Property Handlers</span></span>

<span data-ttu-id="0da9b-104">Свойства представлены идентификаторами, известными как идентификаторы свойств (PID).</span><span class="sxs-lookup"><span data-stu-id="0da9b-104">Properties are represented by IDs known as property identifiers (PIDs).</span></span> <span data-ttu-id="0da9b-105">Каждое свойство должно иметь глобальный уникальный идентификатор (GUID).</span><span class="sxs-lookup"><span data-stu-id="0da9b-105">Each property MUST have a globally unique identifier (GUID).</span></span> <span data-ttu-id="0da9b-106">Этот идентификатор состоит из идентификатора GUID, представляющего коллекцию свойств, называемых набором свойств, а также строку или 32-разрядное целое число для идентификации свойства в наборе.</span><span class="sxs-lookup"><span data-stu-id="0da9b-106">This identifier consists of a GUID, representing a collection of properties called a property set plus either a string or a 32-bit integer to identify the property within the set.</span></span> <span data-ttu-id="0da9b-107">Если используется целочисленная форма идентификатора, значения 0x00000000, 0xFFFFFFFF и 0xFFFFFFFE считаются недопустимыми.</span><span class="sxs-lookup"><span data-stu-id="0da9b-107">If the integer form of ID is used, the values 0x00000000, 0xFFFFFFFF, and 0xFFFFFFFE are considered invalid.</span></span> <span data-ttu-id="0da9b-108">Поставщики гарантируют, что их свойства определяются уникальным образом, помещая их в набор свойств, определенный собственными идентификаторами GUID.</span><span class="sxs-lookup"><span data-stu-id="0da9b-108">Vendors can guarantee that their properties are uniquely defined by placing them in a property set defined by their own GUIDs.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0da9b-109">Важно тщательно и стратегически определять свойства для первого выпуска схемы.</span><span class="sxs-lookup"><span data-stu-id="0da9b-109">It is critical that you define properties carefully and strategically for the first release of the schema.</span></span> <span data-ttu-id="0da9b-110">Любые изменения пользовательских свойств (например, ширина столбца или тип свойства) не будут отражены в базе данных после регистрации схемы.</span><span class="sxs-lookup"><span data-stu-id="0da9b-110">Any changes to custom properties (such as column width or property type) will not be reflected in the database after a schema has been registered.</span></span> <span data-ttu-id="0da9b-111">Единственный способ определить эти изменения после того, как схема была зарегистрирована в системе, — либо перестроить индекс, либо зарегистрировать новую схему, либо зарегистрировать схему, а затем создать новое свойство (которое состоит из канонического имени и PKEY) для каждого выпуска субекуент; например `PKEY_GroupName_PropertyNameV2` , `PKEY_GroupName_PropertyNameV3` и т. д.).</span><span class="sxs-lookup"><span data-stu-id="0da9b-111">The only way to have these changes recognized after the schema has been registered once on a system would be either to rebuild the index and then register the new schema, or to register the schema and then create a new property (which consists of a canonical name and a PKEY) for each subequent release; for example `PKEY_GroupName_PropertyNameV2`, `PKEY_GroupName_PropertyNameV3`, and so forth).</span></span> <span data-ttu-id="0da9b-112">Не рекомендуется создавать новые свойства таким образом, поскольку несколько внешних столбцов могут повлиять на производительность системы.</span><span class="sxs-lookup"><span data-stu-id="0da9b-112">We do not recommend creating new properties in this manner, because multiple extraneous columns may impact system performance.</span></span>

 

<span data-ttu-id="0da9b-113">Этот раздел организован следующим образом:</span><span class="sxs-lookup"><span data-stu-id="0da9b-113">This topic is organized as follows:</span></span>

-   [<span data-ttu-id="0da9b-114">Метаданные</span><span class="sxs-lookup"><span data-stu-id="0da9b-114">Metadata</span></span>](#metadata)
    -   [<span data-ttu-id="0da9b-115">Открыть метаданные</span><span class="sxs-lookup"><span data-stu-id="0da9b-115">Open Metadata</span></span>](#open-metadata)
-   [<span data-ttu-id="0da9b-116">Сведения об обработчиках свойств</span><span class="sxs-lookup"><span data-stu-id="0da9b-116">About Property Handlers</span></span>](#about-property-handlers)
-   [<span data-ttu-id="0da9b-117">Устаревшие технологии</span><span class="sxs-lookup"><span data-stu-id="0da9b-117">Legacy Technology</span></span>](#legacy-technology)
-   [<span data-ttu-id="0da9b-118">См. также</span><span class="sxs-lookup"><span data-stu-id="0da9b-118">Related topics</span></span>](#related-topics)

## <a name="metadata"></a><span data-ttu-id="0da9b-119">Метаданные</span><span class="sxs-lookup"><span data-stu-id="0da9b-119">Metadata</span></span>

<span data-ttu-id="0da9b-120">В Windows Vista и более поздних версиях новая система свойств, основанная на метаданных, является центральной для организации таких элементов, как файлы, электронная почта и контакты.</span><span class="sxs-lookup"><span data-stu-id="0da9b-120">In Windows Vista and later, a new property system based on metadata is central to organizing items such as files, e-mail, and contacts.</span></span> <span data-ttu-id="0da9b-121">В этой новой системе свойств можно выполнять поиск элементов на основе их метаданных, а пользователи могут считывать или записывать эти метаданные.</span><span class="sxs-lookup"><span data-stu-id="0da9b-121">In this new property system, items can be searched based on their metadata, and users can read or write that metadata.</span></span> <span data-ttu-id="0da9b-122">Метаданные в этой системе представлены расширяемым набором *свойств* , реализованных как пары "имя-значение".</span><span class="sxs-lookup"><span data-stu-id="0da9b-122">Metadata in this system is represented by an extensible set of *properties* implemented as name/value pairs.</span></span>

<span data-ttu-id="0da9b-123">В Windows Vista и более поздних версиях широкий набор свойств охватывает особенности таких элементов, как фотографии, музыка, документы, сообщения, контакты и файлы.</span><span class="sxs-lookup"><span data-stu-id="0da9b-123">In Windows Vista and later, an extensive set of properties covers the specifics of items such as photos, music, documents, messages, contacts, and files.</span></span> <span data-ttu-id="0da9b-124">Независимые поставщики программного обеспечения могут представлять собственные свойства платформы, если ни одно из существующих свойств не соответствует их потребностям.</span><span class="sxs-lookup"><span data-stu-id="0da9b-124">Independent software vendors (ISVs) can introduce their own properties to the platform if no existing property meets their needs.</span></span>

### <a name="open-metadata"></a><span data-ttu-id="0da9b-125">Открыть метаданные</span><span class="sxs-lookup"><span data-stu-id="0da9b-125">Open Metadata</span></span>

<span data-ttu-id="0da9b-126">Система свойств в Windows Vista и более поздних версиях является открытой системой метаданных.</span><span class="sxs-lookup"><span data-stu-id="0da9b-126">The property system in Windows Vista and later is an open metadata system.</span></span> <span data-ttu-id="0da9b-127">Формат файла сохраняет любое присвоенное ему свойство и предоставляет это значение при запросе, независимо от релевантности или значения.</span><span class="sxs-lookup"><span data-stu-id="0da9b-127">A file format stores any property assigned to it and exposes that value when queried, regardless of relevance or meaning.</span></span> <span data-ttu-id="0da9b-128">Это позволяет сторонним разработчикам прикреплять дополнительные свойства к файлу, не требуя изменения связанного с ним обработчика свойств.</span><span class="sxs-lookup"><span data-stu-id="0da9b-128">This enables third-party developers to attach extra properties to the file without requiring a change in the property handler associated with it.</span></span> <span data-ttu-id="0da9b-129">Открытые метаданные — это мощная концепция.</span><span class="sxs-lookup"><span data-stu-id="0da9b-129">Open metadata is a powerful concept.</span></span> <span data-ttu-id="0da9b-130">Дополнительные сведения о поддержке открытых метаданных для формата файлов на основе XML см. в разделе "Поддержка открытых метаданных" раздела [инициализация обработчиков свойств](./building-property-handlers-property-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="0da9b-130">For more information about how to support open metadata for an XML-based file format, see "Supporting Open Metadata" in [Initializing Property Handlers](./building-property-handlers-property-handlers.md).</span></span>

> [!Note]  
> <span data-ttu-id="0da9b-131">Обработчики свойств всегда связаны с конкретными типами файлов. Таким же, если формат файла содержит свойства, требующие пользовательского обработчика свойств, всегда следует регистрировать уникальное расширение имени файла для каждого формата файла.</span><span class="sxs-lookup"><span data-stu-id="0da9b-131">Property handlers are always associated with specific file types; thus, if your file format contains properties that require a custom property handler, you should always register a unique file name extension for each file format.</span></span>

 

## <a name="about-property-handlers"></a><span data-ttu-id="0da9b-132">Сведения об обработчиках свойств</span><span class="sxs-lookup"><span data-stu-id="0da9b-132">About Property Handlers</span></span>

<span data-ttu-id="0da9b-133">В Windows Vista и более поздних версиях Windows имеет расширяемую систему свойств для хранения и извлечения метаданных в файлах и элементах данных, к которым вы обращаетесь.</span><span class="sxs-lookup"><span data-stu-id="0da9b-133">In Windows Vista and later, Windows has an extensible property system for storing and retrieving metadata in the files and data items that you access.</span></span> <span data-ttu-id="0da9b-134">Проводник Windows и система Windows Search вместе с другими приложениями используют обработчики свойств для чтения и изменения этих метаданных.</span><span class="sxs-lookup"><span data-stu-id="0da9b-134">Windows Explorer and the Windows Search system, along with other applications, use property handlers to read and modify this metadata.</span></span> <span data-ttu-id="0da9b-135">Если вы являетесь разработчиком, которому принадлежит конкретный тип файла, следует зарегистрировать обработчик свойств, чтобы предоставить системе свойств доступ к метаданным в файлах.</span><span class="sxs-lookup"><span data-stu-id="0da9b-135">If you are a developer who owns a specific file type, you should register a property handler to give the property system access to the metadata in your files.</span></span> <span data-ttu-id="0da9b-136">В некоторых случаях можно использовать существующий обработчик свойств, который может считывать и понимать формат файла и его свойства. в других случаях может потребоваться разработать новый обработчик свойств для типа файлов.</span><span class="sxs-lookup"><span data-stu-id="0da9b-136">In some cases, you might be able to use an existing property handler that can read and understand your file format and its properties; in other cases, you might need to develop a new property handler for your file type.</span></span>

<span data-ttu-id="0da9b-137">Первым шагом при написании обработчика свойств является рассмотрение того, какие свойства поддерживает ваш тип файла.</span><span class="sxs-lookup"><span data-stu-id="0da9b-137">The first step in writing a property handler is to consider what properties your file type supports.</span></span> <span data-ttu-id="0da9b-138">Значения свойств хранятся в потоке файлов в основном для обеспечения возможности транспортного потока.</span><span class="sxs-lookup"><span data-stu-id="0da9b-138">Property values are stored in the file stream, primarily to enable transportability.</span></span> <span data-ttu-id="0da9b-139">Если значения свойств хранятся в самом файле, как они находятся в этой системе, пользователь может скопировать файл на другой компьютер, USB-накопитель или другую файловую систему или отправить файл как вложение электронной почты, свойства передаются вместе с файлом и никогда не будут потеряны или утеряны.</span><span class="sxs-lookup"><span data-stu-id="0da9b-139">When the property values are stored in the file itself, as they are in this system, a user can copy a file to another computer, a USB flash drive, or another file system, or sends the file as an e-mail attachment, the properties travel with the file and never get out of sync or lost.</span></span> <span data-ttu-id="0da9b-140">Поэтому, если формат файла поддерживает хранение дополнительной информации, лучше хранить свойства в самом файле.</span><span class="sxs-lookup"><span data-stu-id="0da9b-140">Therefore, if the file format supports storing extra information, it is best to store the properties in the file itself.</span></span>

<span data-ttu-id="0da9b-141">Следующим шагом является определение свойств, которые должен предоставить файл.</span><span class="sxs-lookup"><span data-stu-id="0da9b-141">The next step is to determine which properties the file should provide.</span></span> <span data-ttu-id="0da9b-142">Вы можете сначала подумать, что ограниченный набор свойств достаточно.</span><span class="sxs-lookup"><span data-stu-id="0da9b-142">You might initially think that a limited set of properties is adequate.</span></span> <span data-ttu-id="0da9b-143">Звуковой файл может поддерживать только свойства, связанные со звуком, и заканчивать его.</span><span class="sxs-lookup"><span data-stu-id="0da9b-143">An audio file could support only audio-related properties and end there.</span></span> <span data-ttu-id="0da9b-144">Однако этот звуковой файл может быть записан в течение сеанса судебного законодательства, архивированного юридическим утверждением.</span><span class="sxs-lookup"><span data-stu-id="0da9b-144">However, that audio file could be a recording of a session of a court of law, archived by a law firm.</span></span> <span data-ttu-id="0da9b-145">В этом случае Юридическая фирма, безусловно, хочет связать с этим файлом другие свойства, не являющиеся звуком, например номер варианта.</span><span class="sxs-lookup"><span data-stu-id="0da9b-145">In that case, the law firm would certainly want to associate other non-audio properties with this file, such as the case number.</span></span> <span data-ttu-id="0da9b-146">Поставщик формата звукового файла не может определить все сценарии, в которых будет использоваться их формат.</span><span class="sxs-lookup"><span data-stu-id="0da9b-146">The provider of the audio file format cannot possibly determine all of the scenarios in which their format will ever be used.</span></span> <span data-ttu-id="0da9b-147">Поэтому следует рассмотреть возможность включения общего хранилища любого произвольного свойства, поддерживаемого системой свойств.</span><span class="sxs-lookup"><span data-stu-id="0da9b-147">They should therefore consider enabling blanket storage of any arbitrary property supported by the property system.</span></span>

## <a name="legacy-technology"></a><span data-ttu-id="0da9b-148">Устаревшие технологии</span><span class="sxs-lookup"><span data-stu-id="0da9b-148">Legacy Technology</span></span>

<span data-ttu-id="0da9b-149">Технология вторичного потока файловой системы Microsoft Windows NT была разработана для поддержки сохраняемости дополнительной информации с файлом через альтернативный потоковый набор на уровне файловой системы.</span><span class="sxs-lookup"><span data-stu-id="0da9b-149">Microsoft Windows NT File System (NTFS) secondary stream technology was developed to support the persistence of extra information with the file through an alternate stream set at the file system layer.</span></span> <span data-ttu-id="0da9b-150">Может возникнуть вопрос, почему эти вторичные потоки не используются в качестве метода Main для хранения свойств, особенно с поддержкой Open Metadata.</span><span class="sxs-lookup"><span data-stu-id="0da9b-150">One might wonder why those secondary streams are not used as the main method to store properties, especially with open metadata support.</span></span> <span data-ttu-id="0da9b-151">Основная причина — это транспортная часть этих дополнительных сведений.</span><span class="sxs-lookup"><span data-stu-id="0da9b-151">The primary reason is the transportability of this extra information.</span></span> <span data-ttu-id="0da9b-152">К сожалению, эти альтернативные потоки удаляются во многих сценариях, включая поддержку кэширования на стороне клиента (CSC), передачу файлов в виде вложений и копирование файлов в хранилище, отличное от NTFS.</span><span class="sxs-lookup"><span data-stu-id="0da9b-152">Unfortunately, these alternate streams are removed in many scenarios including client-side caching support (CSC), sending files as attachments, and copying files to a non-NTFS store.</span></span>

<span data-ttu-id="0da9b-153">Вторичные потоки не предоставляют надежного решения, в котором свойства гарантированно перемещаются с файлом, и поэтому система свойств Windows Vista не предоставляет встроенный механизм, который использует вторичные потоки NTFS для хранения свойств.</span><span class="sxs-lookup"><span data-stu-id="0da9b-153">Secondary streams do not provide a robust solution in which properties are guaranteed to travel with the file, and hence, the Windows Vista property system does not provide a built-in mechanism that exploits the secondary NTFS streams for property storage.</span></span> <span data-ttu-id="0da9b-154">Независимые поставщики программного обеспечения также настоятельно не рекомендуются для создания обработчиков свойств, использующих вторичные потоки для хранения свойств.</span><span class="sxs-lookup"><span data-stu-id="0da9b-154">ISVs are also highly discouraged from building property handlers that use secondary streams for the storage of properties.</span></span> <span data-ttu-id="0da9b-155">Конечно, существуют ситуации, когда вторичные потоки NTFS подходят, особенно если приложения могут гарантировать, что файл, с которым они работают, всегда хранится в томе NTFS и не будет передаваться в результате взаимодействия с пользователем.</span><span class="sxs-lookup"><span data-stu-id="0da9b-155">Of course there are scenarios where NTFS secondary streams are appropriate, particularly when applications can guarantee that the file they are dealing with is always stored in an NTFS volume and will not travel as a result of end user interaction.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0da9b-156">См. также</span><span class="sxs-lookup"><span data-stu-id="0da9b-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0da9b-157">Использование имен видов</span><span class="sxs-lookup"><span data-stu-id="0da9b-157">Using Kind Names</span></span>](./building-property-handlers-user-friendly-kind-names.md)
</dt> <dt>

[<span data-ttu-id="0da9b-158">Использование списков свойств</span><span class="sxs-lookup"><span data-stu-id="0da9b-158">Using Property Lists</span></span>](./building-property-handlers-property-lists.md)
</dt> <dt>

[<span data-ttu-id="0da9b-159">Инициализация обработчиков свойств</span><span class="sxs-lookup"><span data-stu-id="0da9b-159">Initializing Property Handlers</span></span>](./building-property-handlers-property-handlers.md)
</dt> <dt>

[<span data-ttu-id="0da9b-160">Регистрация и распространение обработчиков свойств</span><span class="sxs-lookup"><span data-stu-id="0da9b-160">Registering and Distributing Property Handlers</span></span>](./prophand-reg-dist.md)
</dt> <dt>

[<span data-ttu-id="0da9b-161">Рекомендации и вопросы и ответы по обработчикам свойств</span><span class="sxs-lookup"><span data-stu-id="0da9b-161">Property Handler Best Practices and FAQ</span></span>](./prophand-bestprac-faq.md)
</dt> </dl>

 

 
