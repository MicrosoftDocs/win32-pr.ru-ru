---
description: В этом разделе объясняется, как создавать и регистрировать обработчики свойств для работы с системой свойств Windows.
ms.assetid: E6E81E04-9CC1-4df5-9A87-DE0CBD177356
title: Регистрация и распространение обработчиков свойств
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a1de6af17df8e15912870626935995c67c25f518
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104263876"
---
# <a name="registering-and-distributing-property-handlers"></a><span data-ttu-id="2c7d4-103">Регистрация и распространение обработчиков свойств</span><span class="sxs-lookup"><span data-stu-id="2c7d4-103">Registering and Distributing Property Handlers</span></span>

<span data-ttu-id="2c7d4-104">В этом разделе объясняется, как создавать и регистрировать обработчики свойств для работы с системой свойств Windows.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-104">This topic explains how to create and register property handlers to work with the Windows property system.</span></span>

<span data-ttu-id="2c7d4-105">Этот раздел организован следующим образом:</span><span class="sxs-lookup"><span data-stu-id="2c7d4-105">This topic is organized as follows:</span></span>

-   [<span data-ttu-id="2c7d4-106">Регистрация и распространение обработчиков свойств</span><span class="sxs-lookup"><span data-stu-id="2c7d4-106">Registering and Distributing Property Handlers</span></span>](#registering-and-distributing-property-handlers)
-   [<span data-ttu-id="2c7d4-107">Вопросы производительности и надежности для обработчиков свойств</span><span class="sxs-lookup"><span data-stu-id="2c7d4-107">Performance and Reliability Considerations for Property Handlers</span></span>](#performance-and-reliability-considerations-for-property-handlers)
    -   [<span data-ttu-id="2c7d4-108">Рекомендации по повышению производительности и надежности</span><span class="sxs-lookup"><span data-stu-id="2c7d4-108">Guidelines for Performance and Reliability</span></span>](#guidelines-for-performance-and-reliability)
-   [<span data-ttu-id="2c7d4-109">См. также</span><span class="sxs-lookup"><span data-stu-id="2c7d4-109">Related topics</span></span>](#related-topics)

## <a name="registering-and-distributing-property-handlers"></a><span data-ttu-id="2c7d4-110">Регистрация и распространение обработчиков свойств</span><span class="sxs-lookup"><span data-stu-id="2c7d4-110">Registering and Distributing Property Handlers</span></span>

<span data-ttu-id="2c7d4-111">После реализации обработчика свойств он должен быть зарегистрирован, а расширение имени файла должно быть связано с обработчиком.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-111">After the property handler is implemented, it must be registered and its file name extension must be associated with the handler.</span></span> <span data-ttu-id="2c7d4-112">В следующем примере с расширением. рецепт показаны необходимые записи реестра.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-112">The following example using the .recipe extension illustrates the required registry entries to do so.</span></span>

```
HKEY_CLASSES_ROOT
   CLSID
      {50d9450f-2a80-4f08-93b9-2eb526477d1a}
         (Default) = Recipe Property Handler
         ManualSafeSave [REG_DWORD] = 00000001
         InProcServer32
            (Default) = C:\\SDK\\PropertyHandlerSample\\bin\\RecipeHandlers.dll
            ThreadingModel = Apartment
HKEY_LOCAL_MACHINE
   SOFTWARE
      Microsoft
         Windows
            CurrentVersion
               PropertySystem
                  PropertyHandlers
                     .recipe
                        (Default) = {50d9450f-2a80-4f08-93b9-2eb526477d1a}
```

<span data-ttu-id="2c7d4-113">Обработчики свойств для определенного типа файлов обычно распространяются вместе с приложениями, которые создают файлы этого типа или управляют ими.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-113">Property handlers for a particular file type are commonly distributed with the application(s) that create or manipulate files of that type.</span></span> <span data-ttu-id="2c7d4-114">Однако следует также подумать о том, чтобы обработчики свойств были доступны независимо от этих приложений для поддержки индексации типа файлов в серверных сценариях, где обработчики свойств используются индексатором, но их сопутствующие приложения не требуются.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-114">However, you should also consider making your property handlers available independently of these applications to support indexing of your file type in server scenarios where property handlers are used by the indexer, but their accompanying applications are not required.</span></span> <span data-ttu-id="2c7d4-115">Если вы создаете автономный пакет установки для обработчика свойств, убедитесь, что он включает в себя следующее:</span><span class="sxs-lookup"><span data-stu-id="2c7d4-115">If you create a stand-alone installation package for your property handler, be sure that it includes the following:</span></span>

-   <span data-ttu-id="2c7d4-116">Сведения о регистрации обработчика свойства, указанные в разделе [Регистрация и распространение обработчиков свойств]().</span><span class="sxs-lookup"><span data-stu-id="2c7d4-116">The property handler registration details specified in the topic [Registering and Distributing Property Handlers]().</span></span>
-   <span data-ttu-id="2c7d4-117">Регистрация для типа файлов и всех файлов схемы, которые должны быть установлены, чтобы разрешить клиентам доступ ко всем функциям обработчика свойств.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-117">Registration for your file type and any schema files that must be installed, to enable clients to access all the features of your property handler.</span></span>

## <a name="performance-and-reliability-considerations-for-property-handlers"></a><span data-ttu-id="2c7d4-118">Вопросы производительности и надежности для обработчиков свойств</span><span class="sxs-lookup"><span data-stu-id="2c7d4-118">Performance and Reliability Considerations for Property Handlers</span></span>

<span data-ttu-id="2c7d4-119">Обработчики свойств вызываются для каждого файла на определенном компьютере.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-119">Property handlers are invoked for each file on a particular computer.</span></span> <span data-ttu-id="2c7d4-120">Они обычно вызываются в следующих случаях:</span><span class="sxs-lookup"><span data-stu-id="2c7d4-120">They are usually called under the following circumstances:</span></span>

-   <span data-ttu-id="2c7d4-121">Во время индексирования файла.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-121">During indexing of the file.</span></span> <span data-ttu-id="2c7d4-122">Это выполняется вне процесса в изолированном процессе с ограниченными правами.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-122">This is done out-of-process, in an isolated process with restricted rights.</span></span>
-   <span data-ttu-id="2c7d4-123">При доступе к файлам в проводнике Windows с целью чтения и записи значений свойств.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-123">When files are accessed in Windows Explorer for the purpose of reading and writing property values.</span></span> <span data-ttu-id="2c7d4-124">Это выполняется в процессе.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-124">This is done in-process.</span></span>

### <a name="guidelines-for-performance-and-reliability"></a><span data-ttu-id="2c7d4-125">Рекомендации по повышению производительности и надежности</span><span class="sxs-lookup"><span data-stu-id="2c7d4-125">Guidelines for Performance and Reliability</span></span>

<span data-ttu-id="2c7d4-126">В любой момент времени у пользователя могут быть десятки тысяч файлов любого типа (включая вас) на своих компьютерах, а также доступ к этим файлам или их изменение в любое время.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-126">At any time, a user might have tens of thousands of files of any specific type (including yours) on his or her computers, and could access or modify any or all of these files at any time.</span></span> <span data-ttu-id="2c7d4-127">Так как обработчики свойств часто вызываются для поддержки этих операций доступа и изменения, характеристики производительности и надежности обработчика свойств в занятых средах с высоким уровнем параллельности очень важны.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-127">Because property handlers are frequently invoked to support these access and modify operations, the performance and reliability characteristics of your property handler in busy, highly concurrent environments is of critical importance.</span></span>

<span data-ttu-id="2c7d4-128">При разработке и тестировании обработчика свойств учитывайте следующие рекомендации.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-128">Keep in mind the following guidelines as you are developing and testing your property handler.</span></span>

-   <span data-ttu-id="2c7d4-129">**Перечисление свойств**</span><span class="sxs-lookup"><span data-stu-id="2c7d4-129">**Property enumeration**</span></span>

    <span data-ttu-id="2c7d4-130">Обработчики свойств должны иметь очень быстрое время отклика при перечислении их свойств.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-130">Property handlers should have a very fast response time in enumerating their properties.</span></span> <span data-ttu-id="2c7d4-131">Чтобы обеспечить быстрое время отклика, следует избегать вычислений с интенсивным использованием памяти для значений свойств, поиска в сети или поиска ресурсов, отличных от самого файла.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-131">Memory-intensive calculations of property values, network lookups, or the search for resources other than the file itself should be avoided to ensure fast response times.</span></span>

-   <span data-ttu-id="2c7d4-132">**Запись свойств на месте**</span><span class="sxs-lookup"><span data-stu-id="2c7d4-132">**In-place property writing**</span></span>

    <span data-ttu-id="2c7d4-133">Если возможно, при работе с файлами среднего размера или большими размерами (несколько сотен КБ или больше) формат файла должен быть упорядочен таким образом, чтобы чтение или запись значений свойств не требовало считывания всего файла с диска.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-133">If possible, when dealing with medium-sized or large files (several hundred KB or larger), the file format should be arranged so that reading or writing property values does not require reading the whole file from disk.</span></span> <span data-ttu-id="2c7d4-134">Даже если требуется найти файл, его не следует считывать в памяти целиком, поскольку это приводит к чрезмерному работе рабочего набора проводника Windows или индексатора поиска Windows при попытке доступа к этим файлам или их индексации.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-134">Even if the file needs to be sought, it should not be read into memory in its entirety because that bloats the working set of Windows Explorer or the Windows Search indexer as they try to access or index these files.</span></span> <span data-ttu-id="2c7d4-135">Дополнительные сведения см. в разделе [инициализация обработчиков свойств](./building-property-handlers-property-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="2c7d4-135">For more information, see [Initializing Property Handlers](./building-property-handlers-property-handlers.md).</span></span>

    <span data-ttu-id="2c7d4-136">Одна из полезных методик этого заключается в том, чтобы заполнить заголовок файла дополнительным пространством, чтобы при следующем написании значения свойства можно было записать его на месте без необходимости перезаписи всего файла.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-136">One useful technique to accomplish this is to pad the header of the file with extra space so that the next time a property value needs to be written, the value can be written in place without needing to rewrite the entire file.</span></span> <span data-ttu-id="2c7d4-137">Для этого требуются функции Мануалсафесаве.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-137">This requires the ManualSafeSave functionality.</span></span> <span data-ttu-id="2c7d4-138">Этот подход подразумевает некоторый дополнительный риск того, что операция записи файла может быть прервана во время записи (из-за сбоя системы или потери питания), но поскольку размеры свойств обычно небольшие, вероятность такого прерывания аналогична небольшому, и выигрыш в производительности, который можно реализовать посредством записи свойств на месте, считается достаточно значительным, чтобы выровнять этот дополнительный риск.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-138">This approach involves some extra risk that the file write operation might be interrupted while the write is in progress (due to a system crash or power loss), but because property sizes are generally small, the probability of such an interruption is similarly small, and the performance gains that can be realized through in-place property writing are considered significant enough to justify this additional risk.</span></span> <span data-ttu-id="2c7d4-139">Даже поэтому следует тщательно протестировать реализацию, чтобы гарантировать, что файлы не будут повреждены в случае возникновения сбоя в ходе операции записи.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-139">Even so, you should take care to test your implementation extensively to ensure that your files are not corrupted in the event that a failure does arise in the course of a write operation.</span></span>

    <span data-ttu-id="2c7d4-140">Наконец, при реализации записи свойств на месте с помощью Мануалсафесаве иногда невозможно выполнить операцию на месте, и весь поток должен быть перезаписан в любом случае.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-140">Finally, when implementing in-place property writing with ManualSafeSave, sometimes the operation cannot be performed in-place, and the whole stream must be rewritten anyway.</span></span> <span data-ttu-id="2c7d4-141">Для упрощения перезаписи поток, предоставленный во время инициализации обработчика, поддерживает интерфейс [**идестинатионстреамфактори**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-idestinationstreamfactory) .</span><span class="sxs-lookup"><span data-stu-id="2c7d4-141">To facilitate the rewrite, the stream provided during handler initialization supports the [**IDestinationStreamFactory**](/windows/win32/api/shobjidl_core/nn-shobjidl_core-idestinationstreamfactory) interface.</span></span> <span data-ttu-id="2c7d4-142">Интерфейс **идестинатионстреамфактори** позволяет реализациям обработчиков получать временный поток для записи; когда все операции записи завершаются и вызывается метод [**идестинатионстреамфактори:: жетдестинатионстреам**](/windows/win32/api/shobjidl_core/nf-shobjidl_core-idestinationstreamfactory-getdestinationstream) , этот поток используется для полной замены исходного файлового потока.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-142">The **IDestinationStreamFactory** interface enables handler implementations to obtain a temporary stream for writing; when all writes are completed and the [**IDestinationStreamFactory::GetDestinationStream**](/windows/win32/api/shobjidl_core/nf-shobjidl_core-idestinationstreamfactory-getdestinationstream) method is called, this stream is used to fully replace the original file stream.</span></span> <span data-ttu-id="2c7d4-143">При использовании целевого потока исходный файловый поток должен обрабатываться как доступный только для чтения, так как он будет заменен потоком назначения после вызова метода **идестинатионстреамфактори:: жетдестинатионстреам** .</span><span class="sxs-lookup"><span data-stu-id="2c7d4-143">When the destination stream is used, the original file stream should be treated as read-only, because it will be replaced by the destination stream after the **IDestinationStreamFactory::GetDestinationStream** method has been called.</span></span>

-   <span data-ttu-id="2c7d4-144">**Выбор модели COM-потоков**</span><span class="sxs-lookup"><span data-stu-id="2c7d4-144">**Choosing your COM threading model**</span></span>

    <span data-ttu-id="2c7d4-145">Чтобы повысить эффективность обработчика свойств, необходимо указать, что он использует модель COM-потоков `Both` .</span><span class="sxs-lookup"><span data-stu-id="2c7d4-145">To maximize the efficiency of your property handler, you should specify that it uses the COM threading model `Both`.</span></span> <span data-ttu-id="2c7d4-146">Это обеспечивает прямой доступ из апартаментов STA (например, проводника) и подразделений агента передачи сообщений (например, процесса Сеарчпротоколхост в Windows Search), что позволяет избежать издержек при маршалировании в этих средах.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-146">This enables direct access from STA apartments (Windows Explorer, for example) and message transfer agent (MTA) apartments (the SearchProtocolHost process in Windows Search, for example), avoiding the overhead of marshaling in those environments.</span></span> <span data-ttu-id="2c7d4-147">Для достижения полной выгоды от `Both` потоковой модели все службы, от которых зависит обработчик, также должны быть обработаны так, `Both` чтобы избежать какого бы то ни было маршалирования в вызовах этих компонентов.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-147">To achieve the full benefit of the `Both` threading model, any services on which your handler depends should also be designated as `Both` to avoid any marshaling in calls to those components.</span></span> <span data-ttu-id="2c7d4-148">Проверьте документацию по этим конкретным службам, чтобы убедиться, что они используют эту потоковую модель.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-148">Check the documentation of these particular services to verify whether they use this threading model.</span></span>

-   <span data-ttu-id="2c7d4-149">**Параллелизм обработчиков свойств**</span><span class="sxs-lookup"><span data-stu-id="2c7d4-149">**Property handler concurrency**</span></span>

    <span data-ttu-id="2c7d4-150">Обработчики свойств и интерфейс [**ипропертисторе**](/windows/win32/api/propsys/nn-propsys-ipropertystore) предназначены для последовательного доступа, а не одновременный доступ.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-150">Property handlers and the [**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore) interface are designed for serial rather than concurrent access.</span></span> <span data-ttu-id="2c7d4-151">Использование проводника Windows, индексатора поиска Windows и всех других вызовов обработчиков свойств из базы кода Windows гарантирует это.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-151">Windows Explorer, the Windows Search indexer, and all other property handler invocations from the Windows codebase guarantee this usage.</span></span> <span data-ttu-id="2c7d4-152">Сторонние стороны не должны использовать обработчик свойств одновременно, но это поведение не гарантировано.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-152">There should be no reason for third parties to use a property handler concurrently, but this behavior cannot be guaranteed.</span></span> <span data-ttu-id="2c7d4-153">Кроме того, несмотря на то, что шаблон вызова должен быть последовательным, вызовы могут поступать в разные потоки (например, когда объект вызывается удаленно через COM RPC, как происходит в индексаторе).</span><span class="sxs-lookup"><span data-stu-id="2c7d4-153">Also, even though the calling pattern is expected to be serial, the calls may come on different threads (for instance, when the object is being called remotely via COM RPC, as occurs in the indexer).</span></span> <span data-ttu-id="2c7d4-154">Поэтому реализации обработчика свойств должны поддерживать вызов в различных потоках, и в идеале не следует наблюдать некорректные эффекты при параллельном вызове.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-154">Therefore, property handler implementations must support being called on different threads, and ideally should not suffer any ill effects when called concurrently.</span></span> <span data-ttu-id="2c7d4-155">Так как предполагаемый шаблон вызова является последовательным, для удовлетворения этих требований в большинстве случаев достаточно тривиальных реализаций, использующих критическую секцию.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-155">Because the intended calling pattern is serial, a trivial implementation using a critical section should be sufficient to meet these requirements in most cases.</span></span> <span data-ttu-id="2c7d4-156">Можно избежать блокировки параллельных вызовов, используя функцию [**трентеркритикалсектион**](/windows/win32/api/synchapi/nf-synchapi-tryentercriticalsection) для обнаружения и неудачных одновременных вызовов.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-156">It is acceptable to avoid blocking on concurrent calls by using the [**TryEnterCriticalSection**](/windows/win32/api/synchapi/nf-synchapi-tryentercriticalsection) function to detect and fail concurrent calls.</span></span>

-   <span data-ttu-id="2c7d4-157">**Параллелизм файлов**</span><span class="sxs-lookup"><span data-stu-id="2c7d4-157">**File concurrency**</span></span>

    <span data-ttu-id="2c7d4-158">Обработчики свойств часто используются в сценариях, где несколько приложений одновременно обращаются к файлу.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-158">Property handlers are often used in scenarios where multiple applications access a file concurrently.</span></span> <span data-ttu-id="2c7d4-159">Следовательно, обработчик и приложения должны управлять параллелизмом, указывая соответствующие режимы совместного использования при открытии файла.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-159">Hence, the handler and the applications need to manage the concurrency by specifying appropriate sharing modes when opening the file.</span></span> <span data-ttu-id="2c7d4-160">Они также должны знать доступ, указываемый другими приложениями и для управления случаями, когда доступ запрещен.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-160">They also need to be aware of the access that the other applications specify and to manage cases where access is not allowed.</span></span> <span data-ttu-id="2c7d4-161">Лучше всего, если все потребители указывают широкие режимы совместного использования, чтобы разрешить другим пользователям одновременный доступ к файлу, но при этом необходимо управлять проблемами согласованности.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-161">It is best if all consumers specify liberal sharing modes to enable others to access the file concurrently, but when doing this, consistency issues need to be managed.</span></span> <span data-ttu-id="2c7d4-162">Решения о наиболее подходящих режимах совместного использования, которые следует использовать, должны быть сделаны в контексте сообщества приложений, обращающихся к файлу.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-162">Decisions on the most appropriate sharing modes to be used need to be made in the context of the community of applications that access the file.</span></span>

    <span data-ttu-id="2c7d4-163">Файловые системы позволяют приложениям открывать файлы таким образом, чтобы они могли контролировать, может ли файл открываться другими приложениями.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-163">File systems enable applications to open files in a way that gives them control over whether and how other applications can open the file.</span></span> <span data-ttu-id="2c7d4-164">Режимы общего доступа обеспечивают доступ на чтение, запись и удаление.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-164">Sharing modes enable read, write, and delete access.</span></span> <span data-ttu-id="2c7d4-165">Система свойств поддерживает подмножество этих режимов общего доступа, описанных в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-165">The property system supports a subset of these sharing modes, outlined in the following table.</span></span>

    

    | <span data-ttu-id="2c7d4-166">Режим доступа</span><span class="sxs-lookup"><span data-stu-id="2c7d4-166">Access mode</span></span>                     | <span data-ttu-id="2c7d4-167">Режим общего доступа</span><span class="sxs-lookup"><span data-stu-id="2c7d4-167">Sharing mode</span></span>                             |
    |---------------------------------|------------------------------------------|
    | <span data-ttu-id="2c7d4-168">запись</span><span class="sxs-lookup"><span data-stu-id="2c7d4-168">Write</span></span>                           | <span data-ttu-id="2c7d4-169">Запрет других модулей чтения и записи</span><span class="sxs-lookup"><span data-stu-id="2c7d4-169">Deny other readers and writers</span></span>           |
    | <span data-ttu-id="2c7d4-170">Write (Енаблешаредениврите)</span><span class="sxs-lookup"><span data-stu-id="2c7d4-170">Write (EnableShareDenyWrite)</span></span>    | <span data-ttu-id="2c7d4-171">Включение других средств чтения, запрет других модулей записи</span><span class="sxs-lookup"><span data-stu-id="2c7d4-171">Enable other readers, deny other writers</span></span> |
    | <span data-ttu-id="2c7d4-172">Только для чтения (по умолчанию)</span><span class="sxs-lookup"><span data-stu-id="2c7d4-172">Read-only (default)</span></span>             | <span data-ttu-id="2c7d4-173">Включение других средств чтения, запрет других модулей записи</span><span class="sxs-lookup"><span data-stu-id="2c7d4-173">Enable other readers, deny other writers</span></span> |
    | <span data-ttu-id="2c7d4-174">Только для чтения (Енаблешаредениноне)</span><span class="sxs-lookup"><span data-stu-id="2c7d4-174">Read-only (EnableShareDenyNone)</span></span> | <span data-ttu-id="2c7d4-175">Включение других модулей чтения и записи</span><span class="sxs-lookup"><span data-stu-id="2c7d4-175">Enable other readers and writers</span></span>         |

    

     

    <span data-ttu-id="2c7d4-176">Обработчики свойств, открытые для **записи** (GPS \_ ReadWrite), отклоняют другие модули чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-176">Property handlers open for **write** (GPS\_READWRITE) will deny other readers and writers.</span></span> <span data-ttu-id="2c7d4-177">Обработчики могут использовать поведение, которое позволяет читателям, указывая `EnableShareDenyWrite` флаг (включение чтения) при регистрации.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-177">Handlers can opt into behavior that enables readers by specifying the `EnableShareDenyWrite` flag (implying enable Read) in its registration.</span></span>

    <span data-ttu-id="2c7d4-178">Обработчики свойств, открытые для **чтения** ( \_ по умолчанию GPS), по умолчанию позволяют другим читателям, но запрещают другие модули записи.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-178">Property handlers open for **read** (GPS\_DEFAULT), by default enable other readers but deny other writers.</span></span> <span data-ttu-id="2c7d4-179">Обработчики могут отказаться от включения других средств записи, указав `EnableShareDenyNone` флаг в его регистрации.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-179">Handlers can opt into enabling other writers by specifying the `EnableShareDenyNone` flag in its registration.</span></span> <span data-ttu-id="2c7d4-180">Это означает, что обработчик может успешно справиться с ситуацией, при которой содержимое файла изменяется во время чтения файла обработчиком.</span><span class="sxs-lookup"><span data-stu-id="2c7d4-180">This means that a handler can successfully handle a situation in which the content of a file changes while the handler is reading the file.</span></span>

    <span data-ttu-id="2c7d4-181">Определения флагов см. в разделе [**жетпропертисторефлагс**](/windows/win32/api/propsys/ne-propsys-getpropertystoreflags).</span><span class="sxs-lookup"><span data-stu-id="2c7d4-181">For flag definitions, see [**GETPROPERTYSTOREFLAGS**](/windows/win32/api/propsys/ne-propsys-getpropertystoreflags).</span></span>

## <a name="related-topics"></a><span data-ttu-id="2c7d4-182">См. также</span><span class="sxs-lookup"><span data-stu-id="2c7d4-182">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="2c7d4-183">Основные сведения о обработчиках свойств</span><span class="sxs-lookup"><span data-stu-id="2c7d4-183">Understanding Property Handlers</span></span>](./building-property-handlers-properties.md)
</dt> <dt>

[<span data-ttu-id="2c7d4-184">Использование имен видов</span><span class="sxs-lookup"><span data-stu-id="2c7d4-184">Using Kind Names</span></span>](./building-property-handlers-user-friendly-kind-names.md)
</dt> <dt>

[<span data-ttu-id="2c7d4-185">Использование списков свойств</span><span class="sxs-lookup"><span data-stu-id="2c7d4-185">Using Property Lists</span></span>](./building-property-handlers-property-lists.md)
</dt> <dt>

[<span data-ttu-id="2c7d4-186">Инициализация обработчиков свойств</span><span class="sxs-lookup"><span data-stu-id="2c7d4-186">Initializing Property Handlers</span></span>](./building-property-handlers-property-handlers.md)
</dt> <dt>

[<span data-ttu-id="2c7d4-187">Рекомендации и вопросы и ответы по обработчикам свойств</span><span class="sxs-lookup"><span data-stu-id="2c7d4-187">Property Handler Best Practices and FAQ</span></span>](./prophand-bestprac-faq.md)
</dt> </dl>

 

 
