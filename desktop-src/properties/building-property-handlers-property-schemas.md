---
description: Свойства, используемые в системе свойств Windows Vista и более поздних версий, объявляются в схемах свойств.
ms.assetid: 4e301210-df3a-41db-a58e-015ee8d41714
title: Создание пользовательских свойств
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 90849383e25889edf7f3abd4704c36354eff153c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104346645"
---
# <a name="creating-custom-properties"></a><span data-ttu-id="39710-103">Создание пользовательских свойств</span><span class="sxs-lookup"><span data-stu-id="39710-103">Creating Custom Properties</span></span>

<span data-ttu-id="39710-104">Свойства, используемые в системе свойств Windows Vista и более поздних версий, объявляются в схемах свойств.</span><span class="sxs-lookup"><span data-stu-id="39710-104">Properties used in the property system of Windows Vista and later are declared in property schemas.</span></span> <span data-ttu-id="39710-105">Эти схемы свойств определяются в XML-файлах и описывают различные аспекты свойства, включая его тип (включая сведения о его примитивном типе и о том, является ли он многозначным), как он может быть отображен в пользовательском интерфейсе Windows, какие метки (удобные для пользователя строки редактирования) используются вместе с ним, и как она кэшируется в хранилище поиска для более быстрого доступа.</span><span class="sxs-lookup"><span data-stu-id="39710-105">These property schemas are defined in XML files and describe various aspects of a property including its type (including information on its primitive type and whether it is multi-valued), how it can be displayed in the Windows UI, what kind of labels (user-friendly editing strings) are to be used with it, and how it is cached in the search store for faster access.</span></span> <span data-ttu-id="39710-106">Свойства определяются по каноническому имени или ключу их свойства (PKEY).</span><span class="sxs-lookup"><span data-stu-id="39710-106">Properties are identified by their Canonical Name or their Property Key (PKEY).</span></span>

<span data-ttu-id="39710-107">Каноническое имя — это понятное имя свойства, использующее соглашение о пространстве имен, аналогичное использованному в Microsoft .NET.</span><span class="sxs-lookup"><span data-stu-id="39710-107">A canonical name is the reader-friendly name of the property and uses a namespace convention similar to that used in Microsoft .NET.</span></span> <span data-ttu-id="39710-108">Для системных свойств (которые входят в состав Windows) используется соглашение `System.GroupName.PropertyName` .</span><span class="sxs-lookup"><span data-stu-id="39710-108">For system-defined properties (those that are included with Windows), the convention is `System.GroupName.PropertyName`.</span></span> <span data-ttu-id="39710-109">Обратите внимание, что в этих именах используется схема регистра языка Pascal, которая состоит из букв в начале каждого слова.</span><span class="sxs-lookup"><span data-stu-id="39710-109">Note that the Pascal casing scheme, which capitalizes letters at the beginning of each word, is used in these names.</span></span> <span data-ttu-id="39710-110">Канонические имена используются в различных местах, включая списки свойств и имена столбцов в кэше свойств.</span><span class="sxs-lookup"><span data-stu-id="39710-110">Canonical names are used in various places including property lists and column names in the property cache.</span></span> <span data-ttu-id="39710-111">Поэтому они используются в запросах язык SQL (SQL) для получения значения свойства.</span><span class="sxs-lookup"><span data-stu-id="39710-111">They are therefore used in Structured Query Language (SQL) queries to retrieve a property value.</span></span>

<span data-ttu-id="39710-112">PKEY — это пара значений, состоящих из GUID и **DWORD**, которые называются *форматид* и *PropID* соответственно.</span><span class="sxs-lookup"><span data-stu-id="39710-112">A PKEY is a pair of values consisting of a GUID and a **DWORD**, referred to as a *formatID* and *propID* respectively.</span></span> <span data-ttu-id="39710-113">Он представлен структурой [**PROPERTYKEY**](/windows/win32/api/wtypes/ns-wtypes-propertykey) .</span><span class="sxs-lookup"><span data-stu-id="39710-113">It is represented by a [**PROPERTYKEY**](/windows/win32/api/wtypes/ns-wtypes-propertykey) structure.</span></span> <span data-ttu-id="39710-114">Большинство API-интерфейсов системы свойств принимают эти ключи свойств.</span><span class="sxs-lookup"><span data-stu-id="39710-114">Most of the property system APIs accept these property keys.</span></span> <span data-ttu-id="39710-115">Пакет средств разработки программного обеспечения (SDK) для Windows включает файл заголовка "PKEY. h", включающий в себя определение каждого `System` ключа свойства в соответствии с соглашением `PKEY_GroupName_PropertyName` .</span><span class="sxs-lookup"><span data-stu-id="39710-115">The Windows Software Development Kit (SDK) includes the header file Propkey.h that includes a macro definition of each of the `System` property keys with the convention of `PKEY_GroupName_PropertyName`.</span></span> <span data-ttu-id="39710-116">Например, `PKEY_Photo_DateTaken` — это ключ свойства для свойства с каноническим именем `System.Photo.DateTaken` .</span><span class="sxs-lookup"><span data-stu-id="39710-116">For example, `PKEY_Photo_DateTaken` is the property key for the property with canonical name `System.Photo.DateTaken`.</span></span> <span data-ttu-id="39710-117">Значения свойств хранятся в виде структуры [**пропвариант**](/windows/win32/api/propidlbase/ns-propidlbase-propvariant) , которая является РАСШИРЕНИЕМ типов Variant OLE.</span><span class="sxs-lookup"><span data-stu-id="39710-117">Property values are stored in the form of a [**PROPVARIANT**](/windows/win32/api/propidlbase/ns-propidlbase-propvariant) structure, which is an extension of the OLE VARIANT types.</span></span>

<span data-ttu-id="39710-118">В этом разделе содержится следующий раздел, который является неотъемлемой частью создания пользовательских свойств.</span><span class="sxs-lookup"><span data-stu-id="39710-118">This section contains the following topic, which is integral to creating custom properties:</span></span>

-   [<span data-ttu-id="39710-119">Основные сведения о схеме описания свойства</span><span class="sxs-lookup"><span data-stu-id="39710-119">Understanding the Property Description Schema</span></span>](./propdesc-schema-entry.md)

> [!Note]  
> <span data-ttu-id="39710-120">Из-за потенциальных проблем, которые может иметь индексатор при использовании схемы системы свойств, очень важно определить атрибуты внимательно и стратегически для первого выпуска схемы.</span><span class="sxs-lookup"><span data-stu-id="39710-120">Due to potential difficulties that the indexer may have when consuming the property system's schema, it is critical that you define attributes carefully and strategically for the first release of the schema.</span></span> <span data-ttu-id="39710-121">Любые изменения атрибутов (тип, ширина столбца, будь то индексибле) не будут отражаться в базе данных после регистрации схемы.</span><span class="sxs-lookup"><span data-stu-id="39710-121">Any changes to attributes (type, column width, whether indexible) will not be reflected in the database after a schema has been registered.</span></span> <span data-ttu-id="39710-122">Единственным способом определения этих изменений после регистрации схемы в системе может быть либо перестроение индекса, а затем регистрация новой схемы или регистрация схемы, а затем создание нового свойства для каждого последующего выпуска. например `PKEY_GroupName_PropertyNameV2` , `PKEY_GroupName_PropertyNameV3` и т. д.).</span><span class="sxs-lookup"><span data-stu-id="39710-122">The only ways to have these changes recognized after the schema has been registered once on a system would be either to rebuild the index and then register the new schema, or to register the schema and then create a new property for each subsequent release; for example `PKEY_GroupName_PropertyNameV2`, `PKEY_GroupName_PropertyNameV3`, and so forth).</span></span> <span data-ttu-id="39710-123">Не рекомендуется создавать новые свойства таким образом, поскольку несколько внешних столбцов могут повлиять на производительность системы.</span><span class="sxs-lookup"><span data-stu-id="39710-123">We do not recommend creating new properties in this manner, because multiple extraneous columns may impact system performance.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="39710-124">См. также</span><span class="sxs-lookup"><span data-stu-id="39710-124">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="39710-125">Реализация обработчиков свойств</span><span class="sxs-lookup"><span data-stu-id="39710-125">Implementing Property Handlers</span></span>](./building-property-handlers.md)
</dt> <dt>

[<span data-ttu-id="39710-126">Схема описания свойства</span><span class="sxs-lookup"><span data-stu-id="39710-126">Property Description Schema</span></span>](./propdesc-schema-entry.md)
</dt> </dl>

 

 
