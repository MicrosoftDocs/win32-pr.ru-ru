---
description: Во многих сценариях безопасность на основе ролей является очень эффективным механизмом, но бывают ситуации, когда она менее эффективна.
ms.assetid: 6a1e6cf3-7a8c-4249-926d-675a54061adf
title: Эффективное проектирование ролей
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c0a340cb2fc643a414ebf784a14e7b61a45bccd3
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104538588"
---
# <a name="designing-roles-effectively"></a><span data-ttu-id="fb6c4-103">Эффективное проектирование ролей</span><span class="sxs-lookup"><span data-stu-id="fb6c4-103">Designing Roles Effectively</span></span>

<span data-ttu-id="fb6c4-104">Во многих сценариях безопасность на основе ролей является очень эффективным механизмом, но бывают ситуации, когда она менее эффективна.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-104">In many scenarios, role-based security is a very effective mechanism, but there are situations where it is less effective.</span></span> <span data-ttu-id="fb6c4-105">При принятии решения о том, где и как применять безопасность на основе ролей к конкретному приложению, следует учитывать ряд факторов.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-105">You should take a number of factors into consideration when deciding where and how to apply role-based security to a particular application.</span></span>

## <a name="user-and-data-characteristics-and-the-suitability-of-roles"></a><span data-ttu-id="fb6c4-106">Характеристики пользователя и данных, а также пригодность ролей</span><span class="sxs-lookup"><span data-stu-id="fb6c4-106">User and Data Characteristics and the Suitability of Roles</span></span>

<span data-ttu-id="fb6c4-107">Роли хорошо работают с особыми группами пользователей, и на этом уровне отфильтруются действия, которые могут выполнять эти пользователи.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-107">Roles work very well to characterize groups of users and, on that basis, filter what actions those users can perform.</span></span> <span data-ttu-id="fb6c4-108">Часто это выполняется на практике путем создания ролей, отражающих место в организации пользователя, например ролей "руководители" и "аудиторов", "Администраторы" и "Читатели", "проект одного сотрудника" и "проект двух сотрудников".</span><span class="sxs-lookup"><span data-stu-id="fb6c4-108">Often, this is carried out in practice by creating roles that reflect a user's place within an organization—for example, the roles "Managers" and "Tellers," "Administrators" and "Readers," "Project One Employees" and "Project Two Employees."</span></span> <span data-ttu-id="fb6c4-109">В таких случаях, когда доступ к данным является достаточно универсальным относительно пользователей, роли можно эффективно использовать для применения бизнес-правил, таких как следующие:</span><span class="sxs-lookup"><span data-stu-id="fb6c4-109">In such cases, where the data being accessed is fairly generic relative to the users, roles can be used efficiently to enforce business rules such as the following:</span></span>

-   <span data-ttu-id="fb6c4-110">"Руководители могут передавать любую сумму денег.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-110">"Managers can transfer any amount of money.</span></span> <span data-ttu-id="fb6c4-111">Получатель может передавать до $10 000. "</span><span class="sxs-lookup"><span data-stu-id="fb6c4-111">Tellers can transfer only up to $10,000."</span></span>

-   <span data-ttu-id="fb6c4-112">"Администраторы могут изменять что угодно.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-112">"Administrators can change anything.</span></span> <span data-ttu-id="fb6c4-113">Все остальные могут только читать ".</span><span class="sxs-lookup"><span data-stu-id="fb6c4-113">Everyone else can only read."</span></span>

-   <span data-ttu-id="fb6c4-114">«Project One Employees может получить доступ к определенной базе данных.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-114">"Project One employees can access a certain database.</span></span> <span data-ttu-id="fb6c4-115">Никто другой не может».</span><span class="sxs-lookup"><span data-stu-id="fb6c4-115">No one else can."</span></span>

<span data-ttu-id="fb6c4-116">Пользователи могут естественным образом попадать в несколько ролей в зависимости от того, как роли моделируют организационную структуру бизнеса.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-116">Users might naturally fall into multiple roles, depending on how the roles model the organizational structure of a business.</span></span>

<span data-ttu-id="fb6c4-117">Однако роли плохо работают, когда решение о доступе к системе безопасности замещается на характеристиках определенного фрагмента данных.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-117">However, roles don't work very well when a security access decision rests on the characteristics of a particular piece of data.</span></span> <span data-ttu-id="fb6c4-118">Например, можно было бы использовать роли для отражения сложных связей пользователей и данных, таких как следующие:</span><span class="sxs-lookup"><span data-stu-id="fb6c4-118">For example, it would be difficult to use roles to reflect complicated user-data relationships such as the following:</span></span>

-   <span data-ttu-id="fb6c4-119">«Конкретный менеджер может обращаться к данным о персонале только для своих отчетов».</span><span class="sxs-lookup"><span data-stu-id="fb6c4-119">"A particular manager can access personnel data for only her reports."</span></span>

-   <span data-ttu-id="fb6c4-120">"Пользователь Джо может найти свой баланс учетной записи".</span><span class="sxs-lookup"><span data-stu-id="fb6c4-120">"Joe Consumer can look up his account balance."</span></span>

<span data-ttu-id="fb6c4-121">В таких случаях проверка безопасности часто должна выполняться в самой базе данных, где проще учитывать характеристики присущей данных, к которым осуществляется доступ.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-121">In such cases, security checking must often be done at the database itself, where it is easier to take into account innate characteristics of the data being accessed.</span></span> <span data-ttu-id="fb6c4-122">Это означает, что необходимо использовать *олицетворение* для передачи удостоверения клиента вместе с базой данных и позволить базе данных проверить запрос.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-122">This means that you must use *impersonation* to pass the client identity along to the database and let the database validate the request.</span></span> <span data-ttu-id="fb6c4-123">Это может повлиять на производительность и может повлиять на архитектуру приложения, например, при открытии подключения с определенным удостоверением пользователя может не работать пул соединений.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-123">This can affect performance and can affect the application's design—for example, connection pooling might not work when a connection is opened under a particular user identity.</span></span> <span data-ttu-id="fb6c4-124">Сведения о связанных проблемах см. в статье [Безопасность многоуровневого приложения](multi-tier-application-security.md) и [олицетворение и делегирование клиента](client-impersonation-and-delegation.md).</span><span class="sxs-lookup"><span data-stu-id="fb6c4-124">For a discussion of issues involved, see [Multi-Tier Application Security](multi-tier-application-security.md) and [Client Impersonation and Delegation](client-impersonation-and-delegation.md).</span></span>

## <a name="complexity-and-scalability-of-a-role-based-authorization-policy"></a><span data-ttu-id="fb6c4-125">Сложность и масштабируемость политики авторизации Role-Based</span><span class="sxs-lookup"><span data-stu-id="fb6c4-125">Complexity and Scalability of a Role-Based Authorization Policy</span></span>

<span data-ttu-id="fb6c4-126">Любая политика безопасности, которую вы перемещаете, будет действовать только при ее реализации системными администраторами, развернув приложение.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-126">Whatever security policy you put in place will be only as effective as its implementation by the system administrators deploying your application.</span></span> <span data-ttu-id="fb6c4-127">Если администраторы делают ошибки при назначении пользователям правильных ролей в соответствии с политикой безопасности, политика не будет работать должным образом.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-127">If administrators make mistakes in assigning users to the correct roles according to your security policy, your policy won't work as intended.</span></span> <span data-ttu-id="fb6c4-128">Вероятнее всего, проблемы возникают в следующих случаях.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-128">Problems are most likely to occur under the following circumstances:</span></span>

-   <span data-ttu-id="fb6c4-129">Вы сделали очень замысловатую политику на основе ролей с множеством ролей и пользователей, сопоставленных с множеством ролей.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-129">You have made a very intricate role-based policy, with many roles and users mapping to numerous roles.</span></span>
-   <span data-ttu-id="fb6c4-130">Вы создаете роли с неоднозначными критериями, которые должны принадлежать к ним.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-130">You create roles with ambiguous criteria for who should belong to them.</span></span>
-   <span data-ttu-id="fb6c4-131">На сайте, на котором установлено приложение, много пользователей, и пользователи часто перемещаются в пределах организации, изменяя их по отношению к созданным вами ролям.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-131">There are many users at the site where the application is installed, and users are frequently moving within the organization, changing with respect to the roles you have created.</span></span>
-   <span data-ttu-id="fb6c4-132">Существует множество администраторов на сайте, где установлено приложение, с разделением обязанностей, чтобы администратор, знакомый с требованиями безопасности вашего приложения, не знаком с большими группами пользователей, которые должны его использовать.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-132">There are many administrators at the site where the application is installed, with division of responsibilities, so that an administrator familiar with the security requirements of your application is potentially unfamiliar with the large groups of users that must use it.</span></span> <span data-ttu-id="fb6c4-133">Это конкретная проблема по мере перемещения пользователей в пределах организации — такая информация должна быть хорошо передана.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-133">This is of particular concern as users move within the organization—such information needs to be well communicated.</span></span>

<span data-ttu-id="fb6c4-134">Кроме того, по мере увеличения количества ролей, назначенных приложению, это занимает время, затрачиваемое COM+ на поиск членства вызывающего участника в этих ролях, что может снизить производительность.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-134">Additionally, as the number of roles assigned to an application increases, so does the amount of time COM+ must spend looking up caller membership in those roles, with a likely degradation in performance.</span></span>

<span data-ttu-id="fb6c4-135">Для управления сложностью и устранения этих проблем можно использовать следующие рекомендации.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-135">To manage complexity and mitigate these concerns, you can use the following guidelines:</span></span>

-   <span data-ttu-id="fb6c4-136">Выберите имена ролей, которые являются самоописательными.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-136">Choose role names that are self-descriptive.</span></span> <span data-ttu-id="fb6c4-137">Сделайте его очевидным, насколько возможно, пользователи должны принадлежать ролям.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-137">Make it as obvious as possible which users should belong to which roles.</span></span>
-   <span data-ttu-id="fb6c4-138">Сделайте политику на основе ролей как можно более простой (и не упростите ее).</span><span class="sxs-lookup"><span data-stu-id="fb6c4-138">Make your role-based policy as simple as possible (and no simpler).</span></span> <span data-ttu-id="fb6c4-139">Выбирайте как можно меньше ролей, сохраняя действующую политику.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-139">Choose as few roles as you can, while maintaining an effective policy.</span></span>
-   <span data-ttu-id="fb6c4-140">Явно Задокументируйте политику на основе ролей, созданную для администраторов, независимо от того, является ли членство в роли очевидным (для вас).</span><span class="sxs-lookup"><span data-stu-id="fb6c4-140">Clearly document the role-based policy that you construct for administrators, whether role membership is obvious (to you).</span></span> <span data-ttu-id="fb6c4-141">В частности, используйте поле Описание, доступное для каждой роли, чтобы описать назначение роли.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-141">In particular, use the description field available for each role to describe the intent of the role.</span></span> <span data-ttu-id="fb6c4-142">Если не удается описать как обычно, кто должен принадлежать к роли в нескольких предложениях, вероятно, это слишком сложно.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-142">If you can't describe generally who should belong to the role in a couple of sentences, it is probably too complicated.</span></span>
-   <span data-ttu-id="fb6c4-143">Настоятельно рекомендуем администраторам приложения заполнять роли группами пользователей, а не отдельными пользователями.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-143">Strongly suggest that administrators of your application populate roles with user groups instead of individual users.</span></span> <span data-ttu-id="fb6c4-144">Это гораздо более масштабируемое решение.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-144">This is a much more scalable solution.</span></span> <span data-ttu-id="fb6c4-145">Это упрощает перераспределение или удаление пользователей при перемещении в пределах организации и изолирует администраторов от определенных объемов информации и проблем связи.</span><span class="sxs-lookup"><span data-stu-id="fb6c4-145">It makes it easier to reassign or remove users as they move within the organization and insulates administrators from a certain amount of oversight and problems in communication.</span></span>

## <a name="related-topics"></a><span data-ttu-id="fb6c4-146">См. также</span><span class="sxs-lookup"><span data-stu-id="fb6c4-146">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="fb6c4-147">Границы безопасности</span><span class="sxs-lookup"><span data-stu-id="fb6c4-147">Security Boundaries</span></span>](security-boundaries.md)
</dt> <dt>

[<span data-ttu-id="fb6c4-148">Сведения о контексте вызова безопасности</span><span class="sxs-lookup"><span data-stu-id="fb6c4-148">Security Call Context Information</span></span>](security-call-context-information.md)
</dt> <dt>

[<span data-ttu-id="fb6c4-149">Свойство контекста безопасности</span><span class="sxs-lookup"><span data-stu-id="fb6c4-149">Security Context Property</span></span>](security-context-property.md)
</dt> <dt>

[<span data-ttu-id="fb6c4-150">Использование ролей для авторизации клиентов</span><span class="sxs-lookup"><span data-stu-id="fb6c4-150">Using Roles for Client Authorization</span></span>](using-roles-for-client-authorization.md)
</dt> </dl>

 

 



