---
description: Существуют особые соображения, касающиеся настройки безопасности на основе ролей и проверки подлинности для библиотечных приложений.
ms.assetid: 1117ac64-653d-4640-97cd-f37b0949dc57
title: Настройка безопасности для библиотечных приложений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 102d6a0f102bfd19da0073bca14df8a8211203b1
ms.sourcegitcommit: bf526e267d3991892733bdd229c66d5365cf244a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2021
ms.locfileid: "103999816"
---
# <a name="configuring-security-for-library-applications"></a><span data-ttu-id="e549b-103">Настройка безопасности для библиотечных приложений</span><span class="sxs-lookup"><span data-stu-id="e549b-103">Configuring Security for Library Applications</span></span>

<span data-ttu-id="e549b-104">Существуют особые соображения, касающиеся настройки безопасности на основе ролей и проверки подлинности для библиотечных приложений.</span><span class="sxs-lookup"><span data-stu-id="e549b-104">There are special considerations in configuring role-based security and authentication for library applications.</span></span>

## <a name="enabling-or-disabling-authentication"></a><span data-ttu-id="e549b-105">Включение или отключение проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="e549b-105">Enabling or Disabling Authentication</span></span>

<span data-ttu-id="e549b-106">Один из факторов, которые следует учитывать, заключается в том, что вызывающие объекты приложения библиотеки должны подвергаться проверкам безопасности на уровне процесса хост-процесса, то есть включать или отключать проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="e549b-106">One of the factors to consider is whether callers of the library application should be subject to the process-level security checks of the hosting process—that is, whether to enable or disable authentication.</span></span>

<span data-ttu-id="e549b-107">Например, если приложение библиотеки будет размещено в браузере, может потребоваться получить обратные вызовы, не прошедшие проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="e549b-107">For example, if the library application will be hosted by a browser, it might need to receive unauthenticated callbacks.</span></span> <span data-ttu-id="e549b-108">Чтобы решить эту необходимость, можно отключить проверку подлинности, чтобы ведущий процесс не выполнял проверку безопасности для вызывающих объектов приложения библиотеки.</span><span class="sxs-lookup"><span data-stu-id="e549b-108">To address this need, you can disable authentication so that the hosting process does not perform security checks for callers of the library application.</span></span> <span data-ttu-id="e549b-109">При отключении проверки подлинности приложение библиотеки эффективно проходит проверку подлинности — все вызовы будут выполнены успешно.</span><span class="sxs-lookup"><span data-stu-id="e549b-109">When you disable authentication, the library application effectively goes unauthenticated—all calls to it will succeed.</span></span> <span data-ttu-id="e549b-110">Вызывающие объекты приложения библиотеки не подчиняются проверкам безопасности ведущего процесса.</span><span class="sxs-lookup"><span data-stu-id="e549b-110">Callers of the library application are not subject to the security checks of the hosting process.</span></span> <span data-ttu-id="e549b-111">По сути, приложение библиотеки помечается как "не прошедшие проверку подлинности", а проверки безопасности пропускаются для вызовов к приложению библиотеки.</span><span class="sxs-lookup"><span data-stu-id="e549b-111">Basically, the library application is tagged as "unauthenticated", and security checks are omitted for calls to the library application.</span></span>

<span data-ttu-id="e549b-112">Сведения о том, как включить или отключить проверку подлинности, см. в разделе Включение проверки подлинности [для библиотечного приложения](enabling-authentication-for-a-library-application.md).</span><span class="sxs-lookup"><span data-stu-id="e549b-112">For information about how to enable or disable authentication, see [Enabling Authentication for a Library Application](enabling-authentication-for-a-library-application.md).</span></span>

## <a name="enforcing-role-checks"></a><span data-ttu-id="e549b-113">Принудительная проверка ролей</span><span class="sxs-lookup"><span data-stu-id="e549b-113">Enforcing Role Checks</span></span>

<span data-ttu-id="e549b-114">Другое решение заключается в том, должно ли приложение библиотеки использовать [безопасность на основе ролей](role-based-security-administration.md).</span><span class="sxs-lookup"><span data-stu-id="e549b-114">Another decision to make is whether the library application should use [role-based security](role-based-security-administration.md).</span></span> <span data-ttu-id="e549b-115">Если используется безопасность на основе ролей, для выполнения проверок доступа необходимо использовать безопасность на уровне компонентов. Роли, назначенные приложению библиотеки, не отражаются в дескрипторе безопасности процесса.</span><span class="sxs-lookup"><span data-stu-id="e549b-115">If role-based security is used, you must be using component-level security for any access checks to be carried out. The roles assigned to the library application are not reflected in the process security descriptor.</span></span> <span data-ttu-id="e549b-116">Единственной авторизацией, которую может контролировать приложение библиотеки, является уровень компонента.</span><span class="sxs-lookup"><span data-stu-id="e549b-116">The only authorization that the library application can control is at the component level.</span></span> <span data-ttu-id="e549b-117">Дополнительные сведения о безопасности на уровне компонентов см. в разделе [границы безопасности](security-boundaries.md).</span><span class="sxs-lookup"><span data-stu-id="e549b-117">For more information about component-level security, see [Security Boundaries](security-boundaries.md).</span></span>

<span data-ttu-id="e549b-118">Сведения о настройке безопасности на уровне компонентов см. в разделе [Настройка уровня безопасности для проверок доступа](setting-a-security-level-for-access-checks.md).</span><span class="sxs-lookup"><span data-stu-id="e549b-118">To see how to set component-level security, see [Setting a Security Level for Access Checks](setting-a-security-level-for-access-checks.md).</span></span>

## <a name="configuration-scenarios"></a><span data-ttu-id="e549b-119">Сценарии настройки</span><span class="sxs-lookup"><span data-stu-id="e549b-119">Configuration Scenarios</span></span>

<span data-ttu-id="e549b-120">Чтобы лучше разобраться в последствиях принятия решения о том, следует ли приложению библиотеки использовать безопасность на основе ролей и следует ли выполнять проверку подлинности приложения библиотеки, учитывайте следующие сценарии.</span><span class="sxs-lookup"><span data-stu-id="e549b-120">To better understand the implications of deciding whether the library application should use role-based security and whether the library application should be unauthenticated, consider the following scenarios:</span></span>

-   <span data-ttu-id="e549b-121">**Проверка подлинности включена, и используется безопасность на основе ролей.**</span><span class="sxs-lookup"><span data-stu-id="e549b-121">**Authentication is enabled, and role-based security is used.**</span></span> <span data-ttu-id="e549b-122">В этом сценарии проверки безопасности выполняются ведущим процессом, а некоторым вызывающим объектам отказано в доступе на уровне процесса.</span><span class="sxs-lookup"><span data-stu-id="e549b-122">In this scenario, security checks are made by the hosting process and some callers are denied access at the process level.</span></span> <span data-ttu-id="e549b-123">Кроме того, проверка ролей выполняется на уровне приложения библиотеки, поэтому некоторым вызывающим объектам, которые делают его через проверку безопасности на уровне процесса, запрещается доступ к приложению библиотеки при проверке членства в роли.</span><span class="sxs-lookup"><span data-stu-id="e549b-123">Also, role checking is done at the library application level so that some callers who make it through the process-level security check are denied access to the library application when role membership is checked.</span></span> <span data-ttu-id="e549b-124">Это обычный сценарий для приложения библиотеки COM+, использующего безопасность на основе ролей.</span><span class="sxs-lookup"><span data-stu-id="e549b-124">This is the usual scenario for a COM+ library application that uses role-based security.</span></span>

    <span data-ttu-id="e549b-125">На следующем рисунке показан сценарий, в котором включена проверка подлинности и используется проверка ролей.</span><span class="sxs-lookup"><span data-stu-id="e549b-125">The following illustration shows the scenario where authentication is enabled and role checking is used.</span></span>

    ![Схема, показывающая процесс проверки подлинности в хост-процессе.](images/18004ed7-e95e-4c66-9e17-f163cdeefd71.png)

-   <span data-ttu-id="e549b-127">**Проверка подлинности включена, а безопасность на основе ролей не используется.**</span><span class="sxs-lookup"><span data-stu-id="e549b-127">**Authentication is enabled, and role-based security is not used.**</span></span> <span data-ttu-id="e549b-128">В этом сценарии проверки безопасности выполняются на уровне процесса, но членство в роли не проверяется на уровне приложения библиотеки.</span><span class="sxs-lookup"><span data-stu-id="e549b-128">In this scenario, security checks are done at the process level but role membership is not checked at the library application level.</span></span> <span data-ttu-id="e549b-129">Таким образом, любой вызывающий объект приложения библиотеки, который делает его с помощью проверки безопасности на уровне процесса, получает доступ к приложению библиотеки, так как членство в роли не проверяется.</span><span class="sxs-lookup"><span data-stu-id="e549b-129">Therefore, any caller of the library application that makes it through the process-level security check will be given access to the library application because role membership is not being checked.</span></span> <span data-ttu-id="e549b-130">Такая ситуация возникает, когда приложение COM, которое не использует безопасность на основе ролей, переносится в приложение библиотеки COM+.</span><span class="sxs-lookup"><span data-stu-id="e549b-130">This situation would exist when a COM application that doesn't use role-based security is migrated to a COM+ library application.</span></span>

    <span data-ttu-id="e549b-131">На следующем рисунке показан сценарий, в котором включена проверка подлинности, а проверка роли не используется.</span><span class="sxs-lookup"><span data-stu-id="e549b-131">The following illustration shows the scenario where authentication is enabled and role checking is not being used.</span></span>

    ![Схема, показывающая проверку подлинности на уровне процесса для библиотечного приложения в рамках процесса узла.](images/3e5a64c6-39a9-4ff7-b084-8396fe779210.png)

-   <span data-ttu-id="e549b-133">**Проверка подлинности отключена, и используется безопасность на основе ролей.**</span><span class="sxs-lookup"><span data-stu-id="e549b-133">**Authentication is disabled, and role-based security is used.**</span></span> <span data-ttu-id="e549b-134">В этом сценарии проверки безопасности выполняются на уровне процесса, но вызывающие объекты приложения библиотеки не проходят проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="e549b-134">In this scenario, security checks are being done at the process level but callers to the library application are unauthenticated.</span></span> <span data-ttu-id="e549b-135">По сути, вызывающие приложения библиотеки будут исключены из проверки безопасности на уровне процесса.</span><span class="sxs-lookup"><span data-stu-id="e549b-135">In effect, callers of the library application are exempt from the process-level security check.</span></span> <span data-ttu-id="e549b-136">Поскольку проверка ролей включена, членство в роли только определяет, кому предоставляется доступ к приложению библиотеки.</span><span class="sxs-lookup"><span data-stu-id="e549b-136">Because role checking is enabled, role membership alone determines who is given access to the library application.</span></span> <span data-ttu-id="e549b-137">Этот сценарий может быть уместным, если проверка безопасности, которая будет выполнена ведущим процессом, является слишком ограничивающей, но необходимо иметь некоторые ограничения на доступ к приложению библиотеки или к определенным интерфейсам или методам.</span><span class="sxs-lookup"><span data-stu-id="e549b-137">This scenario might be appropriate when the security check that would be done by the hosting process is too restrictive but you need to have some access restriction on the library application or on specific interfaces or methods.</span></span> <span data-ttu-id="e549b-138">Этот сценарий позволяет эффективно отключать безопасность процессов и по-прежнему иметь соответствующие проверки доступа на уровне, используя безопасность на основе ролей.</span><span class="sxs-lookup"><span data-stu-id="e549b-138">This scenario enables you to effectively turn off process security and still have an appropriate level access checks using role-based security.</span></span>

    <span data-ttu-id="e549b-139">Сценарий, в котором отключена проверка подлинности и используется проверка роли, показан на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="e549b-139">The scenario where authentication is disabled and role checking is being used is shown in the following illustration.</span></span>

    ![Схема, отображающая "Проверка членства в роли" в приложении библиотеки в процессе узла.](images/e0cc604c-ba86-4087-9a74-1b6fdce8d69a.png)

-   <span data-ttu-id="e549b-141">**Проверка подлинности отключена, а безопасность на основе ролей не используется.**</span><span class="sxs-lookup"><span data-stu-id="e549b-141">**Authentication is disabled, and role-based security is not used.**</span></span> <span data-ttu-id="e549b-142">В этом сценарии проверки безопасности по-прежнему выполняются на уровне процесса, но, как в предыдущем сценарии, вызывающие объекты приложения библиотеки всегда проходят эту проверку безопасности.</span><span class="sxs-lookup"><span data-stu-id="e549b-142">In this scenario, security checks are still done at the process level but, as in the preceding scenario, callers of the library application always pass this security check.</span></span> <span data-ttu-id="e549b-143">Так как проверка роли также отключена, членство в роли не проверяется на уровне приложения библиотеки.</span><span class="sxs-lookup"><span data-stu-id="e549b-143">Because role checking is also disabled, role membership is not checked at the library application level.</span></span> <span data-ttu-id="e549b-144">По сути, любой пользователь может вызвать приложение библиотеки.</span><span class="sxs-lookup"><span data-stu-id="e549b-144">Essentially, anyone can call the library application.</span></span> <span data-ttu-id="e549b-145">Этот сценарий следует выбирать, если COM-объекту требуется получить непроверенные обратные вызовы, как это может быть в случае с элементом управления ActiveX, размещенным в Internet Explorer, и с оснасткой консоли управления (MMC).</span><span class="sxs-lookup"><span data-stu-id="e549b-145">This scenario should be chosen when your COM object needs to receive unauthenticated callbacks, as might be the case with an ActiveX control hosted by Internet Explorer and with a Microsoft Management Console snap-in.</span></span> <span data-ttu-id="e549b-146">Конечно, этот COM-объект должен быть доверенным для правильной работы при получении вызовов без проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="e549b-146">Of course, this COM object must be trusted to behave appropriately when receiving unauthenticated calls.</span></span> <span data-ttu-id="e549b-147">Например, он не должен обращаться к произвольным файлам от имени своих вызывающих объектов.</span><span class="sxs-lookup"><span data-stu-id="e549b-147">For example, it should not access arbitrary files on behalf of its callers.</span></span>

    <span data-ttu-id="e549b-148">Сценарий, в котором отключена проверка подлинности, а проверка роли не используется, показана на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="e549b-148">The scenario where authentication is disabled and role checking is not being used is shown in the following illustration.</span></span>

    ![Схема, на которой показаны вызовы приложения библиотеки, не прошедшие проверку подлинности в процессе узла.](images/df3c9a02-52dd-4e07-a5f1-76cef0dab5cb.png)

<span data-ttu-id="e549b-150">После принятия решения о включении или отключении проверки подлинности для приложения библиотеки COM+ см. пошаговые инструкции по отключению (или включению) проверки подлинности с помощью средства администрирования "службы компонентов" в статье Включение проверки подлинности для [библиотечного приложения](enabling-authentication-for-a-library-application.md) .</span><span class="sxs-lookup"><span data-stu-id="e549b-150">After you have decided whether to enable or disable authentication for your COM+ library application, see [Enabling Authentication for a Library Application](enabling-authentication-for-a-library-application.md) for a step-by-step procedure that explains how to disable (or enable) authentication using the Component Services administrative tool.</span></span> <span data-ttu-id="e549b-151">Если приложение библиотеки будет использовать безопасность на основе ролей, см. раздел [Настройка безопасности Role-Based](configuring-role-based-security.md).</span><span class="sxs-lookup"><span data-stu-id="e549b-151">If your library application will use role-based security, see [Configuring Role-Based Security](configuring-role-based-security.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="e549b-152">См. также</span><span class="sxs-lookup"><span data-stu-id="e549b-152">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e549b-153">Безопасность библиотечных приложений</span><span class="sxs-lookup"><span data-stu-id="e549b-153">Library Application Security</span></span>](library-application-security.md)
</dt> </dl>

 

 



