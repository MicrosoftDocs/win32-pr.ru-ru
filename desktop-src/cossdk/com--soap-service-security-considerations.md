---
description: Вопросы безопасности службы COM+ SOAP
ms.assetid: c4f7744c-ff57-4d9d-8632-7e5bbb73449a
title: Вопросы безопасности службы COM+ SOAP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a238860e154e9928672a64ef44f9db37e9c8ad2c
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103896402"
---
# <a name="com-soap-service-security-considerations"></a><span data-ttu-id="50237-103">Вопросы безопасности службы COM+ SOAP</span><span class="sxs-lookup"><span data-stu-id="50237-103">COM+ SOAP Service Security Considerations</span></span>

<span data-ttu-id="50237-104">Служба COM+ SOAP зависит от веб-сервера IIS для обеспечения безопасности.</span><span class="sxs-lookup"><span data-stu-id="50237-104">The COM+ SOAP service depends on the IIS web server for security.</span></span> <span data-ttu-id="50237-105">Даже в [режиме активируемых клиентом объектов](accessing-xml-web-services-in-cao-mode.md)com+ RPC не передает удостоверение клиента и поэтому не может использовать безопасность на основе ролей или другие функции безопасности, предоставляемые DCOM.</span><span class="sxs-lookup"><span data-stu-id="50237-105">Even in [client-activated object mode](accessing-xml-web-services-in-cao-mode.md), a COM+ RPC does not transmit the client identity and therefore cannot make use of role-based security or any other security feature provided by DCOM.</span></span> <span data-ttu-id="50237-106">Если вы хотите защитить конфиденциальность данных, передаваемых в веб-службу XML и из нее, или для защиты веб-службы XML от несанкционированного доступа, можно настроить службы IIS для ограничения доступа к веб-службе XML на основе IP-адреса клиентов или потребовать, чтобы клиент выдавал цифровой сертификат для проверки его подлинности.</span><span class="sxs-lookup"><span data-stu-id="50237-106">If you want to help protect the privacy of data transmitted to and from your XML web service, or to help protect your XML web service from unauthorized access, you can configure IIS to limit access to an XML web service based on a clients IP address or to require a client to present a digital certificate to verify its identity.</span></span> <span data-ttu-id="50237-107">Если вы не ограничиваете доступ, любой клиент, который может обмениваться данными с веб-сервером, может получить доступ к веб-службе XML.</span><span class="sxs-lookup"><span data-stu-id="50237-107">If you do not limit access, any client that can communicate with your web server can access your XML web service.</span></span>

<span data-ttu-id="50237-108">Службы IIS можно настроить для шифрования связи веб-службы XML с клиентами с помощью протоколов SSL или TLS шифрования с открытым ключом.</span><span class="sxs-lookup"><span data-stu-id="50237-108">You can configure IIS to encrypt your XML web service communications with clients by using public key encryption SSL or TLS protocols.</span></span> <span data-ttu-id="50237-109">Если шифрование SOAP-сообщений не выполняется, то обмен данными между клиентом и сервером может осуществляться третьим лицом, у которого есть доступ к любой сети, через которую проходит обмен данными по протоколу SOAP. в зависимости от топологии сети это может быть небольшая локальная сеть или Интернет.</span><span class="sxs-lookup"><span data-stu-id="50237-109">If you do not encrypt SOAP communications, data exchanged between a client and server could be observed by a third party with access to any network over which the SOAP communication travels; depending on network topology, this might be a small LAN or it might be the Internet.</span></span>

<span data-ttu-id="50237-110">По умолчанию незашифрованные SOAP-соединения получаются через HTTP порт (80), а зашифрованные сообщения SOAP принимаются по HTTPS-порту (443).</span><span class="sxs-lookup"><span data-stu-id="50237-110">By default, unencrypted SOAP communications are received at the HTTP port (80) and encrypted SOAP communications are received at the HTTPS port (443).</span></span> <span data-ttu-id="50237-111">Для успешного доступа клиента к веб-службе XML все брандмауэры между клиентом и сервером должны быть настроены таким образом, чтобы пакеты TCP SYN достигли соответствующего порта сервера.</span><span class="sxs-lookup"><span data-stu-id="50237-111">For a client to successfully access an XML web service, any firewalls between the client and the server must be configured to allow TCP SYN packets to reach the appropriate server port.</span></span> <span data-ttu-id="50237-112">И наоборот, чтобы ограничить доступ к веб-службам XML, администратор брандмауэра может закрыть эти порты.</span><span class="sxs-lookup"><span data-stu-id="50237-112">Conversely, to limit access to XML web services, a firewall administrator may choose to close these ports.</span></span>

<span data-ttu-id="50237-113">Параметры безопасности по умолчанию для COM-компонента, предоставляемого в виде XML, различаются в зависимости от установленной версии платформы Microsoft .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="50237-113">The default security settings for a COM component exposed as an XML web service differ depending on which version of the Microsoft .NET Framework is installed.</span></span> <span data-ttu-id="50237-114">Если установлена версия 1,0, веб-службы XML по умолчанию являются небезопасными. все вызовы принимаются и шифрование не используется.</span><span class="sxs-lookup"><span data-stu-id="50237-114">If version 1.0 is installed, XML web services are nonsecure by default; all calls are accepted and no encryption is used.</span></span> <span data-ttu-id="50237-115">Если установлена версия 1,1 или более поздняя, веб-службы XML защищены по умолчанию. вызывающие объекты должны пройти проверку подлинности и обязательное шифрование.</span><span class="sxs-lookup"><span data-stu-id="50237-115">If version 1.1 or later is installed, XML web services are secure by default; callers must be authenticated and encryption is required.</span></span>

<span data-ttu-id="50237-116">Защищенная веб-служба XML не поддерживает ВКО доступ через WSDL.</span><span class="sxs-lookup"><span data-stu-id="50237-116">A secured XML web service does not support WKO access via WSDL.</span></span> <span data-ttu-id="50237-117">Вместо этого клиенты, которые установили платформа .NET Framework версии 1,1, могут вызывать ее в режиме Као.</span><span class="sxs-lookup"><span data-stu-id="50237-117">Instead, clients that have installed the .NET Framework version 1.1 can call it in CAO mode.</span></span> <span data-ttu-id="50237-118">Если сторонним клиентам требуется доступ к веб-службе XML через WSDL, необходимо разрешить анонимный доступ.</span><span class="sxs-lookup"><span data-stu-id="50237-118">If third-party clients need to access your XML web service via WSDL, you must allow anonymous access.</span></span>

<span data-ttu-id="50237-119">Компонент COM, предоставляемый как веб-служба XML, по умолчанию выполняется с разрешениями анонимного пользователя (а не с разрешениями его вызывающего).</span><span class="sxs-lookup"><span data-stu-id="50237-119">A COM component exposed as an XML web service runs by default with the permissions of the anonymous user (not with the permissions of its caller).</span></span> <span data-ttu-id="50237-120">Можно настроить IIS для запуска веб-службы XML от имени другого пользователя. Это иногда может потребоваться, поскольку компонент использует файлы или другие ресурсы, к которым анонимный пользователь не имеет доступа.</span><span class="sxs-lookup"><span data-stu-id="50237-120">You can configure IIS to run the XML web service as a different user; this may sometimes be necessary because your component uses files or other resources to which the anonymous user does not have access.</span></span> <span data-ttu-id="50237-121">Тем не менее, следует всегда пытаться запустить компонент с минимально возможным количеством привилегий, чтобы ограничить ущерб, который может вызвать вредоносный вызывающий объект.</span><span class="sxs-lookup"><span data-stu-id="50237-121">Nevertheless, you should always try to run your component with the fewest privileges possible, to limit the damage a malicious caller might cause.</span></span>

> [!Note]  
> <span data-ttu-id="50237-122">Так как метод, предоставляемый через веб-службу XML, потенциально может быть предоставлен вредоносным вызывающим объектам, всегда следует обязательно проверять все входные параметры, от которых он зависит.</span><span class="sxs-lookup"><span data-stu-id="50237-122">Because a method you exposed via an XML web service could potentially be exposed to malicious callers, you should always be sure to validate any input parameters on which it depends.</span></span>

 

<span data-ttu-id="50237-123">Подробные инструкции по настройке параметров безопасности веб-службы XML см. в разделе [Защита веб-служб XML](securing-xml-web-services.md).</span><span class="sxs-lookup"><span data-stu-id="50237-123">For detailed instructions on how to configure specific XML web service security settings, see [Securing XML Web Services](securing-xml-web-services.md).</span></span>

<span data-ttu-id="50237-124">**Преобразование защищенного приложения SOAP в незащищенное приложение SOAP**</span><span class="sxs-lookup"><span data-stu-id="50237-124">**To convert a secure SOAP application to an unsecure SOAP application**</span></span>

1.  <span data-ttu-id="50237-125">Откройте средство администрирования службы IIS (IIS).</span><span class="sxs-lookup"><span data-stu-id="50237-125">Open the Internet Information Services (IIS) administration tool.</span></span>
2.  <span data-ttu-id="50237-126">Выберите виртуальный каталог для приложения и откройте диалоговое окно **Свойства** .</span><span class="sxs-lookup"><span data-stu-id="50237-126">Locate the virtual directory for the application and open the **Properties** dialog box.</span></span>
3.  <span data-ttu-id="50237-127">Установите флажок **включить страницу содержимого по умолчанию** на вкладке **документы** .</span><span class="sxs-lookup"><span data-stu-id="50237-127">Check **Enable default content page** on the **Documents** tab.</span></span>
4.  <span data-ttu-id="50237-128">На вкладке **Безопасность каталога** щелкните **изменить** в разделе **анонимный доступ и управление проверкой подлинности**.</span><span class="sxs-lookup"><span data-stu-id="50237-128">From the **Directory Security** tab click **Edit** under **Anonymous access and authentication control**.</span></span>
5.  <span data-ttu-id="50237-129">Установите флажок **анонимный доступ** , чтобы включить анонимный доступ, и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="50237-129">Check **Anonymous access** to enable anonymous access and click **OK**.</span></span>
6.  <span data-ttu-id="50237-130">Щелкните **изменить** в разделе **безопасные подключения**.</span><span class="sxs-lookup"><span data-stu-id="50237-130">Click **Edit** under **Secure communications**.</span></span>
7.  <span data-ttu-id="50237-131">Снимите флажок **обязательное использование безопасного канала (SSL)** .</span><span class="sxs-lookup"><span data-stu-id="50237-131">Uncheck the **Require secure channel (SSL)** checkbox.</span></span>

## <a name="related-topics"></a><span data-ttu-id="50237-132">См. также</span><span class="sxs-lookup"><span data-stu-id="50237-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="50237-133">Общие сведения о службе COM+ SOAP</span><span class="sxs-lookup"><span data-stu-id="50237-133">COM+ SOAP Service Overview</span></span>](com--soap-service-overview.md)
</dt> </dl>

 

 



