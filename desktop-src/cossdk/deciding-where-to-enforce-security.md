---
description: Компромиссы связаны с обеспечением безопасности.
ms.assetid: f01573f3-aae6-400e-bdd9-6f34f4e262f6
title: Выбор места для обеспечения безопасности
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4ac994fb98d50a7e26f1b8142e77dc9ff771f6b2
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104538597"
---
# <a name="deciding-where-to-enforce-security"></a><span data-ttu-id="c9c93-103">Выбор места для обеспечения безопасности</span><span class="sxs-lookup"><span data-stu-id="c9c93-103">Deciding Where to Enforce Security</span></span>

<span data-ttu-id="c9c93-104">Компромиссы связаны с обеспечением безопасности.</span><span class="sxs-lookup"><span data-stu-id="c9c93-104">Trade-offs are inherent in enforcing security.</span></span> <span data-ttu-id="c9c93-105">База данных может быть естественным местом для размещения логики безопасности, учитывая, что в конечном итоге данные являются наиболее важными для защиты.</span><span class="sxs-lookup"><span data-stu-id="c9c93-105">A database can be a natural place to put security logic, given that ultimately that data is the most important thing to protect.</span></span> <span data-ttu-id="c9c93-106">Однако это существенно сказывается на производительности.</span><span class="sxs-lookup"><span data-stu-id="c9c93-106">However, doing so has significant performance implications.</span></span> <span data-ttu-id="c9c93-107">Обеспечение безопасности базы данных может быть очень дорогостоящим, масштабироваться плохо и негибко.</span><span class="sxs-lookup"><span data-stu-id="c9c93-107">Enforcing security at the database can be very expensive, scales poorly, and is inflexible.</span></span>

## <a name="enforcing-security-in-the-middle-tier"></a><span data-ttu-id="c9c93-108">Обеспечение безопасности на среднем уровне</span><span class="sxs-lookup"><span data-stu-id="c9c93-108">Enforcing Security in the Middle Tier</span></span>

<span data-ttu-id="c9c93-109">Общее правило для выполнения масштабируемых многоуровневых приложений с помощью COM+ заключается в том, что при любой возможности необходимо обеспечить детальную безопасность в приложении COM+ на среднем уровне.</span><span class="sxs-lookup"><span data-stu-id="c9c93-109">The general rule to follow with scalable multi-tier applications using COM+ is that, whenever possible, you should enforce detailed security in the COM+ application at the middle tier.</span></span> <span data-ttu-id="c9c93-110">Это позволит вам полностью использовать масштабируемые службы, предоставляемые COM+.</span><span class="sxs-lookup"><span data-stu-id="c9c93-110">Doing so enables you to fully leverage the scalable services provided by COM+.</span></span> <span data-ttu-id="c9c93-111">Применяйте проверку подлинности в базе данных только в том случае, если вам абсолютно нужно, и полностью Взгляните на производительность.</span><span class="sxs-lookup"><span data-stu-id="c9c93-111">Enforce authentication at the database only when you absolutely need to, and fully weigh the performance implications of doing so.</span></span>

<span data-ttu-id="c9c93-112">Оптимальной ситуацией является возможность защитить таблицы базы данных, чтобы приложение COM+ могло обращаться к ним по собственному идентификатору.</span><span class="sxs-lookup"><span data-stu-id="c9c93-112">The optimal situation is to be able to secure database tables so that the COM+ application is able to access them under its own identity.</span></span> <span data-ttu-id="c9c93-113">База данных должна просто проверять подлинность приложения COM+ и доверять ему для правильной проверки подлинности и авторизации клиентов, которые будут получать доступ к данным.</span><span class="sxs-lookup"><span data-stu-id="c9c93-113">The database should just authenticate the COM+ application and trust it to correctly authenticate and authorize clients that will be accessing data.</span></span> <span data-ttu-id="c9c93-114">Ниже приведены преимущества этого подхода.</span><span class="sxs-lookup"><span data-stu-id="c9c93-114">The benefits of this approach are as follows:</span></span>

-   <span data-ttu-id="c9c93-115">Он обеспечивает объединение соединений между всеми клиентами, так как соединения полностью универсальны.</span><span class="sxs-lookup"><span data-stu-id="c9c93-115">It enables connection pooling among all clients, as connections are completely generic.</span></span>
-   <span data-ttu-id="c9c93-116">Обычно она оптимизирует доступ к данным, зачастую при масштабировании приложений.</span><span class="sxs-lookup"><span data-stu-id="c9c93-116">It generally optimizes data access, often a problematic choke point when scaling applications.</span></span>
-   <span data-ttu-id="c9c93-117">Это позволяет сократить временные издержки на обеспечение безопасности, особенно если можно использовать декларативную безопасность на основе ролей.</span><span class="sxs-lookup"><span data-stu-id="c9c93-117">It can minimize the logic overhead for enforcing security, particularly if declarative role-based security can be used.</span></span>
-   <span data-ttu-id="c9c93-118">Она обеспечивает большую гибкость в отношении политики безопасности.</span><span class="sxs-lookup"><span data-stu-id="c9c93-118">It can provide great flexibility in a security policy.</span></span> <span data-ttu-id="c9c93-119">Вы можете настроить и повторно настроить его, как описано в разделе [Администрирование безопасности на основе ролей](role-based-security-administration.md).</span><span class="sxs-lookup"><span data-stu-id="c9c93-119">You can configure and reconfigure it easily, as described in [Role-Based Security Administration](role-based-security-administration.md).</span></span>

<span data-ttu-id="c9c93-120">Но, как обсуждалось в [эффективном проектировании ролей](designing-roles-effectively.md), роли могут быть легко и эффективно применены к некоторым связям с данными пользователя, они не являются универсальным решением для решений безопасности.</span><span class="sxs-lookup"><span data-stu-id="c9c93-120">But, as discussed in [Designing Roles Effectively](designing-roles-effectively.md), while roles can be easily and effectively applied to some user-data relationships, they are not a universal solution for security access decisions.</span></span>

## <a name="enforcing-security-at-the-database"></a><span data-ttu-id="c9c93-121">Обеспечение безопасности в базе данных</span><span class="sxs-lookup"><span data-stu-id="c9c93-121">Enforcing Security at the Database</span></span>

<span data-ttu-id="c9c93-122">Несмотря на предпочтительность обеспечения безопасности на среднем уровне, существует ряд причин для обеспечения безопасности базы данных, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="c9c93-122">Despite the preferability of enforcing security at the middle tier, there are a number of reasons to enforce security at the database, such as the following:</span></span>

-   <span data-ttu-id="c9c93-123">У вас нет выбора, возможно, для устаревших причин или, возможно, из-за того, что решение просто не в ваших руках.</span><span class="sxs-lookup"><span data-stu-id="c9c93-123">You don't have a choice, perhaps for legacy reasons or perhaps because the decision is simply not in your hands.</span></span>
-   <span data-ttu-id="c9c93-124">Доступ к базе данных осуществляется множеством приложений, и его безопасность нельзя настроить на основе одного приложения.</span><span class="sxs-lookup"><span data-stu-id="c9c93-124">The database is accessed by a wide variety of applications, and its security can't be configured on the basis of a single application.</span></span>
-   <span data-ttu-id="c9c93-125">Базу данных можно сделать прогнозируемой.</span><span class="sxs-lookup"><span data-stu-id="c9c93-125">A database can be made predictably protected.</span></span> <span data-ttu-id="c9c93-126">Если в базе данных хранятся критически важные для предприятия данные, можно нарисовать тесное кузовом универсал» вокруг ИТ-специалистов и помочь им в ее просмотре.</span><span class="sxs-lookup"><span data-stu-id="c9c93-126">If you keep enterprise-critical data in a database, you can draw a tight wagon around it and help control who gets to see it.</span></span>
-   <span data-ttu-id="c9c93-127">Проверка подлинности исходных клиентов в базе данных дает возможность подробного ведения журнала о том, какие пользователи сделали в базе данных.</span><span class="sxs-lookup"><span data-stu-id="c9c93-127">Authenticating original clients at the database enables detailed logging of who has done what in the database.</span></span>
-   <span data-ttu-id="c9c93-128">Некоторые данные не привязаны к определенным пользователям, и логика выполнения чрезвычайно детализированных решений о доступе может быть наиболее эффективной в самой базе данных, близко к данным.</span><span class="sxs-lookup"><span data-stu-id="c9c93-128">Some data is innately bound to particular users, and the logic of making extremely fine-grained access decisions might be most efficiently carried out at the database itself, close to the data.</span></span>

<span data-ttu-id="c9c93-129">Если у вас есть люкс разработки безопасности базы данных и приложения COM+, большинство этих проблем относятся к характеристикам самих данных и их связи с пользователями, обращающимися к нему.</span><span class="sxs-lookup"><span data-stu-id="c9c93-129">When you do have the luxury of designing the security of the database and the COM+ application in tandem, most of these issues pertain to characteristics of the data itself and its relationship to the users accessing it.</span></span> <span data-ttu-id="c9c93-130">С данными, к которым можно получить доступ с помощью прогнозируемых категорий пользователей, эффективно управлять доступом на среднем уровне с помощью ролей.</span><span class="sxs-lookup"><span data-stu-id="c9c93-130">With data that can be accessed by predictable categories of users, it is efficient to control access in the middle tier using roles.</span></span> <span data-ttu-id="c9c93-131">Благодаря данным, которые тесно привязаны к очень небольшим классам пользователей, эти связи часто должны быть выражены самими данными, поэтому необходимо обеспечить некоторую безопасность в базе данных.</span><span class="sxs-lookup"><span data-stu-id="c9c93-131">With data that is intricately bound to very small classes of users, those relationships must often be expressed with the data itself and hence you must enforce some security at the database.</span></span>

### <a name="performance-implications-of-enforcing-security-at-the-database"></a><span data-ttu-id="c9c93-132">Влияние применения безопасности на базу данных на производительность</span><span class="sxs-lookup"><span data-stu-id="c9c93-132">Performance Implications of Enforcing Security at the Database</span></span>

<span data-ttu-id="c9c93-133">При проверке подлинности или авторизации пользователей в базе данных удостоверение пользователя необходимо распространить в базу данных для поддержки этой службы.</span><span class="sxs-lookup"><span data-stu-id="c9c93-133">If you authenticate or authorize users at the database, the user identity needs to be propagated through to the database to support this.</span></span> <span data-ttu-id="c9c93-134">Если база данных доверяет приложению среднего уровня, можно передать сведения о безопасности пользователя в параметрах.</span><span class="sxs-lookup"><span data-stu-id="c9c93-134">If the database trusts the middle-tier application to do so, it is possible to pass in user security information in parameters.</span></span> <span data-ttu-id="c9c93-135">В противном случае обращение к базе данных должно выполняться с учетной записью пользователя, что означает, что серверное приложение должно олицетворять клиента.</span><span class="sxs-lookup"><span data-stu-id="c9c93-135">Otherwise, the call through to the database must be made under the user's identity, meaning that the server application must impersonate the client.</span></span> <span data-ttu-id="c9c93-136">Это может повлиять на производительность следующим образом:</span><span class="sxs-lookup"><span data-stu-id="c9c93-136">This can have performance implications such as the following:</span></span>

-   <span data-ttu-id="c9c93-137">Олицетворение клиента может быть значительно медленнее, чем вызов непосредственно под удостоверением приложения.</span><span class="sxs-lookup"><span data-stu-id="c9c93-137">Impersonating the client can be much slower than making the call directly under the application identity.</span></span> <span data-ttu-id="c9c93-138">Дополнительные сведения см. в разделе [олицетворение и делегирование клиента](client-impersonation-and-delegation.md).</span><span class="sxs-lookup"><span data-stu-id="c9c93-138">For more detail, see [Client Impersonation and Delegation](client-impersonation-and-delegation.md).</span></span>
-   <span data-ttu-id="c9c93-139">Подключение к базе данных с указанным удостоверением пользователя не может быть помещено в пул.</span><span class="sxs-lookup"><span data-stu-id="c9c93-139">A database connection made under a specific user identity cannot be pooled.</span></span>
-   <span data-ttu-id="c9c93-140">Добавление логики в саму базу данных вызывает риск создания узких мест масштабирования.</span><span class="sxs-lookup"><span data-stu-id="c9c93-140">Adding logic in the database itself runs the risk of creating a scaling bottleneck.</span></span>

## <a name="related-topics"></a><span data-ttu-id="c9c93-141">См. также</span><span class="sxs-lookup"><span data-stu-id="c9c93-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c9c93-142">Основные сценарии защиты данных в многоуровневых приложениях</span><span class="sxs-lookup"><span data-stu-id="c9c93-142">Basic Scenarios for Securing Data in Multi-Tier Applications</span></span>](basic-scenarios-for-securing-data-in-multi-tier-applications.md)
</dt> <dt>

[<span data-ttu-id="c9c93-143">Многоуровневая защита приложений</span><span class="sxs-lookup"><span data-stu-id="c9c93-143">Multi-Tier Application Security</span></span>](multi-tier-application-security.md)
</dt> </dl>

 

 



