---
description: Служба однорангового распространения (Майкрософт) поддерживает функции как для ролей потребителя, так и для сценариев роли издателя.
ms.assetid: 3f5af891-4f5d-4523-8fe6-47fc6ff13b35
title: Функции API однорангового распределения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b2532ad8bf5cbb14e18bd16a14bb1be2d79c1791
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105663316"
---
# <a name="peer-distribution-api-functions"></a><span data-ttu-id="1c303-103">Функции API однорангового распределения</span><span class="sxs-lookup"><span data-stu-id="1c303-103">Peer Distribution API Functions</span></span>

<span data-ttu-id="1c303-104">Служба однорангового распространения (Майкрософт) поддерживает функции как для ролей потребителя, так и для сценариев роли издателя.</span><span class="sxs-lookup"><span data-stu-id="1c303-104">The Microsoft Peer Distribution service supports functions for both consumer role and publisher role scenarios.</span></span>

## <a name="the-following-functions-are-common-in-both-client-and-server-scenarios"></a><span data-ttu-id="1c303-105">Следующие функции являются общими в сценариях "клиент" и "сервер".</span><span class="sxs-lookup"><span data-stu-id="1c303-105">The following functions are common in both "client" and "server" scenarios.</span></span>



| <span data-ttu-id="1c303-106">Общие функции</span><span class="sxs-lookup"><span data-stu-id="1c303-106">Common Functions</span></span>                                                                                       | <span data-ttu-id="1c303-107">Описание</span><span class="sxs-lookup"><span data-stu-id="1c303-107">Description</span></span>                                                                                                     |
|--------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="1c303-108">**пирдистстартуп**</span><span class="sxs-lookup"><span data-stu-id="1c303-108">**PeerDistStartup**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdiststartup)                                                             | <span data-ttu-id="1c303-109">Создает новый экземпляр **\_ \_ обработчика для экземпляра** , который должен быть передан всем остальным интерфейсам API распространения Peer.</span><span class="sxs-lookup"><span data-stu-id="1c303-109">Creates a new **PEERDIST\_INSTANCE\_HANDLE** instance which must be passed to all other Peer Distribution APIs.</span></span> |
| [<span data-ttu-id="1c303-110">**пирдистшутдовн**</span><span class="sxs-lookup"><span data-stu-id="1c303-110">**PeerDistShutdown**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistshutdown)                                                           | <span data-ttu-id="1c303-111">Высвобождает ресурсы, выделенные вызовом метода [**пирдистстартуп**](/windows/desktop/api/PeerDist/nf-peerdist-peerdiststartup).</span><span class="sxs-lookup"><span data-stu-id="1c303-111">Releases resources allocated by the call to [**PeerDistStartup**](/windows/desktop/api/PeerDist/nf-peerdist-peerdiststartup).</span></span>                         |
| [<span data-ttu-id="1c303-112">**пирдистжетстатус**</span><span class="sxs-lookup"><span data-stu-id="1c303-112">**PeerDistGetStatus**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistgetstatus)                                                         | <span data-ttu-id="1c303-113">Возвращает текущее состояние службы распространения Peer.</span><span class="sxs-lookup"><span data-stu-id="1c303-113">Returns the current status of Peer Distribution service.</span></span>                                                        |
| [<span data-ttu-id="1c303-114">**пирдистжетстатусекс**</span><span class="sxs-lookup"><span data-stu-id="1c303-114">**PeerDistGetStatusEx**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistgetstatusex)                                                     | <span data-ttu-id="1c303-115">Возвращает текущее состояние и возможности службы распространения Peer.</span><span class="sxs-lookup"><span data-stu-id="1c303-115">Returns the current status and capabilities of the Peer Distribution service.</span></span>                                   |
| [<span data-ttu-id="1c303-116">**пирдистжетоверлаппедресулт**</span><span class="sxs-lookup"><span data-stu-id="1c303-116">**PeerDistGetOverlappedResult**</span></span>](/windows/desktop/api/peerdist/nf-peerdist-peerdistgetoverlappedresult)                                     | <span data-ttu-id="1c303-117">Возвращает результаты асинхронных операций.</span><span class="sxs-lookup"><span data-stu-id="1c303-117">Retrieves the results of asynchronous operations.</span></span>                                                               |
| [<span data-ttu-id="1c303-118">**пирдистрегистерфорстатусчанженотификатион**</span><span class="sxs-lookup"><span data-stu-id="1c303-118">**PeerDistRegisterForStatusChangeNotification**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistregisterforstatuschangenotification)     | <span data-ttu-id="1c303-119">Запрашивает уведомление вызывающей стороны службы распространения однорангового узла при изменении состояния.</span><span class="sxs-lookup"><span data-stu-id="1c303-119">Requests that the Peer Distribution service notify the caller when a status change occurs.</span></span>                      |
| [<span data-ttu-id="1c303-120">**пирдистрегистерфорстатусчанженотификатионекс**</span><span class="sxs-lookup"><span data-stu-id="1c303-120">**PeerDistRegisterForStatusChangeNotificationEx**</span></span>](/windows/desktop/api/peerdist/nf-peerdist-peerdistregisterforstatuschangenotificationex) | <span data-ttu-id="1c303-121">Запрашивает уведомление вызывающей стороны службы распространения однорангового узла при изменении состояния.</span><span class="sxs-lookup"><span data-stu-id="1c303-121">Requests that the Peer Distribution service notify the caller when a status change occurs.</span></span>                      |
| [<span data-ttu-id="1c303-122">**пирдистунрегистерфорстатусчанженотификатион**</span><span class="sxs-lookup"><span data-stu-id="1c303-122">**PeerDistUnregisterForStatusChangeNotification**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistunregisterforstatuschangenotification) | <span data-ttu-id="1c303-123">Отменяет регистрацию уведомления об изменении состояния для сеанса, связанного с заданным обработчиком.</span><span class="sxs-lookup"><span data-stu-id="1c303-123">Deregisters the status change notification for the session associated with the supplied handle.</span></span>                 |



 

## <a name="the-following-functions-are-only-supported-in-client-scenarios"></a><span data-ttu-id="1c303-124">Следующие функции поддерживаются только в сценариях "клиент".</span><span class="sxs-lookup"><span data-stu-id="1c303-124">The following functions are only supported in "client" scenarios.</span></span>



| <span data-ttu-id="1c303-125">Функции клиента</span><span class="sxs-lookup"><span data-stu-id="1c303-125">Client Functions</span></span>                                                                             | <span data-ttu-id="1c303-126">Описание</span><span class="sxs-lookup"><span data-stu-id="1c303-126">Description</span></span>                                                                                                                                                                                                                                                                                                                                      |
|----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="1c303-127">**пирдистклиентопенконтент**</span><span class="sxs-lookup"><span data-stu-id="1c303-127">**PeerDistClientOpenContent**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientopencontent)                               | <span data-ttu-id="1c303-128">Открывает и возвращает **\_ \_ маркер содержимого** для ссылки на это содержимое.</span><span class="sxs-lookup"><span data-stu-id="1c303-128">Opens and returns a **PEERDIST\_CONTENT\_HANDLE** to reference that content.</span></span>                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="1c303-129">**пирдистклиентклосеконтент**</span><span class="sxs-lookup"><span data-stu-id="1c303-129">**PeerDistClientCloseContent**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientclosecontent)                             | <span data-ttu-id="1c303-130">Закрывает **\_ \_ обработчик содержимого для объекта**,</span><span class="sxs-lookup"><span data-stu-id="1c303-130">Closes the **PEERDIST\_CONTENT\_HANDLE**.</span></span>                                                                                                                                                                                                                                                                                                        |
| [<span data-ttu-id="1c303-131">**пирдистклиентжетинформатионбихандле**</span><span class="sxs-lookup"><span data-stu-id="1c303-131">**PeerDistClientGetInformationByHandle**</span></span>](/windows/desktop/api/peerdist/nf-peerdist-peerdistclientgetinformationbyhandle)         | <span data-ttu-id="1c303-132">Извлекает дополнительные сведения из службы распространения Peer для определенного обработчика содержимого.</span><span class="sxs-lookup"><span data-stu-id="1c303-132">Retrieves additional information from the Peer Distribution service for a specific content handle.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="1c303-133">**пирдистклиентаддконтентинформатион**</span><span class="sxs-lookup"><span data-stu-id="1c303-133">**PeerDistClientAddContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientaddcontentinformation)           | <span data-ttu-id="1c303-134">Добавляет сведения о содержимом, которое затем связывается с **\_ \_ обработчиком содержимого**,</span><span class="sxs-lookup"><span data-stu-id="1c303-134">Adds content information which is then associated with the **PEERDIST\_CONTENT\_HANDLE**.</span></span> <span data-ttu-id="1c303-135">**\_ \_ Обработчик содержимого** , связанный с данными, может быть связан с любым содержимым.</span><span class="sxs-lookup"><span data-stu-id="1c303-135">A **PEERDIST\_CONTENT\_HANDLE** can be associated with any content information.</span></span>                                                                                                                                                                        |
| [<span data-ttu-id="1c303-136">**пирдистклиенткомплетеконтентинформатион**</span><span class="sxs-lookup"><span data-stu-id="1c303-136">**PeerDistClientCompleteContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientcompletecontentinformation) | <span data-ttu-id="1c303-137">Указывает конец сведений о содержимом.</span><span class="sxs-lookup"><span data-stu-id="1c303-137">Indicates the end of the content information.</span></span>                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="1c303-138">**пирдистклиентадддата**</span><span class="sxs-lookup"><span data-stu-id="1c303-138">**PeerDistClientAddData**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientadddata)                                       | <span data-ttu-id="1c303-139">Используется для передачи содержимого в локальный кэш.</span><span class="sxs-lookup"><span data-stu-id="1c303-139">Used to supply content to the local cache.</span></span> <span data-ttu-id="1c303-140">Обычно это делается, когда данные не удалось найти в локальной сети, как указано в случае завершения [**пирдистклиентблоккреад**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientblockread) или [**пирдистклиентстреамреад**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientstreamread) с **\_ истечением времени ожидания ошибки** или **\_ ошибки \_ \_**.</span><span class="sxs-lookup"><span data-stu-id="1c303-140">Typically this is done when data could not be found on the local network as indicated when either [**PeerDistClientBlockRead**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientblockread) or [**PeerDistClientStreamRead**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientstreamread) complete with **ERROR\_TIMEOUT** or **PEERDIST\_ERROR\_MISSING\_DATA**..</span></span> |
| [<span data-ttu-id="1c303-141">**пирдистклиентблоккреад**</span><span class="sxs-lookup"><span data-stu-id="1c303-141">**PeerDistClientBlockRead**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientblockread)                                   | <span data-ttu-id="1c303-142">Предоставляет произвольный доступ к потоку содержимого.</span><span class="sxs-lookup"><span data-stu-id="1c303-142">Provides random access to the content stream.</span></span>                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="1c303-143">**пирдистклиентстреамреад**</span><span class="sxs-lookup"><span data-stu-id="1c303-143">**PeerDistClientStreamRead**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientstreamread)                                 | <span data-ttu-id="1c303-144">Предоставляет последовательный доступ к потоку содержимого.</span><span class="sxs-lookup"><span data-stu-id="1c303-144">Provides sequential access to the content stream.</span></span>                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="1c303-145">**пирдистклиентфлушконтент**</span><span class="sxs-lookup"><span data-stu-id="1c303-145">**PeerDistClientFlushContent**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientflushcontent)                             | <span data-ttu-id="1c303-146">Удаляет содержимое, которое ранее было добавлено в локальную систему распространения одноранговой сети.</span><span class="sxs-lookup"><span data-stu-id="1c303-146">Removes content that has been previously added to the local Peer Distribution system.</span></span>                                                                                                                                                                                                                                                            |
| [<span data-ttu-id="1c303-147">**пирдистклиентканцеласинкоператион**</span><span class="sxs-lookup"><span data-stu-id="1c303-147">**PeerDistClientCancelAsyncOperation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientcancelasyncoperation)             | <span data-ttu-id="1c303-148">Отменяет асинхронную операцию, связанную с [ПЕРЕкрывающейся](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) структурой, и маркер содержимого, возвращенный [**пирдистклиентопенконтент**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientopencontent).</span><span class="sxs-lookup"><span data-stu-id="1c303-148">Cancels asynchronous operation associated with an [OVERLAPPED](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) structure and the content handle returned by [**PeerDistClientOpenContent**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistclientopencontent).</span></span>                                                                                                                     |



 

## <a name="the-following-functions-are-only-supported-in-server-scenarios"></a><span data-ttu-id="1c303-149">Следующие функции поддерживаются только в сценариях "сервер".</span><span class="sxs-lookup"><span data-stu-id="1c303-149">The following functions are only supported in "server" scenarios.</span></span>



| <span data-ttu-id="1c303-150">Функции сервера</span><span class="sxs-lookup"><span data-stu-id="1c303-150">Server Functions</span></span>                                                                             | <span data-ttu-id="1c303-151">Описание</span><span class="sxs-lookup"><span data-stu-id="1c303-151">Description</span></span>                                                                                                                                                                                        |
|----------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="1c303-152">**пирдистсерверпублишстреам**</span><span class="sxs-lookup"><span data-stu-id="1c303-152">**PeerDistServerPublishStream**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishstream)                           | <span data-ttu-id="1c303-153">Создает **\_ \_ обработчик потока** , который можно использовать с [**пирдистсерверпублишаддтостреам**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishaddtostream) для создания сведений о содержимом для потока содержимого.</span><span class="sxs-lookup"><span data-stu-id="1c303-153">Creates the **PEERDIST\_STREAM\_HANDLE** which can be used with [**PeerDistServerPublishAddToStream**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishaddtostream) to create content information for the content stream.</span></span> |
| [<span data-ttu-id="1c303-154">**пирдистсерверпублишаддтостреам**</span><span class="sxs-lookup"><span data-stu-id="1c303-154">**PeerDistServerPublishAddToStream**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishaddtostream)                 | <span data-ttu-id="1c303-155">Добавляет данные в поток, на который ссылается handle Stream.</span><span class="sxs-lookup"><span data-stu-id="1c303-155">Adds data to the stream referenced by the PeerDist stream handle.</span></span>                                                                                                                                  |
| [<span data-ttu-id="1c303-156">**пирдистсерверпублишкомплетестреам**</span><span class="sxs-lookup"><span data-stu-id="1c303-156">**PeerDistServerPublishCompleteStream**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverpublishcompletestream)           | <span data-ttu-id="1c303-157">Вызывается для указания на то, что все данные были добавлены в поток.</span><span class="sxs-lookup"><span data-stu-id="1c303-157">Called to indicate that all data has been added to the stream.</span></span>                                                                                                                                     |
| [<span data-ttu-id="1c303-158">**пирдистсерверклосестреамхандле**</span><span class="sxs-lookup"><span data-stu-id="1c303-158">**PeerDistServerCloseStreamHandle**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverclosestreamhandle)                   | <span data-ttu-id="1c303-159">Закрывает обработчик потока.</span><span class="sxs-lookup"><span data-stu-id="1c303-159">Closes the stream handle.</span></span>                                                                                                                                                                          |
| [<span data-ttu-id="1c303-160">**пирдистсерверунпублиш**</span><span class="sxs-lookup"><span data-stu-id="1c303-160">**PeerDistServerUnpublish**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverunpublish)                                   | <span data-ttu-id="1c303-161">Отменяет публикацию ранее опубликованного содержимого в службе однорангового распространения.</span><span class="sxs-lookup"><span data-stu-id="1c303-161">Unpublishes previously published content in the Peer Distribution service.</span></span>                                                                                                                         |
| [<span data-ttu-id="1c303-162">**пирдистсерверопенконтентинформатион**</span><span class="sxs-lookup"><span data-stu-id="1c303-162">**PeerDistServerOpenContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserveropencontentinformation)         | <span data-ttu-id="1c303-163">Открывает для опубликованного содержимого **\_ \_ рукоятку контентинфо** .</span><span class="sxs-lookup"><span data-stu-id="1c303-163">Opens a **PEERDIST\_CONTENTINFO\_HANDLE** for published content.</span></span>                                                                                                                                   |
| [<span data-ttu-id="1c303-164">**пирдистсерверопенконтентинформатионекс**</span><span class="sxs-lookup"><span data-stu-id="1c303-164">**PeerDistServerOpenContentInformationEx**</span></span>](/windows/desktop/api/peerdist/nf-peerdist-peerdistserveropencontentinformationex)     | <span data-ttu-id="1c303-165">Открывает для опубликованного содержимого **\_ \_ рукоятку контентинфо** .</span><span class="sxs-lookup"><span data-stu-id="1c303-165">Opens a **PEERDIST\_CONTENTINFO\_HANDLE** for published content.</span></span>                                                                                                                                   |
| [<span data-ttu-id="1c303-166">**пирдистсерверретриевеконтентинформатион**</span><span class="sxs-lookup"><span data-stu-id="1c303-166">**PeerDistServerRetrieveContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverretrievecontentinformation) | <span data-ttu-id="1c303-167">Извлекает сведения о содержимом, связанном с опубликованным содержимым.</span><span class="sxs-lookup"><span data-stu-id="1c303-167">Retrieves the content information associated with published content.</span></span>                                                                                                                               |
| [<span data-ttu-id="1c303-168">**пирдистсерверклосеконтентинформатион**</span><span class="sxs-lookup"><span data-stu-id="1c303-168">**PeerDistServerCloseContentInformation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserverclosecontentinformation)       | <span data-ttu-id="1c303-169">Для этого **\_ \_Обработчик контентинфо** , Открытый с помощью [**пирдистсерверопенконтентинформатион**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserveropencontentinformation).</span><span class="sxs-lookup"><span data-stu-id="1c303-169">**PEERDIST\_CONTENTINFO\_HANDLE** opened by [**PeerDistServerOpenContentInformation**](/windows/desktop/api/PeerDist/nf-peerdist-peerdistserveropencontentinformation).</span></span>                                                                  |
| [<span data-ttu-id="1c303-170">**пирдистсерверканцеласинкоператион**</span><span class="sxs-lookup"><span data-stu-id="1c303-170">**PeerDistServerCancelAsyncOperation**</span></span>](/windows/desktop/api/PeerDist/nf-peerdist-peerdistservercancelasyncoperation)             | <span data-ttu-id="1c303-171">Отменяет асинхронную операцию, связанную с идентификатором содержимого и структурой [OVERLAPPED](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) .</span><span class="sxs-lookup"><span data-stu-id="1c303-171">Cancels the asynchronous operation associated with the content identifier and [OVERLAPPED](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) structure.</span></span>                                             |



 

 

 
