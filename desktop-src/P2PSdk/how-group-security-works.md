---
description: Одноранговые группы должны иметь конкретный сертификат для каждого члена, который называется сертификатом члена группы (ГМК).
ms.assetid: 3966d4eb-4504-4b1e-9c9f-6eab7751d7ed
title: Принципы работы группы безопасности
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9d272e9a0567c6edc300a52cfa206305253ec5a2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103909772"
---
# <a name="how-group-security-works"></a><span data-ttu-id="b32bd-103">Принципы работы группы безопасности</span><span class="sxs-lookup"><span data-stu-id="b32bd-103">How Group Security Works</span></span>

<span data-ttu-id="b32bd-104">Одноранговые группы должны иметь конкретный сертификат для каждого члена, который называется сертификатом члена группы (ГМК).</span><span class="sxs-lookup"><span data-stu-id="b32bd-104">Peer groups require that each member have a specific certificate, which is called a Group Member Certificate (GMC).</span></span> <span data-ttu-id="b32bd-105">Сертификат ГМК гарантирует, что все записи, которыми обмениваются узлы, будут подписаны цифровой подписью.</span><span class="sxs-lookup"><span data-stu-id="b32bd-105">The GMC certificate ensures that all records exchanged between peers are digitally signed.</span></span> <span data-ttu-id="b32bd-106">Открытый ключ однорангового узла содержится в структурах, которые передаются как часть обмена данными между одноранговыми узлами, [**включая \_ \_ сведения об учетных данных одноранговых узлов**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info).</span><span class="sxs-lookup"><span data-stu-id="b32bd-106">The public key of a peer is contained in the structures that are passed as part of the communication between peers—including [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info).</span></span>

<span data-ttu-id="b32bd-107">ГМК может быть выдано в цепочку.</span><span class="sxs-lookup"><span data-stu-id="b32bd-107">A GMC can be issued in a chain.</span></span> <span data-ttu-id="b32bd-108">Например, создатель может выдать ГМК для администратора а, который может выдать ГМК администратору б, который может выдать ГМК для участника M. Результирующая цепочка ГМК: Creator — >A->B->M, длина которого равна 4.</span><span class="sxs-lookup"><span data-stu-id="b32bd-108">For example, a creator can issue a GMC to administrator A, who can issue a GMC to administrator B, who can issue a GMC to member M. The resulting GMC chain is: creator->A->B->M, which has a length of 4.</span></span> <span data-ttu-id="b32bd-109">Длина цепочки важна, так как она не может быть длиннее 24.</span><span class="sxs-lookup"><span data-stu-id="b32bd-109">The chain length is important, because it cannot be longer than 24.</span></span> <span data-ttu-id="b32bd-110">Если администратор 24 в цепочке пытается выдать ГМК участнику, [**пирграуписсуекредентиалс**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) или [**пирграупкреатеинвитатион**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) возвращает \_ \_ \_ слишком длинную цепочку узлов E \_ .</span><span class="sxs-lookup"><span data-stu-id="b32bd-110">If the 24th administrator in a chain attempts to issue a GMC to a member, [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) or [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) returns PEER\_E\_CHAIN\_TOO\_LONG.</span></span>

<span data-ttu-id="b32bd-111">ГМК также можно выдать путем вызова [**пирграуписсуекредентиалс**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span><span class="sxs-lookup"><span data-stu-id="b32bd-111">A GMC can also be issued by calling [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span></span> <span data-ttu-id="b32bd-112">ГМК подразумевает членство пользователя в группе, для которой выдается ГМК, и может иметь конечное или бесконечное время существования.</span><span class="sxs-lookup"><span data-stu-id="b32bd-112">A GMC implies user membership in the group that the GMC is issued for, and can have a finite or infinite lifetime.</span></span> <span data-ttu-id="b32bd-113">Действие члена группы не может быть длиннее времени существования, указанного в ГМК.</span><span class="sxs-lookup"><span data-stu-id="b32bd-113">Group member activity cannot be longer than the lifetime specified in the GMC.</span></span>

> [!Note]  
> <span data-ttu-id="b32bd-114">Неограниченное время жизни ГМК в настоящее время задается в течение 1000 лет.</span><span class="sxs-lookup"><span data-stu-id="b32bd-114">Infinite GMC lifetime is currently set at 1000 years.</span></span>

 

<span data-ttu-id="b32bd-115">Действие члена группы ограничено временем существования ГМК и включает следующее:</span><span class="sxs-lookup"><span data-stu-id="b32bd-115">Group member activity is limited by the GMC lifetime and includes the following:</span></span>

-   <span data-ttu-id="b32bd-116">**Операции записи** . одноранговый узел не может публиковать сведения в группе после истечения срока действия членства в группе или публикации записей, время существования которых превышает время существования членства в группе одноранговых узлов.</span><span class="sxs-lookup"><span data-stu-id="b32bd-116">**Record operations** - A peer cannot publish information in a group after the group membership expires, or publish records that have a lifetime longer than the peer's group membership lifetime.</span></span>
-   <span data-ttu-id="b32bd-117">**Операции членства** . Администратор группы не может выдать членство, срок действия которого превышает дату, указанную в членстве администратора группы.</span><span class="sxs-lookup"><span data-stu-id="b32bd-117">**Membership operations** - A group administrator cannot issue a membership that has a lifetime beyond the date specified in the group administrator membership.</span></span> <span data-ttu-id="b32bd-118">Например, если в течение ГМК времени существования администратора осталось 500 часов, все выданные членства должны быть меньше 500 часов.</span><span class="sxs-lookup"><span data-stu-id="b32bd-118">For example, if an administrator has 500 hours remaining on its GMC lifetime, all memberships issued must be less than 500 hours.</span></span>

<span data-ttu-id="b32bd-119">Так как член группы не может иметь время существования дольше, чем администратор, который приглашает этого члена группы, рекомендуется задать для ГМК времени существования администратора бесконечное значение или для очень длинного времени жизни.</span><span class="sxs-lookup"><span data-stu-id="b32bd-119">Because a group member cannot have a lifetime longer than the administrator who invites that group member, it is recommended that you set the GMC lifetime of an administrator as infinite, or for a very long lifetime.</span></span> <span data-ttu-id="b32bd-120">По умолчанию создатель группы имеет бесконечное время существования.</span><span class="sxs-lookup"><span data-stu-id="b32bd-120">The group creator has an infinite lifetime by default.</span></span>

## <a name="renewing-group-membership"></a><span data-ttu-id="b32bd-121">Продление членства в группе</span><span class="sxs-lookup"><span data-stu-id="b32bd-121">Renewing Group Membership</span></span>

<span data-ttu-id="b32bd-122">Чтобы обновить учетные данные администратора или участника, срок жизни ГМК которого готов к истечению, у вас есть два следующих варианта:</span><span class="sxs-lookup"><span data-stu-id="b32bd-122">To renew the credentials of an administrator or member whose GMC lifetime is ready to expire, you have the following two options:</span></span>

-   <span data-ttu-id="b32bd-123">Вызовите [**пирграуписсуекредентиалс**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) и передайте удостоверение члена, срок жизни которого готов к истечению срока действия.</span><span class="sxs-lookup"><span data-stu-id="b32bd-123">Call [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) and pass the identity of the member whose lifetime is ready to expire.</span></span> <span data-ttu-id="b32bd-124">Если учетные данные указаны как **null** и сведения о членстве одноранговых узлов доступны группе, то время продления устанавливается на ту же длительность, что и в ранее опубликованных учетных данных участника.</span><span class="sxs-lookup"><span data-stu-id="b32bd-124">If the credentials are specified as **NULL** and the peer's membership information is available to the group, the renewal time is set to the same duration that is specified in the previously published member credentials.</span></span> <span data-ttu-id="b32bd-125">Если необходимо указать другой период длительности, необходимо указать новую [**структуру \_ \_ сведений об учетных данных однорангового узла**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) , которая содержит новое время существования, а затем опубликовать новый ГМК для элемента.</span><span class="sxs-lookup"><span data-stu-id="b32bd-125">If a different duration period must be specified, a new [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure must be provided that contains the new lifetime duration, and then a new GMC is published for the member.</span></span>

    <span data-ttu-id="b32bd-126">Функция [**пирграуписсуекредентиалс**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) при необходимости принимает \_ \_ флаг учетных данных хранилища одноранговых групп \_ , который автоматически публикует новые учетные данные члена в групповой базе данных.</span><span class="sxs-lookup"><span data-stu-id="b32bd-126">The [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) function optionally takes the PEER\_GROUP\_STORE\_CREDENTIALS flag, which automatically publishes the new credentials of the member in the group database.</span></span> <span data-ttu-id="b32bd-127">Когда элемент подключается к группе в следующий раз, в первый раз или после перехода в режим «вне сети» элемент получает обновленный ГМК из базы данных.</span><span class="sxs-lookup"><span data-stu-id="b32bd-127">When the member connects to the group the next time, for either the first time or after going offline, the member obtains the updated GMC from the database.</span></span>

-   <span data-ttu-id="b32bd-128">Вызовите [**пирграупкреатеинвитатион**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) , чтобы передать удостоверение члена, срок жизни ГМК которого готов к истечению срока действия.</span><span class="sxs-lookup"><span data-stu-id="b32bd-128">Call [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) to pass the identity of the member whose GMC lifetime is ready to expire.</span></span> <span data-ttu-id="b32bd-129">Если срок действия, указанный в приглашении, равен **null**, то время существования ГМК будет таким же, как администратор ГМК, который выдает членство.</span><span class="sxs-lookup"><span data-stu-id="b32bd-129">If the expiration specified in the invitation is **NULL**, the lifetime duration of the GMC is the same as the administrator GMC who issues membership.</span></span> <span data-ttu-id="b32bd-130">Если создатель задает срок действия, равный **null**, выдается ГМК с бесконечным временем существования.</span><span class="sxs-lookup"><span data-stu-id="b32bd-130">If the creator specifies the expiration as **NULL**, a GMC with an infinite lifetime is issued.</span></span>

    <span data-ttu-id="b32bd-131">Если одноранговый узел выдает ГМК, срок действия которого истекает до значения времени существования, адреса однорангового узла недоступны в [**одноранговых структурах- \_ членах**](/windows/desktop/api/P2P/ns-p2p-peer_member) , возвращаемых в перечислении, инициированном вызовом [**пирграупенуммемберс**](/windows/desktop/api/P2P/nf-p2p-peergroupenummembers).</span><span class="sxs-lookup"><span data-stu-id="b32bd-131">If a peer is issued a GMC that expires before the presence lifetime value, the addresses of the peer are not available in the [**PEER\_MEMBER**](/windows/desktop/api/P2P/ns-p2p-peer_member) structures returned in the enumeration initiated by a call to [**PeerGroupEnumMembers**](/windows/desktop/api/P2P/nf-p2p-peergroupenummembers).</span></span> <span data-ttu-id="b32bd-132">Это происходит потому, что сведения о присутствии не публикуются в этом случае, даже если \_ \_ не установлен флаг запрета присутствия для узла.</span><span class="sxs-lookup"><span data-stu-id="b32bd-132">This happens because presence information is not published in this case, even if the PEER\_DISABLE\_PRESENCE flag is not set.</span></span>

 

 



