---
description: .
ms.assetid: 872c2a33-327e-41a8-81db-905c46673f13
title: Рекомендации по повышению производительности
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6fda45cb1ec7fb66b8afdcdebab7c92bdb071a79
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105713040"
---
# <a name="best-practices-for-onoff-performance"></a><span data-ttu-id="b158a-103">Рекомендации по повышению производительности</span><span class="sxs-lookup"><span data-stu-id="b158a-103">Best Practices for On/Off Performance</span></span>

## <a name="platform"></a><span data-ttu-id="b158a-104">Платформа</span><span class="sxs-lookup"><span data-stu-id="b158a-104">Platform</span></span>

<span data-ttu-id="b158a-105">**Клиенты —** Windows Vista, Windows \| 7</span><span class="sxs-lookup"><span data-stu-id="b158a-105">**Clients -** Windows Vista \| Windows 7</span></span>  
<span data-ttu-id="b158a-106">**Серверы —** Windows Server 2008 \| Windows server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="b158a-106">**Servers -** Windows Server 2008 \| Windows Server 2008 R2</span></span>  

## <a name="description"></a><span data-ttu-id="b158a-107">Описание</span><span class="sxs-lookup"><span data-stu-id="b158a-107">Description</span></span>

<span data-ttu-id="b158a-108">Состояния питания системы (или S-States), как определено в спецификации Advanced Computer Interface (ACPI), разговорной речи называются состояниями "вкл./выкл.", так как наиболее распространенным переходом в состоянии S является включение и отключение компьютера.</span><span class="sxs-lookup"><span data-stu-id="b158a-108">The system power states (or S-states), as defined in the Advanced Computer Power Interface (ACPI) specification, are colloquially called on/off states since the most common S-state transition is a computer turning on and off.</span></span> <span data-ttu-id="b158a-109">Различные переходы состояния On/Off в системе, работающей под управлением Windows Vista или Windows 7, — это загрузка, спящий режим (ACPI S3), режим гибернации (ACPI S4) и завершение работы.</span><span class="sxs-lookup"><span data-stu-id="b158a-109">The different on/off state transitions on a system running Windows Vista or Windows 7 are boot, sleep (ACPI S3), hibernate (ACPI S4), and shutdown.</span></span>

<span data-ttu-id="b158a-110">Высокая производительность во время этих переходов не только повышает восприятное качество компьютера, но и существенно влияет на ежедневные шаблоны использования компьютеров и надежность системы.</span><span class="sxs-lookup"><span data-stu-id="b158a-110">Good performance during these on/off transitions not only improves the perceived quality of a computer, but also greatly affects daily computer usage patterns and system reliability.</span></span> <span data-ttu-id="b158a-111">Клиенты могут быть разочарованы системами, которые занимают слишком много времени для загрузки или завершения работы.</span><span class="sxs-lookup"><span data-stu-id="b158a-111">Customers can become frustrated by systems that take too long to boot or to shut down.</span></span> <span data-ttu-id="b158a-112">Мобильные системы с длительными переходами в спящий режим и спящий режим могут неоправданно выпустить заряд аккумулятора.</span><span class="sxs-lookup"><span data-stu-id="b158a-112">Mobile systems that have lengthy sleep and hibernation transitions can unnecessarily deplete battery life.</span></span> <span data-ttu-id="b158a-113">Более длительное время завершения работы также может негативно сказаться на надежности мобильных систем.</span><span class="sxs-lookup"><span data-stu-id="b158a-113">Longer shutdown times can also adversely affect the reliability of mobile systems.</span></span> <span data-ttu-id="b158a-114">Например, они увеличивают риск непредвиденных постепенных вырезков.</span><span class="sxs-lookup"><span data-stu-id="b158a-114">For example, they increase the risk of unexpected power cut-offs.</span></span>

<span data-ttu-id="b158a-115">Системные расширения, такие как драйверы, приложения и службы, могут оказать значительное влияние на время перехода.</span><span class="sxs-lookup"><span data-stu-id="b158a-115">System extensions like drivers, applications, and services can have a significant impact on on/off transition times.</span></span> <span data-ttu-id="b158a-116">В этом разделе обсуждаются некоторые рекомендации, которые могут быть доступны разработчикам приложений и служб, чтобы избежать задержек при загрузке, резервном завершении и выключении, а также для обеспечения реагирования на запросы после загрузки и после возобновления работы пользователя.</span><span class="sxs-lookup"><span data-stu-id="b158a-116">This section discusses some of the best practices that application and service developers can follow to avoid delays during boot, standby, and shutdown, and to ensure a responsive post-boot and post-resume user experience.</span></span> <span data-ttu-id="b158a-117">Дополнительные сведения о выявлении проблем с производительностью при использовании набора средств производительности Windows и реализации следующих рекомендаций для приложения или службы см. в документации, приведенной в разделе "ссылки на другие ресурсы".</span><span class="sxs-lookup"><span data-stu-id="b158a-117">For more details on how to identify on/off performance issues using the Windows Performance Toolkit and implement the below recommendations for your application or service, please refer to the whitepapers in the 'Links to other Resources' section.</span></span>

## <a name="best-practices"></a><span data-ttu-id="b158a-118">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="b158a-118">Best Practices</span></span>

-   <span data-ttu-id="b158a-119">Используйте набор средств производительности Windows для измерения производительности во время всех переходов/выключений.</span><span class="sxs-lookup"><span data-stu-id="b158a-119">Use the Windows Performance Toolkit to measure performance during all on/off transitions.</span></span>
-   <span data-ttu-id="b158a-120">Выполните тестирование контролируемым образом и выполните сравнения с допустимым базовым показателем:</span><span class="sxs-lookup"><span data-stu-id="b158a-120">Perform testing in a controlled way, and make comparisons against a valid baseline:</span></span>
    -   <span data-ttu-id="b158a-121">Получение базового измерения в системе с минимальным числом системных расширений</span><span class="sxs-lookup"><span data-stu-id="b158a-121">Obtain a baseline measurement on a system with as few system extensions as possible</span></span>
    -   <span data-ttu-id="b158a-122">Добавление приложений и служб по одному за раз</span><span class="sxs-lookup"><span data-stu-id="b158a-122">Add applications and services one at a time</span></span>
    -   <span data-ttu-id="b158a-123">Проверка на неприемлемые регрессии при смене времени перехода</span><span class="sxs-lookup"><span data-stu-id="b158a-123">Test for unacceptable regressions in on/off transition times</span></span>
-   <span data-ttu-id="b158a-124">Избегайте использования управляемого кода для приложений с критическим загрузочным путем.</span><span class="sxs-lookup"><span data-stu-id="b158a-124">Avoid using managed code for applications on the critical boot path.</span></span>
-   <span data-ttu-id="b158a-125">Убедитесь, что все приложения быстро реагируют на уведомления о завершении работы ( \_ сообщения WM куерендсессион и WM \_ ENDSESSION).</span><span class="sxs-lookup"><span data-stu-id="b158a-125">Ensure that all applications respond quickly to shutdown notifications (WM\_QUERYENDSESSION and WM\_ENDSESSION messages).</span></span>
-   <span data-ttu-id="b158a-126">Сократите задержки в пути завершения работы служб и приложений за счет минимизации активности ЦП, диска и сети в ответ на уведомления о завершении работы.</span><span class="sxs-lookup"><span data-stu-id="b158a-126">Reduce delays in the shutdown path of services and applications by minimizing CPU, disk, and network activity in response to shutdown notifications.</span></span>
-   <span data-ttu-id="b158a-127">Избегайте задержек при обработке уведомления о приостановке ( \_ сообщение WM поверброадкаст).</span><span class="sxs-lookup"><span data-stu-id="b158a-127">Avoid delays in processing the suspend notification (WM\_POWERBROADCAST message).</span></span>
-   <span data-ttu-id="b158a-128">Быстрое реагирование на возобновление событий и сокращение времени ЦП, диска и сети после возобновления работы.</span><span class="sxs-lookup"><span data-stu-id="b158a-128">Respond quickly to resume events and minimize post-resume CPU, disk, and network usage.</span></span>
-   <span data-ttu-id="b158a-129">Уменьшение потребления ресурсов приложения после загрузки.</span><span class="sxs-lookup"><span data-stu-id="b158a-129">Reduce application resource consumption post-boot.</span></span>
-   <span data-ttu-id="b158a-130">Не запускайте приложения из раздела RunOnce при каждой загрузке.</span><span class="sxs-lookup"><span data-stu-id="b158a-130">Do not start applications from the RunOnce key on every boot.</span></span>
-   <span data-ttu-id="b158a-131">Преобразуйте все ненужные службы в начало или запуск триггера, чтобы обеспечить доступность системных ресурсов во время загрузки.</span><span class="sxs-lookup"><span data-stu-id="b158a-131">Convert all nonessential services to demand start or trigger start in order to make system resources available during boot.</span></span>
-   <span data-ttu-id="b158a-132">Не используйте группы порядка загрузки для выражения служб.</span><span class="sxs-lookup"><span data-stu-id="b158a-132">Avoid using load order groups to express service dependencies.</span></span>
-   <span data-ttu-id="b158a-133">Убедитесь, что все работающие службы сообщают о состоянии как можно скорее во время загрузки, чтобы предотвратить блокировку диспетчера управления службами (SCM).</span><span class="sxs-lookup"><span data-stu-id="b158a-133">Ensure that all running services report this status as soon as possible during boot to avoid blocking the Service Control Manager (SCM).</span></span>
-   <span data-ttu-id="b158a-134">Избегайте использования управляемого кода для служб в пути запуска.</span><span class="sxs-lookup"><span data-stu-id="b158a-134">Avoid using managed code for services on the startup path.</span></span>
-   <span data-ttu-id="b158a-135">Не разрешайте службам участвовать в получении уведомлений о завершении работы и завершении работы (предварительное \_ Завершение управления службами и управляющие \_ \_ \_ коды завершения управления службой), если не требуется абсолютное требование.</span><span class="sxs-lookup"><span data-stu-id="b158a-135">Do not allow services to opt in to receive pre-shutdown and shutdown notifications (SERVICE\_CONTROL\_PRESHUTDOWN and SERVICE\_CONTROL\_SHUTDOWN control codes) unless absolutely required.</span></span>
-   <span data-ttu-id="b158a-136">Убедитесь, что все службы, которые выбрали получение уведомлений о завершении работы, быстро реагируют на работу SCM.</span><span class="sxs-lookup"><span data-stu-id="b158a-136">Ensure that all services that have opted to receive shutdown notifications respond quickly to the SCM.</span></span>
-   <span data-ttu-id="b158a-137">Убедитесь, что службы не хотят получать уведомления о приостановке, если это не требуется.</span><span class="sxs-lookup"><span data-stu-id="b158a-137">Verify that services do not opt in to receive suspend notifications unless absolutely required.</span></span>
-   <span data-ttu-id="b158a-138">Убедитесь, что все службы быстро реагируют на возобновление событий и снижают скорость ЦП, диск и использование сети после возобновления.</span><span class="sxs-lookup"><span data-stu-id="b158a-138">Ensure that all services respond quickly to resume events and minimize post-resume CPU, disk, and network usage.</span></span>

## <a name="links-to-other-resources"></a><span data-ttu-id="b158a-139">Ссылки на другие ресурсы</span><span class="sxs-lookup"><span data-stu-id="b158a-139">Links to Other Resources</span></span>

-   -   [<span data-ttu-id="b158a-140">Руководств по решениям перехода на Windows</span><span class="sxs-lookup"><span data-stu-id="b158a-140">Windows On/Off Transitions Solutions Guide</span></span>](/windows-hardware/test/assessments/onoff-transition-performance)
-   [<span data-ttu-id="b158a-141">Анализ производительности перехода на смену в Windows Vista</span><span class="sxs-lookup"><span data-stu-id="b158a-141">On/Off Transition Performance Analysis of Windows Vista</span></span>](/windows-hardware/test/assessments/onoff-transition-performance)
-   [<span data-ttu-id="b158a-142">Анализ производительности Windows</span><span class="sxs-lookup"><span data-stu-id="b158a-142">Windows Performance Analysis</span></span>](https://msdn.microsoft.com/performance/default.aspx)
-   [<span data-ttu-id="b158a-143">Документация по инструментарию производительности Windows на MSDN</span><span class="sxs-lookup"><span data-stu-id="b158a-143">Windows Performance Toolkit documentation on MSDN</span></span>](/previous-versions/windows/desktop/xperf/windows-performance-analyzer--wpa-)
-   [<span data-ttu-id="b158a-144">Форум по анализу производительности Windows</span><span class="sxs-lookup"><span data-stu-id="b158a-144">Windows Performance Analysis forum</span></span>](https://social.msdn.microsoft.com/Forums/wptk_v4/threads/)
-   [<span data-ttu-id="b158a-145">Трассировка событий для Windows на сайте MSDN</span><span class="sxs-lookup"><span data-stu-id="b158a-145">Event Tracing for Windows on MSDN</span></span>](../etw/event-tracing-portal.md)

 

 
