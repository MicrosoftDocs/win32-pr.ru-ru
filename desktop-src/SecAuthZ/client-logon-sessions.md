---
description: Сервер с \_ правами доступа к имени TCB (SE \_ ), например служба Windows, работающая в учетной записи LocalSystem, может вызвать функцию LogonUser для проверки подлинности клиента на компьютере, на котором выполняется сервер.
ms.assetid: 27328497-8f04-42e8-aadd-4c33b9907b94
title: Сеансы входа клиента
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f1439b27637b0e46df3b468b42cb9c45ac8f759f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104543546"
---
# <a name="client-logon-sessions"></a><span data-ttu-id="16193-103">Сеансы входа клиента</span><span class="sxs-lookup"><span data-stu-id="16193-103">Client Logon Sessions</span></span>

<span data-ttu-id="16193-104">Сервер с \_ правами доступа к имени TCB (SE \_ ), например служба Windows, работающая [в учетной записи LocalSystem](/windows/desktop/Services/localsystem-account), может вызвать функцию [**LogonUser**](/windows/desktop/api/winbase/nf-winbase-logonusera) для [*проверки подлинности*](/windows/desktop/SecGloss/a-gly) клиента на компьютере, на котором выполняется сервер.</span><span class="sxs-lookup"><span data-stu-id="16193-104">A server with the SE\_TCB\_NAME privilege, such as a Windows service running in the [LocalSystem Account](/windows/desktop/Services/localsystem-account), can call the [**LogonUser**](/windows/desktop/api/winbase/nf-winbase-logonusera) function to [*authenticate*](/windows/desktop/SecGloss/a-gly) a client on the computer that the server is running on.</span></span> <span data-ttu-id="16193-105">Функция **LogonUser** запускает новый [*сеанс*](/windows/desktop/SecGloss/s-gly) входа в систему и возвращает [*основной маркер доступа*](/windows/desktop/SecGloss/p-gly) , содержащий сведения о безопасности клиента.</span><span class="sxs-lookup"><span data-stu-id="16193-105">The **LogonUser** function starts a new logon [*session*](/windows/desktop/SecGloss/s-gly) and returns a [*primary access token*](/windows/desktop/SecGloss/p-gly) that contains the client's security information.</span></span> <span data-ttu-id="16193-106">Этот первичный токен можно использовать при вызове функции [**имперсонателогжедонусер**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateloggedonuser) для олицетворения клиента или при вызове функции [**параметр CreateProcessAsUser**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createprocessasusera) для создания процесса, который выполняется в [*контексте безопасности*](/windows/desktop/SecGloss/s-gly) клиента.</span><span class="sxs-lookup"><span data-stu-id="16193-106">You can use this primary token in calling the [**ImpersonateLoggedOnUser**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateloggedonuser) function to impersonate the client or in calling the [**CreateProcessAsUser**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createprocessasusera) function to create a process that runs in the [*security context*](/windows/desktop/SecGloss/s-gly) of the client.</span></span>

<span data-ttu-id="16193-107">Преимущество проверки подлинности клиента заключается в том, что сервер, олицетворяющий прошедший проверку подлинности клиент или [*процесс*](/windows/desktop/SecGloss/p-gly) , созданный в контексте аутентифицированного клиента, может подключаться к удаленным сетевым ресурсам в качестве клиента.</span><span class="sxs-lookup"><span data-stu-id="16193-107">The advantage of authenticating the client in this way is that the server impersonating the authenticated client, or a [*process*](/windows/desktop/SecGloss/p-gly) created in the context of the authenticated client, can connect to remote network resources as the client.</span></span> <span data-ttu-id="16193-108">Если такая проверка подлинности не выполнена, сервер может подключаться к сетевым ресурсам только в том случае, если он получил имя и пароль учетной записи клиента для передачи функции [**WNetAddConnection2**](/windows/desktop/api/winnetwk/nf-winnetwk-wnetaddconnection2a) .</span><span class="sxs-lookup"><span data-stu-id="16193-108">If this authentication is not done, the server can connect to network resources only if it has acquired the client's account name and password to pass to the [**WNetAddConnection2**](/windows/desktop/api/winnetwk/nf-winnetwk-wnetaddconnection2a) function.</span></span>

<span data-ttu-id="16193-109">Недостаток проверки подлинности клиента заключается в том, что сервер должен получить [*учетные данные*](/windows/desktop/SecGloss/c-gly) клиента (доменное имя, имя пользователя и пароль).</span><span class="sxs-lookup"><span data-stu-id="16193-109">The disadvantage of authenticating the client in this way is that the server must have acquired the client's [*credentials*](/windows/desktop/SecGloss/c-gly) (domain name, user name, and password).</span></span> <span data-ttu-id="16193-110">Если удаленный клиент передает эти учетные данные на сервер, то ответственность за передачу учетных данных в безопасном режиме обеспечивает клиент и сервер.</span><span class="sxs-lookup"><span data-stu-id="16193-110">If a remote client supplies these credentials to the server, it is the responsibility of the client and server to ensure that the credentials are transmitted in a secure manner.</span></span>

 

 
