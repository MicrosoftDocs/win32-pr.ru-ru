---
description: Для создания дескриптора безопасности защищенный сервер может использовать ту же процедуру, которую приложение будет использовать для создания дескриптора безопасности защищаемого объекта.
ms.assetid: f40c4b62-a3f0-4e66-875e-2ef904d052e5
title: Дескрипторы безопасности для закрытых объектов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 97c40dc5c4e9f0a3d0e641874153d2862d038a19
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103991252"
---
# <a name="security-descriptors-for-private-objects"></a><span data-ttu-id="31899-103">Дескрипторы безопасности для закрытых объектов</span><span class="sxs-lookup"><span data-stu-id="31899-103">Security Descriptors for Private Objects</span></span>

<span data-ttu-id="31899-104">Для создания [*дескриптора безопасности*](/windows/desktop/SecGloss/s-gly)защищенный сервер может использовать ту же процедуру, которую приложение будет использовать для создания дескриптора безопасности защищаемого объекта.</span><span class="sxs-lookup"><span data-stu-id="31899-104">To create a [*security descriptor*](/windows/desktop/SecGloss/s-gly), a protected server can use the same procedure that an application would use to create a security descriptor for a securable object.</span></span> <span data-ttu-id="31899-105">Пример кода см. [в разделе Создание дескриптора безопасности для нового объекта в C++](creating-a-security-descriptor-for-a-new-object-in-c--.md).</span><span class="sxs-lookup"><span data-stu-id="31899-105">For sample code, see [Creating a Security Descriptor for a New Object in C++](creating-a-security-descriptor-for-a-new-object-in-c--.md).</span></span> <span data-ttu-id="31899-106">Кроме того, защищенное серверное приложение для этого может вызвать функцию [**буилдсекуритидескриптор**](/windows/desktop/api/Aclapi/nf-aclapi-buildsecuritydescriptora) .</span><span class="sxs-lookup"><span data-stu-id="31899-106">Alternatively, a protected server application can call the [**BuildSecurityDescriptor**](/windows/desktop/api/Aclapi/nf-aclapi-buildsecuritydescriptora) function to do this.</span></span> <span data-ttu-id="31899-107">Если указатель на существующий [*дескриптор безопасности*](/windows/desktop/SecGloss/s-gly) предоставляется в **буилдсекуритидескриптор**, он создаст новый дескриптор безопасности со сведениями, полученными из этого дескриптора безопасности, которые были объединены с новыми данными управления доступом, передаваемыми в качестве параметров в вызове функции.</span><span class="sxs-lookup"><span data-stu-id="31899-107">If a pointer to an existing [*self-relative security descriptor*](/windows/desktop/SecGloss/s-gly) is supplied to **BuildSecurityDescriptor**, it will build the new security descriptor with information taken from that security descriptor merged with new access control information passed as parameters in the function call.</span></span> <span data-ttu-id="31899-108">Владелец и группа по желанию указываются в структурах [**доверенных лиц**](/windows/desktop/api/AccCtrl/ns-accctrl-trustee_a) , переданных в функцию.</span><span class="sxs-lookup"><span data-stu-id="31899-108">The owner and group are optionally specified by [**TRUSTEE**](/windows/desktop/api/AccCtrl/ns-accctrl-trustee_a) structures passed to the function.</span></span> <span data-ttu-id="31899-109">Дескриптор безопасности, созданный **буилдсекуритидескриптор** , находится в *автономном* формате.</span><span class="sxs-lookup"><span data-stu-id="31899-109">The security descriptor created by **BuildSecurityDescriptor** is in *self-relative* format.</span></span>

<span data-ttu-id="31899-110">Кроме того, API Windows предоставляет набор функций для слияния сведений о клиентской безопасности со сведениями, унаследованными от дескриптора безопасности для родительского объекта или из дескриптора безопасности по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="31899-110">In addition, the Windows API provides a set of functions for merging client security information with information inherited from the security descriptor for a parent object or from a default security descriptor.</span></span> <span data-ttu-id="31899-111">Функции [**креатеприватеобжектсекурити**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-createprivateobjectsecurity), [**жетприватеобжектсекурити**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getprivateobjectsecurity), [**сетприватеобжектсекурити**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-setprivateobjectsecurity)и [**DestroyPrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-destroyprivateobjectsecurity) предоставляют возможность получения сведений по умолчанию из [*маркера доступа*](/windows/desktop/SecGloss/a-gly), поддержки наследования и работы с конкретными частями дескриптора безопасности.</span><span class="sxs-lookup"><span data-stu-id="31899-111">The [**CreatePrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-createprivateobjectsecurity), [**GetPrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-getprivateobjectsecurity), [**SetPrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-setprivateobjectsecurity), and [**DestroyPrivateObjectSecurity**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-destroyprivateobjectsecurity) functions provide the ability to retrieve default information from an [*access token*](/windows/desktop/SecGloss/a-gly), support inheritance, and manipulate specific parts of the security descriptor.</span></span> <span data-ttu-id="31899-112">Это может быть полезно, когда клиент создает закрытый объект в иерархии защищенных объектов.</span><span class="sxs-lookup"><span data-stu-id="31899-112">This can be useful when a client creates a private object in a hierarchy of secured objects.</span></span> <span data-ttu-id="31899-113">Например, функцию **креатеприватеобжектсекурити** можно использовать для создания дескриптора безопасности, содержащего ACE, заданные клиентом, ACE, наследуемые от родительского объекта, и владельца по умолчанию из маркера доступа клиента создания.</span><span class="sxs-lookup"><span data-stu-id="31899-113">For example, you could use the **CreatePrivateObjectSecurity** function to create a security descriptor that contained ACEs specified by the client, ACEs inherited from a parent object, and the default owner from the creating client's access token.</span></span> <span data-ttu-id="31899-114">Хотя [**буилдсекуритидескриптор**](/windows/desktop/api/Aclapi/nf-aclapi-buildsecuritydescriptora) создает дескрипторы безопасности из информации об управлении доступом, передаваемой в вызов функции, или из существующего дескриптора безопасности, **креатеприватеобжектсекурити** создает описатель безопасности исключительно из информации в существующих описательах безопасности.</span><span class="sxs-lookup"><span data-stu-id="31899-114">While [**BuildSecurityDescriptor**](/windows/desktop/api/Aclapi/nf-aclapi-buildsecuritydescriptora) creates security descriptors either from access control information passed into the function call or from an existing security descriptor, **CreatePrivateObjectSecurity** creates a security descriptor solely from the information in existing security descriptors.</span></span>

<span data-ttu-id="31899-115">Функция [**лукупсекуритидескрипторпартс**](/windows/desktop/api/Aclapi/nf-aclapi-lookupsecuritydescriptorpartsa) получает сведения о дескрипторе безопасности из существующего [*самоотносительного дескриптора безопасности*](/windows/desktop/SecGloss/s-gly).</span><span class="sxs-lookup"><span data-stu-id="31899-115">[**LookupSecurityDescriptorParts**](/windows/desktop/api/Aclapi/nf-aclapi-lookupsecuritydescriptorpartsa) function obtains security descriptor information from an existing [*self-relative security descriptor*](/windows/desktop/SecGloss/s-gly).</span></span> <span data-ttu-id="31899-116">Эти сведения включают спецификацию владельца и группы, число записей ACE в списке SACL или DACL, а также список записей ACE в списках SACL или DACL.</span><span class="sxs-lookup"><span data-stu-id="31899-116">This information includes the owner and group specification, the number of ACEs in the SACL or DACL, and the list of ACEs in the SACL or DACL.</span></span>

 

 
