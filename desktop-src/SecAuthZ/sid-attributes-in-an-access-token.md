---
description: Каждый идентификатор безопасности пользователя и группы в маркере доступа имеет набор атрибутов, определяющих, как система использует идентификатор безопасности при проверке доступа. В следующей таблице перечислены атрибуты, управляющие проверкой доступа.
ms.assetid: c902f876-f05e-4b0c-ab65-a0c6cebca933
title: Атрибуты SID в маркере доступа
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6a93e180c8c6ffe03a26591d5b9f722c2266356
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103810708"
---
# <a name="sid-attributes-in-an-access-token"></a><span data-ttu-id="50e10-104">Атрибуты SID в маркере доступа</span><span class="sxs-lookup"><span data-stu-id="50e10-104">SID Attributes in an Access Token</span></span>

<span data-ttu-id="50e10-105">Каждый [*идентификатор безопасности*](/windows/desktop/SecGloss/s-gly) пользователя и группы в [*маркере доступа*](/windows/desktop/SecGloss/a-gly) имеет набор атрибутов, определяющих, как система использует идентификатор безопасности при проверке доступа.</span><span class="sxs-lookup"><span data-stu-id="50e10-105">Each user and group [*security identifier*](/windows/desktop/SecGloss/s-gly) (SID) in an [*access token*](/windows/desktop/SecGloss/a-gly) has a set of attributes that control how the system uses the SID in an access check.</span></span> <span data-ttu-id="50e10-106">В следующей таблице перечислены атрибуты, управляющие проверкой доступа.</span><span class="sxs-lookup"><span data-stu-id="50e10-106">The following table lists the attributes that control access checking.</span></span>



| <span data-ttu-id="50e10-107">attribute</span><span class="sxs-lookup"><span data-stu-id="50e10-107">Attribute</span></span>                       | <span data-ttu-id="50e10-108">Описание</span><span class="sxs-lookup"><span data-stu-id="50e10-108">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|---------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="50e10-109">\_Группа SE \_ включена</span><span class="sxs-lookup"><span data-stu-id="50e10-109">SE\_GROUP\_ENABLED</span></span>              | <span data-ttu-id="50e10-110">Идентификатор безопасности с этим атрибутом включен для проверок доступа.</span><span class="sxs-lookup"><span data-stu-id="50e10-110">A SID with this attribute is enabled for access checks.</span></span> <span data-ttu-id="50e10-111">Когда система выполняет проверку доступа, она проверяет разрешенный доступ и запрещенный доступом доступ к [*записям контроля доступа*](/windows/desktop/SecGloss/a-gly) (ACE), которые применяются к одному из включенных идентификаторов безопасности в маркере доступа.</span><span class="sxs-lookup"><span data-stu-id="50e10-111">When the system performs an access check, it checks for access-allowed and access-denied [*access control entries*](/windows/desktop/SecGloss/a-gly) (ACEs) that apply to one of the enabled SIDs in the access token.</span></span> <span data-ttu-id="50e10-112">Идентификатор безопасности без этого атрибута пропускается во время проверки доступа, если \_ только \_ \_ \_ не задано использование группы SE только для \_ атрибута Deny only.</span><span class="sxs-lookup"><span data-stu-id="50e10-112">A SID without this attribute is ignored during an access check unless the SE\_GROUP\_USE\_FOR\_DENY\_ONLY attribute is set.</span></span><br/> |
| <span data-ttu-id="50e10-113">SE \_ группы \_ использовать \_ \_ только для запрета \_</span><span class="sxs-lookup"><span data-stu-id="50e10-113">SE\_GROUP\_USE\_FOR\_DENY\_ONLY</span></span> | <span data-ttu-id="50e10-114">Идентификатор безопасности с этим атрибутом является идентификатором безопасности только для запрета.</span><span class="sxs-lookup"><span data-stu-id="50e10-114">A SID with this attribute is a deny-only SID.</span></span> <span data-ttu-id="50e10-115">Когда система выполняет проверку доступа, она проверяет ACE, запрещенные доступом к SID, но не учитывает ACE, разрешенный доступом для идентификатора безопасности.</span><span class="sxs-lookup"><span data-stu-id="50e10-115">When the system performs an access check, it checks for access-denied ACEs that apply to the SID, but it ignores access-allowed ACEs for the SID.</span></span> <span data-ttu-id="50e10-116">Если этот атрибут задан, \_ атрибут включения группы SE \_ не установлен, и SID не может быть включен повторно.</span><span class="sxs-lookup"><span data-stu-id="50e10-116">If this attribute is set, the SE\_GROUP\_ENABLED attribute is not set and the SID cannot be reenabled.</span></span><br/>                                                                                                                                                          |



 

<span data-ttu-id="50e10-117">Чтобы установить или снять атрибут группы \_ \_ безопасности SE с включенной группой, используйте функцию [**аджусттокенграупс**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokengroups) .</span><span class="sxs-lookup"><span data-stu-id="50e10-117">To set or clear the SE\_GROUP\_ENABLED attribute of a group SID, use the [**AdjustTokenGroups**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokengroups) function.</span></span> <span data-ttu-id="50e10-118">Нельзя отключить идентификатор безопасности группы с \_ \_ обязательным атрибутом группы SE.</span><span class="sxs-lookup"><span data-stu-id="50e10-118">You cannot disable a group SID that has the SE\_GROUP\_MANDATORY attribute.</span></span> <span data-ttu-id="50e10-119">Нельзя использовать **аджусттокенграупс** для отключения SID пользователя маркера доступа.</span><span class="sxs-lookup"><span data-stu-id="50e10-119">You cannot use **AdjustTokenGroups** to disable the user SID of an access token.</span></span>

<span data-ttu-id="50e10-120">Чтобы определить, включен ли идентификатор безопасности в токене, то есть имеет ли он \_ атрибут SE Group \_ Enabled, вызовите функцию [**чекктокенмембершип**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-checktokenmembership) .</span><span class="sxs-lookup"><span data-stu-id="50e10-120">To determine whether a SID is enabled in a token, that is, whether it has the SE\_GROUP\_ENABLED attribute, call the [**CheckTokenMembership**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-checktokenmembership) function.</span></span>

<span data-ttu-id="50e10-121">Чтобы задать для параметра \_ группы SE значение \_ \_ \_ \_ "запретить только атрибут SID", включите идентификатор безопасности в список идентификаторов безопасности, которые вы указали при вызове функции [**CreateRestrictedToken**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-createrestrictedtoken) .</span><span class="sxs-lookup"><span data-stu-id="50e10-121">To set the SE\_GROUP\_USE\_FOR\_DENY\_ONLY attribute of a SID, include the SID in the list of deny-only SIDs that you specify when you call the [**CreateRestrictedToken**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-createrestrictedtoken) function.</span></span> <span data-ttu-id="50e10-122">**CreateRestrictedToken** может применить группу SE \_ \_ использовать \_ только для \_ атрибута "запретить \_ только атрибут" для любого идентификатора безопасности, включая идентификаторы SID пользователя и группы SID с атрибутом "Группа безопасности \ \_ \_ обязательный".</span><span class="sxs-lookup"><span data-stu-id="50e10-122">**CreateRestrictedToken** can apply the SE\_GROUP\_USE\_FOR\_DENY\_ONLY attribute to any SID, including the user SID and group SIDs that have the SE\_GROUP\_MANDATORY attribute.</span></span> <span data-ttu-id="50e10-123">Однако нельзя удалить атрибут «только отказ» из идентификатора безопасности, а также нельзя использовать [**аджусттокенграупс**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokengroups) для задания \_ атрибута SE Group \_ Enabled в идентификаторе безопасности, доступном только для запрета.</span><span class="sxs-lookup"><span data-stu-id="50e10-123">However, you cannot remove the deny-only attribute from a SID, nor can you use [**AdjustTokenGroups**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokengroups) to set the SE\_GROUP\_ENABLED attribute on a deny-only SID.</span></span>

<span data-ttu-id="50e10-124">Чтобы получить атрибуты идентификатора безопасности, вызовите функцию [**GetTokenInformation**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-gettokeninformation) со значением токенграупс.</span><span class="sxs-lookup"><span data-stu-id="50e10-124">To get the attributes of a SID, call the [**GetTokenInformation**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-gettokeninformation) function with the TokenGroups value.</span></span> <span data-ttu-id="50e10-125">Функция возвращает массив структур [**SID \_ и \_ атрибутов**](/windows/desktop/api/Winnt/ns-winnt-sid_and_attributes) , которые указывают идентификаторы безопасности группы и их атрибуты.</span><span class="sxs-lookup"><span data-stu-id="50e10-125">The function returns an array of [**SID\_AND\_ATTRIBUTES**](/windows/desktop/api/Winnt/ns-winnt-sid_and_attributes) structures that identify the group SIDs and their attributes.</span></span>

 

