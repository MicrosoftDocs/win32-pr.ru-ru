---
description: Функции установки могут создавать диалоговые окна для решения распространенных ситуаций установки и сбора сведений от пользователя.
ms.assetid: 0bff17a6-590d-4410-9ed1-0a655d94caad
title: О запросах диска и обработке ошибок
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cb6c171d1e479d5d16198ba6d632848ff152f4ae
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662341"
---
# <a name="about-disk-prompting-and-error-handling"></a><span data-ttu-id="9cfbc-103">О запросах диска и обработке ошибок</span><span class="sxs-lookup"><span data-stu-id="9cfbc-103">About Disk Prompting and Error Handling</span></span>

<span data-ttu-id="9cfbc-104">Хотя функции установки не предоставляют пользовательский интерфейс, существуют четыре функции установки, которые создают диалоговые окна для решения распространенных ситуаций установки и собирают сведения от пользователя.</span><span class="sxs-lookup"><span data-stu-id="9cfbc-104">Though the setup functions do not provide a user interface, there are four setup functions that generate dialog boxes to handle common installation situations and gather information from the user.</span></span> <span data-ttu-id="9cfbc-105">Это: [**сетуппромптфордиск**](/windows/desktop/api/Setupapi/nf-setupapi-setuppromptfordiska), [**сетупкоперрор**](/windows/desktop/api/Setupapi/nf-setupapi-setupcopyerrora), [**сетупренамиррор**](/windows/desktop/api/Setupapi/nf-setupapi-setuprenameerrora)и [**сетупделетиррор**](/windows/desktop/api/Setupapi/nf-setupapi-setupdeleteerrora).</span><span class="sxs-lookup"><span data-stu-id="9cfbc-105">These are: [**SetupPromptForDisk**](/windows/desktop/api/Setupapi/nf-setupapi-setuppromptfordiska), [**SetupCopyError**](/windows/desktop/api/Setupapi/nf-setupapi-setupcopyerrora), [**SetupRenameError**](/windows/desktop/api/Setupapi/nf-setupapi-setuprenameerrora), and [**SetupDeleteError**](/windows/desktop/api/Setupapi/nf-setupapi-setupdeleteerrora).</span></span>

<span data-ttu-id="9cfbc-106">Подпрограммы обратного вызова могут вызывать эти функции для создания диалоговых окон, помогающих обрабатывать уведомления, отправленные другими функциями установки, такими как [**сетупкоммитфилекуеуе**](/windows/desktop/api/Setupapi/nf-setupapi-setupcommitfilequeuea) и [**сетупинсталлфиле**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfilea).</span><span class="sxs-lookup"><span data-stu-id="9cfbc-106">Callback routines can call these functions to create dialog boxes to aid in processing notifications sent by other setup functions such as [**SetupCommitFileQueue**](/windows/desktop/api/Setupapi/nf-setupapi-setupcommitfilequeuea) and [**SetupInstallFile**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfilea).</span></span>

<span data-ttu-id="9cfbc-107">Функция [**сетуппромптфордиск**](/windows/desktop/api/Setupapi/nf-setupapi-setuppromptfordiska) предлагает пользователю вставить съемный носитель, указать новый исходный путь или отменить установку.</span><span class="sxs-lookup"><span data-stu-id="9cfbc-107">The [**SetupPromptForDisk**](/windows/desktop/api/Setupapi/nf-setupapi-setuppromptfordiska) function prompts the user to insert removable media, specify a new source path, or cancel the installation.</span></span> <span data-ttu-id="9cfbc-108">Приложение может предоставлять пользователю дополнительные возможности в зависимости от флагов, указанных при вызове функции.</span><span class="sxs-lookup"><span data-stu-id="9cfbc-108">The application can offer additional options to the user, depending on the flags specified when the function is called.</span></span> <span data-ttu-id="9cfbc-109">К ним относятся пропуск текущего файла или просмотр нового исходного пути.</span><span class="sxs-lookup"><span data-stu-id="9cfbc-109">These include skipping the current file, or browsing for a new source path.</span></span>

<span data-ttu-id="9cfbc-110">Три функции, [**сетупкоперрор**](/windows/desktop/api/Setupapi/nf-setupapi-setupcopyerrora), [**сетупренамиррор**](/windows/desktop/api/Setupapi/nf-setupapi-setuprenameerrora)и [**сетупделетиррор**](/windows/desktop/api/Setupapi/nf-setupapi-setupdeleteerrora), создают диалоговые окна, взаимодействующие с пользователем для сбора сведений от пользователя о том, как продолжить работу в случае возникновения ошибки.</span><span class="sxs-lookup"><span data-stu-id="9cfbc-110">The three functions, [**SetupCopyError**](/windows/desktop/api/Setupapi/nf-setupapi-setupcopyerrora), [**SetupRenameError**](/windows/desktop/api/Setupapi/nf-setupapi-setuprenameerrora), and [**SetupDeleteError**](/windows/desktop/api/Setupapi/nf-setupapi-setupdeleteerrora), create dialog boxes that interact with the user to gather information from the user on how to proceed when an error has occurred.</span></span>

<span data-ttu-id="9cfbc-111">Функция [**сетупкоперрор**](/windows/desktop/api/Setupapi/nf-setupapi-setupcopyerrora) создает диалоговое окно, предлагающее пользователю восстановиться после ошибки копирования.</span><span class="sxs-lookup"><span data-stu-id="9cfbc-111">The [**SetupCopyError**](/windows/desktop/api/Setupapi/nf-setupapi-setupcopyerrora) function generates a dialog box that asks the user how to recover from a copy error.</span></span> <span data-ttu-id="9cfbc-112">Пользователь может указать новый исходный путь для операции копирования или отменить установку.</span><span class="sxs-lookup"><span data-stu-id="9cfbc-112">The user can specify a new source path for the copy operation or cancel the installation.</span></span> <span data-ttu-id="9cfbc-113">В зависимости от флагов, указанных при вызове **сетупкоперрор**, пользователь может также найти новый исходный путь, просмотреть сведения об ошибке или пропустить текущий файл.</span><span class="sxs-lookup"><span data-stu-id="9cfbc-113">Depending on the flags specified during the call to **SetupCopyError**, the user may also be able to browse for a new source path, view error details, or skip the current file.</span></span>

<span data-ttu-id="9cfbc-114">Диалоговое окно, запрашивающее пользователя о том, как обрабатывать ошибки, возникающие во время операции переименования файлов, можно создать путем вызова [**сетупренамиррор**](/windows/desktop/api/Setupapi/nf-setupapi-setuprenameerrora).</span><span class="sxs-lookup"><span data-stu-id="9cfbc-114">A dialog box that asks the user how to process errors that occur during a file renaming operation can be generated by calling [**SetupRenameError**](/windows/desktop/api/Setupapi/nf-setupapi-setuprenameerrora).</span></span> <span data-ttu-id="9cfbc-115">С помощью этого диалогового окна пользователь имеет возможность повторить операцию, пропустить текущую операцию переименования или прервать выполнение.</span><span class="sxs-lookup"><span data-stu-id="9cfbc-115">With this dialog box, the user has the opportunity to retry the operation, skip the current rename operation, or abort.</span></span>

<span data-ttu-id="9cfbc-116">Функция [**сетупделетиррор**](/windows/desktop/api/Setupapi/nf-setupapi-setupdeleteerrora) создает диалоговое окно, которое может собирать входные данные о том, как пользователь хочет решить ошибку, возникшую во время операции удаления файла.</span><span class="sxs-lookup"><span data-stu-id="9cfbc-116">The [**SetupDeleteError**](/windows/desktop/api/Setupapi/nf-setupapi-setupdeleteerrora) function generates a dialog box that can gather input on how the user wishes to handle an error that occurred during a file deletion operation.</span></span> <span data-ttu-id="9cfbc-117">Пользователю предоставляются параметры для повторного выполнения операции, пропуска текущей операции удаления или прерывания.</span><span class="sxs-lookup"><span data-stu-id="9cfbc-117">The user is given the options to retry the operation, skip the current delete operation, or abort.</span></span>

<span data-ttu-id="9cfbc-118">Подпрограммы обратного вызова очереди по умолчанию, [**сетупдефаулткуеуекаллбакк**](/windows/desktop/api/Setupapi/nf-setupapi-setupdefaultqueuecallbacka), используют ранее упомянутые четыре функции для создания частей пользовательского интерфейса и для управления ошибками и запроса нового носителя.</span><span class="sxs-lookup"><span data-stu-id="9cfbc-118">The default queue callback routine, [**SetupDefaultQueueCallback**](/windows/desktop/api/Setupapi/nf-setupapi-setupdefaultqueuecallbacka), uses the previously mentioned four functions to generate parts of its user interface and to handle errors and prompt for new media.</span></span>

 

 



