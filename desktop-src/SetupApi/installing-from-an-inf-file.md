---
description: После получения сведений об установке из INF-файла существует несколько функций обработки файлов, которые можно использовать для установки файлов, перечисленных в разделе INF.
ms.assetid: 4e6042a0-36a9-4f74-b6cc-554e7f7aa2d9
title: Установка из INF-файла
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6bc3642edfb7abc2864c2c0784c79fbb21612fb9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103911555"
---
# <a name="installing-from-an-inf-file"></a><span data-ttu-id="c7ad8-103">Установка из INF-файла</span><span class="sxs-lookup"><span data-stu-id="c7ad8-103">Installing From an INF File</span></span>

<span data-ttu-id="c7ad8-104">После получения сведений об установке из INF-файла существует несколько функций обработки файлов, которые можно использовать для установки файлов, перечисленных в разделе INF.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-104">After you retrieve installation information from an INF file, there are several file-handling functions that you can use to install the files listed in an INF section.</span></span> <span data-ttu-id="c7ad8-105">Низкоуровневые функции, такие как [**сетупинсталлфиле**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfilea) и [**сетупинсталлфиликс**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfileexa) , устанавливают один файл.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-105">Low-level functions such as [**SetupInstallFile**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfilea) and [**SetupInstallFileEx**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfileexa) install a single file.</span></span>

<span data-ttu-id="c7ad8-106">Существуют также функции для управления сжатыми файлами.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-106">There are also functions to handle compressed files.</span></span> <span data-ttu-id="c7ad8-107">Функция [**сетупжетфилекомпрессионинфо**](/windows/desktop/api/Setupapi/nf-setupapi-setupgetfilecompressioninfoa) возвращает сведения о сжатых файлах.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-107">The [**SetupGetFileCompressionInfo**](/windows/desktop/api/Setupapi/nf-setupapi-setupgetfilecompressioninfoa) function returns information about compressed files.</span></span> <span data-ttu-id="c7ad8-108">Эти сведения затем могут использоваться [**сетупдекомпрессоркопифиле**](/windows/desktop/api/Setupapi/nf-setupapi-setupdecompressorcopyfilea) для копирования и, при необходимости, расширения файла.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-108">This information can then be used by [**SetupDecompressOrCopyFile**](/windows/desktop/api/Setupapi/nf-setupapi-setupdecompressorcopyfilea) to copy and, if necessary, expand the file.</span></span>

<span data-ttu-id="c7ad8-109">Такие функции высокого уровня, как [**сетупинсталлфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfrominfsectiona), [**сетупинсталлфилесфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfilesfrominfsectiona)и [**сетупинсталлсервицесфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallservicesfrominfsectiona) , обрабатывают операции установки в разделе **Установка** или **Служба** .</span><span class="sxs-lookup"><span data-stu-id="c7ad8-109">High-level functions such as [**SetupInstallFromInfSection**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfrominfsectiona), [**SetupInstallFilesFromInfSection**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfilesfrominfsectiona), and [**SetupInstallServicesFromInfSection**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallservicesfrominfsectiona) process the installation operations in an **Install** or **Service** section.</span></span> <span data-ttu-id="c7ad8-110">Из них **сетупинсталлфроминфсектион** является наиболее универсальным, так как он может выполнять любые операции установки, перечисленные в разделе **Установка** INF-файла.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-110">Of these, **SetupInstallFromInfSection** is the most versatile because it can perform any type of installation operation listed in the **Install** section of an INF file.</span></span> <span data-ttu-id="c7ad8-111">Сюда входят операции реестра и INI-файла, перечисленные в разделах **аддрег**, **делрег**, **упдатеинис** или **упдатеинифиелд** раздела **Install** .</span><span class="sxs-lookup"><span data-stu-id="c7ad8-111">This includes the registry and INI operations listed in the **AddReg**, **DelReg**, **UpdateInis**, or **UpdateIniField** lines of an **Install** section.</span></span>

<span data-ttu-id="c7ad8-112">Функции [**сетупинсталлфилесфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfilesfrominfsectiona) и [**сетупинсталлсервицесфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallservicesfrominfsectiona) заставят операции в очередь из раздела **установки** или **службы** , соответственно, в существующую очередь файлов.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-112">The [**SetupInstallFilesFromInfSection**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfilesfrominfsectiona) and [**SetupInstallServicesFromInfSection**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallservicesfrominfsectiona) functions queue operations from an **Install** or **Service** section, respectively, to an existing file queue.</span></span> <span data-ttu-id="c7ad8-113">Обратите внимание, что для работы с очередями и службами необходимо отдельно вызывать Сетупинсталлфроминфсектион и Сетупинсталлсервицесфроминфсектион.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-113">Note that you must call SetupInstallFromInfSection and SetupInstallServicesFromInfSection separately to queue operations and services.</span></span> <span data-ttu-id="c7ad8-114">Дополнительные сведения см. в разделе [очереди файлов](file-queues.md).</span><span class="sxs-lookup"><span data-stu-id="c7ad8-114">For more information, see [File Queues](file-queues.md).</span></span>

<span data-ttu-id="c7ad8-115">В отличие от этого, функция [**сетупинсталлфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfrominfsectiona) создает и уничтожает собственную внутреннюю очередь.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-115">In contrast, the [**SetupInstallFromInfSection**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfrominfsectiona) function creates and destroys its own internal queue.</span></span> <span data-ttu-id="c7ad8-116">Обычно **сетупинсталлфроминфсектион** используется для вызова его после успешного копирования всех файлов для выполнения транзакций реестра и INI-файла.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-116">A common use for **SetupInstallFromInfSection** is to call it after all files have been successfully copied to perform the registry and INI transactions.</span></span>

<span data-ttu-id="c7ad8-117">В Windows 2000 DLL-файлы могут быть самостоятельно зарегистрированы путем вызова [**сетупинсталлфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfrominfsectiona) для INF-файла, содержащего директиву **Регистердллс** в разделе **установки** .</span><span class="sxs-lookup"><span data-stu-id="c7ad8-117">On Windows 2000, DLL files may be self-registered by calling [**SetupInstallFromInfSection**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfrominfsectiona) on an INF file that includes the **RegisterDlls** directive in its **Install** section.</span></span> <span data-ttu-id="c7ad8-118">**Сетупинсталлфроминфсектион** также может самостоятельно регистрировать 32-разрядные библиотеки dll из 64-разрядного процесса.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-118">**SetupInstallFromInfSection** can also self-register 32-bit DLLs from a 64-bit process.</span></span>

<span data-ttu-id="c7ad8-119">В 64-разрядных операционных системах [**сетупинсталлфроминфсектион**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfrominfsectiona) может быть вызван для выполнения операций с 32-разрядной частью реестра.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-119">On 64-bit operating systems, [**SetupInstallFromInfSection**](/windows/desktop/api/Setupapi/nf-setupapi-setupinstallfrominfsectiona) may be called to perform operations on the 32-bit portion of the registry.</span></span> <span data-ttu-id="c7ad8-120">Чтобы добавить раздел реестра в 32-разрядную часть реестра, включите \_ флаг флг аддрег \_ 32BITKEY в строку **аддрег** INF-файла.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-120">To add a registry key to the 32-bit portion of the registry, include the FLG\_ADDREG\_32BITKEY flag in the **AddReg** line of the INF.</span></span> <span data-ttu-id="c7ad8-121">Чтобы удалить раздел реестра только в 32-разрядной части реестра, включите \_ ключ флг делрег \_ 32BITKEY в строку **делрег** .</span><span class="sxs-lookup"><span data-stu-id="c7ad8-121">To delete a registry key only in the 32-bit portion of the registry, include the FLG\_DELREG\_32BITKEY key in the **DelReg** line.</span></span> <span data-ttu-id="c7ad8-122">Чтобы установить или очистить двоичное значение только в 32-разрядной части реестра, включите ФЛГ \_ битрег \_ 32BITKEY в строку **битрег** .</span><span class="sxs-lookup"><span data-stu-id="c7ad8-122">To set or clear a binary value only in the 32-bit portion of the registry, include the FLG\_BITREG\_32BITKEY in the **BitReg** line.</span></span>

<span data-ttu-id="c7ad8-123">Помимо перечисленных выше функций, API установки включает функции, которые ставят операции установки файлов в очередь, либо по файлам, либо по разделу INF.</span><span class="sxs-lookup"><span data-stu-id="c7ad8-123">In addition to the functions previously listed, the Setup API includes functions that queue file installation operations, either by file, or by INF section.</span></span> <span data-ttu-id="c7ad8-124">Дополнительные сведения см. в разделе [очереди файлов](file-queues.md).</span><span class="sxs-lookup"><span data-stu-id="c7ad8-124">For more information, see [File Queues](file-queues.md).</span></span>

 

 



