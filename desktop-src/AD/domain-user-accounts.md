---
title: Использование учетной записи пользователя домена в качестве учетной записи входа службы
description: Учетная запись пользователя домена позволяет службе использовать все преимущества функций безопасности служб Windows и Microsoft домен Active Directory Services.
ms.assetid: 03c486fd-faec-450c-9348-314680eb73cb
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.custom: contperf-fy21q3
ms.openlocfilehash: f482359eb8445cacef12c46716ecde662a95d46d
ms.sourcegitcommit: 11f52354f570aacaf1ba2a266b2e507abd73352a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "105651560"
---
# <a name="using-a-domain-user-account-as-a-service-logon-account"></a><span data-ttu-id="aeadf-103">Использование учетной записи пользователя домена в качестве учетной записи входа службы</span><span class="sxs-lookup"><span data-stu-id="aeadf-103">Using a Domain User Account as a Service Logon Account</span></span>

<span data-ttu-id="aeadf-104">Учетная запись пользователя домена позволяет службе использовать все преимущества функций безопасности служб Windows и Microsoft домен Active Directory Services.</span><span class="sxs-lookup"><span data-stu-id="aeadf-104">A domain user account enables the service to take full advantage of the service security features of Windows and Microsoft Active Directory Domain Services.</span></span> <span data-ttu-id="aeadf-105">Служба имеет любые локальные и сетевые права доступа к учетной записи или любой группе, членом которой является эта учетная запись.</span><span class="sxs-lookup"><span data-stu-id="aeadf-105">The service has whatever local and network access is granted to the account, or to any groups of which the account is a member.</span></span> <span data-ttu-id="aeadf-106">Служба может поддерживать взаимную проверку подлинности Kerberos.</span><span class="sxs-lookup"><span data-stu-id="aeadf-106">The service can support Kerberos mutual authentication.</span></span>

> [!Note]  
> <span data-ttu-id="aeadf-107">Следующая документация предназначена для разработчиков.</span><span class="sxs-lookup"><span data-stu-id="aeadf-107">The following documentation is for developers.</span></span> <span data-ttu-id="aeadf-108">Если вы являетесь конечным пользователем, который ищет сведения об ошибке, связанной с учетными записями пользователей домена, см. на [форумах сообщества Майкрософт](https://answers.microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="aeadf-108">If you are an end-user looking for information about an error message involving domain user accounts, see the [Microsoft community forums](https://answers.microsoft.com).</span></span> <span data-ttu-id="aeadf-109">Дополнительные сведения об управлении учетными записями пользователей домена см. на [сайте TechNet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc754217(v=ws.11)).</span><span class="sxs-lookup"><span data-stu-id="aeadf-109">For information about managing domain user accounts, see [TechNet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc754217(v=ws.11)).</span></span>

<span data-ttu-id="aeadf-110">Преимущество использования учетной записи пользователя домена заключается в том, что действия службы ограничены правами доступа и привилегиями, связанными с учетной записью.</span><span class="sxs-lookup"><span data-stu-id="aeadf-110">The advantage of using a domain user account is that the service's actions are limited by the access rights and privileges associated with the account.</span></span> <span data-ttu-id="aeadf-111">В отличие от `LocalSystem` службы, ошибки в службе учетных записей пользователей не могут повредить систему.</span><span class="sxs-lookup"><span data-stu-id="aeadf-111">Unlike a `LocalSystem` service, bugs in a user-account service cannot damage the system.</span></span> <span data-ttu-id="aeadf-112">Если служба скомпрометирована атакой на систему безопасности, повреждение будет изолировано от операций, которые система разрешает для выполнения учетной записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="aeadf-112">If the service is compromised by a security attack, the damage is isolated to the operations that the system allows the user account to perform.</span></span> <span data-ttu-id="aeadf-113">В то же время клиенты, работающие на различных уровнях привилегий, могут подключаться к службе, что позволяет службе олицетворять клиента для выполнения конфиденциальных операций.</span><span class="sxs-lookup"><span data-stu-id="aeadf-113">At the same time, clients running at varying privilege levels can connect to the service, which enables the service to impersonate a client to perform sensitive operations.</span></span>

<span data-ttu-id="aeadf-114">Учетная запись пользователя службы не должна быть членом каких-либо групп администраторов, являющихся локальными, доменными или корпоративными.</span><span class="sxs-lookup"><span data-stu-id="aeadf-114">A service's user account should not be a member of any administrators groups that are local, domain, or enterprise.</span></span> <span data-ttu-id="aeadf-115">Если службе требуются права локального администратора, запустите ее под `LocalSystem` учетной записью.</span><span class="sxs-lookup"><span data-stu-id="aeadf-115">If your service needs local administrative privileges, run it under the `LocalSystem` account.</span></span> <span data-ttu-id="aeadf-116">Для операций, требующих прав администратора домена, выполните их, выполнив олицетворение контекста безопасности клиентского приложения.</span><span class="sxs-lookup"><span data-stu-id="aeadf-116">For operations that require domain administrative privileges, perform them by impersonating the security context of a client application.</span></span>

<span data-ttu-id="aeadf-117">Экземпляр службы, использующий учетную запись пользователя домена, требует периодического административного действия для сохранения пароля учетной записи.</span><span class="sxs-lookup"><span data-stu-id="aeadf-117">A service instance that uses a domain user account requires periodic administrative action to maintain the account password.</span></span> <span data-ttu-id="aeadf-118">Диспетчер управления службами (SCM) на главном компьютере экземпляра службы кэширует пароль учетной записи для использования при ведении журнала в службе.</span><span class="sxs-lookup"><span data-stu-id="aeadf-118">The service control manager (SCM) on the host computer of a service instance caches the account password for use in logging on the service.</span></span> <span data-ttu-id="aeadf-119">При изменении пароля учетной записи необходимо также обновить кэшированный пароль на главном компьютере, на котором установлена служба.</span><span class="sxs-lookup"><span data-stu-id="aeadf-119">When you change the account password, you must also update the cached password on the host computer where the service is installed.</span></span> <span data-ttu-id="aeadf-120">Дополнительные сведения и пример кода см. в разделе [изменение пароля учетной записи пользователя службы](changing-the-password-on-a-serviceampaposs-user-account.md).</span><span class="sxs-lookup"><span data-stu-id="aeadf-120">For more information and a code example, see [Changing the Password on a Service's User Account](changing-the-password-on-a-serviceampaposs-user-account.md).</span></span> <span data-ttu-id="aeadf-121">Вы можете избежать регулярного обслуживания, не изменяя пароль, но это увеличит вероятность атаки на пароль в учетной записи службы.</span><span class="sxs-lookup"><span data-stu-id="aeadf-121">You could avoid the regular maintenance by leaving the password unchanged, but that would increase the likelihood of a password attack on the service account.</span></span> <span data-ttu-id="aeadf-122">Имейте в виду, что несмотря на то, что SCM хранит пароль в защищенной части реестра, он, тем не менее, подвергается атакам.</span><span class="sxs-lookup"><span data-stu-id="aeadf-122">Be aware that even though the SCM stores the password in a secure portion of the registry, it is nevertheless subject to attack.</span></span>

<span data-ttu-id="aeadf-123">Учетная запись пользователя домена имеет два формата имен: различающееся имя объекта пользователя в каталоге и формат "", <domain> \\ <username> используемый локальным диспетчером управления службами.</span><span class="sxs-lookup"><span data-stu-id="aeadf-123">A domain user account has two name formats: the distinguished name of the user object in the directory and the "<domain>\\<username>" format used by the local service control manager.</span></span> <span data-ttu-id="aeadf-124">Дополнительные сведения и пример кода, который преобразует из одного формата в другой, см. в разделе [Преобразование форматов имени учетной записи домена](converting-domain-account-name-formats.md).</span><span class="sxs-lookup"><span data-stu-id="aeadf-124">For more information and a code example that converts from one format to the other, see [Converting Domain Account Name Formats](converting-domain-account-name-formats.md).</span></span>

 

 
