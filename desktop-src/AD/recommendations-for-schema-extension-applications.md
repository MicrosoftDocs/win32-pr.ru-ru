---
title: Рекомендации для приложений расширения схемы
description: Этот раздел содержит рекомендации для приложений расширения схемы.
ms.assetid: 615e927e-a113-4557-b354-55a208a649eb
ms.tgt_platform: multiple
keywords:
- Рекомендации для приложений расширения схемы AD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2393211eb910ce4bc490667398da7f38d212ddcf
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "104133663"
---
# <a name="recommendations-for-schema-extension-applications"></a><span data-ttu-id="61240-104">Рекомендации для приложений расширения схемы</span><span class="sxs-lookup"><span data-stu-id="61240-104">Recommendations for Schema Extension Applications</span></span>

<span data-ttu-id="61240-105">В дополнение к предварительным требованиям для приложений расширения схемы рекомендуется использовать следующие рекомендации.</span><span class="sxs-lookup"><span data-stu-id="61240-105">In addition to the prerequisites, the following best practices are recommended for schema extension applications:</span></span>

-   <span data-ttu-id="61240-106">Найдите хозяин схемы.</span><span class="sxs-lookup"><span data-stu-id="61240-106">Find the schema master.</span></span> <span data-ttu-id="61240-107">Выполните привязку к схеме на контроллере домена, который является хозяином схемы.</span><span class="sxs-lookup"><span data-stu-id="61240-107">Bind to the schema on the DC that is the schema master.</span></span> <span data-ttu-id="61240-108">Избегайте необязательного изменения роли хозяина схемы между контроллерами домена.</span><span class="sxs-lookup"><span data-stu-id="61240-108">Avoid unnecessarily changing the schema master role between DCs.</span></span> <span data-ttu-id="61240-109">Для привязки к контейнеру схемы на хозяине схемы.</span><span class="sxs-lookup"><span data-stu-id="61240-109">To bind to the schema container on the schema master.</span></span> <span data-ttu-id="61240-110">Дополнительные сведения см. в разделе [Предварительные требования для установки расширения схемы](prerequisites-for-installing-a-schema-extension.md).</span><span class="sxs-lookup"><span data-stu-id="61240-110">For more information, see [Prerequisites for Installing a Schema Extension](prerequisites-for-installing-a-schema-extension.md).</span></span>
-   <span data-ttu-id="61240-111">Перед выполнением какого-либо действия проверьте свойство **алловедчилдклассесеффективе** контейнера схемы, чтобы убедиться, что можно создавать атрибуты и (или) классы.</span><span class="sxs-lookup"><span data-stu-id="61240-111">Before performing any action, check the **allowedChildClassesEffective** property of the schema container to verify that you can create attributes and/or classes.</span></span> <span data-ttu-id="61240-112">Если **attributeSchema** и **classSchema** не являются значениями в этом свойстве, у вас недостаточно прав для добавления атрибутов или классов в схему.</span><span class="sxs-lookup"><span data-stu-id="61240-112">If **attributeSchema** and **classSchema** are not values in that property, you do not have sufficient rights to add attributes or classes to the schema.</span></span> <span data-ttu-id="61240-113">Дополнительные сведения см. [в разделе пример кода для проверки прав на создание объектов схемы](example-code-for-checking-for-rights-to-create-schema-objects.md).</span><span class="sxs-lookup"><span data-stu-id="61240-113">For more information, see [Example Code for Checking for Rights to Create Schema Objects](example-code-for-checking-for-rights-to-create-schema-objects.md).</span></span>
-   <span data-ttu-id="61240-114">Убедитесь, что в реестре хозяина схемы правильно задано обновление схемы.</span><span class="sxs-lookup"><span data-stu-id="61240-114">Ensure that the Schema Update Allowed is set appropriately in the registry of the schema master.</span></span> <span data-ttu-id="61240-115">Чтобы создать или задать это значение, восстановите его исходное состояние в рамках подпрограммы очистки приложения.</span><span class="sxs-lookup"><span data-stu-id="61240-115">To create or set this value, restore it to its original state as part of your application clean-up routine.</span></span> <span data-ttu-id="61240-116">Дополнительные сведения о проверке и установке этого значения см. [в разделе Включение изменений схемы в хозяине схемы](enabling-schema-changes-at-the-schema-master.md).</span><span class="sxs-lookup"><span data-stu-id="61240-116">For more information about checking and setting this value, see [Enabling Schema Changes at the Schema Master](enabling-schema-changes-at-the-schema-master.md).</span></span>
-   <span data-ttu-id="61240-117">Перед добавлением атрибутов или классов убедитесь, что они еще не существуют.</span><span class="sxs-lookup"><span data-stu-id="61240-117">Before adding attributes or classes, be sure that they do not already exist.</span></span> <span data-ttu-id="61240-118">Если они существуют, убедитесь, что они являются теми же атрибутами или классами, которые вы добавляете, а не атрибутом или классом, созданным пользователем с другим синтаксисом и свойствами, несовместимыми с атрибутами или классами.</span><span class="sxs-lookup"><span data-stu-id="61240-118">If they do exist, verify that they are the same attributes or classes you are adding and not an attribute or class created by someone with different syntax and properties that are incompatible with your attributes or classes.</span></span>

    <span data-ttu-id="61240-119">Для атрибутов, запросите **CN**, **attributeID**, **governsID**, **lDAPDisplayName** и **schemaIDGUID** , чтобы убедиться, что они еще не используются.</span><span class="sxs-lookup"><span data-stu-id="61240-119">For attributes, query for **cn**, **attributeID**, **governsID**, **lDAPDisplayName**, and **schemaIDGUID** to ensure they are not already used.</span></span> <span data-ttu-id="61240-120">Если добавить набор связанных атрибутов (один канал прямой связи, одна обратная ссылка), убедитесь, что они еще не используются.</span><span class="sxs-lookup"><span data-stu-id="61240-120">If you add a set of linked attributes (one forward link, one back link), ensure that the **linkID** s are not already used.</span></span> <span data-ttu-id="61240-121">Запрос для **governsID** , так как идентификатор объекта (OID) должен быть уникальным в атрибутах и классах.</span><span class="sxs-lookup"><span data-stu-id="61240-121">Query for **governsID** because the object identifier (OID) must be unique among attributes and classes.</span></span>

    <span data-ttu-id="61240-122">Для классов запросите **CN**, **governsID**, **attributeID**, **lDAPDisplayName** и **schemaIDGUID** , чтобы убедиться, что они еще не используются.</span><span class="sxs-lookup"><span data-stu-id="61240-122">For classes, query for **cn**, **governsID**, **attributeID**, **lDAPDisplayName**, and **schemaIDGUID** to ensure they are not already used.</span></span> <span data-ttu-id="61240-123">Запрос **attributeID** , так как OID должен быть уникальным в классах и атрибутах.</span><span class="sxs-lookup"><span data-stu-id="61240-123">Query for **attributeID** because the OID must be unique among classes and attributes.</span></span>

    <span data-ttu-id="61240-124">Дополнительные сведения о проверке конфликтов именования см. в разделе [пример кода для обнаружения конфликтов именования схемы](example-code-for-detecting-schema-naming-collisions.md).</span><span class="sxs-lookup"><span data-stu-id="61240-124">For more information about checking for naming collisions, see [Example Code for Detecting Schema Naming Collisions](example-code-for-detecting-schema-naming-collisions.md).</span></span>

    <span data-ttu-id="61240-125">Если существуют атрибуты или классы, конфликтующие с новыми атрибутами или классами, приложение не должно применять изменения схемы.</span><span class="sxs-lookup"><span data-stu-id="61240-125">If attributes or classes exist that conflict with your new attributes or classes, your application should not apply your schema changes.</span></span>

-   <span data-ttu-id="61240-126">Если такой конфликт существует, приложение не должно применять изменения схемы.</span><span class="sxs-lookup"><span data-stu-id="61240-126">If such a collision exists, your application should not apply your schema changes.</span></span> <span data-ttu-id="61240-127">Администратору схемы может потребоваться устранить конфликт, а затем снова запустить приложение.</span><span class="sxs-lookup"><span data-stu-id="61240-127">The schema administrator may need to resolve the collision and then run your application again.</span></span> <span data-ttu-id="61240-128">Кроме того, можно использовать другой **lDAPDisplayName** . Однако все приложения, использующие атрибут или объект, должны знать об этом изменении.</span><span class="sxs-lookup"><span data-stu-id="61240-128">Alternatively, a different **lDAPDisplayName** could be used; however, any applications using the attribute or object must be aware of that change.</span></span> <span data-ttu-id="61240-129">Чтобы избежать конфликтов OID, получите идентификатор объекта из центра регистрации имен ISO.</span><span class="sxs-lookup"><span data-stu-id="61240-129">To help avoid OID collisions, obtain an OID from an ISO name registration authority.</span></span>
-   <span data-ttu-id="61240-130">Если приложение зависит от атрибутов или классов, которые были добавлены, обновите кэш схемы, прежде чем добавлять новые атрибуты или классы, зависящие от этих атрибутов или классов.</span><span class="sxs-lookup"><span data-stu-id="61240-130">If your application is dependent on attributes or classes that it has added, update the schema cache before adding the new attributes or classes that are dependent on those attributes or classes.</span></span> <span data-ttu-id="61240-131">Имейте в виду, что атрибут **счемаупдатенов** работает синхронно.</span><span class="sxs-lookup"><span data-stu-id="61240-131">Be aware that the **schemaUpdateNow** operational attribute is synchronous.</span></span> <span data-ttu-id="61240-132">То есть вызов метода [**iAds::P UT**](/windows/desktop/api/iads/nf-iads-iads-put) будет заблокирован до тех пор, пока не будет обновлен кэш схемы.</span><span class="sxs-lookup"><span data-stu-id="61240-132">That is, the [**IADs::Put**](/windows/desktop/api/iads/nf-iads-iads-put) method call will block until the schema cache is updated.</span></span> <span data-ttu-id="61240-133">При возвращении вызова кэш схемы был обновлен, а новые атрибуты и (или) классы становятся доступными.</span><span class="sxs-lookup"><span data-stu-id="61240-133">When the call returns, the schema cache has been updated and the new attributes and/or classes are accessible.</span></span>

    <span data-ttu-id="61240-134">Дополнительные сведения об обновлении кэша схемы см. [в разделе пример кода для обновления кэша схемы](example-code-for-updating-the-schema-cache.md).</span><span class="sxs-lookup"><span data-stu-id="61240-134">For more information about how to update the schema cache, see [Example Code for Updating the Schema Cache](example-code-for-updating-the-schema-cache.md).</span></span>

 

 