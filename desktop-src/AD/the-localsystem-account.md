---
title: Использование учетной записи LocalSystem в качестве учетной записи входа службы
description: Одним из преимуществ использования учетной записи LocalSystem является то, что служба имеет полный неограниченный доступ к локальным ресурсам.
ms.assetid: 2bc2e16d-bd25-4ec6-91a2-8d03052df021
ms.tgt_platform: multiple
keywords:
- Учетная запись LocalSystem
- локаль
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5bec3826984e28e29d3156b784da229f8e53e34e
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986135"
---
# <a name="using-the-localsystem-account-as-a-service-logon-account"></a><span data-ttu-id="f2538-105">Использование учетной записи LocalSystem в качестве учетной записи входа службы</span><span class="sxs-lookup"><span data-stu-id="f2538-105">Using the LocalSystem Account as a Service Logon Account</span></span>

<span data-ttu-id="f2538-106">Одним из преимуществ использования учетной записи LocalSystem является то, что служба имеет полный неограниченный доступ к локальным ресурсам.</span><span class="sxs-lookup"><span data-stu-id="f2538-106">One advantage of running under the LocalSystem account is that the service has complete unrestricted access to local resources.</span></span> <span data-ttu-id="f2538-107">Это также недостаток LocalSystem, поскольку служба LocalSystem может выполнять действия, которые могут привести к выводу всей системы.</span><span class="sxs-lookup"><span data-stu-id="f2538-107">This is also the disadvantage of LocalSystem because a LocalSystem service can do things that would bring down the entire system.</span></span> <span data-ttu-id="f2538-108">В частности, служба, работающая под учетной записью LocalSystem на контроллере домена (DC), имеет неограниченный доступ к службам домен Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f2538-108">In particular, a service running as LocalSystem on a domain controller (DC) has unrestricted access to Active Directory Domain Services.</span></span> <span data-ttu-id="f2538-109">Это означает, что ошибки в службе или атаки безопасности на службу могут повредить систему или, если служба находится на контроллере домена, что приводит к повреждению всей корпоративной сети.</span><span class="sxs-lookup"><span data-stu-id="f2538-109">This means that bugs in the service, or security attacks on the service, can damage the system or, if the service is on a DC, damage the entire enterprise network.</span></span>

<span data-ttu-id="f2538-110">По этим причинам администраторам домена в конфиденциальных установках будет необходимо соблюдать осторожность, чтобы разрешить службам работать в качестве LocalSystem.</span><span class="sxs-lookup"><span data-stu-id="f2538-110">For these reasons, domain administrators at sensitive installations will be cautious about allowing services to run as LocalSystem.</span></span> <span data-ttu-id="f2538-111">На самом деле, они могут иметь политики для него, особенно на контроллерах домена.</span><span class="sxs-lookup"><span data-stu-id="f2538-111">In fact, they may have policies against it, especially on DCs.</span></span> <span data-ttu-id="f2538-112">Если служба должна работать под учетной записью LocalSystem, документация для вашей службы должна выровняться с администраторами домена по причинам предоставления службе прав на выполнение с повышенными привилегиями.</span><span class="sxs-lookup"><span data-stu-id="f2538-112">If your service must run as LocalSystem, the documentation for your service should justify to domain administrators the reasons for granting the service the right to run at elevated privileges.</span></span> <span data-ttu-id="f2538-113">Службы не должны запускаться от имени LocalSystem на контроллере домена.</span><span class="sxs-lookup"><span data-stu-id="f2538-113">Services should never run as LocalSystem on a domain controller.</span></span> <span data-ttu-id="f2538-114">Дополнительные сведения и пример кода, демонстрирующий, как установщик службы или службы может определить, работает ли он на контроллере домена, см. в разделе [Проверка работы на контроллере домена](testing-whether-running-on-a-domain-controller.md).</span><span class="sxs-lookup"><span data-stu-id="f2538-114">For more information and a code example that shows how a service or service installer can determine if it is running on a domain controller, see [Testing Whether Running on a Domain Controller](testing-whether-running-on-a-domain-controller.md).</span></span>

<span data-ttu-id="f2538-115">Если служба выполняется под учетной записью LocalSystem на компьютере, который является членом домена, служба имеет какой-либо сетевой доступ к учетной записи компьютера или к любым группам, членом которых является учетная запись компьютера.</span><span class="sxs-lookup"><span data-stu-id="f2538-115">When a service runs under the LocalSystem account on a computer that is a domain member, the service has whatever network access is granted to the computer account, or to any groups of which the computer account is a member.</span></span> <span data-ttu-id="f2538-116">Имейте в виду, что в Windows 2000 учетная запись компьютера домена — это субъект-служба, аналогичный учетной записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="f2538-116">Be aware that in Windows 2000, a domain computer account is a service principal, similar to a user account.</span></span> <span data-ttu-id="f2538-117">Это означает, что учетная запись компьютера может находиться в группе безопасности, а запись ACE в дескрипторе безопасности может предоставлять доступ к учетной записи компьютера.</span><span class="sxs-lookup"><span data-stu-id="f2538-117">This means that a computer account can be in a security group, and an ACE in a security descriptor can grant access to a computer account.</span></span> <span data-ttu-id="f2538-118">Имейте в виду, что добавление учетных записей компьютеров в группы не рекомендуется по двум причинам:</span><span class="sxs-lookup"><span data-stu-id="f2538-118">Be aware that adding computer accounts to groups is not recommended for two reasons:</span></span>

-   <span data-ttu-id="f2538-119">Учетные записи компьютеров подлежат удалению и повторному созданию, если компьютер покидает, а затем снова присоединяется к домену.</span><span class="sxs-lookup"><span data-stu-id="f2538-119">Computer accounts are subject to deletion and re-creation if the computer leaves and then rejoins the domain.</span></span>
-   <span data-ttu-id="f2538-120">При добавлении учетной записи компьютера в группу все службы, работающие под учетной записью LocalSystem на этом компьютере, могут иметь права доступа группы.</span><span class="sxs-lookup"><span data-stu-id="f2538-120">If you add a computer account to a group, all services running as LocalSystem on that computer are permitted the access rights of the group.</span></span> <span data-ttu-id="f2538-121">Это связано с тем, что все службы LocalSystem совместно используют учетную запись компьютера сервера узла.</span><span class="sxs-lookup"><span data-stu-id="f2538-121">This is because all LocalSystem services share the computer account of their host server.</span></span> <span data-ttu-id="f2538-122">Поэтому особенно важно, чтобы учетные записи компьютеров не были членами групп администраторов домена.</span><span class="sxs-lookup"><span data-stu-id="f2538-122">For this reason, it is particularly important that computer accounts not be made members of any domain administrator groups.</span></span>

<span data-ttu-id="f2538-123">Учетные записи компьютеров обычно имеют неограниченные привилегии и не принадлежат к группам.</span><span class="sxs-lookup"><span data-stu-id="f2538-123">Computer accounts typically have few privileges and do not belong to groups.</span></span> <span data-ttu-id="f2538-124">Защита ACL по умолчанию в службах домен Active Directory Services допускает минимальный доступ для учетных записей компьютеров.</span><span class="sxs-lookup"><span data-stu-id="f2538-124">The default ACL protection in Active Directory Domain Services permits minimal access for computer accounts.</span></span> <span data-ttu-id="f2538-125">Следовательно, службы, работающие как LocalSystem, на компьютерах, отличных от DCs, имеют только минимальный доступ к службам домен Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f2538-125">Consequently, services running as LocalSystem, on computers other than DCs, have only minimal access to Active Directory Domain Services.</span></span>

<span data-ttu-id="f2538-126">Если служба выполняется под учетной записью LocalSystem, необходимо протестировать службу на рядовом сервере, чтобы обеспечить наличие у службы достаточных прав для чтения и записи на контроллеры домен Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f2538-126">If your service runs under LocalSystem, you must test your service on a member server to ensure that your service has sufficient rights to read/write to Active Directory Domain Controllers.</span></span> <span data-ttu-id="f2538-127">Контроллер домена не должен быть единственным компьютером Windows, на котором проверяются службы.</span><span class="sxs-lookup"><span data-stu-id="f2538-127">A domain controller should not be the only Windows computer on which you test your service.</span></span> <span data-ttu-id="f2538-128">Имейте в виду, что служба, работающая под учетной записью LocalSystem на контроллере домена Windows, имеет полный доступ к домен Active Directory службам и что рядовой сервер работает в контексте учетной записи компьютера, имеющей гораздо меньше прав.</span><span class="sxs-lookup"><span data-stu-id="f2538-128">Be aware that a service running under LocalSystem on a Windows domain controller has complete access to Active Directory Domain Services and that a member server runs in the context of the computer account which has substantially fewer rights.</span></span>

 

 




