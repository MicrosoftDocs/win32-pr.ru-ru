---
title: Получение списка SACL объекта
description: Дескриптор безопасности объекта в домен Active Directory Services может содержать системный список управления доступом (SACL).
ms.assetid: b1da91a2-d9b0-48a3-9de5-1e588209032d
ms.tgt_platform: multiple
keywords:
- СПИСОК SACL ACTIVE DIRECTORY
- SACL Active Directory, Извлечение списка SACL объекта
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 537846f2080aecdab8e22f5fce5bdfa36298fb74
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "104336777"
---
# <a name="retrieving-an-objects-sacl"></a><span data-ttu-id="bbcff-105">Получение списка SACL объекта</span><span class="sxs-lookup"><span data-stu-id="bbcff-105">Retrieving an Object's SACL</span></span>

<span data-ttu-id="bbcff-106">Дескриптор безопасности объекта в домен Active Directory Services может содержать системный список управления доступом (SACL).</span><span class="sxs-lookup"><span data-stu-id="bbcff-106">The security descriptor of an object in Active Directory Domain Services may contain a system access-control list (SACL).</span></span> <span data-ttu-id="bbcff-107">Список SACL содержит записи управления доступом (ACE), которые указывают типы попыток доступа, которые создают записи аудита в журнале событий безопасности контроллера домена.</span><span class="sxs-lookup"><span data-stu-id="bbcff-107">A SACL contains access-control entries (ACEs) that specify the types of access attempts that generate audit records in the security event log of a domain controller.</span></span> <span data-ttu-id="bbcff-108">Имейте в виду, что список SACL создает записи журнала только на контроллере домена, где произошла попыток доступа, а не на каждом контроллере домена, содержащем реплику объекта.</span><span class="sxs-lookup"><span data-stu-id="bbcff-108">Be aware that a SACL generates log entries only on the domain controller where the access attempt occurred, not on every DC that contains a replica of the object.</span></span>

<span data-ttu-id="bbcff-109">Чтобы задать или получить список SACL из дескриптора безопасности объекта, необходимо включить разрешение **\_ \_ имени безопасности SE** в маркере доступа запрашивающего потока.</span><span class="sxs-lookup"><span data-stu-id="bbcff-109">To set or get the SACL from an object security descriptor, the **SE\_SECURITY\_NAME** privilege must be enabled in the access token of the requesting thread.</span></span> <span data-ttu-id="bbcff-110">Группа Администраторы по умолчанию имеет эту привилегию и может быть назначена другим пользователям или группам.</span><span class="sxs-lookup"><span data-stu-id="bbcff-110">The administrators group has this privilege by default, and it can be assigned to other users or groups.</span></span> <span data-ttu-id="bbcff-111">Дополнительные сведения см. в статье [право доступа к SACL](/windows/desktop/SecAuthZ/sacl-access-right).</span><span class="sxs-lookup"><span data-stu-id="bbcff-111">For more information, see [SACL Access Right](/windows/desktop/SecAuthZ/sacl-access-right).</span></span>

<span data-ttu-id="bbcff-112">Чтобы получить и задать список SACL для объекта каталога, используйте интерфейс [**иадссекуритидескриптор**](/windows/desktop/api/iads/nn-iads-iadssecuritydescriptor) .</span><span class="sxs-lookup"><span data-stu-id="bbcff-112">To get and set the SACL of a directory object, use the [**IADsSecurityDescriptor**](/windows/desktop/api/iads/nn-iads-iadssecuritydescriptor) interface.</span></span> <span data-ttu-id="bbcff-113">С помощью C++ метод [**иадссекуритидескриптор:: Get \_ системакл**](/windows/desktop/ADSI/iadssecuritydescriptor-property-methods) возвращает указатель [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) .</span><span class="sxs-lookup"><span data-stu-id="bbcff-113">Using C++, the [**IADsSecurityDescriptor::get\_SystemAcl**](/windows/desktop/ADSI/iadssecuritydescriptor-property-methods) method returns an [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) pointer.</span></span> <span data-ttu-id="bbcff-114">Вызовите метод **QueryInterface** для этого указателя **IDispatch** , чтобы получить интерфейс [**иадсакцессконтроллист**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrollist) , и используйте методы этого интерфейса для доступа к отдельным записям ACE в списке SACL.</span><span class="sxs-lookup"><span data-stu-id="bbcff-114">Call **QueryInterface** on that **IDispatch** pointer to get an [**IADsAccessControlList**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrollist) interface, and use the methods on that interface to access the individual ACEs in the SACL.</span></span> <span data-ttu-id="bbcff-115">Дополнительные сведения о процедуре изменения списка SACL, подобной изменению списка DACL, см. в разделе [Установка прав доступа для объекта](setting-access-rights-on-an-object.md).</span><span class="sxs-lookup"><span data-stu-id="bbcff-115">For more information about the procedure for modifying a SACL, which is similar to that for modifying a DACL, see [Setting Access Rights on an Object](setting-access-rights-on-an-object.md).</span></span>

<span data-ttu-id="bbcff-116">Чтобы перечислить ACE в списке SACL, используйте метод [**иадсакцессконтроллист:: Get \_ \_ NewEnum**](/windows/desktop/api/iads/nf-iads-iadsaccesscontrollist-get__newenum) , который возвращает указатель [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) .</span><span class="sxs-lookup"><span data-stu-id="bbcff-116">To enumerate the ACEs in a SACL, use the [**IADsAccessControlList::get\_\_NewEnum**](/windows/desktop/api/iads/nf-iads-iadsaccesscontrollist-get__newenum) method, which returns an [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) pointer.</span></span> <span data-ttu-id="bbcff-117">Вызовите **QueryInterface** на этом указателе **IUnknown** , чтобы получить интерфейс [**IEnumVARIANT**](/windows/win32/api/oaidl/nn-oaidl-ienumvariant) .</span><span class="sxs-lookup"><span data-stu-id="bbcff-117">Call **QueryInterface** on that **IUnknown** pointer to get an [**IEnumVARIANT**](/windows/win32/api/oaidl/nn-oaidl-ienumvariant) interface.</span></span> <span data-ttu-id="bbcff-118">Используйте метод [**IEnumVARIANT:: Next**](/windows/win32/api/oaidl/nf-oaidl-ienumvariant-next) для перечисления записей ACE в списке ACL.</span><span class="sxs-lookup"><span data-stu-id="bbcff-118">Use the [**IEnumVARIANT::Next**](/windows/win32/api/oaidl/nf-oaidl-ienumvariant-next) method to enumerate the ACEs in the ACL.</span></span> <span data-ttu-id="bbcff-119">Каждый элемент ACE возвращается как **вариант** , содержащий указатель [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) ; Имейте в виду, что элемент **VT** является компонентом **VT \_ Dispatch**.</span><span class="sxs-lookup"><span data-stu-id="bbcff-119">Each ACE is returned as a **VARIANT** that contains an [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) pointer; be aware that the **vt** member is **VT\_DISPATCH**.</span></span> <span data-ttu-id="bbcff-120">Вызовите метод **QueryInterface** для этого указателя **IDispatch** , чтобы получить интерфейс [**иадсакцессконтролентри**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) для элемента управления доступом.</span><span class="sxs-lookup"><span data-stu-id="bbcff-120">Call **QueryInterface** on that **IDispatch** pointer to get an [**IADsAccessControlEntry**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) interface for the ACE.</span></span> <span data-ttu-id="bbcff-121">Используйте методы интерфейса **иадсакцессконтролентри** , чтобы задать или получить компоненты ACE.</span><span class="sxs-lookup"><span data-stu-id="bbcff-121">Use the **IADsAccessControlEntry** interface methods to set or get the components of an ACE.</span></span>

<span data-ttu-id="bbcff-122">Дополнительные сведения о SACL см. в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="bbcff-122">For more information about SACLs, see:</span></span>

-   [<span data-ttu-id="bbcff-123">Списки управления доступом (ACL)</span><span class="sxs-lookup"><span data-stu-id="bbcff-123">Access-Control Lists (ACLs)</span></span>](/windows/desktop/SecAuthZ/access-control-lists)
-   [<span data-ttu-id="bbcff-124">Создание записей аудита</span><span class="sxs-lookup"><span data-stu-id="bbcff-124">Audit Generation</span></span>](/windows/desktop/SecAuthZ/audit-generation)

 

 