---
title: Контроллеры домена и функции управления репликацией
description: Этот раздел содержит список функций, используемых для контроллера домена и управления репликацией.
ms.assetid: a92783c2-ffb8-473e-8484-1c05ca5453ff
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 00660658874bad4e34a8f6917e08289007cec4d7
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "104069791"
---
# <a name="domain-controller-and-replication-management-functions"></a><span data-ttu-id="c8eef-103">Контроллеры домена и функции управления репликацией</span><span class="sxs-lookup"><span data-stu-id="c8eef-103">Domain Controller and Replication Management Functions</span></span>

<span data-ttu-id="c8eef-104">Контроллеры домена и функции управления репликацией предоставляют средства для поиска данных о контроллере домена, преобразования имен сетевых объектов между различными форматами, управления именами участников-служб (SPN) и агентами службы каталогов (DSA) и управления репликацией серверов.</span><span class="sxs-lookup"><span data-stu-id="c8eef-104">The domain controller (DC) and replication management functions provide tools for finding data about a DC, converting the names of network objects between different formats, manipulating service principal names (SPNs) and directory service agents (DSAs), and managing replication of servers.</span></span> <span data-ttu-id="c8eef-105">Следующие функции позволяют разработчикам работать с контроллерами домена, репликацией и службой каталогов.</span><span class="sxs-lookup"><span data-stu-id="c8eef-105">The following functions enable developers to work with domain controllers, replication, and the directory service:</span></span>

-   [<span data-ttu-id="c8eef-106">**дсаддсидхистори**</span><span class="sxs-lookup"><span data-stu-id="c8eef-106">**DsAddSidHistory**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsaddsidhistorya)
-   [<span data-ttu-id="c8eef-107">**дсбинд**</span><span class="sxs-lookup"><span data-stu-id="c8eef-107">**DsBind**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsbinda)
-   [<span data-ttu-id="c8eef-108">**дсбиндингсеттимеаут**</span><span class="sxs-lookup"><span data-stu-id="c8eef-108">**DsBindingSetTimeout**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsbindingsettimeout)
-   [<span data-ttu-id="c8eef-109">**дсбиндтоистг**</span><span class="sxs-lookup"><span data-stu-id="c8eef-109">**DsBindToISTG**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsbindtoistga)
-   [<span data-ttu-id="c8eef-110">**дсбиндвискред**</span><span class="sxs-lookup"><span data-stu-id="c8eef-110">**DsBindWithCred**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsbindwithcreda)
-   [<span data-ttu-id="c8eef-111">**дсбиндвисспн**</span><span class="sxs-lookup"><span data-stu-id="c8eef-111">**DsBindWithSpn**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsbindwithspna)
-   [<span data-ttu-id="c8eef-112">**дсбиндвисспнекс**</span><span class="sxs-lookup"><span data-stu-id="c8eef-112">**DsBindWithSpnEx**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsbindwithspnexa)
-   [<span data-ttu-id="c8eef-113">**дсклиентмакеспнфортаржетсервер**</span><span class="sxs-lookup"><span data-stu-id="c8eef-113">**DsClientMakeSpnForTargetServer**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsclientmakespnfortargetservera)
-   [<span data-ttu-id="c8eef-114">**DsCrackNames**</span><span class="sxs-lookup"><span data-stu-id="c8eef-114">**DsCrackNames**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dscracknamesa)
-   [<span data-ttu-id="c8eef-115">**дскраккспн**</span><span class="sxs-lookup"><span data-stu-id="c8eef-115">**DsCrackSpn**</span></span>](/windows/desktop/api/Dsparse/nf-dsparse-dscrackspna)
-   [<span data-ttu-id="c8eef-116">**дскраккункуотедмангледрдн**</span><span class="sxs-lookup"><span data-stu-id="c8eef-116">**DsCrackUnquotedMangledRdn**</span></span>](/windows/desktop/api/Dsparse/nf-dsparse-dscrackunquotedmangledrdna)
-   [<span data-ttu-id="c8eef-117">**дсфридомаинконтроллеринфо**</span><span class="sxs-lookup"><span data-stu-id="c8eef-117">**DsFreeDomainControllerInfo**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsfreedomaincontrollerinfoa)
-   [<span data-ttu-id="c8eef-118">**дсфринамересулт**</span><span class="sxs-lookup"><span data-stu-id="c8eef-118">**DsFreeNameResult**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsfreenameresulta)
-   [<span data-ttu-id="c8eef-119">**дсфрипассвордкредентиалс**</span><span class="sxs-lookup"><span data-stu-id="c8eef-119">**DsFreePasswordCredentials**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsfreepasswordcredentials)
-   [<span data-ttu-id="c8eef-120">**дсфрисчемагуидмап**</span><span class="sxs-lookup"><span data-stu-id="c8eef-120">**DsFreeSchemaGuidMap**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsfreeschemaguidmapa)
-   [<span data-ttu-id="c8eef-121">**дсфриспнаррай**</span><span class="sxs-lookup"><span data-stu-id="c8eef-121">**DsFreeSpnArray**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsfreespnarraya)
-   [<span data-ttu-id="c8eef-122">**дсжетдомаинконтроллеринфо**</span><span class="sxs-lookup"><span data-stu-id="c8eef-122">**DsGetDomainControllerInfo**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsgetdomaincontrollerinfoa)
-   [<span data-ttu-id="c8eef-123">**дсжетрднв**</span><span class="sxs-lookup"><span data-stu-id="c8eef-123">**DsGetRdnW**</span></span>](/windows/desktop/api/Dsparse/nf-dsparse-dsgetrdnw)
-   [<span data-ttu-id="c8eef-124">**дсжетспн**</span><span class="sxs-lookup"><span data-stu-id="c8eef-124">**DsGetSpn**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsgetspna)
-   [<span data-ttu-id="c8eef-125">**дсинхеритсекуритидентити**</span><span class="sxs-lookup"><span data-stu-id="c8eef-125">**DsInheritSecurityIdentity**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsinheritsecurityidentitya)
-   [<span data-ttu-id="c8eef-126">**дсисмангледдн**</span><span class="sxs-lookup"><span data-stu-id="c8eef-126">**DsIsMangledDn**</span></span>](/windows/desktop/api/Dsparse/nf-dsparse-dsismangleddna)
-   [<span data-ttu-id="c8eef-127">**дсисмангледрднвалуе**</span><span class="sxs-lookup"><span data-stu-id="c8eef-127">**DsIsMangledRdnValue**</span></span>](/windows/desktop/api/Dsparse/nf-dsparse-dsismangledrdnvaluea)
-   [<span data-ttu-id="c8eef-128">**дслистдомаинсинсите**</span><span class="sxs-lookup"><span data-stu-id="c8eef-128">**DsListDomainsInSite**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dslistdomainsinsitea)
-   [<span data-ttu-id="c8eef-129">**дслистинфофорсервер**</span><span class="sxs-lookup"><span data-stu-id="c8eef-129">**DsListInfoForServer**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dslistinfoforservera)
-   [<span data-ttu-id="c8eef-130">**дслистролес**</span><span class="sxs-lookup"><span data-stu-id="c8eef-130">**DsListRoles**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dslistrolesa)
-   [<span data-ttu-id="c8eef-131">**дслистсерверсфордомаининсите**</span><span class="sxs-lookup"><span data-stu-id="c8eef-131">**DsListServersForDomainInSite**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dslistserversfordomaininsitea)
-   [<span data-ttu-id="c8eef-132">**дслистсерверсинсите**</span><span class="sxs-lookup"><span data-stu-id="c8eef-132">**DsListServersInSite**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dslistserversinsitea)
-   [<span data-ttu-id="c8eef-133">**дслистситес**</span><span class="sxs-lookup"><span data-stu-id="c8eef-133">**DsListSites**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dslistsitesa)
-   [<span data-ttu-id="c8eef-134">**дсмакепассвордкредентиалс**</span><span class="sxs-lookup"><span data-stu-id="c8eef-134">**DsMakePasswordCredentials**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsmakepasswordcredentialsa)
-   [<span data-ttu-id="c8eef-135">**дсмакеспн**</span><span class="sxs-lookup"><span data-stu-id="c8eef-135">**DsMakeSpn**</span></span>](/windows/desktop/api/Dsparse/nf-dsparse-dsmakespna)
-   [<span data-ttu-id="c8eef-136">**дсмапсчемагуидс**</span><span class="sxs-lookup"><span data-stu-id="c8eef-136">**DsMapSchemaGuids**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsmapschemaguidsa)
-   [<span data-ttu-id="c8eef-137">**дскуериситесбикост**</span><span class="sxs-lookup"><span data-stu-id="c8eef-137">**DsQuerySitesByCost**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsquerysitesbycosta)
-   [<span data-ttu-id="c8eef-138">**дскуериситесфри**</span><span class="sxs-lookup"><span data-stu-id="c8eef-138">**DsQuerySitesFree**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsquerysitesfree)
-   [<span data-ttu-id="c8eef-139">**дскуотерднвалуе**</span><span class="sxs-lookup"><span data-stu-id="c8eef-139">**DsQuoteRdnValue**</span></span>](/windows/desktop/api/Dsparse/nf-dsparse-dsquoterdnvaluea)
-   [<span data-ttu-id="c8eef-140">**дсремоведсдомаин**</span><span class="sxs-lookup"><span data-stu-id="c8eef-140">**DsRemoveDsDomain**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsremovedsdomaina)
-   [<span data-ttu-id="c8eef-141">**дсремоведссервер**</span><span class="sxs-lookup"><span data-stu-id="c8eef-141">**DsRemoveDsServer**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsremovedsservera)
-   [<span data-ttu-id="c8eef-142">**дсрепликаадд**</span><span class="sxs-lookup"><span data-stu-id="c8eef-142">**DsReplicaAdd**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicaadda)
-   [<span data-ttu-id="c8eef-143">**дсрепликаконсистенцичекк**</span><span class="sxs-lookup"><span data-stu-id="c8eef-143">**DsReplicaConsistencyCheck**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicaconsistencycheck)
-   [<span data-ttu-id="c8eef-144">**дсрепликадел**</span><span class="sxs-lookup"><span data-stu-id="c8eef-144">**DsReplicaDel**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicadela)
-   [<span data-ttu-id="c8eef-145">**дсрепликафриинфо**</span><span class="sxs-lookup"><span data-stu-id="c8eef-145">**DsReplicaFreeInfo**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicafreeinfo)
-   [<span data-ttu-id="c8eef-146">**дсрепликажетинфо**</span><span class="sxs-lookup"><span data-stu-id="c8eef-146">**DsReplicaGetInfo**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicagetinfow)
-   [<span data-ttu-id="c8eef-147">**DsReplicaGetInfo2**</span><span class="sxs-lookup"><span data-stu-id="c8eef-147">**DsReplicaGetInfo2**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicagetinfo2w)
-   [<span data-ttu-id="c8eef-148">**дсрепликамодифи**</span><span class="sxs-lookup"><span data-stu-id="c8eef-148">**DsReplicaModify**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicamodifya)
-   [<span data-ttu-id="c8eef-149">**дсрепликасинк**</span><span class="sxs-lookup"><span data-stu-id="c8eef-149">**DsReplicaSync**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicasynca)
-   [<span data-ttu-id="c8eef-150">**дсрепликасинкалл**</span><span class="sxs-lookup"><span data-stu-id="c8eef-150">**DsReplicaSyncAll**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicasyncalla)
-   [<span data-ttu-id="c8eef-151">**дсрепликаупдатерефс**</span><span class="sxs-lookup"><span data-stu-id="c8eef-151">**DsReplicaUpdateRefs**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicaupdaterefsa)
-   [<span data-ttu-id="c8eef-152">**дсрепликаверифйобжектс**</span><span class="sxs-lookup"><span data-stu-id="c8eef-152">**DsReplicaVerifyObjects**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicaverifyobjectsa)
-   [<span data-ttu-id="c8eef-153">**дссерверрегистерспн**</span><span class="sxs-lookup"><span data-stu-id="c8eef-153">**DsServerRegisterSpn**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsserverregisterspna)
-   [<span data-ttu-id="c8eef-154">**дсунбинд**</span><span class="sxs-lookup"><span data-stu-id="c8eef-154">**DsUnBind**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsunbinda)
-   [<span data-ttu-id="c8eef-155">**дсункуотерднвалуе**</span><span class="sxs-lookup"><span data-stu-id="c8eef-155">**DsUnquoteRdnValue**</span></span>](/windows/desktop/api/Dsparse/nf-dsparse-dsunquoterdnvaluea)
-   [<span data-ttu-id="c8eef-156">**дсвритеаккаунтспн**</span><span class="sxs-lookup"><span data-stu-id="c8eef-156">**DsWriteAccountSpn**</span></span>](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dswriteaccountspna)
-   <span data-ttu-id="c8eef-157">[**синкупдатепрок**](/previous-versions/windows/desktop/legacy/ms677968(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="c8eef-157">[**SyncUpdateProc**](/previous-versions/windows/desktop/legacy/ms677968(v=vs.85))</span></span>

<span data-ttu-id="c8eef-158">Для большинства из этих функций необходим маркер, привязанный к службе каталогов.</span><span class="sxs-lookup"><span data-stu-id="c8eef-158">Most of these functions require a handle bound to the directory service.</span></span> <span data-ttu-id="c8eef-159">Функции [**дсбинд**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsbinda) и [**дсбиндвискред**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsbindwithcreda) запускают сеанс RPC с определенным контроллером домена, а затем привязывают маркер к службе каталогов и возвращают этот обработчик.</span><span class="sxs-lookup"><span data-stu-id="c8eef-159">The [**DsBind**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsbinda) and [**DsBindWithCred**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsbindwithcreda) functions start an RPC session with a particular domain controller, then they bind a handle to the directory service and return the handle.</span></span> <span data-ttu-id="c8eef-160">Если этот маркер больше не требуется, используйте функцию [**дсунбинд**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsunbinda) , чтобы завершить сеанс RPC и отменить привязку этого маркера.</span><span class="sxs-lookup"><span data-stu-id="c8eef-160">When the handle is no longer required, use the [**DsUnBind**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsunbinda) function to end the RPC session and unbind the handle.</span></span>

<span data-ttu-id="c8eef-161">Репликация выполняется между исходным сервером и целевым сервером.</span><span class="sxs-lookup"><span data-stu-id="c8eef-161">Replication occurs between a source server and a destination server.</span></span> <span data-ttu-id="c8eef-162">Сервер-источник содержит список целевых серверов, на которые он должен выполнять репликацию, а целевой сервер поддерживает список исходных серверов, с которых он получает репликацию.</span><span class="sxs-lookup"><span data-stu-id="c8eef-162">A source server maintains a list of destination servers to which it should replicate, and a destination server maintains a list of source servers from which it receives replication.</span></span> <span data-ttu-id="c8eef-163">Используйте функцию [**дсрепликаадд**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicaadda) для добавления в список исходных серверов на целевом сервере и используйте функцию [**дсрепликадел**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicadela) для удаления ссылок из списка исходных серверов на целевом сервере.</span><span class="sxs-lookup"><span data-stu-id="c8eef-163">Use the [**DsReplicaAdd**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicaadda) function to add to the list of source servers on a destination server, and use the [**DsReplicaDel**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicadela) function to remove references from the source server list on a destination server.</span></span> <span data-ttu-id="c8eef-164">Функцию [**дсрепликамодифи**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicamodifya) можно использовать для изменения существующей ссылки на исходный сервер на целевом сервере.</span><span class="sxs-lookup"><span data-stu-id="c8eef-164">The [**DsReplicaModify**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicamodifya) function may be used to change an existing source server reference on a destination server.</span></span> <span data-ttu-id="c8eef-165">Чтобы изменить список целевых серверов на исходном сервере, используйте функцию [**дсрепликаупдатерефс**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicaupdaterefsa) .</span><span class="sxs-lookup"><span data-stu-id="c8eef-165">To change the list of destination servers on a source server, use the [**DsReplicaUpdateRefs**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicaupdaterefsa) function.</span></span>

<span data-ttu-id="c8eef-166">Фактическая репликация выполняется функциями [**дсрепликасинк**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicasynca) и [**дсрепликасинкалл**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicasyncalla) .</span><span class="sxs-lookup"><span data-stu-id="c8eef-166">Actual replication is performed by the [**DsReplicaSync**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicasynca) and [**DsReplicaSyncAll**](/windows/desktop/api/Ntdsapi/nf-ntdsapi-dsreplicasyncalla) functions.</span></span> <span data-ttu-id="c8eef-167">Функция **дсрепликасинк** синхронизирует конкретный целевой сервер с одним исходным сервером.</span><span class="sxs-lookup"><span data-stu-id="c8eef-167">The **DsReplicaSync** function synchronizes a specific destination server with a single source server.</span></span> <span data-ttu-id="c8eef-168">Используйте функцию **дсрепликасинкалл** для синхронизации целевого сервера со всеми остальными серверами сайта.</span><span class="sxs-lookup"><span data-stu-id="c8eef-168">Use the **DsReplicaSyncAll** function to synchronize a destination server with all other servers in the site.</span></span>

 

 