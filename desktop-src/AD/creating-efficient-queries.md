---
title: Создание эффективных запросов
description: В следующей таблице приведены важные понятия, которые следует учитывать при создании эффективного запроса.
ms.assetid: 1eb92d74-0a17-43f9-b5bf-eed731a52551
ms.tgt_platform: multiple
keywords:
- Active Directory примеры Active Directory, создание эффективных запросов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c8902fd3d512b940890ebdfd4c2640786c88c82a
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "103789583"
---
# <a name="creating-efficient-queries"></a><span data-ttu-id="2072a-104">Создание эффективных запросов</span><span class="sxs-lookup"><span data-stu-id="2072a-104">Creating Efficient Queries</span></span>

<span data-ttu-id="2072a-105">В следующей таблице приведены важные понятия, которые следует учитывать при создании эффективного запроса.</span><span class="sxs-lookup"><span data-stu-id="2072a-105">The following table identifies important concepts to consider when creating an efficient query.</span></span>



| <span data-ttu-id="2072a-106">Область</span><span class="sxs-lookup"><span data-stu-id="2072a-106">Area</span></span>                  | <span data-ttu-id="2072a-107">Описание</span><span class="sxs-lookup"><span data-stu-id="2072a-107">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|-----------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="2072a-108">Индексация</span><span class="sxs-lookup"><span data-stu-id="2072a-108">Indexing</span></span>              | <span data-ttu-id="2072a-109">Убедитесь, что фильтр запроса содержит по крайней мере один индексированный атрибут.</span><span class="sxs-lookup"><span data-stu-id="2072a-109">Ensure that the query filter contains at least one indexed attribute.</span></span><br/> <span data-ttu-id="2072a-110">Дополнительные сведения см. в разделе [индексированные атрибуты](indexed-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="2072a-110">For more information, see [Indexed Attributes](indexed-attributes.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="2072a-111">Сравнение класса и категории</span><span class="sxs-lookup"><span data-stu-id="2072a-111">Class vs. Category</span></span>    | <span data-ttu-id="2072a-112">Оператор "objectClass = XYZ" относится к объектам каталога, в которых "XYZ" представляет любой класс в иерархии классов объектов, а "objectCategory = XYZ", ссылается на объекты каталога, в которых "XYZ" определяет конкретный класс в иерархии классов объектов.</span><span class="sxs-lookup"><span data-stu-id="2072a-112">The statement "objectClass=xyz" refers to directory objects in which "xyz" represents any class in the object class hierarchy, whereas "objectCategory=xyz", refers to those directory objects in which "xyz" identifies a specific class in the object class hierarchy.</span></span> <span data-ttu-id="2072a-113">Свойство [**objectClass**](/windows/desktop/ADSchema/a-objectclass) может принимать несколько значений, тогда как [**objectCategory**](/windows/desktop/ADSchema/a-objectcategory) принимает одно значение и, таким образом, лучше подходит для сопоставления типов объектов в поиске по каталогу.</span><span class="sxs-lookup"><span data-stu-id="2072a-113">The [**objectClass**](/windows/desktop/ADSchema/a-objectclass) property can take multiple values, whereas [**objectCategory**](/windows/desktop/ADSchema/a-objectcategory) takes a single value and is, thus, better suited for type matching of objects in a directory search.</span></span><br/>                                                                                                                                                                                          |
| <span data-ttu-id="2072a-114">Поиск текста</span><span class="sxs-lookup"><span data-stu-id="2072a-114">Text searching</span></span>        | <span data-ttu-id="2072a-115">Старайтесь не искать текст в середине и в конце строки.</span><span class="sxs-lookup"><span data-stu-id="2072a-115">Avoid searching for text in the middle and on the end of a string.</span></span><br/> <span data-ttu-id="2072a-116">Например, "CN = \* Хилле \* " или "CN = \* лараусе".</span><span class="sxs-lookup"><span data-stu-id="2072a-116">For example, "cn=\*hille\*" or "cn=\*larouse".</span></span><br/> <span data-ttu-id="2072a-117">Использование более конкретных критериев сопоставления обычно повышает производительность поиска.</span><span class="sxs-lookup"><span data-stu-id="2072a-117">Using more specific matching criteria tends to increase search performance.</span></span> <span data-ttu-id="2072a-118">Это связано с тем, что службы домен Active Directory будут оценивать все предикаты, определяет индексы, а затем выбирают один индекс, который, скорее всего, будет выдавать наименьший набор возвращаемых значений.</span><span class="sxs-lookup"><span data-stu-id="2072a-118">This is because Active Directory Domain Services will evaluate all predicates, identifies the indices, and then chooses one index most likely to yield the smallest set of returned values.</span></span> <span data-ttu-id="2072a-119">Этот метод не подходит для поиска в середине и в конце строки.</span><span class="sxs-lookup"><span data-stu-id="2072a-119">This technique does not work well with mid- and end-string searches.</span></span> <span data-ttu-id="2072a-120">При отсутствии других параметров, кроме использования этих поисков, можно определить индекс кортежа для атрибута.</span><span class="sxs-lookup"><span data-stu-id="2072a-120">If you have no other option other than using these searches, you can define a tuple index for the attribute.</span></span><br/> <span data-ttu-id="2072a-121">Дополнительные сведения об индексах кортежей см. в статье [как работает индексирование кортежей](how-tuple-indexing-works.md).</span><span class="sxs-lookup"><span data-stu-id="2072a-121">For more details about tuple indexes see [How Tuple Indexing Works](how-tuple-indexing-works.md).</span></span><br/> |
| <span data-ttu-id="2072a-122">Поиск поддеревьев</span><span class="sxs-lookup"><span data-stu-id="2072a-122">Subtree searching</span></span>     | <span data-ttu-id="2072a-123">Используйте глобальный каталог при поиске по поддереву.</span><span class="sxs-lookup"><span data-stu-id="2072a-123">Use the global catalog if you are considering subtree searches.</span></span> <span data-ttu-id="2072a-124">Отслеживание ссылок требует обширных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2072a-124">Chasing referrals requires extensive resources.</span></span><br/> <span data-ttu-id="2072a-125">Дополнительные сведения см. в разделе [Указание других параметров поиска](specifying-other-search-options.md).</span><span class="sxs-lookup"><span data-stu-id="2072a-125">For more information, see [Specifying Other Search Options](specifying-other-search-options.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="2072a-126">Использование разбиения на страницы</span><span class="sxs-lookup"><span data-stu-id="2072a-126">Use of paging</span></span>         | <span data-ttu-id="2072a-127">Предположим, что поиск по поддереву вернет большой результирующий набор.</span><span class="sxs-lookup"><span data-stu-id="2072a-127">Assume that a subtree search will return a large result set.</span></span> <span data-ttu-id="2072a-128">Используйте разбиение по страницам при выполнении поиска по поддереву.</span><span class="sxs-lookup"><span data-stu-id="2072a-128">Use paging when performing subtree searches.</span></span> <span data-ttu-id="2072a-129">Сервер будет передавать большой результирующий набор в блоки, уменьшая ресурсы памяти на стороне сервера.</span><span class="sxs-lookup"><span data-stu-id="2072a-129">The server will stream a large result set in chunks reducing the server side memory resources.</span></span> <span data-ttu-id="2072a-130">Это минимизирует использование сети и сокращает потребность в отправке больших блоков данных по сети.</span><span class="sxs-lookup"><span data-stu-id="2072a-130">This minimizes network usage and reduces the need for sending large chunks of data over a network.</span></span><br/> <span data-ttu-id="2072a-131">Дополнительные сведения см. в разделе [Указание других параметров поиска](specifying-other-search-options.md).</span><span class="sxs-lookup"><span data-stu-id="2072a-131">For more information, see [Specifying Other Search Options](specifying-other-search-options.md).</span></span><br/>                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="2072a-132">Объединение поисков</span><span class="sxs-lookup"><span data-stu-id="2072a-132">Combine searches</span></span>      | <span data-ttu-id="2072a-133">Использование нескольких атрибутов для поиска.</span><span class="sxs-lookup"><span data-stu-id="2072a-133">Use multiple attributes for a search.</span></span> <span data-ttu-id="2072a-134">Один поиск объекта, считывающего два атрибута, более эффективен, чем два поиска одного и того же объекта, каждый из которых возвращает один атрибут.</span><span class="sxs-lookup"><span data-stu-id="2072a-134">One search of an object that reads two attributes is more efficient than two searches of the same object, each returning one attribute.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="2072a-135">Эффективное использование BIND</span><span class="sxs-lookup"><span data-stu-id="2072a-135">Efficient use of bind</span></span> | <span data-ttu-id="2072a-136">Выполните привязку к объекту один раз и удерживайте маркер привязки для оставшейся части сеанса.</span><span class="sxs-lookup"><span data-stu-id="2072a-136">Bind to an object one time and hold the binding handle for the rest of the session.</span></span> <span data-ttu-id="2072a-137">Не привязывать и не привязывать к каждому вызову.</span><span class="sxs-lookup"><span data-stu-id="2072a-137">Do not bind and unbind for each call.</span></span> <span data-ttu-id="2072a-138">При использовании ADO или OLE DB не создавайте много объектов соединения.</span><span class="sxs-lookup"><span data-stu-id="2072a-138">If you use ADO or OLE DB, do not create many connection objects.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="2072a-139">Кэширование Руддсе</span><span class="sxs-lookup"><span data-stu-id="2072a-139">RoodDSE caching</span></span>       | <span data-ttu-id="2072a-140">Прочтите rootDSE один раз и сохраните его содержимое для оставшейся части сеанса.</span><span class="sxs-lookup"><span data-stu-id="2072a-140">Read the rootDSE one time and remember its contents for the rest of your session.</span></span><br/> <span data-ttu-id="2072a-141">Дополнительные сведения см. в статье [бессерверная привязка и RootDSE](serverless-binding-and-rootdse.md).</span><span class="sxs-lookup"><span data-stu-id="2072a-141">For more information, see [Serverless Binding and RootDSE](serverless-binding-and-rootdse.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="2072a-142">Сохранение ссылок</span><span class="sxs-lookup"><span data-stu-id="2072a-142">Reference persistance</span></span> | <span data-ttu-id="2072a-143">Сохранять ссылки на объекты как идентификаторы GUID, а не различающиеся имена, чтобы их можно было переименовывать и удалять.</span><span class="sxs-lookup"><span data-stu-id="2072a-143">Persist references to objects as GUIDs, not distinguished names, in order to be rename and delete safe.</span></span><br/> <span data-ttu-id="2072a-144">Дополнительные сведения см. в разделе [Использование objectGUID для привязки к объекту](using-objectguid-to-bind-to-an-object.md).</span><span class="sxs-lookup"><span data-stu-id="2072a-144">For more information, see [Using objectGUID to Bind to an Object](using-objectguid-to-bind-to-an-object.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |



 

 

