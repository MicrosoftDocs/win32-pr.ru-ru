---
title: Общие сведения о методах Отслеживание изменений
description: Существует несколько способов, которым механизмы отслеживания изменений могут различаться в области отслеживания изменений. приложение может отслеживать изменения в одном атрибуте одного объекта, на все объекты в домене и т. д.
ms.assetid: 7359e851-61b7-420d-beb0-f7f33f79b007
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 91fce20dc5e9fe8fe98937bb13885be577185e04
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104067362"
---
# <a name="overview-of-change-tracking-techniques"></a><span data-ttu-id="1a47c-103">Общие сведения о методах Отслеживание изменений</span><span class="sxs-lookup"><span data-stu-id="1a47c-103">Overview of Change Tracking Techniques</span></span>

<span data-ttu-id="1a47c-104">Существует несколько способов, которые могут различаться механизмами отслеживания изменений:</span><span class="sxs-lookup"><span data-stu-id="1a47c-104">There are several ways that change tracking mechanisms can differ:</span></span>

-   <span data-ttu-id="1a47c-105">Область отслеживания изменений. приложение может отслеживать изменения в одном атрибуте одного объекта, на все объекты в домене и т. д.</span><span class="sxs-lookup"><span data-stu-id="1a47c-105">Scope for tracking changes: An application can track changes to a single attribute of a single object, to all objects in a domain, and so on.</span></span> <span data-ttu-id="1a47c-106">Если механизм соответствует требованиям приложения, приложение получает минимум ненужных данных и, таким способом, повышает производительность.</span><span class="sxs-lookup"><span data-stu-id="1a47c-106">If the mechanism matches the requirements of the application, the application receives a minimum of irrelevant data, and thus this enhances performance.</span></span>
-   <span data-ttu-id="1a47c-107">Временные шкалы. приложение уведомляется о каждом изменении по мере его появлении или может получать уведомления о выходе изменений в течение нескольких минут или часов.</span><span class="sxs-lookup"><span data-stu-id="1a47c-107">Timeliness: An application is notified of every change as it happens, or can be notified of the net effect of changes over a period of minutes or hours.</span></span>

    <span data-ttu-id="1a47c-108">Обработка менее своевременных данных может быть более эффективной, так как некоторые изменения могут быть свернуты в одну.</span><span class="sxs-lookup"><span data-stu-id="1a47c-108">Processing less timely data may be more efficient, because several changes may be collapsed into one.</span></span> <span data-ttu-id="1a47c-109">Например, если атрибут изменяется три раза в течение одного часа, то приложение, которое получает уведомления об изменениях, накопленных в течение часа, будет уведомлено об изменении только одного атрибута, а не на трех.</span><span class="sxs-lookup"><span data-stu-id="1a47c-109">For example, if an attribute changes three times within a one hour interval, an application notified of changes accumulated over an hour will be notified of just one attribute change, not three.</span></span>

    <span data-ttu-id="1a47c-110">При обдумывании временной шкалы учитывайте последствия задержки репликации.</span><span class="sxs-lookup"><span data-stu-id="1a47c-110">When thinking about timeliness, consider the effect of replication latency.</span></span> <span data-ttu-id="1a47c-111">Обновление, которое происходит на одном контроллере домена, мгновенно не реплицируется на другой контроллер домена.</span><span class="sxs-lookup"><span data-stu-id="1a47c-111">An update that originates on one domain controller does not replicate to another domain controller instantly.</span></span> <span data-ttu-id="1a47c-112">Необходимость использования временной шкалы отслеживания изменений гораздо выше, чем ожидаемая задержка репликации, часто не дает приложению никаких реальных преимуществ.</span><span class="sxs-lookup"><span data-stu-id="1a47c-112">Requiring change-tracking timeliness much better than the expected replication latency often gives no real benefit to the application.</span></span>

-   <span data-ttu-id="1a47c-113">Опрос и уведомление. при опросе приложение периодически отправляет запрос на контроллер домена на получение данных отслеживания изменений.</span><span class="sxs-lookup"><span data-stu-id="1a47c-113">Polling versus notification: With polling, an application periodically makes a request to a domain controller to receive change tracking data.</span></span> <span data-ttu-id="1a47c-114">С уведомлением контроллер домена отправляет изменения в приложение только после внесения изменений.</span><span class="sxs-lookup"><span data-stu-id="1a47c-114">With notification the domain controller sends changes to the application only when changes occur.</span></span>

    <span data-ttu-id="1a47c-115">Накладные расходы на опрос очевидны: приложение может запрашивать данные отслеживания изменений, когда ничего не произошло.</span><span class="sxs-lookup"><span data-stu-id="1a47c-115">The overhead of polling is obvious: The application may request change tracking data when nothing significant has occurred.</span></span> <span data-ttu-id="1a47c-116">Издержки на уведомления являются более незаметными.</span><span class="sxs-lookup"><span data-stu-id="1a47c-116">The overhead of notification is more subtle.</span></span> <span data-ttu-id="1a47c-117">Сервер должен поддерживать данные о запросах уведомлений и обращаться к этим данным, чтобы решить, следует ли отсылать уведомление.</span><span class="sxs-lookup"><span data-stu-id="1a47c-117">The server must maintain data about notification requests and must consult this data to decide whether or not to send a notification.</span></span> <span data-ttu-id="1a47c-118">Это может увеличить затраты на обычные запросы на обновление.</span><span class="sxs-lookup"><span data-stu-id="1a47c-118">This can add overhead to normal update requests.</span></span>

-   <span data-ttu-id="1a47c-119">Представление базы знаний приложения: постоянный и временный: каждый механизм отслеживания изменений должен включать в себя некоторый метод для сервера, на котором хранятся данные, чтобы понять состояние приложения, так что идея «Change» четко определена.</span><span class="sxs-lookup"><span data-stu-id="1a47c-119">Expressing the application's knowledge: persistent versus temporary: Every change tracking mechanism must include some method for the server holding the data tracked to understand the application's state of knowledge, so that the idea of "change" is well defined.</span></span> <span data-ttu-id="1a47c-120">Например, состояние базы знаний может быть выражено как "Обновлено с учетом всех изменений, произошедших в контроллере домена до времени t".</span><span class="sxs-lookup"><span data-stu-id="1a47c-120">For example, the application's state of knowledge might be expressed as "Updated with all changes that occurred on DC d before time t."</span></span> <span data-ttu-id="1a47c-121">Механизм, основанный на таком способе представления сведений о состоянии приложения, предоставит приложению эффективный способ получения изменений, произошедших позднее заданного времени.</span><span class="sxs-lookup"><span data-stu-id="1a47c-121">A mechanism based on this way of expressing an application's state of knowledge would provide an efficient way for the application to obtain changes that have occurred later than a specified time.</span></span>

    <span data-ttu-id="1a47c-122">Если выражение базы знаний приложения может быть сохранено, то есть хранимой для восстановления, как и в файле или базе данных, перезапуск приложения занимает меньше ресурсов, чем в случае невозможности.</span><span class="sxs-lookup"><span data-stu-id="1a47c-122">If the expression of the application's knowledge can be persisted, that is, stored recoverably, as in a file or database, application restart is less resource intensive than if it cannot.</span></span> <span data-ttu-id="1a47c-123">В приведенном выше примере выражение базы знаний приложения может быть сохранено путем записи контроллера домена d и времени t.</span><span class="sxs-lookup"><span data-stu-id="1a47c-123">In the example above, the expression of the application's knowledge can be persisted by recording the DC d and the time t.</span></span> <span data-ttu-id="1a47c-124">Некоторые механизмы уведомлений об изменениях не позволяют сохранять эти данные.</span><span class="sxs-lookup"><span data-stu-id="1a47c-124">Some change notification mechanisms do not allow this data to be persisted.</span></span> <span data-ttu-id="1a47c-125">При запуске приложения сервер и приложение должны синхронизироваться с каким бы то ни было другим механизмом.</span><span class="sxs-lookup"><span data-stu-id="1a47c-125">The server and application must synchronize with some other mechanism when the application starts.</span></span> <span data-ttu-id="1a47c-126">Это занимает много ресурсов, если задействовано несколько объектов и может содержать сложное программирование.</span><span class="sxs-lookup"><span data-stu-id="1a47c-126">This is resource-intensive if multiple objects are involved, and can involve complex programming.</span></span>

<span data-ttu-id="1a47c-127">Используйте следующие методы для мониторинга изменений в домен Active Directory Services:</span><span class="sxs-lookup"><span data-stu-id="1a47c-127">Use the following techniques to track changes in Active Directory Domain Services:</span></span>

-   <span data-ttu-id="1a47c-128">Используйте элемент управления уведомление об изменении, чтобы инициировать постоянный асинхронный поиск изменений, соответствующих указанному фильтру.</span><span class="sxs-lookup"><span data-stu-id="1a47c-128">Use the change notification control to initiate a persistent asynchronous search for changes that match a specified filter.</span></span> <span data-ttu-id="1a47c-129">Дополнительные сведения см. [в разделе уведомления об изменениях в домен Active Directory Services](change-notifications-in-active-directory-domain-services.md).</span><span class="sxs-lookup"><span data-stu-id="1a47c-129">For more information, see [Change Notifications in Active Directory Domain Services](change-notifications-in-active-directory-domain-services.md).</span></span>
-   <span data-ttu-id="1a47c-130">Используйте поиск по синхронизации каталогов (DirSync) для получения изменений, произошедших с момента предыдущего поиска DirSync.</span><span class="sxs-lookup"><span data-stu-id="1a47c-130">Use a directory synchronization (DirSync) search to retrieve changes that have occurred since the previous DirSync search.</span></span> <span data-ttu-id="1a47c-131">Дополнительные сведения см. [в разделе опрос изменений с помощью элемента управления DirSync](polling-for-changes-using-the-dirsync-control.md).</span><span class="sxs-lookup"><span data-stu-id="1a47c-131">For more information, see [Polling for Changes Using the DirSync Control](polling-for-changes-using-the-dirsync-control.md).</span></span>
-   <span data-ttu-id="1a47c-132">Используйте атрибут USNChanged для поиска объектов, которые были изменены с момента предыдущего поиска.</span><span class="sxs-lookup"><span data-stu-id="1a47c-132">Use the USNChanged attribute to search for objects that have changed since the previous search.</span></span> <span data-ttu-id="1a47c-133">Дополнительные сведения см. в разделе [опрос изменений с помощью USNChanged](polling-for-changes-using-usnchanged.md).</span><span class="sxs-lookup"><span data-stu-id="1a47c-133">For more information, see [Polling for Changes Using USNChanged](polling-for-changes-using-usnchanged.md).</span></span>

<span data-ttu-id="1a47c-134">Элемент управления уведомлениями об изменениях предназначен для приложений и служб, которым требуется разумное уведомление о редких изменениях.</span><span class="sxs-lookup"><span data-stu-id="1a47c-134">The change notification control is designed for applications or services that require reasonably prompt notification of infrequent changes.</span></span> <span data-ttu-id="1a47c-135">Примером может быть служба или программа, которая хранит данные конфигурации на Active Directory сервере и должна своевременно получать уведомления при возникновении изменений.</span><span class="sxs-lookup"><span data-stu-id="1a47c-135">An example is a service or program that stores configuration data on the Active Directory server and must be notified promptly when a change occurs.</span></span> <span data-ttu-id="1a47c-136">Имейте в виду, что существуют ограничения элемента управления уведомления.</span><span class="sxs-lookup"><span data-stu-id="1a47c-136">Be aware that there are limitations of the notification control.</span></span>

-   <span data-ttu-id="1a47c-137">Запрос уведомлений зависит от задержки репликации и от того, где произошло изменение.</span><span class="sxs-lookup"><span data-stu-id="1a47c-137">The promptness of notifications depends on replication latency and where the change occurred.</span></span> <span data-ttu-id="1a47c-138">Вы можете быстро получать уведомления при репликации изменений в отслеживаемую реплику, но в некоторых других репликах это изменение могло быть создано ранее.</span><span class="sxs-lookup"><span data-stu-id="1a47c-138">You may be notified promptly when a change replicates into the replica you are monitoring, but the change may have originated much earlier on some other replica.</span></span>
-   <span data-ttu-id="1a47c-139">Элемент управления может отслеживать только один объект или непосредственные дочерние элементы контейнера.</span><span class="sxs-lookup"><span data-stu-id="1a47c-139">The control is restricted to monitoring a single object or the immediate children of a container.</span></span> <span data-ttu-id="1a47c-140">Приложения, которые должны отслеживать несколько контейнеров или несвязанных объектов, могут регистрировать до пяти запросов на уведомления.</span><span class="sxs-lookup"><span data-stu-id="1a47c-140">Applications that must monitor multiple containers or unrelated objects can register up to five notification requests.</span></span>
-   <span data-ttu-id="1a47c-141">Если слишком много клиентов ожидают изменения, которые происходят часто, это влияет на производительность сервера.</span><span class="sxs-lookup"><span data-stu-id="1a47c-141">If too many clients are listening for changes that occur frequently, it will impact the performance of the server.</span></span> <span data-ttu-id="1a47c-142">Как правило, приложения должны ограничивать использование этого элемента управления для повышения производительности сервера.</span><span class="sxs-lookup"><span data-stu-id="1a47c-142">In general, applications should limit their use of this control for performance reasons on the server.</span></span> <span data-ttu-id="1a47c-143">Если вам не нужно знать об изменениях немедленно, лучше выполнить периодический опрос изменений вместо уведомления об изменениях.</span><span class="sxs-lookup"><span data-stu-id="1a47c-143">If you do not need to know about changes immediately, it may be best to periodically poll for changes instead of using change notification.</span></span>

<span data-ttu-id="1a47c-144">Методы поиска DirSync и USNChanged предназначены для приложений, которые поддерживают согласованность данных на Active Directory сервере и соответствующие данные в каком другом хранилище.</span><span class="sxs-lookup"><span data-stu-id="1a47c-144">The DirSync and USNChanged search techniques are designed for applications that maintain consistency between data on the Active Directory server and corresponding data in some other storage.</span></span> <span data-ttu-id="1a47c-145">Эти методы используются приложениями, которые периодически опрашиваются на предмет изменений.</span><span class="sxs-lookup"><span data-stu-id="1a47c-145">These techniques are used by applications that periodically poll for changes.</span></span> <span data-ttu-id="1a47c-146">Метод DirSync основан на серверном элементе управления LDAP, который можно использовать с помощью интерфейсов API ADSI или LDAP.</span><span class="sxs-lookup"><span data-stu-id="1a47c-146">The DirSync technique is based on an LDAP server control that you can use through ADSI or LDAP APIs.</span></span> <span data-ttu-id="1a47c-147">Недостаток элемента управления DirSync заключается в том, что он может использоваться только учетной записью с высоким уровнем привилегий, например администратором домена.</span><span class="sxs-lookup"><span data-stu-id="1a47c-147">The disadvantages of the DirSync control are that it can only be used by a highly privileged account, such as a domain administrator.</span></span> <span data-ttu-id="1a47c-148">Ниже приведен список ограничений элемента управления DirSync.</span><span class="sxs-lookup"><span data-stu-id="1a47c-148">The following is a list of limitations of DirSync control:</span></span>

-   <span data-ttu-id="1a47c-149">Элемент управления DirSync может использоваться только учетной записью с высоким уровнем привилегий, например администратором домена.</span><span class="sxs-lookup"><span data-stu-id="1a47c-149">The DirSync control can only be used by a highly privileged account, such as a domain administrator.</span></span>
-   <span data-ttu-id="1a47c-150">Элемент управления DirSync может отслеживать только весь контекст именования.</span><span class="sxs-lookup"><span data-stu-id="1a47c-150">The DirSync control can only monitor an entire naming context.</span></span> <span data-ttu-id="1a47c-151">Нельзя ограничить область поиска DirSync, чтобы отслеживать только определенное поддерево, контейнер или объект в контексте именования.</span><span class="sxs-lookup"><span data-stu-id="1a47c-151">You cannot limit the scope of a DirSync search to monitor only a specific subtree, container, or object in a naming context.</span></span>

<span data-ttu-id="1a47c-152">Метод USNChanged не имеет этих ограничений, хотя он более сложен в использовании, чем DirSync.</span><span class="sxs-lookup"><span data-stu-id="1a47c-152">The USNChanged technique does not have these limitations, although it is somewhat more complicated to use than DirSync.</span></span>

 

 




