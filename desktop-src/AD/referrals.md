---
title: Ссылки (AD DS)
description: Домен Active Directory Services поддерживают ссылочные данные в объектах crossRef, хранящихся в контейнере разделов (Кроссрефконтаинер) в контейнере конфигурации.
ms.assetid: e4d6cc8a-9c2c-4e0f-acca-e9ecdd5e879b
ms.tgt_platform: multiple
keywords:
- РЕКЛАМНЫЕ ссылки
- Active Directory, ссылки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f63c87fb0248d85ab20191296f9659eb58e460f6
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "105654280"
---
# <a name="referrals-ad-ds"></a><span data-ttu-id="79865-105">Ссылки (AD DS)</span><span class="sxs-lookup"><span data-stu-id="79865-105">Referrals (AD DS)</span></span>

<span data-ttu-id="79865-106">Домен Active Directory Services поддерживают ссылочные данные в объектах [**crossRef**](/windows/desktop/ADSchema/c-crossref) , хранящихся в контейнере разделов ([**кроссрефконтаинер**](/windows/desktop/ADSchema/c-crossrefcontainer)) в контейнере конфигурации.</span><span class="sxs-lookup"><span data-stu-id="79865-106">Active Directory Domain Services maintain referral data in [**crossRef**](/windows/desktop/ADSchema/c-crossref) objects stored in the partitions container ([**crossRefContainer**](/windows/desktop/ADSchema/c-crossrefcontainer)) in the configuration container.</span></span> <span data-ttu-id="79865-107">В разделе [Выбор места поиска](where-to-search.md) ссылки обсуждаются в контексте домена в дереве доменов и создание ссылок на подчиненные домены в поиске по поддереву.</span><span class="sxs-lookup"><span data-stu-id="79865-107">In the [Deciding Where to Search](where-to-search.md) topic, referrals are discussed in the context of a domain within a domain tree and the generation of referrals to subordinate domains on a subtree search.</span></span>

<span data-ttu-id="79865-108">Домен Active Directory Services создают и поддерживают объекты [**crossRef**](/windows/desktop/ADSchema/c-crossref) для всех доменов в лесу.</span><span class="sxs-lookup"><span data-stu-id="79865-108">Active Directory Domain Services create and maintains [**crossRef**](/windows/desktop/ADSchema/c-crossref) objects for all domains in the forest.</span></span> <span data-ttu-id="79865-109">Кроме того, существуют объекты **crossRef** для контейнеров конфигурации и схемы.</span><span class="sxs-lookup"><span data-stu-id="79865-109">In addition, there are **crossRef** objects for the configuration and schema containers.</span></span> <span data-ttu-id="79865-110">Эти объекты **crossRef** используются для создания ссылок в ответ на запросы, которые запрашивают данные об объектах, существующих в лесу, но не содержатся на сервере каталогов, обрабатывающем запрос.</span><span class="sxs-lookup"><span data-stu-id="79865-110">These **crossRef** objects are used to generate referrals in response to queries that request data about objects that exist in the forest, but not contained on the directory server handling the request.</span></span> <span data-ttu-id="79865-111">Они называются *внутренними перекрестными ссылками*, так как они ссылаются на домены, схему и контейнеры конфигурации в пределах леса.</span><span class="sxs-lookup"><span data-stu-id="79865-111">These are called *internal cross references*, because they refer to domains, schema, and configuration containers within the forest.</span></span>

<span data-ttu-id="79865-112">Если отслеживание ссылок не включено и выполняется поиск по поддереву, поиск вернет все объекты в указанном домене, удовлетворяющие условиям поиска.</span><span class="sxs-lookup"><span data-stu-id="79865-112">If referral chasing is not enabled and a subtree search is performed, the search will return all objects within the specified domain that meet the search criteria.</span></span> <span data-ttu-id="79865-113">Поиск также будет возвращать ссылки на любые подчиненные домены, являющиеся прямыми потомками домена сервера каталогов.</span><span class="sxs-lookup"><span data-stu-id="79865-113">The search will also return referrals to any subordinate domains that are direct descendants of the directory server domain.</span></span> <span data-ttu-id="79865-114">Клиент должен разрешить ссылки, привязываясь к пути, указанному в ссылке, и отправив другой запрос.</span><span class="sxs-lookup"><span data-stu-id="79865-114">The client must resolve the referrals by binding to the path specified by the referral and submitting another query.</span></span>

<span data-ttu-id="79865-115">Если отслеживание ссылок включено и выполняется поиск по поддереву, базовый API LDAP будет автоматически пытаться выполнить привязку к любым ссылкам и добавить результаты поиска в результирующий набор.</span><span class="sxs-lookup"><span data-stu-id="79865-115">If referral chasing is turned on and a subtree search is performed, the underlying LDAP API will automatically attempt to bind to any referrals and add the search results to the result set.</span></span> <span data-ttu-id="79865-116">В большинстве случаев отслеживание ссылок будет прозрачным для вызывающего объекта.</span><span class="sxs-lookup"><span data-stu-id="79865-116">In most cases, the referral chasing will be transparent to the caller.</span></span> <span data-ttu-id="79865-117">Если ссылка относится к объекту в другом домене или лесу, базовый API LDAP будет пытаться использовать текущие учетные данные для привязки к целевому объекту ссылки.</span><span class="sxs-lookup"><span data-stu-id="79865-117">If the referral is to an object in a different domain or forest, the underlying LDAP API will attempt to use the current credentials to bind to the target of the referral.</span></span> <span data-ttu-id="79865-118">В случае успеха отслеживание ссылок будет прозрачным.</span><span class="sxs-lookup"><span data-stu-id="79865-118">If this is successful, the referral chasing will be transparent.</span></span> <span data-ttu-id="79865-119">Если это не удалось, будет возвращена ссылка и код ошибки ссылки.</span><span class="sxs-lookup"><span data-stu-id="79865-119">If this is not successful, the referral and a referral error code will be returned.</span></span>

<span data-ttu-id="79865-120">Дополнительные сведения о настройке параметров поиска ссылок см. в разделе [Указание других вариантов поиска](specifying-other-search-options.md).</span><span class="sxs-lookup"><span data-stu-id="79865-120">For more information about setting the referral chasing search preference, see [Specifying Other Search Options](specifying-other-search-options.md).</span></span>

<span data-ttu-id="79865-121">Помимо свойств [**днсрут**](/windows/desktop/ADSchema/a-dnsroot) (DNS-имя домена) и [**NCName**](/windows/desktop/ADSchema/a-ncname) (различающееся имя для домена), объект [**crossRef**](/windows/desktop/ADSchema/c-crossref) также содержит **nETBIOSName** (NetBIOS-имя домена) и **трустпарент** (различающееся имя для объекта **crossRef** , представляющего домен прямого родителя домена).</span><span class="sxs-lookup"><span data-stu-id="79865-121">In addition to the [**dnsRoot**](/windows/desktop/ADSchema/a-dnsroot) (DNS name of the domain) and [**nCName**](/windows/desktop/ADSchema/a-ncname) (distinguished name for the domain) properties, the [**crossRef**](/windows/desktop/ADSchema/c-crossref) object also contains the **nETBIOSName** (NetBIOS name of the domain) and **trustParent** (distinguished name for the **crossRef** object that represents the domain's direct parent domain) properties.</span></span>

<span data-ttu-id="79865-122">Домен Active Directory служб также могут иметь *Внешние перекрестные ссылки* , которые ссылаются на объекты за пределами леса.</span><span class="sxs-lookup"><span data-stu-id="79865-122">Active Directory Domain Services can also have *external cross references* that refer to objects outside of the forest.</span></span> <span data-ttu-id="79865-123">Внешние перекрестные ссылки должны явно добавляться администратором.</span><span class="sxs-lookup"><span data-stu-id="79865-123">External cross references must be added explicitly by an administrator.</span></span> <span data-ttu-id="79865-124">Имейте в виду, что целевой сервер внешней перекрестной ссылки должен иметь корень DNS. то есть он должен соответствовать RFC 2247.</span><span class="sxs-lookup"><span data-stu-id="79865-124">Be aware that the target server of the external cross reference must have a DNS root; that is, it must adhere to RFC 2247.</span></span>

<span data-ttu-id="79865-125">Внешняя перекрестная ссылка ссылается на объект в любом другом лесу, если имя уникально в целевом лесу.</span><span class="sxs-lookup"><span data-stu-id="79865-125">An external cross reference refers to an object on any other forest, as long as the name is unique in the target forest.</span></span> <span data-ttu-id="79865-126">Например, клиентские приложения LDAP, используемые вашей компанией, могут отправлять операции на серверы каталогов для Fabrikam.com.</span><span class="sxs-lookup"><span data-stu-id="79865-126">For example, LDAP client applications that are used by your company can submit operations to your directory servers for Fabrikam.com.</span></span> <span data-ttu-id="79865-127">Создайте объект [**crossRef**](/windows/desktop/ADSchema/c-crossref) для Fabrikam.com.</span><span class="sxs-lookup"><span data-stu-id="79865-127">You create a [**crossRef**](/windows/desktop/ADSchema/c-crossref) object for Fabrikam.com.</span></span> <span data-ttu-id="79865-128">Теперь вместо того чтобы возвращать ошибку «объект не найден», серверы каталогов могут возвращать ссылку на объект в домене Fabrikam.com, и клиенты могут проследить ссылку.</span><span class="sxs-lookup"><span data-stu-id="79865-128">Now, instead of returning an Object Not Found error, your directory servers can return a referral to an object in the Fabrikam.com domain and the clients can chase the referral.</span></span> <span data-ttu-id="79865-129">Например, если у вас есть объект со следующим различающимся именем:</span><span class="sxs-lookup"><span data-stu-id="79865-129">For example, if you have an object with the following distinguished name:</span></span>


```C++
CN=SomeObject,OU=SomeOU,DC=Fabrikam,DC=Com
```



<span data-ttu-id="79865-130">Можно добавить внешнюю перекрестную ссылку для объекта с именем «Чилдофсомеобжект».</span><span class="sxs-lookup"><span data-stu-id="79865-130">You can add an external cross reference for an object with the name "ChildOfSomeObject".</span></span>


```C++
CN=ChildOfSomeObject,CN=SomeObject,OU=SomeOU,DC=Fabrikam,DC=Com
```



<span data-ttu-id="79865-131">При поиске в поддереве, содержащем "Сомеобжект", также будет возвращаться ссылка на "Чилдофсомеобжект".</span><span class="sxs-lookup"><span data-stu-id="79865-131">A subtree search that contains "SomeObject" will also return a referral to "ChildOfSomeObject".</span></span> <span data-ttu-id="79865-132">Имейте в виду, что должен существовать LDAP-сервер по адресу, указанному в ссылке (одно из свойств объекта [**crossRef**](/windows/desktop/ADSchema/c-crossref) ), и этот LDAP-сервер должен обслуживать пространство имен, определяемое "чилдофсомеобжект".</span><span class="sxs-lookup"><span data-stu-id="79865-132">Be aware that there must be an LDAP server at the address that is specified by the referral (one of the properties on the [**crossRef**](/windows/desktop/ADSchema/c-crossref) object) and that this LDAP server must serve the namespace that is identified by "ChildOfSomeObject".</span></span>

<span data-ttu-id="79865-133">Поскольку объекты [**crossRef**](/windows/desktop/ADSchema/c-crossref) хранятся в контейнере конфигурации, каждый контроллер домена (DC) имеет копию всех объектов **crossRef** .</span><span class="sxs-lookup"><span data-stu-id="79865-133">Because [**crossRef**](/windows/desktop/ADSchema/c-crossref) objects are stored in the configuration container, each domain controller (DC) has a copy of all **crossRef** objects.</span></span> <span data-ttu-id="79865-134">Таким образом, каждый контроллер домена содержит данные о каждом домене в лесу, а также их подчиненные отношения.</span><span class="sxs-lookup"><span data-stu-id="79865-134">Therefore, every DC contains data about every domain in the forest as well as their superior/subordinate relationships.</span></span> <span data-ttu-id="79865-135">Это позволяет каждому КОНТРОЛЛЕРу домена создавать ссылки на любые домены в лесу и ссылки для неисследованного подчиненного домена, схемы или контейнеров конфигурации в поиске поддерева.</span><span class="sxs-lookup"><span data-stu-id="79865-135">This enables each DC to generate referrals to any domain in the forest and referrals for unexplored subordinate domain, schema, or configuration containers on a subtree search.</span></span>

<span data-ttu-id="79865-136">Дополнительные сведения о ссылках см. в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="79865-136">For more information about referrals, see:</span></span>

-   [<span data-ttu-id="79865-137">При создании ссылок</span><span class="sxs-lookup"><span data-stu-id="79865-137">When Referrals Are Generated</span></span>](when-referrals-are-generated.md)
-   [<span data-ttu-id="79865-138">Создание внешней ссылки</span><span class="sxs-lookup"><span data-stu-id="79865-138">Creating an External Referral</span></span>](creating-an-external-referral.md)

<span data-ttu-id="79865-139">Дополнительные сведения и пример кода, демонстрирующий получение различающегося имени контейнера секций, см. в разделе [пример кода для поиска контейнера секций](example-code-for-locating-the-partitions-container.md).</span><span class="sxs-lookup"><span data-stu-id="79865-139">For more information and a code example that shows how to obtain the distinguished name of the partitions container, see [Example Code for Locating the Partitions Container](example-code-for-locating-the-partitions-container.md).</span></span>

 

 