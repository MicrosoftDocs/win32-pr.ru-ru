---
title: Задачи обслуживания учетной записи входа
description: В этом разделе описываются проблемы, относящиеся к задачам обслуживания учетной записи входа.
ms.assetid: 528be433-58ef-400b-ba9a-d114f3f94ec6
ms.tgt_platform: multiple
keywords:
- Задачи обслуживания учетной записи входа в Active Directory
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fa0f11f69d9a974fd666871833029eda0e059329
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "104412767"
---
# <a name="logon-account-maintenance-tasks"></a><span data-ttu-id="29f4a-104">Задачи обслуживания учетной записи входа</span><span class="sxs-lookup"><span data-stu-id="29f4a-104">Logon Account Maintenance Tasks</span></span>

<span data-ttu-id="29f4a-105">В этом разделе описываются проблемы, относящиеся к задачам обслуживания учетной записи входа.</span><span class="sxs-lookup"><span data-stu-id="29f4a-105">This topic describes issues that pertain to logon account maintenance tasks.</span></span>

<span data-ttu-id="29f4a-106">Существуют две основные проблемы, связанные с задачами обслуживания учетной записи входа.</span><span class="sxs-lookup"><span data-stu-id="29f4a-106">There are two primary issues that concern logon account maintenance tasks:</span></span>

-   <span data-ttu-id="29f4a-107">Обновление пароля учетной записи для экземпляра службы, который выполняется от имени учетной записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="29f4a-107">Updating the account password for a service instance that runs under a user account.</span></span> <span data-ttu-id="29f4a-108">Дополнительные сведения см. в разделе [изменение пароля учетной записи пользователя службы](changing-the-password-on-a-serviceampaposs-user-account.md).</span><span class="sxs-lookup"><span data-stu-id="29f4a-108">For more information, see [Changing the Password on a Service's User Account](changing-the-password-on-a-serviceampaposs-user-account.md).</span></span>
-   <span data-ttu-id="29f4a-109">Обработка изменений в учетной записи входа экземпляра службы.</span><span class="sxs-lookup"><span data-stu-id="29f4a-109">Handling changes to the logon account of a service instance.</span></span>

<span data-ttu-id="29f4a-110">Второй вариант — редкий случай, но это может произойти.</span><span class="sxs-lookup"><span data-stu-id="29f4a-110">The latter is a rare case, but can happen.</span></span> <span data-ttu-id="29f4a-111">Система предоставляет средство администрирования "Управление компьютером", которое позволяет изменить учетную запись входа в службу.</span><span class="sxs-lookup"><span data-stu-id="29f4a-111">The system provides the Computer Management administrative tool that enables change to a service logon account.</span></span> <span data-ttu-id="29f4a-112">Кроме того, другие приложения могут использовать функцию [**чанжесервицеконфиг**](/windows/desktop/api/winsvc/nf-winsvc-changeserviceconfiga) для указания новой учетной записи входа для установленной службы.</span><span class="sxs-lookup"><span data-stu-id="29f4a-112">In addition, other applications can use the [**ChangeServiceConfig**](/windows/desktop/api/winsvc/nf-winsvc-changeserviceconfiga) function to specify a new logon account for an installed service.</span></span> <span data-ttu-id="29f4a-113">По умолчанию для изменения учетной записи службы требуются права локального администратора.</span><span class="sxs-lookup"><span data-stu-id="29f4a-113">By default, local administrator privileges are required to change a service account.</span></span> <span data-ttu-id="29f4a-114">Если это произошло, это может повлиять на службу двумя способами:</span><span class="sxs-lookup"><span data-stu-id="29f4a-114">If this did happen, it could affect your service in two ways:</span></span>

-   <span data-ttu-id="29f4a-115">Зарегистрированные имена субъектов-служб (SPN) будут зарегистрированы в неверной учетной записи.</span><span class="sxs-lookup"><span data-stu-id="29f4a-115">If you have registered service principal names (SPNs), they will be registered on the wrong account.</span></span>
-   <span data-ttu-id="29f4a-116">Если вы настроили ACE для предоставления доступа к службе, они теперь будут предоставлять доступ к неверной учетной записи.</span><span class="sxs-lookup"><span data-stu-id="29f4a-116">If you set ACEs to grant access to the service, they would now grant access to the wrong account.</span></span>

<span data-ttu-id="29f4a-117">Один из подходов состоит в том, чтобы установщик служб регистрировал зарегистрированные имена участников-служб для каждого экземпляра службы в реестре на главном компьютере.</span><span class="sxs-lookup"><span data-stu-id="29f4a-117">One approach is to have the service installer store the registered SPNs for each service instance in the registry on the host computer.</span></span> <span data-ttu-id="29f4a-118">Вы можете использовать тот же раздел реестра в разделе HKEY \_ локальный \_ компьютер, который использовался для хранения строки привязки для SCP службы.</span><span class="sxs-lookup"><span data-stu-id="29f4a-118">You could use the same registry key under HKEY\_LOCAL\_MACHINE that you used to store the binding string for the service SCP.</span></span> <span data-ttu-id="29f4a-119">При запуске службы она вызывает функцию [**куерисервицеконфиг**](/windows/desktop/api/winsvc/nf-winsvc-queryserviceconfiga) , чтобы определить свою учетную запись входа, а затем запрашивает сервер Active Directory, чтобы определить, зарегистрированы ли имена участников-служб в объекте каталога для этой учетной записи.</span><span class="sxs-lookup"><span data-stu-id="29f4a-119">When the service starts, it calls the [**QueryServiceConfig**](/windows/desktop/api/winsvc/nf-winsvc-queryserviceconfiga) function to determine its logon account and then queries the Active Directory server to determine whether the SPNs are registered on the directory object for that account.</span></span> <span data-ttu-id="29f4a-120">Если имена участников-служб не зарегистрированы или зарегистрированы в неверной учетной записи, служба отказывается запустить и отобразит сообщение о том, что администратор домена должен запустить программу настройки службы, чтобы обновить параметры учетной записи входа.</span><span class="sxs-lookup"><span data-stu-id="29f4a-120">If the SPNs are not registered, or are registered on the wrong account, the service refuses to start and displays a message saying that a domain administrator must run the service's configuration program to update the logon account settings.</span></span> <span data-ttu-id="29f4a-121">Учтите, что эта перенастройка должна быть выполнена администратором, поскольку учетная запись службы не должна иметь права на обновление своего собственного имени участника-службы.</span><span class="sxs-lookup"><span data-stu-id="29f4a-121">Be aware that this reconfiguration must be completed by an administrator because the service account should not have access to update its own SPN.</span></span> <span data-ttu-id="29f4a-122">Также имейте в виду, что имена участников-служб должны быть удалены из старой учетной записи, в противном случае имена участников-служб будут бесполезными для проверки подлинности, поскольку они не являются уникальными</span><span class="sxs-lookup"><span data-stu-id="29f4a-122">Also be aware that SPNs must be removed from the old account, otherwise the SPNs will be useless for authentication because they are not unique in the forest.</span></span>

 

 