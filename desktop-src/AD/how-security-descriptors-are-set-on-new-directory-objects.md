---
title: Как устанавливаются дескрипторы безопасности для новых объектов каталога
description: При создании нового объекта в службах домен Active Directory Services можно явно создать дескриптор безопасности, а затем задать этот дескриптор безопасности в качестве свойства Нтсекуритидескриптор объекта.
ms.assetid: 07c367f8-cb5a-49ef-8e13-d31673c2ceee
ms.tgt_platform: multiple
keywords:
- объекты AD, как дескрипторы безопасности устанавливаются для новых объектов каталога
- Специальные дескрипторы безопасности, Настройка для новых объектов каталога
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7858d08944e93165b4a1a63ef7d845ee646dc648
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "104487432"
---
# <a name="how-security-descriptors-are-set-on-new-directory-objects"></a><span data-ttu-id="c71d1-105">Как устанавливаются дескрипторы безопасности для новых объектов каталога</span><span class="sxs-lookup"><span data-stu-id="c71d1-105">How Security Descriptors are Set on New Directory Objects</span></span>

<span data-ttu-id="c71d1-106">При создании нового объекта в службах домен Active Directory Services можно явно создать дескриптор безопасности, а затем задать этот дескриптор безопасности в качестве свойства **нтсекуритидескриптор** объекта.</span><span class="sxs-lookup"><span data-stu-id="c71d1-106">When you create a new object in Active Directory Domain Services, you can explicitly create a security descriptor and then set that security descriptor as the object's **nTSecurityDescriptor** property.</span></span> <span data-ttu-id="c71d1-107">Дополнительные сведения см. в разделе [Создание дескриптора безопасности для нового объекта каталога](creating-a-security-descriptor-for-a-new-directory-object.md).</span><span class="sxs-lookup"><span data-stu-id="c71d1-107">For more information, see [Creating a Security Descriptor for a New Directory Object](creating-a-security-descriptor-for-a-new-directory-object.md).</span></span>

<span data-ttu-id="c71d1-108">Домен Active Directory Services для задания списка DACL в дескрипторе безопасности нового объекта используются следующие правила:</span><span class="sxs-lookup"><span data-stu-id="c71d1-108">Active Directory Domain Services use the following rules to set the DACL in the new object's security descriptor:</span></span>

-   <span data-ttu-id="c71d1-109">Если вы явно указали дескриптор безопасности при создании объекта, система объединяет все наследуемые ACE из родительского объекта в указанный DACL, если в контрольных битах дескриптора безопасности не установлен бит **\_ \_ защищенного списка DACL SE** .</span><span class="sxs-lookup"><span data-stu-id="c71d1-109">If you explicitly specify a security descriptor when you create the object, the system merges any inheritable ACEs from the parent object into the specified DACL unless the **SE\_DACL\_PROTECTED** bit is set in the security descriptor's control bits.</span></span>
-   <span data-ttu-id="c71d1-110">Если не указать дескриптор безопасности, система создает DACL объекта, объединяя все наследуемые ACE из родительского объекта в список DACL по умолчанию из объекта **classSchema** для класса объекта.</span><span class="sxs-lookup"><span data-stu-id="c71d1-110">If you do not specify a security descriptor, the system builds the object's DACL by merging any inheritable ACEs from the parent object into the default DACL from the **classSchema** object for the object's class.</span></span>
-   <span data-ttu-id="c71d1-111">Если у схемы нет DACL по умолчанию, DACL объекта является DACL по умолчанию от основного маркера или токена олицетворения создателя.</span><span class="sxs-lookup"><span data-stu-id="c71d1-111">If the schema does not have a default DACL, the object's DACL is the default DACL from the primary or impersonation token of the creator.</span></span>
-   <span data-ttu-id="c71d1-112">Если указанный, унаследованный или DACL по умолчанию нет, система создает объект без DACL, что позволяет всем пользователям иметь полный доступ к объекту.</span><span class="sxs-lookup"><span data-stu-id="c71d1-112">If there is no specified, inherited, or default DACL, the system creates the object with no DACL, which allows everyone full access to the object.</span></span>

<span data-ttu-id="c71d1-113">Система использует аналогичный алгоритм для создания списка SACL для объекта службы каталогов.</span><span class="sxs-lookup"><span data-stu-id="c71d1-113">The system uses a similar algorithm to build a SACL for a directory service object.</span></span>

<span data-ttu-id="c71d1-114">Владелец и основная группа в дескрипторе безопасности нового объекта устанавливаются в значения, указанные в свойстве **нтсекуритидескриптор** при создании объекта.</span><span class="sxs-lookup"><span data-stu-id="c71d1-114">The owner and primary group in the new object's security descriptor are set to the values you specify in the **nTSecurityDescriptor** property when you create the object.</span></span> <span data-ttu-id="c71d1-115">Если эти значения не заданы, домен Active Directory службы используют правила, перечисленные в следующей таблице, чтобы задать их.</span><span class="sxs-lookup"><span data-stu-id="c71d1-115">If you do not set these values, Active Directory Domain Services use the rules listed in the following table to set them.</span></span>



| <span data-ttu-id="c71d1-116">Правило</span><span class="sxs-lookup"><span data-stu-id="c71d1-116">Rule</span></span>          | <span data-ttu-id="c71d1-117">Описание</span><span class="sxs-lookup"><span data-stu-id="c71d1-117">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|---------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="c71d1-118">Владелец</span><span class="sxs-lookup"><span data-stu-id="c71d1-118">Owner</span></span>         | <span data-ttu-id="c71d1-119">Владельцу в дескрипторе безопасности по умолчанию присваивается идентификатор безопасности владельца по умолчанию из основного маркера или токена олицетворения создаваемого процесса.</span><span class="sxs-lookup"><span data-stu-id="c71d1-119">The owner in a default security descriptor is set to the default owner SID from the primary or impersonation token of the creating process.</span></span> <span data-ttu-id="c71d1-120">Для большинства пользователей идентификатор безопасности владельца по умолчанию совпадает с идентификатором безопасности, определяющим учетную запись пользователя.</span><span class="sxs-lookup"><span data-stu-id="c71d1-120">For most users, the default owner SID is the same as the SID that identifies the user's account.</span></span> <span data-ttu-id="c71d1-121">Имейте в виду, что для пользователей, являющихся членами встроенной группы "Администраторы", система автоматически устанавливает идентификатор безопасности владельца по умолчанию в маркере доступа для группы администраторов. Таким образом, объекты, созданные членом группы «Администраторы», обычно принадлежат группе «Администраторы».</span><span class="sxs-lookup"><span data-stu-id="c71d1-121">Be aware that for users who are members of the built-in administrators group, the system automatically sets the default owner SID in the access token to the administrators group; therefore, objects created by a member of the administrators group are typically owned by the administrators group.</span></span> <span data-ttu-id="c71d1-122">Чтобы получить или задать владельца по умолчанию в маркере доступа, вызовите функцию [**GetTokenInformation**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-gettokeninformation) или [**сеттокенинформатион**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-settokeninformation) с помощью структуры [**\_ владельца маркера**](/windows/desktop/api/winnt/ns-winnt-token_owner) .</span><span class="sxs-lookup"><span data-stu-id="c71d1-122">To get or set the default owner in an access token, call the [**GetTokenInformation**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-gettokeninformation) or [**SetTokenInformation**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-settokeninformation) function with the [**TOKEN\_OWNER**](/windows/desktop/api/winnt/ns-winnt-token_owner) structure.</span></span> |
| <span data-ttu-id="c71d1-123">Основная группа</span><span class="sxs-lookup"><span data-stu-id="c71d1-123">Primary Group</span></span> | <span data-ttu-id="c71d1-124">Основной группой в дескрипторе безопасности по умолчанию присваивается основная группа по умолчанию от основного маркера или токена олицетворения создателя.</span><span class="sxs-lookup"><span data-stu-id="c71d1-124">The primary group in a default security descriptor is set to the default primary group from the creator's primary or impersonation token.</span></span> <span data-ttu-id="c71d1-125">Имейте в виду, что основная группа не используется в контексте служб домен Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c71d1-125">Be aware that primary group is not used in the context of Active Directory Domain Services.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |



 

<span data-ttu-id="c71d1-126">Дополнительные сведения о наследовании ACE см. в разделе [наследование и делегирование администрирования](inheritance-and-delegation-of-administration.md).</span><span class="sxs-lookup"><span data-stu-id="c71d1-126">For more information about ACE inheritance, see [Inheritance and Delegation of Administration](inheritance-and-delegation-of-administration.md).</span></span>

<span data-ttu-id="c71d1-127">Дополнительные сведения о дескрипторах безопасности по умолчанию в схеме см. в разделе [Default Security](default-security-descriptor.md).</span><span class="sxs-lookup"><span data-stu-id="c71d1-127">For more information about the default security descriptors in the schema, see [Default Security Descriptor](default-security-descriptor.md).</span></span>

<span data-ttu-id="c71d1-128">Дополнительные сведения об объектах **classSchema** см. в разделе [Схема Active Directory](active-directory-schema.md).</span><span class="sxs-lookup"><span data-stu-id="c71d1-128">For more information about **classSchema** objects, see [Active Directory Schema](active-directory-schema.md).</span></span>

 

 