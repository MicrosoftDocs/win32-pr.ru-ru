---
title: Перечисление реплик раздела каталога приложений
description: В этом разделе показано, как перечислить реплики для раздела каталога приложений.
ms.assetid: a1d6865b-ec77-4687-9da7-7fc717568bda
ms.tgt_platform: multiple
keywords:
- Перечисление реплик раздела каталога приложений (AD)
- Разделы каталога приложений AD, перечисление реплик
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d1415c147fe4320e5f8169487a656db4f365f03a
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/17/2020
ms.locfileid: "103987343"
---
# <a name="enumerating-replicas-of-an-application-directory-partition"></a><span data-ttu-id="e16f2-105">Перечисление реплик раздела каталога приложений</span><span class="sxs-lookup"><span data-stu-id="e16f2-105">Enumerating Replicas of an Application Directory Partition</span></span>

<span data-ttu-id="e16f2-106">При добавлении реплики раздела каталога приложений различающееся имя объекта [**нтдсдса**](/windows/desktop/ADSchema/c-ntdsdsa) для контроллера домена, который будет содержать реплику, добавляется в атрибут [**msDS-NC-Replica-Locations**](/windows/desktop/ADSchema/a-msds-nc-replica-locations) объекта [**crossRef**](/windows/desktop/ADSchema/c-crossref) .</span><span class="sxs-lookup"><span data-stu-id="e16f2-106">When a replica of an application directory partition is added, the distinguished name of the [**nTDSDSA**](/windows/desktop/ADSchema/c-ntdsdsa) object for the domain controller that will contain the replica is added to the [**msDS-NC-Replica-Locations**](/windows/desktop/ADSchema/a-msds-nc-replica-locations) attribute of the [**crossRef**](/windows/desktop/ADSchema/c-crossref) object.</span></span> <span data-ttu-id="e16f2-107">Используемый объект **crossRef** представляет раздел каталога приложения.</span><span class="sxs-lookup"><span data-stu-id="e16f2-107">The **crossRef** object used represents the application directory partition.</span></span>

<span data-ttu-id="e16f2-108">**Перечисление реплик для раздела каталога приложений**</span><span class="sxs-lookup"><span data-stu-id="e16f2-108">**To enumerate the replicas for an application directory partition**</span></span>

1.  <span data-ttu-id="e16f2-109">Найдите в контейнере секций объект [**crossRef**](/windows/desktop/ADSchema/c-crossref) , имеющий значение атрибута [**NCName**](/windows/desktop/ADSchema/a-ncname) , равное различающихся именам разделов каталога приложений.</span><span class="sxs-lookup"><span data-stu-id="e16f2-109">Search the Partitions container for a [**crossRef**](/windows/desktop/ADSchema/c-crossref) object that has an [**nCName**](/windows/desktop/ADSchema/a-ncname) attribute value that is equal to the distinguished name of the application directory partition.</span></span>
2.  <span data-ttu-id="e16f2-110">Используйте каждое значение атрибута [**msDS-NC-Replica-Locations**](/windows/desktop/ADSchema/a-msds-nc-replica-locations) объекта [**crossRef**](/windows/desktop/ADSchema/c-crossref) для привязки к объекту [**нтдсдса**](/windows/desktop/ADSchema/c-ntdsdsa) сервера.</span><span class="sxs-lookup"><span data-stu-id="e16f2-110">Use each value of the [**msDS-NC-Replica-Locations**](/windows/desktop/ADSchema/a-msds-nc-replica-locations) attribute of the [**crossRef**](/windows/desktop/ADSchema/c-crossref) object to bind to the [**nTDSDSA**](/windows/desktop/ADSchema/c-ntdsdsa) object of the server.</span></span>
3.  <span data-ttu-id="e16f2-111">Получите значение ADsPath для родителя каждого объекта [**нтдсдса**](/windows/desktop/ADSchema/c-ntdsdsa) .</span><span class="sxs-lookup"><span data-stu-id="e16f2-111">Obtain the ADsPath for the parent of each [**nTDSDSA**](/windows/desktop/ADSchema/c-ntdsdsa) object.</span></span> <span data-ttu-id="e16f2-112">Это объект, представляющий сервер контроллера домена.</span><span class="sxs-lookup"><span data-stu-id="e16f2-112">This is an object that represents the domain controller server.</span></span> <span data-ttu-id="e16f2-113">Используйте путь ADsPath для привязки к объекту сервера.</span><span class="sxs-lookup"><span data-stu-id="e16f2-113">Use the ADsPath to bind to the server object.</span></span>
4.  <span data-ttu-id="e16f2-114">Получите значение атрибута [**dNSHostName**](/windows/desktop/ADSchema/a-dnshostname) объекта Server.</span><span class="sxs-lookup"><span data-stu-id="e16f2-114">Obtain the [**dNSHostName**](/windows/desktop/ADSchema/a-dnshostname) attribute value of the server object.</span></span> <span data-ttu-id="e16f2-115">Это свойство с одним значением, которое содержит DNS-имя сервера.</span><span class="sxs-lookup"><span data-stu-id="e16f2-115">This is a single-value property that contains the DNS name of the server.</span></span>

<span data-ttu-id="e16f2-116">Из-за задержки репликации и запланированных задержек запуска KCC возможно, что фактические активные реплики для раздела каталога приложений могут не соответствовать списку контроллеров домена, указанному атрибутом [**msDS-NC-Replica-Locations**](/windows/desktop/ADSchema/a-msds-nc-replica-locations) объекта [**crossRef**](/windows/desktop/ADSchema/c-crossref) .</span><span class="sxs-lookup"><span data-stu-id="e16f2-116">Due to replication latency and scheduled KCC run delays, it is possible the actual active replicas for an application directory partition may not match the list of domain controllers indicated by the [**msDS-NC-Replica-Locations**](/windows/desktop/ADSchema/a-msds-nc-replica-locations) attribute of the [**crossRef**](/windows/desktop/ADSchema/c-crossref) object.</span></span> <span data-ttu-id="e16f2-117">Более точный, но менее эффективный способ определения фактических активных реплик раздела каталога приложений заключается в поиске всех объектов [**нтдсдса**](/windows/desktop/ADSchema/c-ntdsdsa) в лесу, имеющих атрибут [**msDS-хасмастернкс**](/windows/desktop/ADSchema/a-msds-hasmasterncs) , который содержит различающееся имя раздела каталога приложений.</span><span class="sxs-lookup"><span data-stu-id="e16f2-117">A more accurate, but less efficient way to determine the actual active replicas of an application directory partition is to search for all [**nTDSDSA**](/windows/desktop/ADSchema/c-ntdsdsa) objects in the forest that have a [**msDS-hasMasterNCs**](/windows/desktop/ADSchema/a-msds-hasmasterncs) attribute that contains the distinguished name of the application directory partition.</span></span> <span data-ttu-id="e16f2-118">Атрибут **msDS-хасмастернкс** содержит отличительные имена всех доступных для записи разделов каталога, содержащихся в контроллере домена, включая разделы каталога приложений.</span><span class="sxs-lookup"><span data-stu-id="e16f2-118">The **msDS-hasMasterNCs** attribute contains the distinguished names of all writable directory partitions that the domain controller hosts, including application directory partitions.</span></span>

 

 