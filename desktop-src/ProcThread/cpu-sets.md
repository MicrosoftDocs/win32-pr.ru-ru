---
description: Наборы ЦП предоставляют API-интерфейсы для объявления сходства приложений в "мягком" режиме, совместимом с управлением питанием ОС.
ms.assetid: FF8BE790-19D9-473F-B184-C54FB392D61A
title: Наборы ЦП
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 801474591751f04a5bffe570d6b8caff4974203f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105673772"
---
# <a name="cpu-sets"></a><span data-ttu-id="bbfbf-103">Наборы ЦП</span><span class="sxs-lookup"><span data-stu-id="bbfbf-103">CPU Sets</span></span>

<span data-ttu-id="bbfbf-104">Наборы ЦП предоставляют API-интерфейсы для объявления сходства приложений в "мягком" режиме, совместимом с управлением питанием ОС.</span><span class="sxs-lookup"><span data-stu-id="bbfbf-104">CPU Sets provide APIs to declare application affinity in a 'soft' manner that is compatible with OS power management.</span></span> <span data-ttu-id="bbfbf-105">Кроме того, API предоставляет приложениям возможность реаффинитизе все фоновые потоки в процессе в подмножество процессоров, используя механизм **обработки по умолчанию** , чтобы избежать помех от потоков ОС внутри процесса.</span><span class="sxs-lookup"><span data-stu-id="bbfbf-105">Additionally, the API provides applications with the ability to reaffinitize all background threads in the process to a subset of processors using the **Process Default** mechanism to avoid interference from OS threads within the process.</span></span> <span data-ttu-id="bbfbf-106">Некоторые версии Windows поддерживают основные политики резервирования, в которых подмножество наборов ЦП системы можно использовать для эксклюзивного использования отдельных приложений и рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="bbfbf-106">Some versions of Windows support Core Reservation policies, in which a subset of the system’s CPU Sets can be devoted to the exclusive use of individual applications and workloads.</span></span>

<span data-ttu-id="bbfbf-107">API набора ЦП работает с идентификаторами набора ЦП, связанными с сходствами виртуальных процессоров.</span><span class="sxs-lookup"><span data-stu-id="bbfbf-107">The CPU Set API works with CPU Set IDs, which are associated with virtual processor affinities.</span></span> <span data-ttu-id="bbfbf-108">В большинстве систем и в большинстве случаев каждый идентификатор набора ЦП будет напрямую сопоставляться **с одним логическим** процессором.</span><span class="sxs-lookup"><span data-stu-id="bbfbf-108">On most systems, and under most conditions, each CPU Set ID will map directly to a single **home** logical processor.</span></span> <span data-ttu-id="bbfbf-109">Поток, привязаны в заданный набор ЦП, обычно выполняется на одном из процессоров в списке выбранных идентификаторов набора ЦП.</span><span class="sxs-lookup"><span data-stu-id="bbfbf-109">A thread affinitized to a given CPU Set will typically execute on one of the processors in its list of selected CPU Set IDs.</span></span>

<span data-ttu-id="bbfbf-110">Зарезервированные наборы ЦП можно определить путем проверки **выделенного** флага в \_ \_ сведениях о наборе ЦП системы \_ .</span><span class="sxs-lookup"><span data-stu-id="bbfbf-110">CPU Sets that are reserved can be determined by inspecting the **Allocated** flag in the SYSTEM\_CPU\_SET\_INFORMATION.</span></span> <span data-ttu-id="bbfbf-111">Система управляет доступом к зарезервированным наборам ЦП и может запрашивать назначение с помощью флага **аллокатедтотаржетпроцесс** \_ \_ информационной структуры набора ЦП системы \_ .</span><span class="sxs-lookup"><span data-stu-id="bbfbf-111">The system controls access to reserved CPU Sets and the assignment can be queried using the **AllocatedToTargetProcess** flag of the SYSTEM\_CPU\_SET\_INFORMATION structure.</span></span> <span data-ttu-id="bbfbf-112">Если процесс пытается использовать назначение набора ЦП, выделенное исключительно другим процессам, его запрос игнорируется, а потоки, назначенные запрещенным наборам ЦП, планируются в другом расположении.</span><span class="sxs-lookup"><span data-stu-id="bbfbf-112">If a process attempts to use a CPU Set assignment which is allocated exclusively to other processes, its request is ignored and threads assigned to disallowed CPU sets are scheduled elsewhere.</span></span> <span data-ttu-id="bbfbf-113">Наборы ЦП могут быть назначены на двух уровнях.</span><span class="sxs-lookup"><span data-stu-id="bbfbf-113">CPU Sets can be assigned at two levels.</span></span> <span data-ttu-id="bbfbf-114">Наборы ЦП процесса по умолчанию назначаются всем потокам в процессе, которые не имеют назначения на выбранном уровне потока.</span><span class="sxs-lookup"><span data-stu-id="bbfbf-114">The Process Default CPU sets are assigned to all threads in a process that do not have an assignment at the Thread Selected level.</span></span> <span data-ttu-id="bbfbf-115">Если для потока или процесса задана ограниченная маска сходства, то маска сходства учитывается при любом конфликтующем назначении набора ЦП.</span><span class="sxs-lookup"><span data-stu-id="bbfbf-115">If a thread or process has a restrictive affinity mask set, the affinity mask is respected above any conflicting CPU Set assignment.</span></span> <span data-ttu-id="bbfbf-116">В системах с несколькими группами назначения ЦП игнорируются, если они находятся в группах, которые не соответствуют группе в маске сходства потока.</span><span class="sxs-lookup"><span data-stu-id="bbfbf-116">On multi-group systems, CPU assignments are ignored if they are in groups that do not match the group in the thread’s affinity mask.</span></span> <span data-ttu-id="bbfbf-117">Если поток назначен нескольким допустимым наборам ЦП, он будет выполняться на одном из соответствующих процессоров в соответствии с приоритетами и приоритетами конкурирующих потоков на этих процессорах.</span><span class="sxs-lookup"><span data-stu-id="bbfbf-117">If a thread is assigned to multiple valid CPU Sets, it will run on one of the corresponding processors according to its priorities and the priorities of competing threads on those processors.</span></span>

<span data-ttu-id="bbfbf-118">**Функции, перечисления и структуры набора ЦП**</span><span class="sxs-lookup"><span data-stu-id="bbfbf-118">**CPU Set Functions/Enumerations/Structures**</span></span>

-   <span data-ttu-id="bbfbf-119">Функция [**жетпроцессдефаулткпусетс**](getprocessdefaultcpusets.md)</span><span class="sxs-lookup"><span data-stu-id="bbfbf-119">[**GetProcessDefaultCpuSets**](getprocessdefaultcpusets.md) function</span></span>
-   <span data-ttu-id="bbfbf-120">Функция [**жетсистемкпусетинформатион**](getsystemcpusetinformation.md)</span><span class="sxs-lookup"><span data-stu-id="bbfbf-120">[**GetSystemCpuSetInformation**](getsystemcpusetinformation.md) function</span></span>
-   <span data-ttu-id="bbfbf-121">Функция [**жетсреадселектедкпусетс**](getthreadselectedcpusets.md)</span><span class="sxs-lookup"><span data-stu-id="bbfbf-121">[**GetThreadSelectedCpuSets**](getthreadselectedcpusets.md) function</span></span>
-   <span data-ttu-id="bbfbf-122">Функция [**сетпроцессдефаулткпусетс**](setprocessdefaultcpusets.md)</span><span class="sxs-lookup"><span data-stu-id="bbfbf-122">[**SetProcessDefaultCpuSets**](setprocessdefaultcpusets.md) function</span></span>
-   <span data-ttu-id="bbfbf-123">Функция [**сетсреадселектедкпусетс**](setthreadselectedcpusets.md)</span><span class="sxs-lookup"><span data-stu-id="bbfbf-123">[**SetThreadSelectedCpuSets**](setthreadselectedcpusets.md) function</span></span>
-   <span data-ttu-id="bbfbf-124">[**ЦП \_ ЗАДАТЬ перечисление \_ \_ типов сведений**](cpu-set-information-type.md)</span><span class="sxs-lookup"><span data-stu-id="bbfbf-124">[**CPU\_SET\_INFORMATION\_TYPE**](cpu-set-information-type.md) enumeration</span></span>
-   <span data-ttu-id="bbfbf-125">[**Система \_ Структура \_ \_ сведений о НАБОРе ЦП**](/windows/desktop/api/winnt/ns-winnt-system_cpu_set_information)</span><span class="sxs-lookup"><span data-stu-id="bbfbf-125">[**SYSTEM\_CPU\_SET\_INFORMATION**](/windows/desktop/api/winnt/ns-winnt-system_cpu_set_information) structure</span></span>

 

 



