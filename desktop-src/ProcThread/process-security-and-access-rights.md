---
description: Модель безопасности Microsoft Windows позволяет управлять доступом к объектам процесса. Дополнительные сведения о безопасности см. в разделе Модель Access-Control.
ms.assetid: 508a17c4-88cd-431a-a102-00180a7f7ab5
title: Безопасность процессов и права доступа
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 668520a6f4e0eb8a81b55418033ff583bce8bddf
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105673746"
---
# <a name="process-security-and-access-rights"></a><span data-ttu-id="5869e-104">Безопасность процессов и права доступа</span><span class="sxs-lookup"><span data-stu-id="5869e-104">Process Security and Access Rights</span></span>

<span data-ttu-id="5869e-105">Модель безопасности Microsoft Windows позволяет управлять доступом к объектам процесса.</span><span class="sxs-lookup"><span data-stu-id="5869e-105">The Microsoft Windows security model enables you to control access to process objects.</span></span> <span data-ttu-id="5869e-106">Дополнительные сведения о безопасности см. в разделе [модель управления доступом](../secauthz/access-control-model.md).</span><span class="sxs-lookup"><span data-stu-id="5869e-106">For more information about security, see [Access-Control Model](../secauthz/access-control-model.md).</span></span>

<span data-ttu-id="5869e-107">Когда пользователь входит в систему, система собирает набор данных, которые уникально идентифицируют пользователя в процессе проверки подлинности, и сохраняет его в [маркере доступа](../secauthz/access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="5869e-107">When a user logs in, the system collects a set of data that uniquely identifies the user during the authentication process, and stores it in an [access token](../secauthz/access-tokens.md).</span></span> <span data-ttu-id="5869e-108">Этот маркер доступа описывает контекст безопасности всех процессов, связанных с пользователем.</span><span class="sxs-lookup"><span data-stu-id="5869e-108">This access token describes the security context of all processes associated with the user.</span></span> <span data-ttu-id="5869e-109">Контекст безопасности процесса — это набор учетных данных, предоставленных процессу или учетной записи пользователя, создавшего процесс.</span><span class="sxs-lookup"><span data-stu-id="5869e-109">The security context of a process is the set of credentials given to the process or the user account that created the process.</span></span>

<span data-ttu-id="5869e-110">Токен можно использовать для указания текущего контекста безопасности процесса с помощью функции [**креатепроцессвистокенв**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithtokenw) .</span><span class="sxs-lookup"><span data-stu-id="5869e-110">You can use a token to specify the current security context for a process using the [**CreateProcessWithTokenW**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithtokenw) function.</span></span> <span data-ttu-id="5869e-111">При вызове функции [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**параметр CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera)или [**креатепроцессвислогонв**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithlogonw) можно указать [дескриптор безопасности](../secauthz/security-descriptors.md) для процесса.</span><span class="sxs-lookup"><span data-stu-id="5869e-111">You can specify a [security descriptor](../secauthz/security-descriptors.md) for a process when you call the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera), or [**CreateProcessWithLogonW**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithlogonw) function.</span></span> <span data-ttu-id="5869e-112">При указании **значения NULL** процесс получает дескриптор безопасности по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="5869e-112">If you specify **NULL**, the process gets a default security descriptor.</span></span> <span data-ttu-id="5869e-113">Списки ACL в дескрипторе безопасности по умолчанию для процесса берутся из основного маркера или токена олицетворения создателя.</span><span class="sxs-lookup"><span data-stu-id="5869e-113">The ACLs in the default security descriptor for a process come from the primary or impersonation token of the creator.</span></span>

<span data-ttu-id="5869e-114">Чтобы получить дескриптор безопасности процесса, вызовите функцию [**жетсекуритинфо**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) .</span><span class="sxs-lookup"><span data-stu-id="5869e-114">To retrieve a process's security descriptor, call the [**GetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) function.</span></span> <span data-ttu-id="5869e-115">Чтобы изменить дескриптор безопасности процесса, вызовите функцию [**сетсекуритинфо**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo) .</span><span class="sxs-lookup"><span data-stu-id="5869e-115">To change a process's security descriptor, call the [**SetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo) function.</span></span>

<span data-ttu-id="5869e-116">Допустимые права доступа для объектов процессов включают [стандартные права доступа](../secauthz/standard-access-rights.md) и некоторые права доступа, зависящие от процесса.</span><span class="sxs-lookup"><span data-stu-id="5869e-116">The valid access rights for process objects include the [standard access rights](../secauthz/standard-access-rights.md) and some process-specific access rights.</span></span> <span data-ttu-id="5869e-117">В следующей таблице перечислены стандартные права доступа, используемые всеми объектами.</span><span class="sxs-lookup"><span data-stu-id="5869e-117">The following table lists the standard access rights used by all objects.</span></span>

| <span data-ttu-id="5869e-118">Значение</span><span class="sxs-lookup"><span data-stu-id="5869e-118">Value</span></span>                           | <span data-ttu-id="5869e-119">Значение</span><span class="sxs-lookup"><span data-stu-id="5869e-119">Meaning</span></span>                                                                                                                                                                                                                                                                                  |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5869e-120">**Delete** (0x00010000L)</span><span class="sxs-lookup"><span data-stu-id="5869e-120">**DELETE** (0x00010000L)</span></span>        | <span data-ttu-id="5869e-121">Требуется для удаления объекта.</span><span class="sxs-lookup"><span data-stu-id="5869e-121">Required to delete the object.</span></span>                                                                                                                                                                                                                                                           |
| <span data-ttu-id="5869e-122">**Чтение \_ Элемент управления** (0x00020000L)</span><span class="sxs-lookup"><span data-stu-id="5869e-122">**READ\_CONTROL** (0x00020000L)</span></span> | <span data-ttu-id="5869e-123">Требуется для чтения сведений в дескрипторе безопасности объекта, не включая сведения из списка SACL.</span><span class="sxs-lookup"><span data-stu-id="5869e-123">Required to read information in the security descriptor for the object, not including the information in the SACL.</span></span> <span data-ttu-id="5869e-124">Для чтения или записи списка SACL необходимо запросить право доступа к **\_ системе \_ безопасности системы доступа** .</span><span class="sxs-lookup"><span data-stu-id="5869e-124">To read or write the SACL, you must request the **ACCESS\_SYSTEM\_SECURITY** access right.</span></span> <span data-ttu-id="5869e-125">Дополнительные сведения см. в статье [право доступа к SACL](../secauthz/sacl-access-right.md).</span><span class="sxs-lookup"><span data-stu-id="5869e-125">For more information, see [SACL Access Right](../secauthz/sacl-access-right.md).</span></span> |
| <span data-ttu-id="5869e-126">**Синхронизация** (0x00100000L)</span><span class="sxs-lookup"><span data-stu-id="5869e-126">**SYNCHRONIZE** (0x00100000L)</span></span>   | <span data-ttu-id="5869e-127">Право на использование данного объекта для синхронизации.</span><span class="sxs-lookup"><span data-stu-id="5869e-127">The right to use the object for synchronization.</span></span> <span data-ttu-id="5869e-128">Это позволяет потоку ожидать, пока объект находится в сигнальном состоянии.</span><span class="sxs-lookup"><span data-stu-id="5869e-128">This enables a thread to wait until the object is in the signaled state.</span></span>                                                                                                                                                                |
| <span data-ttu-id="5869e-129">**Запись \_ DAC** (0x00040000L)</span><span class="sxs-lookup"><span data-stu-id="5869e-129">**WRITE\_DAC** (0x00040000L)</span></span>    | <span data-ttu-id="5869e-130">Требуется для изменения списка DACL в дескрипторе безопасности объекта.</span><span class="sxs-lookup"><span data-stu-id="5869e-130">Required to modify the DACL in the security descriptor for the object.</span></span>                                                                                                                                                                                                                   |
| <span data-ttu-id="5869e-131">**Запись \_ Владелец** (0x00080000L)</span><span class="sxs-lookup"><span data-stu-id="5869e-131">**WRITE\_OWNER** (0x00080000L)</span></span>  | <span data-ttu-id="5869e-132">Требуется для изменения владельца в дескрипторе безопасности объекта.</span><span class="sxs-lookup"><span data-stu-id="5869e-132">Required to change the owner in the security descriptor for the object.</span></span>                                                                                                                                                                                                                  |



 

<span data-ttu-id="5869e-133">В следующей таблице перечислены права доступа, зависящие от процесса.</span><span class="sxs-lookup"><span data-stu-id="5869e-133">The following table lists the process-specific access rights.</span></span>



| <span data-ttu-id="5869e-134">Значение</span><span class="sxs-lookup"><span data-stu-id="5869e-134">Value</span></span>                                             | <span data-ttu-id="5869e-135">Значение</span><span class="sxs-lookup"><span data-stu-id="5869e-135">Meaning</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|---------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5869e-136">**Обработка \_ всех \_ обращений**</span><span class="sxs-lookup"><span data-stu-id="5869e-136">**PROCESS\_ALL\_ACCESS**</span></span>                          | <span data-ttu-id="5869e-137">Все возможные права доступа для объекта процесса. **Windows Server 2003 и Windows XP:** Размер флага " **обрабатывать \_ все \_ доступ** " увеличился в Windows Server 2008 и Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="5869e-137">All possible access rights for a process object.**Windows Server 2003 and Windows XP:** The size of the **PROCESS\_ALL\_ACCESS** flag increased on Windows Server 2008 and Windows Vista.</span></span> <span data-ttu-id="5869e-138">Если приложение, скомпилированное для Windows Server 2008 и Windows Vista, работает под управлением Windows Server 2003 или Windows XP, флаг " **обрабатывать \_ все \_ права доступа** " слишком велик и функция, указывающая этот флаг, завершается с **ошибкой \_ \_ отказа в доступе**.</span><span class="sxs-lookup"><span data-stu-id="5869e-138">If an application compiled for Windows Server 2008 and Windows Vista is run on Windows Server 2003 or Windows XP, the **PROCESS\_ALL\_ACCESS** flag is too large and the function specifying this flag fails with **ERROR\_ACCESS\_DENIED**.</span></span> <span data-ttu-id="5869e-139">Чтобы избежать этой проблемы, укажите минимальный набор прав доступа, необходимых для операции.</span><span class="sxs-lookup"><span data-stu-id="5869e-139">To avoid this problem, specify the minimum set of access rights required for the operation.</span></span> <span data-ttu-id="5869e-140">Если требуется использовать **\_ весь \_ доступ** , задайте для \_ Win32 \_ WinNT минимальную операционную систему, для которой предназначено приложение (например, `#define _WIN32_WINNT _WIN32_WINNT_WINXP` ).</span><span class="sxs-lookup"><span data-stu-id="5869e-140">If **PROCESS\_ALL\_ACCESS** must be used, set \_WIN32\_WINNT to the minimum operating system targeted by your application (for example, `#define _WIN32_WINNT _WIN32_WINNT_WINXP`).</span></span> <span data-ttu-id="5869e-141">Дополнительные сведения см. [в разделе Использование заголовков Windows](../winprog/using-the-windows-headers.md).</span><span class="sxs-lookup"><span data-stu-id="5869e-141">For more information, see [Using the Windows Headers](../winprog/using-the-windows-headers.md).</span></span> <br/> |
| <span data-ttu-id="5869e-142">**Обработка \_ Создание \_ процесса** (0x0080)</span><span class="sxs-lookup"><span data-stu-id="5869e-142">**PROCESS\_CREATE\_PROCESS** (0x0080)</span></span>             | <span data-ttu-id="5869e-143">Требуется для создания процесса.</span><span class="sxs-lookup"><span data-stu-id="5869e-143">Required to create a process.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="5869e-144">**Обработка \_ Создание \_ потока** (0x0002)</span><span class="sxs-lookup"><span data-stu-id="5869e-144">**PROCESS\_CREATE\_THREAD** (0x0002)</span></span>              | <span data-ttu-id="5869e-145">Требуется для создания потока.</span><span class="sxs-lookup"><span data-stu-id="5869e-145">Required to create a thread.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="5869e-146">**Обработка \_ \_Обработчик DUP** (0x0040)</span><span class="sxs-lookup"><span data-stu-id="5869e-146">**PROCESS\_DUP\_HANDLE** (0x0040)</span></span>                 | <span data-ttu-id="5869e-147">Требуется для дублирования маркера с помощью [**дупликатехандле**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle).</span><span class="sxs-lookup"><span data-stu-id="5869e-147">Required to duplicate a handle using [**DuplicateHandle**](/windows/win32/api/handleapi/nf-handleapi-duplicatehandle).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="5869e-148">**Обработка \_ \_Сведения о запросе** (0x0400)</span><span class="sxs-lookup"><span data-stu-id="5869e-148">**PROCESS\_QUERY\_INFORMATION** (0x0400)</span></span>          | <span data-ttu-id="5869e-149">Требуется для получения определенных сведений о процессе, таких как его маркер, код выхода и класс приоритета (см. [**OpenProcessToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken)).</span><span class="sxs-lookup"><span data-stu-id="5869e-149">Required to retrieve certain information about a process, such as its token, exit code, and priority class (see [**OpenProcessToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken)).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="5869e-150">**Обработка \_ ЗАПРОС \_ ограниченных \_ данных** (0x1000)</span><span class="sxs-lookup"><span data-stu-id="5869e-150">**PROCESS\_QUERY\_LIMITED\_INFORMATION** (0x1000)</span></span> | <span data-ttu-id="5869e-151">Требуется для получения определенных сведений о процессе (см. раздел [**жетекситкодепроцесс**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodeprocess), [**жетприоритикласс**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getpriorityclass), [**испроцессинжоб**](/windows/win32/api/jobapi/nf-jobapi-isprocessinjob), [**куерифуллпроцессимаженаме**](/windows/desktop/api/WinBase/nf-winbase-queryfullprocessimagenamea)).</span><span class="sxs-lookup"><span data-stu-id="5869e-151">Required to retrieve certain information about a process (see [**GetExitCodeProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodeprocess), [**GetPriorityClass**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getpriorityclass), [**IsProcessInJob**](/windows/win32/api/jobapi/nf-jobapi-isprocessinjob), [**QueryFullProcessImageName**](/windows/desktop/api/WinBase/nf-winbase-queryfullprocessimagenamea)).</span></span> <span data-ttu-id="5869e-152">Для маркера, имеющего право доступа к **\_ \_ информации о запросах на обработку** , автоматически предоставляются **\_ \_ ограниченные \_ сведения о запросе**.**Windows Server 2003 и Windows XP:** это право доступа не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="5869e-152">A handle that has the **PROCESS\_QUERY\_INFORMATION** access right is automatically granted **PROCESS\_QUERY\_LIMITED\_INFORMATION**.**Windows Server 2003 and Windows XP:** This access right is not supported.</span></span><br/>                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="5869e-153">**Обработка \_ ЗАДАТЬ \_ сведения** (0x0200)</span><span class="sxs-lookup"><span data-stu-id="5869e-153">**PROCESS\_SET\_INFORMATION** (0x0200)</span></span>            | <span data-ttu-id="5869e-154">Требуется для задания определенных сведений о процессе, например о его классе приоритета (см. [**сетприоритикласс**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setpriorityclass)).</span><span class="sxs-lookup"><span data-stu-id="5869e-154">Required to set certain information about a process, such as its priority class (see [**SetPriorityClass**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setpriorityclass)).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="5869e-155">**Обработка \_ ЗАДАТЬ \_ квоту** (0x0100)</span><span class="sxs-lookup"><span data-stu-id="5869e-155">**PROCESS\_SET\_QUOTA** (0x0100)</span></span>                  | <span data-ttu-id="5869e-156">Требуется для установки ограничений памяти с помощью [**сетпроцессворкингсетсизе**](/windows/desktop/api/WinBase/nf-winbase-setprocessworkingsetsize).</span><span class="sxs-lookup"><span data-stu-id="5869e-156">Required to set memory limits using [**SetProcessWorkingSetSize**](/windows/desktop/api/WinBase/nf-winbase-setprocessworkingsetsize).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="5869e-157">**Обработка \_ Приостановить \_ возобновление** (0x0800)</span><span class="sxs-lookup"><span data-stu-id="5869e-157">**PROCESS\_SUSPEND\_RESUME** (0x0800)</span></span>             | <span data-ttu-id="5869e-158">Требуется для приостановки или возобновления процесса.</span><span class="sxs-lookup"><span data-stu-id="5869e-158">Required to suspend or resume a process.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="5869e-159">**Обработка \_ ЗАВЕРШЕНИЕ** (0x0001)</span><span class="sxs-lookup"><span data-stu-id="5869e-159">**PROCESS\_TERMINATE** (0x0001)</span></span>                   | <span data-ttu-id="5869e-160">Требуется для завершения процесса с помощью [**терминатепроцесс**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess).</span><span class="sxs-lookup"><span data-stu-id="5869e-160">Required to terminate a process using [**TerminateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminateprocess).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="5869e-161">**Обработка \_ \_Операция виртуальной машины** (0x0008)</span><span class="sxs-lookup"><span data-stu-id="5869e-161">**PROCESS\_VM\_OPERATION** (0x0008)</span></span>               | <span data-ttu-id="5869e-162">Требуется для выполнения операции с адресным пространством процесса (см. раздел [**виртуалпротектекс**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotectex) and [**вритепроцессмемори**](/windows/win32/api/memoryapi/nf-memoryapi-writeprocessmemory)).</span><span class="sxs-lookup"><span data-stu-id="5869e-162">Required to perform an operation on the address space of a process (see [**VirtualProtectEx**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotectex) and [**WriteProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-writeprocessmemory)).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="5869e-163">**Обработка \_ \_Чтение виртуальной машины** (0x0010)</span><span class="sxs-lookup"><span data-stu-id="5869e-163">**PROCESS\_VM\_READ** (0x0010)</span></span>                    | <span data-ttu-id="5869e-164">Требуется для чтения памяти в процессе с помощью [**реадпроцессмемори**](/windows/win32/api/memoryapi/nf-memoryapi-readprocessmemory).</span><span class="sxs-lookup"><span data-stu-id="5869e-164">Required to read memory in a process using [**ReadProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-readprocessmemory).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="5869e-165">**Обработка \_ \_Запись виртуальной машины** (0x0020)</span><span class="sxs-lookup"><span data-stu-id="5869e-165">**PROCESS\_VM\_WRITE** (0x0020)</span></span>                   | <span data-ttu-id="5869e-166">Требуется для записи в память в процессе с помощью [**вритепроцессмемори**](/windows/win32/api/memoryapi/nf-memoryapi-writeprocessmemory).</span><span class="sxs-lookup"><span data-stu-id="5869e-166">Required to write to memory in a process using [**WriteProcessMemory**](/windows/win32/api/memoryapi/nf-memoryapi-writeprocessmemory).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="5869e-167">**Синхронизация** (0x00100000L)</span><span class="sxs-lookup"><span data-stu-id="5869e-167">**SYNCHRONIZE** (0x00100000L)</span></span>                     | <span data-ttu-id="5869e-168">Требуется для ожидания завершения процесса с помощью [функций Wait](../sync/wait-functions.md).</span><span class="sxs-lookup"><span data-stu-id="5869e-168">Required to wait for the process to terminate using the [wait functions](../sync/wait-functions.md).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |



 

<span data-ttu-id="5869e-169">Чтобы открыть обработчик для другого процесса и получить права полного доступа, необходимо включить привилегию **SeDebugPrivilege** .</span><span class="sxs-lookup"><span data-stu-id="5869e-169">To open a handle to another process and obtain full access rights, you must enable the **SeDebugPrivilege** privilege.</span></span> <span data-ttu-id="5869e-170">Дополнительные сведения см. [в разделе изменение привилегий в токене](../secbp/changing-privileges-in-a-token.md).</span><span class="sxs-lookup"><span data-stu-id="5869e-170">For more information, see [Changing Privileges in a Token](../secbp/changing-privileges-in-a-token.md).</span></span>

<span data-ttu-id="5869e-171">Маркер, возвращаемый функцией [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) , **обрабатывает \_ все \_** доступ к объекту процесса.</span><span class="sxs-lookup"><span data-stu-id="5869e-171">The handle returned by the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) function has **PROCESS\_ALL\_ACCESS** access to the process object.</span></span> <span data-ttu-id="5869e-172">При вызове функции [**OpenProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocess) система проверяет запрошенные [права доступа](../secauthz/access-rights-and-access-masks.md) к DACL в дескрипторе безопасности процесса.</span><span class="sxs-lookup"><span data-stu-id="5869e-172">When you call the [**OpenProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocess) function, the system checks the requested [access rights](../secauthz/access-rights-and-access-masks.md) against the DACL in the process's security descriptor.</span></span> <span data-ttu-id="5869e-173">При вызове функции [**жеткуррентпроцесс**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentprocess) система возвращает псеудохандле с максимальным доступом, которое разрешено DACL для вызывающего.</span><span class="sxs-lookup"><span data-stu-id="5869e-173">When you call the [**GetCurrentProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentprocess) function, the system returns a pseudohandle with the maximum access that the DACL allows to the caller.</span></span>

<span data-ttu-id="5869e-174">Вы можете запросить право доступа к **\_ системе \_ безопасности системы доступа** к объекту процесса, если вы хотите прочитать или записать список SACL объекта.</span><span class="sxs-lookup"><span data-stu-id="5869e-174">You can request the **ACCESS\_SYSTEM\_SECURITY** access right to a process object if you want to read or write the object's SACL.</span></span> <span data-ttu-id="5869e-175">Дополнительные сведения см. в разделе [списки управления доступом (ACL)](../secauthz/access-control-lists.md) и [права доступа к спискам SACL](../secauthz/sacl-access-right.md).</span><span class="sxs-lookup"><span data-stu-id="5869e-175">For more information, see [Access-Control Lists (ACLs)](../secauthz/access-control-lists.md) and [SACL Access Right](../secauthz/sacl-access-right.md).</span></span>

> [!WARNING]
> <span data-ttu-id="5869e-176">Процесс, имеющий некоторые права доступа, указанные здесь, может использовать их для получения других прав доступа.</span><span class="sxs-lookup"><span data-stu-id="5869e-176">A process that has some of the access rights noted here can use them to gain other access rights.</span></span> <span data-ttu-id="5869e-177">Например, если процесс A имеет обработчик для обработки B с доступом **Process \_ DUP \_** , он может дублировать псевдо-обработчик для процесса B. При этом создается маркер с максимальным доступом к процессу б. Дополнительные сведения о псевдо Handles см. в разделе [**жеткуррентпроцесс**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentprocess).</span><span class="sxs-lookup"><span data-stu-id="5869e-177">For example, if process A has a handle to process B with **PROCESS\_DUP\_HANDLE** access, it can duplicate the pseudo handle for process B. This creates a handle that has maximum access to process B. For more information on pseudo handles, see [**GetCurrentProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentprocess).</span></span>

 

## <a name="protected-processes"></a><span data-ttu-id="5869e-178">Защищенные процессы</span><span class="sxs-lookup"><span data-stu-id="5869e-178">Protected Processes</span></span>

<span data-ttu-id="5869e-179">В Windows Vista введены *защищенные процессы* для улучшения поддержки цифровых Rights Management.</span><span class="sxs-lookup"><span data-stu-id="5869e-179">Windows Vista introduces *protected processes* to enhance support for Digital Rights Management.</span></span> <span data-ttu-id="5869e-180">Система ограничена доступом к защищенным процессам и потокам защищенных процессов.</span><span class="sxs-lookup"><span data-stu-id="5869e-180">The system restricts access to protected processes and the threads of protected processes.</span></span>

<span data-ttu-id="5869e-181">Из процесса к защищенному процессу запрещены следующие стандартные права доступа:</span><span class="sxs-lookup"><span data-stu-id="5869e-181">The following standard access rights are not allowed from a process to a protected process:</span></span>

- <span data-ttu-id="5869e-182">**DELETE**</span><span class="sxs-lookup"><span data-stu-id="5869e-182">**DELETE**</span></span>  
- <span data-ttu-id="5869e-183">**\_Контроль чтения**</span><span class="sxs-lookup"><span data-stu-id="5869e-183">**READ\_CONTROL**</span></span>  
- <span data-ttu-id="5869e-184">**ЗАПИСЬ \_ DAC**</span><span class="sxs-lookup"><span data-stu-id="5869e-184">**WRITE\_DAC**</span></span>  
- <span data-ttu-id="5869e-185">**\_владелец записи**</span><span class="sxs-lookup"><span data-stu-id="5869e-185">**WRITE\_OWNER**</span></span>  

<span data-ttu-id="5869e-186">От процесса к защищенному процессу запрещены следующие права доступа:</span><span class="sxs-lookup"><span data-stu-id="5869e-186">The following specific access rights are not allowed from a process to a protected process:</span></span>

- <span data-ttu-id="5869e-187">**Обработка \_ всех \_ обращений**</span><span class="sxs-lookup"><span data-stu-id="5869e-187">**PROCESS\_ALL\_ACCESS**</span></span>  
- <span data-ttu-id="5869e-188">**процесс \_ создания \_ процесса**</span><span class="sxs-lookup"><span data-stu-id="5869e-188">**PROCESS\_CREATE\_PROCESS**</span></span>  
- <span data-ttu-id="5869e-189">**ОБРАБОТАТЬ \_ \_ поток создания**</span><span class="sxs-lookup"><span data-stu-id="5869e-189">**PROCESS\_CREATE\_THREAD**</span></span>  
- <span data-ttu-id="5869e-190">**Обработка \_ \_ обработчика DUP**</span><span class="sxs-lookup"><span data-stu-id="5869e-190">**PROCESS\_DUP\_HANDLE**</span></span>  
- <span data-ttu-id="5869e-191">**Обработка \_ \_ сведений о запросе**</span><span class="sxs-lookup"><span data-stu-id="5869e-191">**PROCESS\_QUERY\_INFORMATION**</span></span>  
- <span data-ttu-id="5869e-192">**\_сведения о наборе процессов \_**</span><span class="sxs-lookup"><span data-stu-id="5869e-192">**PROCESS\_SET\_INFORMATION**</span></span>  
- <span data-ttu-id="5869e-193">**\_ \_ Квота набора процессов**</span><span class="sxs-lookup"><span data-stu-id="5869e-193">**PROCESS\_SET\_QUOTA**</span></span>  
- <span data-ttu-id="5869e-194">**\_операция обработки виртуальной машины \_**</span><span class="sxs-lookup"><span data-stu-id="5869e-194">**PROCESS\_VM\_OPERATION**</span></span>  
- <span data-ttu-id="5869e-195">**ПРОЦЕСС \_ чтения виртуальной машины \_**</span><span class="sxs-lookup"><span data-stu-id="5869e-195">**PROCESS\_VM\_READ**</span></span>  
- <span data-ttu-id="5869e-196">**Обработка \_ записи виртуальной машины \_**</span><span class="sxs-lookup"><span data-stu-id="5869e-196">**PROCESS\_VM\_WRITE**</span></span>  

<span data-ttu-id="5869e-197">Для предоставления доступа к подмножеству сведений, доступных через **\_ \_ сведения о запросе Process**, было введено право **обрабатывать \_ \_ ограниченные \_ сведения** .</span><span class="sxs-lookup"><span data-stu-id="5869e-197">The **PROCESS\_QUERY\_LIMITED\_INFORMATION** right was introduced to provide access to a subset of the information available through **PROCESS\_QUERY\_INFORMATION**.</span></span>
