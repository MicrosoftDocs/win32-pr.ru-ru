---
description: Служба "Диспетчер классов мультимедиа" (MMCSS) позволяет приложениям мультимедиа гарантировать, что их обработка с учетом времени получает приоритетный доступ к ресурсам ЦП.
ms.assetid: a7169938-1c72-4c4c-881a-cb08ad6182c7
title: Служба планировщика классов мультимедиа
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cf0744883180c361d5656cf7c182f538d93617be7f6bbdc6a05ff93efa732b53
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120032444"
---
# <a name="multimedia-class-scheduler-service"></a>Служба планировщика классов мультимедиа

Служба "Диспетчер классов мультимедиа" (MMCSS) позволяет приложениям мультимедиа гарантировать, что их обработка с учетом времени получает приоритетный доступ к ресурсам ЦП. Эта служба позволяет приложениям мультимедиа использовать как можно больше ресурсов ЦП, не отменяя ресурсы ЦП более низким приоритетным приложениям.

Служба MMCSS использует сведения, хранящиеся в реестре, для определения поддерживаемых задач и определения относительных приоритетов потоков, выполняющих эти задачи. Каждый поток, выполняющий работу, связанный с определенной задачей, вызывает функцию [**авсетмммакссреадчарактеристикс**](/windows/desktop/api/Avrt/nf-avrt-avsetmmmaxthreadcharacteristicsa) или [**авсетммсреадчарактеристикс**](/windows/desktop/api/Avrt/nf-avrt-avsetmmthreadcharacteristicsa) для информирования MMCSS о том, что он работает над этой задачей.

пример программы, использующей MMCSS, см. в разделе [Потоки с монопольным режимом](/previous-versions//bb614507(v=vs.85)).

**Windows Server 2003 и Windows XP:** Служба MMCSS недоступна.

## <a name="registry-settings"></a>Параметры реестра

Параметры MMCSS хранятся в следующем разделе реестра:

**HKEY \_ \_ \\ программное обеспечение на локальном компьютере \\ Microsoft \\ Windows NT \\ CurrentVersion \\ мультимедиа \\ SystemProfile**

Этот раздел содержит значение **reg \_ DWORD** с именем **системреспонсивенесс** , которое определяет процент ресурсов ЦП, которые должны быть гарантированы задачами с низким приоритетом. Например, если это значение равно 20, то 20% ресурсов ЦП зарезервированы для задач с низким приоритетом. Обратите внимание, что значения, которые не делятся на 10, округляются до ближайшего числа, кратного 10. Значение 0 также обрабатывается как 10.

Ключ также содержит подраздел с именем **tasks** , содержащий список задач. по умолчанию Windows поддерживает следующие задачи:

-   **Звук:**
-   **возможность использования функции записи**.
-   **Distribution**
-   **Игры**
-   **Воспроизведение**
-   **Pro Аудиосигнал**
-   **Диспетчер окон**

Изготовители оборудования могут добавлять дополнительные задачи по мере необходимости.

Каждый ключ задачи содержит следующий набор значений, которые представляют характеристики, применяемые к потокам, связанным с задачей.

| Значение                   | Формат         | Возможные значения                                                                                                                                                                                                                                                                                                                                                         |
|-------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Родств**            | **REG \_ DWORD** | Битовая маска, указывающая соответствие процессора. Значения 0x00 и 0xFFFFFFFF указывают, что сходство процессоров не используется.                                                                                                                                                                                                                                                 |
| **Только фон**     | **REG \_ SZ**    | Указывает, является ли это фоновой задачей (без пользовательского интерфейса). Потоки фоновой задачи не изменяются из-за изменения фокуса окна. Этому значению можно присвоить значение true или false.                                                                                                                                                                            |
| **баккграундприорити**  | **REG \_ DWORD** | Приоритет фона. Диапазон значений — 1-8.                                                                                                                                                                                                                                                                                                                    |
| **Частота синхронизации**          | **REG \_ DWORD** | Подсказка, используемая службой MMCSS для определения степени детализации планирования ресурсов процессора. **Windows Server 2008 и Windows Vista:** Максимальная гарантированная частота часов, используемая системой, если поток присоединяется к этой задаче, в интервалах 100 нс. начиная с Windows 7 и Windows Server 2008 R2 эта гарантия была удалена, чтобы сократить энергопотребление системы.<br/> |
| **Приоритет GPU**        | **REG \_ DWORD** | Приоритет GPU. Диапазон значений — 0-31. Этот приоритет еще не используется.                                                                                                                                                                                                                                                                                           |
| **Приоритет**            | **REG \_ DWORD** | Приоритет задачи. Диапазон значений — от 1 (низкий) до 8 (высокий). Для задач с **категорией** с высоким приоритетом это значение всегда обрабатывается как 2.<br/>                                                                                                                                                                                                           |
| **Категория планирования** | **REG \_ SZ**    | Категория планирования. Для этого параметра можно задать значение высокий, средний или низкий.                                                                                                                                                                                                                                                                                                 |
| **Приоритет СФИО**       | **REG \_ SZ**    | Запланированный приоритет ввода-вывода. Это значение можно установить в режим простоя, низкий, нормальный или высокий. Это значение не используется.                                                                                                                                                                                                                                                                |



 

> [!Note]  
> Для экономии энергии приложения не должны задавать небольшое значение для разрешения системного таймера, если это не является абсолютно необходимым. дополнительные сведения см. в статье [производительность](../win7devguide/performance.md) для [разработчиков Windows 7](../win7devguide/windows-7-developer-guide.md).

 

## <a name="thread-priorities"></a>Приоритеты потоков

Служба MMCSS повышает приоритет потоков, работающих над задачами мультимедиа с высоким приоритетом.

Служба MMCSS определяет приоритет потока, используя следующие факторы:

-   Базовый приоритет задачи.
-   Параметр *Priority* функции [**авсетммсреадприорити**](/windows/desktop/api/Avrt/nf-avrt-avsetmmthreadpriority) .
-   Находится ли приложение на переднем плане.
-   Объем времени ЦП, потребляемый потоками в каждой категории.

Служба MMCSS устанавливает приоритет клиентских потоков в зависимости от категории их планирования.

| Категория | Приоритет | Описание                                                                                                                               |
|----------|----------|-------------------------------------------------------------------------------------------------------------------------------------------|
| Высокий     | 23-26    | Эти потоки выполняются с приоритетом потока, который меньше, чем определенные задачи на уровне системы. эта категория предназначена для Pro задач аудио. |
| Средний   | 16-22    | Эти потоки являются частью приложения, расположенного на переднем плане.                                                                      |
| Низкий      | 8-15     | Эта категория содержит оставшуюся часть потоков. При необходимости они гарантированно задают минимальный процент ресурсов ЦП.           |
|          | 1-7      | Эти потоки используют квоту ресурсов ЦП. Они могут продолжать работу, если потоки с низким приоритетом не готовы к выполнению.                |



 

 

 
