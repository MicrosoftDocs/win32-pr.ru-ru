---
description: 'Существует два способа реализации многозадачности: как один процесс с несколькими потоками или как несколько процессов, каждый из которых имеет один или несколько потоков.'
ms.assetid: ac0a8163-1498-4274-acfc-6a36b4c02a27
title: Когда следует использовать многозадачность
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b17e52f39a08120d3038663a95307ad72f228cfc
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105673888"
---
# <a name="when-to-use-multitasking"></a><span data-ttu-id="98434-103">Когда следует использовать многозадачность</span><span class="sxs-lookup"><span data-stu-id="98434-103">When to Use Multitasking</span></span>

<span data-ttu-id="98434-104">Существует два способа реализации многозадачности: как один процесс с несколькими потоками или как несколько процессов, каждый из которых имеет один или несколько потоков.</span><span class="sxs-lookup"><span data-stu-id="98434-104">There are two ways to implement multitasking: as a single process with multiple threads or as multiple processes, each with one or more threads.</span></span> <span data-ttu-id="98434-105">Приложение может разместить каждый поток, которому требуется закрытое адресное пространство и частные ресурсы, в собственный процесс, чтобы защитить его от действий других потоков процесса.</span><span class="sxs-lookup"><span data-stu-id="98434-105">An application can put each thread that requires a private address space and private resources into its own process, to protect it from the activities of other process threads.</span></span>

<span data-ttu-id="98434-106">Многопоточный процесс может управлять взаимоисключающими задачами с помощью потоков, таких как предоставление пользовательского интерфейса и выполнение фоновых вычислений.</span><span class="sxs-lookup"><span data-stu-id="98434-106">A multithreaded process can manage mutually exclusive tasks with threads, such as providing a user interface and performing background calculations.</span></span> <span data-ttu-id="98434-107">Создание многопоточного процесса также может быть удобным способом структурировать программу, выполняющую несколько аналогичных или одинаковых задач одновременно.</span><span class="sxs-lookup"><span data-stu-id="98434-107">Creating a multithreaded process can also be a convenient way to structure a program that performs several similar or identical tasks concurrently.</span></span> <span data-ttu-id="98434-108">Например, сервер именованных каналов может создать поток для каждого клиентского процесса, который подключается к каналу.</span><span class="sxs-lookup"><span data-stu-id="98434-108">For example, a named pipe server can create a thread for each client process that attaches to the pipe.</span></span> <span data-ttu-id="98434-109">Этот поток управляет обменом данными между сервером и клиентом.</span><span class="sxs-lookup"><span data-stu-id="98434-109">This thread manages the communication between the server and the client.</span></span> <span data-ttu-id="98434-110">Процесс может использовать несколько потоков для выполнения следующих задач:</span><span class="sxs-lookup"><span data-stu-id="98434-110">Your process could use multiple threads to accomplish the following tasks:</span></span>

-   <span data-ttu-id="98434-111">Управление входными данными для нескольких окон.</span><span class="sxs-lookup"><span data-stu-id="98434-111">Manage input for multiple windows.</span></span>
-   <span data-ttu-id="98434-112">Управление входными данными с нескольких устройств связи.</span><span class="sxs-lookup"><span data-stu-id="98434-112">Manage input from several communications devices.</span></span>
-   <span data-ttu-id="98434-113">Распределение задач по приоритетам.</span><span class="sxs-lookup"><span data-stu-id="98434-113">Distinguish tasks of varying priority.</span></span> <span data-ttu-id="98434-114">Например, можно создать поток с высоким приоритетом для управления срочными задачами, а остальную работу переложить на поток с низким приоритетом.</span><span class="sxs-lookup"><span data-stu-id="98434-114">For example, a high-priority thread manages time-critical tasks, and a low-priority thread performs other tasks.</span></span>
-   <span data-ttu-id="98434-115">Сохранение скорости реагирования пользовательского интерфейса при выделении процессорного времени для фоновых задач.</span><span class="sxs-lookup"><span data-stu-id="98434-115">Allow the user interface to remain responsive, while allocating time to background tasks.</span></span>

<span data-ttu-id="98434-116">Как правило, более эффективно реализовать многозадачность в приложении, создав единый многопоточный процесс вместо создания нескольких процессов по следующим причинам.</span><span class="sxs-lookup"><span data-stu-id="98434-116">It is typically more efficient for an application to implement multitasking by creating a single, multithreaded process, rather than creating multiple processes, for the following reasons:</span></span>

-   <span data-ttu-id="98434-117">Система может быстрее переключаться между потоками, чем процессами, так как процесс имеет больше ресурсов, чем в потоке (контекст процесса больше, чем контекст потока).</span><span class="sxs-lookup"><span data-stu-id="98434-117">The system can perform a context switch more quickly for threads than processes, because a process has more overhead than a thread does (the process context is larger than the thread context).</span></span>
-   <span data-ttu-id="98434-118">Все потоки процесса совместно используют одно и то же адресное пространство и имеют доступ к глобальным переменным процесса, что может упростить обмен данными между потоками.</span><span class="sxs-lookup"><span data-stu-id="98434-118">All threads of a process share the same address space and can access the process's global variables, which can simplify communication between threads.</span></span>
-   <span data-ttu-id="98434-119">Все потоки процесса могут совместно использовать открытые дескрипторы с ресурсами, такими как файлы и каналы.</span><span class="sxs-lookup"><span data-stu-id="98434-119">All threads of a process can share open handles to resources, such as files and pipes.</span></span>

<span data-ttu-id="98434-120">Существуют и другие методы, которые можно использовать вместо многопоточности.</span><span class="sxs-lookup"><span data-stu-id="98434-120">There are other techniques you can use in the place of multithreading.</span></span> <span data-ttu-id="98434-121">Наиболее значимыми являются следующие: асинхронный ввод и вывод (ввод-вывод), порты завершения ввода-вывода, асинхронные вызовы процедур (APC) и возможность ожидания нескольких событий.</span><span class="sxs-lookup"><span data-stu-id="98434-121">The most significant of these are as follows: asynchronous input and output (I/O), I/O completion ports, asynchronous procedure calls (APC), and the ability to wait for multiple events.</span></span>

<span data-ttu-id="98434-122">Один поток может инициировать несколько ресурсоемких запросов ввода-вывода, которые могут выполняться параллельно с использованием асинхронных операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="98434-122">A single thread can initiate multiple time-consuming I/O requests that can run concurrently using asynchronous I/O.</span></span> <span data-ttu-id="98434-123">Асинхронный ввод-вывод может выполняться для файлов, каналов и устройств с последовательным подключением.</span><span class="sxs-lookup"><span data-stu-id="98434-123">Asynchronous I/O can be performed on files, pipes, and serial communication devices.</span></span> <span data-ttu-id="98434-124">Дополнительные сведения см. в разделе [Синхронизация и перекрывающиеся входные и выходные данные](../sync/synchronization-and-overlapped-input-and-output.md).</span><span class="sxs-lookup"><span data-stu-id="98434-124">For more information, see [Synchronization and Overlapped Input and Output](../sync/synchronization-and-overlapped-input-and-output.md).</span></span>

<span data-ttu-id="98434-125">Один поток может блокировать свое выполнение при ожидании какого-либо из нескольких событий.</span><span class="sxs-lookup"><span data-stu-id="98434-125">A single thread can block its own execution while waiting for any one or all of several events to occur.</span></span> <span data-ttu-id="98434-126">Это более эффективно, чем использование нескольких потоков, каждое из которых ожидает одно событие и более эффективно, чем использование одного потока, который потребляет время процессора, постоянно проверяя наличие событий.</span><span class="sxs-lookup"><span data-stu-id="98434-126">This is more efficient than using multiple threads, each waiting for a single event, and more efficient than using a single thread that consumes processor time by continually checking for events to occur.</span></span> <span data-ttu-id="98434-127">Дополнительные сведения см. в разделе [функции Wait](../sync/wait-functions.md).</span><span class="sxs-lookup"><span data-stu-id="98434-127">For more information, see [Wait Functions](../sync/wait-functions.md).</span></span>

 

 
