---
Description: В функциях CreateProcess, параметр CreateProcessAsUser, Креатепроцессвислогонв и Креатепроцессвистокенв используются следующие флаги создания процесса. Они могут быть указаны в любом сочетании, за исключением отмеченных.
ms.assetid: fd3384ad-8635-4ea1-9054-0572ef86b86d
title: Флаги создания процесса (Винбасе. h)
ms.topic: reference
ms.custom: snippet-project
ms.date: 07/27/2020
ms.openlocfilehash: 560a6c5ca54a5767c0fb0c9b4b8659d608f46766
ms.sourcegitcommit: c8ec1ded1ffffc364d3c4f560bb2171da0dc5040
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "105674893"
---
# <a name="process-creation-flags"></a>Флаги создания процесса

В функциях [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**параметр CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera), [**креатепроцессвислогонв**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithlogonw)и [**креатепроцессвистокенв**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithtokenw) используются следующие флаги создания процесса. Они могут быть указаны в любом сочетании, за исключением отмеченных.

## <a name="example"></a>Пример

```c
     BOOL creationResult;
    
    creationResult = CreateProcess(
        NULL,                   // No module name (use command line)
        cmdLine,                // Command line
        NULL,                   // Process handle not inheritable
        NULL,                   // Thread handle not inheritable
        FALSE,                  // Set handle inheritance to FALSE
        NORMAL_PRIORITY_CLASS | CREATE_NEW_CONSOLE | CREATE_NEW_PROCESS_GROUP, // creation flags
        NULL,                   // Use parent's environment block
        NULL,                   // Use parent's starting directory 
        &startupInfo,           // Pointer to STARTUPINFO structure
        &processInformation);   // Pointer to PROCESS_INFORMATION structure

```

Пример из [классической выборки Windows](https://github.com/microsoft/Windows-classic-samples/blob/1d363ff4bd17d8e20415b92e2ee989d615cc0d91/Samples/ManagementInfrastructure/cpp/Process/Provider/WindowsProcess.c) на сайте GitHub.


## <a name="flags"></a>Флаги

| Константа/значение                                                                                                                                                                                                                                                                            | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="CREATE_BREAKAWAY_FROM_JOB"></span><span id="create_breakaway_from_job"></span><dl> <dt>**Создание \_ БРЕАКАВАЙ \_ из \_ задания**</dt> <dt>0x01000000</dt> </dl>                       | Дочерние процессы процесса, связанного с заданием, не связаны с заданием. <br/> Если вызывающий процесс не связан с заданием, эта константа не действует. Если вызывающий процесс связан с заданием, задание должно установить предел **\_ \_ \_ Бреакавай \_ ОК для объекта задания** .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CREATE_DEFAULT_ERROR_MODE"></span><span id="create_default_error_mode"></span><dl> <dt>**Создание \_ \_ \_ Режим ошибок по умолчанию**</dt> <dt>0x04000000</dt> </dl>                       | Новый процесс не наследует режим ошибок вызывающего процесса. Вместо этого новый процесс получает стандартный режим ошибок. <br/> Эта функция особенно полезна для многопоточных приложений оболочки, которые выполняются с отключенными жесткими ошибками.<br/> Поведение по умолчанию заключается в том, что новый процесс наследуется от режима ошибки вызывающего. Установка этого флага изменяет поведение по умолчанию.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="CREATE_NEW_CONSOLE"></span><span id="create_new_console"></span><dl> <dt>**Создание \_ СОЗДАТЬ \_ консоль**</dt> <dt>0x00000010</dt> </dl>                                             | Новый процесс имеет новую консоль, а не наследует ее родительскую консоль (по умолчанию). Дополнительные сведения см. в разделе [Создание консоли](/windows/console/creation-of-a-console). <br/> Этот флаг нельзя использовать с **отсоединенным \_ процессом**.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span id="CREATE_NEW_PROCESS_GROUP"></span><span id="create_new_process_group"></span><dl> <dt>**Создание \_ СОЗДАТЬ \_ \_ группу процессов**</dt> <dt>0x00000200</dt> </dl>                          | Новый процесс является корневым процессом новой группы процессов. Группа процессов включает все процессы, являющиеся потомками этого корневого процесса. Идентификатор процесса новой группы процессов совпадает с идентификатором процесса, возвращаемым в параметре *лппроцессинформатион* . Группы процессов используются функцией [**женератеконсолектрлевент**](/windows/console/generateconsolectrlevent) , чтобы разрешить отправку сигналов Ctrl + Break группе процессов консоли.<br/> Если этот флаг указан, сигналы CTRL + C будут отключены для всех процессов в новой группе процессов.<br/> Этот флаг пропускается, если он указан с помощью команд **создать \_ новую \_ консоль**.<br/>                                                                                                                                                                                                                                                                         |
| <span id="CREATE_NO_WINDOW"></span><span id="create_no_window"></span><dl> <dt>**Создание \_ НЕТ \_ окна**</dt> <dt>0x08000000</dt> </dl>                                                   | Процесс представляет собой консольное приложение, выполняемое без окна консоли. Поэтому не задан обработчик консоли для приложения.<br/> Этот флаг пропускается, если приложение не является консольным или используется с **созданием \_ новой \_ консоли** или **отсоединенным \_ процессом**.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span id="CREATE_PROTECTED_PROCESS"></span><span id="create_protected_process"></span><dl> <dt>**Создание \_ 0x00040000 ЗАЩИЩЕНного \_ процесса**</dt> <dt></dt> </dl>                           | Этот процесс должен выполняться как защищенный процесс. Система ограничена доступом к защищенным процессам и потокам защищенных процессов. Дополнительные сведения о том, как процессы могут взаимодействовать с защищенными процессами, см. в разделе [процесс безопасности и права доступа](process-security-and-access-rights.md).<br/> Чтобы активировать защищенный процесс, двоичный файл должен иметь специальную подпись. Эта подпись предоставляется корпорацией Майкрософт, но в настоящее время недоступна для двоичных файлов сторонних производителей. В настоящее время существует четыре защищенных процесса: Media Foundation, Audio Engine, отчеты об ошибках Windows и система. Компоненты, загружаемые в эти двоичные файлы, также должны быть подписаны. В мультимедийных компаниях можно использовать первые два защищенных процесса. Дополнительные сведения см. [в разделе Обзор пути к защищенному носителю](../medfound/protected-media-path.md).<br/> **Windows Server 2003 и Windows XP:** Это значение не поддерживается.<br/> |
| <span id="CREATE_PRESERVE_CODE_AUTHZ_LEVEL"></span><span id="create_preserve_code_authz_level"></span><dl> <dt>**Создание \_ PRESERVE \_ \_ \_ уровень авторизации кода**</dt> <dt>0x02000000</dt> </dl> | Позволяет вызывающему объекту выполнить дочерний процесс, который обходит ограничения процесса, которые обычно применяются к процессу автоматически.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="CREATE_SECURE_PROCESS"></span><span id="create_secure_process"></span><dl> <dt>**Создание \_ БЕЗОПАСНЫЙ \_ процесс**</dt> <dt>0x00400000</dt> </dl>                                    | Этот флаг позволяет запускать безопасные процессы, которые выполняются в среде Virtualization-Based безопасности.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CREATE_SEPARATE_WOW_VDM"></span><span id="create_separate_wow_vdm"></span><dl> <dt>**Создание \_ ОТДЕЛЬНОе 0x00000800 \_ WOW \_ VDM**</dt> <dt></dt> </dl>                             | Этот флаг действителен только при запуске 16-разрядного приложения на базе Windows. Если этот параметр задан, новый процесс выполняется на частной виртуальной машине DOS (VDM). По умолчанию все 16-разрядные приложения Windows выполняются как потоки в одном общем виртуальном диске VDM. Преимущество выполнения отдельных функций заключается в том, что сбой завершается только для одного VDM; все другие программы, работающие в DISTINCT ВДМС, продолжают работать в обычном режиме. Кроме того, 16-разрядные приложения Windows, работающие в разных ВДМС, имеют отдельные входные очереди. Это означает, что если одно приложение мгновенно перестает отвечать на запросы, приложения в разных ВДМС продолжают принимать входные данные. Недостатком выполнения по отдельности является то, что для этого требуется значительно больше памяти. Этот флаг следует использовать только в том случае, если пользователь запрашивает запуск 16-разрядных приложений в своем собственном ВИРТУАЛЬном компьютере.<br/>                                                                                                                 |
| <span id="CREATE_SHARED_WOW_VDM"></span><span id="create_shared_wow_vdm"></span><dl> <dt>**Создание \_ Общий \_ 0x00001000 WOW \_ VDM**</dt> <dt></dt> </dl>                                   | Флаг действителен только при запуске 16-разрядного приложения на базе Windows. Если параметр Дефаултсепаратевдм в разделе Windows WIN.INI имеет **значение true**, этот флаг переопределяет параметр. Новый процесс выполняется на общей виртуальной машине DOS.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span id="CREATE_SUSPENDED"></span><span id="create_suspended"></span><dl> <dt>**Создание \_ ПРИОСТАНОВЛЕНо**</dt> <dt></dt> </dl>                                                    | Основной поток нового процесса создается в приостановленном состоянии и не выполняется до тех пор, пока не будет вызвана функция [**ресумесреад**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-resumethread) .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <span id="CREATE_UNICODE_ENVIRONMENT"></span><span id="create_unicode_environment"></span><dl> <dt>**Создание \_ 0x00000400 \_ среды Юникода**</dt> <dt></dt> </dl>                     | Если этот флаг установлен, блок среды, на который указывает *лпенвиронмент* , использует символы Юникода. В противном случае блок среды использует символы ANSI.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="DEBUG_ONLY_THIS_PROCESS"></span><span id="debug_only_this_process"></span><dl> <dt>**Отладка \_ ТОЛЬКО \_ этот \_ процесс**</dt> <dt>0x00000002</dt> </dl>                             | Вызывающий поток запускает и вызывает ошибку в новом процессе. Он может получить все связанные события отладки с помощью функции [**ваитфордебужевент**](/windows/win32/api/debugapi/nf-debugapi-waitfordebugevent) .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span id="DEBUG_PROCESS"></span><span id="debug_process"></span><dl> <dt>**Отладка \_ ПРОЦЕСС**</dt> <dt>0x00000001</dt> </dl>                                                             | Вызывающий поток запускает и отменяет новый процесс и все дочерние процессы, созданные новым процессом. Он может получить все связанные события отладки с помощью функции [**ваитфордебужевент**](/windows/win32/api/debugapi/nf-debugapi-waitfordebugevent) . <br/> Процесс, использующий **\_ процесс отладки** , преобразуется в корень цепочки отладки. Это продолжится до тех пор, пока не будет создан другой процесс в цепочке с **отладочным \_ процессом**.<br/> Если этот флаг сочетается с **отладкой \_ только \_ этого \_ процесса**, вызывающая сторона выдает ошибку только в новом процессе, а не на всех дочерних процессах.<br/>                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span id="DETACHED_PROCESS"></span><span id="detached_process"></span><dl> Отсоединено <dt>**\_ Обработка**</dt> <dt>0x00000008</dt> </dl>                                                    | Для процессов консоли новый процесс не наследует его родительскую консоль (по умолчанию). Новый процесс может позднее вызвать функцию [**аллокконсоле**](/windows/console/allocconsole) , чтобы создать консоль. Дополнительные сведения см. в разделе [Создание консоли](/windows/console/creation-of-a-console). <br/> Это значение нельзя использовать с **созданием \_ новой \_ консоли**.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="EXTENDED_STARTUPINFO_PRESENT"></span><span id="extended_startupinfo_present"></span><dl> <dt>**Расширенные \_ функции СТАРТУПИНФО \_ Present**</dt> <dt>0x00080000</dt> </dl>               | Процесс создается с расширенными сведениями о запуске; параметр *лпстартупинфо* задает структуру [**стартупинфоекс**](/windows/desktop/api/WinBase/ns-winbase-startupinfoexa) .<br/> **Windows Server 2003 и Windows XP:** Это значение не поддерживается.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="INHERIT_PARENT_AFFINITY"></span><span id="inherit_parent_affinity"></span><dl> <dt>**Наследовать \_ РОДИТЕЛЬСКИй 0x00010000 \_ сходства**</dt> <dt></dt> </dl>                              | Процесс наследует сходства родительского элемента. Если родительский процесс содержит потоки более чем в одной [группе процессоров](processor-groups.md), новый процесс наследует относительное сходство группы, которая используется родительским процессом.<br/> Windows **server 2008, Windows Vista, Windows server 2003 и Windows XP:** Это значение не поддерживается.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |



## <a name="remarks"></a>Комментарии

В 32-разрядных версиях Windows имитация 16-разрядных приложений выполняется ntvdm.exe, а не выполняется как отдельные процессы. Поэтому флаги создания процесса применяются к *ntvdm.exe*. Так как ntvdm.exe сохраняются после запуска первого 16-разрядного приложения, при запуске другого 16-разрядного приложения новые флаги создания не применяются, за исключением **создания \_ новой \_ консоли** и **создания отдельных приложений \_ \_ WOW \_ VDM**, которые создают новый ntvdm.exe.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|----------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Только для \[ классических приложений Windows XP\]<br/>                                                              |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2003\]<br/>                                                     |
| Header<br/>                   | <dl> <dt>Винбасе. h (включение Windows. h)</dt> </dl> |



 

 
