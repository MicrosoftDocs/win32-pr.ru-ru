---
description: Каждый процесс предоставляет ресурсы, необходимые для выполнения программы.
ms.assetid: 055458cf-9fc7-4a16-be14-1122b3cf0251
title: О процессах и потоках
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 650eab4421971bdc08e71c031aec433ed84471bf
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104264500"
---
# <a name="about-processes-and-threads"></a><span data-ttu-id="9b0f4-103">О процессах и потоках</span><span class="sxs-lookup"><span data-stu-id="9b0f4-103">About Processes and Threads</span></span>

<span data-ttu-id="9b0f4-104">Каждый *процесс* предоставляет ресурсы, необходимые для выполнения программы.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-104">Each *process* provides the resources needed to execute a program.</span></span> <span data-ttu-id="9b0f4-105">Процесс содержит виртуальное адресное пространство, исполняемый код, открытые дескрипторы для системных объектов, контекст безопасности, уникальный идентификатор процесса, переменные среды, класс приоритета, минимальный и максимальный размеры рабочего множества и, по крайней мере, один поток выполнения.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-105">A process has a virtual address space, executable code, open handles to system objects, a security context, a unique process identifier, environment variables, a priority class, minimum and maximum working set sizes, and at least one thread of execution.</span></span> <span data-ttu-id="9b0f4-106">Каждый процесс запускается с одним потоком, который часто называется *основным потоком*, но может создавать дополнительные потоки из любого потока.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-106">Each process is started with a single thread, often called the *primary thread*, but can create additional threads from any of its threads.</span></span>

<span data-ttu-id="9b0f4-107">*Поток* — это сущность внутри процесса, для которой можно запланировать выполнение.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-107">A *thread* is the entity within a process that can be scheduled for execution.</span></span> <span data-ttu-id="9b0f4-108">Все потоки процесса совместно используют свои виртуальные адресные пространства и системные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-108">All threads of a process share its virtual address space and system resources.</span></span> <span data-ttu-id="9b0f4-109">Кроме того, каждый поток поддерживает обработчики исключений, приоритет планирования, локальное хранилище потока, уникальный идентификатор потока и набор структур, которые система будет использовать для сохранения контекста потока, пока он не будет запланирован.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-109">In addition, each thread maintains exception handlers, a scheduling priority, thread local storage, a unique thread identifier, and a set of structures the system will use to save the thread context until it is scheduled.</span></span> <span data-ttu-id="9b0f4-110">*Контекст потока* включает набор регистров компьютера, стек ядра, блок среды потока и пользовательский стек в адресном пространстве процесса потока.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-110">The *thread context* includes the thread's set of machine registers, the kernel stack, a thread environment block, and a user stack in the address space of the thread's process.</span></span> <span data-ttu-id="9b0f4-111">Потоки также могут иметь собственный контекст безопасности, который можно использовать для олицетворения клиентов.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-111">Threads can also have their own security context, which can be used for impersonating clients.</span></span>

<span data-ttu-id="9b0f4-112">Microsoft Windows поддерживает *вытеснение по нескольким задачам*, что создает воздействие одновременного выполнения нескольких потоков из нескольких процессов.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-112">Microsoft Windows supports *preemptive multitasking*, which creates the effect of simultaneous execution of multiple threads from multiple processes.</span></span> <span data-ttu-id="9b0f4-113">На многопроцессорном компьютере система может одновременно выполнять столько потоков, сколько процессоров на компьютере.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-113">On a multiprocessor computer, the system can simultaneously execute as many threads as there are processors on the computer.</span></span>

<span data-ttu-id="9b0f4-114">*Объект задания* позволяет управлять группами процессов как единым целым.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-114">A *job object* allows groups of processes to be managed as a unit.</span></span> <span data-ttu-id="9b0f4-115">Объекты заданий являются намаблеными, защищаемыми объектами, совместно используемые объекты, которые управляют атрибутами связанных с ними процессов.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-115">Job objects are namable, securable, sharable objects that control attributes of the processes associated with them.</span></span> <span data-ttu-id="9b0f4-116">Операции, выполняемые над объектом задания, влияют на все процессы, связанные с объектом Job.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-116">Operations performed on the job object affect all processes associated with the job object.</span></span>

<span data-ttu-id="9b0f4-117">Приложение может использовать *пул потоков* , чтобы уменьшить число потоков приложения и обеспечить управление рабочими потоками.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-117">An application can use the *thread pool* to reduce the number of application threads and provide management of the worker threads.</span></span> <span data-ttu-id="9b0f4-118">Приложения могут ставить в очередь рабочие элементы, связывать работу с ожидающими дескрипторами, автоматически ставить в очередь на основе таймера и выполнять привязку с помощью операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-118">Applications can queue work items, associate work with waitable handles, automatically queue based on a timer, and bind with I/O.</span></span>

<span data-ttu-id="9b0f4-119">*Планирование пользовательского режима* (UMS) — это упрощенный механизм, с помощью которого приложения могут планировать собственные потоки.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-119">*User-mode scheduling* (UMS) is a lightweight mechanism that applications can use to schedule their own threads.</span></span> <span data-ttu-id="9b0f4-120">Приложение может переключаться между UMS-потоками в пользовательском режиме без использования [планировщика системы](scheduling.md) и повторного получения управления процессором, если поток UMS блокируется в ядре.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-120">An application can switch between UMS threads in user mode without involving the [system scheduler](scheduling.md) and regain control of the processor if a UMS thread blocks in the kernel.</span></span> <span data-ttu-id="9b0f4-121">Каждый поток UMS имеет собственный контекст потока вместо того, чтобы совместно использовать контекст потока одного потока.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-121">Each UMS thread has its own thread context instead of sharing the thread context of a single thread.</span></span> <span data-ttu-id="9b0f4-122">Возможность переключения между потоками в пользовательском режиме делает UMS более эффективным, чем пулы потоков для кратковременных рабочих элементов, требующих небольшого количества системных вызовов.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-122">The ability to switch between threads in user mode makes UMS more efficient than thread pools for short-duration work items that require few system calls.</span></span>

<span data-ttu-id="9b0f4-123">*Волокно* — это единица выполнения, которая должна быть запланирована приложением вручную.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-123">A *fiber* is a unit of execution that must be manually scheduled by the application.</span></span> <span data-ttu-id="9b0f4-124">Волокна выполняются в контексте потоков, планирующих их.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-124">Fibers run in the context of the threads that schedule them.</span></span> <span data-ttu-id="9b0f4-125">Каждый поток может запланировать несколько волокон.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-125">Each thread can schedule multiple fibers.</span></span> <span data-ttu-id="9b0f4-126">Как правило, волокна не предоставляют преимуществ по сравнению с хорошо спроектированным многопоточным приложением.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-126">In general, fibers do not provide advantages over a well-designed multithreaded application.</span></span> <span data-ttu-id="9b0f4-127">Однако использование волокон может упростить перенос приложений, разработанных для планирования собственных потоков.</span><span class="sxs-lookup"><span data-stu-id="9b0f4-127">However, using fibers can make it easier to port applications that were designed to schedule their own threads.</span></span>

<span data-ttu-id="9b0f4-128">Дополнительные сведения см. в следующих разделах:</span><span class="sxs-lookup"><span data-stu-id="9b0f4-128">For more information, see the following topics:</span></span>

-   [<span data-ttu-id="9b0f4-129">Многозадачность</span><span class="sxs-lookup"><span data-stu-id="9b0f4-129">Multitasking</span></span>](multitasking.md)
-   [<span data-ttu-id="9b0f4-130">Планирование</span><span class="sxs-lookup"><span data-stu-id="9b0f4-130">Scheduling</span></span>](scheduling.md)
-   [<span data-ttu-id="9b0f4-131">Несколько потоков</span><span class="sxs-lookup"><span data-stu-id="9b0f4-131">Multiple Threads</span></span>](multiple-threads.md)
-   [<span data-ttu-id="9b0f4-132">Дочерние процессы</span><span class="sxs-lookup"><span data-stu-id="9b0f4-132">Child Processes</span></span>](child-processes.md)
-   [<span data-ttu-id="9b0f4-133">Пулы потоков</span><span class="sxs-lookup"><span data-stu-id="9b0f4-133">Thread Pools</span></span>](thread-pools.md)
-   [<span data-ttu-id="9b0f4-134">Объекты заданий</span><span class="sxs-lookup"><span data-stu-id="9b0f4-134">Job Objects</span></span>](job-objects.md)
-   [<span data-ttu-id="9b0f4-135">Планирование в пользовательском режиме</span><span class="sxs-lookup"><span data-stu-id="9b0f4-135">User-Mode Scheduling</span></span>](user-mode-scheduling.md)
-   [<span data-ttu-id="9b0f4-136">Виде</span><span class="sxs-lookup"><span data-stu-id="9b0f4-136">Fibers</span></span>](fibers.md)

 

 



