---
description: 64-разрядные версии Windows 7 и Windows Server 2008 R2 и более поздних версий Windows поддерживают более 64 логических процессоров на одном компьютере. Эта функция недоступна в 32-разрядных версиях Windows.
ms.assetid: c627ac0f-96e8-48b5-9103-4316f487e173
title: Группы процессоров
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fc5916faf3cf90bce7f8549834fe130f299f782d6b2534969c89d74df454ae9d
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119418674"
---
# <a name="processor-groups"></a>Группы процессоров

64-разрядные версии Windows 7 и Windows Server 2008 R2 и более поздних версий Windows поддерживают более 64 логических процессоров на одном компьютере. Эта функция недоступна в 32-разрядных версиях Windows.

Системы с более чем одним физическим процессором или системами с физическими процессорами, имеющими несколько ядер, предоставляют операционной системе несколько логических процессоров. *Логический процессор* — это одна логическая вычислительная система с точки зрения операционной системы, приложения или драйвера. *Ядро* — это одна единица процессора, которая может состоять из одного или нескольких логических процессоров. *Физический процессор* может состоять из одного или нескольких ядер. Физический процессор аналогичен пакету процессора, сокету или ЦП.

Поддержка систем, имеющих более 64 логических процессоров, основана на концепции *группы процессоров*, которая является статическим набором до 64 логических процессоров, который рассматривается как единая сущность планирования. Нумерация групп процессоров начинается с 0. Системы с менее чем 64 логическими процессорами всегда имеют одну группу, равную 0.

**Windows server 2008, Windows Vista, Windows Server 2003 и Windows XP:** Группы процессоров не поддерживаются.

При запуске системы операционная система создает группы процессоров и назначает логические процессоры группам. Если система поддерживает горячее добавление процессоров, операционная система предоставляет пространство в группах для процессоров, которые могут поступать во время работы системы. Операционная система уменьшает количество групп в системе. Например, система с 128 логических процессоров будет иметь две группы процессоров с 64 процессоров в каждой группе, а не четыре группы с 32 логических процессоров в каждой группе.

Для повышения производительности операционная система учитывает физическую локализацию при назначении логических процессоров группам. Все логические процессоры в ядре, а также все ядра физического процессора назначаются одной группе, если это возможно. Физические процессоры, физически близкие друг к другу, назначаются одной группе. Узел NUMA назначается одной группе, если емкость узла не превышает максимальный размер группы. Дополнительные сведения см. в разделе [Поддержка NUMA](numa-support.md).

В системах с 64 или менее процессорами существующие приложения будут правильно работать без изменений. Приложения, которые не вызывают никаких функций, использующих маски соответствия процессоров или номера процессоров, будут правильно работать на всех системах, независимо от числа процессоров. Для правильной работы в системах с более чем 64 логическими процессорами может потребоваться изменение следующих типов приложений:

-   Приложения, которые управляют, обслуживают или отображают сведения о процессоре для всей системы, должны быть изменены для поддержки более чем 64 логических процессоров. примером такого приложения является Windows диспетчер задач, который отображает рабочую нагрузку каждого процессора в системе.
-   Приложения, для которых важна производительность, и которые могут эффективно масштабироваться за пределами 64 логических процессоров, должны быть изменены для работы в таких системах. Например, изменения могут быть полезны для приложений базы данных.
-   Если приложение использует библиотеку DLL, которая содержит структуры данных для каждого процессора, а библиотека DLL не была изменена для поддержки более 64 логических процессоров, все потоки в приложении, которые вызывают функции, экспортированные библиотекой DLL, должны быть назначены одной группе.

По умолчанию приложение ограничено одной группой, что должно обеспечить достаточную вычислительную мощность для обычного приложения. Операционная система изначально назначает каждый процесс для одной группы циклическим перебором по группам в системе. Процесс начинает выполнение, назначенное одной группе. Первый поток процесса изначально выполняется в группе, которой назначен процесс. Каждый созданный поток назначается той же группе, что и создавший его поток.

Приложение, которое требует использования нескольких групп для выполнения на более чем 64 процессорах, должно явно определить место выполнения своих потоков и отвечает за присвоение процессору потоков соответствия требуемым группам. Флаг [наследования \_ родительского \_ сходства](process-creation-flags.md) можно использовать для указания родительского процесса (который может отличаться от текущего процесса), из которого создается сходство для нового процесса. Если процесс выполняется в одной группе, он может считывать и изменять его сходство с помощью [**жетпроцессаффинитимаск**](/windows/desktop/api/WinBase/nf-winbase-getprocessaffinitymask) и [**сетпроцессаффинитимаск**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask) , пока остается в той же группе. При изменении сходства процесса к его потокам применяется новое сходство.

Сходство потоков можно указать при создании, используя расширенный атрибут [**\_ \_ \_ \_ сходства группы атрибутов потока**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-updateprocthreadattribute) с функцией [**креатеремотесреадекс**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethreadex) . После создания потока его сходство можно изменить, вызвав [**сетсреадаффинитимаск**](/windows/desktop/api/WinBase/nf-winbase-setthreadaffinitymask) или [**сетсреадграупаффинити**](/windows/win32/api/processtopologyapi/nf-processtopologyapi-setthreadgroupaffinity). Если поток назначен другой группе по сравнению с процессом, сходство процесса обновляется, чтобы включить сходство потока, и процесс становится многогрупповым процессом. Дальнейшие изменения сходства должны выполняться для отдельных потоков. Сопоставление нескольких групповых процессов нельзя изменить с помощью [**сетпроцессаффинитимаск**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask). Функция [**жетпроцессграупаффинити**](/windows/win32/api/processtopologyapi/nf-processtopologyapi-getprocessgroupaffinity) извлекает набор групп, которым назначен процесс и его потоки.

Чтобы указать сходство для всех процессов, связанных с объектом задания, используйте функцию [**сетинформатионжобобжект**](/windows/win32/api/jobapi2/nf-jobapi2-setinformationjobobject) с классом сведений **жобобжектграупинформатион** или **жобобжектграупинформатионекс** .

Логический процессор определяется по номеру группы и его номеру процессора относительно группы. Он представляется структурой [**\_ номеров процессоров**](/windows/desktop/api/WinNT/ns-winnt-processor_number) . Числовые номера процессоров, используемые устаревшими функциями, относительные группы.

Описание изменений архитектуры операционной системы, поддерживающих более 64 процессоров, см. в техническом документе [, поддерживающем более 64 процессоров](https://www.microsoft.com/whdc/system/Sysinternals/MoreThan64proc.mspx).

Список новых функций и структур, поддерживающих группы процессоров, см. [в разделе новые возможности процессов и потоков](what-s-new-in-processes-and-threads.md).

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Несколько процессоров](multiple-processors.md)
</dt> <dt>

[Поддержка NUMA](numa-support.md)
</dt> </dl>

 

 
