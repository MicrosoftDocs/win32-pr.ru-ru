---
description: Поддержка больших страниц позволяет серверным приложениям устанавливать области памяти больших страниц, что особенно полезно в 64-разрядных Windows.
ms.assetid: 060115af-38d1-499c-b30c-47cd0cf42d20
title: Поддержка Large-Page
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3ef4578b5127e6613f2ff4b6e0b8a7cffcc53c9e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105673307"
---
# <a name="large-page-support"></a><span data-ttu-id="8271c-103">Поддержка Large-Page</span><span class="sxs-lookup"><span data-stu-id="8271c-103">Large-Page Support</span></span>

<span data-ttu-id="8271c-104">Поддержка больших страниц позволяет серверным приложениям устанавливать области памяти больших страниц, что особенно полезно в 64-разрядных Windows.</span><span class="sxs-lookup"><span data-stu-id="8271c-104">Large-page support enables server applications to establish large-page memory regions, which is particularly useful on 64-bit Windows.</span></span> <span data-ttu-id="8271c-105">Каждый крупный перевод страницы использует один буфер перевода внутри ЦП.</span><span class="sxs-lookup"><span data-stu-id="8271c-105">Each large-page translation uses a single translation buffer inside the CPU.</span></span> <span data-ttu-id="8271c-106">Размер буфера обычно составляет три порядка, превышающий размер исходного страницы. Это повышает эффективность буфера перевода, что может повысить производительность для часто запрашиваемой памяти.</span><span class="sxs-lookup"><span data-stu-id="8271c-106">The size of this buffer is typically three orders of magnitude larger than the native page size; this increases the efficiency of the translation buffer, which can increase performance for frequently accessed memory.</span></span>

<span data-ttu-id="8271c-107">В следующей процедуре описывается использование поддержки больших страниц.</span><span class="sxs-lookup"><span data-stu-id="8271c-107">The following procedure describes how to use large-page support.</span></span>

<span data-ttu-id="8271c-108">**Использование поддержки больших страниц**</span><span class="sxs-lookup"><span data-stu-id="8271c-108">**To use large-page support**</span></span>

1.  <span data-ttu-id="8271c-109">Получите привилегию **SeLockMemoryPrivilege** , вызвав функцию [**AdjustTokenPrivileges**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokenprivileges) .</span><span class="sxs-lookup"><span data-stu-id="8271c-109">Obtain the **SeLockMemoryPrivilege** privilege by calling the [**AdjustTokenPrivileges**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokenprivileges) function.</span></span> <span data-ttu-id="8271c-110">Дополнительные сведения см. в разделе [назначение привилегий учетной записи](../secbp/assigning-privileges-to-an-account.md) и [изменение привилегий в маркере](../secbp/changing-privileges-in-a-token.md).</span><span class="sxs-lookup"><span data-stu-id="8271c-110">For more information, see [Assigning Privileges to an Account](../secbp/assigning-privileges-to-an-account.md) and [Changing Privileges in a Token](../secbp/changing-privileges-in-a-token.md).</span></span>
2.  <span data-ttu-id="8271c-111">Получите минимальный размер страницы, вызвав функцию [**жетларжепажеминимум**](/windows/win32/api/memoryapi/nf-memoryapi-getlargepageminimum) .</span><span class="sxs-lookup"><span data-stu-id="8271c-111">Retrieve the minimum large-page size by calling the [**GetLargePageMinimum**](/windows/win32/api/memoryapi/nf-memoryapi-getlargepageminimum) function.</span></span>
3.  <span data-ttu-id="8271c-112">Включите значение **mem \_ Large \_ pages** при вызове функции [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) .</span><span class="sxs-lookup"><span data-stu-id="8271c-112">Include the **MEM\_LARGE\_PAGES** value when calling the [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) function.</span></span> <span data-ttu-id="8271c-113">Размер и выравнивание должны быть кратными минимуму для больших страниц.</span><span class="sxs-lookup"><span data-stu-id="8271c-113">The size and alignment must be a multiple of the large-page minimum.</span></span>

<span data-ttu-id="8271c-114">При написании приложений, использующих большие объемы памяти, учитывайте следующие моменты.</span><span class="sxs-lookup"><span data-stu-id="8271c-114">When writing applications that use large-page memory, keep the following considerations in mind:</span></span>

-   <span data-ttu-id="8271c-115">Если в течение длительного времени система работает слишком долго, то может быть трудно получить области памяти большой страницы, так как физическое пространство для каждой большой страницы должно быть непрерывным, но память может быть фрагментирована.</span><span class="sxs-lookup"><span data-stu-id="8271c-115">Large-page memory regions may be difficult to obtain after the system has been running for a long time because the physical space for each large page must be contiguous, but the memory may have become fragmented.</span></span> <span data-ttu-id="8271c-116">Выделение больших страниц в этих условиях может существенно повлиять на производительность системы.</span><span class="sxs-lookup"><span data-stu-id="8271c-116">Allocating large pages under these conditions can significantly affect system performance.</span></span> <span data-ttu-id="8271c-117">Поэтому приложения должны избегать многократного выделения больших страниц, а вместо этого выделить все крупные страницы один раз при запуске.</span><span class="sxs-lookup"><span data-stu-id="8271c-117">Therefore, applications should avoid making repeated large-page allocations and instead allocate all large pages one time, at startup.</span></span>
-   <span data-ttu-id="8271c-118">Память всегда доступна для чтения и записи и не может быть страничной (всегда резидентна в физической памяти).</span><span class="sxs-lookup"><span data-stu-id="8271c-118">The memory is always read/write and nonpageable (always resident in physical memory).</span></span>
-   <span data-ttu-id="8271c-119">Память является частью частного байта процесса, но не является частью рабочего набора, так как рабочий набор по определению содержит только страничную память.</span><span class="sxs-lookup"><span data-stu-id="8271c-119">The memory is part of the process private bytes but not part of the working set, because the working set by definition contains only pageable memory.</span></span>
-   <span data-ttu-id="8271c-120">Большие объемы выделения страниц не подчиняются ограничениям заданий.</span><span class="sxs-lookup"><span data-stu-id="8271c-120">Large-page allocations are not subject to job limits.</span></span>
-   <span data-ttu-id="8271c-121">Большая страничная память должна быть зарезервирована и зафиксирована как единая операция.</span><span class="sxs-lookup"><span data-stu-id="8271c-121">Large-page memory must be reserved and committed as a single operation.</span></span> <span data-ttu-id="8271c-122">Иными словами, большие страницы нельзя использовать для фиксации ранее зарезервированного диапазона памяти.</span><span class="sxs-lookup"><span data-stu-id="8271c-122">In other words, large pages cannot be used to commit a previously reserved range of memory.</span></span>
-   <span data-ttu-id="8271c-123">WOW64 в системах на базе Intel Itanium не поддерживает 32-разрядные приложения, использующие эту функцию.</span><span class="sxs-lookup"><span data-stu-id="8271c-123">WOW64 on Intel Itanium-based systems does not support 32-bit applications that use this feature.</span></span> <span data-ttu-id="8271c-124">Приложения должны быть перекомпилированы как собственные 64-разрядные приложения.</span><span class="sxs-lookup"><span data-stu-id="8271c-124">The applications should be recompiled as native 64-bit applications.</span></span>

 

 
