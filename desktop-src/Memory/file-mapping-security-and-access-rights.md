---
description: Модель безопасности Windows позволяет управлять доступом к объектам сопоставления файлов. Дополнительные сведения см. в разделе Модель Access-Control.
ms.assetid: 8bbf7c98-ff83-4ed9-8b82-f08dcd31295c
title: Безопасность и права доступа для сопоставления файлов
ms.topic: article
ms.date: 10/06/2018
ms.openlocfilehash: 65d520e12d1b555e7c633f0d1e0ba5142c330ce8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105673263"
---
# <a name="file-mapping-security-and-access-rights"></a><span data-ttu-id="5b8ce-104">Безопасность и права доступа для сопоставления файлов</span><span class="sxs-lookup"><span data-stu-id="5b8ce-104">File-mapping security and access rights</span></span>

<span data-ttu-id="5b8ce-105">Модель безопасности Windows позволяет управлять доступом к объектам сопоставления файлов.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-105">The Windows security model lets you control access to file-mapping objects.</span></span> <span data-ttu-id="5b8ce-106">Дополнительные сведения см. в разделе [модель управления доступом](../secauthz/access-control-model.md).</span><span class="sxs-lookup"><span data-stu-id="5b8ce-106">For more information, see [Access-Control Model](../secauthz/access-control-model.md).</span></span>

<span data-ttu-id="5b8ce-107">При вызове функции [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) можно указать [дескриптор безопасности](../secauthz/security-descriptors.md) для объекта сопоставления файлов.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-107">You can specify a [security descriptor](../secauthz/security-descriptors.md) for a file-mapping object when you call the [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) function.</span></span> <span data-ttu-id="5b8ce-108">Если указано **значение NULL**, то объект получает дескриптор безопасности по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-108">If you specify **NULL**, the object gets a default security descriptor.</span></span> <span data-ttu-id="5b8ce-109">Списки управления доступом в дескрипторе безопасности по умолчанию для объекта сопоставления файлов берутся из основного маркера или токена олицетворения создателя.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-109">The ACLs in the default security descriptor for a file-mapping object come from the primary or impersonation token of the creator.</span></span>

<span data-ttu-id="5b8ce-110">Чтобы получить дескриптор безопасности объекта сопоставления файлов, вызовите функцию [**жетнамедсекуритинфо**](/windows/win32/api/aclapi/nf-aclapi-getnamedsecurityinfoa) или [**жетсекуритинфо**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) .</span><span class="sxs-lookup"><span data-stu-id="5b8ce-110">To retrieve the security descriptor of a file-mapping object, call the [**GetNamedSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getnamedsecurityinfoa) or [**GetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) function.</span></span> <span data-ttu-id="5b8ce-111">Чтобы задать дескриптор безопасности объекта сопоставления файлов, вызовите функцию [**сетнамедсекуритинфо**](/windows/win32/api/aclapi/nf-aclapi-setnamedsecurityinfoa) или [**сетсекуритинфо**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo) .</span><span class="sxs-lookup"><span data-stu-id="5b8ce-111">To set the security descriptor of a file-mapping object, call the [**SetNamedSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setnamedsecurityinfoa) or [**SetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo) function.</span></span>

<span data-ttu-id="5b8ce-112">Допустимые права доступа для объектов сопоставления файлов включают разрешения на **Удаление**, **Чтение \_**, **Запись DAC \_** и запись [права доступа](../secauthz/standard-access-rights.md) **\_ владельца** уровня Стандартный.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-112">The valid access rights for file-mapping objects include the **DELETE**, **READ\_CONTROL**, **WRITE\_DAC**, and **WRITE\_OWNER** [standard access rights](../secauthz/standard-access-rights.md).</span></span> <span data-ttu-id="5b8ce-113">Объекты сопоставления файлов не поддерживают стандартную **синхронизацию** прав доступа.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-113">File mapping objects do not support the **SYNCHRONIZE** standard access right.</span></span> <span data-ttu-id="5b8ce-114">В следующей таблице перечислены права доступа, относящиеся к объектам сопоставления файлов.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-114">The following table lists the access rights that are specific to file-mapping objects.</span></span>

| <span data-ttu-id="5b8ce-115">Право доступа</span><span class="sxs-lookup"><span data-stu-id="5b8ce-115">Access right</span></span> | <span data-ttu-id="5b8ce-116">Значение</span><span class="sxs-lookup"><span data-stu-id="5b8ce-116">Meaning</span></span> |
|-|-|
| <span data-ttu-id="5b8ce-117">**\_ \_ все \_ доступ к СОпоставлению файлов**</span><span class="sxs-lookup"><span data-stu-id="5b8ce-117">**FILE\_MAP\_ALL\_ACCESS**</span></span> | <span data-ttu-id="5b8ce-118">Включает все права доступа к объекту сопоставления файлов, за исключением **\_ \_ выполнения сопоставления файлов**.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-118">Includes all access rights to a file-mapping object except **FILE\_MAP\_EXECUTE**.</span></span> <span data-ttu-id="5b8ce-119">Функции [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) и [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) обрабатывают это то же самое, что и указание **\_ \_ записи файла в карте файлов**.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-119">The [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) and [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) functions treat this the same as specifying **FILE\_MAP\_WRITE**.</span></span> |
| <span data-ttu-id="5b8ce-120">**\_выполнение схемы \_ файла**</span><span class="sxs-lookup"><span data-stu-id="5b8ce-120">**FILE\_MAP\_EXECUTE**</span></span> | <span data-ttu-id="5b8ce-121">Разрешает сопоставление исполняемых представлений объекта сопоставления файлов.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-121">Allows mapping of executable views of the file-mapping object.</span></span> <span data-ttu-id="5b8ce-122">Объект должен быть создан с защитой страницы, что позволяет выполнять доступ, например **\_ \_ чтение страниц**, **\_ выполнение \_ вритекопи** или **выполнение страницы с защитой \_ \_ ReadWrite** .</span><span class="sxs-lookup"><span data-stu-id="5b8ce-122">The object must have been created with page protection that allows execute access, such as **PAGE\_EXECUTE\_READ**, **PAGE\_EXECUTE\_WRITECOPY**, or **PAGE\_EXECUTE\_READWRITE** protection.</span></span>  |
| <span data-ttu-id="5b8ce-123">**\_чтение таблицы \_ файлов**</span><span class="sxs-lookup"><span data-stu-id="5b8ce-123">**FILE\_MAP\_READ**</span></span> | <span data-ttu-id="5b8ce-124">Разрешает сопоставление представлений, предназначенных только для чтения или копирования в режиме записи для объекта сопоставления файлов.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-124">Allows mapping of read-only or copy-on-write views of the file-mapping object.</span></span>  |
| <span data-ttu-id="5b8ce-125">**\_запись схемы \_ файла**</span><span class="sxs-lookup"><span data-stu-id="5b8ce-125">**FILE\_MAP\_WRITE**</span></span> | <span data-ttu-id="5b8ce-126">Разрешает сопоставление представлений, предназначенных только для чтения, копирования в режиме записи или для чтения и записи объекта сопоставления файлов.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-126">Allows mapping of read-only, copy-on-write, or read/write views of a file-mapping object.</span></span> <span data-ttu-id="5b8ce-127">Объект должен быть создан с защитой страницы, допускающей доступ на запись, например с возможностью чтения с **страницы \_** или с помощью **\_ инструкции EXECUTE \_ ReadWrite** .</span><span class="sxs-lookup"><span data-stu-id="5b8ce-127">The object must have been created with page protection that allows write access, such as **PAGE\_READWRITE** or **PAGE\_EXECUTE\_READWRITE** protection.</span></span> |

<span data-ttu-id="5b8ce-128">Для сопоставления представления копирования при записи объекта сопоставления файлов требуется тот же доступ, что и для представления только для чтения.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-128">Mapping a copy-on-write view of a file-mapping object requires the same access as mapping a read-only view.</span></span> <span data-ttu-id="5b8ce-129">Флаг **\_ \_ копирования схемы файла** не является правом доступа, и его не следует указывать как часть списка DACL в дескрипторе безопасности.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-129">The **FILE\_MAP\_COPY** flag is not an access right, and it should not be specified as part of a DACL in a security descriptor.</span></span> <span data-ttu-id="5b8ce-130">Это значение может использоваться только с функциями, которые сопоставляют представление объекта сопоставления файлов, например функции [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) и [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) , или с функцией [**OpenFileMapping**](/windows/desktop/api/WinBase/nf-winbase-openfilemappinga) , которая рассматривает **Сопоставление файлов так \_ \_** же, как и **\_ \_ считывание сопоставления файлов**.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-130">This value can be used only with functions that map a view of a file-mapping object, such as the [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) and [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) functions, or with the [**OpenFileMapping**](/windows/desktop/api/WinBase/nf-winbase-openfilemappinga) function, which treats **FILE\_MAP\_COPY** the same way it treats **FILE\_MAP\_READ**.</span></span>

<span data-ttu-id="5b8ce-131">Вы можете запросить право доступа к **\_ системе \_ безопасности системы доступа** к объекту сопоставления файлов, если требуется прочитать или записать список SACL объекта.</span><span class="sxs-lookup"><span data-stu-id="5b8ce-131">You can request the **ACCESS\_SYSTEM\_SECURITY** access right to a file-mapping object if you want to read or write the object's SACL.</span></span> <span data-ttu-id="5b8ce-132">Дополнительные сведения см. в разделе [списки управления доступом (ACL)](../secauthz/access-control-lists.md) и [права доступа к спискам SACL](../secauthz/sacl-access-right.md).</span><span class="sxs-lookup"><span data-stu-id="5b8ce-132">For more information, see [Access-Control Lists (ACLs)](../secauthz/access-control-lists.md) and [SACL Access Right](../secauthz/sacl-access-right.md).</span></span>
