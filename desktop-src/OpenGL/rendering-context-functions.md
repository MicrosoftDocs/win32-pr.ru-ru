---
title: Функции контекста отрисовки
description: Пять функций ВГЛ управляют контекстами отрисовки, как описано в следующей таблице.
ms.assetid: e03ec03d-2a85-49de-a2be-fe81a5ec5f7f
keywords:
- Функции ВГЛ, контексты отрисовки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ad8d3a8ea0333154d3145711829ab23e262fa485
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103987843"
---
# <a name="rendering-context-functions"></a><span data-ttu-id="0e28f-104">Функции контекста отрисовки</span><span class="sxs-lookup"><span data-stu-id="0e28f-104">Rendering Context Functions</span></span>

<span data-ttu-id="0e28f-105">Пять функций ВГЛ управляют контекстами отрисовки, как описано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="0e28f-105">Five WGL functions manage rendering contexts, as described in the following table.</span></span>



| <span data-ttu-id="0e28f-106">Функция ВГЛ</span><span class="sxs-lookup"><span data-stu-id="0e28f-106">WGL Function</span></span>                                         | <span data-ttu-id="0e28f-107">Описание</span><span class="sxs-lookup"><span data-stu-id="0e28f-107">Description</span></span>                                                                                  |
|------------------------------------------------------|----------------------------------------------------------------------------------------------|
| [<span data-ttu-id="0e28f-108">**вглкреатеконтекст**</span><span class="sxs-lookup"><span data-stu-id="0e28f-108">**wglCreateContext**</span></span>](/windows/desktop/api/wingdi/nf-wingdi-wglcreatecontext)         | <span data-ttu-id="0e28f-109">Создает новый контекст визуализации.</span><span class="sxs-lookup"><span data-stu-id="0e28f-109">Creates a new rendering context.</span></span>                                                             |
| [<span data-ttu-id="0e28f-110">**вглмакекуррент**</span><span class="sxs-lookup"><span data-stu-id="0e28f-110">**WglMakeCurrent**</span></span>](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent)             | <span data-ttu-id="0e28f-111">Задает текущий контекст отрисовки потока.</span><span class="sxs-lookup"><span data-stu-id="0e28f-111">Sets a thread's current rendering context.</span></span>                                                   |
| [<span data-ttu-id="0e28f-112">**вглжеткуррентконтекст**</span><span class="sxs-lookup"><span data-stu-id="0e28f-112">**WglGetCurrentContext**</span></span>](/windows/desktop/api/wingdi/nf-wingdi-wglgetcurrentcontext) | <span data-ttu-id="0e28f-113">Получает маркер текущего контекста отрисовки потока.</span><span class="sxs-lookup"><span data-stu-id="0e28f-113">Obtains a handle to a thread's current rendering context.</span></span>                                    |
| [<span data-ttu-id="0e28f-114">**вглжеткуррентдк**</span><span class="sxs-lookup"><span data-stu-id="0e28f-114">**WglGetCurrentDC**</span></span>](/windows/desktop/api/wingdi/nf-wingdi-wglgetcurrentdc)           | <span data-ttu-id="0e28f-115">Получает маркер для контекста устройства, связанного с текущим контекстом отрисовки потока.</span><span class="sxs-lookup"><span data-stu-id="0e28f-115">Obtains a handle to the device context associated with a thread's current rendering context.</span></span> |
| [<span data-ttu-id="0e28f-116">**вглделетеконтекст**</span><span class="sxs-lookup"><span data-stu-id="0e28f-116">**WglDeleteContext**</span></span>](/windows/desktop/api/wingdi/nf-wingdi-wgldeletecontext)         | <span data-ttu-id="0e28f-117">Удаляет контекст визуализации.</span><span class="sxs-lookup"><span data-stu-id="0e28f-117">Deletes a rendering context.</span></span>                                                                 |



 

<span data-ttu-id="0e28f-118">Функция [**вглкреатеконтекст**](/windows/desktop/api/wingdi/nf-wingdi-wglcreatecontext) принимает в качестве параметра обработчик контекста устройства и возвращает маркер контекста отрисовки.</span><span class="sxs-lookup"><span data-stu-id="0e28f-118">The [**wglCreateContext**](/windows/desktop/api/wingdi/nf-wingdi-wglcreatecontext) function takes a device context handle as its parameter and returns a rendering context handle.</span></span> <span data-ttu-id="0e28f-119">Созданный контекст отрисовки подходит для рисования на устройстве, на которое ссылается обработчик контекста устройства.</span><span class="sxs-lookup"><span data-stu-id="0e28f-119">The created rendering context is suitable for drawing on the device referenced by the device context handle.</span></span> <span data-ttu-id="0e28f-120">В частности, его формат пикселей совпадает с форматом пикселей контекста устройства.</span><span class="sxs-lookup"><span data-stu-id="0e28f-120">In particular, its pixel format is the same as the device context's pixel format.</span></span> <span data-ttu-id="0e28f-121">После создания контекста подготовки к просмотру можно освободить или удалить контекст устройства.</span><span class="sxs-lookup"><span data-stu-id="0e28f-121">After you create a rendering context, you can release or dispose of the device context.</span></span> <span data-ttu-id="0e28f-122">Дополнительные сведения о создании, получении, освобождении и уничтожении контекста устройства см. в разделе контексты [устройств](/windows/desktop/gdi/device-contexts) .</span><span class="sxs-lookup"><span data-stu-id="0e28f-122">See [Device Contexts](/windows/desktop/gdi/device-contexts) for more details on creating, obtaining, releasing, and disposing of a device context.</span></span>

> [!Note]  
> <span data-ttu-id="0e28f-123">Контекст устройства, отправляемый в [**вглкреатеконтекст**](/windows/desktop/api/wingdi/nf-wingdi-wglcreatecontext) , должен быть контекстом отображаемого устройства, контекстом устройства памяти или контекстом устройства цветового принтера, использующего четыре или более бита на пиксель.</span><span class="sxs-lookup"><span data-stu-id="0e28f-123">The device context sent to [**wglCreateContext**](/windows/desktop/api/wingdi/nf-wingdi-wglcreatecontext) must be a display device context, a memory device context, or a color printer device context that uses four or more bits per pixel.</span></span> <span data-ttu-id="0e28f-124">Контекст устройства не может быть контекстом устройства монохромного принтера.</span><span class="sxs-lookup"><span data-stu-id="0e28f-124">The device context cannot be a monochrome printer device context.</span></span>

 

<span data-ttu-id="0e28f-125">Функция [**вглмакекуррент**](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent) принимает маркер контекста отрисовки и контекст устройства обрабатывает как параметры.</span><span class="sxs-lookup"><span data-stu-id="0e28f-125">The [**wglMakeCurrent**](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent) function takes a rendering context handle and a device context handle as parameters.</span></span> <span data-ttu-id="0e28f-126">Все последующие вызовы OpenGL, произведенные потоком, выполняются через этот контекст визуализации и отображаются на устройстве, на которое ссылается этот контекст устройства.</span><span class="sxs-lookup"><span data-stu-id="0e28f-126">All subsequent OpenGL calls made by the thread are made through that rendering context, and are drawn on the device referenced by that device context.</span></span> <span data-ttu-id="0e28f-127">Контекст устройства не должен совпадать с тем, который передается в **вглкреатеконтекст** при создании контекста визуализации, но должен находиться на том же устройстве и иметь тот же формат пикселей.</span><span class="sxs-lookup"><span data-stu-id="0e28f-127">The device context does not have to be the same one passed to **wglCreateContext** when the rendering context was created, but it must be on the same device and have the same pixel format.</span></span> <span data-ttu-id="0e28f-128">Вызов **вглмакекуррент** создает связь между переданным контекстом отрисовки и контекстом устройства.</span><span class="sxs-lookup"><span data-stu-id="0e28f-128">The call to **wglMakeCurrent** creates an association between the supplied rendering context and device context.</span></span> <span data-ttu-id="0e28f-129">Невозможно освободить или удалить контекст устройства, связанный с текущим контекстом отрисовки, до тех пор, пока не станет текущим контекстом отрисовки.</span><span class="sxs-lookup"><span data-stu-id="0e28f-129">You cannot release or dispose of the device context associated with a current rendering context until after you make the rendering context not current.</span></span>

<span data-ttu-id="0e28f-130">Когда поток имеет текущий контекст отрисовки, он может выполнять вызовы графических модулей OpenGL.</span><span class="sxs-lookup"><span data-stu-id="0e28f-130">Once a thread has a current rendering context, it can make OpenGL graphics calls.</span></span> <span data-ttu-id="0e28f-131">Все вызовы должны проходить через контекст отрисовки.</span><span class="sxs-lookup"><span data-stu-id="0e28f-131">All calls must pass through a rendering context.</span></span> <span data-ttu-id="0e28f-132">Ничего не происходит при вызове графических элементов OpenGL из потока, в котором отсутствует текущий контекст отрисовки.</span><span class="sxs-lookup"><span data-stu-id="0e28f-132">Nothing happens if you make OpenGL graphics calls from a thread that lacks a current rendering context.</span></span>

<span data-ttu-id="0e28f-133">Функция [**вглжеткуррентконтекст**](/windows/desktop/api/wingdi/nf-wingdi-wglgetcurrentcontext) не принимает параметров и возвращает маркер текущего контекста отрисовки вызывающего потока.</span><span class="sxs-lookup"><span data-stu-id="0e28f-133">The [**wglGetCurrentContext**](/windows/desktop/api/wingdi/nf-wingdi-wglgetcurrentcontext) function takes no parameters, and returns a handle to the calling thread's current rendering context.</span></span> <span data-ttu-id="0e28f-134">Если поток не имеет текущего контекста отрисовки, возвращается значение **null**.</span><span class="sxs-lookup"><span data-stu-id="0e28f-134">If the thread has no current rendering context, the return value is **NULL**.</span></span>

<span data-ttu-id="0e28f-135">При получении маркера для контекста устройства, связанного с текущим контекстом отрисовки потока путем вызова [**вглжеткуррентдк**](/windows/desktop/api/wingdi/nf-wingdi-wglgetcurrentdc), Ассоциация создается при внесении текущего контекста отрисовки.</span><span class="sxs-lookup"><span data-stu-id="0e28f-135">When you obtain a handle to the device context associated with a thread's current rendering context by calling [**wglGetCurrentDC**](/windows/desktop/api/wingdi/nf-wingdi-wglgetcurrentdc), the association is created when a rendering context is made current.</span></span>

<span data-ttu-id="0e28f-136">Можно разорвать связь между текущим контекстом отрисовки и потоком, вызвав [**вглмакекуррент**](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent) с одним из двух дескрипторов:</span><span class="sxs-lookup"><span data-stu-id="0e28f-136">You can break the association between a current rendering context and a thread by calling [**wglMakeCurrent**](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent) with either of two handles:</span></span>

-   <span data-ttu-id="0e28f-137">Маркер контекста отрисовки **null**</span><span class="sxs-lookup"><span data-stu-id="0e28f-137">A **null** rendering context handle</span></span>
-   <span data-ttu-id="0e28f-138">Маркер, отличный от первоначально вызванного</span><span class="sxs-lookup"><span data-stu-id="0e28f-138">A handle other than the one originally called</span></span>

<span data-ttu-id="0e28f-139">После вызова [**вглмакекуррент**](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent) с параметром Handle для обработки контекста отрисовки, установленным в **значение NULL**, вызывающий поток не имеет текущего контекста отрисовки.</span><span class="sxs-lookup"><span data-stu-id="0e28f-139">After calling [**wglMakeCurrent**](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent) with the rendering context handle parameter set to **NULL**, the calling thread has no current rendering context.</span></span> <span data-ttu-id="0e28f-140">Контекст отрисовки освобождается из своего соединения с потоком, и завершается связь контекста отрисовки с контекстом устройства.</span><span class="sxs-lookup"><span data-stu-id="0e28f-140">The rendering context is released from its connection to the thread, and the rendering context's association to a device context ends.</span></span> <span data-ttu-id="0e28f-141">OpenGL очищает все команды рисования и может освободить некоторые ресурсы.</span><span class="sxs-lookup"><span data-stu-id="0e28f-141">OpenGL flushes all drawing commands, and may release some resources.</span></span> <span data-ttu-id="0e28f-142">Прорисовка OpenGL не будет выполняться до следующего вызова **вглмакекуррент**, так как поток может не вызывать графические изображения OpenGL до тех пор, пока не вернет текущий контекст визуализации.</span><span class="sxs-lookup"><span data-stu-id="0e28f-142">No OpenGL drawing will be done until the next call to **wglMakeCurrent**, because the thread can make no OpenGL graphics calls until it regains a current rendering context.</span></span>

<span data-ttu-id="0e28f-143">Второй способ разрыва связи между контекстом отрисовки и потоком заключается в вызове **вглмакекуррент** с другим контекстом визуализации.</span><span class="sxs-lookup"><span data-stu-id="0e28f-143">The second way to break the association between a rendering context and a thread is to call **wglMakeCurrent** with a different rendering context.</span></span> <span data-ttu-id="0e28f-144">После такого вызова вызывающий поток имеет новый текущий контекст отрисовки, бывший текущий контекст отрисовки освобождается от своего соединения с потоком, а предыдущий текущий контекст отрисовки заканчивается контекстом устройства.</span><span class="sxs-lookup"><span data-stu-id="0e28f-144">After such a call, the calling thread has a new current rendering context, the former current rendering context is released from its connection to the thread, and the former current rendering context's association to a device context ends.</span></span>

<span data-ttu-id="0e28f-145">Функция [**вглделетеконтекст**](/windows/desktop/api/wingdi/nf-wingdi-wgldeletecontext) принимает один параметр — маркер для удаляемого контекста подготовки к просмотру.</span><span class="sxs-lookup"><span data-stu-id="0e28f-145">The [**wglDeleteContext**](/windows/desktop/api/wingdi/nf-wingdi-wgldeletecontext) function takes a single parameter, the handle to the rendering context to be deleted.</span></span> <span data-ttu-id="0e28f-146">Перед вызовом **вглделетеконтекст** сделайте контекст визуализации неактуальным, вызвав [**вглмакекуррент**](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent), и удалите или освободите контекст связанного устройства, вызвав [делетедк](/windows/desktop/api/wingdi/nf-wingdi-deletedc) или [релеаседк](/windows/desktop/api/winuser/nf-winuser-releasedc) соответственно.</span><span class="sxs-lookup"><span data-stu-id="0e28f-146">Before calling **wglDeleteContext**, make the rendering context not current by calling [**wglMakeCurrent**](/windows/desktop/api/wingdi/nf-wingdi-wglmakecurrent), and delete or release the associated device context by calling [DeleteDC](/windows/desktop/api/wingdi/nf-wingdi-deletedc) or [ReleaseDC](/windows/desktop/api/winuser/nf-winuser-releasedc) as appropriate.</span></span>

<span data-ttu-id="0e28f-147">Если поток удаляет контекст отрисовки, который является текущим контекстом визуализации другого потока, возникает ошибка.</span><span class="sxs-lookup"><span data-stu-id="0e28f-147">It is an error for a thread to delete a rendering context that is another thread's current rendering context.</span></span> <span data-ttu-id="0e28f-148">Однако если контекст визуализации является текущим контекстом отрисовки вызывающего потока, **вглделетеконтекст** очищает все команды рисования OpenGL и делает контекст визуализации неактуальным перед удалением.</span><span class="sxs-lookup"><span data-stu-id="0e28f-148">However, if a rendering context is the calling thread's current rendering context, **wglDeleteContext** flushes all OpenGL drawing commands and makes the rendering context not current before deleting it.</span></span> <span data-ttu-id="0e28f-149">В этом случае, полагается на **вглделетеконтекст** , чтобы сделать контекст подготовки к просмотру неактуальным, программист должен удалить или освободить контекст связанного устройства.</span><span class="sxs-lookup"><span data-stu-id="0e28f-149">In this case, relying on **wglDeleteContext** to make a rendering context not current requires the programmer to delete or release the associated device context.</span></span>

 

 