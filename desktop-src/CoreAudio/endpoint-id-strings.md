---
description: Строки идентификатора конечной точки
ms.assetid: 3c955e2d-daaa-4b77-8ca5-890383bb2d39
title: Строки идентификатора конечной точки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f04c07da78b92795ebadd7d8f9731f7188ae8dc3
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105655625"
---
# <a name="endpoint-id-strings"></a><span data-ttu-id="d0625-103">Строки идентификатора конечной точки</span><span class="sxs-lookup"><span data-stu-id="d0625-103">Endpoint ID Strings</span></span>

<span data-ttu-id="d0625-104">В Windows Vista система создает строки идентификатора конечной точки для идентификации [устройств конечных точек звука](audio-endpoint-devices.md) в системе.</span><span class="sxs-lookup"><span data-stu-id="d0625-104">In Windows Vista, the system generates endpoint ID strings to identify the [audio endpoint devices](audio-endpoint-devices.md) in the system.</span></span> <span data-ttu-id="d0625-105">Строка идентификатора конечной точки — это строка расширенных символов, заканчивающаяся символом NULL.</span><span class="sxs-lookup"><span data-stu-id="d0625-105">An endpoint ID string is a null-terminated wide-character string.</span></span> <span data-ttu-id="d0625-106">Строка идентификатора конечной точки для конкретного устройства с конечной точкой уникально идентифицирует устройство между всеми устройствами конечных точек аудио в системе.</span><span class="sxs-lookup"><span data-stu-id="d0625-106">The endpoint ID string for a particular audio endpoint device uniquely identifies the device among all audio endpoint devices in the system.</span></span>

<span data-ttu-id="d0625-107">Если система содержит два или более идентичные устройства звуковых адаптеров, соответствующие им устройства конечных точек будут иметь одинаковые понятные имена, но каждое устройство конечной точки будет иметь уникальную строку идентификатора конечной точки.</span><span class="sxs-lookup"><span data-stu-id="d0625-107">If a system contains two or more identical audio adapter devices, the corresponding audio endpoint devices will have identical friendly names, but each endpoint device will have a unique endpoint ID string.</span></span> <span data-ttu-id="d0625-108">Дополнительные сведения о получении понятного имени устройства конечной точки см. в разделе [Свойства устройства](device-properties.md).</span><span class="sxs-lookup"><span data-stu-id="d0625-108">For more information about obtaining the friendly name of an endpoint device, see [Device Properties](device-properties.md).</span></span>

<span data-ttu-id="d0625-109">После получения экземпляра интерфейса [**иммдевице**](/windows/desktop/api/Mmdeviceapi/nn-mmdeviceapi-immdevice) для устройства конечной точки аудио клиент может вызвать метод [**Иммдевице:: GetId**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-getid) , чтобы получить строку идентификатора конечной точки для устройства.</span><span class="sxs-lookup"><span data-stu-id="d0625-109">After obtaining an [**IMMDevice**](/windows/desktop/api/Mmdeviceapi/nn-mmdeviceapi-immdevice) interface instance for an audio endpoint device, a client can call the [**IMMDevice::GetId**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-getid) method to obtain the endpoint ID string for the device.</span></span> <span data-ttu-id="d0625-110">Клиент может использовать строку идентификатора конечной точки для создания экземпляра устройства конечной точки аудио в более позднее время или в другом процессе, вызвав метод [**иммдевицеенумератор::-Device**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdevice) .</span><span class="sxs-lookup"><span data-stu-id="d0625-110">A client can use the endpoint ID string to create an instance of the audio endpoint device at a later time or in a different process by calling the [**IMMDeviceEnumerator::GetDevice**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdevice) method.</span></span>

<span data-ttu-id="d0625-111">Клиент может организовать получение уведомления при изменении состояния любого устройства конечной точки аудио.</span><span class="sxs-lookup"><span data-stu-id="d0625-111">A client can arrange to receive a notification when the status of any audio endpoint device changes.</span></span> <span data-ttu-id="d0625-112">Для получения уведомлений клиент реализует интерфейс [**иммнотификатионклиент**](/windows/desktop/api/Mmdeviceapi/nn-mmdeviceapi-immnotificationclient) и регистрирует этот интерфейс с помощью API ммдевице.</span><span class="sxs-lookup"><span data-stu-id="d0625-112">To receive notifications, the client implements an [**IMMNotificationClient**](/windows/desktop/api/Mmdeviceapi/nn-mmdeviceapi-immnotificationclient) interface and registers that interface with the MMDevice API.</span></span> <span data-ttu-id="d0625-113">При изменении состояния устройства конечной точки API Ммдевице вызывает соответствующий метод в интерфейсе [**едатафлов**](/windows/win32/api/mmdeviceapi/ne-mmdeviceapi-edataflow) клиента.</span><span class="sxs-lookup"><span data-stu-id="d0625-113">When the status of an endpoint device changes, the MMDevice API calls the appropriate method in the client's [**EDataFlow**](/windows/win32/api/mmdeviceapi/ne-mmdeviceapi-edataflow) interface.</span></span> <span data-ttu-id="d0625-114">Одним из входных параметров метода является строка идентификатора конечной точки, которая определяет устройство, состояние которого изменилось.</span><span class="sxs-lookup"><span data-stu-id="d0625-114">One of the input parameters to the method is the endpoint ID string that identifies the endpoint device whose status has changed.</span></span> <span data-ttu-id="d0625-115">Дополнительные сведения о **едатафлов** см. в разделе [события устройства](device-events.md).</span><span class="sxs-lookup"><span data-stu-id="d0625-115">For more information about **EDataFlow**, see [Device Events](device-events.md).</span></span>

<span data-ttu-id="d0625-116">Устаревшие API аудио, такие как DirectSound и функции мультимедиа Windows, имеют собственные интерфейсы для перечисления и идентификации звуковых устройств.</span><span class="sxs-lookup"><span data-stu-id="d0625-116">Legacy audio APIs such as DirectSound and the Windows multimedia functions have their own interfaces for enumerating and identifying audio devices.</span></span> <span data-ttu-id="d0625-117">В Windows Vista эти интерфейсы были расширены для предоставления строк с ИДЕНТИФИКАТОРами конечных точек, которые определяют устройства конечных точек, которые лежат в процессе абстракций устройств, представленных интерфейсами API.</span><span class="sxs-lookup"><span data-stu-id="d0625-117">In Windows Vista, these interfaces have been extended to supply the endpoint ID strings that identify the endpoint devices that underlie the device abstractions presented by the APIs.</span></span>

<span data-ttu-id="d0625-118">Во время перечисления DirectSound устройства DirectSound предоставляет строку идентификатора конечной точки для каждого устройства, которое оно перечисляет.</span><span class="sxs-lookup"><span data-stu-id="d0625-118">During DirectSound device enumeration, DirectSound supplies the endpoint ID string for each device that it enumerates.</span></span> <span data-ttu-id="d0625-119">Дополнительные сведения см. в статье [события аудио для устаревших аудио приложений](audio-events-for-legacy-audio-applications.md).</span><span class="sxs-lookup"><span data-stu-id="d0625-119">For more information, see [Audio Events for Legacy Audio Applications](audio-events-for-legacy-audio-applications.md).</span></span>

<span data-ttu-id="d0625-120">Чтобы получить строку идентификатора конечной точки для устаревшего устройства волны, используйте функцию [**вавеаутмессаже**](/previous-versions//dd743865(v=vs.85)) или [**вавеинмессаже**](/previous-versions//dd743846(v=vs.85)) для отправки \_ сообщения DRV куерифунктионинстанцеид в драйвер устройства волны.</span><span class="sxs-lookup"><span data-stu-id="d0625-120">To obtain the endpoint ID string for a legacy waveform device, use the [**waveOutMessage**](/previous-versions//dd743865(v=vs.85)) or [**waveInMessage**](/previous-versions//dd743846(v=vs.85)) function to send a DRV\_QUERYFUNCTIONINSTANCEID message to the waveform device driver.</span></span> <span data-ttu-id="d0625-121">Пример кода, демонстрирующий использование этого сообщения, см. в разделе [роли устройств для устаревших приложений Windows мультимедиа](device-roles-for-legacy-windows-multimedia-applications.md).</span><span class="sxs-lookup"><span data-stu-id="d0625-121">For a code example that shows the use of this message, see [Device Roles for Legacy Windows Multimedia Applications](device-roles-for-legacy-windows-multimedia-applications.md).</span></span>

<span data-ttu-id="d0625-122">Дополнительные сведения об использовании возможностей основных API аудио для улучшения приложений, использующих устаревшие аудио API, см. в статье [взаимодействие с устаревшими](interoperability-with-legacy-audio-apis.md)аудио API.</span><span class="sxs-lookup"><span data-stu-id="d0625-122">For more information about using the capabilities of the core audio APIs to enhance applications that use legacy audio APIs, see [Interoperability with Legacy Audio APIs](interoperability-with-legacy-audio-apis.md).</span></span>

<span data-ttu-id="d0625-123">Клиенты должны считать содержимое строки идентификатора конечной точки непрозрачной.</span><span class="sxs-lookup"><span data-stu-id="d0625-123">Clients should treat the contents of the endpoint ID string as opaque.</span></span> <span data-ttu-id="d0625-124">То есть клиенты не должны пытаться проанализировать содержимое строки для получения сведений об устройстве.</span><span class="sxs-lookup"><span data-stu-id="d0625-124">That is, clients should not attempt to parse the contents of the string to obtain information about the device.</span></span> <span data-ttu-id="d0625-125">Причина в том, что формат строки не определен и может изменяться от одной реализации системного модуля API Ммдевице к следующему.</span><span class="sxs-lookup"><span data-stu-id="d0625-125">The reason is that the string format is undefined and might change from one implementation of the MMDevice API system module to the next.</span></span>

<span data-ttu-id="d0625-126">Время существования строки идентификатора конечной точки привязывается к установке устройства.</span><span class="sxs-lookup"><span data-stu-id="d0625-126">The lifetime of an endpoint ID string is tied to the device installation.</span></span> <span data-ttu-id="d0625-127">Строка идентификатора конечной точки устройства изменяется, если пользователь обновляет драйвер устройства или если пользователь удаляет устройство, и устанавливает его снова.</span><span class="sxs-lookup"><span data-stu-id="d0625-127">The endpoint ID string of a device changes if the user upgrades the device driver, or if the user uninstalls the device, and installs it again.</span></span> <span data-ttu-id="d0625-128">Однако строка идентификатора конечной точки остается неизменной при перезапуске системы, и строка идентификатора конечной точки устройства USB остается неизменной, если пользователь отсоединяет устройство и снова подключается к нему.</span><span class="sxs-lookup"><span data-stu-id="d0625-128">However, the endpoint ID string remains unchanged across system restarts, and the endpoint ID string of a USB audio device remains unchanged if the user unplugs the device and plugs it back in.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d0625-129">См. также</span><span class="sxs-lookup"><span data-stu-id="d0625-129">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d0625-130">Устройства конечных точек звука</span><span class="sxs-lookup"><span data-stu-id="d0625-130">Audio Endpoint Devices</span></span>](audio-endpoint-devices.md)
</dt> </dl>

 

 
