---
description: Устройства конечных точек звука
ms.assetid: 773714fb-3b00-4f03-988f-05c5835f87cf
title: Устройства конечных точек звука
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d11145227ff4f6cf4eb7dd11342e28b3a8260aac95c41b32faed6b2d6bd414dd
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118407338"
---
# <a name="audio-endpoint-devices"></a>Устройства конечных точек звука

Термин *устройство конечной точки* относится к аппаратному устройству, которое находится на одном конце пути данных, который создается или завершается в прикладной программе. Примеры устройств конечных точек аудио — это динамики, наушники, микрофоны и проигрыватели компакт-дисков. Звуковые данные, перемещаемые по пути к данным, могут перемещаться по количеству программных и аппаратных компонентов во время его поездки между приложением и конечным устройством. Хотя эти компоненты являются важными для работы устройства конечной точки, они, как правило, являются невидимыми для пользователей. Пользователи, скорее всего, будут думать об устройствах конечных точек, которые они напрямую управляют, а не с точки зрения устройств на звуковых адаптерах, подключаемых к конечным устройствам или в терминах программных компонентов, обрабатывающих звуковые потоки и из этих адаптеров.

Чтобы избежать путаницы с устройствами конечных точек, эта документация относится к устройству на звуковом адаптере в качестве *устройства адаптера*.

На следующей схеме показано, как устройства конечных точек аудио отличаются от устройств адаптеров.

![Примеры устройств конечных точек аудио и адаптеров](images/devices.jpg)

Ниже приведены примеры устройств конечной точки на предыдущей схеме.

-   Speakers
-   Микрофон
-   Дополнительное устройство ввода

Ниже приведены примеры устройств адаптеров.

-   Устройство вывода Wave (содержит цифровой, аналоговый преобразователь)
-   Устройство вывода элементы управления (содержит тома и элементы управления выключением)
-   Устройство ввода звука (содержит аналогово-цифровой преобразователь)
-   Устройство элементов управления вводом (содержит регулятор громкости и мультиплексор)

Как правило, пользовательские интерфейсы звуковых приложений ссылаются на устройства конечных точек аудио, а не на адаптеры устройств. Windows Vista упрощает проектирование ориентированных на пользователей приложений, напрямую поддерживая абстракцию устройства конечной точки.

Некоторые конечные устройства могут постоянно подключаться к устройству адаптера. Например, компьютер может содержать внутренние устройства, такие как проигрыватель компакт-дисков, микрофон или динамики, интегрированные в корпус системы. Как правило, пользователь физически не удаляет эти устройства конечных точек.

Другие конечные устройства могут подключаться к звуковому адаптеру через аудиоразъемы. Пользователь подключает и отсоединяет эти внешние устройства. Например, устройство конечной точки звука, такое как внешний микрофон или наушники, находится на одном конце кабеля, а другой завершает подключение к гнезду на устройстве адаптера.

Адаптер взаимодействует с системным процессором через системную шину (как правило, PCI или PCI Express) или внешнюю шину (USB или IEEE 1394), которая поддерживает самонастраивающийся (PnP). Во время перечисления устройств диспетчер самонастраивающийся определяет устройства в звуковом адаптере и регистрирует эти устройства, чтобы сделать их доступными для использования операционной системой и приложениями.

В отличие от подключения между адаптером и внешней шиной, такой как USB или шина IEEE 1394, подключение между устройством конечной точки и устройством адаптера не поддерживает обнаружение устройств PnP. Однако некоторые звуковые адаптеры поддерживают *обнаружение наличия разъемов*: при вставке или удалении подключаемого модуля из гнезда оборудование создает прерывание, чтобы уведомить драйвер адаптера об изменении в конфигурации оборудования. диспетчер конечных точек в Windows Vista может использовать эту возможность оборудования для уведомления приложений о наличии конечных устройств в любое время. Таким образом, операция диспетчера конечных точек аналогична работе диспетчера самонастраивающийся, который отслеживает устройства адаптеров, имеющиеся в системе.

в Windows Vista звуковая система отслеживает как оконечные устройства, так и адаптеры. Диспетчер конечных точек регистрирует устройства конечных точек, а диспетчер самонастраивающийся регистрирует устройства адаптеров. Регистрация устройств конечных точек упрощает работу с пользовательскими приложениями, позволяя пользователям обращаться к устройствам конечных точек, которые непосредственно манипулируют пользователями, вместо того, чтобы ссылаться на устройства адаптеров, которые могут быть скрыты внутри корпуса компьютера. Устройства конечных точек, сообщаемые операционной системой, точно следят за динамическими изменениями в конфигурации звукового оборудования с обнаружением присутствия. Когда устройство конечной точки остается подключенным, система перечисляет это устройство. Когда пользователь отключается от устройства конечной точки, система прекращает его перечисление.

в более ранних версиях Windows, включая Windows 98, Windows Me, Windows 2000 и Windows XP, система явным образом предоставляет приложениям только устройства PnP. Таким же приложениям необходимо определить существование конечных устройств. Операционная система, в которой отсутствует явная поддержка для конечных устройств, заставляет клиентские приложения выполнять большую часть работы. Например, приложение для записи звука должно выполнить следующие действия, чтобы включить запись из внешнего микрофона:

1.  Перечислите все устройства записи звука (это устройства адаптеров), которые ранее были зарегистрированы диспетчером PnP.
2.  после выбора устройства записи откройте поток записи на устройстве, вызвав функцию **вавеинопен** или используя API **директсаундкаптуре** или DirectShow.
3.  Вызовите функцию Миксеропен и используйте другие функции **миксеркскскс** , чтобы найти \_ \_ \_ строку микрофона миксерлине параметра ComponentType src, соответствующую устройству записи, открытому на шаге 2. Это обоснованное предположение.
4.  Разблокируйте путь к данным с микрофона. Если путь к данным включает в себя узел со звуком, то клиент должен отключить микрофон сигнала с микрофона. Если устройство записи содержит мультиплексор для выбора из нескольких входных данных, клиент должен выбрать входной микрофон.

Этот процесс является подверженным ошибкам, так как программное обеспечение, выполняющее эти операции, может завершиться ошибкой, если обнаруживает конфигурацию оборудования, которую конструкторы не ожидали или для которых она не была протестирована.

в Windows Vista, поддерживающем устройства конечных точек, процесс подключения к тому же устройству конечной точки гораздо проще:

1.  Выберите микрофон из коллекции устройств конечной точки.
2.  Активируйте интерфейс захвата звука на этом микрофоне.

Операционная система выполняет всю работу, необходимую для обнаружения и включения устройства конечной точки. Например, если путь к данным из микрофона включает мультиплексор, система автоматически выбирает входные данные микрофона для мультиплексора.

Поведение звуковой подсистемы является более надежным и детерминированным, если приложения вместо реализации собственных алгоритмов идентификации конечных точек могут низводить задачу определения устройств конечной точки операционной системе. Поставщикам программного обеспечения больше не нужно проверять, правильно ли работают алгоритмы идентификации конечных точек со всеми доступными устройствами и конфигурациями звуковых устройств. они могут просто полагаться на операционную систему для идентификации конечных точек. Аналогичным образом поставщики оборудования больше не нуждаются в проверке того, что каждое соответствующее клиентское приложение может легко определить любое устройство конечной точки, подключенное к своему звуковому адаптеру. это необходимо только для того, чтобы убедиться, что операционная система может определить устройство конечной точки, подключенное к своему звуковому адаптеру.

В следующих разделах приведены дополнительные сведения об устройствах аудио конечных точек.

-   [Сведения об API Ммдевице](mmdevice-api.md)
-   [Перечисление звуковых устройств](enumerating-audio-devices.md)
-   [Строки идентификатора конечной точки](endpoint-id-strings.md)
-   [Свойства устройства](device-properties.md)
-   [События устройства](device-events.md)
-   [Роли устройств](device-roles.md)
-   [Форматы устройств](device-formats.md)

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Руководство по программированию](programming-guide.md)
</dt> </dl>

 

 



