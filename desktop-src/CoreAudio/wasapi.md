---
description: О ВАСАПИ
ms.assetid: 452b9725-b0b9-4888-bbb5-a23e0067e840
title: О ВАСАПИ
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3effb34ec0cde0a53d0eb6f6e9718aa13fc308417b33427f168364afc32086ef
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120088184"
---
# <a name="about-wasapi"></a>О ВАСАПИ

API Windows Audio Session (васапи) позволяет клиентским приложениям управлять потоком звуковых данных между приложением и [устройством конечной точки аудио](audio-endpoint-devices.md).

Файлы заголовков Аудиоклиент. h и Аудиополици. h определяют интерфейсы ВАСАПИ.

Каждый звуковой поток является участником [сеанса аудио](audio-sessions.md). С помощью абстракции сеанса клиент ВАСАПИ может опознать звуковой поток как член группы связанных звуковых потоков. Система может управлять всеми потоками в сеансе как единым целым.

Звуковая подсистема — это [звуковой компонент пользовательского режима](user-mode-audio-components.md) , через который приложения совместно используют доступ к устройству конечной точки аудио. Аудио подсистема транспортировать звуковые данные между буфером конечной точки и устройством конечной точки. Чтобы воспроизвести аудиопоток с помощью устройства конечной точки визуализации, приложение периодически записывает аудиоданные в буфер конечной точки отрисовки. Обработчик звука смешивает потоки из различных приложений. Чтобы записать звуковой поток из устройства записи конечной точки, приложение периодически считывает звуковые данные из буфера конечной точки записи.

ВАСАПИ состоит из нескольких интерфейсов. Первый из них — интерфейс [**иаудиоклиент**](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient) . Чтобы получить доступ к интерфейсам ВАСАПИ, клиент сначала получает ссылку на интерфейс **иаудиоклиент** устройства конечной точки аудио, вызвав метод [**Иммдевице:: Activate**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) с параметром *IID* , равным **рефиид** IID \_ иаудиоклиент. Клиент вызывает метод [**иаудиоклиент:: Initialize**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-initialize) для инициализации потока на устройстве конечной точки. После инициализации потока клиент может получить ссылки на другие интерфейсы ВАСАПИ, вызвав метод [**иаудиоклиент::-Service**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-getservice) .

Многие методы в ВАСАПИ возвращают ошибку с кодом АУДКЛНТ \_ E \_ \_ , если устройство конечной точки аудио, используемое клиентским приложением, становится недействительным. Часто приложение может восстановиться после этой ошибки. Дополнительные сведения см. в разделе [восстановление после ошибки Invalid-Device](recovering-from-an-invalid-device-error.md).

ВАСАПИ реализует следующие интерфейсы.



| Интерфейс                                            | Описание                                                                                                                                                     |
|------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**иаудиокаптуреклиент**](/windows/desktop/api/Audioclient/nn-audioclient-iaudiocaptureclient)   | Позволяет клиенту считывать входные данные из буфера конечной точки записи.                                                                                             |
| [**иаудиоклиент**](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient)                 | Позволяет клиенту создавать и инициализировать аудио-поток между звуковым приложением и обработчиком аудио или аппаратным буфером устройства конечной точки аудио. |
| [**иаудиоклокк**](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclock)                   | Позволяет клиенту отслеживать скорость передачи данных в потоке и текущую точку в потоке.                                                                        |
| [**иаудиорендерклиент**](/windows/desktop/api/Audioclient/nn-audioclient-iaudiorenderclient)     | Позволяет клиенту записывать выходные данные в буфер конечной точки отрисовки.                                                                                           |
| [**иаудиосессионконтрол**](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessioncontrol) | Позволяет клиенту настраивать параметры управления для сеанса аудио и отслеживать события в сеансе.                                                 |
| [**иаудиосессионманажер**](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionmanager) | Позволяет клиенту получать доступ к элементам управления сеансом и элементам управления томами как для межпроцессных, так и для отдельных процессов.                                 |
| [**иаудиостреамволуме**](/windows/desktop/api/Audioclient/nn-audioclient-iaudiostreamvolume)     | Позволяет клиенту контролировать и отслеживать уровни громкости для всех каналов в аудиопотока.                                                           |
| [**ичаннелаудиоволуме**](/windows/desktop/api/Audioclient/nn-audioclient-ichannelaudiovolume)   | Позволяет клиенту управлять уровнями громкости для всех каналов в сеансе звука, к которому принадлежит поток.                                          |
| [**исимплеаудиоволуме**](/windows/desktop/api/Audioclient/nn-audioclient-isimpleaudiovolume)     | Позволяет клиенту управлять основным уровнем громкости звукового сеанса.                                                                                        |



 

Клиенты ВАСАПИ, которым требуется уведомление о событиях, связанных с сеансом, должны реализовать следующий интерфейс.



| Интерфейс                                          | Описание                                                                                                            |
|----------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
| [**иаудиосессионевентс**](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionevents) | Предоставляет уведомления о событиях, связанных с сеансом, таких как изменения на уровне тома, отображаемое имя и состояние сеанса. |



 

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Управление потоками](stream-management.md)
</dt> <dt>

[**Справочник по программированию**](programming-reference.md)
</dt> </dl>

 

 



