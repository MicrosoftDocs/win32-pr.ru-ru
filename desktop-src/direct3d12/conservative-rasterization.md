---
title: Консервативная растрирование Direct3D 12
description: Консервативная растрирование добавляет некоторую степень уверенности в отрисовку пикселей, что полезно для алгоритмов обнаружения столкновений.
ms.assetid: 081199AD-1702-4EC8-95AD-B1148C676199
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4e4fae3489d54ab7b6b7abfda56f54dd8d970962
ms.sourcegitcommit: cba7f424a292fd7f3a8518947b9466439b455419
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/23/2019
ms.locfileid: "104549043"
---
# <a name="direct3d-12-conservative-rasterization"></a><span data-ttu-id="6b7a4-103">Консервативная растрирование Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="6b7a4-103">Direct3D 12 Conservative Rasterization</span></span>

<span data-ttu-id="6b7a4-104">Консервативная растрирование добавляет некоторую степень уверенности в отрисовку пикселей, что полезно для алгоритмов обнаружения столкновений.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-104">Conservative Rasterization adds some certainty to pixel rendering, which is helpful in particular to collision detection algorithms.</span></span>

-   [<span data-ttu-id="6b7a4-105">Обзор</span><span class="sxs-lookup"><span data-stu-id="6b7a4-105">Overview</span></span>](#overview)
-   [<span data-ttu-id="6b7a4-106">Взаимодействие с конвейером</span><span class="sxs-lookup"><span data-stu-id="6b7a4-106">Interactions with the pipeline</span></span>](#interactions-with-the-pipeline)
    -   [<span data-ttu-id="6b7a4-107">Взаимодействие правил растрирования</span><span class="sxs-lookup"><span data-stu-id="6b7a4-107">Rasterization Rules interaction</span></span>](#rasterization-rules-interaction)
    -   [<span data-ttu-id="6b7a4-108">Многовыборочное взаимодействие</span><span class="sxs-lookup"><span data-stu-id="6b7a4-108">Multisampling interaction</span></span>](#multisampling-interaction)
    -   [<span data-ttu-id="6b7a4-109">Взаимодействие Самплемаск</span><span class="sxs-lookup"><span data-stu-id="6b7a4-109">SampleMask interaction</span></span>](#samplemask-interaction)
    -   [<span data-ttu-id="6b7a4-110">Взаимодействие теста глубины и набора элементов</span><span class="sxs-lookup"><span data-stu-id="6b7a4-110">Depth/Stencil Test interaction</span></span>](#depthstencil-test-interaction)
    -   [<span data-ttu-id="6b7a4-111">Взаимодействие пикселей вспомогательного приложения</span><span class="sxs-lookup"><span data-stu-id="6b7a4-111">Helper Pixel interaction</span></span>](#helper-pixel-interaction)
    -   [<span data-ttu-id="6b7a4-112">Взаимодействие с покрытием вывода</span><span class="sxs-lookup"><span data-stu-id="6b7a4-112">Output Coverage interaction</span></span>](#output-coverage-interaction)
    -   [<span data-ttu-id="6b7a4-113">Взаимодействие Инпутковераже</span><span class="sxs-lookup"><span data-stu-id="6b7a4-113">InputCoverage interaction</span></span>](#inputcoverage-interaction)
    -   [<span data-ttu-id="6b7a4-114">Взаимодействие Иннерковераже</span><span class="sxs-lookup"><span data-stu-id="6b7a4-114">InnerCoverage interaction</span></span>](#innercoverage-interaction)
    -   [<span data-ttu-id="6b7a4-115">Взаимодействие с интерполяцией атрибута</span><span class="sxs-lookup"><span data-stu-id="6b7a4-115">Attribute Interpolation interaction</span></span>](#attribute-interpolation-interaction)
    -   [<span data-ttu-id="6b7a4-116">Взаимодействие обрезки</span><span class="sxs-lookup"><span data-stu-id="6b7a4-116">Clipping interaction</span></span>](#clipping-interaction)
    -   [<span data-ttu-id="6b7a4-117">Взаимодействие с расстоянием при обрезке</span><span class="sxs-lookup"><span data-stu-id="6b7a4-117">Clip Distance interaction</span></span>](#clip-distance-interaction)
    -   [<span data-ttu-id="6b7a4-118">Целевое независимое взаимодействие растрирования</span><span class="sxs-lookup"><span data-stu-id="6b7a4-118">Target Independent Rasterization interaction</span></span>](#target-independent-rasterization-interaction)
    -   [<span data-ttu-id="6b7a4-119">Взаимодействие примитивной топологии IA</span><span class="sxs-lookup"><span data-stu-id="6b7a4-119">IA Primitive Topology interaction</span></span>](#ia-primitive-topology-interaction)
    -   [<span data-ttu-id="6b7a4-120">Взаимодействие с запросом</span><span class="sxs-lookup"><span data-stu-id="6b7a4-120">Query interaction</span></span>](#query-interaction)
    -   [<span data-ttu-id="6b7a4-121">Взаимодействие состояния отбора</span><span class="sxs-lookup"><span data-stu-id="6b7a4-121">Cull State interaction</span></span>](#cull-state-interaction)
    -   [<span data-ttu-id="6b7a4-122">Взаимодействие Исфронтфаце</span><span class="sxs-lookup"><span data-stu-id="6b7a4-122">IsFrontFace interaction</span></span>](#isfrontface-interaction)
    -   [<span data-ttu-id="6b7a4-123">Взаимодействие режимов заливки</span><span class="sxs-lookup"><span data-stu-id="6b7a4-123">Fill Modes interaction</span></span>](#fill-modes-interaction)
-   [<span data-ttu-id="6b7a4-124">Сведения о реализации</span><span class="sxs-lookup"><span data-stu-id="6b7a4-124">Implementation details</span></span>](#implementation-details)
-   [<span data-ttu-id="6b7a4-125">Сводка по API</span><span class="sxs-lookup"><span data-stu-id="6b7a4-125">API summary</span></span>](#api-summary)
-   [<span data-ttu-id="6b7a4-126">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="6b7a4-126">Related topics</span></span>](#related-topics)

## <a name="overview"></a><span data-ttu-id="6b7a4-127">Обзор</span><span class="sxs-lookup"><span data-stu-id="6b7a4-127">Overview</span></span>

<span data-ttu-id="6b7a4-128">Консервативная растрирование означает, что все пиксели, которые по крайней мере частично охвачены визуализированным примитивом, растрируются, то есть вызывается шейдер пикселей.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-128">Conservative Rasterization means that all pixels that are at least partially covered by a rendered primitive are rasterized, which means that the pixel shader is invoked.</span></span> <span data-ttu-id="6b7a4-129">Нормальным поведением является выборка, которая не используется, если включена консервативная растрирование.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-129">Normal behavior is sampling, which is not used if Conservative Rasterization is enabled.</span></span>

<span data-ttu-id="6b7a4-130">Консервативная растрирование полезна в ряде ситуаций, в том числе для уверенности в обнаружении столкновений, перекрытияного отбора и отрисовки мозаики.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-130">Conservative Rasterization is useful in a number of situations, including for certainty in collision detection, occlusion culling, and tiled rendering.</span></span>

<span data-ttu-id="6b7a4-131">Например, на следующем рисунке показан зеленый треугольник, отображаемый с использованием консервативной растрирования, как он будет отображаться в средстве для прорисовки (то есть с использованием координат вершин с фиксированной точкой 16,8).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-131">For example, the following figure shows a green triangle rendered using Conservative Rasterization, as it would appear in the rasterizer (that is, using 16.8 fixed point vertex coordinates).</span></span> <span data-ttu-id="6b7a4-132">Область Браун называется "область неопределенности" — концептуальный регион, представляющий расширенные границы треугольника, необходимый для обеспечения консервативности примитивов в средствах прорисовки относительно исходных координат с плавающей точкой.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-132">The brown area is known as an "uncertainty region" - a conceptual region that represents the extended bounds of the triangle, required to ensure the primitive in the rasterizer is conservative with respect to the original floating point vertex coordinates.</span></span> <span data-ttu-id="6b7a4-133">Красные квадраты на каждой вершине показывают, как вычисляется область неопределенности: как очистка квадрат.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-133">The red squares at each vertex shows how the uncertainty region is calculated: as a swept square.</span></span>

<span data-ttu-id="6b7a4-134">Крупные серые квадраты показывают Пиксели, которые будут отображены.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-134">The large gray squares show the pixels that will be rendered.</span></span> <span data-ttu-id="6b7a4-135">Розовые квадраты показывают Пиксели, отображаемые с помощью "верхнего левого правила", которые воспроизводятся как край треугольника, пересекающий границу пикселов.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-135">The pink squares show pixels rendered using the "Top-Left Rule", which comes into play as the edge of the triangle crosses the edge of the pixels.</span></span> <span data-ttu-id="6b7a4-136">Могут воздержаться ложные срабатывания (набор пикселей, который не должен быть), который система обычно, но не всегда исключает.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-136">There can be false positives (pixels set that should not have been) which the system will normally but not always cull.</span></span>

![Верхнее левое правило](images/conservative-rasterization-0.png)

## <a name="interactions-with-the-pipeline"></a><span data-ttu-id="6b7a4-138">Взаимодействие с конвейером</span><span class="sxs-lookup"><span data-stu-id="6b7a4-138">Interactions with the pipeline</span></span>

### <a name="rasterization-rules-interaction"></a><span data-ttu-id="6b7a4-139">Взаимодействие правил растрирования</span><span class="sxs-lookup"><span data-stu-id="6b7a4-139">Rasterization Rules interaction</span></span>

<span data-ttu-id="6b7a4-140">В консервативном режиме растрирования правила растрирования применяются так же, как если бы режим консервативной растрирования не был включен с исключениями для правила Top-Left, описанного выше, и области охвата пикселей.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-140">In Conservative Rasterization mode, Rasterization Rules apply the same way as when Conservative Rasterization mode is not enabled with exceptions for the Top-Left Rule, described above, and Pixel Coverage.</span></span> <span data-ttu-id="6b7a4-141">16,8. необходимо использовать средство растеризации точности Fixed-Point.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-141">16.8 Fixed-Point Rasterizer precision must be used.</span></span>

<span data-ttu-id="6b7a4-142">Пиксели, которые не будут рассматриваться, если оборудование использовало координаты вершин с плавающей запятой, могут быть включены только в том случае, если они находятся в области неопределенности, но больше половины пикселя в домене с фиксированной точкой.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-142">Pixels that would not be covered if hardware was using full floating point vertex coordinates may only be included if they are within an uncertainty region no larger half a pixel in the fixed point domain.</span></span> <span data-ttu-id="6b7a4-143">Ожидается, что в будущем будет достигнуто более строгая область неопределенности, указанная на уровне 2.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-143">Future hardware is expected to reach the tightened uncertainty region specified in Tier 2.</span></span> <span data-ttu-id="6b7a4-144">Обратите внимание, что это требование предотвращает расширение Серебряный треугольников более чем необходимо.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-144">Note that this requirement prevents sliver triangles from extending further than necessary.</span></span>

<span data-ttu-id="6b7a4-145">Схожая допустимая область неопределенности также применяется к `InnerCoverage` , но она более тесна, поскольку для этого случая не требуется более крупная область неопределенности.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-145">A similar valid uncertainty region applies to `InnerCoverage` as well, but it is tighter since no implementations require a larger uncertainty region for this case.</span></span> <span data-ttu-id="6b7a4-146">Дополнительные сведения см. в разделе [взаимодействие иннерковераже](#innercoverage-interaction) .</span><span class="sxs-lookup"><span data-stu-id="6b7a4-146">See [InnerCoverage interaction](#innercoverage-interaction) for more detail.</span></span>

<span data-ttu-id="6b7a4-147">Внутренние и внешние области неопределенности должны быть больше или равны размеру половины вложенной сетки или 1/512 пикселя в домене с фиксированной точкой.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-147">Inner and outer uncertainty regions must be greater than or equal to the size of half the sub-pixel grid, or 1/512 of a pixel, in the fixed point domain.</span></span> <span data-ttu-id="6b7a4-148">Это минимальная допустимая область неопределенности.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-148">This is the minimum valid uncertainty region.</span></span> <span data-ttu-id="6b7a4-149">1/512 поступает из представления координат средства растеризации с фиксированной точкой (16,8) и правила "округление до ближайшего числа", которое применяется при преобразовании координат вершин с плавающей запятой в 16,8 координат с фиксированной точкой.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-149">1/512 comes from the 16.8 fixed point Rasterizer coordinate representation and the round-to-nearest rule that applies when converting floating point vertex coordinates to 16.8 fixed point coordinates.</span></span> <span data-ttu-id="6b7a4-150">1/512 может измениться при изменении точности средства прорисовки.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-150">1/512 can change if the Rasterizer precision changes.</span></span> <span data-ttu-id="6b7a4-151">Если реализация реализует эту минимальную неопределенность, то они должны следовать правилам Top-Left, когда границы или угол области неопределенности попадают вдоль края или угла пикселя.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-151">If an implementation implements this minimum uncertainty region, then they must follow the Top-Left Rule when an edge or corner of the uncertainty region falls along the edge or corner of a pixel.</span></span> <span data-ttu-id="6b7a4-152">Обрезанные края области неопределенности должны рассматриваться как ближайшая вершина, то есть она подсчитывается как два края: два, которые соединяются в связанной вершине.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-152">The clipped edges of the uncertainty region should be treated as the closest vertex, meaning that it counts as two edges: the two that join at the associated vertex.</span></span> <span data-ttu-id="6b7a4-153">Top-Left правило требуется при использовании минимальной неопределенной области, так как в противном случае консервативная реализация растрирования не сможет расрастрировать Пиксели, которые могут быть охвачены, если отключен режим растрирования.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-153">Top-Left Rule is required when the minimum uncertainty region is used because if it is not, then a Conservative Rasterization implementation would fail to rasterize pixels that could be covered when Conservative Rasterization mode is disabled.</span></span>

<span data-ttu-id="6b7a4-154">На следующей схеме показана допустимая область внешнего неопределенности, полученная путем поворота квадрата вокруг границ примитива в домене с фиксированной точкой (т. е. вершины были квантованияы представлением с фиксированной точкой 16,8).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-154">The following diagram illustrates a valid outer uncertainty region produced by sweeping a square around the edges of the primitive in the fixed point domain (i.e. the vertices have been quantized by the 16.8 fixed point representation).</span></span> <span data-ttu-id="6b7a4-155">Размеры этого квадрата основаны на допустимом размере внешней области неопределенности: для 1/2 пикселя квадрат равен 1 пикселю в ширине и высоте, то есть 1/512 пикселя, квадрат равен 1/256 пикселей в ширину и высоте.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-155">The dimensions of this square are based on the valid outer uncertainty region size: for the 1/2 of a pixel, the square is 1 pixel in width and height, for 1/512 of a pixel, the square is 1/256 of a pixel in width and height.</span></span> <span data-ttu-id="6b7a4-156">Зеленый треугольник представляет заданный примитив, красная пунктирная линия представляет границу, связанную с умеренной оценкой консервативности, сплошные черные квадратики представляют квадрат, очистка вдоль примитивных границ, а синяя область, которая находится в синем месте, является внешней областью неопределенности:</span><span class="sxs-lookup"><span data-stu-id="6b7a4-156">The green triangle represents a given primitive, the red dotted line represents the bound on Overestimated Conservative Rasterization, the solid black squares represent the square that is swept along the primitive edges, and the blue checkered area is the outer uncertainty region:</span></span>

![Внешняя область неопределенности.](images/outercoverage.jpg)

### <a name="multisampling-interaction"></a><span data-ttu-id="6b7a4-158">Многовыборочное взаимодействие</span><span class="sxs-lookup"><span data-stu-id="6b7a4-158">Multisampling interaction</span></span>

<span data-ttu-id="6b7a4-159">Независимо от числа выборок в **рендертаржет** / **депсстенЦил** (или от того, используется ли *форцедсамплекаунт* или нет), все примеры рассматриваются для пикселов, растровых с помощью консервативной растрирования.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-159">Regardless of the number of samples in **RenderTarget**/**DepthStencil** surfaces (or whether *ForcedSampleCount* is being used or not), all samples are covered for pixels rasterized by Conservative Rasterization.</span></span> <span data-ttu-id="6b7a4-160">Отдельные образцы расположения не тестируются на то, попадает ли они в примитив.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-160">Individual sample locations are not tested for whether they fall in the primitive or not.</span></span>

### <a name="samplemask-interaction"></a><span data-ttu-id="6b7a4-161">Взаимодействие Самплемаск</span><span class="sxs-lookup"><span data-stu-id="6b7a4-161">SampleMask interaction</span></span>

<span data-ttu-id="6b7a4-162">Состояние средства отображения *самплемаск* применяется таким же образом, как если консервативная растрирование не включена для `InputCoverage` , но не влияет `InnerCoverage` (т. е. не двух в вход, объявленный с помощью `InnerCoverage` ).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-162">The *SampleMask* Rasterizer State applies the same way as when Conservative Rasterization is not enabled for `InputCoverage`, but does not affect `InnerCoverage` (i.e. it is not AND’ed into an input declared with `InnerCoverage`).</span></span> <span data-ttu-id="6b7a4-163">Это связано с тем, что `InnerCoverage` не связано с маскированием примеров MSAA: 0 — `InnerCoverage` только это означает, что пиксель не обязательно полностью охватывается, а ни один из примеров не будет обновлен.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-163">This is because `InnerCoverage` is unrelated to whether MSAA samples are masked out: 0 `InnerCoverage` only means that the pixel is not guaranteed to be fully covered, not that no samples will be updated.</span></span>

### <a name="depthstencil-test-interaction"></a><span data-ttu-id="6b7a4-164">Взаимодействие теста глубины и набора элементов</span><span class="sxs-lookup"><span data-stu-id="6b7a4-164">Depth/Stencil Test interaction</span></span>

<span data-ttu-id="6b7a4-165">При тестировании глубины и набора элементов используется более консервативный растровый пиксель так же, как если бы все примеры были включены, если не включено консервативное растрирование.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-165">Depth/Stencil Testing proceeds for a conservatively rasterized pixel the same way as if all samples are covered when Conservative Rasterization is not enabled.</span></span>

<span data-ttu-id="6b7a4-166">Выполнение всех охваченных примеров может привести к экстраполяции глубины, которая является допустимой и должна быть обработана в окне просмотра, как указано, если не включено консервативное растрирование.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-166">Proceeding with all samples covered can cause Depth Extrapolation, which is valid and must be clamped to the viewport as specified when Conservative Rasterization is not enabled.</span></span> <span data-ttu-id="6b7a4-167">Это похоже на то, что режимы интерполяции с частотой в пикселах используются в **рендертаржет** с числом выборки больше 1, хотя в случае консервативной растрирования это значение глубины, которое перемещается в фиксированную глубину, которое можно вычислить.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-167">This is similar to when pixel-frequency interpolation modes are used on a **RenderTarget** with sample count greater than 1, although in the case of Conservative Rasterization, it is the depth value going into the fixed function depth test that can be extrapolated.</span></span>

<span data-ttu-id="6b7a4-168">Начальное поведение при отборе с глубиной не определено.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-168">Early Depth culling behavior with Depth Extrapolation is undefined.</span></span> <span data-ttu-id="6b7a4-169">Это связано с тем, что некоторое неправильное оборудование с более ранней глубиной не поддерживает экстраполяцию значений глубины.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-169">This is because some Early Depth culling hardware cannot properly support extrapolated depth values.</span></span> <span data-ttu-id="6b7a4-170">Однако раннее поведение при исведении глубины при экстраполяции глубины является проблематичным, даже если оборудование может поддерживать экстраполяцию значений глубины.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-170">However, Early Depth culling behavior in the presence of Depth Extrapolation is problematic even with hardware that can support extrapolated depth values.</span></span> <span data-ttu-id="6b7a4-171">Эта проблема может быть обработана путем фиксации глубины входного шейдера пикселей до значений минимальной и максимальной глубины примитива, для которого выполняется растрирование, и записи этого значения в `oDepth` (регистр глубины выходных данных пиксельного шейдера).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-171">This issue can be worked around by clamping the Pixel Shader input depth to the min and max depth values of the primitive being rasterized and writing that value to `oDepth` (the pixel shader output depth register).</span></span> <span data-ttu-id="6b7a4-172">Реализации необходимы для отключения раннего устранения глубины в этом случае из-за `oDepth` записи.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-172">Implementations are required to disable Early Depth culling in this case, due to the `oDepth` write.</span></span>

### <a name="helper-pixel-interaction"></a><span data-ttu-id="6b7a4-173">Взаимодействие пикселей вспомогательного приложения</span><span class="sxs-lookup"><span data-stu-id="6b7a4-173">Helper Pixel interaction</span></span>

<span data-ttu-id="6b7a4-174">Правила для вспомогательных точек применяются таким же образом, как если консервативная растрирование не включена.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-174">Helper Pixel rules apply the same way as when Conservative Rasterization is not enabled.</span></span> <span data-ttu-id="6b7a4-175">В рамках этого все пиксели, включая вспомогательные Пиксели, должны точно сообщать `InputCoverage` , как указано в `InputCoverage` разделе взаимодействие.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-175">As part of this, all pixels including Helper Pixels must report `InputCoverage` accurately as specified in the `InputCoverage` interaction section.</span></span> <span data-ttu-id="6b7a4-176">Таким образом, полностью неохваченные Пиксели выявляются покрытием 0.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-176">So fully non-covered pixels report 0 coverage.</span></span>

### <a name="output-coverage-interaction"></a><span data-ttu-id="6b7a4-177">Взаимодействие с покрытием вывода</span><span class="sxs-lookup"><span data-stu-id="6b7a4-177">Output Coverage interaction</span></span>

<span data-ttu-id="6b7a4-178">Покрытие выходных данных ( `oMask` ) ведет себя для консервативно-растрового пикселя, как это происходит, когда консервативная растрирование не включена для всех охваченных примеров.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-178">Output Coverage (`oMask`) behaves for a conservatively rasterized pixel as it does when Conservative Rasterization is not enabled with all samples covered.</span></span>

### <a name="inputcoverage-interaction"></a><span data-ttu-id="6b7a4-179">Взаимодействие Инпутковераже</span><span class="sxs-lookup"><span data-stu-id="6b7a4-179">InputCoverage interaction</span></span>

<span data-ttu-id="6b7a4-180">В режиме консервативной растеризации этот входной регистр заполняется так, как если бы не было включено консервативное растрирование для заданного консервативного растрового пикселя.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-180">In Conservative Rasterization mode, this input register is populated as if all samples are covered when Conservative Rasterization is not enabled for a given conservatively rasterized pixel.</span></span> <span data-ttu-id="6b7a4-181">Это означает, что все существующие взаимодействия применяются (например, применяется *самплемаск* ), а первые n битов `InputCoverage` из ЛСБ имеют значение 1 для консервативного растрового пикселя, учитывая n образцов на пиксель **Рендертаржет** и/или **депсстенЦил** , привязанный к буферу в **выходных данных слияния**, или n Sample *форцедсамплекаунт*.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-181">That is to say, all existing interactions apply (e.g. *SampleMask* is applied), and the first n bits in `InputCoverage` from the LSB are set to 1 for a conservatively rasterized pixel, given an n sample per pixel **RenderTarget** and/or **DepthStencil** buffer bound at the **Output Merger**, or an n sample *ForcedSampleCount*.</span></span> <span data-ttu-id="6b7a4-182">Остальные биты равны 0.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-182">The rest of the bits are 0.</span></span>

<span data-ttu-id="6b7a4-183">Эти входные данные доступны в шейдере, независимо от использования консервативной растеризации, хотя консервативная растрирование изменяет поведение только для отображения всех охваченных выборок (или нет для вспомогательных точек).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-183">This input is available in a shader regardless of the use of Conservative Rasterization, though Conservative Rasterization changes its behavior to only show all samples covered (or none for Helper Pixels).</span></span>

### <a name="innercoverage-interaction"></a><span data-ttu-id="6b7a4-184">Взаимодействие Иннерковераже</span><span class="sxs-lookup"><span data-stu-id="6b7a4-184">InnerCoverage interaction</span></span>

<span data-ttu-id="6b7a4-185">Эта функция необходима для и доступна только на уровне 3.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-185">This feature is required by, and only available in, Tier 3.</span></span> <span data-ttu-id="6b7a4-186">Среда выполнения не сможет создать шейдер для построителей текстур, использующих этот режим, если реализация поддерживает уровень меньше уровня 3.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-186">The runtime will fail shader creation for shaders that use this mode when an implementation supports a Tier less than Tier 3.</span></span>

<span data-ttu-id="6b7a4-187">Шейдер пикселей имеет 32-разрядное скалярное целочисленное значение, которое можно создать: `InnerCoverage` .</span><span class="sxs-lookup"><span data-stu-id="6b7a4-187">The Pixel Shader has a 32-bit scalar integer System Generate Value available: `InnerCoverage`.</span></span> <span data-ttu-id="6b7a4-188">Это битовое поле, имеющее бит 0 от ЛСБ, равное 1, для заданного консервативного растрового пикселя, только если этот пиксель полностью находится внутри текущего примитива.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-188">This is a bit-field that has bit 0 from the LSB set to 1 for a given conservatively rasterized pixel, only when that pixel is guaranteed to be entirely inside the current primitive.</span></span> <span data-ttu-id="6b7a4-189">Для всех остальных битов регистра входных данных должно быть задано значение 0, если бит 0 не задан, но не определен, если бит 0 установлен в 1 (по сути, это битовое поле представляет логическое значение, где значение false должно быть равно 0, но значение true может быть любым странным (т. е. бит 0), отличным от нуля).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-189">All other input register bits must be set to 0 when bit 0 is not set, but are undefined when bit 0 is set to 1 (essentially, this bit-field represents a Boolean value where false must be exactly 0, but true can be any odd (i.e. bit 0 set) non-zero value).</span></span> <span data-ttu-id="6b7a4-190">Эти входные данные используются для недооценочной информации о растеризации.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-190">This input is used for underestimated Conservative Rasterization information.</span></span> <span data-ttu-id="6b7a4-191">Он информирует пиксельный шейдер о том, находится ли текущий пиксель в пределах геометрии.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-191">It informs the Pixel Shader whether the current pixel lies completely inside the geometry.</span></span>

<span data-ttu-id="6b7a4-192">Это должно учитывать ошибку привязки с разрешением, которое больше или равно разрешению, в котором работает текущая прорисовка.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-192">This must account for snapping error at resolutions greater than or equal to the resolution at which the current Draw is operating.</span></span> <span data-ttu-id="6b7a4-193">Не должно быть ложных срабатываний (установка `InnerCoverage` битов, когда пиксел не полностью охватывает ошибку привязки при разрешении, которое больше или равно разрешению, в котором работает текущая прорисовка), но разрешены ложные отрицательные значения.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-193">There must not be false positives (setting `InnerCoverage` bits when the pixel is not fully covered for any snapping error at resolutions greater than or equal to the resolution at which the current Draw is operating), but false negatives are allowed.</span></span> <span data-ttu-id="6b7a4-194">В целом, реализация не должна правильно определять Пиксели полностью, что не будет иметь координаты вершины с плавающей запятой в средствах программной прорисовки.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-194">In summary, the implementation must not incorrectly identify pixels as fully covered that would not be with full floating point vertex coordinates in the Rasterizer.</span></span>

<span data-ttu-id="6b7a4-195">Пиксели, которые будут полностью освещены, если оборудование использовало координаты вершин с плавающей запятой, могут быть опущены только в том случае, если они пересекаются с внутренней областью неопределенности, которая не должна превышать размер подпикселной сетки или 1/256 пикселя в домене с фиксированной точкой.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-195">Pixels that would be fully covered if hardware was using full floating point vertex coordinates may only be omitted if they intersect the inner uncertainty region, which must be no larger than the size of the sub-pixel grid, or 1/256 of a pixel, in the fixed point domain.</span></span> <span data-ttu-id="6b7a4-196">Иначе говоря, Пиксели полностью внутри внутренней границы области внутренней неопределенности должны быть помечены как полностью охваченные.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-196">Said another way, pixels entirely within the inner boundary of the inner uncertainty region must be marked as fully covered.</span></span> <span data-ttu-id="6b7a4-197">Внутренняя граница области неопределенности показана на схеме ниже полужирной черной пунктирной линией.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-197">The inner boundary of the uncertainty region is illustrated in the diagram below by the bold black dotted line.</span></span> <span data-ttu-id="6b7a4-198">1/256 поступает из представления координат средства растеризации с фиксированной точкой (16,8), которое может измениться при изменении точности средства прорисовки.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-198">1/256 comes from the 16.8 fixed point Rasterizer coordinate representation, which can change if the Rasterizer precision changes.</span></span> <span data-ttu-id="6b7a4-199">Эта область неопределенности достаточно велика для того, чтобы учитывать ошибку привязки, вызванную преобразованием координат вершин с плавающей точкой в координаты вершин с фиксированной точкой в модуле программной прорисовки.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-199">This uncertainty region is enough to account for snapping error caused by the conversion of floating point vertex coordinates to fixed point vertex coordinates in the Rasterizer.</span></span>

<span data-ttu-id="6b7a4-200">Те же требования 1/512 к неопределенному региону, определенные в правилах растрирования, применяются и здесь.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-200">The same 1/512 minimum uncertainty region requirements defined in Rasterization Rules interaction apply here as well.</span></span>

<span data-ttu-id="6b7a4-201">На следующей схеме показана допустимая внутренняя область неопределенности, полученная путем поворота квадрата вокруг границ примитива в домене с фиксированной точкой (т. е. вершины были квантованияы представлением с фиксированной точкой 16,8).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-201">The following diagram illustrates a valid inner uncertainty region produced by sweeping a square around the edges of the primitive in the fixed point domain (i.e. the vertices have been quantized by the 16.8 fixed point representation).</span></span> <span data-ttu-id="6b7a4-202">Размеры этого квадрата основаны на допустимом размере внутренней области неопределенности: для 1/256 пикселя квадрат равен 1/128 пикселя ширины и высоты.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-202">The dimensions of this square are based on the valid inner uncertainty region size: for 1/256 of a pixel, the square is 1/128 of a pixel in width and height.</span></span> <span data-ttu-id="6b7a4-203">Зеленый треугольник представляет собой заданный примитив, жирная черная пунктирная линия представляет границу внутренней области неопределенности, сплошные черные квадратики представляют квадрат, очистка вдоль примитивных границ, а «оранжевый» область — внутреннюю область неопределенности:</span><span class="sxs-lookup"><span data-stu-id="6b7a4-203">The green triangle represents a given primitive, the bold black dotted line represents the boundary of the inner uncertainty region, the solid black squares represent the square that is swept along the primitive edges, and the orange checkered area is the inner uncertainty region:</span></span>

![внутренняя неопределенность рекион.](images/innercoverage.jpg)

<span data-ttu-id="6b7a4-205">Использование `InnerCoverage` не влияет на то, является ли пиксель более консервативным, т. е. Использование одного из этих `InputCoverage` режимов не влияет на то, какие пикселы растрируются при включенном режиме растрирования.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-205">The use of `InnerCoverage` does not affect whether a pixel is conservatively rasterized, i.e. using one of these `InputCoverage` modes does not affect which pixels are rasterized when Conservative Rasterization mode is enabled.</span></span> <span data-ttu-id="6b7a4-206">Таким образом, если `InnerCoverage` используется, а шейдер пикселей обрабатывает пиксел, который не полностью охватывается геометрическим объектом, его значение будет равно 0, но при вызове шейдера пикселей будут обновлены образцы.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-206">Therefore, when `InnerCoverage` is used and the Pixel Shader is processing a pixel that is not completely covered by the geometry its value will be 0, but the Pixel Shader invocation will have samples updated.</span></span> <span data-ttu-id="6b7a4-207">Это отличается от значения, если `InputCoverage` значение равно 0, что означает, что образцы не будут обновлены.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-207">This is different from when `InputCoverage` is 0, meaning that no samples will be updated.</span></span>

<span data-ttu-id="6b7a4-208">Эти входные данные являются взаимоисключающими `InputCoverage` : оба не могут использоваться.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-208">This input is mutually exclusive with `InputCoverage` : both cannot be used.</span></span>

<span data-ttu-id="6b7a4-209">Для доступа `InnerCoverage` он должен быть объявлен как один компонент из одного из входных регистров шейдера пикселей.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-209">To access `InnerCoverage`, it must be declared as a single component out of one of the Pixel Shader input registers.</span></span> <span data-ttu-id="6b7a4-210">Режим интерполяции в объявлении должен быть константой (интерполяция не применяется).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-210">The interpolation mode on the declaration must be constant (interpolation does not apply).</span></span>

<span data-ttu-id="6b7a4-211">На `InnerCoverage` битовое поле не влияют тесты глубины и трафарета, и он не and с состоянием средства прорисовки *самплемаск* .</span><span class="sxs-lookup"><span data-stu-id="6b7a4-211">The `InnerCoverage` bit-field is not affected by depth/stencil tests, nor is it ANDed with the *SampleMask* Rasterizer state.</span></span>

<span data-ttu-id="6b7a4-212">Эти входные данные допустимы только в режиме консервативной растрирования.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-212">This input is only valid in Conservative Rasterization mode.</span></span> <span data-ttu-id="6b7a4-213">Если консервативная растрирование не включена, `InnerCoverage` создает неопределенное значение.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-213">When Conservative Rasterization is not enabled, `InnerCoverage` produces an undefined value.</span></span>

<span data-ttu-id="6b7a4-214">Вызовы шейдера пикселей вызваны потребностью в вспомогательных пикселях, но в противном случае не охвачены примитивом, `InnerCoverage` для Регистра должно быть задано значение 0.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-214">Pixel Shader invocations caused by the need for Helper Pixels, but otherwise not covered by the primitive, must have the `InnerCoverage` register set to 0.</span></span>

### <a name="attribute-interpolation-interaction"></a><span data-ttu-id="6b7a4-215">Взаимодействие с интерполяцией атрибута</span><span class="sxs-lookup"><span data-stu-id="6b7a4-215">Attribute Interpolation interaction</span></span>

<span data-ttu-id="6b7a4-216">Режимы интерполяции атрибута не изменяются и продолжают работу так, как если бы консервативная растрирование не была включена, где используются вершины с масштабированием и с фиксированной точкой просмотра.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-216">Attribute interpolation modes are unchanged and proceed the same way as when Conservative Rasterization is not enabled, where the viewport-scaled and fixed-point-converted vertices are used.</span></span> <span data-ttu-id="6b7a4-217">Так как рассматриваются все примеры в пикселах с консервативным растровым изображением, их значения можно вычислить, как если бы режимы интерполяции с частотой попикселки использовались в **рендертаржет** с числом выборок больше 1.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-217">Because all samples in a conservatively rasterized pixel are considered covered, it is valid for values to be extrapolated, similar to when pixel-frequency interpolation modes are used on a **RenderTarget** with sample count greater than 1.</span></span> <span data-ttu-id="6b7a4-218">Центроид режимы интерполяции выдают результаты, идентичные соответствующему режиму интерполяции, отличному от центроид. понятие центроид не имеет смысла в этом сценарии, где выборка покрытия является только полной или равной 0.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-218">Centroid interpolation modes produce results identical to the corresponding non-centroid interpolation mode; the notion of centroid is meaningless in this scenario – where sample coverage is only either full or 0.</span></span>

<span data-ttu-id="6b7a4-219">Консервативная растрирование позволяет дегенерировать треугольники для создания вызовов шейдера пикселей, поэтому дегенерация треугольников должна использовать значения, назначенные вершине 0 для всех интерполяций значений.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-219">Conservative Rasterization allows for degenerate triangles to produce Pixel Shader invocations, therefore, degenerate triangles must use the values assigned to Vertex 0 for all interpolated values.</span></span>

### <a name="clipping-interaction"></a><span data-ttu-id="6b7a4-220">Взаимодействие обрезки</span><span class="sxs-lookup"><span data-stu-id="6b7a4-220">Clipping interaction</span></span>

<span data-ttu-id="6b7a4-221">Если включен режим растрирования, а изображение глубины отключено (если состоянием средства отображения *депсклипенабле* ЗАДАНО значение false), в интерполяции атрибута могут присутствовать дисперсии для сегментов примитива, находящихся за пределами диапазона 0 <= z <= w, в зависимости от реализации: константы используются из точки, где примитив пересекает соответствующую плоскость (вблизи или далеко), или интерполяция атрибута работает так, как если бы режим пониженной растрирования отключен.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-221">When Conservative Rasterization mode is enabled and depth clip is disabled (when the *DepthClipEnable* Rasterizer State is set to FALSE), there may be variances in attribute interpolation for segments of a primitive that fall outside the 0 <= z <= w range, depending on implementation: either constant values are used from a point where the primitive intersects the relevant plane (near or far), or attribute interpolation behaves as when Conservative Rasterization mode is disabled.</span></span> <span data-ttu-id="6b7a4-222">Однако поведение значения глубины одинаково независимо от консервативного режима растрирования, т. е. примитивы, которые выходят за пределы диапазона глубины, по-прежнему должны иметь значение ближайшего предела диапазона глубины окна просмотра.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-222">However, the depth value behavior is the same regardless of Conservative Rasterization mode, i.e. primitives that fall outside of the depth range must still be given the value of the nearest limit of the viewport depth range.</span></span> <span data-ttu-id="6b7a4-223">Поведение интерполяции атрибута в диапазоне 0 <= z <= w должно остаться неизменным.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-223">Attribute interpolation behavior inside the 0 <= z <= w range must remain unchanged.</span></span>

### <a name="clip-distance-interaction"></a><span data-ttu-id="6b7a4-224">Взаимодействие с расстоянием при обрезке</span><span class="sxs-lookup"><span data-stu-id="6b7a4-224">Clip Distance interaction</span></span>

<span data-ttu-id="6b7a4-225">Расстояние обрезки допустимо, если включен режим растрирования, и ведет себя для консервативно-растрового пикселя, как это происходит, когда консервативная растрирование не включена для всех охваченных примеров.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-225">Clip Distance is valid when Conservative Rasterization mode is enabled, and behaves for a conservatively rasterized pixel as it does when Conservative Rasterization is not enabled with all samples covered.</span></span>

<span data-ttu-id="6b7a4-226">Обратите внимание, что консервативная растрирование может привести к экстраполяции координат для оси W, что может вызвать W <= 0.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-226">Note that Conservative Rasterization can cause extrapolation of the W vertex coordinate, which may cause W <= 0.</span></span> <span data-ttu-id="6b7a4-227">Это может привести к тому, что реализации расстояния на каждый пиксель обрабатываются на расстоянии клипа, который был разделен на недопустимое значение W.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-227">This could cause per-pixel Clip Distance implementations to operate on a Clip Distance that has been Perspective Divided by an invalid W value.</span></span> <span data-ttu-id="6b7a4-228">Реализации расстояния от клипов должны защищаться от вызова растрирования для пикселов, где координата вершины W <= 0 (например, из-за экстраполяции в консервативном режиме растрирования).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-228">Clip Distance implementations must guard against invoking rasterization for pixels where vertex coordinate W <= 0 (e.g. due to extrapolation when in Conservative Rasterization mode).</span></span>

### <a name="target-independent-rasterization-interaction"></a><span data-ttu-id="6b7a4-229">Целевое независимое взаимодействие растрирования</span><span class="sxs-lookup"><span data-stu-id="6b7a4-229">Target Independent Rasterization interaction</span></span>

<span data-ttu-id="6b7a4-230">Консервативный режим растрирования совместим с целевой независимой растеризации (Тир).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-230">Conservative Rasterization mode is compatible with Target Independent Rasterization (TIR).</span></span> <span data-ttu-id="6b7a4-231">Правила и ограничения тир применяются, что обеспечивает экономное растровое изображение, как если бы все примеры были охвачены.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-231">TIR rules and restrictions apply, behaving for a conservatively rasterized pixel as if all samples are covered.</span></span>

### <a name="ia-primitive-topology-interaction"></a><span data-ttu-id="6b7a4-232">Взаимодействие примитивной топологии IA</span><span class="sxs-lookup"><span data-stu-id="6b7a4-232">IA Primitive Topology interaction</span></span>

<span data-ttu-id="6b7a4-233">Консервативная растрирование не определена для примитивов линий или точек.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-233">Conservative Rasterization is not defined for line or point primitives.</span></span> <span data-ttu-id="6b7a4-234">Таким образом, примитивные топологии, указывающие точки или линии, создают неопределенное поведение, если они передаются в модуль средства прорисовки при включении консервативной растрирования.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-234">Therefore, Primitive Topologies that specify points or lines produce undefined behavior if they are fed to the rasterizer unit when Conservative Rasterization is enabled.</span></span>

<span data-ttu-id="6b7a4-235">Проверка слоя отладки позволяет проверить, что приложения не используют эти простые топологии.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-235">The debug layer validation verifies applications do not use these Primitive Topologies.</span></span>

### <a name="query-interaction"></a><span data-ttu-id="6b7a4-236">Взаимодействие с запросом</span><span class="sxs-lookup"><span data-stu-id="6b7a4-236">Query interaction</span></span>

<span data-ttu-id="6b7a4-237">Для более консервативного растрового изображения запросы ведут себя так, как если бы не было включено консервативное растрирование при покрытии всех примеров.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-237">For a conservatively rasterized pixel, queries behave as they do when Conservative Rasterization is not enabled when all samples are covered.</span></span> <span data-ttu-id="6b7a4-238">Например, для консервативно-растрового изображения, D3D12 \_ типа запроса \_ \_ перекрытия и D3D12 \_ \_ \_ Статистика конвейера типа запроса \_ (из [**D3D12 \_ \_ типа запроса**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_query_type)) должна вести себя так, как если бы не была включена консервативная растрирование при покрытии всех выборок.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-238">For example, for a conservatively rasterized pixel, D3D12\_QUERY\_TYPE\_OCCLUSION and D3D12\_QUERY\_TYPE\_PIPELINE\_STATISTICS (from [**D3D12\_QUERY\_TYPE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_query_type)) must behave as they would when Conservative Rasterization is not enabled when all samples are covered.</span></span>

<span data-ttu-id="6b7a4-239">Вызов шейдера пикселей должен увеличиваться для каждого консервативно растрового пикселя в консервативном режиме растрирования.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-239">Pixel Shader invocations should increment for every conservatively rasterized pixel in Conservative Rasterization mode.</span></span>

### <a name="cull-state-interaction"></a><span data-ttu-id="6b7a4-240">Взаимодействие состояния отбора</span><span class="sxs-lookup"><span data-stu-id="6b7a4-240">Cull State interaction</span></span>

<span data-ttu-id="6b7a4-241">Все состояния состояний действуют в режиме консервативной растрирования и следуют тем же правилам, что и при отключенной растеризации.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-241">All Cull States are valid in Conservative Rasterization mode and follow the same rules as when Conservative Rasterization is not enabled.</span></span>

<span data-ttu-id="6b7a4-242">При сравнении консервативной растрирования между разрешениями или без применения консервативной растрирования существует вероятность того, что некоторые примитивы могут иметь непарные заботы (т. е. один обратный).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-242">When comparing Conservative Rasterization across resolutions to itself or without Conservative Rasterization enabled, there is the possibility that some primitives may have mismatched facedness (i.e. one back facing, the other front facing).</span></span> <span data-ttu-id="6b7a4-243">Приложения могут избежать этой неопределенности, используя режим D3D12ового \_ \_ \_ запрета (из [**\_ \_ режима применения D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_cull_mode)) и не используя `IsFrontFace` значение, сформированное системой.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-243">Applications can avoid this uncertainty by using D3D12\_CULL\_MODE\_NONE (from [**D3D12\_CULL\_MODE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_cull_mode)) and not using the `IsFrontFace` System Generated Value.</span></span>

### <a name="isfrontface-interaction"></a><span data-ttu-id="6b7a4-244">Взаимодействие Исфронтфаце</span><span class="sxs-lookup"><span data-stu-id="6b7a4-244">IsFrontFace interaction</span></span>

<span data-ttu-id="6b7a4-245">`IsFrontFace`Значение, созданное системой, допустимо для использования в режиме консервативной растрирования и соответствует поведению, заданному в том случае, если не включено консервативное растрирование.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-245">The `IsFrontFace` System Generated Value is valid to use in Conservative Rasterization mode, and follows the behavior defined when Conservative Rasterization is not enabled.</span></span>

### <a name="fill-modes-interaction"></a><span data-ttu-id="6b7a4-246">Взаимодействие режимов заливки</span><span class="sxs-lookup"><span data-stu-id="6b7a4-246">Fill Modes interaction</span></span>

<span data-ttu-id="6b7a4-247">Единственный допустимый [**\_ \_ режим заполнения D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_fill_mode) для консервативной растрирования — D3D12 \_ заливку \_ сплошным, любой другой режим заполнения является недопустимым параметром для состояния средства.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-247">The only valid [**D3D12\_FILL\_MODE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_fill_mode) for Conservative Rasterization is D3D12\_FILL\_SOLID, any other fill mode is an invalid parameter for the Rasterizer State.</span></span>

<span data-ttu-id="6b7a4-248">Это связано с тем, что режим работы D3D12 указывает, что в режиме каркасной заливки должны преобразовываться края треугольников в линии и соблюдены правила растрирования линий и консервативное поведение растрирования линий не определено.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-248">This is because D3D12 functional specification specifies that wireframe fill mode should convert triangle edges to lines and follow the line rasterization rules and conservative line rasterization behavior has not been defined.</span></span>

## <a name="implementation-details"></a><span data-ttu-id="6b7a4-249">Сведения о реализации</span><span class="sxs-lookup"><span data-stu-id="6b7a4-249">Implementation details</span></span>

<span data-ttu-id="6b7a4-250">Тип растрирования, поддерживаемый Direct3D 12, иногда называется «неоцененной экономией».</span><span class="sxs-lookup"><span data-stu-id="6b7a4-250">The type of rasterization supported in Direct3D 12 is sometimes referred to as "Overestimated Conservative Rasterization".</span></span> <span data-ttu-id="6b7a4-251">Также существует понятие "неполная оценка консервативной растеризации", что означает, что только пикселы, полностью охваченные визуализированным примитивом, растрируются.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-251">There is also the concept of "Underestimated Conservative Rasterization", which means that only pixels that are fully covered by a rendered primitive are rasterized.</span></span> <span data-ttu-id="6b7a4-252">Некоторая консервативная информация о растрировании доступна через шейдер пикселей за счет использования данных о покрытии, а в качестве режима растрирования доступен только неоцененная консервативная растрирование.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-252">Underestimated Conservative Rasterization information is available through the pixel shader through the use of input coverage data, and only overestimated Conservative Rasterization is available as a rasterizing mode.</span></span>

<span data-ttu-id="6b7a4-253">Если какая-либо часть примитива перекрывает пиксел, то этот пиксель считается охваченным и затем растрируются.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-253">If any part of a primitive overlaps a pixel, then that pixel is considered covered and is then rasterized.</span></span> <span data-ttu-id="6b7a4-254">Когда край или угол примитива попадают вдоль края или угла пикселя, применение "верхнего левого правила" зависит от реализации.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-254">When an edge or corner of a primitive falls along the edge or corner of a pixel, the application of the "top-left rule" is implementation-specific.</span></span> <span data-ttu-id="6b7a4-255">Однако для реализаций, поддерживающих дегенерирование треугольников, вырожденный треугольник на границе или углу должен охватывать по крайней мере один пиксель.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-255">However, for implementations that support degenerate triangles, a degenerate triangle along an edge or corner must cover at least one pixel.</span></span>

<span data-ttu-id="6b7a4-256">Консервативные реализации растрирования могут различаться на разных устройствах и выдавать ложные срабатывания, то есть они могут неправильно решить, что пикселы охвачены.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-256">Conservative Rasterization implementations can vary on different hardware, and do produce false positives, meaning that they can incorrectly decide that pixels are covered.</span></span> <span data-ttu-id="6b7a4-257">Это может произойти из-за сведений, относящихся к реализации, таких как примитивное увеличение или привязка ошибок, присущих координатам вершин с фиксированной точкой, которые используются при растрировании.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-257">This can occur because of implementation-specific details like primitive growing or snapping errors inherent in the fixed-point vertex coordinates used in rasterization.</span></span> <span data-ttu-id="6b7a4-258">Причина ложного срабатывания (по отношению к координатам вершин с фиксированной точкой) является допустимой, так как требуется определенное количество ложных положительных результатов, чтобы реализация выполняла оценку покрытия для вершин с привязкой к ним (т. е. координаты вершин, преобразованные из 16,8 плавающей запятой в фиксированную точку с плавающей запятой), но учитывают покрытие, полученное исходными координатами</span><span class="sxs-lookup"><span data-stu-id="6b7a4-258">The reason false positives (with respect to fixed point vertex coordinates) are valid is because some amount of false positives are needed to allow an implementation to do coverage evaluation against post-snapped vertices (i.e. vertex coordinates that have been converted from floating point to the 16.8 fixed-point used in the rasterizer), but honor the coverage produced by the original floating point vertex coordinates.</span></span>

<span data-ttu-id="6b7a4-259">Консервативные реализации растрирования не создают ложные отрицательные значения относительно координат вершин с плавающей запятой для вырожденных примитивов после привязки: Если какая-либо часть примитива пересекается с любой частью пикселя, то этот пиксель будет растрирования.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-259">Conservative Rasterization implementations do not produce false negatives with respect to the floating-point vertex coordinates for non-degenerate post-snap primitives: if any part of a primitive overlaps any part of a pixel, then that pixel is rasterized.</span></span>

<span data-ttu-id="6b7a4-260">Треугольники, которые выявляются вырожденными (повторяющимися индексами в буфере индексов или коллинеарности в трехмерной области), или становятся вырожденными после преобразования с фиксированной запятой (в средствах формирования программной прорисовки), могут быть или не изменяться. Оба являются допустимыми поведениями.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-260">Triangles that are degenerate (duplicate indices in an index buffer or collinear in 3D), or become degenerate after fixed-point conversion (collinear vertices in the rasterizer), may or may not be culled; both are valid behaviors.</span></span> <span data-ttu-id="6b7a4-261">Дегенерация треугольников должна считаться обратной стороной, поэтому если для приложения требуется определенное поведение, оно может использовать исключение обратной стороны или тест для внешнего доступа.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-261">Degenerate triangles must be considered back facing, so if a specific behavior is required by an application, it can use back-face culling or test for front facing.</span></span> <span data-ttu-id="6b7a4-262">Вырожденные треугольники используют значения, присвоенные вершине 0 для всех интерполяций значений.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-262">Degenerate triangles use the values assigned to Vertex 0 for all interpolated values.</span></span>

<span data-ttu-id="6b7a4-263">В дополнение к тому, что оборудование не поддерживает эту функцию, существует три уровня поддержки оборудования.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-263">There are three tiers of hardware support, in addition to the possibility that the hardware does not support this feature.</span></span>

-   <span data-ttu-id="6b7a4-264">Уровень 1 обеспечивает максимальный размер области неопределенности 1/2 пикселей и не поддерживает вырождение после привязки.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-264">Tier 1 enforces a maximum 1/2 pixel uncertainty region and does not support post-snap degenerates.</span></span> <span data-ttu-id="6b7a4-265">Это удобно для мозаичной отрисовки, текстуры Atlas, создания светлых карт и теневых карт в виде точек.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-265">This is good for tiled rendering, a texture atlas, light map generation and sub-pixel shadow maps.</span></span>
-   <span data-ttu-id="6b7a4-266">Уровень 2 сокращает максимальную неопределенность до 1/256 и требует, чтобы дегенерация после привязки не была восстановлена.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-266">Tier 2 reduces the maximum uncertainty region to 1/256 and requires post-snap degenerates not be culled.</span></span> <span data-ttu-id="6b7a4-267">Этот уровень полезен для ускорения алгоритма на основе ЦП (например, вокселизатион).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-267">This tier is helpful for CPU-based algorithm acceleration (such as voxelization).</span></span>
-   <span data-ttu-id="6b7a4-268">Уровень 3 поддерживает не более 1/256 региона неопределенности и добавляет поддержку внутреннего объема входных данных.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-268">Tier 3 maintains a maximum 1/256 uncertainty region and adds support for inner input coverage.</span></span> <span data-ttu-id="6b7a4-269">Внутреннее покрытие ввода добавляет новое значение `SV_InnerCoverage` в язык штриховки высокого уровня (HLSL).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-269">Inner input coverage adds the new value `SV_InnerCoverage` to High Level Shading Language (HLSL).</span></span> <span data-ttu-id="6b7a4-270">Это 32-разрядное скалярное целое число, которое может быть задано для входных данных в шейдер пикселей, а также представляет собой неоцененную информацию о растрирования (то есть, гарантируется ли полностью покрытая точка).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-270">This is a 32-bit scalar integer that can be specified on input to a pixel shader, and represents the underestimated Conservative Rasterization information (that is, whether a pixel is guaranteed-to-be-fully covered).</span></span> <span data-ttu-id="6b7a4-271">Этот уровень полезен для перекрытияного отбора.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-271">This tier is helpful for occlusion culling.</span></span>

## <a name="api-summary"></a><span data-ttu-id="6b7a4-272">Сводные данные API</span><span class="sxs-lookup"><span data-stu-id="6b7a4-272">API summary</span></span>

<span data-ttu-id="6b7a4-273">Следующие методы, структуры, перечисления и вспомогательные классы ссылаются на консервативную растрирование:</span><span class="sxs-lookup"><span data-stu-id="6b7a4-273">The following methods, structures, enums, and helper classes reference Conservative Rasterization:</span></span>

-   <span data-ttu-id="6b7a4-274">[**D3D12 \_ Средство программной ПРОРИСОВКи \_ DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_rasterizer_desc) : структура, содержащая описание средства программной прорисовки.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-274">[**D3D12\_RASTERIZER\_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_rasterizer_desc) : structure holding the rasterizer description.</span></span>
-   <span data-ttu-id="6b7a4-275">[**D3D12 \_ КОНСЕРВАТИВНый \_ \_ режим растрирования**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_conservative_rasterization_mode) : перечисление значений для режима (включено или выключено).</span><span class="sxs-lookup"><span data-stu-id="6b7a4-275">[**D3D12\_CONSERVATIVE\_RASTERIZATION\_MODE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_conservative_rasterization_mode) : enum values for the mode (on or off).</span></span>
-   <span data-ttu-id="6b7a4-276">[**D3D12 \_ \_ \_ \_ Параметры D3D12 данных функций**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_d3d12_options) : структура, содержащая уровень поддержки.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-276">[**D3D12\_FEATURE\_DATA\_D3D12\_OPTIONS**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_feature_data_d3d12_options) : structure holding the tier of support.</span></span>
-   <span data-ttu-id="6b7a4-277">[**D3D12 \_ КОНСЕРВАТИВНый \_ \_ уровень растрирования**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_conservative_rasterization_tier) : перечислимые значения для каждого уровня поддержки оборудования.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-277">[**D3D12\_CONSERVATIVE\_RASTERIZATION\_TIER**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_conservative_rasterization_tier) : enum values for each tier of support by the hardware.</span></span>
-   <span data-ttu-id="6b7a4-278">[**Чеккфеатуресуппорт**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-checkfeaturesupport) : метод для доступа к поддерживаемым функциям.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-278">[**CheckFeatureSupport**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-checkfeaturesupport) : method to access the supported features.</span></span>
-   <span data-ttu-id="6b7a4-279">[**CD3DX12 \_ Средство программной ПРОРИСОВКи \_ DESC**](cd3dx12-rasterizer-desc.md) : вспомогательный класс для создания описаний средства растеризации.</span><span class="sxs-lookup"><span data-stu-id="6b7a4-279">[**CD3DX12\_RASTERIZER\_DESC**](cd3dx12-rasterizer-desc.md) : helper class for creating rasterizer descriptions.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6b7a4-280">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="6b7a4-280">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6b7a4-281">Дополнительные обучающие видеоматериалы по DirectX: консервативная растрирование</span><span class="sxs-lookup"><span data-stu-id="6b7a4-281">DirectX advanced learning video tutorials : Conservative Rasterization</span></span>](https://www.youtube.com/watch?v=zL0oSY_YmDY)
</dt> <dt>

[<span data-ttu-id="6b7a4-282">Упорядоченные представления средства прорисовки</span><span class="sxs-lookup"><span data-stu-id="6b7a4-282">Rasterizer Ordered Views</span></span>](rasterizer-order-views.md)
</dt> <dt>

[<span data-ttu-id="6b7a4-283">Отрисовка</span><span class="sxs-lookup"><span data-stu-id="6b7a4-283">Rendering</span></span>](rendering.md)
</dt> </dl>

 

 




