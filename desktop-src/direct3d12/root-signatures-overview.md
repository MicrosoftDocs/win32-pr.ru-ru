---
title: Общие сведения о корневых сигнатурах
description: Корневая подпись настраивается приложением и связывает списки команд с ресурсами, которые требуются шейдеру.
ms.assetid: 2E649DA2-6CAC-4C2A-A420-D4EC0DD6EA73
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 85eb5882e4a893c2933c55281f21c49f2d7d50d7
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104548995"
---
# <a name="root-signatures-overview"></a><span data-ttu-id="63898-103">Общие сведения о корневых сигнатурах</span><span class="sxs-lookup"><span data-stu-id="63898-103">Root Signatures Overview</span></span>

<span data-ttu-id="63898-104">Корневая подпись настраивается приложением и связывает списки команд с ресурсами, которые требуются шейдеру.</span><span class="sxs-lookup"><span data-stu-id="63898-104">A root signature is configured by the app and links command lists to the resources the shaders require.</span></span> <span data-ttu-id="63898-105">Список команд Graphics содержит как графическую, так и корневую сигнатуру вычислений.</span><span class="sxs-lookup"><span data-stu-id="63898-105">The graphics command list has both a graphics and compute root signature.</span></span> <span data-ttu-id="63898-106">Список команд вычислений будет иметь только одну корневую подпись вычислений.</span><span class="sxs-lookup"><span data-stu-id="63898-106">A compute command list will simply have one compute root signature.</span></span> <span data-ttu-id="63898-107">Эти корневые подписи независимы друг от друга.</span><span class="sxs-lookup"><span data-stu-id="63898-107">These root signatures are independent of each other.</span></span>

-   [<span data-ttu-id="63898-108">Корневые параметры и аргументы</span><span class="sxs-lookup"><span data-stu-id="63898-108">Root parameters and arguments</span></span>](#root-parameters-and-arguments)
-   [<span data-ttu-id="63898-109">Корневые константы, дескрипторы и таблицы</span><span class="sxs-lookup"><span data-stu-id="63898-109">Root constants, descriptors and tables</span></span>](#root-constants-descriptors-and-tables)
-   [<span data-ttu-id="63898-110">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="63898-110">Related topics</span></span>](#related-topics)

## <a name="root-parameters-and-arguments"></a><span data-ttu-id="63898-111">Корневые параметры и аргументы</span><span class="sxs-lookup"><span data-stu-id="63898-111">Root parameters and arguments</span></span>

<span data-ttu-id="63898-112">**Корневая подпись** похожа на сигнатуру функции API, она определяет типы данных, которые должны рассчитывать шейдеры, но не определяет фактическую память или данные.</span><span class="sxs-lookup"><span data-stu-id="63898-112">A **root signature** is similar to an API function signature, it determines the types of data the shaders should expect, but does not define the actual memory or data.</span></span> <span data-ttu-id="63898-113">**Корневой параметр** — одна запись в корневой сигнатуре.</span><span class="sxs-lookup"><span data-stu-id="63898-113">A **root parameter** is one entry in the root signature.</span></span> <span data-ttu-id="63898-114">Фактические значения корневых параметров, заданные и измененные во время выполнения, называются **корневыми аргументами**.</span><span class="sxs-lookup"><span data-stu-id="63898-114">The actual values of root parameters set and changed at runtime are called **root arguments**.</span></span> <span data-ttu-id="63898-115">Изменение корневых аргументов изменяет данные, которые считываются шейдером.</span><span class="sxs-lookup"><span data-stu-id="63898-115">Changing the root arguments changes the data that the shaders read.</span></span>

## <a name="root-constants-descriptors-and-tables"></a><span data-ttu-id="63898-116">Корневые константы, дескрипторы и таблицы</span><span class="sxs-lookup"><span data-stu-id="63898-116">Root constants, descriptors and tables</span></span>

<span data-ttu-id="63898-117">Корневая подпись может содержать три типа параметров. корневые константы (константы, встроенные в корневых аргументах), корневые дескрипторы (дескрипторы, встроенные в корневых аргументах) и таблицы дескрипторов (указатели на диапазон дескрипторов в куче).</span><span class="sxs-lookup"><span data-stu-id="63898-117">The root signature can contain three types of parameters; root constants (constants inlined in the root arguments), root descriptors (descriptors inlined in the root arguments), and descriptor tables (pointers to a range of descriptors in the descriptor heap).</span></span>

<span data-ttu-id="63898-118">Корневые константы представляют собой встроенные 32-разрядные значения, которые отображаются в шейдере в виде буфера констант.</span><span class="sxs-lookup"><span data-stu-id="63898-118">The root constants are inline 32-bit values that show up in the shader as a constant buffer.</span></span>

<span data-ttu-id="63898-119">Встроенные корневые дескрипторы должны содержать дескрипторы, доступ к которым осуществляется чаще всего, хотя он ограничен КБВС, а также необработанными или структурированными буферами UAV или SRV.</span><span class="sxs-lookup"><span data-stu-id="63898-119">The inlined root descriptors should contain descriptors that are accessed most often, though is limited to CBVs, and raw or structured UAV or SRV buffers.</span></span> <span data-ttu-id="63898-120">Более сложный тип, например двухмерная текстура SRV, не может использоваться в качестве корневого дескриптора.</span><span class="sxs-lookup"><span data-stu-id="63898-120">A more complex type, such as a 2D texture SRV, cannot be used as a root descriptor.</span></span> <span data-ttu-id="63898-121">Корневые дескрипторы не включают предельный размер, поэтому в кучах дескрипторов не проверяется наличие недопустимых ограничений, в отличие от дескрипторов, которые включают размер.</span><span class="sxs-lookup"><span data-stu-id="63898-121">Root descriptors do not include a size limit, so there can be no out-of-bounds checking, unlike descriptors in descriptor heaps, which do include a size.</span></span>

<span data-ttu-id="63898-122">Записи таблицы дескрипторов в корневых сигнатурах содержат дескриптор, имя привязки к шейдеру HLSL и флаг видимости.</span><span class="sxs-lookup"><span data-stu-id="63898-122">Descriptor table entries within root signatures contain the descriptor, HLSL shader bind name and visibility flag.</span></span> <span data-ttu-id="63898-123">Дополнительные сведения об именах шейдеров см. в [модели шейдеров 5,1](/windows/desktop/direct3dhlsl/shader-model-5-1) .</span><span class="sxs-lookup"><span data-stu-id="63898-123">Refer to [Shader Model 5.1](/windows/desktop/direct3dhlsl/shader-model-5-1) for details of shader names.</span></span> <span data-ttu-id="63898-124">На определенном оборудовании может быть выигрыш в производительности от только того, чтобы сделать дескрипторы, видимые для этапов шейдера, которым они требуются (см. сведения о [**\_ \_ видимости шейдеров D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_shader_visibility)).</span><span class="sxs-lookup"><span data-stu-id="63898-124">On some hardware, there can be a performance gain from only making descriptors visible to the shader stages that require them (refer to [**D3D12\_SHADER\_VISIBILITY**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_shader_visibility)).</span></span>

![запись корневой таблицы дескрипторов](images/root-descriptor-table.png)

<span data-ttu-id="63898-126">Макет корневой подписи достаточно гибок, при этом некоторые ограничения накладываются на менее производительное оборудование.</span><span class="sxs-lookup"><span data-stu-id="63898-126">The layout of the root signature is quite flexible, with some constraints imposed on less capable hardware.</span></span> <span data-ttu-id="63898-127">Независимо от уровня оборудования, приложения должны всегда пытаться сделать корневую подпись как небольшую, как требуется для максимальной эффективности.</span><span class="sxs-lookup"><span data-stu-id="63898-127">Regardless of the level of hardware, applications should always try to make the root signature as small as needed for maximum efficiency.</span></span> <span data-ttu-id="63898-128">Приложения могут выключать наличие большего количества таблиц дескрипторов в корневой подписи, но меньше места для корневых констант или наоборот.</span><span class="sxs-lookup"><span data-stu-id="63898-128">Applications can trade off having more descriptor tables in the root signature but less room for root constants, or vice versa.</span></span>

<span data-ttu-id="63898-129">Содержимое корневой сигнатуры (таблицы дескрипторов, корневые константы и корневые дескрипторы), которое привязывает приложение, автоматически получает управление версиями драйвером D3D12 всякий раз, когда какая-либо часть содержимого изменяется между вызовами Draw (Graphics)/диспатч (вычисление).</span><span class="sxs-lookup"><span data-stu-id="63898-129">The contents of the root signature (the descriptor tables, root constants and root descriptors) that the application has bound automatically get versioned by the D3D12 driver whenever any part of the contents change between draw (graphics)/dispatch (compute) calls.</span></span> <span data-ttu-id="63898-130">Поэтому каждая прорисовка и доставка получает уникальный полный набор состояния корневой подписи.</span><span class="sxs-lookup"><span data-stu-id="63898-130">So each draw/dispatch gets a unique full set of root signature state.</span></span>

<span data-ttu-id="63898-131">В идеале существуют группы объектов состояния конвейера (псос), которые используют одну и ту же корневую подпись.</span><span class="sxs-lookup"><span data-stu-id="63898-131">Ideally, there are groups of Pipeline State Objects (PSOs) that share the same root signature.</span></span> <span data-ttu-id="63898-132">После того как корневая подпись задана в конвейере, все определяемые ею привязки (таблицы дескрипторов, указатели, константы) могут быть заданы отдельно или изменены, включая наследование в пакеты.</span><span class="sxs-lookup"><span data-stu-id="63898-132">After a root signature is set on the pipeline, all the bindings that it defines (descriptor tables, descriptors, constants) can each be individually set or changed, including inheritance into bundles.</span></span>

<span data-ttu-id="63898-133">Приложение может обеспечить свой собственный компромисс между тем, сколько таблиц дескрипторов требуется для обратной подстановки (что занимает больше пространства, но удаляет косвенное обращение), обратная связь встроенных констант (которые не имеют косвенного обращения) в корневой подписи.</span><span class="sxs-lookup"><span data-stu-id="63898-133">An app can make its own tradeoff between how many descriptor tables it wants verses inline descriptors (which take more space but remove an indirection) verses inline constants (which have no indirection) they want in the root signature.</span></span> <span data-ttu-id="63898-134">Приложения должны использовать корневую подпись как можно реже, полагаться на управляемую приложением память, такую как кучи и кучи дескрипторов, указывающие на них для представления больших данных.</span><span class="sxs-lookup"><span data-stu-id="63898-134">Applications should use the root signature as sparingly as possible, relying on application controlled memory such as heaps and descriptor heaps pointing into them to represent bulk data.</span></span>

## <a name="related-topics"></a><span data-ttu-id="63898-135">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="63898-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="63898-136">Корневые подписи</span><span class="sxs-lookup"><span data-stu-id="63898-136">Root Signatures</span></span>](root-signatures.md)
</dt> </dl>

 

 