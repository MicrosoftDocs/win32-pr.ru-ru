---
title: Запросы
description: В Direct3D 12 запросы группируются в массивы запросов, которые называются кучами запросов. Куча запроса имеет тип, который определяет допустимые типы запросов, которые могут использоваться с этой кучей.
ms.assetid: d7403b5d-7e1b-4dd2-ae45-52e1153233c6
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 22c4db895eb0d4a727db2e32757f7ab0f1f9b1e2
ms.sourcegitcommit: 5b98bf8c68922f8f03c14f793fbe17504900559c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/12/2021
ms.locfileid: "104549011"
---
# <a name="queries"></a><span data-ttu-id="20527-104">Запросы</span><span class="sxs-lookup"><span data-stu-id="20527-104">Queries</span></span>

<span data-ttu-id="20527-105">В Direct3D 12 запросы группируются в массивы запросов, которые называются кучами запросов.</span><span class="sxs-lookup"><span data-stu-id="20527-105">In Direct3D 12, queries are grouped into arrays of queries called a query heap.</span></span> <span data-ttu-id="20527-106">Куча запроса имеет тип, который определяет допустимые типы запросов, которые могут использоваться с этой кучей.</span><span class="sxs-lookup"><span data-stu-id="20527-106">A query heap has a type which defines the valid types of queries that can be used with that heap.</span></span>

-   [<span data-ttu-id="20527-107">Отличия запросов от Direct3D 11 к Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="20527-107">Differences in Queries from Direct3D 11 to Direct3D 12</span></span>](#differences-in-queries-from-direct3d-11-to-direct3d-12)
-   [<span data-ttu-id="20527-108">Кучи запросов</span><span class="sxs-lookup"><span data-stu-id="20527-108">Query Heaps</span></span>](#query-heaps)
-   [<span data-ttu-id="20527-109">Создание куч запросов</span><span class="sxs-lookup"><span data-stu-id="20527-109">Creating Query heaps</span></span>](#creating-query-heaps)
-   [<span data-ttu-id="20527-110">Извлечение данных из запроса</span><span class="sxs-lookup"><span data-stu-id="20527-110">Extracting data from a query</span></span>](#extracting-data-from-a-query)
-   [<span data-ttu-id="20527-111">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="20527-111">Related topics</span></span>](#related-topics)

## <a name="differences-in-queries-from-direct3d-11-to-direct3d-12"></a><span data-ttu-id="20527-112">Отличия запросов от Direct3D 11 к Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="20527-112">Differences in Queries from Direct3D 11 to Direct3D 12</span></span>

<span data-ttu-id="20527-113">Следующие типы запросов больше не используются в Direct3D 12, их функции внедряются в другие процессы:</span><span class="sxs-lookup"><span data-stu-id="20527-113">The following query types are no longer present in Direct3D 12, their functionality being incorporated into other processes:</span></span>

-   <span data-ttu-id="20527-114">**Запросы событий** — события теперь обрабатываются ограждениями.</span><span class="sxs-lookup"><span data-stu-id="20527-114">**Event queries** - event functionally is now handled by fences.</span></span>
-   <span data-ttu-id="20527-115">Несвязанные **запросы timestamp** . часы GPU можно установить в стабильное состояние в Direct3D 12 (см. раздел " [время](timing.md) ").</span><span class="sxs-lookup"><span data-stu-id="20527-115">**Disjoint timestamp queries** - GPU clocks can be set to a stable state in Direct3D 12 (see the [Timing](timing.md) section).</span></span> <span data-ttu-id="20527-116">Сравнение часов GPU не имеет смысла, если GPU все время бездействует между отметками времени (называемым несвязанным запросом).</span><span class="sxs-lookup"><span data-stu-id="20527-116">GPU clock comparisons are not meaningful if the GPU idled at all between the timestamps (known as a disjoint query).</span></span> <span data-ttu-id="20527-117">Благодаря стабильной питанию два запроса с отметкой времени, выданных из разных списков команд, надежно сравнимы.</span><span class="sxs-lookup"><span data-stu-id="20527-117">With stable power two timestamp queries issued from different command lists are reliably comparable.</span></span> <span data-ttu-id="20527-118">Две отметки времени в одном списке команд всегда являются надежными.</span><span class="sxs-lookup"><span data-stu-id="20527-118">Two timestamps within the same command list are always reliably comparable.</span></span>
-   <span data-ttu-id="20527-119">**Потоковая статистика вывода запросов** . в Direct3D 12 отсутствует запрос на единичный потоковый выход (т. е.) запросов переполнения для всех выходных потоков.</span><span class="sxs-lookup"><span data-stu-id="20527-119">**Stream output statistics queries** - in Direct3D 12 there is no single stream output (SO) overflow query for all the output streams.</span></span> <span data-ttu-id="20527-120">Приложения должны выдавать несколько однопотоковых запросов, а затем сопоставлять результаты.</span><span class="sxs-lookup"><span data-stu-id="20527-120">Apps need to issue multiple single-stream queries, and then correlate the results.</span></span>
-   <span data-ttu-id="20527-121">**Потоки выходных статистических данных потока и предиката перекрытия** — запросы (которые выполняют запись в память) и [затенения](predication.md) (которые считывают данные из памяти) больше не связаны, поэтому эти типы запросов не нужны.</span><span class="sxs-lookup"><span data-stu-id="20527-121">**Stream output statistics predicate and occlusion predicate queries** - queries (which write to memory) and [Predication](predication.md) (which reads from memory) are no longer coupled, and so these query types are not needed.</span></span>

<span data-ttu-id="20527-122">К Direct3D 12 добавлен новый тип запроса binary перекрытия.</span><span class="sxs-lookup"><span data-stu-id="20527-122">A new binary occlusion query type has been added to Direct3D 12.</span></span> <span data-ttu-id="20527-123">Это позволяет затенения стратегиям, которые повлияли только на то, был ли объект полностью перекрыто или нет (вместо того, сколько пикселей было перекрыто) для обозначения устройства, что может обеспечить более эффективную работу запросов.</span><span class="sxs-lookup"><span data-stu-id="20527-123">This allows predication strategies that care only whether an object was fully occluded or not (rather than how many pixels were occluded) to indicate this to the device, which might be able to more efficiently perform the queries.</span></span>

## <a name="query-heaps"></a><span data-ttu-id="20527-124">Кучи запросов</span><span class="sxs-lookup"><span data-stu-id="20527-124">Query Heaps</span></span>

<span data-ttu-id="20527-125">Запросы могут быть одного типа из нескольких типов ([**\_ \_ \_ тип кучи запросов D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_query_heap_type)) и группируются в кучи запросов перед их отправкой в GPU.</span><span class="sxs-lookup"><span data-stu-id="20527-125">Queries can be one from a number of types ([**D3D12\_QUERY\_HEAP\_TYPE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_query_heap_type)), and are grouped into query heaps before being submitted to the GPU.</span></span>

<span data-ttu-id="20527-126">Новый тип запроса D3D12 \_ тип запроса \_ \_ Binary \_ перекрытия доступен и действует как D3D12 \_ Query \_ Type перекрытия, \_ за исключением того, что он возвращает двоичный результат 0/1:0 означает, что ни один из образцов не прошел тестирование на глубину и набор элементов, 1 указывает, что по крайней мере в одном из образцов передано тестирование глубины и шаблона.</span><span class="sxs-lookup"><span data-stu-id="20527-126">A new query type D3D12\_QUERY\_TYPE\_BINARY\_OCCLUSION is available and acts like D3D12\_QUERY\_TYPE\_OCCLUSION except that it returns a binary 0/1 result: 0 indicates that no samples passed depth and stencil testing, 1 indicates that at least one sample passed depth and stencil testing.</span></span> <span data-ttu-id="20527-127">Это позволяет перекрытия запросам не мешать оптимизации производительности GPU, связанной с тестированием глубины или трафарета.</span><span class="sxs-lookup"><span data-stu-id="20527-127">This enables occlusion queries to not interfere with any GPU performance optimization associated with depth/stencil testing.</span></span>

## <a name="creating-query-heaps"></a><span data-ttu-id="20527-128">Создание куч запросов</span><span class="sxs-lookup"><span data-stu-id="20527-128">Creating Query heaps</span></span>

<span data-ttu-id="20527-129">API-интерфейсы, относящиеся к созданию кучи запросов, представляют [**собой \_ \_ \_ тип кучи запроса enum D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_query_heap_type), структуру [**D3D12 \_ запроса \_ \_ DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_query_heap_desc)и метод [**креатекуерихеап**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createqueryheap).</span><span class="sxs-lookup"><span data-stu-id="20527-129">The APIs relevant to creating query heaps are the enum [**D3D12\_QUERY\_HEAP\_TYPE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_query_heap_type), the struct [**D3D12\_QUERY\_HEAP\_DESC**](/windows/desktop/api/d3d12/ns-d3d12-d3d12_query_heap_desc), and the method [**CreateQueryHeap**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createqueryheap).</span></span>

<span data-ttu-id="20527-130">Основная среда выполнения проверяет, что тип кучи запросов является допустимым членом перечисления [**\_ \_ типа кучи D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_heap_type) и что значение счетчика больше 0.</span><span class="sxs-lookup"><span data-stu-id="20527-130">The core runtime will validate that the query heap type is a valid member of the [**D3D12\_HEAP\_TYPE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_heap_type) enumeration, and that the count is greater than 0.</span></span>

<span data-ttu-id="20527-131">Каждый отдельный элемент запроса в куче запросов может запускаться и останавливаться отдельно.</span><span class="sxs-lookup"><span data-stu-id="20527-131">Each individual query element within a query heap can be started and stopped separately.</span></span>

<span data-ttu-id="20527-132">API-интерфейсы для использования куч запросов представляют собой [**\_ \_ тип запроса enum D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_query_type), а также методы [**бегинкуери**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-beginquery) и [**ендкуери**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-endquery).</span><span class="sxs-lookup"><span data-stu-id="20527-132">The APIs for using the query heaps are the enum [**D3D12\_QUERY\_TYPE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_query_type), and the methods [**BeginQuery**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-beginquery) and [**EndQuery**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-endquery).</span></span>

<span data-ttu-id="20527-133">D3D12 \_ \_ \_ -Метка типа запроса — это единственный запрос, поддерживающий только [**ендкуери**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-endquery) .</span><span class="sxs-lookup"><span data-stu-id="20527-133">D3D12\_QUERY\_TYPE\_TIMESTAMP is the only query that supports [**EndQuery**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-endquery) only.</span></span> <span data-ttu-id="20527-134">Для всех остальных типов запросов требуются [**бегинкуери**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-beginquery) и **ендкуери**.</span><span class="sxs-lookup"><span data-stu-id="20527-134">All other query types require [**BeginQuery**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-beginquery) and **EndQuery**.</span></span>

<span data-ttu-id="20527-135">Слой отладки будет проверять следующее:</span><span class="sxs-lookup"><span data-stu-id="20527-135">The debug layer will validate the following:</span></span>

-   <span data-ttu-id="20527-136">Не допускается начинать запрос метки времени &mdash; , его можно завершить только</span><span class="sxs-lookup"><span data-stu-id="20527-136">It is illegal to begin a timestamp query&mdash;you can only end it</span></span>
-   <span data-ttu-id="20527-137">Недопустимо начинать запрос дважды, не завершая его (для данного элемента).</span><span class="sxs-lookup"><span data-stu-id="20527-137">It is illegal to begin a query twice without ending it (for a given element).</span></span> <span data-ttu-id="20527-138">Для запросов, которые должны начинаться и заканчиваться, нельзя завершать запрос до соответствующего begin (для заданного элемента).</span><span class="sxs-lookup"><span data-stu-id="20527-138">For queries that require both begin and end, it is illegal to end a query before the corresponding begin (for a given element).</span></span>
-   <span data-ttu-id="20527-139">Тип запроса, передаваемый в [**бегинкуери**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-beginquery) , должен соответствовать типу запроса, переданному в [**ендкуери**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-endquery).</span><span class="sxs-lookup"><span data-stu-id="20527-139">The query type passed to [**BeginQuery**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-beginquery) must match the query type passed to [**EndQuery**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-endquery).</span></span>

<span data-ttu-id="20527-140">Основная среда выполнения будет проверять следующее:</span><span class="sxs-lookup"><span data-stu-id="20527-140">The core runtime will validate the following:</span></span>

-   <span data-ttu-id="20527-141">[**Бегинкуери**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-beginquery) не может быть вызван для запроса метки времени.</span><span class="sxs-lookup"><span data-stu-id="20527-141">[**BeginQuery**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-beginquery) cannot be called on a timestamp query.</span></span>
-   <span data-ttu-id="20527-142">Для типов запросов, которые поддерживают как [**бегинкуери**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-beginquery) , так и [**ендкуери**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-endquery) (все, кроме метки времени), запрос для данного элемента не должен охватывать границы списка команд.</span><span class="sxs-lookup"><span data-stu-id="20527-142">For the query types which support both [**BeginQuery**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-beginquery) and [**EndQuery**](/windows/desktop/api/d3d12/nf-d3d12-id3d12graphicscommandlist-endquery) (all except for timestamp), a query for a given element must not span command list boundaries.</span></span>
-   <span data-ttu-id="20527-143">*Елементиндекс* должен находиться в пределах диапазона.</span><span class="sxs-lookup"><span data-stu-id="20527-143">*ElementIndex* must be within range.</span></span>
-   <span data-ttu-id="20527-144">Тип запроса является допустимым членом перечисления [**\_ \_ типа запроса D3D12**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_query_type) .</span><span class="sxs-lookup"><span data-stu-id="20527-144">The query type is a valid member of the [**D3D12\_QUERY\_TYPE**](/windows/desktop/api/d3d12/ne-d3d12-d3d12_query_type) enum.</span></span>
-   <span data-ttu-id="20527-145">Тип запроса должен быть совместим с кучей запроса.</span><span class="sxs-lookup"><span data-stu-id="20527-145">The query type must be compatible with the query heap.</span></span> <span data-ttu-id="20527-146">В следующей таблице показан тип кучи запроса, необходимый для каждого типа запроса:</span><span class="sxs-lookup"><span data-stu-id="20527-146">The following table shows the query heap type required for each query type:</span></span>

    

    | <span data-ttu-id="20527-147">Тип запроса</span><span class="sxs-lookup"><span data-stu-id="20527-147">Query Type</span></span>                                  | <span data-ttu-id="20527-148">Тип кучи запроса</span><span class="sxs-lookup"><span data-stu-id="20527-148">Query Heap type</span></span>                                |
    |---------------------------------------------|------------------------------------------------|
    | <span data-ttu-id="20527-149">D3D12 \_ , \_ тип запроса \_ перекрытия</span><span class="sxs-lookup"><span data-stu-id="20527-149">D3D12\_QUERY\_TYPE\_OCCLUSION</span></span>               | <span data-ttu-id="20527-150">\_ \_ Тип КУЧИ запроса \_ D3D12 \_ перекрытия</span><span class="sxs-lookup"><span data-stu-id="20527-150">D3D12\_QUERY\_HEAP\_TYPE\_OCCLUSION</span></span>            |
    | <span data-ttu-id="20527-151">D3D12 \_ \_ тип запроса \_ Binary \_ перекрытия</span><span class="sxs-lookup"><span data-stu-id="20527-151">D3D12\_QUERY\_TYPE\_BINARY\_OCCLUSION</span></span>       | <span data-ttu-id="20527-152">\_ \_ Тип КУЧИ запроса \_ D3D12 \_ перекрытия</span><span class="sxs-lookup"><span data-stu-id="20527-152">D3D12\_QUERY\_HEAP\_TYPE\_OCCLUSION</span></span>            |
    | <span data-ttu-id="20527-153">\_ \_ Метка времени типа запроса D3D12 \_</span><span class="sxs-lookup"><span data-stu-id="20527-153">D3D12\_QUERY\_TYPE\_TIMESTAMP</span></span>               | <span data-ttu-id="20527-154">\_ \_ \_ Метка времени типа кучи запроса D3D12 \_</span><span class="sxs-lookup"><span data-stu-id="20527-154">D3D12\_QUERY\_HEAP\_TYPE\_TIMESTAMP</span></span>            |
    | <span data-ttu-id="20527-155">\_ \_ \_ Статистика конвейера типа запроса D3D12 \_</span><span class="sxs-lookup"><span data-stu-id="20527-155">D3D12\_QUERY\_TYPE\_PIPELINE\_STATISTICS</span></span>    | <span data-ttu-id="20527-156">\_ \_ \_ \_ Статистика конвейера типа кучи запросов D3D12 \_</span><span class="sxs-lookup"><span data-stu-id="20527-156">D3D12\_QUERY\_HEAP\_TYPE\_PIPELINE\_STATISTICS</span></span> |
    | <span data-ttu-id="20527-157">\_Тип запроса \_ D3D12 \_ , поэтому \_ Statistics \_ STREAM0</span><span class="sxs-lookup"><span data-stu-id="20527-157">D3D12\_QUERY\_TYPE\_SO\_STATISTICS\_STREAM0</span></span> | <span data-ttu-id="20527-158">\_ \_ Тип КУЧИ запроса \_ D3D12 \_ для \_ статистики</span><span class="sxs-lookup"><span data-stu-id="20527-158">D3D12\_QUERY\_HEAP\_TYPE\_SO\_STATISTICS</span></span>       |
    | <span data-ttu-id="20527-159">\_Тип запроса \_ D3D12 \_ , поэтому \_ Statistics \_ STREAM1</span><span class="sxs-lookup"><span data-stu-id="20527-159">D3D12\_QUERY\_TYPE\_SO\_STATISTICS\_STREAM1</span></span> | <span data-ttu-id="20527-160">\_ \_ Тип КУЧИ запроса \_ D3D12 \_ для \_ статистики</span><span class="sxs-lookup"><span data-stu-id="20527-160">D3D12\_QUERY\_HEAP\_TYPE\_SO\_STATISTICS</span></span>       |
    | <span data-ttu-id="20527-161">\_Тип запроса \_ D3D12 \_ , поэтому \_ Statistics \_ STREAM2</span><span class="sxs-lookup"><span data-stu-id="20527-161">D3D12\_QUERY\_TYPE\_SO\_STATISTICS\_STREAM2</span></span> | <span data-ttu-id="20527-162">\_ \_ Тип КУЧИ запроса \_ D3D12 \_ для \_ статистики</span><span class="sxs-lookup"><span data-stu-id="20527-162">D3D12\_QUERY\_HEAP\_TYPE\_SO\_STATISTICS</span></span>       |
    | <span data-ttu-id="20527-163">\_Тип запроса \_ D3D12 \_ , поэтому \_ Statistics \_ STREAM3</span><span class="sxs-lookup"><span data-stu-id="20527-163">D3D12\_QUERY\_TYPE\_SO\_STATISTICS\_STREAM3</span></span> | <span data-ttu-id="20527-164">\_ \_ Тип КУЧИ запроса \_ D3D12 \_ для \_ статистики</span><span class="sxs-lookup"><span data-stu-id="20527-164">D3D12\_QUERY\_HEAP\_TYPE\_SO\_STATISTICS</span></span>       |

    

     

-   <span data-ttu-id="20527-165">Тип запроса поддерживается типом списка команд.</span><span class="sxs-lookup"><span data-stu-id="20527-165">The query type is supported by the command list type.</span></span> <span data-ttu-id="20527-166">В следующей таблице показано, какие запросы поддерживаются для типов списков команд.</span><span class="sxs-lookup"><span data-stu-id="20527-166">The following table shows which queries are supported on which command list types.</span></span>

    

    | <span data-ttu-id="20527-167">Тип запроса</span><span class="sxs-lookup"><span data-stu-id="20527-167">Query Type</span></span>                                  | <span data-ttu-id="20527-168">Поддерживаемые типы списков команд</span><span class="sxs-lookup"><span data-stu-id="20527-168">Supported Command List Types</span></span>         |
    |---------------------------------------------|--------------------------------------|
    | <span data-ttu-id="20527-169">D3D12 \_ , \_ тип запроса \_ перекрытия</span><span class="sxs-lookup"><span data-stu-id="20527-169">D3D12\_QUERY\_TYPE\_OCCLUSION</span></span>               | <span data-ttu-id="20527-170">Прямой доступ</span><span class="sxs-lookup"><span data-stu-id="20527-170">Direct</span></span>                               |
    | <span data-ttu-id="20527-171">D3D12 \_ \_ тип запроса \_ Binary \_ перекрытия</span><span class="sxs-lookup"><span data-stu-id="20527-171">D3D12\_QUERY\_TYPE\_BINARY\_OCCLUSION</span></span>       | <span data-ttu-id="20527-172">Прямой доступ</span><span class="sxs-lookup"><span data-stu-id="20527-172">Direct</span></span>                               |
    | <span data-ttu-id="20527-173">\_ \_ Метка времени типа запроса D3D12 \_</span><span class="sxs-lookup"><span data-stu-id="20527-173">D3D12\_QUERY\_TYPE\_TIMESTAMP</span></span>               | <span data-ttu-id="20527-174">Прямые, вычисленные и при необходимости копирование</span><span class="sxs-lookup"><span data-stu-id="20527-174">Direct, Compute, and optionally Copy</span></span> |
    | <span data-ttu-id="20527-175">\_ \_ \_ Статистика конвейера типа запроса D3D12 \_</span><span class="sxs-lookup"><span data-stu-id="20527-175">D3D12\_QUERY\_TYPE\_PIPELINE\_STATISTICS</span></span>    | <span data-ttu-id="20527-176">Прямой доступ</span><span class="sxs-lookup"><span data-stu-id="20527-176">Direct</span></span>                               |
    | <span data-ttu-id="20527-177">\_Тип запроса \_ D3D12 \_ , поэтому \_ Statistics \_ STREAM0</span><span class="sxs-lookup"><span data-stu-id="20527-177">D3D12\_QUERY\_TYPE\_SO\_STATISTICS\_STREAM0</span></span> | <span data-ttu-id="20527-178">Прямой доступ</span><span class="sxs-lookup"><span data-stu-id="20527-178">Direct</span></span>                               |
    | <span data-ttu-id="20527-179">\_Тип запроса \_ D3D12 \_ , поэтому \_ Statistics \_ STREAM1</span><span class="sxs-lookup"><span data-stu-id="20527-179">D3D12\_QUERY\_TYPE\_SO\_STATISTICS\_STREAM1</span></span> | <span data-ttu-id="20527-180">Прямой доступ</span><span class="sxs-lookup"><span data-stu-id="20527-180">Direct</span></span>                               |
    | <span data-ttu-id="20527-181">\_Тип запроса \_ D3D12 \_ , поэтому \_ Statistics \_ STREAM2</span><span class="sxs-lookup"><span data-stu-id="20527-181">D3D12\_QUERY\_TYPE\_SO\_STATISTICS\_STREAM2</span></span> | <span data-ttu-id="20527-182">Прямой доступ</span><span class="sxs-lookup"><span data-stu-id="20527-182">Direct</span></span>                               |
    | <span data-ttu-id="20527-183">\_Тип запроса \_ D3D12 \_ , поэтому \_ Statistics \_ STREAM3</span><span class="sxs-lookup"><span data-stu-id="20527-183">D3D12\_QUERY\_TYPE\_SO\_STATISTICS\_STREAM3</span></span> | <span data-ttu-id="20527-184">Прямой доступ</span><span class="sxs-lookup"><span data-stu-id="20527-184">Direct</span></span>                               |

    

     

## <a name="extracting-data-from-a-query"></a><span data-ttu-id="20527-185">Извлечение данных из запроса</span><span class="sxs-lookup"><span data-stu-id="20527-185">Extracting data from a query</span></span>

<span data-ttu-id="20527-186">Способ извлечения данных из запроса заключается в использовании метода [**ресолвекуеридата**](/windows/win32p/api/d3d12/nf-d3d12-id3d12graphicscommandlist-resolvequerydata) .</span><span class="sxs-lookup"><span data-stu-id="20527-186">The way to extract data from a query is to use the [**ResolveQueryData**](/windows/win32p/api/d3d12/nf-d3d12-id3d12graphicscommandlist-resolvequerydata) method.</span></span> <span data-ttu-id="20527-187">**Ресолвекуеридата** работает со всеми типами памяти (будь это системная память или локальная память устройства), но требует, чтобы целевой ресурс был в [**D3D12_RESOURCE_STATE_COPY_DEST**](/windows/win32/api/d3d12/ne-d3d12-d3d12_resource_states).</span><span class="sxs-lookup"><span data-stu-id="20527-187">**ResolveQueryData** works with all memory types (whether they are system memory or device local memory), but requires the destination resource to be in [**D3D12_RESOURCE_STATE_COPY_DEST**](/windows/win32/api/d3d12/ne-d3d12-d3d12_resource_states).</span></span> 

## <a name="related-topics"></a><span data-ttu-id="20527-188">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="20527-188">Related topics</span></span>

* [<span data-ttu-id="20527-189">Счетчики и запросы</span><span class="sxs-lookup"><span data-stu-id="20527-189">Counters and Queries</span></span>](counters-and-queries.md)
* [<span data-ttu-id="20527-190">Пошаговые инструкции по запросам затенения</span><span class="sxs-lookup"><span data-stu-id="20527-190">Predication queries walk-through</span></span>](predication-queries.md)
