---
description: Компонент Windows Imaging Component (WIC) был обновлен с учетом новых выпусков Windows. В этом разделе приведены краткие сведения о новых функциях.
ms.assetid: 710B71CE-6FCC-46DA-A65C-6E4FC6A04275
title: Новые возможности WIC
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 84b8b3783ac2fd8ef6a971f785cec80f868a6b80
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105703266"
---
# <a name="whats-new-in-wic"></a><span data-ttu-id="9dc30-104">Новые возможности WIC</span><span class="sxs-lookup"><span data-stu-id="9dc30-104">What's New in WIC</span></span>

<span data-ttu-id="9dc30-105">Компонент Windows Imaging Component (WIC) был обновлен с учетом новых выпусков Windows.</span><span class="sxs-lookup"><span data-stu-id="9dc30-105">Windows Imaging Component (WIC) has been updated with new releases of Windows.</span></span> <span data-ttu-id="9dc30-106">В этом разделе приведены краткие сведения о новых функциях.</span><span class="sxs-lookup"><span data-stu-id="9dc30-106">This topic provides a quick introduction to these new features.</span></span>

## <a name="whats-new-for-windows-10-version-1507"></a><span data-ttu-id="9dc30-107">Новые возможности Windows 10, версия 1507</span><span class="sxs-lookup"><span data-stu-id="9dc30-107">What's new for Windows 10, version 1507</span></span>

### <a name="access-to-low-level-jpeg-data-for-wic-decoding-and-encoding"></a><span data-ttu-id="9dc30-108">Доступ к данным низкого уровня JPEG для декодирования и кодирования WIC</span><span class="sxs-lookup"><span data-stu-id="9dc30-108">Access to low level JPEG data for WIC decoding and encoding</span></span>

<span data-ttu-id="9dc30-109">Начиная с Windows 10 версии 1507, WIC предоставляет доступ к структурам данных низкого уровня JPEG, включая таблицы Хаффмана и дискретизация.</span><span class="sxs-lookup"><span data-stu-id="9dc30-109">Starting in Windows 10, version 1507, WIC provides access to low level JPEG data structures, including Huffman and quantization tables.</span></span> <span data-ttu-id="9dc30-110">Дополнительные сведения см. в следующих разделах:</span><span class="sxs-lookup"><span data-stu-id="9dc30-110">For more information, see the following topics:</span></span>

-   <span data-ttu-id="9dc30-111">Интерфейс [**ивикжпегфрамедекоде**](/windows/win32/api/Wincodec/nn-wincodec-iwicjpegframedecode)</span><span class="sxs-lookup"><span data-stu-id="9dc30-111">[**IWICJpegFrameDecode**](/windows/win32/api/Wincodec/nn-wincodec-iwicjpegframedecode) interface</span></span>
-   <span data-ttu-id="9dc30-112">Интерфейс [**ивикжпегфраминкоде**](/windows/win32/api/Wincodec/nn-wincodec-iwicjpegframeencode)</span><span class="sxs-lookup"><span data-stu-id="9dc30-112">[**IWICJpegFrameEncode**](/windows/win32/api/Wincodec/nn-wincodec-iwicjpegframeencode) interface</span></span>

### <a name="jpeg-indexing"></a><span data-ttu-id="9dc30-113">Индексация JPEG</span><span class="sxs-lookup"><span data-stu-id="9dc30-113">JPEG indexing</span></span>

<span data-ttu-id="9dc30-114">Индексирование JPEG — это методика, которая значительно повышает производительность случайного доступа к небольшим областям большого изображения JPEG за счет дополнительного использования памяти.</span><span class="sxs-lookup"><span data-stu-id="9dc30-114">JPEG indexing is a technique that significantly improves the performance of randomly accessing small sub regions of a large JPEG image, at the cost of some additional memory usage.</span></span> <span data-ttu-id="9dc30-115">Индексирование JPEG можно использовать любым вызывающим объектом WIC.</span><span class="sxs-lookup"><span data-stu-id="9dc30-115">JPEG indexing can be leveraged by any caller of WIC.</span></span>

<span data-ttu-id="9dc30-116">Интерфейс [**ID2D1ImageSourceFromWic**](/windows/win32/api/d2d1_3/nn-d2d1_3-id2d1imagesourcefromwic) предназначен для использования ИНДЕКСИРОВАНия JPEG, если он включен.</span><span class="sxs-lookup"><span data-stu-id="9dc30-116">The [**ID2D1ImageSourceFromWic**](/windows/win32/api/d2d1_3/nn-d2d1_3-id2d1imagesourcefromwic) interface is designed to leverage JPEG indexing if it is turned on.</span></span> <span data-ttu-id="9dc30-117">Например, API ID2D1ImageSource будет запрашивать только необходимые разделы изображения в таком сценарии, как Pan и Zoom для изображения большого разрешения.</span><span class="sxs-lookup"><span data-stu-id="9dc30-117">For example, the ID2D1ImageSource API will only request the needed sections of the image in a scenario such as pan and zoom for a large resolution image.</span></span> <span data-ttu-id="9dc30-118">Дополнительные сведения см. в следующих разделах:</span><span class="sxs-lookup"><span data-stu-id="9dc30-118">For more information, see the following topics:</span></span>

-   <span data-ttu-id="9dc30-119">Метод [**ивикжпегфрамедекоде:: сетиндексинг**](/windows/win32/api/Wincodec/nf-wincodec-iwicjpegframedecode-setindexing)</span><span class="sxs-lookup"><span data-stu-id="9dc30-119">[**IWICJpegFrameDecode::SetIndexing**](/windows/win32/api/Wincodec/nf-wincodec-iwicjpegframedecode-setindexing) method</span></span>
-   <span data-ttu-id="9dc30-120">Интерфейс [**ID2D1ImageSourceFromWic**](/windows/win32/api/d2d1_3/nn-d2d1_3-id2d1imagesourcefromwic)</span><span class="sxs-lookup"><span data-stu-id="9dc30-120">[**ID2D1ImageSourceFromWic**](/windows/win32/api/d2d1_3/nn-d2d1_3-id2d1imagesourcefromwic) interface</span></span>

## <a name="whats-new-for-windows-81"></a><span data-ttu-id="9dc30-121">Новые возможности для Windows 8.1</span><span class="sxs-lookup"><span data-stu-id="9dc30-121">What's new for Windows 8.1</span></span>

### <a name="support-for-jpeg-ycbcr-images"></a><span data-ttu-id="9dc30-122">Поддержка изображений JPEG Икбкр</span><span class="sxs-lookup"><span data-stu-id="9dc30-122">Support for JPEG YCbCr images</span></span>

<span data-ttu-id="9dc30-123">Начиная с Windows 8.1, компонент WIC обеспечивает поддержку декодирования, преобразования и кодирования данных изображения в формате JPEG И'кбкр в собственном формате.</span><span class="sxs-lookup"><span data-stu-id="9dc30-123">Starting in Windows 8.1, WIC provides support for decoding, transforming and encoding JPEG Y'CbCr image data in its native format.</span></span> <span data-ttu-id="9dc30-124">Это позволяет приложениям значительно сократить время обработки и потребление памяти для определенных операций с образами при работе с JPEG с кодировкой И'кбкр.</span><span class="sxs-lookup"><span data-stu-id="9dc30-124">This allows apps to significantly decrease processing time and memory consumption for certain imaging operations when working with Y'CbCr encoded JPEGs.</span></span> <span data-ttu-id="9dc30-125">Дополнительные сведения см. в следующих разделах:</span><span class="sxs-lookup"><span data-stu-id="9dc30-125">For more information, see the following topics:</span></span>

-   <span data-ttu-id="9dc30-126">[Direct2D](-wic-sample-d2d-viewer.md)[икбкр](../direct2d/ycbcr-effect.md)</span><span class="sxs-lookup"><span data-stu-id="9dc30-126">[Direct2D](-wic-sample-d2d-viewer.md)[YCbCr effect](../direct2d/ycbcr-effect.md)</span></span>
-   <span data-ttu-id="9dc30-127">Интерфейс [**ивикпланарбитмапсаурцетрансформ**](/windows/win32/api/Wincodec/nn-wincodec-iwicplanarbitmapsourcetransform)</span><span class="sxs-lookup"><span data-stu-id="9dc30-127">[**IWICPlanarBitmapSourceTransform**](/windows/win32/api/Wincodec/nn-wincodec-iwicplanarbitmapsourcetransform) interface</span></span>
-   <span data-ttu-id="9dc30-128">Интерфейс [**ивикпланарбитмапфраминкоде**](/windows/win32/api/Wincodec/nn-wincodec-iwicplanarbitmapframeencode)</span><span class="sxs-lookup"><span data-stu-id="9dc30-128">[**IWICPlanarBitmapFrameEncode**](/windows/win32/api/Wincodec/nn-wincodec-iwicplanarbitmapframeencode) interface</span></span>

### <a name="support-for-block-compressed-formats-dds-files"></a><span data-ttu-id="9dc30-129">Поддержка блочных сжатых форматов (файлы DDS)</span><span class="sxs-lookup"><span data-stu-id="9dc30-129">Support for block compressed formats (DDS files)</span></span>

<span data-ttu-id="9dc30-130">Начиная с Windows 8.1, WIC добавляет новый кодек, поддерживающий образы DDS, закодированные в следующих форматах: в \_ формате DXGI \_ BC1 \_ UNORM, в \_ формате DXGI \_ BC2 \_ UNORM и в \_ формате DXGI \_ BC3 \_ UNORM.</span><span class="sxs-lookup"><span data-stu-id="9dc30-130">Starting in Windows 8.1, WIC adds a new codec that supports DDS images encoded in the following formats: DXGI\_FORMAT\_BC1\_UNORM, DXGI\_FORMAT\_BC2\_UNORM, and DXGI\_FORMAT\_BC3\_UNORM.</span></span> <span data-ttu-id="9dc30-131">Доступ к сжатым данным блока DDS может осуществляться в декодированной форме с помощью стандартных интерфейсов WIC или напрямую обращаться к ним с помощью новых интерфейсов DDS.</span><span class="sxs-lookup"><span data-stu-id="9dc30-131">DDS block compressed data can be accessed in a decoded form using standard WIC interfaces, or directly accessed using new DDS specific interfaces.</span></span> <span data-ttu-id="9dc30-132">Дополнительные сведения см. в следующих разделах:</span><span class="sxs-lookup"><span data-stu-id="9dc30-132">For more information, see the following topics:</span></span>

-   <span data-ttu-id="9dc30-133">Интерфейс [**ивикддсдекодер**](/windows/win32/api/Wincodec/nn-wincodec-iwicddsdecoder)</span><span class="sxs-lookup"><span data-stu-id="9dc30-133">[**IWICDdsDecoder**](/windows/win32/api/Wincodec/nn-wincodec-iwicddsdecoder) interface</span></span>
-   <span data-ttu-id="9dc30-134">Интерфейс [**ивикддсенкодер**](/windows/win32/api/Wincodec/nn-wincodec-iwicddsencoder)</span><span class="sxs-lookup"><span data-stu-id="9dc30-134">[**IWICDdsEncoder**](/windows/win32/api/Wincodec/nn-wincodec-iwicddsencoder) interface</span></span>

## <a name="whats-new-for-windows-8"></a><span data-ttu-id="9dc30-135">Новые возможности Windows 8</span><span class="sxs-lookup"><span data-stu-id="9dc30-135">What's new for Windows 8</span></span>

<span data-ttu-id="9dc30-136">В Windows 8 компонент WIC обновлен с помощью нескольких новых функций.</span><span class="sxs-lookup"><span data-stu-id="9dc30-136">In Windows 8, WIC has been updated with several new features.</span></span> <span data-ttu-id="9dc30-137">Обновленная версия WIC также доступна в Windows 7 и Windows Server 2008 R2 через [обновление платформы для Windows 7](../direct3darticles/platform-update-for-windows-7.md), которое доступно в [обновлении платформы для Windows 7](https://support.microsoft.com/kb/2670838).</span><span class="sxs-lookup"><span data-stu-id="9dc30-137">The updated version of WIC is also available on Windows 7 and Windows Server 2008 R2 via the [Platform Update for Windows 7](../direct3darticles/platform-update-for-windows-7.md), which is available through the [Platform Update for Windows 7](https://support.microsoft.com/kb/2670838).</span></span>

### <a name="improved-direct2d-integration"></a><span data-ttu-id="9dc30-138">Улучшенная интеграция Direct2D</span><span class="sxs-lookup"><span data-stu-id="9dc30-138">Improved Direct2D integration</span></span>

<span data-ttu-id="9dc30-139">WIC в Windows 8 предоставляет эти API для улучшения интеграции Direct2D с WIC:</span><span class="sxs-lookup"><span data-stu-id="9dc30-139">WIC in Windows 8 provides these APIs to improve Direct2D integration with WIC:</span></span>

-   <span data-ttu-id="9dc30-140">[**ИвиЦимажеенкодер**](/windows/win32/api/Wincodec/nn-wincodec-iwicimageencoder) — новый интерфейс, который может кодировать содержимое Direct2D [**ID2D1Image**](/windows/win32/api/d2d1/nn-d2d1-id2d1image) в [ивикбитмапфраминкоде](-wic-imp-iwicbitmapframeencode.md).</span><span class="sxs-lookup"><span data-stu-id="9dc30-140">[**IWICImageEncoder**](/windows/win32/api/Wincodec/nn-wincodec-iwicimageencoder) - A new interface which can encode Direct2D [**ID2D1Image**](/windows/win32/api/d2d1/nn-d2d1-id2d1image) content to an [IWICBitmapFrameEncode](-wic-imp-iwicbitmapframeencode.md).</span></span> <span data-ttu-id="9dc30-141">Методы этого интерфейса принимают указатель на [**виЦимажепараметерс**](/windows/win32/api/Wincodec/ns-wincodec-wicimageparameters), который является параметрами для управления кодировкой.</span><span class="sxs-lookup"><span data-stu-id="9dc30-141">The methods of this interface take a pointer to [**WICImageParameters**](/windows/win32/api/Wincodec/ns-wincodec-wicimageparameters), which are parameters to control encoding.</span></span>
-   <span data-ttu-id="9dc30-142">[**IWICImagingFactory2**](/windows/win32/api/Wincodec/nn-wincodec-iwicimagingfactory2) — новая фабрика WIC с помощью метода [**креатеимажеенкодер**](/windows/win32/api/Wincodec/nf-wincodec-iwicimagingfactory2-createimageencoder) .</span><span class="sxs-lookup"><span data-stu-id="9dc30-142">[**IWICImagingFactory2**](/windows/win32/api/Wincodec/nn-wincodec-iwicimagingfactory2) - New WIC factory with the [**CreateImageEncoder**](/windows/win32/api/Wincodec/nf-wincodec-iwicimagingfactory2-createimageencoder) method.</span></span> <span data-ttu-id="9dc30-143">Этот интерфейс наследуется от исходной фабрики WIC, [**IWICImagingFactory**](/windows/win32/api/Wincodec/nn-wincodec-iwicimagingfactory)и создается таким же образом.</span><span class="sxs-lookup"><span data-stu-id="9dc30-143">This interface inherits from the original WIC factory, [**IWICImagingFactory**](/windows/win32/api/Wincodec/nn-wincodec-iwicimagingfactory), and is created the same way.</span></span>

### <a name="changes-to-bmp-codec-alpha-support"></a><span data-ttu-id="9dc30-144">Изменения в поддержке кодека BMP Alpha</span><span class="sxs-lookup"><span data-stu-id="9dc30-144">Changes to BMP codec alpha support</span></span>

<span data-ttu-id="9dc30-145">Компонент WIC в Windows 8 поддерживает загрузку файлов образа [**BITMAPV5HEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapv5header) в виде образов в формате [WICPixelFormat32bppBGRA](-wic-codec-native-pixel-formats.md).</span><span class="sxs-lookup"><span data-stu-id="9dc30-145">WIC in Windows 8 supports loading [**BITMAPV5HEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapv5header) image files as [WICPixelFormat32bppBGRA](-wic-codec-native-pixel-formats.md)-formatted images.</span></span> <span data-ttu-id="9dc30-146">Кроме того, кодировщик BMP поддерживает новый логический параметр кодировщика «EnableV5Header32bppBGRA», который указывает кодировщику записать **BITMAPV5HEADER** с данными изображения 32bppBGRA.</span><span class="sxs-lookup"><span data-stu-id="9dc30-146">In addition, the BMP encoder supports a new Boolean ,encoder option "EnableV5Header32bppBGRA", which instructs the encoder to write a **BITMAPV5HEADER** with the 32bppBGRA image data.</span></span>

<span data-ttu-id="9dc30-147">Дополнительные сведения о форматах BMP см. в разделе [Общие сведения о формате BMP](bmp-format-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9dc30-147">For more info about BMP formats, see [BMP Format Overview](bmp-format-overview.md).</span></span>

### <a name="new-pixel-formats"></a><span data-ttu-id="9dc30-148">Новые форматы пикселей</span><span class="sxs-lookup"><span data-stu-id="9dc30-148">New pixel formats</span></span>

<span data-ttu-id="9dc30-149">Компонент WIC в Windows 8 определяет следующие новые форматы пикселей:</span><span class="sxs-lookup"><span data-stu-id="9dc30-149">WIC in Windows 8 defines these new pixel formats:</span></span>

-   <span data-ttu-id="9dc30-150">GUID \_ WICPixelFormat32bppRGB</span><span class="sxs-lookup"><span data-stu-id="9dc30-150">GUID\_WICPixelFormat32bppRGB</span></span>
-   <span data-ttu-id="9dc30-151">GUID \_ WICPixelFormat64bppRGB</span><span class="sxs-lookup"><span data-stu-id="9dc30-151">GUID\_WICPixelFormat64bppRGB</span></span>
-   <span data-ttu-id="9dc30-152">GUID \_ WICPixelFormat96bppRGBFloat</span><span class="sxs-lookup"><span data-stu-id="9dc30-152">GUID\_WICPixelFormat96bppRGBFloat</span></span>
-   <span data-ttu-id="9dc30-153">GUID \_ WICPixelFormat64bppPRGBAHalf</span><span class="sxs-lookup"><span data-stu-id="9dc30-153">GUID\_WICPixelFormat64bppPRGBAHalf</span></span>

> [!Note]  
> <span data-ttu-id="9dc30-154">Встроенный кодек TIFF возвратит \_ данные WICPIXELFORMAT96BPPRGBFLOAT GUID.</span><span class="sxs-lookup"><span data-stu-id="9dc30-154">The TIFF built-in codec will return GUID\_WICPixelFormat96bppRGBFloat data.</span></span> <span data-ttu-id="9dc30-155">Другие три формата не используются встроенными кодеками.</span><span class="sxs-lookup"><span data-stu-id="9dc30-155">The other three formats are not used by built-in codecs.</span></span>

 

### <a name="restrictions-to-component-extensibility-in-appcontainer"></a><span data-ttu-id="9dc30-156">Ограничения для расширяемости компонентов в AppContainer</span><span class="sxs-lookup"><span data-stu-id="9dc30-156">Restrictions to component extensibility in AppContainer</span></span>

<span data-ttu-id="9dc30-157">При работе в процессе AppContainer, который включает все приложения Магазина Windows, компонент WIC использует только компоненты, предоставляемые Windows, независимо от того, установлены ли в системе дополнительные компоненты.</span><span class="sxs-lookup"><span data-stu-id="9dc30-157">When running in an AppContainer process, which includes all Windows Store apps, WIC will only use Windows-provided components, regardless of whether additional components are installed on the system.</span></span> <span data-ttu-id="9dc30-158">Приложение, которое не выполняется в AppContainer, не затрагивается.</span><span class="sxs-lookup"><span data-stu-id="9dc30-158">App that are not running in AppContainer are not affected.</span></span>

<span data-ttu-id="9dc30-159">Приложениям не нужно вносить изменения в код для выполнения в Аппконтаинжер, но параметры флага [**виккомпонентенумератеоптионс**](/windows/win32/api/Wincodec/ne-wincodec-wiccomponentenumerateoptions) и идентификатора GUID поставщика не будут действовать.</span><span class="sxs-lookup"><span data-stu-id="9dc30-159">Apps don't need to make any code changes to run in an AppContainger, but the [**WICComponentEnumerateOptions**](/windows/win32/api/Wincodec/ne-wincodec-wiccomponentenumerateoptions) flag and vendor GUID parameters will have no effect.</span></span> <span data-ttu-id="9dc30-160">Компоненту WIC не удастся загрузить изображение, если его нельзя декодировать с помощью кодека, предоставленного Windows, и вызов метода [**креатекомпонентенумератор**](/windows/win32/api/Wincodec/nf-wincodec-iwicimagingfactory-createcomponentenumerator) будет возвращать только предоставляемые Windows компоненты.</span><span class="sxs-lookup"><span data-stu-id="9dc30-160">WIC will fail to load an image if it cannot be decoded by a Windows provided codec, and calling the [**CreateComponentEnumerator**](/windows/win32/api/Wincodec/nf-wincodec-iwicimagingfactory-createcomponentenumerator) method will only return Windows provided components.</span></span>

### <a name="changes-to-clsid_wicpngdecoder-and-png-decoder-color-context-support"></a><span data-ttu-id="9dc30-161">Изменения в \_ поддержке контекста цвета декодера викпнгдекодер и PNG</span><span class="sxs-lookup"><span data-stu-id="9dc30-161">Changes to CLSID\_WICPngDecoder and PNG decoder color context support</span></span>

<span data-ttu-id="9dc30-162">**Идентификатор CLSID \_ WICPngDecoder1** был добавлен с тем же GUID, что и **CLSID \_ викпнгдекодер**, и добавлен **CLSID \_ WICPngDecoder2** .</span><span class="sxs-lookup"><span data-stu-id="9dc30-162">**CLSID\_WICPngDecoder1** has been added with the same GUID as **CLSID\_WICPngDecoder**, and **CLSID\_WICPngDecoder2** has been added.</span></span>

<span data-ttu-id="9dc30-163">При компиляции с помощью пакета SDK для Windows 8 **CLSID \_ викпнгдекодер** \# определяется как **CLSID \_ WICPngDecoder2** для продвижения новых скомпилированных приложений с использованием нового поведения декодера PNG.</span><span class="sxs-lookup"><span data-stu-id="9dc30-163">When compiled against the Windows 8 SDK, **CLSID\_WICPngDecoder** is \#defined to **CLSID\_WICPngDecoder2** to promote newly compiled apps using the new PNG decoder behavior.</span></span> <span data-ttu-id="9dc30-164">Приложения должны продолжать указывать **CLSID \_ викпнгдекодер**.</span><span class="sxs-lookup"><span data-stu-id="9dc30-164">Apps should continue to specify **CLSID\_WICPngDecoder**.</span></span>

<span data-ttu-id="9dc30-165">Указание **CLSID \_ WICPngDecoder2** создаст версию декодера PNG для WIC, который создаст [**Ивикколорконтекст**](/windows/win32/api/Wincodec/nn-wincodec-iwiccolorcontext) из фрагментов ЧРМ и Гама.</span><span class="sxs-lookup"><span data-stu-id="9dc30-165">Specifying **CLSID\_WICPngDecoder2** will create a version of the WIC PNG decoder that will generate an [**IWICColorContext**](/windows/win32/api/Wincodec/nn-wincodec-iwiccolorcontext) from cHRM and gAMA chunks.</span></span> <span data-ttu-id="9dc30-166">Это позволяет использовать эти метаданные цветового пространства с другими API-интерфейсами Windows для управления цветом исходного изображения.</span><span class="sxs-lookup"><span data-stu-id="9dc30-166">This allows this color space metadata to be used with other Windows APIs for color managing the source image.</span></span> <span data-ttu-id="9dc30-167">**Ивикколорконтекст** не создается из фрагментов Гама и ЧРМ, если имеется блок иккп, если имеется фрагмент sRGB или если фрагменты Гама и ЧРМ указывают цветовое пространство sRGB.</span><span class="sxs-lookup"><span data-stu-id="9dc30-167">An **IWICColorContext** is not generated from the gAMA and cHRM chunks if an iCCP chunk is present, if an sRGB chunk is present, or if the gAMA and cHRM chunks indicate an sRGB color space.</span></span>

<span data-ttu-id="9dc30-168">Приложение может указать **CLSID \_ WICPngDecoder1** , чтобы создать версию декодера PNG для WIC, который не создает [**Ивикколорконтекст**](/windows/win32/api/Wincodec/nn-wincodec-iwiccolorcontext) из фрагментов Гама и ЧРМ.</span><span class="sxs-lookup"><span data-stu-id="9dc30-168">An app can specify **CLSID\_WICPngDecoder1** to create a version of the WIC PNG decoder that does not generate an [**IWICColorContext**](/windows/win32/api/Wincodec/nn-wincodec-iwiccolorcontext) from the gAMA and cHRM chunks.</span></span> <span data-ttu-id="9dc30-169">Это соответствует поведению декодера PNG в предыдущих версиях Windows.</span><span class="sxs-lookup"><span data-stu-id="9dc30-169">This matches the behavior of the PNG decoder in previous versions of Windows.</span></span>

### <a name="changes-to-wincodec_sdk_version"></a><span data-ttu-id="9dc30-170">Изменения в \_ версии пакета SDK для винкодек \_</span><span class="sxs-lookup"><span data-stu-id="9dc30-170">Changes to WINCODEC\_SDK\_VERSION</span></span>

<span data-ttu-id="9dc30-171">При компиляции для пакета SDK для Windows 8 **\_ \_ версия пакета SDK для Винкодек** \# определяется как **винкодек \_ SDK \_ версия2** для продвижения новых скомпилированных приложений с помощью нового поведения декодера PNG.</span><span class="sxs-lookup"><span data-stu-id="9dc30-171">When compiled against the Windows 8 SDK, **WINCODEC\_SDK\_VERSION** is \#defined to **WINCODEC\_SDK\_VERSION2** to promote newly compiled apps using the new PNG decoder behavior.</span></span> <span data-ttu-id="9dc30-172">В противном случае он \# определяется как **винкодек \_ SDK \_ версии 1**.</span><span class="sxs-lookup"><span data-stu-id="9dc30-172">Otherwise, it is \#defined to **WINCODEC\_SDK\_VERSION1**.</span></span> <span data-ttu-id="9dc30-173">Приложения должны продолжать указывать **\_ \_ версию пакета SDK для винкодек**.</span><span class="sxs-lookup"><span data-stu-id="9dc30-173">Apps should continue to specify **WINCODEC\_SDK\_VERSION**.</span></span>

<span data-ttu-id="9dc30-174">Указание **\_ \_ версии пакета SDK винкодек** при вызове [**\_ прокси-сервера виккреатеимагингфактори**](-wic-codec-wiccreateimagingfactory-proxy.md) для создания фабрики изображений вызывает создание **CLSID \_ WICPngDecoder2** вместо **CLSID \_ WICPngDecoder1** из метода [**креатедекодер**](/windows/win32/api/Wincodec/nf-wincodec-iwicimagingfactory-createdecoder) и его вариантов.</span><span class="sxs-lookup"><span data-stu-id="9dc30-174">Specifying **WINCODEC\_SDK\_VERSION** when calling [**WICCreateImagingFactory\_Proxy**](-wic-codec-wiccreateimagingfactory-proxy.md) to create the imaging factory causes **CLSID\_WICPngDecoder2** to be created instead of **CLSID\_WICPngDecoder1** from the [**CreateDecoder**](/windows/win32/api/Wincodec/nf-wincodec-iwicimagingfactory-createdecoder) method and its variants.</span></span> <span data-ttu-id="9dc30-175">Кроме того, перечислитель компонента декодера будет возвращать сведения о компоненте **\_ WICPngDecoder2 CLSID** , но не сведения о **\_ WICPngDecoder1 CLSID** .</span><span class="sxs-lookup"><span data-stu-id="9dc30-175">Also, a decoder component info enumerator will return **CLSID\_WICPngDecoder2** component info, but not **CLSID\_WICPngDecoder1** info.</span></span>

<span data-ttu-id="9dc30-176">Указание **винкодек \_ SDK \_ версии 1** приведет к тому, что вместо **CLSID \_ WICPngDecoder2** в указанных выше случаях будет использоваться **CLSID \_ WICPngDecoder1** .</span><span class="sxs-lookup"><span data-stu-id="9dc30-176">Specifying **WINCODEC\_SDK\_VERSION1** will cause **CLSID\_WICPngDecoder1** to be used instead of **CLSID\_WICPngDecoder2** in the above cases.</span></span>

### <a name="changes-to-clsid_wicimagingfactory"></a><span data-ttu-id="9dc30-177">Изменения в CLSID \_ виЦимагингфактори</span><span class="sxs-lookup"><span data-stu-id="9dc30-177">Changes to CLSID\_WICImagingFactory</span></span>

<span data-ttu-id="9dc30-178">**Идентификатор CLSID \_ WICImagingFactory1** был добавлен с тем же GUID, что и **CLSID \_ виЦимагингфактори**, и добавлен **CLSID \_ WICImagingFactory2** .</span><span class="sxs-lookup"><span data-stu-id="9dc30-178">**CLSID\_WICImagingFactory1** has been added with the same GUID as **CLSID\_WICImagingFactory**, and **CLSID\_WICImagingFactory2** has been added.</span></span>

<span data-ttu-id="9dc30-179">При компиляции с помощью пакета SDK для Windows 8 **CLSID \_ виЦимагингфактори** \# определяется как **CLSID \_ WICImagingFactory2** для продвижения новых скомпилированных приложений с использованием нового поведения декодера PNG.</span><span class="sxs-lookup"><span data-stu-id="9dc30-179">When compiled against the Windows 8 SDK, **CLSID\_WICImagingFactory** is \#defined to **CLSID\_WICImagingFactory2** to promote newly compiled apps using the new PNG decoder behavior.</span></span> <span data-ttu-id="9dc30-180">Приложения должны продолжать указывать **CLSID \_ виЦимагингфактори**.</span><span class="sxs-lookup"><span data-stu-id="9dc30-180">Apps should continue to specify **CLSID\_WICImagingFactory**.</span></span>

<span data-ttu-id="9dc30-181">Указание **CLSID \_ WICImagingFactory2** при вызове [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance) для создания фабрики изображений приводит к **созданию \_ WICPngDecoder2 CLSID** вместо **CLSID \_ WICPngDecoder1** из метода [**креатедекодер**](/windows/win32/api/Wincodec/nf-wincodec-iwicimagingfactory-createdecoder) и его вариантов.</span><span class="sxs-lookup"><span data-stu-id="9dc30-181">Specifying **CLSID\_WICImagingFactory2** when calling [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance) to create the imaging factory causes **CLSID\_WICPngDecoder2** to be created instead of **CLSID\_WICPngDecoder1** from the [**CreateDecoder**](/windows/win32/api/Wincodec/nf-wincodec-iwicimagingfactory-createdecoder) method and its variants.</span></span> <span data-ttu-id="9dc30-182">Кроме того, перечислитель компонента декодера будет возвращать сведения о компоненте **\_ WICPngDecoder2 CLSID** , но не сведения о **\_ WICPngDecoder1 CLSID** .</span><span class="sxs-lookup"><span data-stu-id="9dc30-182">Also, a decoder component info enumerator will return **CLSID\_WICPngDecoder2** component info, but not **CLSID\_WICPngDecoder1** info.</span></span>

<span data-ttu-id="9dc30-183">Указание **CLSID \_ WICImagingFactory1** приведет к тому, что в приведенных выше случаях будет использоваться **CLSID \_ WICPngDecoder1** , а не **\_ WICPngDecoder2 CLSID** .</span><span class="sxs-lookup"><span data-stu-id="9dc30-183">Specifying **CLSID\_WICImagingFactory1** will cause **CLSID\_WICPngDecoder1** to be used instead of **CLSID\_WICPngDecoder2** in the above cases.</span></span>

## <a name="whats-new-for-windows-7"></a><span data-ttu-id="9dc30-184">Новые возможности Windows 7</span><span class="sxs-lookup"><span data-stu-id="9dc30-184">What's new for Windows 7</span></span>

<span data-ttu-id="9dc30-185">В Windows 7 компонент WIC обновлен с помощью нескольких новых функций.</span><span class="sxs-lookup"><span data-stu-id="9dc30-185">In Windows 7, WIC has been updated with several new features.</span></span> <span data-ttu-id="9dc30-186">В этом разделе приведены краткие сведения о новых функциях.</span><span class="sxs-lookup"><span data-stu-id="9dc30-186">This topic provides a quick introduction to these new features.</span></span>

### <a name="updates-to-the-tiff-codec"></a><span data-ttu-id="9dc30-187">Обновления для кодека TIFF</span><span class="sxs-lookup"><span data-stu-id="9dc30-187">Updates to the TIFF Codec</span></span>

<span data-ttu-id="9dc30-188">Кодек WIC TIFF был обновлен для Windows 7 для поддержки нескольких функций, которые не поддерживаются в предыдущей версии WIC.</span><span class="sxs-lookup"><span data-stu-id="9dc30-188">The WIC TIFF codec has been updated for Windows 7 to support several features not supported by the previous version of WIC.</span></span>

-   <span data-ttu-id="9dc30-189">Поддержка больших TIFF-файлов.</span><span class="sxs-lookup"><span data-stu-id="9dc30-189">Support for large TIFF files.</span></span>
-   <span data-ttu-id="9dc30-190">Декодирование мозаичных изображений TIFF.</span><span class="sxs-lookup"><span data-stu-id="9dc30-190">Decode tiled TIFF images.</span></span>
-   <span data-ttu-id="9dc30-191">Декодирование плоских (плоских) изображений TIFF.</span><span class="sxs-lookup"><span data-stu-id="9dc30-191">Decode flat (planar) TIFF images.</span></span>
-   <span data-ttu-id="9dc30-192">Декодирование изображений TIFF в кодировке JPEG.</span><span class="sxs-lookup"><span data-stu-id="9dc30-192">Decode JPEG encoded TIFF images.</span></span>

### <a name="progressive-decoding"></a><span data-ttu-id="9dc30-193">Прогрессивное декодирование</span><span class="sxs-lookup"><span data-stu-id="9dc30-193">Progressive Decoding</span></span>

<span data-ttu-id="9dc30-194">Прогрессивное декодирование обеспечивает возможность постепенного декодирования и отрисовки фрагментов изображения до завершения загрузки всего изображения.</span><span class="sxs-lookup"><span data-stu-id="9dc30-194">Progressive decoding provides the ability to incrementally decode and render portions of an image before the entire image has finished downloading.</span></span> <span data-ttu-id="9dc30-195">Эта функция значительно улучшает взаимодействие с пользователем при просмотре изображений из Интернета, поскольку пользователю не нужно ждать загрузки всего образа перед началом декодирования.</span><span class="sxs-lookup"><span data-stu-id="9dc30-195">This feature greatly improves the user experience when viewing images from the Internet, because the user does not have to wait for the entire image to download before decoding can begin.</span></span> <span data-ttu-id="9dc30-196">При прогрессивном декодировании пользователи могут видеть предварительный просмотр образа с доступными данными до загрузки всего образа.</span><span class="sxs-lookup"><span data-stu-id="9dc30-196">With progressive decoding, users are able to see an image preview with available data long before the entire image is downloaded.</span></span> <span data-ttu-id="9dc30-197">Эта функция необходима для любого приложения, используемого для просмотра изображений из Интернета или из источников данных с ограниченной пропускной способностью.</span><span class="sxs-lookup"><span data-stu-id="9dc30-197">This feature is essential for any application used to view images from the Internet or from data sources with limited bandwidth.</span></span>

<span data-ttu-id="9dc30-198">Дополнительные сведения см. в разделе [Обзор прогрессивного декодирования](-wic-progressive-decoding.md).</span><span class="sxs-lookup"><span data-stu-id="9dc30-198">For more information, see the [Progressive Decoding Overview](-wic-progressive-decoding.md).</span></span>

### <a name="extended-metadata-support-for-jpeg-png-and-gif"></a><span data-ttu-id="9dc30-199">Поддержка расширенных метаданных для JPEG, PNG и GIF</span><span class="sxs-lookup"><span data-stu-id="9dc30-199">Extended Metadata Support for JPEG, PNG, and GIF</span></span>

<span data-ttu-id="9dc30-200">В Windows 7 компонент WIC расширил поддержку метаданных для изображений JPEG, PNG и GIF.</span><span class="sxs-lookup"><span data-stu-id="9dc30-200">In Windows 7, WIC has extended its metadata support for JPEG, PNG, and GIF images.</span></span>

-   <span data-ttu-id="9dc30-201">Добавлена поддержка анимированных свойств GIF и GIF.</span><span class="sxs-lookup"><span data-stu-id="9dc30-201">Added support for animated GIF and GIF properties.</span></span>
-   <span data-ttu-id="9dc30-202">Расширенные обработчики метаданных JPG для поддержки метаданных чроминанце, светимости и комментариев.</span><span class="sxs-lookup"><span data-stu-id="9dc30-202">Expanded JPG metadata handlers to support chrominance, luminance, and comment metadata.</span></span>
-   <span data-ttu-id="9dc30-203">Расширенные обработчики метаданных PNG для поддержки метаданных tIME, sRGB, Иккп, Хист, ЧРМ, Иткст, Бкгд и Гама.</span><span class="sxs-lookup"><span data-stu-id="9dc30-203">Expanded PNG metadata handlers to support tIME, sRGB, iCCP, hIST, cHRM, iTXt, bKGD, and gAMA metadata.</span></span>
-   <span data-ttu-id="9dc30-204">Добавлены новые обработчики метаданных 8BIM для метаданных Ресолутионинфо и метаданных хэша IPTC.</span><span class="sxs-lookup"><span data-stu-id="9dc30-204">Added new 8BIM metadata handlers for ResolutionInfo metadata and IPTC digest metadata.</span></span>
-   <span data-ttu-id="9dc30-205">Добавлены новые обработчики метаданных для логического дескриптора экрана (LSD), дескриптора изображения (ИМД), расширений графического элемента управления (GCE) и метаданных расширений приложения (ФИГУРУ).</span><span class="sxs-lookup"><span data-stu-id="9dc30-205">Added new metadata handlers for Logical Screen Descriptor (LSD), Image Descriptor (IMD), Graphic Control Extensions (GCE), and Application Extensions (APE) metadata.</span></span>
-   <span data-ttu-id="9dc30-206">Поддержка метаданных, охватывающих блоки Аппн.</span><span class="sxs-lookup"><span data-stu-id="9dc30-206">Support for metadata that spans APPn blocks.</span></span>

### <a name="multi-threaded-apartment-support"></a><span data-ttu-id="9dc30-207">Поддержка многопоточного апартамента</span><span class="sxs-lookup"><span data-stu-id="9dc30-207">Multi Threaded Apartment Support</span></span>

<span data-ttu-id="9dc30-208">Объекты в многопоточном апартаменте (MTA) могут вызываться параллельно любым числом потоков в MTA, что позволяет повысить производительность многоядерных систем и определенных серверных сценариев.</span><span class="sxs-lookup"><span data-stu-id="9dc30-208">Objects within a multithreaded apartment (MTA) may be called concurrently by any number of threads within the MTA, allowing for better performance on multicore systems and certain server scenarios.</span></span> <span data-ttu-id="9dc30-209">Кроме того, кодеки WIC, действующие в MTA, могут вызывать другие объекты, которые находятся в потоке MTA без затрат на упаковку, связанные с вызовом между потоками, которые находятся в разных апартаментах STA.</span><span class="sxs-lookup"><span data-stu-id="9dc30-209">In addition, WIC codecs that live within an MTA can call other objects that live within the MTA without the marshaling cost associated of calling between threads that live in different STA apartments.</span></span> <span data-ttu-id="9dc30-210">В Windows 7 все встроенные кодеки WIC обновлены для поддержки MTA, включая JPEG, TIFF, PNG, GIF, ICO и BMP.</span><span class="sxs-lookup"><span data-stu-id="9dc30-210">In Windows 7, all in-box WIC codecs have been updated to support MTA, including JPEG, TIFF, PNG, GIF, ICO, and BMP.</span></span> <span data-ttu-id="9dc30-211">Настоятельно рекомендуется написать кодеки для поддержки MTA.</span><span class="sxs-lookup"><span data-stu-id="9dc30-211">It is highly recommended that codecs be written to support MTA.</span></span> <span data-ttu-id="9dc30-212">Кодеки, не поддерживающие MTA, приводят к значительному снижение производительности в многопоточных приложениях из-за упаковки.</span><span class="sxs-lookup"><span data-stu-id="9dc30-212">Codecs that do not support MTA will cause significant performance degredation in multithreaded applications due to marshaling.</span></span> <span data-ttu-id="9dc30-213">Для включения поддержки агента передачи сообщений необходимо, чтобы в коде был реализована правильная синхронизация.</span><span class="sxs-lookup"><span data-stu-id="9dc30-213">Enabling MTA support requires proper synchronization to be implemented in the codec.</span></span> <span data-ttu-id="9dc30-214">Точная реализация этих методов синхронизации выходит за рамки данного документа.</span><span class="sxs-lookup"><span data-stu-id="9dc30-214">Exact implementation of these synchronization techniques is beyond the scope of this paper.</span></span> <span data-ttu-id="9dc30-215">Ниже приведен общий справочник по синхронизации объектов модели COM.</span><span class="sxs-lookup"><span data-stu-id="9dc30-215">A general reference for synchronizing Component Object Model (COM) objects is provided below.</span></span>

### <a name="metadata-working-group-implementations"></a><span data-ttu-id="9dc30-216">Реализации рабочих групп метаданных</span><span class="sxs-lookup"><span data-stu-id="9dc30-216">Metadata Working Group Implementations</span></span>

<span data-ttu-id="9dc30-217">В настоящее время существует множество форматов хранения метаданных, содержащих перекрывающиеся свойства, без каких-либо четкого отраслевых стандартов или рекомендаций по единообразным методам чтения и записи этих форматов метаданных.</span><span class="sxs-lookup"><span data-stu-id="9dc30-217">There are currently a variety of metadata storage formats that contain overlapping properties, without any clear industry standard or guidance on consistent methods for reading and writing these metadata formats.</span></span> <span data-ttu-id="9dc30-218">Чтобы помочь в использовании различных форматов и свойств, была сформирована Рабочая группа метаданных (МВГ).</span><span class="sxs-lookup"><span data-stu-id="9dc30-218">To help with this variety of formats and properties, the Metadata Working Group (MWG) was formed.</span></span> <span data-ttu-id="9dc30-219">Цель МВГ — предоставить рекомендации, обеспечивающие взаимодействие между различными платформами, приложениями и устройствами.</span><span class="sxs-lookup"><span data-stu-id="9dc30-219">The aim of the MWG is to provide guidelines that ensure interoperability among a wide variety of platforms, applications, and devices.</span></span> <span data-ttu-id="9dc30-220">Рекомендации, установленные МВГ, применяются к полям метаданных XMP, EXIF и IPTC, а также к форматам изображений JPEG, TIFF и PSD.</span><span class="sxs-lookup"><span data-stu-id="9dc30-220">The guidelines established by the MWG apply to the XMP, Exif, and IPTC metadata fields, and to the JPEG, TIFF, and PSD image formats.</span></span>

<span data-ttu-id="9dc30-221">В Windows 7 обработчик метаданных фотографий и уровень политики метаданных были обновлены для чтения и записи метаданных образа в соответствии с правилами, установленными МВГ.</span><span class="sxs-lookup"><span data-stu-id="9dc30-221">In Windows 7, the photo metadata handler and the metadata policy layer have been updated to read and write image metadata according to the guidelines established by the MWG.</span></span> <span data-ttu-id="9dc30-222">Дополнительные сведения о рабочей группе Metadata (МВГ) см. в [руководстве по установленным метаданным](https://s3.amazonaws.com/software.tagthatphoto.com/docs/mwg_guidance.pdf).</span><span class="sxs-lookup"><span data-stu-id="9dc30-222">For more information on the Metadata Working Group (MWG), view the [established metadata guidelines](https://s3.amazonaws.com/software.tagthatphoto.com/docs/mwg_guidance.pdf).</span></span>

### <a name="windows-7-features-supported-on-windows-vista-and-windows-server-2008"></a><span data-ttu-id="9dc30-223">Функции Windows 7, поддерживаемые в Windows Vista и Windows Server 2008</span><span class="sxs-lookup"><span data-stu-id="9dc30-223">Windows 7 features supported on Windows Vista and Windows Server 2008</span></span>

<span data-ttu-id="9dc30-224">[Обновление платформы для Windows Vista](../win7ip/platform-update-for-windows-vista-portal.md) — это набор библиотек времени выполнения, позволяющий разработчикам ориентироваться на приложения как в Windows 7, так и в Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="9dc30-224">The [Platform Update for Windows Vista](../win7ip/platform-update-for-windows-vista-portal.md) is a set of run-time libraries that enables developers to target applications to both Windows 7 and Windows Vista.</span></span> <span data-ttu-id="9dc30-225">Обновление платформы для Windows Server 2008 — это набор библиотек времени выполнения, позволяющий разработчикам ориентироваться на приложения как для Windows Server 2008 R2, так и для Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="9dc30-225">The Platform Update for Windows Server 2008 is a set of run-time libraries that enables developers to target applications to both Windows Server 2008 R2 and Windows Server 2008.</span></span> <span data-ttu-id="9dc30-226">Обновление платформы для Windows Vista и обновление платформы для Windows Server 2008 будут доступны всем клиентам Windows Vista и Windows Server 2008 с помощью Центр обновления Windows.</span><span class="sxs-lookup"><span data-stu-id="9dc30-226">The Platform Update for Windows Vista and the Platform Update for Windows Server 2008 will be available to all Windows Vista and Windows Server 2008 customers through Windows Update.</span></span> <span data-ttu-id="9dc30-227">Сторонние приложения, требующие обновления платформы для Windows Vista или обновления платформы для Windows Server 2008, могут иметь Центр обновления Windows определить, установлена ли требуемая обновленная система. Если это не так, Центр обновления Windows будет скачивать и устанавливать его в фоновом режиме.</span><span class="sxs-lookup"><span data-stu-id="9dc30-227">Third-party applications that require Platform Update for Windows Vista or Platform Update for Windows Server 2008 can have Windows Update detect whether the required updated is installed; if it is not, Windows Update will download and install it in the background.</span></span> <span data-ttu-id="9dc30-228">Дополнительные сведения об обновлениях см. в статье обновление платформы для Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="9dc30-228">For more information about both updates, see Platform Update for Windows Vista</span></span>

 

 
