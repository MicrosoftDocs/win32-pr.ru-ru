---
description: В этом разделе описывается язык запросов метаданных для компонента Windows Imaging Component (WIC).
ms.assetid: 5ffa0a69-b53d-4be3-b802-deaaa743e6bd
title: Общие сведения о языке запросов метаданных
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ee4b55bdc7079565f98411e28977d3d8c41e191f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104551049"
---
# <a name="metadata-query-language-overview"></a><span data-ttu-id="5366a-103">Общие сведения о языке запросов метаданных</span><span class="sxs-lookup"><span data-stu-id="5366a-103">Metadata Query Language Overview</span></span>

<span data-ttu-id="5366a-104">В этом разделе описывается язык запросов метаданных для компонента Windows Imaging Component (WIC).</span><span class="sxs-lookup"><span data-stu-id="5366a-104">This topic introduces the metadata query language for Windows Imaging Component (WIC).</span></span> <span data-ttu-id="5366a-105">Язык запросов метаданных используется для создания выражений, позволяющих находить определенные данные (элементы метаданных) и расположения (блоки метаданных) в метаданных изображения.</span><span class="sxs-lookup"><span data-stu-id="5366a-105">You use the metadata query language to create expressions that find specific data (metadata items) and locations (metadata blocks) within the metadata of an image.</span></span>

<span data-ttu-id="5366a-106">В этом разделе содержатся следующие подразделы.</span><span class="sxs-lookup"><span data-stu-id="5366a-106">This topic contains the following sections.</span></span>

-   [<span data-ttu-id="5366a-107">Предварительные условия</span><span class="sxs-lookup"><span data-stu-id="5366a-107">Prerequisites</span></span>](#prerequisites)
-   [<span data-ttu-id="5366a-108">Введение</span><span class="sxs-lookup"><span data-stu-id="5366a-108">Introduction</span></span>](#introduction)
-   [<span data-ttu-id="5366a-109">Анатомия выражения пути</span><span class="sxs-lookup"><span data-stu-id="5366a-109">Anatomy of a Path Expression</span></span>](#anatomy-of-a-path-expression)
    -   [<span data-ttu-id="5366a-110">Выбор блоков</span><span class="sxs-lookup"><span data-stu-id="5366a-110">Block Selection</span></span>](#block-selection)
    -   [<span data-ttu-id="5366a-111">Выбор элементов</span><span class="sxs-lookup"><span data-stu-id="5366a-111">Item Selection</span></span>](#item-selection)
    -   [<span data-ttu-id="5366a-112">Escape-символ</span><span class="sxs-lookup"><span data-stu-id="5366a-112">Escape Character</span></span>](#escape-character)
    -   [<span data-ttu-id="5366a-113">Образцы выражений</span><span class="sxs-lookup"><span data-stu-id="5366a-113">Sample Expressions</span></span>](#sample-expressions)
-   [<span data-ttu-id="5366a-114">Выражения политики метаданных фотографий</span><span class="sxs-lookup"><span data-stu-id="5366a-114">Photo Metadata Policy Expressions</span></span>](#photo-metadata-policy-expressions)
-   [<span data-ttu-id="5366a-115">Сводка по языку запросов метаданных</span><span class="sxs-lookup"><span data-stu-id="5366a-115">Metadata Query Language Summary</span></span>](#metadata-query-language-summary)
-   [<span data-ttu-id="5366a-116">См. также</span><span class="sxs-lookup"><span data-stu-id="5366a-116">Related topics</span></span>](#related-topics)

## <a name="prerequisites"></a><span data-ttu-id="5366a-117">Предварительные условия</span><span class="sxs-lookup"><span data-stu-id="5366a-117">Prerequisites</span></span>

<span data-ttu-id="5366a-118">Чтобы понять этот раздел, необходимо ознакомиться с системой метаданных WIC, как описано в статье [Общие сведения о метаданных WIC](-wic-about-metadata.md) и доступе к метаданным, как описано в [обзоре чтения и записи метаданных изображения](-wic-codec-readingwritingmetadata.md).</span><span class="sxs-lookup"><span data-stu-id="5366a-118">To understand this topic, you should be familiar with the WIC metadata system as described in the [WIC Metadata Overview](-wic-about-metadata.md) and accessing metadata, as described in the [Overview of Reading and Writing Image Metadata](-wic-codec-readingwritingmetadata.md).</span></span>

## <a name="introduction"></a><span data-ttu-id="5366a-119">Введение</span><span class="sxs-lookup"><span data-stu-id="5366a-119">Introduction</span></span>

<span data-ttu-id="5366a-120">Взаимодействие с платформой метаданных в основном осуществляется через два компонента модели COM: средство чтения запросов, представленное интерфейсом [**ивикметадатакуериреадер**](/windows/desktop/api/Wincodec/nn-wincodec-iwicmetadataqueryreader) , и модуль записи запроса, представленный интерфейсом [**ивикметадатакуеривритер**](/windows/desktop/api/Wincodec/nn-wincodec-iwicmetadataquerywriter) .</span><span class="sxs-lookup"><span data-stu-id="5366a-120">You interact with the metadata platform primarily through two Component Object Model (COM) components: a query reader, represented by the [**IWICMetadataQueryReader**](/windows/desktop/api/Wincodec/nn-wincodec-iwicmetadataqueryreader) interface, and a query writer, represented by the [**IWICMetadataQueryWriter**](/windows/desktop/api/Wincodec/nn-wincodec-iwicmetadataquerywriter) interface.</span></span> <span data-ttu-id="5366a-121">Эти компоненты позволяют считывать и записывать метаданные с помощью языка запросов метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-121">These components enable you to read or write metadata using the metadata query language.</span></span> <span data-ttu-id="5366a-122">Язык запросов описывает синтаксис выражения пути, а компоненты запроса используют это выражение пути для доступа к нужным метаданным.</span><span class="sxs-lookup"><span data-stu-id="5366a-122">The query language describes the syntax of a path expression and the query components use this path expression to access the desired metadata.</span></span> <span data-ttu-id="5366a-123">Это выражение пути описывает расположение блока метаданных или элемента.</span><span class="sxs-lookup"><span data-stu-id="5366a-123">This path expression describes the location of a metadata block or item.</span></span>

<span data-ttu-id="5366a-124">Блок метаданных — это именованная группа метаданных в определенном формате.</span><span class="sxs-lookup"><span data-stu-id="5366a-124">A metadata block is a named group of metadata in a specific format.</span></span> <span data-ttu-id="5366a-125">Блок метаданных может содержать отдельные элементы метаданных, такие как автор или время создания, а также дополнительные блоки метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-125">A metadata block can contain individual metadata items such as an author or creation time and additional metadata blocks.</span></span> <span data-ttu-id="5366a-126">Имя блока метаданных определяется его форматом.</span><span class="sxs-lookup"><span data-stu-id="5366a-126">A metadata block's name is determined by its format.</span></span> <span data-ttu-id="5366a-127">Например, блок метаданных, содержащий метаданные App1, будет называться App1.</span><span class="sxs-lookup"><span data-stu-id="5366a-127">For example, a metadata block containing App1 metadata would be named "app1".</span></span> <span data-ttu-id="5366a-128">К общим форматам метаданных относятся App1, EXIF, IFD и XMP.</span><span class="sxs-lookup"><span data-stu-id="5366a-128">Common metadata formats include App1, Exif, IFD, and XMP.</span></span>

<span data-ttu-id="5366a-129">Элемент метаданных — это пара "имя-значение", описывающая такие характеристики, как "Автор", "заголовок" и "Оценка".</span><span class="sxs-lookup"><span data-stu-id="5366a-129">A metadata item is a name/value pair that describes characteristics like author, title, and rating.</span></span>

<span data-ttu-id="5366a-130">Выражение пути содержит одно или несколько имен блоков метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-130">A path expression contains one or more metadata block names.</span></span> <span data-ttu-id="5366a-131">Он также может указывать элемент метаданных в блоке метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-131">It can also specify a metadata item within a metadata block.</span></span> <span data-ttu-id="5366a-132">Следующее выражение пути представляет блок App1, содержащий блок IFD, который содержит элемент метаданных:</span><span class="sxs-lookup"><span data-stu-id="5366a-132">The following path expression represents an App1 block which contains an IFD block which contains the metadata item:</span></span>

-   <span data-ttu-id="5366a-133">/APP1/IFD/{ushort = 18249}</span><span class="sxs-lookup"><span data-stu-id="5366a-133">/app1/ifd/{ushort=18249}</span></span>

<span data-ttu-id="5366a-134">На следующей схеме показан пример описывающего изображения в формате JPEG с четырьмя корневыми блоками метаданных: APP0, App1, XMP и неизвестный блок.</span><span class="sxs-lookup"><span data-stu-id="5366a-134">The following diagram illustrates the makeup of an example JPEG image with four root metadata blocks: App0, App1, XMP, and an unknown block.</span></span> <span data-ttu-id="5366a-135">Каждый выделенный элемент запрашивает тип метаданных (блок или элемент) и выражение запроса, используемое для получения данных.</span><span class="sxs-lookup"><span data-stu-id="5366a-135">Each highlighted item notes the type of metadata (block or item) and the query expression used to retrieve the data.</span></span>

![изображение JPEG с выносками метаданных](graphics/jpegwithcallouts.png)

> [!Note]  
> <span data-ttu-id="5366a-137">Содержимое этой схемы упоминается в этом документе и используется во многих примерах.</span><span class="sxs-lookup"><span data-stu-id="5366a-137">The contents of this diagram are referenced throughout this document and are used in many of the examples.</span></span>

 

## <a name="anatomy-of-a-path-expression"></a><span data-ttu-id="5366a-138">Анатомия выражения пути</span><span class="sxs-lookup"><span data-stu-id="5366a-138">Anatomy of a Path Expression</span></span>

<span data-ttu-id="5366a-139">Для доступа к метаданным с помощью API-интерфейсов WIC в большинстве случаев следует использовать полное выражение запроса.</span><span class="sxs-lookup"><span data-stu-id="5366a-139">To access metadata using the WIC APIs, a fully qualified query expression must be used in most cases.</span></span> <span data-ttu-id="5366a-140">В этом разделе обсуждаются полные выражения для доступа к метаданным.</span><span class="sxs-lookup"><span data-stu-id="5366a-140">This topic discusses fully qualified expressions for accessing metadata.</span></span> <span data-ttu-id="5366a-141">Если вам нужны сведения о случаях, когда используются выражения, не являющиеся полными, см. раздел выражение политики метаданных фотографии далее в этом документе.</span><span class="sxs-lookup"><span data-stu-id="5366a-141">If you need information about the cases in which non-fully qualified expressions are used, refer to the Photo Metadata Policy Expression section later in this document.</span></span>

<span data-ttu-id="5366a-142">Что такое полное выражение запроса?</span><span class="sxs-lookup"><span data-stu-id="5366a-142">What is a fully qualified query expression?</span></span> <span data-ttu-id="5366a-143">В WIC полное выражение — это строка, которая начинается с символа косой черты (/), за которым следует путь перехода к блоку метаданных или определенный элемент метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-143">In WIC, a fully qualified expression is a string that begins with the path character slash (/), followed by a navigation path to a metadata block or a specific metadata item.</span></span> <span data-ttu-id="5366a-144">Каждый шаг в пути навигации отделяется косой чертой, образуя выражение для доступа к блоку метаданных или элементу метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-144">Each step within the navigation path is separated by a slash, forming an expression for accessing a metadata block or a metadata item.</span></span> <span data-ttu-id="5366a-145">Например, ниже приведено полное выражение запроса, которое обращается к рейтингу Microsoft Photo в блоке IFD, вложенном в блок APP1:</span><span class="sxs-lookup"><span data-stu-id="5366a-145">For example, the following is a fully qualified query expression that accesses the Microsoft Photo Rating in an IFD block that is nested in an App1 block:</span></span>

-   <span data-ttu-id="5366a-146">/APP1/IFD/{ushort = 18249}</span><span class="sxs-lookup"><span data-stu-id="5366a-146">/app1/ifd/{ushort=18249}</span></span>

<span data-ttu-id="5366a-147">Когда компонент WIC анализирует это выражение, сначала он выполняет поиск блока метаданных APP1 в метаданных изображения.</span><span class="sxs-lookup"><span data-stu-id="5366a-147">When WIC parses this expression, it first searches for the App1 metadata block within the image's metadata.</span></span> <span data-ttu-id="5366a-148">Если блок APP1 найден, он продолжит поиск в поисках вложенного блока метаданных IFD.</span><span class="sxs-lookup"><span data-stu-id="5366a-148">If the App1 block is found, it continues its search looking for the nested IFD metadata block.</span></span> <span data-ttu-id="5366a-149">Если блок IFD найден, он ищет конкретный элемент метаданных, в данном случае Микрософтфото оценку в теге 18249 в блоке метаданных IFD.</span><span class="sxs-lookup"><span data-stu-id="5366a-149">If the IFD block is found, it then looks for the specific metadata item, in this case the MicrosoftPhoto rating under the tag 18249, within the IFD metadata block.</span></span> <span data-ttu-id="5366a-150">Если компонент WIC не находит блок метаданных или элемент, он прерывает запрос.</span><span class="sxs-lookup"><span data-stu-id="5366a-150">If at any time WIC does not find a metadata block or item, it aborts the query.</span></span>

### <a name="block-selection"></a><span data-ttu-id="5366a-151">Выбор блока</span><span class="sxs-lookup"><span data-stu-id="5366a-151">Block Selection</span></span>

<span data-ttu-id="5366a-152">Простейшее выражение запроса метаданных WIC — это выражение для получения модуля чтения или записи запроса для определенного блока метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-152">The simplest WIC metadata query expression is an expression to obtain a query reader/writer for a specific metadata block.</span></span> <span data-ttu-id="5366a-153">Получение модуля чтения и записи запросов позволяет перенаправлять последующие запросы непосредственно в вложенный блок метаданных без работы с родительским блоком.</span><span class="sxs-lookup"><span data-stu-id="5366a-153">Obtaining a query reader/writer enables you to direct subsequent queries directly to a nested metadata block without dealing with its parent block.</span></span> <span data-ttu-id="5366a-154">Выражение запроса выборки блока представляет собой путь перехода к нужному блоку метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-154">A block selection query expression is a navigation path to the desired metadata block.</span></span> <span data-ttu-id="5366a-155">Например, на предыдущем рисунке имеется пять блоков метаданных, два из которых вложены в другие блоки метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-155">For example, in the previous illustration there are five metadata blocks, two of which are nested in other metadata blocks.</span></span> <span data-ttu-id="5366a-156">Ниже приведены выражения пути к каждому блоку метаданных в примере JPEG:</span><span class="sxs-lookup"><span data-stu-id="5366a-156">The following are the path expressions to each metadata block in the JPEG example:</span></span>

-   <span data-ttu-id="5366a-157">/app0</span><span class="sxs-lookup"><span data-stu-id="5366a-157">/app0</span></span>
-   <span data-ttu-id="5366a-158">/APP1</span><span class="sxs-lookup"><span data-stu-id="5366a-158">/app1</span></span>
-   <span data-ttu-id="5366a-159">/app1/ifd</span><span class="sxs-lookup"><span data-stu-id="5366a-159">/app1/ifd</span></span>
-   <span data-ttu-id="5366a-160">/app1/ifd/exif</span><span class="sxs-lookup"><span data-stu-id="5366a-160">/app1/ifd/exif</span></span>
-   <span data-ttu-id="5366a-161">/ксмп</span><span class="sxs-lookup"><span data-stu-id="5366a-161">/xmp</span></span>

<span data-ttu-id="5366a-162">При использовании модуля чтения или записи запроса для выполнения запроса он возвращает новый модуль чтения или записи запроса, который служб выполняет запросы в области заданного блока метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-162">When you use a query reader/writer to execute a query, it returns a new query reader/writer that services queries within the scope of the specified metadata block.</span></span> <span data-ttu-id="5366a-163">Например, если выполнить запрос «/App1», то будет получен новый модуль чтения запросов, а запросы к новому модулю чтения будут относиться к блоку App1.</span><span class="sxs-lookup"><span data-stu-id="5366a-163">For instance, if you execute the query "/app1" , a new query reader is obtained and queries to the new reader are relative to the App1 block.</span></span> <span data-ttu-id="5366a-164">Это означает, что запрос "/ИФД" является допустимым для нового модуля чтения, так как блок APP1 содержит блок IFD.</span><span class="sxs-lookup"><span data-stu-id="5366a-164">This means that the query "/ifd" is valid for the new reader because the App1 block contains an IFD block.</span></span> <span data-ttu-id="5366a-165">Однако "/КСМП" не будет работать, так как этот блок APP1 не содержит блок метаданных XMP.</span><span class="sxs-lookup"><span data-stu-id="5366a-165">However, "/xmp" would not work because this App1 block does not contain an XMP metadata block.</span></span>

<span data-ttu-id="5366a-166">Язык запросов также поддерживает нотацию индекса.</span><span class="sxs-lookup"><span data-stu-id="5366a-166">The query language also supports an index notation.</span></span> <span data-ttu-id="5366a-167">Нотация индекса предоставляет доступ к определенному блоку метаданных, если существует несколько блоков одного типа.</span><span class="sxs-lookup"><span data-stu-id="5366a-167">Index notation provides access to a specific metadata block when multiple blocks of the same type exist.</span></span> <span data-ttu-id="5366a-168">В примере с форматом JPEG можно использовать следующее выражение индексированного пути:</span><span class="sxs-lookup"><span data-stu-id="5366a-168">For the JPEG example, the following indexed path expression can be used:</span></span>

-   <span data-ttu-id="5366a-169">/\[0 \] APP1/ \[ 0 \] IFD</span><span class="sxs-lookup"><span data-stu-id="5366a-169">/\[0\]app1/\[0\]ifd</span></span>

<span data-ttu-id="5366a-170">В языке запросов все индексы начинаются с нуля.</span><span class="sxs-lookup"><span data-stu-id="5366a-170">In the query language, all indexes start at zero.</span></span> <span data-ttu-id="5366a-171">В предыдущем выражении первые нулевые запросы к первому блоку App1 и второму нулю запрашивают первый вложенный блок IFD.</span><span class="sxs-lookup"><span data-stu-id="5366a-171">In the previous expression, the first zero queries for the first App1 block and the second zero queries the first nested IFD block.</span></span> <span data-ttu-id="5366a-172">Нотация индекса по-прежнему может использоваться, даже если не существует несколько блоков одного типа.</span><span class="sxs-lookup"><span data-stu-id="5366a-172">Index notation can still be used even when multiple blocks of the same type do not exist.</span></span> <span data-ttu-id="5366a-173">Если в примере JPEG включен второй блок APP1 с внедренным блоком IFD, то \[ \] для доступа к второму блоку APP1 будет использоваться выражение "/1 APP1/IFD".</span><span class="sxs-lookup"><span data-stu-id="5366a-173">If the example JPEG included a second App1 block with an embedded IFD block, the expression "/\[1\]app1/ifd" would be used to access the second App1 block.</span></span>

<span data-ttu-id="5366a-174">Нотация индекса становится более распространенной при работе с фрагментами текста в формате PNG, поскольку вполне вероятно, что изображение PNG будет иметь более одного текстового фрагмента.</span><span class="sxs-lookup"><span data-stu-id="5366a-174">Index notation becomes more common when dealing with PNG tEXt chunks because it is likely that the PNG image will have more than one tEXt chunk.</span></span>

> [!Note]  
> <span data-ttu-id="5366a-175">Индексы многомерных массивов не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="5366a-175">Multidimensional array indexes are not supported.</span></span>

 

### <a name="item-selection"></a><span data-ttu-id="5366a-176">Выбор элементов</span><span class="sxs-lookup"><span data-stu-id="5366a-176">Item Selection</span></span>

<span data-ttu-id="5366a-177">Можно получить доступ к элементам метаданных в блоке метаданных, создав их в выражениях выбора блоков.</span><span class="sxs-lookup"><span data-stu-id="5366a-177">You can access the metadata items in a metadata block by building on the block selection expressions.</span></span> <span data-ttu-id="5366a-178">В примере с форматом JPEG рассмотрите свойства XMP и Microsoft Photo рейтинга.</span><span class="sxs-lookup"><span data-stu-id="5366a-178">Consider the XMP and Microsoft Photo rating properties in the JPEG example.</span></span> <span data-ttu-id="5366a-179">Эти метаданные существуют в двух блоках метаданных: в блоках APP1/IFD и XMP.</span><span class="sxs-lookup"><span data-stu-id="5366a-179">This metadata exists in two metadata blocks: the App1/IFD and XMP blocks.</span></span> <span data-ttu-id="5366a-180">Поэтому для доступа к одним и тем же данным можно использовать более одного выражения.</span><span class="sxs-lookup"><span data-stu-id="5366a-180">Therefore, more than one expression can be used to access the same data.</span></span> <span data-ttu-id="5366a-181">Следующее выражение обращается к оценке Микрософтфото в блоке XMP:</span><span class="sxs-lookup"><span data-stu-id="5366a-181">The following expression accesses the MicrosoftPhoto rating in the XMP block:</span></span>

-   <span data-ttu-id="5366a-182">/КСМП/КСМП: Оценка</span><span class="sxs-lookup"><span data-stu-id="5366a-182">/xmp/xmp:Rating</span></span>

<span data-ttu-id="5366a-183">Часть "XMP:" выражения является понятным идентификатором схемы.</span><span class="sxs-lookup"><span data-stu-id="5366a-183">The "xmp:" part of the expression is a schema friendly identifier.</span></span> <span data-ttu-id="5366a-184">XMP является расширяемым стандартом и позволяет сторонним субъектам публиковать собственные схемы, которые определяют способ хранения определенных элементов метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-184">XMP is an extensible standard and allows third party entities to publish their own schemas which define how to store certain metadata items.</span></span> <span data-ttu-id="5366a-185">Схема XMP полностью идентифицируется по URL-адресу, но WIC предоставляет набор понятных идентификаторов для хорошо известных схем.</span><span class="sxs-lookup"><span data-stu-id="5366a-185">An XMP schema is fully identified by a URL, but WIC provides a set of friendly identifiers for well-known schemas.</span></span> <span data-ttu-id="5366a-186">Дополнительные сведения см. в разделе [запросы метаданных в формате образа в машинном код](-wic-native-image-format-metadata-queries.md) .</span><span class="sxs-lookup"><span data-stu-id="5366a-186">For more information, see the [Native Image Format Metadata Queries](-wic-native-image-format-metadata-queries.md) topic.</span></span>

<span data-ttu-id="5366a-187">Для изображений JPEG сведения о рейтинге также могут храниться в вложенном блоке IFD в App1.</span><span class="sxs-lookup"><span data-stu-id="5366a-187">For JPEG images, rating information can also be stored within the App1 nested IFD block.</span></span> <span data-ttu-id="5366a-188">Однако, в отличие от примера рейтинга XMP, блок IFD не использует имя схемы для доступа к сведениям о рейтинге.</span><span class="sxs-lookup"><span data-stu-id="5366a-188">However, unlike the XMP rating example, the IFD block does not use a schema name to access the rating information.</span></span> <span data-ttu-id="5366a-189">Вместо этого используется выражение данных.</span><span class="sxs-lookup"><span data-stu-id="5366a-189">You use a data expression instead.</span></span> <span data-ttu-id="5366a-190">Следующее выражение используется для доступа к оценке Микрософтфото в вложенном блоке IFD в App1:</span><span class="sxs-lookup"><span data-stu-id="5366a-190">The following expression is used to access the MicrosoftPhoto rating in the App1 nested IFD block:</span></span>

-   <span data-ttu-id="5366a-191">/APP1/IFD/{ushort = 18249}</span><span class="sxs-lookup"><span data-stu-id="5366a-191">/app1/ifd/{ushort=18249}</span></span>

<span data-ttu-id="5366a-192">В этом выражении часть "/APP1/IFD" выражения представляет собой путь перехода к блоку IFD (как обсуждалось ранее в разделе выбора блока).</span><span class="sxs-lookup"><span data-stu-id="5366a-192">In this expression, the "/app1/ifd" part of the expression is the navigation path to the IFD block (as discussed previously in the Block Selection section).</span></span> <span data-ttu-id="5366a-193">Вторая часть выражения "/{ушорт = 18249}" обращается к данным.</span><span class="sxs-lookup"><span data-stu-id="5366a-193">The second part of the expression "/{ushort=18249}" accesses the data.</span></span> <span data-ttu-id="5366a-194">Эта часть выражения указывает средству синтаксического анализа запросов найти данные, внедренные в короткий тег без знака с идентификатором тега 18249.</span><span class="sxs-lookup"><span data-stu-id="5366a-194">This part of the expression instructs the query parser to find the data embedded in the unsigned short tag that has the tag identifier 18249.</span></span>

> [!Note]  
> <span data-ttu-id="5366a-195">Список стандартных форматов метаданных, поддерживаемых каждым форматом изображений в, см. в разделе [запросы метаданных в формате образов в машинном код](-wic-native-image-format-metadata-queries.md) .</span><span class="sxs-lookup"><span data-stu-id="5366a-195">For a list of common metadata formats supported by each image format at, see the [Native Image Format Metadata Queries](-wic-native-image-format-metadata-queries.md) topic.</span></span>

 

<span data-ttu-id="5366a-196">{Ushort = 18249} является выражением данных и может принимать несколько форм.</span><span class="sxs-lookup"><span data-stu-id="5366a-196">The {ushort=18249} is a data expression and can take several forms.</span></span> <span data-ttu-id="5366a-197">Выражение данных — это выражение из двух частей, содержащее тег или ключ запрошенных метаданных, в данном случае "18249", и тип данных ключа, в данном случае "ushort".</span><span class="sxs-lookup"><span data-stu-id="5366a-197">A data expression is a two part expression containing the requested metadata tag or key, in this case "18249", and the data type of the key, in this case "ushort".</span></span> <span data-ttu-id="5366a-198">Две части разделяются знаком равенства (=).</span><span class="sxs-lookup"><span data-stu-id="5366a-198">The two parts are separated by an equal sign (=).</span></span> <span data-ttu-id="5366a-199">Виксуппортс большую часть общих типов данных C/C++.</span><span class="sxs-lookup"><span data-stu-id="5366a-199">WICsupports a majority of the common C/C++ data types.</span></span> <span data-ttu-id="5366a-200">Язык запросов принимает следующие типы данных:</span><span class="sxs-lookup"><span data-stu-id="5366a-200">The following data types are accepted by the query language:</span></span>

-   <span data-ttu-id="5366a-201">char</span><span class="sxs-lookup"><span data-stu-id="5366a-201">char</span></span>
-   <span data-ttu-id="5366a-202">учар</span><span class="sxs-lookup"><span data-stu-id="5366a-202">uchar</span></span>
-   <span data-ttu-id="5366a-203">short</span><span class="sxs-lookup"><span data-stu-id="5366a-203">short</span></span>
-   <span data-ttu-id="5366a-204">ushort</span><span class="sxs-lookup"><span data-stu-id="5366a-204">ushort</span></span>
-   <span data-ttu-id="5366a-205">long</span><span class="sxs-lookup"><span data-stu-id="5366a-205">long</span></span>
-   <span data-ttu-id="5366a-206">ulong</span><span class="sxs-lookup"><span data-stu-id="5366a-206">ulong</span></span>
-   <span data-ttu-id="5366a-207">INT</span><span class="sxs-lookup"><span data-stu-id="5366a-207">int</span></span>
-   <span data-ttu-id="5366a-208">uint</span><span class="sxs-lookup"><span data-stu-id="5366a-208">uint</span></span>
-   <span data-ttu-id="5366a-209">longlong</span><span class="sxs-lookup"><span data-stu-id="5366a-209">longlong</span></span>
-   <span data-ttu-id="5366a-210">FLOAT</span><span class="sxs-lookup"><span data-stu-id="5366a-210">float</span></span>
-   <span data-ttu-id="5366a-211">double</span><span class="sxs-lookup"><span data-stu-id="5366a-211">double</span></span>
-   <span data-ttu-id="5366a-212">str</span><span class="sxs-lookup"><span data-stu-id="5366a-212">str</span></span>
-   <span data-ttu-id="5366a-213">встр</span><span class="sxs-lookup"><span data-stu-id="5366a-213">wstr</span></span>
-   <span data-ttu-id="5366a-214">guid</span><span class="sxs-lookup"><span data-stu-id="5366a-214">guid</span></span>
-   <span data-ttu-id="5366a-215">bool</span><span class="sxs-lookup"><span data-stu-id="5366a-215">bool</span></span>

> [!Note]  
> <span data-ttu-id="5366a-216">В этом списке указываются только типы данных, поддерживаемые языком запросов метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-216">This list only specifies the data types supported by the metadata query language.</span></span> <span data-ttu-id="5366a-217">Используйте эти типы данных при создании выражения данных запроса метаданных, например {ushort = 18249}.</span><span class="sxs-lookup"><span data-stu-id="5366a-217">Use these data types when creating a metadata query data expression such as {ushort=18249}.</span></span> <span data-ttu-id="5366a-218">WIC возвращает значение элемента метаданных в виде ПРОПВАРИАНТ, которое определяет собственную систему типов.</span><span class="sxs-lookup"><span data-stu-id="5366a-218">The WIC returns the metadata item's value in the form of PROPVARIANT, which defines its own type system.</span></span>

 

<span data-ttu-id="5366a-219">"18249" в примере является тегом данных.</span><span class="sxs-lookup"><span data-stu-id="5366a-219">The "18249" in the example is the data tag.</span></span> <span data-ttu-id="5366a-220">Это конкретное число определяется корпорацией Майкрософт для включения оценки Микрософтфото.</span><span class="sxs-lookup"><span data-stu-id="5366a-220">This particular number is defined by Microsoft to contain the MicrosoftPhoto rating.</span></span> <span data-ttu-id="5366a-221">В качестве тега данных может использоваться любое число, строка или идентификатор GUID в зависимости от искомого элемента данных.</span><span class="sxs-lookup"><span data-stu-id="5366a-221">The data tag can be any number, string, or GUID depending on the data item you are looking for</span></span>

<span data-ttu-id="5366a-222">В отличие от примера оценки XMP, конфликт имен для значения рейтинга в блоке APP1/IFD отсутствует.</span><span class="sxs-lookup"><span data-stu-id="5366a-222">Unlike the XMP Rating example, there is no name collision for the rating value in the App1/IFD block.</span></span> <span data-ttu-id="5366a-223">Это обусловлено тем, что значение рейтинга XMP фактически хранится в другом теге ushort 18246.</span><span class="sxs-lookup"><span data-stu-id="5366a-223">This is because the XMP rating value is actually stored under a different ushort tag, 18246.</span></span> <span data-ttu-id="5366a-224">Таким образом, выражение для доступа к рейтингу XMP в блоке APP1/IFD:</span><span class="sxs-lookup"><span data-stu-id="5366a-224">Thus, the expression to access the XMP rating in the App1/IFD block is:</span></span>

-   <span data-ttu-id="5366a-225">/APP1/IFD/{ushort = 18246}</span><span class="sxs-lookup"><span data-stu-id="5366a-225">/app1/ifd/{ushort=18246}</span></span>

> [!Note]  
> <span data-ttu-id="5366a-226">Формальное описание языка запросов метаданных см. в разделе Сводка по языку запросов метаданных далее в этом документе.</span><span class="sxs-lookup"><span data-stu-id="5366a-226">For a formal description of the metadata query language, see the Metadata Query Language Summary section later in this document.</span></span>

 

### <a name="escape-character"></a><span data-ttu-id="5366a-227">Escape-символ</span><span class="sxs-lookup"><span data-stu-id="5366a-227">Escape Character</span></span>

<span data-ttu-id="5366a-228">Язык запросов не учитывает регистр и обрабатывает все символы как строчные.</span><span class="sxs-lookup"><span data-stu-id="5366a-228">The query language is not case sensitive and treats all characters as lowercase.</span></span> <span data-ttu-id="5366a-229">Однако некоторые форматы метаданных (например, XMP) чувствительны к регистру.</span><span class="sxs-lookup"><span data-stu-id="5366a-229">However, some metadata formats (such as XMP) are case sensitive.</span></span> <span data-ttu-id="5366a-230">При работе с форматом метаданных с учетом регистра используйте символ обратной косой черты ( \\ ), если нужно указать символ в верхнем регистре.</span><span class="sxs-lookup"><span data-stu-id="5366a-230">When working with a case-sensitive metadata format, use the backslash (\\) character when you want to specify an uppercase character.</span></span>

<span data-ttu-id="5366a-231">Escape-символ используется анализатором языка, а следующий символ, следующий за ним, интерпретируется напрямую.</span><span class="sxs-lookup"><span data-stu-id="5366a-231">The escape character is consumed by the language parser and the following character that follows it is interpreted directly.</span></span> <span data-ttu-id="5366a-232">Например, выражение {Char = \\ \\ } разрешается как " \\ ", а {char = \\ c} разрешается как прописная буква c. Без escape-символа {char = \\ } будет недопустимым выражением, а {char = C} будет интерпретироваться как строчная C.</span><span class="sxs-lookup"><span data-stu-id="5366a-232">For example, the expression {char=\\\\} is resolved as '\\'and {char=\\C} is resolved as an uppercase C. Without the escape character, {char=\\} would be an invalid expression and {char=C} would be interpreted as a lowercase c.</span></span> <span data-ttu-id="5366a-233">Обязательно используйте escape-символ обратной косой черты перед всеми прописными буквами в форматах метаданных с учетом регистра.</span><span class="sxs-lookup"><span data-stu-id="5366a-233">Be sure to use the backslash escape character before all uppercase letters in metadata formats that are case sensitive.</span></span>

### <a name="sample-expressions"></a><span data-ttu-id="5366a-234">Образцы выражений</span><span class="sxs-lookup"><span data-stu-id="5366a-234">Sample Expressions</span></span>

<span data-ttu-id="5366a-235">В следующей таблице приведены некоторые примеры выражений и описаний их интерпретации анализатором языка запросов.</span><span class="sxs-lookup"><span data-stu-id="5366a-235">The following table provides some example expressions and descriptions of their interpretations by the query language parser.</span></span> 

| <span data-ttu-id="5366a-236">Выражение</span><span class="sxs-lookup"><span data-stu-id="5366a-236">Expression</span></span>                     | <span data-ttu-id="5366a-237">Описание</span><span class="sxs-lookup"><span data-stu-id="5366a-237">Description</span></span>                                                                                                                                                                                                                                                                                                                                                      |
|--------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5366a-238">IFD/XMP/EXIF: автор</span><span class="sxs-lookup"><span data-stu-id="5366a-238">ifd/xmp/exif:Author</span></span>            | <span data-ttu-id="5366a-239">Соответствует следующему пути перехода: "блок IFD-> XMP->" author "в схеме EXIF.</span><span class="sxs-lookup"><span data-stu-id="5366a-239">Corresponds to the following navigation path: IFD block -> XMP block -> "Author" property in the "Exif" schema.</span></span>                                                                                                                                                                                                                                            |
| <span data-ttu-id="5366a-240">/\[1 \] IFD/ \[ 0 \] XMP/EXIF: автор</span><span class="sxs-lookup"><span data-stu-id="5366a-240">/\[1\]ifd/\[0\]xmp/exif:Author</span></span> | <span data-ttu-id="5366a-241">То же, что и первый элемент в этой таблице, за исключением того, что \[ \# \] префикс описывает элемент для перехода в случае конфликта имен.</span><span class="sxs-lookup"><span data-stu-id="5366a-241">Same as the first item in this table except that the \[\#\] prefix describes which item to navigate in event of a name collision.</span></span>                                                                                                                                                                                                                                |
| <span data-ttu-id="5366a-242">/ИФД/{ушорт = 700}/Аусор</span><span class="sxs-lookup"><span data-stu-id="5366a-242">/ifd/{ushort=700}/Author</span></span>       | <span data-ttu-id="5366a-243">То же, что и первый элемент в этой таблице, за исключением того, что в нем используется выражение данных для ссылки на блок XMP вместо имени блока XMP (блок XMP внедряется под идентификатором неподписанного короткого тега 700).</span><span class="sxs-lookup"><span data-stu-id="5366a-243">Same as the first item in this table except that it uses a data expression to reference the XMP block instead of the block name "xmp" (XMP block is embedded under the unsigned short tag identifier 700).</span></span> <span data-ttu-id="5366a-244">Кроме того, свойство Author не указывает схему.</span><span class="sxs-lookup"><span data-stu-id="5366a-244">Also, the "Author" property does not specify a schema.</span></span> <span data-ttu-id="5366a-245">Средство синтаксического анализа запросов будет пытаться сопоставить свойство во всех схемах и вернуть первое совпадение.</span><span class="sxs-lookup"><span data-stu-id="5366a-245">The query parser will try to match the property across all schemas and return the first match.</span></span> |
| <span data-ttu-id="5366a-246">/ифд/ксмп</span><span class="sxs-lookup"><span data-stu-id="5366a-246">/ifd/xmp</span></span>                       | <span data-ttu-id="5366a-247">Предоставляет путь навигации к блоку метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-247">Provides a navigation path to a metadata block.</span></span> <span data-ttu-id="5366a-248">Если блок найден, возвращается новый модуль чтения и записи метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-248">If the block is found, a new metadata reader/writer is returned.</span></span>                                                                                                                                                                                                                                                 |
| <span data-ttu-id="5366a-249">/\[\*\]Текст/ключевое слово</span><span class="sxs-lookup"><span data-stu-id="5366a-249">/\[\*\]tEXt/Keyword</span></span>            | <span data-ttu-id="5366a-250">Возвращает или задает свойство ключевого слова для фрагмента PNG.</span><span class="sxs-lookup"><span data-stu-id="5366a-250">Gets or sets the Keyword property for a PNG chunk.</span></span> <span data-ttu-id="5366a-251">Так как спецификация метаданных PNG позволяет создавать несколько фрагментов определенного типа, \[ \* \] нотация получает или задает фрагмент данных PNG с соответствующим свойством.</span><span class="sxs-lookup"><span data-stu-id="5366a-251">Because the PNG metadata specification allows for multiple chunks of a particular type, the \[\*\] notation gets/sets the data PNG chunk with the appropriate property.</span></span> <span data-ttu-id="5366a-252">В соответствии со спецификацией PNG ни один из двух блоков не может иметь одни и те же свойства.</span><span class="sxs-lookup"><span data-stu-id="5366a-252">Per the PNG specification, no two chunks can have the same properties.</span></span>                                                                |



 

<span data-ttu-id="5366a-253">Каждый блок метаданных также однозначно идентифицируется идентификатором GUID метаданных, который можно использовать вместо понятного имени блока.</span><span class="sxs-lookup"><span data-stu-id="5366a-253">Each metadata block is also uniquely identified by the metadata GUID which can be used in place of the friendly block name.</span></span> <span data-ttu-id="5366a-254">Вместо указания имен блоков можно использовать следующий синтаксис: "/{гуид = GUID}/ \[ n \] {GUID = GUID}/счема: тагидентифиер"</span><span class="sxs-lookup"><span data-stu-id="5366a-254">The following syntax can be used in place of providing block names: "/{guid=GUID}/\[n\]{guid=GUID}/schema:tagidentifier"</span></span>

<span data-ttu-id="5366a-255">В следующей таблице приведены некоторые недопустимые примеры и причины, по которым они будут отклонены.</span><span class="sxs-lookup"><span data-stu-id="5366a-255">The following table provides some invalid examples and the reasons they would be rejected.</span></span> 

| <span data-ttu-id="5366a-256">Недопустимое выражение</span><span class="sxs-lookup"><span data-stu-id="5366a-256">Invalid Expression</span></span>         | <span data-ttu-id="5366a-257">Описание отклонения</span><span class="sxs-lookup"><span data-stu-id="5366a-257">Rejection description</span></span>                                                                                                                                                  |
|----------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5366a-258">/ИФД/ \[ 0 \] \[ 2 \] EXIF/</span><span class="sxs-lookup"><span data-stu-id="5366a-258">/ifd/\[0\]\[2\]exif/</span></span>       | <span data-ttu-id="5366a-259">Отклонено, так как многомерные индексы массивов не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="5366a-259">Rejected because multi dimensional array indexes are not supported.</span></span>                                                                                                    |
| <span data-ttu-id="5366a-260">/ИФД/{ушорт = 1}/{ушорт = 2}</span><span class="sxs-lookup"><span data-stu-id="5366a-260">/ifd/{ushort=1}/{ushort=2}</span></span> | <span data-ttu-id="5366a-261">Отклонено, если IFD имеет tagID = 1, который является обработчиком метаданных, содержащим элемент метаданных с tagID = 2.</span><span class="sxs-lookup"><span data-stu-id="5366a-261">Rejected unless the IFD has a tagID=1 which is a metadata handler that contains a metadata item with a tagID=2.</span></span>                                                        |
| <span data-ttu-id="5366a-262">/{ушорт = 1}</span><span class="sxs-lookup"><span data-stu-id="5366a-262">/{ushort=1}</span></span>                | <span data-ttu-id="5366a-263">Отклонено, если обработка запроса выполняется относительно верхнего уровня иерархии метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-263">Rejected if the query processing is relative to a top level of the metadata hierarchy.</span></span> <span data-ttu-id="5366a-264">Это связано с тем, что верхний уровень содержит только блоки метаданных, а не элементы данных.</span><span class="sxs-lookup"><span data-stu-id="5366a-264">This is because the top level contains only metadata blocks and not data items.</span></span> |



 

## <a name="photo-metadata-policy-expressions"></a><span data-ttu-id="5366a-265">Выражения политики метаданных фотографий</span><span class="sxs-lookup"><span data-stu-id="5366a-265">Photo Metadata Policy Expressions</span></span>

<span data-ttu-id="5366a-266">Как отмечалось ранее, полное выражение запроса начинается с косой черты (/).</span><span class="sxs-lookup"><span data-stu-id="5366a-266">As noted previously, a fully qualified query expression starts with a slash (/).</span></span> <span data-ttu-id="5366a-267">Выражения, не начинающиеся с косой черты, оцениваются как выражения политики.</span><span class="sxs-lookup"><span data-stu-id="5366a-267">Expressions that do not begin with the slash are evaluated as policy expressions.</span></span> <span data-ttu-id="5366a-268">Выражение политики позволяет запрашивать метаданные фотографий для [свойств оболочки](https://msdn.microsoft.com/library/ms788673(VS.85).aspx)Windows, связанных с изображением.</span><span class="sxs-lookup"><span data-stu-id="5366a-268">A policy expression enables you to query the photo metadata for image-related Windows [Shell Properties](https://msdn.microsoft.com/library/ms788673(VS.85).aspx).</span></span> <span data-ttu-id="5366a-269">В разделе "Выбор данных" выше в этом документе выражение "/КСМП/КСМП: Оценка" использовалось для доступа к свойству рейтинга XMP.</span><span class="sxs-lookup"><span data-stu-id="5366a-269">In the Data Selection section earlier in this document, the expression "/xmp/xmp:Rating" was used to access the XMP rating property.</span></span> <span data-ttu-id="5366a-270">Это свойство можно также запрашивать с помощью следующего выражения политики:</span><span class="sxs-lookup"><span data-stu-id="5366a-270">This property can also be queried using the following policy expression:</span></span>

-   <span data-ttu-id="5366a-271">System. Симплератинг</span><span class="sxs-lookup"><span data-stu-id="5366a-271">System.SimpleRating</span></span>

<span data-ttu-id="5366a-272">Чтобы получить доступ к свойству рейтинга из схемы Микрософтфото, можно использовать следующее выражение запроса:</span><span class="sxs-lookup"><span data-stu-id="5366a-272">To access the rating property from the MicrosoftPhoto schema, the following query expression can be used:</span></span>

-   <span data-ttu-id="5366a-273">System. Оценка</span><span class="sxs-lookup"><span data-stu-id="5366a-273">System.Rating</span></span>

<span data-ttu-id="5366a-274">Выражения политики метаданных фотографий работают не так, как в полностью определенных запросах метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-274">Photo metadata policy expressions behave differently from fully qualified metadata queries in a few notable ways.</span></span>

<span data-ttu-id="5366a-275">Во-первых, при доступе к метаданным с помощью выражения политики компонент WIC выполняет арбитраж и разрешение конфликтов в случае, если одно и то же свойство доступно в нескольких блоках метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-275">First, when accessing metadata using a policy expression, WIC performs arbitration and conflict resolution in the case that the same property is available in multiple metadata blocks.</span></span> <span data-ttu-id="5366a-276">Например, значения Микрософтфото и оценки XMP хранятся как в блоке APP1/IFD, так и в блоке XMP.</span><span class="sxs-lookup"><span data-stu-id="5366a-276">For instance, both the MicrosoftPhoto and the XMP rating values are stored in both the App1/IFD block and the XMP block.</span></span> <span data-ttu-id="5366a-277">Политика метаданных фотографий определяет приоритет, при котором значение блока возвращается при чтении метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-277">The photo metadata policy determines the precedence for which block value is returned when reading metadata.</span></span> <span data-ttu-id="5366a-278">При написании метаданных политика метаданных фотографий гарантирует, что одни и те же свойства в разных блоках будут одинаковыми.</span><span class="sxs-lookup"><span data-stu-id="5366a-278">When you are writing metadata, the photo metadata policy ensures that the same properties in different blocks are consistent.</span></span> <span data-ttu-id="5366a-279">При использовании запроса к метаданным, например "/КСМП/КСМП: Оценка", вы несете ответственность за арбитратинг между различными расположениями метаданных.</span><span class="sxs-lookup"><span data-stu-id="5366a-279">If you use a metadata query such as "/xmp/xmp:Rating", you are responsible for arbitrating between the various metadata locations.</span></span>

> [!Note]  
> <span data-ttu-id="5366a-280">Список поддерживаемых выражений политики и их политик сопоставления см. в разделе о [политиках метаданных фотографий](photo-metadata-policies.md) .</span><span class="sxs-lookup"><span data-stu-id="5366a-280">For a list of the supported policy expressions and their mapping policies, see the [Photo Metadata Policies](photo-metadata-policies.md) topic.</span></span>

 

<span data-ttu-id="5366a-281">Во вторых, выражения политики метаданных фотографий не зависят от формата изображения, а полные запросы метаданных — нет.</span><span class="sxs-lookup"><span data-stu-id="5366a-281">Second, photo metadata policy expressions are independent of the image format, while fully qualified metadata queries are not.</span></span> <span data-ttu-id="5366a-282">Например, запрос «/КСМП/КСМП: Оценка» относится к формату JPEG.</span><span class="sxs-lookup"><span data-stu-id="5366a-282">For example, the "/xmp/xmp:Rating" query is specific to the JPEG format.</span></span> <span data-ttu-id="5366a-283">Изображения в формате TIFF также поддерживают метаданные XMP, но хранятся по-разному по сравнению с форматом JPEG, поэтому запрос TIFF будет иметь вид "/ИФД/КСМП/КСМП: рейтинг".</span><span class="sxs-lookup"><span data-stu-id="5366a-283">TIFF images also support XMP metadata, but it is stored differently compared to JPEG, so the TIFF query would be “/ifd/xmp/xmp:Rating”.</span></span> <span data-ttu-id="5366a-284">Однако в обоих случаях выражение политики будет иметь вид "System. Симплератинг".</span><span class="sxs-lookup"><span data-stu-id="5366a-284">However, in both cases the policy expression would be “System.SimpleRating”.</span></span>

<span data-ttu-id="5366a-285">Выражения политики метаданных фотографий обеспечивают более высокий уровень абстракции и простоты по сравнению с полными запросами к метаданным, поэтому они должны быть предпочтительными в случаях, когда не требуется доступ к метаданным низкого уровня.</span><span class="sxs-lookup"><span data-stu-id="5366a-285">Photo metadata policy expressions provide a higher level of abstraction and simplicity when compared to fully qualified metadata queries, and so should be preferred in cases where low-level metadata access is not needed.</span></span> <span data-ttu-id="5366a-286">Однако выражения политики предоставляют доступ только к ограниченному набору метаданных изображения, тогда как язык запросов метаданных обеспечивает доступ практически ко всем метаданным, хранящимся в файле изображения.</span><span class="sxs-lookup"><span data-stu-id="5366a-286">However, policy expressions only provide access to a limited set of image metadata, whereas the metadata query language provides access to nearly all of the metadata stored within an image file.</span></span>

## <a name="metadata-query-language-summary"></a><span data-ttu-id="5366a-287">Сводка по языку запросов метаданных</span><span class="sxs-lookup"><span data-stu-id="5366a-287">Metadata Query Language Summary</span></span>

<span data-ttu-id="5366a-288">Следующая таблица является формальным определением языка запросов метаданных WIC.</span><span class="sxs-lookup"><span data-stu-id="5366a-288">The following table is a formal definition of the WIC metadata query language.</span></span> <span data-ttu-id="5366a-289">Каждый символ грамматики представляет выражение, состоящие из других символов.</span><span class="sxs-lookup"><span data-stu-id="5366a-289">Each grammar symbol represents an expression made up of other symbols.</span></span> <span data-ttu-id="5366a-290">Выражение может быть другим символом или последовательностью других символов, разделенных вертикальной чертой ( \| ), указывающей на вариант "или".</span><span class="sxs-lookup"><span data-stu-id="5366a-290">The expression can be another symbol or a sequence of other symbols separated by the vertical bar (\|), indicating an "or" choice.</span></span> <span data-ttu-id="5366a-291">Полное выражение справа — возможная подстановка для указанного символа слева.</span><span class="sxs-lookup"><span data-stu-id="5366a-291">The whole expression on the right is a possible substitution for the specified symbol on the left.</span></span> 

| <span data-ttu-id="5366a-292">Символ</span><span class="sxs-lookup"><span data-stu-id="5366a-292">Symbol</span></span>                   | <span data-ttu-id="5366a-293">Expression</span><span class="sxs-lookup"><span data-stu-id="5366a-293">Expression</span></span>                                                                                                                                                                  |
|--------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \<path>             | <span data-ttu-id="5366a-294">\<name> \| '/' \<property path></span><span class="sxs-lookup"><span data-stu-id="5366a-294">\<name> \| '/' \<property path></span></span>                                                                                                                                   |
| \<property path>    | <span data-ttu-id="5366a-295">\<metadata item> \| \<property path> '/' \<property path></span><span class="sxs-lookup"><span data-stu-id="5366a-295">\<metadata item> \| \<property path> '/' \<property path></span></span>                                                                                                    |
| \<metadata item>    | <span data-ttu-id="5366a-296">\<index name> \| \<item name> \| \<schema name> ':' \<item name></span><span class="sxs-lookup"><span data-stu-id="5366a-296">\<index name> \| \<item name> \| \<schema name> ':' \<item name></span></span>                                                                                        |
| \<schema name>      | \<item name>                                                                                                                                                           |
| \<item name>        | <span data-ttu-id="5366a-297">\<metadata item> \| <indexed item><index></span><span class="sxs-lookup"><span data-stu-id="5366a-297">\<metadata item> \| <indexed item><index></span></span>                                                                                                                  |
| \<indexed item>     | <span data-ttu-id="5366a-298">\<item> \| \<implied metadata>\<item></span><span class="sxs-lookup"><span data-stu-id="5366a-298">\<item> \| \<implied metadata>\<item></span></span>                                                                                                                        |
| \<implied metadata> | <span data-ttu-id="5366a-299">"<" \<name> > "</span><span class="sxs-lookup"><span data-stu-id="5366a-299">'<'\<name>'>'</span></span>                                                                                                                                                    |
| \<item>             | <span data-ttu-id="5366a-300">\<name> \| \<index> \<data> \| \<data></span><span class="sxs-lookup"><span data-stu-id="5366a-300">\<name> \| \<index> \<data> \| \<data></span></span>                                                                                                                  |
| \<data>             | <span data-ttu-id="5366a-301">'{' \<data type> '=' \<value> '}'</span><span class="sxs-lookup"><span data-stu-id="5366a-301">'{' \<data type> '=' \<value> '}'</span></span>                                                                                                                                 |
| \<index>            | <span data-ttu-id="5366a-302">'\[' \<number> \| \<star> '\]'</span><span class="sxs-lookup"><span data-stu-id="5366a-302">'\[' \<number> \| \<star> '\]'</span></span>                                                                                                                                    |
| \<data type>        | <span data-ttu-id="5366a-303">' char ' \| ' Учар ' \| ' Short ' ' \| UShort ' \| ' длинное ' \| ulong ' \| ' int ' \| ' uint ' \| ' лонглонг ' \| ' улонглонг ' \| ' float ' \| ' Double ' ' \| str ' \| ' встр ' \| ' GUID ' ' \| bool '</span><span class="sxs-lookup"><span data-stu-id="5366a-303">'char' \| 'uchar' \| 'short' \| 'ushort' \| 'long' \| 'ulong' \| 'int' \| 'uint' \| 'longlong' \| 'ulonglong' \| 'float' \| 'double' \| 'str' \| 'wstr' \| 'guid' \| 'bool'</span></span> |
| \<data value>       | <span data-ttu-id="5366a-304">\<number> \| \<name> \| \<guid></span><span class="sxs-lookup"><span data-stu-id="5366a-304">\<number> \| \<name> \| \<guid></span></span>                                                                                                                              |
| \<star>             | <span data-ttu-id="5366a-305">'\*'</span><span class="sxs-lookup"><span data-stu-id="5366a-305">'\*'</span></span>                                                                                                                                                                        |
| \<number>           | <span data-ttu-id="5366a-306">number</span><span class="sxs-lookup"><span data-stu-id="5366a-306">number</span></span>                                                                                                                                                                      |
| \<name>             | <span data-ttu-id="5366a-307">строка</span><span class="sxs-lookup"><span data-stu-id="5366a-307">string</span></span>                                                                                                                                                                      |
| \<guid>             | <span data-ttu-id="5366a-308">guid</span><span class="sxs-lookup"><span data-stu-id="5366a-308">guid</span></span>                                                                                                                                                                        |



 

## <a name="related-topics"></a><span data-ttu-id="5366a-309">См. также</span><span class="sxs-lookup"><span data-stu-id="5366a-309">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="5366a-310">**Зрения**</span><span class="sxs-lookup"><span data-stu-id="5366a-310">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="5366a-311">Общие сведения о компоненте создания образов Windows</span><span class="sxs-lookup"><span data-stu-id="5366a-311">Windows Imaging Component Overview</span></span>](-wic-about-windows-imaging-codec.md)
</dt> <dt>

[<span data-ttu-id="5366a-312">Общие сведения о метаданных компонента WIC</span><span class="sxs-lookup"><span data-stu-id="5366a-312">WIC Metadata Overview</span></span>](-wic-about-metadata.md)
</dt> <dt>

[<span data-ttu-id="5366a-313">Общие сведения о чтении и записи метаданных изображений</span><span class="sxs-lookup"><span data-stu-id="5366a-313">Overview of Reading and Writing Image Metadata</span></span>](-wic-codec-readingwritingmetadata.md)
</dt> <dt>

[<span data-ttu-id="5366a-314">Общие сведения о расширяемости метаданных</span><span class="sxs-lookup"><span data-stu-id="5366a-314">Metadata Extensibility Overview</span></span>](-wic-codec-metadatahandlers.md)
</dt> <dt>

[<span data-ttu-id="5366a-315">Пошаговое руководство. повторное кодирование изображения JPEG с помощью метаданных</span><span class="sxs-lookup"><span data-stu-id="5366a-315">How-to: Re-encode a JPEG Image with Metadata</span></span>](-wic-codec-jpegmetadataencoding.md)
</dt> </dl>

 

 



