---
description: В этом разделе содержится обзор запросов на языке запросов метаданных для чтения и записи метаданных, поддерживаемых изображениями в формате GIF, PNG, TIFF и JPEG.
ms.assetid: a6ab1708-dd82-4960-b908-f1daef7374ef
title: Запросы метаданных встроенных форматов изображений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4be5e9c0f853e4c5e48fb5eb41f2d2ab27b4f4d6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105647549"
---
# <a name="native-image-format-metadata-queries"></a>Запросы метаданных встроенных форматов изображений

В этом разделе содержится обзор запросов на [языке запросов метаданных](-wic-codec-metadataquerylanguage.md) для чтения и записи метаданных, поддерживаемых изображениями в формате GIF, PNG, TIFF и JPEG. Он содержит метаданные, относящиеся к каждому формату изображения, а также метаданные, поддерживаемые несколькими форматами.

В этом разделе содержатся следующие подразделы.

-   [Предварительные условия](#prerequisites)
-   [Выражение политики метаданных фото](#photo-metadata-policy-expression)
-   [Определенные метаданные формата файла](#file-format-specific-metadata)
    -   [Метаданные GIF](#gif-metadata)
    -   [Метаданные PNG](#png-metadata)
    -   [Метаданные TIFF](#tiff-metadata)
    -   [Метаданные JPEG](#jpeg-metadata)
-   [Независимые метаданные формата файла](#file-format-independent-metadata)
    -   [Метаданные IFD](#ifd-metadata)
    -   [Метаданные EXIF](#exif-metadata)
    -   [Метаданные GPS](#gps-metadata)
    -   [Метаданные XMP](#xmp-metadata)
-   [См. также](#related-topics)

## <a name="prerequisites"></a>Предварительные условия

Чтобы понять этот раздел, необходимо ознакомиться с системой метаданных компонента Windows Imaging Component (WIC), как описано в статье [Общие сведения о метаданных WIC](-wic-about-metadata.md). Также следует ознакомиться с языком запросов, используемым для чтения и записи метаданных, как описано в разделе [Общие сведения о языке запросов метаданных](-wic-codec-metadataquerylanguage.md).

## <a name="photo-metadata-policy-expression"></a>Выражение политики метаданных фото

Помимо поддержки языка запросов метаданных, [WIC](-wic-api.md) также принимает канонические имена свойств из [системы свойств Windows](../properties/windows-properties-system.md). WIC поддерживает подмножество пространства имен свойств Windows, которое относится к форматам изображений, как описано в разделе [политики метаданных фотографий](photo-metadata-policies.md). Свойство Windows, используемое в качестве запроса метаданных WIC, называется выражением политики метаданных фотографии.

Например, выражение политики метаданных Photo для флага ориентации EXIF имеет значение:

-   [System. фото. Orientation](-wic-photoprop-system-photo-orientation.md)

Как правило, выражения политики рекомендуется использовать в собственных запросах метаданных для общих элементов метаданных изображения, охваченных пространством имен свойств Windows. Язык запросов метаданных лучше всего подходит для случаев, когда требуется доступ низкого уровня к конкретным элементам метаданных изображения или для настраиваемых или расширенных элементов метаданных, которые не поддерживаются системой свойств Windows. Дополнительные сведения см. в разделе [выражения политики метаданных фотографий](-wic-codec-metadataquerylanguage.md).

## <a name="file-format-specific-metadata"></a>Определенные метаданные формата файла

В следующих разделах содержатся таблицы, в которых перечислены доступные запросы к метаданным для каждого типа файлов изображений. Каждая таблица содержит следующие столбцы.

-   **Path** — путь к запросу, используемый для получения элемента метаданных.
-   **Имя** — имя элемента метаданных.
-   **Type** — тип элемента метаданных, полученного из пути запроса. Метаданные, получаемые [компонентом WIC](-wic-api.md) , возвращаются в виде пропвариант, который сообщает о типе данных с помощью перечисления VarType. on.

Пути запросов используются API метаданных WIC для доступа к внедренным метаданным изображения. В следующем примере кода демонстрируется использование [**ивикметадатакуериреадер**](/windows/desktop/api/Wincodec/nn-wincodec-iwicmetadataqueryreader) для запроса блока метаданных IFD в формате JPEG.


```
// Not shown: image decoding 
IWICMetadataQueryReader *pQueryReader = NULL;
IWICMetadataQueryReader *pIFDReader = NULL;

// Get the query reader.
if (SUCCEEDED(hr))
{
    hr = pFrameDecode->GetMetadataQueryReader(&pQueryReader);
}

if (SUCCEEDED(hr))
{
    // Get the nested IFD reader.
    hr = pQueryReader->GetMetadataByName(L"/app1/ifd", &value);
    if (value.vt == VT_UNKNOWN)
    {
        hr = value.punkVal->QueryInterface(IID_IWICMetadataQueryReader, (void **)&pIFDReader);
    }
    PropVariantClear(&value); // Clear value for new query.
}
```



### <a name="gif-metadata"></a>Метаданные GIF

Формат изображений в формате GIF поддерживает метаданные на уровне Global и Frame. В следующих двух разделах приведены пути к запросам метаданных, доступным для метаданных уровня Global и Frame в формате GIF.

> [!Note]  
> Полный список метаданных GIF и более подробные сведения см. в [стандарте GIF](https://www.w3.org/Graphics/GIF/spec-gif89a.txt) на веб-сайте W3C.

 

### <a name="global-metadata"></a>Глобальные метаданные

В следующей таблице приведены доступные пути запросов к метаданным, которые можно использовать для доступа к глобальным метаданным GIF.



| Путь                                               | Имя                       | Тип                                |
|----------------------------------------------------|----------------------------|-------------------------------------|
| /комментекст или/ \[ \* \] комментекст, где \* = 0 – N | Расширение комментария          | \_Неизвестная VT — средство чтения и записи запросов |
| /комментекст/текстентри                              |                            | VT \_ LPSTR                           |
| /логскрдеск                                        | Описание логического экрана | \_Неизвестная VT — средство чтения и записи запросов |
| /логскрдеск/сигнатуре                              |                            | VT \_ UI1 \| VT \_ Vector               |
| /логскрдеск/видс                                  |                            | VT \_ UI2                             |
| /логскрдеск/хеигхт                                 |                            | VT \_ UI2                             |
| /логскрдеск/глобалколортаблефлаг                   |                            | Логическое значение VT \_                            |
| /логскрдеск/колорресолутион                        |                            | VT \_ UI1                             |
| /логскрдеск/сортфлаг                               |                            | Логическое значение VT \_                            |
| /логскрдеск/глобалколортаблесизе                   |                            | VT \_ UI1                             |
| /логскрдеск/баккграундколориндекс                   |                            | VT \_ UI1                             |
| /логскрдеск/пикселаспектратио                       |                            | VT \_ UI1                             |
| /аппекст или/ \[ \* \] аппекст, где \* = 0 – N         | Расширение приложения      | \_Неизвестная VT — средство чтения и записи запросов |
| /аппекст/аппликатион                                |                            | VT \_ UI1 \| VT \_ Vector               |
| /аппекст/дата                                       |                            | VT \_ UI1 \| VT \_ Vector               |



 

### <a name="frame-metadata"></a>Метаданные кадра

В следующей таблице приведены доступные пути запросов метаданных, которые можно использовать для доступа к метаданным на уровне кадра GIF.



| Путь                            | Имя                      | Тип                              |
|---------------------------------|---------------------------|-----------------------------------|
| /грктлекст                       | Расширение графического элемента управления | Неизвестный модуль \_ чтения и записи запросов VT |
| /грктлекст/диспосал              |                           | VT \_ UI1                           |
| /грктлекст/усеринпутфлаг         |                           | Логическое значение VT \_                          |
| /грктлекст/транспаренцифлаг      |                           | Логическое значение VT \_                          |
| /грктлекст/делай                 |                           | VT \_ UI2                           |
| /грктлекст/транспарентколориндекс |                           | VT \_ UI1                           |
| /имгдеск                        | Дескриптор образа          | Неизвестный модуль \_ чтения и записи запросов VT |
| /имгдеск/лефт                   |                           | VT \_ UI2                           |
| /имгдеск/топ                    |                           | VT \_ UI2                           |
| /имгдеск/видс                  |                           | VT \_ UI2                           |
| /имгдеск/хеигхт                 |                           | VT \_ UI2                           |
| /имгдеск/локалколортаблефлаг    |                           | Логическое значение VT \_                          |
| /имгдеск/интерлацефлаг          |                           | Логическое значение VT \_                          |
| /имгдеск/сортфлаг               |                           | Логическое значение VT \_                          |
| /имгдеск/локалколортаблесизе    |                           | VT \_ UI1                           |



 

### <a name="png-metadata"></a>Метаданные PNG

Формат изображений PNG поддерживает метаданные на уровне кадров.

> [!Note]  
> Полный список метаданных PNG и более подробные сведения см. в [стандарте PNG](https://www.w3.org/TR/PNG/) на веб-сайте W3C.

 

### <a name="frame-metadata"></a>Метаданные кадра

В следующей таблице приведены доступные пути запросов метаданных, которые можно использовать для доступа к метаданным на уровне кадров в формате PNG.



| Путь                                                   | Имя             | Тип                                      |
|--------------------------------------------------------|------------------|-------------------------------------------|
| /Text или \[ \* \] tEXt, где \* = 0 – N                 | Фрагмент текста       | \_Устройство чтения и записи неизвестного текстового запроса VT    |
| /Текст/{стр = \* } Where \* = Определение ключевого слова для текста |                  | VT \_ LPSTR                                 |
| /гама                                                  | Фрагмент Гама       | VT \_ Unknown-Гама/модуль чтения запросов    |
| /гама/имажегамма                                       |                  | VT \_ UI4                                   |
| /иткст или/ \[ \* \] иткст, где \* = 0 – N                 | Фрагмент итекст      | VT \_ Unknown-иткст/модуль чтения запросов    |
| /иткст/кэйворд                                          |                  | VT \_ LPSTR                                 |
| /иткст/компрессионфлаг                                  |                  | VT \_ UI1                                   |
| /иткст/лангуажетаг                                      |                  | LPSTR                                     |
| /иткст/транслатедкэйворд                                |                  | LPWSTR                                    |
| /иткст/текстентри                                        |                  | LPWSTR                                    |
| /чрм                                                  | Фрагмент ХРМ        | VT \_ Unknown-ЧРМ/модуль чтения запросов    |
| /чрм/вхитепоинткс                                      |                  | VT \_ UI4                                   |
| /чрм/вхитепоинти                                      |                  | VT \_ UI4                                   |
| /чрм/редкс                                             |                  | VT \_ UI4                                   |
| /чрм/реди                                             |                  | VT \_ UI4                                   |
| /чрм/гринкс                                           |                  | VT \_ UI4                                   |
| /чрм/грини                                           |                  | VT \_ UI4                                   |
| /чрм/блуекс                                            |                  | VT \_ UI4                                   |
| /чрм/блуэй                                            |                  | VT \_ UI4                                   |
| /сргб                                                  | sRGB Чак       | \_Устройство чтения и записи запросов VT-неизвестное    |
| /сргб/рендерингинтент                                  |                  | VT \_ UI1                                   |
| /тиме                                                  | Фрагмент времени       | \_Средство чтения и записи неизвестных запросов VT    |
| /тиме/еар                                             |                  | VT \_ UI2                                   |
| /тиме/монс                                            |                  | VT \_ UI1                                   |
| /тиме/дай                                              |                  | VT \_ UI1                                   |
| /тиме/хаур                                             |                  | VT \_ UI1                                   |
| /тиме/минуте                                           |                  | VT \_ UI1                                   |
| /тиме/секонд                                           |                  | VT \_ UI1                                   |
| /бкгд                                                  | Фоновый фрагмент | VT \_ Unknown-бкгб/модуль чтения запросов    |
| /бкгд/баккграундколор                                  |                  | VT \_ UI1, VT \_ UI2 или VT \_ UI2 \| VT \_ |
| /хист                                                  | Фрагмент Хист       | VT \_ Unknown-хист/модуль чтения запросов    |
| /хист/фрекуенЦиес                                      |                  | VT \_ вектор \| VT \_ UI2                     |
| /иккп                                                  | Фрагмент Иккп       | VT \_ Unknown-иккп/модуль чтения запросов    |
| /иккп/профиленаме                                      |                  | VT \_ LPSTR                                 |
| /иккп/профиледата                                      |                  | VT \_ вектор \| VT \_ UI1                     |



 

### <a name="tiff-metadata"></a>Метаданные TIFF

Формат изображений в формате TIFF поддерживает метаданные на уровне кадров.

> [!Note]  
> Полный список метаданных TIFF и подробные сведения см. [в разделе стандарт TIFF](https://www.adobe.io/content/dam/udp/en/open/standards/tiff/TIFF6.pdf).

 

### <a name="frame-metadata"></a>Метаданные кадра

В следующей таблице приведены доступные пути запросов метаданных, которые можно использовать для доступа к метаданным на уровне кадров в формате TIFF.



| Путь                                          | Имя            | Тип                                |
|-----------------------------------------------|-----------------|-------------------------------------|
| /ифд                                          | 0 IFD           | \_Неизвестная VT — средство чтения и записи запросов |
| /ИФД/{ушорт = \* } \* , где = 0 – 65535        | Запись IFD по ИДЕНТИФИКАТОРу | Переменная                            |
| /ИФД/СУМБ или/ИФД/{ушорт = 330}               | Эскиз IFD   | \_Неизвестная VT — средство чтения и записи запросов |
| /ИФД/КСМП или/ИФД/{ушорт = 700}                 | ПОДДЕРЖИВАЮЩ             | \_Неизвестная VT — средство чтения и записи запросов |
| /ИФД/ексиф или/ИФД/{ушорт = 34665}              | EXIF            | \_Неизвестная VT — средство чтения и записи запросов |
| /ИФД/ГПС или/ИФД/{ушорт = 34853}               | GPS             | \_Неизвестная VT — средство чтения и записи запросов |
| /ИФД/ексиф/Интероп или/ИФД/ексиф/{ушорт = 40965} | Interop         | \_Неизвестная VT — средство чтения и записи запросов |
| /ИФД/иптк или/ИФД/{ушорт = 33723}              | IPTC            | \_Неизвестная VT — средство чтения и записи запросов |
| /ИФД/иптк/{стр = \* } Where \* = "ключевое слово" IPTC    | Запись IPTC      | Переменная                            |
| /ifd/irb/8bimiptc/iptc                        | IPTC            | \_Неизвестная VT — средство чтения и записи запросов |
| /IFD/IRB/8bimiptc/IPTC/{str = \* }               | Запись IPTC      | Переменная                            |



 

### <a name="jpeg-metadata"></a>Метаданные JPEG

Формат изображения JPEG поддерживает метаданные на уровне кадров.

> [!Note]  
> Полный список метаданных JPEG и более подробные сведения см. в разделе [стандартный формат Exif](http://www.cipa.jp/std/documents/e/DC-008-2010_E.pdf).

 

### <a name="frame-metadata"></a>Метаданные кадра

В следующей таблице приведены доступные пути запросов метаданных, которые можно использовать для доступа к метаданным на уровне кадров в формате JPEG.



| Путь                                                               | Имя                 | Тип                                          |
|--------------------------------------------------------------------|----------------------|-----------------------------------------------|
| /app0                                                              | App0                 | VT \_ Unknown-APP0/модуль чтения запросов        |
| /APP0/{ushort = 0}                                                   | Версия              | VT \_ UI2                                       |
| /APP0/{ushort = 1}                                                   | единиц(ы)                | VT \_ UI1                                       |
| /APP0/{ushort = 2}                                                   | DpiX                 | VT \_ UI2                                       |
| /APP0/{ushort = 3}                                                   | DpiY                 | VT \_ UI2                                       |
| /APP0/{ushort = 4}                                                   | кссумбнаил           | VT \_ UI1                                       |
| /APP0/{ushort = 5}                                                   | исумбнаил           | VT \_ UI1                                       |
| /APP0/{ushort = 6}                                                   | сумбнаилдата        | \_большой двоичный объект VT                                      |
| /APP1                                                              | Приложение 1                 | \_Устройство чтения и записи запросов VT Unknown-App1        |
| /APP1/IFD или/APP1/{ushort = 0}                                     | 0 IFD                | \_Неизвестная программа VT — средство чтения и записи запросов IFD         |
| /APP1/IFD/EXIF или/APP1/IFD/{ushort = 34665}                         | EXIF IFD             | \_Неизвестная программа VT — средство чтения и записи запросов EXIF        |
| /APP1/Thumb или/APP1/{ushort = 1}                                   | Эскиз IFD        | VT \_ Unknown-субифд/модуль чтения запросов      |
| /app13                                                             | App13                | VT \_ Unknown-App13/модуль чтения запросов       |
| /APP13/IRB или/APP13/{ushort = 0}                                    | ирб                  | VT \_ Unknown-ИРБ/модуль чтения запросов         |
| /APP13/IRB/{ULONGLONG = \* } с \* идентификатором = ИРБ (см. спецификацию ИРБ) | Запись ИРБ            | VT \_ Unknown — неизвестный модуль чтения и записи запросов     |
| /APP13/IRB/{ULONGLONG = \* }/{}                                       | Содержимое записи ИРБ   | \_большой двоичный объект VT                                      |
| /APP13/IRB/8bimiptc или/APP13/IRB/{ULONGLONG = 61857348781060}       | 8BIMIPTC             | VT \_ Unknown-8BIMIPTC/модуль чтения запросов    |
| /app13/irb/8bimiptc/iptc                                           | IPTC                 | \_Неизвестная программа VT — читатель или модуль записи IPTC Query        |
| /APP13/IRB/8bimiptc/IPTC/{str = \* }                                  | Запись IPTC           | Переменная                                      |
| /app13/irb/8bimResInfo или/APP13/IRB/{ULONGLONG = 61857348781037}    | Сведения о разрешении 8BIM | Неизвестный модуль \_ чтения и записи запросов VT             |
| /app13/irb/8bimResInfo/PString                                     |                      | VT \_ LPSTR                                     |
| /app13/irb/8bimResInfo/HResolution                                 |                      | VT \_ UI4                                       |
| /app13/irb/8bimResInfo/VResolution                                 |                      | VT \_ UI4                                       |
| /app13/irb/8bimResInfo/WidthUnit                                   |                      | VT \_ UI2                                       |
| /app13/irb/8bimResInfo/HeightUnit                                  |                      | VT \_ UI2                                       |
| /app13/irb/8bimResInfo/HResolutionUnit                             |                      | VT \_ UI2                                       |
| /app13/irb/8bimResInfo/VResolutionUnit                             |                      | VT \_ UI2                                       |
| /com                                                               | Комментарий JPEG         | \_Устройство чтения и записи запросов неизвестного комментария VT     |
| /ком/текстентри                                                     |                      | LPSTR                                         |
| /луминанце                                                         | Luminance            | \_Устройство чтения и записи неизвестных запросов VT   |
| /луминанце/таблинтри                                              |                      | VT \_ UI1 \| VT \_ Vector                         |
| /чроминанце                                                       | Chrominance          | VT \_ Unknown-чроминанце/модуль чтения запросов |
| /чроминанце/таблинтри                                            |                      | VT \_ UI1 \| VT \_ Vector                         |
| /ксмп                                                               | ПОДДЕРЖИВАЮЩ                  | VT \_ Unknown — модуль чтения и записи запросов XMP         |



 

## <a name="file-format-independent-metadata"></a>Независимые метаданные формата файла

В следующих разделах содержатся сведения о форматах метаданных, поддерживаемых несколькими форматами изображений. Каждая таблица содержит следующие столбцы.

-   **Относительный путь** — путь запроса, используемый для получения элемента метаданных относительно блока метаданных.
-   **Имя** — имя элемента метаданных.
-   **Type** — тип элемента метаданных, полученного из пути запроса. Метаданные, получаемые [компонентом WIC](-wic-api.md) , возвращаются в виде пропвариант, который сообщает о типе данных с помощью перечисления VarType.

> [!Note]  
> Таблицы содержат только относительный путь для доступа к элементу метаданных в определенном формате метаданных. Чтобы получить полный запрос метаданных, добавьте этот относительный путь в запрос блока метаданных для определенного формата метаданных.

 

Например, чтобы получить доступ к флагу [ориентации](-wic-photoprop-system-photo-orientation.md) в JPEG-файле, используйте следующее выражение:

-   /APP1/IFD/{ushort = 274}

В TIFF-файле используйте следующее выражение:

-   /ИФД/{ушорт = 274}

Обратите внимание, что в этом примере разные форматы изображений могут хранить определенный блок метаданных по-разному, поэтому полный запрос метаданных для доступа к определенному элементу метаданных может быть указан в формате изображения. Просмотрите таблицу каждого формата, чтобы найти соответствующий запрос метаданных для доступа к определенному блоку метаданных.

### <a name="ifd-metadata"></a>Метаданные IFD

Объект IFD или каталог файлов изображений — это структура данных, определенная в стандарте TIFF, который может содержать метаданные изображения. Он идентифицирует каждый элемент метаданных с помощью тега типа ushort. JPEG, TIFF и JPEG-XR поддерживают метаданные IFD. Форматы сторонних производителей, например некоторые форматы Camera RAW, также могут поддерживать метаданные IFD.

В этой таблице приведены относительные пути запросов метаданных для доступа к некоторым часто используемым элементам метаданных IFD. Структура данных IFD обеспечивает расширяемость третьих сторон, и эта таблица не является исчерпывающим списком. Дополнительные сведения см. в стандарте TIFF.

> [!Note]  
> Хотя формат JPEG и другие форматы поддерживают структуру данных IFD, они могут не использовать все определяемые им элементы метаданных. Дополнительные сведения см. в стандартном формате.

 

> [!Note]  
> Для определенных элементов метаданных в таблице здесь требуется дополнительная интерпретация или информация для правильного использования. см. стандарт TIFF. Например, элемент метаданных [фотометриЦинтерпретатион](-wic-photoprop-system-photo-photometricinterpretation.md) возвращает ПРОПВАРИАНТ типа VT \_ UI2. Однако в соответствии со стандартом TIFF он интерпретируется как перечисление. Дополнительные сведения см. в стандарте TIFF.

 



| Относительный путь   | Имя                      | Тип                                           |
|-----------------|---------------------------|------------------------------------------------|
| /{ушорт = 256}   | имажевидс                | VT \_ UI2 или VT \_ UI4                             |
| /{ушорт = 257}   | имажеленгс               | VT \_ UI2 или VT \_ UI4                             |
| /{ушорт = 258}   | BitsPerSample             | VT \_ UI2                                        |
| /{ушорт = 259}   | Сжатие               | VT \_ UI2                                        |
| /{ушорт = 262}   | фотометриЦинтерпретатион | VT \_ UI2                                        |
| /{ушорт = 274}   | Orientation               | VT \_ UI2                                        |
| /{ушорт = 277}   | самплесперпиксел           | VT \_ UI2                                        |
| /{ушорт = 284}   | планарконфигуратион       | VT \_ UI2                                        |
| /{ушорт = 530}   | икбкрсубсамплинг          | VT \_ вектор \| VT \_ UI2                          |
| /{ушорт = 531}   | икбкрпоситионинг          | VT \_ UI2                                        |
| /{ушорт = 282}   | ксресолутион               | VT \_ UI8                                        |
| /{ушорт = 283}   | иресолутион               | VT \_ UI8                                        |
| /{ушорт = 296}   | ресолутионунит            | VT \_ UI2                                        |
| /{ушорт = 306}   | Дата/время                  | VT \_ LPSTR                                      |
| /{ушорт = 270}   | ImageDescription          | VT \_ LPSTR                                      |
| /{ушорт = 271}   | Производитель                      | VT \_ LPSTR                                      |
| /{ушорт = 272}   | Модель                     | VT \_ LPSTR                                      |
| /{ушорт = 305}   | Программное обеспечение                  | VT \_ LPSTR                                      |
| /{ушорт = 315}   | Исполнител                    | VT \_ LPSTR                                      |
| /{ушорт = 33432} | Авторские права                 | VT \_ LPSTR                                      |
| /{ушорт = 338}   | екстрасамплес              | VT \_ UI2                                        |
| /{ушорт = 254}   | невсубфилетипе            | VT \_ UI4                                        |
| /{ушорт = 278}   | ровсперстрип              | VT \_ UI2 или VT \_ UI4                             |
| /{ушорт = 279}   | стрипбитекаунтс           | VT \_ vector \| VT \_ UI2 или VT \_ vector \| \_ UI4 |
| /{ушорт = 273}   | стрипоффсетс              | VT \_ vector \| VT \_ UI2 или VT \_ vector \| \_ UI4 |



 

### <a name="exif-metadata"></a>Метаданные EXIF

Метаданные EXIF определяются как часть спецификации файла EXIF в формате JPEG. Метаданные EXIF основаны на структуре данных IFD, как определено в стандарте TIFF, и предоставляют дополнительные атрибуты, такие как сведения об устройствах и графических атрибутах, используемых для создания изображения. Он идентифицирует каждый элемент метаданных с помощью тега типа ushort. JPEG, TIFF и JPEG-XR поддерживают метаданные EXIF. Форматы сторонних производителей, например некоторые форматы Camera RAW, также могут поддерживать метаданные EXIF.

В следующей таблице приведены относительные пути запросов метаданных для доступа к некоторым часто используемым элементам метаданных EXIF. Структура данных EXIF обеспечивает расширяемость третьих сторон, и эта таблица не является исчерпывающим списком. Дополнительные сведения см. в стандарте EXIF.

> [!Note]  
> Многие элементы метаданных EXIF определены в стандарте EXIF как Type "РАЦИОНАЛЬНый" или "СРАТИОНАЛ". "РАЦИОНАЛЬНый" состоит из числителя и знаменателя, оба из которых являются 32ми беззнаковыми целыми числами. Числитель содержится в старших 32 бит, а знаменатель — в младших 32 битах. В [WIC](-wic-api.md)эти данные возвращаются как пропвариант с типом VT \_ UI8 или VT \_ , соответственно. фактическое значение сохраняется как уларже \_ целое число или большое \_ целое число соответственно. Чтобы получить доступ к числителю и знаменателю, прочитайте элементы Хигхпарт и Ловпарт целочисленного или целочисленного \_ \_ значения уларже.

 

> [!Note]  
> Некоторые элементы метаданных в таблице ниже, для правильного использования которых требуется дополнительная интерпретация или информация. Например, элемент метаданных [колорспаце](-wic-photoprop-system-image-colorspace.md) возвращает ПРОПВАРИАНТ типа VT \_ UI2. Однако в соответствии со стандартом EXIF он интерпретируется как перечисление. Дополнительные сведения см. в стандарте EXIF.

 



| Относительный путь   | Имя                      | Тип                  |
|-----------------|---------------------------|-----------------------|
| /{ушорт = 36864} | ексифверсион               | \_большой двоичный объект VT              |
| /{ушорт = 40960} | флашпиксверсион           | \_большой двоичный объект VT              |
| /{ушорт = 40961} | колорспаце                | VT \_ UI2               |
| /{ушорт = 40962} | пикселксдименсион           | VT \_ UI2 или VT \_ UI4    |
| /{ушорт = 40963} | пикселидименсион           | VT \_ UI2 или VT \_ UI4    |
| /{ушорт = 37500} | макерноте                 | \_большой двоичный объект VT              |
| /{ушорт = 37510} | усеркоммент               | VT \_ LPWSTR            |
| /{ушорт = 36867} | датетимеоригинал          | VT \_ LPSTR             |
| /{ушорт = 36868} | датетимедигитизед         | VT \_ LPSTR             |
| /{ушорт = 42016} | Imageuniqueid)             | VT \_ LPSTR             |
| /{ушорт = 42032} | камераовнернаме           | VT \_ LPSTR             |
| /{ушорт = 42033} | бодисериалнумбер          | VT \_ LPSTR             |
| /{ушорт = 42034} | ленсспеЦификатион         | VT \_ вектор \| VT \_ UI8 |
| /{ушорт = 42035} | ленсмаке                  | VT \_ LPSTR             |
| /{ушорт = 42036} | ленсмодел                 | VT \_ LPSTR             |
| /{ушорт = 42037} | ленссериалнумбер          | VT \_ LPSTR             |
| /{ушорт = 33434} | експосуретиме              | VT \_ UI8               |
| /{ушорт = 33437} | фнумбер                   | VT \_ UI8               |
| /{ушорт = 34850} | експосурепрограм           | VT \_ UI2               |
| /{ушорт = 34852} | спектралсенситивити       | VT \_ LPSTR             |
| /{ушорт = 34855} | фотографиксенситивити   | VT \_ вектор \| VT \_ UI2 |
| /{ушорт = 34856} | оекф                      | \_большой двоичный объект VT              |
| /{ушорт = 34864} | сенситивититипе           | VT \_ UI2               |
| /{ушорт = 34865} | стандардаутпутсенситивити | VT \_ UI4               |
| /{ушорт = 34866} | рекоммендедекспосуреиндекс  | VT \_ UI4               |
| /{ушорт = 34867} | исоспид                  | VT \_ UI4               |
| /{ушорт = 34868} | исоспидлатитудэйии       | VT \_ UI4               |
| /{ушорт = 34869} | исоспидлатитудеззз       | VT \_ UI4               |
| /{ушорт = 37377} | шуттерспидвалуе         | VT \_ i8                |
| /{ушорт = 37378} | апертуревалуе             | VT \_ UI8               |
| /{ушорт = 37379} | бригхтнессвалуе           | VT \_ i8                |
| /{ушорт = 37380} | експосуребиасвалуе         | VT \_ i8                |
| /{ушорт = 37381} | максапертуревалуе          | VT \_ UI8               |
| /{ушорт = 37382} | субжектдистанце           | VT \_ UI8               |
| /{ушорт = 37383} | метерингмоде              | VT \_ UI2               |
| /{ушорт = 37384} | лигхтсаурце               | VT \_ UI2               |
| /{ушорт = 37385} | Flash                     | VT \_ UI2               |
| /{ушорт = 37386} | фокалленгс               | VT \_ UI8               |
| /{ушорт = 37396} | субжектареа               | VT \_ вектор \| VT \_ UI2 |
| /{ушорт = 41483} | флашенерги               | VT \_ UI8               |
| /{ушорт = 41484} | спатиалфрекуенциреспонсе  | \_большой двоичный объект VT              |
| /{ушорт = 41486} | фокалпланексресолутион     | VT \_ UI8               |
| /{ушорт = 41487} | фокалпланэйресолутион     | VT \_ UI8               |
| /{ушорт = 41488} | фокалпланересолутионунит  | VT \_ UI2               |
| /{ушорт = 41492} | субжектлокатион           | VT \_ вектор \| VT \_ UI2 |
| /{ушорт = 41493} | експосуреиндекс             | VT \_ UI8               |
| /{ушорт = 41495} | сенсингмесод             | VT \_ UI2               |
| /{ушорт = 41728} | FileSource                | \_большой двоичный объект VT              |
| /{ушорт = 41729} | сценетипе                 | \_большой двоичный объект VT              |
| /{ушорт = 41730} | кфапаттерн                | \_большой двоичный объект VT              |
| /{ушорт = 41985} | кустомрендеред            | VT \_ UI2               |
| /{ушорт = 41986} | експосуремоде              | VT \_ UI2               |
| /{ушорт = 41987} | WhiteBalance              | VT \_ UI2               |
| /{ушорт = 41988} | дигиталзумратио          | VT \_ UI8               |
| /{ушорт = 41989} | FocalLengthIn35mmFilm     | VT \_ UI2               |
| /{ушорт = 41990} | сценекаптуретипе          | VT \_ UI2               |
| /{ушорт = 41991} | гаинконтрол               | VT \_ UI8               |
| /{ушорт = 41992} | Контраст                  | VT \_ UI2               |
| /{ушорт = 41993} | Насыщенность                | VT \_ UI2               |
| /{ушорт = 41994} | Четкость                 | VT \_ UI2               |
| /{ушорт = 41995} | девицесеттингдескриптион  | \_большой двоичный объект VT              |
| /{ушорт = 41996} | субжектдистанцеранже      | VT \_ UI2               |



 

### <a name="gps-metadata"></a>Метаданные GPS

Метаданные GPS содержат сведения о географическом расположении и определяются как часть спецификации JPEG в формате "EXIF". Он идентифицирует каждый элемент метаданных с помощью тега типа ushort. JPEG, TIFF и JPEG-XR поддерживают метаданные GPS; форматы сторонних производителей, например некоторые форматы Camera RAW, также могут поддерживать метаданные GPS.

В следующей таблице приведены относительные пути запросов метаданных для доступа к некоторым часто используемым элементам метаданных GPS. Эта таблица не является исчерпывающим списком. Дополнительные сведения см. в стандарте EXIF.

> [!Note]  
> Многие элементы метаданных GPS определяются в стандарте EXIF как тип "РАЦИОНАЛЬНый". "РАЦИОНАЛЬНый" состоит из числителя и знаменателя, оба из которых являются 32ми беззнаковыми целыми числами. Числитель содержится в старших 32 бит, а знаменатель — в младших 32 битах. В [WIC](-wic-api.md)они возвращаются в виде пропвариант с типом VT \_ UI8. Фактическое значение хранится в виде УЛАРЖЕ \_ целого числа. Чтобы получить доступ к числителю и знаменателю, прочитайте элементы Хигхпарт и Ловпарт \_ целочисленного значения уларже.

 

> [!Note]  
> В некоторых элементах метаданных в таблице для правильного использования требуется дополнительная интерпретация или информация. Например, элемент метаданных Гпслатитудереф возвращает ПРОПВАРИАНТ типа VT \_ LPSTR. Согласно стандарту EXIF, эта строка имеет значение "N" или "S", представляющее север или Юго-Широта. Дополнительные сведения см. в стандарте EXIF.

 



| Относительный путь | Имя            | Тип                                          |
|---------------|-----------------|-----------------------------------------------|
| {ushort = 0}    | гпсверсионид    | VT \_ вектор \| VT \_ UI1                         |
| {ushort = 1}    | гпслатитудереф  | VT \_ LPSTR                                     |
| {ushort = 2}    | гпслатитуде     | VT \_ вектор \| VT \_ UI8                         |
| {ushort = 3}    | гпслонгитудереф | VT \_ LPSTR                                     |
| {ushort = 4}    | гпслонгитуде    | {ushort = 4} Гпслонгитуде VT \_ vector \| VT \_ UI8 |
| {ushort = 5}    | гпсалтитудереф  | VT \_ UI1                                       |
| {ushort = 6}    | гпсалтитуде     | VT \_ UI8                                       |
| {ushort = 7}    | гпстиместамп    | VT \_ вектор \| VT \_ UI8                         |
| {ushort = 8}    | гпссателлитес   | VT \_ LPSTR                                     |
| {ushort = 9}    | гпсстатус       | VT \_ LPSTR                                     |
| {ushort = 10}   | гпсмеасуремоде  | VT \_ LPSTR                                     |
| {ushort = 11}   | гпсдоп          | VT \_ UI8                                       |
| {ushort = 12}   | гпсспидреф     | VT \_ LPSTR                                     |
| {ushort = 13}   | гпсспид        | VT \_ UI8                                       |
| {ushort = 14}   | гпстраккреф     | VT \_ LPSTR                                     |
| {ushort = 15}   | гпстракк        | VT \_ UI8                                       |



 

### <a name="xmp-metadata"></a>Метаданные XMP

XMP — это расширяемый стандарт метаданных на основе XML. Элементы метаданных могут быть иерархическими и содержать сложные структуры данных. JPEG, TIFF и JPEG-XR поддерживают метаданные XMP. Форматы сторонних производителей, например некоторые форматы Camera RAW, также могут поддерживать метаданные XMP.

Стандарт XMP можно получить по следующим параметрам: <https://www.adobe.com/devnet/xmp.html> .

XMP и позволяет сторонним сущностям публиковать собственные схемы или пространства имен, позволяющие им определять новые элементы метаданных без необходимости изменения стандарта XMP. Схема XMP уникально идентифицируется по URL-адресу, но [WIC](-wic-api.md) предоставляет набор понятных идентификаторов для хорошо известных схем.

Элементы метаданных XMP идентифицируются по строковому имени, а также к идентификатору схемы. В каждом запросе метаданных XMP рекомендуется указывать как схему, так и имя. Если идентификатор схемы отсутствует, то JPEG будет пытаться сопоставить имя метаданных во всех пространствах имен, имеющихся в пакете метаданных XMP.

Например, чтобы получить свойство рейтинга, определенное в схеме XMP, в JPEG-изображении, используйте следующий запрос:

-   /КСМП/{встр =https://ns.adobe.com/xap/1.0/}:Rating

Первая часть "/КСМП" получает для образа модуль чтения метаданных XMP/Writer. " https://ns.adobe.com/xap/1.0/ " — это URL-адрес схемы XMP, как определено в стандарте XMP. URL-адрес заключается в выражении данных, чтобы разрешить использование таких символов, как косая черта (/). Наконец, "Оценка" — это фактическое имя элемента метаданных, определенное в схеме XMP, которое отделяется от идентификатора схемы двоеточием (:).

В этом примере компонент WIC предоставляет понятный идентификатор для схемы XMP, который можно использовать вместо полного URL-адреса. Таким образом, предыдущий запрос может быть переписан следующим образом:

-   /КСМП/КСМП: Оценка

[Компонент WIC](-wic-api.md) предоставляет удобные префиксы схемы для следующих часто используемых схем:



| Префикс схемы  | URL-адрес схемы                                        | Ссылка на стандартный                                         |
|----------------|---------------------------------------------------|----------------------------------------------------------|
| RDF            | https://www.w3.org/1999/02/22-rdf-syntax-ns\#      | <https://www.w3.org/TR/REC-rdf-syntax/>                   |
| dc             | https://purl.org/dc/elements/1.1/                  | <https://www.adobe.com/devnet/xmp.html>                   |
| поддерживающ            | https://ns.adobe.com/xap/1.0/                      | <https://www.adobe.com/devnet/xmp.html>                   |
| ксмпидк         | https://ns.adobe.com/xmp/Identifier/qual/1.0/      | <https://www.adobe.com/devnet/xmp.html>                   |
| ксмпригхтс      | https://ns.adobe.com/xap/1.0/rights/               | <https://www.adobe.com/devnet/xmp.html>                   |
| ксмпмм          | https://ns.adobe.com/xap/1.0/mm/                   | <https://www.adobe.com/devnet/xmp.html>                   |
| ксмпбж          | https://ns.adobe.com/xap/1.0/bj/                   | <https://www.adobe.com/devnet/xmp.html>                   |
| ксмптпг         | https://ns.adobe.com/xap/1.0/t/pg/                 | <https://www.adobe.com/devnet/xmp.html>                   |
| pdf            | https://ns.adobe.com/pdf/1.3/                      | <https://www.adobe.com/devnet/xmp.html>                   |
| программы      | https://ns.adobe.com/photoshop/1.0/                | <https://www.adobe.com/devnet/xmp.html>                   |
| tiff           | https://ns.adobe.com/tiff/1.0/                     | <https://www.adobe.com/devnet/xmp.html>                   |
| EXIF           | https://ns.adobe.com/exif/1.0/                     | <https://www.adobe.com/devnet/xmp.html>                   |
| стдим          | https://ns.adobe.com/xap/1.0/sType/Dimensions\#    | <https://www.adobe.com/devnet/xmp.html>                   |
| ксапгимг        | https://ns.adobe.com/xap/1.0/g/img/                | <https://www.adobe.com/devnet/xmp.html>                   |
| стевт          | https://ns.adobe.com/xap/1.0/sType/ResourceEvent\# | <https://www.adobe.com/devnet/xmp.html>                   |
| стреф          | https://ns.adobe.com/xap/1.0/sType/ResourceRef\#   | <https://www.adobe.com/devnet/xmp.html>                   |
| ствер          | https://ns.adobe.com/xap/1.0/sType/Version\#       | <https://www.adobe.com/devnet/xmp.html>                   |
| стжоб          | https://ns.adobe.com/xap/1.0/sType/Job\#           | <https://www.adobe.com/devnet/xmp.html>                   |
| дополнительный            | https://ns.adobe.com/exif/1.0/aux/                 | <https://www.adobe.com/devnet/xmp.html>                   |
| запросы            | https://ns.adobe.com/camera-raw-settings/1.0/      | <https://www.adobe.com/devnet/xmp.html>                   |
| ксмпдм          | https://ns.adobe.com/xmp/1.0/DynamicMedia/         | <https://www.adobe.com/devnet/xmp.html>                   |
| Iptc4xmpCore   | https://iptc.org/std/Iptc4xmpCore/1.0/xmlns/       | <https://www.iptc.org/cms/site/index.html?channel=CH0099> |
| микрософтфото | https://ns.microsoft.com/photo/1.0/                | [Общие сведения о разметке пользователей](-wic-people-tagging.md)       |
| MP             | https://ns.microsoft.com/photo/1.2/                | [Общие сведения о разметке пользователей](-wic-people-tagging.md)       |
| мпри           | https://ns.microsoft.com/photo/1.2/t/RegionInfo\#  | [Общие сведения о разметке пользователей](-wic-people-tagging.md)       |
| мпрег          | https://ns.microsoft.com/photo/1.2/t/Region\#      | [Общие сведения о разметке пользователей](-wic-people-tagging.md)       |



 

Если для конкретной схемы нет понятного префикса схемы, например если изображение содержит метаданные XMP с помощью пользовательской схемы стороннего разработчика, то запрос метаданных должен использовать полный URL-адрес схемы.

## <a name="related-topics"></a>См. также

<dl> <dt>

**Зрения**
</dt> <dt>

[Общие сведения о компоненте создания образов Windows](-wic-about-windows-imaging-codec.md)
</dt> <dt>

[Общие сведения о метаданных компонента WIC](-wic-about-metadata.md)
</dt> <dt>

[Общие сведения о языке запросов метаданных](-wic-codec-metadataquerylanguage.md)
</dt> <dt>

[Общие сведения о расширяемости метаданных](-wic-codec-metadatahandlers.md)
</dt> <dt>

[Пошаговое руководство. повторное кодирование изображения JPEG с помощью метаданных](-wic-codec-jpegmetadataencoding.md)
</dt> </dl>

 

 
