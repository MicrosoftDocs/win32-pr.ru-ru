---
title: Шрифты переменных OpenType
description: В этом разделе описываются переменные шрифтов OpenType, их поддержка в DirectWrite и Direct2D, а также способы их использования в приложении. .
ms.assetid: 788558a7-efe7-b075-942f-ac75a5b86b84
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 60a9e6bdf27da0d70841973515636736859294dd
ms.sourcegitcommit: af9983bab40fe0b042f177ce7ca79f2eb0f9d0e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "103913967"
---
# <a name="opentype-variable-fonts"></a><span data-ttu-id="a89e1-104">Шрифты переменных OpenType</span><span class="sxs-lookup"><span data-stu-id="a89e1-104">OpenType Variable Fonts</span></span>

<span data-ttu-id="a89e1-105">В этом разделе описываются переменные шрифтов OpenType, их поддержка в DirectWrite и Direct2D, а также способы их использования в приложении.</span><span class="sxs-lookup"><span data-stu-id="a89e1-105">This topic describes OpenType variable fonts, their support in DirectWrite and Direct2D, and how to use them in your app.</span></span> 

-   [<span data-ttu-id="a89e1-106">Что такое переменные шрифты OpenType?</span><span class="sxs-lookup"><span data-stu-id="a89e1-106">What are OpenType variable fonts?</span></span>](#what-are-opentype-variable-fonts)
-   [<span data-ttu-id="a89e1-107">Поддержка шрифтов переменных OpenType в DirectWrite</span><span class="sxs-lookup"><span data-stu-id="a89e1-107">OpenType variable font support in DirectWrite</span></span>](#opentype-variable-font-support-in-directwrite)
-   [<span data-ttu-id="a89e1-108">Использование переменных шрифтов OpenType</span><span class="sxs-lookup"><span data-stu-id="a89e1-108">Using OpenType variable fonts</span></span>](#using-opentype-variable-fonts)

## <a name="what-are-opentype-variable-fonts"></a><span data-ttu-id="a89e1-109">Что такое переменные шрифты OpenType?</span><span class="sxs-lookup"><span data-stu-id="a89e1-109">What are OpenType variable fonts?</span></span>

<span data-ttu-id="a89e1-110">Версия 1,8 [спецификации формата шрифтов OpenType](https://www.microsoft.com/typography/otspec/) предоставила новое расширение в формате, известном как [варианты шрифтов OpenType](/typography/opentype/spec/otvaroverview).</span><span class="sxs-lookup"><span data-stu-id="a89e1-110">Version 1.8 of the [OpenType font format specification](https://www.microsoft.com/typography/otspec/) introduced a new extension to the format known as [OpenType Font Variations](/typography/opentype/spec/otvaroverview).</span></span> <span data-ttu-id="a89e1-111">Шрифты, использующие эти расширения, называются переменными шрифтами OpenType.</span><span class="sxs-lookup"><span data-stu-id="a89e1-111">Fonts that use these extensions are known as OpenType variable fonts.</span></span> <span data-ttu-id="a89e1-112">Переменная шрифта OpenType — это один шрифт, который может вести себя как несколько шрифтов с помощью непрерывной интерполяции между различными макетами, определенными в одном шрифте.</span><span class="sxs-lookup"><span data-stu-id="a89e1-112">An OpenType variable font is a single font that can behave like several fonts by using continuous interpolation between different designs, all defined within the single font.</span></span>

<span data-ttu-id="a89e1-113">Шрифт переменной OpenType может определять непрерывную вариацию своего дизайна по одной или нескольким независимым осям, таким как вес или ширина:</span><span class="sxs-lookup"><span data-stu-id="a89e1-113">An OpenType variable font can define continuous variation of its design along one or more independent axes, such as weight or width:</span></span> 

 

![Показывает шрифт переменной OpenType с использованием буквы "G" и показывает различные вариации вдоль горизонтальной и вертикальной оси толщины.](images/opentype-width-weight.png)

<span data-ttu-id="a89e1-115">Разработчик шрифта определяет набор осей вариаций для использования в определенном шрифте.</span><span class="sxs-lookup"><span data-stu-id="a89e1-115">A font developer determines a set of variation axes to use in a given font.</span></span> <span data-ttu-id="a89e1-116">Эти оси могут включать набор хорошо известных (или "зарегистрированных") осей вариации, например веса и ширины, но они также могут включать произвольные настраиваемые оси вариации, определенные разработчиком шрифта.</span><span class="sxs-lookup"><span data-stu-id="a89e1-116">These axes can include a set of well-known (or “registered”) axes of variation, such as weight and width, but they can also include arbitrary, custom axes of variation defined by the font developer.</span></span>  

<span data-ttu-id="a89e1-117">Если выбрать набор осей вариантов для шрифта, разработчик шрифта определяет абстрактное, n-мерный размер варианта проектирования для шрифта.</span><span class="sxs-lookup"><span data-stu-id="a89e1-117">By selecting a set of variation axes for a font, the font developer defines an abstract, n-dimensional space of design variation for the font.</span></span> <span data-ttu-id="a89e1-118">Текстовые обработчики могут задавать потенциально любую точку или "экземпляр" внутри этого непрерывного пространства для размещения и отрисовки текста.</span><span class="sxs-lookup"><span data-stu-id="a89e1-118">Text engines can specify potentially any position, or “instance”, within that continuous space for laying out and rendering text.</span></span> 

<span data-ttu-id="a89e1-119">Разработчик шрифта также может выбирать и назначать имена определенным экземплярам в пространстве конструктивных вариантов. они называются именованными экземплярами.</span><span class="sxs-lookup"><span data-stu-id="a89e1-119">The font developer can also select and assign names to particular instances within the design-variation space; these are referred to as “named instances”.</span></span> <span data-ttu-id="a89e1-120">Например, шрифт с вариацией веса может поддерживать непрерывную вариацию между очень светлой и очень большой обводкой, тогда как разработчик шрифта выбрал определенные весовые коэффициенты и присвоить им имена, такие как «Light», «Regular» и «полужирный».</span><span class="sxs-lookup"><span data-stu-id="a89e1-120">For example, a font with weight variation may support continuous variation between very light and very heavy strokes, while the font developer has selected particular weights along that continuum and assigned names to them, such as “Light”, “Regular” and “Semibold”.</span></span> 

<span data-ttu-id="a89e1-121">Формат шрифта переменной OpenType использует таблицы данных, находящиеся в традиционных шрифтах OpenType, а также некоторые дополнительные таблицы, описывающие изменение значений различных элементов данных для разных экземпляров.</span><span class="sxs-lookup"><span data-stu-id="a89e1-121">The OpenType variable font format uses data tables found in traditional OpenType fonts plus certain additional tables that describe how the values of various data items change for different instances.</span></span> <span data-ttu-id="a89e1-122">Формат определяет один экземпляр варианта как "экземпляр по умолчанию", который использует традиционные таблицы для получения значений по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a89e1-122">The format designates one variation instance as a “default instance”, which uses traditional tables to get default values.</span></span> <span data-ttu-id="a89e1-123">Все остальные экземпляры зависят от данных по умолчанию и других разностных данных.</span><span class="sxs-lookup"><span data-stu-id="a89e1-123">All other instances depend on the default data plus other delta data.</span></span> <span data-ttu-id="a89e1-124">Например, таблица "глиф" может иметь описание номинальной фигуры глифа, которая является фигурой, используемой для экземпляра по умолчанию, а таблица "гвар" будет описывать, как контрольные точки Безье для глифа корректируются для других экземпляров.</span><span class="sxs-lookup"><span data-stu-id="a89e1-124">For example, a ‘glyf’ table can have a Bezier-curve description of a nominal glyph shape, which is the shape used for the default instance, while a ‘gvar’ table will describe how the Bezier control points for the glyph are adjusted for other instances.</span></span> <span data-ttu-id="a89e1-125">Аналогичным образом, другие значения шрифта могут иметь номинальное значение плюс разностные данные, описывающие изменение этих значений для разных экземпляров. Например, x-Height и другие метрики на уровне шрифта или метки, зависящие от глифов, и корректировки кернинга.</span><span class="sxs-lookup"><span data-stu-id="a89e1-125">Similarly, other font values can have a nominal value plus delta data describing how those values change for different instances; for example, x-height and other font-wide metrics, or glyph-specific mark-anchoring positions and kerning adjustments.</span></span> 

<span data-ttu-id="a89e1-126">Так как переменные шрифты могут поддерживать произвольный набор осей вариаций, им требуется расширяемая модель семейств шрифтов, которая более точно отражает, как разработчики шрифтов создают семейства шрифтов: семейство шрифтов определяется именем семейства и определенными характеристиками структуры, которые являются постоянными, с произвольным числом (определяется разработчиком шрифта) способами, в которых структура может различаться.</span><span class="sxs-lookup"><span data-stu-id="a89e1-126">Because variable fonts can support an arbitrary set of variation axes, they require an extensible model of font families that more directly reflects how font designers create families of fonts: a font family is defined by a family name and certain design characteristics that are constant, with an arbitrary number (determined by the font developer) of ways in which the design can vary.</span></span> <span data-ttu-id="a89e1-127">Можно создать одно семейство шрифтов с вариантами веса, но можно создать другое семейство шрифтов с вариантами для x-высоты, Serif-size, "функинесс" или любым разработчиком шрифта.</span><span class="sxs-lookup"><span data-stu-id="a89e1-127">One font family may be created with variants for weight, but a different font family may be created with variants for x-height, serif-size, “funkiness”, or whatever the font developer wishes.</span></span> <span data-ttu-id="a89e1-128">В этой модели выбор начертания шрифта лучше описать с помощью общего, или «предпочитаемого» или «типографского» имени семейства, а также набора пар «ключ-значение», каждый из которых представляет разновидность и конкретное значение, с видами вариаций в общем виде расширяемым набором.</span><span class="sxs-lookup"><span data-stu-id="a89e1-128">In this model, a font face selection is best described using the general, or “preferred” or "typographic", family name plus a set of key-value pairs, each representing a kind of variation and specific value, with the kinds of variation in general being an extensible set.</span></span> <span data-ttu-id="a89e1-129">Это общее понятие семейства шрифтов может применяться к традиционным, непеременным шрифтам, а также к переменным шрифтам.</span><span class="sxs-lookup"><span data-stu-id="a89e1-129">This general notion of a font family can apply to traditional, non-variable fonts as well as to variable fonts.</span></span> <span data-ttu-id="a89e1-130">Например, в рамках этой общей модели для типографской гарнитуры семейство «Селавик VF» может иметь вариации для веса, оптического размера и засечек с такими экземплярами, как «Semilight Banner Sans».</span><span class="sxs-lookup"><span data-stu-id="a89e1-130">For example, under this general, typographic family model, a family "Selawik VF" might have variations for weight, optical size and serif design, with instances such as "Semilight Banner Sans".</span></span> 

<span data-ttu-id="a89e1-131">Однако некоторые существующие реализации программного обеспечения, включая существующие API DirectWrite, могут быть спроектированы с учетом более ограниченной модели семейств шрифтов.</span><span class="sxs-lookup"><span data-stu-id="a89e1-131">Some existing software implementations, however, including existing DirectWrite APIs, may be designed assuming a more limited model of font families.</span></span> <span data-ttu-id="a89e1-132">Например, некоторые приложения могут предположить, что семейство шрифтов может иметь, по крайней мере, обычный, полужирный, курсив и полужирный курсив.</span><span class="sxs-lookup"><span data-stu-id="a89e1-132">For example, some applications may assume that a font family can have, at most, Regular, Bold, Italic and Bold Italic variants.</span></span> <span data-ttu-id="a89e1-133">Существующие интерфейсы [**идвритефонтколлектион**](/windows/win32/api/dwrite/nn-dwrite-idwritefontcollection) и [**идвритефонтфамили**](/windows/win32/api/dwrite/nn-dwrite-idwritefontfamily) предполагают использование модели семейства веса, растяжения и стиля ("WSS"), что позволяет указать варианты в семействе с помощью стиля [**\_ шрифта \_ дврите**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_weight), [**Дврите \_ \_ растяжения шрифтов**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_stretch) или перечислений [**\_ шрифтов \_ дврите**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_style) в качестве параметров.</span><span class="sxs-lookup"><span data-stu-id="a89e1-133">The existing [**IDWriteFontCollection**](/windows/win32/api/dwrite/nn-dwrite-idwritefontcollection) and [**IDWriteFontFamily**](/windows/win32/api/dwrite/nn-dwrite-idwritefontfamily) interfaces assume a weight/stretch/style (“WSS”) family model, allowing for variants within a family to be specified using the [**DWRITE\_FONT\_WEIGHT**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_weight), [**DWRITE\_FONT\_STRETCH**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_stretch) or [**DWRITE\_FONT\_STYLE**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_style) enumerations as parameters.</span></span> <span data-ttu-id="a89e1-134">Выполнив предыдущий пример, оси оптического и засечек не будут рассматриваться как внутренние оси в модели WSS.</span><span class="sxs-lookup"><span data-stu-id="a89e1-134">Taking the previous example, the optical size and serif axes would not be treated as family-internal axes of variation in the WSS model.</span></span> 

<span data-ttu-id="a89e1-135">Для полной поддержки переменных шрифтов потребуются API, позволяющие указать член семейства с потенциально несколькими параметрами, как определено шрифтом.</span><span class="sxs-lookup"><span data-stu-id="a89e1-135">Complete support for variable fonts would require APIs that allow a family member to be specified with potentially several parameters, as determined by the font.</span></span> <span data-ttu-id="a89e1-136">Однако существующие схемы API могут обеспечить частичную поддержку переменных шрифтов путем проецирования именованных экземпляров, определенных в переменном шрифте, в более ограниченные модели семейства шрифтов.</span><span class="sxs-lookup"><span data-stu-id="a89e1-136">But existing API designs may be able to provide partial support for variable fonts by projecting the named instances defined in a variable font into the more-limited font-family models.</span></span> <span data-ttu-id="a89e1-137">В предыдущем примере "Селавик VF Semilight Banner Sans" может быть проецирован в модель WSS как семейство "Селавик VF Banner Sans" с "Semilight" в качестве варианта веса.</span><span class="sxs-lookup"><span data-stu-id="a89e1-137">In the previous example, "Selawik VF Semilight Banner Sans" could be projected into the WSS model as a "Selawik VF Banner Sans" family with "Semilight" as a weight variant.</span></span> 

<span data-ttu-id="a89e1-138">В качестве другого примера рассмотрим типографскую гарнитуру, например Ситка, с вариантами веса и оптического размера.</span><span class="sxs-lookup"><span data-stu-id="a89e1-138">For another example, consider a typographic font family such as Sitka, with weight and optical size variants.</span></span> <span data-ttu-id="a89e1-139">Именованные варианты в семействе включают обычный текст Ситка и Ситканый баннер (а также многие другие).</span><span class="sxs-lookup"><span data-stu-id="a89e1-139">Named variants within the family include Sitka Text Regular and Sitka Banner Bold (plus many others).</span></span> <span data-ttu-id="a89e1-140">Название семьи "Ситка", а названия этих вариантов в модели гарнитуры — "обычный текст" и "баннер полужирный".</span><span class="sxs-lookup"><span data-stu-id="a89e1-140">The typographic family name is “Sitka” while the face names for these variants in the typographic family model would be “Text Regular” and “Banner Bold”.</span></span> <span data-ttu-id="a89e1-141">Модели семейства из четырех элементов и WSS не поддерживают варианты оптического размера в семействе, поэтому различия в оптическом размере должны рассматриваться как различия на уровне семейства.</span><span class="sxs-lookup"><span data-stu-id="a89e1-141">The four-member and WSS family models do not allow for optical size variants within a family, and so optical-size distinctions must be treated like family-level distinctions.</span></span> <span data-ttu-id="a89e1-142">В следующей таблице показано, как в модели семейства WSS будут рассматриваться выбранные шрифты из Ситка типографских продуктов.</span><span class="sxs-lookup"><span data-stu-id="a89e1-142">The following table illustrates how a selection of fonts from the Sitka typographic family would be treated in the WSS family model:</span></span> 



<span data-ttu-id="a89e1-143">Модель семейства типографских</span><span class="sxs-lookup"><span data-stu-id="a89e1-143">Typographic family model</span></span>

<span data-ttu-id="a89e1-144">Модель семейства WSS</span><span class="sxs-lookup"><span data-stu-id="a89e1-144">WSS family model</span></span>

<span data-ttu-id="a89e1-145">Семейство</span><span class="sxs-lookup"><span data-stu-id="a89e1-145">Family</span></span>

<span data-ttu-id="a89e1-146">Распознавание лиц</span><span class="sxs-lookup"><span data-stu-id="a89e1-146">Face</span></span>

<span data-ttu-id="a89e1-147">Семейство</span><span class="sxs-lookup"><span data-stu-id="a89e1-147">Family</span></span>

<span data-ttu-id="a89e1-148">Распознавание лиц</span><span class="sxs-lookup"><span data-stu-id="a89e1-148">Face</span></span>

<span data-ttu-id="a89e1-149">ситка</span><span class="sxs-lookup"><span data-stu-id="a89e1-149">Sitka</span></span>

<span data-ttu-id="a89e1-150">Обычный текст</span><span class="sxs-lookup"><span data-stu-id="a89e1-150">Text Regular</span></span>

<span data-ttu-id="a89e1-151">Ситка текст</span><span class="sxs-lookup"><span data-stu-id="a89e1-151">Sitka Text</span></span>

<span data-ttu-id="a89e1-152">Обычный</span><span class="sxs-lookup"><span data-stu-id="a89e1-152">Regular</span></span>

<span data-ttu-id="a89e1-153">ситка</span><span class="sxs-lookup"><span data-stu-id="a89e1-153">Sitka</span></span>

<span data-ttu-id="a89e1-154">Плакат, полужирный</span><span class="sxs-lookup"><span data-stu-id="a89e1-154">Banner Bold</span></span>

<span data-ttu-id="a89e1-155">Баннер Ситка</span><span class="sxs-lookup"><span data-stu-id="a89e1-155">Sitka Banner</span></span>

<span data-ttu-id="a89e1-156">Жирный</span><span class="sxs-lookup"><span data-stu-id="a89e1-156">Bold</span></span>

<span data-ttu-id="a89e1-157">ситка</span><span class="sxs-lookup"><span data-stu-id="a89e1-157">Sitka</span></span>

<span data-ttu-id="a89e1-158">Курсив заголовка</span><span class="sxs-lookup"><span data-stu-id="a89e1-158">Caption Italic</span></span>

<span data-ttu-id="a89e1-159">Заголовок Ситка</span><span class="sxs-lookup"><span data-stu-id="a89e1-159">Sitka Caption</span></span>

<span data-ttu-id="a89e1-160">Курсив</span><span class="sxs-lookup"><span data-stu-id="a89e1-160">Italic</span></span>



 

<span data-ttu-id="a89e1-161">Проекции имен из типографии в модели семейства WSS можно применять к непеременным шрифтам и к именованным экземплярам переменных шрифтов.</span><span class="sxs-lookup"><span data-stu-id="a89e1-161">The projection of names from a typographic family model to the WSS family model can be applied to non-variable fonts, and to the named instances of variable fonts.</span></span> <span data-ttu-id="a89e1-162">Однако это не может быть сделано для других неименованных экземпляров из области непрерывного проектирования, относящейся к переменному шрифту.</span><span class="sxs-lookup"><span data-stu-id="a89e1-162">This cannot be done, however, for other, non-named instances from the continuous design-variation space of a variable font.</span></span> <span data-ttu-id="a89e1-163">По этой причине поддержка полной функциональности переменных шрифтов потребует использования интерфейсов API, предназначенных для ссылок на лица в типографском семействе, с точки зрения неограниченного набора осей вариаций и значений осей.</span><span class="sxs-lookup"><span data-stu-id="a89e1-163">For this reason, support for the complete functionality of variable fonts will require APIs designed to reference faces within a typographic family in terms of an unconstrained set of variation axes and axis values.</span></span> 

## <a name="opentype-variable-font-support-in-directwrite"></a><span data-ttu-id="a89e1-164">Поддержка шрифтов переменных OpenType в DirectWrite</span><span class="sxs-lookup"><span data-stu-id="a89e1-164">OpenType variable font support in DirectWrite</span></span>

<span data-ttu-id="a89e1-165">Начиная с выпуска обновления Windows 10 Creators, шрифт переменной OpenType по-прежнему очень новый, и поставщики шрифтов, платформы и приложения все еще находятся в процессе реализации нового формата.</span><span class="sxs-lookup"><span data-stu-id="a89e1-165">As of the release of the Windows 10 Creators Update, the OpenType variable font format is still very new, and font vendors, platforms and apps are still in the process of implementing the new format.</span></span> <span data-ttu-id="a89e1-166">Это обновление обеспечивает начальную реализацию для этого формата в DirectWrite.</span><span class="sxs-lookup"><span data-stu-id="a89e1-166">This update provides initial implementation for this format in DirectWrite.</span></span> 

<span data-ttu-id="a89e1-167">Внутренние компоненты DirectWrite были обновлены для поддержки переменных шрифтов OpenType.</span><span class="sxs-lookup"><span data-stu-id="a89e1-167">DirectWrite internals have been updated to support OpenType variable fonts.</span></span> <span data-ttu-id="a89e1-168">Используя текущие API, это обеспечивает поддержку любых именованных экземпляров переменного шрифта.</span><span class="sxs-lookup"><span data-stu-id="a89e1-168">Using current APIs, this provides support for any named instances of a variable font.</span></span> <span data-ttu-id="a89e1-169">Эта поддержка может использоваться для завершения рабочих процессов — от перечисления именованных экземпляров, выбора именованного экземпляра, использования в макете и формировании для подготовки к просмотру и печати.</span><span class="sxs-lookup"><span data-stu-id="a89e1-169">This support can be used for complete workflows — from enumeration of the named instances, selection of a named instance, use in layout and shaping, to rendering and printing.</span></span> <span data-ttu-id="a89e1-170">Для преимуществ приложений, которые также используют текстовое взаимодействие GDI для определенных операций, аналогичная поддержка также была добавлена в существующие API GDI.</span><span class="sxs-lookup"><span data-stu-id="a89e1-170">For the benefit of apps that also use GDI text interop for certain operations, similar support has also been added in existing GDI APIs.</span></span> 

<span data-ttu-id="a89e1-171">В обновлении Windows 10 Creators DirectWrite не поддерживает произвольные экземпляры, использующие возможности постоянной разновидности переменных шрифтов.</span><span class="sxs-lookup"><span data-stu-id="a89e1-171">In the Windows 10 Creators Update, DirectWrite does not support arbitrary instances that utilize the continuous-variation capability of variable fonts.</span></span>

<span data-ttu-id="a89e1-172">Во многих операциях поведение в DirectWrite именованных экземпляров переменного шрифта не может отличаться от поведения непеременных шрифтов.</span><span class="sxs-lookup"><span data-stu-id="a89e1-172">In many operations, the behavior in DirectWrite of named instances of a variable font cannot be distinguished from the behavior of non-variable fonts.</span></span> <span data-ttu-id="a89e1-173">А так как поддержка предоставляется с помощью существующих API-интерфейсов DirectWrite, именованные экземпляры переменных шрифтов могут даже работать во многих существующих приложениях DirectWrite без каких-либо изменений.</span><span class="sxs-lookup"><span data-stu-id="a89e1-173">And since support is provided using existing DirectWrite APIs, the named instances of variable fonts can even work in many existing DirectWrite apps without any changes.</span></span> <span data-ttu-id="a89e1-174">Однако исключения могут применяться в определенных ситуациях.</span><span class="sxs-lookup"><span data-stu-id="a89e1-174">Exceptions may apply, however, in certain situations:</span></span>  

-   <span data-ttu-id="a89e1-175">Если приложение обрабатывает данные шрифтов непосредственно для определенных операций.</span><span class="sxs-lookup"><span data-stu-id="a89e1-175">If an app processes font data directly for certain operations.</span></span> <span data-ttu-id="a89e1-176">Например, если приложение считывает данные структуры глифа непосредственно из файла шрифта для создания определенных визуальных эффектов.</span><span class="sxs-lookup"><span data-stu-id="a89e1-176">For example, if an app reads glyph outline data directly from the font file to create certain visual effects.</span></span>
-   <span data-ttu-id="a89e1-177">Если приложение использует библиотеку сторонних разработчиков для определенных операций.</span><span class="sxs-lookup"><span data-stu-id="a89e1-177">If an app uses a third-party library for certain operations.</span></span> <span data-ttu-id="a89e1-178">Например, если приложение использует DirectWrite для макета, возвращает итоговые индексы и позиции глифов, а затем использует библиотеку стороннего производителя для подготовки к просмотру.</span><span class="sxs-lookup"><span data-stu-id="a89e1-178">For example, if an app uses DirectWrite for layout, to get final glyph indices and positions, but then uses a third-party library for rendering.</span></span>
-   <span data-ttu-id="a89e1-179">Если приложение внедряет данные шрифтов в документ или другой способ передает данные шрифтов в нисходящий процесс.</span><span class="sxs-lookup"><span data-stu-id="a89e1-179">If an app embeds font data into a document or in some other way passes font data to a downstream process.</span></span>

<span data-ttu-id="a89e1-180">Если операции выполняются с использованием реализаций, которые не поддерживают переменные шрифты, то эти операции могут не давать ожидаемых результатов.</span><span class="sxs-lookup"><span data-stu-id="a89e1-180">If operations are performed using implementations that do not support variable fonts, then these operations may not produce the expected results.</span></span> <span data-ttu-id="a89e1-181">Например, позиции глифов могут рассчитываться для одного именованного экземпляра переменной Font, но при этом глифы могут быть отображены с учетом другого именованного экземпляра.</span><span class="sxs-lookup"><span data-stu-id="a89e1-181">For example, glyph positions might be calculated for one named instance of the variable font, but the glyphs might be rendered assuming a different named instance.</span></span> <span data-ttu-id="a89e1-182">В зависимости от реализации приложения результаты могут работать в некоторых контекстах, но не в других контекстах, где могут использоваться другие библиотеки.</span><span class="sxs-lookup"><span data-stu-id="a89e1-182">Depending on application implementation, results may work in some contexts but not in other contexts in which other libraries may be used.</span></span> <span data-ttu-id="a89e1-183">Например, текст может отображаться правильно на экране, но не при печати.</span><span class="sxs-lookup"><span data-stu-id="a89e1-183">For example, text may display correctly on screen, but not when printed.</span></span> <span data-ttu-id="a89e1-184">Если сквозные рабочие процессы реализуются только с помощью DirectWrite, то может потребоваться правильное поведение именованных экземпляров переменного шрифта.</span><span class="sxs-lookup"><span data-stu-id="a89e1-184">If end-to-end workflows are implemented using only DirectWrite, then correct behavior for named instances of a variable font can be expected.</span></span> 

<span data-ttu-id="a89e1-185">Так как существующие API DirectWrite поддерживают выбор начертания с помощью модели веса/растяжения/стиля, именованные экземпляры шрифтов, которые используют другие оси вариации, будут выделены из общей, типографской модели семейства в модель WSS, как описано выше.</span><span class="sxs-lookup"><span data-stu-id="a89e1-185">Since existing DirectWrite APIs support face selection using the weight/stretch/style model, the named instances of fonts that use other axes of variation will be projected from the general, typographic family model into the WSS model, as described above.</span></span> <span data-ttu-id="a89e1-186">Это зависит от переменного шрифта, включающего таблицу "атрибуты стиля" ("STAT") с подтаблицами "ось-значение", которые Дврите использует для различения маркеров имени, определяющих весовые значения, атрибуты растяжения или стиля из маркеров, относящихся к другим осям вариации.</span><span class="sxs-lookup"><span data-stu-id="a89e1-186">This relies on a variable font including a “style attributes” (‘STAT’) table with axis-value subtables, which DWrite uses to distinguish face name tokens that designate weight, stretch or style attributes from tokens that pertain to other axes of variation.</span></span>  

<span data-ttu-id="a89e1-187">Если переменный шрифт не включает таблицу STAT, которая требуется для переменных шрифтов спецификацией OpenType, то DirectWrite будет рассматривать шрифт как непеременный шрифт, содержащий только экземпляр по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a89e1-187">If a variable font does not include a ‘STAT’ table, as required for variable fonts by the OpenType specification, then DirectWrite will treat the font as a non-variable font containing only the default instance.</span></span>  

<span data-ttu-id="a89e1-188">Если шрифт содержит таблицу STAT, но не содержит соответствующие вложенные таблицы значений осей, это может привести к непредвиденным результатам, например наличие нескольких лиц с одинаковыми именами лиц.</span><span class="sxs-lookup"><span data-stu-id="a89e1-188">If a font does contain a ‘STAT’ table but it does not include appropriate axis-value subtables, this may lead to unexpected results, such as having multiple faces that have identical face names.</span></span> <span data-ttu-id="a89e1-189">В настоящее время такие шрифты не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="a89e1-189">Such fonts are not supported at this time.</span></span> 

<span data-ttu-id="a89e1-190">Спецификация OpenType позволяет представить данные структуры глифов в одном из двух форматов: с помощью таблицы "глиф", в которой используется формат "структура TrueType" и "Подсказка", или с помощью таблицы "CFF", которая использует представление в формате компактного шрифта ("CFF").</span><span class="sxs-lookup"><span data-stu-id="a89e1-190">The OpenType specification allows for glyph outline data to be represented in one of two formats: using a ‘glyf’ table, which uses TrueType outline and hinting format, or using a ‘CFF’ table, which uses Compact Font Format (“CFF”) representation.</span></span> <span data-ttu-id="a89e1-191">В переменном шрифте с обозначением TrueType таблица "глиф" по-своему используется и дополняется таблицей "гвар", которая предоставляет данные варианта для контуров.</span><span class="sxs-lookup"><span data-stu-id="a89e1-191">In a variable font with TrueType outlines, the ‘glyf’ table continues to be used, and is supplemented with a ‘gvar’ table that supplies the variation data for the outlines.</span></span> <span data-ttu-id="a89e1-192">Это означает, что экземпляр по умолчанию переменного шрифта с контурами TrueType использует только традиционные таблицы OpenType, которые будут поддерживаться в старом программном обеспечении без поддержки переменных шрифта.</span><span class="sxs-lookup"><span data-stu-id="a89e1-192">This means that the default instance of a variable font with TrueType outlines uses only traditional OpenType tables that will be supported in older software that has no variable font support.</span></span> <span data-ttu-id="a89e1-193">Однако в переменной шрифт с CFF контурами таблица "CFF" заменяется таблицей "CFF2", которая инкапсулирует данные структуры по умолчанию и связанные данные варианта в одной таблице.</span><span class="sxs-lookup"><span data-stu-id="a89e1-193">In a variable font with CFF outlines, however, the ‘CFF’ table is superseded by the ‘CFF2’ table, which encapsulates the default outline data and the associated variation data in one table.</span></span> <span data-ttu-id="a89e1-194">Данные CFF обрабатываются с помощью отдельного средства растеризации, используемого для данных TrueType, а для таблицы "CFF2" требуется обновленный CFF средство прорисовки, поддерживающее поддержку "CFF2".</span><span class="sxs-lookup"><span data-stu-id="a89e1-194">CFF data is processed by a separate rasterizer from that used for TrueType data, and a ‘CFF2’ table requires an updated CFF rasterizer that has ‘CFF2’ support.</span></span> <span data-ttu-id="a89e1-195">Таблица "CFF2" не может быть обработана более старыми средствами растеризации CFF.</span><span class="sxs-lookup"><span data-stu-id="a89e1-195">A ‘CFF2’ table cannot be processed by older CFF rasterizers.</span></span> <span data-ttu-id="a89e1-196">Для переменного шрифта с данными структуры CFF это означает, что даже экземпляр по умолчанию не будет работать в старом программном обеспечении.</span><span class="sxs-lookup"><span data-stu-id="a89e1-196">For a variable font with CFF outline data, this means that even the default instance will not work in older software.</span></span> 

<span data-ttu-id="a89e1-197">В обновлении Windows 10 Creators DirectWrite не поддерживает переменные шрифты с CFF структурой данных с помощью таблицы CFF2.</span><span class="sxs-lookup"><span data-stu-id="a89e1-197">In the Windows 10 Creators Update, DirectWrite does not support variable fonts with CFF outline data using the ‘CFF2’ table.</span></span> 

## <a name="using-opentype-variable-fonts"></a><span data-ttu-id="a89e1-198">Использование переменных шрифтов OpenType</span><span class="sxs-lookup"><span data-stu-id="a89e1-198">Using OpenType variable fonts</span></span>

<span data-ttu-id="a89e1-199">Можно легко использовать переменные шрифты OpenType, учитывая текущие ограничения, указанные выше:</span><span class="sxs-lookup"><span data-stu-id="a89e1-199">OpenType variable fonts can be easy to use, keeping in mind the current limitations noted above:</span></span> 

-   <span data-ttu-id="a89e1-200">В настоящее время поддерживаются только именованные экземпляры переменной шрифта.</span><span class="sxs-lookup"><span data-stu-id="a89e1-200">Only named instances of a variable font are supported at this time.</span></span>
-   <span data-ttu-id="a89e1-201">В настоящее время поддерживаются только переменные шрифты, в которых используются данные структуры глифов TrueType (не CFF контуры).</span><span class="sxs-lookup"><span data-stu-id="a89e1-201">Only variable fonts that use TrueType glyph outline data (not CFF outlines) are supported at this time.</span></span> 
-   <span data-ttu-id="a89e1-202">Для шрифтов, использующих оси, отличные от веса, растяжения или стиля, именованные экземпляры будут запланировать в модели семейства WSS, что может привести к тому, что некоторые именованные экземпляры появятся в виде отдельных семейств (как в прошлом для непеременных шрифтов).</span><span class="sxs-lookup"><span data-stu-id="a89e1-202">For fonts that use axes of design variation other than weight, stretch or style, named instances will get projected into the WSS family model, which may result in some named instances appearing as separate families (as would happen in the past for non-variable fonts).</span></span> <span data-ttu-id="a89e1-203">Для этого переменные шрифты должны иметь таблицу STAT, которая включает соответствующие подтаблицы значений осей.</span><span class="sxs-lookup"><span data-stu-id="a89e1-203">To support this, variable fonts must have a ‘STAT’ table that includes appropriate axis-value subtables.</span></span>
-   <span data-ttu-id="a89e1-204">Именованные экземпляры переменных шрифтов поддерживаются в API-интерфейсах DirectWrite, но если некоторые операции выполняются в старых реализациях, которые не поддерживают переменные шрифты, они могут привести к неправильным результатам.</span><span class="sxs-lookup"><span data-stu-id="a89e1-204">Named instances of variable fonts are supported in DirectWrite APIs, but if certain operations are performed in older implementations that do not support variable fonts, those may produce incorrect results.</span></span> 
-   <span data-ttu-id="a89e1-205">Некоторые API DirectWrite используют [**\_ \_ насыщенность шрифта дврите**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_weight), [**Дврите \_ \_ растяжение шрифта**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_stretch) и дврите перечисление шрифтов для указания веса, растяжения и атрибутов стиля при выборе лиц. [**\_ \_**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_style)</span><span class="sxs-lookup"><span data-stu-id="a89e1-205">Certain DirectWrite APIs use the [**DWRITE\_FONT\_WEIGHT**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_weight), [**DWRITE\_FONT\_STRETCH**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_stretch) and [**DWRITE\_FONT\_STYLE**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_style) enumerations for specifying weight, stretch and style attributes when selecting faces.</span></span> <span data-ttu-id="a89e1-206">Если переменная шрифта использует соответствующие оси вариации, но имеет много именованных экземпляров, требующих более детальной детализации, то не все именованные экземпляры будут выбираться в этих API.</span><span class="sxs-lookup"><span data-stu-id="a89e1-206">If a variable font uses corresponding variation axes but has many named instances that require finer granularity, not all of the named instances will be selectable in those APIs.</span></span>

<span data-ttu-id="a89e1-207">Переменные OpenType, которые соответствуют этим требованиям, можно установить из оболочки Windows, как и другие шрифты OpenType, а также можно использовать в пользовательских наборах шрифтов, созданных приложением.</span><span class="sxs-lookup"><span data-stu-id="a89e1-207">OpenType variable fonts that conform to these requirements can be installed from the Windows shell just like other OpenType fonts, and can also be used in custom font sets created by an app.</span></span>  

<span data-ttu-id="a89e1-208">При установке в системе все именованные экземпляры переменной шрифта будут включаться в набор шрифтов, возвращаемый путем вызова метода IDWriteFontFamily3::[**жетсистемфонтсет**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefactory3-getsystemfontset) .</span><span class="sxs-lookup"><span data-stu-id="a89e1-208">When installed in the system, all named instances of a variable font will be included in the font set returned by calling the IDWriteFontFamily3::[**GetSystemFontSet**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefactory3-getsystemfontset) method.</span></span> <span data-ttu-id="a89e1-209">Обратите внимание, что набор шрифтов является плоским списком без иерархии группирования семейства, но каждый элемент в наборе имеет свойство Family-Name, основанное на модели семейства WSS.</span><span class="sxs-lookup"><span data-stu-id="a89e1-209">Note that a font set is a flat list without a family-grouping hierarchy, but each item in the set has a family-name property based on the WSS family model.</span></span> <span data-ttu-id="a89e1-210">Набор шрифтов можно отфильтровать для конкретного именованного экземпляра с переменным шрифтом с помощью методов [**идвритефонтсет:: жетматчингфонтс**](idwritefontset-getmatchingfonts-overload.md) .</span><span class="sxs-lookup"><span data-stu-id="a89e1-210">The font set can be filtered for a particular variable-font named instance using the [**IDWriteFontSet::GetMatchingFonts**](idwritefontset-getmatchingfonts-overload.md) methods.</span></span> <span data-ttu-id="a89e1-211">Однако при использовании перегрузки **жетматчингфонтс** , которая принимает familyName, указанный familyName должен использовать имя, соответствующее модели семейства шрифтов WSS.</span><span class="sxs-lookup"><span data-stu-id="a89e1-211">If using the **GetMatchingFonts** overload that takes a familyName, though, the familyName specified must use the name conforming to the WSS font-family model.</span></span> <span data-ttu-id="a89e1-212">Полный список имен, совместимых с WSS, которые входят в набор шрифтов, можно получить с помощью методов [**идвритефонтсет:: GetPropertyValues**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontset-getpropertyvalues(dwrite_font_property_id_idwritestringlist)) , использующих \_ \_ \_ имя семейства идентификаторов свойств Font дврите \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="a89e1-212">The complete list of WSS-compatible family names occurring in a font set can be obtained using the [**IDWriteFontSet::GetPropertyValues**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontset-getpropertyvalues(dwrite_font_property_id_idwritestringlist)) methods using DWRITE\_FONT\_PROPERTY\_ID\_FAMILY\_NAME.</span></span>  

<span data-ttu-id="a89e1-213">Аналогичным образом все именованные экземпляры переменного шрифта будут представлены в коллекции шрифтов, возвращаемой методом Идвритефактори::[**жетсистемфонтколлектион**](/windows/win32/api/dwrite/nf-dwrite-idwritefactory-getsystemfontcollection) .</span><span class="sxs-lookup"><span data-stu-id="a89e1-213">Similarly, all of the named instances of a variable font will be represented in the font collection returned by the IDWriteFactory::[**GetSystemFontCollection**](/windows/win32/api/dwrite/nf-dwrite-idwritefactory-getsystemfontcollection) method.</span></span> <span data-ttu-id="a89e1-214">Поскольку элементы коллекции шрифтов являются семействами шрифтов на основе модели WSS, именованные экземпляры переменного шрифта могут быть представлены в коллекции как члены двух или более семейств шрифтов.</span><span class="sxs-lookup"><span data-stu-id="a89e1-214">Because the elements of a font collection are font families based on the WSS model, the named instances of a variable font may be represented in a collection as members of two or more font families.</span></span> <span data-ttu-id="a89e1-215">Если используется метод [**идвритефонтколлектион:: финдфамилинаме**](/windows/win32/api/dwrite/nf-dwrite-idwritefontcollection-findfamilyname) , параметр familyName должен быть именем семейства, совместимого с WSS.</span><span class="sxs-lookup"><span data-stu-id="a89e1-215">If the [**IDWriteFontCollection::FindFamilyName**](/windows/win32/api/dwrite/nf-dwrite-idwritefontcollection-findfamilyname) method is used, the familyName parameter must be a WSS-compatible family name.</span></span> <span data-ttu-id="a89e1-216">Чтобы найти все имена семейства, совместимые с WSS, из коллекции шрифтов, приложение может циклически проходить по каждому семейству и вызывать [**идвритефонтфамили:: жетфамилинамес**](/windows/win32/api/dwrite/nf-dwrite-idwritefontfamily-getfamilynames), хотя может быть проще получить соответствующий набор шрифтов и использовать метод [**GetPropertyValues**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontset-getpropertyvalues(dwrite_font_property_id_idwritestringlist)) , как описано выше.</span><span class="sxs-lookup"><span data-stu-id="a89e1-216">To find all of the WSS-compatible family names from a font collection, an app can loop through each family and call [**IDWriteFontFamily::GetFamilyNames**](/windows/win32/api/dwrite/nf-dwrite-idwritefontfamily-getfamilynames), though it may be easier to obtain a corresponding font set and use the [**GetPropertyValues**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontset-getpropertyvalues(dwrite_font_property_id_idwritestringlist)) method as described above.</span></span> 

<span data-ttu-id="a89e1-217">При работе с пользовательскими шрифтами для создания набора шрифтов можно использовать различные подходы, описанные в разделе [пользовательские наборы шрифтов](custom-font-sets-win10.md) .</span><span class="sxs-lookup"><span data-stu-id="a89e1-217">When working with custom fonts, various approaches described in the [Custom Font Sets](custom-font-sets-win10.md) topic can be used to create a font set.</span></span> <span data-ttu-id="a89e1-218">Чтобы добавить переменную шрифт в пользовательский набор шрифтов, рекомендуется использовать метод [**IDWriteFontSetBuilder1:: аддфонтфиле**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontsetbuilder1-addfontfile) , так как он поддерживает переменные шрифты и добавляет все именованные экземпляры переменного шрифта в один вызов.</span><span class="sxs-lookup"><span data-stu-id="a89e1-218">To add a variable font to a custom font set, the [**IDWriteFontSetBuilder1::AddFontFile**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontsetbuilder1-addfontfile) method is recommended since it supports variable fonts and will add all of the named instances of a variable font in a single call.</span></span> <span data-ttu-id="a89e1-219">На данный момент невозможно добавить отдельные именованные экземпляры шрифта настраиваемой переменной к набору шрифтов с помощью методов [**идвритефонтсетбуилдер:: аддфонтфацереференце**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontsetbuilder-addfontfacereference(idwritefontfacereference)) , так как не существует способа создать ссылку на шрифт, указав, какой из именованных экземпляров из файла шрифта переменной является необходимым.</span><span class="sxs-lookup"><span data-stu-id="a89e1-219">There is no way at this time to add individual named instances of a custom variable font to a font set using the [**IDWriteFontSetBuilder::AddFontFaceReference**](/windows/win32/api/dwrite_3/nf-dwrite_3-idwritefontsetbuilder-addfontfacereference(idwritefontfacereference)) methods since there is no way to create a font face reference specifying which of the named instances from a variable font file is intended.</span></span> <span data-ttu-id="a89e1-220">Это означает, что в настоящее время невозможно добавить именованные экземпляры пользовательского шрифта в пользовательский набор шрифтов с назначенными пользовательскими свойствами.</span><span class="sxs-lookup"><span data-stu-id="a89e1-220">This means that currently there is no way to add named instances of a custom font to a custom font set with custom properties assigned.</span></span> <span data-ttu-id="a89e1-221">Это, в свою очередь, означает, что в настоящее время невозможно легко использовать пользовательские переменные шрифты в сочетании с DirectWrite API для удаленных шрифтов.</span><span class="sxs-lookup"><span data-stu-id="a89e1-221">That in turn means that custom variable fonts currently cannot easily be used in conjunction with DirectWrite APIs for remote fonts.</span></span> <span data-ttu-id="a89e1-222">Если именованные экземпляры переменного шрифта включены в набор системных шрифтов, то ссылки на шрифт для каждого именованного экземпляра уже существуют, и их можно добавить в пользовательские наборы шрифтов, в том числе с помощью значений настраиваемых свойств.</span><span class="sxs-lookup"><span data-stu-id="a89e1-222">If named instances of a variable font are included in a system font set, however, font face references for each named instance will already exist, and these can be added to custom font sets, including with the use of custom property values.</span></span> <span data-ttu-id="a89e1-223">Дополнительные сведения см. в разделе Пользовательские наборы шрифтов.</span><span class="sxs-lookup"><span data-stu-id="a89e1-223">See the Custom Font Sets topic for more details.</span></span> 

<span data-ttu-id="a89e1-224">При работе с переменными шрифтами перечисления [**DirectWrite \_ дврите \_ шрифта**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_weight) и [**дврите \_ \_**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_stretch) перечисление шрифтов тесно связаны с осями вариантов веса и ширины, определенными в спецификации OpenType, но не одинаковы.</span><span class="sxs-lookup"><span data-stu-id="a89e1-224">When working with variable fonts, the DirectWrite [**DWRITE\_FONT\_WEIGHT**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_weight) and [**DWRITE\_FONT\_STRETCH**](/windows/win32/api/dwrite/ne-dwrite-dwrite_font_stretch) enumerations are closely connected to the weight and width variation axes defined in the OpenType specification, but are not the same.</span></span> <span data-ttu-id="a89e1-225">Во первых, числовой масштаб для любой оси вариантов всегда поддерживает дробные значения, тогда как fontWeight и fontStretch используют целые числа.</span><span class="sxs-lookup"><span data-stu-id="a89e1-225">First, the numeric scale for any variation axis always supports fractional values, while fontWeight and fontStretch use integers.</span></span> <span data-ttu-id="a89e1-226">Шкала весовой оси OpenType использует значения от 1 до 1000, что также поддерживается fontWeight.</span><span class="sxs-lookup"><span data-stu-id="a89e1-226">The OpenType weight axis scale uses values ranging from 1 to 1000, which is also supported by fontWeight.</span></span> <span data-ttu-id="a89e1-227">Таким образом, изменение значения по оси веса вариации на fontWeight является относительно незначительным: fontWeight, сообщаемый для именованного экземпляра, может быть округлен от точного значения, используемого для определения именованного экземпляра внутри шрифта.</span><span class="sxs-lookup"><span data-stu-id="a89e1-227">Thus the change from a variation weight axis value to fontWeight is relatively minor: the fontWeight reported for a named instance may be rounded from the precise value used to define the named instance within the font.</span></span> <span data-ttu-id="a89e1-228">Различие между DirectWrite fontStretch и шкалой по оси ширины OpenType больше: DirectWrite использует значения от 1 до 9, следуя значениям [усвидскласс](/typography/opentype/spec/os2#uswidthclass) в таблице OpenType OS/2, а масштаб по оси ширины OpenType использует положительные значения, представляющие процент нормальной ширины.</span><span class="sxs-lookup"><span data-stu-id="a89e1-228">The distinction between DirectWrite fontStretch and the OpenType width axis scale is greater: DirectWrite uses values from 1 to 9, following the [usWidthClass](/typography/opentype/spec/os2#uswidthclass) values of the OpenType OS/2 table, while the OpenType width axis scale uses positive values representing a percentage of normal width.</span></span> <span data-ttu-id="a89e1-229">Документация [усвидскласс](/typography/opentype/spec/os2#uswidthclass) в спецификации OpenType обеспечивает сопоставление между значениями от 1 до 9 и процентными значениями.</span><span class="sxs-lookup"><span data-stu-id="a89e1-229">The [usWidthClass](/typography/opentype/spec/os2#uswidthclass) documentation in the OpenType specification provides a mapping between values 1 to 9 and percent-of-normal values.</span></span> <span data-ttu-id="a89e1-230">Значение fontStretch, сообщаемое для именованного экземпляра, может содержать округление при преобразовании из значений осей ширины.</span><span class="sxs-lookup"><span data-stu-id="a89e1-230">The fontStretch value reported for a named instance may involve rounding when converting from width axis values.</span></span> 

<span data-ttu-id="a89e1-231">При создании [**идвритетекстформат**](/windows/win32/api/dwrite/nn-dwrite-idwritetextformat)необходимо указать коллекцию шрифтов и свойства шрифта, совместимые с WSS (имя семейства, вес, растяжение и стиль).</span><span class="sxs-lookup"><span data-stu-id="a89e1-231">When creating an [**IDWriteTextFormat**](/windows/win32/api/dwrite/nn-dwrite-idwritetextformat), a font collection and WSS-compatible font properties (family name, weight, stretch and style) must be specified.</span></span> <span data-ttu-id="a89e1-232">Это также применимо при задании свойств форматирования шрифта для текстового диапазона [**идвритетекстлайаут**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) .</span><span class="sxs-lookup"><span data-stu-id="a89e1-232">This also applies when setting font formatting properties on a [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) text range.</span></span> <span data-ttu-id="a89e1-233">Свойства можно получить из объекта [**IDWriteFontFace3**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontface3) или из объектов [**идвритефонт**](/windows/win32/api/dwrite/nn-dwrite-idwritefont) и [**идвритефонтфамили**](/windows/win32/api/dwrite/nn-dwrite-idwritefontfamily) , представляющих определенный именованный экземпляр.</span><span class="sxs-lookup"><span data-stu-id="a89e1-233">The properties can be obtained from an [**IDWriteFontFace3**](/windows/win32/api/dwrite_3/nn-dwrite_3-idwritefontface3) object or from [**IDWriteFont**](/windows/win32/api/dwrite/nn-dwrite-idwritefont) and [**IDWriteFontFamily**](/windows/win32/api/dwrite/nn-dwrite-idwritefontfamily) objects that represent a particular named instance.</span></span> <span data-ttu-id="a89e1-234">Как показано выше, значения, возвращаемые методами Round и Stretch, могут быть скругленными приближениями для фактических значений осей, используемых для определения именованного экземпляра, но DirectWrite будет сопоставлять сочетание свойств с нужным именованным экземпляром.</span><span class="sxs-lookup"><span data-stu-id="a89e1-234">As observed above, the values returned by the GetWeight and GetStretch methods may be rounded approximations for the actual axis values used to define the named instance, but DirectWrite will map the combination of properties back to the desired named instance.</span></span> 

<span data-ttu-id="a89e1-235">Аналогично, если приложение использует [**идвритефонтфаллбаккбуилдер**](idwritefontfallbackbuilder.md) для создания настраиваемых данных резервных шрифтов, семейства указываются для сопоставлений диапазонов символов с помощью имен семейства, совместимых с WSS.</span><span class="sxs-lookup"><span data-stu-id="a89e1-235">Similarly, if an app uses [**IDWriteFontFallbackBuilder**](idwritefontfallbackbuilder.md) to create custom font fallback data, families are specified for character-range mappings using WSS-compatible family names.</span></span> <span data-ttu-id="a89e1-236">Откат шрифта в DirectWrite основан на семействах с DirectWrite выбора варианта в резервном семействе, которое является ближайшим соответствием варианту начального семейства.</span><span class="sxs-lookup"><span data-stu-id="a89e1-236">Font fallback within DirectWrite is based on families with DirectWrite selecting a variant within a fallback family that is a nearest match for the variant of the starting family.</span></span> <span data-ttu-id="a89e1-237">Для вариантов, в которых используются измерения, отличные от веса, растяжения и стиля, в настоящее время DirectWrite не сможет выбирать такие варианты в резервном семействе, если только пользовательские резервные данные не создавались специально для обеспечения резервных сопоставлений для семейств, у которых есть определенные атрибуты, не относящиеся к WSS, такие как варианты оптического размера "заголовок".</span><span class="sxs-lookup"><span data-stu-id="a89e1-237">For variants that involve dimensions other than weight, stretch and style, DirectWrite currently would not be able to select such variants within a fallback family unless custom fallback data were created specifically to provide fallback mappings for families that have particular non-WSS attributes, such as “Caption” optical size variants.</span></span>

 

 