---
title: Общие сведения о поставщике
description: Общие сведения о приложении поставщика.
ms.assetid: <GUID-GOES-HERE>
ms.date: 01/17/2020
ms.topic: article
ms.openlocfilehash: 89b49096b7b68a723b52b4eb998c446661b7d3c9
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "104488691"
---
# <a name="provider-overview"></a><span data-ttu-id="9ad90-103">Общие сведения о поставщике</span><span class="sxs-lookup"><span data-stu-id="9ad90-103">Provider Overview</span></span>

<span data-ttu-id="9ad90-104">Поставщик — это приложение пользовательского режима, которое поддерживает и распознает резервное хранилище данных.</span><span class="sxs-lookup"><span data-stu-id="9ad90-104">The provider is a user-mode application that maintains and understands a backing data store.</span></span>  <span data-ttu-id="9ad90-105">Поставщик реализует обратные вызовы Прожфс и использует API Прожфс для проецирования этого хранилища данных в файловую систему, где они отображаются пользователю как файлы и каталоги.</span><span class="sxs-lookup"><span data-stu-id="9ad90-105">The provider implements ProjFS callbacks and uses the ProjFS API to project this data store into the file system where it appears to the user as files and directories.</span></span>  <span data-ttu-id="9ad90-106">Резервное хранилище поставщика может быть локальным для системы пользователя или удалено.</span><span class="sxs-lookup"><span data-stu-id="9ad90-106">The provider’s backing store may be local to the user’s system, or it may be located remotely.</span></span>

## <a name="data-projection"></a><span data-ttu-id="9ad90-107">Проекция данных</span><span class="sxs-lookup"><span data-stu-id="9ad90-107">Data Projection</span></span>

<span data-ttu-id="9ad90-108">Часть файловой системы, которой принадлежит поставщик, в которой проецируется его данные, находится в каталоге с именем "корень виртуализации".</span><span class="sxs-lookup"><span data-stu-id="9ad90-108">The part of the file system that the provider owns, where its data is projected, is rooted in a directory called the “virtualization root”.</span></span>  <span data-ttu-id="9ad90-109">Когда поставщик хочет начать проецирование своих данных, он запускает "экземпляр виртуализации", который представляет собой объект, который управляет взаимодействием между поставщиком и Прожфс для набора файлов и каталогов, расположенных в определенном корне виртуализации.</span><span class="sxs-lookup"><span data-stu-id="9ad90-109">When the provider wants to start projecting its data it starts a "virtualization instance", which is an object that manages communication between the provider and ProjFS for the set of files and directories located under a particular virtualization root.</span></span>  <span data-ttu-id="9ad90-110">Все файлы и каталоги, являющиеся потомками корневого каталога виртуализации, которые не были созданы локально пользователем, проводятся поставщиком через API Прожфс.</span><span class="sxs-lookup"><span data-stu-id="9ad90-110">Any files and directories that are descendants of the virtualization root that have not been created locally by the user are materialized by the provider via the ProjFS API.</span></span>  <span data-ttu-id="9ad90-111">Эти элементы запускаются как виртуальные файлы и каталоги, что означает, что они не существуют на локальном устройстве хранения пользователя, но добавлены в результаты перечисления с помощью Прожфс.</span><span class="sxs-lookup"><span data-stu-id="9ad90-111">These items start off as virtual files and directories, meaning that they do not exist on the user’s local storage device, but are injected into enumeration results by ProjFS.</span></span>  <span data-ttu-id="9ad90-112">При открытии и чтении элементов Прожфс вызывает обратные вызовы, реализуемые поставщиком для запроса данных, а поставщик использует Прожфс API для отправки этих данных в локальное хранилище, в котором они кэшируются для последующего доступа.</span><span class="sxs-lookup"><span data-stu-id="9ad90-112">As the items are opened and read, ProjFS invokes callbacks implemented by the provider to request data, and the provider uses ProjFS APIs to send that data to the local storage where it is cached for subsequent access.</span></span>  <span data-ttu-id="9ad90-113">Если необходимо изменить представление резервного хранилища данных пользователя, например, если содержимое хранилища данных изменилось, поставщик может использовать API Прожфс для обновления или удаления локальных элементов, чтобы отразить новое представление хранилища данных.</span><span class="sxs-lookup"><span data-stu-id="9ad90-113">If the user's view of the backing data store needs to change, for instance if the contents of the data store have changed, the provider can use ProjFS APIs to update or delete local items to reflect the new view of the data store.</span></span>

## <a name="callback-return-codes"></a><span data-ttu-id="9ad90-114">Коды возврата обратного вызова</span><span class="sxs-lookup"><span data-stu-id="9ad90-114">Callback return codes</span></span>

<span data-ttu-id="9ad90-115">Каждый обратный вызов перечисляет ряд возможных возвращаемых значений, характерных для этого обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="9ad90-115">Each callback lists a number of possible return values specific to that callback.</span></span>  <span data-ttu-id="9ad90-116">В дополнение к возвращаемым значениям, перечисленным для данного обратного вызова, обратный вызов может также возвращать некоторые другие коды ошибок.</span><span class="sxs-lookup"><span data-stu-id="9ad90-116">In addition to the return values listed for a given callback, a callback may also return certain other error codes.</span></span>  <span data-ttu-id="9ad90-117">Это полный список кодов ошибок, которые может вернуть обратный вызов:</span><span class="sxs-lookup"><span data-stu-id="9ad90-117">This is the complete list of error codes that a callback may return:</span></span>

| <span data-ttu-id="9ad90-118">Код ошибки</span><span class="sxs-lookup"><span data-stu-id="9ad90-118">Error Code</span></span>                                    | <span data-ttu-id="9ad90-119">Значение</span><span class="sxs-lookup"><span data-stu-id="9ad90-119">Meaning</span></span>
|-----------------------------------------------|--------
| <span data-ttu-id="9ad90-120">S_OK</span><span class="sxs-lookup"><span data-stu-id="9ad90-120">S_OK</span></span>                                          | <span data-ttu-id="9ad90-121">Операция выполнена успешно</span><span class="sxs-lookup"><span data-stu-id="9ad90-121">Operation Successful</span></span>
| <span data-ttu-id="9ad90-122">E_OUTOFMEMORY</span><span class="sxs-lookup"><span data-stu-id="9ad90-122">E_OUTOFMEMORY</span></span>                                 | <span data-ttu-id="9ad90-123">Не удалось выделить требуемую память.</span><span class="sxs-lookup"><span data-stu-id="9ad90-123">Failed to allocate necessary memory.</span></span>
| <span data-ttu-id="9ad90-124">HRESULT_FROM_WIN32 (ERROR_IO_PENDING)</span><span class="sxs-lookup"><span data-stu-id="9ad90-124">HRESULT_FROM_WIN32(ERROR_IO_PENDING)</span></span>          | <span data-ttu-id="9ad90-125">Поставщик хочет завершить операцию позднее.</span><span class="sxs-lookup"><span data-stu-id="9ad90-125">The provider wishes to complete the operation at a later time.</span></span>
| <span data-ttu-id="9ad90-126">HRESULT_FROM_WIN32(ERROR_INSUFFICIENT_BUFFER)</span><span class="sxs-lookup"><span data-stu-id="9ad90-126">HRESULT_FROM_WIN32(ERROR_INSUFFICIENT_BUFFER)</span></span> | <span data-ttu-id="9ad90-127">Буфер, переданный обратному вызову, был слишком мал.</span><span class="sxs-lookup"><span data-stu-id="9ad90-127">A buffer passed to a callback was too small.</span></span>
| <span data-ttu-id="9ad90-128">HRESULT_FROM_WIN32(ERROR_FILE_NOT_FOUND)</span><span class="sxs-lookup"><span data-stu-id="9ad90-128">HRESULT_FROM_WIN32(ERROR_FILE_NOT_FOUND)</span></span>      | <span data-ttu-id="9ad90-129">Файл не существует в резервном хранилище поставщика.</span><span class="sxs-lookup"><span data-stu-id="9ad90-129">The file does not exist in the provider’s backing store.</span></span>
| <span data-ttu-id="9ad90-130">HRESULT_FROM_WIN32 (ERROR_INVALID_PARAMETER)</span><span class="sxs-lookup"><span data-stu-id="9ad90-130">HRESULT_FROM_WIN32(ERROR_INVALID_PARAMETER)</span></span>   | <span data-ttu-id="9ad90-131">Недопустимый аргумент обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="9ad90-131">A callback argument is invalid.</span></span>  <span data-ttu-id="9ad90-132">Например, идентификатор перечисления не соответствует активному сеансу перечисления.</span><span class="sxs-lookup"><span data-stu-id="9ad90-132">For example, an enumeration ID doesn't correspond to an active enumeration session.</span></span>
| <span data-ttu-id="9ad90-133">HRESULT_FROM_WIN32(ERROR_ACCESS_DENIED)</span><span class="sxs-lookup"><span data-stu-id="9ad90-133">HRESULT_FROM_WIN32(ERROR_ACCESS_DENIED)</span></span>       | <span data-ttu-id="9ad90-134">Поставщик хочет предотвратить выполнение операции, такой как переименование или удаление.</span><span class="sxs-lookup"><span data-stu-id="9ad90-134">The provider wishes to prevent an operation, such as a rename or delete, from taking place.</span></span>

<span data-ttu-id="9ad90-135">Обратные вызовы могут также возвращать любые ошибки, которые могут быть получены от вызовов API-интерфейсов Прожфс.</span><span class="sxs-lookup"><span data-stu-id="9ad90-135">Callbacks may also return any errors they may receive from calls to ProjFS APIs.</span></span>
<span data-ttu-id="9ad90-136">Если обратный вызов возвращает код ошибки, который не находится в предыдущем списке или не был получен из API Прожфс, Прожфс вернет его в файловую систему как STATUS_INTERNAL_ERROR.</span><span class="sxs-lookup"><span data-stu-id="9ad90-136">If a callback returns an error code that is not on the preceding list or that did not come from a ProjFS API, ProjFS will return it to the file system as STATUS_INTERNAL_ERROR.</span></span>
