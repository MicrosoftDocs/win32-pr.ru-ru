---
title: Отмена вызова
description: Уведомление об отмене вызова отменяет операцию операций серверной службы и обратных вызовов модели служб.
ms.assetid: dc371921-869f-4775-98d3-80a1006358ba
keywords:
- Вызов веб-служб отмены для Windows
- ввсапи
- WWS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dda4ec4227403bed5239b68cfa05d2064976517a7473fa7926c8de5f56227645
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119026702"
---
# <a name="call-cancellation"></a>Отмена вызова

Уведомление об отмене вызова отменяет операцию [операций серверной службы](server-side-service-operations.md) и обратных вызовов модели служб. Такая отмена может быть вызвана одной из двух причин:

-   Узел службы остановил операции из-за вызова функции [**всабортсервицехост**](/windows/desktop/api/WebServices/nf-webservices-wsabortservicehost) .
-   Базовый канал вызвал ошибку.


Чтобы получить уведомление об отмене, операция службы или обратный вызов модели службы должны зарегистрировать обратный [**вызов \_ \_ \_ обратного вызова операции WS**](/windows/desktop/api/WebServices/nc-webservices-ws_operation_cancel_callback) , вызвав функцию [**всрегистероператионфорканцел**](/windows/desktop/api/WebServices/nf-webservices-wsregisteroperationforcancel) .

При необходимости в ходе регистрации уведомления об отмене операция службы или обратный вызов модели службы также могут регистрировать данные о состоянии конкретного приложения и обратный вызов [**\_ \_ \_ \_ обратного вызова свободного состояния WS Operation**](/windows/desktop/api/WebServices/nc-webservices-ws_operation_free_state_callback) .

Данные о состоянии становятся доступными обратному вызову [**\_ \_ функции отмены \_ обратного вызова операции WS**](/windows/desktop/api/WebServices/nc-webservices-ws_operation_cancel_callback) . При завершении вызова вызывается обратный вызов [**\_ \_ \_ \_ обратного состояния операции WS**](/windows/desktop/api/WebServices/nc-webservices-ws_operation_free_state_callback) , чтобы дать приложению возможность освобождать данные о состоянии.

Пример кода см. в разделе [блоккингсервицеексампле](blockingserviceexample.md).

Обратный вызов отмены вызывается только один раз в течение времени существования [операций серверной службы](server-side-service-operations.md) или функции обратного вызова.

Отмена вызова доступна для всех обратных вызовов узла службы, которые принимают [ \_ \_ контекст WS Operation](ws-operation-context.md) в качестве параметра.

Следующие элементы API связаны с отменой вызовов.

| Обратный вызов                                                                         | Описание                                                                                                                                |
|----------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| [**\_ \_ обратный вызов операции WS Cancel \_**](/windows/desktop/api/WebServices/nc-webservices-ws_operation_cancel_callback)          | Вызывается моделью службы для уведомления об отмене асинхронной операции службы в результате аварийного завершения работы узла службы. |
| [**\_ \_ \_ обратный вызов свободного состояния WS Operation \_**](/windows/desktop/api/WebServices/nc-webservices-ws_operation_free_state_callback) | Вызывается моделью службы, чтобы разрешить приложению очищать данные состояния, зарегистрированные с помощью обратного вызова отмены.                |



 



| Функция                                                             | Описание                                                                                       |
|----------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
| [**всрегистероператионфорканцел**](/windows/desktop/api/WebServices/nf-webservices-wsregisteroperationforcancel) | Позволяет выполнить операцию службы или обратный вызов модели службы для регистрации уведомления об отмене. |



 

 

 




