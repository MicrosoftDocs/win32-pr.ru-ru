---
description: Родительский контроль можно расширить с помощью API-интерфейсов параметров и ведения журнала.
ms.assetid: f0fc1b11-6de4-48f6-afc9-f05c8812d2bd
title: Общие сведения о функциях расширяемости родительского контроля
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4fe150c5955881b8038cdca9a1e4562ee28093f5
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104349105"
---
# <a name="parental-controls-extensibility-features-overview"></a><span data-ttu-id="8ff43-103">Общие сведения о функциях расширяемости родительского контроля</span><span class="sxs-lookup"><span data-stu-id="8ff43-103">Parental Controls Extensibility Features Overview</span></span>

<span data-ttu-id="8ff43-104">Родительский контроль можно расширить с помощью API-интерфейсов параметров и ведения журнала.</span><span class="sxs-lookup"><span data-stu-id="8ff43-104">Parental controls can be extended by using the settings and logging APIs.</span></span>

-   [<span data-ttu-id="8ff43-105">Ведение журнала — фон</span><span class="sxs-lookup"><span data-stu-id="8ff43-105">Logging—Background</span></span>](/windows)
-   [<span data-ttu-id="8ff43-106">Расширение ведения журнала</span><span class="sxs-lookup"><span data-stu-id="8ff43-106">Logging Extensibility</span></span>](#logging-extensibility)
-   [<span data-ttu-id="8ff43-107">Панель родительского контроля — общее Добавление расширения пользовательского интерфейса</span><span class="sxs-lookup"><span data-stu-id="8ff43-107">Parental Controls Panel General UI Extensibility Link Addition</span></span>](#parental-controls-panel-general-ui-extensibility-link-addition)
-   [<span data-ttu-id="8ff43-108">Замена фильтра веб-содержимого</span><span class="sxs-lookup"><span data-stu-id="8ff43-108">Web Content Filter Replacement</span></span>](#web-content-filter-replacement)

## <a name="loggingbackground"></a><span data-ttu-id="8ff43-109">Ведение журнала — фон</span><span class="sxs-lookup"><span data-stu-id="8ff43-109">Logging—Background</span></span>

<span data-ttu-id="8ff43-110">Корпорация Майкрософт определила ряд стандартных событий для решения распространенных задач:</span><span class="sxs-lookup"><span data-stu-id="8ff43-110">Microsoft has defined a number of standard events to address common activities:</span></span>

-   <span data-ttu-id="8ff43-111">Система: родительский контроль параметров, изменение учетной записи, изменение системных часов, неудачные попытки входа.</span><span class="sxs-lookup"><span data-stu-id="8ff43-111">System: parental controls settings changes, account changes, system clock change, failed logon attempts.</span></span>
-   <span data-ttu-id="8ff43-112">User:</span><span class="sxs-lookup"><span data-stu-id="8ff43-112">User:</span></span>
    -   <span data-ttu-id="8ff43-113">Ограничения системы и времени: время входа, выход из системы, число попыток запуска приложений и длительность выполнения приложения (см. Примечание).</span><span class="sxs-lookup"><span data-stu-id="8ff43-113">System/time limits: logon times, logout, application run attempts, and application run duration (see note).</span></span>
    -   <span data-ttu-id="8ff43-114">Интернет-ограничения: посещаемые и заблокированные веб-сайты, попытки скачивания файлов.</span><span class="sxs-lookup"><span data-stu-id="8ff43-114">Web restrictions: websites visited and blocked, file download attempts.</span></span> <span data-ttu-id="8ff43-115">Веб-браузерам и приложениям, похожим на браузер, не нужно заносить эти данные, так как в этом случае фильтр веб-содержимого делает это.</span><span class="sxs-lookup"><span data-stu-id="8ff43-115">Web browsers and browser-like applications do not need to log these, as the Web Content Filter LSP does so.</span></span> <span data-ttu-id="8ff43-116">Заменяющие веб-фильтры должны создавать эти события.</span><span class="sxs-lookup"><span data-stu-id="8ff43-116">Replacement web filters would need to generate these events.</span></span>
    -   <span data-ttu-id="8ff43-117">Игры. игры воспроизводятся и блокируются, заканчивая играми (события вместе обеспечивают длительность).</span><span class="sxs-lookup"><span data-stu-id="8ff43-117">Games: games played and blocked, game end (events together provide duration played).</span></span>
    -   <span data-ttu-id="8ff43-118">Разрешить и заблокировать определенные программы: выполнение попытки, завершение работы, заблокировано общими ограничениями приложений.</span><span class="sxs-lookup"><span data-stu-id="8ff43-118">Allow and block specific programs: run attempt, shutdown, blocked by General Application Restrictions.</span></span>
    -   <span data-ttu-id="8ff43-119">Обмен мгновенными сообщениями: попытки инициации преобразования, попытки присоединиться к беседе, выход из службы видео, аудио, игры, коротких сообщений, передача файлов и переключения URL-адресов, возможность изменения списка контактов.</span><span class="sxs-lookup"><span data-stu-id="8ff43-119">Instant Messaging: conversion initiation attempt, conversation join attempt, conversation leave, video/audio/game/short message service/file transfer/URL swap feature, contact list change attempt.</span></span>
    -   <span data-ttu-id="8ff43-120">Электронная почта: получение или получение заблокированных, попыток отправки, попытки изменения списка контактов.</span><span class="sxs-lookup"><span data-stu-id="8ff43-120">Email: received or receive blocked, send attempt, contact list change attempt.</span></span>
    -   <span data-ttu-id="8ff43-121">Носитель: носитель воспроизводился и попытался попытаться.</span><span class="sxs-lookup"><span data-stu-id="8ff43-121">Media: media played and attempted.</span></span>

<span data-ttu-id="8ff43-122">Не все предыдущие события подходят для использования приложениями.</span><span class="sxs-lookup"><span data-stu-id="8ff43-122">Not all of the previous events are suitable for use by applications.</span></span> <span data-ttu-id="8ff43-123">Изменения учетной записи, изменения системных часов, а также ведение журнала событий входа и выхода из системы реализуются только операционной системой и поэтому не являются общедоступными.</span><span class="sxs-lookup"><span data-stu-id="8ff43-123">Account changes, the system clock change, and logon and logoff event logging are implemented only by the operating system and so are not exposed publicly.</span></span>

> [!Note]  
> <span data-ttu-id="8ff43-124">Инструментирование событий входа и выхода приложения доступно в Windows Vista и настраивается родительскими элементами управления для записи этих данных в журнал.</span><span class="sxs-lookup"><span data-stu-id="8ff43-124">Instrumentation of application entry and exit events is available within Windows Vista, and is configured by Parental Controls to log this data.</span></span>

 

## <a name="logging-extensibility"></a><span data-ttu-id="8ff43-125">Расширение ведения журнала</span><span class="sxs-lookup"><span data-stu-id="8ff43-125">Logging Extensibility</span></span>

<span data-ttu-id="8ff43-126">Универсальное пользовательское событие также определяется с помощью трех тегов и значений, поэтому независимые поставщики программного обеспечения, как правило, не должны определять свои собственные в манифесте.</span><span class="sxs-lookup"><span data-stu-id="8ff43-126">A generic custom event is also defined with 3 tags/values available so ISVs usually will not need to define their own in a manifest.</span></span> <span data-ttu-id="8ff43-127">Средство просмотра журнала распознает и отображает заголовки и значения тегов, если количество используемых полей (от 1 до 3) и заголовки для каждого поля зарегистрированы с помощью API инструментария WMI.</span><span class="sxs-lookup"><span data-stu-id="8ff43-127">The Log Viewer will recognize and display the tag headers and values if the number of fields used (1 to 3) and headings for each field are registered using the WMI API.</span></span> <span data-ttu-id="8ff43-128">Универсальный Просмотр событий также можно использовать для просмотра пользовательских событий.</span><span class="sxs-lookup"><span data-stu-id="8ff43-128">The generic Event Viewer may also be used to view custom events.</span></span>

<span data-ttu-id="8ff43-129">Если универсальное пользовательское событие не подходит, ISV может самостоятельно определить его с помощью манифеста приложения и зарегистрировать заголовки для трех полей, используя один API WMI.</span><span class="sxs-lookup"><span data-stu-id="8ff43-129">If the generic custom event is not suitable, an ISV can define its own by using an application manifest and it can register headers for up to three fields by using the same WMI API.</span></span>

<span data-ttu-id="8ff43-130">Независимые поставщики программного обеспечения могут определять собственные события и использовать их независимо от средства просмотра журналов с помощью общедоступных интерфейсов API Windows.</span><span class="sxs-lookup"><span data-stu-id="8ff43-130">ISVs may choose to define their own events and consume them independently of the Log Viewer through public Windows APIs.</span></span> <span data-ttu-id="8ff43-131">Это не имеет преимущества полной централизованной работы с журналом.</span><span class="sxs-lookup"><span data-stu-id="8ff43-131">This does not have the benefit of full log centralization.</span></span>

## <a name="parental-controls-panel-general-ui-extensibility-link-addition"></a><span data-ttu-id="8ff43-132">Панель родительского контроля — общее Добавление расширения пользовательского интерфейса</span><span class="sxs-lookup"><span data-stu-id="8ff43-132">Parental Controls Panel General UI Extensibility Link Addition</span></span>

<span data-ttu-id="8ff43-133">Ссылка на расширяемость пользовательского интерфейса общего назначения предоставляется путем доступа к параметрам через WMI, создавая экземпляр расширения на основе переданного пути и идентификатора DLL ресурса имени, пути к образу (точечного рисунка), пути к изображению (точечного рисунка), пути к DLL-файлу и имени исполняемого пути.</span><span class="sxs-lookup"><span data-stu-id="8ff43-133">A general-purpose user interface extensibility link is exposed by accessing settings through WMI, creating an extension instance from passed in name resource DLL path and ID, image (bitmap) path, disabled state image (bitmap) path, subtitle resource DLL path and ID, and executable path specifications.</span></span> <span data-ttu-id="8ff43-134">После регистрации ссылка появится в области больше параметров на панели родительский контроль и будет вызывать указанный исполняемый файл.</span><span class="sxs-lookup"><span data-stu-id="8ff43-134">After registered, the link will appear in the More Settings area of the Parental Controls Panel, and clicking it will invoke the specified executable.</span></span>

<span data-ttu-id="8ff43-135">Строка пути к исполняемому файлу может дополнительно включать маркер для идентификатора безопасности текущего пользователя, подставляемый перед вызовом.</span><span class="sxs-lookup"><span data-stu-id="8ff43-135">The executable path string may optionally include a token for the current user's SID to be substituted prior to invocation.</span></span> <span data-ttu-id="8ff43-136">Это позволяет выполнять ссылки в контексте пользователя, для которого в данный момент выполняется просмотр страницы центра, если исполняемому файлу необходимо узнать идентификатор безопасности.</span><span class="sxs-lookup"><span data-stu-id="8ff43-136">This allows the link execution to operate in the context of the user for which the hub page is currently being viewed, if the executable needs to know the SID.</span></span>

## <a name="web-content-filter-replacement"></a><span data-ttu-id="8ff43-137">Замена фильтра веб-содержимого</span><span class="sxs-lookup"><span data-stu-id="8ff43-137">Web Content Filter Replacement</span></span>

<span data-ttu-id="8ff43-138">Как отмечалось в разделе, [родительский контроль In-Box ограничениями и пользовательскими интерфейсами](parental-controls-in-box-restrictions-and-user-interfaces.md). фильтр веб-содержимого в Интернете можно заменить на предоставленный поставщиком фильтр.</span><span class="sxs-lookup"><span data-stu-id="8ff43-138">As noted in the topic, [Parental Controls In-Box Restrictions and User Interfaces](parental-controls-in-box-restrictions-and-user-interfaces.md), the in-box Web Content Filter can be replaced with a vendor-supplied filter.</span></span> <span data-ttu-id="8ff43-139">Это выполняется путем доступа к параметрам через инструментарий WMI, чтобы задать идентификатор GUID и имя, принадлежащие фильтру.</span><span class="sxs-lookup"><span data-stu-id="8ff43-139">This is performed by accessing settings through WMI to set a GUID and name owning the filtering.</span></span>

<span data-ttu-id="8ff43-140">Общий механизм расширяемости пользовательского интерфейса используется для предоставления фильтра стороннего разработчика.</span><span class="sxs-lookup"><span data-stu-id="8ff43-140">The general UI extensibility mechanism is used to expose a third-party filter.</span></span> <span data-ttu-id="8ff43-141">Это тот же механизм, который используется для любого расширения, которое должно появиться в разделе "Дополнительные параметры" в родительской панели управления верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="8ff43-141">This is the same mechanism as used for any extension that wants to appear in the More Settings section of the top-level Parental Control Panel.</span></span> <span data-ttu-id="8ff43-142">Если вы выберете дополнительный шаг с указанием того же идентификатора GUID и соответствующего пути и идентификатора DLL ресурса имени в параметрах фильтра на уровне системы, ссылка на отображаемый фильтр будет скрыта, а запись стороннего производителя будет отображаться в верхней части раздела Дополнительные параметры.</span><span class="sxs-lookup"><span data-stu-id="8ff43-142">Taking the additional step of setting the same GUID and an appropriate name resource DLL path and ID into the system-level filter settings will cause the in-box displayed filter link to be hidden and the third-party entry to be shown at the top of the More Settings section.</span></span> <span data-ttu-id="8ff43-143">Имя, зарегистрированное для фильтра, будет отображаться в разделе сводки.</span><span class="sxs-lookup"><span data-stu-id="8ff43-143">The name registered for the filter will be shown in the summary section.</span></span>

<span data-ttu-id="8ff43-144">Сброс параметров GUID фильтра и имени пути и идентификатора приведет к тому, что встроенный фильтр веб-содержимого будет переустановлен в качестве активного фильтра и снова появится в разделе Параметры Windows.</span><span class="sxs-lookup"><span data-stu-id="8ff43-144">Resetting the filter GUID and name path/ID settings will result in the in-box Web Content Filter re-establishing itself as the active filter and appearing again in the Windows Settings section.</span></span>

<span data-ttu-id="8ff43-145">Обратите внимание, что сторонние фильтры не ограничиваются технологиями, используемыми для подключения к Windows Communications.</span><span class="sxs-lookup"><span data-stu-id="8ff43-145">Note that third-party filters are not constrained in the technologies used to plug into Windows communications.</span></span> <span data-ttu-id="8ff43-146">Фильтр должен просто предоставлять свои параметры, используя ссылку расширяемости и соблюдая соответствующие параметры родительского контроля.</span><span class="sxs-lookup"><span data-stu-id="8ff43-146">A filter must merely expose its settings by using an extensibility link and honor appropriate Parental Controls settings.</span></span>

 

 
