---
title: Bluetooth и подключение
description: Bluetooth использует функцию Connect для подключения к целевому устройству Bluetooth с помощью ранее созданного сокета Bluetooth.
ms.assetid: f9ab3934-7698-4f5e-8194-cca86685a4f8
keywords:
- Bluetooth Bluetooth
- подключение Bluetooth
- Bluetooth и подключение Bluetooth
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6b631aabbcd44d009ba30b9deb486e92a22feaec
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104488193"
---
# <a name="bluetooth-and-connect"></a><span data-ttu-id="032d5-106">Bluetooth и подключение</span><span class="sxs-lookup"><span data-stu-id="032d5-106">Bluetooth and connect</span></span>

<span data-ttu-id="032d5-107">Bluetooth использует функцию [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) для подключения к целевому устройству Bluetooth с помощью ранее созданного сокета Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="032d5-107">Bluetooth uses the [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function to connect to a target Bluetooth device, using a previously created Bluetooth socket.</span></span> <span data-ttu-id="032d5-108">Параметр *Name* функции **Connect** , который является структурой [**SOCKADDR \_ БС**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) , должен указывать целевое устройство Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="032d5-108">The *name* parameter of the **connect** function, which is a [**SOCKADDR\_BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) structure, must specify a target Bluetooth device.</span></span> <span data-ttu-id="032d5-109">Для определения целевого устройства используются два механизма:</span><span class="sxs-lookup"><span data-stu-id="032d5-109">Two mechanisms are used to identify the target device:</span></span>

-   <span data-ttu-id="032d5-110">Структура [**SOCKADDR \_ БС**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) может напрямую указывать номер порта, к которому запрашивается соединение.</span><span class="sxs-lookup"><span data-stu-id="032d5-110">The [**SOCKADDR\_BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) structure can directly specify the port number to which a connect is requested.</span></span> <span data-ttu-id="032d5-111">Этот механизм требует, чтобы приложение выполняло собственные запросы SDP перед попыткой выполнить операцию [**подключения**](/windows/desktop/api/winsock2/nf-winsock2-connect) .</span><span class="sxs-lookup"><span data-stu-id="032d5-111">This mechanism requires the application to perform its own SDP queries prior to attempting a [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) operation.</span></span>
-   <span data-ttu-id="032d5-112">Структура [**SOCKADDR \_ БС**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) может указывать уникальный идентификатор класса службы, к которому требуется подключиться.</span><span class="sxs-lookup"><span data-stu-id="032d5-112">The [**SOCKADDR\_BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) structure can specify the unique service class ID of the service to which it wants to connect.</span></span> <span data-ttu-id="032d5-113">Если у однорангового устройства несколько портов, соответствующих ИДЕНТИФИКАТОРу класса службы, вызов функции [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) подключается к первой допустимой службе.</span><span class="sxs-lookup"><span data-stu-id="032d5-113">If the peer device has more than one port that corresponds to the service class ID, the [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function call connects to the first valid service.</span></span> <span data-ttu-id="032d5-114">Этот механизм можно использовать без предыдущих запросов SDP.</span><span class="sxs-lookup"><span data-stu-id="032d5-114">This mechanism can be used without prior SDP queries.</span></span>

<span data-ttu-id="032d5-115">При использовании структуры [**SOCKADDR \_ БС**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) с функцией [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) применяются следующие требования.</span><span class="sxs-lookup"><span data-stu-id="032d5-115">When using the [**SOCKADDR\_BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) structure with the [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function, the following requirements apply:</span></span>

-   <span data-ttu-id="032d5-116">Элемент **бтаддр** должен быть допустимым адресом удаленного радиоприемника.</span><span class="sxs-lookup"><span data-stu-id="032d5-116">The **btAddr** member must be a valid remote radio address.</span></span>
-   <span data-ttu-id="032d5-117">Для члена **сервицеклассид** , если элемент порта равен нулю, система пытается использовать **сервицеклассид** для разрешения удаленного порта, соответствующего службе.</span><span class="sxs-lookup"><span data-stu-id="032d5-117">For the **serviceClassId** member, if the port member is zero, the system attempts to use **serviceClassId** to resolve the remote port corresponding to the service.</span></span> <span data-ttu-id="032d5-118">Класс службы — это нормализованный 128-разрядный идентификатор GUID, определяемый спецификацией Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="032d5-118">The service class is a normalized 128-bit GUID, defined by the Bluetooth specification.</span></span> <span data-ttu-id="032d5-119">Общие идентификаторы GUID определяются документом с назначенными номерами Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="032d5-119">Common GUIDs are defined by the Bluetooth Assigned Numbers document.</span></span> <span data-ttu-id="032d5-120">Кроме того, для доменного приложения можно использовать уникальный идентификатор GUID.</span><span class="sxs-lookup"><span data-stu-id="032d5-120">Alternatively, a unique GUID may be used for a domain-specific application.</span></span>
-   <span data-ttu-id="032d5-121">Элемент **порта** должен быть допустимым удаленным портом или равняться нулю, если указан член **сервицеклассид** .</span><span class="sxs-lookup"><span data-stu-id="032d5-121">The **port** member must be a valid remote port, or zero if the **serviceClassId** member is specified.</span></span>

<span data-ttu-id="032d5-122">В следующей таблице перечислены коды результатов для Bluetooth и функции [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) .</span><span class="sxs-lookup"><span data-stu-id="032d5-122">The following table lists the result codes for Bluetooth and the [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function.</span></span>

| <span data-ttu-id="032d5-123">Ошибка/Ошибка\#</span><span class="sxs-lookup"><span data-stu-id="032d5-123">Error/error\#</span></span>                    | <span data-ttu-id="032d5-124">Описание</span><span class="sxs-lookup"><span data-stu-id="032d5-124">Description</span></span>                                                                        |
|----------------------------------|------------------------------------------------------------------------------------|
| <span data-ttu-id="032d5-125">WSAEISCONN10056</span><span class="sxs-lookup"><span data-stu-id="032d5-125">WSAEISCONN10056</span></span><br/>       | <span data-ttu-id="032d5-126">Функция [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) , вызываемая для уже подключенного сокета.</span><span class="sxs-lookup"><span data-stu-id="032d5-126">The [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function called for already connected socket.</span></span> |
| <span data-ttu-id="032d5-127">WSAEACCES10013</span><span class="sxs-lookup"><span data-stu-id="032d5-127">WSAEACCES10013</span></span><br/>        | <span data-ttu-id="032d5-128">Выполняется подключение к запрошенному приложению Аутентификация, но проверка подлинности не удалась.</span><span class="sxs-lookup"><span data-stu-id="032d5-128">Connecting application requested authentication, but authentication failed.</span></span>        |
| <span data-ttu-id="032d5-129">WSAENOBUFS10055</span><span class="sxs-lookup"><span data-stu-id="032d5-129">WSAENOBUFS10055</span></span><br/>       | <span data-ttu-id="032d5-130">Неустранимая ошибка нехватки памяти.</span><span class="sxs-lookup"><span data-stu-id="032d5-130">Unrecoverable out-of-memory error.</span></span>                                                 |
| <span data-ttu-id="032d5-131">WSAEADDRINUSE10048</span><span class="sxs-lookup"><span data-stu-id="032d5-131">WSAEADDRINUSE10048</span></span><br/>    | <span data-ttu-id="032d5-132">Запрошенный номер порта/канала уже используется.</span><span class="sxs-lookup"><span data-stu-id="032d5-132">The port/channel number requested is in use.</span></span>                                       |
| <span data-ttu-id="032d5-133">WSAETIMEDOUT10060</span><span class="sxs-lookup"><span data-stu-id="032d5-133">WSAETIMEDOUT10060</span></span><br/>     | <span data-ttu-id="032d5-134">Время ожидания ввода-вывода истекло на радиочастоте Bluetooth ( \_ время ожидания страницы).</span><span class="sxs-lookup"><span data-stu-id="032d5-134">The I/O timed out at the Bluetooth radio level (PAGE\_TIMEOUT).</span></span>                    |
| <span data-ttu-id="032d5-135">WSAEDISCON10101</span><span class="sxs-lookup"><span data-stu-id="032d5-135">WSAEDISCON10101</span></span><br/>       | <span data-ttu-id="032d5-136">Канал RFCOMM отключен удаленным одноранговым узлом.</span><span class="sxs-lookup"><span data-stu-id="032d5-136">The RFCOMM channel disconnected by remote peer.</span></span>                                    |
| <span data-ttu-id="032d5-137">WSAECONNRESET10054</span><span class="sxs-lookup"><span data-stu-id="032d5-137">WSAECONNRESET10054</span></span><br/>    | <span data-ttu-id="032d5-138">Мультиплексор RFCOMM (сеанс) отключен удаленным одноранговым узлом.</span><span class="sxs-lookup"><span data-stu-id="032d5-138">The RFCOMM multiplexor (session) disconnected by remote peer.</span></span>                      |
| <span data-ttu-id="032d5-139">WSAECONNABORTED10053</span><span class="sxs-lookup"><span data-stu-id="032d5-139">WSAECONNABORTED10053</span></span><br/>  | <span data-ttu-id="032d5-140">Завершение работы сокета приложением.</span><span class="sxs-lookup"><span data-stu-id="032d5-140">Socket shut down by application.</span></span>                                                   |
| <span data-ttu-id="032d5-141">WSAENETUNREACH10051</span><span class="sxs-lookup"><span data-stu-id="032d5-141">WSAENETUNREACH10051</span></span><br/>   | <span data-ttu-id="032d5-142">Ошибка, отличная от времени ожидания на уровне L2CAP или Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="032d5-142">Error other than time-out at L2CAP or Bluetooth radio level.</span></span>                       |
| <span data-ttu-id="032d5-143">WSAEHOSTDOWN10064</span><span class="sxs-lookup"><span data-stu-id="032d5-143">WSAEHOSTDOWN10064</span></span><br/>     | <span data-ttu-id="032d5-144">RFCOMM получил ответ DM.</span><span class="sxs-lookup"><span data-stu-id="032d5-144">The RFCOMM received DM response.</span></span>                                                   |
| <span data-ttu-id="032d5-145">WSAENETDOWN10050</span><span class="sxs-lookup"><span data-stu-id="032d5-145">WSAENETDOWN10050</span></span><br/>      | <span data-ttu-id="032d5-146">Непредвиденная сетевая ошибка.</span><span class="sxs-lookup"><span data-stu-id="032d5-146">Unexpected network error.</span></span>                                                          |
| <span data-ttu-id="032d5-147">WSAESHUTDOWN10058</span><span class="sxs-lookup"><span data-stu-id="032d5-147">WSAESHUTDOWN10058</span></span><br/>     | <span data-ttu-id="032d5-148">Канал L2CAP отключен удаленным одноранговым узлом.</span><span class="sxs-lookup"><span data-stu-id="032d5-148">The L2CAP channel disconnected by remote peer.</span></span>                                     |
| <span data-ttu-id="032d5-149">WSAEADDRNOTAVAIL10049</span><span class="sxs-lookup"><span data-stu-id="032d5-149">WSAEADDRNOTAVAIL10049</span></span><br/> | <span data-ttu-id="032d5-150">Недопустимый порт или канал Bluetooth или адрес устройства.</span><span class="sxs-lookup"><span data-stu-id="032d5-150">Bluetooth port/channel or device address not valid.</span></span>                                |
| <span data-ttu-id="032d5-151">WSAEINVAL10022</span><span class="sxs-lookup"><span data-stu-id="032d5-151">WSAEINVAL10022</span></span><br/>        | <span data-ttu-id="032d5-152">Самонастраивающийся, событие с стеком драйвера или другая ошибка привела к сбою.</span><span class="sxs-lookup"><span data-stu-id="032d5-152">Plug and Play, driver-stack event, or other error caused failure.</span></span>                  |



 

## <a name="related-topics"></a><span data-ttu-id="032d5-153">См. также</span><span class="sxs-lookup"><span data-stu-id="032d5-153">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="032d5-154">Сокеты Windows</span><span class="sxs-lookup"><span data-stu-id="032d5-154">Windows Sockets</span></span>](/windows/desktop/WinSock/windows-sockets-start-page-2)
</dt> <dt>

[<span data-ttu-id="032d5-155">**соединиться**</span><span class="sxs-lookup"><span data-stu-id="032d5-155">**connect**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-connect)
</dt> <dt>

[<span data-ttu-id="032d5-156">**SOCKADDR \_ БС**</span><span class="sxs-lookup"><span data-stu-id="032d5-156">**SOCKADDR\_BTH**</span></span>](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth)
</dt> </dl>

 

