---
title: Bluetooth и Всалукупсервицебегин для обнаружения служб
description: Для обнаружения существования определенной службы на сервере Bluetooth клиенты используют функции Всалукупсервицебегин, Всалукупсервиценекст и Всалукупсервицеенд.
ms.assetid: d9961600-cdca-42ec-92eb-118b8186ed2e
keywords:
- Bluetooth и Всалукупсервицебегин для обнаружения служб Bluetooth
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 274b3beb3de7683bd43a0f99350db6e1a347f51e
ms.sourcegitcommit: ae73f4dd3cf5a3c6a1ea7d191ca32a5b01f6686b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/08/2020
ms.locfileid: "103891185"
---
# <a name="bluetooth-and-wsalookupservicebegin-for-service-discovery"></a><span data-ttu-id="13f86-104">Bluetooth и Всалукупсервицебегин для обнаружения служб</span><span class="sxs-lookup"><span data-stu-id="13f86-104">Bluetooth and WSALookupServiceBegin for Service Discovery</span></span>

<span data-ttu-id="13f86-105">Для обнаружения существования определенной службы на сервере Bluetooth клиенты используют функции [**всалукупсервицебегин**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina), [**всалукупсервиценекст**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta)и [**всалукупсервицеенд**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend) .</span><span class="sxs-lookup"><span data-stu-id="13f86-105">To discover the existence of a particular service on a Bluetooth server, clients use the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta), and [**WSALookupServiceEnd**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend) functions.</span></span> <span data-ttu-id="13f86-106">Запросы могут выполняться для локальных и удаленных адресов, но подключения могут устанавливаться только с удаленными адресами.</span><span class="sxs-lookup"><span data-stu-id="13f86-106">Queries can be performed for local and remote addresses, but connections can only be established with remote addresses.</span></span> <span data-ttu-id="13f86-107">Дескрипторы служб, обнаруженные во время этой операции, нельзя использовать для удаления службы через [**всасетсервице**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea).</span><span class="sxs-lookup"><span data-stu-id="13f86-107">Service handles discovered during this operation cannot be used to delete the service via [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea).</span></span> <span data-ttu-id="13f86-108">Замыкание на себя не поддерживается RFCOMM.</span><span class="sxs-lookup"><span data-stu-id="13f86-108">Loopback is not supported by RFCOMM.</span></span>

<span data-ttu-id="13f86-109">Можно выполнить два основных типа запросов на обнаружение служб:</span><span class="sxs-lookup"><span data-stu-id="13f86-109">Two basic types of service discovery queries can be performed:</span></span>

-   <span data-ttu-id="13f86-110">Запросы для одной или нескольких служб на локальном устройстве</span><span class="sxs-lookup"><span data-stu-id="13f86-110">Queries for one or more services on the local device</span></span>
-   <span data-ttu-id="13f86-111">Запросы для одной или нескольких служб на указанном одноранговом устройстве</span><span class="sxs-lookup"><span data-stu-id="13f86-111">Queries for one or more services on a specified peer device</span></span>

<span data-ttu-id="13f86-112">Функция [**всалукупсервицебегин**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) Получает структуру [**всакуерисет**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) в своем параметре *лпксрестриктионс* .</span><span class="sxs-lookup"><span data-stu-id="13f86-112">The [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) function receives a [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure in its *lpqsRestrictions* parameter.</span></span> <span data-ttu-id="13f86-113">**Всалукупсервицебегин** выполняет клиентский запрос на основе набора ограничений поиска, содержащихся в **всакуерисет** .</span><span class="sxs-lookup"><span data-stu-id="13f86-113">**WSALookupServiceBegin** performs a client query based on the set of search restrictions that the **WSAQUERYSET** contains.</span></span> <span data-ttu-id="13f86-114">Клиенты Bluetooth должны указать ограничения, перечисленные в следующей таблице, в структуре **всакуерисет** при использовании функции **всалукупсервицебегин** для запроса служб.</span><span class="sxs-lookup"><span data-stu-id="13f86-114">Bluetooth clients must specify the restrictions, listed in the following table, in the **WSAQUERYSET** structure when using the **WSALookupServiceBegin** function to query for services.</span></span>



| <span data-ttu-id="13f86-115">ВСАКУЕРИСЕТ, элемент</span><span class="sxs-lookup"><span data-stu-id="13f86-115">WSAQUERYSET member</span></span>    | <span data-ttu-id="13f86-116">Ограничение</span><span class="sxs-lookup"><span data-stu-id="13f86-116">Restriction</span></span>                                                                                                                                                                                                                                                                                                                                                                     |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="13f86-117">**двсизе**</span><span class="sxs-lookup"><span data-stu-id="13f86-117">**dwSize**</span></span>            | <span data-ttu-id="13f86-118">Задайте значение **sizeof**([**всакуерисет**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span><span class="sxs-lookup"><span data-stu-id="13f86-118">Set to **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span></span>                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="13f86-119">**лпсервицеклассид**</span><span class="sxs-lookup"><span data-stu-id="13f86-119">**lpServiceClassId**</span></span>  | <span data-ttu-id="13f86-120">Задайте наиболее конкретный идентификатор UUID Bluetooth, который можно использовать для определения области запроса.</span><span class="sxs-lookup"><span data-stu-id="13f86-120">Set to the most specific Bluetooth UUID that can be used to determine the scope of the query.</span></span> <span data-ttu-id="13f86-121">Например, если задать для **лпсервицеклассид** значение UUID протокола L2CAP, то возвращаются все возвращенные службы L2CAP, фактически перечисление всех записей SD в целевом объекте.</span><span class="sxs-lookup"><span data-stu-id="13f86-121">For example, setting **lpServiceClassId** to the UUID of the L2CAP protocol results in all L2CAP services returned, essentially enumerating all SD records on the target.</span></span> <span data-ttu-id="13f86-122">Однако при задании UUID для определенной службы возвращаются только экземпляры этой службы.</span><span class="sxs-lookup"><span data-stu-id="13f86-122">Setting the UUID to a specific service, however, returns only the instances of that service.</span></span><br/> |
| <span data-ttu-id="13f86-123">**двнамеспаце**</span><span class="sxs-lookup"><span data-stu-id="13f86-123">**dwNameSpace**</span></span>       | <span data-ttu-id="13f86-124">Задайте значение **NS \_ БС**.</span><span class="sxs-lookup"><span data-stu-id="13f86-124">Set to **NS\_BTH**.</span></span>                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="13f86-125">**двнумберофксаддрс**</span><span class="sxs-lookup"><span data-stu-id="13f86-125">**dwNumberOfCsAddrs**</span></span> | <span data-ttu-id="13f86-126">Задайте значение 0.</span><span class="sxs-lookup"><span data-stu-id="13f86-126">Set to 0.</span></span>                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="13f86-127">**лпсзконтекст**</span><span class="sxs-lookup"><span data-stu-id="13f86-127">**lpszContext**</span></span>       | <span data-ttu-id="13f86-128">Укажите адрес устройства Bluetooth, с помощью которого устанавливается подключение SDP для выполнения запроса служб.</span><span class="sxs-lookup"><span data-stu-id="13f86-128">Set to the Bluetooth Device Address with which to establish an SDP connection to perform the query of services.</span></span> <span data-ttu-id="13f86-129">Этот элемент должен быть строкой, которая преобразуется с помощью функции [**всааддресстостринг**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) .</span><span class="sxs-lookup"><span data-stu-id="13f86-129">This member must be a string that is converted by using the [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) function.</span></span> <span data-ttu-id="13f86-130">Если указан локальный радиоадрес, выполняется поиск локальных записей SDP.</span><span class="sxs-lookup"><span data-stu-id="13f86-130">If the local radio address is supplied, the local SDP records are searched.</span></span><br/>                                             |
| <span data-ttu-id="13f86-131">Другие члены</span><span class="sxs-lookup"><span data-stu-id="13f86-131">Other members</span></span>         | <span data-ttu-id="13f86-132">Все остальные члены структуры [**всакуерисет**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) игнорируются.</span><span class="sxs-lookup"><span data-stu-id="13f86-132">All other members of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure are ignored.</span></span>                                                                                                                                                                                                                                                                                        |



 

<span data-ttu-id="13f86-133">Подключение SDP к удаленному устройству не остается активным после того, как функция [**всалукупсервицебегин**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) завершает запрос на обслуживание; соединение прерывается до возврата **всалукупсервицебегин** .</span><span class="sxs-lookup"><span data-stu-id="13f86-133">The SDP connection to the remote device does not remain active after the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) function completes a service query; the connection is terminated before **WSALookupServiceBegin** returns.</span></span> <span data-ttu-id="13f86-134">Приложения, для которых требуется подключение SDP, остаются активными после завершения запроса службы, должны указывать идентификатор UUID класса службы, к которому подключается с помощью члена **сервицеклассид** структуры [**SOCKADDR \_ БС**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) при выдаче вызова функции Windows Sockets [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) .</span><span class="sxs-lookup"><span data-stu-id="13f86-134">Applications that require the SDP connection to remain active after a service query completes should specify the service class UUID to which to connect by using the **serviceClassId** member of the [**SOCKADDR\_BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) structure when issuing the Windows Sockets [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function call.</span></span>

<span data-ttu-id="13f86-135">Флаги, перечисленные в следующей таблице, используются в параметре *двконтролфлагс* функций [**всалукупсервицебегин**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) и [**всалукупсервиценекст**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) для управления результатами запроса.</span><span class="sxs-lookup"><span data-stu-id="13f86-135">The flags, listed in the following table, are used in the *dwControlFlags* parameter of the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) and [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) functions to control the query results.</span></span> <span data-ttu-id="13f86-136">**Луп \_ контейнеры** и флаги **\_ флушкаче Луп** используются функцией **всалукупсервицебегин** . остальные флаги используются в вызовах функции **всалукупсервиценекст** .</span><span class="sxs-lookup"><span data-stu-id="13f86-136">The **LUP\_CONTAINERS** and **LUP\_FLUSHCACHE** flags are used by the **WSALookupServiceBegin** function; the rest of the flags are used in calls to the **WSALookupServiceNext** function.</span></span>

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="13f86-137">Flag</span><span class="sxs-lookup"><span data-stu-id="13f86-137">Flag</span></span></th>
<th><span data-ttu-id="13f86-138">Результат</span><span class="sxs-lookup"><span data-stu-id="13f86-138">Result</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="13f86-139"><strong>LUP_CONTAINERS</strong></span><span class="sxs-lookup"><span data-stu-id="13f86-139"><strong>LUP_CONTAINERS</strong></span></span></td>
<td><span data-ttu-id="13f86-140">Не должно быть задано.</span><span class="sxs-lookup"><span data-stu-id="13f86-140">Must not be set.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="13f86-141"><strong>LUP_FLUSHCACHE</strong></span><span class="sxs-lookup"><span data-stu-id="13f86-141"><strong>LUP_FLUSHCACHE</strong></span></span></td>
<td><span data-ttu-id="13f86-142">Приложения обычно должны указывать <strong>LUP_FLUSHCACHE</strong>.</span><span class="sxs-lookup"><span data-stu-id="13f86-142">Applications should generally specify <strong>LUP_FLUSHCACHE</strong>.</span></span> <span data-ttu-id="13f86-143">Этот флаг предписывает системе игнорировать все кэшированные данные и установить подключение SDP к устройству, чтобы выполнить поиск SDP.</span><span class="sxs-lookup"><span data-stu-id="13f86-143">This flag instructs the system to ignore any cached information and establish an over-the-air SDP connection to the specified device to perform the SDP search.</span></span> <span data-ttu-id="13f86-144">Эта некэшированная операция может занять несколько секунд (в то время как кэшированный поиск вернется быстро).</span><span class="sxs-lookup"><span data-stu-id="13f86-144">This non-cached operation may take several seconds (whereas a cached search returns quickly).</span></span> <span data-ttu-id="13f86-145">Сейчас Bluetooth не выполняет упреждающее кэширование записей SDP с ближайших устройств, а сейчас не фиксирует предыдущие запросы в кэше.</span><span class="sxs-lookup"><span data-stu-id="13f86-145">Bluetooth currently does not proactively cache SDP records from nearby devices, nor does it currently aggressively cache previous queries.</span></span> <span data-ttu-id="13f86-146">Поэтому приложения должны ожидать, что запросы могут не возвращать результаты (с кодом ошибки <strong>WSASERVICE_NOT_FOUND</strong>), если <strong>LUP_FLUSHCACHE</strong> не указан.</span><span class="sxs-lookup"><span data-stu-id="13f86-146">Therefore, applications should anticipate that queries may return no results (with an error code of <strong>WSASERVICE_NOT_FOUND</strong>) if <strong>LUP_FLUSHCACHE</strong> is not specified.</span></span> <span data-ttu-id="13f86-147">В будущем могут быть улучшены кэшированные данные, доступные с помощью интерфейса сокетов Windows.</span><span class="sxs-lookup"><span data-stu-id="13f86-147">The cached data that is available by using the Windows Sockets interface may be enhanced in the future.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="13f86-148"><strong>LUP_RES_SERVICE</strong></span><span class="sxs-lookup"><span data-stu-id="13f86-148"><strong>LUP_RES_SERVICE</strong></span></span></td>
<td><span data-ttu-id="13f86-149">Возвращает сведения об локальном адресе Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="13f86-149">Return information about the local Bluetooth address.</span></span> <span data-ttu-id="13f86-150">Этот флаг действует только в том случае, если также указана <strong>LUP_RETURN_ADDR</strong> .</span><span class="sxs-lookup"><span data-stu-id="13f86-150">This flag has an effect only if <strong>LUP_RETURN_ADDR</strong> is also specified.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="13f86-151"><strong>LUP_RETURN_NAME</strong></span><span class="sxs-lookup"><span data-stu-id="13f86-151"><strong>LUP_RETURN_NAME</strong></span></span></td>
<td><span data-ttu-id="13f86-152">Возвращает отображаемое имя службы в элементе <strong>лпсзсервицеинстанценаме</strong> структуры <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>всакуерисет</strong></a> для каждого вызова функции <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>всалукупсервиценекст</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="13f86-152">Return the display name of the service in the <strong>lpszServiceInstanceName</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure for each call to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> function.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="13f86-153"><strong>LUP_RETURN_TYPE</strong></span><span class="sxs-lookup"><span data-stu-id="13f86-153"><strong>LUP_RETURN_TYPE</strong></span></span></td>
<td><span data-ttu-id="13f86-154">Возврат идентификатора класса службы в элемент <strong>лпсервицеклассид</strong> структуры <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>всакуерисет</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="13f86-154">Return the service class ID in the <strong>lpServiceClassId</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure.</span></span>
<blockquote>
[!Note]<br />
<span data-ttu-id="13f86-155">Использование этого флага применимо только к функции <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina"><strong>всалукупсервицебегин</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="13f86-155">Use of this flag is only applicable to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina"><strong>WSALookupServiceBegin</strong></a> function.</span></span> <span data-ttu-id="13f86-156">Это значение всегда равно нулю для <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>всалукупсервиценекст</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="13f86-156">This value is always zero for <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a>.</span></span>
</blockquote>
<br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="13f86-157"><strong>LUP_RETURN_ADDR</strong></span><span class="sxs-lookup"><span data-stu-id="13f86-157"><strong>LUP_RETURN_ADDR</strong></span></span></td>
<td><span data-ttu-id="13f86-158">Возврат адреса в члене <strong>лпксабуффер</strong> для использования с вызовами функции <a href="/windows/desktop/api/winsock2/nf-winsock2-connect"><strong>Connect</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="13f86-158">Return an address in the <strong>lpcsaBuffer</strong> member to be used with <a href="/windows/desktop/api/winsock2/nf-winsock2-connect"><strong>connect</strong></a> function calls.</span></span> <span data-ttu-id="13f86-159">Возвращенный адрес содержит номер порта.</span><span class="sxs-lookup"><span data-stu-id="13f86-159">The returned address contains the port number.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="13f86-160"><strong>LUP_RETURN_BLOB</strong></span><span class="sxs-lookup"><span data-stu-id="13f86-160"><strong>LUP_RETURN_BLOB</strong></span></span></td>
<td><span data-ttu-id="13f86-161">Верните совпадающие записи SD в члене <strong>лпблоб</strong> , отформатированные в соответствии со спецификацией записи "средство распространения Bluetooth".</span><span class="sxs-lookup"><span data-stu-id="13f86-161">Return the matching SD records in the <strong>lpBlob</strong> member, formatted according to the Bluetooth SDP record specification.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="13f86-162"><strong>LUP_RETURN_ALL</strong></span><span class="sxs-lookup"><span data-stu-id="13f86-162"><strong>LUP_RETURN_ALL</strong></span></span></td>
<td><span data-ttu-id="13f86-163">Возвратите все приведенные выше сведения о флагах.</span><span class="sxs-lookup"><span data-stu-id="13f86-163">Return all of the above flags' information.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="13f86-164"><strong>LUP_RETURN_COMMENT</strong></span><span class="sxs-lookup"><span data-stu-id="13f86-164"><strong>LUP_RETURN_COMMENT</strong></span></span></td>
<td><span data-ttu-id="13f86-165">Верните описание службы в элемент <strong>лпсзкоммент</strong> структуры <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>всакуерисет</strong></a> для каждого вызова функции <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>всалукупсервиценекст</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="13f86-165">Return the service description in the <strong>lpszComment</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure for each call to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> function.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="13f86-166"><strong>LUP_FLUSHPREVIOUS</strong></span><span class="sxs-lookup"><span data-stu-id="13f86-166"><strong>LUP_FLUSHPREVIOUS</strong></span></span></td>
<td><span data-ttu-id="13f86-167">Пропустить следующую доступную запись и вернуть запись, следующую за ней.</span><span class="sxs-lookup"><span data-stu-id="13f86-167">Skip the next available record, and return the record that follows it.</span></span></td>
</tr>
</tbody>
</table>



 

## <a name="advanced-service-queries"></a><span data-ttu-id="13f86-168">Расширенные запросы на обслуживание</span><span class="sxs-lookup"><span data-stu-id="13f86-168">Advanced Service Queries</span></span>

<span data-ttu-id="13f86-169">Операции запроса, описанные в предыдущем разделе, можно использовать для возвращения всех результатов из одного идентификатора GUID, который должен быть достаточным для большинства приложений.</span><span class="sxs-lookup"><span data-stu-id="13f86-169">The query operations that are described in the previous section can be used to return all results from a single GUID, which should be sufficient for most applications.</span></span> <span data-ttu-id="13f86-170">Расширенный запрос позволяет приложению создать более конкретный запрос. Он предоставляет возможность сопоставлять идентификаторы UUID и атрибуты в возвращенных данных.</span><span class="sxs-lookup"><span data-stu-id="13f86-170">An advanced query enables an application to create a more specific query; it provides the capability to match UUIDs and attributes in returned information.</span></span>

<span data-ttu-id="13f86-171">Чтобы выполнить расширенный запрос для служб, клиенты Bluetooth должны указать следующие ограничения в структуре [**всакуерисет**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) , которая передается в параметр *лпксрестриктионс* .</span><span class="sxs-lookup"><span data-stu-id="13f86-171">To perform an advanced query for services, Bluetooth clients must specify the following restrictions in the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure that is passed into the *lpqsRestrictions* parameter.</span></span>



| <span data-ttu-id="13f86-172">ВСАКУЕРИСЕТ, элемент</span><span class="sxs-lookup"><span data-stu-id="13f86-172">WSAQUERYSET member</span></span>   | <span data-ttu-id="13f86-173">Ограничение</span><span class="sxs-lookup"><span data-stu-id="13f86-173">Restriction</span></span>                                                                                                                                                                                                                                                                                                                         |
|----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="13f86-174">**двсизе**</span><span class="sxs-lookup"><span data-stu-id="13f86-174">**dwSize**</span></span>           | <span data-ttu-id="13f86-175">Задайте значение **sizeof**([**всакуерисет**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span><span class="sxs-lookup"><span data-stu-id="13f86-175">Set to **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span></span>                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="13f86-176">**лпсзконтекст**</span><span class="sxs-lookup"><span data-stu-id="13f86-176">**lpszContext**</span></span>      | <span data-ttu-id="13f86-177">Укажите адрес устройства Bluetooth, с помощью которого устанавливается подключение SDP для выполнения запроса служб.</span><span class="sxs-lookup"><span data-stu-id="13f86-177">Set to the Bluetooth Device Address with which to establish an SDP connection to perform the query of services.</span></span> <span data-ttu-id="13f86-178">Этот элемент должен быть строкой, которая преобразуется с помощью функции [**всааддресстостринг**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) .</span><span class="sxs-lookup"><span data-stu-id="13f86-178">This member must be a string that is converted by using the [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) function.</span></span> <span data-ttu-id="13f86-179">Если указан локальный радиоадрес, выполняется поиск локальных записей SDP.</span><span class="sxs-lookup"><span data-stu-id="13f86-179">If the local radio address is supplied, the local SDP records are searched.</span></span><br/> |
| <span data-ttu-id="13f86-180">**Лпблоб. Пблобдата**</span><span class="sxs-lookup"><span data-stu-id="13f86-180">**lpBlob.pBlobData**</span></span> | <span data-ttu-id="13f86-181">Указатель на структуру [**\_ \_ службы запросов БС**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) , которая содержит все параметры, ограничивающие результаты запроса.</span><span class="sxs-lookup"><span data-stu-id="13f86-181">Pointer to a [**BTH\_QUERY\_SERVICE**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) structure that contains all parameters that limit the results of the query.</span></span>                                                                                                                                                                                           |
| <span data-ttu-id="13f86-182">**двнамеспаце**</span><span class="sxs-lookup"><span data-stu-id="13f86-182">**dwNameSpace**</span></span>      | <span data-ttu-id="13f86-183">Задайте значение **NS \_ БС**.</span><span class="sxs-lookup"><span data-stu-id="13f86-183">Set to **NS\_BTH**.</span></span>                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="13f86-184">Другие члены</span><span class="sxs-lookup"><span data-stu-id="13f86-184">Other members</span></span>        | <span data-ttu-id="13f86-185">Все остальные члены структуры [**всакуерисет**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) игнорируются.</span><span class="sxs-lookup"><span data-stu-id="13f86-185">All other members of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure are ignored.</span></span>                                                                                                                                                                                                                                            |



 

<span data-ttu-id="13f86-186">Следующие флаги передаются в параметре *двконтролфлагс* объекта [**всалукупсервицебегин**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) для управления результатами расширенного запроса.</span><span class="sxs-lookup"><span data-stu-id="13f86-186">The following flags are passed in the *dwControlFlags* parameter of [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) to control the results of an advanced query.</span></span>

| <span data-ttu-id="13f86-187">Flag</span><span class="sxs-lookup"><span data-stu-id="13f86-187">Flag</span></span>                     | <span data-ttu-id="13f86-188">Результат</span><span class="sxs-lookup"><span data-stu-id="13f86-188">Result</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|--------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="13f86-189">**\_контейнеры Луп**</span><span class="sxs-lookup"><span data-stu-id="13f86-189">**LUP\_CONTAINERS**</span></span>      | <span data-ttu-id="13f86-190">Не должно быть задано.</span><span class="sxs-lookup"><span data-stu-id="13f86-190">Must not be set.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="13f86-191">**ЛУП \_ флушкаче**</span><span class="sxs-lookup"><span data-stu-id="13f86-191">**LUP\_FLUSHCACHE**</span></span>      | <span data-ttu-id="13f86-192">В приложениях обычно указывается **Луп \_ флушкаче**.</span><span class="sxs-lookup"><span data-stu-id="13f86-192">Applications should generally specify **LUP\_FLUSHCACHE**.</span></span> <span data-ttu-id="13f86-193">Этот флаг предписывает системе игнорировать все кэшированные данные и установить подключение SDP к устройству, чтобы выполнить поиск SDP.</span><span class="sxs-lookup"><span data-stu-id="13f86-193">This flag instructs the system to ignore any cached information and establish an over-the-air SDP connection to the specified device to perform the SDP search.</span></span> <span data-ttu-id="13f86-194">Эта некэшированная операция может занять несколько секунд (в то время как кэшированный поиск вернется быстро).</span><span class="sxs-lookup"><span data-stu-id="13f86-194">This non-cached operation may take several seconds (whereas a cached search returns quickly).</span></span> <span data-ttu-id="13f86-195">Bluetooth не выполняет упреждающее кэширование записей SDP с ближайших устройств, а также не кэширует предыдущие запросы.</span><span class="sxs-lookup"><span data-stu-id="13f86-195">Bluetooth does not proactively cache SDP records from nearby devices, nor does it aggressively cache previous queries.</span></span> <span data-ttu-id="13f86-196">Поэтому приложения должны рассчитывать, что запросы могут часто не возвращать результаты (**всасервице \_ не \_ Найдено**), если не указан **Луп \_ флушкаче** .</span><span class="sxs-lookup"><span data-stu-id="13f86-196">Therefore applications should expect that queries may frequently return no results (**WSASERVICE\_NOT\_FOUND**) if **LUP\_FLUSHCACHE** is not specified.</span></span> <span data-ttu-id="13f86-197">В будущем могут быть улучшены кэшированные данные, доступные с помощью интерфейса сокетов Windows.</span><span class="sxs-lookup"><span data-stu-id="13f86-197">The cached data that is available by using the Windows Sockets interface may be enhanced in the future.</span></span> |
| <span data-ttu-id="13f86-198">**\_Служба Луп RES \_**</span><span class="sxs-lookup"><span data-stu-id="13f86-198">**LUP\_RES\_SERVICE**</span></span>    | <span data-ttu-id="13f86-199">Возвращает сведения об локальном адресе Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="13f86-199">Return information for the local Bluetooth Address.</span></span> <span data-ttu-id="13f86-200">Установка этого флага оказывает воздействие только в том случае, если также указан **Луп, \_ возвращающий обратный \_ адрес** .</span><span class="sxs-lookup"><span data-stu-id="13f86-200">Setting this flag has an effect only if **LUP\_RETURN\_ADDRR** is also specified.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="13f86-201">**\_имя возврата \_ Луп**</span><span class="sxs-lookup"><span data-stu-id="13f86-201">**LUP\_RETURN\_NAME**</span></span>    | <span data-ttu-id="13f86-202">Возврат отображаемого имени службы.</span><span class="sxs-lookup"><span data-stu-id="13f86-202">Return the display name of the service.</span></span> <span data-ttu-id="13f86-203">Этот флаг игнорируется для **\_ запроса на \_ Поиск \_ службы SDP**.</span><span class="sxs-lookup"><span data-stu-id="13f86-203">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="13f86-204">**\_тип возвращаемого значения Луп \_**</span><span class="sxs-lookup"><span data-stu-id="13f86-204">**LUP\_RETURN\_TYPE**</span></span>    | <span data-ttu-id="13f86-205">Возвращает идентификатор класса службы.</span><span class="sxs-lookup"><span data-stu-id="13f86-205">Return the service class ID.</span></span> <span data-ttu-id="13f86-206">Этот флаг игнорируется для **\_ запроса на \_ Поиск \_ службы SDP**.</span><span class="sxs-lookup"><span data-stu-id="13f86-206">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="13f86-207">**ЛУП \_ обратный \_ адрес**</span><span class="sxs-lookup"><span data-stu-id="13f86-207">**LUP\_RETURN\_ADDR**</span></span>    | <span data-ttu-id="13f86-208">Возврат адреса в члене **лпксабуффер** для использования с вызовами функции [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) .</span><span class="sxs-lookup"><span data-stu-id="13f86-208">Return an address in the **lpcsaBuffer** member to be used with [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function calls.</span></span> <span data-ttu-id="13f86-209">Возвращенный адрес содержит номер порта.</span><span class="sxs-lookup"><span data-stu-id="13f86-209">The returned address contains the port number.</span></span> <span data-ttu-id="13f86-210">Этот флаг игнорируется для **\_ запроса на \_ Поиск \_ службы SDP**.</span><span class="sxs-lookup"><span data-stu-id="13f86-210">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="13f86-211">**\_возвращаемый \_ BLOB-объект Луп**</span><span class="sxs-lookup"><span data-stu-id="13f86-211">**LUP\_RETURN\_BLOB**</span></span>    | <span data-ttu-id="13f86-212">Возврат совпадающих записей SD в формате, соответствующем спецификации записи SDP по Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="13f86-212">Return the matching SD records in a format that conforms to the Bluetooth SDP record specification.</span></span> <span data-ttu-id="13f86-213">Для **\_ запроса на \_ Поиск \_ службы SDP** результат в **лпблоб** для последующего вызова [**Всалукупсервиценекст**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) — это массив дескрипторов SDP по Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="13f86-213">For **SDP\_SERVICE\_SEARCH\_REQUEST**, the result in **lpBlob** for the subsequent call to [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) is an array of Bluetooth SDP handles.</span></span> <span data-ttu-id="13f86-214">В запросе атрибута **\_ службы \_ \_ SDP** и **\_ \_ \_ \_ запроса атрибутов поиска службы SDP** результат для каждого последующего вызова **всалукупсервиценекст** представляет собой двоичную запись SDP с поддержкой Bluetooth, атрибуты которой ограничены элементами, заданными элементом **пранже** запроса.</span><span class="sxs-lookup"><span data-stu-id="13f86-214">For **SDP\_SERVICE\_ATTRIBUTE\_REQUEST** and **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**, the result for each subsequent call to **WSALookupServiceNext** is a binary Bluetooth SDP record whose attributes are restricted to those specified by the **pRange** member of the query.</span></span> <span data-ttu-id="13f86-215">Этот флаг необходим для **\_ \_ \_ запроса поиска службы SDP**.</span><span class="sxs-lookup"><span data-stu-id="13f86-215">This flag is required for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                               |
| <span data-ttu-id="13f86-216">**\_Комментарий возврата \_ Луп**</span><span class="sxs-lookup"><span data-stu-id="13f86-216">**LUP\_RETURN\_COMMENT**</span></span> | <span data-ttu-id="13f86-217">Верните описание службы в элемент **лпсзкоммент** структуры [**всакуерисет**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) для каждого вызова функции [**всалукупсервиценекст**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="13f86-217">Return the service description in the **lpszComment** member of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure for each call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="13f86-218">**ЛУП \_ флушпревиаус**</span><span class="sxs-lookup"><span data-stu-id="13f86-218">**LUP\_FLUSHPREVIOUS**</span></span>   | <span data-ttu-id="13f86-219">Пропустить следующую доступную запись и вернуть запись, следующую за ней.</span><span class="sxs-lookup"><span data-stu-id="13f86-219">Skip the next available record, and return the record that follows it.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |



 

<span data-ttu-id="13f86-220">На входе **лпблоб** -> **пблобдата** указывает на структуру [**\_ \_ службы запросов БС**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) , которая содержит значения, перечисленные в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="13f86-220">On input, **lpBlob**->**pBlobData** points to a [**BTH\_QUERY\_SERVICE**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) structure that contains the values listed in the following table.</span></span>

> [!Note]  
> <span data-ttu-id="13f86-221">Исходный запрос поиска должен иметь возможность поместиться в один пакет L2CAP.</span><span class="sxs-lookup"><span data-stu-id="13f86-221">The initial search request must be able to fit into one L2CAP packet.</span></span> <span data-ttu-id="13f86-222">Однако ответ может быть разбит на множество пакетов L2CAP.</span><span class="sxs-lookup"><span data-stu-id="13f86-222">The response, however, may be broken into many L2CAP packets.</span></span>

 



| <span data-ttu-id="13f86-223">Член</span><span class="sxs-lookup"><span data-stu-id="13f86-223">Member</span></span>            | <span data-ttu-id="13f86-224">Значение</span><span class="sxs-lookup"><span data-stu-id="13f86-224">Value</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="13f86-225">**type**</span><span class="sxs-lookup"><span data-stu-id="13f86-225">**type**</span></span>          | <span data-ttu-id="13f86-226">Тип выполняемого поиска.</span><span class="sxs-lookup"><span data-stu-id="13f86-226">Type of search to perform.</span></span> <span data-ttu-id="13f86-227">Это значение может быть одним из **запросов \_ \_ поиска службы \_ SDP**, **запроса \_ \_ атрибута службы \_ SDP** или **\_ \_ \_ \_ запроса атрибута поиска службы SDP**.</span><span class="sxs-lookup"><span data-stu-id="13f86-227">This value can be one of **SDP\_SERVICE\_SEARCH\_REQUEST**, **SDP\_SERVICE\_ATTRIBUTE\_REQUEST**, or **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**.</span></span> <span data-ttu-id="13f86-228">Каждый тип поиска связан с базовым механизмом поиска, определяемым спецификацией Bluetooth SDP.</span><span class="sxs-lookup"><span data-stu-id="13f86-228">Each search type is associated with an underlying search mechanism that is defined by the Bluetooth SDP specification.</span></span> <span data-ttu-id="13f86-229">Каждый из них возвращает результаты в форме, описываемой структурой [**всакуерисет**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) , которая определена ранее в этом разделе (расширенные запросы на обслуживание).</span><span class="sxs-lookup"><span data-stu-id="13f86-229">Each return results in the form described by the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure that is defined earlier in this (Advanced Service Queries) section.</span></span> |
| <span data-ttu-id="13f86-230">**сервицехандле**</span><span class="sxs-lookup"><span data-stu-id="13f86-230">**serviceHandle**</span></span> | <span data-ttu-id="13f86-231">Используется для поиска атрибутов.</span><span class="sxs-lookup"><span data-stu-id="13f86-231">Used for attribute searches.</span></span> <span data-ttu-id="13f86-232">Это значение указывает маркер службы, с помощью которого запрашиваются атрибуты в элементе **пранже** .</span><span class="sxs-lookup"><span data-stu-id="13f86-232">This value specifies the service handle with which to query the attributes in the **pRange** member.</span></span>                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="13f86-233">**UUID**</span><span class="sxs-lookup"><span data-stu-id="13f86-233">**uuids**</span></span>         | <span data-ttu-id="13f86-234">Используется для поиска в службе и **сервицеаттрибуте** .</span><span class="sxs-lookup"><span data-stu-id="13f86-234">Used for service and **serviceAttribute** searches.</span></span> <span data-ttu-id="13f86-235">Это значение указывает UUID, которые должна содержать запись, чтобы соответствовать поиску.</span><span class="sxs-lookup"><span data-stu-id="13f86-235">This value specifies the UUIDs that a record must contain to match the search.</span></span> <span data-ttu-id="13f86-236">Если в идентификаторах UUID **\_ \_ \_ запроса** требуется запрашивать меньшее число UUID, это значение задает элемент сдпкуерюуид, который сразу же следует за последним допустимым значением UUID до всех нулей.</span><span class="sxs-lookup"><span data-stu-id="13f86-236">If less than **MAX\_UUIDS\_IN\_QUERY** UUIDs are to be queried, this value sets the SdpQueryUuid element that immediately follows the last valid UUID to all zeros.</span></span>                                                                                                                                                                       |
| <span data-ttu-id="13f86-237">**нумранже**</span><span class="sxs-lookup"><span data-stu-id="13f86-237">**numRange**</span></span>      | <span data-ttu-id="13f86-238">Используется для поиска атрибутов и **сервицеаттрибуте** .</span><span class="sxs-lookup"><span data-stu-id="13f86-238">Used for attribute and **serviceAttribute** searches.</span></span> <span data-ttu-id="13f86-239">Это значение указывает количество элементов в **пранже**.</span><span class="sxs-lookup"><span data-stu-id="13f86-239">This value specifies the number of elements in **pRange**.</span></span>                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="13f86-240">**пранже**</span><span class="sxs-lookup"><span data-stu-id="13f86-240">**pRange**</span></span>        | <span data-ttu-id="13f86-241">Используется для поиска атрибутов и **сервицеаттрибуте** .</span><span class="sxs-lookup"><span data-stu-id="13f86-241">Used for attribute and **serviceAttribute** searches.</span></span> <span data-ttu-id="13f86-242">Это значение указывает значения атрибутов, которые необходимо получить для всех совпадающих записей.</span><span class="sxs-lookup"><span data-stu-id="13f86-242">This value specifies the attribute values to retrieve for any matching records.</span></span>                                                                                                                                                                                                                                                                                                                                        |



 

<span data-ttu-id="13f86-243">После каждого успешного вызова функции [**всалукупсервиценекст**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) **лпблоб** -> **пблобдата** указывает на блок данных, содержащий значения, перечисленные в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="13f86-243">After each successful call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function, **lpBlob**->**pBlobData** points to a block of data that contains the values listed in the following table.</span></span>

| <span data-ttu-id="13f86-244">Значение</span><span class="sxs-lookup"><span data-stu-id="13f86-244">Value</span></span>                                                                                | <span data-ttu-id="13f86-245">Описание</span><span class="sxs-lookup"><span data-stu-id="13f86-245">Description</span></span>                                                                                                                                                                                                                                                                                                                                          |
|--------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="13f86-246">**\_ \_ запрос поиска службы \_ SDP**</span><span class="sxs-lookup"><span data-stu-id="13f86-246">**SDP\_SERVICE\_SEARCH\_REQUEST**</span></span>                                                    | <span data-ttu-id="13f86-247">Массив дескрипторов записи SDP, идентичный **сервицерекордхандлелист** , определяемый средством SDP 4.5.2 для Bluetooth 1,1.</span><span class="sxs-lookup"><span data-stu-id="13f86-247">An array of SDP record handles that is identical to the **ServiceRecordHandleList** defined by Bluetooth 1.1 SDP 4.5.2.</span></span> <span data-ttu-id="13f86-248">Число возвращаемых дескрипторов SDP вычисляется с помощью (**лпблоб**->кбсизе)/**sizeof**(ulong).</span><span class="sxs-lookup"><span data-stu-id="13f86-248">The number of SDP handles that is returned is calculated by (**lpBlob**->cbSize)/**sizeof**(ULONG).</span></span> <span data-ttu-id="13f86-249">Все результаты возвращаются в одном вызове функции [**всалукупсервиценекст**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="13f86-249">All results are returned in a single call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span> |
| <span data-ttu-id="13f86-250">**SDP \_ Запрос \_ атрибута \_ службы** для **\_ \_ поиска \_ \_ службы SDP**</span><span class="sxs-lookup"><span data-stu-id="13f86-250">**SDP\_SERVICE\_ATTRIBUTE\_REQUEST** or **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**</span></span> | <span data-ttu-id="13f86-251">Двоичная запись SDP по Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="13f86-251">A binary Bluetooth SDP record.</span></span> <span data-ttu-id="13f86-252">Для **\_ \_ \_ запроса атрибута службы SDP** все результаты возвращаются в одном вызове функции [**всалукупсервиценекст**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="13f86-252">For **SDP\_SERVICE\_ATTRIBUTE\_REQUEST**, all results are returned in a single call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span>                                                                                                                                                       |



 

> [!Note]  
> <span data-ttu-id="13f86-253">Если элемент **лпблоб** не указан во время ввода для запроса службы, служба и поиск атрибутов выполняются для службы, указанной в элементе **лпсервицеклассид** в атрибутах от 0 до 0xFFFF.</span><span class="sxs-lookup"><span data-stu-id="13f86-253">If the **lpBlob** member is not specified during input for a service query, a service and attribute search is performed for the service specified in the **lpServiceClassId** member on attributes from 0 through 0xFFFF.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="13f86-254">См. также</span><span class="sxs-lookup"><span data-stu-id="13f86-254">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="13f86-255">Bluetooth и ВСАКУЕРИСЕТ для запроса на обслуживание</span><span class="sxs-lookup"><span data-stu-id="13f86-255">Bluetooth and WSAQUERYSET for Service Inquiry</span></span>](bluetooth-and-wsaqueryset-for-service-inquiry.md)
</dt> <dt>

[<span data-ttu-id="13f86-256">Обнаружение устройств и служб Bluetooth</span><span class="sxs-lookup"><span data-stu-id="13f86-256">Discovering Bluetooth Devices and Services</span></span>](discovering-bluetooth-devices-and-services.md)
</dt> <dt>

[<span data-ttu-id="13f86-257">Bluetooth и Всалукупсервиценекст</span><span class="sxs-lookup"><span data-stu-id="13f86-257">Bluetooth and WSALookupServiceNext</span></span>](bluetooth-and-wsalookupservicenext.md)
</dt> <dt>

[<span data-ttu-id="13f86-258">Bluetooth и Всалукупсервицебегин для запроса устройства</span><span class="sxs-lookup"><span data-stu-id="13f86-258">Bluetooth and WSALookupServiceBegin for Device Inquiry</span></span>](bluetooth-and-wsalookupservicebegin-for-device-inquiry.md)
</dt> <dt>

[<span data-ttu-id="13f86-259">**\_служба запросов \_ БС**</span><span class="sxs-lookup"><span data-stu-id="13f86-259">**BTH\_QUERY\_SERVICE**</span></span>](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service)
</dt> <dt>

[<span data-ttu-id="13f86-260">**соединиться**</span><span class="sxs-lookup"><span data-stu-id="13f86-260">**connect**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-connect)
</dt> <dt>

[<span data-ttu-id="13f86-261">**SOCKADDR \_ БС**</span><span class="sxs-lookup"><span data-stu-id="13f86-261">**SOCKADDR\_BTH**</span></span>](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth)
</dt> <dt>

[<span data-ttu-id="13f86-262">**всааддресстостринг**</span><span class="sxs-lookup"><span data-stu-id="13f86-262">**WSAAddressToString**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa)
</dt> <dt>

[<span data-ttu-id="13f86-263">**всалукупсервицебегин**</span><span class="sxs-lookup"><span data-stu-id="13f86-263">**WSALookupServiceBegin**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina)
</dt> <dt>

[<span data-ttu-id="13f86-264">**всалукупсервицеенд**</span><span class="sxs-lookup"><span data-stu-id="13f86-264">**WSALookupServiceEnd**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend)
</dt> <dt>

[<span data-ttu-id="13f86-265">**всалукупсервиценекст**</span><span class="sxs-lookup"><span data-stu-id="13f86-265">**WSALookupServiceNext**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta)
</dt> <dt>

[<span data-ttu-id="13f86-266">**всакуерисет**</span><span class="sxs-lookup"><span data-stu-id="13f86-266">**WSAQUERYSET**</span></span>](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)
</dt> <dt>

[<span data-ttu-id="13f86-267">Сокеты Windows</span><span class="sxs-lookup"><span data-stu-id="13f86-267">Windows Sockets</span></span>](/windows/desktop/WinSock/windows-sockets-start-page-2)
</dt> </dl>

