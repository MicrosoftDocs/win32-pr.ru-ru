---
description: Система известных папок предоставляет способ взаимодействия с определенными папками с высоким уровнем профилирования, присутствующими по умолчанию в Windows.
ms.assetid: 8b6163b5-e152-47c2-99f1-43e80cf0713e
title: Работа с известными папками в приложениях
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0981d354e49f569dda229fab32308d8f4a79ff99
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104496758"
---
# <a name="working-with-known-folders-in-applications"></a><span data-ttu-id="fb225-103">Работа с известными папками в приложениях</span><span class="sxs-lookup"><span data-stu-id="fb225-103">Working with Known Folders in Applications</span></span>

<span data-ttu-id="fb225-104">Система известных папок предоставляет способ взаимодействия с определенными папками с высоким уровнем профилирования, присутствующими по умолчанию в Windows.</span><span class="sxs-lookup"><span data-stu-id="fb225-104">The Known Folder system provides a way to interact with certain high-profile folders that are present by default in Windows.</span></span> <span data-ttu-id="fb225-105">Он также позволяет приложениям, установленным и зарегистрированным в папке с известными папками, выполнять те же действия с папками.</span><span class="sxs-lookup"><span data-stu-id="fb225-105">It also allows those same interactions with folders installed and registered with the Known Folder system by applications.</span></span> <span data-ttu-id="fb225-106">В этом разделе обсуждаются возможные взаимодействия, предоставляемые API-интерфейсам известных папок.</span><span class="sxs-lookup"><span data-stu-id="fb225-106">This topic discusses those possible interactions as they are provided by the Known Folder APIs.</span></span>

-   [<span data-ttu-id="fb225-107">Интерфейсы известных папок</span><span class="sxs-lookup"><span data-stu-id="fb225-107">Known Folder Interfaces</span></span>](#known-folder-interfaces)
-   [<span data-ttu-id="fb225-108">Перенаправление</span><span class="sxs-lookup"><span data-stu-id="fb225-108">Redirection</span></span>](#redirection)
-   [<span data-ttu-id="fb225-109">См. также</span><span class="sxs-lookup"><span data-stu-id="fb225-109">Related topics</span></span>](#related-topics)

> [!IMPORTANT]
> <span data-ttu-id="fb225-110">Чтобы перенаправить документы, изображения или папки рабочего стола в OneDrive, используйте вместо метода перенаправления, описанного в этой статье, функцию перемещения в OneDrive.</span><span class="sxs-lookup"><span data-stu-id="fb225-110">To redirect the Documents, Pictures, or Desktop folders to OneDrive, use OneDrive Known Folder Move instead of the redirection method described in this article.</span></span> <span data-ttu-id="fb225-111">Дополнительные сведения см. [в статье перенаправление и перемещение известных папок Windows в OneDrive](/onedrive/redirect-known-folders).</span><span class="sxs-lookup"><span data-stu-id="fb225-111">For information, see [Redirect and move Windows known folders to OneDrive](/onedrive/redirect-known-folders).</span></span>  

## <a name="known-folder-interfaces"></a><span data-ttu-id="fb225-112">Интерфейсы известных папок</span><span class="sxs-lookup"><span data-stu-id="fb225-112">Known Folder Interfaces</span></span>

<span data-ttu-id="fb225-113">Существует два известных интерфейса папок: [**икновнфолдер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) и [**икновнфолдерманажер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfoldermanager).</span><span class="sxs-lookup"><span data-stu-id="fb225-113">There are two Known Folder interfaces: [**IKnownFolder**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) and [**IKnownFolderManager**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfoldermanager).</span></span>

<span data-ttu-id="fb225-114">[**Икновнфолдерманажер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfoldermanager) предоставляет многие из наиболее общих функций в отношении этих папок.</span><span class="sxs-lookup"><span data-stu-id="fb225-114">[**IKnownFolderManager**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfoldermanager) provides many of the more general functions in regard to these folders.</span></span> <span data-ttu-id="fb225-115">Его методы позволяют:</span><span class="sxs-lookup"><span data-stu-id="fb225-115">Its methods allow you to:</span></span>

-   <span data-ttu-id="fb225-116">Получение [**икновнфолдер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) на основе [**кновнфолдерид**](knownfolderid.md)этой папки, ее канонического имени, пути, выраженного в виде строки, или ее пути, выраженного как IDList.</span><span class="sxs-lookup"><span data-stu-id="fb225-116">Retrieve an [**IKnownFolder**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) based on either that folder's [**KNOWNFOLDERID**](knownfolderid.md), its canonical name, its path expressed as a string, or its path expressed as an IDList.</span></span>
-   <span data-ttu-id="fb225-117">Преобразуйте код CSID в его эквивалент [**кновнфолдерид**](knownfolderid.md) или преобразуйте **кновнфолдерид** в его устаревший эквивалент CSid.</span><span class="sxs-lookup"><span data-stu-id="fb225-117">Convert a CSIDL to its [**KNOWNFOLDERID**](knownfolderid.md) equivalent or convert a **KNOWNFOLDERID** to its legacy CSIDL equivalent.</span></span>
-   <span data-ttu-id="fb225-118">Регистрация или Отмена регистрации известной папки в системе.</span><span class="sxs-lookup"><span data-stu-id="fb225-118">Register or unregister a Known Folder with the system.</span></span>
-   <span data-ttu-id="fb225-119">Получение всех значений [**кновнфолдерид**](knownfolderid.md) , зарегистрированных в этой системе.</span><span class="sxs-lookup"><span data-stu-id="fb225-119">Retrieve all [**KNOWNFOLDERID**](knownfolderid.md) values registered on that system.</span></span>
-   <span data-ttu-id="fb225-120">Перенаправлять известную папку в новое расположение.</span><span class="sxs-lookup"><span data-stu-id="fb225-120">Redirect a Known Folder to a new location.</span></span>

<span data-ttu-id="fb225-121">[**Икновнфолдер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) предоставляет метод, позволяющий папке перенаправлять себя путем предоставления нового пути.</span><span class="sxs-lookup"><span data-stu-id="fb225-121">[**IKnownFolder**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) provides a method that allows a folder to redirect itself by providing a new path.</span></span> <span data-ttu-id="fb225-122">Другие методы получают сведения о конкретной известной папке, включая:</span><span class="sxs-lookup"><span data-stu-id="fb225-122">Its other methods get information about a specific Known Folder, including:</span></span>

-   <span data-ttu-id="fb225-123">Категория папки: виртуальная, фиксированная, Общая или для каждого пользователя.</span><span class="sxs-lookup"><span data-stu-id="fb225-123">The category of the folder: virtual, fixed, common, or per-user.</span></span>
-   <span data-ttu-id="fb225-124">Тип папки, например сжатый, документы, рисунки или пользовательские файлы.</span><span class="sxs-lookup"><span data-stu-id="fb225-124">The type of the folder, such as compressed, documents, pictures, or user files.</span></span>
-   <span data-ttu-id="fb225-125">[**Кновнфолдерид**](knownfolderid.md) папки.</span><span class="sxs-lookup"><span data-stu-id="fb225-125">The [**KNOWNFOLDERID**](knownfolderid.md) of the folder.</span></span>
-   <span data-ttu-id="fb225-126">Полный путь к папке в виде IDList или строки.</span><span class="sxs-lookup"><span data-stu-id="fb225-126">The full path of the folder as an IDList or as a string.</span></span> <span data-ttu-id="fb225-127">Также его относительный путь к родительской папке.</span><span class="sxs-lookup"><span data-stu-id="fb225-127">Also its relative path to a parent folder.</span></span>
-   <span data-ttu-id="fb225-128">Каноническое имя папки.</span><span class="sxs-lookup"><span data-stu-id="fb225-128">The canonical name of the folder.</span></span>
-   <span data-ttu-id="fb225-129">Подсказка, отображаемая для папки.</span><span class="sxs-lookup"><span data-stu-id="fb225-129">The tooltip displayed for the folder.</span></span>
-   <span data-ttu-id="fb225-130">Значок, отображаемый для папки.</span><span class="sxs-lookup"><span data-stu-id="fb225-130">The icon displayed for the folder.</span></span>
-   <span data-ttu-id="fb225-131">Описание папки, в которой объясняются ее назначение и использование.</span><span class="sxs-lookup"><span data-stu-id="fb225-131">A description of the folder that explains its purpose and use.</span></span>
-   <span data-ttu-id="fb225-132">Возможность перенаправления папки.</span><span class="sxs-lookup"><span data-stu-id="fb225-132">Whether the folder is capable of being redirected.</span></span>

<span data-ttu-id="fb225-133">[**Икновнфолдер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) также предоставляет метод для получения [**интерфейса IShellItem**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishellitem) на основе папки.</span><span class="sxs-lookup"><span data-stu-id="fb225-133">[**IKnownFolder**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) also provides a method to retrieve an [**IShellItem**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ishellitem) based on the folder.</span></span> <span data-ttu-id="fb225-134">Это позволяет привязать папку к обработчику, сравнить две папки и получить атрибуты папки, отображаемое имя и родительскую папку.</span><span class="sxs-lookup"><span data-stu-id="fb225-134">That allows you to bind the folder to a handler, compare two folders, and retrieve the folder's attributes, display name, and parent folder.</span></span>

## <a name="redirection"></a><span data-ttu-id="fb225-135">Перенаправление</span><span class="sxs-lookup"><span data-stu-id="fb225-135">Redirection</span></span>

<span data-ttu-id="fb225-136">Перенаправление папок является важной функцией известной системы папок.</span><span class="sxs-lookup"><span data-stu-id="fb225-136">Folder redirection is an important feature of the known folder system.</span></span> <span data-ttu-id="fb225-137">Все известные папки категории [ **Общая** КФ \_ Категория \_ Common \* \* \* \*](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-kf_category) или [ **для каждого пользователя** КФ \_ категории \_](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-kf_category) данных "\* \* \* \*" являются перенаправляемыми.</span><span class="sxs-lookup"><span data-stu-id="fb225-137">All known folders of category [**common** KF\_CATEGORY\_COMMON\*\*\*\*](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-kf_category) or [**per-user** KF\_CATEGORY\_PERUSER\*\*\*\*](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-kf_category) are redirectable.</span></span> <span data-ttu-id="fb225-138">Не удается перенаправить папку категории [ **Virtual** КФ \_ Категория Virtual \_ \* \*](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-kf_category) \* или фиксированная [  \_ Категория КФ \_](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-kf_category). \* \* \* \*.</span><span class="sxs-lookup"><span data-stu-id="fb225-138">Folder of category [**virtual** KF\_CATEGORY\_VIRTUAL\*\*\*\*](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-kf_category) or [**fixedr** KF\_CATEGORY\_FIXED\*\*\*\*](/windows/desktop/api/shobjidl_core/ne-shobjidl_core-kf_category), however, cannot be redirected.</span></span>

<span data-ttu-id="fb225-139">Папки могут перенаправляться либо в другое расположение на том же компьютере, либо в расположение в сети.</span><span class="sxs-lookup"><span data-stu-id="fb225-139">Folders can be redirected either to another location on the same computer or to a location on a network.</span></span> <span data-ttu-id="fb225-140">В случае перенаправления сети папку можно кэшировать локально с помощью кэширования на стороне клиента, чтобы обеспечить автономный доступ.</span><span class="sxs-lookup"><span data-stu-id="fb225-140">In the case of a network redirection, the folder can be cached locally through client-side caching to provide offline access.</span></span> <span data-ttu-id="fb225-141">Однако даже если локальный кэш существует, доступ к перенаправленной папке должен осуществляться через сеть.</span><span class="sxs-lookup"><span data-stu-id="fb225-141">However, even if a local cache exists, the redirected folder itself must be accessed through the network.</span></span>

<span data-ttu-id="fb225-142">Перенаправление папок не является новым для Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="fb225-142">Folder redirection is not new for Windows Vista.</span></span> <span data-ttu-id="fb225-143">Например, в Windows XP некоторые папки, идентифицированные с помощью системы CSID, можно перенаправить через вызов [**шсетфолдерпас**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shsetfolderpatha) или путем изменения записи CSid в реестре.</span><span class="sxs-lookup"><span data-stu-id="fb225-143">For example, in Windows XP some folders identified through the CSIDL system could be redirected through a call to [**SHSetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shsetfolderpatha) or by modifying the CSIDL's entry in the registry.</span></span> <span data-ttu-id="fb225-144">В Windows Vista и более поздних версиях перенаправление необходимо выполнить с помощью [**икновнфолдер:: сетпас**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-iknownfolder-setpath) или [**шсеткновнфолдерпас**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shsetknownfolderpath).</span><span class="sxs-lookup"><span data-stu-id="fb225-144">In Windows Vista and later, redirection should be accomplished through [**IKnownFolder::SetPath**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-iknownfolder-setpath) or [**SHSetKnownFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shsetknownfolderpath).</span></span>

<span data-ttu-id="fb225-145">Чтобы определить, можно ли перенаправить папку, вызовите метод [**икновнфолдер:: жетредиректионкапабилитиес**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-iknownfolder-getredirectioncapabilities).</span><span class="sxs-lookup"><span data-stu-id="fb225-145">To determine whether a folder can be redirected, call [**IKnownFolder::GetRedirectionCapabilities**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-iknownfolder-getredirectioncapabilities).</span></span> <span data-ttu-id="fb225-146">Если папка не может быть перенаправлена, этот вызов может дать пояснение.</span><span class="sxs-lookup"><span data-stu-id="fb225-146">If the folder cannot be redirected, this call can give an explanation.</span></span>

<span data-ttu-id="fb225-147">Если папка перенаправляется в сетевую папку, методы [**икновнфолдер**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) по-прежнему могут быть успешно вызваны.</span><span class="sxs-lookup"><span data-stu-id="fb225-147">If a folder is redirected to a network location, the [**IKnownFolder**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-iknownfolder) methods can still be successfully called on it.</span></span>

## <a name="related-topics"></a><span data-ttu-id="fb225-148">См. также</span><span class="sxs-lookup"><span data-stu-id="fb225-148">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="fb225-149">[Пример: известные папки](/previous-versions/windows/desktop/legacy/dd940364(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="fb225-149">[Known Folders Sample](/previous-versions/windows/desktop/legacy/dd940364(v=vs.85))</span></span>
</dt> </dl>

 

 
