---
description: В этом разделе приводится пошаговое изучение требований для создания DLL-файла, который реализует обработчик, используемый в центре синхронизации. Эти сведения действительны для Windows Vista.
title: Разработка обработчика Windows Sync Center
ms.topic: article
ms.date: 05/31/2018
ms.assetid: 66b40f81-9515-4190-8ced-44f20bb9df86
api_name: ''
api_type: ''
api_location: ''
topic_type:
- kbArticle
ms.openlocfilehash: 11185aa5976c27b7af95787b081e1eaacd99c8e9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104985560"
---
# <a name="developing-a-windows-sync-center-handler"></a>Разработка обработчика Windows Sync Center

В этом разделе приводится пошаговое изучение требований для создания DLL-файла, который реализует обработчик, используемый в центре синхронизации. Эти сведения действительны для Windows Vista.

-   [Процесс синхронизации Windows до Vista](#the-windows-synchronization-experience-before-vista)
-   [API центра синхронизации](#sync-center-apis)
    -   [Нужные интерфейсы](#essential-interfaces)

## <a name="the-windows-synchronization-experience-before-vista"></a>Процесс синхронизации Windows до Vista

В Windows XP был предоставлен [Диспетчер синхронизации](syncmgr-start-page.md) (mobsync.exe). Многие устройства, такие как MP3 Players, Сотовые телефоны и камеры, также предоставили собственные интерфейсы синхронизации вместо использования диспетчера синхронизации. Это привело к нестабильному и нецентрализованному интерфейсу пользователя.

Новый компонент центра синхронизации, предоставляемый в Windows Vista, имеет несколько преимуществ по сравнению с предыдущим диспетчером синхронизации.

-   Улучшенная возможность обнаружения
-   Меньше требуется для прямого вмешательства пользователя
-   Не блокирует другие операции
-   Улучшенная визуализация хода выполнения синхронизации
-   Упрощение понимания модели разработки

## <a name="sync-center-apis"></a>API центра синхронизации

Центр синхронизации взаимодействует с обработчиками через ряд интерфейсов модели COM. Не все эти интерфейсы необходимы для реализации обработчика центра синхронизации. Этот раздел разбит на два раздела. В первом разделе объясняются основные интерфейсы COM, которые должен поддерживать каждый обработчик, а во втором разделе рассматриваются необязательные COM-интерфейсы и рассматриваются причины их поддержки обработчиком.

-   [Нужные интерфейсы](#essential-interfaces)

### <a name="essential-interfaces"></a>Нужные интерфейсы

Все обработчики центра синхронизации должны поддерживать следующие интерфейсы:

-   [**исинкмгрхандлер**](/windows/desktop/api/Syncmgr/nn-syncmgr-isyncmgrhandler)
-   [**исинкмгрхандлеринфо**](/windows/desktop/api/Syncmgr/nn-syncmgr-isyncmgrhandlerinfo)
-   [**исинкмгрсинЦитемконтаинер**](/windows/desktop/api/Syncmgr/nn-syncmgr-isyncmgrsyncitemcontainer)
-   [**иенумсинкмгрсинЦитемс**](/windows/desktop/api/Syncmgr/nn-syncmgr-ienumsyncmgrsyncitems)
-   [**исинкмгрсинЦитем**](/windows/desktop/api/Syncmgr/nn-syncmgr-isyncmgrsyncitem)
-   [**исинкмгрсинЦитеминфо**](/windows/desktop/api/Syncmgr/nn-syncmgr-isyncmgrsynciteminfo)

[**ИсинкмгрсинЦитем**](/windows/desktop/api/Syncmgr/nn-syncmgr-isyncmgrsyncitem) и [**исинкмгрсинЦитеминфо**](/windows/desktop/api/Syncmgr/nn-syncmgr-isyncmgrsynciteminfo) используются для описания одного элемента синхронизации, участвующего в синхронизации в центре синхронизации. Элемент синхронизации обычно представляет либо определенный тип данных (например, изображения), либо определенное расположение данных.

Синхронизация элементов, представляющих различные расположения данных, позволяет выполнять очень конкретные операции синхронизации. Степень гранулярности расположения достигается разработчиком обработчика, но при проектировании следует учитывать осторожность. При наличии слишком мало элементов синхронизации (расположений) пользователю предоставляется возможность синхронизировать только определенные данные. С другой крайней стороны, слишком большая степень детализации может стать неуправляемой.

Если обработчик поддерживает более одного типа данных или нескольких расположений данных, он должен поддерживать более одного объекта синхронизации. Примером может быть персональный помощник по работе с данными (PDA), позволяющий пользователю синхронизировать контакты, элементы календаря и документы. Эти три типа данных должны быть представлены тремя уникальными объектами, каждый из которых предоставляет интерфейсы [**исинкмгрсинЦитем**](/windows/desktop/api/Syncmgr/nn-syncmgr-isyncmgrsyncitem) и [**исинкмгрсинЦитеминфо**](/windows/desktop/api/Syncmgr/nn-syncmgr-isyncmgrsynciteminfo) .

Интерфейс [**иенумсинкмгрсинЦитемс**](/windows/desktop/api/Syncmgr/nn-syncmgr-ienumsyncmgrsyncitems) предоставляет механизм для перечисления элементов синхронизации обработчика. Чтобы получить этот перечислитель, центр синхронизации вызывает метод [**исинкмгрсинЦитемконтаинер:: жетсинЦитеменумератор**](/windows/desktop/api/Syncmgr/nf-syncmgr-isyncmgrsyncitemcontainer-getsyncitemenumerator) , предоставляемый обработчиком. [**ИсинкмгрсинЦитемконтаинер**](/windows/desktop/api/Syncmgr/nn-syncmgr-isyncmgrsyncitemcontainer) также содержит два других метода, которые центр синхронизации может использовать для получения сведений об элементах синхронизации обработчика:

-   [**ЖетсинЦитем**](/windows/desktop/api/Syncmgr/nf-syncmgr-isyncmgrsyncitemcontainer-getsyncitem) возвращает конкретный элемент синхронизации.
-   [**ЖетсинЦитемкаунт**](/windows/desktop/api/Syncmgr/nf-syncmgr-isyncmgrsyncitemcontainer-getsyncitemcount) возвращает количество элементов синхронизации, поддерживаемое обработчиком.

[**Исинкмгрхандлер**](/windows/desktop/api/Syncmgr/nn-syncmgr-isyncmgrhandler) и [**исинкмгрхандлеринфо**](/windows/desktop/api/Syncmgr/nn-syncmgr-isyncmgrhandlerinfo) используются для описания свойств руки и запуска фактической синхронизации. [**Исинкмгрхандлер:: Synchronize**](/windows/desktop/api/Syncmgr/nf-syncmgr-isyncmgrhandler-synchronize) — это место, где код обработчика выполняет синхронизацию и предоставляет отзыв о ходе выполнения и любых возникающих проблемах.

Многие из методов интерфейса не обязательно должны быть полностью реализованы. Центр синхронизации предоставляет определенный объем сведений по умолчанию. Интерфейсы позволяют обработчику переопределять эти сведения и предоставлять настраиваемые сведения для вывода при необходимости.

 

 



