---
description: Когда оболочка обнаруживает вставку нового носителя или вложение устройства горячего подключения, определяется содержимое устройства или носителя. Автозапуск, в зависимости от текущих параметров, выполняет одно из следующих действий.
title: Использование и Настройка автоматического запуска
ms.topic: article
ms.date: 05/31/2018
ms.assetid: 096c7042-8cf0-4e4f-934f-274564218f4c
api_name: ''
api_type: ''
api_location: ''
topic_type:
- kbArticle
ms.openlocfilehash: 04a4f6dd09e03f26b13649e860beb7f2621ce952
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103808878"
---
# <a name="using-and-configuring-autoplay"></a>Использование и Настройка автоматического запуска

Когда оболочка обнаруживает вставку нового носителя или вложение устройства горячего подключения, определяется содержимое устройства или носителя. Автозапуск, в зависимости от текущих параметров, выполняет одно из следующих действий.

-   Автоматически воспроизводит содержимое.
-   Отображает диалоговое окно, предлагающее пользователю выбрать обработчик по умолчанию для одного типа содержимого.
-   Представляет, в случае смешанного содержимого, список доступных приложений обработчика для запуска. Затем выбранный обработчик автоматически воспроизводит связанный с ним тип содержимого.
-   Отображает стандартное представление файлов в виде папки.
-   Ничего не делает, если, ранее пользователь выбрал параметр **не предпринимать никаких действий** для этого типа содержимого, а также **выбранное действие всегда выполняется**.

Если содержимое не соответствует критериям автозапуска, событие затем передается в функцию получения образа Windows (WIA).

В следующих разделах обсуждается настройка и использование автозапуска.

-   [Подготовка оборудования и программного обеспечения для использования с автозапуском](#preparing-hardware-and-software-for-use-with-autoplay)
-   [Как автозапуск ищет мультимедиа](#how-autoplay-searches-media)
-   [Определение одного и смешанного типа содержимого](#defining-single-and-mixed-content-types)
-   [Примеры сценариев](#sample-scenarios)
    -   [Автозапуск устройств хранения с изображениями мультимедиа](#autoplay-for-storage-devices-with-picture-media)
    -   [Автозапуск для устройств воспроизведения музыкальных файлов и запоминающих устройств, содержащих музыкальные носители](#autoplay-for-music-file-playback-devices-and-storage-devices-containing-music-media)
    -   [Автозапуск воспроизведения видео при первой презентации](#autoplay-for-video-playback-on-first-presentation)
-   [Назначение приложений обработчика по умолчанию](#assigning-default-handler-applications)
-   [Обработка мультимедиа, содержащего смешанные типы содержимого](#handling-media-containing-mixed-content-types)
-   [Пользовательские интерфейсы автозапуска](#autoplay-user-interfaces)
    -   [Диалоговое окно «один тип содержимого»](#single-content-type-dialog-box)
    -   [Диалоговое окно "смешанный носитель"](#mixed-media-dialog-box)
    -   [Страница свойств](#property-page)

## <a name="preparing-hardware-and-software-for-use-with-autoplay"></a>Подготовка оборудования и программного обеспечения для использования с автозапуском

Для работы функции автозапуска необходимо, чтобы в реестре отображалось несколько фрагментов данных. Эти части информации взаимодействуют друг с другом для формирования полной среды автозапуска. В этом документе описывается настройка каждого из этих фрагментов данных в качестве отдельной изолированной процедуры.

Дополнительные инструкции см. в следующих разделах.

-   [Назначение обработчика устройства устройству](how-to-assign-a-device-handler-to-a-device.md)
-   [Указание значка, метки или обработчика устройства для устройства с помощью группы устройств](how-to-specify-an-icon--label--or-device-handler-for-a-device-using-a-device-group.md)
-   [Указание значка, метки или обработчика устройства для устройства с помощью класса устройств](how-to-specify-an-icon--label--or-device-handler-for-a-device-using-a-device-class.md)
-   [Как предотвратить автозапуск для компонента](how-to-prevent-autoplay-for-a-component.md)
-   [Регистрация обработчика для события устройства](how-to-register-a-handler-for-a-device-event.md)
-   [Использование событий автозапуска в выполняющихся приложениях](how-to-use-autoplay-events-in-running-applications.md)
-   [Регистрация обработчика событий](how-to-register-an-event-handler.md)

## <a name="how-autoplay-searches-media"></a>Как автозапуск ищет мультимедиа

Автозапуск ищет файлы мультимедиа на четырех уровнях ниже корневого каталога для поиска известных типов файлов. Он использует значение PerceivedType, связанное с расширением имени файла в реестре, для определения категории файлов, будь то изображение, звуковой файл или видеофайл. С помощью этой информации Автозапуск запускает соответствующий обработчик для этого устройства и типа файла. Дополнительные сведения см. в разделе [наблюдаемые типы и регистрация приложений](fa-perceivedtypes.md).

## <a name="defining-single-and-mixed-content-types"></a>Определение одного и смешанного типа содержимого

Автозапуск определяет три основные категории содержимого.

-   Изображения
-   Музыка
-   Видео

Предполагается, что носитель содержит один тип содержимого, если все файлы на носителе попадают только в одну из этих трех категорий. Обратите внимание, что это не означает, что файлы должны иметь один и *тот же тип файлов;* JPG, GIF и. bmp имеют разные типы файлов, но один тип содержимого (рисунки).

Если на носителе имеются Поддерживаемые типы содержимого, но ни один тип содержимого не может учитывать 100 процентов от общего числа, то предполагается, что носитель содержит смешанный тип содержимого и обрабатывается соответствующим образом. Дополнительные сведения см. в разделе [Обработка мультимедиа, содержащего смешанные типы содержимого](#handling-media-containing-mixed-content-types).

## <a name="sample-scenarios"></a>Примеры сценариев

Приведенные ниже сценарии предоставляют основные сведения о том, что следует ждать от автоматического запуска.

### <a name="autoplay-for-storage-devices-with-picture-media"></a>Автозапуск устройств хранения с изображениями мультимедиа

1.  Пользователь подключает устройство USB СанДиск CompactFlash Reader, в котором уже вставлен носитель с типом содержимого изображения 100% в виде JPG-файлов.
2.  В уведомлении **обнаружено новое оборудование-СанДиск имажемате**.
3.  Автозапуск запускает соответствующее приложение Image.

Аналогично, когда пользователь вставляет тот же адаптер CompactFlash в модуль чтения, когда модуль чтения уже подключен к системе, событие вставки носителя также вызывает автозапуск для запуска изображения слайд-шоу. Пользователь имеет возможность перейти на страницу свойств устройства мультимедиа СанДиск, чтобы изменить значение по умолчанию на другое зарегистрированное приложение автозапуска, например мастер сканера и камеры, или Picture!.

### <a name="autoplay-for-music-file-playback-devices-and-storage-devices-containing-music-media"></a>Автозапуск для устройств воспроизведения музыкальных файлов и запоминающих устройств, содержащих музыкальные носители

1.  Пользователь присоединяет проигрыватель USB-ромба Рио MP3.
2.  В уведомлении **обнаружено новое оборудование-ромб Рио MP3 Player**.
3.  Автозапуск воспроизводит файлы с помощью зарегистрированного обработчика по умолчанию (например, проигрывателя Windows Media).

Аналогичным образом, если пользователь вставит носитель, содержащий MP3-файлы (например, CompactFlash, Смартмедиа, память или компакт-диск), который учитывает 100 процентов общего поддерживаемого содержимого на устройстве хранения, событие вставки носителя также приведет к воспроизведению файлов с помощью проигрывателя Windows Media. Пользователь может получить доступ к странице свойств устройства хранения и изменить действие по умолчанию на другое зарегистрированное приложение автозапуска, например винамп или Real Player.

### <a name="autoplay-for-video-playback-on-first-presentation"></a>Автозапуск воспроизведения видео при первой презентации

1.  Пользователь подключается к цифровой видеокамере 1394 в первый раз.
2.  Пользователю предоставляется простое диалоговое окно с запросом на запуск приложения. Можно выбрать Запуск одного из зарегистрированных приложений автозапуска или открытие папки для просмотра файлов. Пользователь может указать, что выбранное поведение будет сохранено в качестве действия по умолчанию для последующего события горячего подключения цифровой видеокамеры.

## <a name="assigning-default-handler-applications"></a>Назначение приложений обработчика по умолчанию

Новая установка Windows находит Автозапуск с набором зарегистрированных приложений обработчиков. Приложения, зарегистрированные по умолчанию во время установки Windows, приведены ниже.



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Тип носителя</th>
<th>Приложения</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Изображения</td>
<td><ul>
<li>Слайд-шоу (по умолчанию)</li>
<li>Мастер настройки камеры и сканера</li>
<li>Мастер печати</li>
<li>Открытие папки</li>
</ul></td>
</tr>
<tr class="even">
<td>Музыка</td>
<td><ul>
<li>Проигрыватель Windows Media (по умолчанию)</li>
<li>Открытие папки</li>
</ul></td>
</tr>
<tr class="odd">
<td>Видео</td>
<td><ul>
<li>Проигрыватель Windows Media (по умолчанию)</li>
<li>Открытие папки</li>
</ul></td>
</tr>
</tbody>
</table>



 

В случае неподдерживаемых типов пользователям предлагается назначить значение по умолчанию для действия автозапуска, связанного с каждым устройством хранения, при первом вводе в систему. В это время пользователю предлагается выбрать действие из предоставленного списка зарегистрированных приложений или отобразить представление папки с перечнем содержимого носителя. Пользователь также имеет возможность выбирать при каждом обнаружении типа носителя, а не сохранять какое-либо конкретное приложение в качестве значения по умолчанию.

> [!Note]  
> Производители устройств имеют возможность регистрации и назначения приложений по умолчанию для использования с определенными продуктами. В таких случаях диалоговое окно, предлагающее выбрать пользователя, не отображается.

 

Для предоставления в качестве параметра обработчика автозапуска недавно установленные приложения должны регистрироваться в реестре. Дополнительные сведения см. в разделе [Подготовка оборудования и программного обеспечения для использования при автозапуске](#preparing-hardware-and-software-for-use-with-autoplay).

Пользователи всегда могут изменять обработчик автозапуска по умолчанию для любого устройства хранения или типа содержимого. Страница свойств автозапуска доступна для изменения на вкладке свойств устройства хранения в **Мой компьютер**.

Примеры пользовательских запросов и страниц свойств см. в разделе [Автозапуск пользовательских интерфейсов](#autoplay-user-interfaces).

## <a name="handling-media-containing-mixed-content-types"></a>Обработка мультимедиа, содержащего смешанные типы содержимого

Когда автозапуск представлен со смешанным носителем содержимого, он требует ввода данных пользователем, прежде чем он сможет принять меры. В этом случае пользователю предоставляется диалоговое окно, содержащее отфильтрованный список всех соответствующих зарегистрированных приложений, доступных для типов содержимого, имеющихся на носителе. Пользователь может выбрать одно из этих приложений для автоматического запуска определенного типа содержимого, а остальные остаются нетронутыми. Так как композиция смешанного содержимого мультимедиа зависит от каждого отдельного диска, нет возможности сохранить этот выбор по умолчанию.

Примеры запросов пользователей см. в разделе [Автозапуск пользовательских интерфейсов](#autoplay-user-interfaces).

## <a name="autoplay-user-interfaces"></a>Пользовательские интерфейсы автозапуска

Существует три возможных пользовательского интерфейса.

-   Диалоговое окно, предлагающее пользователю ввести действие для одного типа содержимого
-   Диалоговое окно, предлагающее пользователю ввести действие для смешанных типов содержимого
-   Страница свойств

### <a name="single-content-type-dialog-box"></a>Диалоговое окно «один тип содержимого»

Диалоговое окно, аналогичное приведенному ниже, отображается, если системе не предоставлены какие-либо Поддерживаемые носители.

![снимок экрана — диалоговое окно "тип отдельного содержимого"](images/pix.png)

Пользователи могут выполнить одно из следующих действий.

-   Выберите действие из списка зарегистрированных приложений.
-   Вывод списка файлов на носителе в обычном представлении папки.
-   Не предпринимать никаких действий.

Пользователь также может сохранить выбор в качестве действия по умолчанию для этого среднего, установив флажок **всегда выполнять выбранное действие** . После этого диалоговое окно снова не отображается. Однако в Windows XP с пакетом обновления 1 (SP1), если на компьютер добавляется новое приложение, способное работать с определенным типом носителя, диалоговое окно снова отображается пользователю, давая ему возможность выбрать новое приложение в качестве действия автозапуска по умолчанию. Приложения также могут устанавливаться по умолчанию при их установке.

В Windows XP с пакетом обновления 1 (SP1) также добавляется функция, сохраняющая пользовательское действие автозапуска, если не щелкнуть поле **всегда выполнять выбранное действие** . Если пользователь выбирает действие автозапуска для одного экземпляра, при следующем отображении этого диалогового окна для этого типа носителя это действие будет выбрано по умолчанию.

Чтобы приложение включалось в список возможных действий, оно должно быть зарегистрировано с помощью автозапуска. Дополнительные сведения см. в разделе [Подготовка оборудования и программного обеспечения для использования при автозапуске](#preparing-hardware-and-software-for-use-with-autoplay).

### <a name="mixed-media-dialog-box"></a>Диалоговое окно "смешанный носитель"

Если в системе представлен любой носитель, содержащий сочетание поддерживаемых типов файлов, отображается следующее диалоговое окно. По сути, это то же самое, что и диалоговое окно одно содержимое, но с двумя значительными различиями. Во-первых, доступные параметры действия состоят из отфильтрованного списка приложений, соответствующих всем типам содержимого, присутствующим на носителе. Во-вторых, нет возможности выбрать постоянное действие по умолчанию, так как типы содержимого и процентные доли носителя со смешанным содержимым слишком непредсказуемы.

![снимок экрана — диалоговое окно "смешанный носитель"](images/mix.png)

Чтобы приложение включалось в список возможных действий, оно должно быть зарегистрировано с помощью автозапуска. Дополнительные сведения см. в разделе [Подготовка оборудования и программного обеспечения для использования при автозапуске](#preparing-hardware-and-software-for-use-with-autoplay).

### <a name="property-page"></a>Страница свойств

Ниже приведен пример страницы свойств автозапуска для устройства DVD/CD-ROM.

![снимок экрана со страницей свойств](images/apdlg.png)

Каждый тип устройства предлагает соответствующее подмножество типов содержимого для настройки автозапуска. В свою очередь, каждый тип содержимого, если он выбран, предлагает соответствующий список параметров действий в списке. Для каждого типа содержимого можно выбрать другое действие.

 

 



