---
description: Здесь показано, как зарегистрировать корневой поставщик синхронизации и интегрировать поставщик облачного хранилища в корневой уровень области навигации.
ms.assetid: BB177EDC-8C88-4540-B2F8-994C1C8BA91C
title: Интеграция поставщика облачного хранилища
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 21fdc5abfbf9881bfe23b00a924fce989aec7c95
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104557780"
---
# <a name="integrate-a-cloud-storage-provider"></a><span data-ttu-id="1e342-103">Интеграция поставщика облачного хранилища</span><span class="sxs-lookup"><span data-stu-id="1e342-103">Integrate a Cloud Storage Provider</span></span>

<span data-ttu-id="1e342-104">Если у вас есть поставщик облачного хранилища, необходимо выполнить несколько действий, чтобы обеспечить единообразное и предпочтительное взаимодействие с пользователем.</span><span class="sxs-lookup"><span data-stu-id="1e342-104">When you have a cloud storage provider, there are a couple of steps you should take in order to provide a consistent and preferred experience for the user.</span></span> <span data-ttu-id="1e342-105">Эти две вещи регистрируются в качестве корневого поставщика синхронизации и интегрируют приложение в корневой уровень области навигации.</span><span class="sxs-lookup"><span data-stu-id="1e342-105">These two things are registering as a sync root provider and integrating your application into the root level of the Navigation Pane.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1e342-106">Интеграция поставщика облачного хранилища поддерживается только начиная с Windows 10.</span><span class="sxs-lookup"><span data-stu-id="1e342-106">Integrating your cloud storage provider is only supported starting in Windows 10.</span></span>

 

<span data-ttu-id="1e342-107">Первое, что нужно зарегистрировать как корневой поставщик синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1e342-107">The first thing is to register as a sync root provider.</span></span> <span data-ttu-id="1e342-108">Это позволяет оболочке Windows узнать о вашем приложении и о том, что приложение будет отвечать за синхронизацию файлов в корне синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1e342-108">This lets the Windows Shell know about your application and that your application will be responsible for synchronizing files under your sync root.</span></span> <span data-ttu-id="1e342-109">Это также позволит другим приложениям определить, что вы синхронизируете эти файлы, чтобы они могли отвечать соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="1e342-109">This will also let other applications know that you are synchronizing these files so that they can respond appropriately.</span></span> <span data-ttu-id="1e342-110">Другие приложения могут использовать [**StorageFile. Provider**](/uwp/api/Windows.Storage.StorageFile?view=winrt-19041) для получения [**DisplayName**](/uwp/api/Windows.Storage.StorageProvider?view=winrt-19041) и [**идентификатора**](/uwp/api/Windows.Storage.StorageProvider?view=winrt-19041) приложения.</span><span class="sxs-lookup"><span data-stu-id="1e342-110">Other applications can then use [**StorageFile.Provider**](/uwp/api/Windows.Storage.StorageFile?view=winrt-19041) to get the [**DisplayName**](/uwp/api/Windows.Storage.StorageProvider?view=winrt-19041) and [**Id**](/uwp/api/Windows.Storage.StorageProvider?view=winrt-19041) of your application.</span></span>

<span data-ttu-id="1e342-111">Чтобы зарегистрироваться в качестве корневого поставщика синхронизации, необходимо создать несколько записей реестра.</span><span class="sxs-lookup"><span data-stu-id="1e342-111">In order to register as a sync root provider, you will need to create multiple registry entries.</span></span> <span data-ttu-id="1e342-112">Перед предоставлением списка пар "ключ-значение" ниже приведены некоторые заполнители, которые следует заменить собственными данными приложения.</span><span class="sxs-lookup"><span data-stu-id="1e342-112">Before providing the list of key-value pairs, here are some placeholders that you should replace with your own application data.</span></span>

-   <span data-ttu-id="1e342-113">*\[ идентификатор \] поставщика хранилища*: имя поставщика облачного хранилища.</span><span class="sxs-lookup"><span data-stu-id="1e342-113">*\[storage provider ID\]*: The name of your cloud storage provider.</span></span> <span data-ttu-id="1e342-114">Это имя должно быть одинаковым, независимо от версии приложения.</span><span class="sxs-lookup"><span data-stu-id="1e342-114">This name should be consistent regardless of the version of your application.</span></span> <span data-ttu-id="1e342-115">Примером этого является OneDrive.</span><span class="sxs-lookup"><span data-stu-id="1e342-115">An example of this is OneDrive.</span></span>
-   <span data-ttu-id="1e342-116">*\[ Идентификатор безопасности \] Windows*— уникальный идентификатор безопасности Windows, идентифицирующий пользователя.</span><span class="sxs-lookup"><span data-stu-id="1e342-116">*\[Windows SID\]*: The unique Windows SID that identifies the user.</span></span> <span data-ttu-id="1e342-117">Если приложение поддерживает несколько установок для нескольких пользователей на одном компьютере, этот элемент является обязательным.</span><span class="sxs-lookup"><span data-stu-id="1e342-117">If your app supports multiple installations for multiple users on a single machine, this piece is required.</span></span>
-   <span data-ttu-id="1e342-118">*\[ Идентификатор \] учетной записи*: идентификатор поставщика услуг для текущей учетной записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="1e342-118">*\[Account ID\]*: The service provider identifier for this user's current account.</span></span> <span data-ttu-id="1e342-119">Для некоторых поставщиков требуется возможность предоставления пользователю нескольких корней синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1e342-119">Some providers require the ability to provide multiple synchronization roots for a user.</span></span> <span data-ttu-id="1e342-120">Одним из примеров является работа и личная учетная запись.</span><span class="sxs-lookup"><span data-stu-id="1e342-120">One example of this is a work and a personal account.</span></span> <span data-ttu-id="1e342-121">*Идентификатор учетной записи* позволяет зарегистрировать несколько учетных записей для одного пользователя.</span><span class="sxs-lookup"><span data-stu-id="1e342-121">The *Account ID* enables you to have multiple accounts registered for one user.</span></span> <span data-ttu-id="1e342-122">Если поставщик поддерживает несколько корней синхронизации для каждого пользователя, этот элемент является обязательным.</span><span class="sxs-lookup"><span data-stu-id="1e342-122">If your provider does support multiple synchronization roots per user, this piece is required.</span></span>

<span data-ttu-id="1e342-123">Эти заполнители комбинируются вместе, образуя идентификатор корня синхронизации. Необходимо поместить **!**</span><span class="sxs-lookup"><span data-stu-id="1e342-123">These placeholders are combined together to form the sync root id. You must place a **!**</span></span> <span data-ttu-id="1e342-124">символ между заполнителями при создании идентификатора корня синхронизации. Ниже приведены пары "ключ-значение", которые необходимо создать.</span><span class="sxs-lookup"><span data-stu-id="1e342-124">character between each of the placeholders when forming the sync root id. Here are the key-value pairs that need to be created.</span></span>

-   <span data-ttu-id="1e342-125">**HKLM \\ Программное обеспечение \\ Microsoft \\ Windows \\ CurrentVersion \\ Explorer \\ \\** с _\[ идентификатором \] поставщика хранилища_ синкрутманажер *_!_* _\[ Идентификатор безопасности \] Windows_*_!_* _\[ Идентификатор \] учетной записи_*_\\ дисплайнамересаурце_* : указывает на ресурс, в котором оболочка Windows или другие приложения могут получить понятное имя для корня синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1e342-125">**HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\SyncRootManager\\**_\[storage provider ID\]_*_!_*_\[Windows SID\]_*_!_*_\[Account ID\]_*_\\DisplayNameResource_* : Points to the resource where the Windows Shell or other applications can get a user-friendly name for your sync root.</span></span>
-   <span data-ttu-id="1e342-126">**HKLM \\ Программное обеспечение \\ Microsoft \\ Windows \\ CurrentVersion \\ Explorer \\ \\** с _\[ идентификатором \] поставщика хранилища_ синкрутманажер *_!_* _\[ Идентификатор безопасности \] Windows_*_!_* _\[ Идентификатор \] учетной записи_*_\\ иконресаурце_* : указывает на ресурс, в котором оболочка Windows или другие приложения могут получить значок для корня синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1e342-126">**HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\SyncRootManager\\**_\[storage provider ID\]_*_!_*_\[Windows SID\]_*_!_*_\[Account ID\]_*_\\IconResource_* : Points to the resource where the Windows Shell or other applications can get an icon for your sync root.</span></span>
-   <span data-ttu-id="1e342-127">**HKLM \\ Программное обеспечение \\ Microsoft \\ Windows \\ CurrentVersion \\ Explorer \\ \\** с _\[ идентификатором \] поставщика хранилища_ синкрутманажер *_!_* _\[ Идентификатор безопасности \] Windows_*_!_* _\[ Идентификатор \] учетной записи_*_\\ \\ усерсинкрутс_*_\[ Windows SID \]_ : расположение на диске, где находится корень синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1e342-127">**HKLM\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\SyncRootManager\\**_\[storage provider ID\]_*_!_*_\[Windows SID\]_*_!_*_\[Account ID\]_*_\\UserSyncRoots\\_*_\[Windows SID\]_ : The location on disk where the sync root is located.</span></span>

<span data-ttu-id="1e342-128">Кроме регистрации в качестве корневого поставщика синхронизации, пользователи также должны иметь простой доступ к предоставленным данным.</span><span class="sxs-lookup"><span data-stu-id="1e342-128">Other than registering as a sync root provider, you also want users to have easy access to the data you provide.</span></span> <span data-ttu-id="1e342-129">Пространство имен проводника предназначено для предоставления метода для такого простого доступа.</span><span class="sxs-lookup"><span data-stu-id="1e342-129">The File Explorer namespace is designed to provide a method for that easy access.</span></span> <span data-ttu-id="1e342-130">Создание расширения пространства имен для поставщика и его включение в окно проводника позволит пользователям взаимодействовать с корневым уровнем служб так же, как они используются с другими элементами проводника.</span><span class="sxs-lookup"><span data-stu-id="1e342-130">Creating a namespace extension for your provider and incorporating it into the File Explorer window will allow users to interact with the root level of your services just like they are used to with other File Explorer items.</span></span> <span data-ttu-id="1e342-131">В этом разделе объясняется, как расширить пространство имен проводника, чтобы поставщик отображался на корневом уровне в области навигации.</span><span class="sxs-lookup"><span data-stu-id="1e342-131">This topic explains how to extend the File Explorer namespace so that your provider will appear at the root level in the Navigation Pane.</span></span>

<span data-ttu-id="1e342-132">Область навигации окна проводника — это часть окна, отображаемая в левой части экрана.</span><span class="sxs-lookup"><span data-stu-id="1e342-132">The Navigation Pane of the File Explorer window is the portion of the window displayed on the left side.</span></span> <span data-ttu-id="1e342-133">На изображении ниже можно увидеть структуру пространства имен для этого пользователя.</span><span class="sxs-lookup"><span data-stu-id="1e342-133">In the image below, you can see the namespace structure for this user.</span></span> <span data-ttu-id="1e342-134">Корневой уровень в области навигации включает объекты для **OneDrive**, **этого компьютера** и **сети**.</span><span class="sxs-lookup"><span data-stu-id="1e342-134">The root level on the Navigation Pane includes the objects for **OneDrive**, **This PC**, and **Network**.</span></span> <span data-ttu-id="1e342-135">После выполнения этих действий расширение будет добавлено на тот же уровень.</span><span class="sxs-lookup"><span data-stu-id="1e342-135">Following these steps will add your extension to the same level.</span></span>

![Панель навигации](images/navigationpane.png)

<span data-ttu-id="1e342-137">Чтобы добавить расширение в область навигации, перед редактированием реестра необходимо выполнить следующие действия.</span><span class="sxs-lookup"><span data-stu-id="1e342-137">In order to add your extension to the Navigation Pane, you will need to have the following before editing the registry:</span></span>

-   <span data-ttu-id="1e342-138">Папка файловой системы, содержащая данные, отображаемые для пользователя.</span><span class="sxs-lookup"><span data-stu-id="1e342-138">A file system folder that contains the data to display to the user.</span></span>

-   <span data-ttu-id="1e342-139">Имя облачной службы, которая будет отображаться в области навигации.</span><span class="sxs-lookup"><span data-stu-id="1e342-139">Name of your cloud service that will appear in the Navigation Pane.</span></span> <span data-ttu-id="1e342-140">Это также может быть имя экземпляра, если служба поддерживает несколько учетных записей.</span><span class="sxs-lookup"><span data-stu-id="1e342-140">This could also be the name of the instance if your service supports multiple accounts.</span></span>

-   <span data-ttu-id="1e342-141">Понятный значок для приложения.</span><span class="sxs-lookup"><span data-stu-id="1e342-141">Identifiable icon for your application.</span></span>

-   <span data-ttu-id="1e342-142">Идентификатор CLSID для приложения.</span><span class="sxs-lookup"><span data-stu-id="1e342-142">A CLSID for your application.</span></span> <span data-ttu-id="1e342-143">Один из способов создания идентификатора CLSID для приложения заключается в использовании Uuidgen.exe.</span><span class="sxs-lookup"><span data-stu-id="1e342-143">One way to generate a CLSID for your application is to use the Uuidgen.exe.</span></span> <span data-ttu-id="1e342-144">Дополнительные сведения о CLSID см. в разделе [ключ CLSID](../com/clsid-key-hklm.md) .</span><span class="sxs-lookup"><span data-stu-id="1e342-144">See [CLSID Key](../com/clsid-key-hklm.md) for more information about CLSID.</span></span>

<span data-ttu-id="1e342-145">Следующие шаги позволяют изменить реестр, чтобы получить необходимые сведения в пространстве имен проводника.</span><span class="sxs-lookup"><span data-stu-id="1e342-145">The following steps modify the registry in order to get the necessary information into the File Explorer namespace.</span></span> <span data-ttu-id="1e342-146">Конкретные действия выполняются в три вещи.</span><span class="sxs-lookup"><span data-stu-id="1e342-146">The specific steps do three things.</span></span>

-   <span data-ttu-id="1e342-147">Создайте ключи в реестре для идентификатора CLSID, который содержит значения имени и значка для расширения, а также другие сведения, определяющие его поведение.</span><span class="sxs-lookup"><span data-stu-id="1e342-147">Create keys in the registry for your CLSID that includes values for the name and icon for your extension as well as other information that defines its behavior.</span></span>

-   <span data-ttu-id="1e342-148">Настройте расширение для интеграции в область навигации в правильном расположении и с соответствующей видимостью.</span><span class="sxs-lookup"><span data-stu-id="1e342-148">Configure your extension to be integrated into the Navigation Pane in the proper location and with the proper visibility.</span></span>

-   <span data-ttu-id="1e342-149">Настройте расширение так, чтобы оно имело ожидаемое поведение для элемента в области навигации.</span><span class="sxs-lookup"><span data-stu-id="1e342-149">Configure your extension to have the expected behavior for an element in the navigation pane.</span></span>

<span data-ttu-id="1e342-150">В этих инструкциях специально используется команда **reg.exe** , однако вы можете использовать любое средство редактирования реестра по своему усмотрению.</span><span class="sxs-lookup"><span data-stu-id="1e342-150">These instructions specifically use the **reg.exe** command, however you can use any registry editing tool of your choice.</span></span> <span data-ttu-id="1e342-151">Вы даже можете интегрировать эти шаги в установщик, который программно обновляет реестр.</span><span class="sxs-lookup"><span data-stu-id="1e342-151">You can even integrate these steps into an installer that updates the registry programmatically.</span></span>

## <a name="instructions"></a><span data-ttu-id="1e342-152">Инструкции</span><span class="sxs-lookup"><span data-stu-id="1e342-152">Instructions</span></span>

### <a name="step-1-add-your-clsid-and-name-your-extension"></a><span data-ttu-id="1e342-153">Шаг 1. Добавление идентификатора CLSID и имени расширения</span><span class="sxs-lookup"><span data-stu-id="1e342-153">Step 1: Add your CLSID and name your extension</span></span>

<span data-ttu-id="1e342-154">Добавьте имя расширения в реестр в разделе HKEY \_ текущий \_ пользователь.</span><span class="sxs-lookup"><span data-stu-id="1e342-154">Add the name of your extension to the registry under HKEY\_CURRENT\_USER.</span></span> <span data-ttu-id="1e342-155">Вы также добавите уникальный идентификатор для этого расширения.</span><span class="sxs-lookup"><span data-stu-id="1e342-155">You will also be adding the unique identifier for this extension.</span></span> <span data-ttu-id="1e342-156">Можно добавить несколько расширений на одного пользователя, но в этом случае для каждого модуля потребуется уникальное имя и идентификатор.</span><span class="sxs-lookup"><span data-stu-id="1e342-156">It is possible to add more than one extension per user, but in that case you will need a unique name and identifier for each extension.</span></span> <span data-ttu-id="1e342-157">Это имя и идентификатор должны быть согласованы на протяжении всех остальных шагов.</span><span class="sxs-lookup"><span data-stu-id="1e342-157">This name and identifier must be consistent throughout the rest of these steps.</span></span> <span data-ttu-id="1e342-158">В этом примере имя — *миклаудсторажеапп*.</span><span class="sxs-lookup"><span data-stu-id="1e342-158">In this example, the name is *MyCloudStorageApp*.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1e342-159">Указанный идентификатор (0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3) в этих шагах просто используется в качестве примера.</span><span class="sxs-lookup"><span data-stu-id="1e342-159">The identifier provided (0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3) in these steps is just used as a sample.</span></span> <span data-ttu-id="1e342-160">Его необходимо изменить на уникальный идентификатор CLSID.</span><span class="sxs-lookup"><span data-stu-id="1e342-160">You will need to change this to your unique CLSID.</span></span>

 

<span data-ttu-id="1e342-161">**REG Add HKCU \\ Software \\ Classes \\ CLSID \\ {0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3}/ве/t REG \_ SZ/d "миклаудсторажеапп"/f**</span><span class="sxs-lookup"><span data-stu-id="1e342-161">**reg add HKCU\\Software\\Classes\\CLSID\\{0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3} /ve /t REG\_SZ /d "MyCloudStorageApp" /f**</span></span>

### <a name="step-2-set-the-image-for-your-icon"></a><span data-ttu-id="1e342-162">Шаг 2. Настройка изображения для значка</span><span class="sxs-lookup"><span data-stu-id="1e342-162">Step 2: Set the image for your icon</span></span>

<span data-ttu-id="1e342-163">Укажите путь к значку, который должен отображаться в области навигации.</span><span class="sxs-lookup"><span data-stu-id="1e342-163">Provide the path to the icon that should be displayed in the Navigation Pane.</span></span> <span data-ttu-id="1e342-164">В приведенном ниже примере *1043* ссылается на идентификатор ресурса для значка в указанной библиотеке DLL.</span><span class="sxs-lookup"><span data-stu-id="1e342-164">In the example below, *1043* refers to the resource identifier for the icon in the indicated DLL.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1e342-165">Необходимо обновить путь к образу.</span><span class="sxs-lookup"><span data-stu-id="1e342-165">You need to update the image path.</span></span> <span data-ttu-id="1e342-166">Он должен указывать на универсальный путь, по которому приложение установило образ.</span><span class="sxs-lookup"><span data-stu-id="1e342-166">It should point to a generic path where your app installed an image.</span></span>

 

<span data-ttu-id="1e342-167">**REG Add HKCU \\ Software \\ Classes \\ CLSID \\ {0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3} \\ дефаултикон/ве/t REG \_ expand \_ SZ/d%% SystemRoot%% \\ system32 \\imageres.dll,-1043/f**</span><span class="sxs-lookup"><span data-stu-id="1e342-167">**reg add HKCU\\Software\\Classes\\CLSID\\{0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3}\\DefaultIcon /ve /t REG\_EXPAND\_SZ /d %%SystemRoot%%\\system32\\imageres.dll,-1043 /f**</span></span>

### <a name="step-3-add-your-extension-to-the-navigation-pane-and-make-it-visible"></a><span data-ttu-id="1e342-168">Шаг 3. Добавьте расширение в область навигации и сделайте его видимым</span><span class="sxs-lookup"><span data-stu-id="1e342-168">Step 3: Add your extension to the Navigation Pane and make it visible</span></span>

<span data-ttu-id="1e342-169">Если задать для этого параметра значение 0x1, это означает, что расширение должно быть закреплено.</span><span class="sxs-lookup"><span data-stu-id="1e342-169">Setting this value to 0x1 indicates that the extension should be pinned.</span></span> <span data-ttu-id="1e342-170">Это гарантирует, что по умолчанию он будет отображаться для пользователей.</span><span class="sxs-lookup"><span data-stu-id="1e342-170">This will make sure it is shown to users by default.</span></span> <span data-ttu-id="1e342-171">Конфигурация по умолчанию для пользователя заключается в том, что в области навигации будут отображаться только закрепленные элементы.</span><span class="sxs-lookup"><span data-stu-id="1e342-171">The default configuration for a user is that only pinned items will be shown in the Navigation Pane.</span></span> <span data-ttu-id="1e342-172">Пользователь может изменить этот параметр, щелкнув правой кнопкой мыши в области навигации и выбрав пункт " **отобразить все папки**".</span><span class="sxs-lookup"><span data-stu-id="1e342-172">A user can change that setting by right-clicking in the Navigation Pane and selecting **Show all folders**.</span></span> <span data-ttu-id="1e342-173">Если вы не хотите закрепить расширение, это значение можно задать равным 0x0.</span><span class="sxs-lookup"><span data-stu-id="1e342-173">If you don't want to pin your extension, you can set this value to 0x0.</span></span> <span data-ttu-id="1e342-174">Это не приведет к удалению расширения, но по умолчанию он не будет отображаться пользователю.</span><span class="sxs-lookup"><span data-stu-id="1e342-174">That will not remove your extension, but merely prevent it from being displayed to the user by default.</span></span>

<span data-ttu-id="1e342-175">**REG Add HKCU \\ Software \\ Classes \\ CLSID \\ {0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3}/v System. испиннедтонамеспацетри/t REG \_ DWORD/d 0x1/f**</span><span class="sxs-lookup"><span data-stu-id="1e342-175">**reg add HKCU\\Software\\Classes\\CLSID\\{0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3} /v System.IsPinnedToNameSpaceTree /t REG\_DWORD /d 0x1 /f**</span></span>

### <a name="step-4-set-the-location-for-your-extension-in-the-navigation-pane"></a><span data-ttu-id="1e342-176">Шаг 4. Задание расположения расширения в области навигации</span><span class="sxs-lookup"><span data-stu-id="1e342-176">Step 4: Set the location for your extension in the Navigation Pane</span></span>

<span data-ttu-id="1e342-177">Это крайне важно для того, чтобы убедиться в том, что область навигации обеспечивает единообразное взаимодействие с пользователем.</span><span class="sxs-lookup"><span data-stu-id="1e342-177">This is critical in order to make sure the Navigation Pane provides a consistent experience for the user.</span></span>

<span data-ttu-id="1e342-178">**REG Add HKCU \\ классы программного обеспечения \\ \\ CLSID \\ {0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3}/V сортордериндекс/t REG \_ DWORD/d 0x42/f**</span><span class="sxs-lookup"><span data-stu-id="1e342-178">**reg add HKCU\\Software\\Classes\\CLSID\\{0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3} /v SortOrderIndex /t REG\_DWORD /d 0x42 /f**</span></span>

### <a name="step-5-provide-the-dll-that-hosts-your-extension"></a><span data-ttu-id="1e342-179">Шаг 5. Укажите библиотеку DLL, в которой размещено расширение.</span><span class="sxs-lookup"><span data-stu-id="1e342-179">Step 5: Provide the dll that hosts your extension.</span></span>

<span data-ttu-id="1e342-180">Используйте shell32.dll для эмуляции папок Windows по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="1e342-180">Use the shell32.dll to emulate default windows folders.</span></span> <span data-ttu-id="1e342-181">Измените это только в том случае, если у вас есть конкретная причина для этого и вы знакомы с расширениями пространства имен.</span><span class="sxs-lookup"><span data-stu-id="1e342-181">Only change this if you have a specific reason to do so and are familiar with namespace extensions.</span></span>

<span data-ttu-id="1e342-182">**REG Add HKCU \\ классы программного обеспечения \\ \\ CLSID \\ {0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3} \\ InprocServer32/ве/t REG \_ expand \_ SZ/d%% systemroot%% \\ system32 \\shell32.dll/f**</span><span class="sxs-lookup"><span data-stu-id="1e342-182">**reg add HKCU\\Software\\Classes\\CLSID\\{0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3}\\InProcServer32 /ve /t REG\_EXPAND\_SZ /d %%systemroot%%\\system32\\shell32.dll /f**</span></span>

### <a name="step-6-define-the-instance-object"></a><span data-ttu-id="1e342-183">Шаг 6. определение объекта экземпляра</span><span class="sxs-lookup"><span data-stu-id="1e342-183">Step 6: Define the instance object</span></span>

<span data-ttu-id="1e342-184">Укажите, что расширение пространства имен должно работать, как и другие структуры файловых папок в проводнике.</span><span class="sxs-lookup"><span data-stu-id="1e342-184">Indicate that your namespace extension should function like other file folder structures in File Explorer.</span></span> <span data-ttu-id="1e342-185">Дополнительные сведения об объектах экземпляров оболочки см. [в разделе Создание расширений оболочки с помощью объектов экземпляра оболочки](/previous-versions/ms997573(v=msdn.10)).</span><span class="sxs-lookup"><span data-stu-id="1e342-185">For more information about shell instance objects, see [Creating Shell Extensions with Shell Instance Objects](/previous-versions/ms997573(v=msdn.10)).</span></span>

<span data-ttu-id="1e342-186">**REG Add HKCU \\ классы программного обеспечения \\ \\ CLSID \\ {0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3} \\ экземпляр/v CLSID/T REG \_ SZ/d {0E5AAE11-A475-4c5b-AB00-C66DE400274E}/f**</span><span class="sxs-lookup"><span data-stu-id="1e342-186">**reg add HKCU\\Software\\Classes\\CLSID\\{0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3}\\Instance /v CLSID /t REG\_SZ /d {0E5AAE11-A475-4c5b-AB00-C66DE400274E} /f**</span></span>

### <a name="step-7-provide-the-file-system-attributes-of-the-target-folder"></a><span data-ttu-id="1e342-187">Шаг 7. Указание атрибутов файловой системы целевой папки</span><span class="sxs-lookup"><span data-stu-id="1e342-187">Step 7: Provide the file system attributes of the target folder</span></span>

<span data-ttu-id="1e342-188">Это необходимо, чтобы обеспечить единообразное и ожидаемое взаимодействие пользователей с обозревателем.</span><span class="sxs-lookup"><span data-stu-id="1e342-188">This is required to make sure that the File Explorer provides a consistent and expected experience for users.</span></span> <span data-ttu-id="1e342-189">Эта команда устанавливает **атрибут \_ File \_ Attribute** и **\_ Attribute file \_ ReadOnly**, оба из которых являются [**константами атрибутов файла**](../fileio/file-attribute-constants.md).</span><span class="sxs-lookup"><span data-stu-id="1e342-189">This command sets **FILE\_ATTRIBUTE\_DIRECTORY** and **FILE\_ATTRIBUTE\_READONLY**, both of which are [**File Attribute Constants**](../fileio/file-attribute-constants.md).</span></span>

<span data-ttu-id="1e342-190">**REG Add HKCU \\ классы программного обеспечения \\ \\ CLSID \\ {0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3} \\ instance \\ инитпропертибаг/v Attributes/t REG \_ DWORD/d 0x11/f**</span><span class="sxs-lookup"><span data-stu-id="1e342-190">**reg add HKCU\\Software\\Classes\\CLSID\\{0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3}\\Instance\\InitPropertyBag /v Attributes /t REG\_DWORD /d 0x11 /f**</span></span>

### <a name="step-8-set-the-path-for-the-sync-root"></a><span data-ttu-id="1e342-191">Шаг 8. Задание пути для корня синхронизации</span><span class="sxs-lookup"><span data-stu-id="1e342-191">Step 8: Set the path for the sync root</span></span>

<span data-ttu-id="1e342-192">Задайте путь к корню синхронизации.</span><span class="sxs-lookup"><span data-stu-id="1e342-192">Set the path for the sync root.</span></span>

<span data-ttu-id="1e342-193">**REG Add HKCU \\ Software \\ Classes \\ CLSID \\ {0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3} \\ экземпляр \\ инитпропертибаг/v TargetFolderPath/t REG \_ expand \_ SZ/d%% UserProfile%% \\ миклаудсторажеапп/f**</span><span class="sxs-lookup"><span data-stu-id="1e342-193">**reg add HKCU\\Software\\Classes\\CLSID\\{0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3}\\Instance\\InitPropertyBag /v TargetFolderPath /t REG\_EXPAND\_SZ /d %%USERPROFILE%%\\MyCloudStorageApp /f**</span></span>

### <a name="step-9-set-appropriate-shell-flags"></a><span data-ttu-id="1e342-194">Шаг 9. Установка соответствующих флагов оболочки</span><span class="sxs-lookup"><span data-stu-id="1e342-194">Step 9: Set appropriate shell flags</span></span>

<span data-ttu-id="1e342-195">Установите некоторые флаги, необходимые для закрепления расширения пространства имен в дереве проводника.</span><span class="sxs-lookup"><span data-stu-id="1e342-195">Set some flags necessary to pin your namespace extension to the File Explorer tree.</span></span>

<span data-ttu-id="1e342-196">**REG Add HKCU \\ Software \\ Classes \\ CLSID \\ {0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3} \\ ShellFolder/v фолдервалуефлагс/t REG \_ DWORD/d 0x28/f**</span><span class="sxs-lookup"><span data-stu-id="1e342-196">**reg add HKCU\\Software\\Classes\\CLSID\\{0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3}\\ShellFolder /v FolderValueFlags /t REG\_DWORD /d 0x28 /f**</span></span>

### <a name="step-10-set-the-appropriate-flags-to-control-your-shell-behavior"></a><span data-ttu-id="1e342-197">Шаг 10. Установка соответствующих флагов для управления поведением оболочки</span><span class="sxs-lookup"><span data-stu-id="1e342-197">Step 10: Set the appropriate flags to control your shell behavior</span></span>

<span data-ttu-id="1e342-198">Установите соответствующие флаги [**сфгао**](sfgao.md) .</span><span class="sxs-lookup"><span data-stu-id="1e342-198">Set the appropriate [**SFGAO**](sfgao.md) flags.</span></span> <span data-ttu-id="1e342-199">Соответствующие флаги: СФГАО \_ Канкопи, сфгао \_ КАНЛИНК, сфгао \_ Storage, СФГАО \_ хаспропшит, сфгао \_ СТОРАЖЕАНЦЕСТОР, сфгао \_ филесисанцестор, SFGAO \_ Папка, SFGAO \_ FILESYSTEM и SFGAO \_ HASSUBFOLDER.</span><span class="sxs-lookup"><span data-stu-id="1e342-199">The relevant flags are SFGAO\_CANCOPY, SFGAO\_CANLINK, SFGAO\_STORAGE, SFGAO\_HASPROPSHEET, SFGAO\_STORAGEANCESTOR, SFGAO\_FILESYSANCESTOR, SFGAO\_FOLDER, SFGAO\_FILESYSTEM, and SFGAO\_HASSUBFOLDER.</span></span>

<span data-ttu-id="1e342-200">**REG Add HKCU \\ классы программного обеспечения \\ \\ CLSID \\ {0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3} \\ SHELLFOLDER/V Attributes/t REG \_ DWORD/d 0xF080004D/f**</span><span class="sxs-lookup"><span data-stu-id="1e342-200">**reg add HKCU\\Software\\Classes\\CLSID\\{0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3}\\ShellFolder /v Attributes /t REG\_DWORD /d 0xF080004D /f**</span></span>

### <a name="step-11-register-your-extension-in-the-namespace-root"></a><span data-ttu-id="1e342-201">Шаг 11. Регистрация расширения в корне пространства имен</span><span class="sxs-lookup"><span data-stu-id="1e342-201">Step 11: Register your extension in the namespace root</span></span>

<span data-ttu-id="1e342-202">Настройте расширение пространства имен как дочерний для папки рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="1e342-202">Configure the namespace extension to be a child of the desktop folder.</span></span>

<span data-ttu-id="1e342-203">**REG Add HKCU \\ Software \\ \\ \\ \\ \\ пространство имен рабочего стола Microsoft Windows CurrentVersion Explorer \\ \\ {0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3}/ве/t REG \_ SZ/d миклаудсторажеапп/f**</span><span class="sxs-lookup"><span data-stu-id="1e342-203">**reg add HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Desktop\\NameSpace\\{0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3} /ve /t REG\_SZ /d MyCloudStorageApp /f**</span></span>

### <a name="step-12-hide-your-extension-from-the-desktop"></a><span data-ttu-id="1e342-204">Шаг 12. Скрытие расширения с рабочего стола</span><span class="sxs-lookup"><span data-stu-id="1e342-204">Step 12: Hide your extension from the Desktop</span></span>

<span data-ttu-id="1e342-205">Важно, чтобы расширение было доступно только в области навигации проводника.</span><span class="sxs-lookup"><span data-stu-id="1e342-205">It is important that your extension only appears on the Navigation Pane of the File Explorer.</span></span> <span data-ttu-id="1e342-206">Расширение пространства имен не работает как обычная клавиша.</span><span class="sxs-lookup"><span data-stu-id="1e342-206">A namespace extension does not function like a normal shortcut.</span></span> <span data-ttu-id="1e342-207">Поэтому не следует использовать этот метод для создания ярлыка на рабочем столе.</span><span class="sxs-lookup"><span data-stu-id="1e342-207">Therefore, you should not use this method to create a Desktop shortcut.</span></span>

<span data-ttu-id="1e342-208">**REG Add HKCU \\ Software \\ Microsoft \\ Windows \\ CurrentVersion \\ Explorer \\ хидедесктопиконс \\ невстартпанел/v {0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3}/t REG \_ DWORD/d 0x1/f**</span><span class="sxs-lookup"><span data-stu-id="1e342-208">**reg add HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\HideDesktopIcons\\NewStartPanel /v {0672A6D1-A6E0-40FE-AB16-F25BADC6D9E3} /t REG\_DWORD /d 0x1 /f**</span></span>

 

 
