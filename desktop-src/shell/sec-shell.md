---
description: В этом разделе содержатся сведения о вопросах безопасности, связанных с оболочкой Windows.
ms.assetid: eca31652-2659-456d-b082-c84d6fd39094
title: 'Вопросы безопасности: оболочка Microsoft Windows'
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 16b11a965a36a403b57a3e5229fc758a4ce37252
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103810936"
---
# <a name="security-considerations-microsoft-windows-shell"></a><span data-ttu-id="a0b83-103">Вопросы безопасности: оболочка Microsoft Windows</span><span class="sxs-lookup"><span data-stu-id="a0b83-103">Security Considerations: Microsoft Windows Shell</span></span>

<span data-ttu-id="a0b83-104">В этом разделе содержатся сведения о вопросах безопасности, связанных с оболочкой Windows.</span><span class="sxs-lookup"><span data-stu-id="a0b83-104">This topic provides information about security considerations related to the Windows Shell.</span></span> <span data-ttu-id="a0b83-105">Этот документ не может предоставить все, что вам нужно знать о проблемах безопасности. вместо этого используйте его в качестве отправной точки и ссылки на эту конкретную область технологий.</span><span class="sxs-lookup"><span data-stu-id="a0b83-105">This document cannot provide all you need to know about security issues—instead, use it as a starting point and reference for this specific technology area.</span></span>

<span data-ttu-id="a0b83-106">Оболочка управляет рядом важных аспектов системы, в том числе несколько, которые представляют потенциальные риски безопасности, если они не обрабатывались должным образом.</span><span class="sxs-lookup"><span data-stu-id="a0b83-106">The Shell controls a number of important aspects of the system, including several that present potential security risks if they are not properly handled.</span></span> <span data-ttu-id="a0b83-107">В этом разделе описаны некоторые из наиболее распространенных проблем и способы их устранения в приложениях.</span><span class="sxs-lookup"><span data-stu-id="a0b83-107">This topic outlines some of the more common issues and how to address them in your applications.</span></span> <span data-ttu-id="a0b83-108">Помните, что безопасность не ограничена Интернет-эксплойтами.</span><span class="sxs-lookup"><span data-stu-id="a0b83-108">Remember that security is not limited to Internet-based exploits.</span></span> <span data-ttu-id="a0b83-109">В общих системах, включая системы, доступные через службы терминалов, необходимо также убедиться в том, что пользователи не могут выполнять какие-либо действия, которые могут повредить другие пользователи, имеющие доступ к системе.</span><span class="sxs-lookup"><span data-stu-id="a0b83-109">On shared systems, including systems that are accessible through Terminal Services, you must also ensure that users cannot do anything that could harm others who share the system.</span></span>

-   [<span data-ttu-id="a0b83-110">Правильная установка приложения</span><span class="sxs-lookup"><span data-stu-id="a0b83-110">Installing Your Application Properly</span></span>](#installing-your-application-properly)
-   [<span data-ttu-id="a0b83-111">Shlwapi</span><span class="sxs-lookup"><span data-stu-id="a0b83-111">Shlwapi</span></span>](#shlwapi)
-   [<span data-ttu-id="a0b83-112">Автозавершение</span><span class="sxs-lookup"><span data-stu-id="a0b83-112">Autocomplete</span></span>](#autocomplete)
-   [<span data-ttu-id="a0b83-113">ShellExecute, ShellExecuteEx и связанные функции</span><span class="sxs-lookup"><span data-stu-id="a0b83-113">ShellExecute, ShellExecuteEx, and Related Functions</span></span>](#shellexecute-shellexecuteex-and-related-functions)
-   [<span data-ttu-id="a0b83-114">Перемещение и копирование файлов</span><span class="sxs-lookup"><span data-stu-id="a0b83-114">Moving and Copying Files</span></span>](#moving-and-copying-files)
-   [<span data-ttu-id="a0b83-115">Создание защищенных расширений пространства имен</span><span class="sxs-lookup"><span data-stu-id="a0b83-115">Writing Secure Namespace Extensions</span></span>](#writing-secure-namespace-extensions)
-   [<span data-ttu-id="a0b83-116">Оповещения системы безопасности</span><span class="sxs-lookup"><span data-stu-id="a0b83-116">Security Alerts</span></span>](#security-alerts)
-   [<span data-ttu-id="a0b83-117">См. также</span><span class="sxs-lookup"><span data-stu-id="a0b83-117">Related topics</span></span>](#related-topics)

## <a name="installing-your-application-properly"></a><span data-ttu-id="a0b83-118">Правильная установка приложения</span><span class="sxs-lookup"><span data-stu-id="a0b83-118">Installing Your Application Properly</span></span>

<span data-ttu-id="a0b83-119">Большинство потенциальных проблем безопасности оболочки можно устранить путем правильной установки приложения.</span><span class="sxs-lookup"><span data-stu-id="a0b83-119">The majority of potential Shell security issues can be mitigated by correctly installing your application.</span></span>

-   <span data-ttu-id="a0b83-120">Установите приложение в папку Program Files.</span><span class="sxs-lookup"><span data-stu-id="a0b83-120">Install the application under the Program Files folder.</span></span> 

    | <span data-ttu-id="a0b83-121">Операционная система</span><span class="sxs-lookup"><span data-stu-id="a0b83-121">Operating System</span></span>                             | <span data-ttu-id="a0b83-122">Расположение</span><span class="sxs-lookup"><span data-stu-id="a0b83-122">Location</span></span>                                                                                                                                                                                                                                   |
    |----------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="a0b83-123">Windows XP, Windows Server 2003 и более ранние версии</span><span class="sxs-lookup"><span data-stu-id="a0b83-123">Windows XP, Windows Server 2003, and earlier</span></span> | <span data-ttu-id="a0b83-124">\_программные \_ файлы CSid</span><span class="sxs-lookup"><span data-stu-id="a0b83-124">CSIDL\_PROGRAM\_FILES</span></span>                                                                                                                                                                                                                      |
    | <span data-ttu-id="a0b83-125">Windows Vista и более поздние версии</span><span class="sxs-lookup"><span data-stu-id="a0b83-125">Windows Vista and later</span></span>                      | <span data-ttu-id="a0b83-126">FOLDERID \_ ProgramFiles, FOLDERID \_ PROGRAMFILESX86, FOLDERID \_ ProgramFilesX64, FOLDERID \_ програмфилескоммон, FOLDERID \_ ProgramFilesCommonX86 или FOLDERID \_ ProgramFilesCommonX64.</span><span class="sxs-lookup"><span data-stu-id="a0b83-126">FOLDERID\_ProgramFiles, FOLDERID\_ProgramFilesX86, FOLDERID\_ProgramFilesX64, FOLDERID\_ProgramFilesCommon, FOLDERID\_ProgramFilesCommonX86, or FOLDERID\_ProgramFilesCommonX64.</span></span> <span data-ttu-id="a0b83-127">Дополнительные сведения см. в разделе [**кновнфолдерид**](knownfolderid.md) .</span><span class="sxs-lookup"><span data-stu-id="a0b83-127">See [**KNOWNFOLDERID**](knownfolderid.md) for specifics.</span></span> |

    

     

-   <span data-ttu-id="a0b83-128">Не храните данные пользователя в папке Program Files.</span><span class="sxs-lookup"><span data-stu-id="a0b83-128">Do not store user data under the Program Files folder.</span></span>

    <span data-ttu-id="a0b83-129">Используйте соответствующую папку данных для данных, общих для всех пользователей.</span><span class="sxs-lookup"><span data-stu-id="a0b83-129">Use the appropriate data folder for data that is common to all users.</span></span>

    

    | <span data-ttu-id="a0b83-130">Операционная система</span><span class="sxs-lookup"><span data-stu-id="a0b83-130">Operating System</span></span>                             | <span data-ttu-id="a0b83-131">Расположение</span><span class="sxs-lookup"><span data-stu-id="a0b83-131">Location</span></span>               |
    |----------------------------------------------|------------------------|
    | <span data-ttu-id="a0b83-132">Windows XP, Windows Server 2003 и более ранние версии</span><span class="sxs-lookup"><span data-stu-id="a0b83-132">Windows XP, Windows Server 2003, and earlier</span></span> | <span data-ttu-id="a0b83-133">\_распространенная папка \_ AppData</span><span class="sxs-lookup"><span data-stu-id="a0b83-133">CSIDL\_COMMON\_APPDATA</span></span> |
    | <span data-ttu-id="a0b83-134">Windows Vista и более поздние версии</span><span class="sxs-lookup"><span data-stu-id="a0b83-134">Windows Vista and later</span></span>                      | <span data-ttu-id="a0b83-135">FOLDERID \_ папка ProgramData</span><span class="sxs-lookup"><span data-stu-id="a0b83-135">FOLDERID\_ProgramData</span></span>  |

    

     

    <span data-ttu-id="a0b83-136">Используйте соответствующую папку данных пользователя для данных, принадлежащих определенному пользователю.</span><span class="sxs-lookup"><span data-stu-id="a0b83-136">Use the appropriate user data folder for data that belongs to a particular user.</span></span>

    

    | <span data-ttu-id="a0b83-137">Операционная система</span><span class="sxs-lookup"><span data-stu-id="a0b83-137">Operating System</span></span>                             | <span data-ttu-id="a0b83-138">Расположение</span><span class="sxs-lookup"><span data-stu-id="a0b83-138">Location</span></span>                                                   |
    |----------------------------------------------|------------------------------------------------------------|
    | <span data-ttu-id="a0b83-139">Windows XP, Windows Server 2003 и более ранние версии</span><span class="sxs-lookup"><span data-stu-id="a0b83-139">Windows XP, Windows Server 2003, and earlier</span></span> | <span data-ttu-id="a0b83-140">Выcsid \_ AppData, личный код CSID \_ и др.</span><span class="sxs-lookup"><span data-stu-id="a0b83-140">CSIDL\_APPDATA, CSIDL\_PERSONAL, and others.</span></span>               |
    | <span data-ttu-id="a0b83-141">Windows Vista и более поздние версии</span><span class="sxs-lookup"><span data-stu-id="a0b83-141">Windows Vista and later</span></span>                      | <span data-ttu-id="a0b83-142">FOLDERID \_ роамингаппдата, \_ документы FOLDERID и др.</span><span class="sxs-lookup"><span data-stu-id="a0b83-142">FOLDERID\_RoamingAppData, FOLDERID\_Documents, and others.</span></span> |

    

     

-   <span data-ttu-id="a0b83-143">Если необходимо установить в папку, отличную от папки Program Files, убедитесь, что списки управления доступом (ACL) правильно настроены таким образом, чтобы пользователи не имели доступа к недопустимым частям файловой системы.</span><span class="sxs-lookup"><span data-stu-id="a0b83-143">If you must install to a location other than the Program Files folder, make sure that you set access control lists (ACLs) properly so that users do not have access to inappropriate parts of the file system.</span></span> <span data-ttu-id="a0b83-144">Все данные, относящиеся к конкретному пользователю, должны иметь список управления доступом, который не позволяет другому пользователю обращаться к нему.</span><span class="sxs-lookup"><span data-stu-id="a0b83-144">Any data that is specific to a particular user should have an ACL that prevents any other user from accessing it.</span></span>
-   <span data-ttu-id="a0b83-145">При настройке сопоставлений файлов обязательно укажите командную строку.</span><span class="sxs-lookup"><span data-stu-id="a0b83-145">When you set up file associations, be sure to properly specify the command line.</span></span> <span data-ttu-id="a0b83-146">Используйте полный путь и заключите все элементы, содержащие пробелы, в кавычки.</span><span class="sxs-lookup"><span data-stu-id="a0b83-146">Use a fully qualified path and wrap any elements that contain white space in quotation marks.</span></span> <span data-ttu-id="a0b83-147">Заключите параметры команды в отдельные кавычки.</span><span class="sxs-lookup"><span data-stu-id="a0b83-147">Wrap command parameters in separate quotation marks.</span></span> <span data-ttu-id="a0b83-148">В противном случае строка может быть неверно проанализирована, и приложение не запустится должным образом.</span><span class="sxs-lookup"><span data-stu-id="a0b83-148">Otherwise, the string might be incorrectly parsed and the application will not launch properly.</span></span> <span data-ttu-id="a0b83-149">Здесь показаны два примера правильно сформированных командных строк.</span><span class="sxs-lookup"><span data-stu-id="a0b83-149">Two examples of properly formed command lines are shown here.</span></span>

    ```
    "C:\Program Files\MyApp\MyApp.exe" "%1" "%2"
    C:\MyAppDir\MyApp\MyApp.exe "%1"
    ```

    

> [!Note]  
> <span data-ttu-id="a0b83-150">Расположение стандартных папок установки может отличаться от системы к системе.</span><span class="sxs-lookup"><span data-stu-id="a0b83-150">The location of the standard installation folders might vary from system to system.</span></span> <span data-ttu-id="a0b83-151">Чтобы получить расположение стандартной папки в определенной системе Windows Vista или более поздней версии, вызовите [**шжеткновнфолдерпас**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetknownfolderpath) с соответствующим значением [**кновнфолдерид**](knownfolderid.md) .</span><span class="sxs-lookup"><span data-stu-id="a0b83-151">To get the location of a standard folder on a particular Windows Vista or later system, call [**SHGetKnownFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetknownfolderpath) with the appropriate [**KNOWNFOLDERID**](knownfolderid.md) value.</span></span> <span data-ttu-id="a0b83-152">В Windows XP, Windows Server 2003 или более ранних версиях вызовите [**шжетфолдерлокатион**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderlocation) или [**шжетфолдерпас**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) с соответствующим значением [**CSid**](csidl.md) .</span><span class="sxs-lookup"><span data-stu-id="a0b83-152">In Windows XP, Windows Server 2003, or earlier systems, call [**SHGetFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderlocation) or [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) with the appropriate [**CSIDL**](csidl.md) value.</span></span>

 

## <a name="shlwapi"></a><span data-ttu-id="a0b83-153">Shlwapi</span><span class="sxs-lookup"><span data-stu-id="a0b83-153">Shlwapi</span></span>

<span data-ttu-id="a0b83-154">Упрощенный API оболочки (Shlwapi) включает ряд функций обработки строк.</span><span class="sxs-lookup"><span data-stu-id="a0b83-154">The Shell Lightweight API (Shlwapi) includes a number of string manipulation functions.</span></span> <span data-ttu-id="a0b83-155">Неправильное использование этих функций может привести к непредвиденному усечению строк без уведомления о возвращаемом усечении.</span><span class="sxs-lookup"><span data-stu-id="a0b83-155">Using these functions incorrectly can lead to unexpectedly truncated strings with no notification of the truncation being returned.</span></span> <span data-ttu-id="a0b83-156">В следующих случаях не следует использовать функции Shlwapi.</span><span class="sxs-lookup"><span data-stu-id="a0b83-156">In the following cases, the Shlwapi functions should not be used.</span></span> <span data-ttu-id="a0b83-157">Перечисленные альтернативные функции, которые создают меньше рисков, должны использоваться на их месте.</span><span class="sxs-lookup"><span data-stu-id="a0b83-157">The listed alternative functions, which pose fewer risks, should be used in their place.</span></span>



| <span data-ttu-id="a0b83-158">Shlwapi, функция</span><span class="sxs-lookup"><span data-stu-id="a0b83-158">Shlwapi Function</span></span>                                                 | <span data-ttu-id="a0b83-159">Альтернативная функция</span><span class="sxs-lookup"><span data-stu-id="a0b83-159">Alternative Function</span></span>                                                                                             |
|------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a0b83-160">[**StrCat**](/windows/desktop/api/Shlwapi/nf-shlwapi-strcatw),[**StrNCat**](/windows/desktop/api/Shlwapi/nf-shlwapi-strncata)</span><span class="sxs-lookup"><span data-stu-id="a0b83-160">[**StrCat**](/windows/desktop/api/Shlwapi/nf-shlwapi-strcatw),[**StrNCat**](/windows/desktop/api/Shlwapi/nf-shlwapi-strncata)</span></span>              | <span data-ttu-id="a0b83-161">[**Стрингкчкат**](/windows/win32/api/strsafe/nf-strsafe-stringcchcata), [**стрингкбкат**](/windows/win32/api/strsafe/nf-strsafe-stringcbcata) и связанные функции</span><span class="sxs-lookup"><span data-stu-id="a0b83-161">[**StringCchCat**](/windows/win32/api/strsafe/nf-strsafe-stringcchcata), [**StringCbCat**](/windows/win32/api/strsafe/nf-strsafe-stringcbcata) and related functions</span></span>             |
| <span data-ttu-id="a0b83-162">[**StrCpy**](/windows/desktop/api/Shlwapi/nf-shlwapi-strcpyw), [ **стркпин**](/windows/desktop/api/Shlwapi/nf-shlwapi-strcpynw)</span><span class="sxs-lookup"><span data-stu-id="a0b83-162">[**StrCpy**](/windows/desktop/api/Shlwapi/nf-shlwapi-strcpyw), [**StrCpyN**](/windows/desktop/api/Shlwapi/nf-shlwapi-strcpynw)</span></span>             | <span data-ttu-id="a0b83-163">[**Стрингкчкопи**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopya), [**стрингкбкопи**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopya) и связанные функции</span><span class="sxs-lookup"><span data-stu-id="a0b83-163">[**StringCchCopy**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopya), [**StringCbCopy**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopya) and related functions</span></span>         |
| <span data-ttu-id="a0b83-164">[**внспринтф**](/windows/desktop/api/Shlwapi/nf-shlwapi-wnsprintfa), [ **ввнспринтф**](/windows/desktop/api/Shlwapi/nf-shlwapi-wvnsprintfa)</span><span class="sxs-lookup"><span data-stu-id="a0b83-164">[**wnsprintf**](/windows/desktop/api/Shlwapi/nf-shlwapi-wnsprintfa), [**wvnsprintf**](/windows/desktop/api/Shlwapi/nf-shlwapi-wvnsprintfa)</span></span> | <span data-ttu-id="a0b83-165">[**Стрингкчпринтф**](/windows/win32/api/strsafe/nf-strsafe-stringcchprintfa), [**стрингкбпринтф**](/windows/win32/api/strsafe/nf-strsafe-stringcbprintfa) и связанные функции</span><span class="sxs-lookup"><span data-stu-id="a0b83-165">[**StringCchPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCbPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcbprintfa) and related functions</span></span> |



 

<span data-ttu-id="a0b83-166">При использовании таких функций, как [**пасрелативепасто**](/windows/desktop/api/Shlwapi/nf-shlwapi-pathrelativepathtoa) , которые возвращают путь к файлу, всегда устанавливайте для буфера максимальный размер \_ символов.</span><span class="sxs-lookup"><span data-stu-id="a0b83-166">With functions such as [**PathRelativePathTo**](/windows/desktop/api/Shlwapi/nf-shlwapi-pathrelativepathtoa) that return a file path, always set the size of the buffer to MAX\_PATH characters.</span></span> <span data-ttu-id="a0b83-167">Это гарантирует, что буфер достаточно велик для хранения наибольшего возможного пути к файлу, а также завершающего нуль-символа.</span><span class="sxs-lookup"><span data-stu-id="a0b83-167">Doing so ensures that the buffer is large enough to hold the largest possible file path, plus a terminating null character.</span></span>

<span data-ttu-id="a0b83-168">Дополнительные сведения о альтернативных строковых функциях см. в разделе [About стрсафе. h](../menurc/strsafe-ovw.md).</span><span class="sxs-lookup"><span data-stu-id="a0b83-168">For more information on the alternative string functions, see [About Strsafe.h](../menurc/strsafe-ovw.md).</span></span>

## <a name="autocomplete"></a><span data-ttu-id="a0b83-169">Автозавершение</span><span class="sxs-lookup"><span data-stu-id="a0b83-169">Autocomplete</span></span>

<span data-ttu-id="a0b83-170">Не используйте функцию автозаполнения для паролей.</span><span class="sxs-lookup"><span data-stu-id="a0b83-170">Do not use the Autocomplete feature for passwords.</span></span>

## <a name="shellexecute-shellexecuteex-and-related-functions"></a><span data-ttu-id="a0b83-171">ShellExecute, ShellExecuteEx и связанные функции</span><span class="sxs-lookup"><span data-stu-id="a0b83-171">ShellExecute, ShellExecuteEx, and Related Functions</span></span>

<span data-ttu-id="a0b83-172">Существует несколько функций оболочки, которые можно использовать для запуска приложений: [**ShellExecute**](/windows/desktop/api/Shellapi/nf-shellapi-shellexecutea), [**ShellExecuteEx**](/windows/desktop/api/Shellapi/nf-shellapi-shellexecuteexa), [**винексек**](/windows/win32/api/winbase/nf-winbase-winexec)и [**шкреатепроцессасусерв**](/windows/desktop/api/Shellapi/nf-shellapi-shcreateprocessasuserw).</span><span class="sxs-lookup"><span data-stu-id="a0b83-172">There are several Shell functions that you can use to launch applications: [**ShellExecute**](/windows/desktop/api/Shellapi/nf-shellapi-shellexecutea), [**ShellExecuteEx**](/windows/desktop/api/Shellapi/nf-shellapi-shellexecuteexa), [**WinExec**](/windows/win32/api/winbase/nf-winbase-winexec), and [**SHCreateProcessAsUserW**](/windows/desktop/api/Shellapi/nf-shellapi-shcreateprocessasuserw).</span></span> <span data-ttu-id="a0b83-173">Убедитесь, что вы предоставляете однозначное определение приложения, которое должно быть выполнено.</span><span class="sxs-lookup"><span data-stu-id="a0b83-173">Make sure you provide an unambiguous definition of the application that is to be executed.</span></span>

-   <span data-ttu-id="a0b83-174">При указании пути к исполняемому файлу укажите полный путь.</span><span class="sxs-lookup"><span data-stu-id="a0b83-174">When providing the executable file's path, provide the fully qualified path.</span></span> <span data-ttu-id="a0b83-175">Не зависят от оболочки для нахождение файла.</span><span class="sxs-lookup"><span data-stu-id="a0b83-175">Do not depend on the Shell to locate the file.</span></span>
-   <span data-ttu-id="a0b83-176">Если указать строку командной строки, содержащую пробелы, заключите строку в кавычки.</span><span class="sxs-lookup"><span data-stu-id="a0b83-176">If you provide a command-line string that contains white space, wrap the string in quotation marks.</span></span> <span data-ttu-id="a0b83-177">В противном случае средство синтаксического анализа может интерпретировать один элемент, содержащий пробелы, как несколько элементов.</span><span class="sxs-lookup"><span data-stu-id="a0b83-177">Otherwise, the parser might interpret a single element that contains spaces as multiple elements.</span></span>

## <a name="moving-and-copying-files"></a><span data-ttu-id="a0b83-178">Перемещение и копирование файлов</span><span class="sxs-lookup"><span data-stu-id="a0b83-178">Moving and Copying Files</span></span>

<span data-ttu-id="a0b83-179">Одним из ключевых способов обеспечения безопасности системы является правильное назначение ACL.</span><span class="sxs-lookup"><span data-stu-id="a0b83-179">One key to system security is properly assigning ACLs.</span></span> <span data-ttu-id="a0b83-180">Также можно использовать зашифрованные файлы.</span><span class="sxs-lookup"><span data-stu-id="a0b83-180">You also might use encrypted files.</span></span> <span data-ttu-id="a0b83-181">Убедитесь, что при перемещении или копировании файлов им назначается правильный список ACL и они не были случайно расшифрованы.</span><span class="sxs-lookup"><span data-stu-id="a0b83-181">Make sure that when you move or copy files, that they are assigned the correct ACL and that they have not been accidentally decrypted.</span></span> <span data-ttu-id="a0b83-182">Сюда входит перемещение файлов в **корзину**, а также в файловую систему.</span><span class="sxs-lookup"><span data-stu-id="a0b83-182">This includes moving files to the **Recycle Bin**, as well as within the file system.</span></span> <span data-ttu-id="a0b83-183">Используйте [**интерфейс IFileOperation**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ifileoperation) (Windows Vista или более поздней версии) или [**ШФИЛЕОПЕРАТИОН**](/windows/desktop/api/Shellapi/nf-shellapi-shfileoperationa) (Windows XP и более ранние версии).</span><span class="sxs-lookup"><span data-stu-id="a0b83-183">Use [**IFileOperation**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-ifileoperation) (Windows Vista or later) or [**SHFileOperation**](/windows/desktop/api/Shellapi/nf-shellapi-shfileoperationa) (Windows XP and earlier).</span></span> <span data-ttu-id="a0b83-184">Не используйте [**MoveFile**](/windows/win32/api/winbase/nf-winbase-movefile), который может не задавать ожидаемый список ACL для целевого файла.</span><span class="sxs-lookup"><span data-stu-id="a0b83-184">Do not use [**MoveFile**](/windows/win32/api/winbase/nf-winbase-movefile), which might not set the expected ACL for the destination file.</span></span>

## <a name="writing-secure-namespace-extensions"></a><span data-ttu-id="a0b83-185">Создание защищенных расширений пространства имен</span><span class="sxs-lookup"><span data-stu-id="a0b83-185">Writing Secure Namespace Extensions</span></span>

<span data-ttu-id="a0b83-186">Расширения пространства имен оболочки — это мощный и гибкий способ предоставления данных пользователю.</span><span class="sxs-lookup"><span data-stu-id="a0b83-186">Shell namespace extensions are a powerful and flexible way to present data to the user.</span></span> <span data-ttu-id="a0b83-187">Однако они могут вызвать сбой системы, если они неправильно написаны.</span><span class="sxs-lookup"><span data-stu-id="a0b83-187">However, they can cause system failure if they are not correctly written.</span></span> <span data-ttu-id="a0b83-188">Некоторые ключевые моменты, которые следует учитывать:</span><span class="sxs-lookup"><span data-stu-id="a0b83-188">Some key points to keep in mind:</span></span>

-   <span data-ttu-id="a0b83-189">Не следует рассчитывать на то, что данные, такие как изображения, форматируются правильно.</span><span class="sxs-lookup"><span data-stu-id="a0b83-189">Do not assume that data such as images are formatted correctly.</span></span>
-   <span data-ttu-id="a0b83-190">Не следует рассчитывать, что максимальный \_ путь эквивалентен числу *байтов* в строке.</span><span class="sxs-lookup"><span data-stu-id="a0b83-190">Do not assume that MAX\_PATH is equivalent to the number of *bytes* in a string.</span></span> <span data-ttu-id="a0b83-191">Это число *символов*.</span><span class="sxs-lookup"><span data-stu-id="a0b83-191">It is the number of *characters*.</span></span>

## <a name="security-alerts"></a><span data-ttu-id="a0b83-192">Оповещения системы безопасности</span><span class="sxs-lookup"><span data-stu-id="a0b83-192">Security Alerts</span></span>

<span data-ttu-id="a0b83-193">В следующей таблице перечислены некоторые функции, которые при неправильном использовании могут привести к нарушению безопасности приложений.</span><span class="sxs-lookup"><span data-stu-id="a0b83-193">The following table lists some features that can, if used incorrectly, compromise the security of your applications.</span></span>



| <span data-ttu-id="a0b83-194">Компонент</span><span class="sxs-lookup"><span data-stu-id="a0b83-194">Feature</span></span>                                                                        | <span data-ttu-id="a0b83-195">Меры по снижению риска</span><span class="sxs-lookup"><span data-stu-id="a0b83-195">Mitigation</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|--------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a0b83-196">[**ShellExecute**](/windows/desktop/api/Shellapi/nf-shellapi-shellexecutea), [ **ShellExecuteEx**](/windows/desktop/api/Shellapi/nf-shellapi-shellexecuteexa)</span><span class="sxs-lookup"><span data-stu-id="a0b83-196">[**ShellExecute**](/windows/desktop/api/Shellapi/nf-shellapi-shellexecutea), [**ShellExecuteEx**](/windows/desktop/api/Shellapi/nf-shellapi-shellexecuteexa)</span></span> | <span data-ttu-id="a0b83-197">Поиск, зависящий от проверки ряда расположений по умолчанию для поиска конкретного файла, можно использовать при атаке с подменой.</span><span class="sxs-lookup"><span data-stu-id="a0b83-197">Searches that depend on checking a series of default locations to find a specific file can be used in a spoofing attack.</span></span> <span data-ttu-id="a0b83-198">Используйте полный путь, чтобы обеспечить доступ к нужному файлу.</span><span class="sxs-lookup"><span data-stu-id="a0b83-198">Use a fully qualified path to ensure that you access the desired file.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [<span data-ttu-id="a0b83-199">**StrCat**</span><span class="sxs-lookup"><span data-stu-id="a0b83-199">**StrCat**</span></span>](/windows/desktop/api/Shlwapi/nf-shlwapi-strcatw)                                                       | <span data-ttu-id="a0b83-200">Первый аргумент, *psz1*, должен быть достаточно большим для хранения *psz2* и закрывающего " \\ 0", в противном случае может произойти переполнение буфера.</span><span class="sxs-lookup"><span data-stu-id="a0b83-200">The first argument, *psz1*, must be large enough to hold *psz2* and the closing '\\0', otherwise a buffer overrun might occur.</span></span> <span data-ttu-id="a0b83-201">Вместо этого используйте один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="a0b83-201">Use one of the following alternatives instead.</span></span> <span data-ttu-id="a0b83-202">[**Стрингкбкат**](/windows/win32/api/strsafe/nf-strsafe-stringcbcata), [**стрингкбкатекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatexa), [**стрингкбкатн**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatna), [**стрингкбкатнекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatnexa), [**стрингкчкат**](/windows/win32/api/strsafe/nf-strsafe-stringcchcata), [**стрингкчкатекс**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatexa), [**StringCchCatN**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatna)или [**StringCchCatNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatnexa).</span><span class="sxs-lookup"><span data-stu-id="a0b83-202">[**StringCbCat**](/windows/win32/api/strsafe/nf-strsafe-stringcbcata), [**StringCbCatEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatexa), [**StringCbCatN**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatna), [**StringCbCatNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatnexa), [**StringCchCat**](/windows/win32/api/strsafe/nf-strsafe-stringcchcata), [**StringCchCatEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatexa), [**StringCchCatN**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatna), or [**StringCchCatNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatnexa).</span></span>                                                                                                                                                             |
| [<span data-ttu-id="a0b83-203">**стркатбуфф**</span><span class="sxs-lookup"><span data-stu-id="a0b83-203">**StrCatBuff**</span></span>](/windows/desktop/api/Shlwapi/nf-shlwapi-strcatbuffa)                                               | <span data-ttu-id="a0b83-204">Конечная строка не гарантированно завершается нулем.</span><span class="sxs-lookup"><span data-stu-id="a0b83-204">The final string is not guaranteed to be null-terminated.</span></span> <span data-ttu-id="a0b83-205">Вместо этого используйте один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="a0b83-205">Use one of the following alternatives instead.</span></span> <span data-ttu-id="a0b83-206">[**Стрингкбкат**](/windows/win32/api/strsafe/nf-strsafe-stringcbcata), [**стрингкбкатекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatexa), [**стрингкбкатн**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatna), [**стрингкбкатнекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatnexa), [**стрингкчкат**](/windows/win32/api/strsafe/nf-strsafe-stringcchcata), [**стрингкчкатекс**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatexa), [**StringCchCatN**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatna)или [**StringCchCatNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatnexa).</span><span class="sxs-lookup"><span data-stu-id="a0b83-206">[**StringCbCat**](/windows/win32/api/strsafe/nf-strsafe-stringcbcata), [**StringCbCatEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatexa), [**StringCbCatN**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatna), [**StringCbCatNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatnexa), [**StringCchCat**](/windows/win32/api/strsafe/nf-strsafe-stringcchcata), [**StringCchCatEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatexa), [**StringCchCatN**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatna), or [**StringCchCatNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatnexa).</span></span>                                                                                                                                                                                                                                  |
| [<span data-ttu-id="a0b83-207">**стркатчаинв**</span><span class="sxs-lookup"><span data-stu-id="a0b83-207">**StrCatChainW**</span></span>](/windows/desktop/api/Shlwapi/nf-shlwapi-strcatchainw)                                           | <span data-ttu-id="a0b83-208">Конечная строка не гарантированно завершается нулем.</span><span class="sxs-lookup"><span data-stu-id="a0b83-208">The final string is not guaranteed to be null-terminated.</span></span> <span data-ttu-id="a0b83-209">Вместо этого используйте один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="a0b83-209">Use one of the following alternatives instead.</span></span> <span data-ttu-id="a0b83-210">[**Стрингкбкатекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatexa), [**стрингкбкатнекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatnexa), [**стрингкчкатекс**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatexa)или [**стрингкчкатнекс**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatnexa).</span><span class="sxs-lookup"><span data-stu-id="a0b83-210">[**StringCbCatEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatexa), [**StringCbCatNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatnexa), [**StringCchCatEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatexa), or [**StringCchCatNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatnexa).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                      |
| [<span data-ttu-id="a0b83-211">**StrCpy**</span><span class="sxs-lookup"><span data-stu-id="a0b83-211">**StrCpy**</span></span>](/windows/desktop/api/Shlwapi/nf-shlwapi-strcpyw)                                                       | <span data-ttu-id="a0b83-212">Первый аргумент, *psz1*, должен быть достаточно большим для хранения *psz2* и закрывающего " \\ 0", в противном случае может произойти переполнение буфера.</span><span class="sxs-lookup"><span data-stu-id="a0b83-212">The first argument, *psz1*, must be large enough to hold *psz2* and the closing '\\0', otherwise a buffer overrun might occur.</span></span> <span data-ttu-id="a0b83-213">Вместо этого используйте один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="a0b83-213">Use one of the following alternatives instead.</span></span> <span data-ttu-id="a0b83-214">[**Стрингкбкопи**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopya), [**стрингкбкопекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopyexa), [**стрингкбкопин**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopyna), [**стрингкбкопинекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopynexa), [**стрингкчкопи**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopya), [**стрингкчкопекс**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyexa), [**StringCchCopyN**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyna)или [**StringCchCopyNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopynexa).</span><span class="sxs-lookup"><span data-stu-id="a0b83-214">[**StringCbCopy**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopya), [**StringCbCopyEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopyexa), [**StringCbCopyN**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopyna), [**StringCbCopyNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopynexa), [**StringCchCopy**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopya), [**StringCchCopyEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyexa), [**StringCchCopyN**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyna), or [**StringCchCopyNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopynexa).</span></span>                                                                                                                                             |
| [<span data-ttu-id="a0b83-215">**стркпин**</span><span class="sxs-lookup"><span data-stu-id="a0b83-215">**StrCpyN**</span></span>](/windows/desktop/api/Shlwapi/nf-shlwapi-strcpynw)                                                     | <span data-ttu-id="a0b83-216">Не гарантируется, что скопированная строка завершается нулем.</span><span class="sxs-lookup"><span data-stu-id="a0b83-216">The copied string is not guaranteed to be null-terminated.</span></span> <span data-ttu-id="a0b83-217">Вместо этого используйте один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="a0b83-217">Use one of the following alternatives instead.</span></span> <span data-ttu-id="a0b83-218">[**Стрингкбкопи**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopya), [**стрингкбкопекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopyexa), [**стрингкбкопин**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopyna), [**стрингкбкопинекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopynexa), [**стрингкчкопи**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopya), [**стрингкчкопекс**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyexa), [**StringCchCopyN**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyna), [**StringCchCopyNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopynexa).</span><span class="sxs-lookup"><span data-stu-id="a0b83-218">[**StringCbCopy**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopya), [**StringCbCopyEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopyexa), [**StringCbCopyN**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopyna), [**StringCbCopyNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopynexa), [**StringCchCopy**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopya), [**StringCchCopyEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyexa), [**StringCchCopyN**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyna), [**StringCchCopyNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopynexa).</span></span>                                                                                                                                                                                                                    |
| [<span data-ttu-id="a0b83-219">**StrDup**</span><span class="sxs-lookup"><span data-stu-id="a0b83-219">**StrDup**</span></span>](/windows/desktop/api/Shlwapi/nf-shlwapi-strdupa)                                                       | <span data-ttu-id="a0b83-220">[**StrDup**](/windows/desktop/api/Shlwapi/nf-shlwapi-strdupa) предполагает, что *лпсз* является строкой, завершающейся нулем.</span><span class="sxs-lookup"><span data-stu-id="a0b83-220">[**StrDup**](/windows/desktop/api/Shlwapi/nf-shlwapi-strdupa) assumes that *lpsz* is a null-terminated string.</span></span> <span data-ttu-id="a0b83-221">Кроме того, возвращаемая строка не гарантированно завершается нулем.</span><span class="sxs-lookup"><span data-stu-id="a0b83-221">Further, the returned string is not guaranteed to be null-terminated.</span></span> <span data-ttu-id="a0b83-222">Вместо этого используйте один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="a0b83-222">Use one of the following alternatives instead.</span></span> <span data-ttu-id="a0b83-223">[**Стрингкбкат**](/windows/win32/api/strsafe/nf-strsafe-stringcbcata), [**стрингкбкопекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopyexa), [**стрингкбкопин**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopyna), [**стрингкбкопинекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopynexa), [**стрингкчкопи**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopya), [**стрингкчкопекс**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyexa), [**StringCchCopyN**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyna)или [**StringCchCopyNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopynexa).</span><span class="sxs-lookup"><span data-stu-id="a0b83-223">[**StringCbCat**](/windows/win32/api/strsafe/nf-strsafe-stringcbcata), [**StringCbCopyEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopyexa), [**StringCbCopyN**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopyna), [**StringCbCopyNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcopynexa), [**StringCchCopy**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopya), [**StringCchCopyEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyexa), [**StringCchCopyN**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopyna), or [**StringCchCopyNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcopynexa).</span></span>                                                                                                                              |
| [<span data-ttu-id="a0b83-224">**StrNCat**</span><span class="sxs-lookup"><span data-stu-id="a0b83-224">**StrNCat**</span></span>](/windows/desktop/api/Shlwapi/nf-shlwapi-strncata)                                                     | <span data-ttu-id="a0b83-225">Первый аргумент, *псзфронт*, должен быть достаточно большим для хранения *псзбакк* и закрывающего " \\ 0", в противном случае может произойти переполнение буфера.</span><span class="sxs-lookup"><span data-stu-id="a0b83-225">The first argument, *pszFront*, must be large enough to hold *pszBack* and the closing '\\0', otherwise a buffer overrun might occur.</span></span> <span data-ttu-id="a0b83-226">Имейте в виду, что последний аргумент, *кчмакс*, — это количество символов, копируемых в *псзфронт*, а не обязательно размер *псзфронт* в байтах.</span><span class="sxs-lookup"><span data-stu-id="a0b83-226">Be aware that the last argument, *cchMax*, is the number of characters to copy into *pszFront*, not necessarily the size of the *pszFront* in bytes.</span></span> <span data-ttu-id="a0b83-227">Вместо этого используйте один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="a0b83-227">Use one of the following alternatives instead.</span></span> <span data-ttu-id="a0b83-228">[**Стрингкбкат**](/windows/win32/api/strsafe/nf-strsafe-stringcbcata), [**стрингкбкатекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatexa), [**стрингкбкатн**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatna), [**стрингкбкатнекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatnexa), [**стрингкчкат**](/windows/win32/api/strsafe/nf-strsafe-stringcchcata), [**стрингкчкатекс**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatexa), [**StringCchCatN**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatna)или [**StringCchCatNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatnexa).</span><span class="sxs-lookup"><span data-stu-id="a0b83-228">[**StringCbCat**](/windows/win32/api/strsafe/nf-strsafe-stringcbcata), [**StringCbCatEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatexa), [**StringCbCatN**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatna), [**StringCbCatNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbcatnexa), [**StringCchCat**](/windows/win32/api/strsafe/nf-strsafe-stringcchcata), [**StringCchCatEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatexa), [**StringCchCatN**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatna), or [**StringCchCatNEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchcatnexa).</span></span> |
| [<span data-ttu-id="a0b83-229">**внспринтф**</span><span class="sxs-lookup"><span data-stu-id="a0b83-229">**wnsprintf**</span></span>](/windows/desktop/api/Shlwapi/nf-shlwapi-wnsprintfa)                                                 | <span data-ttu-id="a0b83-230">Не гарантируется, что скопированная строка завершается нулем.</span><span class="sxs-lookup"><span data-stu-id="a0b83-230">The copied string is not guaranteed to be null-terminated.</span></span> <span data-ttu-id="a0b83-231">Вместо этого используйте один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="a0b83-231">Use one of the following alternatives instead.</span></span> <span data-ttu-id="a0b83-232">[**Стрингкбпринтф**](/windows/win32/api/strsafe/nf-strsafe-stringcbprintfa), [**стрингкбпринтфекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbprintfexa), [**стрингкбвпринтф**](/windows/win32/api/strsafe/nf-strsafe-stringcbvprintfa), [**стрингкбвпринтфекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbvprintfexa), [**стрингкчпринтф**](/windows/win32/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcchvprintfa)или [**StringCchVPrintfEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchvprintfexa).</span><span class="sxs-lookup"><span data-stu-id="a0b83-232">[**StringCbPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcbprintfa), [**StringCbPrintfEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbprintfexa), [**StringCbVPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcbvprintfa), [**StringCbVPrintfEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcchvprintfa), or [**StringCchVPrintfEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchvprintfexa).</span></span>                                                                                                                                                                                 |
| [<span data-ttu-id="a0b83-233">**ввнспринтф**</span><span class="sxs-lookup"><span data-stu-id="a0b83-233">**wvnsprintf**</span></span>](/windows/desktop/api/Shlwapi/nf-shlwapi-wvnsprintfa)                                               | <span data-ttu-id="a0b83-234">Не гарантируется, что скопированная строка завершается нулем.</span><span class="sxs-lookup"><span data-stu-id="a0b83-234">The copied string is not guaranteed to be null-terminated.</span></span> <span data-ttu-id="a0b83-235">Вместо этого используйте один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="a0b83-235">Use one of the following alternatives instead.</span></span> <span data-ttu-id="a0b83-236">[**Стрингкбпринтф**](/windows/win32/api/strsafe/nf-strsafe-stringcbprintfa), [**стрингкбпринтфекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbprintfexa), [**стрингкбвпринтф**](/windows/win32/api/strsafe/nf-strsafe-stringcbvprintfa), [**стрингкбвпринтфекс**](/windows/win32/api/strsafe/nf-strsafe-stringcbvprintfexa), [**стрингкчпринтф**](/windows/win32/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcchvprintfa)или [**StringCchVPrintfEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchvprintfexa).</span><span class="sxs-lookup"><span data-stu-id="a0b83-236">[**StringCbPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcbprintfa), [**StringCbPrintfEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbprintfexa), [**StringCbVPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcbvprintfa), [**StringCbVPrintfEx**](/windows/win32/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/win32/api/strsafe/nf-strsafe-stringcchvprintfa), or [**StringCchVPrintfEx**](/windows/win32/api/strsafe/nf-strsafe-stringcchvprintfexa).</span></span>                                                                                                                                                                                 |



 

## <a name="related-topics"></a><span data-ttu-id="a0b83-237">См. также</span><span class="sxs-lookup"><span data-stu-id="a0b83-237">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a0b83-238">Microsoft Security</span><span class="sxs-lookup"><span data-stu-id="a0b83-238">Microsoft Security</span></span>](https://www.microsoft.com/security/default.aspx)
</dt> <dt>

[<span data-ttu-id="a0b83-239">Центр разработчиков безопасности</span><span class="sxs-lookup"><span data-stu-id="a0b83-239">Security Developer Center</span></span>](https://msdn.microsoft.com/security/)
</dt> <dt>

<span data-ttu-id="a0b83-240">[Ускорители решений от Майкрософт](/previous-versions/tn-archive/cc936627(v=technet.10))</span><span class="sxs-lookup"><span data-stu-id="a0b83-240">[Microsoft Solution Accelerators](/previous-versions/tn-archive/cc936627(v=technet.10))</span></span>
</dt> <dt>

[<span data-ttu-id="a0b83-241">Технический центр безопасности</span><span class="sxs-lookup"><span data-stu-id="a0b83-241">Security TechCenter</span></span>](https://technet.microsoft.com/security/default.aspx)
</dt> <dt>

[<span data-ttu-id="a0b83-242">О Стрсафе. h</span><span class="sxs-lookup"><span data-stu-id="a0b83-242">About Strsafe.h</span></span>](../menurc/strsafe-ovw.md)
</dt> </dl>

 

 
