---
description: Пространство имен Shell организует файловую систему и другие объекты, управляемые оболочкой, в одну иерархию, структурированную по дереву. По сути, это более обширная и более широкая версия файловой системы.
title: Основные понятия обозревателя
ms.topic: article
ms.date: 05/31/2018
ms.assetid: 78136c36-bd3c-4114-8b69-fef4e307566d
api_name: ''
api_type: ''
api_location: ''
topic_type:
- kbArticle
ms.openlocfilehash: d5ea7d154ef0455576d91f99eb53dccd93c25339
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104563919"
---
# <a name="common-explorer-concepts"></a><span data-ttu-id="aeca0-104">Основные понятия обозревателя</span><span class="sxs-lookup"><span data-stu-id="aeca0-104">Common Explorer Concepts</span></span>

<span data-ttu-id="aeca0-105">*Пространство имен* Shell организует файловую систему и другие объекты, управляемые оболочкой, в одну иерархию, структурированную по дереву.</span><span class="sxs-lookup"><span data-stu-id="aeca0-105">The Shell *namespace* organizes the file system and other objects managed by the Shell into a single tree-structured hierarchy.</span></span> <span data-ttu-id="aeca0-106">По сути, это более обширная и более широкая версия файловой системы.</span><span class="sxs-lookup"><span data-stu-id="aeca0-106">Conceptually, it is a larger and more inclusive version of the file system.</span></span>

-   [<span data-ttu-id="aeca0-107">Введение</span><span class="sxs-lookup"><span data-stu-id="aeca0-107">Introduction</span></span>](#introduction)
-   [<span data-ttu-id="aeca0-108">Определение объектов пространства имен</span><span class="sxs-lookup"><span data-stu-id="aeca0-108">Identifying Namespace Objects</span></span>](#identifying-namespace-objects)
    -   [<span data-ttu-id="aeca0-109">Идентификаторы элементов</span><span class="sxs-lookup"><span data-stu-id="aeca0-109">Item IDs</span></span>](#item-ids)
    -   [<span data-ttu-id="aeca0-110">Списки ИДЕНТИФИКАТОРов элементов</span><span class="sxs-lookup"><span data-stu-id="aeca0-110">Item ID Lists</span></span>](#item-id-lists)
    -   [<span data-ttu-id="aeca0-111">PIDL</span><span class="sxs-lookup"><span data-stu-id="aeca0-111">PIDLs</span></span>](#pidls)
    -   [<span data-ttu-id="aeca0-112">Выделение PIDL</span><span class="sxs-lookup"><span data-stu-id="aeca0-112">Allocating PIDLs</span></span>](#allocating-pidls)

## <a name="introduction"></a><span data-ttu-id="aeca0-113">Введение</span><span class="sxs-lookup"><span data-stu-id="aeca0-113">Introduction</span></span>

<span data-ttu-id="aeca0-114">Одной из основных обязанностей оболочки является управление и предоставление доступа к широкому спектру объектов, составляющих систему.</span><span class="sxs-lookup"><span data-stu-id="aeca0-114">One of the primary responsibilities of the Shell is managing and providing access to the wide variety of objects that make up the system.</span></span> <span data-ttu-id="aeca0-115">Самыми многочисленными и знакомыми этими объектами являются папки и файлы, расположенные на дисках компьютера.</span><span class="sxs-lookup"><span data-stu-id="aeca0-115">The most numerous and familiar of these objects are the folders and files that reside on computer disk drives.</span></span> <span data-ttu-id="aeca0-116">Однако оболочка управляет несколькими нефайловой системой или *виртуальными* объектами.</span><span class="sxs-lookup"><span data-stu-id="aeca0-116">However, the Shell manages a number of nonfile system, or *virtual* objects, as well.</span></span> <span data-ttu-id="aeca0-117">Некоторые примеры:</span><span class="sxs-lookup"><span data-stu-id="aeca0-117">Some examples include:</span></span>

-   <span data-ttu-id="aeca0-118">Сетевые принтеры</span><span class="sxs-lookup"><span data-stu-id="aeca0-118">Network printers</span></span>
-   <span data-ttu-id="aeca0-119">Другие компьютеры, подключенные к сети</span><span class="sxs-lookup"><span data-stu-id="aeca0-119">Other networked computers</span></span>
-   <span data-ttu-id="aeca0-120">Приложения панели управления</span><span class="sxs-lookup"><span data-stu-id="aeca0-120">Control Panel applications</span></span>
-   <span data-ttu-id="aeca0-121">Корзина</span><span class="sxs-lookup"><span data-stu-id="aeca0-121">The Recycle Bin</span></span>

<span data-ttu-id="aeca0-122">Некоторые виртуальные объекты вообще не используют физическое хранилище.</span><span class="sxs-lookup"><span data-stu-id="aeca0-122">Some virtual objects do not involve physical storage at all.</span></span> <span data-ttu-id="aeca0-123">Объект Printer, например, содержит коллекцию ссылок на сетевые принтеры.</span><span class="sxs-lookup"><span data-stu-id="aeca0-123">The printer object, for instance, contains a collection of links to networked printers.</span></span> <span data-ttu-id="aeca0-124">Другие виртуальные объекты, например корзина, могут содержать данные, хранящиеся на диске, но должны обрабатываться иначе, чем обычные файлы.</span><span class="sxs-lookup"><span data-stu-id="aeca0-124">Other virtual objects, such as the Recycle Bin, may contain data that is stored on a disk drive, but needs to be handled differently than normal files.</span></span> <span data-ttu-id="aeca0-125">Например, виртуальный объект может использоваться для представления данных, хранящихся в базе данных.</span><span class="sxs-lookup"><span data-stu-id="aeca0-125">For example, a virtual object can be used to represent data stored in a database.</span></span> <span data-ttu-id="aeca0-126">С точки зрения пространства имен различные элементы в базе данных могут отображаться в проводнике Windows как отдельные объекты, даже если они хранятся в одном файле на диске.</span><span class="sxs-lookup"><span data-stu-id="aeca0-126">In terms of the namespace, the various items in the database could appear in the Windows Explorer as separate objects, even though they are all stored in a single disk file.</span></span>

<span data-ttu-id="aeca0-127">Виртуальные объекты могут даже находиться на удаленных компьютерах.</span><span class="sxs-lookup"><span data-stu-id="aeca0-127">Virtual objects may even be located on remote computers.</span></span> <span data-ttu-id="aeca0-128">Например, чтобы упростить роуминг, файлы документов пользователя могут храниться на сервере.</span><span class="sxs-lookup"><span data-stu-id="aeca0-128">For instance, to facilitate roaming, a user's document files might be stored on a server.</span></span> <span data-ttu-id="aeca0-129">Чтобы предоставить пользователям доступ к своим файлам с нескольких настольных ПК, папка «Мои документы» на настольном компьютере, которую они используют в данный момент, будет указывать на сервер, а не на жесткий диск настольного ПК.</span><span class="sxs-lookup"><span data-stu-id="aeca0-129">To give users access to their files from multiple desktop PCs, the My Documents folder on the desktop PC they are currently using will point to the server, not the hard disk of the desktop PC.</span></span> <span data-ttu-id="aeca0-130">Его путь будет содержать сопоставленный сетевой диск или UNC-путь.</span><span class="sxs-lookup"><span data-stu-id="aeca0-130">Its path will include either a mapped network drive or a UNC path name.</span></span>

<span data-ttu-id="aeca0-131">Как и в файловой системе, пространство имен включает два основных типа объектов: папки и файлы.</span><span class="sxs-lookup"><span data-stu-id="aeca0-131">Like the file system, the namespace includes two basic types of object: folders and files.</span></span> <span data-ttu-id="aeca0-132">Объекты папки — это *узлы* дерева; они представляют собой контейнеры для файловых объектов и других папок.</span><span class="sxs-lookup"><span data-stu-id="aeca0-132">Folder objects are the *nodes* of the tree; they are containers for file objects and other folders.</span></span> <span data-ttu-id="aeca0-133">Объекты файлов — это *листья* дерева; Это обычные файлы или виртуальные объекты, например ссылки на принтеры.</span><span class="sxs-lookup"><span data-stu-id="aeca0-133">File objects are the *leaves* of the tree; they are either normal disk files or virtual objects, such as printer links.</span></span> <span data-ttu-id="aeca0-134">Папки, которые не являются частью файловой системы, иногда называют *виртуальными папками*.</span><span class="sxs-lookup"><span data-stu-id="aeca0-134">Folders that are not part of the file system are sometimes referred to as *virtual folders*.</span></span>

<span data-ttu-id="aeca0-135">Как и папки файловой системы, коллекция виртуальных папок обычно отличается от системы к системе.</span><span class="sxs-lookup"><span data-stu-id="aeca0-135">Like file system folders, the collection of virtual folders generally varies from system to system.</span></span> <span data-ttu-id="aeca0-136">Существует три класса виртуальных папок:</span><span class="sxs-lookup"><span data-stu-id="aeca0-136">There are three classes of virtual folders:</span></span>

-   <span data-ttu-id="aeca0-137">Стандартные виртуальные папки, например корзина, которые находятся во всех системах.</span><span class="sxs-lookup"><span data-stu-id="aeca0-137">Standard virtual folders, such as the Recycle Bin, that are found on all systems.</span></span>
-   <span data-ttu-id="aeca0-138">Необязательные виртуальные папки со стандартными именами и функциональностью, но могут отсутствовать во всех системах.</span><span class="sxs-lookup"><span data-stu-id="aeca0-138">Optional virtual folders that have standard names and functionality, but may not be present on all systems.</span></span>
-   <span data-ttu-id="aeca0-139">Нестандартные папки, установленные пользователем.</span><span class="sxs-lookup"><span data-stu-id="aeca0-139">Non-standard folders that are installed by the user.</span></span>

<span data-ttu-id="aeca0-140">В отличие от папок файловой системы, пользователи не могут самостоятельно создавать новые виртуальные папки.</span><span class="sxs-lookup"><span data-stu-id="aeca0-140">Unlike file system folders, users cannot create new virtual folders themselves.</span></span> <span data-ttu-id="aeca0-141">Они могут устанавливать только те, которые были созданы разработчиками сторонних разработчиков.</span><span class="sxs-lookup"><span data-stu-id="aeca0-141">They can only install ones created by non-Microsoft developers.</span></span> <span data-ttu-id="aeca0-142">Таким образом, количество виртуальных папок, как правило, намного меньше числа папок файловой системы.</span><span class="sxs-lookup"><span data-stu-id="aeca0-142">The number of virtual folders is thus normally much fewer than the number of file system folders.</span></span> <span data-ttu-id="aeca0-143">Обсуждение реализации виртуальных папок см. в разделе [расширения пространств имен](nse-works.md).</span><span class="sxs-lookup"><span data-stu-id="aeca0-143">For a discussion of how to implement virtual folders see [Namespace Extensions](nse-works.md).</span></span>

<span data-ttu-id="aeca0-144">Визуальное представление структуры пространства имен можно увидеть на панели обозревателя проводника Windows.</span><span class="sxs-lookup"><span data-stu-id="aeca0-144">You can see a visual representation of how the namespace is structured in the Explorer Bar of the Windows Explorer.</span></span> <span data-ttu-id="aeca0-145">Например, на следующем снимке экрана Windows Explorer отображается относительно простое пространство имен.</span><span class="sxs-lookup"><span data-stu-id="aeca0-145">For example, the following screen shot of Windows Explorer shows a relatively simple namespace.</span></span>

![снимок экрана, показывающий представление пространства имен оболочки](images/prog1.png)

<span data-ttu-id="aeca0-147">В качестве конечного корня иерархии пространства имен используется рабочий стол.</span><span class="sxs-lookup"><span data-stu-id="aeca0-147">The ultimate root of the namespace hierarchy is the desktop.</span></span> <span data-ttu-id="aeca0-148">Непосредственно под корнем находится несколько виртуальных папок, таких как Мой компьютер и корзина.</span><span class="sxs-lookup"><span data-stu-id="aeca0-148">Immediately below the root are several virtual folders such as My Computer and the Recycle Bin.</span></span>

<span data-ttu-id="aeca0-149">Файловые системы различных дисков могут рассматриваться как подмножества более крупной иерархии пространства имен.</span><span class="sxs-lookup"><span data-stu-id="aeca0-149">The file systems of the various disk drives can be seen to be subsets of the larger namespace hierarchy.</span></span> <span data-ttu-id="aeca0-150">Корни этих файловых систем являются вложенными папками папки Мой компьютер.</span><span class="sxs-lookup"><span data-stu-id="aeca0-150">The roots of these file systems are subfolders of the My Computer folder.</span></span> <span data-ttu-id="aeca0-151">Мой компьютер также включает корни всех подключенных сетевых дисков.</span><span class="sxs-lookup"><span data-stu-id="aeca0-151">My Computer also includes the roots of any mapped network drives.</span></span> <span data-ttu-id="aeca0-152">Другие узлы в дереве, например "Мои документы", являются виртуальными папками.</span><span class="sxs-lookup"><span data-stu-id="aeca0-152">Other nodes in the tree, such as My Documents, are virtual folders.</span></span>

## <a name="identifying-namespace-objects"></a><span data-ttu-id="aeca0-153">Определение объектов пространства имен</span><span class="sxs-lookup"><span data-stu-id="aeca0-153">Identifying Namespace Objects</span></span>

<span data-ttu-id="aeca0-154">Прежде чем использовать объект пространства имен, необходимо сначала идентифицировать его.</span><span class="sxs-lookup"><span data-stu-id="aeca0-154">Before you can use a namespace object, you must first have a way of identifying it.</span></span> <span data-ttu-id="aeca0-155">Объект в файловой системе может иметь такое же имя, как MyFile.htm.</span><span class="sxs-lookup"><span data-stu-id="aeca0-155">An object in the file system could have a name such as MyFile.htm.</span></span> <span data-ttu-id="aeca0-156">Поскольку могут существовать другие файлы с таким именем в другом расположении в системе, для уникальной идентификации файла или папки требуется полный путь, например "C: \\ MyDocs \\MyFile.htm".</span><span class="sxs-lookup"><span data-stu-id="aeca0-156">Because there might be other files with that name elsewhere in the system, uniquely identifying a file or folder requires a fully qualified path such as "C:\\MyDocs\\MyFile.htm".</span></span> <span data-ttu-id="aeca0-157">Этот путь представляет собой упорядоченный список всех папок в пути из корневой файловой системы C: \\ , заканчивая файлом.</span><span class="sxs-lookup"><span data-stu-id="aeca0-157">This path is basically an ordered list of all folders in a path from the file system root, C:\\, ending with the file.</span></span>

<span data-ttu-id="aeca0-158">В контексте пространства имен пути по-прежнему весьма полезны для идентификации объектов, расположенных в части файловой системы пространства имен.</span><span class="sxs-lookup"><span data-stu-id="aeca0-158">In the context of the namespace, paths are still quite useful for identifying objects located in the file system part of the namespace.</span></span> <span data-ttu-id="aeca0-159">Однако их нельзя использовать для виртуальных объектов.</span><span class="sxs-lookup"><span data-stu-id="aeca0-159">However, they cannot be used for virtual objects.</span></span> <span data-ttu-id="aeca0-160">Вместо этого оболочка предоставляет альтернативные средства идентификации, которые можно использовать с любым объектом пространства имен.</span><span class="sxs-lookup"><span data-stu-id="aeca0-160">Instead, the Shell provides an alternative means of identification that can be used with any namespace object.</span></span>

### <a name="item-ids"></a><span data-ttu-id="aeca0-161">Идентификаторы элементов</span><span class="sxs-lookup"><span data-stu-id="aeca0-161">Item IDs</span></span>

<span data-ttu-id="aeca0-162">В папке каждый объект имеет *идентификатор элемента*, который является функциональным аналогом имени файла или папки.</span><span class="sxs-lookup"><span data-stu-id="aeca0-162">Within a folder, each object has an *item ID*, which is the functional equivalent of a file or folder name.</span></span> <span data-ttu-id="aeca0-163">Идентификатор элемента фактически является структурой [**шитемид**](/windows/desktop/api/Shtypes/ns-shtypes-shitemid) :</span><span class="sxs-lookup"><span data-stu-id="aeca0-163">The item ID is actually a [**SHITEMID**](/windows/desktop/api/Shtypes/ns-shtypes-shitemid) structure:</span></span>


```
typedef struct _SHITEMID { 
    USHORT cb; 
    BYTE   abID[1]; 
} SHITEMID, * LPSHITEMID;
```



<span data-ttu-id="aeca0-164">Элемент **Абид** является идентификатором объекта.</span><span class="sxs-lookup"><span data-stu-id="aeca0-164">The **abID** member is the object's identifier.</span></span> <span data-ttu-id="aeca0-165">Длина **Абид** не определена, а ее значение определяется папкой, содержащей объект.</span><span class="sxs-lookup"><span data-stu-id="aeca0-165">The length of **abID** is not defined, and its value is determined by the folder that contains the object.</span></span> <span data-ttu-id="aeca0-166">Поскольку нет стандартного определения того, как значения **Абид** назначаются папками, они имеют смысл только для связанного объекта Folder.</span><span class="sxs-lookup"><span data-stu-id="aeca0-166">Because there is no standard definition for how **abID** values are assigned by folders, they are only meaningful to the associated folder object.</span></span> <span data-ttu-id="aeca0-167">Приложения должны просто обрабатывать их как маркер, идентифицирующий объект в определенной папке.</span><span class="sxs-lookup"><span data-stu-id="aeca0-167">Applications should simply treat them as a token that identifies an object in a particular folder.</span></span> <span data-ttu-id="aeca0-168">Так как длина **Абид** варьируется, член **CB** содержит размер структуры [**шитемид**](/windows/desktop/api/Shtypes/ns-shtypes-shitemid) в байтах.</span><span class="sxs-lookup"><span data-stu-id="aeca0-168">Because the length of **abID** varies, the **cb** member holds the size of the [**SHITEMID**](/windows/desktop/api/Shtypes/ns-shtypes-shitemid) structure, in bytes.</span></span>

<span data-ttu-id="aeca0-169">Поскольку идентификаторы элементов не полезны для показа, папка, содержащая объект, обычно назначает ему отображаемое имя.</span><span class="sxs-lookup"><span data-stu-id="aeca0-169">Because item IDs aren't useful for display purposes, the folder that contains the object normally assigns it a display name.</span></span> <span data-ttu-id="aeca0-170">Это имя, которое используется проводником Windows при отображении содержимого папки.</span><span class="sxs-lookup"><span data-stu-id="aeca0-170">This is the name that is used by Windows Explorer when it displays the contents of a folder.</span></span> <span data-ttu-id="aeca0-171">Дополнительные сведения о том, как обрабатываются отображаемые имена, см. в разделе [Получение сведений из папки](folder-info.md).</span><span class="sxs-lookup"><span data-stu-id="aeca0-171">For more information on how display names are handled, see [Getting Information From a Folder](folder-info.md).</span></span>

### <a name="item-id-lists"></a><span data-ttu-id="aeca0-172">Списки ИДЕНТИФИКАТОРов элементов</span><span class="sxs-lookup"><span data-stu-id="aeca0-172">Item ID Lists</span></span>

<span data-ttu-id="aeca0-173">Идентификатор элемента редко используется самим собой.</span><span class="sxs-lookup"><span data-stu-id="aeca0-173">The item ID is rarely used by itself.</span></span> <span data-ttu-id="aeca0-174">Как правило, он является частью списка ИДЕНТИФИКАТОРов элементов, который служит той же цели, что и путь файловой системы.</span><span class="sxs-lookup"><span data-stu-id="aeca0-174">Normally, it is part of an item ID list, which serves the same purpose as a file system path.</span></span> <span data-ttu-id="aeca0-175">Однако вместо символьной строки, используемой для путей, список ИДЕНТИФИКАТОРов элементов является структурой [**итемидлист**](/windows/desktop/api/Shtypes/ns-shtypes-itemidlist) .</span><span class="sxs-lookup"><span data-stu-id="aeca0-175">However, instead of the character string used for paths, an item ID list is an [**ITEMIDLIST**](/windows/desktop/api/Shtypes/ns-shtypes-itemidlist) structure.</span></span> <span data-ttu-id="aeca0-176">Эта структура представляет собой упорядоченную последовательность из одного или нескольких идентификаторов элементов, заканчивающаяся двухбайтовым **значением NULL**.</span><span class="sxs-lookup"><span data-stu-id="aeca0-176">This structure is an ordered sequence of one or more item IDs, terminated by a two-byte **NULL**.</span></span> <span data-ttu-id="aeca0-177">Идентификатор каждого элемента в списке ИДЕНТИФИКАТОРов элементов соответствует объекту пространства имен.</span><span class="sxs-lookup"><span data-stu-id="aeca0-177">Each item ID in the item ID list corresponds to a namespace object.</span></span> <span data-ttu-id="aeca0-178">Их порядок определяет путь в пространстве имен, во многом подобно пути файловой системы.</span><span class="sxs-lookup"><span data-stu-id="aeca0-178">Their order defines a path in the namespace, much like a file system path.</span></span>

<span data-ttu-id="aeca0-179">На следующем рисунке показано схематическое представление структуры [**итемидлист**](/windows/desktop/api/Shtypes/ns-shtypes-itemidlist) , которое соответствует C: \\ MyDocs \\MyFile.htm.</span><span class="sxs-lookup"><span data-stu-id="aeca0-179">The following illustration shows a schematic representation of the [**ITEMIDLIST**](/windows/desktop/api/Shtypes/ns-shtypes-itemidlist) structure that corresponds to C:\\MyDocs\\MyFile.htm.</span></span> <span data-ttu-id="aeca0-180">Отображаемое имя каждого идентификатора элемента отображается над ним.</span><span class="sxs-lookup"><span data-stu-id="aeca0-180">The display name of each item ID is shown above it.</span></span> <span data-ttu-id="aeca0-181">Различные ширины элементов **Абид** являются произвольными. Они иллюстрируют тот факт, что размер этого элемента может быть разным.</span><span class="sxs-lookup"><span data-stu-id="aeca0-181">The varying widths of the **abID** members are arbitrary; they illustrate the fact that the size of this member can vary.</span></span>

![Схематическое изображение Пидл](images/shell2.png)

### <a name="pidls"></a><span data-ttu-id="aeca0-183">PIDL</span><span class="sxs-lookup"><span data-stu-id="aeca0-183">PIDLs</span></span>

<span data-ttu-id="aeca0-184">Для API оболочки объекты пространства имен обычно обозначаются указателем на структуру [**итемидлист**](/windows/desktop/api/Shtypes/ns-shtypes-itemidlist) или указателем на список идентификаторов элементов (Пидл).</span><span class="sxs-lookup"><span data-stu-id="aeca0-184">For the Shell API, namespace objects are usually identified by a pointer to their [**ITEMIDLIST**](/windows/desktop/api/Shtypes/ns-shtypes-itemidlist) structure, or pointer to an item identifier list (PIDL).</span></span> <span data-ttu-id="aeca0-185">Для удобства термин ПИДЛ обычно будет ссылаться на саму структуру, а не на ее указатель.</span><span class="sxs-lookup"><span data-stu-id="aeca0-185">For convenience, the term PIDL will generally refer in this documentation to the structure itself rather than the pointer to it.</span></span>

<span data-ttu-id="aeca0-186">ПИДЛ, показанный на предыдущем рисунке, называется *полным* или *абсолютным* Пидл.</span><span class="sxs-lookup"><span data-stu-id="aeca0-186">The PIDL shown in the preceding illustration is referred to as a *full*, or *absolute*, PIDL.</span></span> <span data-ttu-id="aeca0-187">Полный ПИДЛ начинается с рабочего стола и содержит идентификаторы элементов всех промежуточных папок в пути.</span><span class="sxs-lookup"><span data-stu-id="aeca0-187">A full PIDL starts from the desktop, and contains the item IDs of all intermediate folders in the path.</span></span> <span data-ttu-id="aeca0-188">Он заканчивается ИДЕНТИФИКАТОРом элемента объекта, за которым следует завершающее двухбайтовый **значение NULL**.</span><span class="sxs-lookup"><span data-stu-id="aeca0-188">It ends with the object's item ID followed by a terminating two-byte **NULL**.</span></span> <span data-ttu-id="aeca0-189">Полный ПИДЛ аналогичен полному пути и уникально идентифицирует объект в пространстве имен оболочки.</span><span class="sxs-lookup"><span data-stu-id="aeca0-189">A full PIDL is similar to a fully qualified path and uniquely identifies the object in the Shell namespace.</span></span>

<span data-ttu-id="aeca0-190">Полные PIDL используются редко.</span><span class="sxs-lookup"><span data-stu-id="aeca0-190">Full PIDLs are used infrequently.</span></span> <span data-ttu-id="aeca0-191">Многие функции и методы предполагают *относительную Пидл*.</span><span class="sxs-lookup"><span data-stu-id="aeca0-191">Many functions and methods expect a *relative PIDL*.</span></span> <span data-ttu-id="aeca0-192">Корень относительных ПИДЛ является папкой, а не настольной.</span><span class="sxs-lookup"><span data-stu-id="aeca0-192">The root of a relative PIDL is a folder, not the desktop.</span></span> <span data-ttu-id="aeca0-193">Как и в случае с относительными путями, последовательность идентификаторов элементов, составляющих структуру, определяет путь в пространстве имен между двумя объектами.</span><span class="sxs-lookup"><span data-stu-id="aeca0-193">As with relative paths, the series of item IDs that make up the structure define a path in the namespace between two objects.</span></span> <span data-ttu-id="aeca0-194">Хотя они не уникально идентифицируют объект, они обычно меньше, чем полный ПИДЛ и достаточно для многих целей.</span><span class="sxs-lookup"><span data-stu-id="aeca0-194">Although they do not uniquely identify the object, they are usually smaller than a full PIDL and sufficient for many purposes.</span></span>

<span data-ttu-id="aeca0-195">Наиболее часто используемые относительные PIDL, *одноуровневые PIDL*, относятся к родительской папке объекта.</span><span class="sxs-lookup"><span data-stu-id="aeca0-195">The most commonly used relative PIDLs, *single-level PIDLs*, are relative to the object's parent folder.</span></span> <span data-ttu-id="aeca0-196">Они содержат только идентификатор элемента объекта и завершающее **значение NULL**.</span><span class="sxs-lookup"><span data-stu-id="aeca0-196">They contain only the object's item ID and a terminating **NULL**.</span></span> <span data-ttu-id="aeca0-197">Многоуровневые PIDL также используются во многих целях.</span><span class="sxs-lookup"><span data-stu-id="aeca0-197">Multi-level PIDLs are also used for many purposes.</span></span> <span data-ttu-id="aeca0-198">Они содержат два или более идентификатора элементов и обычно определяют путь от родительской папки к объекту через ряд из одной или нескольких вложенных папок.</span><span class="sxs-lookup"><span data-stu-id="aeca0-198">They contain two or more item IDs and typically define a path from a parent folder to an object through a series of one or more subfolders.</span></span> <span data-ttu-id="aeca0-199">Обратите внимание, что одноуровневое ПИДЛ по-прежнему может быть полным ПИДЛ.</span><span class="sxs-lookup"><span data-stu-id="aeca0-199">Note that a single-level PIDL can still be a fully qualified PIDL.</span></span> <span data-ttu-id="aeca0-200">В частности, объекты настольных компьютеров являются дочерними элементами рабочего стола, поэтому их полные PIDL содержат только один идентификатор элемента.</span><span class="sxs-lookup"><span data-stu-id="aeca0-200">In particular, desktop objects are children of the desktop, so their fully qualified PIDLs contain only one item ID.</span></span>

<span data-ttu-id="aeca0-201">Как описано в разделе [Получение идентификатора папки](folder-id.md), API оболочки предоставляет несколько способов извлечения Пидл объекта.</span><span class="sxs-lookup"><span data-stu-id="aeca0-201">As discussed in [Getting a Folder's ID](folder-id.md), the Shell API provides a number of ways to retrieve an object's PIDL.</span></span> <span data-ttu-id="aeca0-202">После этого вы обычно используете его для определения объекта при вызове других функций и методов API оболочки.</span><span class="sxs-lookup"><span data-stu-id="aeca0-202">Once you have it, you commonly just use it to identify the object when you call other Shell API functions and methods.</span></span> <span data-ttu-id="aeca0-203">В этом контексте внутреннее содержимое ПИДЛ является непрозрачным и несущественным.</span><span class="sxs-lookup"><span data-stu-id="aeca0-203">In this context, a PIDL's internal contents are opaque and irrelevant.</span></span> <span data-ttu-id="aeca0-204">В рамках этого обсуждения PIDL в качестве маркеров, представляющих определенные объекты пространства имен, и сосредоточьтесь на том, как их использовать для выполнения стандартных задач.</span><span class="sxs-lookup"><span data-stu-id="aeca0-204">For the purposes of this discussion, think of PIDLs as tokens that represent particular namespace objects, and focus on how to use them for common tasks.</span></span>

### <a name="allocating-pidls"></a><span data-ttu-id="aeca0-205">Выделение PIDL</span><span class="sxs-lookup"><span data-stu-id="aeca0-205">Allocating PIDLs</span></span>

<span data-ttu-id="aeca0-206">Несмотря на то, что PIDL имеет некоторую сходство с путями, их использование требует немного другого подхода.</span><span class="sxs-lookup"><span data-stu-id="aeca0-206">Although PIDLs have some similarity to paths, using them requires a somewhat different approach.</span></span> <span data-ttu-id="aeca0-207">Основное различие заключается в том, как выделить и освободить память для них.</span><span class="sxs-lookup"><span data-stu-id="aeca0-207">The primary difference is in how to allocate and deallocate memory for them.</span></span>

<span data-ttu-id="aeca0-208">Как и строка, используемая для пути, память должна выделяться для ПИДЛ.</span><span class="sxs-lookup"><span data-stu-id="aeca0-208">Like the string used for a path, memory must be allocated for a PIDL.</span></span> <span data-ttu-id="aeca0-209">Если приложение создает ПИДЛ, оно должно выделить достаточно памяти для структуры [**итемидлист**](/windows/desktop/api/Shtypes/ns-shtypes-itemidlist) .</span><span class="sxs-lookup"><span data-stu-id="aeca0-209">If an application creates a PIDL, it must allocate sufficient memory for the [**ITEMIDLIST**](/windows/desktop/api/Shtypes/ns-shtypes-itemidlist) structure.</span></span> <span data-ttu-id="aeca0-210">В большинстве случаев, описанных здесь, оболочка создает ПИДЛ и обрабатывает выделение памяти.</span><span class="sxs-lookup"><span data-stu-id="aeca0-210">For most of the cases discussed here, the Shell creates the PIDL and handles memory allocation.</span></span> <span data-ttu-id="aeca0-211">Независимо от того, что выделило ПИДЛ, приложение обычно отвечает за отмену выделения ПИДЛ, когда оно больше не требуется.</span><span class="sxs-lookup"><span data-stu-id="aeca0-211">Regardless of what allocated the PIDL, the application is usually responsible for deallocating the PIDL when it is no longer needed.</span></span>

<span data-ttu-id="aeca0-212">Используйте функцию [**CoTaskMemAlloc**](/windows/win32/api/combaseapi/nf-combaseapi-cotaskmemalloc) для выделения Пидл, а функцию [**CoTaskMemFree**](/windows/win32/api/combaseapi/nf-combaseapi-cotaskmemfree) — для ее освобождения.</span><span class="sxs-lookup"><span data-stu-id="aeca0-212">Use the [**CoTaskMemAlloc**](/windows/win32/api/combaseapi/nf-combaseapi-cotaskmemalloc) function to allocate the PIDL, and the [**CoTaskMemFree**](/windows/win32/api/combaseapi/nf-combaseapi-cotaskmemfree) function to deallocate it.</span></span>

 

 
