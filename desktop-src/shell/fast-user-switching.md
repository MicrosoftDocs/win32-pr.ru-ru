---
description: В более старых операционных системах пользователю требовалось выйти из системы, прежде чем другой пользователь сможет войти в систему. Начиная с Windows XP, пользователю не нужно выходить из системы, чтобы позволить другому пользователю войти в систему.
ms.assetid: 72f99d32-184f-4f0b-bec1-6068c6e32f88
title: Быстрое переключение пользователей
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4d79f16ef8a1ea8c97bfb61d34dfa727f3d0cef8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104997750"
---
# <a name="fast-user-switching"></a><span data-ttu-id="c8951-104">Быстрое переключение пользователей</span><span class="sxs-lookup"><span data-stu-id="c8951-104">Fast User Switching</span></span>

<span data-ttu-id="c8951-105">При входе пользователя на компьютер система загружает свой профиль.</span><span class="sxs-lookup"><span data-stu-id="c8951-105">When a user logs onto a computer, the system loads their profile.</span></span> <span data-ttu-id="c8951-106">Так как у каждого пользователя есть уникальная учетная запись, это позволяет нескольким пользователям совместно использовать один компьютер.</span><span class="sxs-lookup"><span data-stu-id="c8951-106">Because each user has a unique user account, this allows multiple users to share a computer.</span></span> <span data-ttu-id="c8951-107">Когда пользователь входит в систему, параметры рабочего стола, файлы, избранное и журнал отображаются в них. они недоступны другим пользователям.</span><span class="sxs-lookup"><span data-stu-id="c8951-107">When a user logs on, the desktop settings, files, favorites, and history they see are theirs; they cannot be accessed by other users.</span></span> <span data-ttu-id="c8951-108">При выходе пользователя из системы его профиль сохраняется при следующем входе в систему.</span><span class="sxs-lookup"><span data-stu-id="c8951-108">When that user logs off, their profile is preserved for the next time that they log on.</span></span> <span data-ttu-id="c8951-109">В более старых операционных системах пользователю требовалось выйти из системы, прежде чем другой пользователь сможет войти в систему.</span><span class="sxs-lookup"><span data-stu-id="c8951-109">In older operating systems, a user was required to log off before another user could log on.</span></span> <span data-ttu-id="c8951-110">Начиная с Windows XP, пользователю не нужно выходить из системы, чтобы позволить другому пользователю войти в систему.</span><span class="sxs-lookup"><span data-stu-id="c8951-110">As of Windows XP, a user does not have to log off to allow another user to log on.</span></span> <span data-ttu-id="c8951-111">Вместо этого несколько пользователей могут выполнять вход и быстро переключаться между открытыми учетными записями.</span><span class="sxs-lookup"><span data-stu-id="c8951-111">Instead, it is possible for multiple users to log on and switch quickly between their open accounts.</span></span> <span data-ttu-id="c8951-112">Эта функция называется *быстрым переключением пользователей*.</span><span class="sxs-lookup"><span data-stu-id="c8951-112">This feature is referred to as *fast user switching*.</span></span> <span data-ttu-id="c8951-113">При переключении на другую учетную запись состояние приложений, выполняемых в данный момент, не изменяется.</span><span class="sxs-lookup"><span data-stu-id="c8951-113">Switching to another account does not change the state of the applications that a user is currently running.</span></span> <span data-ttu-id="c8951-114">Предположим, например, что один пользователь позволяет другому пользователю переключиться на свою учетную запись, пока первый пользователь вошел в систему.</span><span class="sxs-lookup"><span data-stu-id="c8951-114">Suppose, for instance, that one user allows another user to switch to their account while the first user is logged on.</span></span> <span data-ttu-id="c8951-115">Когда первый пользователь переключается обратно в свою учетную запись, выполняются их приложения и сетевые подключения сохраняются.</span><span class="sxs-lookup"><span data-stu-id="c8951-115">When the first user switchs back to their account, their applications are running and their network connections are preserved.</span></span> <span data-ttu-id="c8951-116">Таким образом, пользователи одновременно используют компьютер.</span><span class="sxs-lookup"><span data-stu-id="c8951-116">Therefore, it appears that both users are simultaneously using the computer.</span></span>

<span data-ttu-id="c8951-117">Если приложения соответствуют требованиям к логотипу Windows 2000, они должны работать с быстрым переключением пользователей в Windows XP и более поздних операционных системах.</span><span class="sxs-lookup"><span data-stu-id="c8951-117">If your applications comply with the Windows 2000 logo requirements, they should work with fast user switching on Windows XP and later operating systems.</span></span> <span data-ttu-id="c8951-118">Однако важно помнить об этом сценарии при разработке приложения, чтобы он работал так, как хотелось бы.</span><span class="sxs-lookup"><span data-stu-id="c8951-118">However, it is important to keep this scenario in mind when developing an application so that it behaves as users would expect.</span></span> <span data-ttu-id="c8951-119">При написании приложений следуйте приведенным ниже рекомендациям.</span><span class="sxs-lookup"><span data-stu-id="c8951-119">Use the following guidelines when writing your applications:</span></span>

-   <span data-ttu-id="c8951-120">Реализация истинного разделения профилей.</span><span class="sxs-lookup"><span data-stu-id="c8951-120">Implement true profile separation.</span></span> <span data-ttu-id="c8951-121">Система предоставляет базовую инфраструктуру, которая поддерживает разделение пользовательских данных, параметров пользователей и параметров компьютера.</span><span class="sxs-lookup"><span data-stu-id="c8951-121">The system provides an underlying infrastructure that supports separation of user data, user settings, and computer settings.</span></span> <span data-ttu-id="c8951-122">Например, используйте папку **документы** пользователя для хранения данных, созданных пользователем.</span><span class="sxs-lookup"><span data-stu-id="c8951-122">For example, use the user's **Documents** folder to store user-created data.</span></span> <span data-ttu-id="c8951-123">Чтобы указать каталог для данных приложения, используйте систему [известных папок](known-folders.md) с [**FOLDERID \_ роамингаппдата**](knownfolderid.md)) или для старых операционных систем, [**CSid**](csidl.md) -системы с [**CSid \_**](csidl.md).</span><span class="sxs-lookup"><span data-stu-id="c8951-123">To locate a directory for application-specific data, use the [known folder](known-folders.md) system with [**FOLDERID\_RoamingAppData**](knownfolderid.md)) or, for older operating systems, the [**CSIDL**](csidl.md) system with [**CSIDL\_APPDATA**](csidl.md)).</span></span> <span data-ttu-id="c8951-124">Для данных, которые не должны быть доступны для пользователя на других компьютерах, например во временных файлах, используйте **FOLDERID \_ LocalAppData** или **CSid \_ Local \_ AppData** .</span><span class="sxs-lookup"><span data-stu-id="c8951-124">Use **FOLDERID\_LocalAppData** or **CSIDL\_LOCAL\_APPDATA** for data that should not be available to the user on other computers, such as temporary files.</span></span>
-   <span data-ttu-id="c8951-125">Регистрация для уведомления о переключении пользователя.</span><span class="sxs-lookup"><span data-stu-id="c8951-125">Register for notification of a user switch.</span></span> <span data-ttu-id="c8951-126">Как правило, приложение не должно получать уведомления при выполнении параметра.</span><span class="sxs-lookup"><span data-stu-id="c8951-126">Typically, an application does not need to be notified when the switch occurs.</span></span> <span data-ttu-id="c8951-127">Однако если приложение должно получать уведомление об изменении сеанса, оно может зарегистрироваться для получения сообщения об [**\_ \_ изменении втссессион WM**](../termserv/wm-wtssession-change.md) .</span><span class="sxs-lookup"><span data-stu-id="c8951-127">However, if your application must be notified of a session change, it can register to receive a [**WM\_WTSSESSION\_CHANGE**](../termserv/wm-wtssession-change.md) message.</span></span>
-   <span data-ttu-id="c8951-128">Помните о других экземплярах приложения.</span><span class="sxs-lookup"><span data-stu-id="c8951-128">Be aware of other instances of your application.</span></span> <span data-ttu-id="c8951-129">Например, бывают случаи, когда приложение должно загрузить обновление из Интернета.</span><span class="sxs-lookup"><span data-stu-id="c8951-129">For example, there are times when an application must download an update from the Internet.</span></span> <span data-ttu-id="c8951-130">Обновление может завершиться ошибкой, если другой пользователь одновременно запускает экземпляр приложения в другом сеансе.</span><span class="sxs-lookup"><span data-stu-id="c8951-130">The update can fail if another user is simultaneously running an instance of the application in another session.</span></span> <span data-ttu-id="c8951-131">Даже если обновление завершилось сбоем, обновление может привести к непредсказуемому поведению других работающих экземпляров приложения.</span><span class="sxs-lookup"><span data-stu-id="c8951-131">Even if the update succeeds, the update can cause other running instances of the application to behave in an unpredictable manner.</span></span> <span data-ttu-id="c8951-132">Поэтому рекомендуется выполнять динамическое обновление только в том случае, если другие экземпляры приложения не выполняются.</span><span class="sxs-lookup"><span data-stu-id="c8951-132">Therefore it is best to perform a dynamic upgrade only if no other instances of the application are running.</span></span> <span data-ttu-id="c8951-133">Перед загрузкой обновления приложения может быть целесообразно реализовать метод, который сигнализирует всем работающим экземплярам приложения сохранять данные и завершать работу в чистом виде.</span><span class="sxs-lookup"><span data-stu-id="c8951-133">Before downloading an application update, it might be appropriate to implement a method that signals all running instances of the application to save data and exit cleanly.</span></span>

 

 
