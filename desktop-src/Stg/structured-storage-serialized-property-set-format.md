---
title: Структурированный формат набора свойств сериализованного хранилища
description: Постоянные наборы свойств предоставляют возможность хранения данных в сущностях файловой системы. Для создания и управления ими рекомендуется использовать интерфейсы IPropertySetStorage и Ипропертистораже, описанные в разделе Свойства и наборы свойств.
ms.assetid: f22abe40-535f-4178-9460-59bbe26ff178
keywords:
- Структурированное хранилище Стрктд STG, основы, сериализованный формат набора свойств
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1ea03d5ccab337897be801840080e83a6fa86880
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "105661749"
---
# <a name="structured-storage-serialized-property-set-format"></a><span data-ttu-id="c08bd-105">Структурированный формат набора свойств сериализованного хранилища</span><span class="sxs-lookup"><span data-stu-id="c08bd-105">Structured Storage Serialized Property Set Format</span></span>

<span data-ttu-id="c08bd-106">Постоянные наборы свойств предоставляют возможность хранения данных в сущностях файловой системы.</span><span class="sxs-lookup"><span data-stu-id="c08bd-106">Persistent property sets provide an option to store data within file system entities.</span></span> <span data-ttu-id="c08bd-107">Для создания и управления ими рекомендуется использовать интерфейсы [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) и [**ипропертистораже**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) , описанные в разделе [Свойства и наборы свойств](properties-and-property-sets.md).</span><span class="sxs-lookup"><span data-stu-id="c08bd-107">It is recommended that, to create and manage them, you use the [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) and [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) interfaces described in [Properties and Property Sets](properties-and-property-sets.md).</span></span>

<span data-ttu-id="c08bd-108">Наборы свойств состоят из раздела Values с тегами, а раздел однозначно идентифицируется с помощью идентификатора формата (FMTID).</span><span class="sxs-lookup"><span data-stu-id="c08bd-108">Property sets are composed of a tagged section of values, with the section uniquely identified by a format identifier (FMTID).</span></span> <span data-ttu-id="c08bd-109">Каждое свойство состоит из идентификатора свойства и индикатора типа, представляющего значение.</span><span class="sxs-lookup"><span data-stu-id="c08bd-109">Every property consists of a property identifier and a type indicator that represents a value.</span></span> <span data-ttu-id="c08bd-110">Каждое значение, хранящееся в наборе свойств, имеет уникальный идентификатор свойства, который различает свойство.</span><span class="sxs-lookup"><span data-stu-id="c08bd-110">Each value stored in a property set has a unique property identifier that distinguishes the property.</span></span> <span data-ttu-id="c08bd-111">Индикатор типа описывает представление данных в значении.</span><span class="sxs-lookup"><span data-stu-id="c08bd-111">The type indicator describes the representation of the data in the value.</span></span>

<span data-ttu-id="c08bd-112">При использовании интерфейсов [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) и [**ипропертистораже**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) не нужно выполнять обработку структуры формата сериализованного набора свойств COM.</span><span class="sxs-lookup"><span data-stu-id="c08bd-112">When you use the [**IPropertySetStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertysetstorage) and [**IPropertyStorage**](/windows/desktop/api/Propidl/nn-propidl-ipropertystorage) interfaces, you do not have to handle the COM serialized property set format structure.</span></span> <span data-ttu-id="c08bd-113">Дополнительные сведения см. в перечисленных разделах:</span><span class="sxs-lookup"><span data-stu-id="c08bd-113">For more information, see the listed topics:</span></span>

<span data-ttu-id="c08bd-114">Все элементы данных в наборе свойств хранятся в представлении Intel (т. е. в порядке байтов с прямым обратным порядком).</span><span class="sxs-lookup"><span data-stu-id="c08bd-114">All data elements within a property set are stored in Intel representation (that is, in little-endian byte order).</span></span>

<span data-ttu-id="c08bd-115">COM определяет стандартный сериализованный формат данных для наборов свойств.</span><span class="sxs-lookup"><span data-stu-id="c08bd-115">COM defines a standard, serialized data format for property sets.</span></span> <span data-ttu-id="c08bd-116">При обработке сериализованного формата, но не с интерфейсами, наборы свойств имеют следующие характеристики.</span><span class="sxs-lookup"><span data-stu-id="c08bd-116">When handling the serialized format, and not with the interfaces, property sets have the following characteristics:</span></span>

-   <span data-ttu-id="c08bd-117">Наборы свойств позволяют различным приложениям создавать собственные независимые наборы свойств для обслуживания приложения.</span><span class="sxs-lookup"><span data-stu-id="c08bd-117">Property sets allow for different applications to create their own independent property sets to serve the application.</span></span>
-   <span data-ttu-id="c08bd-118">Наборы свойств могут храниться в одном экземпляре [**IStream**](/windows/desktop/api/Objidl/nn-objidl-istream) или в экземпляре [**IStorage**](/windows/desktop/api/Objidl/nn-objidl-istorage) , содержащем несколько потоков.</span><span class="sxs-lookup"><span data-stu-id="c08bd-118">Property sets can be stored in a single [**IStream**](/windows/desktop/api/Objidl/nn-objidl-istream) instance or in an [**IStorage**](/windows/desktop/api/Objidl/nn-objidl-istorage) instance that contains multiple streams.</span></span> <span data-ttu-id="c08bd-119">Наборы свойств — это просто другой тип данных, который может храниться во многих разных формах хранилища в памяти или на диске.</span><span class="sxs-lookup"><span data-stu-id="c08bd-119">Property sets are simply another data type that can be stored in many different forms of an in-memory or on-disk storage.</span></span> <span data-ttu-id="c08bd-120">Дополнительные сведения и Рекомендуемые соглашения по созданию имени строки для объекта хранилища см. в разделе [соглашения об именовании объектов хранилища](storage-object-naming-conventions.md).</span><span class="sxs-lookup"><span data-stu-id="c08bd-120">For more information and recommended conventions for creating the string name for the storage object, see [Storage Object Naming Conventions](storage-object-naming-conventions.md).</span></span>
-   <span data-ttu-id="c08bd-121">Наборы свойств позволяют включать словарь отображаемых имен, описывающих содержимое.</span><span class="sxs-lookup"><span data-stu-id="c08bd-121">Property sets allow for a dictionary of display names to be included that describe the contents.</span></span> <span data-ttu-id="c08bd-122">Рекомендуется использовать набор соглашений по выбору имен свойств.</span><span class="sxs-lookup"><span data-stu-id="c08bd-122">A set of conventions for choosing property names is recommended.</span></span> <span data-ttu-id="c08bd-123">Дополнительные сведения об этом необязательном словаре см. в разделе [зарезервированные идентификаторы свойств](reserved-property-identifiers.md), включая [свойство с идентификатором 0](/windows/desktop/Stg/reserved-property-identifiers).</span><span class="sxs-lookup"><span data-stu-id="c08bd-123">For more information about this optional dictionary, see [Reserved Property Identifiers](reserved-property-identifiers.md), including [Property ID 0](/windows/desktop/Stg/reserved-property-identifiers).</span></span>

<span data-ttu-id="c08bd-124">Поток набора свойств делится на три основные части:</span><span class="sxs-lookup"><span data-stu-id="c08bd-124">The property set stream is divided into three major parts:</span></span>

-   <span data-ttu-id="c08bd-125">Header</span><span class="sxs-lookup"><span data-stu-id="c08bd-125">Header</span></span>
-   <span data-ttu-id="c08bd-126">Пара ФОРМАТИД/offset</span><span class="sxs-lookup"><span data-stu-id="c08bd-126">FORMATID/offset pair</span></span>
-   <span data-ttu-id="c08bd-127">Раздел, содержащий фактические значения набора свойств</span><span class="sxs-lookup"><span data-stu-id="c08bd-127">Section containing the actual property set values</span></span>

<span data-ttu-id="c08bd-128">Общая длина потока набора свойств должна быть меньше или равна 256 КБ.</span><span class="sxs-lookup"><span data-stu-id="c08bd-128">The overall length of the property set stream must be less than or equal to 256K.</span></span> <span data-ttu-id="c08bd-129">В следующих разделах [заголовок набора свойств](property-set-header.md), [пара идентификаторов формата и смещения](format-identifier-offset-pair.md), а также [раздел](section.md) (включая [идентификаторы свойств и пары смещений](property-identifiers-offset-pairs.md)) со вспомогательными разделами описывают отдельные компоненты, составляющие формат данных набора свойств.</span><span class="sxs-lookup"><span data-stu-id="c08bd-129">The following sections, [Property Set Header](property-set-header.md), [Format Identifier/Offset Pair](format-identifier-offset-pair.md), and [Section](section.md) (including [Property Identifiers/Offset Pairs](property-identifiers-offset-pairs.md)), with supporting topics, describe the individual components that compose the property-set data format.</span></span>

> [!Note]  
> <span data-ttu-id="c08bd-130">В предыдущих версиях этого документа были описаны расширения для потока набора свойств, в которых разрешено более одного раздела, но это было изменено для предоставления одного раздела в потоке свойств.</span><span class="sxs-lookup"><span data-stu-id="c08bd-130">Previous versions of this document described extensions to the property set stream with more than one section allowed, but that has been revised to provide for one section in the property stream.</span></span> <span data-ttu-id="c08bd-131">Единственным исключением являются [наборы свойств документсуммаринформатион и пользователяопределенные](the-documentsummaryinformation-and-userdefined-property-sets.md).</span><span class="sxs-lookup"><span data-stu-id="c08bd-131">The one exception is [The DocumentSummaryInformation and UserDefined Property Sets](the-documentsummaryinformation-and-userdefined-property-sets.md).</span></span>

 

 

 