---
title: Файлы Makefile
description: Файлы Makefile для каждого из примеров кода в этой серии представляют собой универсальные файлы Makefile Microsoft Win32 и предназначены для построения из окна командной строки.
ms.assetid: f9944069-b536-4ae2-8411-f02c3a78978c
keywords:
- Структурированное хранилище файлов Makefile
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a15fef5818c28986232e8c2a648f43bdc096832f
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104332736"
---
# <a name="makefiles"></a><span data-ttu-id="61257-104">Файлы Makefile</span><span class="sxs-lookup"><span data-stu-id="61257-104">Makefiles</span></span>

<span data-ttu-id="61257-105">Файлы Makefile для каждого из примеров кода в этой серии представляют собой универсальные файлы Makefile Microsoft Win32 и предназначены для построения из окна командной строки.</span><span class="sxs-lookup"><span data-stu-id="61257-105">The makefiles for each of the code samples in this series are generic Microsoft Win32 makefiles and are meant to be built from the Command Prompt window.</span></span> <span data-ttu-id="61257-106">Они предполагают наличие компиляторов и средств компоновщика Майкрософт и, возможно, потребует некоторых изменений для работы с другими инструментами.</span><span class="sxs-lookup"><span data-stu-id="61257-106">They assume Microsoft compiler and linker tools and will probably require some modification to work with other tools.</span></span> <span data-ttu-id="61257-107">Большинство параметров командной строки компилятора или компоновщика задаются с помощью макросов, определенных в файле Win32. MAK, включаемом в состав пакета SDK для платформы.</span><span class="sxs-lookup"><span data-stu-id="61257-107">Most compiler/linker command line switches are specified by macros defined in the Win32.mak makefile include file included with the Platform Software Development Kit (SDK).</span></span>

<span data-ttu-id="61257-108">Файл Makeall.bat и каждый соответствующий пример кода Makefile поддерживают общие параметры, перечисленные в следующей таблице, для вызова из окна командной строки, чтобы управлять природой сборки.</span><span class="sxs-lookup"><span data-stu-id="61257-108">The Makeall.bat file, and each respective code sample makefile, support common options, listed in the following table, for invocation from the Command Prompt window to control the nature of the build.</span></span>



| <span data-ttu-id="61257-109">Вызов NMAKE</span><span class="sxs-lookup"><span data-stu-id="61257-109">Nmake invocation</span></span>        | <span data-ttu-id="61257-110">Вызов макеалл</span><span class="sxs-lookup"><span data-stu-id="61257-110">Makeall invocation</span></span>          | <span data-ttu-id="61257-111">Действие</span><span class="sxs-lookup"><span data-stu-id="61257-111">Effect</span></span>                       |
|-------------------------|-----------------------------|------------------------------|
| <span data-ttu-id="61257-112">**NMAKE**</span><span class="sxs-lookup"><span data-stu-id="61257-112">**nmake**</span></span>               | <span data-ttu-id="61257-113">**макеалл**</span><span class="sxs-lookup"><span data-stu-id="61257-113">**makeall**</span></span>                 | <span data-ttu-id="61257-114">Скомпилируйте с отладочной информацией.</span><span class="sxs-lookup"><span data-stu-id="61257-114">Compile with debug info.</span></span>     |
| <span data-ttu-id="61257-115">**NMAKE** **отлаживать = 1**</span><span class="sxs-lookup"><span data-stu-id="61257-115">**nmake** **nodebug=1**</span></span> | <span data-ttu-id="61257-116">**макеалл** **"# Debug = 1"**</span><span class="sxs-lookup"><span data-stu-id="61257-116">**makeall** **"nodebug=1"**</span></span> | <span data-ttu-id="61257-117">Компилировать без отладочной информации.</span><span class="sxs-lookup"><span data-stu-id="61257-117">Compile without debug info.</span></span>  |
| <span data-ttu-id="61257-118">профиль **NMAKE** **= 1**</span><span class="sxs-lookup"><span data-stu-id="61257-118">**nmake** **profile=1**</span></span> | <span data-ttu-id="61257-119">**макеалл** **"Profile = 1"**</span><span class="sxs-lookup"><span data-stu-id="61257-119">**makeall** **"profile=1"**</span></span> | <span data-ttu-id="61257-120">Скомпилируйте со сведениями о профилировании.</span><span class="sxs-lookup"><span data-stu-id="61257-120">Compile with profiling info.</span></span> |
| <span data-ttu-id="61257-121">Настройка **NMAKE** **= 1**</span><span class="sxs-lookup"><span data-stu-id="61257-121">**nmake** **tune=1**</span></span>    | <span data-ttu-id="61257-122">**макеалл** **"Настройка = 1"**</span><span class="sxs-lookup"><span data-stu-id="61257-122">**makeall** **"tune=1"**</span></span>    | <span data-ttu-id="61257-123">Со сведениями о тюнере рабочего набора.</span><span class="sxs-lookup"><span data-stu-id="61257-123">With working set tuner info.</span></span> |
| <span data-ttu-id="61257-124">**NMAKE** **Unicode = 1**</span><span class="sxs-lookup"><span data-stu-id="61257-124">**nmake** **unicode=1**</span></span> | <span data-ttu-id="61257-125">**макеалл** **"Unicode = 1"**</span><span class="sxs-lookup"><span data-stu-id="61257-125">**makeall** **"unicode=1"**</span></span> | <span data-ttu-id="61257-126">Скомпилируйте для Юникода.</span><span class="sxs-lookup"><span data-stu-id="61257-126">Compile for Unicode.</span></span>         |
| <span data-ttu-id="61257-127"> **Очистка** NMAKE</span><span class="sxs-lookup"><span data-stu-id="61257-127">**nmake** **clean**</span></span>     | <span data-ttu-id="61257-128">**макеалл** **очистить**</span><span class="sxs-lookup"><span data-stu-id="61257-128">**makeall** **clean**</span></span>       | <span data-ttu-id="61257-129">Удалите временные двоичные файлы.</span><span class="sxs-lookup"><span data-stu-id="61257-129">Delete temporary binaries.</span></span>   |
| <span data-ttu-id="61257-130"> **клеаналл** NMAKE</span><span class="sxs-lookup"><span data-stu-id="61257-130">**nmake** **cleanall**</span></span>  | <span data-ttu-id="61257-131">**макеалл** **клеаналл**</span><span class="sxs-lookup"><span data-stu-id="61257-131">**makeall** **cleanall**</span></span>    | <span data-ttu-id="61257-132">Удалите все созданные файлы.</span><span class="sxs-lookup"><span data-stu-id="61257-132">Delete all generated files.</span></span>  |



 

<span data-ttu-id="61257-133">Для Makeall.bat вызовов необходимо иметь кавычки, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="61257-133">For the Makeall.bat invocations you must have the quotes as shown.</span></span> <span data-ttu-id="61257-134">Параметры **отладки**, **профиля** и **настройки** являются взаимоисключающими: для данной компиляции или ссылки можно использовать только один из них или None.</span><span class="sxs-lookup"><span data-stu-id="61257-134">The **nodebug**, **profile**, and **tune** options are mutually exclusive: you may use only one of them, or none, for a given compilation/link.</span></span> <span data-ttu-id="61257-135">Чтобы скомпилировать образцы для выполнения со строками в Юникоде, используйте параметр **"Unicode = 1"** .</span><span class="sxs-lookup"><span data-stu-id="61257-135">To compile the samples to run with Unicode strings, use the **"unicode=1"** option.</span></span> <span data-ttu-id="61257-136">По умолчанию используется компиляция для поддержки традиционной строки ANSI, так как ее можно запускать в любой 32-разрядной операционной системе Windows.</span><span class="sxs-lookup"><span data-stu-id="61257-136">The default is to compile for the traditional ANSI string support, because you can then run on any 32-bit Windows operating system.</span></span> <span data-ttu-id="61257-137">В Windows Server 2003 и более поздних версиях, а также в Windows 2000 и более поздних версиях можно свободно компилировать и запускать с поддержкой или без Юникода.</span><span class="sxs-lookup"><span data-stu-id="61257-137">You can freely compile and run with or without Unicode on Windows Server 2003 and later, and Windows 2000 and later.</span></span> <span data-ttu-id="61257-138">Имейте в виду, что АППУТИЛ всегда компилируется с теми же параметрами, что и другие примеры кода, которые можно отдельно компилировать.</span><span class="sxs-lookup"><span data-stu-id="61257-138">Be aware that APPUTIL is always compiled with the same options as the other code samples you may be separately compiling.</span></span> <span data-ttu-id="61257-139">Это особенно справедливо для параметра **«Unicode = 1»** .</span><span class="sxs-lookup"><span data-stu-id="61257-139">This is especially true for the **"unicode=1"** option.</span></span>

<span data-ttu-id="61257-140">Вы можете использовать установленную 32-разрядную интегрированную среду разработки (IDE) C++ для построения образцов с помощью предоставленных универсальных файлов Makefile.</span><span class="sxs-lookup"><span data-stu-id="61257-140">You may use an installed 32-bit C++ integrated development environment (IDE) to build the samples using the generic makefiles provided.</span></span> <span data-ttu-id="61257-141">Для этого в интегрированной среде разработки необходимо, чтобы универсальные файлы Makefile обрабатывались как внешние файлы Makefile.</span><span class="sxs-lookup"><span data-stu-id="61257-141">To do so requires that within your IDE you handle the generic makefiles as 'external' makefiles.</span></span> <span data-ttu-id="61257-142">Для указанных файлов Makefile требуется служебная программа make, совместимая с Microsoft NMAKE.</span><span class="sxs-lookup"><span data-stu-id="61257-142">The makefiles provided require a Microsoft NMAKE-compatible make utility.</span></span>

<span data-ttu-id="61257-143">Большинство Ideов C++ могут распознавать эти файлы Makefile как внешние, но все еще предоставляют множество преимуществ Edit-Build-Debug в интегрированной среде разработки.</span><span class="sxs-lookup"><span data-stu-id="61257-143">Most C++ IDEs can recognize these makefiles as external and yet still provide many edit-build-debug benefits of the IDE.</span></span> <span data-ttu-id="61257-144">Например, в Microsoft Visual Studio 97 или более поздней версии можно использовать меню файл открыть рабочую область, чтобы создать рабочую область, открыв копию с соответствующим именем (например, Ексескел. MAK) в образце кода Win32 Makefile.</span><span class="sxs-lookup"><span data-stu-id="61257-144">For example, in Microsoft Visual Studio 97 or later, you can use the File menu Open Workspace choice to produce a workspace by opening an appropriately named copy (for example, Exeskel.mak) of the code sample Win32 makefile.</span></span>

 

 




