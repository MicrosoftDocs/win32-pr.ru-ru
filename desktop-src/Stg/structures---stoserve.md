---
title: Структуры — Стосерве
description: Собумага упаковывает цвет, ширину и координаты пера в структуры ИНКДАТА и сохраняет их в динамически выделенном массиве, который управляется в памяти.
ms.assetid: 25e68c39-5306-4ad6-85dd-a8a5e256abf0
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a9868f38d7915185b8d3511bd1bf6faa9c7a1e1b
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986376"
---
# <a name="structures---stoserve"></a>Структуры — Стосерве

Собумага упаковывает цвет, ширину и координаты пера в структуры **инкдата** и сохраняет их в динамически выделенном массиве, который управляется в памяти.

## <a name="inkdata-structure"></a>Структура ИНКДАТА

Ниже приведены объявления для структуры **инкдата** из paper. H.

``` syntax
// The types of Ink Data.
#define INKTYPE_NONE  0
#define INKTYPE_START 1
#define INKTYPE_DRAW  2
#define INKTYPE_STOP  3

  // The Ink Data structure.
  typedef struct _INKDATA
  {
    SHORT nType;            // Ink Type.
    SHORT nX;               // X-coordinate of ink point.
    SHORT nY;               // Y-coordinate of ink point.
    SHORT nWidth;           // Ink line width in pixels.
    COLORREF crColor;       // Ink color.
  } INKDATA;
```

На динамический массив этих пакетов **инкдата** указывает m \_ паинкдата, член класса реализации [**ипапер**](ipaper-methods.md) . Массив создается в методе **ипапер:: инитпапер** с начальным выделением. Дополнительные сведения см. в описании метода **инитпапер** и закрытой служебной программы Некстслот реализации ЦИМПИПАПЕР в paper. H. Методы [**инкстарт**](inkstart-method.md), [**инкдрав**](inkdraw-method.md)и [**инкстоп**](cguipaper-methods.md) используют некстслот для получения новых слотов в массиве. Массив разворачивается динамически, Некстслот по мере необходимости.

Клиент вызывает метод [**ипапер:: Erase**](ipaper-methods.md) для стирания текущего документа. Этот метод не перераспределяет массив. Он просто помечает все текущие рукописные данные как ИНКТИПЕ \_ None и сбрасывает индекс конца массива данных в нулевое значение.

Клиент вызывает методы [**ипапер:: Lock**](ipaper-methods.md) и **Unlock** для управления владельцем собумаги для рисования. Эти методы предоставляются для организации доступа между несколькими клиентами и рисунками, удерживаемыми в общей содокументе.

## <a name="paper_properties-structure"></a>\_Структура свойств бумаги

Клиент вызывает метод [**ипапер:: resize**](ipaper-methods.md) , чтобы дать сомнение о том, что пользователь изменяет размер текущего прямоугольника рисования. Данные о координатах хранятся в структуре **\_ свойств бумаги** , которая хранится вместе с рукописными данными, когда все бумажные данные хранятся в составном файле.

Ниже приведено объявление **\_ свойств бумаги** из paper. H.

``` syntax
#define PAPER_TITLE_SIZE 64
  typedef struct _PAPER_PROPERTIES
  {
    LONG lInkDataVersion;
    LONG lInkArraySize;
    COLORREF crWinColor;
    RECT WinRect;
    WCHAR wszTitle[PAPER_TITLE_SIZE];
    WCHAR wszAuthor[PAPER_TITLE_SIZE];
    WCHAR wszReserved1[PAPER_TITLE_SIZE];
    WCHAR wszReserved2[PAPER_TITLE_SIZE];
  } PAPER_PROPERTIES;
```

Структура **\_ свойств бумаги** разработана таким образом, чтобы новые форматы данных рукописного ввода можно было добавлять в любое время по мере развития компонента дллпапер. Интерфейс [**ипапер**](ipaper-methods.md) является достаточно общим, чтобы последующая версия компонента дллпапер могла сохранить другой формат рукописного ввода при реализации того же интерфейса **ипапер** . Поскольку методы **ипапер** не зависят от конкретного формата рукописных данных, Новая версия компонента дллпапер, поддерживающая другой формат рукописных данных, может использовать этот же интерфейс.

Свойства бумаги, хранящиеся в составном файле, записывают текущий размер массива рукописных данных. Затем можно выделить правильный размер массива, чтобы разместить данные рукописного ввода, считанные из файла.

В **структуре \_ свойств бумаги** также хранится размер прямоугольника рисунка и цвет окна фона в области бумаги.

Хотя и не используется в  / примерах стосерве **стоклиен** , можно также сохранить заголовок рисунка и имя автора.

Даты создания и даты последнего изменения не включены в эти свойства бумаги, так как интерфейс [**IStorage**](/windows/desktop/api/Objidl/nn-objidl-istorage) , используемый для доступа к составным файлам, управляет этими сведениями.

 

 




