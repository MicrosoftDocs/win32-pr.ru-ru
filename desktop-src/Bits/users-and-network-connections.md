---
title: Пользователи и сетевые подключения
description: Служба BITS передает файлы только в том случае, если владелец задания вошел в систему и установлено сетевое подключение.
ms.assetid: b31fc04f-8fa8-407f-9380-ca6b09589c46
keywords:
- БИТЫ сетевых подключений
- БИТЫ заданий передачи, владение
- БИТЫ задания передачи, владение, учетная запись пользователя
ms.topic: article
ms.date: 10/04/2018
ms.openlocfilehash: 7f841e3bf92004b62f3bbb576f71a45ac6b4a6bc
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104134471"
---
# <a name="users-and-network-connections"></a><span data-ttu-id="3de73-106">Пользователи и сетевые подключения</span><span class="sxs-lookup"><span data-stu-id="3de73-106">Users and Network Connections</span></span>

<span data-ttu-id="3de73-107">Служба BITS передает файлы только в том случае, если владелец задания вошел в систему и установлено сетевое подключение.</span><span class="sxs-lookup"><span data-stu-id="3de73-107">BITS transfers files only when the job owner is logged on and a network connection is established.</span></span> <span data-ttu-id="3de73-108">Служба BITS обрабатывает задание передачи, используя контекст безопасности владельца задания.</span><span class="sxs-lookup"><span data-stu-id="3de73-108">BITS processes the transfer job using the security context of the job owner.</span></span> <span data-ttu-id="3de73-109">Пользователь, создавший задание, считается владельцем задания.</span><span class="sxs-lookup"><span data-stu-id="3de73-109">The user who created the job is considered the owner of the job.</span></span> <span data-ttu-id="3de73-110">Однако пользователь с правами администратора может [**стать владельцем**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-takeownership) задания другого пользователя.</span><span class="sxs-lookup"><span data-stu-id="3de73-110">However, a user with administrator privileges can [**take ownership**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-takeownership) of another user's job.</span></span>

<span data-ttu-id="3de73-111">Служба BITS приостанавливает задание, когда владелец выходит из системы или если сетевое подключение теряется (служба BITS не будет принудительно использовать сетевое подключение).</span><span class="sxs-lookup"><span data-stu-id="3de73-111">BITS suspends a job when the owner logs off or if the network connection is lost (BITS will not force a network connection).</span></span> <span data-ttu-id="3de73-112">Служба BITS возобновляет задание при повторном входе владельца в систему и установлении сетевого подключения.</span><span class="sxs-lookup"><span data-stu-id="3de73-112">BITS resumes the job when the owner logs back on and a network connection is established.</span></span> <span data-ttu-id="3de73-113">После установки сетевого подключения может произойти небольшая задержка, прежде чем служба BITS начнет передачу данных.</span><span class="sxs-lookup"><span data-stu-id="3de73-113">After the network connection is established, a short delay may occur before BITS begins transferring data.</span></span>

<span data-ttu-id="3de73-114">Если сетевое подключение потеряно, все задания, состояние которых равно " [**\_ \_ \_ очередь заданий**](/windows/desktop/api/Bits/ne-bits-bg_job_state) " или **" \_ \_ \_ Передача состояния** задания BG", перемещаются в состояние " **\_ \_ \_ временная \_ Ошибка" состояния задания BG** с кодом ошибки " [ \_ \_ \_ отключена сеть BG](bits-return-values.md) ".</span><span class="sxs-lookup"><span data-stu-id="3de73-114">If the network connection is lost, all jobs whose state is [**BG\_JOB\_STATE\_QUEUED**](/windows/desktop/api/Bits/ne-bits-bg_job_state) or **BG\_JOB\_STATE\_TRANSFERRING** are moved to the **BG\_JOB\_STATE\_TRANSIENT\_ERROR** state with a [BG\_E\_NETWORK\_DISCONNECTED](bits-return-values.md) error code.</span></span> <span data-ttu-id="3de73-115">При установке сетевого подключения все задания в состоянии **задания BG, которые \_ могут \_ \_ \_** включать код ошибки, перемещаются в состояние **задания BG в \_ \_ \_ очереди** .</span><span class="sxs-lookup"><span data-stu-id="3de73-115">When a network connection is established, all jobs in a **BG\_JOB\_STATE\_TRANSIENT\_ERROR** state, which may include any error code, are moved to the **BG\_JOB\_STATE\_QUEUED** state.</span></span>

<span data-ttu-id="3de73-116">Чтобы служба BITS обнаружила, что пользователь вошел в систему, пользователь должен использовать один из следующих параметров интерактивного входа:</span><span class="sxs-lookup"><span data-stu-id="3de73-116">For BITS to detect that a user is logged on, the user must use one of the following interactive logon options:</span></span>

-   <span data-ttu-id="3de73-117">Войдите на экран приветствия.</span><span class="sxs-lookup"><span data-stu-id="3de73-117">Log on through the Welcome screen.</span></span>
-   <span data-ttu-id="3de73-118">Войдите в клиент [службы терминалов](../termserv/terminal-services-portal.md) .</span><span class="sxs-lookup"><span data-stu-id="3de73-118">Log on to a [terminal service](../termserv/terminal-services-portal.md) client.</span></span>
-   <span data-ttu-id="3de73-119">Используйте [быстрое переключение пользователей](../shell/fast-user-switching.md).</span><span class="sxs-lookup"><span data-stu-id="3de73-119">Use [fast user switching](../shell/fast-user-switching.md).</span></span>
-   <span data-ttu-id="3de73-120">Начиная с Windows 10 версии 1607, войдите с другого устройства с помощью удаленной PowerShell.</span><span class="sxs-lookup"><span data-stu-id="3de73-120">Starting with Windows 10, version 1607, log on from another device using Remote Powershell.</span></span> <span data-ttu-id="3de73-121">Дополнительные сведения см. в статье об [управлении удаленными сеансами PowerShell](using-windows-powershell-to-create-bits-transfer-jobs.md) .</span><span class="sxs-lookup"><span data-stu-id="3de73-121">See [To manage PowerShell Remote sessions](using-windows-powershell-to-create-bits-transfer-jobs.md) for details.</span></span>

<span data-ttu-id="3de73-122">Запуск приложения от имени другого пользователя (с помощью команды **runas** ) не является интерактивным входом в систему; Служба BITS не будет выполнять задания, связанные с указанным пользователем.</span><span class="sxs-lookup"><span data-stu-id="3de73-122">Running an application as another user (by using the **RunAs** command) is not an interactive logon; BITS will not run jobs associated with the specified user.</span></span>

<span data-ttu-id="3de73-123">Системные учетные записи LocalSystem, LocalService и NetworkService всегда входят в систему. Поэтому всегда выполняются задания, отправленные службой с помощью этих учетных записей.</span><span class="sxs-lookup"><span data-stu-id="3de73-123">The LocalSystem, LocalService, and NetworkService system accounts are always logged on; therefore, jobs submitted by a service using these accounts always run.</span></span> <span data-ttu-id="3de73-124">Сведения и ограничения по использованию учетных записей служб см. в статье [учетные записи служб и службы BITS](service-accounts-and-bits.md).</span><span class="sxs-lookup"><span data-stu-id="3de73-124">For information and limitations on using service accounts, see [Service Accounts and BITS](service-accounts-and-bits.md).</span></span>

<span data-ttu-id="3de73-125">Владельцы заданий могут предоставить вспомогательный токен для использования в ситуациях, когда для завершения передачи требуется несколько маркеров, например для проверки подлинности с удаленным узлом.</span><span class="sxs-lookup"><span data-stu-id="3de73-125">Job owners can provide a helper token to be used in situations where multiple tokens are needed to complete a transfer, such as for authentication with a remote host.</span></span> <span data-ttu-id="3de73-126">Дополнительные сведения см. в разделе [вспомогательные маркеры для заданий передачи BITS](helper-tokens-for-bits-transfer-jobs.md) .</span><span class="sxs-lookup"><span data-stu-id="3de73-126">See [Helper Tokens for BITS Transfer Jobs](helper-tokens-for-bits-transfer-jobs.md) for details.</span></span> <span data-ttu-id="3de73-127">В более ранних версиях Windows владелец задания должен был иметь права администратора для запуска задания, которое использовало вспомогательный токен.</span><span class="sxs-lookup"><span data-stu-id="3de73-127">In earlier versions of Windows, the job owner effectively had to have administrator privileges to start a job that used a helper token.</span></span> <span data-ttu-id="3de73-128">В Windows 10, версия 1607, теперь владелец задания BITS может задавать вспомогательные маркеры без прав администратора, если у вспомогательного токена нет возможностей администратора.</span><span class="sxs-lookup"><span data-stu-id="3de73-128">In Windows 10, version 1607, it is now possible for a BITS job owner to set helper tokens without being an administrator, as long as the helper token does not have administrator capabilities.</span></span> <span data-ttu-id="3de73-129">Это сокращает уязвимость фоновых средств загрузки или обновления, позволяя им работать под учетной записью NetworkService с меньшими правами, а не под учетной записью с правами администратора.</span><span class="sxs-lookup"><span data-stu-id="3de73-129">This reduces the vulnerability footprint of background download or update tools by enabling them to run under the lower-privileged NetworkService account rather than under an account with administrative privileges.</span></span>

<span data-ttu-id="3de73-130">Пользователи с [ограниченным маркером](../secauthz/restricted-tokens.md) (маркер, содержащий ограничивающие идентификаторы безопасности) не могут создавать или изменять задания.</span><span class="sxs-lookup"><span data-stu-id="3de73-130">Users with a [restricted token](../secauthz/restricted-tokens.md) (a token that contains restricting SIDs) cannot create or modify jobs.</span></span>
 

 