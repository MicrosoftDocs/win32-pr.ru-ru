---
title: Администрирование однорангового кэша
description: Примечание. Начиная с Windows 7, модель однорангового кэширования фоновая интеллектуальная служба передачи (BITS) 3,0 является устаревшей.
ms.assetid: a33a43e5-02f9-4902-ad3a-ec65b0d80520
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 40b3ea1dd19c9aca855ffd73e174dcb3b588a54d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103773910"
---
# <a name="administering-the-peer-cache"></a><span data-ttu-id="2fc51-103">Администрирование однорангового кэша</span><span class="sxs-lookup"><span data-stu-id="2fc51-103">Administering the Peer Cache</span></span>

> [!Note]  
> <span data-ttu-id="2fc51-104">Начиная с Windows 7, модель однорангового кэширования фоновая интеллектуальная служба передачи (BITS) 3,0 является устаревшей.</span><span class="sxs-lookup"><span data-stu-id="2fc51-104">Starting with Windows 7, the Background Intelligent Transfer Service (BITS) 3.0 peer caching model is deprecated.</span></span> <span data-ttu-id="2fc51-105">Если установлена служба BITS 4,0, то модель однорангового кэширования BITS 3,0 недоступна.</span><span class="sxs-lookup"><span data-stu-id="2fc51-105">If BITS 4.0 is installed, the BITS 3.0 peer caching model is unavailable.</span></span>

 

<span data-ttu-id="2fc51-106">Для повышения производительности загрузки служба BITS позволяет скачивать содержимое с одноранговых компьютеров.</span><span class="sxs-lookup"><span data-stu-id="2fc51-106">To improve download performance, BITS lets you download content from peer computers.</span></span> <span data-ttu-id="2fc51-107">Чтобы включить эту функцию, администратор должен включить параметр групповой политики Енаблепиркачинг.</span><span class="sxs-lookup"><span data-stu-id="2fc51-107">To enable this feature, the administrator must enable the EnablePeerCaching group policy setting.</span></span> <span data-ttu-id="2fc51-108">Если параметр включен, узел может скачивать содержимое с одноранговых узлов и передавать содержимое одноранговым узлам.</span><span class="sxs-lookup"><span data-stu-id="2fc51-108">If enabled, the peer can download content from peers and serve content to peers.</span></span> <span data-ttu-id="2fc51-109">Администратор также может использовать параметры политики Дисаблепиркачингклиент и Дисаблепиркачингсервер для предотвращения загрузки содержимого с однорангового узла или для обслуживания содержимого одноранговыми узлами соответственно.</span><span class="sxs-lookup"><span data-stu-id="2fc51-109">The administrator can also use the DisablePeerCachingClient and DisablePeerCachingServer policy settings to prevent downloading content from a peer or serving content to peers, respectively.</span></span>

<span data-ttu-id="2fc51-110">Если параметры групповой политики не настроены, приложение может вызвать метод [**ибитспиркачеадминистратион:: сетконфигуратионфлагс**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-setconfigurationflags) , чтобы задать настройки однорангового кэширования для компьютера.</span><span class="sxs-lookup"><span data-stu-id="2fc51-110">If the group policy settings are not configured, an application can call the [**IBitsPeerCacheAdministration::SetConfigurationFlags**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-setconfigurationflags) method to set the peer caching preference for the computer.</span></span> <span data-ttu-id="2fc51-111">Обратите внимание, что эти настройки переопределяются параметрами групповой политики, если они заданы позже.</span><span class="sxs-lookup"><span data-stu-id="2fc51-111">Note that these preferences are overridden by the group policy settings if they are set later.</span></span> <span data-ttu-id="2fc51-112">Чтобы определить, поддерживает ли компьютер одноранговое кэширование, вызовите метод [**ибитспиркачеадминистратион:: жетконфигуратионфлагс**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-getconfigurationflags) .</span><span class="sxs-lookup"><span data-stu-id="2fc51-112">To determine if the computer enables peer caching, call the [**IBitsPeerCacheAdministration::GetConfigurationFlags**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-getconfigurationflags) method.</span></span>

<span data-ttu-id="2fc51-113">Если включено одноранговое кэширование, BITS будет кэшировать только содержимое задания, если оно явно разрешает кэширование его содержимого.</span><span class="sxs-lookup"><span data-stu-id="2fc51-113">If peer caching is enabled, BITS will only cache the contents of a job if the job explicitly allows its content to be cached.</span></span> <span data-ttu-id="2fc51-114">Служба BITS также будет скачивать содержимое только с однорангового узла, если оно разрешается явным заданием.</span><span class="sxs-lookup"><span data-stu-id="2fc51-114">BITS will also only download content from a peer if the job explicitly allows it.</span></span> <span data-ttu-id="2fc51-115">Чтобы включить одноранговое кэширование для задания, вызовите метод [**IBackgroundCopyJob4:: сетпиркачингфлагс**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibackgroundcopyjob4-setpeercachingflags) .</span><span class="sxs-lookup"><span data-stu-id="2fc51-115">To enable peer caching for a job, call the [**IBackgroundCopyJob4::SetPeerCachingFlags**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibackgroundcopyjob4-setpeercachingflags) method.</span></span>

<span data-ttu-id="2fc51-116">Кроме использования групповая политика или интерфейса [**ибитспиркачеадминистратион**](/windows/desktop/api/Bits3_0/nn-bits3_0-ibitspeercacheadministration) для включения однорангового кэширования, можно также использовать любой из этих методов, чтобы изменить размер кэша по умолчанию и время, в течение которого недоступный файл остается в кэше.</span><span class="sxs-lookup"><span data-stu-id="2fc51-116">In addition to using Group Policy or the [**IBitsPeerCacheAdministration**](/windows/desktop/api/Bits3_0/nn-bits3_0-ibitspeercacheadministration) interface to enable peer caching, you can also use either method to change the default cache size and length of time that a non-accessed file remains in the cache.</span></span> <span data-ttu-id="2fc51-117">Чтобы изменить значения по умолчанию с помощью интерфейса **ибитспиркачеадминистратион** , вызовите методы [**сетмаксимумкачесизе**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-setmaximumcachesize) и [**сетмаксимумконтентаже**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-setmaximumcontentage) .</span><span class="sxs-lookup"><span data-stu-id="2fc51-117">To change the defaults using the **IBitsPeerCacheAdministration** interface, call the [**SetMaximumCacheSize**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-setmaximumcachesize) and [**SetMaximumContentAge**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-setmaximumcontentage) methods.</span></span> <span data-ttu-id="2fc51-118">Так как эти методы задают параметры настройки, они переопределяются параметрами групповой политики.</span><span class="sxs-lookup"><span data-stu-id="2fc51-118">Since these methods set the preference settings, they are overridden by the group policy settings.</span></span>

<span data-ttu-id="2fc51-119">Чтобы получить список одноранговых узлов, от которых BITS будет пытаться загрузить содержимое, вызовите метод [**ибитспиркачеадминистратион:: енумпирс**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-enumpeers) .</span><span class="sxs-lookup"><span data-stu-id="2fc51-119">To list the peers from whom BITS will try to download content, call the [**IBitsPeerCacheAdministration::EnumPeers**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-enumpeers) method.</span></span>

<span data-ttu-id="2fc51-120">Чтобы получить список файлов в кэше, которые будут обслуживаться BITS для одноранговых узлов, вызовите метод [**ибитспиркачеадминистратион:: енумрекордс**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-enumrecords) .</span><span class="sxs-lookup"><span data-stu-id="2fc51-120">To list the files in the cache that BITS will serve to peers, call the [**IBitsPeerCacheAdministration::EnumRecords**](/windows/desktop/api/Bits3_0/nf-bits3_0-ibitspeercacheadministration-enumrecords) method.</span></span>

<span data-ttu-id="2fc51-121">Никогда не нужно управлять одноранговый кэш с точки зрения обнаружения одноранговых узлов или удаления записей кэша.</span><span class="sxs-lookup"><span data-stu-id="2fc51-121">You should never have to manage the peer cache with regards to discovering peers or deleting cache records.</span></span> <span data-ttu-id="2fc51-122">Эта функция была включена в интерфейс [**ибитспиркачеадминистратион**](/windows/desktop/api/Bits3_0/nn-bits3_0-ibitspeercacheadministration) для полноты.</span><span class="sxs-lookup"><span data-stu-id="2fc51-122">This functionality was included in the [**IBitsPeerCacheAdministration**](/windows/desktop/api/Bits3_0/nn-bits3_0-ibitspeercacheadministration) interface for completeness.</span></span>

 

 




