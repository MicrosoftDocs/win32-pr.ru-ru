---
title: Пропускная способность сети
description: Фоновая передача использует только неактивную пропускную способность сети, чтобы сохранить интерактивный интерфейс пользователя с другими сетевыми приложениями, такими как Internet Explorer.
ms.assetid: c0b92a33-7afc-4250-8549-54cc46013239
ms.topic: article
ms.date: 10/09/2018
ms.openlocfilehash: 39a38a0efd5f2caea432fc9d13f7a958b6bcd407
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104070239"
---
# <a name="network-bandwidth"></a><span data-ttu-id="1c56b-103">Пропускная способность сети</span><span class="sxs-lookup"><span data-stu-id="1c56b-103">Network Bandwidth</span></span>

<span data-ttu-id="1c56b-104">Фоновая передача использует только неактивную пропускную способность сети, чтобы сохранить интерактивный интерфейс пользователя с другими сетевыми приложениями, такими как веб-браузеры.</span><span class="sxs-lookup"><span data-stu-id="1c56b-104">Background transfers use only idle network bandwidth in an effort to preserve the user's interactive experience with other network applications such as web browsers.</span></span> <span data-ttu-id="1c56b-105">Служба BITS корректирует использование пропускной способности при увеличении или уменьшении использования пропускной способности пользователем.</span><span class="sxs-lookup"><span data-stu-id="1c56b-105">BITS adjusts its use of the bandwidth as the user increases or decreases their use of the bandwidth.</span></span> <span data-ttu-id="1c56b-106">Обратите внимание, что BITS по-прежнему передает небольшой объем данных во время интенсивного использования сети, чтобы гарантировать выполнение заданий BITS.</span><span class="sxs-lookup"><span data-stu-id="1c56b-106">Note that BITS still transfers a small amount of data during high network use to ensure that BITS jobs make progress.</span></span>

<span data-ttu-id="1c56b-107">Служба BITS отслеживает сетевой трафик на устройстве шлюза Интернета (IGD) или сетевую карту (NIC) клиента и использует только неактивную часть пропускной способности сети.</span><span class="sxs-lookup"><span data-stu-id="1c56b-107">BITS monitors the network traffic at the Internet gateway device (IGD) or the client's network interface card (NIC) and uses only the idle portion of the network bandwidth.</span></span> <span data-ttu-id="1c56b-108">Кроме того, BITS позволяет [LEDBAT](https://blogs.technet.microsoft.com/networking/2018/07/25/ledbat/) подключения по протоколу HTTP для упрощения перегрузки сети.</span><span class="sxs-lookup"><span data-stu-id="1c56b-108">BITS also enables [LEDBAT](https://blogs.technet.microsoft.com/networking/2018/07/25/ledbat/) on HTTP connections to help relieve network congestion.</span></span>

<span data-ttu-id="1c56b-109">Если служба BITS использует сетевой адаптер для измерения трафика и на клиенте не работают сетевые приложения, BITS будет использовать большую часть доступной пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="1c56b-109">If BITS uses the network interface card to measure traffic and there are no network applications running on the client, BITS will consume most of the available bandwidth.</span></span> <span data-ttu-id="1c56b-110">Это не означает, что сеть, выходящая за пределы клиента, бездействует; возможно, сеть имеет полную емкость.</span><span class="sxs-lookup"><span data-stu-id="1c56b-110">This does not mean the network beyond the client is idle; the network might be at full capacity.</span></span>

<span data-ttu-id="1c56b-111">Это может быть вызвано тем, что у клиента есть быстрый сетевой адаптер, но полное подключение к Интернету осуществляется через медленный канал (например, маршрутизатор DSL), так как служба BITS будет конкурировать за полную пропускную способность вместо использования только доступной пропускной способности медленного канала. Служба BITS не имеет видимости сетевого трафика за пределами клиента.</span><span class="sxs-lookup"><span data-stu-id="1c56b-111">This can be an issue if the client has a fast network adapter but the full internet connection is through a slow link (like a DSL router) because BITS will compete for the full bandwidth instead of using only the available bandwidth on the slow link; BITS has no visibility of the network traffic beyond the client.</span></span>

<span data-ttu-id="1c56b-112">Устройство шлюза, поддерживающее счетчики, может устранить эту ошибку, так как BITS измеряет трафик на медленном канале связи и использует пропускную способность соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="1c56b-112">A gateway device that supports counters can eliminate this issue because BITS would measure the traffic on the slow link and use the bandwidth appropriately.</span></span> <span data-ttu-id="1c56b-113">Если устройство не поддерживает счетчики, можно уменьшить влияние этого типа подключения с помощью политики **максинтернетбандвидс** для ограничения пропускной способности, используемой BITS на клиентском компьютере.</span><span class="sxs-lookup"><span data-stu-id="1c56b-113">If the device does not support counters, you can reduce the impact of this type of connection, by using the **MaxInternetBandwidth** policy to limit the bandwidth that BITS uses on the client computer.</span></span> <span data-ttu-id="1c56b-114">Дополнительные сведения см. в разделе [групповые политики](group-policies.md).</span><span class="sxs-lookup"><span data-stu-id="1c56b-114">For details, see [Group Policies](group-policies.md).</span></span>

<span data-ttu-id="1c56b-115">Если компьютер содержит несколько сетевых интерфейсов, таких как модем, виртуальная частная сеть (VPN) и несколько сетевых адаптеров, служба BITS вызывает вспомогательную функцию IP [**жетбестинтерфацеекс**](/windows/desktop/api/iphlpapi/nf-iphlpapi-getbestinterfaceex), чтобы определить интерфейс с лучшим маршрутом к указанному IP-адресу.</span><span class="sxs-lookup"><span data-stu-id="1c56b-115">If the computer contains multiple network interfaces, such as a modem, virtual private network (VPN), and several network interface cards (NIC), BITS calls the IP Helper function, [**GetBestInterfaceEx**](/windows/desktop/api/iphlpapi/nf-iphlpapi-getbestinterfaceex), to determine the interface that has the best route to the specified IP address.</span></span> <span data-ttu-id="1c56b-116">Затем BITS будет отслеживать использование пропускной способности на этом интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="1c56b-116">BITS will then monitor bandwidth usage on that interface.</span></span>

## <a name="using-an-internet-gateway-device-igd-to-determine-usage"></a><span data-ttu-id="1c56b-117">Использование устройства шлюза Интернета (IGD) для определения использования</span><span class="sxs-lookup"><span data-stu-id="1c56b-117">Using an Internet Gateway Device (IGD) to Determine Usage</span></span>

<span data-ttu-id="1c56b-118">Чтобы использовать устройство шлюза, устройство должно поддерживать счетчики байтов (устройство должно отвечать на действия Жеттоталбитессент и Жеттоталбитесрецеивед), а универсальные самонастраивающийся (UPnP) должны быть включены.</span><span class="sxs-lookup"><span data-stu-id="1c56b-118">To use a gateway device, the device must support byte counters (the device must respond to the GetTotalBytesSent and GetTotalBytesReceived actions) and Universal Plug and Play (UPnP) must be enabled.</span></span>

<span data-ttu-id="1c56b-119">Служба BITS будет использовать сетевой адаптер, если:</span><span class="sxs-lookup"><span data-stu-id="1c56b-119">BITS will use the network interface card if:</span></span>

-   <span data-ttu-id="1c56b-120">Устройство шлюза не поддерживает счетчики</span><span class="sxs-lookup"><span data-stu-id="1c56b-120">The gateway device does not support the counters</span></span>
-   <span data-ttu-id="1c56b-121">UPnP не включен</span><span class="sxs-lookup"><span data-stu-id="1c56b-121">UPnP is not enabled</span></span>
-   <span data-ttu-id="1c56b-122">Сервер находится в той же подсети</span><span class="sxs-lookup"><span data-stu-id="1c56b-122">The server is within the same subnet</span></span>
-   <span data-ttu-id="1c56b-123">Устройство шлюза не возвращает данные счетчиков менее 200 тактов.</span><span class="sxs-lookup"><span data-stu-id="1c56b-123">The gateway device does not return the counter data in less than 200 ticks</span></span>

<span data-ttu-id="1c56b-124">Если пользователь использует профиль общедоступной сети, профиль должен разрешить UPnP.</span><span class="sxs-lookup"><span data-stu-id="1c56b-124">If the user uses a public network profile, the profile must allow UPnP.</span></span> <span data-ttu-id="1c56b-125">По умолчанию частные и доменные сетевые профили разрешают UPnP.</span><span class="sxs-lookup"><span data-stu-id="1c56b-125">By default, the private and domain network profiles do allow UPnP.</span></span>

<span data-ttu-id="1c56b-126">Если используется VPN-подключение, служба BITS использует первое устройство, которое возвращает UPnP.</span><span class="sxs-lookup"><span data-stu-id="1c56b-126">If a VPN connection is used, BITS uses the first device that UPnP returns.</span></span>