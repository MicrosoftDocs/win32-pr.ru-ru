---
description: Приложение получает контроллер домена отображения, вызывая функцию Бегинпаинт, GetDC или Жетдцекс и определяя окно, в котором будут отображаться соответствующие выходные данные.
ms.assetid: 8f952d68-ee52-4e63-9f09-80a14c755d31
title: Отображение контекстов устройств
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 41d0eeb3055209ad99a6a50fd129f9f9c064bf52
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103811986"
---
# <a name="display-device-contexts"></a><span data-ttu-id="accaf-103">Отображение контекстов устройств</span><span class="sxs-lookup"><span data-stu-id="accaf-103">Display Device Contexts</span></span>

<span data-ttu-id="accaf-104">Приложение получает контроллер домена отображения, вызывая функцию [**бегинпаинт**](/windows/desktop/api/Winuser/nf-winuser-beginpaint), [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc)или [**жетдцекс**](/windows/desktop/api/Winuser/nf-winuser-getdcex) и определяя окно, в котором будут отображаться соответствующие выходные данные.</span><span class="sxs-lookup"><span data-stu-id="accaf-104">An application obtains a display DC by calling the [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint), [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc), or [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) function and identifying the window in which the corresponding output will appear.</span></span> <span data-ttu-id="accaf-105">Как правило, приложение получает контроллер домена отображения, только если он должен рисовать в клиентской области.</span><span class="sxs-lookup"><span data-stu-id="accaf-105">Typically, an application obtains a display DC only when it must draw in the client area.</span></span> <span data-ttu-id="accaf-106">Тем не менее один [контекст устройства](#window-device-contexts) может получить окно, вызвав функцию [**жетвиндовдк**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc) .</span><span class="sxs-lookup"><span data-stu-id="accaf-106">However, one may obtain a [window device context](#window-device-contexts) by calling the [**GetWindowDC**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc) function.</span></span> <span data-ttu-id="accaf-107">После завершения рисования приложения он должен освободить контроллер домена, вызвав функцию [**ендпаинт**](/windows/desktop/api/Winuser/nf-winuser-endpaint) или [**релеаседк**](/windows/desktop/api/Winuser/nf-winuser-releasedc) .</span><span class="sxs-lookup"><span data-stu-id="accaf-107">When the application is finished drawing, it must release the DC by calling the [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) or [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) function.</span></span>

<span data-ttu-id="accaf-108">Для отображения видео доступно пять типов контроллеров домена:</span><span class="sxs-lookup"><span data-stu-id="accaf-108">There are five types of DCs for video displays:</span></span>

-   <span data-ttu-id="accaf-109">Класс</span><span class="sxs-lookup"><span data-stu-id="accaf-109">Class</span></span>
-   <span data-ttu-id="accaf-110">Распространенные</span><span class="sxs-lookup"><span data-stu-id="accaf-110">Common</span></span>
-   <span data-ttu-id="accaf-111">Личные</span><span class="sxs-lookup"><span data-stu-id="accaf-111">Private</span></span>
-   <span data-ttu-id="accaf-112">Окно</span><span class="sxs-lookup"><span data-stu-id="accaf-112">Window</span></span>
-   <span data-ttu-id="accaf-113">Parent</span><span class="sxs-lookup"><span data-stu-id="accaf-113">Parent</span></span>

## <a name="class-device-contexts"></a><span data-ttu-id="accaf-114">Контексты устройств класса</span><span class="sxs-lookup"><span data-stu-id="accaf-114">Class Device Contexts</span></span>

<span data-ttu-id="accaf-115">*Контексты устройств класса* поддерживаются исключительно для совместимости с 16-разрядными версиями Windows.</span><span class="sxs-lookup"><span data-stu-id="accaf-115">*Class device contexts* are supported strictly for compatibility with 16-bit versions of Windows.</span></span> <span data-ttu-id="accaf-116">При написании приложения Избегайте использования контекста устройства класса; Вместо этого используйте частный контекст устройства.</span><span class="sxs-lookup"><span data-stu-id="accaf-116">When writing your application, avoid using the class device context; use a private device context instead.</span></span>

## <a name="common-device-contexts"></a><span data-ttu-id="accaf-117">Общие контексты устройств</span><span class="sxs-lookup"><span data-stu-id="accaf-117">Common Device Contexts</span></span>

<span data-ttu-id="accaf-118">В *общих контекстах устройств* отображаются контроллеры домена, поддерживаемые системой в специальном кэше.</span><span class="sxs-lookup"><span data-stu-id="accaf-118">*Common device contexts* are display DCs maintained in a special cache by the system.</span></span> <span data-ttu-id="accaf-119">Общие контексты устройств используются в приложениях, выполняющих редкие операции рисования.</span><span class="sxs-lookup"><span data-stu-id="accaf-119">Common device contexts are used in applications that perform infrequent drawing operations.</span></span> <span data-ttu-id="accaf-120">Прежде чем система возвратит маркер контроллера домена, он инициализирует общий контекст устройства с объектами, атрибутами и режимами по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="accaf-120">Before the system returns the DC handle, it initializes the common device context with default objects, attributes, and modes.</span></span> <span data-ttu-id="accaf-121">Любые операции рисования, выполняемые приложением, используют эти значения по умолчанию до тех пор, пока не будет вызвана одна из функций GDI для выбора нового объекта, изменения атрибутов существующего объекта или выбора нового режима.</span><span class="sxs-lookup"><span data-stu-id="accaf-121">Any drawing operations performed by the application use these defaults unless one of the GDI functions is called to select a new object, change the attributes of an existing object, or select a new mode.</span></span>

<span data-ttu-id="accaf-122">Так как существует только ограниченное количество общих контекстов устройств, приложение должно освободить их после завершения рисования.</span><span class="sxs-lookup"><span data-stu-id="accaf-122">Because only a limited number of common device contexts exist, an application should release them after it has finished drawing.</span></span> <span data-ttu-id="accaf-123">Когда приложение освобождает общий контекст устройства, все изменения данных по умолчанию теряются.</span><span class="sxs-lookup"><span data-stu-id="accaf-123">When the application releases a common device context, any changes to the default data are lost.</span></span>

## <a name="private-device-contexts"></a><span data-ttu-id="accaf-124">Частные контексты устройств</span><span class="sxs-lookup"><span data-stu-id="accaf-124">Private Device Contexts</span></span>

<span data-ttu-id="accaf-125">*Частные контексты устройств* отображают контроллеры домена, которые, в отличие от общих контекстов устройств, передают все изменения в данные по умолчанию даже после их освобождения приложением.</span><span class="sxs-lookup"><span data-stu-id="accaf-125">*Private device contexts* are display DCs that, unlike common device contexts, retain any changes to the default data even after an application releases them.</span></span> <span data-ttu-id="accaf-126">Частные контексты устройств используются в приложениях, выполняющих многочисленные операции рисования, такие как приложения для автоматизированного проектирования (САПР), приложения для публикации настольных систем, приложения для рисования и рисования и т. д.</span><span class="sxs-lookup"><span data-stu-id="accaf-126">Private device contexts are used in applications that perform numerous drawing operations such as computer-aided design (CAD) applications, desktop-publishing applications, drawing and painting applications, and so on.</span></span> <span data-ttu-id="accaf-127">Частные контексты устройств не являются частью системного кэша и поэтому не должны освобождаться после использования.</span><span class="sxs-lookup"><span data-stu-id="accaf-127">Private device contexts are not part of the system cache and therefore need not be released after use.</span></span> <span data-ttu-id="accaf-128">Система автоматически удаляет частный контекст устройства после уничтожения последнего окна этого класса.</span><span class="sxs-lookup"><span data-stu-id="accaf-128">The system automatically removes a private device context after the last window of that class has been destroyed.</span></span>

<span data-ttu-id="accaf-129">Приложение создает частный контекст устройства, сначала указывая \_ стиль окна CS овндк, когда он инициализирует элемент **Style** структуры [**Вндкласс**](/windows/win32/api/winuser/ns-winuser-wndclassa) и вызывает функцию [**registerClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) .</span><span class="sxs-lookup"><span data-stu-id="accaf-129">An application creates a private device context by first specifying the CS\_OWNDC window-class style when it initializes the **style** member of the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure and calls the [**RegisterClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) function.</span></span> <span data-ttu-id="accaf-130">(Дополнительные сведения о классах окон см. в разделе [классы окон](../winmsg/window-classes.md).)</span><span class="sxs-lookup"><span data-stu-id="accaf-130">(For more information about window classes, see [Window Classes](../winmsg/window-classes.md).)</span></span>

<span data-ttu-id="accaf-131">После создания окна с использованием стиля CS \_ овндк приложение может вызвать функцию [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc), [**жетдцекс**](/windows/desktop/api/Winuser/nf-winuser-getdcex)или [**бегинпаинт**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) один раз для получения маркера, определяющего частный контекст устройства.</span><span class="sxs-lookup"><span data-stu-id="accaf-131">After creating a window with the CS\_OWNDC style, an application can call the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc), [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex), or [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) function once to obtain a handle identifying a private device context.</span></span> <span data-ttu-id="accaf-132">Приложение может продолжать использовать этот обработчик (и связанный с ним контроллер домена) до тех пор, пока не будет удалено окно, созданное с помощью этого класса.</span><span class="sxs-lookup"><span data-stu-id="accaf-132">The application can continue using this handle (and the associated DC) until it deletes the window created with this class.</span></span> <span data-ttu-id="accaf-133">Любые изменения графических объектов и их атрибутов, а также графические режимы сохраняются системой до тех пор, пока окно не будет удалено.</span><span class="sxs-lookup"><span data-stu-id="accaf-133">Any changes to graphic objects and their attributes, or graphic modes are retained by the system until the window is deleted.</span></span>

## <a name="window-device-contexts"></a><span data-ttu-id="accaf-134">Контексты устройств окна</span><span class="sxs-lookup"><span data-stu-id="accaf-134">Window Device Contexts</span></span>

<span data-ttu-id="accaf-135">*Контекст устройства Window* позволяет приложению рисовать в любом месте окна, включая неклиентскую область.</span><span class="sxs-lookup"><span data-stu-id="accaf-135">A *window device context* enables an application to draw anywhere in a window, including the nonclient area.</span></span> <span data-ttu-id="accaf-136">Контексты устройств окон обычно используются приложениями, которые обрабатывают сообщения [**WM \_ нкпаинт**](wm-ncpaint.md) и [**WM \_ нкактивате**](../winmsg/wm-ncactivate.md) для Windows с пользовательскими неклиентским областями.</span><span class="sxs-lookup"><span data-stu-id="accaf-136">Window device contexts are typically used by applications that process the [**WM\_NCPAINT**](wm-ncpaint.md) and [**WM\_NCACTIVATE**](../winmsg/wm-ncactivate.md) messages for windows with custom nonclient areas.</span></span> <span data-ttu-id="accaf-137">Использование контекста устройства Window не рекомендуется для других целей.</span><span class="sxs-lookup"><span data-stu-id="accaf-137">Using a window device context is not recommended for any other purpose.</span></span> <span data-ttu-id="accaf-138">Для получения дополнительных сведений; см. [**жетвиндовдк**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc).</span><span class="sxs-lookup"><span data-stu-id="accaf-138">For more information; see [**GetWindowDC**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc).</span></span>

## <a name="parent-device-contexts"></a><span data-ttu-id="accaf-139">Контексты родительского устройства</span><span class="sxs-lookup"><span data-stu-id="accaf-139">Parent Device Contexts</span></span>

<span data-ttu-id="accaf-140">*Контекст родительского устройства* позволяет приложению максимально сокращать время, необходимое для настройки области отсечения для окна.</span><span class="sxs-lookup"><span data-stu-id="accaf-140">A *parent device context* enables an application to minimize the time necessary to set up the clipping region for a window.</span></span> <span data-ttu-id="accaf-141">В приложении обычно используются родительские контексты устройств для ускорения рисования окон элементов управления без необходимости использовать частный контекст или контекста устройства класса.</span><span class="sxs-lookup"><span data-stu-id="accaf-141">An application typically uses parent device contexts to speed up drawing for control windows without requiring a private or class device context.</span></span> <span data-ttu-id="accaf-142">Например, система использует родительские контексты устройств для кнопок "Отправить" и "Изменить".</span><span class="sxs-lookup"><span data-stu-id="accaf-142">For example, the system uses parent device contexts for push button and edit controls.</span></span> <span data-ttu-id="accaf-143">Контексты родительских устройств предназначены для использования только с дочерними окнами, но никогда не с окнами верхнего уровня или всплывающих окон.</span><span class="sxs-lookup"><span data-stu-id="accaf-143">Parent device contexts are intended for use with child windows only, never with top-level or pop-up windows.</span></span> <span data-ttu-id="accaf-144">Для получения дополнительных сведений; см. раздел [контексты отображаемого родительского устройства](parent-display-device-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="accaf-144">For more information; see [Parent Display Device Contexts](parent-display-device-contexts.md).</span></span>

 

 
