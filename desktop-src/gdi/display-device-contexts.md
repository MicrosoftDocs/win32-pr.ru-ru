---
description: Приложение получает контроллер домена отображения, вызывая функцию Бегинпаинт, GetDC или Жетдцекс и определяя окно, в котором будут отображаться соответствующие выходные данные.
ms.assetid: 8f952d68-ee52-4e63-9f09-80a14c755d31
title: Отображение контекстов устройств
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 41d0eeb3055209ad99a6a50fd129f9f9c064bf52
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103811986"
---
# <a name="display-device-contexts"></a>Отображение контекстов устройств

Приложение получает контроллер домена отображения, вызывая функцию [**бегинпаинт**](/windows/desktop/api/Winuser/nf-winuser-beginpaint), [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc)или [**жетдцекс**](/windows/desktop/api/Winuser/nf-winuser-getdcex) и определяя окно, в котором будут отображаться соответствующие выходные данные. Как правило, приложение получает контроллер домена отображения, только если он должен рисовать в клиентской области. Тем не менее один [контекст устройства](#window-device-contexts) может получить окно, вызвав функцию [**жетвиндовдк**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc) . После завершения рисования приложения он должен освободить контроллер домена, вызвав функцию [**ендпаинт**](/windows/desktop/api/Winuser/nf-winuser-endpaint) или [**релеаседк**](/windows/desktop/api/Winuser/nf-winuser-releasedc) .

Для отображения видео доступно пять типов контроллеров домена:

-   Класс
-   Распространенные
-   Личные
-   Окно
-   Parent

## <a name="class-device-contexts"></a>Контексты устройств класса

*Контексты устройств класса* поддерживаются исключительно для совместимости с 16-разрядными версиями Windows. При написании приложения Избегайте использования контекста устройства класса; Вместо этого используйте частный контекст устройства.

## <a name="common-device-contexts"></a>Общие контексты устройств

В *общих контекстах устройств* отображаются контроллеры домена, поддерживаемые системой в специальном кэше. Общие контексты устройств используются в приложениях, выполняющих редкие операции рисования. Прежде чем система возвратит маркер контроллера домена, он инициализирует общий контекст устройства с объектами, атрибутами и режимами по умолчанию. Любые операции рисования, выполняемые приложением, используют эти значения по умолчанию до тех пор, пока не будет вызвана одна из функций GDI для выбора нового объекта, изменения атрибутов существующего объекта или выбора нового режима.

Так как существует только ограниченное количество общих контекстов устройств, приложение должно освободить их после завершения рисования. Когда приложение освобождает общий контекст устройства, все изменения данных по умолчанию теряются.

## <a name="private-device-contexts"></a>Частные контексты устройств

*Частные контексты устройств* отображают контроллеры домена, которые, в отличие от общих контекстов устройств, передают все изменения в данные по умолчанию даже после их освобождения приложением. Частные контексты устройств используются в приложениях, выполняющих многочисленные операции рисования, такие как приложения для автоматизированного проектирования (САПР), приложения для публикации настольных систем, приложения для рисования и рисования и т. д. Частные контексты устройств не являются частью системного кэша и поэтому не должны освобождаться после использования. Система автоматически удаляет частный контекст устройства после уничтожения последнего окна этого класса.

Приложение создает частный контекст устройства, сначала указывая \_ стиль окна CS овндк, когда он инициализирует элемент **Style** структуры [**Вндкласс**](/windows/win32/api/winuser/ns-winuser-wndclassa) и вызывает функцию [**registerClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) . (Дополнительные сведения о классах окон см. в разделе [классы окон](../winmsg/window-classes.md).)

После создания окна с использованием стиля CS \_ овндк приложение может вызвать функцию [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc), [**жетдцекс**](/windows/desktop/api/Winuser/nf-winuser-getdcex)или [**бегинпаинт**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) один раз для получения маркера, определяющего частный контекст устройства. Приложение может продолжать использовать этот обработчик (и связанный с ним контроллер домена) до тех пор, пока не будет удалено окно, созданное с помощью этого класса. Любые изменения графических объектов и их атрибутов, а также графические режимы сохраняются системой до тех пор, пока окно не будет удалено.

## <a name="window-device-contexts"></a>Контексты устройств окна

*Контекст устройства Window* позволяет приложению рисовать в любом месте окна, включая неклиентскую область. Контексты устройств окон обычно используются приложениями, которые обрабатывают сообщения [**WM \_ нкпаинт**](wm-ncpaint.md) и [**WM \_ нкактивате**](../winmsg/wm-ncactivate.md) для Windows с пользовательскими неклиентским областями. Использование контекста устройства Window не рекомендуется для других целей. Для получения дополнительных сведений; см. [**жетвиндовдк**](/windows/desktop/api/Winuser/nf-winuser-getwindowdc).

## <a name="parent-device-contexts"></a>Контексты родительского устройства

*Контекст родительского устройства* позволяет приложению максимально сокращать время, необходимое для настройки области отсечения для окна. В приложении обычно используются родительские контексты устройств для ускорения рисования окон элементов управления без необходимости использовать частный контекст или контекста устройства класса. Например, система использует родительские контексты устройств для кнопок "Отправить" и "Изменить". Контексты родительских устройств предназначены для использования только с дочерними окнами, но никогда не с окнами верхнего уровня или всплывающих окон. Для получения дополнительных сведений; см. раздел [контексты отображаемого родительского устройства](parent-display-device-contexts.md).

 

 
