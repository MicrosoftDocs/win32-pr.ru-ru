---
description: Чтобы изменить изображение, хранящееся в расширенном метафайле, приложение должно выполнить задачи, описанные в следующей процедуре.
ms.assetid: 19d9c523-cff8-47e1-bbf2-16d8991dac3b
title: Редактирование расширенного метафайла
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c86dc9cc609d616bf82ae3f0a13d8d63e827e3eb
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104155630"
---
# <a name="editing-an-enhanced-metafile"></a>Редактирование расширенного метафайла

Чтобы изменить изображение, хранящееся в расширенном метафайле, приложение должно выполнить задачи, описанные в следующей процедуре.

**Изменение изображения, хранящегося в расширенном метафайле**

1.  Используйте проверку попадания для захвата координат курсора и получения позиции объекта (линии, дуги, прямоугольника, эллипса, многоугольника или неравномерные фигуры), которую пользователь хочет изменить.
2.  Преобразуйте эти координаты в логические (или в мир) единицы.
3.  Вызовите функцию [**енуменхметафиле**](/windows/desktop/api/Wingdi/nf-wingdi-enumenhmetafile) и изучите каждую запись метафайла.
4.  Определить, соответствует ли заданная запись функции рисования GDI.
5.  Если это так, определите, соответствуют ли координаты, хранящиеся в записи, с линией, дугой, эллипс или другим графическим элементом, пересекающим координаты, заданные пользователем.
6.  При поиске записи, которая соответствует выходным данным, которые пользователь хочет изменить, удалите объект на экране, соответствующий исходной записи.
7.  Удалите соответствующую запись из метафайла, сохранив указатель в его расположении.
8.  Разрешение пользователю перерисовки или замены объекта.
9.  Преобразуйте функции GDI, используемые для рисования нового объекта, в одну или несколько записей расширенных метафайлов.
10. Храните эти записи в расширенном метафайле.

 

 



