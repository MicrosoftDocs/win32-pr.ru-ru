---
description: Чтобы несколько приложений монитораваре работали как в системах с поддержкой нескольких мониторов, так и без нее, свяжите приложение с Мултимон. h.
ms.assetid: 8667305e-ca76-49cb-878e-07814431e6db
title: Несколько мониторных приложений в разных системах
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ec5d470861136ac9362d986b8647c86abee7021b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104984924"
---
# <a name="multiple-monitor-applications-on-different-systems"></a><span data-ttu-id="ac2d3-103">Несколько мониторных приложений в разных системах</span><span class="sxs-lookup"><span data-stu-id="ac2d3-103">Multiple Monitor Applications on Different Systems</span></span>

<span data-ttu-id="ac2d3-104">Чтобы несколько приложений монитораваре работали как в системах с поддержкой нескольких мониторов, так и без нее, свяжите приложение с Мултимон. h.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-104">To have your multiple monitoraware application work both on systems with and without multiple monitor support, link your application with Multimon.h.</span></span> <span data-ttu-id="ac2d3-105">Также необходимо определить \_ \_ заглушки компиляции мултимон в точно одном файле C.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-105">You must also define COMPILE\_MULTIMON\_STUBS in exactly one C file.</span></span> <span data-ttu-id="ac2d3-106">Если система не поддерживает несколько мониторов, она возвращает значения по умолчанию из [**жетсистемметрикс**](/windows/win32/api/winuser/nf-winuser-getsystemmetrics) , а функции нескольких мониторов работают так, как если бы одно отображение.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-106">If the system does not support multiple monitors, this returns default values from [**GetSystemMetrics**](/windows/win32/api/winuser/nf-winuser-getsystemmetrics) , and the multiple monitor functions act as if there is only one display.</span></span> <span data-ttu-id="ac2d3-107">В системах с несколькими мониторами приложение будет работать нормально.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-107">On multiple monitor systems, your application will work normally.</span></span>

<span data-ttu-id="ac2d3-108">Так как отрицательные координаты могут легко происходить в системе с различными мониторами, необходимо получить координаты, Упакованные в lParam, с помощью макросов **Get \_ X \_ lParam** и **Get \_ Y \_ lParam** .</span><span class="sxs-lookup"><span data-stu-id="ac2d3-108">Because negative coordinates can happen easily in a multimonitor system, you should retrieve coordinates that are packed in the lParam by using the **GET\_X\_LPARAM** and **GET\_Y\_LPARAM** macros.</span></span>

<span data-ttu-id="ac2d3-109">Не используйте отрицательные координаты или координаты, превышающие SM \_ кксскрин и SM \_ цискрин, чтобы скрыть окно.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-109">Do not use negative coordinates or coordinates larger than SM\_CXSCREEN and SM\_CYSCREEN to hide a window.</span></span> <span data-ttu-id="ac2d3-110">Окна, которые используют эти ограничения для скрытия, могут отображаться на другом мониторе.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-110">Windows that use these limits to hide may appear on another monitor.</span></span> <span data-ttu-id="ac2d3-111">Точно так же не используйте эти ограничения для отображения окна, так как это может привести к привязке окна к основному монитору.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-111">Likewise, do not use these limits to keep a window visible because this can cause a window to snap to the primary monitor.</span></span> <span data-ttu-id="ac2d3-112">Для этих проблем лучше проанализировать существующие приложения.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-112">It is best to reexamine existing applications for these problems.</span></span> <span data-ttu-id="ac2d3-113">Однако можно избежать проблем в существующих приложениях, запустив приложение на основном мониторе или сохранив основной монитор в левом верхнем углу виртуального экрана.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-113">However, you can minimize problems in existing applications by running the application on the primary monitor or by keeping the primary monitor in the upper-left corner of the virtual screen.</span></span>

<span data-ttu-id="ac2d3-114">Обратите внимание, что SM \_ кксмакстракк и SM \_ цимакстракк определены для настольных систем, а не только для одного монитора.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-114">Note that SM\_CXMAXTRACK and SM\_CYMAXTRACK are defined for the desktop, not just one monitor.</span></span> <span data-ttu-id="ac2d3-115">Может потребоваться переопределение Windows, использующих эти ограничения.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-115">Windows using these limits may need to be redefined.</span></span>

<span data-ttu-id="ac2d3-116">Родительское или связанное окно может находиться не на том же мониторе, что и дочернее окно.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-116">A parent or related window might not be on the same monitor as a child window.</span></span> <span data-ttu-id="ac2d3-117">Чтобы перейти к монитору окна, приложения должны использовать функцию [**мониторфромвиндов**](/windows/desktop/api/Winuser/nf-winuser-monitorfromwindow) .</span><span class="sxs-lookup"><span data-stu-id="ac2d3-117">To locate the monitor of a window, applications should use the [**MonitorFromWindow**](/windows/desktop/api/Winuser/nf-winuser-monitorfromwindow) function.</span></span>

<span data-ttu-id="ac2d3-118">Чтобы экранная заставка отображалась на всех мониторах, свяжите ее с последней версией Скрнсаве. lib.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-118">To have a screen saver display on all monitors, link with the latest version of Scrnsave.lib.</span></span> <span data-ttu-id="ac2d3-119">В противном случае экранная заставка может отображаться только на основном мониторе, а другие мониторы остаются нетронутыми.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-119">Otherwise, the screen saver may only appear on the primary monitor and leave the other monitors untouched.</span></span> <span data-ttu-id="ac2d3-120">Экранные заставки, связанные с последней версией Скрнсаве. lib, будут работать как в одной системе, так и на нескольких мониторах.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-120">Screen savers linked with the latest Scrnsave.lib will work on both single and multiple monitor systems.</span></span> <span data-ttu-id="ac2d3-121">Для использования различных экранных заставок на каждом мониторе используйте функции нескольких мониторов, чтобы отдельно управлять каждым монитором.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-121">To have a different screen saver on each monitor, use the multiple monitor functions to handle each monitor separately.</span></span>

<span data-ttu-id="ac2d3-122">Устройства ввода, которые доставляют координаты в систему в абсолютных координатах, таких как планшеты, имеют ограниченный ввод курсора на основной монитор.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-122">Input devices that deliver coordinates to the system in absolute coordinates, such as tablets, have their cursor input restricted to the primary monitor.</span></span> <span data-ttu-id="ac2d3-123">Чтобы переключить входной планшет между мониторами, ознакомьтесь с инструкциями от изготовителя оборудования.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-123">To switch tablet input between monitors, see the instructions from the OEM.</span></span>

<span data-ttu-id="ac2d3-124">Чтобы связать входные данные мыши, отправленные в абсолютных координатах, ко всему виртуальному экрану, используйте [**входную**](/windows/win32/api/winuser/ns-winuser-input) структуру с маусивентф \_ Absolute и маусивентф \_ виртуалдесктоп.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-124">To map mouse input that is sent in absolute coordinates to the entire virtual screen, use the [**INPUT**](/windows/win32/api/winuser/ns-winuser-input) structure with MOUSEEVENTF\_ABSOLUTE and MOUSEEVENTF\_VIRTUALDESKTOP.</span></span>

<span data-ttu-id="ac2d3-125">Функция [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) хорошо работает для нескольких систем мониторинга.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-125">The [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) function works well for multiple monitor systems.</span></span> <span data-ttu-id="ac2d3-126">Однако функции [**маскблт**](/windows/desktop/api/Wingdi/nf-wingdi-maskblt), [**плгблт**](/windows/desktop/api/Wingdi/nf-wingdi-plgblt), [**стретчблт**](/windows/desktop/api/Wingdi/nf-wingdi-stretchblt)и [**транспарентблт**](/windows/desktop/api/WinGdi/nf-wingdi-transparentblt) завершатся ошибкой, если контексты исходного и конечного устройств отличаются.</span><span class="sxs-lookup"><span data-stu-id="ac2d3-126">However, the [**MaskBlt**](/windows/desktop/api/Wingdi/nf-wingdi-maskblt), [**PlgBlt**](/windows/desktop/api/Wingdi/nf-wingdi-plgblt), [**StretchBlt**](/windows/desktop/api/Wingdi/nf-wingdi-stretchblt), and [**TransparentBlt**](/windows/desktop/api/WinGdi/nf-wingdi-transparentblt) functions will fail if the source and destination device contexts are different.</span></span>

 

 
