---
description: Точечные рисунки, зависящие от устройства (Ддбс), описаны с помощью одной структуры, структурной БИТОВой карты.
ms.assetid: 63ff9cd6-cd07-4085-b166-268e4d9b7aad
title: Device-Dependent растровые изображения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 92a3de2c59509c71b38f9981df330b3b28effa26
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104155643"
---
# <a name="device-dependent-bitmaps"></a><span data-ttu-id="cdafd-103">Device-Dependent растровые изображения</span><span class="sxs-lookup"><span data-stu-id="cdafd-103">Device-Dependent Bitmaps</span></span>

<span data-ttu-id="cdafd-104">Точечные рисунки, зависящие от устройства (Ддбс), описаны с помощью одной структуры, структурной [**битовой карты**](/windows/win32/api/wingdi/ns-wingdi-bitmap) .</span><span class="sxs-lookup"><span data-stu-id="cdafd-104">Device-dependent bitmaps (DDBs) are described by using a single structure, the [**BITMAP**](/windows/win32/api/wingdi/ns-wingdi-bitmap) structure.</span></span> <span data-ttu-id="cdafd-105">Члены этой структуры задают ширину и высоту прямоугольной области в пикселях; ширина массива, которая сопоставляет записи из палитры устройств с пикселями; и цветовой формат устройства с точки зрения цветовых плоскостей и битов на пиксель.</span><span class="sxs-lookup"><span data-stu-id="cdafd-105">The members of this structure specify the width and height of a rectangular region, in pixels; the width of the array that maps entries from the device palette to pixels; and the device's color format, in terms of color planes and bits per pixel.</span></span> <span data-ttu-id="cdafd-106">Приложение может получить цветовой формат устройства, вызвав функцию [**жетдевицекапс**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) и указав соответствующие константы.</span><span class="sxs-lookup"><span data-stu-id="cdafd-106">An application can retrieve the color format of a device by calling the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function and specifying the appropriate constants.</span></span> <span data-ttu-id="cdafd-107">Обратите внимание, что DDB не содержит значений цветов. Вместо этого цвета находятся в формате, зависящем от устройства.</span><span class="sxs-lookup"><span data-stu-id="cdafd-107">Note that a DDB does not contain color values; instead, the colors are in a device-dependent format.</span></span> <span data-ttu-id="cdafd-108">Дополнительные сведения см. [в разделе цвет в точечных рисунках](color-in-bitmaps.md).</span><span class="sxs-lookup"><span data-stu-id="cdafd-108">For more information, see [Color in Bitmaps](color-in-bitmaps.md).</span></span> <span data-ttu-id="cdafd-109">Так как каждое устройство может иметь собственный набор цветов, на другом устройстве может не отображаться свойство DDB, созданное для одного устройства.</span><span class="sxs-lookup"><span data-stu-id="cdafd-109">Because each device can have its own set of colors, a DDB created for one device may not display well on a different device.</span></span>

<span data-ttu-id="cdafd-110">Чтобы использовать DDB в контексте устройства, у него должна быть цветовая организация контекста этого устройства.</span><span class="sxs-lookup"><span data-stu-id="cdafd-110">To use a DDB in a device context, it must have the color organization of that device context.</span></span> <span data-ttu-id="cdafd-111">Таким же показателем, как правило, является *совместимый точечный рисунок* , который обычно имеет более высокую производительность GDI, чем DIB.</span><span class="sxs-lookup"><span data-stu-id="cdafd-111">Thus, a DDB is often called a *compatible bitmap* and it usually has better GDI performance than a DIB.</span></span> <span data-ttu-id="cdafd-112">Например, чтобы создать точечный рисунок для видеопамяти, лучше использовать совместимый точечный рисунок с тем же цветовым форматом, что и основной дисплей.</span><span class="sxs-lookup"><span data-stu-id="cdafd-112">For example, to create a bitmap for video memory, it is best to use a compatible bitmap with the same color format as the primary display.</span></span> <span data-ttu-id="cdafd-113">В видеопамяти отображение изображения в точечный рисунок и отображение его на экране выполняется значительно быстрее, чем на поверхности системной памяти или непосредственно из DIB.</span><span class="sxs-lookup"><span data-stu-id="cdafd-113">Once in video memory, rendering to the bitmap and displaying it to the screen are significantly faster than from a system memory surface or directly from a DIB.</span></span>

<span data-ttu-id="cdafd-114">Помимо повышения производительности GDI, совместимые точечные рисунки используются для записи изображений (см. раздел [запись образа](capturing-an-image.md) ) и создания точечных рисунков во время выполнения для меню см. в разделе "Создание точечного рисунка" раздела (см. раздел [Использование меню](../menurc/using-menus.md) ).</span><span class="sxs-lookup"><span data-stu-id="cdafd-114">In addition to enabling better GDI performance, compatible bitmaps are used to capture images (see [Capturing an Image](capturing-an-image.md) ) and to create bitmaps at run time for menus see "Creating the Bitmap" in (see [Using Menus](../menurc/using-menus.md) ).</span></span>

<span data-ttu-id="cdafd-115">Чтобы перенести точечный рисунок между устройствами с разными цветовыми организациями, используйте [**жетдибитс**](/windows/desktop/api/Wingdi/nf-wingdi-getdibits) для преобразования совместимого точечного рисунка в DIB и вызовите [**сетдибитс**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) или [**стретчдибитс**](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits) , чтобы отобразить DIB на втором устройстве.</span><span class="sxs-lookup"><span data-stu-id="cdafd-115">To transfer a bitmap between devices with different color organization, use [**GetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-getdibits) to convert the compatible bitmap to a DIB and call [**SetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) or [**StretchDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits) to display the DIB to the second device.</span></span>

<span data-ttu-id="cdafd-116">Существует два типа Ддбс: удаленно и не могут быть удалены.</span><span class="sxs-lookup"><span data-stu-id="cdafd-116">There are two types of DDBs: discardable and nondiscardable.</span></span> <span data-ttu-id="cdafd-117">Удаленное значение DDB — это точечный рисунок, который система удаляет, если точечный рисунок не выбран в контроллере домена, а также в случае нехватки системной памяти.</span><span class="sxs-lookup"><span data-stu-id="cdafd-117">A discardable DDB is a bitmap that the system discards if the bitmap is not selected into a DC and if system memory is low.</span></span> <span data-ttu-id="cdafd-118">Функция [**креатедискардаблебитмап**](/windows/desktop/api/Wingdi/nf-wingdi-creatediscardablebitmap) создает отброшенные точечные рисунки.</span><span class="sxs-lookup"><span data-stu-id="cdafd-118">The [**CreateDiscardableBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-creatediscardablebitmap) function creates discardable bitmaps.</span></span> <span data-ttu-id="cdafd-119">Функции [**креатебитмап**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap), [**креатекомпатиблебитмап**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap)и [**креатебитмапиндирект**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect) создают неудаляемые точечные рисунки.</span><span class="sxs-lookup"><span data-stu-id="cdafd-119">The [**CreateBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap), [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap), and [**CreateBitmapIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect) functions create nondiscardable bitmaps.</span></span>

<span data-ttu-id="cdafd-120">Приложение может создать DDB из DIB, инициализируя необходимые структуры и вызывая функцию [**креатедибитмап**](/windows/desktop/api/Wingdi/nf-wingdi-createdibitmap) .</span><span class="sxs-lookup"><span data-stu-id="cdafd-120">An application can create a DDB from a DIB by initializing the required structures and calling the [**CreateDIBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createdibitmap) function.</span></span> <span data-ttu-id="cdafd-121">Указание КБМ \_ init в вызове **креатедибитмап** эквивалентно вызову функции [**креатекомпатиблебитмап**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) для создания DDB в формате устройства и последующего вызова функции [**СЕТДИБИТС**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) для преобразования битов DIB в DDB.</span><span class="sxs-lookup"><span data-stu-id="cdafd-121">Specifying CBM\_INIT in the call to **CreateDIBitmap** is equivalent to calling the [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) function to create a DDB in the format of the device and then calling the [**SetDIBits**](/windows/desktop/api/Wingdi/nf-wingdi-setdibits) function to translate the DIB bits to the DDB.</span></span> <span data-ttu-id="cdafd-122">Чтобы определить, поддерживает ли устройство функцию **сетдибитс** , вызовите функцию [**жетдевицекапс**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) , указав в \_ \_ качестве флага растеркапс битовую карту RC di.</span><span class="sxs-lookup"><span data-stu-id="cdafd-122">To determine whether a device supports the **SetDIBits** function, call the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function, specifying RC\_DI\_BITMAP as the RASTERCAPS flag.</span></span>

 

 
