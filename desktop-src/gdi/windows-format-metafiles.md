---
description: Формат метафайлов Microsoft Windows ограничен в их возможностях и редко используется.
ms.assetid: ebbf871b-cf78-4a90-8f27-e44699c17178
title: Windows-Format метафайлы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6f5d261ed884ebc8836f9bbae43fcb29cd7965d3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104265524"
---
# <a name="windows-format-metafiles"></a><span data-ttu-id="b90d2-103">Windows-Format метафайлы</span><span class="sxs-lookup"><span data-stu-id="b90d2-103">Windows-Format Metafiles</span></span>

<span data-ttu-id="b90d2-104">Формат метафайлов Microsoft Windows ограничен в их возможностях и редко используется.</span><span class="sxs-lookup"><span data-stu-id="b90d2-104">Microsoft Windows-format metafiles are limited in their capabilities and should rarely be used.</span></span> <span data-ttu-id="b90d2-105">Функции формата Windows поддерживаются для обеспечения обратной совместимости с приложениями, написанными для запуска как 16-разрядных приложений на основе Windows.</span><span class="sxs-lookup"><span data-stu-id="b90d2-105">The Windows-format functions are supported to maintain backward compatibility with applications that were written to run as 16 bit Windows-based applications.</span></span> <span data-ttu-id="b90d2-106">Вместо этого следует использовать функции расширенного форматирования.</span><span class="sxs-lookup"><span data-stu-id="b90d2-106">Instead, you should use the enhanced-format functions.</span></span>

<span data-ttu-id="b90d2-107">*Формат Windows-метафайл* используется 16-разрядными приложениями Windows.</span><span class="sxs-lookup"><span data-stu-id="b90d2-107">A *Windows-format metafile* is used by 16-bit Windows-based applications.</span></span> <span data-ttu-id="b90d2-108">Формат состоит из заголовка и массива записей метафайлов.</span><span class="sxs-lookup"><span data-stu-id="b90d2-108">The format consists of a header and an array of metafile records.</span></span>

<span data-ttu-id="b90d2-109">Ниже перечислены ограничения этого формата.</span><span class="sxs-lookup"><span data-stu-id="b90d2-109">The following are the limitations of this format:</span></span>

-   <span data-ttu-id="b90d2-110">Метафайл Windows — это зависящее от приложения и устройства.</span><span class="sxs-lookup"><span data-stu-id="b90d2-110">A Windows-format metafile is application and device dependent.</span></span> <span data-ttu-id="b90d2-111">Изменения в режимах сопоставления приложения или разрешения устройства влияют на внешний вид метафайлов, созданных в этом формате.</span><span class="sxs-lookup"><span data-stu-id="b90d2-111">Changes in the application's mapping modes or the device resolution affect the appearance of metafiles created in this format.</span></span>
-   <span data-ttu-id="b90d2-112">Метафайл Windows-format не содержит исчерпывающий заголовок, описывающий исходные размеры изображения, разрешение устройства, на котором было создано изображение, необязательное текстовое описание или дополнительная палитра.</span><span class="sxs-lookup"><span data-stu-id="b90d2-112">A Windows-format metafile does not contain a comprehensive header that describes the original picture dimensions, the resolution of the device on which the picture was created, an optional text description, or an optional palette.</span></span>
-   <span data-ttu-id="b90d2-113">Метафайл Windows-format не поддерживает новые функции кривой, пути и преобразования.</span><span class="sxs-lookup"><span data-stu-id="b90d2-113">A Windows-format metafile does not support the new curve, path, and transformation functions.</span></span> <span data-ttu-id="b90d2-114">Список поддерживаемых функций см. в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="b90d2-114">See the list of supported functions in the table that follows.</span></span>
-   <span data-ttu-id="b90d2-115">Не удается масштабировать некоторые записи метафайлов формата Windows.</span><span class="sxs-lookup"><span data-stu-id="b90d2-115">Some Windows-format metafile records cannot be scaled.</span></span>
-   <span data-ttu-id="b90d2-116">Не удается выполнить запрос к контексту устройства метафайла, связанному с метафайлом Windows-Format (т. е. приложение не может получить данные разрешения устройства, метрики шрифтов и т. д.).</span><span class="sxs-lookup"><span data-stu-id="b90d2-116">The metafile device context associated with a Windows-format metafile cannot be queried (that is, an application cannot retrieve device-resolution data, font metrics, and so on).</span></span>

<span data-ttu-id="b90d2-117">Ниже приведены единственные функции, поддерживаемые метафайлами Windows.</span><span class="sxs-lookup"><span data-stu-id="b90d2-117">The following are the only functions that are supported by Windows-format metafiles.</span></span>



|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b90d2-118">[](/windows/desktop/api/Wingdi/nf-wingdi-animatepalette)[**Дуга** аниматепалетте](/windows/desktop/api/Wingdi/nf-wingdi-arc)</span><span class="sxs-lookup"><span data-stu-id="b90d2-118">[**AnimatePalette**](/windows/desktop/api/Wingdi/nf-wingdi-animatepalette)[**Arc**](/windows/desktop/api/Wingdi/nf-wingdi-arc)</span></span><br/> [<span data-ttu-id="b90d2-119">**BitBlt**</span><span class="sxs-lookup"><span data-stu-id="b90d2-119">**BitBlt**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-bitblt)<br/> [<span data-ttu-id="b90d2-120">**Хордовая диаграмма**</span><span class="sxs-lookup"><span data-stu-id="b90d2-120">**Chord**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-chord)<br/> [<span data-ttu-id="b90d2-121">**креатебрушиндирект**</span><span class="sxs-lookup"><span data-stu-id="b90d2-121">**CreateBrushIndirect**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-createbrushindirect)<br/> [<span data-ttu-id="b90d2-122">**креатедибпаттернбруш**</span><span class="sxs-lookup"><span data-stu-id="b90d2-122">**CreateDIBPatternBrush**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-createdibpatternbrush)<br/> [<span data-ttu-id="b90d2-123">**CreateFontIndirect**</span><span class="sxs-lookup"><span data-stu-id="b90d2-123">**CreateFontIndirect**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta)<br/> [<span data-ttu-id="b90d2-124">**креатепалетте**</span><span class="sxs-lookup"><span data-stu-id="b90d2-124">**CreatePalette**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-createpalette)<br/> [<span data-ttu-id="b90d2-125">**креатепаттернбруш**</span><span class="sxs-lookup"><span data-stu-id="b90d2-125">**CreatePatternBrush**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-createpatternbrush)<br/> [<span data-ttu-id="b90d2-126">**креатепениндирект**</span><span class="sxs-lookup"><span data-stu-id="b90d2-126">**CreatePenIndirect**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-createpenindirect)<br/> [<span data-ttu-id="b90d2-127">**DeleteObject**</span><span class="sxs-lookup"><span data-stu-id="b90d2-127">**DeleteObject**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-deleteobject)<br/> [<span data-ttu-id="b90d2-128">**Эллипс**</span><span class="sxs-lookup"><span data-stu-id="b90d2-128">**Ellipse**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-ellipse)<br/> [<span data-ttu-id="b90d2-129">**ESCAPE**</span><span class="sxs-lookup"><span data-stu-id="b90d2-129">**Escape**</span></span>](/windows/win32/api/wingdi/nf-wingdi-escape)<br/> [<span data-ttu-id="b90d2-130">**ексклудеклипрект**</span><span class="sxs-lookup"><span data-stu-id="b90d2-130">**ExcludeClipRect**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-excludecliprect)<br/> [<span data-ttu-id="b90d2-131">**екстфлудфилл**</span><span class="sxs-lookup"><span data-stu-id="b90d2-131">**ExtFloodFill**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-extfloodfill)<br/> [<span data-ttu-id="b90d2-132">**ExtTextOut**</span><span class="sxs-lookup"><span data-stu-id="b90d2-132">**ExtTextOut**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-exttextouta)<br/> [<span data-ttu-id="b90d2-133">**филлргн**</span><span class="sxs-lookup"><span data-stu-id="b90d2-133">**FillRgn**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-fillrgn)<br/> [<span data-ttu-id="b90d2-134">**флудфилл**</span><span class="sxs-lookup"><span data-stu-id="b90d2-134">**FloodFill**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-floodfill)<br/> [<span data-ttu-id="b90d2-135">**фрамергн**</span><span class="sxs-lookup"><span data-stu-id="b90d2-135">**FrameRgn**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-framergn)<br/> [<span data-ttu-id="b90d2-136">**интерсектклипрект**</span><span class="sxs-lookup"><span data-stu-id="b90d2-136">**IntersectClipRect**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-intersectcliprect)<br/> [<span data-ttu-id="b90d2-137">**инвертргн**</span><span class="sxs-lookup"><span data-stu-id="b90d2-137">**InvertRgn**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-invertrgn)<br/> | <span data-ttu-id="b90d2-138">[**LineTo**](/windows/desktop/api/Wingdi/nf-wingdi-lineto)[**моветоекс**](/windows/desktop/api/Wingdi/nf-wingdi-movetoex)</span><span class="sxs-lookup"><span data-stu-id="b90d2-138">[**LineTo**](/windows/desktop/api/Wingdi/nf-wingdi-lineto)[**MoveToEx**](/windows/desktop/api/Wingdi/nf-wingdi-movetoex)</span></span><br/> [<span data-ttu-id="b90d2-139">**оффсетклипргн**</span><span class="sxs-lookup"><span data-stu-id="b90d2-139">**OffsetClipRgn**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-offsetcliprgn)<br/> [<span data-ttu-id="b90d2-140">**оффсетвиевпорторжекс**</span><span class="sxs-lookup"><span data-stu-id="b90d2-140">**OffsetViewportOrgEx**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-offsetviewportorgex)<br/> [<span data-ttu-id="b90d2-141">**оффсетвиндоворжекс**</span><span class="sxs-lookup"><span data-stu-id="b90d2-141">**OffsetWindowOrgEx**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-offsetwindoworgex)<br/> [<span data-ttu-id="b90d2-142">**паинтргн**</span><span class="sxs-lookup"><span data-stu-id="b90d2-142">**PaintRgn**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-paintrgn)<br/> [<span data-ttu-id="b90d2-143">**патблт**</span><span class="sxs-lookup"><span data-stu-id="b90d2-143">**PatBlt**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-patblt)<br/> [<span data-ttu-id="b90d2-144">**Круговая**</span><span class="sxs-lookup"><span data-stu-id="b90d2-144">**Pie**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-pie)<br/> [<span data-ttu-id="b90d2-145">**Многоугольник**</span><span class="sxs-lookup"><span data-stu-id="b90d2-145">**Polygon**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-polygon)<br/> [<span data-ttu-id="b90d2-146">**Линию**</span><span class="sxs-lookup"><span data-stu-id="b90d2-146">**Polyline**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-polyline)<br/> [<span data-ttu-id="b90d2-147">**Многоугольник**</span><span class="sxs-lookup"><span data-stu-id="b90d2-147">**PolyPolygon**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-polypolygon)<br/> [<span data-ttu-id="b90d2-148">**реализепалетте**</span><span class="sxs-lookup"><span data-stu-id="b90d2-148">**RealizePalette**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette)<br/> [<span data-ttu-id="b90d2-149">**Углами**</span><span class="sxs-lookup"><span data-stu-id="b90d2-149">**Rectangle**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-rectangle)<br/> [<span data-ttu-id="b90d2-150">**ресизепалетте**</span><span class="sxs-lookup"><span data-stu-id="b90d2-150">**ResizePalette**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-resizepalette)<br/> [<span data-ttu-id="b90d2-151">**ресторедк**</span><span class="sxs-lookup"><span data-stu-id="b90d2-151">**RestoreDC**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-restoredc)<br/> [<span data-ttu-id="b90d2-152">**раундрект**</span><span class="sxs-lookup"><span data-stu-id="b90d2-152">**RoundRect**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-roundrect)<br/> [<span data-ttu-id="b90d2-153">**саведк**</span><span class="sxs-lookup"><span data-stu-id="b90d2-153">**SaveDC**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-savedc)<br/> [<span data-ttu-id="b90d2-154">**скалевиевпортекстекс**</span><span class="sxs-lookup"><span data-stu-id="b90d2-154">**ScaleViewportExtEx**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-scaleviewportextex)<br/> [<span data-ttu-id="b90d2-155">**скалевиндовекстекс**</span><span class="sxs-lookup"><span data-stu-id="b90d2-155">**ScaleWindowExtEx**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-scalewindowextex)<br/> [<span data-ttu-id="b90d2-156">**селектклипргн**</span><span class="sxs-lookup"><span data-stu-id="b90d2-156">**SelectClipRgn**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-selectcliprgn)<br/> [<span data-ttu-id="b90d2-157">**Функцию**</span><span class="sxs-lookup"><span data-stu-id="b90d2-157">**SelectObject**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-selectobject)<br/> | <span data-ttu-id="b90d2-158">[**Селектпалетте**](/windows/desktop/api/Wingdi/nf-wingdi-selectpalette)[**сетбкколор**](/windows/desktop/api/Wingdi/nf-wingdi-setbkcolor)</span><span class="sxs-lookup"><span data-stu-id="b90d2-158">[**SelectPalette**](/windows/desktop/api/Wingdi/nf-wingdi-selectpalette)[**SetBkColor**](/windows/desktop/api/Wingdi/nf-wingdi-setbkcolor)</span></span><br/> [<span data-ttu-id="b90d2-159">**сетбкмоде**</span><span class="sxs-lookup"><span data-stu-id="b90d2-159">**SetBkMode**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-setbkmode)<br/> [<span data-ttu-id="b90d2-160">**сетдибитстодевице**</span><span class="sxs-lookup"><span data-stu-id="b90d2-160">**SetDIBitsToDevice**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-setdibitstodevice)<br/> [<span data-ttu-id="b90d2-161">**сетмапмоде**</span><span class="sxs-lookup"><span data-stu-id="b90d2-161">**SetMapMode**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-setmapmode)<br/> [<span data-ttu-id="b90d2-162">**сетмапперфлагс**</span><span class="sxs-lookup"><span data-stu-id="b90d2-162">**SetMapperFlags**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-setmapperflags)<br/> [<span data-ttu-id="b90d2-163">**сетпалеттинтриес**</span><span class="sxs-lookup"><span data-stu-id="b90d2-163">**SetPaletteEntries**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-setpaletteentries)<br/> [<span data-ttu-id="b90d2-164">**SetPixel**</span><span class="sxs-lookup"><span data-stu-id="b90d2-164">**SetPixel**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-setpixel)<br/> [<span data-ttu-id="b90d2-165">**сетполифиллмоде**</span><span class="sxs-lookup"><span data-stu-id="b90d2-165">**SetPolyFillMode**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-setpolyfillmode)<br/> [<span data-ttu-id="b90d2-166">**SetROP2**</span><span class="sxs-lookup"><span data-stu-id="b90d2-166">**SetROP2**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-setrop2)<br/> [<span data-ttu-id="b90d2-167">**сетстретчблтмоде**</span><span class="sxs-lookup"><span data-stu-id="b90d2-167">**SetStretchBltMode**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-setstretchbltmode)<br/> [<span data-ttu-id="b90d2-168">**сеттексталигн**</span><span class="sxs-lookup"><span data-stu-id="b90d2-168">**SetTextAlign**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-settextalign)<br/> [<span data-ttu-id="b90d2-169">**сеттекстчарактерекстра**</span><span class="sxs-lookup"><span data-stu-id="b90d2-169">**SetTextCharacterExtra**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-settextcharacterextra)<br/> [<span data-ttu-id="b90d2-170">**сеттекстколор**</span><span class="sxs-lookup"><span data-stu-id="b90d2-170">**SetTextColor**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-settextcolor)<br/> [<span data-ttu-id="b90d2-171">**сеттекстжустификатион**</span><span class="sxs-lookup"><span data-stu-id="b90d2-171">**SetTextJustification**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-settextjustification)<br/> [<span data-ttu-id="b90d2-172">**сетвиевпорторжекс**</span><span class="sxs-lookup"><span data-stu-id="b90d2-172">**SetViewportOrgEx**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-setviewportorgex)<br/> [<span data-ttu-id="b90d2-173">**сетвиндовекстекс**</span><span class="sxs-lookup"><span data-stu-id="b90d2-173">**SetWindowExtEx**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-setwindowextex)<br/> [<span data-ttu-id="b90d2-174">**сетвиндоворжекс**</span><span class="sxs-lookup"><span data-stu-id="b90d2-174">**SetWindowOrgEx**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-setwindoworgex)<br/> [<span data-ttu-id="b90d2-175">**стретчблт**</span><span class="sxs-lookup"><span data-stu-id="b90d2-175">**StretchBlt**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-stretchblt)<br/> [<span data-ttu-id="b90d2-176">**стретчдибитс**</span><span class="sxs-lookup"><span data-stu-id="b90d2-176">**StretchDIBits**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-stretchdibits)<br/> [<span data-ttu-id="b90d2-177">**TextOut**</span><span class="sxs-lookup"><span data-stu-id="b90d2-177">**TextOut**</span></span>](/windows/desktop/api/Wingdi/nf-wingdi-textouta)<br/> |



 

<span data-ttu-id="b90d2-178">Чтобы преобразовать метафайл Windows в расширенный формат, вызовите функцию [**жетметафилебитсекс**](/windows/desktop/api/Wingdi/nf-wingdi-getmetafilebitsex) для получения данных из метафайла Windows-Format, а затем вызовите функцию [**сетвинметафилебитс**](/windows/desktop/api/Wingdi/nf-wingdi-setwinmetafilebits) для преобразования этих данных в метафайл расширенного формата.</span><span class="sxs-lookup"><span data-stu-id="b90d2-178">To convert a Windows-format metafile to an enhanced-format metafile, call the [**GetMetaFileBitsEx**](/windows/desktop/api/Wingdi/nf-wingdi-getmetafilebitsex) function to retrieve the data from the Windows-format metafile and then call the [**SetWinMetaFileBits**](/windows/desktop/api/Wingdi/nf-wingdi-setwinmetafilebits) function to convert this data into an enhanced-format metafile.</span></span> <span data-ttu-id="b90d2-179">Чтобы преобразовать запись расширенного формата в запись формата Windows, вызовите функцию [**жетвинметафилебитс**](/windows/desktop/api/Wingdi/nf-wingdi-getwinmetafilebits) .</span><span class="sxs-lookup"><span data-stu-id="b90d2-179">To convert an enhanced-format record into a Windows-format record, call the [**GetWinMetaFileBits**](/windows/desktop/api/Wingdi/nf-wingdi-getwinmetafilebits) function.</span></span>

 

 
