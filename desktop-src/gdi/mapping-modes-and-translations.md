---
description: Режимы сопоставления описаны в следующей таблице.
ms.assetid: 02bc45d1-2921-48bc-a066-2314765b6531
title: Режимы сопоставления и переводы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 219bfe2f587ef9bc66f53d6f08404a0448180512
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104263671"
---
# <a name="mapping-modes-and-translations"></a><span data-ttu-id="65858-103">Режимы сопоставления и переводы</span><span class="sxs-lookup"><span data-stu-id="65858-103">Mapping Modes and Translations</span></span>

<span data-ttu-id="65858-104">Режимы сопоставления описаны в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="65858-104">The mapping modes are described in the following table.</span></span>



| <span data-ttu-id="65858-105">Режим сопоставления</span><span class="sxs-lookup"><span data-stu-id="65858-105">Mapping mode</span></span>    | <span data-ttu-id="65858-106">Описание</span><span class="sxs-lookup"><span data-stu-id="65858-106">Description</span></span>                                                                                                                                                                                                                                                                                                                |
|-----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="65858-107">ММ \_ анизотропная</span><span class="sxs-lookup"><span data-stu-id="65858-107">MM\_ANISOTROPIC</span></span> | <span data-ttu-id="65858-108">Каждая единица в пространстве страницы сопоставляется с заданной приложением единицей в пространстве устройства.</span><span class="sxs-lookup"><span data-stu-id="65858-108">Each unit in page space is mapped to an application-specified unit in device space.</span></span> <span data-ttu-id="65858-109">Ось может быть равномерно масштабирована (например, круг, рисуемый в мировом пространстве, может выглядеть эллипсом при отображении на конкретном устройстве).</span><span class="sxs-lookup"><span data-stu-id="65858-109">The axis may or may not be equally scaled (for example, a circle drawn in world space may appear to be an ellipse when depicted on a given device).</span></span> <span data-ttu-id="65858-110">Ориентация оси также определяется приложением.</span><span class="sxs-lookup"><span data-stu-id="65858-110">The orientation of the axis is also specified by the application.</span></span>                  |
| <span data-ttu-id="65858-111">\_ХИЕНГЛИШ мм</span><span class="sxs-lookup"><span data-stu-id="65858-111">MM\_HIENGLISH</span></span>   | <span data-ttu-id="65858-112">Каждая единица в пространстве страницы сопоставляется с 0,001 дюйма в пространстве устройства.</span><span class="sxs-lookup"><span data-stu-id="65858-112">Each unit in page space is mapped to 0.001 inch in device space.</span></span> <span data-ttu-id="65858-113">Значение x увеличивается слева направо.</span><span class="sxs-lookup"><span data-stu-id="65858-113">The value of x increases from left to right.</span></span> <span data-ttu-id="65858-114">Значение y увеличивается от нижнего к верхнему.</span><span class="sxs-lookup"><span data-stu-id="65858-114">The value of y increases from bottom to top.</span></span>                                                                                                                                                                 |
| <span data-ttu-id="65858-115">\_HIMETRIC мм</span><span class="sxs-lookup"><span data-stu-id="65858-115">MM\_HIMETRIC</span></span>    | <span data-ttu-id="65858-116">Каждая единица в пространстве страницы сопоставляется с 0,01 миллиметра в пространстве устройства.</span><span class="sxs-lookup"><span data-stu-id="65858-116">Each unit in page space is mapped to 0.01 millimeter in device space.</span></span> <span data-ttu-id="65858-117">Значение x увеличивается слева направо.</span><span class="sxs-lookup"><span data-stu-id="65858-117">The value of x increases from left to right.</span></span> <span data-ttu-id="65858-118">Значение y увеличивается от нижнего к верхнему.</span><span class="sxs-lookup"><span data-stu-id="65858-118">The value of y increases from bottom to top.</span></span>                                                                                                                                                            |
| <span data-ttu-id="65858-119">\_ИСОТРОПИК мм</span><span class="sxs-lookup"><span data-stu-id="65858-119">MM\_ISOTROPIC</span></span>   | <span data-ttu-id="65858-120">Каждая единица в пространстве страницы сопоставляется с определяемой приложением единицей в пространстве устройства.</span><span class="sxs-lookup"><span data-stu-id="65858-120">Each unit in page space is mapped to an application-defined unit in device space.</span></span> <span data-ttu-id="65858-121">Оси всегда равномерно масштабируются.</span><span class="sxs-lookup"><span data-stu-id="65858-121">The axes are always equally scaled.</span></span> <span data-ttu-id="65858-122">Ориентация осей может быть задана приложением.</span><span class="sxs-lookup"><span data-stu-id="65858-122">The orientation of the axes may be specified by the application.</span></span>                                                                                                                                     |
| <span data-ttu-id="65858-123">\_ЛОЕНГЛИШ мм</span><span class="sxs-lookup"><span data-stu-id="65858-123">MM\_LOENGLISH</span></span>   | <span data-ttu-id="65858-124">Каждая единица в пространстве страницы сопоставляется с 0,01 дюйма в пространстве устройства.</span><span class="sxs-lookup"><span data-stu-id="65858-124">Each unit in page space is mapped to 0.01 inch in device space.</span></span> <span data-ttu-id="65858-125">Значение x увеличивается слева направо.</span><span class="sxs-lookup"><span data-stu-id="65858-125">The value of x increases from left to right.</span></span> <span data-ttu-id="65858-126">Значение y увеличивается от нижнего к верхнему.</span><span class="sxs-lookup"><span data-stu-id="65858-126">The value of y increases from bottom to top.</span></span>                                                                                                                                                                  |
| <span data-ttu-id="65858-127">\_ЛОМЕТРИК мм</span><span class="sxs-lookup"><span data-stu-id="65858-127">MM\_LOMETRIC</span></span>    | <span data-ttu-id="65858-128">Каждая единица в пространстве страницы сопоставляется с 0,1 миллиметра в пространстве устройства.</span><span class="sxs-lookup"><span data-stu-id="65858-128">Each unit in page space is mapped to 0.1 millimeter in device space.</span></span> <span data-ttu-id="65858-129">Значение x увеличивается слева направо.</span><span class="sxs-lookup"><span data-stu-id="65858-129">The value of x increases from left to right.</span></span> <span data-ttu-id="65858-130">Значение y увеличивается от нижнего к верхнему.</span><span class="sxs-lookup"><span data-stu-id="65858-130">The value of y increases from bottom to top.</span></span>                                                                                                                                                             |
| <span data-ttu-id="65858-131">ММ, \_ текст</span><span class="sxs-lookup"><span data-stu-id="65858-131">MM\_TEXT</span></span>        | <span data-ttu-id="65858-132">Каждая единица в пространстве страницы сопоставляется с одним пикселем; то есть масштабирование не выполняется.</span><span class="sxs-lookup"><span data-stu-id="65858-132">Each unit in page space is mapped to one pixel; that is, no scaling is performed at all.</span></span> <span data-ttu-id="65858-133">Если перевод не действует (по умолчанию), пространство страницы в \_ режиме сопоставления текста mm эквивалентно физическому пространству устройства.</span><span class="sxs-lookup"><span data-stu-id="65858-133">When no translation is in effect (this is the default), page space in the MM\_TEXT mapping mode is equivalent to physical device space.</span></span> <span data-ttu-id="65858-134">Значение x увеличивается слева направо.</span><span class="sxs-lookup"><span data-stu-id="65858-134">The value of x increases from left to right.</span></span> <span data-ttu-id="65858-135">Значение y увеличивается сверху вниз.</span><span class="sxs-lookup"><span data-stu-id="65858-135">The value of y increases from top to bottom.</span></span> |
| <span data-ttu-id="65858-136">ММ \_ твипов</span><span class="sxs-lookup"><span data-stu-id="65858-136">MM\_TWIPS</span></span>       | <span data-ttu-id="65858-137">Каждая единица в пространстве страницы сопоставлена одной двадцати точки принтера (1/1440 дюйма).</span><span class="sxs-lookup"><span data-stu-id="65858-137">Each unit in page space is mapped to one twentieth of a printer's point (1/1440 inch).</span></span> <span data-ttu-id="65858-138">Значение x увеличивается слева направо.</span><span class="sxs-lookup"><span data-stu-id="65858-138">The value of x increases from left to right.</span></span> <span data-ttu-id="65858-139">Значение y увеличивается от нижнего к верхнему.</span><span class="sxs-lookup"><span data-stu-id="65858-139">The value of y increases from bottom to top.</span></span>                                                                                                                                           |



 

<span data-ttu-id="65858-140">Чтобы задать режим сопоставления, вызовите функцию [**сетмапмоде**](/windows/desktop/api/Wingdi/nf-wingdi-setmapmode) .</span><span class="sxs-lookup"><span data-stu-id="65858-140">To set a mapping mode, call the [**SetMapMode**](/windows/desktop/api/Wingdi/nf-wingdi-setmapmode) function.</span></span> <span data-ttu-id="65858-141">Получите текущий режим сопоставления контроллера домена, вызвав функцию [**жетмапмоде**](/windows/desktop/api/Wingdi/nf-wingdi-getmapmode) .</span><span class="sxs-lookup"><span data-stu-id="65858-141">Retrieve the current mapping mode for a DC by calling the [**GetMapMode**](/windows/desktop/api/Wingdi/nf-wingdi-getmapmode) function.</span></span>

<span data-ttu-id="65858-142">Преобразование «страница-место» для преобразования «место на устройстве» состоит из значений, вычисленных на основе точек, заданных в окне и области просмотра.</span><span class="sxs-lookup"><span data-stu-id="65858-142">The page-space to device-space transformations consist of values calculated from the points given by the window and viewport.</span></span> <span data-ttu-id="65858-143">В этом контексте окно относится к логической системе координат пространства страницы, а область просмотра — к системе координат устройства.</span><span class="sxs-lookup"><span data-stu-id="65858-143">In this context, the window refers to the logical coordinate system of the page space, while the viewport refers to the device coordinate system of the device space.</span></span> <span data-ttu-id="65858-144">Окно и область просмотра состоят из источника, горизонтального («х») экстента и вертикального («y»)).</span><span class="sxs-lookup"><span data-stu-id="65858-144">The window and viewport each consist of an origin, a horizontal ("x") extent, and a vertical ("y") extent).</span></span> <span data-ttu-id="65858-145">Параметры окна расположены в логических координатах. окно просмотра в координатах устройства (в пикселях).</span><span class="sxs-lookup"><span data-stu-id="65858-145">The window parameters are in logical coordinates; the viewport in device coordinates (pixels).</span></span> <span data-ttu-id="65858-146">Система объединяет исходные значения и экстенты из окна и окна просмотра для создания преобразования.</span><span class="sxs-lookup"><span data-stu-id="65858-146">The system combines the origins and extents from both the window and viewport to create the transformation.</span></span> <span data-ttu-id="65858-147">Это означает, что каждое окно и область просмотра задают половину факторов, необходимых для определения преобразования, используемого для распределения точек на странице в пространстве на устройстве.</span><span class="sxs-lookup"><span data-stu-id="65858-147">This means that the window and viewport each specify half of the factors needed to define the transformation used to map points in page space to device space.</span></span> <span data-ttu-id="65858-148">Таким образом, система сопоставляет исходное окно с исходным окном просмотра и экстентами окна с экстентами области просмотра, как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="65858-148">Thus, the system maps the window origin to the viewport origin and the window extents to the viewport extents, as shown in the following illustration.</span></span>

![Иллюстрация, демонстрирующая происхождение окна в пространстве страницы и точку зрения в пространстве устройства](images/cstrn-15.png)

<span data-ttu-id="65858-150">Область окна и окно просмотра устанавливают отношение или коэффициент масштабирования, используемый в пространстве между страницами и преобразованиями пространства на устройстве.</span><span class="sxs-lookup"><span data-stu-id="65858-150">The window and viewport extents establish a ratio or scaling factor used in the page-space to device-space transformations.</span></span> <span data-ttu-id="65858-151">Для шести стандартных режимов сопоставления (MM \_ хиенглиш, mm \_ ЛОЕНГЛИШ, mm \_ HIMETRIC, MM \_ лометрик, mm \_ Text и мм \_ твипов) экстенты задаются системой при вызове [**сетмапмоде**](/windows/desktop/api/Wingdi/nf-wingdi-setmapmode) .</span><span class="sxs-lookup"><span data-stu-id="65858-151">For the six predefined mapping modes (MM\_HIENGLISH, MM\_LOENGLISH, MM\_HIMETRIC, MM\_LOMETRIC, MM\_TEXT, and MM\_TWIPS), the extents are set by the system when [**SetMapMode**](/windows/desktop/api/Wingdi/nf-wingdi-setmapmode) is called.</span></span> <span data-ttu-id="65858-152">Их нельзя изменить.</span><span class="sxs-lookup"><span data-stu-id="65858-152">They cannot be changed.</span></span> <span data-ttu-id="65858-153">В двух других режимах сопоставления (в параметре MM \_ исотропик и в \_ анизотропии) необходимо указать экстенты.</span><span class="sxs-lookup"><span data-stu-id="65858-153">The other two mapping modes (MM\_ISOTROPIC and MM\_ANISOTROPIC) require that the extents are specified.</span></span> <span data-ttu-id="65858-154">Это делается путем вызова **сетмапмоде** для установки соответствующего режима и последующего вызова функций [**сетвиндовекстекс**](/windows/desktop/api/Wingdi/nf-wingdi-setwindowextex) и [**сетвиевпортекстекс**](/windows/desktop/api/Wingdi/nf-wingdi-setviewportextex) для указания экстентов.</span><span class="sxs-lookup"><span data-stu-id="65858-154">This is done by calling **SetMapMode** to set the appropriate mode and then calling the [**SetWindowExtEx**](/windows/desktop/api/Wingdi/nf-wingdi-setwindowextex) and [**SetViewportExtEx**](/windows/desktop/api/Wingdi/nf-wingdi-setviewportextex) functions to specify the extents.</span></span> <span data-ttu-id="65858-155">В \_ режиме СОПОСТАВЛЕНИЯ mm исотропик важно вызвать метод **сетвиндовекстекс** перед вызовом **сетвиевпортекстекс**.</span><span class="sxs-lookup"><span data-stu-id="65858-155">In the MM\_ISOTROPIC mapping mode, it is important to call **SetWindowExtEx** before calling **SetViewportExtEx**.</span></span>

<span data-ttu-id="65858-156">Исходные окна и окно просмотра устанавливают преобразование, используемое в пространстве между страницами, в преобразования пространства на устройстве.</span><span class="sxs-lookup"><span data-stu-id="65858-156">The window and viewport origins establish the translation used in the page-space to device-space transformations.</span></span> <span data-ttu-id="65858-157">Задайте начальные значения окон и окна просмотра с помощью функций [**сетвиндоворжекс**](/windows/desktop/api/Wingdi/nf-wingdi-setwindoworgex) и [**сетвиевпорторжекс**](/windows/desktop/api/Wingdi/nf-wingdi-setviewportorgex) .</span><span class="sxs-lookup"><span data-stu-id="65858-157">Set the window and viewport origins by using the [**SetWindowOrgEx**](/windows/desktop/api/Wingdi/nf-wingdi-setwindoworgex) and [**SetViewportOrgEx**](/windows/desktop/api/Wingdi/nf-wingdi-setviewportorgex) functions.</span></span> <span data-ttu-id="65858-158">Источники не зависят от экстентов, и приложение может задать их независимо от текущего режима сопоставления.</span><span class="sxs-lookup"><span data-stu-id="65858-158">The origins are independent of the extents, and an application can set them regardless of the current mapping mode.</span></span> <span data-ttu-id="65858-159">Изменение режима сопоставления не влияет на текущие исходные значения (хотя это может повлиять на экстенты).</span><span class="sxs-lookup"><span data-stu-id="65858-159">Changing a mapping mode does not affect the currently set origins (although it can affect the extents).</span></span> <span data-ttu-id="65858-160">Источники указываются в абсолютных единицах, которые не влияют на текущий режим сопоставления.</span><span class="sxs-lookup"><span data-stu-id="65858-160">Origins are specified in absolute units that the current mapping mode does not affect.</span></span> <span data-ttu-id="65858-161">Чтобы изменить источники, используйте функции [**оффсетвиндоворжекс**](/windows/desktop/api/Wingdi/nf-wingdi-offsetwindoworgex) и [**оффсетвиевпорторжекс**](/windows/desktop/api/Wingdi/nf-wingdi-offsetviewportorgex) .</span><span class="sxs-lookup"><span data-stu-id="65858-161">To alter the origins, use the [**OffsetWindowOrgEx**](/windows/desktop/api/Wingdi/nf-wingdi-offsetwindoworgex) and [**OffsetViewportOrgEx**](/windows/desktop/api/Wingdi/nf-wingdi-offsetviewportorgex) functions.</span></span>

<span data-ttu-id="65858-162">В следующей формуле показана формула, связанная с преобразованием точки из места на странице в пространство устройства.</span><span class="sxs-lookup"><span data-stu-id="65858-162">The following formula shows the math involved in converting a point from page space to device space.</span></span>

``` syntax
Dx = ((Lx - WOx) * VEx / WEx) + VOx 
```

<span data-ttu-id="65858-163">Используются следующие переменные.</span><span class="sxs-lookup"><span data-stu-id="65858-163">The following variables are involved.</span></span>

``` syntax
Dx     x value in device units 
Lx     x value in logical units (also known as page space units) 
WOx     window x origin 
VOx     viewport x origin 
WEx     window x-extent 
VEx     viewport x-extent 
```

<span data-ttu-id="65858-164">То же уравнение с y-заменой x преобразует точку y компонентоф.</span><span class="sxs-lookup"><span data-stu-id="65858-164">The same equation with y replacing x transforms the y componentof a point.</span></span>

<span data-ttu-id="65858-165">Формула сначала Смещает точку от ее начала координат.</span><span class="sxs-lookup"><span data-stu-id="65858-165">The formula first offsets the point from its coordinate origin.</span></span> <span data-ttu-id="65858-166">Это значение, которое больше не смещено от источника, затем масштабируется в целевую систему координат по отношению к экстентам.</span><span class="sxs-lookup"><span data-stu-id="65858-166">This value, no longer biased by the origin, is then scaled into the destination coordinate system by the ratio of the extents.</span></span> <span data-ttu-id="65858-167">Наконец, масштабированное значение смещается на исходную точку назначения до окончательного сопоставления.</span><span class="sxs-lookup"><span data-stu-id="65858-167">Finally, the scaled value is offset by the destination origin to its final mapping.</span></span>

<span data-ttu-id="65858-168">Функции [**лптодп**](/windows/desktop/api/Wingdi/nf-wingdi-lptodp) и [**дптолп**](/windows/desktop/api/Wingdi/nf-wingdi-dptolp) можно использовать для преобразования логических точек в точки устройств и из точек устройств в логические точки соответственно.</span><span class="sxs-lookup"><span data-stu-id="65858-168">The [**LPtoDP**](/windows/desktop/api/Wingdi/nf-wingdi-lptodp) and [**DPtoLP**](/windows/desktop/api/Wingdi/nf-wingdi-dptolp) functions may be used to convert from logical points to device points and from device points to logical points, respectively.</span></span>

 

 



