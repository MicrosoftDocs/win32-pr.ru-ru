---
description: Типы заголовков битовых карт
ms.assetid: 6df4655a-f707-4893-b6e6-f7e4d7f67b4e
title: Типы заголовков битовых карт
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5910b0fb5be1166e807db1f3362186a206abc2b7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103898457"
---
# <a name="bitmap-header-types"></a><span data-ttu-id="f8494-103">Типы заголовков битовых карт</span><span class="sxs-lookup"><span data-stu-id="f8494-103">Bitmap Header Types</span></span>

<span data-ttu-id="f8494-104">Точечный рисунок имеет четыре основных типа заголовков:</span><span class="sxs-lookup"><span data-stu-id="f8494-104">The bitmap has four basic header types:</span></span>

-   [<span data-ttu-id="f8494-105">**битмапкорехеадер**</span><span class="sxs-lookup"><span data-stu-id="f8494-105">**BITMAPCOREHEADER**</span></span>](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader)
-   <span data-ttu-id="f8494-106">[**битмапинфохеадер**](/previous-versions//dd183376(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="f8494-106">[**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85))</span></span>
-   [<span data-ttu-id="f8494-107">**BITMAPV4HEADER**</span><span class="sxs-lookup"><span data-stu-id="f8494-107">**BITMAPV4HEADER**</span></span>](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)
-   [<span data-ttu-id="f8494-108">**BITMAPV5HEADER**</span><span class="sxs-lookup"><span data-stu-id="f8494-108">**BITMAPV5HEADER**</span></span>](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header)

<span data-ttu-id="f8494-109">Четыре типа заголовков точечных рисунков отличаются элементом **size** , который является первым **DWORD** в каждой из структур.</span><span class="sxs-lookup"><span data-stu-id="f8494-109">The four types of bitmap headers are differentiated by the **Size** member, which is the first **DWORD** in each of the structures.</span></span>

<span data-ttu-id="f8494-110">Структура [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) является расширенной структурой [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header) , которая является расширенной структурой [**битмапинфохеадер**](/previous-versions//dd183376(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="f8494-110">The [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) structure is an extended [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header) structure, which is an extended [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)) structure.</span></span> <span data-ttu-id="f8494-111">Однако **битмапинфохеадер** и [**битмапкорехеадер**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) имеют только элемент **size** , общий с другими структурами заголовков битовой карты.</span><span class="sxs-lookup"><span data-stu-id="f8494-111">However, the **BITMAPINFOHEADER** and [**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) have only the **Size** member in common with other bitmap header structures.</span></span>

<span data-ttu-id="f8494-112">Форматы [**битмапкорехеадер**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) и [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header) были заменены форматами [**битмапинфохеадер**](/previous-versions//dd183376(v=vs.85)) и [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) соответственно.</span><span class="sxs-lookup"><span data-stu-id="f8494-112">The [**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) and [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header) formats have been superseded by [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)) and [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) formats, respectively.</span></span> <span data-ttu-id="f8494-113">Форматы **битмапкорехеадер** и **BITMAPV4HEADER** представлены для полноты и обратной совместимости.</span><span class="sxs-lookup"><span data-stu-id="f8494-113">The **BITMAPCOREHEADER** and **BITMAPV4HEADER** formats are presented for completeness and backward compatibility.</span></span>

<span data-ttu-id="f8494-114">Формат DIB приведен ниже (Дополнительные сведения см. в разделе [точечный рисунок](bitmap-storage.md) ).</span><span class="sxs-lookup"><span data-stu-id="f8494-114">The format for a DIB is the following (for more information, see [Bitmap Storage](bitmap-storage.md) ):</span></span>

-   <span data-ttu-id="f8494-115">Структура [**битмапфилехеадер**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader)</span><span class="sxs-lookup"><span data-stu-id="f8494-115">a [**BITMAPFILEHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapfileheader) structure</span></span>
-   <span data-ttu-id="f8494-116">Структура [**битмапкорехеадер**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader), [**битмапинфохеадер**](/previous-versions//dd183376(v=vs.85)), [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)или [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) .</span><span class="sxs-lookup"><span data-stu-id="f8494-116">either a [**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader), a [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)), a [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header), or a [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) structure.</span></span>
-   <span data-ttu-id="f8494-117">Необязательная таблица цветов, представляющая собой набор структур [**ргбкуад**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) или набор структур [**ргбтрипле**](/windows/win32/api/wingdi/ns-wingdi-rgbtriple) .</span><span class="sxs-lookup"><span data-stu-id="f8494-117">an optional color table, which is either a set of [**RGBQUAD**](/windows/win32/api/wingdi/ns-wingdi-rgbquad) structures or a set of [**RGBTRIPLE**](/windows/win32/api/wingdi/ns-wingdi-rgbtriple) structures.</span></span>
-   <span data-ttu-id="f8494-118">данные точечного рисунка</span><span class="sxs-lookup"><span data-stu-id="f8494-118">the bitmap data</span></span>
-   <span data-ttu-id="f8494-119">необязательные данные профиля</span><span class="sxs-lookup"><span data-stu-id="f8494-119">optional Profile data</span></span>

<span data-ttu-id="f8494-120">Таблица цветов описывает, как значения пикселей соответствуют значениям цвета RGB.</span><span class="sxs-lookup"><span data-stu-id="f8494-120">A color table describes how pixel values correspond to RGB color values.</span></span> <span data-ttu-id="f8494-121">RGB — это модель для описания цветов, создаваемых источником освещения.</span><span class="sxs-lookup"><span data-stu-id="f8494-121">RGB is a model for describing colors that are produced by emitting light.</span></span>

<span data-ttu-id="f8494-122">*Данные профиля* — это либо имя файла профиля (связанный профиль), либо фактические биты профиля (встроенный профиль).</span><span class="sxs-lookup"><span data-stu-id="f8494-122">*Profile data* refers to either the profile file name (linked profile) or the actual profile bits (embedded profile).</span></span> <span data-ttu-id="f8494-123">Формат файла помещает данные профиля в конец файла.</span><span class="sxs-lookup"><span data-stu-id="f8494-123">The file format places the profile data at the end of the file.</span></span> <span data-ttu-id="f8494-124">Данные профиля помещаются сразу после таблицы цветов (если она есть).</span><span class="sxs-lookup"><span data-stu-id="f8494-124">The profile data is placed just after the color table (if present).</span></span> <span data-ttu-id="f8494-125">Однако если функция получает упакованный DIB, данные профиля поступают после битов растрового изображения, как в формате файла.</span><span class="sxs-lookup"><span data-stu-id="f8494-125">However, if the function receives a packed DIB, the profile data comes after the bitmap bits, like in the file format.</span></span>

<span data-ttu-id="f8494-126">Данные профиля будут существовать только для структур [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) , в которых **bV5CSType** \_ связан профиль или \_ внедренный профиль.</span><span class="sxs-lookup"><span data-stu-id="f8494-126">Profile data will only exist for [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) structures where **bV5CSType** is PROFILE\_LINKED or PROFILE\_EMBEDDED.</span></span> <span data-ttu-id="f8494-127">Для функций, получающих Упакованные рисунки DIB, данные профиля поступают после растровых данных.</span><span class="sxs-lookup"><span data-stu-id="f8494-127">For functions that receive packed DIBs, the profile data comes after the bitmap data.</span></span>

<span data-ttu-id="f8494-128">Устройство палеттизед — это любое устройство, которое использует палитры для назначения цветов.</span><span class="sxs-lookup"><span data-stu-id="f8494-128">A palettized device is any device that uses palettes to assign colors.</span></span> <span data-ttu-id="f8494-129">Классический пример устройства палеттизед — это дисплей с 8-разрядной глубиной цвета (256 цветов).</span><span class="sxs-lookup"><span data-stu-id="f8494-129">The classic example of a palettized device is a display running in 8 bit color depth (that is, 256 colors).</span></span> <span data-ttu-id="f8494-130">Для назначения цветов точечному рисунку в этом режиме используется небольшая таблица цветов.</span><span class="sxs-lookup"><span data-stu-id="f8494-130">The display in this mode uses a small color table to assign colors to a bitmap.</span></span> <span data-ttu-id="f8494-131">Цвета в точечном рисунке присваиваются ближайшему цвету в палитре, используемой устройством.</span><span class="sxs-lookup"><span data-stu-id="f8494-131">The colors in a bitmap are assigned to the closest color in the palette that the device is using.</span></span> <span data-ttu-id="f8494-132">Устройство палеттизед не создает оптимальную палитру для отображения растрового изображения. Он просто использует все, что находится в текущей палитре.</span><span class="sxs-lookup"><span data-stu-id="f8494-132">The palettized device does not create an optimal palette for displaying the bitmap; it simply uses whatever is in the current palette.</span></span> <span data-ttu-id="f8494-133">Приложения несут ответственность за создание палитры и ее выбор в системе.</span><span class="sxs-lookup"><span data-stu-id="f8494-133">Applications are responsible for creating a palette and selecting it into the system.</span></span> <span data-ttu-id="f8494-134">В общем, 16-, 24-и 32-разрядные точечные рисунки не содержат таблицы цветов (то есть</span><span class="sxs-lookup"><span data-stu-id="f8494-134">In general, 16-, 24-, and 32-bits-per-pixel (bpp) bitmaps do not contain color tables (a.k.a.</span></span> <span data-ttu-id="f8494-135">оптимальные палитры для точечного рисунка); в этом случае приложение отвечает за создание оптимальной палитры.</span><span class="sxs-lookup"><span data-stu-id="f8494-135">optimal palettes for the bitmap); the application is responsible for generating a optimal palette in this case.</span></span> <span data-ttu-id="f8494-136">Однако точечные рисунки 16-, 24-и 32-бит могут содержать такие оптимальные таблицы цветов для отображения на устройствах палеттизед. в этом случае приложению нужно просто создать палитру на основе таблицы цветов, представленной в файле точечного рисунка.</span><span class="sxs-lookup"><span data-stu-id="f8494-136">However, 16-, 24-, and 32-bpp bitmaps can contain such optimal color tables for displaying on palettized devices; in this case the application just needs to create a palette based off the color table present in the bitmap file.</span></span>

<span data-ttu-id="f8494-137">Точечные рисунки, имеющие размер 1, 4 или 8 бит/с, должны иметь таблицу цветов с максимальным размером в зависимости от разряда.</span><span class="sxs-lookup"><span data-stu-id="f8494-137">Bitmaps that are 1, 4, or 8 bpp must have a color table with a maximum size based on the bpp.</span></span> <span data-ttu-id="f8494-138">Максимальный размер точечных рисунков (1, 4 и 8 бит/с) составляет от 2 до степени числа бит.</span><span class="sxs-lookup"><span data-stu-id="f8494-138">The maximum size for 1, 4, and 8 bpp bitmaps is 2 to the power of the bpp.</span></span> <span data-ttu-id="f8494-139">Таким словами, точечный рисунок размером 1 бит имеет не более двух цветов, а точечный рисунок размером 4 бит имеет максимум 16 цветов, а битовое изображение размером 8 бит — 256.</span><span class="sxs-lookup"><span data-stu-id="f8494-139">Thus, a 1 bpp bitmap has a maximum of two colors, the 4 bpp bitmap has a maximum of 16 colors, and the 8 bpp bitmap has a maximum of 256 colors.</span></span>

<span data-ttu-id="f8494-140">Точечные рисунки 16-, 24-или 32-бит не нуждаются в таблицах цветов, но они могут указывать цвета для устройств палеттизед.</span><span class="sxs-lookup"><span data-stu-id="f8494-140">Bitmaps that are 16-, 24-, or 32-bpp do not require color tables, but may have them to specify colors for palettized devices.</span></span> <span data-ttu-id="f8494-141">Если на 16-, 24-или 32-битовом точечном рисунке имеется таблица цветов, то элемент **биклрусед** указывает размер таблицы цветов, а таблица цветов должна иметь в ней много цветов.</span><span class="sxs-lookup"><span data-stu-id="f8494-141">If a color table is present for 16-, 24-, or 32-bpp bitmap, the **biClrUsed** member specifies the size of the color table and the color table must have that many colors in it.</span></span> <span data-ttu-id="f8494-142">Если **биклрусед** равен нулю, таблица цветов отсутствует.</span><span class="sxs-lookup"><span data-stu-id="f8494-142">If **biClrUsed** is zero, there is no color table.</span></span>

<span data-ttu-id="f8494-143">Красные, зеленые и синие битовые маски для \_ битовых рисунков бизнес-аналитики сразу следуют за структурами [**битмапинфохеадер**](/previous-versions//dd183376(v=vs.85)), [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header)и [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) .</span><span class="sxs-lookup"><span data-stu-id="f8494-143">The red, green, and blue bitfield masks for BI\_BITFIELD bitmaps immediately follow the [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)), [**BITMAPV4HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv4header), and [**BITMAPV5HEADER**](/windows/desktop/api/Wingdi/ns-wingdi-bitmapv5header) structures.</span></span> <span data-ttu-id="f8494-144">Структуры **BITMAPV4HEADER** и **BITMAPV5HEADER** содержат дополнительные элементы для красной, зеленой и синей масок, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="f8494-144">The **BITMAPV4HEADER** and **BITMAPV5HEADER** structures contain additional members for red, green, and blue masks as follows.</span></span>



| <span data-ttu-id="f8494-145">Член</span><span class="sxs-lookup"><span data-stu-id="f8494-145">Member</span></span>        | <span data-ttu-id="f8494-146">Значение</span><span class="sxs-lookup"><span data-stu-id="f8494-146">Meaning</span></span>                                                                                                                        |
|---------------|--------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f8494-147">**редмаск**</span><span class="sxs-lookup"><span data-stu-id="f8494-147">**RedMask**</span></span>   | <span data-ttu-id="f8494-148">Цветовая маска, указывающая красный компонент каждого пикселя, допустимая, только если для элемента **сжатия** задано значение BI \_ битовых полей.</span><span class="sxs-lookup"><span data-stu-id="f8494-148">Color mask that specifies the red component of each pixel, valid only if the **Compression** member is set to BI\_BITFIELDS.</span></span>   |
| <span data-ttu-id="f8494-149">**гринмаск**</span><span class="sxs-lookup"><span data-stu-id="f8494-149">**GreenMask**</span></span> | <span data-ttu-id="f8494-150">Цветовая маска, указывающая зеленый компонент каждого пикселя, допустимая, только если для элемента **сжатия** задано значение BI \_ битовых полей.</span><span class="sxs-lookup"><span data-stu-id="f8494-150">Color mask that specifies the green component of each pixel, valid only if the **Compression** member is set to BI\_BITFIELDS.</span></span> |
| <span data-ttu-id="f8494-151">**блуемаск**</span><span class="sxs-lookup"><span data-stu-id="f8494-151">**BlueMask**</span></span>  | <span data-ttu-id="f8494-152">Цветовая маска, указывающая синий компонент каждого пикселя, допустимая, только если для элемента **сжатия** задано значение BI \_ битовых полей.</span><span class="sxs-lookup"><span data-stu-id="f8494-152">Color mask that specifies the blue component of each pixel, valid only if the **Compression** member is set to BI\_BITFIELDS.</span></span>  |



 

<span data-ttu-id="f8494-153">Если **бикомпрессион** член [**БИТМАПИНФОХЕАДЕР**](/previous-versions//dd183376(v=vs.85)) имеет значение BI \_ битовых полей и функция получает аргумент типа **лпбитмапинфо**, то цветовая маска будет сразу следовать за заголовком.</span><span class="sxs-lookup"><span data-stu-id="f8494-153">When the **biCompression** member of [**BITMAPINFOHEADER**](/previous-versions//dd183376(v=vs.85)) is set to BI\_BITFIELDS and the function receives an argument of type **LPBITMAPINFO**, the color masks will immediately follow the header.</span></span> <span data-ttu-id="f8494-154">Таблица цветов, если она есть, будет соответствовать цветовой маске.</span><span class="sxs-lookup"><span data-stu-id="f8494-154">The color table, if present, will follow the color masks.</span></span> <span data-ttu-id="f8494-155">Точечные рисунки [**битмапкорехеадер**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) не поддерживают цветовые маски.</span><span class="sxs-lookup"><span data-stu-id="f8494-155">[**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) bitmaps do not support color masks.</span></span>

<span data-ttu-id="f8494-156">По умолчанию данные битовой карты в своем формате находятся снизу вверх.</span><span class="sxs-lookup"><span data-stu-id="f8494-156">By default, bitmap data is bottom-up in its format.</span></span> <span data-ttu-id="f8494-157">Снизу вверх означает, что первая строка сканирования в данных точечного рисунка является последней отображаемой строкой.</span><span class="sxs-lookup"><span data-stu-id="f8494-157">Bottom-up means that the first scan line in the bitmap data is the last scan line to be displayed.</span></span> <span data-ttu-id="f8494-158">Например, 0-<sup>й</sup> пиксель строки 0-<sup>го</sup> сканирования с точечным рисунком размером 10 пикселей на 10 пикселей будет иметь 0-<sup>й</sup> пиксель строки<sup>с 9 битами</sup> отображаемого или печатного изображения.</span><span class="sxs-lookup"><span data-stu-id="f8494-158">For example, the 0<sup>th</sup> pixel of the 0<sup>th</sup> scan line of the bitmap data of a 10-pixel by 10-pixel bitmap will be the 0<sup>th</sup> pixel of the 9<sup>th</sup> scan line of the displayed or printed image.</span></span> <span data-ttu-id="f8494-159">Растровые изображения в формате с кодировкой длины (RLE) и точечные рисунки [**битмапкорехеадер**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) не могут быть битовыми рисунками сверху вниз.</span><span class="sxs-lookup"><span data-stu-id="f8494-159">Run-length encoded (RLE) format bitmaps and [**BITMAPCOREHEADER**](/windows/win32/api/wingdi/ns-wingdi-bitmapcoreheader) bitmaps cannot be top-down bitmaps.</span></span> <span data-ttu-id="f8494-160">Строки просмотра выводятся в виде **DWORD** , за исключением точечных рисунков, сжатых с помощью RLE.</span><span class="sxs-lookup"><span data-stu-id="f8494-160">The scan lines are **DWORD** aligned, except for RLE-compressed bitmaps.</span></span> <span data-ttu-id="f8494-161">Они должны быть дополнены для ширины строки сканирования в байтах, которые не делятся на четыре, за исключением сжатых битов RLE.</span><span class="sxs-lookup"><span data-stu-id="f8494-161">They must be padded for scan line widths, in bytes, that are not evenly divisible by four, except for RLE compressed bitmaps.</span></span> <span data-ttu-id="f8494-162">Например, точечный рисунок размером 10 х 10 пикселей будет содержать два байта для заполнения в конце каждой строки развертки.</span><span class="sxs-lookup"><span data-stu-id="f8494-162">For example, a 10- by 10-pixel 24-bpp bitmap will have two padding bytes at the end of each scan line.</span></span>

 

 
