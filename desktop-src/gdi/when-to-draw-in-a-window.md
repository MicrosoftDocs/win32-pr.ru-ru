---
description: 'Приложение рисует в окне в любое время: при первом создании окна, при изменении размера окна при перемещении окна из другого окна, при свертывании или развертывании окна, при отображении данных из открытого файла и при прокрутке, изменении или выделении части отображаемых данных.'
ms.assetid: 4b5d6842-5707-4884-a55a-e09e342cea46
title: Когда следует рисовать в окне
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 42c8c157de5a591be5ad1a6ad3e319cf83220e77
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104345135"
---
# <a name="when-to-draw-in-a-window"></a><span data-ttu-id="80a79-103">Когда следует рисовать в окне</span><span class="sxs-lookup"><span data-stu-id="80a79-103">When to Draw in a Window</span></span>

<span data-ttu-id="80a79-104">Приложение рисует в окне в любое время: при первом создании окна, при изменении размера окна при перемещении окна из другого окна, при свертывании или развертывании окна, при отображении данных из открытого файла и при прокрутке, изменении или выделении части отображаемых данных.</span><span class="sxs-lookup"><span data-stu-id="80a79-104">An application draws in a window at a variety of times: when first creating a window, when changing the size of the window, when moving the window from behind another window, when minimizing or maximizing the window, when displaying data from an opened file, and when scrolling, changing, or selecting a portion of the displayed data.</span></span>

<span data-ttu-id="80a79-105">Система управляет такими действиями, как перемещение и изменение размера окна.</span><span class="sxs-lookup"><span data-stu-id="80a79-105">The system manages actions such as moving and sizing a window.</span></span> <span data-ttu-id="80a79-106">Если действие влияет на содержимое окна, система помечает затронутую часть окна как готовую к обновлению и, при следующей возможности, отправляет сообщение [**WM \_ Paint**](wm-paint.md) в процедуру окна окна.</span><span class="sxs-lookup"><span data-stu-id="80a79-106">If an action affects the content of the window, the system marks the affected portion of the window as ready for updating and, at the next opportunity, sends a [**WM\_PAINT**](wm-paint.md) message to the window procedure of the window.</span></span> <span data-ttu-id="80a79-107">Сообщение является сигналом для приложения, чтобы определить, что необходимо обновить, и выполнить необходимую прорисовку.</span><span class="sxs-lookup"><span data-stu-id="80a79-107">The message is a signal to the application to determine what must be updated and to carry out the necessary drawing.</span></span>

<span data-ttu-id="80a79-108">Некоторыми действиями управляет приложение, например отображение открытых файлов и выбор отображаемых данных.</span><span class="sxs-lookup"><span data-stu-id="80a79-108">Some actions are managed by the application, such as displaying open files and selecting displayed data.</span></span> <span data-ttu-id="80a79-109">Для этих действий приложение может отмечать для обновления части окна, затронутой действием, что вызывает отправку сообщения [**WM \_ Paint**](wm-paint.md) при следующей возможности.</span><span class="sxs-lookup"><span data-stu-id="80a79-109">For these actions, an application can mark for updating the portion of the window affected by the action, causing a [**WM\_PAINT**](wm-paint.md) message to be sent at the next opportunity.</span></span> <span data-ttu-id="80a79-110">Если действие требует немедленного отзыва, приложение может рисовать во время выполнения действия, не дожидаясь, когда **WM \_ Paint**.</span><span class="sxs-lookup"><span data-stu-id="80a79-110">If an action requires immediate feedback, the application can draw while the action takes place, without waiting for **WM\_PAINT**.</span></span> <span data-ttu-id="80a79-111">Например, типичное приложение выделяет область, которую пользователь выбирает, вместо того, чтобы ждать следующего сообщения **WM \_ Paint** , чтобы обновить область.</span><span class="sxs-lookup"><span data-stu-id="80a79-111">For example, a typical application highlights the area the user selects rather than waiting for the next **WM\_PAINT** message to update the area.</span></span>

<span data-ttu-id="80a79-112">Во всех случаях приложение может рисовать в окне сразу после его создания.</span><span class="sxs-lookup"><span data-stu-id="80a79-112">In all cases, an application can draw in a window as soon as it is created.</span></span> <span data-ttu-id="80a79-113">Чтобы рисовать в окне, приложение должно сначала получить маркер для контекста устройства отображения для окна.</span><span class="sxs-lookup"><span data-stu-id="80a79-113">To draw in the window, the application must first retrieve a handle to a display device context for the window.</span></span> <span data-ttu-id="80a79-114">В идеале приложение выполняет большинство операций рисования во время обработки сообщений [**WM \_ Paint**](wm-paint.md) .</span><span class="sxs-lookup"><span data-stu-id="80a79-114">Ideally, an application carries out most of its drawing operations during the processing of [**WM\_PAINT**](wm-paint.md) messages.</span></span> <span data-ttu-id="80a79-115">В этом случае приложение получает контекст отображаемого устройства, вызывая функцию [**бегинпаинт**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) .</span><span class="sxs-lookup"><span data-stu-id="80a79-115">In this case, the application retrieves a display device context by calling the [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) function.</span></span> <span data-ttu-id="80a79-116">Если приложение рисуется в любое другое время, например в [**WinMain**](/windows/win32/api/winbase/nf-winbase-winmain) или во время обработки клавиатуры или сообщения мыши, оно вызывает функцию [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) или [**жетдцекс**](/windows/desktop/api/Winuser/nf-winuser-getdcex) , чтобы получить контроллер домена для дисплея.</span><span class="sxs-lookup"><span data-stu-id="80a79-116">If an application draws at any other time, such as from within [**WinMain**](/windows/win32/api/winbase/nf-winbase-winmain) or during the processing of keyboard or mouse messages, it calls the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) or [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) function to retrieve the display DC.</span></span>

 

 
