---
description: Большая часть рисунков, выполняемых во время обработки \_ сообщения WM Paint, является асинхронной, то есть задержка между временем, когда часть окна становится недействительной, и \_ отправкой WM Paint.
ms.assetid: c4eac615-6526-4ca6-854b-b4a598da13a4
title: Синхронное и асинхронное Рисование
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a80dd5d5d63cbe10d19ec98e9f5dc9ae9163c18a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103999352"
---
# <a name="synchronous-and-asynchronous-drawing"></a><span data-ttu-id="991c0-103">Синхронное и асинхронное Рисование</span><span class="sxs-lookup"><span data-stu-id="991c0-103">Synchronous and Asynchronous Drawing</span></span>

<span data-ttu-id="991c0-104">Большая часть рисунков, выполняемых во время обработки сообщения [**WM \_ Paint**](wm-paint.md) , является асинхронной, то есть задержка между временем, когда часть окна становится недействительной, и \_ отправкой WM Paint.</span><span class="sxs-lookup"><span data-stu-id="991c0-104">Most drawing carried out during processing of the [**WM\_PAINT**](wm-paint.md) message is asynchronous; that is, there is a delay between the time a portion of the window is invalidated and the time WM\_PAINT is sent.</span></span> <span data-ttu-id="991c0-105">Во время задержки приложение обычно получает сообщения из очереди и выполняет другие задачи.</span><span class="sxs-lookup"><span data-stu-id="991c0-105">During the delay, the application typically retrieves messages from the queue and carries out other tasks.</span></span> <span data-ttu-id="991c0-106">Причиной задержки является то, что система, как правило, рассматривает рисование в окне как операцию с низким приоритетом и работает так же, как и сообщения, вводимые пользователем, и сообщения, которые могут повлиять на расположение или размер окна, будут обработаны перед WM \_ Paint.</span><span class="sxs-lookup"><span data-stu-id="991c0-106">The reason for the delay is that the system generally treats drawing in a window as a low-priority operation and works as though user-input messages and messages that may affect the position or size of a window will be processed before WM\_PAINT .</span></span>

<span data-ttu-id="991c0-107">В некоторых случаях приложение необходимо синхронно рисовать, нарисовать в окне сразу после неподтверждения части окна.</span><span class="sxs-lookup"><span data-stu-id="991c0-107">In some cases, it is necessary for an application to draw synchronously that is, draw in the window immediately after invalidating a portion of the window.</span></span> <span data-ttu-id="991c0-108">Обычное приложение рисует свое главное окно сразу после создания окна, чтобы сообщить пользователю о том, что приложение было успешно запущено.</span><span class="sxs-lookup"><span data-stu-id="991c0-108">A typical application draws its main window immediately after creating the window to signal the user that the application has started successfully.</span></span> <span data-ttu-id="991c0-109">Система управляет некоторыми окнами управления синхронно, например кнопками, так как такое Windows выступает в качестве фокусирования для вводимых пользователем данных.</span><span class="sxs-lookup"><span data-stu-id="991c0-109">The system draws some control windows synchronously, such as buttons, because such windows serve as the focus for user input.</span></span> <span data-ttu-id="991c0-110">Хотя любое окно с простой программой рисования может быть выведено синхронно, все такое Рисование должно выполняться быстро и не мешать приложению реагировать на ввод данных пользователем.</span><span class="sxs-lookup"><span data-stu-id="991c0-110">Although any window with a simple drawing routine can be drawn synchronously, all such drawing should be done quickly and should not interfere with the application's ability to respond to user input.</span></span>

<span data-ttu-id="991c0-111">Функции [**упдатевиндов**](/windows/desktop/api/Winuser/nf-winuser-updatewindow) и [**редраввиндов**](/windows/desktop/api/Winuser/nf-winuser-redrawwindow) позволяют выполнять синхронное рисование.</span><span class="sxs-lookup"><span data-stu-id="991c0-111">The [**UpdateWindow**](/windows/desktop/api/Winuser/nf-winuser-updatewindow) and [**RedrawWindow**](/windows/desktop/api/Winuser/nf-winuser-redrawwindow) functions allow for synchronous drawing.</span></span> <span data-ttu-id="991c0-112">**Упдатевиндов** отправляет сообщение [**WM \_ Paint**](wm-paint.md) непосредственно в окно, если область обновления не пуста.</span><span class="sxs-lookup"><span data-stu-id="991c0-112">**UpdateWindow** sends a [**WM\_PAINT**](wm-paint.md) message directly to the window if the update region is not empty.</span></span> <span data-ttu-id="991c0-113">**Редраввиндов** также отправляет сообщение **WM \_ Paint** , но дает приложению больший контроль над рисованием окна, например, следует ли нарисовать неклиентскую область и фон окна или же отправлять сообщение независимо от того, пуста ли область обновления.</span><span class="sxs-lookup"><span data-stu-id="991c0-113">**RedrawWindow** also sends a **WM\_PAINT** message, but gives the application greater control over how to draw the window, such as whether to draw the nonclient area and window background or whether to send the message regardless of whether the update region is empty.</span></span> <span data-ttu-id="991c0-114">Эти функции отправляют сообщение **WM \_ Paint** непосредственно в окно, независимо от количества других сообщений в очереди сообщений приложения.</span><span class="sxs-lookup"><span data-stu-id="991c0-114">These functions send the **WM\_PAINT** message directly to the window, regardless of the number of other messages in the application message queue.</span></span>

<span data-ttu-id="991c0-115">Любое окно, требующее длительных операций рисования, должно выводиться асинхронно, чтобы предотвратить блокирование сообщений, ожидающих обработки при прорисовке окна.</span><span class="sxs-lookup"><span data-stu-id="991c0-115">Any window requiring time-consuming drawing operations should be drawn asynchronously to prevent pending messages from being blocked as the window is drawn.</span></span> <span data-ttu-id="991c0-116">Кроме того, любое приложение, которое часто делает недействительными небольшие части окна, должно позволить этим недопустимым фрагментам консолидироваться в одно асинхронное сообщение [**WM \_ Paint**](wm-paint.md) , а не как ряд синхронных сообщений **WM \_ Paint** .</span><span class="sxs-lookup"><span data-stu-id="991c0-116">Also, any application that frequently invalidates small portions of a window should allow these invalid portions to consolidate into a single asynchronous [**WM\_PAINT**](wm-paint.md) message, rather than a series of synchronous **WM\_PAINT** messages.</span></span>

 

 



