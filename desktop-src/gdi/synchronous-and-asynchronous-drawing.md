---
description: Большая часть рисунков, выполняемых во время обработки \_ сообщения WM Paint, является асинхронной, то есть задержка между временем, когда часть окна становится недействительной, и \_ отправкой WM Paint.
ms.assetid: c4eac615-6526-4ca6-854b-b4a598da13a4
title: Синхронное и асинхронное Рисование
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 86e22b49a61d021c886da6253a2575c0e7f1c7a8c01eb2c3b550e04acda5daf9
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119613394"
---
# <a name="synchronous-and-asynchronous-drawing"></a>Синхронное и асинхронное Рисование

Большая часть рисунков, выполняемых во время обработки сообщения [**WM \_ Paint**](wm-paint.md) , является асинхронной, то есть задержка между временем, когда часть окна становится недействительной, и \_ отправкой WM Paint. Во время задержки приложение обычно получает сообщения из очереди и выполняет другие задачи. Причиной задержки является то, что система, как правило, рассматривает рисование в окне как операцию с низким приоритетом и работает так же, как и сообщения, вводимые пользователем, и сообщения, которые могут повлиять на расположение или размер окна, будут обработаны перед WM \_ Paint.

В некоторых случаях приложение необходимо синхронно рисовать, нарисовать в окне сразу после неподтверждения части окна. Обычное приложение рисует свое главное окно сразу после создания окна, чтобы сообщить пользователю о том, что приложение было успешно запущено. Система управляет некоторыми окнами управления синхронно, например кнопками, так как такое Windows выступает в качестве фокусирования для вводимых пользователем данных. Хотя любое окно с простой программой рисования может быть выведено синхронно, все такое Рисование должно выполняться быстро и не мешать приложению реагировать на ввод данных пользователем.

Функции [**упдатевиндов**](/windows/desktop/api/Winuser/nf-winuser-updatewindow) и [**редраввиндов**](/windows/desktop/api/Winuser/nf-winuser-redrawwindow) позволяют выполнять синхронное рисование. **Упдатевиндов** отправляет сообщение [**WM \_ Paint**](wm-paint.md) непосредственно в окно, если область обновления не пуста. **Редраввиндов** также отправляет сообщение **WM \_ Paint** , но дает приложению больший контроль над рисованием окна, например, следует ли нарисовать неклиентскую область и фон окна или же отправлять сообщение независимо от того, пуста ли область обновления. Эти функции отправляют сообщение **WM \_ Paint** непосредственно в окно, независимо от количества других сообщений в очереди сообщений приложения.

Любое окно, требующее длительных операций рисования, должно выводиться асинхронно, чтобы предотвратить блокирование сообщений, ожидающих обработки при прорисовке окна. Кроме того, любое приложение, которое часто делает недействительными небольшие части окна, должно позволить этим недопустимым фрагментам консолидироваться в одно асинхронное сообщение [**WM \_ Paint**](wm-paint.md) , а не как ряд синхронных сообщений **WM \_ Paint** .

 

 



