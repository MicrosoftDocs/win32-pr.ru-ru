---
description: Окно или меню, расположенное на более чем одном мониторе, вызывает визуальное прерывание для средства просмотра. Чтобы избежать этой проблемы, система отображает меню и новые и развернутые окна на одном мониторе. В следующей таблице показано, как выбран монитор.
ms.assetid: 9316c8dd-c9b7-49e2-a987-5949a87b0cfc
title: Размещение объектов на нескольких мониторах монитора
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 77149291737482fa0f3e7fe19ee4f350ee6521d8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104984856"
---
# <a name="positioning-objects-on-multiple-display-monitors"></a><span data-ttu-id="7c510-105">Размещение объектов на нескольких мониторах монитора</span><span class="sxs-lookup"><span data-stu-id="7c510-105">Positioning Objects on Multiple Display Monitors</span></span>

<span data-ttu-id="7c510-106">Окно или меню, расположенное на более чем одном мониторе, вызывает визуальное прерывание для средства просмотра.</span><span class="sxs-lookup"><span data-stu-id="7c510-106">A window or menu that is on more than one monitor causes visual disruption for a viewer.</span></span> <span data-ttu-id="7c510-107">Чтобы избежать этой проблемы, система отображает меню и новые и развернутые окна на одном мониторе.</span><span class="sxs-lookup"><span data-stu-id="7c510-107">To minimize this problem, the system displays menus and new and maximized windows on one monitor.</span></span> <span data-ttu-id="7c510-108">В следующей таблице показано, как выбран монитор.</span><span class="sxs-lookup"><span data-stu-id="7c510-108">The following table shows how the monitor is chosen.</span></span>



| <span data-ttu-id="7c510-109">Объект</span><span class="sxs-lookup"><span data-stu-id="7c510-109">Object</span></span>         | <span data-ttu-id="7c510-110">Расположение</span><span class="sxs-lookup"><span data-stu-id="7c510-110">Location</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="7c510-111">window</span><span class="sxs-lookup"><span data-stu-id="7c510-111">window</span></span>         | <span data-ttu-id="7c510-112">[**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa)(ex) отображает окно на мониторе, который содержит самую большую часть окна. Разворачивает монитор, который содержит самую большую часть окна до его сворачивания.</span><span class="sxs-lookup"><span data-stu-id="7c510-112">[**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa)(Ex) displays a window on the monitor that contains the largest part of the window.Maximizes on the monitor that contains the largest part of the window before it was minimized.</span></span><br/> <span data-ttu-id="7c510-113">Сочетание клавиш ALT + TAB отображает окно на мониторе с активным в данный момент окном.</span><span class="sxs-lookup"><span data-stu-id="7c510-113">The ALT-TAB key combination displays a window on the monitor that has the currently active window.</span></span><br/>                                                                                                                                          |
| <span data-ttu-id="7c510-114">собственное окно</span><span class="sxs-lookup"><span data-stu-id="7c510-114">owned window</span></span>   | <span data-ttu-id="7c510-115">на том же мониторе, что и его владелец.</span><span class="sxs-lookup"><span data-stu-id="7c510-115">on the same monitor as its owner.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="7c510-116">служат</span><span class="sxs-lookup"><span data-stu-id="7c510-116">submenu</span></span>        | <span data-ttu-id="7c510-117">Отображается на мониторе, содержащем самую крупную часть соответствующего пункта меню.</span><span class="sxs-lookup"><span data-stu-id="7c510-117">Appears on the monitor that contains the largest part of the corresponding menu item.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="7c510-118">контекстное меню</span><span class="sxs-lookup"><span data-stu-id="7c510-118">context menu</span></span>   | <span data-ttu-id="7c510-119">Отображается на мониторе, где произошло Правое нажатие.</span><span class="sxs-lookup"><span data-stu-id="7c510-119">Appears on the monitor where the right click occurred.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="7c510-120">раскрывающийся список</span><span class="sxs-lookup"><span data-stu-id="7c510-120">drop-down list</span></span> | <span data-ttu-id="7c510-121">Отображается на мониторе, содержащем прямоугольник поля со списком.</span><span class="sxs-lookup"><span data-stu-id="7c510-121">Appears on the monitor that contains the rectangle of the combo box.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="7c510-122">диалоговое окно</span><span class="sxs-lookup"><span data-stu-id="7c510-122">dialog box</span></span>     | <span data-ttu-id="7c510-123">Отображается на мониторе окна, которому он принадлежит. Если он определен с помощью центермаусе в DS \_ , он отображается на мониторе с помощью мыши.</span><span class="sxs-lookup"><span data-stu-id="7c510-123">Appears on the monitor of the window that owns it.If it is defined with DS\_CENTERMOUSE style, it appears on the monitor with the mouse.</span></span><br/> <span data-ttu-id="7c510-124">Если у него нет владельца, а активное окно и диалоговое окно находятся в одном приложении, то диалоговое окно отображается на мониторе текущего активного окна.</span><span class="sxs-lookup"><span data-stu-id="7c510-124">If it has no owner and the active window and the dialog box are in the same application, the dialog box appears on the monitor of the currently active window.</span></span><br/> <span data-ttu-id="7c510-125">Если в диалоговом окне нет владельца, а активное окно не находится в том же приложении, что и диалоговое окно, то диалоговое окно отображается на основном мониторе.</span><span class="sxs-lookup"><span data-stu-id="7c510-125">If the dialog box has no owner and the active window is not in the same application as the dialog box, the dialog box appears on the primary monitor.</span></span><br/> |
| <span data-ttu-id="7c510-126">окно сообщения</span><span class="sxs-lookup"><span data-stu-id="7c510-126">message box</span></span>    | <span data-ttu-id="7c510-127">Отображается на мониторе окна, которому он принадлежит.</span><span class="sxs-lookup"><span data-stu-id="7c510-127">Appears on the monitor of the window that owns it.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                             |



 

<span data-ttu-id="7c510-128">Если окно находится на двух мониторах и один из мониторов перемещается, система позиционирует окно на монитор, который содержит самую большую часть исходного окна.</span><span class="sxs-lookup"><span data-stu-id="7c510-128">If a window straddles two monitors and one of the monitors is repositioned, the system positions the window on the monitor that contains the largest part of the original window.</span></span>

<span data-ttu-id="7c510-129">Приложение также, как правило, должно располагать объекты.</span><span class="sxs-lookup"><span data-stu-id="7c510-129">An application will also typically need to position objects.</span></span> <span data-ttu-id="7c510-130">Например, может потребоваться создать окно на том же мониторе, что и другое окно.</span><span class="sxs-lookup"><span data-stu-id="7c510-130">For example, a window may need to be created on the same monitor as another window.</span></span>

<span data-ttu-id="7c510-131">**Размещение объекта в системе с несколькими мониторами**</span><span class="sxs-lookup"><span data-stu-id="7c510-131">**To position an object on a multiple monitor system**</span></span>

1.  <span data-ttu-id="7c510-132">Определите соответствующий монитор.</span><span class="sxs-lookup"><span data-stu-id="7c510-132">Determine the appropriate monitor.</span></span>
2.  <span data-ttu-id="7c510-133">Получение координат монитора.</span><span class="sxs-lookup"><span data-stu-id="7c510-133">Get the coordinates to the monitor.</span></span>
3.  <span data-ttu-id="7c510-134">Разместите объект с помощью координат.</span><span class="sxs-lookup"><span data-stu-id="7c510-134">Position the object using the coordinates.</span></span>

<span data-ttu-id="7c510-135">Как правило, объект размещается на основном мониторе или на мониторе, на котором уже есть объект.</span><span class="sxs-lookup"><span data-stu-id="7c510-135">Typically, you will position an object either on the primary monitor or on a monitor that has an object already on it.</span></span> <span data-ttu-id="7c510-136">Чтобы указать монитор для заданной точки, прямоугольника или окна, используйте [**мониторфромпоинт**](/windows/desktop/api/Winuser/nf-winuser-monitorfrompoint), [**мониторфромрект**](/windows/desktop/api/Winuser/nf-winuser-monitorfromrect)и [**мониторфромвиндов**](/windows/desktop/api/Winuser/nf-winuser-monitorfromwindow).</span><span class="sxs-lookup"><span data-stu-id="7c510-136">To identify the monitor for a given point, rectangle, or window, use [**MonitorFromPoint**](/windows/desktop/api/Winuser/nf-winuser-monitorfrompoint), [**MonitorFromRect**](/windows/desktop/api/Winuser/nf-winuser-monitorfromrect), and [**MonitorFromWindow**](/windows/desktop/api/Winuser/nf-winuser-monitorfromwindow).</span></span>

<span data-ttu-id="7c510-137">Чтобы получить координаты для монитора, используйте [**жетмониторинфо**](/windows/desktop/api/Winuser/nf-winuser-getmonitorinfoa), который предоставляет как рабочую область, так и весь прямоугольник монитора.</span><span class="sxs-lookup"><span data-stu-id="7c510-137">To get the coordinates for the monitor, use [**GetMonitorInfo**](/windows/desktop/api/Winuser/nf-winuser-getmonitorinfoa), which provides both the work area and the entire monitor rectangle.</span></span> <span data-ttu-id="7c510-138">Обратите внимание, что SM \_ кксскрин и SM \_ цискрин всегда относятся к основному монитору, а не к монитору, на котором отображается приложение.</span><span class="sxs-lookup"><span data-stu-id="7c510-138">Note that SM\_CXSCREEN and SM\_CYSCREEN always refer to the primary monitor, not necessarily the monitor that displays your application.</span></span> <span data-ttu-id="7c510-139">Кроме того, Избегайте использования SM \_ ксксвиртуалскрин, так как в этом случае окно будет центрировано на виртуальном экране, а не на мониторе.</span><span class="sxs-lookup"><span data-stu-id="7c510-139">Also, avoid SM\_xxVIRTUALSCREEN because this centers your window on the virtual screen, not a monitor.</span></span>

<span data-ttu-id="7c510-140">Для центрирования диалоговых окон в рабочей области окна используйте \_ стиль центра DS.</span><span class="sxs-lookup"><span data-stu-id="7c510-140">To center dialog boxes in a window's work area, use the DS\_CENTER style.</span></span> <span data-ttu-id="7c510-141">Для центрирования диалогового окна в окне приложения используйте [**жетвиндоврект**](/windows/win32/api/winuser/nf-winuser-getwindowrect).</span><span class="sxs-lookup"><span data-stu-id="7c510-141">To center the dialog box to an application window, use [**GetWindowRect**](/windows/win32/api/winuser/nf-winuser-getwindowrect).</span></span> <span data-ttu-id="7c510-142">Windows автоматически ограничит меню и диалоговые окна до монитора.</span><span class="sxs-lookup"><span data-stu-id="7c510-142">Windows automatically restricts menus and dialog boxes to a monitor.</span></span> <span data-ttu-id="7c510-143">Однако может существовать проблема для пользовательских меню, настраиваемых раскрывающихся списков, настраиваемых палитр инструментов и положения сохраненного приложения.</span><span class="sxs-lookup"><span data-stu-id="7c510-143">However, there can be a problem for custom menus, custom drop-down boxes, custom tool palettes, and the saved application position.</span></span>

<span data-ttu-id="7c510-144">Пример правильного расположения объектов см. [в разделе Размещение объектов при настройке нескольких дисплеев](positioning-objects-on-a-multiple-display-setup.md).</span><span class="sxs-lookup"><span data-stu-id="7c510-144">For an example of how to position objects correctly, see [Positioning Objects on a Multiple Display Setup](positioning-objects-on-a-multiple-display-setup.md).</span></span>

<span data-ttu-id="7c510-145">С помощью SM \_ кксскрин и SM \_ цискрин, чтобы определить расположение панели инструментов для рабочего стола приложения (также называемой *панель приложений*), ограничит панель приложений до основного монитора.</span><span class="sxs-lookup"><span data-stu-id="7c510-145">Using SM\_CXSCREEN and SM\_CYSCREEN to determine the location of an application desktop toolbar (also called *appbar*) restricts the appbar to the primary monitor.</span></span> <span data-ttu-id="7c510-146">Чтобы разрешить панель приложений на любом крае любого монитора, используйте соответствующие системные метрики для вычисления краев мониторов.</span><span class="sxs-lookup"><span data-stu-id="7c510-146">To allow an appbar to be on any edge of any monitor, use the appropriate system metrics to calculate the edges of the monitors.</span></span> <span data-ttu-id="7c510-147">Кроме того, используйте макросы **Get \_ X \_ lParam** и **Get \_ Y \_** для извлечения координат, в противном случае знак координат может быть неверным.</span><span class="sxs-lookup"><span data-stu-id="7c510-147">Also, use the **GET\_X\_LPARAM** and **GET\_Y\_LPARAM** macros to extract the coordinates, otherwise the sign of the coordinates may be wrong.</span></span> <span data-ttu-id="7c510-148">Эти макросы включены в Виндовскс. h.</span><span class="sxs-lookup"><span data-stu-id="7c510-148">These macros are included in Windowsx.h.</span></span>

<span data-ttu-id="7c510-149">Размер полноэкранного окна должен меняться по мере перемещения между мониторами с разными разрешениями.</span><span class="sxs-lookup"><span data-stu-id="7c510-149">The size of a full-screen window needs to change as it moves among monitors with different resolutions.</span></span> <span data-ttu-id="7c510-150">Для этого приложение должно проверить, в каком окне оно находится, использовать [**мониторфромвиндов**](/windows/desktop/api/Winuser/nf-winuser-monitorfromwindow) или [**мониторфромпоинт**](/windows/desktop/api/Winuser/nf-winuser-monitorfrompoint) , а затем использовать [**жетмониторинфо**](/windows/desktop/api/Winuser/nf-winuser-getmonitorinfoa) для получения размера монитора.</span><span class="sxs-lookup"><span data-stu-id="7c510-150">To do this, the application must check what window it is on, using [**MonitorFromWindow**](/windows/desktop/api/Winuser/nf-winuser-monitorfromwindow) or [**MonitorFromPoint**](/windows/desktop/api/Winuser/nf-winuser-monitorfrompoint) , and then use [**GetMonitorInfo**](/windows/desktop/api/Winuser/nf-winuser-getmonitorinfoa) to get the size of the monitor.</span></span> <span data-ttu-id="7c510-151">В качестве альтернативы можно использовать **хмонитор** из функции DirectX **директдравенумератикс** .</span><span class="sxs-lookup"><span data-stu-id="7c510-151">As an alternative, you could use the **HMONITOR** from the DirectX **DirectDrawEnumerateEx** function.</span></span> <span data-ttu-id="7c510-152">Затем используйте [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos) для позиционирования и изменения размера окна, чтобы охватить монитор.</span><span class="sxs-lookup"><span data-stu-id="7c510-152">Then use [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos) to position and size the window to cover the monitor.</span></span>

<span data-ttu-id="7c510-153">Развернутое окно не охватывает панель задач с свойством "Always On Top".</span><span class="sxs-lookup"><span data-stu-id="7c510-153">A maximized window does not cover a taskbar that has the "Always on top" property.</span></span> <span data-ttu-id="7c510-154">Однако полноэкранное окно охватывает панель задач, например, в презентации и игры Microsoft PowerPoint.</span><span class="sxs-lookup"><span data-stu-id="7c510-154">However, a full-screen window covers the taskbar--for example, in Microsoft PowerPoint slide shows and games.</span></span>

<span data-ttu-id="7c510-155">Чтобы сохранить и впоследствии восстановить расположение окна при выходе из приложения, используйте функции [**жетвиндовплацемент**](/windows/win32/api/winuser/nf-winuser-getwindowplacement) и [**сетвиндовплацемент**](/windows/win32/api/winuser/nf-winuser-setwindowplacement) .</span><span class="sxs-lookup"><span data-stu-id="7c510-155">To save, and later restore, the position of a window when an application exits, use the [**GetWindowPlacement**](/windows/win32/api/winuser/nf-winuser-getwindowplacement) and [**SetWindowPlacement**](/windows/win32/api/winuser/nf-winuser-setwindowplacement) functions.</span></span> <span data-ttu-id="7c510-156">Однако убедитесь, что она все еще действительна, прежде чем использовать ее, так как монитор мог быть перемещен или удален из системы.</span><span class="sxs-lookup"><span data-stu-id="7c510-156">However, check that the position is still valid before using it because the monitor could have been moved or removed from the system.</span></span> <span data-ttu-id="7c510-157">Приложение отображает окно на основном мониторе, если **хмонитор** окна является недопустимым.</span><span class="sxs-lookup"><span data-stu-id="7c510-157">The application displays the window on the primary monitor if the **HMONITOR** of a window is invalid.</span></span>

<span data-ttu-id="7c510-158">Система пытается запустить приложение на мониторе, который содержит ярлык.</span><span class="sxs-lookup"><span data-stu-id="7c510-158">The system tries to start an application on the monitor that contains its shortcut.</span></span> <span data-ttu-id="7c510-159">Таким образом, одним из способов размещения приложения является его ярлык на нужном мониторе.</span><span class="sxs-lookup"><span data-stu-id="7c510-159">So, one way to position an application is to have its shortcut on a desired monitor.</span></span>

<span data-ttu-id="7c510-160">Если вы используете [**ShellExecute**](/windows/win32/api/shellapi/nf-shellapi-shellexecutea) или [**ShellExecuteEx**](/windows/win32/api/shellapi/nf-shellapi-shellexecuteexa) , предоставьте *HWND* , чтобы система открывала все новые окна на том же мониторе, что и вызывающее приложение.</span><span class="sxs-lookup"><span data-stu-id="7c510-160">If you use [**ShellExecute**](/windows/win32/api/shellapi/nf-shellapi-shellexecutea) or [**ShellExecuteEx**](/windows/win32/api/shellapi/nf-shellapi-shellexecuteexa) , supply an *hWnd* so the system will open any new windows on the same monitor as the calling application.</span></span>

<span data-ttu-id="7c510-161">Обратите внимание, что значения для структуры [**минмаксинфо**](/windows/win32/api/winuser/ns-winuser-minmaxinfo) немного изменены для системы с несколькими мониторами.</span><span class="sxs-lookup"><span data-stu-id="7c510-161">Note that the values for the [**MINMAXINFO**](/windows/win32/api/winuser/ns-winuser-minmaxinfo) structure are slightly altered for a system with multiple monitors.</span></span>

 

 
