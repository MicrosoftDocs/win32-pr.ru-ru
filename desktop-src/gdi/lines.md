---
description: 'Линия — это набор выделенных пикселов на растровом дисплее (или набор точек на печатной странице), определяемый двумя точками: Начальная и конечная точки.'
ms.assetid: 538aa3c3-e13a-40dc-b977-3e353a7e9893
title: Линии
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 64cd678f782567e98d32ab7f8786d5b87aab1918
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104263672"
---
# <a name="lines"></a><span data-ttu-id="ab173-103">Линии</span><span class="sxs-lookup"><span data-stu-id="ab173-103">Lines</span></span>

<span data-ttu-id="ab173-104">Линия — это набор выделенных пикселов на растровом дисплее (или набор точек на печатной странице), определяемый двумя точками: Начальная и конечная точки.</span><span class="sxs-lookup"><span data-stu-id="ab173-104">A line is a set of highlighted pixels on a raster display (or a set of dots on a printed page) identified by two points: a starting point and an ending point.</span></span> <span data-ttu-id="ab173-105">Пиксел, расположенный в начальной точке, всегда включается в строку, а пиксел, расположенный в конечной точке, всегда исключается.</span><span class="sxs-lookup"><span data-stu-id="ab173-105">The pixel located at the starting point is always included in the line, and the pixel located at the ending point is always excluded.</span></span> <span data-ttu-id="ab173-106">(Этот тип линии иногда называют инклюзивным).</span><span class="sxs-lookup"><span data-stu-id="ab173-106">(This kind of line is sometimes called inclusive-exclusive.)</span></span>

<span data-ttu-id="ab173-107">Когда приложение вызывает одну из функций рисования линий, интерфейс графических устройств (GDI) или в некоторых случаях драйвер устройства, определяет, какие пикселы должны быть выделены.</span><span class="sxs-lookup"><span data-stu-id="ab173-107">When an application calls one of the line-drawing functions, graphics device interface (GDI), or in some cases a device driver, determines which pixels should be highlighted.</span></span> <span data-ttu-id="ab173-108">GDI — это библиотека динамической компоновки (DLL), которая обрабатывает вызовы графических функций из приложения и передает эти вызовы драйверу устройства.</span><span class="sxs-lookup"><span data-stu-id="ab173-108">GDI is a dynamic-link library (DLL) that processes graphics function calls from an application and passes those calls to a device driver.</span></span> <span data-ttu-id="ab173-109">Драйвер устройства — это библиотека DLL, которая получает входные данные из GDI, преобразует входные данные в команды устройства и передает эти команды соответствующему устройству.</span><span class="sxs-lookup"><span data-stu-id="ab173-109">A device driver is a DLL that receives input from GDI, converts the input to device commands, and passes those commands to the appropriate device.</span></span> <span data-ttu-id="ab173-110">GDI использует анализатор цифровых разностных копий (ДДА) для определения набора пикселей, определяющих линию.</span><span class="sxs-lookup"><span data-stu-id="ab173-110">GDI uses a digital differential analyzer (DDA) to determine the set of pixels that define a line.</span></span> <span data-ttu-id="ab173-111">ДДА определяет набор пикселей, изучая каждую точку в строке и определяя Пиксели на отображаемой поверхности (или на печатной странице), которые соответствуют точкам.</span><span class="sxs-lookup"><span data-stu-id="ab173-111">A DDA determines the set of pixels by examining each point on the line and identifying those pixels on the display surface (or dots on a printed page) that correspond to the points.</span></span> <span data-ttu-id="ab173-112">На следующем рисунке показана линия, ее начальная точка, конечная точка и Пиксели, выделенные с помощью простого ДДА.</span><span class="sxs-lookup"><span data-stu-id="ab173-112">The following illustration shows a line, its starting point, its ending point, and the pixels highlighted by using a simple DDA.</span></span>

![Иллюстрация, показывающая сетку пикселей, начальную и конечную точки, линию и заливку в пикселях, расположенных вдоль линии](images/cslcv-01.png)

<span data-ttu-id="ab173-114">Самым простым и наиболее распространенным ДДА является Бресенхам или добавочный, ДДА.</span><span class="sxs-lookup"><span data-stu-id="ab173-114">The simplest and most common DDA is the Bresenham, or incremental, DDA.</span></span> <span data-ttu-id="ab173-115">Измененная версия этого алгоритма рисует линии в Windows.</span><span class="sxs-lookup"><span data-stu-id="ab173-115">A modified version of this algorithm draws lines in Windows.</span></span> <span data-ttu-id="ab173-116">Добавочный ДДА отмечается для простоты, но также отмечается как неточность.</span><span class="sxs-lookup"><span data-stu-id="ab173-116">The incremental DDA is noted for its simplicity, but it is also noted for its inaccuracy.</span></span> <span data-ttu-id="ab173-117">Поскольку он округляет до ближайшего целого числа, иногда он не может представлять исходную строку, запрашиваемую приложением.</span><span class="sxs-lookup"><span data-stu-id="ab173-117">Because it rounds off to the nearest integer value, it sometimes fails to represent the original line requested by the application.</span></span> <span data-ttu-id="ab173-118">ДДА, используемый GDI, не округляется до ближайшего целого числа.</span><span class="sxs-lookup"><span data-stu-id="ab173-118">The DDA used by GDI does not round off to the nearest integer.</span></span> <span data-ttu-id="ab173-119">В результате этот новый ДДА создает выходные данные, которые иногда намного ближе к первоначальной строке, запрошенной приложением.</span><span class="sxs-lookup"><span data-stu-id="ab173-119">As a result, this new DDA produces output that is sometimes much closer in appearance to the original line requested by the application.</span></span>

> [!Note]  
> <span data-ttu-id="ab173-120">Если приложению требуется вывод строки, который не может быть достигнут с помощью нового ДДА, он может нарисовать собственные строки путем вызова функции [**линедда**](/windows/desktop/api/Wingdi/nf-wingdi-linedda) и предоставления закрытого ДДА ([**линеддапрок**](/windows/desktop/api/Wingdi/nc-wingdi-lineddaproc)).</span><span class="sxs-lookup"><span data-stu-id="ab173-120">If an application requires line output that cannot be achieved with the new DDA, it can draw its own lines by calling the [**LineDDA**](/windows/desktop/api/Wingdi/nf-wingdi-linedda) function and supplying a private DDA ([**LineDDAProc**](/windows/desktop/api/Wingdi/nc-wingdi-lineddaproc)).</span></span> <span data-ttu-id="ab173-121">Однако функция **линедда** рисует строки намного медленнее, чем функции рисования строк.</span><span class="sxs-lookup"><span data-stu-id="ab173-121">However, the **LineDDA** function draws lines much slower than the line-drawing functions.</span></span> <span data-ttu-id="ab173-122">Не используйте эту функцию в приложении, если скорость является основной задачей.</span><span class="sxs-lookup"><span data-stu-id="ab173-122">Do not use this function within an application if speed is a primary concern.</span></span>

 

<span data-ttu-id="ab173-123">Приложение может использовать новый ДДА для рисования отдельных линий и нескольких соединенных линий.</span><span class="sxs-lookup"><span data-stu-id="ab173-123">An application can use the new DDA to draw single lines and multiple, connected line segments.</span></span> <span data-ttu-id="ab173-124">Приложение может нарисовать одну строку, вызвав функцию [**lineTo**](/windows/desktop/api/Wingdi/nf-wingdi-lineto) .</span><span class="sxs-lookup"><span data-stu-id="ab173-124">An application can draw a single line by calling the [**LineTo**](/windows/desktop/api/Wingdi/nf-wingdi-lineto) function.</span></span> <span data-ttu-id="ab173-125">Эта функция рисует строку от текущей позиции до, но не включает указанную конечную точку.</span><span class="sxs-lookup"><span data-stu-id="ab173-125">This function draws a line from the current position up to, but not including, a specified ending point.</span></span> <span data-ttu-id="ab173-126">Приложение может нарисовать ряд соединенных линий, вызывая функцию [**ломаной**](/windows/desktop/api/Wingdi/nf-wingdi-polyline) линии, предоставляя массив точек, задающих конечную точку каждого сегмента линии.</span><span class="sxs-lookup"><span data-stu-id="ab173-126">An application can draw a series of connected line segments by calling the [**Polyline**](/windows/desktop/api/Wingdi/nf-wingdi-polyline) function, supplying an array of points that specify the ending point of each line segment.</span></span> <span data-ttu-id="ab173-127">Приложение может рисовать несколько несвязных сегментов Соединенных линий путем вызова функции [**ломаной**](/windows/desktop/api/Wingdi/nf-wingdi-polypolyline) линии, предоставляя необходимые конечные точки.</span><span class="sxs-lookup"><span data-stu-id="ab173-127">An application can draw multiple, disjointed series of connected line segments by calling the [**PolyPolyline**](/windows/desktop/api/Wingdi/nf-wingdi-polypolyline) function, supplying the required ending points.</span></span>

<span data-ttu-id="ab173-128">На следующем рисунке показаны выходные данные, созданные при вызове функций [**lineTo**](/windows/desktop/api/Wingdi/nf-wingdi-lineto), [**ломаной**](/windows/desktop/api/Wingdi/nf-wingdi-polyline)и [**ломаной**](/windows/desktop/api/Wingdi/nf-wingdi-polypolyline) линий.</span><span class="sxs-lookup"><span data-stu-id="ab173-128">The following illustration shows line output created by calling the [**LineTo**](/windows/desktop/api/Wingdi/nf-wingdi-lineto), [**Polyline**](/windows/desktop/api/Wingdi/nf-wingdi-polyline), and [**PolyPolyline**](/windows/desktop/api/Wingdi/nf-wingdi-polypolyline) functions.</span></span>

![Иллюстрация, показывающая прямую линию, поле "l" в форме и две фигуры, которые выглядят как трехмерные](images/cslcv-02.png)

 

 



