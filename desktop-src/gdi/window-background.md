---
description: Фон окна — это цвет или шаблон, используемый для заполнения клиентской области перед началом рисования окна.
ms.assetid: d0613f9b-e65b-4de2-887d-2b642d36b22d
title: Фон окна
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 32d567b0bdc38866cd9332ff8ed399bfb23f53c8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103908939"
---
# <a name="window-background"></a><span data-ttu-id="0d0ca-103">Фон окна</span><span class="sxs-lookup"><span data-stu-id="0d0ca-103">Window Background</span></span>

<span data-ttu-id="0d0ca-104">Фон окна — это цвет или шаблон, используемый для заполнения клиентской области перед началом рисования окна.</span><span class="sxs-lookup"><span data-stu-id="0d0ca-104">The window background is the color or pattern used to fill the client area before a window begins drawing.</span></span> <span data-ttu-id="0d0ca-105">Фон окна охватывает все, что было на экране до перемещения окна, стирание существующих изображений и предотвращение смешивания новых выходных данных приложения с несвязанными данными.</span><span class="sxs-lookup"><span data-stu-id="0d0ca-105">The window background covers whatever was on the screen before the window was moved there, erasing existing images and preventing the application's new output from being mixed with unrelated information.</span></span>

<span data-ttu-id="0d0ca-106">Система рисует фон окна или дает окну возможность сделать это, отправив ему сообщение [**WM \_ ерасебкгнд**](../winmsg/wm-erasebkgnd.md) , когда приложение вызовет [**бегинпаинт**](/windows/desktop/api/Winuser/nf-winuser-beginpaint).</span><span class="sxs-lookup"><span data-stu-id="0d0ca-106">The system paints the background for a window or gives the window the opportunity to do so by sending it a [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md) message when the application calls [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint).</span></span> <span data-ttu-id="0d0ca-107">Если приложение не обрабатывает сообщение, но передает его в [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca), система удаляет фон, заполняя его шаблоном в фоновой кисти, заданной классом окна.</span><span class="sxs-lookup"><span data-stu-id="0d0ca-107">If an application does not process the message but passes it to [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca), the system erases the background by filling it with the pattern in the background brush specified by the window's class.</span></span> <span data-ttu-id="0d0ca-108">Если кисть недопустима или класс не имеет фоновой кисти, система устанавливает элемент **ферасе** в структуре [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) , которую **бегинпаинт** возвращает, но не выполняет никаких других действий.</span><span class="sxs-lookup"><span data-stu-id="0d0ca-108">If the brush is not valid or the class has no background brush, the system sets the **fErase** member in the [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) structure that **BeginPaint** returns, but carries out no other action.</span></span> <span data-ttu-id="0d0ca-109">При необходимости приложение имеет вторую возможность рисования фона окна.</span><span class="sxs-lookup"><span data-stu-id="0d0ca-109">The application then has a second chance to draw the window background, if necessary.</span></span>

<span data-ttu-id="0d0ca-110">Если он обрабатывает [**WM \_ ерасебкгнд**](../winmsg/wm-erasebkgnd.md), приложение должно использовать параметр *wParam* сообщения для рисования фона.</span><span class="sxs-lookup"><span data-stu-id="0d0ca-110">If it processes [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md), the application should use the message's *wParam* parameter to draw the background.</span></span> <span data-ttu-id="0d0ca-111">Этот параметр содержит маркер контекста устройства просмотра для окна.</span><span class="sxs-lookup"><span data-stu-id="0d0ca-111">This parameter contains a handle to the display device context for the window.</span></span> <span data-ttu-id="0d0ca-112">После рисования фона приложение должно вернуть ненулевое значение.</span><span class="sxs-lookup"><span data-stu-id="0d0ca-112">After drawing the background, the application should return a nonzero value.</span></span> <span data-ttu-id="0d0ca-113">Это гарантирует, что [**бегинпаинт**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) не будет ошибочно присвоить элементу **ферасе** структуры [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) ненулевое значение (что означает, что фон должен быть стерт), когда приложение обрабатывает последующее сообщение [**WM \_ Paint**](wm-paint.md) .</span><span class="sxs-lookup"><span data-stu-id="0d0ca-113">This ensures that [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) does not erroneously set the **fErase** member of the [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) structure to a nonzero value (indicating the background should be erased) when the application processes the subsequent [**WM\_PAINT**](wm-paint.md) message.</span></span>

<span data-ttu-id="0d0ca-114">Приложение может определить кисть фона класса, назначив маркер кисти или значение системного цвета элементу **хбрбаккграунд** структуры [**вндкласс**](/windows/win32/api/winuser/ns-winuser-wndclassa) при регистрации класса с помощью функции [**registerClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) .</span><span class="sxs-lookup"><span data-stu-id="0d0ca-114">An application can define a class background brush by assigning a brush handle or a system color value to the **hbrBackground** member of the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure when registering the class with the [**RegisterClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) function.</span></span> <span data-ttu-id="0d0ca-115">Для создания маркера кисти можно использовать функцию [**жетстоккобжект**](/windows/desktop/api/Wingdi/nf-wingdi-getstockobject) или [**креатесолидбруш**](/windows/desktop/api/Wingdi/nf-wingdi-createsolidbrush) .</span><span class="sxs-lookup"><span data-stu-id="0d0ca-115">The [**GetStockObject**](/windows/desktop/api/Wingdi/nf-wingdi-getstockobject) or [**CreateSolidBrush**](/windows/desktop/api/Wingdi/nf-wingdi-createsolidbrush) function can be used to create a brush handle.</span></span> <span data-ttu-id="0d0ca-116">Значение системного цвета может быть одним из значений, определенных для функции [**сетсисколорс**](/windows/win32/api/winuser/nf-winuser-setsyscolors) .</span><span class="sxs-lookup"><span data-stu-id="0d0ca-116">A system color value can be one of those defined for the [**SetSysColors**](/windows/win32/api/winuser/nf-winuser-setsyscolors) function.</span></span> <span data-ttu-id="0d0ca-117">(Значение должно быть увеличено на единицу до того, как оно будет назначено элементу.)</span><span class="sxs-lookup"><span data-stu-id="0d0ca-117">(The value must be increased by one before it is assigned to the member.)</span></span>

<span data-ttu-id="0d0ca-118">Приложение может обработать сообщение [**WM \_ ерасебкгнд**](../winmsg/wm-erasebkgnd.md) , даже если определена кисть фона класса.</span><span class="sxs-lookup"><span data-stu-id="0d0ca-118">An application can process the [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md) message even though a class background brush is defined.</span></span> <span data-ttu-id="0d0ca-119">Это типично в приложениях, которые позволяют пользователю изменять цвет фона окна или узор для указанного окна, не затрагивая другие окна в классе.</span><span class="sxs-lookup"><span data-stu-id="0d0ca-119">This is typical in applications that enable the user to change the window background color or pattern for a specified window without affecting other windows in the class.</span></span> <span data-ttu-id="0d0ca-120">В таких случаях приложение не должно передавать сообщение в [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span><span class="sxs-lookup"><span data-stu-id="0d0ca-120">In such cases, the application must not pass the message to [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span></span>

<span data-ttu-id="0d0ca-121">В приложении нет необходимости выстроить кисти, так как система рисует кисть с помощью исходного окна в качестве точки ссылки.</span><span class="sxs-lookup"><span data-stu-id="0d0ca-121">It is not necessary for an application to align brushes, because the system draws the brush using the window origin as the point of reference.</span></span> <span data-ttu-id="0d0ca-122">Учитывая это, пользователь может перемещать окно, не влияя на выравнивание узорных кистей.</span><span class="sxs-lookup"><span data-stu-id="0d0ca-122">Given this, the user can move the window without affecting the alignment of pattern brushes.</span></span>

 

 
