---
description: Дочернее окно — это окно с \_ стилем WS-Child или WS \_ CHILDWINDOW.
ms.assetid: d8110492-c1b9-4b49-9b34-587adb7c65c9
title: Регион обновления дочернего окна
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3b92e6cba93c3be253b8ed8616bdcf9301e92494
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103991504"
---
# <a name="child-window-update-region"></a><span data-ttu-id="5000e-103">Регион обновления дочернего окна</span><span class="sxs-lookup"><span data-stu-id="5000e-103">Child Window Update Region</span></span>

<span data-ttu-id="5000e-104">Дочернее окно — это окно с \_ стилем WS-Child или WS \_ CHILDWINDOW.</span><span class="sxs-lookup"><span data-stu-id="5000e-104">A child window is a window with the WS\_CHILD or WS\_CHILDWINDOW style.</span></span> <span data-ttu-id="5000e-105">Как и другие стили окна, дочерние окна получают сообщения [**WM \_ Paint**](wm-paint.md) для запроса на обновление.</span><span class="sxs-lookup"><span data-stu-id="5000e-105">Like other window styles, child windows receive [**WM\_PAINT**](wm-paint.md) messages to prompt updating.</span></span> <span data-ttu-id="5000e-106">Каждое дочернее окно имеет регион обновления, который либо система, либо приложение могут быть настроены для формирования конечных сообщений **WM \_ Paint** .</span><span class="sxs-lookup"><span data-stu-id="5000e-106">Each child window has an update region, which either the system or the application can set to generate eventual **WM\_PAINT** messages.</span></span>

<span data-ttu-id="5000e-107">Родительское окно дочернего элемента влияет на обновление и видимые области дочернего окна. Это неверно для Windows других стилей.</span><span class="sxs-lookup"><span data-stu-id="5000e-107">A child window's update and visible regions are affected by the child's parent window; this is not true for windows of other styles.</span></span> <span data-ttu-id="5000e-108">Система часто задает область обновления дочернего окна, когда задается область обновления родительского окна, в результате чего дочернее окно получает сообщения [**WM \_ Paint**](wm-paint.md) при получении их родительским окном.</span><span class="sxs-lookup"><span data-stu-id="5000e-108">The system often sets the child window's update region when it sets the parent window's update region, causing the child window to receive [**WM\_PAINT**](wm-paint.md) messages when the parent window receives them.</span></span> <span data-ttu-id="5000e-109">Система ограничивает расположение видимой области дочернего окна в пределах клиентской области родительского окна и обрезает любую часть дочернего окна, перемещенную за пределы родительского окна.</span><span class="sxs-lookup"><span data-stu-id="5000e-109">The system limits the location of the child window's visible region to within the client area of the parent window and clips any portion of the child window moved outside the parent window.</span></span>

<span data-ttu-id="5000e-110">Система устанавливает регион обновления для дочернего окна, когда часть области обновления родительского окна включает часть дочернего окна.</span><span class="sxs-lookup"><span data-stu-id="5000e-110">The system sets the update region for a child window whenever part of the parent window's update region includes a portion of the child window.</span></span> <span data-ttu-id="5000e-111">В таких случаях система сначала отправляет сообщение [**WM \_ Paint**](wm-paint.md) в родительское окно, а затем отправляет сообщение в дочернее окно, позволяя дочернему окну восстанавливать части окна, которые могут быть выведены родительским элементом.</span><span class="sxs-lookup"><span data-stu-id="5000e-111">In such cases, the system first sends a [**WM\_PAINT**](wm-paint.md) message to the parent window and then sends a message to the child window, allowing the child to restore any portions of the window that the parent may have drawn over.</span></span>

<span data-ttu-id="5000e-112">Система не устанавливает регион обновления родительского элемента, если задан дочерний элемент.</span><span class="sxs-lookup"><span data-stu-id="5000e-112">The system does not set the parent's update region when the child's is set.</span></span> <span data-ttu-id="5000e-113">Приложение не может создать сообщение [**WM \_ Paint**](wm-paint.md) для родительского окна путем непроверки дочернего окна.</span><span class="sxs-lookup"><span data-stu-id="5000e-113">An application cannot generate a [**WM\_PAINT**](wm-paint.md) message for the parent window by invalidating the child window.</span></span> <span data-ttu-id="5000e-114">Аналогичным образом приложение не может создать сообщение **WM \_ Paint** для дочернего элемента за счет недействительной части клиентской области родителя, которая полностью находится в дочернем окне.</span><span class="sxs-lookup"><span data-stu-id="5000e-114">Similarly, an application cannot generate a **WM\_PAINT** message for the child by invalidating a portion of the parent's client area that lies entirely under the child window.</span></span> <span data-ttu-id="5000e-115">В таких случаях ни одно из окон не получает сообщение **WM \_ Paint** .</span><span class="sxs-lookup"><span data-stu-id="5000e-115">In such cases, neither window receives a **WM\_PAINT** message.</span></span>

<span data-ttu-id="5000e-116">Приложение может препятствовать установке области обновления дочернего окна при установке родительского окна путем указания \_ стиля WS клипчилдрен при создании родительского окна.</span><span class="sxs-lookup"><span data-stu-id="5000e-116">An application can prevent a child window's update region from being set when the parent window's is set by specifying the WS\_CLIPCHILDREN style when creating the parent window.</span></span> <span data-ttu-id="5000e-117">Если этот стиль задан, система исключает дочерние окна из видимой области родительского элемента и, таким образом, пропускает любую часть области обновления, которая может содержать дочерние окна.</span><span class="sxs-lookup"><span data-stu-id="5000e-117">When this style is set, the system excludes the child windows from the parent's visible region and therefore ignores any portion of the update region that may contain the child windows.</span></span> <span data-ttu-id="5000e-118">Когда приложение рисует в родительском окне, любой рисунок, который будет охватывать дочернее окно, обрезается, что делает последующее сообщение [**WM \_ Paint**](wm-paint.md) ненужным для дочернего окна.</span><span class="sxs-lookup"><span data-stu-id="5000e-118">When the application paints in the parent window, any drawing that would cover the child window is clipped, making a subsequent [**WM\_PAINT**](wm-paint.md) message to the child window unnecessary.</span></span>

<span data-ttu-id="5000e-119">На обновление и видимые области дочернего окна также влияют родственные элементы дочернего окна.</span><span class="sxs-lookup"><span data-stu-id="5000e-119">The update and visible regions of a child window are also affected by the child window's siblings.</span></span> <span data-ttu-id="5000e-120">Одноуровневые окна — это все окна, имеющие общее родительское окно.</span><span class="sxs-lookup"><span data-stu-id="5000e-120">Sibling windows are any windows that have a common parent window.</span></span> <span data-ttu-id="5000e-121">Если одноуровневые окна перекрываются, установка региона обновления для одной влияет на область обновления другого, что приводит к отправке сообщений [**WM \_ Paint**](wm-paint.md) в оба окна.</span><span class="sxs-lookup"><span data-stu-id="5000e-121">If sibling windows overlap, then setting the update region for one affects the update region of another, causing [**WM\_PAINT**](wm-paint.md) messages to be sent to both windows.</span></span> <span data-ttu-id="5000e-122">Если окно в родительской цепочке является составным (окно с WX \_ ex \_ ), то одноуровневый узел получит сообщения **WM \_ Paint** в обратном порядке в порядке Z.</span><span class="sxs-lookup"><span data-stu-id="5000e-122">If a window in the parent chain is composited (a window with WX\_EX\_COMPOSITED), sibling windows receive **WM\_PAINT** messages in the reverse order of their position in the Z order.</span></span> <span data-ttu-id="5000e-123">Учитывая это, окно с максимальным приоритетом в Z-порядке (сверху) получает сообщение **WM \_ Paint** Last и наоборот.</span><span class="sxs-lookup"><span data-stu-id="5000e-123">Given this, the window highest in the Z order (on the top) receives its **WM\_PAINT** message last, and vice versa.</span></span> <span data-ttu-id="5000e-124">Если окно в родительской цепочке не является составным, то родственные окна получают сообщения **WM \_ Paint** в порядке Z.</span><span class="sxs-lookup"><span data-stu-id="5000e-124">If a window in the parent chain is not composited, sibling windows receive **WM\_PAINT** messages in Z order.</span></span>

<span data-ttu-id="5000e-125">Одноуровневые окна не обрезаются автоматически.</span><span class="sxs-lookup"><span data-stu-id="5000e-125">Sibling windows are not automatically clipped.</span></span> <span data-ttu-id="5000e-126">Один элемент того же уровня может нарисовать другой перекрывающий одноуровневый элемент, даже если окно, которое рисуется, имеет нижнюю точку в Z-порядке.</span><span class="sxs-lookup"><span data-stu-id="5000e-126">One sibling can draw over another overlapping sibling even if the window that is drawing has a lower position in the Z order.</span></span> <span data-ttu-id="5000e-127">Приложение может предотвратить это, указав \_ стиль WS клипсиблингс при создании окна.</span><span class="sxs-lookup"><span data-stu-id="5000e-127">An application can prevent this by specifying the WS\_CLIPSIBLINGS style when creating the windows.</span></span> <span data-ttu-id="5000e-128">Если этот стиль задан, система исключает все части перекрывающейся одноуровневого окна из видимой области окна, если перекрытие одноуровневого окна имеет более высокую точку в Z-порядке.</span><span class="sxs-lookup"><span data-stu-id="5000e-128">When this style is set, the system excludes all portions of an overlapping sibling window from a window's visible region if the overlapping sibling window has a higher position in the Z order.</span></span>

> [!Note]  
> <span data-ttu-id="5000e-129">Родительские окна не затрагивают обновления и видимые регионы для окон, у которых нет \_ всплывающего окна или \_ стиля WS POPUPWINDOW.</span><span class="sxs-lookup"><span data-stu-id="5000e-129">The update and visible regions for windows that have the WS\_POPUP or WS\_POPUPWINDOW style are not affected by their parent windows.</span></span>

 

 

 



