---
description: Некоторые функции Font и Text-Output имеют параметр, указывающий длину строки вывода текста. Типичным примером является параметр Кчтекст объекта Дравтекстекс.
ms.assetid: 695fd0f9-abd4-4666-acad-2c409624ddc6
title: Указание длины текстовой строки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2c120026d1b65170b6fe35bc65400280f6f1ffa5
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103999279"
---
# <a name="specifying-length-of-text-output-string"></a><span data-ttu-id="4d1a5-104">Указание длины текстовой строки</span><span class="sxs-lookup"><span data-stu-id="4d1a5-104">Specifying length of text-output string</span></span>

<span data-ttu-id="4d1a5-105">Некоторые функции Font и Text-Output имеют параметр, указывающий длину строки вывода текста.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-105">Several of the font and text-output functions have a parameter that specifies the length of the text-output string.</span></span> <span data-ttu-id="4d1a5-106">Типичным примером является параметр *кчтекст* объекта [**дравтекстекс**](/windows/desktop/api/Winuser/nf-winuser-drawtextexa).</span><span class="sxs-lookup"><span data-stu-id="4d1a5-106">A typical example is the *cchText* parameter of [**DrawTextEx**](/windows/desktop/api/Winuser/nf-winuser-drawtextexa).</span></span>

<span data-ttu-id="4d1a5-107">Каждая из этих функций имеет как версию ANSI, так и версию Юникода (например, [**дравтекстекса**](/windows/desktop/api/Winuser/nf-winuser-drawtextexa) и **дравтекстексв** соответственно).</span><span class="sxs-lookup"><span data-stu-id="4d1a5-107">Each of these functions has both an "ANSI" version and a Unicode version (for example, [**DrawTextExA**](/windows/desktop/api/Winuser/nf-winuser-drawtextexa) and **DrawTextExW**, respectively).</span></span> <span data-ttu-id="4d1a5-108">Для версии каждой функции в формате ANSI длина указывается в виде числа БАЙТОВ, а для функции Юникода она указывается в виде числа слов.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-108">For the "ANSI" version of each function, the length is specified as a BYTE count and for the Unicode function it is specified as a WORD count.</span></span>

<span data-ttu-id="4d1a5-109">Это традиционно обдумать как «число символов».</span><span class="sxs-lookup"><span data-stu-id="4d1a5-109">It is traditional to think of this as a "character count".</span></span> <span data-ttu-id="4d1a5-110">Это, как правило, точная для многих языков, включая английский, но в целом он неточен.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-110">That is generally accurate for many languages, including English, but it is not accurate in general.</span></span> <span data-ttu-id="4d1a5-111">В строках "ANSI" [символы в однобайтовых](../intl/single-byte-character-sets.md) кодовых страницах занимают один байтов, но большинство символов в кодовых страницах [DBCS](../intl/double-byte-character-sets.md) принимают два байта.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-111">In "ANSI" strings, characters in [SBCS](../intl/single-byte-character-sets.md) code pages take one byte each, but most characters in [DBCS](../intl/double-byte-character-sets.md) code pages take two bytes.</span></span> <span data-ttu-id="4d1a5-112">Аналогичным образом, большинство заданных в Юникоде символов находятся на основной многоязыковой плоскости (BMP), а их представления UTF-16 — в одном СЛОВе, но дополнительные символы представлены в Юникоде символами "" суррогатов "", которым требуется два слова.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-112">Similarly, most currently defined Unicode characters reside in the Basic Multilingual Plane (BMP) and their UTF-16 representations fit in one WORD, but supplementary characters are represented in Unicode by ''surrogates'', which require two WORDs.</span></span>

<span data-ttu-id="4d1a5-113">Каждая из этих функций имеет длину.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-113">Each of these functions takes a length count.</span></span> <span data-ttu-id="4d1a5-114">Для версии каждой функции в формате ANSI длина указывается как длина количества байт строки, не включая признак конца **null** .</span><span class="sxs-lookup"><span data-stu-id="4d1a5-114">For the "ANSI" version of each function, the length is specified as a BYTE count length of a string not including the **NULL** terminator.</span></span> <span data-ttu-id="4d1a5-115">Для функции Юникода счетчик длины — это число байтов, разделенное на sizeof (WCHAR), равное 2, не включая признак конца **null** .</span><span class="sxs-lookup"><span data-stu-id="4d1a5-115">For the Unicode function, the length count is the byte count divided by sizeof(WCHAR), which is 2, not including the **NULL** terminator.</span></span> <span data-ttu-id="4d1a5-116">Число символов — это количество символов, которые могут не совпадать с длиной строки.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-116">The character count is the count of the number of characters, which might not equal the length count of the string.</span></span> <span data-ttu-id="4d1a5-117">В некоторых случаях символы принимают более одного БАЙТа для ANSI (например, символ [DBCS](../intl/double-byte-character-sets.md) ) и более одного слова для Юникода (например, символы-заместители).</span><span class="sxs-lookup"><span data-stu-id="4d1a5-117">In some instances, characters take more than one BYTE for ANSI (for example, [DBCS](../intl/double-byte-character-sets.md) character) and more than one WORD for Unicode (for example, surrogate characters).</span></span> <span data-ttu-id="4d1a5-118">Кроме того, число глифов может не равняться числу символов, поскольку несколько символов могут быть совмещены для создания одного глифа.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-118">Further, the number of glyphs might not equal the number of characters because multiple characters might be composited to make one glyph.</span></span> <span data-ttu-id="4d1a5-119">Счетчик длины — это объем данных.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-119">Length count is the amount of data.</span></span> <span data-ttu-id="4d1a5-120">Число символов — это количество единиц, обработанных как одна сущность.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-120">Character count is the number of units that are processed as one entity.</span></span> <span data-ttu-id="4d1a5-121">Символы отрисовывается.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-121">Glyphs are what gets rendered.</span></span> <span data-ttu-id="4d1a5-122">Например, в Юникоде можно использовать строку длиной 3, которая состоит из двух символов, что приводит к отображению 1 глифа.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-122">For example, in Unicode, you can have a string with length of 3, which is 2 characters and which results in 1 glyph being rendered.</span></span> <span data-ttu-id="4d1a5-123">Однако, как правило, большая длина строки в Юникоде, число символов и количество визуализированных глифов равны.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-123">However, typically, most Unicode strings length, character count, and number of rendered glyphs are equal.</span></span>

<span data-ttu-id="4d1a5-124">\_Для получения длины строки можно использовать ткслен ().</span><span class="sxs-lookup"><span data-stu-id="4d1a5-124">You can use \_tcslen() to get the string length.</span></span> <span data-ttu-id="4d1a5-125">Для ANSI функция \_ ткслен () возвращает число байтов.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-125">For ANSI, \_tcslen() returns the number of bytes.</span></span> <span data-ttu-id="4d1a5-126">Для Юникода функция \_ ткслен () возвращает число вчарс (т. е. слов).</span><span class="sxs-lookup"><span data-stu-id="4d1a5-126">For Unicode, \_tcslen() returns the number of WCHARs (that is, WORDs).</span></span>

<span data-ttu-id="4d1a5-127">Специальные символы обработки, такие как знаки табуляции и мягкие дефисы, не всегда рисуются, могут повлиять на рисуемые выходные данные.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-127">Special processing characters like tabs and soft hyphens that aren't always drawn can affect the drawn output.</span></span> <span data-ttu-id="4d1a5-128">Они включаются в число строк и количество символов, но могут быть не представлены непосредственно отображаемым глифом.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-128">They get included in the string length and character counts, but might not be directly represented by a rendered glyph.</span></span>

<span data-ttu-id="4d1a5-129">Некоторые из этих функций позволяют вызывающему объекту указать длину как-1, чтобы указать, что строка завершается нулем; в этом случае функция вычислит число символов автоматически.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-129">Some of these functions allow the caller to specify the length as -1 to indicate that the string is null-terminated; in that case the function will compute the character count automatically.</span></span> <span data-ttu-id="4d1a5-130">Не все функции предлагают эту возможность.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-130">Not all of the functions offer this capability.</span></span> <span data-ttu-id="4d1a5-131">Это значение задается для каждой функции по функциям; см. документацию по отдельным функциям.</span><span class="sxs-lookup"><span data-stu-id="4d1a5-131">That is specified on a function-by-function basis; see the individual function documentation.</span></span>

 

 
