---
description: Логическая палитра — это цветовая палитра, которую приложение создает и связывает с заданным контекстом устройства.
ms.assetid: 7cc86771-237d-4539-8f48-2474edb764a4
title: Логическая палитра
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 597e049c4320ff3ac30099e767c35a3438237904
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104984944"
---
# <a name="logical-palette"></a><span data-ttu-id="4406f-103">Логическая палитра</span><span class="sxs-lookup"><span data-stu-id="4406f-103">Logical Palette</span></span>

<span data-ttu-id="4406f-104">*Логическая палитра* — это цветовая палитра, которую приложение создает и связывает с заданным контекстом устройства.</span><span class="sxs-lookup"><span data-stu-id="4406f-104">A *logical palette* is a color palette that an application creates and associates with a given device context.</span></span> <span data-ttu-id="4406f-105">Логические палитры позволяют приложениям определять и использовать цвета, соответствующие определенным потребностям.</span><span class="sxs-lookup"><span data-stu-id="4406f-105">Logical palettes let applications define and use colors that meet their specific needs.</span></span> <span data-ttu-id="4406f-106">Приложения могут создавать любое количество логических палитр, используя их для отдельных контекстов устройств или переключения между ними в контексте одного устройства.</span><span class="sxs-lookup"><span data-stu-id="4406f-106">Applications can create any number of logical palettes, using them for separate device contexts or switching between them for a single device context.</span></span> <span data-ttu-id="4406f-107">Максимальное число палитр, которое может создать приложение, зависит от ресурсов системы.</span><span class="sxs-lookup"><span data-stu-id="4406f-107">The maximum number of palettes that an application can create depends on the resources of the system.</span></span>

<span data-ttu-id="4406f-108">Приложение создает логическую палитру с помощью функции [**креатепалетте**](/windows/desktop/api/Wingdi/nf-wingdi-createpalette) .</span><span class="sxs-lookup"><span data-stu-id="4406f-108">An application creates a logical palette by using the [**CreatePalette**](/windows/desktop/api/Wingdi/nf-wingdi-createpalette) function.</span></span> <span data-ttu-id="4406f-109">Приложение заполняет структуру [**логпалетте**](/windows/win32/api/wingdi/ns-wingdi-logpalette) , которая задает количество записей и цветовых значений для каждой записи, а затем приложение передает структуру в **креатепалетте**.</span><span class="sxs-lookup"><span data-stu-id="4406f-109">The application fills a [**LOGPALETTE**](/windows/win32/api/wingdi/ns-wingdi-logpalette) structure, which specifies the number of entries and the color values for each entry, and then the application passes the structure to **CreatePalette**.</span></span> <span data-ttu-id="4406f-110">Функция возвращает маркер палитры, используемый приложением во всех последующих операциях для задания палитры.</span><span class="sxs-lookup"><span data-stu-id="4406f-110">The function returns a palette handle that the application uses in all subsequent operations to identify the palette.</span></span> <span data-ttu-id="4406f-111">Чтобы использовать цвета в логической палитре, приложение выбирает палитру в контексте устройства с помощью функции [**селектпалетте**](/windows/desktop/api/Wingdi/nf-wingdi-selectpalette) , а затем реализует палитру с помощью функции [**реализепалетте**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) .</span><span class="sxs-lookup"><span data-stu-id="4406f-111">To use colors in the logical palette, the application selects the palette into a device context by using the [**SelectPalette**](/windows/desktop/api/Wingdi/nf-wingdi-selectpalette) function and then realizes the palette by using the [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) function.</span></span> <span data-ttu-id="4406f-112">Цвета палитры доступны сразу после реализации логической палитры.</span><span class="sxs-lookup"><span data-stu-id="4406f-112">The colors in the palette are available as soon as the logical palette is realized.</span></span>

<span data-ttu-id="4406f-113">Приложение должно ограничивать размер логических палитр до достаточного количества записей, представляющих нужные цвета.</span><span class="sxs-lookup"><span data-stu-id="4406f-113">An application should limit the size of its logical palettes to just enough entries to represent the colors needed.</span></span> <span data-ttu-id="4406f-114">Приложения не могут создавать логические палитры, размер которых превышает максимальный размер палитры, зависящее от устройства значение.</span><span class="sxs-lookup"><span data-stu-id="4406f-114">Applications cannot create logical palettes larger than the maximum palette size, a device-dependent value.</span></span> <span data-ttu-id="4406f-115">Приложения могут получить максимальный размер, используя функцию [**жетдевицекапс**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) для получения значения сизепалетте.</span><span class="sxs-lookup"><span data-stu-id="4406f-115">Applications can obtain the maximum size by using the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function to retrieve the SIZEPALETTE value.</span></span>

<span data-ttu-id="4406f-116">Хотя приложение может указывать любое значение цвета для определенной записи в логической палитре, не все цвета могут создаваться данным устройством.</span><span class="sxs-lookup"><span data-stu-id="4406f-116">Although an application can specify any color value for a given entry in a logical palette, not all colors can be generated by the given device.</span></span> <span data-ttu-id="4406f-117">Система не позволяет определить, какие цвета поддерживаются, но приложение может обнаружить общее число этих цветов, извлекая цветное разрешение устройства.</span><span class="sxs-lookup"><span data-stu-id="4406f-117">The system does not provide a way to discover which colors are supported, but the application can discover the total number of these colors by retrieving the color resolution of the device.</span></span> <span data-ttu-id="4406f-118">Разрешение цвета, заданное в цветовых битах на пиксель, равно значению КОЛОРРЕС, возвращаемому функцией [**жетдевицекапс**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) .</span><span class="sxs-lookup"><span data-stu-id="4406f-118">The color resolution, specified in color bits per pixel, is equal to the COLORRES value returned by the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function.</span></span> <span data-ttu-id="4406f-119">Устройство с цветовым разрешением 18 имеет 262 144 возможных цветов.</span><span class="sxs-lookup"><span data-stu-id="4406f-119">A device that has a color resolution of 18 has 262,144 possible colors.</span></span> <span data-ttu-id="4406f-120">Если приложение запрашивает неподдерживаемый цвет, система выбирает соответствующую аппроксимацию.</span><span class="sxs-lookup"><span data-stu-id="4406f-120">If an application requests a color that is not supported, the system chooses an appropriate approximation.</span></span>

<span data-ttu-id="4406f-121">После создания логической палитры приложение может изменить цвета в палитре с помощью функции [**сетпалеттинтриес**](/windows/desktop/api/Wingdi/nf-wingdi-setpaletteentries) .</span><span class="sxs-lookup"><span data-stu-id="4406f-121">Once a logical palette is created, an application can change colors in the palette by using the [**SetPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-setpaletteentries) function.</span></span> <span data-ttu-id="4406f-122">Если логическая палитра была выбрана и реализована, изменение палитры не сразу влияет на отображаемые цвета.</span><span class="sxs-lookup"><span data-stu-id="4406f-122">If the logical palette has been selected and realized, changing the palette does not immediately affect the colors being displayed.</span></span> <span data-ttu-id="4406f-123">Для обновления цветов приложение должно использовать функции [**унреализеобжект**](/windows/desktop/api/Wingdi/nf-wingdi-unrealizeobject) и [**реализепалетте**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) .</span><span class="sxs-lookup"><span data-stu-id="4406f-123">The application must use the [**UnrealizeObject**](/windows/desktop/api/Wingdi/nf-wingdi-unrealizeobject) and [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) functions to update the colors.</span></span> <span data-ttu-id="4406f-124">В некоторых случаях приложению может потребоваться отменить выбор, не выделять, выбрать и реализовать логическую палитру, чтобы обеспечить точное обновление цветов по запросу.</span><span class="sxs-lookup"><span data-stu-id="4406f-124">In some cases, the application may need to deselect, unrealize, select, and realize the logical palette to ensure that the colors are updated exactly as requested.</span></span> <span data-ttu-id="4406f-125">Если приложение выбирает логическую палитру в более чем одном контексте устройства, изменения в логической палитре влияют на все контексты устройств, для которых он выбран.</span><span class="sxs-lookup"><span data-stu-id="4406f-125">If an application selects a logical palette into more than one device context, changes to the logical palette affect all device contexts for which it is selected.</span></span>

<span data-ttu-id="4406f-126">Приложение может изменить число записей в логической палитре с помощью функции [**ресизепалетте**](/windows/desktop/api/Wingdi/nf-wingdi-resizepalette) .</span><span class="sxs-lookup"><span data-stu-id="4406f-126">An application can change the number of entries in a logical palette by using the [**ResizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-resizepalette) function.</span></span> <span data-ttu-id="4406f-127">Если приложение уменьшает размер, оставшиеся записи не меняются.</span><span class="sxs-lookup"><span data-stu-id="4406f-127">If the application reduces the size, the remaining entries are unchanged.</span></span> <span data-ttu-id="4406f-128">Если приложение расширяет размер, система устанавливает для каждой новой записи цвет черного (0, 0, 0), а флаг — ноль.</span><span class="sxs-lookup"><span data-stu-id="4406f-128">If the application extends the size, the system sets the color for each new entry to black (0, 0, 0) and the flag to zero.</span></span>

<span data-ttu-id="4406f-129">Приложение может извлекать значения цвета и флага для записей в заданной логической палитре с помощью функции [**жетпалеттинтриес**](/windows/desktop/api/Wingdi/nf-wingdi-getpaletteentries) .</span><span class="sxs-lookup"><span data-stu-id="4406f-129">An application can retrieve the color and flag values for entries in a given logical palette by using the [**GetPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getpaletteentries) function.</span></span> <span data-ttu-id="4406f-130">Приложение может получить индекс для записи в заданной логической палитре, которая наиболее точно соответствует заданному значению цвета, с помощью функции [**жетнеарестпалеттеиндекс**](/windows/desktop/api/Wingdi/nf-wingdi-getnearestpaletteindex) .</span><span class="sxs-lookup"><span data-stu-id="4406f-130">An application can retrieve the index for the entry in a given logical palette that most closely matches a specified color value by using the [**GetNearestPaletteIndex**](/windows/desktop/api/Wingdi/nf-wingdi-getnearestpaletteindex) function.</span></span>

<span data-ttu-id="4406f-131">Если приложению больше не нужна логическая палитра, ее можно удалить с помощью функции [**DeleteObject**](/windows/desktop/api/Wingdi/nf-wingdi-deleteobject) .</span><span class="sxs-lookup"><span data-stu-id="4406f-131">When an application no longer needs a logical palette, it can delete it by using the [**DeleteObject**](/windows/desktop/api/Wingdi/nf-wingdi-deleteobject) function.</span></span> <span data-ttu-id="4406f-132">Перед удалением палитры приложение должно убедиться, что логическая палитра больше не выбрана в контексте устройства.</span><span class="sxs-lookup"><span data-stu-id="4406f-132">The application must make sure the logical palette is no longer selected into a device context before deleting the palette.</span></span>

 

 



