---
description: Объект синхронизации — это объект, маркер которого может быть указан в одной из функций ожидания для координации выполнения нескольких потоков.
ms.assetid: 11558ae9-1056-48bf-96f5-94a051df41c3
title: Объекты синхронизации
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 299cbd6225b3cc7629378f5fe500fc36ccbe8e86
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104545663"
---
# <a name="synchronization-objects"></a><span data-ttu-id="7c321-103">Объекты синхронизации</span><span class="sxs-lookup"><span data-stu-id="7c321-103">Synchronization Objects</span></span>

<span data-ttu-id="7c321-104">*Объект синхронизации* — это объект, маркер которого может быть указан в одной из [функций ожидания](wait-functions.md) для координации выполнения нескольких потоков.</span><span class="sxs-lookup"><span data-stu-id="7c321-104">A *synchronization object* is an object whose handle can be specified in one of the [wait functions](wait-functions.md) to coordinate the execution of multiple threads.</span></span> <span data-ttu-id="7c321-105">Несколько процессов могут иметь один и тот же объект синхронизации, что позволяет выполнять синхронизацию между процессами.</span><span class="sxs-lookup"><span data-stu-id="7c321-105">More than one process can have a handle to the same synchronization object, making interprocess synchronization possible.</span></span>

<span data-ttu-id="7c321-106">Следующие типы объектов предоставляются исключительно для синхронизации.</span><span class="sxs-lookup"><span data-stu-id="7c321-106">The following object types are provided exclusively for synchronization.</span></span>



| <span data-ttu-id="7c321-107">Тип</span><span class="sxs-lookup"><span data-stu-id="7c321-107">Type</span></span>           | <span data-ttu-id="7c321-108">Описание</span><span class="sxs-lookup"><span data-stu-id="7c321-108">Description</span></span>                                                                                                                                                                                                      |
|----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="7c321-109">Событие</span><span class="sxs-lookup"><span data-stu-id="7c321-109">Event</span></span>          | <span data-ttu-id="7c321-110">Уведомляет один или более ожидающих потоков о том, что произошло событие.</span><span class="sxs-lookup"><span data-stu-id="7c321-110">Notifies one or more waiting threads that an event has occurred.</span></span> <span data-ttu-id="7c321-111">Дополнительные сведения см. в разделе [объекты событий](event-objects.md).</span><span class="sxs-lookup"><span data-stu-id="7c321-111">For more information, see [Event Objects](event-objects.md).</span></span>                                                                                   |
| <span data-ttu-id="7c321-112">Mutex</span><span class="sxs-lookup"><span data-stu-id="7c321-112">Mutex</span></span>          | <span data-ttu-id="7c321-113">Может принадлежать только одному потоку за раз, что позволяет потокам координировать взаимоисключающий доступ к общему ресурсу.</span><span class="sxs-lookup"><span data-stu-id="7c321-113">Can be owned by only one thread at a time, enabling threads to coordinate mutually exclusive access to a shared resource.</span></span> <span data-ttu-id="7c321-114">Дополнительные сведения см. в разделе [объекты мьютекса](mutex-objects.md).</span><span class="sxs-lookup"><span data-stu-id="7c321-114">For more information, see [Mutex Objects](mutex-objects.md).</span></span>                          |
| <span data-ttu-id="7c321-115">Semaphore</span><span class="sxs-lookup"><span data-stu-id="7c321-115">Semaphore</span></span>      | <span data-ttu-id="7c321-116">Сохраняет число от нуля до некоторого максимального значения, ограничивая число потоков, одновременно обращающихся к общему ресурсу.</span><span class="sxs-lookup"><span data-stu-id="7c321-116">Maintains a count between zero and some maximum value, limiting the number of threads that are simultaneously accessing a shared resource.</span></span> <span data-ttu-id="7c321-117">Дополнительные сведения см. в разделе [объекты семафора](semaphore-objects.md).</span><span class="sxs-lookup"><span data-stu-id="7c321-117">For more information, see [Semaphore Objects](semaphore-objects.md).</span></span> |
| <span data-ttu-id="7c321-118">Ожидающий таймер</span><span class="sxs-lookup"><span data-stu-id="7c321-118">Waitable timer</span></span> | <span data-ttu-id="7c321-119">Уведомляет один или несколько ожидающих потоков о поступлении указанного времени.</span><span class="sxs-lookup"><span data-stu-id="7c321-119">Notifies one or more waiting threads that a specified time has arrived.</span></span> <span data-ttu-id="7c321-120">Дополнительные сведения см. в разделе [ожидающие объекты таймера](waitable-timer-objects.md).</span><span class="sxs-lookup"><span data-stu-id="7c321-120">For more information, see [Waitable Timer Objects](waitable-timer-objects.md).</span></span>                                                          |



 

<span data-ttu-id="7c321-121">Хотя для других целей можно использовать следующие объекты для синхронизации.</span><span class="sxs-lookup"><span data-stu-id="7c321-121">Though available for other uses, the following objects can also be used for synchronization.</span></span>



| <span data-ttu-id="7c321-122">Объект</span><span class="sxs-lookup"><span data-stu-id="7c321-122">Object</span></span>                       | <span data-ttu-id="7c321-123">Описание</span><span class="sxs-lookup"><span data-stu-id="7c321-123">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="7c321-124">Уведомление об изменении</span><span class="sxs-lookup"><span data-stu-id="7c321-124">Change notification</span></span>          | <span data-ttu-id="7c321-125">Состояние, созданное функцией [**финдфирстчанженотификатион**](/windows/win32/api/fileapi/nf-fileapi-findfirstchangenotificationa) , задается сигнальным при возникновении определенного типа изменений в указанном каталоге или дереве каталогов.</span><span class="sxs-lookup"><span data-stu-id="7c321-125">Created by the [**FindFirstChangeNotification**](/windows/win32/api/fileapi/nf-fileapi-findfirstchangenotificationa) function, its state is set to signaled when a specified type of change occurs within a specified directory or directory tree.</span></span> <span data-ttu-id="7c321-126">Дополнительные сведения см. в разделе [Получение уведомлений об изменениях каталога](../fileio/obtaining-directory-change-notifications.md).</span><span class="sxs-lookup"><span data-stu-id="7c321-126">For more information, see [Obtaining Directory Change Notifications](../fileio/obtaining-directory-change-notifications.md).</span></span>                                                                                                                                   |
| <span data-ttu-id="7c321-127">Входные данные консоли</span><span class="sxs-lookup"><span data-stu-id="7c321-127">Console input</span></span>                | <span data-ttu-id="7c321-128">Создается при создании консоли.</span><span class="sxs-lookup"><span data-stu-id="7c321-128">Created when a console is created.</span></span> <span data-ttu-id="7c321-129">Маркер для ввода консоли возвращается функцией [**CreateFile**](/windows/win32/api/fileapi/nf-fileapi-createfilea) при указании Конин $ или функцией [**жетстдхандле**](/windows/console/getstdhandle) .</span><span class="sxs-lookup"><span data-stu-id="7c321-129">The handle to console input is returned by the [**CreateFile**](/windows/win32/api/fileapi/nf-fileapi-createfilea) function when CONIN$ is specified, or by the [**GetStdHandle**](/windows/console/getstdhandle) function.</span></span> <span data-ttu-id="7c321-130">Его состояние задается сигнальным, если в входном буфере консоли есть непрочтенные входные данные, и устанавливается на несигнальное, если входной буфер пуст.</span><span class="sxs-lookup"><span data-stu-id="7c321-130">Its state is set to signaled when there is unread input in the console's input buffer, and set to nonsignaled when the input buffer is empty.</span></span> <span data-ttu-id="7c321-131">Дополнительные сведения о консолях см. в статье [приложения в символьном режиме](/windows/console/character-mode-applications) .</span><span class="sxs-lookup"><span data-stu-id="7c321-131">For more information about consoles, see [Character-Mode Applications](/windows/console/character-mode-applications)</span></span> |
| <span data-ttu-id="7c321-132">Задание</span><span class="sxs-lookup"><span data-stu-id="7c321-132">Job</span></span>                          | <span data-ttu-id="7c321-133">Создается путем вызова функции [**креатежобобжект**](/windows/win32/api/jobapi2/nf-jobapi2-createjobobjectw) .</span><span class="sxs-lookup"><span data-stu-id="7c321-133">Created by calling the [**CreateJobObject**](/windows/win32/api/jobapi2/nf-jobapi2-createjobobjectw) function.</span></span> <span data-ttu-id="7c321-134">Состояние объекта задания задается сигнальным, когда все его процессы завершаются из-за превышения указанного предела времени завершения задания.</span><span class="sxs-lookup"><span data-stu-id="7c321-134">The state of a job object is set to signaled when all its processes are terminated because the specified end-of-job time limit has been exceeded.</span></span> <span data-ttu-id="7c321-135">Дополнительные сведения об объектах заданий см. в разделе [объекты задания](../procthread/job-objects.md).</span><span class="sxs-lookup"><span data-stu-id="7c321-135">For more information about job objects, see [Job Objects](../procthread/job-objects.md).</span></span>                                                                                                                                                             |
| <span data-ttu-id="7c321-136">Уведомление о ресурсе памяти</span><span class="sxs-lookup"><span data-stu-id="7c321-136">Memory resource notification</span></span> | <span data-ttu-id="7c321-137">Создается функцией [**креатемемориресаурценотификатион**](/windows/win32/api/memoryapi/nf-memoryapi-creatememoryresourcenotification) .</span><span class="sxs-lookup"><span data-stu-id="7c321-137">Created by the [**CreateMemoryResourceNotification**](/windows/win32/api/memoryapi/nf-memoryapi-creatememoryresourcenotification) function.</span></span> <span data-ttu-id="7c321-138">Его состояние задается сигнальным при возникновении определенного типа изменений в пределах физической памяти.</span><span class="sxs-lookup"><span data-stu-id="7c321-138">Its state is set to signaled when a specified type of change occurs within physical memory.</span></span> <span data-ttu-id="7c321-139">Дополнительные сведения о памяти см. в разделе [Управление памятью](../memory/memory-management.md).</span><span class="sxs-lookup"><span data-stu-id="7c321-139">For more information about memory, see [Memory Management](../memory/memory-management.md).</span></span>                                                                                                                                                                                  |
| <span data-ttu-id="7c321-140">Процесс</span><span class="sxs-lookup"><span data-stu-id="7c321-140">Process</span></span>                      | <span data-ttu-id="7c321-141">Создается путем вызова функции [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) .</span><span class="sxs-lookup"><span data-stu-id="7c321-141">Created by calling the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) function.</span></span> <span data-ttu-id="7c321-142">Его состояние устанавливается в несигнальном состоянии во время выполнения процесса и устанавливается в сигнальный режим при завершении процесса.</span><span class="sxs-lookup"><span data-stu-id="7c321-142">Its state is set to nonsignaled while the process is running, and set to signaled when the process terminates.</span></span> <span data-ttu-id="7c321-143">Дополнительные сведения о процессах см. в разделе [процессы и потоки](../procthread/processes-and-threads.md).</span><span class="sxs-lookup"><span data-stu-id="7c321-143">For more information about processes, see [Processes and Threads](../procthread/processes-and-threads.md).</span></span>                                                                                                                                                                                  |
| <span data-ttu-id="7c321-144">Thread</span><span class="sxs-lookup"><span data-stu-id="7c321-144">Thread</span></span>                       | <span data-ttu-id="7c321-145">Создается при создании нового потока путем вызова функции [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread)или [**креатеремотесреад**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethread) .</span><span class="sxs-lookup"><span data-stu-id="7c321-145">Created when a new thread is created by calling the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread), or [**CreateRemoteThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethread) function.</span></span> <span data-ttu-id="7c321-146">Его состояние устанавливается в несигнальном состоянии во время выполнения потока и устанавливается на сигнальное время завершения потока.</span><span class="sxs-lookup"><span data-stu-id="7c321-146">Its state is set to nonsignaled while the thread is running, and set to signaled when the thread terminates.</span></span> <span data-ttu-id="7c321-147">Дополнительные сведения о потоках см. в разделе [процессы и потоки](../procthread/processes-and-threads.md).</span><span class="sxs-lookup"><span data-stu-id="7c321-147">For more information about threads, see [Processes and Threads](../procthread/processes-and-threads.md).</span></span>                                                            |



 

<span data-ttu-id="7c321-148">В некоторых случаях в качестве объекта синхронизации можно также использовать файл, именованный канал или коммуникационное устройство. Однако их использование для этой цели не рекомендуется.</span><span class="sxs-lookup"><span data-stu-id="7c321-148">In some circumstances, you can also use a file, named pipe, or communications device as a synchronization object; however, their use for this purpose is discouraged.</span></span> <span data-ttu-id="7c321-149">Вместо этого используйте асинхронный ввод-вывод и дождитесь, когда объект события задается в структуре [**OVERLAPPED**](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) .</span><span class="sxs-lookup"><span data-stu-id="7c321-149">Instead, use asynchronous I/O and wait on the event object set in the [**OVERLAPPED**](/windows/win32/api/minwinbase/ns-minwinbase-overlapped) structure.</span></span> <span data-ttu-id="7c321-150">Использование объекта события более безопасно в связи с путаницой, которая может возникать при выполнении нескольких одновременно перекрывающихся операций над одним и тем же файлом, именованным каналом или устройством связи.</span><span class="sxs-lookup"><span data-stu-id="7c321-150">It is safer to use the event object because of the confusion that can occur when multiple simultaneous overlapped operations are performed on the same file, named pipe, or communications device.</span></span> <span data-ttu-id="7c321-151">В этом случае нет способа выяснить, какая операция привела к тому, что состояние объекта будет сигнальным.</span><span class="sxs-lookup"><span data-stu-id="7c321-151">In this situation, there is no way to know which operation caused the object's state to be signaled.</span></span>

<span data-ttu-id="7c321-152">Дополнительные сведения о операциях ввода-вывода в файлах, именованных каналах и обмене данными см. в разделе [Синхронизация и перекрытие входных и выходных](synchronization-and-overlapped-input-and-output.md)данных.</span><span class="sxs-lookup"><span data-stu-id="7c321-152">For additional information about I/O operations on files, named pipes, or communications, see [Synchronization and Overlapped Input and Output](synchronization-and-overlapped-input-and-output.md).</span></span>

 

 
