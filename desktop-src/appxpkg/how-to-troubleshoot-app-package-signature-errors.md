---
title: Устранение ошибок подписи пакета приложения
description: Сбой развертывания приложения может быть вызван сбоем при проверке цифровой подписи пакета приложения. Узнайте, как распознать эти сбои и что делать с ними.
ms.assetid: CE868296-87F6-4BD5-8AC5-914E429EDEBC
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0b6f50dc5ff428e74f4928fc20775b13de7c3be9
ms.sourcegitcommit: 784b5954a1646e2406cd4ee27a9e4f50e28ee9b7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/05/2021
ms.locfileid: "106374835"
---
# <a name="how-to-troubleshoot-app-package-signature-errors"></a><span data-ttu-id="2a4c8-104">Устранение ошибок подписи пакета приложения</span><span class="sxs-lookup"><span data-stu-id="2a4c8-104">How to troubleshoot app package signature errors</span></span>

<span data-ttu-id="2a4c8-105">Сбой развертывания приложения может быть вызван сбоем при проверке цифровой подписи пакета приложения.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-105">An app deployment failure can be caused by a failure to validate the digital signature of the app package.</span></span> <span data-ttu-id="2a4c8-106">Узнайте, как распознать эти сбои и что делать с ними.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-106">Learn how to recognize these failures, and what to do about them.</span></span>

<span data-ttu-id="2a4c8-107">При развертывании упакованного приложения Windows Windows всегда пытается проверить цифровую подпись в пакете приложения.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-107">When you deploy a packaged Windows app, Windows always attempts to validate the digital signature on the app package.</span></span> <span data-ttu-id="2a4c8-108">Сбои во время развертывания блока проверки подписи пакета.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-108">Failures during signature validation block deployment of the package.</span></span> <span data-ttu-id="2a4c8-109">Но почему пакет не был проверен, может быть не очевидным.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-109">But why the package didn't validate might not be obvious.</span></span> <span data-ttu-id="2a4c8-110">В частности, если вы подписываете пакеты с частными сертификатами для локального тестирования, вам часто требуется управлять доверием для этих сертификатов.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-110">In particular, if you sign your packages with private certificates for local testing, you often must manage the trust for those certificates as well.</span></span> <span data-ttu-id="2a4c8-111">Неправильная конфигурация доверия сертификатов может привести к сбоям проверки подписи.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-111">An incorrect certificate trust configuration can lead to signature validation failures.</span></span>

## <a name="what-you-need-to-know"></a><span data-ttu-id="2a4c8-112">Что необходимо знать</span><span class="sxs-lookup"><span data-stu-id="2a4c8-112">What you need to know</span></span>

### <a name="technologies"></a><span data-ttu-id="2a4c8-113">Технологии</span><span class="sxs-lookup"><span data-stu-id="2a4c8-113">Technologies</span></span>

-   [<span data-ttu-id="2a4c8-114">Упаковка, развертывание и запрос приложений Windows</span><span class="sxs-lookup"><span data-stu-id="2a4c8-114">Packaging, deployment, and query of Windows apps</span></span>](appx-portal.md)
-   [<span data-ttu-id="2a4c8-115">Проверка доверия сертификата</span><span class="sxs-lookup"><span data-stu-id="2a4c8-115">Certificate Trust Verification</span></span>](/windows/desktop/SecCrypto/certificate-trust-verification)

### <a name="prerequisites"></a><span data-ttu-id="2a4c8-116">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="2a4c8-116">Prerequisites</span></span>

-   <span data-ttu-id="2a4c8-117">[Журнал событий Windows](/windows/desktop/WES/windows-event-log) для диагностики сбоев при установке.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-117">[Windows Event Log](/windows/desktop/WES/windows-event-log) to diagnose installation failures.</span></span>
-   <span data-ttu-id="2a4c8-118">[Задачи Certutil для управления сертификатами](/previous-versions/orphan-topics/ws.10/cc772898(v=ws.10)) для обработки хранилища сертификатов во время устранения неполадок</span><span class="sxs-lookup"><span data-stu-id="2a4c8-118">[Certutil tasks for managing certificates](/previous-versions/orphan-topics/ws.10/cc772898(v=ws.10)) for certificate store manipulation during troubleshooting</span></span>

## <a name="instructions"></a><span data-ttu-id="2a4c8-119">Инструкции</span><span class="sxs-lookup"><span data-stu-id="2a4c8-119">Instructions</span></span>

### <a name="step-1-examine-event-logs-for-diagnostic-information"></a><span data-ttu-id="2a4c8-120">Шаг 1. Изучение журналов событий для получения диагностических сведений</span><span class="sxs-lookup"><span data-stu-id="2a4c8-120">Step 1: Examine event logs for diagnostic information</span></span>

<span data-ttu-id="2a4c8-121">В зависимости от того, как вы предпринимали попытку развертывания приложения, возможно, вы не получили осмысленный код ошибки для сбоя развертывания.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-121">Depending on how you attempted to deploy your app, you might not have received a meaningful error code for the deployment failure.</span></span> <span data-ttu-id="2a4c8-122">В этом случае код ошибки обычно можно получить непосредственно из журналов событий.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-122">In this case, you can usually get the error code directly from the event logs.</span></span>

<span data-ttu-id="2a4c8-123">**Получение кода ошибки из журналов событий**</span><span class="sxs-lookup"><span data-stu-id="2a4c8-123">**To get the error code from the event logs**</span></span>

1.  <span data-ttu-id="2a4c8-124">Запустите **eventvwr. msc**.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-124">Run **eventvwr.msc**.</span></span>
2.  <span data-ttu-id="2a4c8-125">Перейдите в раздел **Просмотр событий (локальные)**  >  **приложения и службы журналы**  >  **Microsoft**  >  **Windows**.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-125">Go to **Event Viewer (Local)** > **Applications and Services Logs** > **Microsoft** > **Windows**.</span></span>
3.  <span data-ttu-id="2a4c8-126">Первый проверяемый журнал — **AppxPackagingOM**  >  **Microsoft-Windows-аппкспаккагинг/эксплуатация**.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-126">The first log to check is **AppxPackagingOM** > **Microsoft-Windows-AppxPackaging/Operational**.</span></span>
4.  <span data-ttu-id="2a4c8-127">Ошибки, связанные с развертыванием, записываются в **AppXDeployment-Server**  >  **Microsoft-Windows-AppXDeploymentServer/эксплуатация**.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-127">Deployment-related errors are recorded in **AppXDeployment-Server** > **Microsoft-Windows-AppXDeploymentServer/Operational**.</span></span>

    <span data-ttu-id="2a4c8-128">Для ошибок развертывания найдите Последнее событие ошибки 404.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-128">For deployment errors, search for the most recent error event 404.</span></span> <span data-ttu-id="2a4c8-129">Это событие ошибки содержит код ошибки и описание причины сбоя развертывания.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-129">This error event provides you with the error code and a description of why the deployment failed.</span></span> <span data-ttu-id="2a4c8-130">Если ошибка 465 предшествует событию 404, то возникла проблема при открытии пакета.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-130">If an error event 465 preceded the 404 event, there was a problem opening the package.</span></span>

<span data-ttu-id="2a4c8-131">Если ошибка 465 не возникла, см. статью общие [сведения об устранении неполадок в пакете, развертывании и запросе приложений Windows](troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="2a4c8-131">If the 465 error didn't occur, see general [Troubleshooting packaging, deployment, and query of Windows apps](troubleshooting.md).</span></span> <span data-ttu-id="2a4c8-132">В противном случае обратитесь к этой таблице с общими кодами ошибок, которые могут отображаться в строке ошибки для события ошибки 465:</span><span class="sxs-lookup"><span data-stu-id="2a4c8-132">Otherwise, refer to this table for common error codes that can show up in the error string for error event 465:</span></span>

| <span data-ttu-id="2a4c8-133">Код ошибки</span><span class="sxs-lookup"><span data-stu-id="2a4c8-133">Error code</span></span> | <span data-ttu-id="2a4c8-134">Ошибка</span><span class="sxs-lookup"><span data-stu-id="2a4c8-134">Error</span></span>                                 | <span data-ttu-id="2a4c8-135">Описание</span><span class="sxs-lookup"><span data-stu-id="2a4c8-135">Description</span></span>                                                                                                          | <span data-ttu-id="2a4c8-136">Предложение</span><span class="sxs-lookup"><span data-stu-id="2a4c8-136">Suggestion</span></span>                                                                                                                                                                                                 |
|------------|---------------------------------------|----------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="2a4c8-137">0x80073CF0</span><span class="sxs-lookup"><span data-stu-id="2a4c8-137">0x80073CF0</span></span> | <span data-ttu-id="2a4c8-138">Ошибка \_ \_ при установке открытого \_ пакета \_</span><span class="sxs-lookup"><span data-stu-id="2a4c8-138">ERROR\_INSTALL\_OPEN\_PACKAGE\_FAILED</span></span> | <span data-ttu-id="2a4c8-139">Не удалось открыть пакет приложения.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-139">The app package could not be opened.</span></span>                                                                                 | <span data-ttu-id="2a4c8-140">Эта ошибка обычно указывает на проблему с пакетом.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-140">This error typically indicates a problem with the package.</span></span> <span data-ttu-id="2a4c8-141">Необходимо создать и подписать пакет еще раз.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-141">You need to build and sign the package again.</span></span> <span data-ttu-id="2a4c8-142">Дополнительные сведения см. [в разделе Использование упаковщика приложений](make-appx-package--makeappx-exe-.md).</span><span class="sxs-lookup"><span data-stu-id="2a4c8-142">For more info, see [Using App Packager](make-appx-package--makeappx-exe-.md).</span></span> |
| <span data-ttu-id="2a4c8-143">0x80080205</span><span class="sxs-lookup"><span data-stu-id="2a4c8-143">0x80080205</span></span> | <span data-ttu-id="2a4c8-144">APPX \_ E \_ Недопустимый \_ блоккмап</span><span class="sxs-lookup"><span data-stu-id="2a4c8-144">APPX\_E\_INVALID\_BLOCKMAP</span></span>            | <span data-ttu-id="2a4c8-145">Пакет приложения был изменен или имеет недопустимую карту блоков.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-145">The app package has been tampered with or has an invalid block map.</span></span>                                                  | <span data-ttu-id="2a4c8-146">Пакет поврежден.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-146">The package is corrupted.</span></span> <span data-ttu-id="2a4c8-147">Необходимо создать и подписать пакет еще раз.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-147">You need to build and sign the package again.</span></span> <span data-ttu-id="2a4c8-148">Дополнительные сведения см. [в разделе Использование упаковщика приложений](make-appx-package--makeappx-exe-.md).</span><span class="sxs-lookup"><span data-stu-id="2a4c8-148">For more info, see [Using App Packager](make-appx-package--makeappx-exe-.md).</span></span>                                  |
| <span data-ttu-id="2a4c8-149">0x800B0004</span><span class="sxs-lookup"><span data-stu-id="2a4c8-149">0x800B0004</span></span> | <span data-ttu-id="2a4c8-150">ДОВЕРЯТЬ \_ \_ \_ \_ недоверенному субъекту E</span><span class="sxs-lookup"><span data-stu-id="2a4c8-150">TRUST\_E\_SUBJECT\_NOT\_TRUSTED</span></span>       | <span data-ttu-id="2a4c8-151">Пакет приложения был изменен.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-151">The app package has been tampered with.</span></span>                                                                              | <span data-ttu-id="2a4c8-152">Содержимое пакета больше не соответствует цифровой подписи.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-152">The package contents no longer match its digital signature.</span></span> <span data-ttu-id="2a4c8-153">Необходимо подписать пакет еще раз.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-153">You need to sign the package again.</span></span> <span data-ttu-id="2a4c8-154">Дополнительные сведения см. [в разделе как подписать пакет приложения с помощью средства SignTool](how-to-sign-a-package-using-signtool.md).</span><span class="sxs-lookup"><span data-stu-id="2a4c8-154">For more info, see [How to sign an app package using SignTool](how-to-sign-a-package-using-signtool.md).</span></span>  |
| <span data-ttu-id="2a4c8-155">0x800B0100</span><span class="sxs-lookup"><span data-stu-id="2a4c8-155">0x800B0100</span></span> | <span data-ttu-id="2a4c8-156">ДОВЕРЯТЬ \_ электронной \_ подписи</span><span class="sxs-lookup"><span data-stu-id="2a4c8-156">TRUST\_E\_NOSIGNATURE</span></span>                 | <span data-ttu-id="2a4c8-157">Пакет приложения не подписан.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-157">The app package is unsigned.</span></span>                                                                                         | <span data-ttu-id="2a4c8-158">Можно развернуть только подписанные пакеты приложений Windows.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-158">Only signed Windows app packages can be deployed.</span></span> <span data-ttu-id="2a4c8-159">Сведения о подписывании пакета приложения см. в разделе [как подписать пакет приложения с помощью средства SignTool](how-to-sign-a-package-using-signtool.md).</span><span class="sxs-lookup"><span data-stu-id="2a4c8-159">For info about signing an app package, see [How to sign an app package using SignTool](how-to-sign-a-package-using-signtool.md).</span></span>                  |
| <span data-ttu-id="2a4c8-160">0x800B0109</span><span class="sxs-lookup"><span data-stu-id="2a4c8-160">0x800B0109</span></span> | <span data-ttu-id="2a4c8-161">\_ \_ недоверенный корень сертификата \_ E</span><span class="sxs-lookup"><span data-stu-id="2a4c8-161">CERT\_E\_UNTRUSTED\_ROOT</span></span>              | <span data-ttu-id="2a4c8-162">Цепочка сертификатов, использованная для подписания пакета приложения, заканчивается на корневом сертификате, который не является доверенным.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-162">The certificate chain that was used to sign the app package ends in a root certificate that isn't trusted.</span></span>           | <span data-ttu-id="2a4c8-163">Перейдите к шагу 2, чтобы устранить неполадки доверия сертификатов.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-163">Continue to Step 2 to troubleshoot the certificate trust.</span></span>                                                                                                                                                  |
| <span data-ttu-id="2a4c8-164">0x800B010A</span><span class="sxs-lookup"><span data-stu-id="2a4c8-164">0x800B010A</span></span> | <span data-ttu-id="2a4c8-165">\_ \_ цепочка сертификатов E</span><span class="sxs-lookup"><span data-stu-id="2a4c8-165">CERT\_E\_CHAINING</span></span>                     | <span data-ttu-id="2a4c8-166">Не удалось создать цепочку сертификатов для доверенного корневого центра сертификации от сертификата, который использовался для подписания пакета приложения.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-166">No certificate chain could be built to a trusted root authority from the cert that was used to sign the app package.</span></span> | <span data-ttu-id="2a4c8-167">Перейдите к шагу 2, чтобы устранить неполадки доверия сертификатов.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-167">Continue to Step 2 to troubleshoot the certificate trust.</span></span>                                                                                                                                                  |



 

### <a name="step-2-determine-the-certificate-chain-used-to-sign-the-app-package"></a><span data-ttu-id="2a4c8-168">Шаг 2. Определение цепочки сертификатов, используемой для подписания пакета приложения</span><span class="sxs-lookup"><span data-stu-id="2a4c8-168">Step 2: Determine the certificate chain used to sign the app package</span></span>

<span data-ttu-id="2a4c8-169">Чтобы определить сертификаты, которым должен доверять локальный компьютер, можно проверить цепочку сертификатов для цифровой подписи в пакете приложения.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-169">To figure out the certificates that the local computer must trust, you can examine the certificate chain for the digital signature on the app package.</span></span>

<span data-ttu-id="2a4c8-170">**Определение цепочки сертификатов**</span><span class="sxs-lookup"><span data-stu-id="2a4c8-170">**To determine the certificate chain**</span></span>

1.  <span data-ttu-id="2a4c8-171">В проводнике щелкните правой кнопкой мыши пакет приложения и выберите пункт **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-171">In File Explorer, right-click on the app package and select **Properties**.</span></span>
2.  <span data-ttu-id="2a4c8-172">В диалоговом окне **Свойства** перейдите на вкладку **цифровые подписи** , где также будет указано, можно ли проверить подпись.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-172">In the **Properties** dialog, select the **Digital Signatures** tab, which also displays whether the signature can be validated.</span></span>
3.  <span data-ttu-id="2a4c8-173">В списке сигнатур выберите подпись и нажмите кнопку **сведения** .</span><span class="sxs-lookup"><span data-stu-id="2a4c8-173">In the Signature list, select the signature and then click the **Details** button.</span></span>
4.  <span data-ttu-id="2a4c8-174">В диалоговом окне **сведения о цифровой подписи** нажмите кнопку **Просмотр сертификата** .</span><span class="sxs-lookup"><span data-stu-id="2a4c8-174">In the **Digital Signature Details** dialog, click the **View Certificate** button.</span></span>
5.  <span data-ttu-id="2a4c8-175">В диалоговом окне **сертификат** перейдите на вкладку **путь сертификации** .</span><span class="sxs-lookup"><span data-stu-id="2a4c8-175">In the **Certificate** dialog, select the **Certification Path** tab.</span></span>

<span data-ttu-id="2a4c8-176">Лучшим сертификатом в цепочке является корневой сертификат, а нижний сертификат — сертификат подписи.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-176">The top certificate in the chain is the root certificate and the bottom certificate is the signing certificate.</span></span> <span data-ttu-id="2a4c8-177">Если в цепочке находится только один сертификат, сертификат подписи также является его собственным корневым сертификатом.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-177">If only a single certificate is in the chain, the signing certificate is also its own root certificate.</span></span> <span data-ttu-id="2a4c8-178">Вы можете определить серийный номер для каждого сертификата, который затем используется с [certutil](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732443(v=ws.10)):</span><span class="sxs-lookup"><span data-stu-id="2a4c8-178">You can determine the serial number for each certificate that you then use with [Certutil](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732443(v=ws.10)):</span></span>

<span data-ttu-id="2a4c8-179">**Определение серийного номера для каждого сертификата**</span><span class="sxs-lookup"><span data-stu-id="2a4c8-179">**To determine the serial number for each certificate**</span></span>

1.  <span data-ttu-id="2a4c8-180">В области путь сертификации выберите сертификат и нажмите кнопку **Просмотр сертификата**.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-180">In the Certification path pane, select the certificate and then click **View Certificate**.</span></span>
2.  <span data-ttu-id="2a4c8-181">В диалоговом окне Сертификат перейдите на вкладку **сведения** , в которой отображается серийный номер и другие полезные свойства сертификата.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-181">In the Certificate dialog, select the **Details** tab, which displays the serial number and other useful properties of the certificate.</span></span>

### <a name="step-3-determine-the-certificates-trusted-by-the-local-machine"></a><span data-ttu-id="2a4c8-182">Шаг 3. Определение сертификатов, которые являются доверенными для локального компьютера</span><span class="sxs-lookup"><span data-stu-id="2a4c8-182">Step 3: Determine the certificates trusted by the local machine</span></span>

<span data-ttu-id="2a4c8-183">Чтобы иметь возможность развернуть пакет приложения, он должен быть не только доверенным в контексте пользователя, но и контекстом локального компьютера.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-183">To be able to deploy an app package, it must not only be trusted in the user’s context but also the local computer context.</span></span> <span data-ttu-id="2a4c8-184">В результате цифровая подпись может быть действительна при просмотре на вкладке цифровые подписи на предыдущем шаге, но по-прежнему не проходит проверку во время развертывания пакета приложения.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-184">As a result, the digital signature can appear valid when viewed in the Digital Signatures tab from the previous step but still fail validation during deployment of the app package.</span></span>

<span data-ttu-id="2a4c8-185">**Чтобы определить, является ли цепочка сертификатов, используемая для подписи пакета приложения, явно доверенной для локального компьютера**</span><span class="sxs-lookup"><span data-stu-id="2a4c8-185">**To determine if the certificate chain used to sign the app package is specifically trusted by the local computer**</span></span>

1.  <span data-ttu-id="2a4c8-186">Выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="2a4c8-186">Run this command:</span></span>

    ``` syntax
    CertUtil.exe -store Root rootCertSerialNumber
    ```

2.  <span data-ttu-id="2a4c8-187">Выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="2a4c8-187">Run this command:</span></span>

    ``` syntax
    CertUtil.exe -store TrustedPeople signingCertSerialNumber
    ```

<span data-ttu-id="2a4c8-188">Если серийный номер сертификата не указан, [certutil](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732443(v=ws.10)) перечисляет все сертификаты, которые являются доверенными для локального компьютера для этого хранилища.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-188">If you don't specify the certificate serial number, [Certutil](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732443(v=ws.10)) lists all certificates that are trusted by the local computer for that store.</span></span>

<span data-ttu-id="2a4c8-189">Пакет может не установиться из-за ошибок цепочки сертификатов, даже если сертификат для подписи не является самозаверяющим и корневой сертификат находится в корневом хранилище локального компьютера.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-189">The package may fail to install due to certificate chaining errors, even if the signing certificate is not self-signed and the root certificate is in the root store of the local computer.</span></span> <span data-ttu-id="2a4c8-190">В этом случае может возникнуть проблема с доверием для промежуточных центров сертификации.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-190">In this case, there might be an issue with trust for the intermediate certificate authorities.</span></span> <span data-ttu-id="2a4c8-191">Дополнительные сведения об этой ошибке см. [в разделе Работа с сертификатами](/previous-versions/dotnet/netframework-3.0/ms731899(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="2a4c8-191">For more info about this issue, see [Working with Certificates](/previous-versions/dotnet/netframework-3.0/ms731899(v=vs.85)).</span></span>

## <a name="remarks"></a><span data-ttu-id="2a4c8-192">Remarks</span><span class="sxs-lookup"><span data-stu-id="2a4c8-192">Remarks</span></span>

<span data-ttu-id="2a4c8-193">Если вы определили, что пакет не может быть развернут, так как сертификат для подписи не является доверенным, не устанавливайте пакет, если вы не уверены в его происхождении и доверяете ему.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-193">If you determined that the package couldn't be deployed because the signing certificate isn't trusted, don't install the package unless you know where it originated and you trust it.</span></span>

<span data-ttu-id="2a4c8-194">Если вы хотите вручную доверять приложению для установки (например, для установки собственного пакета приложения, подписанного тестом), можно вручную добавить сертификат в отношение доверия сертификатов локального компьютера из пакета приложения.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-194">If you want to manually trust the app for install (for example, to install your own test-signed app package), you can manually add the certificate to the local computer certificate trust from the app package.</span></span>

<span data-ttu-id="2a4c8-195">**Чтобы вручную добавить сертификат к доверию сертификатов на локальном компьютере**</span><span class="sxs-lookup"><span data-stu-id="2a4c8-195">**To manually add the certificate to the local computer certificate trust**</span></span>

1.  <span data-ttu-id="2a4c8-196">В проводнике щелкните правой кнопкой мыши пакет приложения и во всплывающем контекстном меню выберите **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-196">In File Explorer, right-click on the app package, and in the pop-up context menu select **Properties**.</span></span>
2.  <span data-ttu-id="2a4c8-197">В диалоговом окне **Свойства** выберите вкладку **цифровые подписи** .</span><span class="sxs-lookup"><span data-stu-id="2a4c8-197">In the **Properties** dialog, select the **Digital Signatures** tab.</span></span>
3.  <span data-ttu-id="2a4c8-198">В списке сигнатур выберите подпись и нажмите кнопку **сведения** .</span><span class="sxs-lookup"><span data-stu-id="2a4c8-198">In the Signature list, select the signature and then click the **Details** button.</span></span>
4.  <span data-ttu-id="2a4c8-199">В диалоговом окне **сведения о цифровой подписи** нажмите кнопку **Просмотр сертификата** .</span><span class="sxs-lookup"><span data-stu-id="2a4c8-199">In the **Digital Signature Details** dialog, click the **View Certificate** button.</span></span>
5.  <span data-ttu-id="2a4c8-200">В диалоговом окне **сертификат** щелкните **установить сертификат...**</span><span class="sxs-lookup"><span data-stu-id="2a4c8-200">In the **Certificate** dialog, click the **Install Certificate…**</span></span> <span data-ttu-id="2a4c8-201">.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-201">button.</span></span>
6.  <span data-ttu-id="2a4c8-202">В мастере импорта сертификатов выберите **локальный компьютер** , а затем нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-202">In the Certificate Import Wizard, select **Local Machine** and then click **Next**.</span></span> <span data-ttu-id="2a4c8-203">Чтобы продолжить, необходимо предоставить права администратора.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-203">You will need to grant administrator privileges to continue.</span></span>
7.  <span data-ttu-id="2a4c8-204">Выберите **поместить все сертификаты в следующее хранилище** и перейдите к хранилищу **доверенных лиц** .</span><span class="sxs-lookup"><span data-stu-id="2a4c8-204">Select **Place all certificates in the following store** and browse to the **Trusted People** store.</span></span>
8.  <span data-ttu-id="2a4c8-205">Нажмите кнопку **Далее**, а затем кнопку **Готово** , чтобы завершить работу мастера.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-205">Click **Next**, then click **Finish** to complete the wizard.</span></span>

<span data-ttu-id="2a4c8-206">После добавления этого вручную можно увидеть, что сертификат теперь является доверенным в диалоговом окне **сертификата** .</span><span class="sxs-lookup"><span data-stu-id="2a4c8-206">After this manual addition, you can see that the certificate is now trusted in the **Certificate** dialog.</span></span>

<span data-ttu-id="2a4c8-207">Сертификат можно удалить после того, как он больше не нужен.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-207">You can remove the certificate after you no longer need it.</span></span>

<span data-ttu-id="2a4c8-208">**Удаление сертификата**</span><span class="sxs-lookup"><span data-stu-id="2a4c8-208">**To remove the certificate**</span></span>

1.  <span data-ttu-id="2a4c8-209">Запустите **Cmd.exe** от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-209">Run **Cmd.exe** as administrator.</span></span>
2.  <span data-ttu-id="2a4c8-210">В командной строке администратора выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="2a4c8-210">In the administrator command prompt, run this command:</span></span>

    ``` syntax
    Certutil -store TrustedPeople
    ```

3.  <span data-ttu-id="2a4c8-211">Найдите серийный номер установленного сертификата.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-211">Look for the serial number of the certificate that you installed.</span></span> <span data-ttu-id="2a4c8-212">Это число является *certID*.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-212">This number is the *certID*.</span></span>
4.  <span data-ttu-id="2a4c8-213">Выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="2a4c8-213">Run this command:</span></span>

    ``` syntax
    Certutil -delStore TrustedPeople certID
    ```

<span data-ttu-id="2a4c8-214">Не рекомендуется вручную добавлять корневые сертификаты в [хранилище сертификатов доверенных корневых центров сертификации](/windows-hardware/drivers/install/trusted-root-certification-authorities-certificate-store)локального компьютера.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-214">We recommend that you avoid manually adding root certificates to the local machine [Trusted Root Certification Authorities Certificate Store](/windows-hardware/drivers/install/trusted-root-certification-authorities-certificate-store).</span></span> <span data-ttu-id="2a4c8-215">Наличие нескольких приложений, подписанных сертификатами, которые связаны с одним и тем же корневым сертификатом, например бизнес-приложениями, может быть более эффективным, чем установка отдельных сертификатов в хранилище доверенных лиц.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-215">Having several applications that are signed with certificates that chain to the same root certificate, such as line of business applications, can be more efficient than installing individual certificates to the Trusted People store.</span></span> <span data-ttu-id="2a4c8-216">Хранилище доверенных лиц содержит сертификаты, которые считаются доверенными по умолчанию и поэтому не проверяются в списках или цепочках доверия сертификатов более высокого уровня.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-216">The Trusted People store contains certificates that are considered trusted by default and so aren't verified by higher authorities or certificate trust lists or chains.</span></span> <span data-ttu-id="2a4c8-217">Рекомендации по добавлению сертификатов в хранилище сертификатов доверенных корневых центров сертификации см. в статье рекомендации по [подписывания кода](/previous-versions/windows/hardware/design/dn653556(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="2a4c8-217">For considerations around adding certificates to the Trusted Root Certification Authorities certificate store, see [Code-Signing Best Practices](/previous-versions/windows/hardware/design/dn653556(v=vs.85)).</span></span>

## <a name="security-considerations"></a><span data-ttu-id="2a4c8-218">Соображения безопасности</span><span class="sxs-lookup"><span data-stu-id="2a4c8-218">Security Considerations</span></span>

<span data-ttu-id="2a4c8-219">Добавив сертификат в [хранилища сертификатов локальной машины](/windows-hardware/drivers/install/local-machine-and-current-user-certificate-stores), вы меняете доверие сертификатов всех пользователей на компьютере.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-219">By adding a certificate to [local machine certificate stores](/windows-hardware/drivers/install/local-machine-and-current-user-certificate-stores), you affect the certificate trust of all users on the computer.</span></span> <span data-ttu-id="2a4c8-220">Рекомендуется установить все сертификаты подписи кода, необходимые для тестирования пакетов приложений в хранилище сертификатов "Доверенные лица".</span><span class="sxs-lookup"><span data-stu-id="2a4c8-220">We recommend that you install any code signing certificates that you want for testing app packages to the Trusted People certificate store.</span></span> <span data-ttu-id="2a4c8-221">Немедленно удалите эти сертификаты, когда они больше не нужны, чтобы предотвратить их использование для компрометации доверия системы.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-221">Promptly remove those certificates when they are no longer necessary, to prevent them from being used to compromise system trust.</span></span> <span data-ttu-id="2a4c8-222">Если вы создаете собственные тестовые сертификаты для подписания пакетов приложений, мы также рекомендуем ограничить привилегии, связанные с тестовым сертификатом.</span><span class="sxs-lookup"><span data-stu-id="2a4c8-222">If you create your own test certificates for signing app packages, we also recommend that you restrict the privileges that are associated with the test certificate.</span></span> <span data-ttu-id="2a4c8-223">Сведения о создании тестовых сертификатов для подписи пакетов приложений см. [в разделе Создание сертификата для подписи пакета приложения](how-to-create-a-package-signing-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="2a4c8-223">For info about creating test certificates for signing app packages, see [How to create an app package signing certificate](how-to-create-a-package-signing-certificate.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="2a4c8-224">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="2a4c8-224">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="2a4c8-225">**Примеры**</span><span class="sxs-lookup"><span data-stu-id="2a4c8-225">**Samples**</span></span>
</dt> <dt>

[<span data-ttu-id="2a4c8-226">Пример создания пакета приложения</span><span class="sxs-lookup"><span data-stu-id="2a4c8-226">Create app package sample</span></span>](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/AppxPackingCreateAppx)
</dt> <dt>

<span data-ttu-id="2a4c8-227">**Основные понятия**</span><span class="sxs-lookup"><span data-stu-id="2a4c8-227">**Concepts**</span></span>
</dt> <dt>

[<span data-ttu-id="2a4c8-228">Устранение проблем с упаковкой и развертыванием приложений для Windows, а также с обращением к ним</span><span class="sxs-lookup"><span data-stu-id="2a4c8-228">Troubleshooting packaging, deployment, and query of Windows apps</span></span>](troubleshooting.md)
</dt> <dt>

<span data-ttu-id="2a4c8-229">[Задачи Certutil для управления сертификатами](/previous-versions/orphan-topics/ws.10/cc772898(v=ws.10))</span><span class="sxs-lookup"><span data-stu-id="2a4c8-229">[Certutil tasks for managing certificates](/previous-versions/orphan-topics/ws.10/cc772898(v=ws.10))</span></span>
</dt> </dl>

 

 
