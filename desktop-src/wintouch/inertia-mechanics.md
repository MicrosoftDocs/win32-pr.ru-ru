---
title: Механика инерции
description: Механика инерции
ms.assetid: 188b6936-b36e-4e57-9118-8b61ed134c17
keywords:
- Касание Windows, инерция
- Касание Windows, плавная анимация
- Касание Windows, эластичное поле
- инерция, механика
- инерция, основы вычислений
- Обзор инерции, физическое представление
- инерция, плавная анимация
- инерция, эластичное поле
- Плавная анимация
- Эластичное поле
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: be79b27900c6921c972710e7e922ab42b834afc1
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104328963"
---
# <a name="inertia-mechanics"></a><span data-ttu-id="51aa9-113">Механика инерции</span><span class="sxs-lookup"><span data-stu-id="51aa9-113">Inertia Mechanics</span></span>

<span data-ttu-id="51aa9-114">Инерция используется для выполнения вычислений по анимации перемещения объектов и обеспечения поддержки универсального удобства в приложениях, включающих Windows Touch.</span><span class="sxs-lookup"><span data-stu-id="51aa9-114">Inertia is used to perform calculations for animating object movement and to enable support for generic usability in applications incorporating Windows Touch.</span></span> <span data-ttu-id="51aa9-115">В этом разделе показаны следующие функции, включенные инерцией.</span><span class="sxs-lookup"><span data-stu-id="51aa9-115">This section illustrates the following features that are enabled by inertia.</span></span>

-   <span data-ttu-id="51aa9-116">Краткий обзор инерции физика.</span><span class="sxs-lookup"><span data-stu-id="51aa9-116">A brief overview of inertia physics.</span></span>
-   <span data-ttu-id="51aa9-117">Плавная анимация объектов с использованием свойств скорости и замедления.</span><span class="sxs-lookup"><span data-stu-id="51aa9-117">Smooth object animation using the velocity and deceleration properties.</span></span>
-   <span data-ttu-id="51aa9-118">Плавная анимация объекта с помощью свойства смещения.</span><span class="sxs-lookup"><span data-stu-id="51aa9-118">Smooth object animation using a displacement property.</span></span>
-   <span data-ttu-id="51aa9-119">Переход от краев экрана с помощью эластичных границ.</span><span class="sxs-lookup"><span data-stu-id="51aa9-119">Bouncing from the screen edges using elastic bounds.</span></span>

## <a name="inertia-physics-overview"></a><span data-ttu-id="51aa9-120">Обзор инерции</span><span class="sxs-lookup"><span data-stu-id="51aa9-120">Inertia Physics Overview</span></span>

<span data-ttu-id="51aa9-121">Обработчик инерции использует простую модель физики, которая включает в себя расположение, значение замедления и начальную скорость.</span><span class="sxs-lookup"><span data-stu-id="51aa9-121">The inertia processor uses a simple physics model that incorporates a position, a deceleration value, and an initial velocity.</span></span> <span data-ttu-id="51aa9-122">Время используется в качестве динамического ввода для модели, чтобы определить текущую позицию удаляемого объекта.</span><span class="sxs-lookup"><span data-stu-id="51aa9-122">Time is used as the dynamic input to the model to determine the current position of an object being displaced.</span></span> <span data-ttu-id="51aa9-123">На следующей диаграмме и в формуле показано физическое моделирование, используемое для вычисления позиций объекта.</span><span class="sxs-lookup"><span data-stu-id="51aa9-123">The following graph and formula outline the physics model used for calculating object positions.</span></span>

![Иллюстрация, показывающая диаграмму и формулу, используемую для вычисления позиций объектов](images/velocity.png)

<span data-ttu-id="51aa9-125">В формуле, используемой для вычисления текущей позицией (x), начальная скорость (v) умножается на затраченное время (t) и уменьшается на коэффициент замедления (d) раз в квадрат.</span><span class="sxs-lookup"><span data-stu-id="51aa9-125">In the formula used for calculating the current position (x), the initial velocity (v) is multiplied by the time elapsed (t) and is reduced by the deceleration factor (d) times time squared.</span></span> <span data-ttu-id="51aa9-126">Это приводит к плавному замедлению объектов.</span><span class="sxs-lookup"><span data-stu-id="51aa9-126">This results in smooth object deceleration.</span></span> <span data-ttu-id="51aa9-127">На предыдущем рисунке в первоначальной (крайней левой) части кривой объект быстро перемещается, так как его текущая скорость является начальной скоростью.</span><span class="sxs-lookup"><span data-stu-id="51aa9-127">In the previous illustration at the initial (leftmost) part of the curve, the object is moving quickly because its current velocity is the initial velocity.</span></span> <span data-ttu-id="51aa9-128">В финальной (крайней правой) части кривой объект полностью остановлен, так как его скорость равна 0.</span><span class="sxs-lookup"><span data-stu-id="51aa9-128">At the final (rightmost) part of the curve, the object has completely stopped because its velocity is 0.</span></span> <span data-ttu-id="51aa9-129">Вычисление скорости объектов для скорости x, y и ротации используют эту формулу для вычислений.</span><span class="sxs-lookup"><span data-stu-id="51aa9-129">Object velocity calculations for x-velocity, y-velocity, and rotational velocity all use this formula for calculations.</span></span>

<span data-ttu-id="51aa9-130">Для обработчика инерции используется относительное расстояние.</span><span class="sxs-lookup"><span data-stu-id="51aa9-130">All distance used for the inertia processor is relative.</span></span> <span data-ttu-id="51aa9-131">Если вы хотите использовать экранные координаты, передавайте координаты экрана процессору манипуляции (или инерции); Если вы хотите использовать абсолютные координаты, передавайте их в процессор, который вы используете.</span><span class="sxs-lookup"><span data-stu-id="51aa9-131">If you want to use screen coordinates, you pass screen coordinates to the manipulation (or inertia) processor; if you want to use absolute coordinates, you pass those into the processor you are using.</span></span> <span data-ttu-id="51aa9-132">Независимо от используемых значений, обработчик манипуляции будет использовать такты миллисекунд для обработки времени.</span><span class="sxs-lookup"><span data-stu-id="51aa9-132">Regardless of the values that you are using, the manipulation processor will use millisecond clock ticks for processing the time.</span></span> <span data-ttu-id="51aa9-133">Эти значения можно передавать непосредственно в обработчик инерции с помощью метода [**процесстиме**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-processtime) или с помощью отметки времени по умолчанию с помощью вызовов [**Process**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-process).</span><span class="sxs-lookup"><span data-stu-id="51aa9-133">These values can either be passed directly to the inertia processor using the [**ProcessTime**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-processtime) method or by using the default timestamp through calls to [**Process**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-process).</span></span>

## <a name="smooth-object-animation-using-the-velocity-and-deceleration-properties"></a><span data-ttu-id="51aa9-134">Плавная анимация объектов с использованием свойств скорости и замедления</span><span class="sxs-lookup"><span data-stu-id="51aa9-134">Smooth Object Animation using the Velocity and Deceleration Properties</span></span>

<span data-ttu-id="51aa9-135">Плавную анимацию можно включить, напрямую взаимодействуя с моделью физикы, задав значения скорости и замедления в интерфейсе процессора инерции, а затем вызывая [**процесс**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-process).</span><span class="sxs-lookup"><span data-stu-id="51aa9-135">You can enable smooth animation by directly interacting with the physics model by setting the velocity and deceleration values in the inertia processor interface and then calling [**Process**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-process).</span></span> <span data-ttu-id="51aa9-136">Вызывающий **процесс** вызывает обработку объектов, которые, в свою очередь, должны вызывать обновления пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="51aa9-136">Calling **Process** will trigger object manipulations which in turn should cause UI updates.</span></span> <span data-ttu-id="51aa9-137">Значения скорости объекта, передаваемые обработчику инерции, обычно берутся из обработчика манипуляций после завершения.</span><span class="sxs-lookup"><span data-stu-id="51aa9-137">Object velocity values passed to the inertia processor are typically taken from the manipulation processor upon completion.</span></span> <span data-ttu-id="51aa9-138">Значение замедления будет зависеть от того, как долго требуется анимировать объект и какие единицы используются для вычислений.</span><span class="sxs-lookup"><span data-stu-id="51aa9-138">Your deceleration value will be dependent on how long you want your object to be animated for and the units that you are using for your calculations.</span></span> <span data-ttu-id="51aa9-139">Поскольку значения зависят от, иногда необходимо масштабировать скорость ввода от процессора маниплатион и использовать произвольные значения для замедления.</span><span class="sxs-lookup"><span data-stu-id="51aa9-139">Because the values are dependent, sometimes you must scale the input velocity from the maniplation processor and use arbitrary values for deceleration.</span></span> <span data-ttu-id="51aa9-140">Следующие значения являются типичными для различных сценариев, в которых передаются значения центипиксел из свойств x и y структуры [**таучинпут**](/windows/win32/api/winuser/ns-winuser-touchinput) в обработчик манипуляции.</span><span class="sxs-lookup"><span data-stu-id="51aa9-140">The following values are typical for various scenarios where you are passing centipixel values from the x and y properties of the [**TOUCHINPUT**](/windows/win32/api/winuser/ns-winuser-touchinput) structure to the manipulation processor.</span></span>



| <span data-ttu-id="51aa9-141">Сценарий</span><span class="sxs-lookup"><span data-stu-id="51aa9-141">Scenario</span></span>    | <span data-ttu-id="51aa9-142">Property Set</span><span class="sxs-lookup"><span data-stu-id="51aa9-142">Property Set</span></span>                                                                       | <span data-ttu-id="51aa9-143">Значение замедления</span><span class="sxs-lookup"><span data-stu-id="51aa9-143">Deceleration Value</span></span> | <span data-ttu-id="51aa9-144">Типичное масштабирование ввода скорости</span><span class="sxs-lookup"><span data-stu-id="51aa9-144">Typical Velocity Input Scaling</span></span>                                  | <span data-ttu-id="51aa9-145">Примечания</span><span class="sxs-lookup"><span data-stu-id="51aa9-145">Notes</span></span>                                                                                 |
|-------------|------------------------------------------------------------------------------------|--------------------|-----------------------------------------------------------------|---------------------------------------------------------------------------------------|
| <span data-ttu-id="51aa9-146">Перевод</span><span class="sxs-lookup"><span data-stu-id="51aa9-146">Translation</span></span> | [<span data-ttu-id="51aa9-147">**DesiredDeceleration**</span><span class="sxs-lookup"><span data-stu-id="51aa9-147">**DesiredDeceleration**</span></span>](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-get_desireddeceleration)               | <span data-ttu-id="51aa9-148">0,003 f</span><span class="sxs-lookup"><span data-stu-id="51aa9-148">0.003f</span></span>             | <span data-ttu-id="51aa9-149">Нет.</span><span class="sxs-lookup"><span data-stu-id="51aa9-149">None.</span></span>                                                           | <span data-ttu-id="51aa9-150">Использование этого значения приводит к увеличению расстояния при использовании сенсорного ввода.</span><span class="sxs-lookup"><span data-stu-id="51aa9-150">Using this value will result in longer distance animations when using touch input.</span></span>    |
| <span data-ttu-id="51aa9-151">Перевод</span><span class="sxs-lookup"><span data-stu-id="51aa9-151">Translation</span></span> | [<span data-ttu-id="51aa9-152">**DesiredDeceleration**</span><span class="sxs-lookup"><span data-stu-id="51aa9-152">**DesiredDeceleration**</span></span>](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-get_desireddeceleration)               | <span data-ttu-id="51aa9-153">0,001 f</span><span class="sxs-lookup"><span data-stu-id="51aa9-153">0.001f</span></span>             | <span data-ttu-id="51aa9-154">1/20 начальная скорость для сенсорных входных данных, нет для входов мыши</span><span class="sxs-lookup"><span data-stu-id="51aa9-154">1/20th initial velocity for touch inputs, none for mouse inputs</span></span> | <span data-ttu-id="51aa9-155">Использование этого значения позволяет анимировать вторую, заданную обычную входную скорость.</span><span class="sxs-lookup"><span data-stu-id="51aa9-155">Using this value will animate for around a second given typical velocity inputs.</span></span>      |
| <span data-ttu-id="51aa9-156">Перевод</span><span class="sxs-lookup"><span data-stu-id="51aa9-156">Translation</span></span> | [<span data-ttu-id="51aa9-157">**DesiredDeceleration**</span><span class="sxs-lookup"><span data-stu-id="51aa9-157">**DesiredDeceleration**</span></span>](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-get_desireddeceleration)               | <span data-ttu-id="51aa9-158">0,5 f</span><span class="sxs-lookup"><span data-stu-id="51aa9-158">0.5f</span></span>               | <span data-ttu-id="51aa9-159">Нет</span><span class="sxs-lookup"><span data-stu-id="51aa9-159">None</span></span>                                                            | <span data-ttu-id="51aa9-160">Использование этого значения дает естественную возможность анимации на больших экранах сенсорного экрана Windows.</span><span class="sxs-lookup"><span data-stu-id="51aa9-160">Using this value gives a natural feel to animation on large Windows Touch displays.</span></span>   |
| <span data-ttu-id="51aa9-161">Поворот</span><span class="sxs-lookup"><span data-stu-id="51aa9-161">Rotation</span></span>    | [<span data-ttu-id="51aa9-162">**десиредангулардецелератион**</span><span class="sxs-lookup"><span data-stu-id="51aa9-162">**DesiredAngularDeceleration**</span></span>](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-get_desiredangulardeceleration) | <span data-ttu-id="51aa9-163">0.000015 f</span><span class="sxs-lookup"><span data-stu-id="51aa9-163">0.000015f</span></span>          | <span data-ttu-id="51aa9-164">Радианы преобразуются в градусы.</span><span class="sxs-lookup"><span data-stu-id="51aa9-164">Radians converted to degrees.</span></span>                                   | <span data-ttu-id="51aa9-165">Использование этого значения приводит к длительным анимациям вращения при использовании сенсорного ввода.</span><span class="sxs-lookup"><span data-stu-id="51aa9-165">Using this value results in longer rotational animations when using touch input.</span></span>      |
| <span data-ttu-id="51aa9-166">Поворот</span><span class="sxs-lookup"><span data-stu-id="51aa9-166">Rotation</span></span>    | [<span data-ttu-id="51aa9-167">**десиредангулардецелератион**</span><span class="sxs-lookup"><span data-stu-id="51aa9-167">**DesiredAngularDeceleration**</span></span>](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-get_desiredangulardeceleration) | <span data-ttu-id="51aa9-168">намерено f</span><span class="sxs-lookup"><span data-stu-id="51aa9-168">0.00001f</span></span>           | <span data-ttu-id="51aa9-169">коэффициент поворота 1/40th для сенсорных входных данных, нет для входных данных мыши</span><span class="sxs-lookup"><span data-stu-id="51aa9-169">1/40th rotation delta for touch inputs, none for mouse inputs</span></span>   | <span data-ttu-id="51aa9-170">Это значение в радианах, поэтому необходимо использовать очень небольшие значения замедления и скорости.</span><span class="sxs-lookup"><span data-stu-id="51aa9-170">This value is in radians so you must use very small deceleration and velocity values.</span></span> |
| <span data-ttu-id="51aa9-171">Поворот</span><span class="sxs-lookup"><span data-stu-id="51aa9-171">Rotation</span></span>    | [<span data-ttu-id="51aa9-172">**десиредангулардецелератион**</span><span class="sxs-lookup"><span data-stu-id="51aa9-172">**DesiredAngularDeceleration**</span></span>](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-get_desiredangulardeceleration) | <span data-ttu-id="51aa9-173">0.000005 f</span><span class="sxs-lookup"><span data-stu-id="51aa9-173">0.000005f</span></span>          | <span data-ttu-id="51aa9-174">Нет</span><span class="sxs-lookup"><span data-stu-id="51aa9-174">None</span></span>                                                            | <span data-ttu-id="51aa9-175">Это значение имеет естественное поведение на больших экранах сенсорного экрана Windows.</span><span class="sxs-lookup"><span data-stu-id="51aa9-175">This value has a natural feel on large Windows Touch displays.</span></span>                        |



 

## <a name="smooth-object-animation-using-the-desired-displacement-property"></a><span data-ttu-id="51aa9-176">Плавная анимация объекта с использованием свойства требуемого смещения</span><span class="sxs-lookup"><span data-stu-id="51aa9-176">Smooth Object Animation using the Desired Displacement Property</span></span>

<span data-ttu-id="51aa9-177">В некоторых случаях не нужно использовать входные данные пользователя для смещения объекта, но по-прежнему требуется плавно анимировать объект на экране.</span><span class="sxs-lookup"><span data-stu-id="51aa9-177">In some cases, you don't want to use the user's input for object displacement, but you still want an object to smoothly animate across the screen.</span></span> <span data-ttu-id="51aa9-178">В этом случае можно использовать свойства смещения в обработчике инерции, чтобы процессор рассчитывал начальную скорость перемещения объекта по экрану.</span><span class="sxs-lookup"><span data-stu-id="51aa9-178">In this case, you can use displacement properties in the inertia processor to have the processor calculate the initial velocity for moving an object across the screen.</span></span>

## <a name="controlling-object-position-using-elastic-bounds"></a><span data-ttu-id="51aa9-179">Управление положением объекта с помощью эластичных границ</span><span class="sxs-lookup"><span data-stu-id="51aa9-179">Controlling Object Position Using Elastic Bounds</span></span>

<span data-ttu-id="51aa9-180">Когда объект перемещается по экрану, обычно он останавливается, прежде чем он будет находиться за пределами точки зрения пользователя.</span><span class="sxs-lookup"><span data-stu-id="51aa9-180">After you have an object that is moving across the screen, you will typically want for it to stop before it goes outside of the user's viewpoint.</span></span> <span data-ttu-id="51aa9-181">Обработчик инерции обеспечивает эту функциональность с помощью свойств границ и эластичных полей.</span><span class="sxs-lookup"><span data-stu-id="51aa9-181">The inertia processor enables this functionality through the boundary and elastic margin properties.</span></span> <span data-ttu-id="51aa9-182">На следующем рисунке показаны различные свойства границ и полей в типичном приложении.</span><span class="sxs-lookup"><span data-stu-id="51aa9-182">The following image illustrates the various boundary and margin properties in a typical application.</span></span>

![снимок экрана, отображающий свойства границ и эластичных полей](images/elastic-illustrated.png)

<span data-ttu-id="51aa9-184">Вы устанавливаете левое, верхнее, правое и нижнее границы и эластичные поля для приложения, и обработчик инерции будет поддерживать поддержание элементов пользовательского интерфейса в пределах границ.</span><span class="sxs-lookup"><span data-stu-id="51aa9-184">You set the left, upper, right, and lower boundaries and elastic margins for your application, and the inertia processor will handle keeping UI elements within the bounds.</span></span> <span data-ttu-id="51aa9-185">Когда объект достигает эластичного поля, он замедляет работу, пока не достигнет границы.</span><span class="sxs-lookup"><span data-stu-id="51aa9-185">When an object reaches an elastic margin, it will slow down until it reaches the boundary.</span></span> <span data-ttu-id="51aa9-186">Он никогда не покидает это поле во время инерции, но по-прежнему будет перемещаться, пока компонент перпендикулярного инерции объекта не зазамедляется до 0.</span><span class="sxs-lookup"><span data-stu-id="51aa9-186">It will never leave that margin again during inertia, but will still move until the object's perpendicular inertia component decelerates to 0.</span></span> <span data-ttu-id="51aa9-187">На рисунке окружность перемещается к левой границе эластичности.</span><span class="sxs-lookup"><span data-stu-id="51aa9-187">In the illustration, a circle is displaced toward the left elastic boundary.</span></span> <span data-ttu-id="51aa9-188">Сплошная стрелка показывает направление манипуляции; сплошной кружок — это начальное расположение объекта; сплошная стрелка — это изменения, сделанные до того, как окружность достигнет эластичного поля; Пунктирная стрелка показывает, где обработчик инерции обрабатывает окружность после попадания в поле. а пунктирные круги показывают, где останавливается объект.</span><span class="sxs-lookup"><span data-stu-id="51aa9-188">The solid arrow shows the direction of the manipulation; the solid circle is the initial position of the object; the solid arrow is the changes made before the circle hits the elastic margin; the dashed arrow shows where the inertia processor manipulates the circle after it hits the margin; and the dashed circles show where the object stops.</span></span>

> [!Note]  
> <span data-ttu-id="51aa9-189">Установка свойств поля приведет к перемещению границ наружу.</span><span class="sxs-lookup"><span data-stu-id="51aa9-189">Setting the margin properties will move the bounds outward.</span></span> <span data-ttu-id="51aa9-190">Например, если верхняя граница имеет значение 50, а затем для поля верхнее эластичное поле задано значение 10, то верхняя граница фактически станет 40.</span><span class="sxs-lookup"><span data-stu-id="51aa9-190">For example, if your top boundary is set to 50 and then you set the top elastic margin to 10, your top boundary will effectively become 40.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="51aa9-191">См. также</span><span class="sxs-lookup"><span data-stu-id="51aa9-191">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="51aa9-192">Обработка инерции в неуправляемом коде</span><span class="sxs-lookup"><span data-stu-id="51aa9-192">Handling Inertia in Unmanaged Code</span></span>](handling-inertia-in-unmanaged-code.md)
</dt> <dt>

[<span data-ttu-id="51aa9-193">Инерция</span><span class="sxs-lookup"><span data-stu-id="51aa9-193">Inertia</span></span>](getting-started-with-inertia.md)
</dt> <dt>

[<span data-ttu-id="51aa9-194">Манипуляции</span><span class="sxs-lookup"><span data-stu-id="51aa9-194">Manipulations</span></span>](getting-started-with-manipulations.md)
</dt> </dl>

 

 




