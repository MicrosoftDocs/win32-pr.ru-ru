---
description: После сбора рукописных данных приложения могут управлять этими данными и передавать их на другие носители.
ms.assetid: 5a8c370e-79cb-47f0-a7b3-a631874ad757
title: Рукописные данные
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de73291269398ae42a47ee26897c8da9bac8abe7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104541311"
---
# <a name="ink-data"></a><span data-ttu-id="659b7-103">Рукописные данные</span><span class="sxs-lookup"><span data-stu-id="659b7-103">Ink Data</span></span>

<span data-ttu-id="659b7-104">После сбора рукописных данных приложения могут управлять этими данными и передавать их на другие носители.</span><span class="sxs-lookup"><span data-stu-id="659b7-104">After the ink is collected, applications can manage, manipulate, and/or transfer that data to other media.</span></span> <span data-ttu-id="659b7-105">Действия по выбору, копированию, перемещению, сохранению, просмотру и изменению рукописного ввода выполняются на объекте [**рукописного ввода**](inkdisp-class.md) и содержащихся в нем элементах, например в коллекции [**штрихов**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) и объектах [**Stroke**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) .</span><span class="sxs-lookup"><span data-stu-id="659b7-105">The actions of selecting, copying, moving, saving, viewing, and altering of the ink take place on the [**Ink**](inkdisp-class.md) object and its contained members, such as the [**Strokes**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) collection and [**Stroke**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) objects.</span></span>

> [!Note]  
> <span data-ttu-id="659b7-106">Используя Real-Timeное перо, приложения могут сохранять данные в собственном формате (например, сохранять штрихи).</span><span class="sxs-lookup"><span data-stu-id="659b7-106">Using Real-Time Stylus, applications may choose to maintain data in its own format (such as saving strokes).</span></span>

 

## <a name="ink-strokes-and-packets"></a><span data-ttu-id="659b7-107">Рукописный ввод, штрихи и пакеты</span><span class="sxs-lookup"><span data-stu-id="659b7-107">Ink, Strokes, and Packets</span></span>

<span data-ttu-id="659b7-108">Объект [**рукописного ввода**](inkdisp-class.md) — это основной тип данных, который управляет, обрабатывает и сохраняет входные данные, собранные из объекта [**InkCollector**](inkcollector-class.md) .</span><span class="sxs-lookup"><span data-stu-id="659b7-108">An [**Ink**](inkdisp-class.md) object is the fundamental data type that manages, manipulates, and stores the input collected from the [**InkCollector**](inkcollector-class.md) object.</span></span> <span data-ttu-id="659b7-109">Объект **рукописного ввода** содержит один или несколько объектов [**обводки**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) , а также общие методы и свойства для управления и управления этими штрихами.</span><span class="sxs-lookup"><span data-stu-id="659b7-109">An **Ink** object contains one or more [**Stroke**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) objects and common methods and properties to manage and manipulate those strokes.</span></span> <span data-ttu-id="659b7-110">Штрих определяется как набор данных, которые захватываются одним нажатием пера, пером и пером.</span><span class="sxs-lookup"><span data-stu-id="659b7-110">A stroke is defined as the set of data that is captured in a single pen-down, pen-move, and pen-up sequence.</span></span> <span data-ttu-id="659b7-111">Данные Stroke содержат коллекцию пакетов.</span><span class="sxs-lookup"><span data-stu-id="659b7-111">The stroke data contains a collection of packets.</span></span> <span data-ttu-id="659b7-112">Пакет — это набор данных, которые устройство планшета отправляет в каждой точке выборки.</span><span class="sxs-lookup"><span data-stu-id="659b7-112">A packet is the set of data that the tablet device sends at each sample point.</span></span> <span data-ttu-id="659b7-113">Эти данные содержат такие сведения, как координаты, Нажим пера, угол пера и что-то еще, что может быть передано оборудованием.</span><span class="sxs-lookup"><span data-stu-id="659b7-113">This data contains information such as coordinates, pen pressure, pen angle, and anything else that the hardware can transmit.</span></span> <span data-ttu-id="659b7-114">Свойство [**паккетдескриптион**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkstrokedisp-get_packetdescription) объекта **Stroke** описывает пакеты, создаваемые [**планшетом**](/windows/desktop/api/msinkaut/nn-msinkaut-iinktablet) .</span><span class="sxs-lookup"><span data-stu-id="659b7-114">The [**PacketDescription**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkstrokedisp-get_packetdescription) property of the **Stroke** object describes the packets that a [**Tablet**](/windows/desktop/api/msinkaut/nn-msinkaut-iinktablet) generates.</span></span>

## <a name="strokes"></a><span data-ttu-id="659b7-115">Strokes</span><span class="sxs-lookup"><span data-stu-id="659b7-115">Strokes</span></span>

<span data-ttu-id="659b7-116">Вы можете получить моментальный снимок штрихов в объекте [**рукописного ввода**](inkdisp-class.md) с помощью свойства [**Strokes**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkdisp-get_strokes) объекта **Ink** .</span><span class="sxs-lookup"><span data-stu-id="659b7-116">You can obtain a snapshot of the strokes in a [**Ink**](inkdisp-class.md) object by using the **Ink** object's [**Strokes**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkdisp-get_strokes) property.</span></span> <span data-ttu-id="659b7-117">Свойство **Strokes** представляет собой коллекцию ссылок на штрихи в объекте **рукописного ввода** во время считывания свойства **Strokes** .</span><span class="sxs-lookup"><span data-stu-id="659b7-117">The **Strokes** property is a collection of references to the strokes in the **Ink** object at the time the **Strokes** property is read.</span></span> <span data-ttu-id="659b7-118">Если штрихи впоследствии добавляются в объект **рукописного ввода** или удаляются из него, ранее полученная коллекция [**росчерков**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) не обновляется.</span><span class="sxs-lookup"><span data-stu-id="659b7-118">If strokes are subsequently added to or deleted from the **Ink** object, a previously obtained [**Strokes**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) collection is not updated.</span></span> <span data-ttu-id="659b7-119">Кроме того, свойство **Strokes** является значением и, как и любое значение, выходит за пределы области, если оно не назначено переменной.</span><span class="sxs-lookup"><span data-stu-id="659b7-119">Furthermore, the **Strokes** property is a value and, like any value, goes out of scope unless it is assigned to a variable.</span></span>

<span data-ttu-id="659b7-120">Чтобы свойство [**Strokes**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkdisp-get_strokes) было синхронизировано с объектом [**рукописного ввода**](inkdisp-class.md) , заключите его в обработчик событий для событий [**Строкесаддед**](inkstrokes-strokesadded.md) и [**строкесремовед**](inkstrokes-strokesremoved.md) в коллекции [**штрихов**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="659b7-120">To keep a [**Strokes**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkdisp-get_strokes) property synchronized with an [**Ink**](inkdisp-class.md) object, wrap it in an event handler for the [**StrokesAdded**](inkstrokes-strokesadded.md) and [**StrokesRemoved**](inkstrokes-strokesremoved.md) events on the [**Strokes**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) collection.</span></span> <span data-ttu-id="659b7-121">Обработчик должен получить новую копию свойства **Strokes** при срабатывании любого события.</span><span class="sxs-lookup"><span data-stu-id="659b7-121">The handler should obtain a new copy of the **Strokes** property when either event is fired.</span></span> <span data-ttu-id="659b7-122">Следует избегать добавления обработчика событий в коллекцию **штрихов** , которая находится вне области действия до срабатывания события.</span><span class="sxs-lookup"><span data-stu-id="659b7-122">Be careful not to add the event handler to a **Strokes** collection that is out of scope before the event is fired.</span></span>

<span data-ttu-id="659b7-123">Обратите внимание, что в этом примере в `theAddedStrokesIDs` обработчике обновляется новая копия свойства Strokes `StrokesAdded_Event` .</span><span class="sxs-lookup"><span data-stu-id="659b7-123">Notice in this example that `theAddedStrokesIDs` is updated with a new copy of the strokes property in the `StrokesAdded_Event` handler.</span></span>


```C++
public void StrokesAdded_Event(object sender, StrokesEventArgs e)
{
    int [] theAddedStrokesIDs = e.StrokeIds;
    theListBox.Items.Clear();
    foreach (int i in theAddedStrokesIDs)
    {
        theListBox.Items.Add("Added Stroke ID: " + i.ToString());
    }
}
```



## <a name="packetdescription-property"></a><span data-ttu-id="659b7-124">Паккетдескриптион, свойство</span><span class="sxs-lookup"><span data-stu-id="659b7-124">PacketDescription Property</span></span>

<span data-ttu-id="659b7-125">Свойство [**паккетдескриптион**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkstrokedisp-get_packetdescription) объекта [**Ink**](inkdisp-class.md) определяет набор данных в каждом пакете, который приложение получает с устройства Tablet PC.</span><span class="sxs-lookup"><span data-stu-id="659b7-125">The [**Ink**](inkdisp-class.md) object's [**PacketDescription**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkstrokedisp-get_packetdescription) property defines the set of information in each packet that the application gets from a Tablet PC device.</span></span> <span data-ttu-id="659b7-126">Эти сведения обычно содержат координаты, но могут содержать гораздо более подробную информацию (в зависимости от возможностей планшетных ПК), таких как Нажим пера или угол пера.</span><span class="sxs-lookup"><span data-stu-id="659b7-126">The information typically includes coordinates, but it can include much more detailed information (depending on what the capabilities of Tablet PC digitizer) such as pen pressure or pen angle.</span></span> <span data-ttu-id="659b7-127">Устанавливая описания пакетов для объекта [**InkCollector**](inkcollector-class.md) или [**InkOverlay**](inkoverlay-class.md) перед сбором рукописных данных (с помощью свойства десиредпаккетдескриптион), вы получаете полный контроль над тем, какие свойства устройств планшетного ПК вы хотите получить.</span><span class="sxs-lookup"><span data-stu-id="659b7-127">By setting packet descriptions on the [**InkCollector**](inkcollector-class.md) or [**InkOverlay**](inkoverlay-class.md) object before any ink is collected (using the DesiredPacketDescription property), you have full control over which of the Tablet PC devices properties you want to receive.</span></span>

## <a name="extended-properties"></a><span data-ttu-id="659b7-128">Расширенные свойства</span><span class="sxs-lookup"><span data-stu-id="659b7-128">Extended Properties</span></span>

<span data-ttu-id="659b7-129">Расширенные свойства предоставляют механизм для присоединения определяемых приложением данных к [**рукописному вводу**](inkdisp-class.md) и другим объектам.</span><span class="sxs-lookup"><span data-stu-id="659b7-129">Extended properties provide a mechanism for attaching application-defined data to [**Ink**](inkdisp-class.md) and other objects.</span></span> <span data-ttu-id="659b7-130">Дополнительные сведения о расширенных свойствах см. в разделе Коллекция [**расширенных свойств**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkextendedproperties) .</span><span class="sxs-lookup"><span data-stu-id="659b7-130">For more information about extended properties, see the [**ExtendedProperties**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkextendedproperties) collection.</span></span>

## <a name="ink-rendering"></a><span data-ttu-id="659b7-131">Отрисовка рукописного ввода</span><span class="sxs-lookup"><span data-stu-id="659b7-131">Ink Rendering</span></span>

<span data-ttu-id="659b7-132">Объект модуля [**подготовки**](inkrenderer-class.md) отчетов отвечает за отрисовку [**рукописного ввода**](inkdisp-class.md).</span><span class="sxs-lookup"><span data-stu-id="659b7-132">The [**Renderer**](inkrenderer-class.md) object is responsible for rendering [**Ink**](inkdisp-class.md).</span></span> <span data-ttu-id="659b7-133">При наличии соответствующего контекста планшета объект модуля **подготовки** отчетов может сопоставлять координаты пространства рукописного ввода пикселям, применять преобразования представлений и отображать рукописные данные на экранах и принтерах.</span><span class="sxs-lookup"><span data-stu-id="659b7-133">Given an appropriate tablet context, the **Renderer** object can map ink space coordinates to pixels, apply view transforms, and display ink on screens and printers.</span></span> <span data-ttu-id="659b7-134">Методы [**Draw**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrenderer-draw) и [**дравстроке**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrenderer-drawstroke) являются основными методами отрисовки рукописного ввода.</span><span class="sxs-lookup"><span data-stu-id="659b7-134">The [**Draw**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrenderer-draw) and [**DrawStroke**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrenderer-drawstroke) methods are the primary methods for rendering ink.</span></span> <span data-ttu-id="659b7-135">Дополнительные сведения о отображении рукописных данных в окне см. в разделе объект модуля **подготовки** отчетов.</span><span class="sxs-lookup"><span data-stu-id="659b7-135">For more information about displaying ink in a window, see the **Renderer** object.</span></span>

## <a name="cusps"></a><span data-ttu-id="659b7-136">куспс</span><span class="sxs-lookup"><span data-stu-id="659b7-136">Cusps</span></span>

<span data-ttu-id="659b7-137">Штрих обычно начинается, когда перо перемещается на поверхность рисования и заканчивается при порождении пера.</span><span class="sxs-lookup"><span data-stu-id="659b7-137">A stroke normally begins when the pen is lowered to the drawing surface and ends when the pen is raised.</span></span> <span data-ttu-id="659b7-138">В штрихе пиковые значения, углы и коренные изменения направления называются куспс.</span><span class="sxs-lookup"><span data-stu-id="659b7-138">Within a stroke, the peaks, angles, and radical changes of direction are called cusps.</span></span> <span data-ttu-id="659b7-139">Конечные точки штриха также считаются куспс.</span><span class="sxs-lookup"><span data-stu-id="659b7-139">The endpoints of a stroke are also considered cusps.</span></span> <span data-ttu-id="659b7-140">Например, прописная буква «L» имеет три куспс, одну в середине, а по одной в конце.</span><span class="sxs-lookup"><span data-stu-id="659b7-140">For example, the capital letter "L" has three cusps, one in the middle and one at each end.</span></span>

<span data-ttu-id="659b7-141">При вводе штриха оно обычно сглажено и подготавливается к просмотру с помощью кривой Безье (или ломаной линии).</span><span class="sxs-lookup"><span data-stu-id="659b7-141">As a stroke is entered, it is normally smoothed and rendered using a Bezier (or polyline) curve.</span></span> <span data-ttu-id="659b7-142">Кривые Безье могут преобразовывать куспс в небольшие циклы.</span><span class="sxs-lookup"><span data-stu-id="659b7-142">Bezier curves may turn cusps into small loops.</span></span> <span data-ttu-id="659b7-143">Например, Пиковая буква «i» может быть сглажена, что напоминает знак «e».</span><span class="sxs-lookup"><span data-stu-id="659b7-143">For example, the peak of the cursive letter "i" might be smoothed to resemble the cursive "e".</span></span> <span data-ttu-id="659b7-144">Чтобы избежать этого, в Microsoft renders есть этап "pre-Безье", который обрабатывает куспс по-разному.</span><span class="sxs-lookup"><span data-stu-id="659b7-144">To prevent this, Microsoft renderers have a "pre-Bezier" phase that handles the cusps differently.</span></span>

<span data-ttu-id="659b7-145">Куспс также можно использовать для разбиения объектов [**Stroke**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) на стирание единиц.</span><span class="sxs-lookup"><span data-stu-id="659b7-145">Cusps can also be used to subdivide [**Stroke**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) objects into erasable units.</span></span> <span data-ttu-id="659b7-146">Например, при выборе вертикальной стороны прописной буквы «L» может указываться стирание только этой стороны.</span><span class="sxs-lookup"><span data-stu-id="659b7-146">For example, selecting the vertical side of a capital "L" could indicate erasing just that side.</span></span> <span data-ttu-id="659b7-147">Часть штриха для стирания должна быть частью двух куспс.</span><span class="sxs-lookup"><span data-stu-id="659b7-147">The part of the stroke to be erased would be the part between two cusps.</span></span>

 

 
