---
description: Общие сведения о проектировании приложения, использующего прикладные программные интерфейсы (API) Стилусинпут.
ms.assetid: cb68a6bb-dd38-4dfb-bbbb-b5d846e5aa0a
title: Рекомендации по проектированию для API Стилусинпут
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ff526d8e073f00156730d79ea2caf1a02c5e5af2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104348685"
---
# <a name="design-considerations-for-the-stylusinput-api"></a><span data-ttu-id="2d6af-103">Рекомендации по проектированию для API Стилусинпут</span><span class="sxs-lookup"><span data-stu-id="2d6af-103">Design Considerations for the StylusInput API</span></span>

<span data-ttu-id="2d6af-104">Ниже приведены рекомендации по проектированию для API Стилусинпут.</span><span class="sxs-lookup"><span data-stu-id="2d6af-104">The following are design considerations for the StylusInput API.</span></span>

-   <span data-ttu-id="2d6af-105">Можно обновить свойство [**виндовинпутректангле**](/windows/desktop/api/RTSCom/nf-rtscom-irealtimestylus-get_windowinputrectangle) объекта [**RealTimeStylus**](realtimestylus-class.md) и свойство [**клипректангле**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-get_cliprectangle) объекта [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) , пока перо не выключается.</span><span class="sxs-lookup"><span data-stu-id="2d6af-105">You can update the [**WindowInputRectangle**](/windows/desktop/api/RTSCom/nf-rtscom-irealtimestylus-get_windowinputrectangle) property of the [**RealTimeStylus**](realtimestylus-class.md) object and the [**ClipRectangle**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-get_cliprectangle) property of the [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) object while the pen is down.</span></span> <span data-ttu-id="2d6af-106">Это может быть полезно, если требуется динамическая область рисования во время сбора приложением рукописного ввода.</span><span class="sxs-lookup"><span data-stu-id="2d6af-106">This can be useful when you want to have a dynamic drawing area while the application is collecting ink.</span></span>
-   <span data-ttu-id="2d6af-107">Чтобы оптимизировать повторное использование и обслуживание кода подключаемого модуля, подключаемые модули не должны выполнять вызовы напрямую в приложение, но должны использовать [**кустомстилусдата**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-customstylusdataadded) (объект [кустоместилусдата](/previous-versions/ms824747(v=msdn.10)) в управляемом коде) для взаимодействия с приложением.</span><span class="sxs-lookup"><span data-stu-id="2d6af-107">To optimize reuse and maintenance of plug-in code, plug-ins should not make calls directly to the application but should use the [**CustomStylusData**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-customstylusdataadded) ([CustomeStylusData](/previous-versions/ms824747(v=msdn.10)) object in managed code) to communicate with the application.</span></span>
-   <span data-ttu-id="2d6af-108">Коллекции подключаемых модулей объекта [**RealTimeStylus**](realtimestylus-class.md) упорядочены.</span><span class="sxs-lookup"><span data-stu-id="2d6af-108">The [**RealTimeStylus**](realtimestylus-class.md) object's plug-in collections are ordered.</span></span> <span data-ttu-id="2d6af-109">Относительное расположение подключаемых модулей в этих коллекциях может быть очень важным.</span><span class="sxs-lookup"><span data-stu-id="2d6af-109">The relative position of your plug-ins within these collections can be very important.</span></span> <span data-ttu-id="2d6af-110">Например, подключаемый модуль, изменяющий сведения о пакете, должен быть добавлен в синхронную коллекцию подключаемых модулей перед подключаемым модулем динамического рендеринга.</span><span class="sxs-lookup"><span data-stu-id="2d6af-110">For example, a plug-in that modifies packet information should probably be added to the synchronous plug-in collection before a dynamic-renderer plug-in.</span></span>
-   <span data-ttu-id="2d6af-111">Возможность добавления пользовательских данных пера в поток данных пера планшета должна быть использована экономно.</span><span class="sxs-lookup"><span data-stu-id="2d6af-111">The ability to add custom stylus data to the tablet pen's data stream should be used sparingly.</span></span> <span data-ttu-id="2d6af-112">Используйте эту функцию, только если другой подключаемый модуль должен получить эти сведения как часть потока данных.</span><span class="sxs-lookup"><span data-stu-id="2d6af-112">Use this feature only if another plug-in needs to receive this information as part of the data stream.</span></span> <span data-ttu-id="2d6af-113">Кроме того, не следует добавлять пользовательские данные пера в ответ на другие пользовательские данные пера, поступающие в подключаемый модуль, так как это может создать бесконечный цикл.</span><span class="sxs-lookup"><span data-stu-id="2d6af-113">Also, avoid adding custom stylus data in response to other custom stylus data coming into the plug-in, as this can create an infinite loop.</span></span>
-   <span data-ttu-id="2d6af-114">Коллекции подключаемых модулей можно изменить, пока включен объект [**RealTimeStylus**](realtimestylus-class.md) . Однако это может усложнить работу приложения в прогнозировании.</span><span class="sxs-lookup"><span data-stu-id="2d6af-114">Plug-in collections can be modified while the [**RealTimeStylus**](realtimestylus-class.md) object is enabled; however, this can make the behavior of your application harder to predict.</span></span> <span data-ttu-id="2d6af-115">Когда подключаемый модуль добавляется, пока включен объект **RealTimeStylus** , объект **RealTimeStylus** вызывает Microsoft. стилусинпут. истилуссинкплугин подключаемого модуля.</span><span class="sxs-lookup"><span data-stu-id="2d6af-115">When a plug-in is added while the **RealTimeStylus** object is enabled, the **RealTimeStylus** object calls the plug-in's Microsoft.StylusInput.IStylusSyncPlugin.</span></span> <span data-ttu-id="2d6af-116">Метод [**реалтиместилусенаблед**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusenabled) ( [Microsoft. стилусинпут. истилуссинкплугин. Реалтиместилусенаблед](/previous-versions/ms824758(v=msdn.10)) или метод [Microsoft. стилусинпут. IStylusAsyncPlugin. RealTimeStylusEnabled](/previous-versions/ms824775(v=msdn.10)) в управляемом коде).</span><span class="sxs-lookup"><span data-stu-id="2d6af-116">[**RealTimeStylusEnabled**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusenabled) method (either the [Microsoft.StylusInput.IStylusSyncPlugin.RealTimeStylusEnabled](/previous-versions/ms824758(v=msdn.10)) or the [Microsoft.StylusInput.IStylusAsyncPlugin.RealTimeStylusEnabled](/previous-versions/ms824775(v=msdn.10)) method in managed code).</span></span> <span data-ttu-id="2d6af-117">Когда подключаемый модуль удаляется, пока включен объект **RealTimeStylus** , объект **RealTimeStylus** вызывает метод [**Реалтиместилусдисаблед**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusdisabled) подключаемого модуля ( [Microsoft. Стилусинпут. Истилуссинкплугин. Реалтиместилусдисаблед](/previous-versions/ms824757(v=msdn.10)) или метод [Microsoft. стилусинпут. IStylusAsyncPlugin. RealTimeStylusDisabled](/previous-versions/ms824774(v=msdn.10)) в управляемом коде).</span><span class="sxs-lookup"><span data-stu-id="2d6af-117">When a plug-in is removed while the **RealTimeStylus** object is enabled, the **RealTimeStylus** object calls the plug-in's [**RealTimeStylusDisabled**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusdisabled) method (either the [Microsoft.StylusInput.IStylusSyncPlugin.RealTimeStylusDisabled](/previous-versions/ms824757(v=msdn.10)) or the [Microsoft.StylusInput.IStylusAsyncPlugin.RealTimeStylusDisabled](/previous-versions/ms824774(v=msdn.10)) method in managed code).</span></span> <span data-ttu-id="2d6af-118">Это позволяет подключаемому модулю поддерживать свое правильное состояние без проверки свойства [**Enabled**](/windows/desktop/api/RTSCom/nf-rtscom-irealtimestylus-get_enabled) объекта **RealTimeStylus** . При добавлении подключаемого модуля, когда включен объект **RealTimeStylus** , подключаемые данные, которые получает подключаемый модуль, могут не содержать достаточных сведений для адекватного определения контекста начальных данных.</span><span class="sxs-lookup"><span data-stu-id="2d6af-118">This allows the plug-in to maintain its proper state without having to check the [**Enabled**](/windows/desktop/api/RTSCom/nf-rtscom-irealtimestylus-get_enabled) property of the **RealTimeStylus** object.When a plug-in is added while the **RealTimeStylus** object is enabled, the plug-in data that the plug-in receives may not contain enough information to adequately establish the context of the initial data.</span></span> <span data-ttu-id="2d6af-119">Например, добавленный подключаемый модуль может начать получать данные пакетов от пера, который является средним.</span><span class="sxs-lookup"><span data-stu-id="2d6af-119">For example, the newly added plug-in could start receiving packet data from a pen that is mid-stroke.</span></span> <span data-ttu-id="2d6af-120">Аналогично, когда подключаемый модуль удаляется во время включения объекта **RealTimeStylus** , данные подключаемого модуля, полученные подключаемым модулем, могут оказаться недостаточными для завершения обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2d6af-120">Similarly, when a plug-in removed while the **RealTimeStylus** object is enabled, the plug-in data that the plug-in has received may be insufficient to finish processing the data.</span></span>
    > [!Note]  
    > <span data-ttu-id="2d6af-121">Для общей стабильности можно сбросить внутреннее состояние подключаемого модуля при вызове метода [**реалтиместилусенаблед**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusenabled) или [**реалтиместилусдисаблед**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusdisabled) .</span><span class="sxs-lookup"><span data-stu-id="2d6af-121">For overall stability, reset a plug-in's internal state when either its [**RealTimeStylusEnabled**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusenabled) or [**RealTimeStylusDisabled**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusdisabled) method is called.</span></span>

     

-   <span data-ttu-id="2d6af-122">Объект [**RealTimeStylus**](realtimestylus-class.md) создает исключение, если подключаемый модуль изменяет коллекцию подключаемых модулей, к которой он присоединен.</span><span class="sxs-lookup"><span data-stu-id="2d6af-122">The [**RealTimeStylus**](realtimestylus-class.md) object throws an exception if a plug-in modifies the plug-in collection to which it is attached.</span></span> <span data-ttu-id="2d6af-123">Это происходит только в том случае, если подключаемый модуль делает это, пока он вызывается объектом **RealTimeStylus** как членом этой коллекции.</span><span class="sxs-lookup"><span data-stu-id="2d6af-123">This happens only when the plug-in does so while it is being called by the **RealTimeStylus** object as a member of that collection.</span></span>

 

 
