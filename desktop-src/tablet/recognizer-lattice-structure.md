---
description: Распознаватели, созданные для использования с Windows Vista и Windows XP Tablet PC Edition, используют набор структур, каждый из которых называется Lattice, для передачи результатов распознавания в библиотеки платформы Tablet PC.
ms.assetid: 628ca677-31eb-47d9-bcc6-d7777f8aaf7c
title: Структура Lattice распознавателя
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 46bbfe71674571ae0554509dfa8477569ef8b44d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104554046"
---
# <a name="recognizer-lattice-structure"></a><span data-ttu-id="a17aa-103">Структура Lattice распознавателя</span><span class="sxs-lookup"><span data-stu-id="a17aa-103">Recognizer Lattice Structure</span></span>

<span data-ttu-id="a17aa-104">Распознаватели, созданные для использования с Windows Vista и Windows XP Tablet PC Edition, используют набор структур, каждый из которых называется Lattice, для передачи результатов распознавания в библиотеки платформы Tablet PC.</span><span class="sxs-lookup"><span data-stu-id="a17aa-104">Recognizers created for use with Windows Vista and Windows XP Tablet PC Edition use a set of structures, each of which is called a lattice, to pass recognition results back to Tablet PC platform libraries.</span></span> <span data-ttu-id="a17aa-105">Платформа Tablet PC копирует информацию в этих структурах в объект [**иинкрекогнитионресулт**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionresult) , коллекцию [**Иинкрекогнитионалтернатес**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionalternates) и объект [**иинкрекогнитионалтернате**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionalternate) .</span><span class="sxs-lookup"><span data-stu-id="a17aa-105">The Tablet PC platform then copies the information in these structures into the [**IInkRecognitionResult**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionresult) object, the [**IInkRecognitionAlternates**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionalternates) collection, and the [**IInkRecognitionAlternate**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionalternate) object.</span></span>

<span data-ttu-id="a17aa-106">Указатель на Lattice должен возвращаться распознавателем, когда платформа вызывает функцию [**жетлаттицептр**](/windows/desktop/api/recapis/nf-recapis-getlatticeptr) для маркера [хрекоконтекст](hrecocontext-handle.md) .</span><span class="sxs-lookup"><span data-stu-id="a17aa-106">A pointer to the lattice should be returned by the recognizer when the platform calls the [**GetLatticePtr**](/windows/desktop/api/recapis/nf-recapis-getlatticeptr) function on the [HRECOCONTEXT](hrecocontext-handle.md) handle.</span></span>

<span data-ttu-id="a17aa-107">В этом разделе подробно описывается структура Lattice.</span><span class="sxs-lookup"><span data-stu-id="a17aa-107">This section describes the lattice structure in detail.</span></span> <span data-ttu-id="a17aa-108">Общие сведения об распознавателях и связанных понятиях см. в разделе [о распознавании рукописного текста](about-handwriting-recognition.md).</span><span class="sxs-lookup"><span data-stu-id="a17aa-108">For an overview of recognizers and related concepts, see [About Handwriting Recognition](about-handwriting-recognition.md).</span></span>

## <a name="the-need-for-a-lattice"></a><span data-ttu-id="a17aa-109">Потребность в Lattice</span><span class="sxs-lookup"><span data-stu-id="a17aa-109">The Need for a Lattice</span></span>

<span data-ttu-id="a17aa-110">Распознаватель может найти несколько способов разбить набор рукописных штрихов на сегменты распознавания.</span><span class="sxs-lookup"><span data-stu-id="a17aa-110">A recognizer may find several ways to break a set of ink strokes into recognition segments.</span></span> <span data-ttu-id="a17aa-111">То, что распознаватель использует в качестве сегмента распознавания, зависит от типа распознавателя.</span><span class="sxs-lookup"><span data-stu-id="a17aa-111">What the recognizer uses as a recognition segment depends upon the type of recognizer.</span></span> <span data-ttu-id="a17aa-112">Распознаватели английского языка обычно используют слова в качестве сегмента распознавания.</span><span class="sxs-lookup"><span data-stu-id="a17aa-112">English language recognizers typically use words as the recognition segment.</span></span> <span data-ttu-id="a17aa-113">Другие распознаватели могут использовать в качестве сегмента распознавания символы, фигуры или жесты.</span><span class="sxs-lookup"><span data-stu-id="a17aa-113">Other recognizers might use characters, shapes, or gestures as the recognition segment.</span></span> <span data-ttu-id="a17aa-114">Гибкость структур Lattice обеспечивает логическое управление большим количеством результатов распознавания, которые можно комбинировать в сложных отношениях.</span><span class="sxs-lookup"><span data-stu-id="a17aa-114">The flexibility of the lattice structures allows for logical management of the large number of recognition results that can be combined in complex relationships.</span></span>

<span data-ttu-id="a17aa-115">На внутреннем уровне распознаватели используют Lattice для хранения базовых единиц распознавания для определенного фрагмента рукописного ввода.</span><span class="sxs-lookup"><span data-stu-id="a17aa-115">Internally, recognizers use a lattice to hold basic recognition units for a given piece of ink.</span></span> <span data-ttu-id="a17aa-116">Lattice также содержит оценку или уровень достоверности Объединенного результата.</span><span class="sxs-lookup"><span data-stu-id="a17aa-116">The lattice also holds the score, or confidence level, of the combined result.</span></span> <span data-ttu-id="a17aa-117">Кроме того, Lattice сохраняет сопоставление сегментов с исходными рукописными штрихами.</span><span class="sxs-lookup"><span data-stu-id="a17aa-117">In addition, the lattice stores the mapping of segments to the original ink strokes.</span></span>

<span data-ttu-id="a17aa-118">Структуры Lattice определены в файле заголовка rectypes. h.</span><span class="sxs-lookup"><span data-stu-id="a17aa-118">The lattice structures are defined in the RecTypes.h header file.</span></span> <span data-ttu-id="a17aa-119">Структуры Lattice включают следующие структуры:</span><span class="sxs-lookup"><span data-stu-id="a17aa-119">The lattice structures include the following structures:</span></span>

-   [<span data-ttu-id="a17aa-120">**СОСТО \_ LATTICE**</span><span class="sxs-lookup"><span data-stu-id="a17aa-120">**RECO\_LATTICE**</span></span>](/windows/win32/api/rectypes/ns-rectypes-reco_lattice)
-   [<span data-ttu-id="a17aa-121">**СОСТО \_ LATTICE, \_ столбец**</span><span class="sxs-lookup"><span data-stu-id="a17aa-121">**RECO\_LATTICE\_COLUMN**</span></span>](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_column)
-   [<span data-ttu-id="a17aa-122">**СОСТО \_ LATTICE, \_ элемент**</span><span class="sxs-lookup"><span data-stu-id="a17aa-122">**RECO\_LATTICE\_ELEMENT**</span></span>](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_element)
-   [<span data-ttu-id="a17aa-123">**\_Свойства LATTICE \_ состо**</span><span class="sxs-lookup"><span data-stu-id="a17aa-123">**RECO\_LATTICE\_PROPERTIES**</span></span>](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_properties)
-   [<span data-ttu-id="a17aa-124">**СОСТО \_ LATTICE, \_ свойство**</span><span class="sxs-lookup"><span data-stu-id="a17aa-124">**RECO\_LATTICE\_PROPERTY**</span></span>](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_property)

## <a name="lattice-components"></a><span data-ttu-id="a17aa-125">Компоненты Lattice</span><span class="sxs-lookup"><span data-stu-id="a17aa-125">Lattice Components</span></span>

<span data-ttu-id="a17aa-126">В следующих примерах используются штрихи для слова «вместе», как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="a17aa-126">The following examples use the strokes for the word "together" as shown in the following image.</span></span> <span data-ttu-id="a17aa-127">В примерах сегменты оцениваются как одно или несколько слов.</span><span class="sxs-lookup"><span data-stu-id="a17aa-127">In the examples, the segments are evaluated as one or more words.</span></span> <span data-ttu-id="a17aa-128">Числа представляют отдельные штрихи в вычисляемом сегменте.</span><span class="sxs-lookup"><span data-stu-id="a17aa-128">The numbers represent the individual strokes in the segment being evaluated.</span></span> <span data-ttu-id="a17aa-129">Обратите внимание, что каждый символ "t" содержит два штриха.</span><span class="sxs-lookup"><span data-stu-id="a17aa-129">Note that each of the "t" characters contains two strokes.</span></span>

![штрихи для слова "вместе"](images/1d5fa9fb-6c38-49b8-8caa-2b6dcc1d5dec.gif)

<span data-ttu-id="a17aa-131">Lattice состоит из одного или нескольких столбцов, по одному для каждого сегмента.</span><span class="sxs-lookup"><span data-stu-id="a17aa-131">A lattice is composed of one or more columns, one for each segment.</span></span> <span data-ttu-id="a17aa-132">Каждый столбец, в свою очередь, содержит один или несколько элементов.</span><span class="sxs-lookup"><span data-stu-id="a17aa-132">Each column in turn contains one or more elements.</span></span> <span data-ttu-id="a17aa-133">Элемент содержит дискретный альтернативный вариант распознавания.</span><span class="sxs-lookup"><span data-stu-id="a17aa-133">An element holds a discrete recognition alternate.</span></span> <span data-ttu-id="a17aa-134">Дополнительные сведения о столбцах см. в разделе Структура [**\_ \_ столбцов состо LATTICE**](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_column) .</span><span class="sxs-lookup"><span data-stu-id="a17aa-134">For more information about columns, see the [**RECO\_LATTICE\_COLUMN**](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_column) structure.</span></span> <span data-ttu-id="a17aa-135">Дополнительные сведения об элементах см. в разделе Структура [**\_ \_ элемента состо LATTICE**](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_element) .</span><span class="sxs-lookup"><span data-stu-id="a17aa-135">For more information about elements, see the [**RECO\_LATTICE\_ELEMENT**](/windows/win32/api/rectypes/ns-rectypes-reco_lattice_element) structure.</span></span>

<span data-ttu-id="a17aa-136">Распознаватель может вернуть один сегмент при вычислении образца рукописного ввода, показанного в предыдущем примере.</span><span class="sxs-lookup"><span data-stu-id="a17aa-136">The recognizer might return a single segment when evaluating the ink sample shown in the previous example.</span></span> <span data-ttu-id="a17aa-137">В этом случае Lattice содержит один столбец с одним элементом.</span><span class="sxs-lookup"><span data-stu-id="a17aa-137">In this case the lattice contains a single column with a single element.</span></span>

<span data-ttu-id="a17aa-138">Более сложный пример представляет себя, когда распознаватель оценивает образец рукописного ввода и имеет несколько сегментов и несколько вариантов для каждого сегмента.</span><span class="sxs-lookup"><span data-stu-id="a17aa-138">A more complex example presents itself when the recognizer evaluates the ink sample and comes up with multiple segments and multiple alternates for each segment.</span></span>

<span data-ttu-id="a17aa-139">Количество вариантов распознавания может располагаться в шахматном порядке, даже для небольшого примера рукописного ввода.</span><span class="sxs-lookup"><span data-stu-id="a17aa-139">The number of recognition alternates may be staggering, even for a small ink sample.</span></span> <span data-ttu-id="a17aa-140">Например, «t o g e t h e r» может привести к следующим результатам:</span><span class="sxs-lookup"><span data-stu-id="a17aa-140">For example, "t o g e t h e r" can yield the following results:</span></span>

-   <span data-ttu-id="a17aa-141">"чтобы получить его" (плюс альтернативные варианты для каждого слова)</span><span class="sxs-lookup"><span data-stu-id="a17aa-141">"to get her" (plus alternates for each word)</span></span>
-   <span data-ttu-id="a17aa-142">"для сбора" (плюс альтернативные варианты для каждого слова)</span><span class="sxs-lookup"><span data-stu-id="a17aa-142">"to gather" (plus alternates for each word)</span></span>
-   <span data-ttu-id="a17aa-143">«поступил» (плюс альтернативные варианты для каждого слова)</span><span class="sxs-lookup"><span data-stu-id="a17aa-143">"to got her" (plus alternates for each word)</span></span>
-   <span data-ttu-id="a17aa-144">"вместе" (плюс альтернативы для слова)</span><span class="sxs-lookup"><span data-stu-id="a17aa-144">"together" (plus alternates for the word)</span></span>

<span data-ttu-id="a17aa-145">В этом случае распознаватель может создать следующую структуру Lattice.</span><span class="sxs-lookup"><span data-stu-id="a17aa-145">In this case, a recognizer might create the following lattice structure.</span></span>

![Структура Lattice для слова "вместе"](images/2496c3dd-8b08-4f86-9fe3-f118be49a8c8.gif)

> [!Note]  
> <span data-ttu-id="a17aa-147">Каждый столбец использует одинаковый порядок штрихов, так как все они ссылаются на одну и ту же коллекцию [инкстрокес](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a17aa-147">Each column shares the same stroke order because they all refer to the same [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) collection.</span></span>

 

 

 
