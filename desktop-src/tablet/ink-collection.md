---
description: Коллекция рукописных данных начинается с дигитайзера.
ms.assetid: 95e49f5b-d6f0-4a5a-868b-aa0caf87c39c
title: Коллекция рукописных данных
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e45988ea93aac5016391e22c352b9d0123a5e122f4a79c55e41e06834ed040e0
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118452070"
---
# <a name="ink-collection"></a>Коллекция рукописных данных

Коллекция рукописных данных начинается с дигитайзера. Пользователь помещает перо на дигитайзер и начинает писать. Вы можете использовать функции сбора рукописных данных API, чтобы управлять коллекцией рукописного текста, передаваемых с помощью пера. У вас есть доступ к информации о доступном оборудовании на планшетном ПК через коллекцию [**планшетов**](/windows/desktop/api/msinkaut/nf-msinkaut-iinktablets-item) и объект [**планшета**](/windows/desktop/api/msinkaut/nn-msinkaut-iinktablet) . Затем используйте объект [**InkCollector**](inkcollector-class.md) для получения данных, поступающих от дигитайзера.

## <a name="tablets-and-the-tablet-object"></a>Планшеты и объект планшета

[**Планшет**](/windows/desktop/api/msinkaut/nn-msinkaut-iinktablet) представляет устройство оцифровки планшетного ПК. На планшетном ПК может быть несколько дигитайзеров. С помощью объекта **планшета** можно запросить доступные устройства дигитайзера, подключенные к ПЛАНШЕТному ПК, и соответствующие возможности оборудования. Например, можно определить, интегрируется ли **планшет** , с которым вы работаете, с дисплеем или отдельным внешним устройством.

## <a name="inkcollector-object"></a>Объект InkCollector

Объект [**InkCollector**](inkcollector-class.md) захватывает ввод рукописного ввода из доступных устройств [**планшета**](/windows/desktop/api/msinkaut/nn-msinkaut-iinktablet) . Объект **InkCollector** собирает только рукописные данные и жесты, вводимые в конкретное окно. Очень эффективный приемник событий визуализирует эти входные данные в режиме реального времени. Объект **InkCollector** захватывает входные данные и направляет их в объект [**рукописного ввода**](inkdisp-class.md) .

> [!Note]  
> Одновременное размещение рукописного ввода с несколькими перьями может выполняться или не работать в зависимости от аппаратных возможностей устройства оцифровки.

 

### <a name="how-the-ink-collector-works"></a>Принцип работы сборщика рукописных данных

Объект [**InkCollector**](inkcollector-class.md) присоединяет себя к известному окну приложения. Затем он позволяет пользователям использовать любое доступное устройство Tablet PC (включая мышь) для размещения рукописного ввода в режиме реального времени в этом окне. Рукописные штрихи, которые он собирает, хранятся в соответствующем объекте [**рукописного ввода**](inkdisp-class.md) . Затем эти штрихи можно изменить или отправить распознавателю для распознавания. Объект **InkCollector** также уведомляет приложение, когда курсор поступает в диапазон любого из используемых устройств Tablet PC.

Чтобы объект [**InkCollector**](inkcollector-class.md) точно установил курсор мыши в окне с поддержкой рукописного ввода, это окно должно иметь возможность получать сообщение **WM \_ сеткурсор** . Это успешно для всех обычных окон, но для элемента управления в диалоговом окне родительский элемент элемента управления фильтрует это сообщение. Чтобы элемент управления получал сообщение, задайте формат **SS \_ Notify** .

## <a name="inkoverlay-object"></a>Объект InkOverlay

Объект [**InkCollector**](inkcollector-class.md) , рассмотренный ранее, полезен в приложениях для предоставления собственной модели для выбора, стирания и взаимодействия с пользователем. Объект [**InkOverlay**](inkoverlay-class.md) — это надмножество объекта **InkCollector** , который обеспечивает поддержку редактирования. Это полезно для приложений, чтобы интегрировать рукописный ввод и редактирование в собственные холсты документов с помощью набора стандартных моделей выбора рукописного ввода, предоставляемых объектом.

И объект [**InkCollector**](inkcollector-class.md) , и объект [**InkOverlay**](inkoverlay-class.md) (а также элемент управления [InkPicture](inkpicture-control.md) ) используют общие конструкции, например объект [**рукописного ввода**](inkdisp-class.md) и коллекцию [**DrawingAttributes**](inkdrawingattributes-class.md) , чтобы базовый способ изменения цвета рукописного ввода был одинаковым везде. Это позволяет повторно использовать код и иметь общий программный доступ, что может быть особенно важным, если вы предлагаете поддержку сценариев в приложении.

[**InkOverlay**](inkoverlay-class.md) — это COM-объект, который полезен в сценариях заметок, в которых пользователи не имеют дело с распознаванием рукописного ввода, а вместо этого заинтересованы в размере, фигуре, цвете и положении рукописного ввода. Он хорошо подходит для создания заметок и базовых кривых. Пользовательский интерфейс по умолчанию — это прозрачный прямоугольник с непрозрачным рукописным вводом.

[**InkOverlay**](inkoverlay-class.md) расширяет класс [**InkCollector**](inkcollector-class.md) тремя способами:

-   Он создает события для изменений атрибутов начала, конца и рукописного ввода.
-   Он позволяет пользователям выбирать, стирать и изменять размеры рукописных данных.
-   Она поддерживает команды вырезания, копирования и вставки.

Типичный сценарий, в котором используется [**InkOverlay**](inkoverlay-class.md) , — пометка слайда или изображения презентации. Объект **InkOverlay** позволяет легко реализовать возможности рукописного ввода и макета, необходимые для этого сценария.

Для работы с [**InkOverlay**](inkoverlay-class.md)вы:

1.  Создайте экземпляр объекта [**InkOverlay**](inkoverlay-class.md) .
2.  Присоедините hWnd (дескриптор, в управляемом коде) к свойству [**HWND**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkoverlay-get_hwnd) объекта [**InkOverlay**](inkoverlay-class.md) (свойство [дескриптора](/previous-versions/ms582171(v=vs.100)) в управляемом коде).
3.  Задайте для свойства [**Enabled**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkoverlay-get_enabled) объекта [**InkOverlay**](inkoverlay-class.md) **значение true**.

Объект [**InkOverlay**](inkoverlay-class.md) включает базовую поддержку печати, но необходимо реализовать предварительный просмотр печати или другие расширенные возможности печати.

[**InkOverlay**](inkoverlay-class.md) сохраняет рукописный ввод в сериализованном формате (ISF).

> [!Note]  
> Если [**EditingMode**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkoverlay-get_editingmode) объекта [**InkOverlay**](inkoverlay-class.md) имеет значение **Delete** или **SELECT**, активируются другие события (такие как [**инкаддед**](inkdisp-inkadded.md), [**инкделетед**](inkdisp-inkdeleted.md)и [**Stroke**](inkoverlay-stroke.md)). Эти события полезны, если требуется реализовать собственные режимы удаления или выбора.

 

### <a name="selecting-ink"></a>Выбор рукописного ввода

Объект [**InkOverlay**](inkoverlay-class.md) позволяет пользователям использовать инструмент «Лассо» для выбора рукописных объектов, содержащихся в отслеживаемой области. Пользователи также могут выбрать рукописный ввод, коснувшись любого объекта [**рукописного ввода**](inkdisp-class.md) .

Используйте свойство [**Selection**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkoverlay-get_selection) , чтобы получить коллекцию [**штрихов**](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) , которую можно использовать для управления выбором пользователя.

При выборе объекта [**рукописного ввода**](inkdisp-class.md) или набора **рукописных** объектов маркеры изменения размера появляются на четырех углах ограничивающего прямоугольника рукописного ввода и во всех средних вершинах между соседними углами. Если пользователь перетаскивает в любом месте выбранной области, рукописные данные становятся перемещаемыми внутри элемента управления.

### <a name="default-behavior"></a>Поведение по умолчанию

По умолчанию объект [**InkOverlay**](inkoverlay-class.md) настроен на получение рукописного ввода. Рукописный ввод имеет ширину 53 единиц для чернил (где 1 единица рукописного пространства = 1 HIMETRIC). Рукописный ввод является черным, если пользователь не работает в режиме высокой контрастности. В противном случае для рукописного ввода задается значение **цветовой \_ WINDOWTEXT** (**windowtext** в управляемом коде). [**Фиттокурве**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkdrawingattributes-get_fittocurve) имеет **значение false**.

### <a name="cursor-and-button-objects"></a>Объекты курсора и кнопки

Курсор соответствует кончику пера, используемому на планшетном ПК. Например, карандаш имеет две конечные точки. Как правило, для записи используется один конец, а другой используется для стирания. Эти два конца соответствуют двум курсорам. Класс [**cursor**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkcursor) не следует путать с [**System. Windows. Forms. Cursor**](/dotnet/api/system.windows.forms.cursor?view=netcore-3.1).

На планшетном ПК курсор обычно используется для записи или стирания. Курсор может изменить роли, если приложение включит эту функцию. Некоторые устройства Tablet PC поддерживают несколько перьев. Каждый курсор имеет связанный идентификатор курсора, уникальный в системе. Курсор может содержать ноль или более связанных кнопок. Эти кнопки предоставляются приложению как объекты Курсорбуттон. Приложение может предоставить определенный объект [**DrawingAttributes**](inkdrawingattributes-class.md) для любого заданного курсора.

### <a name="drawing-attributes-object"></a>Объект атрибутов рисования

Объект [**DrawingAttributes**](inkdrawingattributes-class.md) описывает, как должен рисоваться любой известный набор рукописного ввода. Объект **DrawingAttributes** содержит базовые свойства, такие как [**Цвет**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkdrawingattributes-get_color), [**Ширина**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkdrawingattributes-get_width)и [**пентип**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkdrawingattributes-get_pentip). Он также может включать в себя дополнительные параметры, такие как прозрачность переменных и сглаживание Безье, которые могут предоставить интересные эффекты или улучшить удобочитаемость рукописного ввода.

### <a name="peninputpanel-object"></a>Объект Пенинпутпанел

> [!Note]  
> Класс [**пенинпутпанел**](peninputpanel-class.md) является устаревшим. Класс **пенинпутпанел** был заменен классом [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) .

 

Объект [**пенинпутпанел**](peninputpanel-class.md) позволяет легко добавлять в приложения входные данные на месте. **Пенинпутпанел** доступен как подключаемый объект, который позволяет добавлять функциональность панели ввода Tablet PC в существующие элементы управления. Пользовательский интерфейс в основном определяется текущим языком ввода. Можно выбрать метод ввода по умолчанию для **пенинпутпанел**, либо рукописного ввода, либо клавиатуры. Конечный пользователь может переключаться между методами ввода с помощью кнопок пользовательского интерфейса.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[**Класс InkCollector (C++)**](inkcollector-class.md)
</dt> <dt>

[**Класс InkOverlay (C++)**](inkoverlay-class.md)
</dt> <dt>

[**Пространство имен Microsoft. Ink**](/previous-versions/dotnet/netframework-3.5/ms581553(v=vs.90))
</dt> </dl>

 

 
