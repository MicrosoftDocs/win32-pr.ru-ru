---
description: Интерфейсы API Стилусинпут позволяют взаимодействовать с потоком данных пера планшета. Для взаимодействия с потоком данных добавьте в приложение объект RealTimeStylus и добавьте подключаемые модули в объект RealTimeStylus.
ms.assetid: 88bab0ab-df9f-4813-9a9f-9a137813f0b4
title: Архитектура API-интерфейсов Стилусинпут
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: eeda6a6a0269e8306aed6a6b6de4c1bbe33bc46f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104156743"
---
# <a name="architecture-of-the-stylusinput-apis"></a><span data-ttu-id="2620a-104">Архитектура API-интерфейсов Стилусинпут</span><span class="sxs-lookup"><span data-stu-id="2620a-104">Architecture of the StylusInput APIs</span></span>

<span data-ttu-id="2620a-105">Интерфейсы API Стилусинпут позволяют взаимодействовать с потоком данных пера планшета.</span><span class="sxs-lookup"><span data-stu-id="2620a-105">The StylusInput APIs allow you to interact with the tablet pen data stream.</span></span> <span data-ttu-id="2620a-106">Для взаимодействия с потоком данных добавьте в приложение объект [**RealTimeStylus**](realtimestylus-class.md) и добавьте подключаемые модули в объект **RealTimeStylus** .</span><span class="sxs-lookup"><span data-stu-id="2620a-106">To interact with the data stream add a [**RealTimeStylus**](realtimestylus-class.md) object to your application, and add plug-ins to the **RealTimeStylus** object.</span></span>

<span data-ttu-id="2620a-107">В API-интерфейсах Стилусинпут предоставляются два подключаемых модуля.</span><span class="sxs-lookup"><span data-stu-id="2620a-107">Two plug-ins are provided in the StylusInput APIs.</span></span> <span data-ttu-id="2620a-108">Объект [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) реализует интерфейс [**истилуссинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) .</span><span class="sxs-lookup"><span data-stu-id="2620a-108">The [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) object implements the [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) interface.</span></span> <span data-ttu-id="2620a-109">Объект **DynamicRenderer** визуализирует рукописный ввод в режиме реального времени по мере его прорисовки.</span><span class="sxs-lookup"><span data-stu-id="2620a-109">The **DynamicRenderer** object renders the ink in real time, as it is being drawn.</span></span> <span data-ttu-id="2620a-110">Объект [**GestureRecognizer**](gesturerecognizer-class.md) реализует интерфейсы **истилуссинкплугин** и [**истилусасинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) .</span><span class="sxs-lookup"><span data-stu-id="2620a-110">The [**GestureRecognizer**](gesturerecognizer-class.md) object implements the **IStylusSyncPlugin** and [**IStylusAsyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) interfaces.</span></span> <span data-ttu-id="2620a-111">Объект **GestureRecognizer** распознает жесты приложения.</span><span class="sxs-lookup"><span data-stu-id="2620a-111">The **GestureRecognizer** object recognizes application gestures.</span></span>

## <a name="definitions"></a><span data-ttu-id="2620a-112">Определения</span><span class="sxs-lookup"><span data-stu-id="2620a-112">Definitions</span></span>

<span data-ttu-id="2620a-113">Следующие термины используются в разделах, описывающих API-интерфейсы Стилусинпут:</span><span class="sxs-lookup"><span data-stu-id="2620a-113">The following terms are used in the sections describing the StylusInput APIs:</span></span>

<span data-ttu-id="2620a-114">Синхронный подключаемый модуль</span><span class="sxs-lookup"><span data-stu-id="2620a-114">Synchronous plug-in</span></span>

<span data-ttu-id="2620a-115">Класс, реализующий интерфейс [**истилуссинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) .</span><span class="sxs-lookup"><span data-stu-id="2620a-115">A class that implements the [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) interface.</span></span> <span data-ttu-id="2620a-116">Синхронные подключаемые модули обычно вызываются непосредственно объектом [**RealTimeStylus**](realtimestylus-class.md) .</span><span class="sxs-lookup"><span data-stu-id="2620a-116">Synchronous plug-ins are generally called directly by the [**RealTimeStylus**](realtimestylus-class.md) object.</span></span>

<span data-ttu-id="2620a-117">Асинхронный подключаемый модуль</span><span class="sxs-lookup"><span data-stu-id="2620a-117">Asynchronous plug-in</span></span>

<span data-ttu-id="2620a-118">Класс, реализующий интерфейс [**истилусасинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) .</span><span class="sxs-lookup"><span data-stu-id="2620a-118">A class that implements the [**IStylusAsyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) interface.</span></span> <span data-ttu-id="2620a-119">Асинхронные подключаемые модули обычно вызываются в потоке пользовательского интерфейса приложения.</span><span class="sxs-lookup"><span data-stu-id="2620a-119">Asynchronous plug-ins are generally called on the application's user interface (UI) thread.</span></span>

<span data-ttu-id="2620a-120">Синхронная коллекция подключаемых модулей</span><span class="sxs-lookup"><span data-stu-id="2620a-120">Synchronous plug-in collection</span></span>

<span data-ttu-id="2620a-121">Коллекция [стилуссинкплугинколлектион](/previous-versions/ms824788(v=msdn.10)) , которая представляет собой упорядоченную коллекцию объектов [истилуссинкплугин](/previous-versions/ms824751(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="2620a-121">A [StylusSyncPluginCollection](/previous-versions/ms824788(v=msdn.10)) collection, which is an ordered collection of [IStylusSyncPlugin](/previous-versions/ms824751(v=msdn.10)) objects.</span></span> <span data-ttu-id="2620a-122">Синхронная коллекция подключаемых модулей обычно ссылается на коллекцию, назначенную свойству [синкплугинколлектион](/previous-versions/ms824833(v=msdn.10)) объекта [RealTimeStylus](/previous-versions/ms824830(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="2620a-122">A synchronous plug-in collection usually refers to the collection assigned to the [SyncPluginCollection](/previous-versions/ms824833(v=msdn.10)) property of a [RealTimeStylus](/previous-versions/ms824830(v=msdn.10)) object.</span></span> <span data-ttu-id="2620a-123">В синхронную коллекцию подключаемых модулей могут быть добавлены только синхронные подключаемые модули.</span><span class="sxs-lookup"><span data-stu-id="2620a-123">Only synchronous plug-ins may be added to a synchronous plug-in collection.</span></span>

<span data-ttu-id="2620a-124">Асинхронная коллекция подключаемых модулей</span><span class="sxs-lookup"><span data-stu-id="2620a-124">Asynchronous plug-in collection</span></span>

<span data-ttu-id="2620a-125">Коллекция [стилусасинкплугинколлектион](/previous-versions/ms824808(v=msdn.10)) , которая представляет собой упорядоченную коллекцию объектов [истилусасинкплугин](/previous-versions/ms824768(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="2620a-125">A [StylusAsyncPluginCollection](/previous-versions/ms824808(v=msdn.10)) collection, which is an ordered collection of [IStylusAsyncPlugin](/previous-versions/ms824768(v=msdn.10)) objects.</span></span> <span data-ttu-id="2620a-126">Асинхронная коллекция подключаемых модулей обычно ссылается на коллекцию, назначенную свойству [асинкплугинколлектион](/previous-versions/ms824831(v=msdn.10)) объекта [RealTimeStylus](/previous-versions/ms824830(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="2620a-126">An asynchronous plug-in collection usually refers to the collection assigned to the [AsyncPluginCollection](/previous-versions/ms824831(v=msdn.10)) property of a [RealTimeStylus](/previous-versions/ms824830(v=msdn.10)) object.</span></span> <span data-ttu-id="2620a-127">В асинхронную коллекцию подключаемых модулей могут быть добавлены только асинхронные подключаемые модули.</span><span class="sxs-lookup"><span data-stu-id="2620a-127">Only asynchronous plug-ins may be added to an asynchronous plug-in collection.</span></span>

## <a name="synchronous-and-asynchronous-plug-ins"></a><span data-ttu-id="2620a-128">Синхронные и асинхронные подключаемые модули</span><span class="sxs-lookup"><span data-stu-id="2620a-128">Synchronous and Asynchronous Plug-ins</span></span>

<span data-ttu-id="2620a-129">Объект [**RealTimeStylus**](realtimestylus-class.md) предназначен для предоставления доступа к потоку данных из пера планшета в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="2620a-129">The [**RealTimeStylus**](realtimestylus-class.md) object is designed to provide real-time access to the data stream from a tablet pen.</span></span> <span data-ttu-id="2620a-130">Создайте или используйте синхронные подключаемые модули для задач, которым требуется доступ к потоку данных в режиме реального времени и которые не требуют вычисления, например для фильтрации пакетов.</span><span class="sxs-lookup"><span data-stu-id="2620a-130">Create or use synchronous plug-ins for tasks that require real-time access to the data stream and are computationally undemanding, such as for packet filtering.</span></span> <span data-ttu-id="2620a-131">Создайте или используйте асинхронные подключаемые модули для задач, которые не нуждаются в доступе к потоку данных в режиме реального времени, например для создания и сохранения штрихов в объекте [**инкдисп**](inkdisp-class.md) .</span><span class="sxs-lookup"><span data-stu-id="2620a-131">Create or use asynchronous plug-ins for tasks that do not require real-time access to the data stream, such as for creating and storing strokes in an [**InkDisp**](inkdisp-class.md) object.</span></span>

<span data-ttu-id="2620a-132">Некоторые задачи могут быть требовательными к вычислительным операциям, но они требуют доступа к потоку данных в режиме реального времени, например для распознавания жестов с несколькими штрихами.</span><span class="sxs-lookup"><span data-stu-id="2620a-132">Certain tasks may be computationally demanding yet require real-time access to the data stream, such as multistroke gesture recognition.</span></span> <span data-ttu-id="2620a-133">Для решения этих задач интерфейсы API Стилусинпут обеспечивают каскадную модель [**RealTimeStylus**](realtimestylus-class.md) , которая позволяет использовать два объекта **RealTimeStylus** , каждый из которых выполняется в собственном потоке.</span><span class="sxs-lookup"><span data-stu-id="2620a-133">To address these needs, the StylusInput APIs provide a cascaded [**RealTimeStylus**](realtimestylus-class.md) model that allows you to use two **RealTimeStylus** objects, each running on its own thread.</span></span> <span data-ttu-id="2620a-134">Дополнительные сведения о каскадной модели **RealTimeStylus** см. в статье [каскадная модель RealTimeStylus](the-cascaded-realtimestylus-model.md).</span><span class="sxs-lookup"><span data-stu-id="2620a-134">For more information about the cascaded **RealTimeStylus** model, see [The Cascaded RealTimeStylus Model](the-cascaded-realtimestylus-model.md).</span></span>

<span data-ttu-id="2620a-135">Дополнительные сведения об использовании и создании подключаемых модулей см. [в разделе Работа с интерфейсами API стилусинпут](working-with-the-stylusinput-apis.md).</span><span class="sxs-lookup"><span data-stu-id="2620a-135">For more information about using and creating plug-ins, see [Working with the StylusInput APIs](working-with-the-stylusinput-apis.md).</span></span>

## <a name="the-tablet-pen-data-stream"></a><span data-ttu-id="2620a-136">Поток данных пера планшета</span><span class="sxs-lookup"><span data-stu-id="2620a-136">The Tablet Pen Data Stream</span></span>

<span data-ttu-id="2620a-137">Объект [**RealTimeStylus**](realtimestylus-class.md) содержит две внутренние очереди, которые содержат данные пера планшета, очередь ввода и выходную очередь.</span><span class="sxs-lookup"><span data-stu-id="2620a-137">The [**RealTimeStylus**](realtimestylus-class.md) object has two internal queues that carry the tablet pen data, the input queue and the output queue.</span></span> <span data-ttu-id="2620a-138">Данные пера преобразуются в экземпляры классов в пространстве имен [Microsoft. стилусинпут. плугиндата](/previous-versions/ms823992(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="2620a-138">The pen data is converted into instances of the classes in the [Microsoft.StylusInput.PluginData](/previous-versions/ms823992(v=msdn.10)) namespace.</span></span> <span data-ttu-id="2620a-139">В следующем списке описано, как объект **RealTimeStylus** обрабатывает данные пера планшета.</span><span class="sxs-lookup"><span data-stu-id="2620a-139">The following list describes how the **RealTimeStylus** object handles the tablet pen data:</span></span>

<span data-ttu-id="2620a-140">Объект [**RealTimeStylus**](realtimestylus-class.md) сначала проверяет объекты подключаемых модулей данных во входной очереди, а затем из потока данных пера планшета.</span><span class="sxs-lookup"><span data-stu-id="2620a-140">The [**RealTimeStylus**](realtimestylus-class.md) object checks for plug-in data objects first on its input queue and then from the tablet pen data stream.</span></span>

<span data-ttu-id="2620a-141">Объект [**RealTimeStylus**](realtimestylus-class.md) отправляет один объект подключаемых данных в объекты в его синхронной коллекции подключаемых модулей.</span><span class="sxs-lookup"><span data-stu-id="2620a-141">The [**RealTimeStylus**](realtimestylus-class.md) object sends one plug-in data object to the objects in its synchronous plug-in collection.</span></span> <span data-ttu-id="2620a-142">Каждый синхронный подключаемый модуль может добавлять данные в очередь ввода или вывода.</span><span class="sxs-lookup"><span data-stu-id="2620a-142">Each synchronous plug-in can add data to either the input or output queue.</span></span>

<span data-ttu-id="2620a-143">После отправки объекта данных подключаемого модуля всем членам коллекции синхронного подключаемого модуля объект данных подключаемого модуля помещается в очередь вывода объекта [**RealTimeStylus**](realtimestylus-class.md) .</span><span class="sxs-lookup"><span data-stu-id="2620a-143">After the plug-in data object has been sent to all members of the synchronous plug-in collection, the plug-in data object is placed on the [**RealTimeStylus**](realtimestylus-class.md) object's output queue.</span></span>

<span data-ttu-id="2620a-144">Затем объект [**RealTimeStylus**](realtimestylus-class.md) проверяет для обработки следующий объект данных подключаемого модуля.</span><span class="sxs-lookup"><span data-stu-id="2620a-144">The [**RealTimeStylus**](realtimestylus-class.md) object then checks for the next plug-in data object to process.</span></span>

<span data-ttu-id="2620a-145">Хотя очередь вывода объекта [**RealTimeStylus**](realtimestylus-class.md) содержит данные, объект **RealTimeStylus** отправляет один объект подключаемых данных из своей очереди вывода в объекты в его асинхронной коллекции подключаемых модулей.</span><span class="sxs-lookup"><span data-stu-id="2620a-145">While the [**RealTimeStylus**](realtimestylus-class.md) object's output queue contains data, the **RealTimeStylus** object sends one plug-in data object from its output queue to the objects in its asynchronous plug-in collection.</span></span> <span data-ttu-id="2620a-146">Каждый асинхронный подключаемый модуль может добавлять данные в очередь ввода или вывода.</span><span class="sxs-lookup"><span data-stu-id="2620a-146">Each asynchronous plug-in can add data to either the input or output queue.</span></span> <span data-ttu-id="2620a-147">Однако, поскольку асинхронные подключаемые модули выполняются в потоке пользовательского интерфейса, данные добавляются в очередь по отношению к текущим данным пера, обрабатываемым объектом **RealTimeStylus** , а не по отношению к данным, обрабатываемым асинхронным подключаемым модулем.</span><span class="sxs-lookup"><span data-stu-id="2620a-147">However, because the asynchronous plug-ins run on the UI thread, the data is added to the queue in relation to the current pen data the **RealTimeStylus** object is processing, and not in relation to the data that the asynchronous plug-in is processing.</span></span>

<span data-ttu-id="2620a-148">На следующей схеме показан поток данных пера планшета через объект [**RealTimeStylus**](realtimestylus-class.md) и коллекции подключаемых модулей.</span><span class="sxs-lookup"><span data-stu-id="2620a-148">The following diagram illustrates the flow of tablet pen data through the [**RealTimeStylus**](realtimestylus-class.md) object and its plug-in collections.</span></span>

![поток данных пера планшета через объект RealTimeStylus и коллекции подключаемых модулей](images/5a698bc9-833b-4b24-9fa2-70be0ca61032.gif)

<span data-ttu-id="2620a-150">На этой диаграмме круги с меткой "A" и "B" представляют данные пера планшета, которые уже добавлены в очередь вывода объекта [**RealTimeStylus**](realtimestylus-class.md) и еще не были отправлены в асинхронную коллекцию подключаемых модулей.</span><span class="sxs-lookup"><span data-stu-id="2620a-150">In this diagram, the circles labeled "A" and "B" represent tablet pen data that has already been added to the [**RealTimeStylus**](realtimestylus-class.md) object's output queue and that has not yet been sent to the asynchronous plug-in collection.</span></span> <span data-ttu-id="2620a-151">Круг с меткой "C" представляет данные пера планшета, обрабатываемые объектом **RealTimeStylus** в данный момент.</span><span class="sxs-lookup"><span data-stu-id="2620a-151">The circle labeled "C" represents the tablet pen data that the **RealTimeStylus** object is currently processing.</span></span> <span data-ttu-id="2620a-152">Он отправляется в коллекцию синхронных подключаемых модулей и помещается в очередь вывода.</span><span class="sxs-lookup"><span data-stu-id="2620a-152">It is sent to the synchronous plug-in collection and placed on the output queue.</span></span> <span data-ttu-id="2620a-153">Пустой кружок представляет позицию в очереди вывода, в которой добавляются будущие данные пера планшета.</span><span class="sxs-lookup"><span data-stu-id="2620a-153">The empty circle represents the position in the output queue where future tablet pen data is added.</span></span>

<span data-ttu-id="2620a-154">Дополнительные сведения о том, как конкретные данные добавляются в очередь и обрабатываются, см. [в разделе данные подключаемого модуля и класс RealTimeStylus](plug-in-data-and-the-realtimestylus-class.md).</span><span class="sxs-lookup"><span data-stu-id="2620a-154">For more information about how specific data is added to the queue and processed, see [Plug-in Data and the RealTimeStylus Class](plug-in-data-and-the-realtimestylus-class.md).</span></span>

## <a name="the-stylusinput-apis"></a><span data-ttu-id="2620a-155">API-интерфейсы Стилусинпут</span><span class="sxs-lookup"><span data-stu-id="2620a-155">The StylusInput APIs</span></span>

<span data-ttu-id="2620a-156">Интерфейсы API Стилусинпут в основном находятся в пространствах имен [Microsoft. стилусинпут](/previous-versions/ms824750(v=msdn.10)) и [Microsoft. стилусинпут. плугиндата](/previous-versions/ms823992(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="2620a-156">The StylusInput APIs reside primarily in the [Microsoft.StylusInput](/previous-versions/ms824750(v=msdn.10)) and [Microsoft.StylusInput.PluginData](/previous-versions/ms823992(v=msdn.10)) namespaces.</span></span> <span data-ttu-id="2620a-157">Однако API-интерфейсы Стилусинпут также ссылаются на некоторые классы в пространстве имен [Microsoft. Ink](/previous-versions/ms826516(v=msdn.10)) , такие как класс [планшета](/previous-versions/ms827783(v=msdn.10)) , коллекция [Таблетпропертидескриптионколлектион](/previous-versions/ms827760(v=msdn.10)) и перечисления [ApplicationGesture](/previous-versions/ms827547(v=msdn.10)) и [системжестуре](/previous-versions/ms827134(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="2620a-157">However, the StylusInput APIs also reference some classes in the [Microsoft.Ink](/previous-versions/ms826516(v=msdn.10)) namespace, such as the [Tablet](/previous-versions/ms827783(v=msdn.10)) class, the [TabletPropertyDescriptionCollection](/previous-versions/ms827760(v=msdn.10)) collection, and the [ApplicationGesture](/previous-versions/ms827547(v=msdn.10)) and [SystemGesture](/previous-versions/ms827134(v=msdn.10)) enumerations.</span></span>

## <a name="related-topics"></a><span data-ttu-id="2620a-158">См. также</span><span class="sxs-lookup"><span data-stu-id="2620a-158">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="2620a-159">[**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="2620a-159">[**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85))</span></span>
</dt> <dt>

[<span data-ttu-id="2620a-160">**GestureRecognizer**</span><span class="sxs-lookup"><span data-stu-id="2620a-160">**GestureRecognizer**</span></span>](gesturerecognizer-class.md)
</dt> <dt>

[<span data-ttu-id="2620a-161">**Каскад**</span><span class="sxs-lookup"><span data-stu-id="2620a-161">**RealTimeStylus**</span></span>](realtimestylus-class.md)
</dt> <dt>

[<span data-ttu-id="2620a-162">**истилусасинкплугин**</span><span class="sxs-lookup"><span data-stu-id="2620a-162">**IStylusAsyncPlugin**</span></span>](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin)
</dt> <dt>

[<span data-ttu-id="2620a-163">**истилуссинкплугин**</span><span class="sxs-lookup"><span data-stu-id="2620a-163">**IStylusSyncPlugin**</span></span>](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin)
</dt> <dt>

[<span data-ttu-id="2620a-164">Работа с API-интерфейсами Стилусинпут</span><span class="sxs-lookup"><span data-stu-id="2620a-164">Working with the StylusInput APIs</span></span>](working-with-the-stylusinput-apis.md)
</dt> <dt>

[<span data-ttu-id="2620a-165">Модель каскадного RealTimeStylus</span><span class="sxs-lookup"><span data-stu-id="2620a-165">The Cascaded RealTimeStylus Model</span></span>](the-cascaded-realtimestylus-model.md)
</dt> </dl>

 

 
