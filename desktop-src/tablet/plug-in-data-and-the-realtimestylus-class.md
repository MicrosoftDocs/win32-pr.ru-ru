---
description: Подключаемые модули для класса RealTimeStylus должны реализовывать интерфейс Истилуссинкплугин или Истилусасинкплугин или и то, и другое.
ms.assetid: 827ac817-e0e6-4750-9d48-b939ccd5e679
title: Данные подключаемого модуля и класс RealTimeStylus
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dac0540d90f291acfef27a09df08ffff645c280d
ms.sourcegitcommit: 9b5faa61c38b2d0c432b7f2dbee8c127b0e28a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2021
ms.locfileid: "122480970"
---
# <a name="plug-in-data-and-the-realtimestylus-class"></a>Данные подключаемого модуля и класс RealTimeStylus

Подключаемые модули для класса [**RealTimeStylus**](realtimestylus-class.md) должны реализовывать интерфейс [**истилуссинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) или [**истилусасинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) или и то, и другое. Хотя необходимо реализовать все методы подключаемых интерфейсов, подключаемый модуль получает только вызовы методов, помеченных в свойстве [Microsoft. стилусинпут. истилуссинкплугин.](/previous-versions/ms574887(v=vs.100)) луча или [Microsoft. стилусинпут. истилусасинкплугин.](/previous-versions/ms574886(v=vs.100)) .

Методы, определенные в интерфейсах, используют объекты из пространства имен [Microsoft. стилусинпут. плугиндата](/previous-versions/ms823992(v=msdn.10)) для передачи данных пера в подключаемые модули. В следующей таблице описаны объекты данных, являющиеся параметрами в методах уведомления, и указано значение [датаинтерестмаск](/previous-versions/ms824787(v=msdn.10)) , связанное с уведомлением.



| Данные подключаемого модуля                                                                                          | Значение Датаинтерестмаск     | Описание                                                                                                                                                                                                                                             |
|-------------------------------------------------------------------------------------------------------|----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [кустомстилусдата](/previous-versions/ms824747(v=msdn.10))                     | **кустомстилусдатааддед**  | Пользовательские данные приложения, добавляемые подключаемым модулем.<br/>                                                                                                                                                                                                 |
| [ErrorData](/previous-versions/ms824740(v=msdn.10))                                   | **Ошибка**                  | Сведения об ошибке, которые объект [**RealTimeStylus**](realtimestylus-class.md) добавляет в ответ на необработанное исключение в одном из его подключаемых модулей.<br/>                                                                                          |
| [инаирпаккетсдата](/previous-versions/ms824592(v=msdn.10))                     | **инаирпаккетс**           | Сведения о пакете для движения пера, когда перо находится в эфире над дигитайзером.<br/>                                                                                                                                                         |
| [паккетсдата](/previous-versions/ms824590(v=msdn.10))                               | **Пакеты**                | Сведения о пакете для движения пера, когда перо касается дигитайзера.<br/>                                                                                                                                                             |
| [реалтиместилусдисабледдата](/previous-versions/ms824576(v=msdn.10)) | **реалтиместилусдисаблед** | Сведения, добавляемые объектом [**RealTimeStylus**](realtimestylus-class.md) при отключении.<br/>                                                                                                                                        |
| [реалтиместилусенабледдата](/previous-versions/ms824229(v=msdn.10))   | **реалтиместилусенаблед**  | Сведения, добавляемые объектом [**RealTimeStylus**](realtimestylus-class.md) при его включении.<br/>                                                                                                                                         |
| [стилусбуттондовндата](/previous-versions/ms824181(v=msdn.10))             | **стилусбуттондовн**       | Сведения о нажатой кнопке пера.<br/>                                                                                                                                                                        |
| [стилусбуттонупдата](/previous-versions/ms824172(v=msdn.10))                 | **стилусбуттонуп**         | Сведения о выпуске определенной кнопки пера.<br/>                                                                                                                                                                       |
| [стилусдовндата](/previous-versions/ms585582(v=vs.100))                                   | **стилусдовн**             | Сведения о пакете для пера, как перо, присоединяются к дигитайзеру.<br/>                                                                                                                                                      |
| [стилусинранжедата](/previous-versions/ms824090(v=msdn.10))                   | **стилусинранже**          | Сведения о конкретном пере, которое вводит область ввода объекта [**RealTimeStylus**](realtimestylus-class.md) , или ввод диапазона обнаружения дигитайзера над областью ввода объекта **RealTimeStylus** .<br/> |
| [стилусаутофранжедата](/previous-versions/ms824072(v=msdn.10))             | **стилусаутофранже**       | Сведения о конкретном пере, который выходит из области ввода объекта [**RealTimeStylus**](realtimestylus-class.md) , или о том, что диапазон обнаружения дигитайзера находится над областью ввода объекта **RealTimeStylus** .<br/>   |
| [стилусупдата](/previous-versions/ms824057(v=msdn.10))                             | **стилусуп**               | Сведения о пакете для пера, как перо прерывается от дигитайзера.<br/>                                                                                                                                                                  |
| [системжестуредата](/previous-versions/ms824019(v=msdn.10))                   | **системжестуре**          | Сведения, добавляемые объектом [**RealTimeStylus**](realtimestylus-class.md) при обнаружении системного жеста.<br/>                                                                                                                                 |
| [таблетаддеддата](/previous-versions/ms824010(v=msdn.10))                       | **таблетаддед**            | Сведения о добавляемом объекте [планшета](/previous-versions/ms827783(v=msdn.10)) .<br/>                                                                                                                                                |
| [таблетремоведдата](/previous-versions/ms823997(v=msdn.10))                   | **таблетремовед**          | Сведения об удаляемом объекте [планшета](/previous-versions/ms827783(v=msdn.10)) .<br/>                                                                                                                                              |



 

Сведения о том, как объект [**RealTimeStylus**](realtimestylus-class.md) обрабатывает поток данных пера планшета, см. в разделе [Работа с классом RealTimeStylus](working-with-the-realtimestylus-class.md).

## <a name="data-interest"></a>Процент данных

Объект [**RealTimeStylus**](realtimestylus-class.md) проверяет свойство [Microsoft. стилусинпут. истилуссинкплугин.](/previous-versions/ms574887(v=vs.100)) DataObject или [Microsoft. стилусинпут. истилусасинкплугин.](/previous-versions/ms574886(v=vs.100)) DataObject подключаемого модуля при добавлении подключаемого модуля в синхронную или асинхронную коллекцию подключаемых модулей объекта **RealTimeStylus** . Поэтому следует использовать свойство объекта для подписки на все уведомления, используемые этим экземпляром подключаемого модуля, но нередко, но не к любому из уведомлений, которые данный экземпляр подключаемого модуля никогда не использует. Для уведомлений о том, что подключаемый модуль использует только время от времени, сначала проверьте состояние подключаемого модуля в методе уведомления и вернитесь, если это уведомление не используется подключаемым модулем в текущем состоянии.

Подключаемый модуль получает вызовы только для методов, помеченных в свойстве [Microsoft. стилусинпут. истилуссинкплугин.](/previous-versions/ms574887(v=vs.100)) луча или [Microsoft. стилусинпут. истилусасинкплугин.](/previous-versions/ms574886(v=vs.100)) луча подключаемого модуля. Дополнительные сведения о возможных значениях **Свойства данных** подключаемого модуля см. в разделе Перечисление [датаинтерестмаск](/previous-versions/ms824787(v=msdn.10)) .

## <a name="timing"></a>Временные свойства

Данные помещаются в очередь объекта [**RealTimeStylus**](realtimestylus-class.md) перед передачей в подключаемые модули в асинхронной коллекции подключаемых модулей. В следующем списке описываются ситуации, в которых может потребоваться учитывать при проектировании асинхронного подключаемого модуля.

-   Когда объект [**RealTimeStylus**](realtimestylus-class.md) отключен, асинхронный подключаемый модуль может получать другие уведомления в очереди перед вызовом метода [реалтиместилусдисаблед](/previous-versions/ms824774(v=msdn.10)) . В этом случае вызовы из подключаемого модуля к некоторым методам и свойствам объекта **RealTimeStylus** вызывают исключение. Сведения, относящиеся к подключаемому модулю, должны быть кэшированы при включении объекта **RealTimeStylus** .
-   Метод [клеарстилускуеуес](/previous-versions/ms825781(v=msdn.10)) объекта [**RealTimeStylus**](realtimestylus-class.md) может удалить сведения из очереди вывода. Поэтому асинхронные подключаемые модули не могут полагаться на получение всех соответствующих уведомлений.
-   При удалении объекта [планшета](/previous-versions/ms827783(v=msdn.10)) , доступного объекту [**RealTimeStylus**](realtimestylus-class.md) , асинхронный подключаемый модуль может получить уведомление от пера в очереди для планшета перед вызовом метода [таблетремовед](/previous-versions/bb361092(v=vs.100)) . В этом случае вызов метода [жеттаблетпропертидескриптионколлектион](/previous-versions/ms825935(v=msdn.10)) объекта **RealTimeStylus** не работает. Сведения, относящиеся к подключаемому модулю, должны быть кэшированы при включении объекта **RealTimeStylus** или добавлении нового планшета.

В зависимости от приложения можно повысить производительность при отключении объекта [**RealTimeStylus**](realtimestylus-class.md) . Если свойство [Enabled](/previous-versions/ms824832(v=msdn.10)) объекта **RealTimeStylus** имеет значение **false**, данные во входных и выходных очередях обрабатываются до тех пор, пока очереди не будут пустыми. Можно вызвать метод [клеарстилускуеуес](/previous-versions/ms825781(v=msdn.10)) объекта **RealTimeStylus** , чтобы очистить очереди перед отключением объекта **RealTimeStylus** .

## <a name="enabled-and-disabled-data"></a>Включенные и отключенные данные

Когда объект [**RealTimeStylus**](realtimestylus-class.md) включен, каждый подключаемый модуль получает вызов своего метода [Microsoft. стилусинпут. истилуссинкплугин. реалтиместилусенаблед](/previous-versions/ms824758(v=msdn.10)) или [Microsoft. стилусинпут. истилусасинкплугин. RealTimeStylusEnabled](/previous-versions/ms824775(v=msdn.10)) . Объект **реалтиместилусенабледдата** , переданный в уведомлении, содержит коллекцию идентификаторов контекста для доступных планшетов во время включения объекта **RealTimeStylus** .

> [!Note]  
> Поскольку подключаемые модули данных для асинхронной коллекции подключаемых модулей объекта [**RealTimeStylus**](realtimestylus-class.md) помещаются в очередь, Асинхронные подключаемые модули могут получать данные перед получением вызова своего метода [реалтиместилусдисаблед](/previous-versions/ms824774(v=msdn.10)) , но после отключения объекта **RealTimeStylus** . Обратите внимание, что некоторые методы и свойства объекта **RealTimeStylus** вызывают исключение, если объект **RealTimeStylus** отключен.

 

Объект [**RealTimeStylus**](realtimestylus-class.md) вызывает методы [Microsoft. стилусинпут. истилуссинкплугин. реалтиместилусенаблед](/previous-versions/ms824758(v=msdn.10)) и [Microsoft. стилусинпут. истилуссинкплугин. RealTimeStylusDisabled](/previous-versions/ms824757(v=msdn.10)) в потоке, из которого включен объект **RealTimeStylus** или в который добавляется синхронный подключаемый модуль.

Как правило, добавляйте или удаляйте подключаемые модули, пока объект [**RealTimeStylus**](realtimestylus-class.md) отключен. Дополнительные сведения о добавлении и удалении подключаемых модулей для объекта **RealTimeStylus** см. в разделе [подключаемые модули и класс RealTimeStylus](plug-ins-and-the-realtimestylus-class.md).

## <a name="tablet-data"></a>Данные планшета

Когда планшет, который может использоваться объектом [**RealTimeStylus**](realtimestylus-class.md) , добавляется на планшетный ПК или удаляется с него, пока включен объект **RealTimeStylus** , объект **RealTimeStylus** уведомляет свои подключаемые модули о добавлении или удалении объекта [планшета](/previous-versions/ms827783(v=msdn.10)) . Каждый объект **RealTimeStylus** поддерживает список уникальных идентификаторов для объектов планшета, с которыми он может взаимодействовать. Объект **RealTimeStylus** имеет два метода для преобразования между уникальным идентификатором и объектом планшета, методами [жеттаблетконтекстидфромтаблет](/previous-versions/ms825922(v=msdn.10)) и [жеттаблетфромтаблетконтекстид](/previous-versions/ms825929(v=msdn.10)) .

> [!Note]  
> Сведения о планшете больше не доступны из объекта [**RealTimeStylus**](realtimestylus-class.md) после удаления планшета с планшетного ПК.

 

## <a name="tablet-pen-data"></a>Данные пера планшета

Объект [**RealTimeStylus**](realtimestylus-class.md) передает сведения о планшетном пере в свои подключаемые модули в ряде методов уведомления. Сведения о планшетном пере представлены объектом [пера](/previous-versions/ms824824(v=msdn.10)) . Этот объект является моментальным снимком состояния пера планшета на момент сбора данных. Так как подключаемые модули получают данные пера планшета как часть потока данных пера планшета, подключаемые модули должны использовать информацию в объекте Pen, а не проверять текущее состояние определенного пера планшета с помощью класса [курсора](/previous-versions/ms839521(v=msdn.10)) .

Каждый объект [пера](/previous-versions/ms824824(v=msdn.10)) содержит идентификатор контекста планшета для планшета, который создал данные.

## <a name="system-gesture-data"></a>Данные о системных жестах

Объект [**RealTimeStylus**](realtimestylus-class.md) получает данные о системных жестах, так как они распознаются планшетным ПК. В следующей таблице описывается порядок, в котором объекты [системжестуредата](/previous-versions/ms824019(v=msdn.10)) встречаются в потоке данных пера планшета относительно других данных пера планшета.




| <a href="/previous-versions/ms827134(v=msdn.10)">системжестуре</a> | Объекты, предшествующие объекту <a href="/previous-versions/ms824019(v=msdn.10)">системжестуредата</a> | Объекты, поступающие после объекта <a href="/previous-versions/ms824019(v=msdn.10)">системжестуредата</a> | 
|--------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|
| <strong>Касание</strong> | Объект <a href="/previous-versions/ms824107(v=msdn.10)">стилусдовндата</a> .<br /> | Объект [стилусупдата](/previous-versions/ms824057(v=msdn.10)) .<br /> | 
| <strong>даублетап</strong> | Объект <a href="/previous-versions/ms824107(v=msdn.10)">стилусдовндата</a> , объект <a href="/previous-versions/ms824019(v=msdn.10)">системжестуредата</a> для жеста системы <strong>TAP</strong> и объектов [стилусупдата](/previous-versions/ms824057(v=msdn.10)) .<br /> | Второй объект <a href="/previous-versions/ms824107(v=msdn.10)">стилусдовндата</a> .<br /> | 
| <strong>ригхттап</strong> | Объект <a href="/previous-versions/ms824107(v=msdn.10)">стилусдовндата</a> и объект <a href="/previous-versions/ms824019(v=msdn.10)">Системжестуредата</a> для элемента <strong>холдентер</strong> перечисления <a href="/previous-versions/ms827134(v=msdn.10)">системжесуре</a> .<br /> | Объект [стилусупдата](/previous-versions/ms824057(v=msdn.10)) .<br /> | 
| <strong>Перетаскивание</strong> | Объект <a href="/previous-versions/ms824107(v=msdn.10)">стилусдовндата</a> .<br /> | Объект [стилусупдата](/previous-versions/ms824057(v=msdn.10)) .<br /> | 
| <strong>ригхтдраг</strong> | Объект <a href="/previous-versions/ms824107(v=msdn.10)">стилусдовндата</a> .<br /> | Объект [стилусупдата](/previous-versions/ms824057(v=msdn.10)) .<br /> | 
| <strong>холдентер</strong> | Объект <a href="/previous-versions/ms824107(v=msdn.10)">стилусдовндата</a> .<br /> | Объект [стилусупдата](/previous-versions/ms824057(v=msdn.10)) .<br /><blockquote>[!Note]<br />Этот системный жест не распознается, если пользователь начинает <strong>ригхтдраг</strong> системный жест <strong>перетаскивания</strong> .</blockquote><br /> | 
| <strong>холдлеаве</strong> | Не реализован.<br /> | Не реализован.<br /> | 
| <strong>ховерентер</strong> | Несколько объектов <a href="/previous-versions/ms824592(v=msdn.10)">инаирпаккетсдата</a> с низкой средней скоростью.<br /> | <blockquote>[!Note]<br />Перед получением системного жеста <strong>ховерентер</strong> может возникнуть заметная задержка. Объект <a href="realtimestylus-class.md"><strong>RealTimeStylus</strong></a> получает эти данные только в том случае, если объект <strong>RealTimeStylus</strong> присоединен к окну или элементу управления, который находится непосредственно под пером во время системного жеста.</blockquote><br /> | 
| <strong>ховерлеаве</strong> | Объект <a href="/previous-versions/ms824019(v=msdn.10)">системжестуредата</a> для жеста системы <strong>ховерентер</strong> и несколько объектов <a href="/previous-versions/ms824592(v=msdn.10)">инаирпаккетсдата</a> с достаточной средней скоростью.<br /> | <blockquote>[!Note]<br />Перед получением системного жеста <strong>ховерлеаве</strong> может возникнуть заметная задержка. Объект <a href="realtimestylus-class.md"><strong>RealTimeStylus</strong></a> получает эти данные только в том случае, если объект <strong>RealTimeStylus</strong> присоединен к окну или элементу управления, который находится непосредственно под пером во время системного жеста.</blockquote><br /> | 




 

## <a name="custom-stylus-data"></a>Пользовательские данные пера

Пользовательские данные пера можно добавить в объект [**RealTimeStylus**](realtimestylus-class.md) , вызвав метод [аддкустомстилусдататокуеуе](/previous-versions/ms825761(v=msdn.10)) . Пользовательские данные пера можно добавить в очереди объекта **RealTimeStylus** в одном из трех мест.

-   Если параметр *Queue* имеет значение **Output**, пользовательские данные добавляются в выходную очередь объекта [**RealTimeStylus**](realtimestylus-class.md) после обработки данных, обрабатываемых синхронным подключаемым модулем.
-   Если для параметра *Queue* задано значение **аутпутиммедиате**, пользовательские данные добавляются в выходную очередь объекта [**RealTimeStylus**](realtimestylus-class.md) перед данными, которые в настоящее время обрабатываются синхронной коллекцией подключаемых модулей.
-   Если для параметра *Queue* задано значение **input**, пользовательские данные добавляются в очередь входных данных объекта [**RealTimeStylus**](realtimestylus-class.md) и отправляются в синхронную коллекцию подключаемых модулей перед новыми данными из потока данных пера планшета.

В каждом из предыдущих случаев данные, добавленные последующими подключаемыми модулями в коллекции синхронных подключаемых модулей, добавляются после добавления данных, добавленных предшествующими подключаемыми модулями.

> [!Note]  
> Если вызов метода [аддкустомстилусдататокуеуе](/previous-versions/ms825761(v=msdn.10)) выполняется из синхронного подключаемого модуля в ответ на вызов одного из его методов [**истилуссинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) , то данные пользовательского пера добавляются в поток данных планшетного пера предсказуемым образом. в противном случае он добавляется в очередь относительно текущих данных пера, обрабатываемых объектом [**RealTimeStylus**](realtimestylus-class.md) , и не связано с данными, которые обрабатывает асинхронный подключаемый модуль. Метод Аддкустомстилусдататокуеуе создает исключение, если объект **RealTimeStylus** отключен.

 

Пользовательские данные пера добавляются в очередь как объект [кустомстилусдата](/previous-versions/ms824747(v=msdn.10)) , а подключаемые модули получают эти данные через метод [Microsoft. стилусинпут. истилуссинкплугин. кустомстилусдатааддед](/previous-versions/ms824753(v=msdn.10)) или [Microsoft. стилусинпут. IStylusAsyncPlugin. CustomStylusDataAdded](/previous-versions/ms824770(v=msdn.10)) .

Объекты [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) и [**GestureRecognizer**](gesturerecognizer-class.md) могут добавлять пользовательские данные пера в очередь. Дополнительные сведения об объектах **DynamicRenderer** и **GestureRecognizer** см. в разделе подключаемые модули [динамического рендеринга](dynamic-renderer-plug-ins.md) и [подключаемые модули распознавателя](recognizer-plug-ins.md).

Объект [**RealTimeStylus**](realtimestylus-class.md) вызывает метод [Microsoft. стилусинпут. истилуссинкплугин. кустомстилусдатааддед](/previous-versions/ms824753(v=msdn.10)) в потоке, из которого он получает вызов метода [аддкустомстилусдататокуеуе](/previous-versions/ms825761(v=msdn.10)) .

На следующей схеме показано добавление пользовательских данных пера в очередь вывода с параметром *Queue* , установленным в **Output**.

![Иллюстрация, демонстрирующая поток данных пользовательского пера в очередь вывода ](images/27bc3672-41bc-432e-bf41-18e4ccec78f5.gif)

На этой схеме круги с буквами "A" и "B" представляют данные пера планшета, которые уже добавлены в очередь вывода объекта [**RealTimeStylus**](realtimestylus-class.md) и еще не были отправлены в асинхронную коллекцию подключаемых модулей. Кружок с буквой "C" представляет данные пера планшета, обрабатываемые объектом **RealTimeStylus** в данный момент. Он отправляется в коллекцию синхронных подключаемых модулей и помещается в очередь вывода. Круги с номерами "1", "2" и "3" представляют пользовательские данные пера, которые были добавлены в очередь вывода первыми, вторыми и третьими синхронными подключаемыми модулями соответственно в ответ на данные пера планшета, представленные "C". Подключаемые модули добавили пользовательские данные пера с параметром *Queue* , установленным в **стилускуеуес**. Пустой кружок представляет позицию в очереди вывода, в которой добавляются будущие данные пера планшета.

На следующей схеме показано добавление пользовательских данных пера в очередь вывода с параметром *Queue* , установленным в **аутпутиммедиате**.

![Схема, показывающая пользовательский поток данных пера в очередь вывода.](images/bcf45325-5557-47a2-af43-142c7684e482.gif)

На этой схеме круги с буквами "A" и "B" представляют данные пера планшета, которые уже добавлены в очередь вывода объекта [**RealTimeStylus**](realtimestylus-class.md) и еще не были отправлены в асинхронную коллекцию подключаемых модулей. Кружок с буквой "C" представляет данные пера планшета, обрабатываемые объектом **RealTimeStylus** в данный момент. Он отправляется в коллекцию синхронных подключаемых модулей и помещается в очередь вывода. Круги с номерами "1", "2" и "3" представляют пользовательские данные пера, которые были добавлены в очередь вывода первыми, вторыми и третьими синхронными подключаемыми модулями соответственно в ответ на данные пера планшета, представленные "C". Подключаемые модули добавили пользовательские данные пера с параметром *Queue* , установленным в **аутпутиммедиате**. Пустой кружок представляет позицию в очереди вывода, в которой добавляются будущие данные пера планшета.

На следующей схеме показано добавление пользовательских данных пера во входную очередь.

![Иллюстрация, демонстрирующая поток данных пользовательского пера в очередь вывода](images/5dd2cfcc-1086-49b0-a0d5-9276c13c7f61.gif)

На этой схеме круги с буквами "A" и "B" представляют данные пера планшета, которые уже добавлены в очередь вывода объекта [**RealTimeStylus**](realtimestylus-class.md) и еще не были отправлены в асинхронную коллекцию подключаемых модулей. Кружок с буквой "C" представляет данные пера планшета, обрабатываемые объектом **RealTimeStylus** в данный момент. Он отправляется в коллекцию синхронных подключаемых модулей и помещается в очередь вывода. Круги с цифрами "1", "2" и "3" представляют пользовательские данные пера, которые были добавлены во входную очередь первыми, вторыми и третьими синхронными подключаемыми модулями соответственно в ответ на данные пера планшета, представленные "C". Подключаемые модули добавили пользовательские данные пера с параметром *Queue* , имеющим значение **input**. Данные пользовательского пера нумеруются как "1", затем передаются в синхронные подключаемые модули, а затем в очередь вывода перед тем, как пользовательские данные пера нумеруются как "2" и "3", которые обрабатываются до обработки следующих данных пера планшета. Пустой кружок представляет позицию в очереди вывода, в которой добавляются будущие данные пера планшета.

## <a name="error-data"></a>Данные об ошибках

Когда подключаемый модуль создает исключение, нормальный поток данных прерывается. Объект [**RealTimeStylus**](realtimestylus-class.md) создает объект [ErrorData](/previous-versions/ms824740(v=msdn.10)) и вызывает:

-   Метод [Microsoft. стилусинпут. истилуссинкплугин. Error](/previous-versions/ms824754(v=msdn.10)) или [Microsoft. стилусинпут. истилусасинкплугин. Error](/previous-versions/ms824771(v=msdn.10)) подключаемого модуля, который вызвал исключение.
-   Метод [Microsoft. стилусинпут. истилуссинкплугин. Error](/previous-versions/ms824754(v=msdn.10)) или [Microsoft. стилусинпут. истилусасинкплугин. Error](/previous-versions/ms824771(v=msdn.10)) для оставшихся подключаемых модулей в этой коллекции.

Если подключаемый модуль, вызвавший исключение, является синхронным подключаемым модулем, объект [ErrorData](/previous-versions/ms824740(v=msdn.10)) добавляется в очередь вывода. Затем объект [**RealTimeStylus**](realtimestylus-class.md) возобновляет нормальную обработку исходных данных.

На следующей схеме показано добавление данных об ошибках в данные пера планшета.

![пользовательский поток данных пера в очередь вывода с добавлением данных об ошибках](images/c2f79abe-aeb5-498f-b389-1fad9bf01a13.gif)

На этой схеме круги с буквами "A" и "B" представляют данные пера планшета, которые уже добавлены в очередь вывода объекта [**RealTimeStylus**](realtimestylus-class.md) и еще не были отправлены в асинхронную коллекцию подключаемых модулей. Кружок с буквой "C" представляет данные пера планшета, обрабатываемые объектом **RealTimeStylus** в данный момент. Кружок с буквой "e" представляет объект [ErrorData](/previous-versions/ms824740(v=msdn.10)) , созданный объектом **RealTimeStylus** , когда второй синхронный подключаемый модуль, синхронный подключаемый модуль 2, создает исключение при обработке "C". Затем объект **RealTimeStylus** приостанавливает обработку "C" и передает "e" подключаемому модулю, создавшему исключение и все последующие подключаемые модули. Затем объект **RealTimeStylus** помещает "e" в очередь вывода и возобновляет обработку "C", которая передается в оставшиеся подключаемые модули в коллекции синхронных подключаемых модулей и помещается в очередь вывода после "e". Пустой кружок представляет позицию в очереди вывода, в которой добавляются будущие данные пера планшета.

Если подключаемый модуль создает исключение из метода ошибки, объект [**RealTimeStylus**](realtimestylus-class.md) перехватывает исключение, но не создает новый объект [ErrorData](/previous-versions/ms824740(v=msdn.10)) . Это необходимо для предотвращения рекурсии.

Данные об ошибках добавляются в очередь вывода после любых пользовательских данных пера, которые добавляются в **аутпутиммедиате** позиции до исключения, создавшего данные об ошибке, и перед любыми пользовательскими данными пера, добавленными в позиции **аутпутиммедиате** , последующими подключаемыми модулями в коллекции синхронных подключаемых модулей.

На следующей схеме показано, как данные об ошибках добавляются в очередь вывода по отношению к пользовательским данным, добавляемым в очередь **аутпутиммедиате** .

![данные об ошибках, добавленные в очередь вывода по отношению к пользовательским данным, добавленным в очередь аутпутиммедиате.](images/b00320c4-6fe7-439d-9855-e5f131feeb69.gif)

На этой схеме круги с буквами "A" и "B" представляют данные пера планшета, которые уже добавлены в очередь вывода объекта [**RealTimeStylus**](realtimestylus-class.md) и еще не были отправлены в асинхронную коллекцию подключаемых модулей. Кружок с буквой "C" представляет данные пера планшета, обрабатываемые объектом **RealTimeStylus** в данный момент. Цифры "1", "2" и "3" добавляются первыми, вторыми и третьими синхронными подключаемыми модулями соответственно в очередь **аутпутиммедиате** в ответ на данные, представленные кружком с буквой "C". Кружок с буквой "e" представляет данные об ошибке, формируемые в ответ на исключение, созданное вторым подключаемым модулем после того, как второй подключаемый модуль добавил пользовательские данные в очередь вывода в позиции **аутпутиммедиате** .

Если любой синхронный подключаемый модуль добавляет пользовательские данные пера во входную очередь в ответ на данные об ошибке, данные добавляются непосредственно перед данными об ошибке. Если любой из синхронных подключаемых модулей добавляет пользовательские данные пера в выходную очередь в позиции **вывода** в ответ на данные об ошибке, данные добавляются сразу после данных об ошибке.

Объект [**RealTimeStylus**](realtimestylus-class.md) вызывает метод [Microsoft. стилусинпут. истилуссинкплугин. Error](/previous-versions/ms824754(v=msdn.10)) в потоке, из которого создается исключение.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Microsoft. Ink. планшет](/previous-versions/ms827783(v=msdn.10))
</dt> <dt>

[Microsoft. Стилусинпут. Плугиндата](/previous-versions/ms823992(v=msdn.10))
</dt> <dt>

[Microsoft. Стилусинпут. Датаинтерестмаск](/previous-versions/ms575174(v=vs.100))
</dt> <dt>

[Microsoft. Стилусинпут. RealTimeStylus](/previous-versions/ms824830(v=msdn.10))
</dt> <dt>

[Работа с классом RealTimeStylus](working-with-the-realtimestylus-class.md)
</dt> </dl>

 

 
