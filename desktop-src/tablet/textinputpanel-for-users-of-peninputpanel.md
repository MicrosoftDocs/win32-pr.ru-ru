---
description: В состав выпуска Windows Vista входит новый программируемый объект для панели ввода Tablet PC, который предоставляет новый диапазон возможностей для работы приложения и взаимодействия с панелью ввода.
ms.assetid: 539f41d3-5fb8-4e20-99ba-0d5af1f0cc54
title: Текстинпутпанел для пользователей Пенинпутпанел
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 14ed213db49427d997f0ea1dda414cf1a6a0c2d4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104349075"
---
# <a name="textinputpanel-for-users-of-peninputpanel"></a><span data-ttu-id="9cd64-103">Текстинпутпанел для пользователей Пенинпутпанел</span><span class="sxs-lookup"><span data-stu-id="9cd64-103">TextInputPanel for Users of PenInputPanel</span></span>

<span data-ttu-id="9cd64-104">В состав выпуска Windows Vista входит новый программируемый объект для панели ввода Tablet PC, который предоставляет новый диапазон возможностей для работы приложения и взаимодействия с панелью ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-104">The release of Windows Vista includes a new programmability object for the Tablet PC Input Panel that provides a new range of possibility for how an application can use and interact with Input Panel.</span></span> <span data-ttu-id="9cd64-105">При первом запуске разработчики приложений могут располагать значком In-Place панели ввода, чтобы выровнять его с помощью текстового поля или поместить в углу пользовательской области, чтобы предоставить доступ к альтернативному режиму ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-105">For the first time application developers can position the In-Place Input Panel Icon to line up with a text box or place it in the corner of a customer inking surface to offer access to an alternative input mode.</span></span> <span data-ttu-id="9cd64-106">Когда значок панели ввода разворачивается на панели ввода In-Place, разработчики имеют тот же контроль над положением.</span><span class="sxs-lookup"><span data-stu-id="9cd64-106">Developers have the same control over positioning once the Input Panel Icon is expanded into the In-Place Input Panel.</span></span> <span data-ttu-id="9cd64-107">Это позволяет убедиться, что In-Place панель ввода никогда не пересекается с ключевыми элементами пользовательского интерфейса в макете приложения или даже для перекомпоновки пользовательского интерфейса приложения, чтобы освободить место для In-Place панели ввода, а затем поместить его в зарезервированное пространство.</span><span class="sxs-lookup"><span data-stu-id="9cd64-107">This makes it possible to assure the In-Place Input Panel never overlaps with key user interface elements in an application's layout or even to reflow an application's user interface to make space for the In-Place Input Panel and then place it in the reserved space.</span></span> <span data-ttu-id="9cd64-108">Новая модель программирования включает поддержку более чем просто, но разработчики также могут настраивать область ввода, режим исправления и многие другие свойства панели ввода, чтобы адаптировать ввод текста в приложении.</span><span class="sxs-lookup"><span data-stu-id="9cd64-108">The new programmability model includes support for more than just positioning though, developers can also customize the input area, correction mode, and many other properties of Input Panel to tailor make the text entry experience in an application.</span></span> <span data-ttu-id="9cd64-109">Наконец, в первый раз, когда приложение может получить рукописный ввод пользователя, в дополнение к распознанному тексту, связанному с вставками текста из панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-109">Lastly, for the first time it is possible for an application to receive the user ink, in addition to the recognized text, associated with text insertions from Input Panel.</span></span> <span data-ttu-id="9cd64-110">Это позволяет использовать новые сценарии приложений, включая рукописный ввод в журналах отслеживания изменений, и позволяет пользователям изменять или просматривать рукописные данные в приложении.</span><span class="sxs-lookup"><span data-stu-id="9cd64-110">This enables new application scenarios including ink in change tracking logs and allowing users to edit or view ink in the application.</span></span> <span data-ttu-id="9cd64-111">Эти новые возможности программирования являются прямым результатом отзывов о статье о разработке панели ввода и представляют первый шаг к более тесной интеграции приложений и панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-111">These new programmability features are the direct result of feedback Microsoft has received about the Input Panel developer story and represent the first step toward tighter integration of applications and Input Panel.</span></span>

<span data-ttu-id="9cd64-112">Чтобы обеспечить эту расширенную модель программирования панели ввода, существующий механизм программного взаимодействия с панелью ввода, объект [**пенинпутпанел**](peninputpanel-class.md) является устаревшим и заменен новым объектом [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) .</span><span class="sxs-lookup"><span data-stu-id="9cd64-112">In order to provide this enriched Input Panel programmability model the existing mechanism for programmatically interacting with Input Panel, the [**PenInputPanel**](peninputpanel-class.md) object, is being deprecated and replaced by the new [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object.</span></span> <span data-ttu-id="9cd64-113">Кроме предоставления новых возможностей программирования, объект **текстинпутпанел** также обеспечивает близко к всем программным возможностям объекта **пенинпутпанел** .</span><span class="sxs-lookup"><span data-stu-id="9cd64-113">In addition to providing new programmability features, the **TextInputPanel** object also provides close to all of the programmatic capabilities of the **PenInputPanel** object.</span></span> <span data-ttu-id="9cd64-114">Объект **текстинпутпанел** входит в состав Windows Vista и Windows Vista Software Developer Kit.</span><span class="sxs-lookup"><span data-stu-id="9cd64-114">The **TextInputPanel** object is included in both Windows Vista and the Windows Vista Software Developer Kit.</span></span> <span data-ttu-id="9cd64-115">Объект **текстинпутпанел** совместим только с панелью ввода Windows Vista и не может использоваться в Windows XP с пакетом обновления 2 (SP2) или более старой панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-115">The **TextInputPanel** object is only compatible with the Windows Vista Input Panel and cannot be used with the Windows XP Service Pack 2 or older Input Panel.</span></span> <span data-ttu-id="9cd64-116">Приложение, которое ранее было написано для использования объекта **пенинпутпанел** , будет продолжать работать с панелью ввода Windows Vista, однако при написании новых разработчиков приложений для планшетов настоятельно рекомендуется использовать новый объект **текстинпутпанел** вместо устаревшего объекта **пенинпутпанел** .</span><span class="sxs-lookup"><span data-stu-id="9cd64-116">Application that were previously written to use the **PenInputPanel** object will continue to work with the Windows Vista Input Panel, however, when writing new Tablet applications developers are strongly encouraged to use the new **TextInputPanel** object instead of the deprecated **PenInputPanel** object.</span></span>

<span data-ttu-id="9cd64-117">Каждый из параметров программирования объекта [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) может применяться к отдельности для каждого текстового поля.</span><span class="sxs-lookup"><span data-stu-id="9cd64-117">Each of the programmability options of the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object can be applied on a per text field basis.</span></span> <span data-ttu-id="9cd64-118">Это достигается путем подключения экземпляра объекта **текстинпутпанел** с помощью свойства [**аттачедедитвиндов**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_attachededitwindow) .</span><span class="sxs-lookup"><span data-stu-id="9cd64-118">This is accomplished by attaching an instance of the **TextInputPanel** object using the [**AttachedEditWindow**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_attachededitwindow) property.</span></span> <span data-ttu-id="9cd64-119">Для свойства необходимо задать маркер окна для текстового поля.</span><span class="sxs-lookup"><span data-stu-id="9cd64-119">The property should be set to the window handle for the text field.</span></span>

> [!Note]  
> <span data-ttu-id="9cd64-120">: Некоторые свойства и методы, описанные ниже, применяются, когда панель ввода находится в режиме взаимодействия "на месте", а не когда панель ввода находится в режиме с плавающей или закрепленной взаимодействием.</span><span class="sxs-lookup"><span data-stu-id="9cd64-120">: Several of the properties and methods describe below apply when Input Panel is in the in-place interaction mode and not when Input Panel is in the floating or docked interaction mode.</span></span> <span data-ttu-id="9cd64-121">Режим взаимодействия «на месте» — это поведение панели ввода, где при помещении фокуса в редактируемое поле появляется значок панели ввода рядом с полем, и нажатие значка на панели ввода приводит к раскрытию панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-121">The in-place interaction mode is the Input Panel behavior where placing focus in an editable field causes the Input Panel Icon to appear next to the field, and tapping on the Input Panel Icon causes Input Panel to expand.</span></span> <span data-ttu-id="9cd64-122">Методы и свойства, которые применяются только в том случае, если панель ввода находится в режиме взаимодействия "на месте", где все они содержат "Place" в имени метода или свойства.</span><span class="sxs-lookup"><span data-stu-id="9cd64-122">The methods and properties that only apply when Input Panel is in the in-place interaction mode all contain 'InPlace' in the method or property name.</span></span>

 

## <a name="control-of-input-panel-icon-and-input-panel-visibility"></a><span data-ttu-id="9cd64-123">Управление значком панели ввода и видимостью панели ввода</span><span class="sxs-lookup"><span data-stu-id="9cd64-123">Control of Input Panel Icon and Input Panel Visibility</span></span>

<span data-ttu-id="9cd64-124">Первый аспект панели ввода, который разработчики приложений имеют больший контроль над Windows Vista, — это его видимость.</span><span class="sxs-lookup"><span data-stu-id="9cd64-124">The first aspect of Input Panel which application developers have more control over in Windows Vista is its visibility.</span></span> <span data-ttu-id="9cd64-125">С помощью объекта [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) можно управлять видимостью In-Place панели ввода тремя способами.</span><span class="sxs-lookup"><span data-stu-id="9cd64-125">Using the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object it is possible to control the visibility of the In-Place Input Panel in three ways.</span></span> <span data-ttu-id="9cd64-126">С помощью сочетания свойств и методов приложение может определить, отображается ли In-Place панель ввода, когда на панели ввода In-Place отображается и отображается ли она первым в качестве значка панели ввода или сразу же отображается в развернутом виде.</span><span class="sxs-lookup"><span data-stu-id="9cd64-126">With a combination of properties and methods an application can determine if the In-Place Input Panel shows, when the In-Place Input Panel shows, and whether it appears first as the Input Panel Icon or immediately shows expanded.</span></span> <span data-ttu-id="9cd64-127">Комбинируя эти методы для управления видимостью с помощью методов управления размещением, обсуждаемых в следующем разделе, разработчики приложений могут создавать пользовательские точки запуска и пользовательские рабочие потоки с помощью панели ввода In-Place в приложении.</span><span class="sxs-lookup"><span data-stu-id="9cd64-127">By combining these techniques for controlling visibility with the techniques for controlling positioning discussed in the next section it is possible for application developers to create custom launch points and custom work flows using the In-Place Input Panel in an application.</span></span>

> [!Note]  
> <span data-ttu-id="9cd64-128">Свойства и методы, описанные в этом разделе, применяются только в том случае, если панель ввода находится в режиме взаимодействия In-Place.</span><span class="sxs-lookup"><span data-stu-id="9cd64-128">The properties and methods discussed in this section only apply when Input Panel is in the In-Place interaction mode.</span></span>

 

<span data-ttu-id="9cd64-129">Во-первых, можно предотвратить отображение панели ввода In-Place и значка панели ввода, установив для свойства [**инплацевисиблеонфокус**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplacevisibleonfocus) **значение false**.</span><span class="sxs-lookup"><span data-stu-id="9cd64-129">First and most basically, it is possible to prevent the In-Place Input Panel and the Input Panel Icon from ever appearing by setting the [**InPlaceVisibleOnFocus**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplacevisibleonfocus) property to **false**.</span></span> <span data-ttu-id="9cd64-130">Если установить его в **true** , будет возвращено значение по умолчанию, если это возможно, если оно не было отключено пользователем или групповая политика.</span><span class="sxs-lookup"><span data-stu-id="9cd64-130">Setting it to **true** reverts it to the system default of appearing when possible, provided it has not been disabled by the user or Group Policy.</span></span> <span data-ttu-id="9cd64-131">Этот параметр полезен для приложений, которые содержат пользовательские решения для ввода текста в качестве альтернативы панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-131">This option is useful for applications that include custom text entry solutions as an alternative to Input Panel.</span></span>

<span data-ttu-id="9cd64-132">Во-вторых, установив свойство [**дефаултинплацестате**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) , разработчик может указать, какое состояние на месте, как указано в перечислении [**инплацестате**](/windows/win32/api/peninputpanel/ne-peninputpanel-inplacestate) , отображается In-Place панели ввода в том случае, когда фокус помещается в текстовое поле.</span><span class="sxs-lookup"><span data-stu-id="9cd64-132">Second, by setting the [**DefaultInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) property a developer can specify which in-place state, as specified by the [**InPlaceState**](/windows/win32/api/peninputpanel/ne-peninputpanel-inplacestate) enumeration, the In-Place Input Panel appears in when focus is placed in a text field.</span></span> <span data-ttu-id="9cd64-133">Система по умолчанию используется для того, чтобы In-Place панель ввода отображалась в состоянии наведения указателя, если панель ввода уже не видна в развернутом состоянии, в этом случае панель ввода остается расширенной.</span><span class="sxs-lookup"><span data-stu-id="9cd64-133">The system default is for the In-Place Input Panel to appear in the hover state unless Input Panel is already visible in the expanded state, in which case Input Panel remains expanded.</span></span> <span data-ttu-id="9cd64-134">Если задать для свойства **дефаултинплацестате** значение инплацестате, то панель ввода In-Place всегда будет отображаться развернутой, а не с помощью значка панели ввода, а затем будет требовать от пользователя коснуться значка панели ввода перед расширением панели ввода. **\_**</span><span class="sxs-lookup"><span data-stu-id="9cd64-134">Setting the **DefaultInPlaceState** property to **InPlaceState\_Expanded** causes the In-Place Input Panel to always appear expanded, rather than the Input Panel Icon appearing first and then requiring the user to tap the Input Panel Icon before Input Panel expands.</span></span> <span data-ttu-id="9cd64-135">Два других варианта — **инплацестате \_ Auto**, то есть поведение системы по умолчанию и **инплацестате \_ ховертаржет** , которое всегда приводит к отображению значка панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-135">The other two options are **InPlaceState\_Auto**, which is the system default behavior and **InPlaceState\_HoverTarget** which always causes the Input Panel Icon to appear.</span></span> <span data-ttu-id="9cd64-136">Возможность указать, что In-Place панель ввода всегда развернута, — это новая функция с объектом [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) и невозможность использования объекта [**пенинпутпанел**](peninputpanel-class.md) .</span><span class="sxs-lookup"><span data-stu-id="9cd64-136">The ability to specify that the In-Place Input Panel always appear expanded is new with the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object and not possible using the [**PenInputPanel**](peninputpanel-class.md) object.</span></span> <span data-ttu-id="9cd64-137">На следующем рисунке показан значок панели ввода In-Place и развернутые состояния панели.</span><span class="sxs-lookup"><span data-stu-id="9cd64-137">The following illustration shows the In-Place Input Panel icon and expanded states of the panel.</span></span>

![значок панели ввода на месте и развернутые состояния](images/8ce866b6-9a45-499f-a3d1-95a1d34d6402.jpg)

<span data-ttu-id="9cd64-139">Помимо возможности управления состоянием на месте, разработчик может определить состояние на месте в данный момент, получая свойство [**куррентинплацестате**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinplacestate) ...</span><span class="sxs-lookup"><span data-stu-id="9cd64-139">In addition to being able to control the in-place state, it is also possible for a developer to determine the in-place state at a given moment by getting the [**CurrentInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinplacestate) property.</span></span> <span data-ttu-id="9cd64-140">**Куррентинплацестате** равен [**Дефаултинплацестате**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) , если панель ввода не видна, за исключением случаев,  когда дефаултинплацестате **инплацестате \_ Auto** , в этом случае **куррентинплацестате** становится **InPlaceState \_ HoverTarget**.</span><span class="sxs-lookup"><span data-stu-id="9cd64-140">The **CurrentInPlaceState** is equal to [**DefaultInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) when Input Panel is not visible, except when the **DefaultInPlaceState** is **InPlaceState\_Auto** in which case the **CurrentInPlaceState** becomes **InPlaceState\_HoverTarget**.</span></span> <span data-ttu-id="9cd64-141">События [**инплацевисибилитичангинг**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanging)  /  [**инплацевисибилитичанжед**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanged) можно использовать для отслеживания состояния видимости In-Place панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-141">The [**InPlaceVisibilityChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanging) / [**InPlaceVisibilityChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanged) events can be used to keep track on the In-Place Input Panel's visibility state.</span></span>

<span data-ttu-id="9cd64-142">Наконец, разработчик может заставить панель ввода In-Place скрыть или Показать с помощью метода [**сетинплацевисибилити**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacevisibility) .</span><span class="sxs-lookup"><span data-stu-id="9cd64-142">Lastly, a developer can force the In-Place Input Panel to hide or show using the [**SetInPlaceVisibility**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacevisibility) method.</span></span> <span data-ttu-id="9cd64-143">Если разработчик ранее установил свойство [**дефаултинплацестате**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) , панель ввода отображается в указанном состоянии при принудительном отображении.</span><span class="sxs-lookup"><span data-stu-id="9cd64-143">If the developer has previously set the [**DefaultInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) property, Input Panel appears in the specified state when forced to show.</span></span> <span data-ttu-id="9cd64-144">Приложение может скрывать или отображать панель ввода In-Place только в том случае, если фокус находится в окне, к которому присоединен объект [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) , а также когда пользователь не открывает панель ввода в другом режиме взаимодействия, например закрепленном или плавающем.</span><span class="sxs-lookup"><span data-stu-id="9cd64-144">An application is only permitted to hide or show the In-Place Input Panel when focus is currently in the window the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object is attached to and when the user does not have Input Panel open in another interaction mode, such as docked or floating.</span></span> <span data-ttu-id="9cd64-145">Возможность принудительной установки скрытой или отображаемой панели ввода In-Place также является новой с помощью объекта **текстинпутпанел** и невозможности использования объекта [**пенинпутпанел**](peninputpanel-class.md) .</span><span class="sxs-lookup"><span data-stu-id="9cd64-145">The ability to force the In-Place Input Panel to hide or show is also new with the **TextInputPanel** object and not possible using the [**PenInputPanel**](peninputpanel-class.md) object.</span></span>

<span data-ttu-id="9cd64-146">Эти параметры позволяют разработчикам приложений точно контролировать, когда появляется панель ввода In-Place и в каком состоянии.</span><span class="sxs-lookup"><span data-stu-id="9cd64-146">These options give application developers fine grain control over when the In-Place Input Panel appears and in what state.</span></span> <span data-ttu-id="9cd64-147">Настроив состояние "на месте" по умолчанию и управляя видимостью на месте независимо от изменения фокуса, разработчик приложения может создать пользовательский рабочий процесс, когда панель ввода реагирует на параметры приложения или данные пользователя в приложении.</span><span class="sxs-lookup"><span data-stu-id="9cd64-147">By customizing the default in-place state and controlling the in-place visibility independently of focus changes an application developer can create a custom work flow when Input Panel responds to either application settings or user input into an application.</span></span>

## <a name="absolute-positioning-of-input-panel-icon-and-input-panel"></a><span data-ttu-id="9cd64-148">Абсолютное позиционирование значка панели ввода и панели ввода</span><span class="sxs-lookup"><span data-stu-id="9cd64-148">Absolute Positioning of Input Panel Icon and Input Panel</span></span>

<span data-ttu-id="9cd64-149">Возможно, наиболее привлекательным новым компонентом в объекте [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) является абсолютное позиционирование панели ввода In-Place.</span><span class="sxs-lookup"><span data-stu-id="9cd64-149">Possibly the most compelling new feature found in the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object is absolute positioning of the In-Place Input Panel.</span></span> <span data-ttu-id="9cd64-150">Благодаря этой новой возможности разработчик приложения может убедиться, что панель ввода In-Place не пересекается с одним или несколькими ключевыми визуальными элементами в макете приложения.</span><span class="sxs-lookup"><span data-stu-id="9cd64-150">With this new capability an application developer can ensure that the In-Place Input Panel does not overlap with one or more key visual elements in an application layout.</span></span> <span data-ttu-id="9cd64-151">С помощью объекта [**пенинпутпанел**](peninputpanel-class.md) можно разместить панель ввода In-Place относительно текстового поля, основанного на смещении, однако панель ввода будет по-прежнему настроена для сохранения на экране.</span><span class="sxs-lookup"><span data-stu-id="9cd64-151">Using the [**PenInputPanel**](peninputpanel-class.md) object it was possible to position the In-Place Input Panel relative to a text field based on an offset, however, Input Panel would still adjust itself to keep on the screen.</span></span> <span data-ttu-id="9cd64-152">В первый раз в Vista приложение может разместить In-Place панель ввода на абсолютной позиции с помощью экранных координат.</span><span class="sxs-lookup"><span data-stu-id="9cd64-152">For the first time in Vista an application can position the In-Place Input Panel at an absolute position using screen coordinates.</span></span> <span data-ttu-id="9cd64-153">Кроме того, ответственность за хранение панели ввода на экране остается недоступной для разработчика приложения, поэтому при этом удаляется вероятность того, что панель ввода будет автоматически и кажется случайной.</span><span class="sxs-lookup"><span data-stu-id="9cd64-153">Additionally, the responsibility of keeping Input Panel on the screen is left to the application developer therefore removing the chance that Input Panel will automatically, and seemingly randomly, reposition itself.</span></span>

> [!Note]  
> <span data-ttu-id="9cd64-154">Свойства и методы, описанные в этом разделе, применяются только в том случае, если панель ввода находится в режиме взаимодействия In-Place.</span><span class="sxs-lookup"><span data-stu-id="9cd64-154">The properties and methods discussed in this section only apply when Input Panel is in the In-Place interaction mode.</span></span>

 

<span data-ttu-id="9cd64-155">Два основных метода, необходимые для абсолютного позиционирования In-Place панели ввода, — это [**сетинплацепоситион**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplaceposition) и [**сетинплацеховертаржетпоситион**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacehovertargetposition).</span><span class="sxs-lookup"><span data-stu-id="9cd64-155">The two primary methods necessary for absolutely positioning the In-Place Input Panel are [**SetInPlacePosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplaceposition) and [**SetInPlaceHoverTargetPosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacehovertargetposition).</span></span> <span data-ttu-id="9cd64-156">Первая используется для указания расположения панели ввода In-Place, а вторая используется для указания расположения значка панели ввода для In-Place панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-156">The first is used to specify the location of the In-Place Input Panel and the second is used to specify the location of the Input Panel Icon for the In-Place Input Panel.</span></span> <span data-ttu-id="9cd64-157">Если приложение выбирает установку только расположения значка панели ввода, а не расположения In-Place панели ввода, то In-Place панель ввода отображается в расположении по умолчанию, определенном системой.</span><span class="sxs-lookup"><span data-stu-id="9cd64-157">If an application chooses to only set the Input Panel Icon location and not the location of the In-Place Input Panel, then the In-Place Input Panel appears in the default location determined by the system.</span></span> <span data-ttu-id="9cd64-158">Аналогично, если приложение перемещает панель ввода In-Place, но не значок панели ввода, значок панели ввода отображается в расположении по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="9cd64-158">Similarly if an application repositions the In-Place Input Panel but not the Input Panel Icon, the Input Panel Icon appears in the default location.</span></span> <span data-ttu-id="9cd64-159">Расположение указывается в экранных координатах.</span><span class="sxs-lookup"><span data-stu-id="9cd64-159">Location is specified in screen coordinates.</span></span> <span data-ttu-id="9cd64-160">Фактическая точка располагается в левом верхнем углу значка панели ввода или панели ввода без развернутого раскладки исправлений.</span><span class="sxs-lookup"><span data-stu-id="9cd64-160">The actual point being positioned is the upper left corner of the Input Panel Icon or Input Panel with no Correction Comb expanded.</span></span> <span data-ttu-id="9cd64-161">Когда разворачивание исправлений разворачивается, размещаемая точка не изменяется.</span><span class="sxs-lookup"><span data-stu-id="9cd64-161">When the Correction Comb is expanded, the point being positioned does not change.</span></span> <span data-ttu-id="9cd64-162">(См. рис. 2 ниже) Нет никаких признаков того, где In-Place панель ввода и значок In-Place панели ввода могут быть местами, а приложения, вызывающие эти методы, должны держать их на экране.</span><span class="sxs-lookup"><span data-stu-id="9cd64-162">(See Figure 2 below)There are no restricts on where the In-Place Input Panel and the In-Place Input Panel Icon can be places and it is the responsibility of the applications calling these methods to keep them on the screen.</span></span> <span data-ttu-id="9cd64-163">Оба метода являются синхронными, то есть размещение происходит перед возвратом метода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-163">Both methods are synchronous, meaning positioning occurs before the method returns.</span></span> <span data-ttu-id="9cd64-164">Если панель ввода уже открыта в режиме плавающего или закрепленного взаимодействия, попытка позиционирования In-Place панели ввода или значка In-Place панели ввода завершается ошибкой.</span><span class="sxs-lookup"><span data-stu-id="9cd64-164">In the case where Input Panel is already open in the floating or docked interaction mode, an attempt to position the In-Place Input Panel or the In-Place Input Panel Icon fails.</span></span> <span data-ttu-id="9cd64-165">Кроме того, методы завершаются ошибкой, если окно, присоединенное к объекту [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) , в настоящее время не имеет фокуса.</span><span class="sxs-lookup"><span data-stu-id="9cd64-165">Additionally the methods fail if the window attached to the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object does not currently have focus.</span></span>

<span data-ttu-id="9cd64-166">Вызов [**сетинплацепоситион**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplaceposition) или [**сетинплацеховертаржетпоситион**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacehovertargetposition) не приводит к автоматической появлению In-Place панели ввода или значка панели ввода, он просто задает расположение для следующего отображения.</span><span class="sxs-lookup"><span data-stu-id="9cd64-166">A call to [**SetInPlacePosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplaceposition) or [**SetInPlaceHoverTargetPosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacehovertargetposition) does not automatically cause the In-Place Input Panel or Input Panel Icon to show, it simply sets the position for the next time they are shown.</span></span> <span data-ttu-id="9cd64-167">Вызов [**сетинплацевисибилити**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacevisibility) можно использовать для немедленного отображения.</span><span class="sxs-lookup"><span data-stu-id="9cd64-167">Calling [**SetInPlaceVisibility**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacevisibility) can be used to force them to show immediately.</span></span>

![размеры панели ввода на месте](images/0c67a77a-5d2f-489f-9357-b8a168d024d3.jpg)

<span data-ttu-id="9cd64-169">При размещении In-Place панели ввода, чтобы определить, будет ли она отображаться на экране, может быть немного сложнее.</span><span class="sxs-lookup"><span data-stu-id="9cd64-169">When positioning the In-Place Input Panel calculating whether it will go off the screen can be a little tricky.</span></span> <span data-ttu-id="9cd64-170">Чтобы упростить этот процесс, существует несколько свойств объекта [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) , которые можно использовать для упрощения этого процесса.</span><span class="sxs-lookup"><span data-stu-id="9cd64-170">To make this process easier, there are several properties of the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object that can be used to simplify this process.</span></span> <span data-ttu-id="9cd64-171">Вместе эти свойства и события можно использовать для определения точного размера In-Place панели ввода во всех ее состояниях:</span><span class="sxs-lookup"><span data-stu-id="9cd64-171">Together these properties and event can be used to determine the exact size of the In-Place Input Panel in all of its states:</span></span>

-   <span data-ttu-id="9cd64-172">[**Инплацебаундингректангле**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle)— это свойство предоставляет ограничивающий прямоугольник для In-Place панели ввода, когда отображается самая большая область ввода для текущего языка ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-172">[**InPlaceBoundingRectangle**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle)– This property provides the bounding rectangle for the In-Place Input Panel when the largest input area for the current input language is showing.</span></span> <span data-ttu-id="9cd64-173">Если панель рукописного ввода или панель символов определяется самой крупной входной областью, то будет добавлена Высота кнопки Вставить.</span><span class="sxs-lookup"><span data-stu-id="9cd64-173">If the Writing Pad or Character Pad are determined to the largest input area, then the height of the Insert button is included.</span></span> <span data-ttu-id="9cd64-174">Он не включает высоту для этого исправления. При автоматическом увеличении панели ввода In-Place [](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanging)  /  инициируется пара событий [**инплацесизечанжед**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanged) , а значение этого свойства обновляется для включения дополнительной области ввода или записи.</span><span class="sxs-lookup"><span data-stu-id="9cd64-174">It does not include the height of the Correction Comb. When the In-Place Input Panel auto grows, [**InPlaceSizeChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanging) / [**InPlaceSizeChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanged) event pair is fired and the value of this property is updated to include the additional writing area or writing line.</span></span>
-   <span data-ttu-id="9cd64-175">[**Попупкорректионхеигхт**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_popupcorrectionheight)— это свойство определяет высоту раскладки исправлений после вставки, когда она располагается над панелью ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-175">[**PopUpCorrectionHeight**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_popupcorrectionheight)– This property specifies the height of the Post-Insertion Correction Comb when it is positioned above Input Panel.</span></span> <span data-ttu-id="9cd64-176">Чтобы получить полную высоту панели ввода In-Place с извлеченным объединением исправлений после вставки, добавьте высоту [**инплацебаундингректангле**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle) в **попупкорректионхеигхт**.</span><span class="sxs-lookup"><span data-stu-id="9cd64-176">To get the full height of the In-Place Input Panel with the Post-Insertion Correction Comb popped-up, add the height of the [**InPlaceBoundingRectangle**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle) to the **PopUpCorrectionHeight**.</span></span>

<span data-ttu-id="9cd64-177">В качестве более простой альтернативы заданию абсолютного расположения панели ввода In-Place и значка панели ввода, приложение может просто указать, будет ли панель ввода In-Place по умолчанию отображаться выше или ниже поля ввода текста.</span><span class="sxs-lookup"><span data-stu-id="9cd64-177">As a simpler alternative to setting the absolute position of the In-Place Input Panel and Input Panel Icon, an application can just specify whether the In-Place Input Panel defaults to appearing above or below a text entry field.</span></span> <span data-ttu-id="9cd64-178">Таким образом, можно избежать перекрытия элементов в макете приложения с более слабо управляемым способом.</span><span class="sxs-lookup"><span data-stu-id="9cd64-178">In this way it is possible to avoid overlapping elements in the application layout in a more loosely controlled manner.</span></span> <span data-ttu-id="9cd64-179">Для этого приложение устанавливает для [**преферрединплацедиректион**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_preferredinplacedirection) значение **Инплацедиректион \_ Bottom** или **инплацедиректион \_ Top**.</span><span class="sxs-lookup"><span data-stu-id="9cd64-179">To do this the application sets the [**PreferredInPlaceDirection**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_preferredinplacedirection) to **InPlaceDirection\_Bottom** or **InPlaceDirection\_Top**.</span></span> <span data-ttu-id="9cd64-180">Свойство является предпочтением, поскольку панель ввода In-Place переопределяет настройки, заданные приложением при необходимости для сохранения панели ввода на экране.</span><span class="sxs-lookup"><span data-stu-id="9cd64-180">The property is a preference because the In-Place Input Panel overrides the preference set by the application when necessary to keep Input Panel on the screen.</span></span> <span data-ttu-id="9cd64-181">По умолчанию система принимает на себя размещение In-Place панели ввода под текстовым полем, если это возможно, и в противном случае, чтобы разместить его выше.</span><span class="sxs-lookup"><span data-stu-id="9cd64-181">The system default is to position the In-Place Input Panel below a text field when possible and otherwise to position it above.</span></span> <span data-ttu-id="9cd64-182">При задании для **преферрединплацедиректион** значения **инплацедиректион \_ Автоматическое** восстановление системы по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="9cd64-182">Setting the **PreferredInPlaceDirection** to **InPlaceDirection\_Auto** restores the system default.</span></span>

<span data-ttu-id="9cd64-183">Вместе свойства, методы и события объекта [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) дают разработчикам необходимый контроль над In-Place панели ввода, чтобы иметь возможность разумно располагать In-Place панель ввода и значок панели ввода в макете приложения, чтобы они не нарушают поток макета, а в некоторых случаях могут быть интегрированы.</span><span class="sxs-lookup"><span data-stu-id="9cd64-183">Together the properties, methods and events of the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object give developers the necessary control over the In-Place Input Panel to be able to cleverly position the In-Place Input Panel and Input Panel Icon in an application layout so they do not disrupt the layout flow and in some case may appear integrated.</span></span> <span data-ttu-id="9cd64-184">Этот новый уровень управления — это большой выигрыш в разработке приложений для планшетов.</span><span class="sxs-lookup"><span data-stu-id="9cd64-184">This new level of control is a big win for Tablet application design.</span></span>

## <a name="access-to-the-three-input-panel-areas-writing-pad-character-pad-and-keyboard"></a><span data-ttu-id="9cd64-185">Доступ к трем областям ввода: панель ввода, панель символов и клавиатура</span><span class="sxs-lookup"><span data-stu-id="9cd64-185">Access to the Three Input Panel Areas: Writing Pad, Character Pad and Keyboard</span></span>

<span data-ttu-id="9cd64-186">Панель ввода имеет три области ввода: панель ввода, панель символов и клавиатуру.</span><span class="sxs-lookup"><span data-stu-id="9cd64-186">Input Panel has three input areas, the Writing Pad, Character Pad, and Keyboard.</span></span> <span data-ttu-id="9cd64-187">С помощью объекта [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) приложение может указать область ввода по умолчанию, отображаемую пользователю при открытии панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-187">Using the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object an application can specify the default input area that is shown to the user when Input Panel opens.</span></span> <span data-ttu-id="9cd64-188">Основная причина, по которой приложение сделает это, — это связать область ввода с типом ввода конкретного поля.</span><span class="sxs-lookup"><span data-stu-id="9cd64-188">The main reason for an application to do so is to pair the input area with the input type of specific field.</span></span> <span data-ttu-id="9cd64-189">Например, панель рукописного ввода, вероятно, лучше всего подходит для заполнения поля комментариев, но клавиатура может оказаться более удобной для ввода серийного номера продукта, который содержит как цифры, так и буквы.</span><span class="sxs-lookup"><span data-stu-id="9cd64-189">For example, the Writing Pad is probably best suited for filling out a comments field, but the Keyboard may be more convenient for entering a product serial number that contains both numbers and letters.</span></span> <span data-ttu-id="9cd64-190">Чтобы указать область ввода по умолчанию, приложения устанавливают для свойства [**дефаултинпутареа**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) одну из трех областей ввода, как определено в перечислении [**панелинпутареа**](/windows/win32/api/peninputpanel/ne-peninputpanel-panelinputarea) .</span><span class="sxs-lookup"><span data-stu-id="9cd64-190">In order to specify the default input area an applications sets the [**DefaultInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) property to one of the three input areas as defined by the [**PanelInputArea**](/windows/win32/api/peninputpanel/ne-peninputpanel-panelinputarea) enumeration.</span></span> <span data-ttu-id="9cd64-191">На следующем рисунке показаны три области ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-191">The following illustration shows the three input areas.</span></span>

![запись, символ и панель ввода с клавиатуры](images/3f1e3d03-88b9-478c-b12d-00d341bc8d5c.jpg)

<span data-ttu-id="9cd64-193">Системная область ввода по умолчанию — это панель для письма на английском, французском, немецком, испанском, итальянском, португальском, нидерландском и других языках ввода латиницы.</span><span class="sxs-lookup"><span data-stu-id="9cd64-193">The system default input area is the Writing Pad for English, French, German, Spanish, Italian, Portuguese, Dutch and all other Latin input languages.</span></span> <span data-ttu-id="9cd64-194">Для языков ввода Восточной Азии, включая японский, китайский и корейский, область ввода по умолчанию является панелью символов.</span><span class="sxs-lookup"><span data-stu-id="9cd64-194">For the East Asian input languages, including Japanese, Chinese, and Korean, the default input area is the Character Pad.</span></span> <span data-ttu-id="9cd64-195">Однако при изменении пользователем области ввода он переопределяет область ввода по умолчанию для текущего языка ввода и сохраняется как новое значение по умолчанию для этого языка ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-195">However, when the user changes input area it overrides the default input area for the current input language and is stored as the new default for that input language.</span></span> <span data-ttu-id="9cd64-196">Клавиатура является областью ввода по умолчанию для полей пароля, независимо от языка ввода, если защита паролей не отключена пользователем или групповой политикой.</span><span class="sxs-lookup"><span data-stu-id="9cd64-196">The Keyboard is the default input area for password fields, regardless of the input language unless password security has been disabled by the user or group policy.</span></span> <span data-ttu-id="9cd64-197">Во всех случаях настройка области панели ввода по умолчанию программным способом переопределяет систему по умолчанию, если только текущее поле не является полем пароля или распознаватель рукописного ввода для текущего языка ввода не поддерживает программно выбранную область ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-197">In all cases setting the default input panel area programmatically overrides the system default, unless the current field is a password field or the handwriting recognizer for the current input language does no support the programmatically selected input area.</span></span> <span data-ttu-id="9cd64-198">При установке для свойства [**дефаултинпутареа**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) значения **инплацедиректион \_ Автоматическое** восстановление параметров системы по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="9cd64-198">Setting the [**DefaultInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) property to **InPlaceDirection\_Auto** restores the system default settings.</span></span>

<span data-ttu-id="9cd64-199">Независимо от того, была ли настроена область панели ввода по умолчанию программно, пользователь может изменить текущую область панели ввода после открытия панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-199">Regardless of whether the default input panel area has been set programmatically, or not, the user has the option to change the current input panel area once Input Panel is open.</span></span> <span data-ttu-id="9cd64-200">После того как пользователь изменит текущую область ввода, выбор пользователя сохраняется до тех пор, пока панель ввода не закроется, или пользователь снова изменит выделение.</span><span class="sxs-lookup"><span data-stu-id="9cd64-200">After the user has changed the current input area, the user selection persists until Input Panel closes or the user changes the selection again.</span></span> <span data-ttu-id="9cd64-201">После закрытия и повторного открытия панели ввода программно задается переопределение области ввода по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="9cd64-201">After Input Panel closes and reopens, the programmatically set default input area re-shows.</span></span>

<span data-ttu-id="9cd64-202">Так как текущая область панели ввода может отличаться от области панели ввода по умолчанию, приложение может запросить свойство [**куррентинпутареа**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinputarea) , чтобы определить, какая область ввода видима в данный момент.</span><span class="sxs-lookup"><span data-stu-id="9cd64-202">Since the current input panel area may be different that the default input panel area, an application can query the [**CurrentInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinputarea) property to determine which input area is currently visible.</span></span> <span data-ttu-id="9cd64-203">Если панель ввода в настоящее время не видна, текущая область ввода равна области ввода по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="9cd64-203">If Input Panel is not currently visible, the current input area is equal to the default input area.</span></span> <span data-ttu-id="9cd64-204">Свойство **куррентинпутареа** никогда не равно значению **панелинпутареа \_ Auto**.</span><span class="sxs-lookup"><span data-stu-id="9cd64-204">The **CurrentInputArea** property is never equal to **PanelInputArea\_Auto**.</span></span> <span data-ttu-id="9cd64-205">Если [**дефаултинпутареа**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) равен **панелинпутареа \_ Auto**, то **куррентинпутареа** равен последней отображаемой области ввода или по умолчанию системы для текущего языка ввода, если панель ввода никогда не отображалась.</span><span class="sxs-lookup"><span data-stu-id="9cd64-205">If the [**DefaultInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) is equal to **PanelInputArea\_Auto**, then the **CurrentInputArea** is equal to the last input area shown or the system default for the current input language if Input Panel has never been shown.</span></span>

<span data-ttu-id="9cd64-206">Основное различие между поддержкой области ввода, обнаруженным в объекте [**пенинпутпанел**](peninputpanel-class.md) и объектом [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) , заключается в том, что приложение теперь имеет возможность установить область ввода по умолчанию на панель символов, а также панель рукописного ввода и клавиатуру.</span><span class="sxs-lookup"><span data-stu-id="9cd64-206">The primary difference between the input area support found in the [**PenInputPanel**](peninputpanel-class.md) object and that of the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object is the fact that the application now has the option to set the default input area to the Character Pad, in addition to the Writing Pad and Keyboard.</span></span>

<span data-ttu-id="9cd64-207">С помощью приведенных выше свойств приложение может управлять областью ввода входных данных панели ввода, отображаемой в разных полях, и оптимизировать интерфейс ввода текста пользователем.</span><span class="sxs-lookup"><span data-stu-id="9cd64-207">Using the above properties an application can control the Input Panel input area shown in different fields and optimize the user's text input experience.</span></span> <span data-ttu-id="9cd64-208">Кроме того, приложение может поддерживать осведомленность о текущей области ввода и принимать условные решения в соответствии с тем, какая область ввода лучше всего подходит для текущей задачи пользователя.</span><span class="sxs-lookup"><span data-stu-id="9cd64-208">Additionally, the application can maintain awareness of the current input area and make conditional decisions according to which input area is best suited to the current user task.</span></span>

## <a name="detailed-information-about-input-panels-interaction-mode"></a><span data-ttu-id="9cd64-209">Подробные сведения о режиме взаимодействия панели ввода</span><span class="sxs-lookup"><span data-stu-id="9cd64-209">Detailed Information about Input Panel's Interaction Mode</span></span>

<span data-ttu-id="9cd64-210">Чтобы обеспечить возможность обнаружения текущей входной области панели ввода, можно также обнаружить текущий режим взаимодействия: "на месте", "закреплено" или "плавающее".</span><span class="sxs-lookup"><span data-stu-id="9cd64-210">In additional to being able to detect Input Panel's current input area, it is also possible to detect the current interaction mode: In-Place, Docked or Floating.</span></span> <span data-ttu-id="9cd64-211">Может быть важно, чтобы приложение знало о текущем режиме взаимодействия, чтобы понять, как пользователь взаимодействует с приложением, или потому, что некоторые методы и свойства объекта [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) применимы только к режиму взаимодействия In-Place.</span><span class="sxs-lookup"><span data-stu-id="9cd64-211">It may be important for the application to know the current interaction mode either to understand how the user is interacting with the application or because some methods and properties of the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object only apply to the In-Place interaction mode.</span></span> <span data-ttu-id="9cd64-212">Например, в приложении компонент переносит существующие элементы пользовательского интерфейса, а затем позиционирует панель ввода In-Place на пустую область в своих пользовательских интерфейсах. прежде чем вносить изменения, убедитесь, что текущий режим взаимодействия находится на месте.</span><span class="sxs-lookup"><span data-stu-id="9cd64-212">For example in application the reflows existing user interface elements and then positions the In-Place Input Panel over a blank area in its user interfaces should check to make sure the current interaction mode is in-place before making adjustments.</span></span>

![закрепленные, плавающие и сквозные режимы панели ввода](images/98c8e96b-99b2-477a-9843-33b1fae7e75b.jpg)

<span data-ttu-id="9cd64-214">Свойство [**куррентинтерактионмоде**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinteractionmode) объекта [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) сохраняет текущий режим взаимодействия в соответствии с выбранным пользователем.</span><span class="sxs-lookup"><span data-stu-id="9cd64-214">The [**CurrentInteractionMode**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinteractionmode) property, of the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object, stores the current interaction mode as chosen by the user.</span></span> <span data-ttu-id="9cd64-215">Возможные режимы определяются перечислением [**интерактионмоде**](/windows/win32/api/peninputpanel/ne-peninputpanel-interactionmode) следующим образом:</span><span class="sxs-lookup"><span data-stu-id="9cd64-215">The possible modes are defined by the [**InteractionMode**](/windows/win32/api/peninputpanel/ne-peninputpanel-interactionmode) enumeration as:</span></span>

<span data-ttu-id="9cd64-216">**Интерактионмоде \_ Place**— на панели ввода In-Place взаимодействия отображается рядом с полем ввода текста, которое в данный момент находится в фокусе.</span><span class="sxs-lookup"><span data-stu-id="9cd64-216">**InteractionMode\_InPlace**– In the In-Place interaction mode Input Panel appears next to the text entry field that currently has focus.</span></span> <span data-ttu-id="9cd64-217">По умолчанию значок панели ввода In-Place появляется, когда точка вставки помещается в поле ввода текста.</span><span class="sxs-lookup"><span data-stu-id="9cd64-217">By default, the In-Place Input Panel Icon appears when an insertion point is placed in a text entry field.</span></span> <span data-ttu-id="9cd64-218">Касание на значке панели ввода вызывает расширение панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-218">Tapping on the Input Panel Icon causes Input Panel to expand.</span></span> <span data-ttu-id="9cd64-219">Панель ввода In-Place видна только в том случае, если точка вставки находится в редактируемом поле.</span><span class="sxs-lookup"><span data-stu-id="9cd64-219">The In-Place Input Panel is only visible when an insertion point is in an editable field.</span></span>

<span data-ttu-id="9cd64-220">Интерактионмоде \_ float — режим с плавающей взаимодействием аналогичен режиму взаимодействия «на месте», за исключением того, что он не привязан к точке вставки.</span><span class="sxs-lookup"><span data-stu-id="9cd64-220">InteractionMode\_Floating – The Floating interaction mode is similar to the InPlace interaction mode, except it is not tied to an insertion point.</span></span> <span data-ttu-id="9cd64-221">Панель плавающего ввода открывается путем касания на вкладке Панель ввода, которая по умолчанию отображается в левой части экрана.</span><span class="sxs-lookup"><span data-stu-id="9cd64-221">The Floating Input Panel is opened by tapping on the Input Panel tab which appears by default on the left edge of the screen.</span></span> <span data-ttu-id="9cd64-222">И панель плавающего ввода, и вкладка «Панель ввода» можно перетаскивать и перемещать с помощью пользователя.</span><span class="sxs-lookup"><span data-stu-id="9cd64-222">Both the Floating Input Panel and Input Panel tab can be dragged and repositioned by the user.</span></span> <span data-ttu-id="9cd64-223">В режиме плавающего режима позиционирование и управление панелью ввода полностью оставлены пользователю.</span><span class="sxs-lookup"><span data-stu-id="9cd64-223">In the floating mode positioning and control of Input Panel is left entirely to the user.</span></span>

<span data-ttu-id="9cd64-224">Интерактионмоде \_ доккедтоп — в верхней части экрана отображается панель ввода Docked-Top взаимодействие, и изменяется размер активного рабочего стола, поэтому панель ввода не пересекается с другими окнами или элементами пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="9cd64-224">InteractionMode\_DockedTop – In the Docked-Top interaction mode Input Panel appears at the top of the screen and the active desktop is resized so Input Panel does not overlap with any other windows or UI elements.</span></span> <span data-ttu-id="9cd64-225">В закрепленном режиме панель ввода нельзя перетаскивать или перемещать вокруг.</span><span class="sxs-lookup"><span data-stu-id="9cd64-225">In the docked mode Input Panel cannot be dragged or moved around.</span></span>

<span data-ttu-id="9cd64-226">Интерактионмоде \_ доккедботтом — режим взаимодействия Docked-Bottom совпадает с режимом Docked-Top, за исключением того, что в нижней части экрана отображается панель ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-226">InteractionMode\_DockedBottom – The Docked-Bottom interaction mode is the same as the Docked-Top mode except Input Panel appears at the bottom of the screen.</span></span>

<span data-ttu-id="9cd64-227">Если панель ввода не отображается, текущий режим взаимодействия выполняется на месте.</span><span class="sxs-lookup"><span data-stu-id="9cd64-227">When Input Panel is not visible, the current interaction mode is In-Place.</span></span>

<span data-ttu-id="9cd64-228">Публикация текущей модели взаимодействия — еще один способ, которым объект [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) предоставляет дополнительные сведения о состоянии панели ввода, чем было доступно в любой предыдущей версии.</span><span class="sxs-lookup"><span data-stu-id="9cd64-228">Publishing the current interaction model is another way the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object provides more information about the state of Input Panel than has been available in any previous version.</span></span>

## <a name="detailed-information-about-input-panels-correction-mode"></a><span data-ttu-id="9cd64-229">Подробные сведения о режиме исправления панели ввода</span><span class="sxs-lookup"><span data-stu-id="9cd64-229">Detailed Information about Input Panel's Correction Mode</span></span>

<span data-ttu-id="9cd64-230">Последним аспектом панели ввода, который объект [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) предоставляет подробную информацию о и контроле, является режим исправления.</span><span class="sxs-lookup"><span data-stu-id="9cd64-230">The final aspect of Input Panel that the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object gives you detailed information about and control of is the correction mode.</span></span> <span data-ttu-id="9cd64-231">Знание режима исправления помогает приложениям определить текущий размер панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-231">Knowing the correction mode helps applications determine the current size of Input Panel.</span></span> <span data-ttu-id="9cd64-232">Управление способом исправления после вставки в приложении — один из способов настройки процесса исправления в приложении.</span><span class="sxs-lookup"><span data-stu-id="9cd64-232">Controlling how the Post-Insertion Correction expands in an application is one way to customize the correction experience in an application.</span></span>

<span data-ttu-id="9cd64-233">Существует два основных режима, в которых может отображаться объединение исправлений: перед вставкой и после вставки.</span><span class="sxs-lookup"><span data-stu-id="9cd64-233">There are two basic modes the Correction Comb can appear in: Pre-Insertion and the Post-Insertion.</span></span> <span data-ttu-id="9cd64-234">Объединение исправлений перед вставкой используется для исправления текста, прежде чем вставить его в приложение.</span><span class="sxs-lookup"><span data-stu-id="9cd64-234">The Pre-Insertion Correction Comb is used to correct text before inserting it into an application.</span></span> <span data-ttu-id="9cd64-235">Он активируется, коснувшись ожидающего текста, который отображается под базовым планом на панели рукописного ввода в качестве красок пользователя.</span><span class="sxs-lookup"><span data-stu-id="9cd64-235">It is activated by tapping on the pending text that appear below the baseline in the Writing Pad as the user inks.</span></span> <span data-ttu-id="9cd64-236">Объединение исправлений после вставки используется для исправления текста после его вставки в приложение.</span><span class="sxs-lookup"><span data-stu-id="9cd64-236">The Post-Insertion Correction Comb is used to correct text after it has been inserted into an application.</span></span> <span data-ttu-id="9cd64-237">Он активируется путем помещения курсора вставки в или выбора ранее вставленного текста.</span><span class="sxs-lookup"><span data-stu-id="9cd64-237">It is activated by placing the insertion point in or selecting text that was previously inserted.</span></span> <span data-ttu-id="9cd64-238">Помимо двух основных режимов существует несколько вариантов того, как может выглядеть объединение исправлений после вставки.</span><span class="sxs-lookup"><span data-stu-id="9cd64-238">Beyond the two basic modes, there are several variations on how the Post-Insertion Correction Comb can appear.</span></span> <span data-ttu-id="9cd64-239">Сначала он может располагаться выше или под панелью ввода, а второй — свернутым или развернутым.</span><span class="sxs-lookup"><span data-stu-id="9cd64-239">First it can appear either above or below Input Panel and second it can appear collapsed or expanded.</span></span> <span data-ttu-id="9cd64-240">В свернутом состоянии объединение исправлений после вставки показывает только список вариантов.</span><span class="sxs-lookup"><span data-stu-id="9cd64-240">In the collapsed state the Post-Insertion Correction Comb only shows a list of alternates.</span></span> <span data-ttu-id="9cd64-241">В развернутом состоянии оно содержит как альтернативы, так и область для перезаписи слова.</span><span class="sxs-lookup"><span data-stu-id="9cd64-241">In the expanded state it includes both the alternates and an area to rewrite the word.</span></span>

![«Объединение исправлений», «пред» и «POST inserted Input Panel»](images/6cc627de-fc15-4721-9f6a-7e1517d9e650.jpg)

<span data-ttu-id="9cd64-243">Свойство [**курренткорректионмоде**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentcorrectionmode) позволяет приложению определить текущую конфигурацию в процессе исправления. Возможные значения этого свойства, определенные перечислениями [**корректионмоде**](/windows/win32/api/peninputpanel/ne-peninputpanel-correctionmode) : **нотвисибле**, **INSERT**, **постинсертионколлапсед** и **постинсертионекспандед**.</span><span class="sxs-lookup"><span data-stu-id="9cd64-243">The [**CurrentCorrectionMode**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentcorrectionmode) property allows an application to determine the current configuration of the Correction Comb. The possible values of this property as defined by the [**CorrectionMode**](/windows/win32/api/peninputpanel/ne-peninputpanel-correctionmode) enumerations are: **NotVisible**, **PreInsertion**, **PostInsertionCollapsed**, and **PostInsertionExpanded**.</span></span> <span data-ttu-id="9cd64-244">Если панель ввода или объединение исправлений не видны, **курренткорректионмоде** имеет значение **нотвисибле**.</span><span class="sxs-lookup"><span data-stu-id="9cd64-244">When no Input Panel or Correction Comb is visible, the **CurrentCorrectionMode** is **NotVisible**.</span></span>

<span data-ttu-id="9cd64-245">По умолчанию в системе отображается объединение исправлений после вставки, развернутое при выборе подходящего текста и показывающих, что точка вставки помещается в исправленный текст.</span><span class="sxs-lookup"><span data-stu-id="9cd64-245">By default the system shows the Post-Insertion Correction Comb expanded when the selects correctable text and shows it collapsed when the insertion point is placed in correctable text.</span></span> <span data-ttu-id="9cd64-246">Приложение может указать, где разворачивание исправлений после вставки должно быть всегда развернуто, установив для свойства [**експандпостинсертионкорректион**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_expandpostinsertioncorrection) **значение true**.</span><span class="sxs-lookup"><span data-stu-id="9cd64-246">An application can specify where the Post-Insertion Correction Comb should always show expanded by setting the [**ExpandPostInsertionCorrection**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_expandpostinsertioncorrection) property to **true**.</span></span> <span data-ttu-id="9cd64-247">По умолчанию система имеет **значение false**.</span><span class="sxs-lookup"><span data-stu-id="9cd64-247">The system default is **false**.</span></span> <span data-ttu-id="9cd64-248">Если свойство **експандпостинсертионкорректион** используется совместно с интерфейсом [**ихандвриттентекстинсертион**](/windows/desktop/api/peninputpanel/nn-peninputpanel-ihandwrittentextinsertion) , разработчик приложения может с легкостью добавить поддержку исправления в приложения, которые не могут получить его автоматически.</span><span class="sxs-lookup"><span data-stu-id="9cd64-248">When the **ExpandPostInsertionCorrection** property is used in conjunction with the [**IHandWrittenTextInsertion**](/windows/desktop/api/peninputpanel/nn-peninputpanel-ihandwrittentextinsertion) interface an application developer can cheaply add correction support to applications that would not get it automatically.</span></span>

<span data-ttu-id="9cd64-249">Отслеживание и управление состоянием исправления панели ввода является одной из многих новых возможностей объекта [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) , которые делают возможным более тесную панель ввода и интеграцию приложений.</span><span class="sxs-lookup"><span data-stu-id="9cd64-249">Tracking and controlling the correction state of the Input Panel is one of the many new features of the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object that make tighter Input Panel and application integration possible.</span></span>

## <a name="event-notification-before-and-after-the-event-occurs"></a><span data-ttu-id="9cd64-250">Уведомление о событии до и после наступления события</span><span class="sxs-lookup"><span data-stu-id="9cd64-250">Event Notification Before and After the Event Occurs</span></span>

<span data-ttu-id="9cd64-251">Другим аспектом программирования панели ввода, который значительно улучшен в объекте [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) , является модель событий.</span><span class="sxs-lookup"><span data-stu-id="9cd64-251">Another aspect of Input Panel programmability that is greatly improved in the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object is the event model.</span></span> <span data-ttu-id="9cd64-252">Теперь вместо того, чтобы вызывать события, которые сообщают об изменении состояния панели ввода после изменения, существуют отдельные события, отправленные до и после изменения.</span><span class="sxs-lookup"><span data-stu-id="9cd64-252">Now instead of only raising events signaling a change in Input Panel's state after the change has occurred there are separate events sent before and after the change occurs.</span></span> <span data-ttu-id="9cd64-253">События, указывающие на начало события, содержат приведенные глаголы, например "изменение" или "Вставка", тогда как события задают заключение о событии, содержат прошедшее время выполнения команд, например "Changed" или "inserted".</span><span class="sxs-lookup"><span data-stu-id="9cd64-253">Events signaling the start of an event contain present tense verbs such as 'Changing' or 'Inserting', while events signaling the conclusion of an event contain past tense verbs such as 'Changed' or 'Inserted'.</span></span>

<span data-ttu-id="9cd64-254">Эта модель событий позволяет приложению реагировать на изменение до или после того, как оно произошло.</span><span class="sxs-lookup"><span data-stu-id="9cd64-254">This event model makes it possible for an application to react to a change before or as it occurs.</span></span> <span data-ttu-id="9cd64-255">Работа панели ввода заблокирована после изменения или возобновления после изменения, пока не будут завершены обработчики событий для всех событий.</span><span class="sxs-lookup"><span data-stu-id="9cd64-255">Input Panel is blocked from proceeding with a change or resuming after change until the event handlers for all events have completed.</span></span> <span data-ttu-id="9cd64-256">Эти события являются синхронными, и таким образом приложение может отложить изменение до тех пор, пока оно не будет завершено.</span><span class="sxs-lookup"><span data-stu-id="9cd64-256">These events are synchronous and in this way an application can delay a change until it has finished reacting.</span></span> <span data-ttu-id="9cd64-257">Однако время, когда обработчик событий выполняет панель ввода, становится недоступным для пользователя и может перестает быть зависла, поэтому очень важно, чтобы обработчик событий был хорошо работать.</span><span class="sxs-lookup"><span data-stu-id="9cd64-257">However, the time where an event handler is executing Input Panel becomes inaccessible to the user and may appear hung, therefore it is important that event handler perform well.</span></span> <span data-ttu-id="9cd64-258">Однако приложение не может предотвратить или отменять событие.</span><span class="sxs-lookup"><span data-stu-id="9cd64-258">However, it is not possible for an application to prevent or cancel an event.</span></span> <span data-ttu-id="9cd64-259">Все параметры событий доступны только для чтения.</span><span class="sxs-lookup"><span data-stu-id="9cd64-259">All event parameters are read-only.</span></span> <span data-ttu-id="9cd64-260">Ниже приведено описание шести пар событий объекта [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) :</span><span class="sxs-lookup"><span data-stu-id="9cd64-260">Below is a description of the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object's six event pairs:</span></span>

-   <span data-ttu-id="9cd64-261">[**Инплацестатечангинг**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacestatechanging)  /  [**Инплацестатечанжед**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacestatechanged)— уведомление о том, что состояние «на месте» равно или было просто переключено с наведения на «развернуто» или наоборот.</span><span class="sxs-lookup"><span data-stu-id="9cd64-261">[**InPlaceStateChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacestatechanging) / [**InPlaceStateChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacestatechanged)– Notification that the in-place state is about to or has just switched from hover to expanded or vice versa.</span></span> <span data-ttu-id="9cd64-262">Параметры — это новое и старое состояние на месте.</span><span class="sxs-lookup"><span data-stu-id="9cd64-262">Parameters are the new and old in-place state.</span></span> <span data-ttu-id="9cd64-263">Совпадений с изменением значения свойства [**куррентинплацестате**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinplacestate) .</span><span class="sxs-lookup"><span data-stu-id="9cd64-263">Coincidences with a change in the value of the [**CurrentInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinplacestate) property.</span></span>
-   <span data-ttu-id="9cd64-264">[**Инплацесизечангинг**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanging)  /  [**Инплацесизечанжед**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanged)— указывается, когда размер панели ввода In-Place собирается измениться или измениться из-за изменения размера пользователя, автоматического увеличения размера или области ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-264">[**InPlaceSizeChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanging) / [**InPlaceSizeChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanged)– Indicated when the In-Place Input Panel size is about to change or has changed due to a user resize, auto growth, or an input area change.</span></span> <span data-ttu-id="9cd64-265">Параметры — это новый и старый ограничивающий прямоугольник.</span><span class="sxs-lookup"><span data-stu-id="9cd64-265">Parameters are the new and old bounding rectangle.</span></span> <span data-ttu-id="9cd64-266">Совпадений с изменением значения свойства [**инплацебаундингректангле**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle) .</span><span class="sxs-lookup"><span data-stu-id="9cd64-266">Coincidences with a change in the value of the [**InPlaceBoundingRectangle**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle) property.</span></span>
-   <span data-ttu-id="9cd64-267">[**Инпутареачангинг**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inputareachanging)  /  [**Инпутареачанжед**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inputareachanged)— сообщает, когда область ввода панели ввода собирается изменить или измениться с на другую из трех возможных областей ввода: Writing Pad, панель символов или клавиатура.</span><span class="sxs-lookup"><span data-stu-id="9cd64-267">[**InputAreaChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inputareachanging) / [**InputAreaChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inputareachanged)– Reports when the Input Panel input area is about to change or has changed from to the other of the three possible input areas: Writing Pad, Character Pad or Keyboard.</span></span> <span data-ttu-id="9cd64-268">Параметры — это новая и старая область ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-268">Parameters are the new and old input area.</span></span> <span data-ttu-id="9cd64-269">Совпадает с изменением значения свойства [**куррентинпутареа**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinputarea)</span><span class="sxs-lookup"><span data-stu-id="9cd64-269">Coincides with a change in the value of the [**CurrentInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinputarea) property</span></span>
-   <span data-ttu-id="9cd64-270">[**Корректионмодечангинг**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-correctionmodechanging)  /  [**Корректионмодечанжед**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-correctionmodechanged)— уведомление о том, что режим исправления скоро изменится или изменился.</span><span class="sxs-lookup"><span data-stu-id="9cd64-270">[**CorrectionModeChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-correctionmodechanging) / [**CorrectionModeChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-correctionmodechanged)– Notification that the correction mode is about to change or has changed.</span></span> <span data-ttu-id="9cd64-271">Возможны следующие режимы исправления: невидимые, предварительные вставки, после вставки и развернутые после вставки.</span><span class="sxs-lookup"><span data-stu-id="9cd64-271">Possible correction modes are: not visible, Pre-Insertion, Post-Insertion collapsed, and Post-Insertion expanded.</span></span> <span data-ttu-id="9cd64-272">Параметры — это новый и старый режим исправления.</span><span class="sxs-lookup"><span data-stu-id="9cd64-272">Parameters are the new and old correction mode.</span></span> <span data-ttu-id="9cd64-273">Совпадает с изменением значения свойства [**курренткорректионмоде**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentcorrectionmode) .</span><span class="sxs-lookup"><span data-stu-id="9cd64-273">Coincides with a change in the value of the [**CurrentCorrectionMode**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentcorrectionmode) property.</span></span>
-   <span data-ttu-id="9cd64-274">[**Инплацевисибилитичангинг**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanging)  /  [**Инплацевисибилитичанжед**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanged)— указывает, когда видимость панели ввода In-Place будет изменена или изменилась.</span><span class="sxs-lookup"><span data-stu-id="9cd64-274">[**InPlaceVisibilityChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanging) / [**InPlaceVisibilityChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanged)– Indicates when the In-Place Input Panel visibility is about to change or has changed.</span></span> <span data-ttu-id="9cd64-275">Параметры — это новая и старая видимость.</span><span class="sxs-lookup"><span data-stu-id="9cd64-275">Parameters are the new and old visibility.</span></span> <span data-ttu-id="9cd64-276">Новая видимость **false** означает, что In-Place панель ввода не открыта, но не препятствует отображению панели ввода в режиме взаимодействия с плавающей или закрепленной.</span><span class="sxs-lookup"><span data-stu-id="9cd64-276">A new visibility of **false** means the In-Place Input Panel is not open, but does not preclude Input Panel being visible in the Floating or Docked interaction mode.</span></span>
-   <span data-ttu-id="9cd64-277">[**Текстинсертинг**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserting)  /  [**Текстинсертед**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserted)— указывает, когда текст будет вставлен или вставлен из панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-277">[**TextInserting**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserting) / [**TextInserted**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserted)– Indicates when text is about to be inserted or has been inserted from Input Panel.</span></span> <span data-ttu-id="9cd64-278">Параметр — это массив объектов [**инкдисп**](inkdisp-class.md) , каждый из которых содержит строку рукописных данных и текста, составляющих вставку.</span><span class="sxs-lookup"><span data-stu-id="9cd64-278">Parameter is an array of [**InkDisp**](inkdisp-class.md) objects, each containing a line of the ink and text that make up the insertion.</span></span> <span data-ttu-id="9cd64-279">Дополнительные сведения об этом событии см. в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="9cd64-279">More on this event in the next section.</span></span>

<span data-ttu-id="9cd64-280">Эти события предоставляют приложениям важнейшую информацию об изменениях на панели ввода и позволяют им реагировать соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="9cd64-280">These events provide applications with essential information about changes in Input Panel and allow them to react accordingly.</span></span> <span data-ttu-id="9cd64-281">Опять же, изменение в модели событий панели ввода представляет собой шаг к более эффективному взаимодействию между приложениями и панелью ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-281">Again the change in the Input Panel event model represents a step toward better interaction between applications and Input Panel.</span></span>

## <a name="support-for-collecting-the-ink-and-text-entered-in-input-panel"></a><span data-ttu-id="9cd64-282">Поддержка для сбора рукописного ввода и текста, введенного на панели ввода</span><span class="sxs-lookup"><span data-stu-id="9cd64-282">Support for Collecting the Ink and Text Entered in Input Panel</span></span>

<span data-ttu-id="9cd64-283">Последнее, безусловно, некоторая, по крайней мере, одна очень мощная новая функция объекта [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) — возможность получения объекта рукописного ввода для текста, введенного с помощью панели ввода, за пределами панели ввода во время вставки текста в приложение.</span><span class="sxs-lookup"><span data-stu-id="9cd64-283">Last but certainly not least, one very powerful new feature of the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object is the ability to get the ink object for text entered via Input Panel out of Input Panel at the time the text is inserted into an application.</span></span> <span data-ttu-id="9cd64-284">Эта функция часто была запрошена в целях отслеживания изменений и сохранения записей.</span><span class="sxs-lookup"><span data-stu-id="9cd64-284">This has been an often requested feature for the purpose of change tracking and record keeping.</span></span> <span data-ttu-id="9cd64-285">Это также позволяет приложениям использовать рукописный ввод в пользовательском интерфейсе как статический элемент или с пользовательской поверхностью рукописного ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-285">It also allows applications to make use of the ink in their UI either as a static element or with a custom inking surface.</span></span>

<span data-ttu-id="9cd64-286">Чтобы получить объект [**инкдисп**](inkdisp-class.md) для текста, введенного через панель ввода, приложение должно зарегистрироваться для получения событий [**текстинсертинг**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserting) или [**текстинсертед**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserted) , созданных объектом [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) .</span><span class="sxs-lookup"><span data-stu-id="9cd64-286">In order to receive the [**InkDisp**](inkdisp-class.md) object for text entered via Input Panel, an application must register to receive the [**TextInserting**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserting) or [**TextInserted**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserted) events generated by the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object.</span></span> <span data-ttu-id="9cd64-287">Событие **текстинсертинг** срабатывает непосредственно перед вставкой текста из панели ввода в приложение, и текст не вставляется до тех пор, пока все обработчики событий не будут завершены.</span><span class="sxs-lookup"><span data-stu-id="9cd64-287">The **TextInserting** event is fired immediately before text is inserted from Input Panel into an application and the text does not insert until all event handlers complete.</span></span> <span data-ttu-id="9cd64-288">Событие **текстинсертед** срабатывает сразу после вставки теста.</span><span class="sxs-lookup"><span data-stu-id="9cd64-288">The **TextInserted** event fires immediately after test is inserted.</span></span> <span data-ttu-id="9cd64-289">Единственным параметром для события **текстинсертинг** и **текстинсертед** является массив объектов **инкдисп** , который включает один объект **инкдисп** для каждой строки текста, вставленной из панели ввода.</span><span class="sxs-lookup"><span data-stu-id="9cd64-289">The only parameter for both the **TextInserting** and **TextInserted** event is an array of **InkDisp** objects which includes one **InkDisp** object for each line of text inserted from Input Panel.</span></span> <span data-ttu-id="9cd64-290">Примечание. панель ввода неактивна, пока обработчики событий выполняются и могут казаться недоступными для пользователя, поэтому важно сделать эти обработчики событий очень весомыми и обеспечить их быстрое выполнение.</span><span class="sxs-lookup"><span data-stu-id="9cd64-290">Note: Input Panel is inactive while the event handlers are running and may appear hung to the user, therefore it is important to make these event handlers light weight and make sure they execute quickly.</span></span> <span data-ttu-id="9cd64-291">Кроме того, приложение не должно создавать обработчик для этого события, если только он не имеет определенного использования для информации, так как это связано с затратами на производительность.</span><span class="sxs-lookup"><span data-stu-id="9cd64-291">Additionally, an application should not create a handler for this event unless it has a specific use for the information since there is a performance cost associated with doing so.</span></span> <span data-ttu-id="9cd64-292">Панель ввода маршалирует данные рукописного ввода только в том случае, если приложение запрашивает данные, в противном случае панель ввода может пропустить эту дорогостоящую операцию.</span><span class="sxs-lookup"><span data-stu-id="9cd64-292">Input Panel only marshals the ink data if there is an application requesting the data, otherwise, Input Panel can skip this costly operation.</span></span> <span data-ttu-id="9cd64-293">Параметры событий **текстинсертинг** и **текстинсертед** доступны только для чтения. Это означает, что в приложениях невозможно изменить вставленный текст перед вставкой в приложение.</span><span class="sxs-lookup"><span data-stu-id="9cd64-293">The parameters of both the **TextInserting** and **TextInserted** events are read-only, meaning it is not possible for applications to change inserted text before it is inserted into the application.</span></span>

<span data-ttu-id="9cd64-294">Возможности, которые могут сделать приложения с этой новой функциональностью, являются широкими и не могут быть более простыми в использовании.</span><span class="sxs-lookup"><span data-stu-id="9cd64-294">The possibilities for what applications can do with this new functionality are broad and it could not be simpler to use.</span></span> <span data-ttu-id="9cd64-295">Разрешение распознавания текста и рукописного ввода, введенного с помощью панели ввода, для сбора приложений — это просто другой способ улучшения функциональности разработчика панели ввода в Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="9cd64-295">Allow recognized text and ink entered via Input Panel to be collected by applications is just another way Input Panel's developer story is improved in Windows Vista.</span></span>

## <a name="conclusion"></a><span data-ttu-id="9cd64-296">Заключение</span><span class="sxs-lookup"><span data-stu-id="9cd64-296">Conclusion</span></span>

<span data-ttu-id="9cd64-297">В целом, история программирования для панели ввода Tablet PC значительно улучшилась с введением объекта [**текстинпутпанел**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) в Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="9cd64-297">Overall, the programmability story for the Tablet PC Input Panel is greatly improved with the introduction of the [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) object in Windows Vista.</span></span> <span data-ttu-id="9cd64-298">С помощью объекта **текстинпутпанел** разработчики приложений имеют больший контроль и дополнительные сведения о панели ввода состояния в предыдущем выпуске.</span><span class="sxs-lookup"><span data-stu-id="9cd64-298">By using the **TextInputPanel** object, application developers have greater control and more information about the state Input Panel in previous release.</span></span> <span data-ttu-id="9cd64-299">В результате разработчики приложений, создающие новые приложения для планшетных ПК или обновляя существующие приложения, настоятельно рекомендуют использовать объект **текстинпутпанел** вместо устаревшего объекта [**пенинпутпанел**](peninputpanel-class.md) .</span><span class="sxs-lookup"><span data-stu-id="9cd64-299">As a result application developers building new Tablet PC applications or updating existing applications are strongly encouraged to use the **TextInputPanel** object instead of the now deprecated [**PenInputPanel**](peninputpanel-class.md) object.</span></span> <span data-ttu-id="9cd64-300">Кроме того, поддержка новых функций, таких как абсолютное позиционирование панели ввода и значка панели ввода, а также способность приложения принимать текст распознавателя и рукописный ввод, введенные с помощью панели ввода, обеспечивают новые функциональные возможности приложения и сценарии.</span><span class="sxs-lookup"><span data-stu-id="9cd64-300">Additionally, support for new features such as absolute positioning of Input Panel and the Input Panel icon, and the ability for application to receive both recognizer text and ink entered via Input Panel enable new application functionality and scenarios.</span></span> <span data-ttu-id="9cd64-301">Включение этих функций и несколько других пользователей в прямой ответ на Отзывы разработчиков и помечают первые шаги для полной интеграции панели ввода с приложениями для планшетных ПК.</span><span class="sxs-lookup"><span data-stu-id="9cd64-301">The inclusion of these features and several others are in direct response to developer feedback and mark the first steps toward full integration of Input Panel with Tablet PC applications.</span></span> <span data-ttu-id="9cd64-302">В конечном итоге, расширение функциональности приложений для планшетных ПК — это большой выигрыш как для разработчиков приложений, так и для платформы Tablet PC.</span><span class="sxs-lookup"><span data-stu-id="9cd64-302">Ultimately, expanding the Tablet PC application functionality is a big win for both application developers and the Tablet PC platform.</span></span>

 

 



