---
description: Подключаемый модуль динамического рендеринга — это объект, который отображает данные пера планшета в режиме реального времени по мере его обработки объектом RealTimeStylus.
ms.assetid: ac6d15f3-0917-4cc1-8c83-e34d3d063289
title: Подключаемые модули Dynamic-Renderer
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 11c3f1a33c3cd7faef2e899bcb198ea64aa5bd76
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104551866"
---
# <a name="dynamic-renderer-plug-ins"></a><span data-ttu-id="b06b0-103">Подключаемые модули Dynamic-Renderer</span><span class="sxs-lookup"><span data-stu-id="b06b0-103">Dynamic-Renderer Plug-ins</span></span>

<span data-ttu-id="b06b0-104">Подключаемый модуль динамического рендеринга — это объект, который отображает данные пера планшета в режиме реального времени по мере его обработки объектом [**RealTimeStylus**](realtimestylus-class.md) .</span><span class="sxs-lookup"><span data-stu-id="b06b0-104">A dynamic-renderer plug-in is an object that displays the tablet pen data in real-time as it is being handled by the [**RealTimeStylus**](realtimestylus-class.md) object.</span></span> <span data-ttu-id="b06b0-105">В дальнейшем для таких событий, как обновление формы, подключаемый модуль динамического рендеринга или подключаемый модуль сборщика рукописных данных может перерисовывать рукописный ввод.</span><span class="sxs-lookup"><span data-stu-id="b06b0-105">Later, for events such as a form refresh, the dynamic-renderer plug-in or an ink-collector plug-in may redraw the ink.</span></span>

## <a name="the-dynamicrenderer-object"></a><span data-ttu-id="b06b0-106">Объект DynamicRenderer</span><span class="sxs-lookup"><span data-stu-id="b06b0-106">The DynamicRenderer Object</span></span>

<span data-ttu-id="b06b0-107">Объект [**RealTimeStylus**](realtimestylus-class.md) реализует интерфейс [**истилуссинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) .</span><span class="sxs-lookup"><span data-stu-id="b06b0-107">The [**RealTimeStylus**](realtimestylus-class.md) object implements the [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) interface.</span></span> <span data-ttu-id="b06b0-108">Объект [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) визуализирует рукописный ввод в режиме реального времени по мере его прорисовки.</span><span class="sxs-lookup"><span data-stu-id="b06b0-108">The [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) object renders the ink in real-time, as it is being drawn.</span></span> <span data-ttu-id="b06b0-109">Когда метод [**Refresh**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-refresh) вызывается, когда включен объект **DynamicRenderer** , объект **DynamicRenderer** перерисовывает собранный в данный момент росчерк.</span><span class="sxs-lookup"><span data-stu-id="b06b0-109">When the [**Refresh**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-refresh) method is called while the **DynamicRenderer** object is enabled, the **DynamicRenderer** object redraws the stroke currently being collected.</span></span> <span data-ttu-id="b06b0-110">Свойство [**Enabled**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-get_enabled) объекта **DynamicRenderer** изначально имеет значение **false**.</span><span class="sxs-lookup"><span data-stu-id="b06b0-110">The **DynamicRenderer** object's [**Enabled**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-get_enabled) property is initially set to **FALSE**.</span></span>

> [!Note]  
> <span data-ttu-id="b06b0-111">При вызове метода [**Refresh**](/previous-versions/ms826370(v=msdn.10)) объекта [**DynamicRenderer**](/previous-versions/ms826345(v=msdn.10)) из обработчика событий [Paint](/dotnet/api/system.windows.forms.control.paint?view=netcore-3.1) в управляемом коде установите свойство [**Клипректангле**](/previous-versions/ms826346(v=msdn.10)) объекта **DynamicRenderer** в свойство [клипректангле](/dotnet/api/system.windows.forms.painteventargs.cliprectangle?view=netcore-3.1) объекта [PaintEventArgs](/dotnet/api/system.windows.forms.painteventargs?view=netcore-3.1) .</span><span class="sxs-lookup"><span data-stu-id="b06b0-111">When calling the [**DynamicRenderer**](/previous-versions/ms826345(v=msdn.10)) object's [**Refresh**](/previous-versions/ms826370(v=msdn.10)) method from within a [Paint](/dotnet/api/system.windows.forms.control.paint?view=netcore-3.1) event handler in managed code, set the **DynamicRenderer** object's [**ClipRectangle**](/previous-versions/ms826346(v=msdn.10)) property to the [PaintEventArgs](/dotnet/api/system.windows.forms.painteventargs?view=netcore-3.1) object's [ClipRectangle](/dotnet/api/system.windows.forms.painteventargs.cliprectangle?view=netcore-3.1) property.</span></span>

 

<span data-ttu-id="b06b0-112">Объект [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) может временно кэшировать данные рукописного ввода.</span><span class="sxs-lookup"><span data-stu-id="b06b0-112">The [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) object can temporarily cache ink data.</span></span> <span data-ttu-id="b06b0-113">Чтобы использовать эту функцию в управляемом коде, установите для свойства [енабледатакаче](/previous-versions/ms826349(v=msdn.10)) значение **true**.</span><span class="sxs-lookup"><span data-stu-id="b06b0-113">To use this feature in managed code, set the [EnableDataCache](/previous-versions/ms826349(v=msdn.10)) property to **TRUE**.</span></span> <span data-ttu-id="b06b0-114">Когда объект [**DynamicRenderer**](/previous-versions/ms826345(v=msdn.10)) получает вызов своего метода [**истилуссинкплугин. стилусуп**](/previous-versions/ms826366(v=msdn.10)) , он кэширует данные Stroke и добавляет пользовательские данные пера во входную очередь в ответ на объект [**стилусупдата**](/previous-versions/ms824057(v=msdn.10)) для штриха.</span><span class="sxs-lookup"><span data-stu-id="b06b0-114">When the [**DynamicRenderer**](/previous-versions/ms826345(v=msdn.10)) object receives a call to its [**IStylusSyncPlugin.StylusUp**](/previous-versions/ms826366(v=msdn.10)) method, it caches the stroke data and adds custom stylus data to the Input queue in response to the [**StylusUpData**](/previous-versions/ms824057(v=msdn.10)) object for the stroke.</span></span> <span data-ttu-id="b06b0-115">Свойству [кустомдатаид](/previous-versions/ms824749(v=msdn.10)) объекта [**кустомстилусдата**](/previous-versions/ms824747(v=msdn.10)) присвоено значение [динамикрендереркачеддатагуид](/previous-versions/ms824744(v=msdn.10)) , а свойство данных объекта **кустомстилусдата** содержит объект динамикрендереркачеддата.</span><span class="sxs-lookup"><span data-stu-id="b06b0-115">The [**CustomStylusData**](/previous-versions/ms824747(v=msdn.10)) object's [CustomDataId](/previous-versions/ms824749(v=msdn.10)) property is set to the [DynamicRendererCachedDataGuid](/previous-versions/ms824744(v=msdn.10)) value, and the **CustomStylusData** object's Data property contains a DynamicRendererCachedData object.</span></span> <span data-ttu-id="b06b0-116">Вызовите метод [релеасекачеддата](/previous-versions/ms826371(v=msdn.10)) объекта **DynamicRenderer** после сбора штриха и его отображения в статическом виде.</span><span class="sxs-lookup"><span data-stu-id="b06b0-116">Call the **DynamicRenderer** object's [ReleaseCachedData](/previous-versions/ms826371(v=msdn.10)) method once the stroke has been collected and can be statically rendered.</span></span> <span data-ttu-id="b06b0-117">При вызове метода [**Refresh**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-refresh) , когда включен объект **DynamicRenderer** , объект **DynamicRenderer** перерисовывает все росчерки, которые кэшируются.</span><span class="sxs-lookup"><span data-stu-id="b06b0-117">When the [**Refresh**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-refresh) method is called while the **DynamicRenderer** object is enabled, the **DynamicRenderer** object redraws all strokes that are cached.</span></span> <span data-ttu-id="b06b0-118">Если свойство [**датакачинаблед**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-get_datacacheenabled) имеет значение **false**, кэшированные данные Stroke удаляются.</span><span class="sxs-lookup"><span data-stu-id="b06b0-118">When the [**DataCacheEnabled**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-get_datacacheenabled) property is set to **false**, the cached stroke data is deleted.</span></span>

<span data-ttu-id="b06b0-119">На следующей схеме показано, как объект [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) добавляет данные в данные пера планшета, когда задано свойство [**датакачинаблед**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-get_datacacheenabled) объекта **DynamicRenderer** .</span><span class="sxs-lookup"><span data-stu-id="b06b0-119">The following diagram illustrates how the [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) object adds data to the tablet pen data when the **DynamicRenderer** object's [**DataCacheEnabled**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-get_datacacheenabled) property is set.</span></span>

![Иллюстрация, демонстрирующая поток данных DynamicRenderer](images/75f4ee7b-160c-410e-bfae-dfc676a9829c.gif)

<span data-ttu-id="b06b0-121">На этой схеме круг с буквой "SD" представляет объект [**стилусдовн**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-stylusdown) , а круг букв "P" — объекты [**пакетов**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-packets) , которые уже добавлены в очередь вывода объекта [**RealTimeStylus**](realtimestylus-class.md) и которые еще не были отправлены в асинхронную коллекцию подключаемых модулей.</span><span class="sxs-lookup"><span data-stu-id="b06b0-121">In this diagram the circle lettered "SD" represents a [**StylusDown**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-stylusdown) object and the circles lettered "P" represent [**Packets**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-packets) objects that have already been added to the [**RealTimeStylus**](realtimestylus-class.md) object's output queue and that have not yet been sent to the asynchronous plug-in collection.</span></span> <span data-ttu-id="b06b0-122">Кружок с буквой "SU" представляет объект [**стилусуп**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-stylusup) , который в настоящее время обрабатывается объектом **RealTimeStylus** .</span><span class="sxs-lookup"><span data-stu-id="b06b0-122">The circle lettered "SU" represents a [**StylusUp**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-stylusup) object that the **RealTimeStylus** object is currently processing.</span></span> <span data-ttu-id="b06b0-123">Он отправляется в коллекцию синхронных подключаемых модулей, а затем помещается в очередь вывода.</span><span class="sxs-lookup"><span data-stu-id="b06b0-123">It is sent to the synchronous plug-in collection and then placed on the output queue.</span></span> <span data-ttu-id="b06b0-124">Круги с буквами "DR" представляют пользовательские данные пера, которые добавляются во входную очередь подключаемым модулем [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) в ответ на уведомление о создании пера, связанное с "su".</span><span class="sxs-lookup"><span data-stu-id="b06b0-124">The circles lettered "DR" represent custom stylus data that is added to the input queue by the [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) plug-in in response to the stylus up notification associated with "SU".</span></span> <span data-ttu-id="b06b0-125">Пользовательское перо с буквой «DR» затем передается в синхронные подключаемые модули, а затем в очередь вывода до обработки следующих данных пера планшета.</span><span class="sxs-lookup"><span data-stu-id="b06b0-125">The custom stylus data lettered "DR" is then passed to the synchronous plug-ins and then to the output queue before the next tablet pen data is processed.</span></span> <span data-ttu-id="b06b0-126">Пустой кружок представляет позицию в очереди вывода, в которой добавляются будущие данные пера планшета.</span><span class="sxs-lookup"><span data-stu-id="b06b0-126">The empty circle represents the position in the output queue where future tablet pen data is added.</span></span> <span data-ttu-id="b06b0-127">Кроме того, на схеме представлен подключаемый модуль, вызывающий метод [**релеасекачеддата**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-releasecacheddata) объекта **DynamicRenderer** для освобождения кэшированных данных Stroke после того, как подключаемый модуль коллекции рукописного ввода обработал штрих.</span><span class="sxs-lookup"><span data-stu-id="b06b0-127">Also represented on the diagram is the ink-collector plug-in calling the **DynamicRenderer** object's [**ReleaseCachedData**](/windows/desktop/api/RTSCom/nf-rtscom-idynamicrenderer-releasecacheddata) method to release the cached stroke data after the ink-collection plug-in has processed the stroke.</span></span>

### <a name="special-considerations"></a><span data-ttu-id="b06b0-128">Особые рекомендации</span><span class="sxs-lookup"><span data-stu-id="b06b0-128">Special Considerations</span></span>

<span data-ttu-id="b06b0-129">В следующем списке приводятся другие моменты, которые следует учитывать при использовании объекта [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="b06b0-129">The following list describes other points to take into consideration when using the [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) object.</span></span>

-   <span data-ttu-id="b06b0-130">Не следует присоединять объект [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) к более чем одному объекту [**RealTimeStylus**](realtimestylus-class.md) .</span><span class="sxs-lookup"><span data-stu-id="b06b0-130">You should not attach a [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) object to more than one [**RealTimeStylus**](realtimestylus-class.md) object.</span></span> <span data-ttu-id="b06b0-131">После включения двух объектов **RealTimeStylus** , к которым присоединен объект **DynamicRenderer** , происходит следующее.</span><span class="sxs-lookup"><span data-stu-id="b06b0-131">Once two **RealTimeStylus** objects to which the **DynamicRenderer** object is attached are enabled, the following occurs.</span></span>

    -   <span data-ttu-id="b06b0-132">Объект [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) создает исключение в ответ на второй вызов его метода [**реалтиместилусенаблед**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusenabled) .</span><span class="sxs-lookup"><span data-stu-id="b06b0-132">The [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) object throws an exception in response to the second call to its [**RealTimeStylusEnabled**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-realtimestylusenabled) method.</span></span>
    -   <span data-ttu-id="b06b0-133">Второй объект [**RealTimeStylus**](realtimestylus-class.md) , который был включен, создает объект [**Error**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-error) и уведомляет остальные подключаемые модули в своих коллекциях подключаемых модулей ошибки.</span><span class="sxs-lookup"><span data-stu-id="b06b0-133">The second [**RealTimeStylus**](realtimestylus-class.md) object that was enabled generates an [**Error**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-error) object and notifies the remaining plug-ins in its plug-in collections of the error.</span></span>
    -   <span data-ttu-id="b06b0-134">Объект [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) останавливает отрисовку данных пера планшета.</span><span class="sxs-lookup"><span data-stu-id="b06b0-134">The [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) object stops rendering tablet pen data.</span></span>

-   <span data-ttu-id="b06b0-135">Объект [**RealTimeStylus**](realtimestylus-class.md) создает исключение при вызове метода [**аддкустомстилусдататокуеуе**](/windows/desktop/api/RTSCom/nf-rtscom-irealtimestylus-addcustomstylusdatatoqueue) с параметром *GUID* , равным глобальному уникальному идентификатору (GUID) динамикрендереркачеддатагуид.</span><span class="sxs-lookup"><span data-stu-id="b06b0-135">The [**RealTimeStylus**](realtimestylus-class.md) object throws an exception when its [**AddCustomStylusDataToQueue**](/windows/desktop/api/RTSCom/nf-rtscom-irealtimestylus-addcustomstylusdatatoqueue) method is called with the *guid* parameter set to the DynamicRendererCachedDataGuid globally unique identifier (GUID).</span></span>
-   <span data-ttu-id="b06b0-136">Объект [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) реализуется как оболочка модели COM, и вы не можете напрямую вызывать его методы интерфейса [**истилуссинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) .</span><span class="sxs-lookup"><span data-stu-id="b06b0-136">The [**DynamicRenderer**](/previous-versions/windows/desktop/legacy/ms701168(v=vs.85)) object is implemented as a Component Object Model (COM) wrapper, and you cannot call its [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) interface methods directly.</span></span> <span data-ttu-id="b06b0-137">Дополнительные сведения об операциях COM и объекте [**RealTimeStylus**](realtimestylus-class.md) см. [в разделе Примечания по реализации для API-интерфейсов стилусинпут](implementation-notes-for-the-stylusinput-apis.md).</span><span class="sxs-lookup"><span data-stu-id="b06b0-137">For more information about COM operation and the [**RealTimeStylus**](realtimestylus-class.md) object, see [Implementation Notes for the StylusInput APIs](implementation-notes-for-the-stylusinput-apis.md).</span></span>

## <a name="custom-rendering"></a><span data-ttu-id="b06b0-138">Пользовательская отрисовка</span><span class="sxs-lookup"><span data-stu-id="b06b0-138">Custom Rendering</span></span>

<span data-ttu-id="b06b0-139">Вы можете создать собственный подключаемый модуль динамического рендеринга, создав синхронный подключаемый модуль, который подписывается на уведомления [**стилусдовн**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-stylusdown), [**пакеты**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-packets)и [**стилусуп**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-stylusup) .</span><span class="sxs-lookup"><span data-stu-id="b06b0-139">You can create your own dynamic-renderer plug-in by creating a synchronous plug-in that subscribes to the [**StylusDown**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-stylusdown), [**Packets**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-packets), and [**StylusUp**](/windows/desktop/api/RTSCom/nf-rtscom-istylusplugin-stylusup) notifications.</span></span> <span data-ttu-id="b06b0-140">Подключаемый модуль может затем отображать штрих при его прорисовке.</span><span class="sxs-lookup"><span data-stu-id="b06b0-140">Your plug-in can then render the stroke as it is being drawn.</span></span> <span data-ttu-id="b06b0-141">Это может быть одним из способов реализации инструмента выбора, который использует Выделение произвольной формы или поле выбора, например.</span><span class="sxs-lookup"><span data-stu-id="b06b0-141">This may be one way of implementing a selection tool that uses a free-form selection or selection box, for example.</span></span>

 

 
