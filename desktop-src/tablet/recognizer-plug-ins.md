---
description: Подключаемый модуль распознавателя — это объект, отслеживающий перемещение пера планшета для жестов, рукописного ввода или других объектов.
ms.assetid: 764a327e-1da0-487f-9245-b6a4f3f43502
title: Подключаемые модули распознавателя
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bbf3ac866a211a78e2d8f347e89ca20a1906f436
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104571749"
---
# <a name="recognizer-plug-ins"></a><span data-ttu-id="dbfff-103">Подключаемые модули распознавателя</span><span class="sxs-lookup"><span data-stu-id="dbfff-103">Recognizer Plug-ins</span></span>

<span data-ttu-id="dbfff-104">Подключаемый модуль распознавателя — это объект, отслеживающий перемещение пера планшета для жестов, рукописного ввода или других объектов.</span><span class="sxs-lookup"><span data-stu-id="dbfff-104">A recognizer plug-in is an object that monitors the movement of the tablet pen for gesture, handwriting, or other objects.</span></span>

## <a name="system-gestures"></a><span data-ttu-id="dbfff-105">Системные жесты</span><span class="sxs-lookup"><span data-stu-id="dbfff-105">System Gestures</span></span>

<span data-ttu-id="dbfff-106">Объект [**RealTimeStylus**](realtimestylus-class.md) распознает системные жесты.</span><span class="sxs-lookup"><span data-stu-id="dbfff-106">The [**RealTimeStylus**](realtimestylus-class.md) object recognizes system gestures.</span></span> <span data-ttu-id="dbfff-107">Объект **RealTimeStylus** добавляет объект [Системжестуредата](/previous-versions/ms824019(v=msdn.10)) в очередь [стилускуеуес](/previous-versions/ms824786(v=msdn.10)) в ответ на данные, завершающие жест, например объект [стилусупдата](/previous-versions/ms824057(v=msdn.10)) для [системжестуре](/previous-versions/bb345349(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="dbfff-107">The **RealTimeStylus** object adds a [SystemGestureData](/previous-versions/ms824019(v=msdn.10)) object to the [StylusQueues](/previous-versions/ms824786(v=msdn.10)) queue in response to the data that finishes the gesture, such as a [StylusUpData](/previous-versions/ms824057(v=msdn.10)) object for the [SystemGesture](/previous-versions/bb345349(v=vs.100)).</span></span> <span data-ttu-id="dbfff-108">Дополнительные сведения см. в разделе [подключаемые данные и класс RealTimeStylus](plug-in-data-and-the-realtimestylus-class.md).</span><span class="sxs-lookup"><span data-stu-id="dbfff-108">For more information, see [Plug-in Data and the RealTimeStylus Class](plug-in-data-and-the-realtimestylus-class.md).</span></span>

## <a name="the-gesturerecognizer-object"></a><span data-ttu-id="dbfff-109">Объект GestureRecognizer</span><span class="sxs-lookup"><span data-stu-id="dbfff-109">The GestureRecognizer Object</span></span>

<span data-ttu-id="dbfff-110">Объект [**GestureRecognizer**](gesturerecognizer-class.md) реализует интерфейсы [**истилуссинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) и [**истилусасинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) .</span><span class="sxs-lookup"><span data-stu-id="dbfff-110">The [**GestureRecognizer**](gesturerecognizer-class.md) object implements the [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) and [**IStylusAsyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) interfaces.</span></span> <span data-ttu-id="dbfff-111">Объект **GestureRecognizer** распознает жесты приложения.</span><span class="sxs-lookup"><span data-stu-id="dbfff-111">The **GestureRecognizer** object recognizes application gestures.</span></span> <span data-ttu-id="dbfff-112">На внутреннем уровне объект **GestureRecognizer** использует для распознавания жестов средство распознавания жестов Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="dbfff-112">Internally, the **GestureRecognizer** object uses the Microsoft gesture recognizer to perform gesture recognition.</span></span>

<span data-ttu-id="dbfff-113">Когда объект [**GestureRecognizer**](gesturerecognizer-class.md) распознает жест, он добавляет пользовательские данные пера в очередь [стилускуеуес](/previous-versions/ms824786(v=msdn.10)) в ответ на объект [стилусупдата](/previous-versions/ms824057(v=msdn.10)) для Stroke.</span><span class="sxs-lookup"><span data-stu-id="dbfff-113">When the [**GestureRecognizer**](gesturerecognizer-class.md) object recognizes a gesture, it adds custom stylus data to the [StylusQueues](/previous-versions/ms824786(v=msdn.10)) queue in response to the [StylusUpData](/previous-versions/ms824057(v=msdn.10)) object for the stroke.</span></span> <span data-ttu-id="dbfff-114">Свойству [кустомдатаид](/previous-versions/ms824748(v=msdn.10)) объекта [кустомстилусдата](/previous-versions/ms575208(v=vs.100)) присвоено значение [жестуререкогнитиондатагуид](/previous-versions/ms826344(v=msdn.10)) , а свойство [данных](/previous-versions/ms824749(v=msdn.10)) объекта кустомстилусдата содержит объект [жестуререкогнитиондата](/previous-versions/ms824594(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="dbfff-114">The [CustomStylusData](/previous-versions/ms575208(v=vs.100)) object's [CustomDataId](/previous-versions/ms824748(v=msdn.10)) property is set to the [GestureRecognitionDataGuid](/previous-versions/ms826344(v=msdn.10)) value, and the CustomStylusData object's [Data](/previous-versions/ms824749(v=msdn.10)) property contains a [GestureRecognitionData](/previous-versions/ms824594(v=msdn.10)) object.</span></span>

<span data-ttu-id="dbfff-115">На следующей схеме показано, как объект [**GestureRecognizer**](gesturerecognizer-class.md) добавляет данные в данные пера планшета.</span><span class="sxs-lookup"><span data-stu-id="dbfff-115">The following diagram illustrates how the [**GestureRecognizer**](gesturerecognizer-class.md) object adds data to the tablet pen data.</span></span>

![Иллюстрация потока данных GestureRecognizer](images/c4c77c33-deee-49d0-84bc-12612575ec66.gif)

<span data-ttu-id="dbfff-117">На этой схеме круг с буквой SD представляет объект [стилусдовндата](/previous-versions/ms824107(v=msdn.10)) , а круг с буквой «P» представляют объекты [паккетсдата](/previous-versions/ms824590(v=msdn.10)) , которые уже были добавлены в очередь вывода объекта [**RealTimeStylus**](realtimestylus-class.md) и еще не были отправлены в асинхронную коллекцию подключаемых модулей.</span><span class="sxs-lookup"><span data-stu-id="dbfff-117">In this diagram the circle lettered "SD" represents a [StylusDownData](/previous-versions/ms824107(v=msdn.10)) object and the circles lettered "P" represent [PacketsData](/previous-versions/ms824590(v=msdn.10)) objects that have already been added to the [**RealTimeStylus**](realtimestylus-class.md) object's output queue and that have not yet been sent to the asynchronous plug-in collection.</span></span> <span data-ttu-id="dbfff-118">Кружок с буквой "SU" представляет объект [стилусупдата](/previous-versions/ms824057(v=msdn.10)) , который в настоящее время обрабатывается объектом **RealTimeStylus** .</span><span class="sxs-lookup"><span data-stu-id="dbfff-118">The circle lettered "SU" represents a [StylusUpData](/previous-versions/ms824057(v=msdn.10)) object that the **RealTimeStylus** object is currently processing.</span></span> <span data-ttu-id="dbfff-119">Он отправляется в коллекцию синхронных подключаемых модулей, а затем помещается в очередь вывода.</span><span class="sxs-lookup"><span data-stu-id="dbfff-119">It is sent to the synchronous plug-in collection and then placed on the output queue.</span></span> <span data-ttu-id="dbfff-120">Круговая буква «GR» представляет пользовательские данные пера, которые добавляются во входную очередь подключаемым модулем [**GestureRecognizer**](gesturerecognizer-class.md) в ответ на уведомление о создании пера, связанное с «SU».</span><span class="sxs-lookup"><span data-stu-id="dbfff-120">The circles lettered "GR" represent custom stylus data that is added to the input queue by the [**GestureRecognizer**](gesturerecognizer-class.md) plug-in in response to the stylus up notification associated with "SU".</span></span> <span data-ttu-id="dbfff-121">Пользовательское перо с буквой GR затем передается в синхронные подключаемые модули, а затем в выходную очередь до обработки следующих данных пера планшета.</span><span class="sxs-lookup"><span data-stu-id="dbfff-121">The custom stylus data lettered "GR" is then passed to the synchronous plug-ins and then to the output queue before the next tablet pen data is processed.</span></span> <span data-ttu-id="dbfff-122">Пустой кружок представляет позицию в очереди вывода, в которой добавляются будущие данные пера планшета.</span><span class="sxs-lookup"><span data-stu-id="dbfff-122">The empty circle represents the position in the output queue where future tablet pen data is added.</span></span>

<span data-ttu-id="dbfff-123">По умолчанию объект [**GestureRecognizer**](gesturerecognizer-class.md) распознает только жесты с одним росчерком; Однако объект **GestureRecognizer** можно задать для распознавания жестов с обводкой.</span><span class="sxs-lookup"><span data-stu-id="dbfff-123">By default, the [**GestureRecognizer**](gesturerecognizer-class.md) object recognizes only single-stroke gestures; however, the **GestureRecognizer** object can be set to recognize multistroke gestures.</span></span> <span data-ttu-id="dbfff-124">Для жестов многоштриха объект [кустомстилусдата](/previous-versions/ms575208(v=vs.100)) добавляется в очередь [стилускуеуес](/previous-versions/ms824786(v=msdn.10)) в ответ на объект [стилусупдата](/previous-versions/ms824057(v=msdn.10)) для завершающего росчерка жеста.</span><span class="sxs-lookup"><span data-stu-id="dbfff-124">For multistroke gestures, the [CustomStylusData](/previous-versions/ms575208(v=vs.100)) object is added to the [StylusQueues](/previous-versions/ms824786(v=msdn.10)) queue in response to the [StylusUpData](/previous-versions/ms824057(v=msdn.10)) object for the final stroke of the gesture.</span></span> <span data-ttu-id="dbfff-125">При распознавании жестов с обводкой вы можете получать уведомления для перекрывающихся наборов штрихов.</span><span class="sxs-lookup"><span data-stu-id="dbfff-125">When recognizing multistroke gestures, you may receive notifications for overlapping sets of strokes.</span></span> <span data-ttu-id="dbfff-126">Например, первый и второй штрихи могут располагаться как один жест, а второй росчерк сам по себе может быть распознан как жест.</span><span class="sxs-lookup"><span data-stu-id="dbfff-126">For example, the first and second strokes together may be recognized as one gesture and the second stroke by itself may be recognized as a gesture.</span></span> <span data-ttu-id="dbfff-127">Дополнительные сведения о распознавании жестов для нескольких штрихов см. в разделе класс **GestureRecognizer** и свойство [максстрокекаунт](/previous-versions/ms826053(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="dbfff-127">For more information about multistroke gesture recognition, see the **GestureRecognizer** class and the [MaxStrokeCount](/previous-versions/ms826053(v=msdn.10)) property.</span></span>

<span data-ttu-id="dbfff-128">Если вы используете объект [**GestureRecognizer**](gesturerecognizer-class.md) для распознавания жестов с помощью функции многоштриха, можно достичь оптимальной производительности, используя каскадную модель [**RealTimeStylus**](realtimestylus-class.md) и присоединив объект **GestureRecognizer** к дополнительному объекту **RealTimeStylus** .</span><span class="sxs-lookup"><span data-stu-id="dbfff-128">If you are using the [**GestureRecognizer**](gesturerecognizer-class.md) object for multistroke gesture recognition, you may achieve optimal performance by using a cascaded [**RealTimeStylus**](realtimestylus-class.md) model and attaching the **GestureRecognizer** object to the secondary **RealTimeStylus** object.</span></span> <span data-ttu-id="dbfff-129">Дополнительные сведения о каскадной модели **RealTimeStylus** см. в статье [каскадная модель RealTimeStylus](the-cascaded-realtimestylus-model.md).</span><span class="sxs-lookup"><span data-stu-id="dbfff-129">For more information about the cascading **RealTimeStylus** model, see [The Cascaded RealTimeStylus Model](the-cascaded-realtimestylus-model.md).</span></span>

### <a name="special-considerations"></a><span data-ttu-id="dbfff-130">Особые рекомендации</span><span class="sxs-lookup"><span data-stu-id="dbfff-130">Special Considerations</span></span>

<span data-ttu-id="dbfff-131">В следующем списке приводятся другие моменты, которые следует учитывать при использовании объекта [**GestureRecognizer**](gesturerecognizer-class.md) .</span><span class="sxs-lookup"><span data-stu-id="dbfff-131">The following list describes other points to take into consideration when using the [**GestureRecognizer**](gesturerecognizer-class.md) object.</span></span>

-   <span data-ttu-id="dbfff-132">Не следует присоединять объект [**GestureRecognizer**](gesturerecognizer-class.md) к более чем одному объекту [**RealTimeStylus**](realtimestylus-class.md) .</span><span class="sxs-lookup"><span data-stu-id="dbfff-132">You should not attach a [**GestureRecognizer**](gesturerecognizer-class.md) object to more than one [**RealTimeStylus**](realtimestylus-class.md) object.</span></span> <span data-ttu-id="dbfff-133">После включения двух объектов **RealTimeStylus** , к которым присоединен объект **GestureRecognizer** , происходит следующее.</span><span class="sxs-lookup"><span data-stu-id="dbfff-133">Once two **RealTimeStylus** objects to which the **GestureRecognizer** object is attached are enabled, the following occurs.</span></span>
    -   <span data-ttu-id="dbfff-134">Объект [**GestureRecognizer**](gesturerecognizer-class.md) создает исключение в ответ на второй вызов его метода реалтиместилусенаблед.</span><span class="sxs-lookup"><span data-stu-id="dbfff-134">The [**GestureRecognizer**](gesturerecognizer-class.md) object throws an exception in response to the second call to its RealTimeStylusEnabled method.</span></span>
    -   <span data-ttu-id="dbfff-135">Второй объект [**RealTimeStylus**](realtimestylus-class.md) , который был включен, создает объект [ErrorData](/previous-versions/ms824740(v=msdn.10)) и уведомляет остальные подключаемые модули в своих коллекциях подключаемых модулей ошибки.</span><span class="sxs-lookup"><span data-stu-id="dbfff-135">The second [**RealTimeStylus**](realtimestylus-class.md) object that was enabled generates a [ErrorData](/previous-versions/ms824740(v=msdn.10)) object and notifies the remaining plug-ins in its plug-in collections of the error.</span></span>
    -   <span data-ttu-id="dbfff-136">Объект [**GestureRecognizer**](gesturerecognizer-class.md) прекращает распознавание жестов.</span><span class="sxs-lookup"><span data-stu-id="dbfff-136">The [**GestureRecognizer**](gesturerecognizer-class.md) object stops recognizing gestures.</span></span>
-   <span data-ttu-id="dbfff-137">Объект [**RealTimeStylus**](realtimestylus-class.md) создает исключение при вызове метода [аддкустомстилусдататокуеуе](/previous-versions/ms825761(v=msdn.10)) с параметром *GUID* , для которого задано значение глобального уникального идентификатора [Microsoft. стилусинпут. GestureRecognizer. жестуререкогнитиондатагуид](/previous-versions/ms826344(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="dbfff-137">The [**RealTimeStylus**](realtimestylus-class.md) object throws an exception when its [AddCustomStylusDataToQueue](/previous-versions/ms825761(v=msdn.10)) method is called with the *guid* parameter set to the [Microsoft.StylusInput.GestureRecognizer.GestureRecognitionDataGuid](/previous-versions/ms826344(v=msdn.10)) globally unique identifier (GUID).</span></span>
-   <span data-ttu-id="dbfff-138">Объект [**GestureRecognizer**](gesturerecognizer-class.md) реализуется как оболочка модели COM, и вы не можете напрямую вызывать методы интерфейса [**истилуссинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) или [**истилусасинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) .</span><span class="sxs-lookup"><span data-stu-id="dbfff-138">The [**GestureRecognizer**](gesturerecognizer-class.md) object is implemented as a Component Object Model (COM) wrapper, and you cannot call its [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) or [**IStylusAsyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) interface methods directly.</span></span> <span data-ttu-id="dbfff-139">Дополнительные сведения о реализации COM и объекте [**RealTimeStylus**](realtimestylus-class.md) см. в разделе [Примечания по реализации для API-интерфейсов стилусинпут](implementation-notes-for-the-stylusinput-apis.md).</span><span class="sxs-lookup"><span data-stu-id="dbfff-139">For more information about COM implementation and the [**RealTimeStylus**](realtimestylus-class.md) object, see [Implementation Notes for the StylusInput APIs](implementation-notes-for-the-stylusinput-apis.md).</span></span>

## <a name="custom-gesture-recognition"></a><span data-ttu-id="dbfff-140">Распознавание пользовательских жестов</span><span class="sxs-lookup"><span data-stu-id="dbfff-140">Custom Gesture Recognition</span></span>

<span data-ttu-id="dbfff-141">Вы можете создать настраиваемый подключаемый модуль распознавателя, распознающий рукописный ввод, жесты или другие объекты:</span><span class="sxs-lookup"><span data-stu-id="dbfff-141">You can create a custom recognizer plug-in that recognizes handwriting, gestures, or other objects by:</span></span>

-   <span data-ttu-id="dbfff-142">Передача сведений о штрихах в существующий объект [распознавателя](/previous-versions/ms829434(v=msdn.10)) и использование метода [аддкустомстилусдататокуеуе](/previous-versions/ms825761(v=msdn.10)) для добавления результатов в поток данных пера планшета.</span><span class="sxs-lookup"><span data-stu-id="dbfff-142">Passing the stroke information to an existing [Recognizer](/previous-versions/ms829434(v=msdn.10)) object and using the [AddCustomStylusDataToQueue](/previous-versions/ms825761(v=msdn.10)) method to add the results to the tablet pen data stream.</span></span>
-   <span data-ttu-id="dbfff-143">Выполнение распознавания в подключаемом модуле и использование метода [аддкустомстилусдататокуеуе](/previous-versions/ms825761(v=msdn.10)) для добавления результатов в поток данных пера планшета.</span><span class="sxs-lookup"><span data-stu-id="dbfff-143">Performing the recognition within your plug-in and using the [AddCustomStylusDataToQueue](/previous-versions/ms825761(v=msdn.10)) method to add the results to the tablet pen data stream.</span></span>

## <a name="related-topics"></a><span data-ttu-id="dbfff-144">См. также</span><span class="sxs-lookup"><span data-stu-id="dbfff-144">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="dbfff-145">Жесты приложения</span><span class="sxs-lookup"><span data-stu-id="dbfff-145">Application Gestures</span></span>](application-gestures.md)
</dt> <dt>

[<span data-ttu-id="dbfff-146">Системные жесты</span><span class="sxs-lookup"><span data-stu-id="dbfff-146">System Gestures</span></span>](system-gestures.md)
</dt> <dt>

[<span data-ttu-id="dbfff-147">Временная шкала сообщений и системных событий мыши</span><span class="sxs-lookup"><span data-stu-id="dbfff-147">Timeline of Mouse Messages and System Events</span></span>](timeline-of-mouse-messages-and-system-events.md)
</dt> </dl>

 

 
