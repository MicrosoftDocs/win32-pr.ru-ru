---
description: Общие сведения о работе с потоками при использовании прикладного программного интерфейса (API) Стилусинпут.
ms.assetid: 5d98768a-c60b-4bb0-8640-9bf38254d41f
title: Рекомендации по потокам для API Стилусинпут
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 530ac95fdf0e74e30c83a437b6ed573d03bb2c91
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103909907"
---
# <a name="threading-considerations-for-the-stylusinput-api"></a><span data-ttu-id="23109-103">Рекомендации по потокам для API Стилусинпут</span><span class="sxs-lookup"><span data-stu-id="23109-103">Threading Considerations for the StylusInput API</span></span>

<span data-ttu-id="23109-104">Объект [**RealTimeStylus**](realtimestylus-class.md) предназначен для предоставления доступа к потоку данных из пера планшета в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="23109-104">The [**RealTimeStylus**](realtimestylus-class.md) object is designed to provide real-time access to the data stream from the tablet pen.</span></span> <span data-ttu-id="23109-105">Подключаемые модули. объекты, реализующие интерфейс [**истилуссинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) или [**истилусасинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) , можно добавить в объект **RealTimeStylus** .</span><span class="sxs-lookup"><span data-stu-id="23109-105">Plug-ins, objects which implement the [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) or [**IStylusAsyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylusasyncplugin) interface can be added to a **RealTimeStylus** object.</span></span> <span data-ttu-id="23109-106">Синхронные подключаемые модули, как правило, вызываются непосредственно объектом **RealTimeStylus** в потоке с высоким приоритетом, а Асинхронные подключаемые модули обычно вызываются в потоке пользовательского интерфейса приложения.</span><span class="sxs-lookup"><span data-stu-id="23109-106">Synchronous plug-ins are generally called directly by the **RealTimeStylus** object on a high-priority thread, while asynchronous plug-ins are generally called on the application's user interface (UI) thread.</span></span> <span data-ttu-id="23109-107">Создайте или используйте синхронные подключаемые модули для задач, которым требуется доступ к потоку данных в режиме реального времени и которые не требуют вычисления, например фильтрация пакетов.</span><span class="sxs-lookup"><span data-stu-id="23109-107">Create or use synchronous plug-ins for tasks that require real-time access to the data stream and are computationally undemanding, such as packet filtering.</span></span> <span data-ttu-id="23109-108">Создайте или используйте асинхронные подключаемые модули для задач, не требующих доступа в режиме реального времени к потоку данных, например коллекции рукописного ввода.</span><span class="sxs-lookup"><span data-stu-id="23109-108">Create or use asynchronous plug-ins for tasks that do not require real-time access to the data stream, such as ink collection.</span></span>

<span data-ttu-id="23109-109">Поскольку подключаемые модули данных для асинхронной коллекции подключаемых модулей объекта [**RealTimeStylus**](realtimestylus-class.md) помещаются в очередь, Асинхронные подключаемые модули могут получать данные перед получением вызова своего метода [реалтиместилусдисаблед](/previous-versions/ms824774(v=msdn.10)) , но после отключения объекта **RealTimeStylus** .</span><span class="sxs-lookup"><span data-stu-id="23109-109">Because the plug-in data for the [**RealTimeStylus**](realtimestylus-class.md) object's asynchronous plug-in collection is queued, asynchronous plug-ins may receive data prior to receiving a call to its [RealTimeStylusDisabled](/previous-versions/ms824774(v=msdn.10)) method but after the **RealTimeStylus** object is disabled.</span></span> <span data-ttu-id="23109-110">Обратите внимание, что некоторые методы и свойства объекта **RealTimeStylus** вызывают исключение, если объект **RealTimeStylus** отключен.</span><span class="sxs-lookup"><span data-stu-id="23109-110">Note that some of the **RealTimeStylus** object's methods and properties throw an exception if the **RealTimeStylus** object is disabled.</span></span>

<span data-ttu-id="23109-111">Следующие методы интерфейса [**истилуссинкплугин**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) могут вызываться в потоке, отличном от потока данных планшетного пера.</span><span class="sxs-lookup"><span data-stu-id="23109-111">The following [**IStylusSyncPlugin**](/windows/win32/api/rtscom/nn-rtscom-istylussyncplugin) interface methods may call on a thread other than the tablet pen data thread.</span></span>

-   <span data-ttu-id="23109-112">Методы [реалтиместилусенаблед](/previous-versions/ms824758(v=msdn.10)) и [реалтиместилусдисаблед](/previous-versions/ms824757(v=msdn.10)) вызываются в потоке, который обновляет свойство [Enabled](/previous-versions/ms585380(v=vs.100)) объекта [**RealTimeStylus**](realtimestylus-class.md) или добавляет или удаляет подключаемый модуль, пока включен объект **RealTimeStylus** .</span><span class="sxs-lookup"><span data-stu-id="23109-112">The [RealTimeStylusEnabled](/previous-versions/ms824758(v=msdn.10)) and [RealTimeStylusDisabled](/previous-versions/ms824757(v=msdn.10)) methods are called on the thread that updates the [**RealTimeStylus**](realtimestylus-class.md) object's [Enabled](/previous-versions/ms585380(v=vs.100)) property or that adds or removes the plug-in while the **RealTimeStylus** object is enabled.</span></span>
-   <span data-ttu-id="23109-113">Метод [кустомстилусдатааддед](/previous-versions/ms824753(v=msdn.10)) вызывается в потоке, который вызывает метод [аддкустомстилусдататокуеуе](/previous-versions/ms825761(v=msdn.10)) объекта [**RealTimeStylus**](realtimestylus-class.md) .</span><span class="sxs-lookup"><span data-stu-id="23109-113">The [CustomStylusDataAdded](/previous-versions/ms824753(v=msdn.10)) method is called on the thread that calls the [**RealTimeStylus**](realtimestylus-class.md) object's [AddCustomStylusDataToQueue](/previous-versions/ms825761(v=msdn.10)) method.</span></span>
-   <span data-ttu-id="23109-114">Метод [Error](/previous-versions/ms824754(v=msdn.10)) вызывается в потоке, в котором выполняется синхронный подключаемый модуль, когда возникает исключение.</span><span class="sxs-lookup"><span data-stu-id="23109-114">The [Error](/previous-versions/ms824754(v=msdn.10)) method is called on the thread on which the synchronous plug-in is running when it throws an exception.</span></span>

<span data-ttu-id="23109-115">Чтобы взаимодействовать с приложением из синхронного подключаемого модуля, используйте метод [аддкустомстилусдататокуеуе](/previous-versions/ms825761(v=msdn.10)) объекта [**RealTimeStylus**](realtimestylus-class.md) и обработайте данные пользовательского пера в одном из асинхронных подключаемых модулей. При синхронном вызове другого потока из синхронного подключаемого модуля вы можете заблокировать объект **RealTimeStylus** и таким блоком заблокировать рукописный сбор данных.</span><span class="sxs-lookup"><span data-stu-id="23109-115">To interact with your application from a synchronous plug-in, use the [AddCustomStylusDataToQueue](/previous-versions/ms825761(v=msdn.10)) method of the [**RealTimeStylus**](realtimestylus-class.md) object and handle the custom stylus data in one of your asynchronous plug-ins. If you make a synchronous call to another thread from a synchronous plug-in, you may block the **RealTimeStylus** object and thus block ink collection.</span></span>

<span data-ttu-id="23109-116">Некоторые задачи могут быть требовательными к вычислительным ресурсам, но по-прежнему требуют доступа в режиме реального времени к потоку данных пера планшета, например для распознавания жестов с несколькими штрихами.</span><span class="sxs-lookup"><span data-stu-id="23109-116">Certain tasks may be computationally demanding yet still require real-time access to the tablet pen's data stream, such as for multistroke gesture recognition.</span></span> <span data-ttu-id="23109-117">Интерфейсы API Стилусинпут обеспечивают каскадную модель [**RealTimeStylus**](realtimestylus-class.md) , которая позволяет использовать два объекта **RealTimeStylus** , каждый из которых вызывает синхронные подключаемые модули из разных потоков.</span><span class="sxs-lookup"><span data-stu-id="23109-117">The StylusInput APIs provide a cascaded [**RealTimeStylus**](realtimestylus-class.md) model that allows you to use two **RealTimeStylus** objects, each one calling its synchronous plug-ins from different threads.</span></span> <span data-ttu-id="23109-118">Дополнительные сведения о каскадной модели **RealTimeStylus** см. в статье [каскадная модель RealTimeStylus](the-cascaded-realtimestylus-model.md).</span><span class="sxs-lookup"><span data-stu-id="23109-118">For more information about the cascaded **RealTimeStylus** model, see [The Cascaded RealTimeStylus Model](the-cascaded-realtimestylus-model.md).</span></span>

> [!Note]  
> <span data-ttu-id="23109-119">Невозможно присоединить объект [**RealTimeStylus**](realtimestylus-class.md) к окну или элементу управления в другом процессе.</span><span class="sxs-lookup"><span data-stu-id="23109-119">You cannot attach the [**RealTimeStylus**](realtimestylus-class.md) object to a window or control in a different process.</span></span>

 

<span data-ttu-id="23109-120">Дополнительные сведения о вопросах многопоточности для планшетных ПК см. в статье [вопросы многопоточной обработки в планшетных ПК](tablet-pc-threading-considerations.md) .</span><span class="sxs-lookup"><span data-stu-id="23109-120">For more information about threading considerations for the Tablet PC in general, see [Tablet PC Threading Considerations](tablet-pc-threading-considerations.md)</span></span>

 

 
