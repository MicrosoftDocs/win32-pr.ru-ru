---
description: При выполнении данного действия системные события (с префиксом ISG \_ ) отправляются и принимаются в приложении практически мгновенно.
ms.assetid: deca6d17-fe2c-4130-88ca-d0605bcb6084
title: Временная шкала сообщений и системных событий мыши
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8aee3e6cb7882e1628fee0d2bc40f79ed1e29f55
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105712205"
---
# <a name="timeline-of-mouse-messages-and-system-events"></a><span data-ttu-id="5da07-103">Временная шкала сообщений и системных событий мыши</span><span class="sxs-lookup"><span data-stu-id="5da07-103">Timeline of Mouse Messages and System Events</span></span>

<span data-ttu-id="5da07-104">При выполнении данного действия системные события (с префиксом ISG \_ ) отправляются и принимаются в приложении практически мгновенно.</span><span class="sxs-lookup"><span data-stu-id="5da07-104">When a given action is performed, the system events (prefixed with ISG\_) are sent and received almost instantaneously by the application.</span></span> <span data-ttu-id="5da07-105">Сообщения мыши (с префиксом WM \_ ) отправляются при выполнении действия и принимаются приложением после того, как событие будет обработано службой обмена сообщениями Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="5da07-105">The mouse messages (prefixed with WM\_) are sent when the action is performed and are received by the application after the time it takes for the event to be processed by the Microsoft Windows messaging service.</span></span> <span data-ttu-id="5da07-106">Кроме того, **курсордовн** и **курсоруп** — это события пера, полученные от оборудования пера.</span><span class="sxs-lookup"><span data-stu-id="5da07-106">In addition, **CursorDown** and **CursorUp** are pen events that are received from the pen hardware.</span></span> <span data-ttu-id="5da07-107">Они отправляются, когда перо планшета касается экрана и когда оно ликвидируется с экрана соответственно.</span><span class="sxs-lookup"><span data-stu-id="5da07-107">They are sent when the tablet pen touches the screen and when it is lifted from the screen, respectively.</span></span>

<span data-ttu-id="5da07-108">События пера и сообщения мыши не синхронизируются.</span><span class="sxs-lookup"><span data-stu-id="5da07-108">Pen events and mouse messages are not synchronized.</span></span> <span data-ttu-id="5da07-109">Нет никакой гарантии, что соответствующие сообщения мыши и события пера будут выполняться в определенном порядке.</span><span class="sxs-lookup"><span data-stu-id="5da07-109">There is no guarantee that corresponding mouse messages and pen events will occur in a particular order.</span></span> <span data-ttu-id="5da07-110">На следующей диаграмме показана ожидаемая, но не всегда предсказуемая последовательность передаваемых событий системы и мыши.</span><span class="sxs-lookup"><span data-stu-id="5da07-110">The following chart shows the expected, but not always predictable, sequence of system and mouse events that are sent.</span></span> <span data-ttu-id="5da07-111">Обратите внимание на диаграмму, что события мыши откладываются при обнаружении событий системных жестов.</span><span class="sxs-lookup"><span data-stu-id="5da07-111">Notice in the chart that the mouse events are delayed when system gesture events are detected.</span></span>

![Ожидаемая последовательность событий системы и мыши для ввода с помощью пера](images/ccdafa48-13c0-4af7-aec5-ed162be4bbe7.jpg)

## <a name="important-implementation-considerations"></a><span data-ttu-id="5da07-113">Важные рекомендации по реализации</span><span class="sxs-lookup"><span data-stu-id="5da07-113">Important Implementation Considerations</span></span>

<span data-ttu-id="5da07-114">При разработке для сообщений и системных событий мыши учитывайте следующее.</span><span class="sxs-lookup"><span data-stu-id="5da07-114">Consider the following when developing for mouse messages and system events:</span></span>

-   <span data-ttu-id="5da07-115">События пера и сообщения мыши отправляются в приложение независимо от того, используется ли перо или мышь.</span><span class="sxs-lookup"><span data-stu-id="5da07-115">Both pen events and mouse messages are sent to an application, regardless of whether the pen or the mouse is used.</span></span>
-   <span data-ttu-id="5da07-116">Если приложение прослушивает как перо, так и сообщения мыши, трудно спрогнозировать связь сообщений и, следовательно, поведение в конечном итоге.</span><span class="sxs-lookup"><span data-stu-id="5da07-116">If your application listens for both pen and mouse messages it is difficult to predict the relationship of the messages and hence the eventual behavior.</span></span> <span data-ttu-id="5da07-117">События пера и сообщения мыши не синхронизируются.</span><span class="sxs-lookup"><span data-stu-id="5da07-117">Pen events and mouse messages are not synchronized.</span></span> <span data-ttu-id="5da07-118">Нет никакой гарантии, что соответствующие сообщения мыши и события пера (такие как WM \_ лбуттондовн и **ISG \_ TAP**, WM \_ лбуттондблклк и **ISG \_ дблтап**) будут выполняться в определенном порядке.</span><span class="sxs-lookup"><span data-stu-id="5da07-118">There is no guarantee that corresponding mouse messages and pen events (such as WM\_LBUTTONDOWN and **ISG\_TAP**, or WM\_LBUTTONDBLCLK and **ISG\_DBLTAP**) will occur in a particular order.</span></span> <span data-ttu-id="5da07-119">Связь между этими сообщениями является сложной.</span><span class="sxs-lookup"><span data-stu-id="5da07-119">The relationship between these messages is complex.</span></span>
-   <span data-ttu-id="5da07-120">Не рекомендуется смешивать и совпасть события мыши и пера в одной и той же функции приложения.</span><span class="sxs-lookup"><span data-stu-id="5da07-120">It is recommended not to mix-and-match mouse and pen events in the same application feature.</span></span> <span data-ttu-id="5da07-121">Например, функция приложения, которая реагирует на **курсордовн** и **MouseUp** , может работать не так, как ожидалось, или в будущих версиях пакета SDK для планшетных ПК.</span><span class="sxs-lookup"><span data-stu-id="5da07-121">For example an application feature that responds to **CursorDown** and **MouseUp** may not behave as expected now or with future versions of the Tablet PC SDK.</span></span>
-   <span data-ttu-id="5da07-122">Если при выполнении последовательности событий пользователь перетаскивает перо планшета до завершения последовательности, отправляемые события соответствуют перетаскиванию левой стороны.</span><span class="sxs-lookup"><span data-stu-id="5da07-122">For the hold through event sequence, if the user drags the tablet pen before the sequence is complete, the events that are sent correspond to left-drag.</span></span> <span data-ttu-id="5da07-123">Например, при запуске перетаскивания отправляются **ISG \_ Drag** и WM \_ лбуттондовн.</span><span class="sxs-lookup"><span data-stu-id="5da07-123">For example, when the drag starts, **ISG\_DRAG** and WM\_LBUTTONDOWN are sent.</span></span> <span data-ttu-id="5da07-124">Когда перо в конечном итоге ликвидируется, отправляются **курсоруп** и WM \_ лбуттонуп.</span><span class="sxs-lookup"><span data-stu-id="5da07-124">When the pen is eventually lifted, **CursorUp** and WM\_LBUTTONUP are sent.</span></span> <span data-ttu-id="5da07-125">Событие системного жеста может не сработать немедленно, поскольку оно должно определять тип события.</span><span class="sxs-lookup"><span data-stu-id="5da07-125">The system gesture event may not fire immediately because it must determine what kind of event is occurring.</span></span>
-   <span data-ttu-id="5da07-126">Двойное касание пером планшета часто менее точное, чем двойной щелчок мышью.</span><span class="sxs-lookup"><span data-stu-id="5da07-126">A double-tap with a tablet pen is often less accurate than a double-click with a mouse.</span></span> <span data-ttu-id="5da07-127">Это обусловлено выполнением двойного касания пером планшета.</span><span class="sxs-lookup"><span data-stu-id="5da07-127">This comes from the inherent nature of performing a double-tap with a tablet pen.</span></span> <span data-ttu-id="5da07-128">Поскольку пользователь должен поднять перо планшета для выполнения двойного касания, время между касаниями часто больше, чем соответствующее время между щелчками двойного щелчка.</span><span class="sxs-lookup"><span data-stu-id="5da07-128">Because the user must lift the tablet pen to perform a double-tap, the time between taps is often greater than the corresponding time between clicks of a double-click.</span></span> <span data-ttu-id="5da07-129">Кроме того, вполне вероятно, что два касания планшетного пера происходят в экранных координатах, которые больше, чем для двух щелчков мыши.</span><span class="sxs-lookup"><span data-stu-id="5da07-129">In addition, it is likely that the two taps of the tablet pen occur at screen coordinates that are further apart than those for the two clicks of the mouse.</span></span> <span data-ttu-id="5da07-130">Для этого Windows XP Tablet PC Edition имеет параметры для временного и пространственного расстояний между двумя касаниями двойного касания, которые отделены от параметров мыши для двойного щелчка.</span><span class="sxs-lookup"><span data-stu-id="5da07-130">To accommodate this, Windows XP Tablet PC Edition has settings for the temporal and spatial distance between the two taps of a double-tap that are separate from the mouse settings for a double-click.</span></span> <span data-ttu-id="5da07-131">Эти параметры можно настроить с помощью параметров планшета и пера в панели управления.</span><span class="sxs-lookup"><span data-stu-id="5da07-131">These settings can be adjusted in Tablet and Pen Settings in Control Panel.</span></span>

<span data-ttu-id="5da07-132">Из-за этих соображений следует учитывать, что приложения должны прослушивать только один набор сообщений, а не оба.</span><span class="sxs-lookup"><span data-stu-id="5da07-132">Because of these considerations, applications should listen to only one set of messages rather than both.</span></span> <span data-ttu-id="5da07-133">Если вы создаете приложение с поддержкой пера, Прослушайте его только в сообщениях системы и пера.</span><span class="sxs-lookup"><span data-stu-id="5da07-133">If you are building a pen-enabled application, listen only to the system and pen messages.</span></span> <span data-ttu-id="5da07-134">Эти сообщения являются прогнозируемыми и хорошо работают с пером планшета.</span><span class="sxs-lookup"><span data-stu-id="5da07-134">These messages are predictable and work well with the tablet pen.</span></span> <span data-ttu-id="5da07-135">Если вы создаете приложение, которое не поддерживает перо, прослушивать только сообщения мыши.</span><span class="sxs-lookup"><span data-stu-id="5da07-135">If you are building an application that is not pen-enabled, listen only for the mouse messages.</span></span>

 

 



