---
description: XAudio2 — это аудио API низкого уровня. Он обеспечивает обработку сигнала и смешивание для игр, которые похожи на предшественники, DirectSound и Ксаудио.
ms.assetid: c87be63a-58b5-9cd1-1f03-f32b5a858b2e
title: Введение в XAudio2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d7cde958256d9126746a07764dc0c792e88289c7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105719724"
---
# <a name="xaudio2-introduction"></a><span data-ttu-id="d7fcc-104">Введение в XAudio2</span><span class="sxs-lookup"><span data-stu-id="d7fcc-104">XAudio2 Introduction</span></span>

<span data-ttu-id="d7fcc-105">XAudio2 — это аудио API низкого уровня.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-105">XAudio2 is a low-level audio API.</span></span> <span data-ttu-id="d7fcc-106">Он обеспечивает обработку сигнала и смешивание для игр, которые похожи на предшественники, DirectSound и Ксаудио.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-106">It provides a signal processing and mixing foundation for games that is similar to its predecessors, DirectSound and XAudio.</span></span>

<span data-ttu-id="d7fcc-107">XAudio2 — это долго ожидающая замена DirectSound.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-107">XAudio2 is the long-awaited replacement for DirectSound.</span></span> <span data-ttu-id="d7fcc-108">Она решает несколько нерешенных проблем и запросов функций.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-108">It addresses several outstanding issues and feature requests.</span></span>

## <a name="xaudio2-features"></a><span data-ttu-id="d7fcc-109">Функции XAudio2</span><span class="sxs-lookup"><span data-stu-id="d7fcc-109">XAudio2 Features</span></span>

<span data-ttu-id="d7fcc-110">Ниже приведен список функций XAudio2 и новых функций, позволяющих разработчикам повысить производительность игр.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-110">The following is a list of XAudio2 features and new functionality that enable developers to improve performance in their games.</span></span>

-   <span data-ttu-id="d7fcc-111">Влияние на DSP и фильтрация голоса</span><span class="sxs-lookup"><span data-stu-id="d7fcc-111">DSP Effects and Per Voice Filtering</span></span>

    <span data-ttu-id="d7fcc-112">Эффекты обработки цифровых сигналов (DSP) — это построители текстур пикселей аудио.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-112">Digital Signal Processing (DSP) effects are the pixel shaders of audio.</span></span> <span data-ttu-id="d7fcc-113">Они обрабатывали все, от преобразования звука — Pig скуеал в небольшой, страшной монстрный звук — для размещения звуков в игровой среде с помощью переглагола, перекрытия или фильтрации препятствий.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-113">They handle everything from transforming a sound—turning a pig squeal into a low, scary monster sound—to placing sounds in the game environment using reverb and occlusion or obstruction filtering.</span></span> <span data-ttu-id="d7fcc-114">XAudio2 предоставляет гибкую и мощную платформу DSP.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-114">XAudio2 provides a flexible and powerful DSP framework.</span></span> <span data-ttu-id="d7fcc-115">Он также предоставляет встроенный фильтр для каждого голоса, обеспечивающий эффективные эффекты фильтрации с низким/высоким и с полосами.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-115">It also provides a built-in filter on every voice, for efficient low/high/band-pass filtering effects.</span></span>

    <span data-ttu-id="d7fcc-116">Дополнительные сведения о влиянии DSP и фильтрации голоса см. в разделе [XAudio2 Audio Effects](xaudio2-audio-effects.md) and [**IXAudio2Voice:: сетфилтерпараметерс**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setfilterparameters) .</span><span class="sxs-lookup"><span data-stu-id="d7fcc-116">See [XAudio2 Audio Effects](xaudio2-audio-effects.md) and [**IXAudio2Voice::SetFilterParameters**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setfilterparameters) for more information about DSP effects and per voice filtering.</span></span>

-   <span data-ttu-id="d7fcc-117">Смешение</span><span class="sxs-lookup"><span data-stu-id="d7fcc-117">Submixing</span></span>

    <span data-ttu-id="d7fcc-118">В разделе «смешение» несколько звуков объединяются в один аудиопоток, например, звуковая система состоит из составных частей, все из которых воспроизводятся одновременно.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-118">Submixing combines several sounds into a single audio stream—for example, an engine sound made up of composite parts, all of which are playing simultaneously.</span></span> <span data-ttu-id="d7fcc-119">Кроме того, можно использовать смешение для обработки и объединения аналогичных частей игры.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-119">Also, you can use submixing to process and combine similar parts of a game.</span></span> <span data-ttu-id="d7fcc-120">Например, можно объединить все звуковые эффекты игры, чтобы разрешить применение параметра громкости пользователя, когда отдельный параметр управляет музыкальным томом.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-120">For example, you could combine all game sound effects to allow a user volume setting to be applied while a separate setting controls music volume.</span></span> <span data-ttu-id="d7fcc-121">В сочетании с DSP, подсмешивание обеспечивает тип маршрутизации и обработки данных, необходимый для современных игр.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-121">Combined with DSP, submixing provides the type of data routing and processing necessary for today's games.</span></span> <span data-ttu-id="d7fcc-122">XAudio2 обеспечивает произвольные уровни смешения, позволяя создавать сложные звуки и наборы игр.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-122">XAudio2 allows for arbitrary levels of submixing, enabling the creation of complex sounds and game mixes.</span></span>

    <span data-ttu-id="d7fcc-123">Дополнительные сведения о подсмешении см. в статье [XAudio2 Audio Graph](xaudio2-audio-graph.md) и [XAudio2 голоса](xaudio2-voices.md) .</span><span class="sxs-lookup"><span data-stu-id="d7fcc-123">See [XAudio2 Audio Graph](xaudio2-audio-graph.md) and [XAudio2 Voices](xaudio2-voices.md) for more information about submixing.</span></span>

-   <span data-ttu-id="d7fcc-124">Поддержка сжатых аудио</span><span class="sxs-lookup"><span data-stu-id="d7fcc-124">Compressed Audio Support</span></span>

    <span data-ttu-id="d7fcc-125">Одним из основных запросов функции DirectSound является поддержка сжатого звука.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-125">One of the major feature requests for DirectSound has been for compressed audio support.</span></span> <span data-ttu-id="d7fcc-126">XAudio2 поддерживает сжатые форматы (ADPCM) в собственном режиме с распаковкой во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-126">XAudio2 supports compressed formats—ADPCM—natively with run-time decompression.</span></span>

-   <span data-ttu-id="d7fcc-127">Улучшенная поддержка многоканальных и многообъемных звука</span><span class="sxs-lookup"><span data-stu-id="d7fcc-127">Enhanced Multichannel and Surround Sound Support</span></span>

    <span data-ttu-id="d7fcc-128">Поддержка многоканального, трехмерного и объемного звучания расширяется.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-128">Multichannel, 3D, and surround sound support is expanded.</span></span> <span data-ttu-id="d7fcc-129">Трехмерное и объемное звучание теперь гораздо более гибкими и прозрачными.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-129">3D and surround sound are now much more flexible and transparent.</span></span> <span data-ttu-id="d7fcc-130">XAudio2 удаляет ограничение в 6 каналов на многоканальных звуках и поддерживает многоканальное аудио на любой звуковой карте с поддержкой многоканального уровня.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-130">XAudio2 removes the 6-channel limit on multichannel sounds, and supports multichannel audio on any multichannel-capable audio card.</span></span> <span data-ttu-id="d7fcc-131">Плата не нуждается в аппаратном ускорении.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-131">The card does not need to be hardware-accelerated.</span></span>

-   <span data-ttu-id="d7fcc-132">Многочастотная обработка</span><span class="sxs-lookup"><span data-stu-id="d7fcc-132">Multirate Processing</span></span>

    <span data-ttu-id="d7fcc-133">Чтобы снизить загрузку ЦП, XAudio2 предоставляет технологию для создания нескольких низкоуровневых графиков обработки звука.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-133">To help minimize CPU usage, XAudio2 provides the technology to create multiple, low-rate audio processing graphs.</span></span> <span data-ttu-id="d7fcc-134">Это может значительно снизить загрузку ЦП, позволяя игре обрабатывать звук по ставке исходного материала, если ставка составляет менее 48 кГц.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-134">This can significantly reduce CPU usage by allowing a game to process audio at the rate of the source material if the rate is less than 48 kHz.</span></span>

-   <span data-ttu-id="d7fcc-135">Неблокировка модели API</span><span class="sxs-lookup"><span data-stu-id="d7fcc-135">Nonblocking API Model</span></span>

    <span data-ttu-id="d7fcc-136">При наличии нескольких исключений вызов метода XAudio2 не блокирует модуль обработки звука.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-136">With few exceptions, an XAudio2 method call will not block the audio processing engine.</span></span> <span data-ttu-id="d7fcc-137">Это означает, что клиент может безопасно сделать набор вызовов метода в любое время, не блокируя при этом длительные вызовы, вызывающие задержки.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-137">This means that a client can safely make a set of method calls at any time without blocking on long-running calls causing delays.</span></span> <span data-ttu-id="d7fcc-138">Исключениями являются метод [**IXAudio2Voice::D естройвоице**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-destroyvoice) (который может блокировать обработчик до завершения обработки голоса) и методы, которые завершают аудиопоток: [**IXAudio2:: стопенгине**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-stopengine) и [**IXAudio2:: Release**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-release).</span><span class="sxs-lookup"><span data-stu-id="d7fcc-138">The exceptions are the [**IXAudio2Voice::DestroyVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-destroyvoice) method (which may block the engine until the voice being destroyed is finished processing) and the methods that terminate the audio thread: [**IXAudio2::StopEngine**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-stopengine) and [**IXAudio2::Release**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-release).</span></span> <span data-ttu-id="d7fcc-139">Обратите внимание, что хотя вызовы метода XAudio2 не блокируют модуль обработки звука, методы XAudio2 содержат критически важные разделы и могут быть заблокированы в некоторых обстоятельствах.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-139">Note that while XAudio2 method calls will not block the audio processing engine, the XAudio2 methods contain critical sections and may themselves become blocked in some circumstances.</span></span>

## <a name="when-to-use-xaudio2"></a><span data-ttu-id="d7fcc-140">Когда следует использовать XAudio2</span><span class="sxs-lookup"><span data-stu-id="d7fcc-140">When to use XAudio2</span></span>

<span data-ttu-id="d7fcc-141">XAudio2 в первую очередь предназначена для разработки высокопроизводительных звуковых модулей для игр.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-141">XAudio2 is primarily intended for developing high performance audio engines for games.</span></span> <span data-ttu-id="d7fcc-142">Разработчикам игр, желающим добавить в свои современные игры звуковые эффекты и фоновую музыку, XAudio2 предлагает модуль обработки и микширования звука с низкой задержкой и поддержкой динамических буферов, синхронным образцово-точным воспроизведением и неявным преобразованием производительности источника.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-142">For game developers who want to add sound effects and background music to their modern games, XAudio2 offers an audio graph and mixing engine with low-latency and support for dynamic buffers, synchronous sample-accurate playback, and implicit source rate conversion.</span></span> <span data-ttu-id="d7fcc-143">По сравнению с ВАСАПИ, XAudio2 требует минимального объема кода даже для сложных звуковых решений.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-143">Compared to WASAPI, XAudio2 requires only a minimum amount of code even for complex audio solutions.</span></span> <span data-ttu-id="d7fcc-144">По сравнению с ядром Media Foundation XAudio2 — это API C++ низкого уровня с низкой задержкой, предназначенный для использования в играх.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-144">Compared to the Media Foundation engine, XAudio2 is a low-level, low-latency C++ API that is designed for use in games.</span></span>

<span data-ttu-id="d7fcc-145">Для приложений, которые просто нуждаются в обычной воспроизведении музыки, подсистема Media Foundation может быть лучше соответствует требованиям приложения.</span><span class="sxs-lookup"><span data-stu-id="d7fcc-145">For applications that simply need regular music playback, the Media Foundation engine may be a better match to the application's requirements.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d7fcc-146">См. также</span><span class="sxs-lookup"><span data-stu-id="d7fcc-146">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d7fcc-147">Руководство по программированию</span><span class="sxs-lookup"><span data-stu-id="d7fcc-147">Programming Guide</span></span>](programming-guide.md)
</dt> <dt>

[<span data-ttu-id="d7fcc-148">Начало работы</span><span class="sxs-lookup"><span data-stu-id="d7fcc-148">Getting Started</span></span>](getting-started.md)
</dt> <dt>

[<span data-ttu-id="d7fcc-149">Справочник по программированию в XAudio2</span><span class="sxs-lookup"><span data-stu-id="d7fcc-149">XAudio2 Programming Reference</span></span>](programming-reference.md)
</dt> </dl>

 

 
