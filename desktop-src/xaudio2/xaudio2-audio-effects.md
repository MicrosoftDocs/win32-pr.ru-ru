---
description: Звуковые эффекты — это объект, который принимает входящие звуковые данные и выполняет некоторую операцию с данными перед их передачей. С помощью этого действия можно выполнять различные задачи, в том числе добавлять переглаголы в аудиопоток и отслеживать пиковые уровни громкости.
ms.assetid: 8c3fa4ca-dcff-bd23-7220-7d0aeb6c6068
title: Звуковые эффекты в XAudio2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f8de87a65ea4321b5e8d73a837f79a3e56e8e3a0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105719354"
---
# <a name="xaudio2-audio-effects"></a><span data-ttu-id="86347-104">Звуковые эффекты в XAudio2</span><span class="sxs-lookup"><span data-stu-id="86347-104">XAudio2 Audio Effects</span></span>

<span data-ttu-id="86347-105">Звуковые эффекты — это объект, который принимает входящие звуковые данные и выполняет некоторую операцию с данными перед их передачей.</span><span class="sxs-lookup"><span data-stu-id="86347-105">An audio effect is an object that takes incoming audio data, and performs some operation on the data before passing it on.</span></span> <span data-ttu-id="86347-106">С помощью этого действия можно выполнять различные задачи, в том числе добавлять переглаголы в аудиопоток и отслеживать пиковые уровни громкости.</span><span class="sxs-lookup"><span data-stu-id="86347-106">You can use an effect to perform a variety of tasks, including adding reverb to an audio stream and monitoring peak volume levels.</span></span>

## <a name="effect-chains"></a><span data-ttu-id="86347-107">Цепочки эффектов</span><span class="sxs-lookup"><span data-stu-id="86347-107">Effect Chains</span></span>

<span data-ttu-id="86347-108">Любой голос XAudio2 может размещать цепочку звуковых эффектов.</span><span class="sxs-lookup"><span data-stu-id="86347-108">Any XAudio2 voice can host a chain of audio effects.</span></span> <span data-ttu-id="86347-109">Для указания цепочек эффектов можно использовать массив структур [**\_ \_ дескрипторов эффектов XAUDIO2**](/windows/desktop/api/xaudio2/ns-xaudio2-xaudio2_effect_descriptor) .</span><span class="sxs-lookup"><span data-stu-id="86347-109">You can use an array of [**XAUDIO2\_EFFECT\_DESCRIPTOR**](/windows/desktop/api/xaudio2/ns-xaudio2-xaudio2_effect_descriptor) structures to specify effect chains.</span></span> <span data-ttu-id="86347-110">Каждый дескриптор содержит указатель на объект Effect, предоставленный клиентом.</span><span class="sxs-lookup"><span data-stu-id="86347-110">Each descriptor contains a pointer to an effect object provided by the client.</span></span> <span data-ttu-id="86347-111">Эти объекты должны реализовывать интерфейсы объекта обработки аудио (API).</span><span class="sxs-lookup"><span data-stu-id="86347-111">These objects must implement the Audio Processing Object (APO) interfaces.</span></span> <span data-ttu-id="86347-112">Дополнительные сведения о модели API см. в [обзоре ксапо](xapo-overview.md) .</span><span class="sxs-lookup"><span data-stu-id="86347-112">See the [XAPO Overview](xapo-overview.md) for more information about the APO model.</span></span>

<span data-ttu-id="86347-113">Цепочки эффектов могут динамически изменяться клиентом (во время работы подсистемы XAudio2), эффекты можно включать или отключать по отдельности, а параметры эффектов можно изменять, не прерывая звук.</span><span class="sxs-lookup"><span data-stu-id="86347-113">Effect chains can be modified by the client dynamically (while the XAudio2 engine is running), effects can be enabled or disabled individually, and effect parameters can be changed—all without any interruption of the audio.</span></span> <span data-ttu-id="86347-114">При изменении любого аспекта графа эффектов XAudio2 снова оптимизирует граф, чтобы избежать ненужной обработки.</span><span class="sxs-lookup"><span data-stu-id="86347-114">Whenever any aspect of the effect graph changes, XAudio2 optimizes the graph again to avoid unnecessary processing.</span></span> <span data-ttu-id="86347-115">См. раздел [**IXAudio2Voice:: сетеффектчаин**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-seteffectchain), [**IXAudio2Voice:: енаблиффект**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-enableeffect)и [**IXAudio2Voice:: сетеффектпараметерс**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-seteffectparameters).</span><span class="sxs-lookup"><span data-stu-id="86347-115">See [**IXAudio2Voice::SetEffectChain**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-seteffectchain), [**IXAudio2Voice::EnableEffect**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-enableeffect), and [**IXAudio2Voice::SetEffectParameters**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-seteffectparameters).</span></span>

<span data-ttu-id="86347-116">После присоединения к XAudio2 голоса XAudio2 получает контроль над этим действием, и клиент не должен выполнять последующие вызовы.</span><span class="sxs-lookup"><span data-stu-id="86347-116">After an effect is attached to an XAudio2 voice, XAudio2 takes control of the effect, and the client should not make any further calls to it.</span></span> <span data-ttu-id="86347-117">Самый простой способ убедиться в том, чтобы освободить все указатели на результат.</span><span class="sxs-lookup"><span data-stu-id="86347-117">The simplest way to ensure this is to release all pointers to the effect.</span></span>

<span data-ttu-id="86347-118">Эффекты в заданной цепочке эффектов XAudio2 Voice должны потреблять и создавать звук с плавающей запятой в частоте выборки обработки для этого голоса.</span><span class="sxs-lookup"><span data-stu-id="86347-118">The effects in a given XAudio2 voice's effect chain must consume and produce floating-point audio at that voice's processing sample rate.</span></span> <span data-ttu-id="86347-119">Единственным аспектом формата звука, который они могут изменить, является число каналов (например, переглагол может преобразовать данные Mono в 5,1).</span><span class="sxs-lookup"><span data-stu-id="86347-119">The only aspect of the audio format they can change is the channel count (for example, a reverb effect can convert mono data to 5.1).</span></span> <span data-ttu-id="86347-120">Клиент может использовать [**\_ \_ дескриптор XAUDIO2 Effect**](/windows/desktop/api/xaudio2/ns-xaudio2-xaudio2_effect_descriptor).**Аутпутчаннелс** , чтобы указать количество каналов, которые должны выдаваться каждым из них.</span><span class="sxs-lookup"><span data-stu-id="86347-120">The client can use the [**XAUDIO2\_EFFECT\_DESCRIPTOR**](/windows/desktop/api/xaudio2/ns-xaudio2-xaudio2_effect_descriptor).**OutputChannels** field to specify the number of channels that each effect should produce.</span></span> <span data-ttu-id="86347-121">Цепочка эффектов завершается ошибкой, если какой-либо из эффектов не может выполнить эти требования, или если эффект выдает несколько каналов, которые не могут быть обработаны следующим эффектом.</span><span class="sxs-lookup"><span data-stu-id="86347-121">The effect chain fails if any of the effects cannot fulfill these requirements, or if an effect produces a number of channels that the next effect cannot handle.</span></span> <span data-ttu-id="86347-122">Все вызовы [**IXAudio2Voice:: енаблиффект**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-enableeffect) или [**IXAudio2Voice::D исаблиффект**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-disableeffect) , которые приводят к прекращению выполнения этих требований цепочкой эффектов, завершатся ошибкой.</span><span class="sxs-lookup"><span data-stu-id="86347-122">Any [**IXAudio2Voice::EnableEffect**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-enableeffect) or [**IXAudio2Voice::DisableEffect**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-disableeffect) calls that cause the effect chain to stop fulfilling these requirements will fail.</span></span>

<span data-ttu-id="86347-123">Интерфейсы API, используемые в XAudio2, должны быть *разрушительными*.</span><span class="sxs-lookup"><span data-stu-id="86347-123">APO interfaces used in XAudio2 must be *destructive*.</span></span> <span data-ttu-id="86347-124">Это означает, что они всегда перезапишут все данные, найденные в выходных буферах.</span><span class="sxs-lookup"><span data-stu-id="86347-124">This means they always overwrite any data they find in their output buffers.</span></span> <span data-ttu-id="86347-125">В противном случае полученный звук может быть неверным, так как XAudio2 не гарантирует, что эти буферы были инициализированы ранее с помощью тишины.</span><span class="sxs-lookup"><span data-stu-id="86347-125">Otherwise, the resulting audio might be incorrect because XAudio2 makes no guarantee that these buffers have been initialized previously with silence.</span></span>

## <a name="xaudio2-built-in-effects"></a><span data-ttu-id="86347-126">Встроенные эффекты XAudio2</span><span class="sxs-lookup"><span data-stu-id="86347-126">XAudio2 Built-in Effects</span></span>

<span data-ttu-id="86347-127">В следующей таблице приведен набор встроенных звуковых эффектов, предоставляемых XAudio2, и их методов создания.</span><span class="sxs-lookup"><span data-stu-id="86347-127">The following table lists the set of built-in audio effects provided by XAudio2 and their creation methods.</span></span> 

| <span data-ttu-id="86347-128">Действие</span><span class="sxs-lookup"><span data-stu-id="86347-128">Effect</span></span>       | <span data-ttu-id="86347-129">Метод создания</span><span class="sxs-lookup"><span data-stu-id="86347-129">Creation Method</span></span>                                              |
|--------------|--------------------------------------------------------------|
| <span data-ttu-id="86347-130">Переглагол</span><span class="sxs-lookup"><span data-stu-id="86347-130">Reverb</span></span>       | [<span data-ttu-id="86347-131">**XAudio2CreateReverb**</span><span class="sxs-lookup"><span data-stu-id="86347-131">**XAudio2CreateReverb**</span></span>](/windows/desktop/api/xaudio2fx/nf-xaudio2fx-xaudio2createreverb)           |
| <span data-ttu-id="86347-132">Счетчик томов</span><span class="sxs-lookup"><span data-stu-id="86347-132">Volume Meter</span></span> | [<span data-ttu-id="86347-133">**XAudio2CreateVolumeMeter**</span><span class="sxs-lookup"><span data-stu-id="86347-133">**XAudio2CreateVolumeMeter**</span></span>](/windows/desktop/api/xaudio2fx/nf-xaudio2fx-xaudio2createvolumemeter) |



 

<span data-ttu-id="86347-134">Пример создания и использования экземпляра звукового объекта см. [в разделе инструкции. Создание цепочки эффектов](how-to--create-an-effect-chain.md).</span><span class="sxs-lookup"><span data-stu-id="86347-134">For an example of creating and using an instance of an audio effect, see [How to: Create an Effect Chain](how-to--create-an-effect-chain.md).</span></span>

## <a name="custom-effects-in-xaudio2"></a><span data-ttu-id="86347-135">Пользовательские эффекты в XAudio2</span><span class="sxs-lookup"><span data-stu-id="86347-135">Custom Effects in XAudio2</span></span>

<span data-ttu-id="86347-136">API [ксапо](xapo-overview.md) предоставляет платформу для создания пользовательских звуковых эффектов, которые можно использовать в XAudio2.</span><span class="sxs-lookup"><span data-stu-id="86347-136">The [XAPO](xapo-overview.md) API provides a framework for creating custom audio effects that you can use in XAudio2.</span></span> <span data-ttu-id="86347-137">Пример создания пользовательского действия с КСАПО см. [в разделе как создать ксапо](how-to--create-an-xapo.md).</span><span class="sxs-lookup"><span data-stu-id="86347-137">For an example of creating a custom effect with XAPO, see [How to: Create an XAPO](how-to--create-an-xapo.md).</span></span>

## <a name="xapo-effect-library-xapofx"></a><span data-ttu-id="86347-138">Библиотека эффектов КСАПО (КСАПОФКС)</span><span class="sxs-lookup"><span data-stu-id="86347-138">XAPO Effect Library (XAPOFX)</span></span>

<span data-ttu-id="86347-139">[Ксапофкс](xapofx-overview.md) предоставляет дополнительную библиотеку ксапос и распространенный механизм для их создания.</span><span class="sxs-lookup"><span data-stu-id="86347-139">[XAPOFX](xapofx-overview.md) provides an additional library of XAPOs and common mechanism for creating them.</span></span> <span data-ttu-id="86347-140">Пример использования КСАПОФКС с XAudio2 см. в разделе [как использовать ксапофкс в XAudio2](how-to--use-xapofx-in-xaudio2.md).</span><span class="sxs-lookup"><span data-stu-id="86347-140">For an example of using XAPOFX with XAudio2, see [How to: Use XAPOFX in XAudio2](how-to--use-xapofx-in-xaudio2.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="86347-141">См. также</span><span class="sxs-lookup"><span data-stu-id="86347-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="86347-142">Звуковые эффекты</span><span class="sxs-lookup"><span data-stu-id="86347-142">Audio Effects</span></span>](audio-effects.md)
</dt> <dt>

[<span data-ttu-id="86347-143">Руководство по программированию для XAudio2</span><span class="sxs-lookup"><span data-stu-id="86347-143">XAudio2 Programming Guide</span></span>](programming-guide.md)
</dt> </dl>

 

 
