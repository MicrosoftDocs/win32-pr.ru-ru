---
description: Вы можете в любое время изменить звуковые графики, чтобы добавить или удалить голоса или целые вложенные диаграммы.
ms.assetid: b2f9ec6a-4b5b-e618-759b-d7dbc0d97ac4
title: 'Руководство: динамическое добавление речи или удаление ее из звуковой схемы'
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fdb26150b5614ec53e4cc4de5af74e9a14ee2a94
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104154614"
---
# <a name="how-to-dynamically-add-or-remove-voices-from-an-audio-graph"></a>Руководство: динамическое добавление речи или удаление ее из звуковой схемы

Вы можете в любое время изменить звуковые графики, чтобы добавить или удалить голоса или целые вложенные диаграммы. В этом разделе показано, как добавить или удалить голоса субмикс из графа, созданного в результате действий из статьи Создание [базового графика обработки звука](how-to--build-a-basic-audio-processing-graph.md). Один голос может отсылать свои выходные данные нескольким голосовым или длинным цепочкам голосов. Удаление или добавление одного голоса может значительно повлиять на звуковую диаграмму.

## <a name="to-dynamically-change-an-audio-graph"></a>Динамическое изменение звуковой диаграммы

Добавление и удаление голосов из звуковой диаграммы очень похоже на добавление или удаление узлов из одного связанного списка или графа.

-   Добавление голоса или вложенного графа к звуковой диаграмме

    Установите выходные данные голоса в графе, родительский Voice и голоса, которые будут добавлены с помощью функции [**сетаутпутвоицес**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setoutputvoices) . Установите выходные данные нового голоса к исходному дочернему элементу родительского голоса.

    ```
    XAUDIO2_SEND_DESCRIPTOR send = {0, pNewVoice};
    XAUDIO2_VOICE_SENDS sendlist = {1, &send};
    pParentVoice->SetOutputVoices(&sendlist);
    send.pOutputVoice = pChildVoice;
    pNewVoice->SetOutputVoices(&sendlist);
    ```

    

-   Удаление голоса или вложенного графа из звуковой диаграммы

    Задайте выходной поток родительского элемента для голоса, удаляемого к дочернему элементу удаляемого голоса. Если удаляемый звук находится в конце графика, родительский голосов должен быть изменен, чтобы он указывал на главный Voice.

    ```
    XAUDIO2_SEND_DESCRIPTOR send = {0, pChildVoice};
    XAUDIO2_VOICE_SENDS sendlist = {1, &send};
    pParentVoice->SetOutputVoices(&sendlist);
    ```

    

Обратите внимание, что для ясности в этих примерах у каждого родителя есть только один дочерний элемент. Если родительский узел имеет несколько дочерних узлов, его сендлист будет содержать массив голосов вместо указателя на один голос.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Графики воспроизведения](audio-graphs.md)
</dt> <dt>

[Руководство по программированию для XAudio2](programming-guide.md)
</dt> <dt>

[Руководство: создание базовой схемы обработки звука](how-to--build-a-basic-audio-processing-graph.md)
</dt> <dt>

[Руководство: использование субмикшированной речи](how-to--use-submix-voices.md)
</dt> <dt>

[Руководство: создание цепи эффектов](how-to--create-an-effect-chain.md)
</dt> </dl>

 

 
