---
description: API КСАПО позволяет создавать кросс-платформенные объекты обработки звука (КСАПО) для использования в XAudio2 как в Windows, так и в Xbox 360.
ms.assetid: 4fe88a0f-0234-462f-b575-e592f2c8401e
title: Обзор протокола XAPO
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 31e2372790e26b7fcd3d15019797185ba180d668
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105713045"
---
# <a name="xapo-overview"></a><span data-ttu-id="7dcae-103">Обзор протокола XAPO</span><span class="sxs-lookup"><span data-stu-id="7dcae-103">XAPO Overview</span></span>

<span data-ttu-id="7dcae-104">API КСАПО позволяет создавать кросс-платформенные объекты обработки звука (КСАПО) для использования в XAudio2 как в Windows, так и в Xbox 360.</span><span class="sxs-lookup"><span data-stu-id="7dcae-104">The XAPO API allows the creation of cross-platform audio processing objects (XAPO) for use in XAudio2 on both Windows and Xbox 360.</span></span> <span data-ttu-id="7dcae-105">КСАПО — это объект, который принимает входящие звуковые данные и выполняет некоторую операцию с данными перед их передачей.</span><span class="sxs-lookup"><span data-stu-id="7dcae-105">An XAPO is an object that takes incoming audio data, and performs some operation on the data before passing it on.</span></span> <span data-ttu-id="7dcae-106">КСАПО можно использовать для выполнения различных задач, включая добавление переработки в аудиопоток и мониторинг пиковых уровней громкости.</span><span class="sxs-lookup"><span data-stu-id="7dcae-106">You can use an XAPO to perform a variety of tasks, including adding reverb to an audio stream and monitoring peak volume levels.</span></span>

## <a name="creating-new-xapos"></a><span data-ttu-id="7dcae-107">Создание нового Ксапос</span><span class="sxs-lookup"><span data-stu-id="7dcae-107">Creating New XAPOs</span></span>

<span data-ttu-id="7dcae-108">API КСАПО предоставляет интерфейс [**иксапо**](/windows/desktop/api/XAPO/nn-xapo-ixapo) и класс [**кксапобасе**](/windows/desktop/api/XAPOBase/nl-xapobase-cxapobase) для создания новых типов ксапо.</span><span class="sxs-lookup"><span data-stu-id="7dcae-108">The XAPO API provides the [**IXAPO**](/windows/desktop/api/XAPO/nn-xapo-ixapo) interface and the [**CXAPOBase**](/windows/desktop/api/XAPOBase/nl-xapobase-cxapobase) class for building new XAPO types.</span></span> <span data-ttu-id="7dcae-109">Интерфейс **иксапо** содержит все методы, которые должны быть реализованы для создания нового ксапо.</span><span class="sxs-lookup"><span data-stu-id="7dcae-109">The **IXAPO** interface contains all of the methods that need to be implemented to create a new XAPO.</span></span> <span data-ttu-id="7dcae-110">Класс **кксапобасе** предоставляет базовую реализацию интерфейса **иксапо** .</span><span class="sxs-lookup"><span data-stu-id="7dcae-110">The **CXAPOBase** class provides a basic implementation of the **IXAPO** interface.</span></span> <span data-ttu-id="7dcae-111">**Кксапобасе** реализует все методы интерфейса **иксапо** , за исключением метода [**иксапо::P шаблоны**](/windows/win32/api/xapo/nf-xapo-ixapo-process) , который уникален для каждого ксапо.</span><span class="sxs-lookup"><span data-stu-id="7dcae-111">**CXAPOBase** implements all of the **IXAPO** interface methods except the [**IXAPO::Process**](/windows/win32/api/xapo/nf-xapo-ixapo-process) method, which is unique to each XAPO.</span></span>

<span data-ttu-id="7dcae-112">Пример создания нового КСАПО см. [в разделе как создать ксапо](how-to--create-an-xapo.md).</span><span class="sxs-lookup"><span data-stu-id="7dcae-112">For an example of creating a new XAPO, see [How to: Create an XAPO](how-to--create-an-xapo.md).</span></span>

<span data-ttu-id="7dcae-113">Пример создания КСАПО, который принимает параметры времени выполнения, см. в разделе Пошаговое [руководство. Добавление поддержки параметров времени выполнения в ксапо](how-to--add-run-time-parameter-support-to-an-xapo.md).</span><span class="sxs-lookup"><span data-stu-id="7dcae-113">For an example of creating a XAPO that accepts run-time parameters, see [How to: Add Run-time Parameter Support to an XAPO](how-to--add-run-time-parameter-support-to-an-xapo.md).</span></span>

## <a name="xapos-and-com"></a><span data-ttu-id="7dcae-114">Ксапос и COM</span><span class="sxs-lookup"><span data-stu-id="7dcae-114">XAPOs and COM</span></span>

<span data-ttu-id="7dcae-115">Ксапос реализуют интерфейс **IUnknown** .</span><span class="sxs-lookup"><span data-stu-id="7dcae-115">XAPOs implement the **IUnknown** interface.</span></span> <span data-ttu-id="7dcae-116">Интерфейсы [**иксапо**](/windows/desktop/api/XAPO/nn-xapo-ixapo) и [**иксапопараметерс**](/windows/desktop/api/XAPO/nn-xapo-ixapoparameters) включают в себя три метода **IUnknown** : **QueryInterface**, **AddRef** и **Release**.</span><span class="sxs-lookup"><span data-stu-id="7dcae-116">The [**IXAPO**](/windows/desktop/api/XAPO/nn-xapo-ixapo) and [**IXAPOParameters**](/windows/desktop/api/XAPO/nn-xapo-ixapoparameters) interfaces include the three **IUnknown** methods: **QueryInterface**, **AddRef**, and **Release**.</span></span> <span data-ttu-id="7dcae-117">[**Кксапобасе**](/windows/desktop/api/XAPOBase/nl-xapobase-cxapobase) предоставляет реализации всех трех методов IUnknown.</span><span class="sxs-lookup"><span data-stu-id="7dcae-117">[**CXAPOBase**](/windows/desktop/api/XAPOBase/nl-xapobase-cxapobase) provides implementations of all three of the IUnknown methods.</span></span> <span data-ttu-id="7dcae-118">Новый экземпляр **кксапобасе** будет иметь счетчик ссылок, равный 1.</span><span class="sxs-lookup"><span data-stu-id="7dcae-118">A new instance of **CXAPOBase** will have a reference count of 1.</span></span> <span data-ttu-id="7dcae-119">Он будет уничтожен, когда счетчик ссылок станет равным 0.</span><span class="sxs-lookup"><span data-stu-id="7dcae-119">It will be destroyed when its reference count becomes 0.</span></span> <span data-ttu-id="7dcae-120">Реализации **иксапо** и **иксапопараметерс** должны следовать той же схеме, чтобы обеспечить их правильное управление при использовании с XAudio2.</span><span class="sxs-lookup"><span data-stu-id="7dcae-120">Implementations of **IXAPO** and **IXAPOParameters** should follow the same pattern to allow for their proper management when used with XAudio2.</span></span>

<span data-ttu-id="7dcae-121">Экземпляры КСАПО передаются в XAudio2 в качестве интерфейсов **IUnknown** .</span><span class="sxs-lookup"><span data-stu-id="7dcae-121">XAPO instances are passed to XAudio2 as **IUnknown** interfaces.</span></span> <span data-ttu-id="7dcae-122">XAudio2 использует **QueryInterface** для получения интерфейса [**иксапо**](/windows/desktop/api/XAPO/nn-xapo-ixapo) и для обнаружения того, реализует ли ксапо интерфейс [**иксапопараметерс**](/windows/desktop/api/XAPO/nn-xapo-ixapoparameters) .</span><span class="sxs-lookup"><span data-stu-id="7dcae-122">XAudio2 uses **QueryInterface** to acquire an [**IXAPO**](/windows/desktop/api/XAPO/nn-xapo-ixapo) interface and to detect whether the XAPO implements the [**IXAPOParameters**](/windows/desktop/api/XAPO/nn-xapo-ixapoparameters) interface.</span></span> <span data-ttu-id="7dcae-123">Реализации **иксапо** должны принимать запросы для **\_ \_ ууидоф (иксапо)**.</span><span class="sxs-lookup"><span data-stu-id="7dcae-123">Implementations of **IXAPO** must accept requests for **\_\_uuidof(IXAPO)**.</span></span> <span data-ttu-id="7dcae-124">Если **иксапопараметерс** реализован, он также должен принимать запросы для **\_ \_ ууидоф (иксапопараметерс)**.</span><span class="sxs-lookup"><span data-stu-id="7dcae-124">If **IXAPOParameters** is implemented, it must also accept requests for **\_\_uuidof(IXAPOParameters)**.</span></span>

## <a name="using-an-xapo-in-xaudio2"></a><span data-ttu-id="7dcae-125">Использование КСАПО в XAudio2</span><span class="sxs-lookup"><span data-stu-id="7dcae-125">Using an XAPO in XAudio2</span></span>

<span data-ttu-id="7dcae-126">Ксапос используются в XAudio2, присоединяя их к голосовам.</span><span class="sxs-lookup"><span data-stu-id="7dcae-126">XAPOs are used in XAudio2 by attaching them to voices.</span></span> <span data-ttu-id="7dcae-127">У каждого голоса XAudio2 есть цепочка эффектов, содержащая ноль или более звуковых эффектов.</span><span class="sxs-lookup"><span data-stu-id="7dcae-127">Each XAudio2 voice has an effect chain containing zero or more audio effects.</span></span> <span data-ttu-id="7dcae-128">Звуковые данные, отправляемые на голос, передаются по каждому результату в цепочке перед отправкой на выходные данные голосового ввода.</span><span class="sxs-lookup"><span data-stu-id="7dcae-128">Audio data sent to a voice is passed through each effect in the chain before it is sent to the voice's output targets.</span></span> <span data-ttu-id="7dcae-129">Данные передаются из голоса в каждый результат с помощью параметра *пинпутпроцесспараметерс* метода [**иксапо::P шаблоны**](/windows/win32/api/xapo/nf-xapo-ixapo-process) .</span><span class="sxs-lookup"><span data-stu-id="7dcae-129">Data is passed from the voice to each effect using the *pInputProcessParameters* parameter of the [**IXAPO::Process**](/windows/win32/api/xapo/nf-xapo-ixapo-process) method.</span></span> <span data-ttu-id="7dcae-130">Затем он возвращается в речь с помощью параметра *паутпутпроцесспараметерс* .</span><span class="sxs-lookup"><span data-stu-id="7dcae-130">Then it is returned to the voice using the *pOutputProcessParameters* parameter.</span></span> <span data-ttu-id="7dcae-131">Голосовое действие принимает выходные данные каждого эффекта и передает его в следующий эффект в цепочке, пока в цепочке не останутся никакие эффекты.</span><span class="sxs-lookup"><span data-stu-id="7dcae-131">The voice takes the output of each effect, and feeds it into the next effect in the chain until no effects are left in the chain.</span></span>

<span data-ttu-id="7dcae-132">Дополнительные сведения о цепочках эффектов XAudio2 см. в разделе [XAudio2 Audio Effects](xaudio2-audio-effects.md).</span><span class="sxs-lookup"><span data-stu-id="7dcae-132">For more information about XAudio2 effect chains, see [XAudio2 Audio Effects](xaudio2-audio-effects.md).</span></span>

<span data-ttu-id="7dcae-133">Пример использования КСАПО в XAudio2 см. в разделе [как использовать ксапо в XAudio2](how-to--use-an-xapo-in-xaudio2.md).</span><span class="sxs-lookup"><span data-stu-id="7dcae-133">For an example of using an XAPO in XAudio2, see [How to: Use an XAPO in XAudio2](how-to--use-an-xapo-in-xaudio2.md).</span></span>

## <a name="effect-libraries"></a><span data-ttu-id="7dcae-134">Библиотеки эффектов</span><span class="sxs-lookup"><span data-stu-id="7dcae-134">Effect Libraries</span></span>

<span data-ttu-id="7dcae-135">Библиотека эффектов КСАПО содержит несколько Ксапос и распространенный метод их создания.</span><span class="sxs-lookup"><span data-stu-id="7dcae-135">The XAPO effect library contains several XAPOs, and a common method of instantiating them.</span></span> <span data-ttu-id="7dcae-136">Сведения о КСАПОФКС см. в [обзоре ксапофкс](xapofx-overview.md) .</span><span class="sxs-lookup"><span data-stu-id="7dcae-136">See [XAPOFX Overview](xapofx-overview.md) for information about XAPOFX.</span></span> <span data-ttu-id="7dcae-137">Кроме того, XAudio2 имеет встроенные эффекты переглагола и счетчика громкости.</span><span class="sxs-lookup"><span data-stu-id="7dcae-137">Also, XAudio2 has built-in reverb and volume meter effects.</span></span> <span data-ttu-id="7dcae-138">Дополнительные сведения о встроенных эффектах XAudio2 см. в разделе [XAudio2 Audio Effects](xaudio2-audio-effects.md) .</span><span class="sxs-lookup"><span data-stu-id="7dcae-138">See [XAudio2 Audio Effects](xaudio2-audio-effects.md) for more information about the built-in XAudio2 effects.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7dcae-139">См. также</span><span class="sxs-lookup"><span data-stu-id="7dcae-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7dcae-140">Звуковые эффекты</span><span class="sxs-lookup"><span data-stu-id="7dcae-140">Audio Effects</span></span>](audio-effects.md)
</dt> <dt>

[<span data-ttu-id="7dcae-141">Звуковые эффекты в XAudio2</span><span class="sxs-lookup"><span data-stu-id="7dcae-141">XAudio2 Audio Effects</span></span>](xaudio2-audio-effects.md)
</dt> </dl>

 

 
