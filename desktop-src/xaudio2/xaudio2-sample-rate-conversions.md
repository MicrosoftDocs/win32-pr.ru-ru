---
description: Голоса XAudio2 могут выполнять автоматические преобразования частоты выборки, если их скорость выборки отличается от частоты выборки входных голосов.
ms.assetid: be34ce62-6552-45e2-a247-830ab55ea9ec
title: Преобразование частоты дискретизации XAudio2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2d437a45f9e896826bedc1418382fb257201722d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104272816"
---
# <a name="xaudio2-sample-rate-conversions"></a><span data-ttu-id="33fac-103">Преобразование частоты дискретизации XAudio2</span><span class="sxs-lookup"><span data-stu-id="33fac-103">XAudio2 Sample Rate Conversions</span></span>

<span data-ttu-id="33fac-104">Голоса XAudio2 могут выполнять автоматические преобразования частоты выборки, если их скорость выборки отличается от частоты выборки входных голосов.</span><span class="sxs-lookup"><span data-stu-id="33fac-104">XAudio2 voices can perform automatic sample rate conversions if their input sample rate is different from the input sample rate of their output voices.</span></span>

<span data-ttu-id="33fac-105">Преобразования частоты выборки соответствуют следующим правилам.</span><span class="sxs-lookup"><span data-stu-id="33fac-105">Sample rate conversions follow these rules:</span></span>

-   <span data-ttu-id="33fac-106">Частота выборки голоса для речевого ввода исправлена.</span><span class="sxs-lookup"><span data-stu-id="33fac-106">Voice input sample rate is fixed.</span></span>

    <span data-ttu-id="33fac-107">Голоса могут работать только с частотой выборки, указанной при создании.</span><span class="sxs-lookup"><span data-stu-id="33fac-107">Voices can only handle the input sample rate specified when they were created.</span></span> <span data-ttu-id="33fac-108">Для [**голосовых голосов**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2masteringvoice) и [**голосов Субмикс**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2submixvoice)в функции [**IXAudio2:: Креатемастерингвоице**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice) и [**IXAudio2:: креатесубмиксвоице**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createsubmixvoice) задается частота выборки входных данных с аргументом *инпутсамплерате* .</span><span class="sxs-lookup"><span data-stu-id="33fac-108">For [**mastering voices**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2masteringvoice) and [**submix voices**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2submixvoice), the input sample rate is specified with the *InputSampleRate* argument to the [**IXAudio2::CreateMasteringVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createmasteringvoice) and [**IXAudio2::CreateSubmixVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createsubmixvoice) functions.</span></span> <span data-ttu-id="33fac-109">Для исходных голосов входная частота выборки голоса задается аргументом Псаурцеформат функции [**IXAudio2:: креатесаурцевоице**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createsourcevoice) .</span><span class="sxs-lookup"><span data-stu-id="33fac-109">For source voices, the input sample rate of the voice is specified by the pSourceFormat argument to the [**IXAudio2::CreateSourceVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createsourcevoice) function.</span></span>

-   <span data-ttu-id="33fac-110">Все выходные голоса голосового ввода должны иметь одинаковую частоту выборки.</span><span class="sxs-lookup"><span data-stu-id="33fac-110">All of a voice's output voices must have the same input sample rate.</span></span>

    <span data-ttu-id="33fac-111">Голоса могут преобразовывать скорость выборки данных в любую частоту выборки, но все выходные голоса голоса должны иметь одинаковую частоту выборки.</span><span class="sxs-lookup"><span data-stu-id="33fac-111">Voices can convert from their input sample rate to any output sample rate, but all of the voice's output voices must have the same input sample rate.</span></span> <span data-ttu-id="33fac-112">Например, голос может выводить любое количество голосов с частотой выборки 22 кГц.</span><span class="sxs-lookup"><span data-stu-id="33fac-112">For example, a voice could output to any number of voices with an input sample rate of 22 kHz.</span></span> <span data-ttu-id="33fac-113">Однако если один и тот же голос имел несколько выходных голосов, каждый из которых имеет разную частоту выборки, звуковая диаграмма будет недействительной.</span><span class="sxs-lookup"><span data-stu-id="33fac-113">However, if that same voice had several output voices, each of which had a different input sample rate, the audio graph would not be valid.</span></span>

-   <span data-ttu-id="33fac-114">Обработка преобразования частоты выборки выполняется только при необходимости.</span><span class="sxs-lookup"><span data-stu-id="33fac-114">Sample rate conversion processing only occurs when necessary.</span></span>

    <span data-ttu-id="33fac-115">Преобразование звуковых данных в другую частоту выборки приводит к увеличению затрат на обработку, что желательно избегать.</span><span class="sxs-lookup"><span data-stu-id="33fac-115">Converting audio data to a different sample rate incurs more processing overhead, which it is preferable to avoid.</span></span> <span data-ttu-id="33fac-116">Если частота выборки входных данных голоса совпадает с частотой выборки входных голосов, это преобразование не выполняется, и время обработки сокращается.</span><span class="sxs-lookup"><span data-stu-id="33fac-116">If a voice's input sample rate matches the input sample rate of its output voices, this conversion is not done and processing time is shortened.</span></span>

-   <span data-ttu-id="33fac-117">Частота выборки выходных данных может меняться в зависимости от жизненного цикла голоса.</span><span class="sxs-lookup"><span data-stu-id="33fac-117">Output sample rate can vary over the life of a voice.</span></span>

    <span data-ttu-id="33fac-118">Частота выборки выходных данных голоса не исправлена.</span><span class="sxs-lookup"><span data-stu-id="33fac-118">The output sample rate of a voice is not fixed.</span></span> <span data-ttu-id="33fac-119">Пока все выходные голоса имеют одинаковую частоту выборки, звуковая диаграмма будет допустимой.</span><span class="sxs-lookup"><span data-stu-id="33fac-119">As long as all of its output voices have the same input sample rate, the audio graph will be valid.</span></span> <span data-ttu-id="33fac-120">При изменении голоса на вывод на новые голоса с другой частотой выборки данных голос преобразуется в частоту выборки данных новых голосов.</span><span class="sxs-lookup"><span data-stu-id="33fac-120">If a voice is changed to output to new voices with a different input sample rate, the voice will convert to the input sample rate of the new voices.</span></span>

<span data-ttu-id="33fac-121">Существует несколько сценариев, в которых необходимо добавить субмикс голос для выполнения выборки частоты дискретизации между голосовыми операциями.</span><span class="sxs-lookup"><span data-stu-id="33fac-121">There are some scenarios in which it is necessary to add a submix voice to perform sample rate conversion between voices.</span></span> <span data-ttu-id="33fac-122">Если голосу требуется выводить голоса с различными тарифными частотами выборки, только один из голосов может быть прямым выходом исходного голоса.</span><span class="sxs-lookup"><span data-stu-id="33fac-122">If a voice needs to output to voices with various input sample rates, only one of the voices can be a direct output of the original voice.</span></span> <span data-ttu-id="33fac-123">Так как все выходные голоса голоса должны иметь одинаковую частоту выборки, другие голоса получают непрямое выходное значение.</span><span class="sxs-lookup"><span data-stu-id="33fac-123">Because all of a voice's output voices must have the same input sample rate, the other voices receive output indirectly.</span></span> <span data-ttu-id="33fac-124">Должен существовать субмиксный голоса с правильной частотой выборки данных, которая находится между исходным и предполагаемым выходным голоса.</span><span class="sxs-lookup"><span data-stu-id="33fac-124">There must be a submix voice with the correct input sample rate that comes between the original voice and the intended output voice.</span></span>

<span data-ttu-id="33fac-125">Например, рассмотрим исходный голоса с частотой выборки 22 кГц, которая должна выводиться на субмикс голоса с частотой выборки 11 кГц и счетом основного голоса с частотой выборки 44,1 кГц.</span><span class="sxs-lookup"><span data-stu-id="33fac-125">For example, consider a source voice with an input sample rate of 22 kHz, which needs to output to a submix voice with an input sample rate of 11 kHz and a mastering voice with an input sample rate of 44.1 kHz.</span></span> <span data-ttu-id="33fac-126">Так как два выходных голоса имеют разную частоту выборки, необходимо вставить больше субмикс голосов между исходным голосом и предполагаемыми выходными голосовыми данными.</span><span class="sxs-lookup"><span data-stu-id="33fac-126">Because the two output voices have different input sample rates, you need to insert more submix voices between the original voice and its intended output voices.</span></span> <span data-ttu-id="33fac-127">Чтобы сохранить достоверность исходного голоса и избежать ненужных преобразований в большую частоту выборки, необходимо вставить два субмикс голоса с 22 кГц в качестве образца входных ставок на диаграмму.</span><span class="sxs-lookup"><span data-stu-id="33fac-127">To maintain the fidelity of the source voice and avoid unnecessary expensive conversions to higher sample rates, you need to insert two submix voices with 22 khz sample input rates into the graph.</span></span> <span data-ttu-id="33fac-128">Один субмиксный голоса выводится на печать с 11 кГц на субмикс голоса с помощью переглагола, а другая субмикс Voice выводит на печать в Voice 44,1 кГц.</span><span class="sxs-lookup"><span data-stu-id="33fac-128">One submix voice would output at 11 khz to the submix voice with the reverb effect, and the other submix voice would output to the mastering voice at 44.1 khz.</span></span>

## <a name="examples-of-sample-rate-conversion-in-audio-graphs"></a><span data-ttu-id="33fac-129">Примеры преобразования частоты выборки в звуковых диаграммах</span><span class="sxs-lookup"><span data-stu-id="33fac-129">Examples of Sample Rate Conversion in Audio Graphs</span></span>

<span data-ttu-id="33fac-130">Все голоса имеют одинаковую скорость входа. в звуковой диаграмме не выполняется преобразование частоты выборки.</span><span class="sxs-lookup"><span data-stu-id="33fac-130">All voices have the same sample input rate; no sample rate conversion is done in the audio graph.</span></span>![в звуковой диаграмме не выполняется преобразование частоты выборки.](images/xaudio2-sample-rate-conversions-1.png)

<span data-ttu-id="33fac-132">Все голоса имеют одинаковую частоту выборки, за исключением голоса на главной странице; Преобразование частоты дискретизации выполняется только для данных, передаваемых на основной Voice.</span><span class="sxs-lookup"><span data-stu-id="33fac-132">All voices have the same sample input rate except the mastering voice; sample rate conversion is only performed on data going to the mastering voice.</span></span> ![Преобразование частоты дискретизации выполняется только для данных, передаваемых на основной Voice.](images/xaudio2-sample-rate-conversions-2.png)

<span data-ttu-id="33fac-134">У голоса разные примеры входных данных и требуются дополнительные голоса субмикс для выполнения преобразования частоты дискретизации. Преобразование частоты дискретизации выполняется в нескольких местах в звуковой диаграмме.</span><span class="sxs-lookup"><span data-stu-id="33fac-134">Voices have different sample input rates and require more submix voices to perform sample rate conversions; sample rate conversion is performed in multiple places in the audio graph.</span></span> ![Преобразование частоты дискретизации выполняется в нескольких местах в звуковой диаграмме.](images/xaudio2-sample-rate-conversions-3.png)

## <a name="related-topics"></a><span data-ttu-id="33fac-136">См. также</span><span class="sxs-lookup"><span data-stu-id="33fac-136">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="33fac-137">Голоса</span><span class="sxs-lookup"><span data-stu-id="33fac-137">Voices</span></span>](voices.md)
</dt> <dt>

[<span data-ttu-id="33fac-138">Руководство по программированию для XAudio2</span><span class="sxs-lookup"><span data-stu-id="33fac-138">XAudio2 Programming Guide</span></span>](programming-guide.md)
</dt> </dl>

 

 
