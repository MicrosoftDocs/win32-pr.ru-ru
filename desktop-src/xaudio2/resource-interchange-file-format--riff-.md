---
description: В этом обзоре описывается формат файла обмена ресурсами (Metallica), который используется в WAV-файлах. Metallica — типичный формат, из которого будут загружены звуковые данные для XAudio2.
ms.assetid: b543e949-223c-ddd3-7527-a41f3709a0c1
title: Формат RIFF (Resource Interchange File Format)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8d61eb45eff8db119eb73209b53b595f1cf6d243
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105713046"
---
# <a name="resource-interchange-file-format-riff"></a>Формат RIFF (Resource Interchange File Format)

В этом обзоре описывается формат файла обмена ресурсами (Metallica), который используется в WAV-файлах. Metallica — типичный формат, из которого будут загружены звуковые данные для XAudio2.

## <a name="riff"></a>RIFF

Файл Metallica состоит из нескольких дискретных разделов данных, называемых *фрагментами*.

## <a name="fourcc-identifiers"></a>Идентификаторы FOURCC

Тип данных в блоке обозначается идентификатором с четырьмя символами (FOURCC). FOURCC — это 32-разрядное целое число без знака, созданное путем сцепления четырех символов ASCII, используемых для обнаружения типов блоков в файле Metallica. Например, FOURCC «ABCD» представлена в системе с прямым порядком байтов как 0x64636261. Фаурккс может содержать пробелы, поэтому "ABC" является допустимым набором FOURCC. В аудиофайлах используются коды FOURCC для обнаружения фрагментов звукового формата, блоков звуковых данных и других блоков, относящихся к звуковому формату.

В следующей таблице показаны идентификаторы FOURCC, которые могут быть ожидаемыми в звуковых форматах, поддерживаемых XAudio2. 

| Формат | Идентификаторы FOURCC                     | Дополнительные сведения                                                                               |
|--------|----------------------------------------|------------------------------------------------------------------------------------------------------|
| PCM    | "Metallica", "fmt", "Data"                 |                                                                                                      |
| СЖАТИЯ  | "Metallica", "fmt", "Data", "СМПЛ", "всмпл" | Описание идентификаторов FOURCC, связанных с ADPCM, см. в разделе [Общие сведения о ADPCM](adpcm-overview.md) . |



 

Идентификаторы FOURCC "Metallica", "fmt" и "Data" являются общими для всех поддерживаемых форматов. В следующей таблице описаны идентификаторы FOURCC, которые находятся во всех поддерживаемых форматах. 

| Идентификатор FOURCC | Описание                                                                                                                                                                                                                        |
|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| "RIFF"            | Стандартный блок Metallica, содержащий тип файла со значением "WAVE" или "КСВМА" в первых четырех байтах раздела данных, а также другие фрагменты в файле в оставшейся части его раздела данных.                                   |
| "fmt"             | Содержит заголовок формата для звукового файла. Данные в этом блоке соответствуют одной из следующих структур: **вавеформатекс**, **вавеформатекстенсибле адпкмвавеформат**.                                                  |
| "data"            | Содержит звуковые данные для звукового файла. В XAudio2 содержимое фрагмента данных считывается в буфер и передается в исходный голоса в качестве элемента **паудиодата** в структуре [**\_ буфера XAudio2**](/windows/desktop/api/xaudio2/ns-xaudio2-xaudio2_buffer) . |



 

## <a name="chunks"></a>Блоки

Файл Metallica состоит из фрагмента Metallica, содержащего ноль или более других фрагментов.

-   Блок Metallica имеет следующий вид:

    "Metallica", размер файла, Тип_файла, Data

    Где "Metallica" — это литеральный код FOURCC "Metallica", *Размер файла* является 4-байтовым значением, определяющим размер данных в файле, а *filetype* — FourCC, которая определяет конкретный тип файла. Значение *Размер файла* включает размер *filetype* FourCC плюс размер данных, приведенных ниже, но не включает размер "Metallica" FourCC или размер *Размер файла*. Данные состоят из фрагментов в любом порядке.

-   Другие фрагменты имеют следующую форму:

    ```
    chunkID, chunkSize, data
    ```

    

    Где *чункид* — это объект FourCC, определяющий данные, содержащиеся в блоке, *ChunkSize* — 4-байтовый размер, указывающий объем раздела данных в фрагменте, а данные — ноль или больше байтов данных. Данные всегда дополняются до ближайшей границы слова. *ChunkSize* предоставляет размер допустимых данных в блоке. Он не включает в себя заполнение, размер *чункид* или размер *ChunkSize*.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Начало работы](getting-started.md)
</dt> <dt>

[Руководство: воспроизведение звука при помощи XAudio2](how-to--play-a-sound-with-xaudio2.md)
</dt> <dt>

[Справочник по программированию в XAudio2](programming-reference.md)
</dt> </dl>

 

 



