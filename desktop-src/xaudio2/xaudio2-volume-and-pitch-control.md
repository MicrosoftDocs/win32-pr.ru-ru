---
description: В этом разделе описывается XAudio2ный элемент управления громкостью и шагом.
ms.assetid: dedc2d01-af83-d7d2-5b64-743dcebc83f7
title: Элемент управления громкостью и шагом XAudio2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2526cfa50c0260e90e1aae9e2bce21d507dc2e06
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104265428"
---
# <a name="xaudio2-volume-and-pitch-control"></a><span data-ttu-id="90aad-103">Элемент управления громкостью и шагом XAudio2</span><span class="sxs-lookup"><span data-stu-id="90aad-103">XAudio2 Volume and Pitch Control</span></span>

<span data-ttu-id="90aad-104">В этом разделе описывается XAudio2ный элемент управления громкостью и шагом.</span><span class="sxs-lookup"><span data-stu-id="90aad-104">This topic describes XAudio2 volume and pitch control.</span></span>

## <a name="volume-control"></a><span data-ttu-id="90aad-105">Элемент управления громкостью</span><span class="sxs-lookup"><span data-stu-id="90aad-105">Volume Control</span></span>

<span data-ttu-id="90aad-106">Уровни тома выражаются в виде множителей амплитуды с плавающей запятой между-XAUDIO2 \_ максимального \_ уровня громкости \_ и XAUDIO2 \_ максимального \_ уровня громкости \_ (от-224 до 224) с максимальным объемом базы данных 144,5.</span><span class="sxs-lookup"><span data-stu-id="90aad-106">Volume levels are expressed as floating-point amplitude multipliers between -XAUDIO2\_MAX\_VOLUME\_LEVEL and XAUDIO2\_MAX\_VOLUME\_LEVEL (-224 to 224), with a maximum gain of 144.5 dB.</span></span> <span data-ttu-id="90aad-107">Том 1,0 означает отсутствие затухания или выигрыша; 0 означает тишину; и отрицательные уровни можно использовать для обращения к фазе звука.</span><span class="sxs-lookup"><span data-stu-id="90aad-107">A volume of 1.0 means there is no attenuation or gain; 0 means silence; and negative levels can be used to invert the audio's phase.</span></span> <span data-ttu-id="90aad-108">В XAudio2. h предусмотрены две встроенные функции для преобразования между единицами тома: [**XAudio2DecibelsToAmplitudeRatio**](/windows/desktop/api/xaudio2/nf-xaudio2-xaudio2decibelstoamplituderatio) и [**XAudio2AmplitudeRatioToDecibels**](/windows/desktop/api/xaudio2/nf-xaudio2-xaudio2amplituderatiotodecibels).</span><span class="sxs-lookup"><span data-stu-id="90aad-108">Two inline functions are provided in XAudio2.h to convert between volume units: [**XAudio2DecibelsToAmplitudeRatio**](/windows/desktop/api/xaudio2/nf-xaudio2-xaudio2decibelstoamplituderatio) and [**XAudio2AmplitudeRatioToDecibels**](/windows/desktop/api/xaudio2/nf-xaudio2-xaudio2amplituderatiotodecibels).</span></span>

<span data-ttu-id="90aad-109">Уровень громкости можно применить к звуку в нескольких точках, так как он проходит через граф XAudio2:</span><span class="sxs-lookup"><span data-stu-id="90aad-109">You can apply a volume level to the audio at several points as it flows through the XAudio2 graph:</span></span>

-   <span data-ttu-id="90aad-110">Все типы голоса применяют общий уровень громкости к входным данным, которым они управляют с помощью метода [**IXAudio2Voice:: сетволуме**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setvolume) .</span><span class="sxs-lookup"><span data-stu-id="90aad-110">All voice types apply an overall volume level to their input, which they control using the [**IXAudio2Voice::SetVolume**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setvolume) method.</span></span> <span data-ttu-id="90aad-111">В субмикс и голосовом подсчетах общий уровень громкости применяется непосредственно перед встроенным фильтром и цепочкой эффектов голоса.</span><span class="sxs-lookup"><span data-stu-id="90aad-111">In submix and mastering voices, the overall volume level is applied just before the voice's built-in filter and effect chain.</span></span> <span data-ttu-id="90aad-112">В исходных голосах общий уровень громкости применяется после встроенной цепочки фильтров и эффектов.</span><span class="sxs-lookup"><span data-stu-id="90aad-112">In source voices, the overall volume level is applied after the voice's built-in filter and effect chain.</span></span>
-   <span data-ttu-id="90aad-113">Голоса применяет уровень громкости на одном канале к выходным данным, которым они управляют с помощью метода [**IXAudio2Voice:: сетчаннелволумес**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setchannelvolumes) .</span><span class="sxs-lookup"><span data-stu-id="90aad-113">Voices apply a per-channel volume level to their output, which they control using the [**IXAudio2Voice::SetChannelVolumes**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setchannelvolumes) method.</span></span> <span data-ttu-id="90aad-114">Уровень громкости на уровне канала применяется сразу после выполнения окончательного преобразования частоты выборки голоса и перед отправкой в другие голоса.</span><span class="sxs-lookup"><span data-stu-id="90aad-114">The per-channel volume level is applied just after the voice's final sample rate conversion, and before it is sent to other voices.</span></span>
-   <span data-ttu-id="90aad-115">Каждое соединение между одним голосом и другим имеет таблицу уровней, используемую для отправки звука из каждого исходного канала в каждый целевой канал, который управляется с помощью метода [**IXAudio2Voice:: сетаутпутматрикс**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setoutputmatrix) .</span><span class="sxs-lookup"><span data-stu-id="90aad-115">Every connection between one voice and another has a table of levels used to send audio from each source channel to each target channel, which is controlled using the [**IXAudio2Voice::SetOutputMatrix**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setoutputmatrix) method.</span></span>

<span data-ttu-id="90aad-116">Изначально все тома и тома каналов по умолчанию имеют значение 1,0.</span><span class="sxs-lookup"><span data-stu-id="90aad-116">All overall volumes and channel volumes default to 1.0 initially.</span></span> <span data-ttu-id="90aad-117">Все матрицы уровня отправки по умолчанию соответствуют соответствующим значениям, что позволяет максимально точно сохранять мощность сигнала и расположение канала.</span><span class="sxs-lookup"><span data-stu-id="90aad-117">All send-level matrices default to appropriate values that preserve signal power and channel positioning as accurately as possible.</span></span> <span data-ttu-id="90aad-118">Дополнительные сведения см. в обзоре [сопоставления каналов по умолчанию XAudio2](xaudio2-default-channel-mapping.md) .</span><span class="sxs-lookup"><span data-stu-id="90aad-118">See the [XAudio2 Default Channel Mapping](xaudio2-default-channel-mapping.md) overview for details.</span></span>

> [!Note]  
> <span data-ttu-id="90aad-119">XAudio2 автоматически корректирует уровни громкости на основе параметров динамика пользователя, чтобы поддерживать согласованный уровень громкости в разных конфигурациях.</span><span class="sxs-lookup"><span data-stu-id="90aad-119">XAudio2 automatically adjusts volume levels based on the user's speaker settings to maintain a consistent volume level across configurations.</span></span> <span data-ttu-id="90aad-120">Если параметры пользователя не соответствуют физической конфигурации, том будет либо слишком громко, либо слишком мягким по сравнению с системой с правильными параметрами.</span><span class="sxs-lookup"><span data-stu-id="90aad-120">If the user's settings don't match their physical configuration the volume will either be too loud or too soft compared to a system with accurate settings.</span></span> <span data-ttu-id="90aad-121">Например, система, настроенная для звуковых динамиков 5,1, на которых подключено два динамика, будет слишком мягкой.</span><span class="sxs-lookup"><span data-stu-id="90aad-121">For example, a system configured for 5.1 surround sound speakers that only has two speakers connected will sound too soft.</span></span> <span data-ttu-id="90aad-122">XAudio2 не может определить, правильно ли настроен динамик пользователя на физическую установку.</span><span class="sxs-lookup"><span data-stu-id="90aad-122">XAudio2 is unable to detect whether the user speaker settings correctly match their physical setup.</span></span>

 

## <a name="pitch-control"></a><span data-ttu-id="90aad-123">Элемент управления "шаг"</span><span class="sxs-lookup"><span data-stu-id="90aad-123">Pitch Control</span></span>

<span data-ttu-id="90aad-124">Высота выражается в виде коэффициента ввода/вывода в диапазоне от 1 до 1024 до 1024/1 включительно.</span><span class="sxs-lookup"><span data-stu-id="90aad-124">Pitches are expressed as input rate/output rate ratios between 1/1,024 and 1,024/1, inclusive.</span></span> <span data-ttu-id="90aad-125">Отношение числа 1/1024 вниз к 10 октав, а коэффициент 1024/1 порождает его на 10 октав.</span><span class="sxs-lookup"><span data-stu-id="90aad-125">A ratio of 1/1,024 lowers pitch by 10 octaves, while a ratio of 1,024/1 raises it by 10 octaves.</span></span> <span data-ttu-id="90aad-126">Метод [**IXAudio2SourceVoice:: сетфрекуенциратио**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2sourcevoice-setfrequencyratio) можно использовать только для применения корректировок высоты к исходным голосовым и только в том случае, если они не были созданы \_ с \_ флагом XAUDIO2 Voice.</span><span class="sxs-lookup"><span data-stu-id="90aad-126">You can only use the [**IXAudio2SourceVoice::SetFrequencyRatio**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2sourcevoice-setfrequencyratio) method to apply pitch adjustments to source voices, and only if they were not created with the XAUDIO2\_VOICE\_NOPITCH flag.</span></span> <span data-ttu-id="90aad-127">Коэффициент частоты по умолчанию — 1/1: то есть без изменения высоты.</span><span class="sxs-lookup"><span data-stu-id="90aad-127">The default frequency ratio is 1/1: that is, no pitch change.</span></span> <span data-ttu-id="90aad-128">В XAudio2. h предусмотрены две встроенные функции для преобразования между коэффициентами частоты и семитонес: [**XAudio2FrequencyRatioToSemitones**](/windows/desktop/api/xaudio2/nf-xaudio2-xaudio2frequencyratiotosemitones) и [**XAudio2SemitonesToFrequencyRatio**](/windows/desktop/api/xaudio2/nf-xaudio2-xaudio2semitonestofrequencyratio).</span><span class="sxs-lookup"><span data-stu-id="90aad-128">Two inline functions are provided in XAudio2.h to convert between frequency ratios and semitones: [**XAudio2FrequencyRatioToSemitones**](/windows/desktop/api/xaudio2/nf-xaudio2-xaudio2frequencyratiotosemitones) and [**XAudio2SemitonesToFrequencyRatio**](/windows/desktop/api/xaudio2/nf-xaudio2-xaudio2semitonestofrequencyratio).</span></span>

## <a name="related-topics"></a><span data-ttu-id="90aad-129">См. также</span><span class="sxs-lookup"><span data-stu-id="90aad-129">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="90aad-130">Элемент управления "громкость и шаг"</span><span class="sxs-lookup"><span data-stu-id="90aad-130">Volume and Pitch Control</span></span>](volume-and-pitch-control.md)
</dt> <dt>

[<span data-ttu-id="90aad-131">Руководство по программированию для XAudio2</span><span class="sxs-lookup"><span data-stu-id="90aad-131">XAudio2 Programming Guide</span></span>](programming-guide.md)
</dt> <dt>

[<span data-ttu-id="90aad-132">Как изменить тон голоса</span><span class="sxs-lookup"><span data-stu-id="90aad-132">How to: Change Voice Pitch</span></span>](how-to--change-voice-pitch.md)
</dt> <dt>

[<span data-ttu-id="90aad-133">Как изменить громкость голоса</span><span class="sxs-lookup"><span data-stu-id="90aad-133">How to: Change Voice Volume</span></span>](how-to--change-voice-volume.md)
</dt> </dl>

 

 
