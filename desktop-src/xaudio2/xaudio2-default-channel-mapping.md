---
description: Клиент XAudio2 имеет полный контроль над сопоставлением каналов голоса с каналами каждого из его целевых голосов.
ms.assetid: 219d5b70-3f07-f973-f9ec-1cb3cf0be37e
title: Сопоставление канала по умолчанию XAudio2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 06d77371223ccef02d6f0831a7aea182326f8477
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104498147"
---
# <a name="xaudio2-default-channel-mapping"></a><span data-ttu-id="c06fb-103">Сопоставление канала по умолчанию XAudio2</span><span class="sxs-lookup"><span data-stu-id="c06fb-103">XAudio2 Default Channel Mapping</span></span>

<span data-ttu-id="c06fb-104">Клиент XAudio2 имеет полный контроль над сопоставлением каналов голоса с каналами каждого назначения Воицесит управляет сопоставлением с помощью метода [**IXAudio2Voice:: сетаутпутматрикс**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setoutputmatrix) .</span><span class="sxs-lookup"><span data-stu-id="c06fb-104">An XAudio2 client has full control of the mapping from the channels of a voice to the channels of each of its destination voicesIt controls the mapping through the use of the [**IXAudio2Voice::SetOutputMatrix**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setoutputmatrix) method.</span></span> <span data-ttu-id="c06fb-105">Однако в некоторых случаях XAudio2 упрощает эту задачу, настроив матрицу отправки по умолчанию автоматически.</span><span class="sxs-lookup"><span data-stu-id="c06fb-105">In some circumstances, however, XAudio2 simplifies this task by setting up a default send matrix automatically.</span></span> <span data-ttu-id="c06fb-106">Это достигается с помощью маски канала (при наличии), связанной с звуковыми каналами голоса.</span><span class="sxs-lookup"><span data-stu-id="c06fb-106">It does this by using the channel mask, if any, associated with a voice's audio channels.</span></span> <span data-ttu-id="c06fb-107">Маска канала — это сочетание \_ побитовых масок «динамика XXX», определенное в X3DAudio. h и других.</span><span class="sxs-lookup"><span data-stu-id="c06fb-107">A channel mask is a combination of SPEAKER\_xxx bit masks as defined in X3DAudio.h and elsewhere.</span></span> <span data-ttu-id="c06fb-108">XAudio2 требует, чтобы маски каналов были равны 0 или имели одинаковое число бит, равное количеству каналов.</span><span class="sxs-lookup"><span data-stu-id="c06fb-108">XAudio2 requires channel masks to be 0 or have the same number of bits set as the number of channels.</span></span>

<span data-ttu-id="c06fb-109">В следующей таблице приведены требования к маске канала и значения по умолчанию для форматов, поддерживаемых XAudio2.</span><span class="sxs-lookup"><span data-stu-id="c06fb-109">The following table shows the channel mask requirements and defaults for the formats supported by XAudio2.</span></span> 

| <span data-ttu-id="c06fb-110">Формат</span><span class="sxs-lookup"><span data-stu-id="c06fb-110">Format</span></span> | <span data-ttu-id="c06fb-111">Требование маски канала</span><span class="sxs-lookup"><span data-stu-id="c06fb-111">Channel Mask Requirement</span></span>             | <span data-ttu-id="c06fb-112">Маска по умолчанию</span><span class="sxs-lookup"><span data-stu-id="c06fb-112">Default Mask</span></span>                        | <span data-ttu-id="c06fb-113">Соответствующий член структуры</span><span class="sxs-lookup"><span data-stu-id="c06fb-113">Corresponding Structure Member</span></span>                            |
|--------|--------------------------------------|-------------------------------------|-----------------------------------------------------------|
| <span data-ttu-id="c06fb-114">PCM</span><span class="sxs-lookup"><span data-stu-id="c06fb-114">PCM</span></span>    | <span data-ttu-id="c06fb-115">Файл может содержать маску канала</span><span class="sxs-lookup"><span data-stu-id="c06fb-115">File might contain a channel mask</span></span>    | <span data-ttu-id="c06fb-116">Маска канала равна 0 или отсутствует</span><span class="sxs-lookup"><span data-stu-id="c06fb-116">Channel mask is 0, or absent</span></span>        | <span data-ttu-id="c06fb-117">ВАВЕФОРМАТЕКСТЕНСИБЛЕ. Двчаннелмаск или None (ВАВЕФОРМАТЕКС)</span><span class="sxs-lookup"><span data-stu-id="c06fb-117">WAVEFORMATEXTENSIBLE.dwChannelMask or none (WAVEFORMATEX)</span></span> |
| <span data-ttu-id="c06fb-118">СЖАТИЯ</span><span class="sxs-lookup"><span data-stu-id="c06fb-118">ADPCM</span></span>  | <span data-ttu-id="c06fb-119">Файл не содержит маску канала</span><span class="sxs-lookup"><span data-stu-id="c06fb-119">File does not contain a channel mask</span></span> | <span data-ttu-id="c06fb-120">Маска канала по умолчанию используется всегда</span><span class="sxs-lookup"><span data-stu-id="c06fb-120">Default Channel Mask is always used</span></span> | <span data-ttu-id="c06fb-121">Нет (АДПКМВАВЕФОРМАТ)</span><span class="sxs-lookup"><span data-stu-id="c06fb-121">None (ADPCMWAVEFORMAT)</span></span>                                    |



 

<span data-ttu-id="c06fb-122">Для субмикс и голосов, а также для исходных голосов без маски канала или маски канала, равным 0, XAudio2 предполагает положение динамиков по умолчанию в соответствии со следующей таблицей.</span><span class="sxs-lookup"><span data-stu-id="c06fb-122">For submix and mastering voices, and for source voices without a channel mask or a channel mask of 0, XAudio2 assumes default speaker positions according to the following table.</span></span> 

| <span data-ttu-id="c06fb-123">Каналы</span><span class="sxs-lookup"><span data-stu-id="c06fb-123">Channels</span></span>  | <span data-ttu-id="c06fb-124">Неявные позиции канала</span><span class="sxs-lookup"><span data-stu-id="c06fb-124">Implicit Channel Positions</span></span>                                                                                            |
|-----------|-----------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="c06fb-125">1</span><span class="sxs-lookup"><span data-stu-id="c06fb-125">1</span></span>         | <span data-ttu-id="c06fb-126">Всегда сопоставляется с Фронтлефт и Фронтригхт в полном масштабе на обоих докладчиках (особый случай для звуков Mono).</span><span class="sxs-lookup"><span data-stu-id="c06fb-126">Always maps to FrontLeft and FrontRight at full scale in both speakers (special case for mono sounds)</span></span>                 |
| <span data-ttu-id="c06fb-127">2</span><span class="sxs-lookup"><span data-stu-id="c06fb-127">2</span></span>         | <span data-ttu-id="c06fb-128">Фронтлефт, Фронтригхт (базовая конфигурация стерео)</span><span class="sxs-lookup"><span data-stu-id="c06fb-128">FrontLeft, FrontRight (basic stereo configuration)</span></span>                                                                    |
| <span data-ttu-id="c06fb-129">3</span><span class="sxs-lookup"><span data-stu-id="c06fb-129">3</span></span>         | <span data-ttu-id="c06fb-130">Фронтлефт, Фронтригхт, Ловфрекуенци (Конфигурация 2,1)</span><span class="sxs-lookup"><span data-stu-id="c06fb-130">FrontLeft, FrontRight, LowFrequency (2.1 configuration)</span></span>                                                               |
| <span data-ttu-id="c06fb-131">4</span><span class="sxs-lookup"><span data-stu-id="c06fb-131">4</span></span>         | <span data-ttu-id="c06fb-132">Фронтлефт, Фронтригхт, Left, Right (куадрафоник)</span><span class="sxs-lookup"><span data-stu-id="c06fb-132">FrontLeft, FrontRight, BackLeft, BackRight (quadraphonic)</span></span>                                                             |
| <span data-ttu-id="c06fb-133">5</span><span class="sxs-lookup"><span data-stu-id="c06fb-133">5</span></span>         | <span data-ttu-id="c06fb-134">Фронтлефт, Фронтригхт, Фронтцентер, Сиделефт, Сидеригхт (конфигурация 5,0)</span><span class="sxs-lookup"><span data-stu-id="c06fb-134">FrontLeft, FrontRight, FrontCenter, SideLeft, SideRight (5.0 configuration)</span></span>                                           |
| <span data-ttu-id="c06fb-135">6</span><span class="sxs-lookup"><span data-stu-id="c06fb-135">6</span></span>         | <span data-ttu-id="c06fb-136">Фронтлефт, Фронтригхт, Фронтцентер, Ловфрекуенци, Сиделефт, Сидеригхт (конфигурация 5,1) (см. следующие замечания)</span><span class="sxs-lookup"><span data-stu-id="c06fb-136">FrontLeft, FrontRight, FrontCenter, LowFrequency, SideLeft, SideRight (5.1 configuration) (see the following remarks)</span></span> |
| <span data-ttu-id="c06fb-137">7</span><span class="sxs-lookup"><span data-stu-id="c06fb-137">7</span></span>         | <span data-ttu-id="c06fb-138">Фронтлефт, Фронтригхт, Фронтцентер, Ловфрекуенци, Сиделефт, Сидеригхт, (конфигурация 6,1)</span><span class="sxs-lookup"><span data-stu-id="c06fb-138">FrontLeft, FrontRight, FrontCenter, LowFrequency, SideLeft, SideRight, BackCenter (6.1 configuration)</span></span>                 |
| <span data-ttu-id="c06fb-139">8</span><span class="sxs-lookup"><span data-stu-id="c06fb-139">8</span></span>         | <span data-ttu-id="c06fb-140">Фронтлефт, Фронтригхт, Фронтцентер, Ловфрекуенци, Left, Right, Сиделефт, Сидеригхт (конфигурация 7,1)</span><span class="sxs-lookup"><span data-stu-id="c06fb-140">FrontLeft, FrontRight, FrontCenter, LowFrequency, BackLeft, BackRight, SideLeft, SideRight (7.1 configuration)</span></span>        |
| <span data-ttu-id="c06fb-141">9 или более</span><span class="sxs-lookup"><span data-stu-id="c06fb-141">9 or more</span></span> | <span data-ttu-id="c06fb-142">Неявные позиции (сопоставление "один к одному")</span><span class="sxs-lookup"><span data-stu-id="c06fb-142">No implicit positions (one-to-one mapping)</span></span>                                                                            |



 

<span data-ttu-id="c06fb-143">Если в данной паре голосов в звуковой диаграмме нет положений о динамиках, связанных с исходным или целевым голосом (в одном из них больше восьми каналов), то ни один из них не будет воспроизводиться, пока исходный голос не получит матрицу отправки исходного голоса явным образом с помощью метода [**IXAudio2Voice:: сетаутпутматрикс**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setoutputmatrix) .</span><span class="sxs-lookup"><span data-stu-id="c06fb-143">If a given voice pair in the audio graph has no speaker positions associated with either its source or target voice (one voice has more than eight channels), neither voice is playable until the source voice has a send matrix set explicitly using the [**IXAudio2Voice::SetOutputMatrix**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setoutputmatrix) method.</span></span> <span data-ttu-id="c06fb-144">Вызов метода [**IXAudio2SourceVoice:: Start**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2sourcevoice-start) для обоих голосов завершится ошибкой, пока вы не сделаете это.</span><span class="sxs-lookup"><span data-stu-id="c06fb-144">Calling the [**IXAudio2SourceVoice::Start**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2sourcevoice-start) method for either voice will fail until you do this.</span></span>

<span data-ttu-id="c06fb-145">Если исходный и целевой голоса имеют разное количество положений докладчика и [**IXAudio2Voice:: сетаутпутматрикс**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setoutputmatrix) не были вызваны на исходном голоса, XAudio2 отправляет каждый исходный канал ближайшему целевому докладчику (или колонкам), пропорционально близкому к предполагаемому докладчику.</span><span class="sxs-lookup"><span data-stu-id="c06fb-145">If the source voice and target voice have different numbers of speaker positions and [**IXAudio2Voice::SetOutputMatrix**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2voice-setoutputmatrix) has not been called on the source voice, XAudio2 sends each source channel to the nearest target speaker (or speakers) available, proportionally to how close they are to the intended speaker.</span></span> <span data-ttu-id="c06fb-146">Существует два особых случая, когда поведение по умолчанию отличается.</span><span class="sxs-lookup"><span data-stu-id="c06fb-146">There are two special cases where the default behavior is different.</span></span>

1.  <span data-ttu-id="c06fb-147">Если исходный аудио-файл находится в положении моно и находится на \_ передней панели докладчика \_ или не имеет определенной позиции, он всегда отправляется на \_ передний план \_ слева и на \_ передний план спереди \_ справа, если они существуют на выходном аудио.</span><span class="sxs-lookup"><span data-stu-id="c06fb-147">If the source audio is mono and is positioned at SPEAKER\_FRONT\_CENTER or has no defined position, it is always sent to SPEAKER\_FRONT\_LEFT and SPEAKER\_FRONT\_RIGHT if they exist in the output audio.</span></span> <span data-ttu-id="c06fb-148">Если они не существуют, возвращается к нормальному регистру.</span><span class="sxs-lookup"><span data-stu-id="c06fb-148">If they do not exist, it falls back to the normal case.</span></span>
2.  <span data-ttu-id="c06fb-149">Если источником и назначением являются 6 каналов и они расположены по одному из стандартных настроек динамика 5,1 (слева + справа + Center + вспомогательное + резервное + или слева + справа + Center + подсторона + Side), каналы сопоставляются друг с другом.</span><span class="sxs-lookup"><span data-stu-id="c06fb-149">If the source and destination are both 6-channel and are positioned at either of the standard 5.1 speaker setups (Left+Right+Center+Sub+BackL+BackR or Left+Right+Center+Sub+SideL+SideR), channels are mapped through one to one.</span></span> <span data-ttu-id="c06fb-150">Иными словами, Сиделефт/Right и Left/Right считаются эквивалентными.</span><span class="sxs-lookup"><span data-stu-id="c06fb-150">In other words, SideLeft/Right and BackLeft/Right are treated equivalently.</span></span> <span data-ttu-id="c06fb-151">Это обусловлено тем, что в ходе этих настроек произошла историческая путаница.</span><span class="sxs-lookup"><span data-stu-id="c06fb-151">This is because there has been historical confusion around these setups.</span></span> <span data-ttu-id="c06fb-152">Поэтому предполагаемое намерение всегда сопоставляется с одним.</span><span class="sxs-lookup"><span data-stu-id="c06fb-152">Therefore, the assumed intent is always to map one to one.</span></span>

## <a name="related-topics"></a><span data-ttu-id="c06fb-153">См. также</span><span class="sxs-lookup"><span data-stu-id="c06fb-153">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c06fb-154">Голоса</span><span class="sxs-lookup"><span data-stu-id="c06fb-154">Voices</span></span>](voices.md)
</dt> <dt>

[<span data-ttu-id="c06fb-155">Руководство по программированию для XAudio2</span><span class="sxs-lookup"><span data-stu-id="c06fb-155">XAudio2 Programming Guide</span></span>](programming-guide.md)
</dt> <dt>

[<span data-ttu-id="c06fb-156">**жетчаннелмаск**</span><span class="sxs-lookup"><span data-stu-id="c06fb-156">**GetChannelMask**</span></span>](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2masteringvoice-getchannelmask)
</dt> </dl>

 

 
