---
description: В следующем примере сокет MultiPoint часто описывается путем определения его роли на одной из двух плоскостей (управление или данные).
ms.assetid: 34f639e2-9363-4f3f-a8de-b7c5d12618c9
title: Семантика присоединения к листьям MultiPoint
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df12683838fbad89f717b08d7a19802f24556761
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105702088"
---
# <a name="semantics-for-joining-multipoint-leaves"></a><span data-ttu-id="52367-103">Семантика присоединения к листьям MultiPoint</span><span class="sxs-lookup"><span data-stu-id="52367-103">Semantics for Joining Multipoint Leaves</span></span>

<span data-ttu-id="52367-104">В следующем примере сокет MultiPoint часто описывается путем определения его роли на одной из двух плоскостей (управление или данные).</span><span class="sxs-lookup"><span data-stu-id="52367-104">In the following, a multipoint socket is frequently described by defining its role in one of the two planes (control or data).</span></span> <span data-ttu-id="52367-105">Следует понимать, что у того же сокета есть роль в другой плоскости, но это не упоминается для того, чтобы обеспечить короткий вид ссылок.</span><span class="sxs-lookup"><span data-stu-id="52367-105">It should be understood that this same socket has a role in the other plane, but this is not mentioned in order to keep the references short.</span></span> <span data-ttu-id="52367-106">Например, при создании ссылки на "c-" \_ корневой сокет "это может быть \_ корневой или d-или корневой \_ \_ сокет c \_ .</span><span class="sxs-lookup"><span data-stu-id="52367-106">For example when a reference is made to a "c\_root socket", this could be either a c\_root/d\_root or a c\_root/d\_leaf socket.</span></span>

<span data-ttu-id="52367-107">В схемах плоскости управления с корнями новые конечные узлы добавляются в сеанс MultiPoint одним или двумя разными способами.</span><span class="sxs-lookup"><span data-stu-id="52367-107">In rooted control plane schemes, new leaf nodes are added to a multipoint session in one or both of two different ways.</span></span> <span data-ttu-id="52367-108">В первом методе корень использует [**всажоинлеаф**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) для инициации подключения к конечному узлу и его появления в качестве участника.</span><span class="sxs-lookup"><span data-stu-id="52367-108">In the first method, the root uses [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) to initiate a connection with a leaf node and to invite it to become a participant.</span></span> <span data-ttu-id="52367-109">На конечном узле одноранговый узел должен создать \_ конечный сокет c и использовать [**Listen**](/windows/desktop/api/Winsock2/nf-winsock2-listen) , чтобы присвоить ему режим прослушивания.</span><span class="sxs-lookup"><span data-stu-id="52367-109">On the leaf node, the peer application must have created a c\_leaf socket and used [**listen**](/windows/desktop/api/Winsock2/nf-winsock2-listen) to set it into listen mode.</span></span> <span data-ttu-id="52367-110">Конечный узел получает уведомление о принятии ДЕМОна \_ , когда приглашено присоединиться к сеансу, и сигнализирует о его готовности присоединиться к вызову [**всаакцепт**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept).</span><span class="sxs-lookup"><span data-stu-id="52367-110">The leaf node receives an FD\_ACCEPT indication when invited to join the session, and signals its willingness to join by calling [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept).</span></span> <span data-ttu-id="52367-111">\_После завершения операции **соединения** корневое приложение получает уведомление демона по подключению.</span><span class="sxs-lookup"><span data-stu-id="52367-111">The root application then receives an FD\_CONNECT indication when the **join** operation has been completed.</span></span>

<span data-ttu-id="52367-112">Во втором методе роли по сути реверсируются.</span><span class="sxs-lookup"><span data-stu-id="52367-112">In the second method, the roles are essentially reversed.</span></span> <span data-ttu-id="52367-113">Корневое приложение создает \_ корневой сокет c и переводит его в режим прослушивания.</span><span class="sxs-lookup"><span data-stu-id="52367-113">The root application creates a c\_root socket and sets it into listen mode.</span></span> <span data-ttu-id="52367-114">Конечный узел, желающий присоединиться к сеансу, создает \_ конечный сокет c и использует [**всажоинлеаф**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) для инициации подключения и запроса поступления.</span><span class="sxs-lookup"><span data-stu-id="52367-114">A leaf node wishing to join the session creates a c\_leaf socket and uses [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) to initiate the connection and request admittance.</span></span> <span data-ttu-id="52367-115">Корневое приложение получает ДЕМОна \_ по разпринятию при поступлении входящего запроса поступления и доставляет конечный узел путем вызова [**всаакцепт**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept).</span><span class="sxs-lookup"><span data-stu-id="52367-115">The root application receives FD\_ACCEPT when an incoming admittance request arrives, and admits the leaf node by calling [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept).</span></span> <span data-ttu-id="52367-116">Конечный узел получает демон \_ по подключению, когда он был допущен.</span><span class="sxs-lookup"><span data-stu-id="52367-116">The leaf node receives FD\_CONNECT when it has been admitted.</span></span>

<span data-ttu-id="52367-117">В некорневой плоскости управления, где все узлы имеют конечный объект c \_ , [**всажоинлеаф**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) используется для инициирования включения узла в существующий сеанс MultiPoint.</span><span class="sxs-lookup"><span data-stu-id="52367-117">In a nonrooted control plane, where all nodes are c\_leaf's, the [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) is used to initiate the inclusion of a node into an existing multipoint session.</span></span> <span data-ttu-id="52367-118">\_Если соединение завершено, а возвращенный дескриптор сокета используется в сеансе MultiPoint, указывается индикатор соединения с помощью фильтра.</span><span class="sxs-lookup"><span data-stu-id="52367-118">An FD\_CONNECT indication is provided when the join has been completed and the returned socket descriptor is usable in the multipoint session.</span></span> <span data-ttu-id="52367-119">В случае многоадресной рассылки IP это будет соответствовать \_ параметру IP-добавления \_ сокета.</span><span class="sxs-lookup"><span data-stu-id="52367-119">In the case of IP multicast, this would correspond to the IP\_ADD\_MEMBERSHIP socket option.</span></span>

<span data-ttu-id="52367-120">(Читатели, знакомые с использованием многоадресного протокола UDP без подключения, могут думать о семантике, ориентированной на подключение, представленной здесь.</span><span class="sxs-lookup"><span data-stu-id="52367-120">(Readers familiar with IP multicast's use of the connectionless UDP protocol may be concerned by the connection-oriented semantics presented here.</span></span> <span data-ttu-id="52367-121">В частности, понятие использования [**всажоинлеаф**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) на сокете UDP и ожидание индикации подключения демо-фильтра \_ может быть беспокоят.</span><span class="sxs-lookup"><span data-stu-id="52367-121">In particular the notion of using [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) on a UDP socket and waiting for an FD\_CONNECT indication may be troubling.</span></span> <span data-ttu-id="52367-122">Однако, очень важно применять семантику, ориентированную на подключение, к протоколам без подключения.</span><span class="sxs-lookup"><span data-stu-id="52367-122">There is, however, ample precedent for applying connection-oriented semantics to connectionless protocols.</span></span> <span data-ttu-id="52367-123">Это разрешено и иногда полезно, например, для вызова стандартной функции [**Connect**](/windows/desktop/api/Winsock2/nf-winsock2-connect) на сокете UDP.</span><span class="sxs-lookup"><span data-stu-id="52367-123">It is allowed and sometimes useful, for example, to invoke the standard [**connect**](/windows/desktop/api/Winsock2/nf-winsock2-connect) function on a UDP socket.</span></span> <span data-ttu-id="52367-124">Общий результат применения семантики, ориентированной на соединение, к сокетам без подключения, — это ограничение использования таких сокетов, а также в этом случае.</span><span class="sxs-lookup"><span data-stu-id="52367-124">The general result of applying connection-oriented semantics to connectionless sockets is a restriction in how such sockets may be used, and this is the case here, as well.</span></span> <span data-ttu-id="52367-125">Сокет UDP, используемый в **всажоинлеаф** , будет иметь определенные ограничения и ожидать \_ указания по подключению к демо-фильтра (которое в данном случае просто означает, что соответствующее сообщение IGMP было отправлено) — одно из таких ограничений.)</span><span class="sxs-lookup"><span data-stu-id="52367-125">A UDP socket used in **WSAJoinLeaf** will have certain restrictions, and waiting for an FD\_CONNECT indication (which in this case simply indicates that the corresponding IGMP message has been sent) is one such limitation.)</span></span>

<span data-ttu-id="52367-126">В связи с этим три экземпляра, где приложение будет использовать [**всажоинлеаф**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) , выступающее в качестве:</span><span class="sxs-lookup"><span data-stu-id="52367-126">There are therefore, three instances where an application would use [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) acting as a:</span></span>

-   <span data-ttu-id="52367-127">Корневой узел MultiPoint и приглашение нового листа для приподключения к сеансу</span><span class="sxs-lookup"><span data-stu-id="52367-127">Multipoint root and inviting a new leaf to join the session</span></span>
-   <span data-ttu-id="52367-128">Конечный объект, выполняющий запрос поступления к корневому сеансу MultiPoint</span><span class="sxs-lookup"><span data-stu-id="52367-128">Leaf making an admittance request to a rooted multipoint session</span></span>
-   <span data-ttu-id="52367-129">Конечный Поиск поступления в некорневом сеансе MultiPoint (например, многоадресная рассылка IP)</span><span class="sxs-lookup"><span data-stu-id="52367-129">Leaf seeking admittance to a nonrooted multipoint session (for example, IP multicast)</span></span>

 

 



