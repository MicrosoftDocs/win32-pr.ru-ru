---
description: В следующей таблице описаны \_ параметры сокета иппрото UDP, применяемые к сокетам, созданным для семейств IPv4 и IPv6-адресов (AF \_ INET и AF \_ INET6) с параметром протокола для функции сокета, указанной как UDP (иппрото \_ UDP).
ms.assetid: 579448a1-22af-488f-a1f5-97ba69a15524
title: Параметры сокета IPPROTO_UDP
ms.topic: article
ms.date: 10/02/2019
ms.openlocfilehash: 6f1f25ebae34d7db4290ab23bbf799fc0e0b68df
ms.sourcegitcommit: c8ec1ded1ffffc364d3c4f560bb2171da0dc5040
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "105704355"
---
# <a name="ipproto_udp-socket-options"></a><span data-ttu-id="0f183-103">\_Параметры сокета UDP иппрото</span><span class="sxs-lookup"><span data-stu-id="0f183-103">IPPROTO\_UDP socket options</span></span>

<span data-ttu-id="0f183-104">В следующей таблице описаны параметры сокета **иппрото \_ UDP** , применяемые к сокетам, созданным для семейств IPv4 и IPv6-адресов (AF \_ INET и AF \_ INET6) с параметром *протокола* для функции [**сокета**](/windows/win32/api/Winsock2/nf-winsock2-socket) , указанной как UDP (иппрото \_ UDP).</span><span class="sxs-lookup"><span data-stu-id="0f183-104">The following table describes **IPPROTO\_UDP** socket options that apply to sockets created for the IPv4 and IPv6 address families (AF\_INET and AF\_INET6) with the *protocol* parameter to the [**socket**](/windows/win32/api/Winsock2/nf-winsock2-socket) function specified as UDP (IPPROTO\_UDP).</span></span> <span data-ttu-id="0f183-105">Дополнительные сведения о получении и настройке параметров сокета см. на страницах справочника по функциям [**жетсоккопт**](/windows/win32/api/winsock/nf-winsock-getsockopt) и [**сетсоккопт**](/windows/win32/api/winsock/nf-winsock-setsockopt) .</span><span class="sxs-lookup"><span data-stu-id="0f183-105">See the [**getsockopt**](/windows/win32/api/winsock/nf-winsock-getsockopt) and [**setsockopt**](/windows/win32/api/winsock/nf-winsock-setsockopt) function reference pages for more information on getting and setting socket options.</span></span>

<span data-ttu-id="0f183-106">Для перечисления протоколов и обнаружения поддерживаемых свойств для каждого установленного протокола используйте функцию [**всаенумпротоколс**](/windows/win32/api/Winsock2/nf-winsock2-wsaenumprotocolsa), [**всценумпротоколс**](/windows/win32/api/Ws2spi/nf-ws2spi-wscenumprotocols)или [**WSCEnumProtocols32**](/windows/win32/api/Ws2spi/nf-ws2spi-wscenumprotocols32) .</span><span class="sxs-lookup"><span data-stu-id="0f183-106">To enumerate protocols and discover supported properties for each installed protocol, use the [**WSAEnumProtocols**](/windows/win32/api/Winsock2/nf-winsock2-wsaenumprotocolsa), [**WSCEnumProtocols**](/windows/win32/api/Ws2spi/nf-ws2spi-wscenumprotocols), or [**WSCEnumProtocols32**](/windows/win32/api/Ws2spi/nf-ws2spi-wscenumprotocols32) function.</span></span>

## <a name="options"></a><span data-ttu-id="0f183-107">Параметры</span><span class="sxs-lookup"><span data-stu-id="0f183-107">Options</span></span>

| <span data-ttu-id="0f183-108">Параметр</span><span class="sxs-lookup"><span data-stu-id="0f183-108">Option</span></span> | <span data-ttu-id="0f183-109">Получить</span><span class="sxs-lookup"><span data-stu-id="0f183-109">Get</span></span> | <span data-ttu-id="0f183-110">Присвойте параметру</span><span class="sxs-lookup"><span data-stu-id="0f183-110">Set</span></span> | <span data-ttu-id="0f183-111">Тип оптвал</span><span class="sxs-lookup"><span data-stu-id="0f183-111">Optval type</span></span> | <span data-ttu-id="0f183-112">Описание</span><span class="sxs-lookup"><span data-stu-id="0f183-112">Description</span></span> |
|-|-|-|-|-|
| <span data-ttu-id="0f183-113">\_Объем контрольной суммы UDP \_ (ws2tcpip. h)</span><span class="sxs-lookup"><span data-stu-id="0f183-113">UDP\_CHECKSUM\_COVERAGE (ws2tcpip.h)</span></span> | <span data-ttu-id="0f183-114">да</span><span class="sxs-lookup"><span data-stu-id="0f183-114">yes</span></span> | <span data-ttu-id="0f183-115">да</span><span class="sxs-lookup"><span data-stu-id="0f183-115">yes</span></span> | <span data-ttu-id="0f183-116">DWORD (логическое значение)</span><span class="sxs-lookup"><span data-stu-id="0f183-116">DWORD (boolean)</span></span> | <span data-ttu-id="0f183-117">Если **значение равно true**, UDP-датаграммы отправляются с использованием контрольной суммы.</span><span class="sxs-lookup"><span data-stu-id="0f183-117">When **TRUE**, UDP datagrams are sent with a checksum.</span></span> |
| <span data-ttu-id="0f183-118">\_НЕконтрольная сумма UDP (ws2tcpip. h)</span><span class="sxs-lookup"><span data-stu-id="0f183-118">UDP\_NOCHECKSUM (ws2tcpip.h)</span></span> | <span data-ttu-id="0f183-119">да</span><span class="sxs-lookup"><span data-stu-id="0f183-119">yes</span></span> | <span data-ttu-id="0f183-120">да</span><span class="sxs-lookup"><span data-stu-id="0f183-120">yes</span></span> | <span data-ttu-id="0f183-121">DWORD (логическое значение)</span><span class="sxs-lookup"><span data-stu-id="0f183-121">DWORD (boolean)</span></span> | <span data-ttu-id="0f183-122">Если **значение равно true**, UDP-датаграммы отправляются с контрольной суммой, равной нулю.</span><span class="sxs-lookup"><span data-stu-id="0f183-122">When **TRUE**, UDP datagrams are sent with the checksum of zero.</span></span> <span data-ttu-id="0f183-123">Требуется для поставщиков услуг.</span><span class="sxs-lookup"><span data-stu-id="0f183-123">Required for service providers.</span></span> <span data-ttu-id="0f183-124">Если поставщик услуг не имеет механизма для отключения вычисления контрольной суммы UDP, он может просто сохранить этот параметр, не принимая никаких действий.</span><span class="sxs-lookup"><span data-stu-id="0f183-124">If a service provider does not have a mechanism to disable UDP checksum calculation, it may simply store this option without taking any action.</span></span> <span data-ttu-id="0f183-125">Этот параметр не поддерживается для IPv6.</span><span class="sxs-lookup"><span data-stu-id="0f183-125">This option is not supported for IPv6.</span></span> |
| <span data-ttu-id="0f183-126">UDP_RECV_MAX_COALESCED_SIZE (ws2ipdef. h; include ws2tcpip. h)</span><span class="sxs-lookup"><span data-stu-id="0f183-126">UDP_RECV_MAX_COALESCED_SIZE (ws2ipdef.h; include ws2tcpip.h)</span></span> | <span data-ttu-id="0f183-127">да</span><span class="sxs-lookup"><span data-stu-id="0f183-127">yes</span></span> | <span data-ttu-id="0f183-128">да</span><span class="sxs-lookup"><span data-stu-id="0f183-128">yes</span></span> | <span data-ttu-id="0f183-129">DWORD</span><span class="sxs-lookup"><span data-stu-id="0f183-129">DWORD</span></span> | <span data-ttu-id="0f183-130">Если задано ненулевое значение, несколько полученных датаграмм могут быть объединены в один буфер сообщений, прежде чем они будут указаны приложению.</span><span class="sxs-lookup"><span data-stu-id="0f183-130">When set to a non-zero value, multiple received datagrams may be coalesced into a single message buffer before being indicated to your application.</span></span> <span data-ttu-id="0f183-131">Значение параметра представляет максимальный размер сообщения в байтах для Объединенных сообщений, которые могут быть указаны для приложения.</span><span class="sxs-lookup"><span data-stu-id="0f183-131">The option value represents the maximum message size in bytes for coalesced messages that can be indicated to your application.</span></span> <span data-ttu-id="0f183-132">Необъединенные сообщения, превышающие значение параметра, могут по-прежнему быть указаны.</span><span class="sxs-lookup"><span data-stu-id="0f183-132">Un-coalesced messages larger than the option value may still be indicated.</span></span> <span data-ttu-id="0f183-133">Значение по умолчанию — 0 (без объединения).</span><span class="sxs-lookup"><span data-stu-id="0f183-133">The default value is 0 (no coalescing).</span></span> <span data-ttu-id="0f183-134">Датаграммы будут объединены, только если они поступили с одного и того же исходного адреса и порта.</span><span class="sxs-lookup"><span data-stu-id="0f183-134">Datagrams will only be coalesced if they originated from the same source address and port.</span></span> <span data-ttu-id="0f183-135">Все объединенные датаграммы имеют одинаковый размер &mdash; , за исключением последней датаграммы, которая может быть меньше.</span><span class="sxs-lookup"><span data-stu-id="0f183-135">All datagrams coalesced will be of the same size&mdash;except the last datagram, which may be smaller.</span></span> <span data-ttu-id="0f183-136">Если приложению требуется получить размеры датаграмм (за исключением последней датаграммы, которая может различаться), необходимо использовать API приема, который поддерживает управляющую информацию (например, [**LPFN_WSARECVMSG (всареквмсг)**](/windows/win32/api/mswsock/nc-mswsock-lpfn_wsarecvmsg)).</span><span class="sxs-lookup"><span data-stu-id="0f183-136">If your application wants to retrieve the datagram sizes (except the last datagram, which may differ) that were coalesced, you must use a receive API that supports control information (such as [**LPFN_WSARECVMSG (WSARecvMsg)**](/windows/win32/api/mswsock/nc-mswsock-lpfn_wsarecvmsg)).</span></span> <span data-ttu-id="0f183-137">Размер всех сообщений, кроме последнего, можно найти в сообщении управления **UDP_COALESCED_INFO** , которое имеет тип DWORD.</span><span class="sxs-lookup"><span data-stu-id="0f183-137">The size of all but the last message can be found in the **UDP_COALESCED_INFO** control message, which is of type DWORD.</span></span> <span data-ttu-id="0f183-138">Для обеспечения безопасности типа приложение должно использовать функции [всажетудпреквмакскоалесцедсизе](/windows/win32/api/ws2tcpip/nf-ws2tcpip-wsagetudprecvmaxcoalescedsize) и [всасетудпреквмакскоалесцедсизе](/windows/win32/api/ws2tcpip/nf-ws2tcpip-wsasetudprecvmaxcoalescedsize) , а не параметр сокета напрямую.</span><span class="sxs-lookup"><span data-stu-id="0f183-138">For type safety, your application should use the [WSAGetUdpRecvMaxCoalescedSize](/windows/win32/api/ws2tcpip/nf-ws2tcpip-wsagetudprecvmaxcoalescedsize) and [WSASetUdpRecvMaxCoalescedSize](/windows/win32/api/ws2tcpip/nf-ws2tcpip-wsasetudprecvmaxcoalescedsize) functions instead of the socket option directly.</span></span> |
| <span data-ttu-id="0f183-139">UDP_SEND_MSG_SIZE (ws2ipdef. h; include ws2tcpip. h)</span><span class="sxs-lookup"><span data-stu-id="0f183-139">UDP_SEND_MSG_SIZE (ws2ipdef.h; include ws2tcpip.h)</span></span> | <span data-ttu-id="0f183-140">да</span><span class="sxs-lookup"><span data-stu-id="0f183-140">yes</span></span> | <span data-ttu-id="0f183-141">да</span><span class="sxs-lookup"><span data-stu-id="0f183-141">yes</span></span> | <span data-ttu-id="0f183-142">DWORD</span><span class="sxs-lookup"><span data-stu-id="0f183-142">DWORD</span></span> | <span data-ttu-id="0f183-143">Если задано ненулевое значение, буферы, отправленные приложением, разбиваются на несколько сообщений в сетевом стеке.</span><span class="sxs-lookup"><span data-stu-id="0f183-143">When set to a non-zero value, buffers sent by your application are broken down into multiple messages by the networking stack.</span></span> <span data-ttu-id="0f183-144">Значение параметра представляет размер каждого неработающего сообщения.</span><span class="sxs-lookup"><span data-stu-id="0f183-144">The option value represents the size of each broken-down message.</span></span> <span data-ttu-id="0f183-145">Значение параметра представлено в байтах.</span><span class="sxs-lookup"><span data-stu-id="0f183-145">The option value is represented in bytes.</span></span> <span data-ttu-id="0f183-146">Размер последнего сегмента может быть меньше значения параметра.</span><span class="sxs-lookup"><span data-stu-id="0f183-146">The last segment's size may be less than the value of the option.</span></span> <span data-ttu-id="0f183-147">Значение по умолчанию — 0 (без сегментации).</span><span class="sxs-lookup"><span data-stu-id="0f183-147">The default value is 0 (no segmentation).</span></span> <span data-ttu-id="0f183-148">В приложении должно быть задано значение меньше MTU пути к местам назначения, чтобы избежать фрагментации IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="0f183-148">Your application should set a value that is lower than the MTU of the path to the destination(s) in order to avoid IP fragmentation.</span></span> <span data-ttu-id="0f183-149">Для обеспечения безопасности типа приложение должно использовать функции [всажетудпсендмессажесизе](/windows/win32/api/ws2tcpip/nf-ws2tcpip-wsagetudpsendmessagesize) и [всасетудпсендмессажесизе](/windows/win32/api/ws2tcpip/nf-ws2tcpip-wsasetudpsendmessagesize) , а не параметр сокета напрямую.</span><span class="sxs-lookup"><span data-stu-id="0f183-149">For type safety, your application should use the [WSAGetUdpSendMessageSize](/windows/win32/api/ws2tcpip/nf-ws2tcpip-wsagetudpsendmessagesize) and [WSASetUdpSendMessageSize](/windows/win32/api/ws2tcpip/nf-ws2tcpip-wsasetudpsendmessagesize) functions instead of the socket option directly.</span></span> |

## <a name="legacy-windows-support-for-ipproto_udp-options"></a><span data-ttu-id="0f183-150">Устаревшая поддержка Windows для \_ параметров UDP иппрото</span><span class="sxs-lookup"><span data-stu-id="0f183-150">Legacy Windows support for IPPROTO\_UDP options</span></span>

<span data-ttu-id="0f183-151">**UDP-порт \_ \_Покрытие контрольной суммы** недоступно в Windows 2000 и Windows NT4.</span><span class="sxs-lookup"><span data-stu-id="0f183-151">**UDP\_CHECKSUM\_COVERAGE** is unavailable on Windows 2000 and on Windows NT4.</span></span> <span data-ttu-id="0f183-152">**UDP-порт \_ В \_** Windows 9x/Me недоступна контрольная сумма и некоторая **\_ Сумма UDP** .</span><span class="sxs-lookup"><span data-stu-id="0f183-152">**UDP\_CHECKSUM\_COVERAGE** and **UDP\_NOCHECKSUM** are unavailable on Windows 9x/Me.</span></span> 

## <a name="remarks"></a><span data-ttu-id="0f183-153">Комментарии</span><span class="sxs-lookup"><span data-stu-id="0f183-153">Remarks</span></span>

<span data-ttu-id="0f183-154">В пакете средств разработки программного обеспечения Microsoft Windows (SDK), выпущенном для Windows Vista и более поздних версий, Организация файлов заголовков изменилась, а в файле заголовков *Ws2def. h* , который автоматически включается в заголовочный файл *Winsock2. h* , был определен **иппрото уровень \_ UDP** .</span><span class="sxs-lookup"><span data-stu-id="0f183-154">On the Microsoft Windows Software Development Kit (SDK) released for Windows Vista and later, the organization of header files has changed and **IPPROTO\_UDP** level is defined in the *Ws2def.h* header file which is automatically included in the *Winsock2.h* header file.</span></span> <span data-ttu-id="0f183-155">Параметры сокета **иппрото \_ UDP** определяются в файле заголовка *Ws2tcpip. h* .</span><span class="sxs-lookup"><span data-stu-id="0f183-155">The **IPPROTO\_UDP** socket options are defined in the *Ws2tcpip.h* header file.</span></span> <span data-ttu-id="0f183-156">Файл заголовка *Ws2def. h* никогда не должен использоваться напрямую.</span><span class="sxs-lookup"><span data-stu-id="0f183-156">The *Ws2def.h* header file should never be used directly.</span></span>

## <a name="requirements"></a><span data-ttu-id="0f183-157">Требования</span><span class="sxs-lookup"><span data-stu-id="0f183-157">Requirements</span></span>

| <span data-ttu-id="0f183-158">Требование</span><span class="sxs-lookup"><span data-stu-id="0f183-158">Requirement</span></span> | <span data-ttu-id="0f183-159">Значение</span><span class="sxs-lookup"><span data-stu-id="0f183-159">Value</span></span> |
|-|-|
| <span data-ttu-id="0f183-160">Header</span><span class="sxs-lookup"><span data-stu-id="0f183-160">Header</span></span><br/> | <dl> <span data-ttu-id="0f183-161"><dt>ws2ipdef. h (include ws2tcpip. h) и ws2tcpip. h</dt> <dt>Winsock2. h в Windows Server 2003, Windows XP и Windows 2000</dt></span><span class="sxs-lookup"><span data-stu-id="0f183-161"><dt>ws2ipdef.h (include ws2tcpip.h), and ws2tcpip.h</dt> <dt>Winsock2.h on Windows Server 2003, Windows XP, and Windows 2000</dt></span></span> </dl> |
