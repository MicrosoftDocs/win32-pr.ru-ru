---
description: Сокеты Windows 2 представляют перекрывающиеся операции ввода-вывода и требуют, чтобы все поставщики транспорта поддерживали эту возможность.
ms.assetid: 90d49171-e211-4426-aa56-88aaeac7c578
title: Перекрывающиеся входные и выходные данные
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0d8caa13dd3d50e4f0fdaa1b92fa8e99afd8e2e1
ms.sourcegitcommit: 3d9dce1bd6c84e2b51759e940aa95aa9b459cd20
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "103914239"
---
# <a name="overlapped-inputoutput"></a><span data-ttu-id="42242-103">Перекрывающиеся входные и выходные данные</span><span class="sxs-lookup"><span data-stu-id="42242-103">Overlapped Input/Output</span></span>

<span data-ttu-id="42242-104">Сокеты Windows 2 представляют перекрывающиеся операции ввода-вывода и требуют, чтобы все поставщики транспорта поддерживали эту возможность.</span><span class="sxs-lookup"><span data-stu-id="42242-104">Windows Sockets 2 introduces overlapped I/O and requires that all transport providers support this capability.</span></span> <span data-ttu-id="42242-105">Перекрывающиеся операции ввода-вывода можно выполнять только для сокетов, созданных с помощью функции [**вспсоккет**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspsocket) с \_ \_ установленным флагом WSA Flag OVERLAPPED, и следовать модели, установленной в Windows.</span><span class="sxs-lookup"><span data-stu-id="42242-105">Overlapped I/O can be performed only on sockets that were created through the [**WSPSocket**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspsocket) function with the WSA\_FLAG\_OVERLAPPED flag set, and follow the model established in Windows.</span></span>

<span data-ttu-id="42242-106">Для получения, клиент использует [**вспрекв**](/previous-versions/windows/hardware/network/ff566309(v=vs.85)) или [**вспреквфром**](/previous-versions/windows/desktop/legacy/ms742287(v=vs.85)) для предоставления буферов, в которые должны быть получены данные.</span><span class="sxs-lookup"><span data-stu-id="42242-106">For receiving, a client uses [**WSPRecv**](/previous-versions/windows/hardware/network/ff566309(v=vs.85)) or [**WSPRecvFrom**](/previous-versions/windows/desktop/legacy/ms742287(v=vs.85)) to supply buffers into which data is to be received.</span></span> <span data-ttu-id="42242-107">Если один или несколько буферов были опубликованы до тех пор, пока данные были получены сетью, то данные будут помещаться в буфер пользователя сразу по мере их поступления и, таким образом, избежать операции копирования, которая в противном случае будет невозможна.</span><span class="sxs-lookup"><span data-stu-id="42242-107">If one or more buffers are posted prior to the time when data has been received by the network, it is possible that data will be placed into the user's buffers immediately as it arrives and thereby avoid the copy operation that would otherwise occur.</span></span> <span data-ttu-id="42242-108">Если данные поступают, когда буферы приема уже были отправлены, они немедленно копируются в буфер пользователя.</span><span class="sxs-lookup"><span data-stu-id="42242-108">If data arrives when receive buffers have already been posted, it is copied immediately into the user's buffers.</span></span> <span data-ttu-id="42242-109">Если данные поступают, когда приложение не посылает буферы приема, поставщик услуг применяет синхронный стиль операции, где входящие данные помещаются в буфер внутренне до тех пор, пока клиент не выдает вызов Receive и, таким образом, предоставляет буфер, в который могут быть скопированы данные.</span><span class="sxs-lookup"><span data-stu-id="42242-109">If data arrives when no receive buffers have been posted by the application, the service provider resorts to the synchronous style of operation where the incoming data is buffered internally until such time as the client issues a receive call and thereby supplies a buffer into which the data may be copied.</span></span> <span data-ttu-id="42242-110">Исключением является то, что приложение использовало [**вспсетсоккопт**](/previous-versions/windows/hardware/network/ff566318(v=vs.85)) для установки размера принимающего буфера равным нулю.</span><span class="sxs-lookup"><span data-stu-id="42242-110">An exception to this would be if the application used [**WSPSetSockOpt**](/previous-versions/windows/hardware/network/ff566318(v=vs.85)) to set the size of the receive buffer to zero.</span></span> <span data-ttu-id="42242-111">В этом случае надежные протоколы разрешают получение данных только при публикации буферов приложений, а данные по ненадежным протоколам будут потеряны.</span><span class="sxs-lookup"><span data-stu-id="42242-111">In this instance, reliable protocols would only allow data to be received when application buffers had been posted, and data on unreliable protocols would be lost.</span></span>

<span data-ttu-id="42242-112">На отправляющей стороне клиенты используют [**вспсенд**](/previous-versions/windows/hardware/network/ff566316(v=vs.85)) или [**вспсендто**](/previous-versions/windows/desktop/legacy/ms742291(v=vs.85)) для предоставления указателей на заполненные буферы, а затем не занимают буферы каким бы то ни было, пока сеть не запотребляет содержимое буфера.</span><span class="sxs-lookup"><span data-stu-id="42242-112">On the sending side, clients use [**WSPSend**](/previous-versions/windows/hardware/network/ff566316(v=vs.85)) or [**WSPSendTo**](/previous-versions/windows/desktop/legacy/ms742291(v=vs.85)) to supply pointers to filled buffers and then agree not to disturb the buffers in any way until the network has consumed the buffer's contents.</span></span>

<span data-ttu-id="42242-113">Перекрывающиеся вызовы Send и Receive немедленно возвращают.</span><span class="sxs-lookup"><span data-stu-id="42242-113">Overlapped send and receive calls return immediately.</span></span> <span data-ttu-id="42242-114">Возвращаемое значение, равное нулю, указывает, что операция ввода-вывода завершилась немедленно и что соответствующее указание завершения уже произошло.</span><span class="sxs-lookup"><span data-stu-id="42242-114">A return value of zero indicates that the I/O operation completed immediately and that the corresponding completion indication has already occurred.</span></span> <span data-ttu-id="42242-115">То есть связанный объект события был сигнальным, или подпрограмма завершения была поставлена в очередь через [**впукуеуеапк**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuqueueapc).</span><span class="sxs-lookup"><span data-stu-id="42242-115">That is, the associated event object has been signaled, or the completion routine has been queued through [**WPUQueueApc**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuqueueapc).</span></span> <span data-ttu-id="42242-116">Возвращаемое значение ошибки СОКЕТа \_ , связанное с кодом ошибки, \_ ожидающим ввода-вывода WSA \_ , указывает, что операция перекрытия была успешно инициирована, и что последующее указание будет предоставлено при использовании буферов отправки или при заполнении буферов приема.</span><span class="sxs-lookup"><span data-stu-id="42242-116">A return value of SOCKET\_ERROR coupled with an error code of WSA\_IO\_PENDING indicates that the overlapped operation has been successfully initiated and that a subsequent indication will be provided when send buffers have been consumed or when receive buffers are filled.</span></span> <span data-ttu-id="42242-117">Любой другой код ошибки указывает на то, что операция перекрытия не была успешно инициирована и не будет предпринята ни одна индикация завершения.</span><span class="sxs-lookup"><span data-stu-id="42242-117">Any other error code indicates that the overlapped operation was not successfully initiated and that no completion indication will be forthcoming.</span></span>

<span data-ttu-id="42242-118">Операции отправки и получения могут быть перекрывающиеся.</span><span class="sxs-lookup"><span data-stu-id="42242-118">Both send and receive operations can be overlapped.</span></span> <span data-ttu-id="42242-119">Функции Receive могут вызываться несколько раз для отправки буферов получения при подготовке входящих данных, а функции отправки могут вызываться несколько раз, чтобы поставить в очередь несколько буферов для отправки.</span><span class="sxs-lookup"><span data-stu-id="42242-119">The receive functions may be invoked multiple times to post receive buffers in preparation for incoming data, and the send functions may be invoked multiple times to queue up multiple buffers to be sent.</span></span> <span data-ttu-id="42242-120">Обратите внимание, что хотя последовательность перекрывающихся буферов отправки будет отправлена в указанном порядке, соответствующие события завершения могут происходить в другом порядке.</span><span class="sxs-lookup"><span data-stu-id="42242-120">Note that while a series of overlapped send buffers will be sent in the order supplied, the corresponding completion indications may occur in a different order.</span></span> <span data-ttu-id="42242-121">Аналогично, на принимающей стороне буферы будут заполняться в том порядке, в котором они указаны, но события завершения могут происходить в другом порядке.</span><span class="sxs-lookup"><span data-stu-id="42242-121">Likewise, on the receiving side, buffers will be filled in the order they are supplied, but completion indications may occur in a different order.</span></span>

<span data-ttu-id="42242-122">Функция отложенного завершения операций перекрывающегося ввода-вывода также доступна для [**вспиоктл**](/previous-versions/windows/hardware/network/ff566296(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="42242-122">The deferred completion feature of overlapped I/O is also available for [**WSPIoctl**](/previous-versions/windows/hardware/network/ff566296(v=vs.85)).</span></span>

## <a name="delivering-completion-indications"></a><span data-ttu-id="42242-123">Доставка обработок завершения</span><span class="sxs-lookup"><span data-stu-id="42242-123">Delivering Completion Indications</span></span>

<span data-ttu-id="42242-124">Поставщики служб имеют два способа указать выполнение перекрытия: установка объекта события, указанного клиентом, или вызов подпрограммы завершения, указанной клиентом.</span><span class="sxs-lookup"><span data-stu-id="42242-124">Service providers have two ways to indicate overlapped completion: setting a client-specified event object, or invoking a client-specified completion routine.</span></span> <span data-ttu-id="42242-125">В обоих случаях структура данных [**всаоверлаппед**](/windows/desktop/api/Winsock2/ns-winsock2-wsaoverlapped)связана с каждой операцией перекрытия.</span><span class="sxs-lookup"><span data-stu-id="42242-125">In both cases a data structure, [**WSAOVERLAPPED**](/windows/desktop/api/Winsock2/ns-winsock2-wsaoverlapped), is associated with each overlapped operation.</span></span> <span data-ttu-id="42242-126">Эта структура выделяется клиентом и используется для указания, какой объект события (если таковой имеется) должен быть установлен при завершении.</span><span class="sxs-lookup"><span data-stu-id="42242-126">This structure is allocated by the client and used by it to indicate which event object (if any) is to be set when completion occurs.</span></span> <span data-ttu-id="42242-127">Структура **всаоверлаппед** может использоваться поставщиком услуг как место для хранения маркера в результатах (например, число переданных байтов, обновленные флаги, коды ошибок и т. д.) для определенной перекрывающейся операции.</span><span class="sxs-lookup"><span data-stu-id="42242-127">The **WSAOVERLAPPED** structure may be used by the service provider as a place to store a handle to the results (for example, number of bytes transferred, updated flags, error codes, etc.) for a particular overlapped operation.</span></span> <span data-ttu-id="42242-128">Чтобы получить эти результаты, клиенты должны вызвать [**вспжетоверлаппедресулт**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspgetoverlappedresult), передав указатель на соответствующую структуру OVERLAPPED.</span><span class="sxs-lookup"><span data-stu-id="42242-128">To obtain these results clients must invoke [**WSPGetOverlappedResult**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspgetoverlappedresult), passing in a pointer to the corresponding overlapped structure.</span></span>

<span data-ttu-id="42242-129">Если для конкретного перекрывающегося запроса ввода-вывода выбрано указание о завершении на основе события, подпрограммы [**вспжетоверлаппедресулт**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspgetoverlappedresult) могут быть использованы клиентами для опроса или ожидания завершения операции перекрытия.</span><span class="sxs-lookup"><span data-stu-id="42242-129">If event based completion indication is selected for a particular overlapped I/O request, the [**WSPGetOverlappedResult**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspgetoverlappedresult) routine may itself be used by clients to either poll or wait for completion of the overlapped operation.</span></span> <span data-ttu-id="42242-130">Если для конкретного перекрывающегося запроса ввода-вывода выбрана индикация завершения на основе процедуры завершения, доступен только параметр опроса **вспжетоверлаппедресулт** .</span><span class="sxs-lookup"><span data-stu-id="42242-130">If completion-routine-based completion indication is selected for a particular overlapped I/O request, only the polling option of **WSPGetOverlappedResult** is available.</span></span> <span data-ttu-id="42242-131">Кроме того, клиент может использовать другие средства для ожидания (например, использование [**всаваитформултипливентс**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents)), пока соответствующий объект события не сообщит о том, или если в поставщике службы вызвана указанная подпрограмма завершения.</span><span class="sxs-lookup"><span data-stu-id="42242-131">A client may also use other means to wait (such as using [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents)) until the corresponding event object has been signaled or the specified completion routine has been invoked by the service provider.</span></span> <span data-ttu-id="42242-132">После того как было указано завершение, клиент может вызвать **вспжетоверлаппедресулт**, предполагаю, что вызов будет выполнен немедленно.</span><span class="sxs-lookup"><span data-stu-id="42242-132">Once completion has been indicated, the client may invoke **WSPGetOverlappedResult**, with the expectation that the call will complete immediately.</span></span>

## <a name="invoking-socket-io-completion-routines"></a><span data-ttu-id="42242-133">Вызов подподпрограмм завершения ввода-вывода сокетов</span><span class="sxs-lookup"><span data-stu-id="42242-133">Invoking Socket I/O Completion Routines</span></span>

<span data-ttu-id="42242-134">Если параметр *лпкомплетионраутине* для перекрывающейся операции имеет значение, отличное от **null**, то поставщик услуг должен выполнять поиск вызова указанной клиентом подпрограммы завершения по завершении перекрывающейся операции.</span><span class="sxs-lookup"><span data-stu-id="42242-134">If the *lpCompletionRoutine* parameter to an overlapped operation is not **NULL**, it is the service provider's responsibility to arrange for invocation of the client-specified completion routine when the overlapped operation completes.</span></span> <span data-ttu-id="42242-135">Так как подпрограммы завершения должны выполняться в контексте того же потока, который инициировал операцию перекрытия, он не может быть вызван непосредственно от поставщика услуг.</span><span class="sxs-lookup"><span data-stu-id="42242-135">Since the completion routine must be executed in the context of the same thread that initiated the overlapped operation, it cannot be invoked directly from the service provider.</span></span> <span data-ttu-id="42242-136">Ws2 \_32.DLL предлагает механизм асинхронного вызова процедур (APC) для упрощения вызова подпрограмм завершения.</span><span class="sxs-lookup"><span data-stu-id="42242-136">The Ws2\_32.DLL offers an asynchronous procedure call (APC) mechanism to facilitate invocation of completion routines.</span></span>

<span data-ttu-id="42242-137">Поставщик услуг упорядочивает функцию для выполнения в надлежащем потоке, вызывая [**впукуеуеапк**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuqueueapc).</span><span class="sxs-lookup"><span data-stu-id="42242-137">A service provider arranges for a function to be executed in the proper thread by calling [**WPUQueueApc**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuqueueapc).</span></span> <span data-ttu-id="42242-138">Эту функцию можно вызывать из любого контекста процесса и потока, даже контекста, отличного от потока и процесса, который использовался для инициирования перекрывающегося операции.</span><span class="sxs-lookup"><span data-stu-id="42242-138">This function can be called from any process and thread context, even a context different from the thread and process that was used to initiate the overlapped operation.</span></span>

<span data-ttu-id="42242-139">[**Впукуеуеапк**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuqueueapc) принимает в качестве входных параметров указатель на структуру [**всасреадид**](/windows/desktop/api/Ws2spi/ns-ws2spi-wsathreadid) , указатель на функцию APC для вызова и 32-разрядное значение контекста, которое впоследствии передается функции APC.</span><span class="sxs-lookup"><span data-stu-id="42242-139">[**WPUQueueApc**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuqueueapc) takes as input parameters a pointer to a [**WSATHREADID**](/windows/desktop/api/Ws2spi/ns-ws2spi-wsathreadid) structure, a pointer to an APC function to be invoked, and a 32-bit context value that is subsequently passed to the APC function.</span></span> <span data-ttu-id="42242-140">Поставщики услуг всегда предоставляются с указателем на правильную структуру **всасреадид** через параметр *лпсреадид* для перекрывающейся функции.</span><span class="sxs-lookup"><span data-stu-id="42242-140">Service providers are always supplied with a pointer to the proper **WSATHREADID** structure through the *lpThreadId* parameter to the overlapped function.</span></span> <span data-ttu-id="42242-141">Поставщик должен хранить структуру **всасреадид** локально и указать указатель на эту копию структуры **всасреадид** в качестве входного параметра для **впукуеуеапк**.</span><span class="sxs-lookup"><span data-stu-id="42242-141">The provider should store the **WSATHREADID** structure locally and supply a pointer to this copy of the **WSATHREADID** structure as an input parameter to **WPUQueueApc**.</span></span> <span data-ttu-id="42242-142">После возврата функции **впукуеуеапк** поставщик может удалить свою копию **всасреадид**.</span><span class="sxs-lookup"><span data-stu-id="42242-142">Once the **WPUQueueApc** function returns, the provider can dispose of its copy of the **WSATHREADID**.</span></span>

<span data-ttu-id="42242-143">Процедура [**впукуеуеапк**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuqueueapc) просто ставит достаточно сведений в очередь, чтобы вызвать указанную функцию APC с заданными параметрами, но не вызывает ее.</span><span class="sxs-lookup"><span data-stu-id="42242-143">The procedure [**WPUQueueApc**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuqueueapc) simply enqueues sufficient information to call the indicated APC function with the given parameters, but does not call it.</span></span> <span data-ttu-id="42242-144">Когда целевой поток переходит в состояние ожидания с предупреждением, эти сведения выводятся из очереди и вызывается функция APC в этом целевом потоке и контексте процесса.</span><span class="sxs-lookup"><span data-stu-id="42242-144">When the target thread enters an alertable wait state, this information is dequeued and a call is made to the APC function in that target thread and process context.</span></span> <span data-ttu-id="42242-145">Так как механизм APC поддерживает только одно значение 32-разрядного контекста, функция APC сама по себе не может представлять собой подпрограммы завершения, заданную клиентом, в которой используются дополнительные параметры.</span><span class="sxs-lookup"><span data-stu-id="42242-145">Because the APC mechanism supports only a single 32-bit context value, the APC function cannot itself be the client-specified completion routine, which involves more parameters.</span></span> <span data-ttu-id="42242-146">Поставщик услуг должен вместо этого указать указатель на собственную функцию APC, которая использует предоставленное значение контекста для доступа к необходимой информации о перекрытой операции, а затем вызывает указанную клиентом подпрограммы завершения.</span><span class="sxs-lookup"><span data-stu-id="42242-146">The service provider must instead supply a pointer to its own APC function which uses the supplied context value to access the needed result information for the overlapped operation, and then invokes the client-specified completion routine.</span></span>

<span data-ttu-id="42242-147">Для поставщиков услуг, в которых компонент пользовательского режима реализует перекрывающиеся операции ввода-вывода, обычно используется механизм APC следующим образом:</span><span class="sxs-lookup"><span data-stu-id="42242-147">For service providers where a user-mode component implements overlapped I/O, a typical usage of the APC mechanism is as follows:</span></span>

-   <span data-ttu-id="42242-148">По завершении операции ввода-вывода поставщик выделяет небольшой буфер и упаковывает его в указатель на процедуру завершения, предоставляемую клиентом, и значения параметров, которые передаются в процедуру.</span><span class="sxs-lookup"><span data-stu-id="42242-148">When the I/O operation completes, the provider allocates a small buffer and packs it with a pointer to the client-supplied completion procedure and parameter values to pass to the procedure.</span></span>
-   <span data-ttu-id="42242-149">Он помещает APC в очередь, указывая указатель на буфер как значение контекста и собственную промежуточную процедуру в качестве целевой процедуры.</span><span class="sxs-lookup"><span data-stu-id="42242-149">It queues an APC, specifying the pointer to the buffer as the context value and its own intermediate procedure as the target procedure.</span></span>
-   <span data-ttu-id="42242-150">Когда целевой поток в конечном итоге переходит в состояние ожидания с оповещением, промежуточная процедура поставщика услуг вызывается в правильном контексте потока.</span><span class="sxs-lookup"><span data-stu-id="42242-150">When the target thread eventually enters alertable wait state, the service provider's intermediate procedure is called in the proper thread context.</span></span>
-   <span data-ttu-id="42242-151">Промежуточная процедура просто распаковать параметры, освобождает буфер и вызывает предоставляемую клиентом процедуру завершения.</span><span class="sxs-lookup"><span data-stu-id="42242-151">The intermediate procedure simply unpacks parameters, deallocates the buffer, and calls the client-supplied completion procedure.</span></span>
-   <span data-ttu-id="42242-152">Для поставщиков услуг, где компонент режима ядра реализует перекрывающиеся операции ввода-вывода, типичная реализация аналогична, за исключением того, что реализация будет использовать стандартные интерфейсы ядра для постановки в очередь APC.</span><span class="sxs-lookup"><span data-stu-id="42242-152">For service providers where a kernel-mode component implements overlapped I/O, a typical implementation is similar, except that the implementation would use standard kernel interfaces to enqueue the APC.</span></span>

<span data-ttu-id="42242-153">Описание соответствующих интерфейсов ядра лежит вне области спецификации Windows Sockets 2.</span><span class="sxs-lookup"><span data-stu-id="42242-153">Description of the relevant kernel interfaces is outside the scope of the Windows Sockets 2 specification.</span></span>

> [!Note]  
> <span data-ttu-id="42242-154">Поставщики услуг должны разрешить клиентам Windows Sockets 2 вызывать операции Send и Receive в контексте подпрограммы завершения ввода-вывода и гарантировать, что подпрограммы завершения ввода-вывода не будут вложены.</span><span class="sxs-lookup"><span data-stu-id="42242-154">Service providers must allow Windows Sockets 2 clients to invoke send and receive operations from within the context of the socket I/O completion routine and guarantee that for a given socket, I/O completion routines will not be nested.</span></span>

 

<span data-ttu-id="42242-155">В некоторых обстоятельствах для многоуровневого поставщика услуг может потребоваться инициировать и завершить перекрывающиеся операции из внутреннего рабочего потока.</span><span class="sxs-lookup"><span data-stu-id="42242-155">Under some circumstances, a layered service provider may need to initiate and complete overlapped operations from within an internal worker thread.</span></span> <span data-ttu-id="42242-156">В этом случае [**всасреадид**](/windows/desktop/api/Ws2spi/ns-ws2spi-wsathreadid) будет недоступен во входящем вызове функции.</span><span class="sxs-lookup"><span data-stu-id="42242-156">In this case, a [**WSATHREADID**](/windows/desktop/api/Ws2spi/ns-ws2spi-wsathreadid) would not be available from an incoming function call.</span></span> <span data-ttu-id="42242-157">Интерфейс поставщика услуг предоставляет метод [**впуопенкуррентсреад**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuopencurrentthread)для получения **всасреадид** для текущего потока.</span><span class="sxs-lookup"><span data-stu-id="42242-157">The service provider interface provides an upcall, [**WPUOpenCurrentThread**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuopencurrentthread), to obtain a **WSATHREADID** for the current thread.</span></span> <span data-ttu-id="42242-158">Если этот **всасреадид** больше не нужен, его ресурсы должны возвращаться путем вызова [**впуклосесреад**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuclosethread).</span><span class="sxs-lookup"><span data-stu-id="42242-158">When this **WSATHREADID** is no longer needed, its resources should be returned by calling [**WPUCloseThread**](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuclosethread).</span></span>

 

 
