---
description: В этом разделе перечислены вызовы, которые поставщики услуг могут внести в клиент Windows Sockets.
ms.assetid: a2069814-de95-40a2-ab09-c5187ecd56a7
title: Вызовы, предоставляемые библиотекой DLL Windows Sockets 2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3575dc0ecf03c4907f6c418448a84f95a48fda94
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105693386"
---
# <a name="upcalls-exposed-by-windows-sockets-2-dll"></a><span data-ttu-id="80536-103">Вызовы, предоставляемые библиотекой DLL Windows Sockets 2</span><span class="sxs-lookup"><span data-stu-id="80536-103">Upcalls Exposed by Windows Sockets 2 DLL</span></span>

<span data-ttu-id="80536-104">В этом разделе перечислены вызовы, которые поставщики услуг могут внести в клиент Windows Sockets.</span><span class="sxs-lookup"><span data-stu-id="80536-104">This section lists the upcalls that service providers may make into the Windows Sockets client.</span></span> <span data-ttu-id="80536-105">Поставщики услуг получают таблицу диспетчеризации отправки в качестве параметра функции [**вспстартуп**](/windows/desktop/api/Ws2spi/nf-ws2spi-wspstartup) и используют записи в этой таблице для выполнения вызовов.</span><span class="sxs-lookup"><span data-stu-id="80536-105">Service providers receive an upcall dispatch table as a parameter to [**WSPStartup**](/windows/desktop/api/Ws2spi/nf-ws2spi-wspstartup) function, and use entries in this table to make the upcalls.</span></span> <span data-ttu-id="80536-106">Таким образом, клиенту не нужно экспортировать свои функции ВПУ.</span><span class="sxs-lookup"><span data-stu-id="80536-106">Therefore, a client does not need to export its WPU functions.</span></span>

<span data-ttu-id="80536-107">Поставщики не обязательно используют все эти вызовы.</span><span class="sxs-lookup"><span data-stu-id="80536-107">It is not mandatory that providers use all of these upcalls.</span></span> <span data-ttu-id="80536-108">В следующей таблице показано, какие исзываемые вызовы должны использоваться, а какие — необязательные.</span><span class="sxs-lookup"><span data-stu-id="80536-108">The following table indicates which upcalls must be used and which are optional.</span></span>

| <span data-ttu-id="80536-109">Функция</span><span class="sxs-lookup"><span data-stu-id="80536-109">Function</span></span>                                                               | <span data-ttu-id="80536-110">Описание</span><span class="sxs-lookup"><span data-stu-id="80536-110">Description</span></span>                                                                                                              | <span data-ttu-id="80536-111">Состояние</span><span class="sxs-lookup"><span data-stu-id="80536-111">Status</span></span>                         | <span data-ttu-id="80536-112">Значение</span><span class="sxs-lookup"><span data-stu-id="80536-112">Meaning</span></span>                                                                                                                                                                          |
|------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------|--------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="80536-113">**впуклосивент**</span><span class="sxs-lookup"><span data-stu-id="80536-113">**WPUCloseEvent**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpucloseevent)                               | <span data-ttu-id="80536-114">Закрывает открытый обработчик объекта события.</span><span class="sxs-lookup"><span data-stu-id="80536-114">Closes an open event object handle.</span></span>                                                                                      | <span data-ttu-id="80536-115">Необязательный элемент.</span><span class="sxs-lookup"><span data-stu-id="80536-115">Optional.</span></span>                      | <span data-ttu-id="80536-116">Вместо этого поставщик может использовать соответствующий вызов Windows.</span><span class="sxs-lookup"><span data-stu-id="80536-116">The provider may use an an appropriate Windows call instead.</span></span>                                                                                                                     |
| [<span data-ttu-id="80536-117">**впуклосесоккесандле**</span><span class="sxs-lookup"><span data-stu-id="80536-117">**WPUCloseSocketHandle**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuclosesockethandle)                 | <span data-ttu-id="80536-118">Закрывает маркер сокета, выделенный библиотекой DLL Windows Sockets.</span><span class="sxs-lookup"><span data-stu-id="80536-118">Closes a socket handle allocated by the Windows Sockets DLL.</span></span>                                                             | <span data-ttu-id="80536-119">Обязательный.</span><span class="sxs-lookup"><span data-stu-id="80536-119">Required.</span></span>                      | <span data-ttu-id="80536-120">32.dll Ws2 \_ необходимо запрашивать и (или) изменять внутренние сведения о состоянии, связанные с маркером сокета.</span><span class="sxs-lookup"><span data-stu-id="80536-120">The Ws2\_32.dll needs to query and/or modify internal state information associated with the socket handle.</span></span>                                                                       |
| [<span data-ttu-id="80536-121">**впуклосесреад**</span><span class="sxs-lookup"><span data-stu-id="80536-121">**WPUCloseThread**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuclosethread)                             | <span data-ttu-id="80536-122">Закрывает идентификатор потока для внутреннего потока службы.</span><span class="sxs-lookup"><span data-stu-id="80536-122">Closes a thread ID for an internal service thread.</span></span>                                                                       |                                |                                                                                                                                                                                  |
| [<span data-ttu-id="80536-123">**впукомплетеоверлаппедрекуест**</span><span class="sxs-lookup"><span data-stu-id="80536-123">**WPUCompleteOverlappedRequest**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpucompleteoverlappedrequest) | <span data-ttu-id="80536-124">Предоставляет уведомление о завершении ввода-вывода с перекрытием, когда механизмом завершения является что-то отличное от режима пользователя APC.</span><span class="sxs-lookup"><span data-stu-id="80536-124">Delivers overlapped I/O completion notification where the completion mechanism is something other than user mode APC.</span></span>    |                                |                                                                                                                                                                                  |
| [<span data-ttu-id="80536-125">**впукреативент**</span><span class="sxs-lookup"><span data-stu-id="80536-125">**WPUCreateEvent**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpucreateevent)                             | <span data-ttu-id="80536-126">Создает новый объект события.</span><span class="sxs-lookup"><span data-stu-id="80536-126">Creates a new event object.</span></span>                                                                                              | <span data-ttu-id="80536-127">Необязательный элемент.</span><span class="sxs-lookup"><span data-stu-id="80536-127">Optional.</span></span>                      | <span data-ttu-id="80536-128">Вместо этого поставщик может использовать соответствующий вызов Windows.</span><span class="sxs-lookup"><span data-stu-id="80536-128">The provider may use an appropriate Windows call instead.</span></span>                                                                                                                        |
| [<span data-ttu-id="80536-129">**впукреатесоккесандле**</span><span class="sxs-lookup"><span data-stu-id="80536-129">**WPUCreateSocketHandle**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpucreatesockethandle)               | <span data-ttu-id="80536-130">Создает новый маркер сокета для поставщиков Нонифс.</span><span class="sxs-lookup"><span data-stu-id="80536-130">Creates a new socket handle for nonIFS providers.</span></span>                                                                        | <span data-ttu-id="80536-131">Требуется для поставщиков Нонифс.</span><span class="sxs-lookup"><span data-stu-id="80536-131">Required for nonIFS providers.</span></span> | <span data-ttu-id="80536-132">32.dll Ws2 \_ необходимо запрашивать и (или) изменять внутренние сведения о состоянии, связанные с маркером сокета.</span><span class="sxs-lookup"><span data-stu-id="80536-132">The Ws2\_32.dll needs to query and/or modify internal state information associated with the socket handle.</span></span>                                                                       |
| [<span data-ttu-id="80536-133">**впуфдиссет**</span><span class="sxs-lookup"><span data-stu-id="80536-133">**WPUFDIsSet**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpufdisset)                                     | <span data-ttu-id="80536-134">Проверяет членство указанного маркера сокета.</span><span class="sxs-lookup"><span data-stu-id="80536-134">Checks the membership of the specified socket handle.</span></span>                                                                    | <span data-ttu-id="80536-135">Необязательный элемент.</span><span class="sxs-lookup"><span data-stu-id="80536-135">Optional.</span></span>                      | <span data-ttu-id="80536-136">Это просто удобная функция, которая знает, как проанализировать [**структуру \_ наборов**](/windows/desktop/api/winsock/nf-winsock-fd_set) .</span><span class="sxs-lookup"><span data-stu-id="80536-136">This is just a convenience function that knows how to dig through [**fd\_set**](/windows/desktop/api/winsock/nf-winsock-fd_set) structures.</span></span> <span data-ttu-id="80536-137">В любом случае поставщику может потребоваться подробное изучение этих структур.</span><span class="sxs-lookup"><span data-stu-id="80536-137">A provider may need to dig through these structures explicitly anyway.</span></span> |
| [<span data-ttu-id="80536-138">**впужетпровидерпас**</span><span class="sxs-lookup"><span data-stu-id="80536-138">**WPUGetProviderPath**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpugetproviderpath)                     | <span data-ttu-id="80536-139">Извлекает путь к библиотеке DLL для указанного поставщика.</span><span class="sxs-lookup"><span data-stu-id="80536-139">Retrieves the DLL path for the specified provider.</span></span>                                                                       | <span data-ttu-id="80536-140">Обязательный.</span><span class="sxs-lookup"><span data-stu-id="80536-140">Required.</span></span>                      | <span data-ttu-id="80536-141">Только32.dll Ws2 \_ будет иметь представление о том, где был установлен смежный уровень протокола (возможно, от другого поставщика).</span><span class="sxs-lookup"><span data-stu-id="80536-141">Only the Ws2\_32.dll would know where an adjacent protocol layer (potentially from another vendor) has been installed.</span></span>                                                           |
| [<span data-ttu-id="80536-142">**впумодифифшандле**</span><span class="sxs-lookup"><span data-stu-id="80536-142">**WPUModifyIFSHandle**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpumodifyifshandle)                     | <span data-ttu-id="80536-143">Получает (возможно) измененный обработчик IFS из библиотеки DLL Windows Sockets.</span><span class="sxs-lookup"><span data-stu-id="80536-143">Receives a (possibly) modified IFS handle from the Windows Sockets DLL.</span></span>                                                  | <span data-ttu-id="80536-144">Требуется для поставщиков IFS.</span><span class="sxs-lookup"><span data-stu-id="80536-144">Required for IFS providers.</span></span>    | <span data-ttu-id="80536-145">32.dll Ws2 \_ необходимо запрашивать и (или) изменять внутренние сведения о состоянии, связанные с маркером сокета.</span><span class="sxs-lookup"><span data-stu-id="80536-145">The Ws2\_32.dll needs to query and/or modify internal state information associated with the socket handle.</span></span>                                                                       |
| [<span data-ttu-id="80536-146">**впупостмессаже**</span><span class="sxs-lookup"><span data-stu-id="80536-146">**WPUPostMessage**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpupostmessage)                             | <span data-ttu-id="80536-147">Выполняет стандартную функцию [**посообщений**](/windows/win32/api/winuser/nf-winuser-postmessagea) , так как поддерживает обратную совместимость.</span><span class="sxs-lookup"><span data-stu-id="80536-147">Performs the standard [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) function in a way that maintains backward compatibility.</span></span> | <span data-ttu-id="80536-148">Обязательный.</span><span class="sxs-lookup"><span data-stu-id="80536-148">Required.</span></span>                      | <span data-ttu-id="80536-149">Только Windows 2000 и Windows NT.</span><span class="sxs-lookup"><span data-stu-id="80536-149">Windows 2000 and Windows NT only.</span></span> <span data-ttu-id="80536-150">Windows 95 разрешает сообщение POST из режима ядра.</span><span class="sxs-lookup"><span data-stu-id="80536-150">Windows 95 allows post message from kernel mode.</span></span>                                                                                               |
| [<span data-ttu-id="80536-151">**впукуериблоккингкаллбакк**</span><span class="sxs-lookup"><span data-stu-id="80536-151">**WPUQueryBlockingCallback**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuqueryblockingcallback)         | <span data-ttu-id="80536-152">Возвращает указатель на блокирующую функцию-ловушку потока.</span><span class="sxs-lookup"><span data-stu-id="80536-152">Returns a pointer to a thread's blocking hook function.</span></span>                                                                  | <span data-ttu-id="80536-153">Обязательный.</span><span class="sxs-lookup"><span data-stu-id="80536-153">Required.</span></span>                      | <span data-ttu-id="80536-154">Соответствующие функции Windows отсутствуют.</span><span class="sxs-lookup"><span data-stu-id="80536-154">There is no corresponding Windows functionality.</span></span> <span data-ttu-id="80536-155">Только32.dll Ws2 \_ содержит сведения для выполнения этой задачи.</span><span class="sxs-lookup"><span data-stu-id="80536-155">Only the Ws2\_32.dll has the information to accomplish this.</span></span>                                                                    |
| [<span data-ttu-id="80536-156">**впукуерисоккесандлеконтекст**</span><span class="sxs-lookup"><span data-stu-id="80536-156">**WPUQuerySocketHandleContext**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuquerysockethandlecontext)   | <span data-ttu-id="80536-157">Возвращает значение контекста сокета (только поставщики Нонифс).</span><span class="sxs-lookup"><span data-stu-id="80536-157">Gets a socket's context value (nonIFS providers only).</span></span>                                                                   | <span data-ttu-id="80536-158">Требуется для поставщиков Нонифс.</span><span class="sxs-lookup"><span data-stu-id="80536-158">Required for nonIFS providers.</span></span> | <span data-ttu-id="80536-159">32.dll Ws2 \_ необходимо запрашивать и (или) изменять внутренние сведения о состоянии, связанные с маркером сокета.</span><span class="sxs-lookup"><span data-stu-id="80536-159">The Ws2\_32.dll needs to query and/or modify internal state information associated with the socket handle.</span></span>                                                                       |
| [<span data-ttu-id="80536-160">**впукуеуеапк**</span><span class="sxs-lookup"><span data-stu-id="80536-160">**WPUQueueApc**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuqueueapc)                                   | <span data-ttu-id="80536-161">Помещает в очередь значение APC пользовательского режима для указанного потока.</span><span class="sxs-lookup"><span data-stu-id="80536-161">Queues a user-mode APC to the specified thread.</span></span>                                                                          | <span data-ttu-id="80536-162">Необязательный элемент.</span><span class="sxs-lookup"><span data-stu-id="80536-162">Optional.</span></span>                      | <span data-ttu-id="80536-163">Также можно использовать [**куеуеусерапк**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-queueuserapc) .</span><span class="sxs-lookup"><span data-stu-id="80536-163">The [**QueueUserApc**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-queueuserapc) may also be used.</span></span>                                                                                                                      |
| [<span data-ttu-id="80536-164">**впуресетевент**</span><span class="sxs-lookup"><span data-stu-id="80536-164">**WPUResetEvent**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpuresetevent)                               | <span data-ttu-id="80536-165">Сбрасывает объект события.</span><span class="sxs-lookup"><span data-stu-id="80536-165">Resets an event object.</span></span>                                                                                                  | <span data-ttu-id="80536-166">Необязательный элемент.</span><span class="sxs-lookup"><span data-stu-id="80536-166">Optional.</span></span>                      | <span data-ttu-id="80536-167">Вместо этого поставщик может использовать соответствующий вызов Windows.</span><span class="sxs-lookup"><span data-stu-id="80536-167">The provider may use an appropriate Windows call instead.</span></span>                                                                                                                        |
| [<span data-ttu-id="80536-168">**впусетевент**</span><span class="sxs-lookup"><span data-stu-id="80536-168">**WPUSetEvent**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wpusetevent)                                   | <span data-ttu-id="80536-169">Задает объект события.</span><span class="sxs-lookup"><span data-stu-id="80536-169">Sets an event object.</span></span>                                                                                                    | <span data-ttu-id="80536-170">Необязательный элемент.</span><span class="sxs-lookup"><span data-stu-id="80536-170">Optional.</span></span>                      | <span data-ttu-id="80536-171">Вместо этого поставщик может использовать соответствующий вызов Windows.</span><span class="sxs-lookup"><span data-stu-id="80536-171">The provider may use an appropriate Windows call instead.</span></span>                                                                                                                        |



 

 

 
