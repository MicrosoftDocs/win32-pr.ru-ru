---
description: В следующем примере сокет MultiPoint часто характеризуется описанием его роли в одной из двух плоскостей (элемент управления или данные).
ms.assetid: 35e4a8c9-d943-44b8-be61-605b60a6cf5d
title: Семантика SPI для присоединения к листьям MultiPoint
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa0e77203e5405f6cb820baba5d545de03e3a8ce
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105712197"
---
# <a name="spi-semantics-for-joining-multipoint-leaves"></a><span data-ttu-id="1aeee-103">Семантика SPI для присоединения к листьям MultiPoint</span><span class="sxs-lookup"><span data-stu-id="1aeee-103">SPI Semantics for Joining Multipoint Leaves</span></span>

<span data-ttu-id="1aeee-104">В следующем примере сокет MultiPoint часто характеризуется описанием его роли в одной из двух плоскостей (элемент управления или данные).</span><span class="sxs-lookup"><span data-stu-id="1aeee-104">In the following, a multipoint socket is frequently characterized by describing its role in one of the two planes (control or data).</span></span> <span data-ttu-id="1aeee-105">Следует понимать, что у того же сокета есть роль в другой плоскости, но это не упоминается для того, чтобы обеспечить короткий вид ссылок.</span><span class="sxs-lookup"><span data-stu-id="1aeee-105">It should be understood that this same socket has a role in the other plane, but this is not mentioned in order to keep the references short.</span></span> <span data-ttu-id="1aeee-106">Например, ссылка на \_ корневой сокет c может ссылаться на корень c root \_ /d или на \_ \_ конечный сокет c/d \_ .</span><span class="sxs-lookup"><span data-stu-id="1aeee-106">For example a reference to a c\_root socket could refer to either a c\_root/d\_root or a c\_root/d\_leaf socket.</span></span>

<span data-ttu-id="1aeee-107">В схемах плоскости управления с корнями новые конечные узлы добавляются в сеанс MultiPoint одним или двумя разными способами.</span><span class="sxs-lookup"><span data-stu-id="1aeee-107">In rooted control plane schemes, new leaf nodes are added to a multipoint session in one or both of two different ways.</span></span> <span data-ttu-id="1aeee-108">В первом методе корень использует [**вспжоинлеаф**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) для инициации подключения к конечному узлу и его появления в качестве участника.</span><span class="sxs-lookup"><span data-stu-id="1aeee-108">In the first method, the root uses [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) to initiate a connection with a leaf node and invite it to become a participant.</span></span> <span data-ttu-id="1aeee-109">На конечном узле одноранговый узел должен создать \_ конечный сокет c и использовать [**всплистен**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)) , чтобы задать для него режим прослушивания.</span><span class="sxs-lookup"><span data-stu-id="1aeee-109">On the leaf node, the peer application must have created a c\_leaf socket and used [**WSPListen**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)) to set it into listen mode.</span></span> <span data-ttu-id="1aeee-110">Конечный узел получит уведомление о принятии участником ДЕМОна \_ , когда приглашено присоединиться к сеансу, и сигнализирует о его готовности присоединиться, вызвав [**вспакцепт**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept).</span><span class="sxs-lookup"><span data-stu-id="1aeee-110">The leaf node will receive an FD\_ACCEPT indication when invited to join the session, and signals its willingness to join by calling [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept).</span></span> <span data-ttu-id="1aeee-111">\_При завершении операции соединения корневое приложение получит уведомление об установке соединения.</span><span class="sxs-lookup"><span data-stu-id="1aeee-111">The root application will receive an FD\_CONNECT indication when the join operation has been completed.</span></span>

<span data-ttu-id="1aeee-112">Во втором методе роли по сути реверсируются.</span><span class="sxs-lookup"><span data-stu-id="1aeee-112">In the second method, the roles are essentially reversed.</span></span> <span data-ttu-id="1aeee-113">Корневой клиент создает \_ корневой сокет c и переводит его в режим прослушивания.</span><span class="sxs-lookup"><span data-stu-id="1aeee-113">The root client creates a c\_root socket and sets it into listen mode.</span></span> <span data-ttu-id="1aeee-114">Конечный узел, желающий присоединиться к сеансу, создает \_ конечный сокет c и использует [**вспжоинлеаф**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) для инициации подключения и запроса поступления.</span><span class="sxs-lookup"><span data-stu-id="1aeee-114">A leaf node wishing to join the session creates a c\_leaf socket and uses [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) to initiate the connection and request admittance.</span></span> <span data-ttu-id="1aeee-115">Корневой клиент получает ДЕМОна \_ по разпринятию, когда получен входящий запрос поступления, и доставляет конечный узел путем вызова [**вспакцепт**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept).</span><span class="sxs-lookup"><span data-stu-id="1aeee-115">The root client receives FD\_ACCEPT when an incoming admittance request arrives, and admits the leaf node by calling [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept).</span></span> <span data-ttu-id="1aeee-116">Конечный узел получает демон \_ по подключению, когда он был допущен.</span><span class="sxs-lookup"><span data-stu-id="1aeee-116">The leaf node receives FD\_CONNECT when it has been admitted.</span></span>

<span data-ttu-id="1aeee-117">В некорневой плоскости управления, где все узлы имеют значение c \_ листья, функция [**вспжоинлеаф**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) используется для инициирования включения узла в существующий сеанс MultiPoint.</span><span class="sxs-lookup"><span data-stu-id="1aeee-117">In a nonrooted control plane, where all nodes are c\_leafs, the [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) function is used to initiate the inclusion of a node into an existing multipoint session.</span></span> <span data-ttu-id="1aeee-118">\_Если соединение завершено, а возвращенный дескриптор сокета используется в сеансе MultiPoint, указывается индикатор соединения с помощью фильтра.</span><span class="sxs-lookup"><span data-stu-id="1aeee-118">An FD\_CONNECT indication is provided when the join has been completed and the returned socket descriptor is usable in the multipoint session.</span></span> <span data-ttu-id="1aeee-119">В случае многоадресной рассылки IP это будет соответствовать \_ параметру IP-добавления \_ сокета.</span><span class="sxs-lookup"><span data-stu-id="1aeee-119">In the case of IP multicast, this would correspond to the IP\_ADD\_MEMBERSHIP socket option.</span></span>

<span data-ttu-id="1aeee-120">В связи с этим три экземпляра, где клиент будет использовать [**вспжоинлеаф**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf):</span><span class="sxs-lookup"><span data-stu-id="1aeee-120">There are, therefore, three instances where a client would use [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf):</span></span>

-   <span data-ttu-id="1aeee-121">Выступает в роли корня MultiPoint и приглашает нового листа для приподключения к сеансу.</span><span class="sxs-lookup"><span data-stu-id="1aeee-121">Acting as a multipoint root and inviting a new leaf to join the session.</span></span>
-   <span data-ttu-id="1aeee-122">Действует как конечный объект, выполняющий запрос поступления к корневому сеансу MultiPoint.</span><span class="sxs-lookup"><span data-stu-id="1aeee-122">Acting as a leaf making an admittance request to a rooted multipoint session.</span></span>
-   <span data-ttu-id="1aeee-123">Выступая в качестве конечного поиска поступления в некорневом сеансе MultiPoint (например, многоадресная рассылка IP).</span><span class="sxs-lookup"><span data-stu-id="1aeee-123">Acting as a leaf seeking admittance to a nonrooted multipoint session (for example, IP multicast.)</span></span>

 

 
