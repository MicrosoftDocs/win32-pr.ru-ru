---
description: Приложение использует функцию Всаенумпротоколс, чтобы определить, какие транспортные протоколы и цепочки протоколов существуют, а также получить сведения о каждой из них, которые содержатся в связанной \_ структуре всапротокол info.
ms.assetid: 4f38cb07-d824-4d43-abd8-89d58dc15810
title: Использование нескольких протоколов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1ab9a37dcc90f1094126f701641539dd3f26a1a3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104144944"
---
# <a name="using-multiple-protocols"></a>Использование нескольких протоколов

Приложение использует функцию [**всаенумпротоколс**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa) , чтобы определить, какие транспортные протоколы и цепочки протоколов существуют, а также получить сведения о каждой из них, которые содержатся в связанной структуре [**всапротокол \_ info**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) .

В большинстве случаев для каждого протокола или цепочки протоколов существует одна структура [**\_ сведений всапротокол**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) . Однако некоторые протоколы демонстрируют несколько поведений. Например, Протокол SPX ориентирован на сообщения (т. е. границы сообщений отправителя сохраняются сетью), но принимающий сокет может игнорировать эти границы сообщений и обрабатывать их как поток байтов. Таким образом, для SPX могут существовать две различные записи структуры **\_ сведений о всапротокол** — по одному для каждого поведения.

В Windows Sockets 2 отображаются несколько новых семейств адресов, типов сокетов и значений протоколов. Сокеты Windows 1,1 поддерживают одно семейство адресов (AF \_ iNet) для IPv4, состоящее из небольшого числа хорошо известных типов сокетов и идентификаторов протоколов. Сокеты Windows 2 поддерживают существующее семейство адресов, тип сокета и идентификаторы протоколов в целях совместимости, но также поддерживают новые значения семейства адресов для новых транспортных протоколов с новыми типами носителей.

Новые уникальные идентификаторы необязательно хорошо известны, но это не должно представлять проблему. Приложения, которые должны быть независимыми от протокола, рекомендуется выбирать на основе протокола, а не значений, назначенных их *\_ типу сокета* или параметрам *протокола* . Пригодность протокола определяется атрибутами связи, такими как поток с обменом сообщениями и с надежным или ненадежным, которые содержатся в структуре протокола [**всапротокол \_ info**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) . Выбор протоколов на основе пригодности вместо хорошо известных имен протоколов и типов сокетов позволяет приложениям, не зависящим от протокола, использовать новые транспортные протоколы и связанные с ними типы носителей по мере их появления.

Серверная часть преимуществ клиентских и серверных приложений, устанавливающая сокеты прослушивания на всех подходящих транспортных протоколах. Затем клиент может установить подключение с помощью любого подходящего протокола. Например, это позволит клиентскому приложению изменяться, когда оно было запущено в настольной системе, подключенной по локальной сети или на ноутбуке с помощью беспроводной сети.

 

 
