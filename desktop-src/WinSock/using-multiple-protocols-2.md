---
description: Приложение использует функцию Всаенумпротоколс, чтобы определить, какие транспортные протоколы и цепочки протоколов существуют, а также получить сведения о каждой из них, которые содержатся в связанной \_ структуре всапротокол info.
ms.assetid: 4f38cb07-d824-4d43-abd8-89d58dc15810
title: Использование нескольких протоколов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1ab9a37dcc90f1094126f701641539dd3f26a1a3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104144944"
---
# <a name="using-multiple-protocols"></a><span data-ttu-id="60497-103">Использование нескольких протоколов</span><span class="sxs-lookup"><span data-stu-id="60497-103">Using Multiple Protocols</span></span>

<span data-ttu-id="60497-104">Приложение использует функцию [**всаенумпротоколс**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa) , чтобы определить, какие транспортные протоколы и цепочки протоколов существуют, а также получить сведения о каждой из них, которые содержатся в связанной структуре [**всапротокол \_ info**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) .</span><span class="sxs-lookup"><span data-stu-id="60497-104">An application uses the [**WSAEnumProtocols**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa) function to determine which transport protocols and protocol chains are present, and to obtain information about each as contained in the associated [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure.</span></span>

<span data-ttu-id="60497-105">В большинстве случаев для каждого протокола или цепочки протоколов существует одна структура [**\_ сведений всапротокол**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) .</span><span class="sxs-lookup"><span data-stu-id="60497-105">In most instances, there is a single [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure for each protocol or protocol chain.</span></span> <span data-ttu-id="60497-106">Однако некоторые протоколы демонстрируют несколько поведений.</span><span class="sxs-lookup"><span data-stu-id="60497-106">However, some protocols exhibit multiple behaviors.</span></span> <span data-ttu-id="60497-107">Например, Протокол SPX ориентирован на сообщения (т. е. границы сообщений отправителя сохраняются сетью), но принимающий сокет может игнорировать эти границы сообщений и обрабатывать их как поток байтов.</span><span class="sxs-lookup"><span data-stu-id="60497-107">For example, the SPX protocol is message oriented (that is, the sender's message boundaries are preserved by the network), but the receiving socket can ignore these message boundaries and treat them as a byte stream.</span></span> <span data-ttu-id="60497-108">Таким образом, для SPX могут существовать две различные записи структуры **\_ сведений о всапротокол** — по одному для каждого поведения.</span><span class="sxs-lookup"><span data-stu-id="60497-108">Thus, two different **WSAPROTOCOL\_INFO** structure entries could exist for SPX—one for each behavior.</span></span>

<span data-ttu-id="60497-109">В Windows Sockets 2 отображаются несколько новых семейств адресов, типов сокетов и значений протоколов.</span><span class="sxs-lookup"><span data-stu-id="60497-109">In Windows Sockets 2, several new address family, socket type, and protocol values appear.</span></span> <span data-ttu-id="60497-110">Сокеты Windows 1,1 поддерживают одно семейство адресов (AF \_ iNet) для IPv4, состоящее из небольшого числа хорошо известных типов сокетов и идентификаторов протоколов.</span><span class="sxs-lookup"><span data-stu-id="60497-110">Windows Sockets 1.1 supported a single address family (AF\_INET) for IPv4 that consisted of a small number of well-known socket types and protocol identifiers.</span></span> <span data-ttu-id="60497-111">Сокеты Windows 2 поддерживают существующее семейство адресов, тип сокета и идентификаторы протоколов в целях совместимости, но также поддерживают новые значения семейства адресов для новых транспортных протоколов с новыми типами носителей.</span><span class="sxs-lookup"><span data-stu-id="60497-111">Windows Sockets 2 retains the existing address family, socket type, and protocol identifiers for compatibility reasons, but it also supports new address family values for new transport protocols with new media types.</span></span>

<span data-ttu-id="60497-112">Новые уникальные идентификаторы необязательно хорошо известны, но это не должно представлять проблему.</span><span class="sxs-lookup"><span data-stu-id="60497-112">New, unique identifiers are not necessarily well known, but this should not pose a problem.</span></span> <span data-ttu-id="60497-113">Приложения, которые должны быть независимыми от протокола, рекомендуется выбирать на основе протокола, а не значений, назначенных их *\_ типу сокета* или параметрам *протокола* .</span><span class="sxs-lookup"><span data-stu-id="60497-113">Applications that need to be protocol-independent are encouraged to select a protocol on the basis of its suitability rather than the values assigned to their *socket\_type* or *protocol* parameters.</span></span> <span data-ttu-id="60497-114">Пригодность протокола определяется атрибутами связи, такими как поток с обменом сообщениями и с надежным или ненадежным, которые содержатся в структуре протокола [**всапротокол \_ info**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) .</span><span class="sxs-lookup"><span data-stu-id="60497-114">Protocol suitability is indicated by the communications attributes, such as message-versus-byte stream, and reliable-versus-unreliable, that are contained in the protocol [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure.</span></span> <span data-ttu-id="60497-115">Выбор протоколов на основе пригодности вместо хорошо известных имен протоколов и типов сокетов позволяет приложениям, не зависящим от протокола, использовать новые транспортные протоколы и связанные с ними типы носителей по мере их появления.</span><span class="sxs-lookup"><span data-stu-id="60497-115">Selecting protocols on the basis of suitability as opposed to well-known protocol names and socket types lets protocol-independent applications take advantage of new transport protocols and their associated media types, as they become available.</span></span>

<span data-ttu-id="60497-116">Серверная часть преимуществ клиентских и серверных приложений, устанавливающая сокеты прослушивания на всех подходящих транспортных протоколах.</span><span class="sxs-lookup"><span data-stu-id="60497-116">The server half of a client/server application benefits by establishing listening sockets on all suitable transport protocols.</span></span> <span data-ttu-id="60497-117">Затем клиент может установить подключение с помощью любого подходящего протокола.</span><span class="sxs-lookup"><span data-stu-id="60497-117">Then, the client can establish its connection using any suitable protocol.</span></span> <span data-ttu-id="60497-118">Например, это позволит клиентскому приложению изменяться, когда оно было запущено в настольной системе, подключенной по локальной сети или на ноутбуке с помощью беспроводной сети.</span><span class="sxs-lookup"><span data-stu-id="60497-118">For example, this would let a client application be unmodified whether it was running on a desktop system connected through LAN or on a laptop using a wireless network.</span></span>

 

 
