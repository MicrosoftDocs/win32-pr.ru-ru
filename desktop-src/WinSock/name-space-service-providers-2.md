---
description: Поставщик пространства имен реализует сопоставление интерфейса между пространством имен Winsock SPI и собственным программным интерфейсом существующей службы имен, такой как DNS, X. 500 или службы каталогов NetWare (NDS).
ms.assetid: 9b35aa58-9011-4e0d-8c93-02714952b4a5
title: Поставщики служб пространства имен
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4e975c7ad0e5df29910624bb8f0b9d94fd24d9b8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105647165"
---
# <a name="namespace-service-providers"></a><span data-ttu-id="9208b-103">Поставщики служб пространства имен</span><span class="sxs-lookup"><span data-stu-id="9208b-103">Namespace Service Providers</span></span>

<span data-ttu-id="9208b-104">Поставщик пространства имен реализует сопоставление интерфейса между пространством имен Winsock SPI и собственным программным интерфейсом существующей службы имен, такой как DNS, X. 500 или службы каталогов NetWare (NDS).</span><span class="sxs-lookup"><span data-stu-id="9208b-104">A namespace provider implements an interface mapping between the Winsock namespace SPI and the native programmatic interface of an existing name service such as DNS, X.500, or NetWare Directory Services (NDS).</span></span> <span data-ttu-id="9208b-105">Хотя поставщик пространства имен поддерживает только одно пространство имен, можно установить несколько поставщиков для данного пространства имен.</span><span class="sxs-lookup"><span data-stu-id="9208b-105">While a namespace provider supports exactly one namespace, it is possible for multiple providers for a given namespace to be installed.</span></span> <span data-ttu-id="9208b-106">Можно также создать экземпляр нескольких поставщиков пространства имен с помощью одной библиотеки DLL.</span><span class="sxs-lookup"><span data-stu-id="9208b-106">It is also possible for a single DLL to create an instance of multiple namespace providers.</span></span> <span data-ttu-id="9208b-107">При установке поставщиков пространства имен сохраняется каталог структур [**всанамеспаце \_ info**](/windows/desktop/api/Winsock2/ns-winsock2-wsanamespace_infow) .</span><span class="sxs-lookup"><span data-stu-id="9208b-107">As namespace providers are installed, a catalog of [**WSANAMESPACE\_INFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsanamespace_infow) structures is maintained.</span></span> <span data-ttu-id="9208b-108">Приложение может использовать [**всаенумнамеспацепровидерс**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersa) , чтобы определить, какие пространства имен поддерживаются на компьютере.</span><span class="sxs-lookup"><span data-stu-id="9208b-108">An application may use [**WSAEnumNameSpaceProviders**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersa) to discover which namespaces are supported on a computer.</span></span>

<span data-ttu-id="9208b-109">В Windows Vista и более поздних версиях предоставляются улучшенная структура [**всанамеспаце \_ инфоекс**](/windows/desktop/api/Winsock2/ns-winsock2-wsanamespace_infoexw) и функция [**всаенумнамеспацепровидерсекс**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersexa) .</span><span class="sxs-lookup"><span data-stu-id="9208b-109">On Windows Vista and later, an enhanced [**WSANAMESPACE\_INFOEX**](/windows/desktop/api/Winsock2/ns-winsock2-wsanamespace_infoexw) structure and [**WSAEnumNameSpaceProvidersEx**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersexa) function are provided.</span></span>

<span data-ttu-id="9208b-110">На 64-разрядных платформах для перечисления 32-разрядного каталога предоставляются аналогичные функции [**WSCEnumNameSpaceProviders32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceproviders32) и [**WSCEnumNameSpaceProvidersEx32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceprovidersex32) .</span><span class="sxs-lookup"><span data-stu-id="9208b-110">On 64-bit platforms, similar [**WSCEnumNameSpaceProviders32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceproviders32) and [**WSCEnumNameSpaceProvidersEx32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceprovidersex32) functions are provided to enumerate the 32-bit catalog.</span></span>

<span data-ttu-id="9208b-111">Подробные сведения см. в разделе [требования к поставщику службы пространства имен Winsock](winsock-namespace-service-provider-requirements.md) .</span><span class="sxs-lookup"><span data-stu-id="9208b-111">Refer to [Winsock Namespace Service Provider Requirements](winsock-namespace-service-provider-requirements.md) for detailed information.</span></span>

## <a name="legacy-getxbyy-service-providers"></a><span data-ttu-id="9208b-112">Устаревшие поставщики услуг Жетксбии</span><span class="sxs-lookup"><span data-stu-id="9208b-112">Legacy GetXbyY Service Providers</span></span>

<span data-ttu-id="9208b-113">Сокеты Windows 2 полностью поддерживают средства разрешения имен, относящиеся к протоколу TCP/IP, которые находятся в Windows Sockets версии 1,1.</span><span class="sxs-lookup"><span data-stu-id="9208b-113">Windows Sockets 2 fully supports the TCP/IP-specific name resolution facilities found in Windows Sockets version 1.1.</span></span> <span data-ttu-id="9208b-114">Это достигается путем включения набора функций **жетксбии** в SPI.</span><span class="sxs-lookup"><span data-stu-id="9208b-114">It does this by including the set of **GetXbyY** functions in the SPI.</span></span> <span data-ttu-id="9208b-115">Однако обработка этого набора функций немного отличается от остальных функций SPI.</span><span class="sxs-lookup"><span data-stu-id="9208b-115">However, the treatment of this set of functions is somewhat different from the rest of the SPI functions.</span></span> <span data-ttu-id="9208b-116">Функции **жетксбии** , отображаемые в SPI, начинаются с жетксбиисп \_ и обобщены в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="9208b-116">The **GetXbyY** functions appearing in the SPI are prefaced with GETXBYYSP\_, and are summarized in the following table.</span></span>

<span data-ttu-id="9208b-117">Функции в стиле Berkeley</span><span class="sxs-lookup"><span data-stu-id="9208b-117">Berkeley Style Functions</span></span>



| <span data-ttu-id="9208b-118">Имя функции SPI</span><span class="sxs-lookup"><span data-stu-id="9208b-118">SPI function name</span></span>           | <span data-ttu-id="9208b-119">Описание</span><span class="sxs-lookup"><span data-stu-id="9208b-119">Description</span></span>                                                                              |
|-----------------------------|------------------------------------------------------------------------------------------|
| <span data-ttu-id="9208b-120">ЖЕТКСБИИСП \_ жесостбяддр</span><span class="sxs-lookup"><span data-stu-id="9208b-120">GETXBYYSP\_gethostbyaddr</span></span>    | <span data-ttu-id="9208b-121">Предоставляет структуру [**хостент**](/windows/desktop/api/winsock/ns-winsock-hostent) для указанного адреса узла.</span><span class="sxs-lookup"><span data-stu-id="9208b-121">Supplies a [**hostent**](/windows/desktop/api/winsock/ns-winsock-hostent) structure for the specified host address.</span></span>        |
| <span data-ttu-id="9208b-122">ЖЕТКСБИИСП \_ gethostbyname</span><span class="sxs-lookup"><span data-stu-id="9208b-122">GETXBYYSP\_gethostbyname</span></span>    | <span data-ttu-id="9208b-123">Предоставляет структуру [**хостент**](/windows/desktop/api/winsock/ns-winsock-hostent) для указанного имени узла.</span><span class="sxs-lookup"><span data-stu-id="9208b-123">Supplies a [**hostent**](/windows/desktop/api/winsock/ns-winsock-hostent) structure for the specified host name.</span></span>           |
| <span data-ttu-id="9208b-124">ЖЕТКСБИИСП \_ жетпротобинаме</span><span class="sxs-lookup"><span data-stu-id="9208b-124">GETXBYYSP\_getprotobyname</span></span>   | <span data-ttu-id="9208b-125">Предоставляет структуру [**протоент**](/windows/desktop/api/winsock/ns-winsock-protoent) для указанного имени протокола.</span><span class="sxs-lookup"><span data-stu-id="9208b-125">Supplies a [**protoent**](/windows/desktop/api/winsock/ns-winsock-protoent) structure for the specified protocol name.</span></span>     |
| <span data-ttu-id="9208b-126">ЖЕТКСБИИСП \_ жетпротобинумбер</span><span class="sxs-lookup"><span data-stu-id="9208b-126">GETXBYYSP\_getprotobynumber</span></span> | <span data-ttu-id="9208b-127">Предоставляет структуру [**протоент**](/windows/desktop/api/winsock/ns-winsock-protoent) для указанного номера протокола.</span><span class="sxs-lookup"><span data-stu-id="9208b-127">Supplies a [**protoent**](/windows/desktop/api/winsock/ns-winsock-protoent) structure for the specified protocol number.</span></span>   |
| <span data-ttu-id="9208b-128">ЖЕТКСБИИСП \_ жетсервбинаме</span><span class="sxs-lookup"><span data-stu-id="9208b-128">GETXBYYSP\_getservbyname</span></span>    | <span data-ttu-id="9208b-129">Предоставляет структуру [**Сервент**](/windows/desktop/api/winsock/ns-winsock-servent) для указанного типа Service. e</span><span class="sxs-lookup"><span data-stu-id="9208b-129">Supplies a [**servent**](/windows/desktop/api/winsock/ns-winsock-servent) structure for the specified service nam.e</span></span>        |
| <span data-ttu-id="9208b-130">ЖЕТКСБИИСП \_ жетсервбипорт</span><span class="sxs-lookup"><span data-stu-id="9208b-130">GETXBYYSP\_getservbyport</span></span>    | <span data-ttu-id="9208b-131">Предоставляет структуру [**Сервент**](/windows/desktop/api/winsock/ns-winsock-servent) для службы по указанному порту.</span><span class="sxs-lookup"><span data-stu-id="9208b-131">Supplies a [**servent**](/windows/desktop/api/winsock/ns-winsock-servent) structure for the service at the specified port.</span></span> |
| <span data-ttu-id="9208b-132">ЖЕТКСБИИСП \_ .</span><span class="sxs-lookup"><span data-stu-id="9208b-132">GETXBYYSP\_gethostname</span></span>      | <span data-ttu-id="9208b-133">Возвращает стандартное имя узла для локального компьютера.</span><span class="sxs-lookup"><span data-stu-id="9208b-133">Returns the standard host name for the local computer.</span></span>                                   |



 

<span data-ttu-id="9208b-134">Асинхронные функции стилей</span><span class="sxs-lookup"><span data-stu-id="9208b-134">Async Style Functions</span></span>



| <span data-ttu-id="9208b-135">Имя функции SPI</span><span class="sxs-lookup"><span data-stu-id="9208b-135">SPI function name</span></span>                   | <span data-ttu-id="9208b-136">Описание</span><span class="sxs-lookup"><span data-stu-id="9208b-136">Description</span></span>                                                                              |
|-------------------------------------|------------------------------------------------------------------------------------------|
| <span data-ttu-id="9208b-137">ЖЕТКСБИИСП \_ всаасинкжесостбяддр</span><span class="sxs-lookup"><span data-stu-id="9208b-137">GETXBYYSP\_WSAAsyncGetHostByAddr</span></span>    | <span data-ttu-id="9208b-138">Предоставляет структуру [**хостент**](/windows/desktop/api/winsock/ns-winsock-hostent) для указанного адреса узла.</span><span class="sxs-lookup"><span data-stu-id="9208b-138">Supplies a [**hostent**](/windows/desktop/api/winsock/ns-winsock-hostent) structure for the specified host address.</span></span>        |
| <span data-ttu-id="9208b-139">ЖЕТКСБИИСП \_ всаасинкжесостбинаме</span><span class="sxs-lookup"><span data-stu-id="9208b-139">GETXBYYSP\_WSAAsyncGetHostByName</span></span>    | <span data-ttu-id="9208b-140">Предоставляет структуру [**хостент**](/windows/desktop/api/winsock/ns-winsock-hostent) для указанного имени узла.</span><span class="sxs-lookup"><span data-stu-id="9208b-140">Supplies a [**hostent**](/windows/desktop/api/winsock/ns-winsock-hostent) structure for the specified host name.</span></span>           |
| <span data-ttu-id="9208b-141">ЖЕТКСБИИСП \_ всаасинкжетпротобинаме</span><span class="sxs-lookup"><span data-stu-id="9208b-141">GETXBYYSP\_WSAAsyncGetProtoByName</span></span>   | <span data-ttu-id="9208b-142">Предоставляет структуру [**протоент**](/windows/desktop/api/winsock/ns-winsock-protoent) для указанного имени протокола.</span><span class="sxs-lookup"><span data-stu-id="9208b-142">Supplies a [**protoent**](/windows/desktop/api/winsock/ns-winsock-protoent) structure for the specified protocol name.</span></span>     |
| <span data-ttu-id="9208b-143">ЖЕТКСБИИСП \_ всаасинкжетпротобинумбер</span><span class="sxs-lookup"><span data-stu-id="9208b-143">GETXBYYSP\_WSAAsyncGetProtoByNumber</span></span> | <span data-ttu-id="9208b-144">Предоставляет структуру [**протоент**](/windows/desktop/api/winsock/ns-winsock-protoent) для указанного номера протокола.</span><span class="sxs-lookup"><span data-stu-id="9208b-144">Supplies a [**protoent**](/windows/desktop/api/winsock/ns-winsock-protoent) structure for the specified protocol number.</span></span>   |
| <span data-ttu-id="9208b-145">ЖЕТКСБИИСП \_ всаасинкжетсервбинаме</span><span class="sxs-lookup"><span data-stu-id="9208b-145">GETXBYYSP\_WSAAsyncGetServByName</span></span>    | <span data-ttu-id="9208b-146">Предоставляет структуру [**Сервент**](/windows/desktop/api/winsock/ns-winsock-servent) для указанного имени службы.</span><span class="sxs-lookup"><span data-stu-id="9208b-146">Supplies a [**servent**](/windows/desktop/api/winsock/ns-winsock-servent) structure for the specified service name.</span></span>        |
| <span data-ttu-id="9208b-147">ЖЕТКСБИИСП \_ всаасинкжетсервбипорт</span><span class="sxs-lookup"><span data-stu-id="9208b-147">GETXBYYSP\_WSAAsyncGetServByPort</span></span>    | <span data-ttu-id="9208b-148">Предоставляет структуру [**Сервент**](/windows/desktop/api/winsock/ns-winsock-servent) для службы по указанному порту.</span><span class="sxs-lookup"><span data-stu-id="9208b-148">Supplies a [**servent**](/windows/desktop/api/winsock/ns-winsock-servent) structure for the service at the specified port.</span></span> |
| <span data-ttu-id="9208b-149">ЖЕТКСБИИСП \_ всаканцеласинкрекуест</span><span class="sxs-lookup"><span data-stu-id="9208b-149">GETXBYYSP\_WSACancelAsyncRequest</span></span>    | <span data-ttu-id="9208b-150">Отменяет асинхронную операцию **жетксбии** .</span><span class="sxs-lookup"><span data-stu-id="9208b-150">Cancels an asynchronous **GetXbyY** operation.</span></span>                                           |



 

<span data-ttu-id="9208b-151">Синтаксис и семантика этих функций **жетксбии** в SPI точно так же, как в спецификации API, и, следовательно, не повторяются здесь.</span><span class="sxs-lookup"><span data-stu-id="9208b-151">The syntax and semantics of these **GetXbyY** functions in the SPI are exactly the same as those documented in the API Specification and are, therefore, not repeated here.</span></span>

<span data-ttu-id="9208b-152">Библиотека DLL Windows Sockets 2 позволяет предоставлять эти службы только одному поставщику услуг.</span><span class="sxs-lookup"><span data-stu-id="9208b-152">The Windows Sockets 2 DLL allows exactly one service provider to offer these services.</span></span> <span data-ttu-id="9208b-153">Поэтому нет необходимости включать указатели на эти функции в таблицу процедур, полученную от поставщиков служб при запуске.</span><span class="sxs-lookup"><span data-stu-id="9208b-153">Therefore, there is no need to include pointers to these functions in the procedure table received from service providers at startup.</span></span> <span data-ttu-id="9208b-154">В средах Windows путь к библиотеке DLL, реализующей эти функции, извлекается из значения, найденного в следующем пути реестра.</span><span class="sxs-lookup"><span data-stu-id="9208b-154">In Windows environments the path to the DLL that implements these functions is retrieved from the value found in the following registry path.</span></span> <span data-ttu-id="9208b-155">Эта запись реестра не существует по умолчанию:</span><span class="sxs-lookup"><span data-stu-id="9208b-155">This registry entry does not exist by default:</span></span>

<span data-ttu-id="9208b-156">**HKey \_ Параметры \_ локальной** \\ **системы** \\ **CurrentControlSet** \\ **Services** \\ **Winsock2** \\  \\ **жетксбиилибрарипас**</span><span class="sxs-lookup"><span data-stu-id="9208b-156">**HKEY\_LOCAL\_MACHINE**\\**System**\\**CurrentControlSet**\\**Services**\\**WinSock2**\\**Parameters**\\**GetXByYLibraryPath**</span></span>

## <a name="built-in-default-getxbyy-service-provider"></a><span data-ttu-id="9208b-157">Поставщик службы Built-In по умолчанию Жетксбии</span><span class="sxs-lookup"><span data-stu-id="9208b-157">Built-In Default GetXbyY Service Provider</span></span>

<span data-ttu-id="9208b-158">Поставщик службы **жетксбии** по умолчанию интегрирован в стандартные компоненты среды выполнения Windows Sockets 2.</span><span class="sxs-lookup"><span data-stu-id="9208b-158">A default **GetXbyY** service provider is integrated into the standard Windows Sockets 2 run-time components.</span></span> <span data-ttu-id="9208b-159">Этот поставщик по умолчанию реализует все приведенные выше функции, поэтому не требуется, чтобы эти функции были реализованы каким-либо поставщиком пространства имен.</span><span class="sxs-lookup"><span data-stu-id="9208b-159">This default provider implements all of the above functions, thus it is not required for these functions to be implemented by any namespace provider.</span></span> <span data-ttu-id="9208b-160">Однако поставщик пространства имен может предоставить любые или все эти функции (и, таким же, переопределить значения по умолчанию), просто сохранив строку, которая является путем к библиотеке DLL, реализующей эти функции, в указанном разделе реестра.</span><span class="sxs-lookup"><span data-stu-id="9208b-160">However, a namespace provider is free to provide any or all of these functions (and thus override the defaults) by simply storing the string which is the path to the DLL that implements these functions in the indicated registry key.</span></span> <span data-ttu-id="9208b-161">Любые функции **жетксбии** , не экспортированные с помощью ИМЕНОВАННОЙ библиотеки DLL поставщика, будут предоставлены через встроенные значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="9208b-161">Any of the **GetXbyY** functions not exported by the named provider DLL will be supplied through the built-in defaults.</span></span> <span data-ttu-id="9208b-162">Однако обратите внимание, что если поставщик решает предоставить любую асинхронную версию функций **жетксбии** , он должен предоставить все асинхронные функции, чтобы операция отмены работала правильно.</span><span class="sxs-lookup"><span data-stu-id="9208b-162">Note, however, that if a provider elects to supply any of the async version of the **GetXbyY** functions, he should supply all of the async functions so that the cancel operation will work appropriately.</span></span>

<span data-ttu-id="9208b-163">Текущая реализация поставщика службы **жетксбии** по умолчанию находится в Wsock32.dll.</span><span class="sxs-lookup"><span data-stu-id="9208b-163">The current implementation of the default **GetXbyY** service provider resides within the Wsock32.dll.</span></span> <span data-ttu-id="9208b-164">В зависимости от того, как параметры TCP/IP были установлены с помощью панели управления, разрешение имен выполняется с помощью DNS или файлов локального узла.</span><span class="sxs-lookup"><span data-stu-id="9208b-164">Depending on how the TCP/IP settings have been established through Control Panel, name resolution will occur using either DNS or local host files.</span></span> <span data-ttu-id="9208b-165">При использовании DNS поставщик услуг **жетксбии** по умолчанию использует стандартные вызовы API Windows sockets 1,1 для взаимодействия с DNS-сервером.</span><span class="sxs-lookup"><span data-stu-id="9208b-165">When DNS is used, the default **GetXbyY** service provider uses standard Windows Sockets 1.1 API calls to communicate with the DNS server.</span></span> <span data-ttu-id="9208b-166">Эти транзакции будут выполняться с использованием любого стека TCP/IP, настроенного в качестве стека TCP/IP по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="9208b-166">These transactions will occur using whatever TCP/IP stack is configured as the default TCP/IP stack.</span></span> <span data-ttu-id="9208b-167">Однако в двух особых случаях следует учитывать особое упоминание.</span><span class="sxs-lookup"><span data-stu-id="9208b-167">Two special cases however, deserve special mention.</span></span>

<span data-ttu-id="9208b-168">По умолчанию реализация ЖЕТКСБИИСП \_ . hostname получает имя локального узла из реестра.</span><span class="sxs-lookup"><span data-stu-id="9208b-168">The default implementation of GETXBYYSP\_gethostname obtains the local host name from the registry.</span></span> <span data-ttu-id="9208b-169">Это будет соответствовать имени, присвоенному "Мой компьютер".</span><span class="sxs-lookup"><span data-stu-id="9208b-169">This will correspond to the name assigned to "My Computer".</span></span> <span data-ttu-id="9208b-170">Реализация по умолчанию ЖЕТКСБИИСП \_ gethostbyname и жетксбиисп \_ всаасинкжесостбинаме всегда сравнивает переданное имя узла с именем локального узла.</span><span class="sxs-lookup"><span data-stu-id="9208b-170">The default implementation of GETXBYYSP\_gethostbyname and GETXBYYSP\_WSAAsyncGetHostByName always compares the supplied host name with the local host name.</span></span> <span data-ttu-id="9208b-171">Если они совпадают, реализация по умолчанию использует частный интерфейс для проверки стека Microsoft TCP/IP, чтобы обнаружить его локальный IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="9208b-171">If they match, the default implementation uses a private interface to probe the Microsoft TCP/IP stack in order to discover its local IP address.</span></span> <span data-ttu-id="9208b-172">Поэтому, чтобы быть полностью независимым от стека Microsoft TCP/IP, поставщик пространства имен должен реализовать как ЖЕТКСБИИСП \_ gethostbyname, так и жетксбиисп \_ всаасинкжесостбинаме.</span><span class="sxs-lookup"><span data-stu-id="9208b-172">Thus, in order to be completely independent of the Microsoft TCP/IP stack, a namespace provider must implement both GETXBYYSP\_gethostbyname and GETXBYYSP\_WSAAsyncGetHostByName.</span></span>

 

 



