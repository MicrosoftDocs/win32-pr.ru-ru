---
description: Одним из наиболее очевидных изменений из IPv4 в IPv6 является размер IP-адреса. Многие пользовательские интерфейсы предоставляют диалоговые окна, позволяющие пользователю ввести IP-адрес, как содержащиеся на следующем рисунке.
ms.assetid: e2d7fd41-297a-400b-ae59-5d67db2be6f6
title: Проблемы с пользовательским интерфейсом для IPv6-приложений Winsock
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 03305073687cdd77e17c529d70ffe5959df40960
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105702851"
---
# <a name="user-interface-issues-for-ipv6-winsock-applications"></a><span data-ttu-id="16965-104">Проблемы с пользовательским интерфейсом для IPv6-приложений Winsock</span><span class="sxs-lookup"><span data-stu-id="16965-104">User Interface Issues for IPv6 Winsock Applications</span></span>

<span data-ttu-id="16965-105">Одним из наиболее очевидных изменений из IPv4 в IPv6 является размер IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="16965-105">One of the most obvious changes from IPv4 to IPv6 is the size of the IP address.</span></span> <span data-ttu-id="16965-106">Многие пользовательские интерфейсы предоставляют диалоговые окна, позволяющие пользователю ввести IP-адрес, как содержащиеся на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="16965-106">Many user interfaces provide dialog boxes that enable a user to enter an IP address, as exemplified in the following figure.</span></span>

![поле общего IPv4-адреса в пользовательском интерфейсе](images/portingguide001.jpg)

<span data-ttu-id="16965-108">Адресация в IPv6 из-за многих факторов, таких как длина, сложность и значимость разделов в адресном пространстве IPv6, не пригодногося на изменение или спецификацию пользователями.</span><span class="sxs-lookup"><span data-stu-id="16965-108">Addressing in IPv6, due to many factors such as length, complexity, and the significance of sections within the IPv6 address space, is not conducive to modification or specification by users.</span></span> <span data-ttu-id="16965-109">Таким образом, необходимость в предоставлении пользователям возможности указывать свой адрес уменьшается.</span><span class="sxs-lookup"><span data-stu-id="16965-109">Therefore, the need to provide users with the capability of specifying their own address is reduced.</span></span> <span data-ttu-id="16965-110">Кроме того, из-за сложности, связанной с адресацией IPv6, предоставление администраторам возможности указывать сведения об адресе IPv6, скорее всего, не будет происходить на уровне каждого узла.</span><span class="sxs-lookup"><span data-stu-id="16965-110">Additionally, due to the complexity associated with IPv6 addressing, providing administrators with the capability of specifying IPv6 address information is not likely to occur on a per-node basis.</span></span>

<span data-ttu-id="16965-111">Отображение адреса IPv6 в пользовательском интерфейсе не является представлением, поэтому разработчики должны учитывать вариативность в размере IPv6-адреса при изменении приложения для поддержки IPv6.</span><span class="sxs-lookup"><span data-stu-id="16965-111">Displaying an IPv6 address in the UI is not inconceivable, and therefore developers should consider the variability in the size of an IPv6 address when modifying an application to support IPv6.</span></span>

<span data-ttu-id="16965-112">В оставшейся части этого раздела обсуждается разница между предсказуемостью IPv4-адреса и соображениями длины адреса IPv6.</span><span class="sxs-lookup"><span data-stu-id="16965-112">The rest of this section discusses the difference between IPv4 address length predictability and IPv6 address length considerations.</span></span> <span data-ttu-id="16965-113">В этом разделе предполагается, что IPv6-адреса отображаются в шестнадцатеричном представлении.</span><span class="sxs-lookup"><span data-stu-id="16965-113">This section presumes IPv6 addresses are being displayed in their hexadecimal representation.</span></span>

<span data-ttu-id="16965-114">Адреса IPv4 могут быть предсказуемыми по размеру, так как они жестко подчиняются десятичной нотации, как показано в следующем примере адреса:</span><span class="sxs-lookup"><span data-stu-id="16965-114">IPv4 addresses are predictable in size, because they rigidly follow dotted decimal notation, as the following address example illustrates:</span></span>

``` syntax
10.10.256.1
```

<span data-ttu-id="16965-115">Адреса IPv6 не настолько предсказуемы, так как соглашение IPv6-адресов позволяет использовать двойные двоеточия (::) для представления ряда нулей.</span><span class="sxs-lookup"><span data-stu-id="16965-115">IPv6 addresses are not so predictable, due to the IPv6 address convention that enables the use of a double-colon (::) to represent a series of zeros.</span></span> <span data-ttu-id="16965-116">Таким образом, следующие представления адресов IPv6 приравниваются к одному и тому же IPv6-адресу:</span><span class="sxs-lookup"><span data-stu-id="16965-116">As such, the following IPv6 address representations equate to the same IPv6 address:</span></span>

``` syntax
1040:0:0:0:0:0:0:1
1040::1
```

<span data-ttu-id="16965-117">Возможность представления ряда нулей с двойным двоеточием приводит к непредсказуемой длине любого конкретного IPv6, что требует от программистов учитывать эту возможность при создании пользовательского интерфейса для отображения адресов IPv6.</span><span class="sxs-lookup"><span data-stu-id="16965-117">The capability to represent a series of zeros with a double-colon results in an unpredictable length for any given IPv6, which requires programmers to take this capability into consideration when creating user interface displays of IPv6 addresses.</span></span> <span data-ttu-id="16965-118">Конечно, разработчики должны убедиться, что пользовательский интерфейс способен отображать IP-адреса, которые не используют двойные двоеточия для представления ряда нулей (первый адрес ниже), а также могут отображать самый длинный адрес IPv6 (второй адрес ниже, с внедренным IPv4-адресом) при создании пользовательского интерфейса с поддержкой IPv6.</span><span class="sxs-lookup"><span data-stu-id="16965-118">Certainly, developers should ensure that the user interface is capable of displaying IP addresses that do not use a double-colon to represent a series of zeros (first address below), as well as being capable of displaying the longest possible IPv6 address (second address below, with the embedded IPv4 address) when creating their IPv6-capable user interface.</span></span> <span data-ttu-id="16965-119">Обратите внимание, что Добавление идентификатора области (ID) к следующему адресу приведет к увеличению его длины на примерно 11 символов:</span><span class="sxs-lookup"><span data-stu-id="16965-119">Note, too, that adding the Scope identifier (ID) to the following address would increase its length by as much as another eleven characters:</span></span>

``` syntax
21DA:00D3:0010:2F3B:02AA:00FF:FE28:9C5A
0000:0000:0000:0000:0000:ffff:123.123.123.123
```

<span data-ttu-id="16965-120">Еще одно важное замечание состоит в том, что адреса на основе имен являются более подходящими, чем IPv6-адреса на основе номеров.</span><span class="sxs-lookup"><span data-stu-id="16965-120">Another important consideration is whether name-based addresses are more appropriate than number-based IPv6 addresses.</span></span> <span data-ttu-id="16965-121">Если адреса на основе имен более уместны, следует учитывать, что соглашения об именах должны быть встроены в пользовательский интерфейс, включая любую входную проверку ошибок, соответствующую задаче.</span><span class="sxs-lookup"><span data-stu-id="16965-121">If name-based addresses are more appropriate, consideration for naming conventions should be built into the user interface, including any input error-checking appropriate for the task.</span></span>

<span data-ttu-id="16965-122">Существуют и другие сложности, связанные с отображением IPv6-адресов, которые необходимо учитывать разработчикам при изменении их приложения, а также при проектировании представлений адресов IPv6 в пользовательском интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="16965-122">There are other complexities associated with displaying IPv6 addresses that developers must take into consideration when modifying their application, and when designing user interface representations of IPv6 addresses.</span></span> <span data-ttu-id="16965-123">Ниже приведены некоторые из этих соображений.</span><span class="sxs-lookup"><span data-stu-id="16965-123">Some of these considerations are the following:</span></span>

-   <span data-ttu-id="16965-124">Должен ли адрес содержать все последовательности нулей или использовать нотацию с двойным двоеточием?</span><span class="sxs-lookup"><span data-stu-id="16965-124">Should the address contain all sequences of zeros, or use the double-colon notation?</span></span>
-   <span data-ttu-id="16965-125">Лучше ли использовать представление адреса на основе чисел или представление на основе имени?</span><span class="sxs-lookup"><span data-stu-id="16965-125">Is it more appropriate to use a number-based address representation or a name-based representation?</span></span>
-   <span data-ttu-id="16965-126">Пользователь заинтересован в различии определенного аспекта схемы адресации, например префикс подсети, идентификатор области или другие подполя?</span><span class="sxs-lookup"><span data-stu-id="16965-126">Is the user interested in discerning a certain aspect of the addressing scheme, such as the subnet prefix, scope identifier, or other subfields?</span></span>
-   <span data-ttu-id="16965-127">Пользователь заинтересован в определении других аспектов адреса, например идентификатора TLA, идентификатора NLA или идентификатора SLA?</span><span class="sxs-lookup"><span data-stu-id="16965-127">Is the user interested in determining other aspects of the address, such as the TLA identifier, the NLA identifier, or the SLA identifier?</span></span>
-   <span data-ttu-id="16965-128">Будет ли пользовательский интерфейс способен определять внедренные IPv6-адреса и, если да, как они будут обрабатываться и отображаться?</span><span class="sxs-lookup"><span data-stu-id="16965-128">Will your user interface be capable of discerning embedded IPv6 addresses, and if so, how will those be handled and displayed?</span></span> <span data-ttu-id="16965-129">Будет ли получено различие между IPv4-совместимыми адресами и IPv6-адресами, сопоставленными с IPv4, при отображении сведений об адресе пользователю?</span><span class="sxs-lookup"><span data-stu-id="16965-129">Will you discern between IPv4-compatible addresses and IPv4-mapped IPv6 addresses when displaying address information to the user?</span></span>

<span data-ttu-id="16965-130">Существуют и другие рекомендации, и разработчикам следует тщательно учитывать их аудиторию при разработке пользовательских интерфейсов IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="16965-130">There are other considerations as well, and developers should carefully consider their customer audience when developing IP address user interfaces.</span></span>

<span data-ttu-id="16965-131">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="16965-131">Best Practices</span></span>

-   <span data-ttu-id="16965-132">При изменении приложения для поддержки IPv6 разработчики должны учитывать соответствующий подход к каждому пользовательскому интерфейсу.</span><span class="sxs-lookup"><span data-stu-id="16965-132">Developers must consider the appropriate approach to each user interface when modifying their application to support IPv6.</span></span> <span data-ttu-id="16965-133">Убедитесь, что пользовательский интерфейс содержит достаточную длину для того, чтобы отображать IPv6-адреса принудительно, а определяет, является ли этот адрес числом или именем на основе имени.</span><span class="sxs-lookup"><span data-stu-id="16965-133">Ensuring that the user interface contains sufficient length to display IPv6 addresses is imperative, as is determining whether that address is number or name based.</span></span>
-   <span data-ttu-id="16965-134">Везде, где это возможно, используйте существующие вспомогательные функции Winsock и IP при использовании IPv6-адресов вместо повторной реализации этой логики.</span><span class="sxs-lookup"><span data-stu-id="16965-134">Whenever possible, use existing Winsock and IP Helper functions when using IPv6 addresses rather than re-implementing this logic.</span></span> <span data-ttu-id="16965-135">Например, функции [**RtlIpv6AddressToString**](/windows/win32/api/ip2string/nf-ip2string-rtlipv6addresstostringa), [**RtlIpv6AddressToStringEx**](/windows/win32/api/ip2string/nf-ip2string-rtlipv6addresstostringexw), [**RtlIpv6StringToAddress**](/windows/win32/api/ip2string/nf-ip2string-rtlipv6stringtoaddressa)и [**RtlIpv6StringToAddressEx**](/windows/win32/api/ip2string/nf-ip2string-rtlipv6stringtoaddressexw) можно использовать для преобразования между IPv6-адресами и строковыми представлениями этих IPv6-адресов.</span><span class="sxs-lookup"><span data-stu-id="16965-135">For example, the [**RtlIpv6AddressToString**](/windows/win32/api/ip2string/nf-ip2string-rtlipv6addresstostringa), [**RtlIpv6AddressToStringEx**](/windows/win32/api/ip2string/nf-ip2string-rtlipv6addresstostringexw), [**RtlIpv6StringToAddress**](/windows/win32/api/ip2string/nf-ip2string-rtlipv6stringtoaddressa), and [**RtlIpv6StringToAddressEx**](/windows/win32/api/ip2string/nf-ip2string-rtlipv6stringtoaddressexw) functions can be used to convert between IPv6 addresses and string representations of these IPv6 addresses.</span></span>

<span data-ttu-id="16965-136">Код, чтобы избежать</span><span class="sxs-lookup"><span data-stu-id="16965-136">Code To Avoid</span></span>

-   <span data-ttu-id="16965-137">Элементы пользовательского интерфейса, которые зависят от адреса IPv4, должны тщательно пропускаться, и часть этой тщательности должна включать сведения о том, подходит ли предоставленная информация (в IPv4) для IPv6.</span><span class="sxs-lookup"><span data-stu-id="16965-137">User interface elements that depend on an IPv4-sized address must undergo scrutiny, and part of that scrutiny should include whether the information you were providing (under IPv4) is appropriate for IPv6.</span></span>
-   <span data-ttu-id="16965-138">Возможность указывать IP-адрес также должна зависеть от того, используется ли протокол IPv4 или доступен протокол IPv6.</span><span class="sxs-lookup"><span data-stu-id="16965-138">The capability to specify an IP address should also depend on whether IPv4 is in use, or IPv6 is available.</span></span> <span data-ttu-id="16965-139">Если доступен протокол IPv6, можно ли указать адреса на основе номера (шестнадцатеричного) или адреса на основе имен?</span><span class="sxs-lookup"><span data-stu-id="16965-139">If IPv6 is available, is it appropriate to specify number-based (hexadecimal) addresses or name-based addresses?</span></span>

<span data-ttu-id="16965-140">Задачи кодирования</span><span class="sxs-lookup"><span data-stu-id="16965-140">Coding Tasks</span></span>

<span data-ttu-id="16965-141">**Изменение существующей базы кода с IPv4 на IPv4 и совместимость с IPv6**</span><span class="sxs-lookup"><span data-stu-id="16965-141">**To revise your existing code base from IPv4 to IPv4- and IPv6-interoperability**</span></span>

1.  <span data-ttu-id="16965-142">Выполните визуальную проверку пользовательского интерфейса, чтобы найти любой элемент, зависящий от определенной длины для строки IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="16965-142">Perform a visual review of the user interface, looking for any element that is dependent on a specific length for the IP address string.</span></span> <span data-ttu-id="16965-143">Элементы управления с легко идентифицируемой четырьмя разделами десятичной нотации легко распознаются, а другие — нет.</span><span class="sxs-lookup"><span data-stu-id="16965-143">Controls with the easily identified four-section dotted decimal notation are easy to spot, but others are not.</span></span> <span data-ttu-id="16965-144">Возможно, там есть места, где могут отображаться IP-адреса, например в диалоговых окнах, где адрес IPv6 может не отображаться.</span><span class="sxs-lookup"><span data-stu-id="16965-144">There may be places where IP addresses could be displayed, such as in dialog boxes, where an IPv6 address might run out of display room.</span></span>
2.  <span data-ttu-id="16965-145">При обнаружении любого из этих элементов управления сопротивляются, подходит ли он для вывода адреса при использовании IPv6.</span><span class="sxs-lookup"><span data-stu-id="16965-145">Upon finding any of these controls, scrutinize whether it is appropriate to display the address when using IPv6.</span></span> <span data-ttu-id="16965-146">Если возможно использование IPv4 или IPv6, убедитесь, что пользовательский интерфейс может разместить или.</span><span class="sxs-lookup"><span data-stu-id="16965-146">If it is possible that either IPv4 or IPv6 is in use, ensure that the user interface can accommodate either.</span></span> <span data-ttu-id="16965-147">Замените или дополните все элементы управления, используя элементы управления пользовательского интерфейса, которые могут отображать весь IPv6-адрес.</span><span class="sxs-lookup"><span data-stu-id="16965-147">Replace or augment any controls with user interface controls that can display an entire IPv6 address.</span></span>
3.  <span data-ttu-id="16965-148">Перед тестированием пользовательского интерфейса убедитесь, что изменения, включающие отображение IPv6-адресов, поддерживают предполагаемое удобство использования при использовании IPv4-адресов.</span><span class="sxs-lookup"><span data-stu-id="16965-148">Follow up with testing of the user interface to ensure the changes that enable IPv6 address display maintain the intended usability when using IPv4 addresses.</span></span> <span data-ttu-id="16965-149">Кроме того, проверьте адреса протокола, например информационные диалоговые окна, чтобы убедиться, что они должным образом обрабатывали IPv6-адреса.</span><span class="sxs-lookup"><span data-stu-id="16965-149">Also, test for protocol address display locations, such as informational dialog boxes, to ensure they properly handle IPv6 addresses.</span></span>

## <a name="related-topics"></a><span data-ttu-id="16965-150">См. также</span><span class="sxs-lookup"><span data-stu-id="16965-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="16965-151">Рекомендации по IPv6 для приложений Windows Sockets</span><span class="sxs-lookup"><span data-stu-id="16965-151">IPv6 Guide for Windows Sockets Applications</span></span>](ipv6-guide-for-windows-sockets-applications-2.md)
</dt> <dt>

[<span data-ttu-id="16965-152">Изменение структур данных для IPv6 Winsock Аппикатионс</span><span class="sxs-lookup"><span data-stu-id="16965-152">Changing Data Structures for IPv6 Winsock Appications</span></span>](changing-data-structures-2.md)
</dt> <dt>

[<span data-ttu-id="16965-153">Сокеты с двумя стеками для IPv6-приложений Winsock</span><span class="sxs-lookup"><span data-stu-id="16965-153">Dual-Stack Sockets for IPv6 Winsock Applications</span></span>](dual-stack-sockets.md)
</dt> <dt>

[<span data-ttu-id="16965-154">Вызовы функций для IPv6-приложений Winsock</span><span class="sxs-lookup"><span data-stu-id="16965-154">Function Calls for IPv6 Winsock Applications</span></span>](function-calls-2.md)
</dt> <dt>

[<span data-ttu-id="16965-155">Использование жестко закодированных IPv4-адресов</span><span class="sxs-lookup"><span data-stu-id="16965-155">Use of Hardcoded IPv4 Addresses</span></span>](use-of-hardcoded-ipv4-addresses-2.md)
</dt> <dt>

[<span data-ttu-id="16965-156">Базовые протоколы для IPv6-приложений Winsock</span><span class="sxs-lookup"><span data-stu-id="16965-156">Underlying Protocols for IPv6 Winsock Applications</span></span>](underlying-protocols-2.md)
</dt> </dl>

 

 
