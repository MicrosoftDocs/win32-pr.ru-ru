---
description: Многоадресное программирование включено через сокеты Windows.
ms.assetid: f729945b-b469-4baf-ac06-2431ee2d0e71
title: Многоадресное программирование
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 67af0eeb087e8c6a5938f26a0644dc346d55cf51
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104541562"
---
# <a name="multicast-programming"></a><span data-ttu-id="a024e-103">Многоадресное программирование</span><span class="sxs-lookup"><span data-stu-id="a024e-103">Multicast Programming</span></span>

<span data-ttu-id="a024e-104">Многоадресное программирование включено через сокеты Windows.</span><span class="sxs-lookup"><span data-stu-id="a024e-104">Multicast programming is enabled through Windows Sockets.</span></span> <span data-ttu-id="a024e-105">Сокеты Windows позволяют выполнять обнаружение многоадресного прослушивателя (MLD) версии 1 (MLDv1) и 2 (MLDv2) на IPv6 и протоколы управления группами Интернета версии 2 (IGMPv2) и 3 (IGMPv3) с помощью параметров сокета или запросов IOCTL.</span><span class="sxs-lookup"><span data-stu-id="a024e-105">Windows Sockets enables the Multicast Listener Discovery (MLD) versions 1 (MLDv1) and 2 (MLDv2) on IPv6 and the Internet Group Management Protocol versions 2 (IGMPv2) and 3 (IGMPv3) through the use of socket options or IOCTLs.</span></span> <span data-ttu-id="a024e-106">В этом разделе описывается реализация Windows, объясняется, как включить многоадресное программирование с помощью сокетов Windows, и приводятся примеры программирования, иллюстрирующие его использование.</span><span class="sxs-lookup"><span data-stu-id="a024e-106">This section describes the Windows implementation, explains how to enable multicast programming using Windows Sockets, and provides programming samples to illustrate its use.</span></span>

<span data-ttu-id="a024e-107">Вторая версия протокола IGMP, которая затем называется IGMPv2, позволяет узлам присоединяться и оставлять группы многоадресной рассылки, определяемые адресом многоадресной рассылки IPv4, на определенном сетевом интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="a024e-107">The second version of IGMP, hereafter referred to as IGMPv2, enables hosts to join and leave multicast groups identified by an IPv4 multicast address on a specific network interface.</span></span> <span data-ttu-id="a024e-108">Сокеты Windows позволяют приложению присоединяться и оставлять такие группы на конкретных сокетах.</span><span class="sxs-lookup"><span data-stu-id="a024e-108">Windows Sockets enables an application to join and leave such groups on specific sockets.</span></span> <span data-ttu-id="a024e-109">Недостаток IGMPv2 заключается в том, что любой адрес IPv4, присоединенный к группе IGMPv2, может быть передан всем членам, что потенциально приводит к переполнению группы и непригоден для использования для передачи данных, для которых требуется основной источник, например радиостанции Интернета.</span><span class="sxs-lookup"><span data-stu-id="a024e-109">A drawback of IGMPv2, however, is that any IPv4 source address joined to the IGMPv2 group can transmit to all members, potentially flooding the group and making it unusable for transmissions that require a primary source, such as an Internet radio station.</span></span> <span data-ttu-id="a024e-110">Проблема с IGMPv2 заключается в невозможности выборочно выбрать один адрес источника IPv4 (или даже несколько источников), а также невозможность блокировать отправители (такие как мошеннические трансляции или перпетраторс отказа в обслуживании) для данной группы многоадресной рассылки.</span><span class="sxs-lookup"><span data-stu-id="a024e-110">The problem with IGMPv2 is its inability to selectively choose a single IPv4 source address (or even a few sources), and its inability to block senders (such as rogue broadcasters or denial-of-service perpetrators) for a given multicast group.</span></span> <span data-ttu-id="a024e-111">IGMPv3 устраняет эти недостатки.</span><span class="sxs-lookup"><span data-stu-id="a024e-111">IGMPv3 addresses those shortcomings.</span></span>

<span data-ttu-id="a024e-112">С помощью сокетов Windows и IGMPv3 приложения могут выбрать определенный адрес многоадресного источника IPv4 и пару групп многоадресной рассылки.</span><span class="sxs-lookup"><span data-stu-id="a024e-112">With Windows Sockets and IGMPv3, applications can select a particular multicast IPv4 source address and multicast group pair.</span></span> <span data-ttu-id="a024e-113">Кроме того, сокеты Windows позволяют разработчикам выборочно разрешать дополнительные трансляции в заданной паре источника или группы, а также позволяет приложениям блокировать определенные вещательные трансляции.</span><span class="sxs-lookup"><span data-stu-id="a024e-113">In addition, Windows Sockets enables developers to selectively allow additional broadcasters in a given source/group pair, or enables applications to block specific broadcasters.</span></span> <span data-ttu-id="a024e-114">IGMPv3 поддерживается в Windows Vista и более поздних версиях.</span><span class="sxs-lookup"><span data-stu-id="a024e-114">IGMPv3 is supported on Windows Vista and later.</span></span>

<span data-ttu-id="a024e-115">Первая версия MLD на IPv6, называемая MLDv1, очень похожа на IGMPv2 и негативно сказывается на этих же ограничениях.</span><span class="sxs-lookup"><span data-stu-id="a024e-115">The first version of MLD on IPv6, referred to as MLDv1, is very similar to IGMPv2 and suffers from the same limitations.</span></span> <span data-ttu-id="a024e-116">MLDv1 позволяет узлам присоединяться и оставлять группы многоадресной рассылки, определяемые адресом многоадресной рассылки IPv6, на определенном сетевом интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="a024e-116">MLDv1 enables hosts to join and leave multicast groups identified by an IPv6 multicast address on a specific network interface.</span></span> <span data-ttu-id="a024e-117">Сокеты Windows позволяют приложению присоединяться и оставлять такие группы на конкретных сокетах.</span><span class="sxs-lookup"><span data-stu-id="a024e-117">Windows Sockets enables an application to join and leave such groups on specific sockets.</span></span> <span data-ttu-id="a024e-118">Однако любой исходный адрес IPv6, присоединенный к группе MLDv1, может быть передан всем членам, что потенциально приводит к переполнению группы и непригоден для использования для передачи данных, для которых требуется первичный источник.</span><span class="sxs-lookup"><span data-stu-id="a024e-118">However, any IPv6 source address joined to the MLDv1 group can transmit to all members, potentially flooding the group and making it unusable for transmissions that require a primary source.</span></span> <span data-ttu-id="a024e-119">Проблема с MLDv1 заключается в невозможности выборочно выбрать один исходный адрес IPv6 (или даже несколько источников), а также невозможность блокировать отправители (например, мошеннические трансляции или отказ в обслуживании перпетраторс) для данной группы многоадресной рассылки.</span><span class="sxs-lookup"><span data-stu-id="a024e-119">The problem with MLDv1 is its inability to selectively choose a single IPv6 source address (or even a few sources), and its inability to block senders (such as rogue broadcasters or denial-of-service perpetrators) for a given multicast group.</span></span> <span data-ttu-id="a024e-120">MLDv2 устраняет эти недостатки.</span><span class="sxs-lookup"><span data-stu-id="a024e-120">MLDv2 addresses those shortcomings.</span></span>

<span data-ttu-id="a024e-121">С помощью сокетов Windows и MLDv2 приложения могут выбрать определенный адрес источника многоадресной рассылки IPv6 и пару групп многоадресной рассылки.</span><span class="sxs-lookup"><span data-stu-id="a024e-121">With Windows Sockets and MLDv2, applications can select a particular multicast IPv6 source address and multicast group pair.</span></span> <span data-ttu-id="a024e-122">Кроме того, сокеты Windows позволяют разработчикам выборочно разрешать дополнительные трансляции в заданной паре источника или группы, а также позволяет приложениям блокировать определенные вещательные трансляции.</span><span class="sxs-lookup"><span data-stu-id="a024e-122">In addition, Windows Sockets enables developers to selectively allow additional broadcasters in a given source/group pair, or enables applications to block specific broadcasters.</span></span> <span data-ttu-id="a024e-123">MLDv2 поддерживается в Windows Vista и более поздних версиях.</span><span class="sxs-lookup"><span data-stu-id="a024e-123">MLDv2 is supported on Windows Vista and later.</span></span>

<span data-ttu-id="a024e-124">Существует два подхода, которые программист может использовать при разработке многоадресных приложений в Windows.</span><span class="sxs-lookup"><span data-stu-id="a024e-124">There are two approaches an application programmer can take when developing multicast applications in Windows.</span></span> <span data-ttu-id="a024e-125">Первый подход основан на изменениях; источники многоадресной рассылки добавляются или удаляются с помощью параметров сокета, даже во время передачи, по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="a024e-125">The first approach is change-based; multicast sources are added or removed using socket options, even during the course of transmission, as required.</span></span> <span data-ttu-id="a024e-126">Второй подход основан на финальном состоянии; адреса источника и все включенные и исключенные адреса указываются с помощью IOCTL.</span><span class="sxs-lookup"><span data-stu-id="a024e-126">The second approach is final-state based; source addresses and any included/excluded addresses are specified with an IOCTL.</span></span> <span data-ttu-id="a024e-127">Каждый подход является допустимой многоадресной практикой, но разработчики могут найти использование параметров сокета, а подход на основе изменений — более интуитивно понятным и гибким.</span><span class="sxs-lookup"><span data-stu-id="a024e-127">Each approach is a valid multicasting practice, but developers may find using socket options and the change-based approach more intuitive and flexible.</span></span>

<span data-ttu-id="a024e-128">Этот раздел содержит следующие страницы:</span><span class="sxs-lookup"><span data-stu-id="a024e-128">This section has the following pages:</span></span> 

| <span data-ttu-id="a024e-129">"Page title" (Заголовок страницы).</span><span class="sxs-lookup"><span data-stu-id="a024e-129">Page title</span></span>                                                                             | <span data-ttu-id="a024e-130">Описание</span><span class="sxs-lookup"><span data-stu-id="a024e-130">Description</span></span>                                                                                                                                                                        |
|----------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="a024e-131">MLD и IGMP с использованием сокетов Windows</span><span class="sxs-lookup"><span data-stu-id="a024e-131">MLD and IGMP Using Windows Sockets</span></span>](igmp-and-windows-sockets.md)                     | <span data-ttu-id="a024e-132">Перечисляет параметры многоадресного сокета, доступные для использования в программировании Windows Sockets, с использованием подхода, основанного на изменениях.</span><span class="sxs-lookup"><span data-stu-id="a024e-132">Enumerates the multicast socket options available for use in Windows Sockets programming, using a change-based programming approach.</span></span> <span data-ttu-id="a024e-133">Определяет две категории многоадресных приложений.</span><span class="sxs-lookup"><span data-stu-id="a024e-133">Defines two multicast application categories.</span></span> |
| [<span data-ttu-id="a024e-134">Поведение параметра сокета многоадресной рассылки</span><span class="sxs-lookup"><span data-stu-id="a024e-134">Multicast Socket Option Behavior</span></span>](multicast-socket-option-behavior.md)               | <span data-ttu-id="a024e-135">Содержит обширную таблицу, объясняющую последствия и требования к вызову параметров сокета многоадресной рассылки в определенном порядке.</span><span class="sxs-lookup"><span data-stu-id="a024e-135">Provides an extensive table to explain the implications and requirements of calling multicast socket options in particular order.</span></span>                                                  |
| [<span data-ttu-id="a024e-136">Пример многоадресного программирования</span><span class="sxs-lookup"><span data-stu-id="a024e-136">Multicast Programming Sample</span></span>](multicast-programming-sample.md)                       | <span data-ttu-id="a024e-137">Программный фрагмент, демонстрирующий использование параметров сокета для включения многоадресных приложений в Windows.</span><span class="sxs-lookup"><span data-stu-id="a024e-137">Programming snippet that illustrates how to use socket options to enable multicast applications in Windows.</span></span>                                                                        |
| [<span data-ttu-id="a024e-138">Многоадресное программирование на основе конечного состояния</span><span class="sxs-lookup"><span data-stu-id="a024e-138">Final-State-based Multicast Programming</span></span>](final-state-based-multicast-programming.md) | <span data-ttu-id="a024e-139">Описывает подход финального состояния и использование IOCTL для многоадресного программирования с помощью сокетов Windows.</span><span class="sxs-lookup"><span data-stu-id="a024e-139">Explains final-state approach, and how to use IOCTLs for multicast programming with Windows Sockets.</span></span>                                                                               |
| [<span data-ttu-id="a024e-140">Перенос широковещательных приложений на IPv6</span><span class="sxs-lookup"><span data-stu-id="a024e-140">Porting Broadcast Applications to IPv6</span></span>](porting-broadcast-applications-to-ipv6.md)   | <span data-ttu-id="a024e-141">Содержит рекомендации по переносу широковещательных приложений IPv4 в многоадресную рассылку IPv6.</span><span class="sxs-lookup"><span data-stu-id="a024e-141">Provides guidelines for porting IPv4 broadcast applications to IPv6 multicast.</span></span>                                                                                                     |



 

 

 



