---
description: Поскольку сама библиотека DLL Winsock больше не предоставляется каждым отдельным поставщиком стека, поставщику стека невозможно предоставить расширенные функциональные возможности, добавив точки входа в библиотеку DLL Winsock.
ms.assetid: 5c71532a-c565-4f65-ab36-ca0e23190718
title: Механизм расширения функции в SPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7cfa6c9dfaf3afcec8e6861a9a0d3545a7ed0c5d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105701527"
---
# <a name="function-extension-mechanism-in-the-spi"></a><span data-ttu-id="724ff-103">Механизм расширения функции в SPI</span><span class="sxs-lookup"><span data-stu-id="724ff-103">Function Extension Mechanism in the SPI</span></span>

<span data-ttu-id="724ff-104">Поскольку сама библиотека DLL Winsock больше не предоставляется каждым отдельным поставщиком стека, поставщику стека невозможно предоставить расширенные функциональные возможности, добавив точки входа в библиотеку DLL Winsock.</span><span class="sxs-lookup"><span data-stu-id="724ff-104">Because the Winsock DLL itself is no longer supplied by each individual stack vendor, it is not possible for a stack vendor to offer extended functionality by adding entry points to the Winsock DLL.</span></span> <span data-ttu-id="724ff-105">Чтобы преодолеть это ограничение, Winsock использует преимущества новой функции [**всаиоктл**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) для предоставления поставщикам услуг, которые хотят предложить расширения функциональности, зависящие от поставщика.</span><span class="sxs-lookup"><span data-stu-id="724ff-105">To overcome this limitation, Winsock takes advantage of the new [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) function to accommodate service providers who wish to offer provider-specific functionality extensions.</span></span> <span data-ttu-id="724ff-106">Этот механизм предполагает, что приложение осведомлено о конкретном расширении и распознает как семантику, так и используемую синтаксис.</span><span class="sxs-lookup"><span data-stu-id="724ff-106">This mechanism presupposes that an application is aware of a particular extension and understands both the semantics and syntax involved.</span></span> <span data-ttu-id="724ff-107">Такие сведения обычно предоставлены поставщиком поставщика услуг.</span><span class="sxs-lookup"><span data-stu-id="724ff-107">Such information would typically be supplied by the service provider vendor.</span></span>

<span data-ttu-id="724ff-108">Чтобы вызвать функцию расширения, приложение должно сначала запросить указатель на нужную функцию.</span><span class="sxs-lookup"><span data-stu-id="724ff-108">To invoke an extension function, the application must first ask for a pointer to the desired function.</span></span> <span data-ttu-id="724ff-109">Это осуществляется с помощью функции [**всаиоктл**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) с использованием \_ \_ \_ кода команды указателя функции получения расширения SIO \_ .</span><span class="sxs-lookup"><span data-stu-id="724ff-109">This is done through the [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) function using the SIO\_GET\_EXTENSION\_FUNCTION\_POINTER command code.</span></span> <span data-ttu-id="724ff-110">Входной буфер функции **всаиоктл** содержит идентификатор для нужной функции расширения, а выходной буфер будет содержать указатель на функцию.</span><span class="sxs-lookup"><span data-stu-id="724ff-110">The input buffer to the **WSAIoctl** function contains an identifier for the desired extension function and the output buffer will contain the function pointer itself.</span></span> <span data-ttu-id="724ff-111">Приложение может вызвать функцию расширения напрямую без передачи через Ws2 \_32.dll.</span><span class="sxs-lookup"><span data-stu-id="724ff-111">The application can then invoke the extension function directly without passing through the Ws2\_32.dll.</span></span>

<span data-ttu-id="724ff-112">Идентификаторы, назначенные функциям расширения, являются глобально уникальными идентификаторами (GUID), которые назначаются поставщиками поставщиков услуг.</span><span class="sxs-lookup"><span data-stu-id="724ff-112">The identifiers assigned to extension functions are globally unique identifiers (GUIDs) that are allocated by service provider vendors.</span></span> <span data-ttu-id="724ff-113">Поставщики, создающие функции расширения, законодателей для публикации полных сведений о функции, включая синтаксис прототипа функции.</span><span class="sxs-lookup"><span data-stu-id="724ff-113">Vendors who create extension functions are urged to publish full details about the function including the syntax of the function prototype.</span></span> <span data-ttu-id="724ff-114">Это упрощает распространенные и/или популярные функции расширения, предоставляемые несколькими поставщиками услуг.</span><span class="sxs-lookup"><span data-stu-id="724ff-114">This facilitates common and/or popular extension functions to be offered by multiple service providers.</span></span> <span data-ttu-id="724ff-115">Приложение может получить указатель на функцию и использовать функцию без необходимости знать о конкретном поставщике услуг, реализующем функцию.</span><span class="sxs-lookup"><span data-stu-id="724ff-115">An application can obtain the function pointer and use the function without needing to know anything about the particular service provider that implements the function.</span></span>

 

 



