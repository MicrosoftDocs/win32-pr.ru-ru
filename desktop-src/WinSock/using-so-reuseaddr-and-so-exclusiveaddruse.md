---
description: Разработка безопасной высокоуровневой сетевой инфраструктуры — это приоритет большинства разработчиков сетевых приложений. Однако при рассмотрении полностью безопасных решений безопасность сокетов часто оказывается слишком важной.
ms.assetid: b37a3e33-65ee-43b1-bc8b-3280db7ebee4
title: Использование SO_REUSEADDR и SO_EXCLUSIVEADDRUSE
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aaa4024f031102cbd634c235bb39f4c7860e6c1d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103814353"
---
# <a name="using-so_reuseaddr-and-so_exclusiveaddruse"></a><span data-ttu-id="5f52e-104">Использование \_ реусеаддр и так далее \_ ексклусивеаддрусе</span><span class="sxs-lookup"><span data-stu-id="5f52e-104">Using SO\_REUSEADDR and SO\_EXCLUSIVEADDRUSE</span></span>

<span data-ttu-id="5f52e-105">Разработка безопасной высокоуровневой сетевой инфраструктуры — это приоритет большинства разработчиков сетевых приложений.</span><span class="sxs-lookup"><span data-stu-id="5f52e-105">Developing a secure high-level network infrastructure is a priority for most network application developers.</span></span> <span data-ttu-id="5f52e-106">Однако при рассмотрении полностью безопасных решений безопасность сокетов часто оказывается слишком важной.</span><span class="sxs-lookup"><span data-stu-id="5f52e-106">However, socket security is often overlooked despite being very critical when considering a fully secure solution.</span></span> <span data-ttu-id="5f52e-107">Безопасность сокетов, в частности, связана с процессами, которые привязаны к тому же порту, который ранее был связан с другим процессом приложения.</span><span class="sxs-lookup"><span data-stu-id="5f52e-107">Socket security, specifically, deals with processes that bind to the same port previously bound by another application process.</span></span> <span data-ttu-id="5f52e-108">В прошлом было возможно, что сетевое приложение "перехватывает" порт другого приложения, что может привести к атаке типа "отказ в обслуживании" или краже данных.</span><span class="sxs-lookup"><span data-stu-id="5f52e-108">In the past, it was possible for a network application to "hijack" the port of another application, which could easily lead to a "denial of service" attack or data theft.</span></span>

<span data-ttu-id="5f52e-109">Как правило, безопасность сокетов применяется к процессам на стороне сервера.</span><span class="sxs-lookup"><span data-stu-id="5f52e-109">In general, socket security applies to server-side processes.</span></span> <span data-ttu-id="5f52e-110">В частности, безопасность сокетов применяется к любому сетевому приложению, которое принимает подключения и получает IP-трафик датаграмм.</span><span class="sxs-lookup"><span data-stu-id="5f52e-110">More specifically, socket security applies to any network application that accepts connections and receives IP datagram traffic.</span></span> <span data-ttu-id="5f52e-111">Обычно эти приложения привязаны к хорошо известному порту и являются общими целями для вредоносного сетевого кода.</span><span class="sxs-lookup"><span data-stu-id="5f52e-111">These applications typically bind to a well-known port and are common targets for malicious network code.</span></span>

<span data-ttu-id="5f52e-112">Клиентские приложения менее вероятно являются целями таких атак — не так как они менее уязвимы, но так как большинство клиентов привязаны к временным локальным портам, а не к статическим портам службы.</span><span class="sxs-lookup"><span data-stu-id="5f52e-112">Client applications are less likely to be the targets of such attacks — not because they are less susceptible, but because most clients bind to "ephemeral" local ports rather than static "service" ports.</span></span> <span data-ttu-id="5f52e-113">Клиентские сетевые приложения всегда должны выполнять привязку к временным портам (указав порт 0 в структуре [**SOCKADDR**](sockaddr-2.md) , на которую указывает параметр *Name* при вызове функции [**BIND**](/windows/win32/api/winsock/nf-winsock-bind) ), если не существует привлекательной архитектуры.</span><span class="sxs-lookup"><span data-stu-id="5f52e-113">Client network applications should always bind to ephemeral ports (by specifying port 0 in the [**SOCKADDR**](sockaddr-2.md) structure pointed to by the *name* parameter when calling the [**bind**](/windows/win32/api/winsock/nf-winsock-bind) function) unless there is a compelling architectural reason not to.</span></span> <span data-ttu-id="5f52e-114">Временные локальные порты состоят из портов, превышающих порт 49151.</span><span class="sxs-lookup"><span data-stu-id="5f52e-114">The ephemeral local ports consist of ports greater than port 49151.</span></span> <span data-ttu-id="5f52e-115">Большинство серверных приложений для выделенных служб привязаны к широко известному зарезервированному порту, который меньше или равен порту 49151.</span><span class="sxs-lookup"><span data-stu-id="5f52e-115">Most server applications for dedicated services bind to a well-known reserved port that is less than or equal to port 49151.</span></span> <span data-ttu-id="5f52e-116">Таким образом, для большинства приложений обычно возникает конфликт запросов привязки между клиентскими и серверными приложениями.</span><span class="sxs-lookup"><span data-stu-id="5f52e-116">So for most applications, there is not usually a conflict for bind requests between client and server applications.</span></span>

<span data-ttu-id="5f52e-117">В этом разделе описывается уровень безопасности по умолчанию на различных платформах Microsoft Windows, а также сведения о том, как определенные параметры сокета **\_ Реусеаддр** и [поэтому \_ ексклусивеаддрусе](so-exclusiveaddruse.md) влияют на безопасность сетевых приложений.</span><span class="sxs-lookup"><span data-stu-id="5f52e-117">This section describes the default level of security on various Microsoft Windows platforms and how the specific socket options **SO\_REUSEADDR** and [SO\_EXCLUSIVEADDRUSE](so-exclusiveaddruse.md) impact and affect network application security.</span></span> <span data-ttu-id="5f52e-118">В Windows Server 2003 и более поздних версиях доступна дополнительная функция, называемая расширенной безопасностью сокетов.</span><span class="sxs-lookup"><span data-stu-id="5f52e-118">An additional feature called enhanced socket security is available on Windows Server 2003 and later.</span></span> <span data-ttu-id="5f52e-119">Доступность этих параметров сокетов и улучшенной безопасности сокетов различается в разных версиях операционных систем Майкрософт, как показано в таблице ниже.</span><span class="sxs-lookup"><span data-stu-id="5f52e-119">The availability of these socket options and enhanced socket security varies across versions of Microsoft operating systems, as shown in the table below.</span></span>

| <span data-ttu-id="5f52e-120">Платформа</span><span class="sxs-lookup"><span data-stu-id="5f52e-120">Platform</span></span>            | <span data-ttu-id="5f52e-121">Итак, \_ реусеаддр</span><span class="sxs-lookup"><span data-stu-id="5f52e-121">SO\_REUSEADDR</span></span> | <span data-ttu-id="5f52e-122">Итак, \_ ексклусивеаддрусе</span><span class="sxs-lookup"><span data-stu-id="5f52e-122">SO\_EXCLUSIVEADDRUSE</span></span>                  | <span data-ttu-id="5f52e-123">Повышенная безопасность сокетов</span><span class="sxs-lookup"><span data-stu-id="5f52e-123">Enhanced socket security</span></span> |
|---------------------|---------------|---------------------------------------|--------------------------|
| <span data-ttu-id="5f52e-124">Windows 95</span><span class="sxs-lookup"><span data-stu-id="5f52e-124">Windows 95</span></span>          | <span data-ttu-id="5f52e-125">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-125">Available</span></span>     | <span data-ttu-id="5f52e-126">Недоступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-126">Not Available</span></span>                         | <span data-ttu-id="5f52e-127">Недоступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-127">Not Available</span></span>            |
| <span data-ttu-id="5f52e-128">Windows 98</span><span class="sxs-lookup"><span data-stu-id="5f52e-128">Windows 98</span></span>          | <span data-ttu-id="5f52e-129">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-129">Available</span></span>     | <span data-ttu-id="5f52e-130">Недоступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-130">Not Available</span></span>                         | <span data-ttu-id="5f52e-131">Недоступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-131">Not Available</span></span>            |
| <span data-ttu-id="5f52e-132">Windows Me</span><span class="sxs-lookup"><span data-stu-id="5f52e-132">Windows Me</span></span>          | <span data-ttu-id="5f52e-133">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-133">Available</span></span>     | <span data-ttu-id="5f52e-134">Недоступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-134">Not Available</span></span>                         | <span data-ttu-id="5f52e-135">Недоступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-135">Not Available</span></span>            |
| <span data-ttu-id="5f52e-136">Windows NT 4.0</span><span class="sxs-lookup"><span data-stu-id="5f52e-136">Windows NT 4.0</span></span>      | <span data-ttu-id="5f52e-137">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-137">Available</span></span>     | <span data-ttu-id="5f52e-138">Доступно в пакете обновления 4 и более поздних версий</span><span class="sxs-lookup"><span data-stu-id="5f52e-138">Available in Service Pack 4 and later</span></span> | <span data-ttu-id="5f52e-139">Недоступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-139">Not Available</span></span>            |
| <span data-ttu-id="5f52e-140">Windows 2000</span><span class="sxs-lookup"><span data-stu-id="5f52e-140">Windows 2000</span></span>        | <span data-ttu-id="5f52e-141">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-141">Available</span></span>     | <span data-ttu-id="5f52e-142">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-142">Available</span></span>                             | <span data-ttu-id="5f52e-143">Недоступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-143">Not Available</span></span>            |
| <span data-ttu-id="5f52e-144">Windows XP</span><span class="sxs-lookup"><span data-stu-id="5f52e-144">Windows XP</span></span>          | <span data-ttu-id="5f52e-145">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-145">Available</span></span>     | <span data-ttu-id="5f52e-146">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-146">Available</span></span>                             | <span data-ttu-id="5f52e-147">Недоступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-147">Not Available</span></span>            |
| <span data-ttu-id="5f52e-148">Windows Server 2003</span><span class="sxs-lookup"><span data-stu-id="5f52e-148">Windows Server 2003</span></span> | <span data-ttu-id="5f52e-149">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-149">Available</span></span>     | <span data-ttu-id="5f52e-150">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-150">Available</span></span>                             | <span data-ttu-id="5f52e-151">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-151">Available</span></span>                |
| <span data-ttu-id="5f52e-152">Windows Vista</span><span class="sxs-lookup"><span data-stu-id="5f52e-152">Windows Vista</span></span>       | <span data-ttu-id="5f52e-153">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-153">Available</span></span>     | <span data-ttu-id="5f52e-154">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-154">Available</span></span>                             | <span data-ttu-id="5f52e-155">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-155">Available</span></span>                |
| <span data-ttu-id="5f52e-156">Windows Server 2008</span><span class="sxs-lookup"><span data-stu-id="5f52e-156">Windows Server 2008</span></span> | <span data-ttu-id="5f52e-157">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-157">Available</span></span>     | <span data-ttu-id="5f52e-158">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-158">Available</span></span>                             | <span data-ttu-id="5f52e-159">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-159">Available</span></span>                |
| <span data-ttu-id="5f52e-160">Windows 7and более поздней версии</span><span class="sxs-lookup"><span data-stu-id="5f52e-160">Windows 7and newer</span></span>  | <span data-ttu-id="5f52e-161">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-161">Available</span></span>     | <span data-ttu-id="5f52e-162">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-162">Available</span></span>                             | <span data-ttu-id="5f52e-163">Доступно</span><span class="sxs-lookup"><span data-stu-id="5f52e-163">Available</span></span>                |

## <a name="using-so_reuseaddr"></a><span data-ttu-id="5f52e-164">Использование \_ реусеаддр</span><span class="sxs-lookup"><span data-stu-id="5f52e-164">Using SO\_REUSEADDR</span></span>

<span data-ttu-id="5f52e-165">Этот **параметр \_ позволяет сокету** принудительно выполнять привязку к порту, используемому другим сокетом.</span><span class="sxs-lookup"><span data-stu-id="5f52e-165">The **SO\_REUSEADDR** socket option allows a socket to forcibly bind to a port in use by another socket.</span></span> <span data-ttu-id="5f52e-166">Второй сокет вызывает [**сетсоккопт**](/windows/win32/api/winsock/nf-winsock-setsockopt) с параметром *optname* , для которого задано значение **\_ реусеаддр** , а параметр *оптвал* — логическим значением **true** перед вызовом [**BIND**](/windows/win32/api/winsock/nf-winsock-bind) на том же порту, что и Исходный сокет.</span><span class="sxs-lookup"><span data-stu-id="5f52e-166">The second socket calls [**setsockopt**](/windows/win32/api/winsock/nf-winsock-setsockopt) with the *optname* parameter set to **SO\_REUSEADDR** and the *optval* parameter set to a boolean value of **TRUE** before calling [**bind**](/windows/win32/api/winsock/nf-winsock-bind) on the same port as the original socket.</span></span> <span data-ttu-id="5f52e-167">После успешной привязки второго сокета поведение всех сокетов, привязанных к этому порту, является неопределенным.</span><span class="sxs-lookup"><span data-stu-id="5f52e-167">Once the second socket has successfully bound, the behavior for all sockets bound to that port is indeterminate.</span></span> <span data-ttu-id="5f52e-168">Например, если все сокеты на том же порте предоставляют службу TCP, то любые входящие запросы TCP-соединений через порт не могут быть гарантированно обработаны правильным сокетом — поведение не детерминировано.</span><span class="sxs-lookup"><span data-stu-id="5f52e-168">For example, if all of the sockets on the same port provide TCP service, any incoming TCP connection requests over the port cannot be guaranteed to be handled by the correct socket — the behavior is non-deterministic.</span></span> <span data-ttu-id="5f52e-169">Вредоносная программа может использовать **\_ реусеаддр,** чтобы принудительно использовать сокеты BIND, уже используемые для стандартных сетевых протоколов, чтобы запретить доступ к этим службам.</span><span class="sxs-lookup"><span data-stu-id="5f52e-169">A malicious program can use **SO\_REUSEADDR** to forcibly bind sockets already in use for standard network protocol services in order to deny access to those service.</span></span> <span data-ttu-id="5f52e-170">Для использования этого параметра специальные привилегии не требуются.</span><span class="sxs-lookup"><span data-stu-id="5f52e-170">No special privileges are required to use this option.</span></span>

<span data-ttu-id="5f52e-171">Если клиентское приложение привязывается к порту до того, как серверное приложение сможет выполнить привязку к тому же порту, могут возникнуть проблемы.</span><span class="sxs-lookup"><span data-stu-id="5f52e-171">If a client application binds to a port before a server application is able to bind to the same port, then problems may result.</span></span> <span data-ttu-id="5f52e-172">Если серверное приложение принудительно привязывается к тому же порту с помощью параметра **so \_ реусеаддр** , то поведение всех сокетов, привязанных к этому порту, не определено.</span><span class="sxs-lookup"><span data-stu-id="5f52e-172">If the server application forcibly binds using the **SO\_REUSEADDR** socket option to the same port, then the behavior for all sockets bound to that port is indeterminate.</span></span>

<span data-ttu-id="5f52e-173">Исключением из этого недетерминированного поведения являются сокеты многоадресной рассылки.</span><span class="sxs-lookup"><span data-stu-id="5f52e-173">The exception to this non-deterministic behavior is multicast sockets.</span></span> <span data-ttu-id="5f52e-174">Если два сокета привязаны к одному интерфейсу и порту и являются членами одной группы многоадресной рассылки, данные будут доставляться обоим сокетам, а не произвольно выбранному.</span><span class="sxs-lookup"><span data-stu-id="5f52e-174">If two sockets are bound to the same interface and port and are members of the same multicast group, data will be delivered to both sockets, rather than an arbitrarily chosen one.</span></span>

## <a name="using-so_exclusiveaddruse"></a><span data-ttu-id="5f52e-175">Использование \_ ексклусивеаддрусе</span><span class="sxs-lookup"><span data-stu-id="5f52e-175">Using SO\_EXCLUSIVEADDRUSE</span></span>

<span data-ttu-id="5f52e-176">До появления параметра **\_ ексклусивеаддрусе** Socket существовало очень мало разработчиков сетевых приложений, чтобы предотвратить привязку вредоносной программы к порту, на котором в сетевом приложении привязываются собственные сокеты.</span><span class="sxs-lookup"><span data-stu-id="5f52e-176">Before the **SO\_EXCLUSIVEADDRUSE** socket option was introduced, there was very little a network application developer could do to prevent a malicious program from binding to the port on which the network application had its own sockets bound.</span></span> <span data-ttu-id="5f52e-177">Для решения этой проблемы безопасности сокеты Windows предоставили вариант **\_ ексклусивеаддрусе** Socket, который стал доступен в Windows NT 4,0 с пакетом обновления 4 (SP4) и более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="5f52e-177">In order to address this security issue, Windows Sockets introduced the **SO\_EXCLUSIVEADDRUSE** socket option, which became available on Windows NT 4.0 with Service Pack 4 (SP4) and later.</span></span>

<span data-ttu-id="5f52e-178">Параметр **\_ ексклусивеаддрусе** Socket может использоваться только членами группы безопасности «Администраторы» в Windows XP и более ранних версиях.</span><span class="sxs-lookup"><span data-stu-id="5f52e-178">The **SO\_EXCLUSIVEADDRUSE** socket option can only be used by members of the Administrators security group on Windows XP and earlier.</span></span> <span data-ttu-id="5f52e-179">Причины, по которым это требование было изменено в Windows Server 2003 и более поздних версиях, обсуждаются далее в этой статье.</span><span class="sxs-lookup"><span data-stu-id="5f52e-179">The reasons why this requirement was changed on Windows Server 2003 and later are discussed later in the article.</span></span>

<span data-ttu-id="5f52e-180">Этот **параметр \_ ексклусивеаддрусе** устанавливается путем вызова функции [**сетсоккопт**](/windows/win32/api/winsock/nf-winsock-setsockopt) с параметром *optname* , для которого задано **значение \_ ексклусивеаддрусе** , а параметр *оптвал* — логическим значением **true** перед привязкой к сокету.</span><span class="sxs-lookup"><span data-stu-id="5f52e-180">The **SO\_EXCLUSIVEADDRUSE** option is set by calling the [**setsockopt**](/windows/win32/api/winsock/nf-winsock-setsockopt) function with the *optname* parameter set to **SO\_EXCLUSIVEADDRUSE** and the *optval* parameter set to a boolean value of **TRUE** before the socket is bound.</span></span> <span data-ttu-id="5f52e-181">После установки параметра поведение последующих вызовов [**BIND**](/windows/win32/api/winsock/nf-winsock-bind) различается в зависимости от сетевого адреса, указанного в каждом вызове **привязки** .</span><span class="sxs-lookup"><span data-stu-id="5f52e-181">After the option is set, the behavior of subsequent [**bind**](/windows/win32/api/winsock/nf-winsock-bind) calls differs depending on the network address specified in each **bind** call.</span></span>

<span data-ttu-id="5f52e-182">В следующей таблице описывается поведение, которое происходит в Windows XP и более ранних версиях, когда второй сокет пытается выполнить привязку к адресу, ранее привязанному к первому сокету, используя определенные параметры сокета.</span><span class="sxs-lookup"><span data-stu-id="5f52e-182">The table below describes the behavior that occurs in Windows XP and earlier when a second socket attempts to bind to an address previously bound to by a first socket using specific socket options.</span></span>

> [!NOTE]  
> <span data-ttu-id="5f52e-183">В таблице ниже "подстановочный знак" обозначает адрес с подстановочными знаками для данного протокола (например, "0.0.0.0" для IPv4 и "::" для IPv6).</span><span class="sxs-lookup"><span data-stu-id="5f52e-183">In the table below, "wildcard" denotes the wildcard address for the given protocol (such as "0.0.0.0" for IPv4 and "::" for IPv6).</span></span> <span data-ttu-id="5f52e-184">"Конкретное" обозначает конкретный IP-адрес, назначенный интерфейсу.</span><span class="sxs-lookup"><span data-stu-id="5f52e-184">"Specific" denotes a specific IP address assigned an interface.</span></span> <span data-ttu-id="5f52e-185">Ячейки таблицы указывают, является ли привязка успешной ("Success"), или возвращается ошибка ("INUSE" для ошибки [всаеаддринусе](windows-sockets-error-codes-2.md) ; "Доступ" для ошибки [всаеакцес](windows-sockets-error-codes-2.md) ).</span><span class="sxs-lookup"><span data-stu-id="5f52e-185">The table cells indicate whether or not the bind is successful ("Success") or an error is returned ("INUSE" for the [WSAEADDRINUSE](windows-sockets-error-codes-2.md) error; "ACCESS" for the [WSAEACCES](windows-sockets-error-codes-2.md) error).</span></span>

<table>
    <tr>
        <td bgcolor="#C0C0C0" colspan="2" rowspan="3"><span data-ttu-id="5f52e-186">Первый вызов <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>привязки</strong></a></span><span class="sxs-lookup"><span data-stu-id="5f52e-186">First <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>bind</strong></a> call</span></span></td>
        <td bgcolor="#C0C0C0" colspan="6"><span data-ttu-id="5f52e-187">Второй вызов <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>BIND</strong></a></span><span class="sxs-lookup"><span data-stu-id="5f52e-187">Second <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>bind</strong></a> call</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="5f52e-188">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="5f52e-188">Default</span></span></td>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="5f52e-189">SO_REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="5f52e-189">SO_REUSEADDR</span></span></td>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="5f52e-190">SO_EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="5f52e-190">SO_EXCLUSIVEADDRUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-191">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-191">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-192">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-192">Specific</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-193">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-193">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-194">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-194">Specific</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-195">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-195">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-196">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-196">Specific</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="5f52e-197">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="5f52e-197">Default</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-198">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-198">Wildcard</span></span></td>
        <td><span data-ttu-id="5f52e-199">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-199">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-200">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-200">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-201">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-201">Success</span></span></td>
        <td><span data-ttu-id="5f52e-202">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-202">Success</span></span></td>
        <td><span data-ttu-id="5f52e-203">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-203">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-204">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-204">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-205">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-205">Specific</span></span></td>
        <td><span data-ttu-id="5f52e-206">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-206">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-207">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-207">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-208">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-208">Success</span></span></td>
        <td><span data-ttu-id="5f52e-209">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-209">Success</span></span></td>
        <td><span data-ttu-id="5f52e-210">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-210">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-211">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-211">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="5f52e-212">SO_REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="5f52e-212">SO_REUSEADDR</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-213">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-213">Wildcard</span></span></td>
        <td><span data-ttu-id="5f52e-214">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-214">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-215">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-215">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-216">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-216">Success</span></span></td>
        <td><span data-ttu-id="5f52e-217">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-217">Success</span></span></td>
        <td><span data-ttu-id="5f52e-218">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-218">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-219">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-219">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-220">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-220">Specific</span></span></td>
        <td><span data-ttu-id="5f52e-221">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-221">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-222">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-222">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-223">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-223">Success</span></span></td>
        <td><span data-ttu-id="5f52e-224">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-224">Success</span></span></td>
        <td><span data-ttu-id="5f52e-225">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-225">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-226">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-226">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="5f52e-227">SO_EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="5f52e-227">SO_EXCLUSIVEADDRUSE</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-228">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-228">Wildcard</span></span></td>
        <td><span data-ttu-id="5f52e-229">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-229">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-230">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-230">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-231">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-231">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-232">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-232">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-233">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-233">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-234">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-234">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-235">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-235">Specific</span></span></td>
        <td><span data-ttu-id="5f52e-236">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-236">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-237">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-237">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-238">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-238">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-239">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-239">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-240">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-240">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-241">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-241">INUSE</span></span></td>
    </tr>
</table>

<span data-ttu-id="5f52e-242">Если два сокета привязаны к одному и тому же номеру порта, но в разных явных интерфейсах, конфликт не возникает.</span><span class="sxs-lookup"><span data-stu-id="5f52e-242">When two sockets are bound to the same port number but on different explicit interfaces, there is no conflict.</span></span> <span data-ttu-id="5f52e-243">Например, если у компьютера есть два IP-интерфейса, 10.0.0.1 и 10.99.99.99, если первый вызов [**BIND**](/windows/win32/api/winsock/nf-winsock-bind) находится на 10.0.0.1 с портом 5150, и **поэтому указан \_ ексклусивеаддрусе** , то второй вызов для **привязки** 10.99.99.99 с портом также имеет значение 5150, и никакие параметры не указаны успешно.</span><span class="sxs-lookup"><span data-stu-id="5f52e-243">For example, in the case where a computer has two IP interfaces, 10.0.0.1 and 10.99.99.99, if the first call to [**bind**](/windows/win32/api/winsock/nf-winsock-bind) is on 10.0.0.1 with the port set to 5150 and **SO\_EXCLUSIVEADDRUSE** specified, then a second call to **bind** on 10.99.99.99 with the port also set to 5150 and no options specified will succeed.</span></span> <span data-ttu-id="5f52e-244">Однако если первый сокет привязан к адресу-шаблону и порту 5150, то любой последовательный вызов привязки к порту 5150 с **таким образом \_ ексклусивеаддрусе** закончится ошибкой с [всаеаддринусе](windows-sockets-error-codes-2.md) или [всаеакцес](windows-sockets-error-codes-2.md) , возвращенными операцией **привязки** .</span><span class="sxs-lookup"><span data-stu-id="5f52e-244">However, if the first socket is bound to the wildcard address and port 5150, then any subsequent bind call to port 5150 with **SO\_EXCLUSIVEADDRUSE** set will fail with either [WSAEADDRINUSE](windows-sockets-error-codes-2.md) or [WSAEACCES](windows-sockets-error-codes-2.md) returned by the **bind** operation.</span></span>

<span data-ttu-id="5f52e-245">В случае, когда первый вызов [**привязывает**](/windows/win32/api/winsock/nf-winsock-bind) наборы **таким образом, что \_ реусеаддр** или вообще не имеет параметров сокета, второй вызов **BIND** перехватывает порт, и приложение не сможет определить, какой из двух сокетов получил определенные пакеты, отправляемые на общий порт.</span><span class="sxs-lookup"><span data-stu-id="5f52e-245">In the case where the first call to [**bind**](/windows/win32/api/winsock/nf-winsock-bind) sets either **SO\_REUSEADDR** or no socket options at all, the second **bind** call will "hijack" the port and the application will be unable to determine which of the two sockets received specific packets sent to the "shared" port.</span></span>

<span data-ttu-id="5f52e-246">Типичное приложение, вызывающее функцию [**BIND**](/windows/win32/api/winsock/nf-winsock-bind) , не выделяет привязанный сокет для монопольного использования, если только для сокета не был вызван параметр **\_ ексклусивеаддрусе** Socket до вызова функции **BIND** .</span><span class="sxs-lookup"><span data-stu-id="5f52e-246">A typical application that calls the [**bind**](/windows/win32/api/winsock/nf-winsock-bind) function does not allocate the bound socket for exclusive use, unless the **SO\_EXCLUSIVEADDRUSE** socket option is called on the socket before the call to the **bind** function.</span></span> <span data-ttu-id="5f52e-247">Если клиентское приложение привязывается к временному порту или определенному порту до того, как серверное приложение привязывается к тому же порту, то могут возникнуть проблемы.</span><span class="sxs-lookup"><span data-stu-id="5f52e-247">If a client application binds to an ephemeral port or a specific port before a server application binds to the same port, then problems can result.</span></span> <span data-ttu-id="5f52e-248">Серверное приложение может принудительно выполнить привязку к тому же порту с помощью параметра **\_ реусеаддр** Socket на сокете перед вызовом функции **BIND** , но поведение всех сокетов, привязанных к этому порту, затем не определено.</span><span class="sxs-lookup"><span data-stu-id="5f52e-248">The server application can forcibly bind to the same port by using the **SO\_REUSEADDR** socket option on the socket before calling the **bind** function, but the behavior for all sockets bound to that port is then indeterminate.</span></span> <span data-ttu-id="5f52e-249">Если серверное приложение пытается использовать параметр **\_ ексклусивеаддрусе** Socket для монопольного использования порта, запрос завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="5f52e-249">If the server application tries to use the **SO\_EXCLUSIVEADDRUSE** socket option for exclusive use of the port, the request will fail.</span></span>

<span data-ttu-id="5f52e-250">И наоборот, сокет с **таким образом \_ ексклусивеаддрусе** не может быть повторно использован сразу после закрытия сокета.</span><span class="sxs-lookup"><span data-stu-id="5f52e-250">Conversely, a socket with the **SO\_EXCLUSIVEADDRUSE** set cannot necessarily be reused immediately after socket closure.</span></span> <span data-ttu-id="5f52e-251">Например, если сокет прослушивания с таким же набором **\_ ексклусивеаддрусе** принимает соединение и затем закрывается, другой сокет (также с **таким \_ ексклусивеаддрусе**) не может выполнить привязку к тому же порту, что и первый сокет, пока исходное соединение не станет неактивным.</span><span class="sxs-lookup"><span data-stu-id="5f52e-251">For example, if a listening socket with **SO\_EXCLUSIVEADDRUSE** set accepts a connection and is then subsequently closed, another socket (also with **SO\_EXCLUSIVEADDRUSE**) cannot bind to the same port as the first socket until the original connection becomes inactive.</span></span>

<span data-ttu-id="5f52e-252">Эта проблема может стать сложной, поскольку базовый транспортный протокол может не прерывать соединение, даже если сокет был закрыт.</span><span class="sxs-lookup"><span data-stu-id="5f52e-252">This issue can become complicated because the underlying transport protocol may not terminate the connection even though the socket has been closed.</span></span> <span data-ttu-id="5f52e-253">Даже после закрытия сокета приложением система должна передать все буферизованные данные, отправить корректное сообщение об отключении на одноранговый узел и дождаться соответствующего корректного сообщения об отключении от однорангового узла.</span><span class="sxs-lookup"><span data-stu-id="5f52e-253">Even after the socket has been closed by the application, the system must transmit any buffered data, send a graceful disconnect message to the peer, and wait for a corresponding graceful disconnect message from the peer.</span></span> <span data-ttu-id="5f52e-254">Возможно, базовый транспортный протокол не может освободить подключение. Например, одноранговый узел, участвующий в исходном соединении, может объявить окно нулевого размера или другую форму "атаки".</span><span class="sxs-lookup"><span data-stu-id="5f52e-254">It is possible that the underlying transport protocol might never release the connection; for example, the peer participating in the original connection might advertise a zero-size window, or some other form of "attack" configuration.</span></span> <span data-ttu-id="5f52e-255">В этом случае клиентское соединение остается в активном состоянии, несмотря на запрос на его закрытие, так как неподтвержденные данные остаются в буфере.</span><span class="sxs-lookup"><span data-stu-id="5f52e-255">In such a case, the client connection remains in an active state despite the request to close it, since unacknowledged data remains in the buffer.</span></span>

<span data-ttu-id="5f52e-256">Чтобы избежать такой ситуации, сетевые приложения должны обеспечить корректное завершение работы, вызывая [**Завершение работы**](/windows/win32/api/winsock/nf-winsock-shutdown) с \_ установленным флагом SD Send, а [](/windows/win32/api/winsock/nf-winsock-recv) затем дожидаться цикла приема, пока для соединения не будут возвращены нулевые байты.</span><span class="sxs-lookup"><span data-stu-id="5f52e-256">To avoid this situation, network applications should ensure a graceful shutdown by calling [**shutdown**](/windows/win32/api/winsock/nf-winsock-shutdown) with the SD\_SEND flag set, and then wait in a [**recv**](/windows/win32/api/winsock/nf-winsock-recv) loop until zero bytes are returned over the connection.</span></span> <span data-ttu-id="5f52e-257">Это гарантирует, что все данные поступают одноранговым узлом, а также подтверждает, что узел получил все переданные сведения и не позволяет устранить упомянутую выше ошибку повторного использования портов.</span><span class="sxs-lookup"><span data-stu-id="5f52e-257">This guarantees that all data is received by the peer and likewise confirms with the peer that it has received all of the transmitted data, as well as avoiding the aforementioned port reuse issue.</span></span>

<span data-ttu-id="5f52e-258">Параметр SO- \_ Socket сокета может быть установлен на сокете, чтобы запретить переход порта в активное состояние ожидания, однако это не рекомендуется, так как может привести к желаемым эффектам, таким как Сброс подключений.</span><span class="sxs-lookup"><span data-stu-id="5f52e-258">The SO\_LINGER socket option may be set on a socket to prevent the port from transitioning to an "active" wait state; however, this is discouraged as it can lead to desired effects, such as reset connections.</span></span> <span data-ttu-id="5f52e-259">Например, если данные получены одноранговым узлом, но остаются неподтвержденными, а локальный компьютер закрывает сокет с \_ установленным для него устаревшим значением, подключение между двумя компьютерами сбрасывается, а неподтвержденные данные отклоняются одноранговым узлом.</span><span class="sxs-lookup"><span data-stu-id="5f52e-259">For example, if data is received by the peer but remains unacknowledged by it, and the local computer closes the socket with SO\_LINGER set on it, the connection between the two computers is reset and the unacknowledged data discarded by the peer.</span></span> <span data-ttu-id="5f52e-260">Выбор подходящего времени для использования в случае небольшого значения времени ожидания часто приводит к внезапному прерыванию подключений, в то время как большие значения времени ожидания приводят к тому, что система подвержена атакам типа "отказ в обслуживании" (путем установления большого количества подключений и потенциального зависания или блокировки потоков приложений).</span><span class="sxs-lookup"><span data-stu-id="5f52e-260">Picking a suitable time to linger is difficult as a smaller timeout value often results in suddenly aborted connections, whereas larger timeout values leave the system vulnerable to denial-of-service attacks (by establishing many connections and potentially stalling/blocking application threads).</span></span> <span data-ttu-id="5f52e-261">Закрытие сокета, имеющего ненулевое значение времени ожидания, может также привести к блокировке вызова [**функции closesocket**](/windows/win32/api/winsock/nf-winsock-closesocket) .</span><span class="sxs-lookup"><span data-stu-id="5f52e-261">Closing a socket that has a nonzero linger timeout value may also cause the [**closesocket**](/windows/win32/api/winsock/nf-winsock-closesocket) call to block.</span></span>

## <a name="enhanced-socket-security"></a><span data-ttu-id="5f52e-262">Повышенная безопасность сокетов</span><span class="sxs-lookup"><span data-stu-id="5f52e-262">Enhanced Socket Security</span></span>

<span data-ttu-id="5f52e-263">Улучшенная безопасность сокетов была добавлена в выпуске Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="5f52e-263">Enhanced socket security was added with the release of Windows Server 2003.</span></span> <span data-ttu-id="5f52e-264">В предыдущих выпусках серверных операционных систем Майкрософт безопасность сокетов по умолчанию позволяла легко перехватывать порты из неподозрительных приложений.</span><span class="sxs-lookup"><span data-stu-id="5f52e-264">In previous Microsoft server operating system releases, the default socket security easily allowed processes to hijack ports from unsuspecting applications.</span></span> <span data-ttu-id="5f52e-265">В Windows Server 2003 сокеты по умолчанию не находятся в состоянии, доступном для совместного подключения.</span><span class="sxs-lookup"><span data-stu-id="5f52e-265">In Windows Server 2003, sockets are not in a sharable state by default.</span></span> <span data-ttu-id="5f52e-266">Таким образом, если приложение хочет разрешить другим процессам повторно использовать порт, к которому уже привязан сокет, он должен быть специально включен.</span><span class="sxs-lookup"><span data-stu-id="5f52e-266">Therefore, if an application wants to allow other processes to reuse a port on which a socket is already bound, it must specifically enable it.</span></span> <span data-ttu-id="5f52e-267">В этом случае первый сокет, вызывающий [**привязку**](/windows/win32/api/winsock/nf-winsock-bind) к порту, должен иметь **\_ реусеаддр,** установленный на сокете.</span><span class="sxs-lookup"><span data-stu-id="5f52e-267">If that is the case, the first socket to call [**bind**](/windows/win32/api/winsock/nf-winsock-bind) on the port must have **SO\_REUSEADDR** set on the socket.</span></span> <span data-ttu-id="5f52e-268">Единственное исключение из этого случая возникает, когда второй вызов **привязки** выполняется той же учетной записью пользователя, которая выполнила исходный вызов для **привязки**.</span><span class="sxs-lookup"><span data-stu-id="5f52e-268">The only exception to this case occurs when the second **bind** call is performed by the same user account that made the original call to **bind**.</span></span> <span data-ttu-id="5f52e-269">Это исключение существует исключительно для обеспечения обратной совместимости.</span><span class="sxs-lookup"><span data-stu-id="5f52e-269">This exception exists solely to provide backward compatibility.</span></span>

<span data-ttu-id="5f52e-270">В следующей таблице описывается поведение, возникающее в операционных системах Windows Server 2003 и более поздних версиях, когда второй сокет пытается выполнить привязку к адресу, ранее привязанному к первому сокету, используя определенные параметры сокета.</span><span class="sxs-lookup"><span data-stu-id="5f52e-270">The table below describes the behavior that occurs in Windows Server 2003 and later operating systems when a second socket attempts to bind to an address previously bound to by a first socket using specific socket options.</span></span>

> [!NOTE]
> <span data-ttu-id="5f52e-271">В таблице ниже "подстановочный знак" обозначает адрес с подстановочными знаками для данного протокола (например, "0.0.0.0" для IPv4 и "::" для IPv6).</span><span class="sxs-lookup"><span data-stu-id="5f52e-271">In the table below, "wildcard" denotes the wildcard address for the given protocol (such as "0.0.0.0" for IPv4 and "::" for IPv6).</span></span> <span data-ttu-id="5f52e-272">"Конкретное" обозначает конкретный IP-адрес, назначенный интерфейсу.</span><span class="sxs-lookup"><span data-stu-id="5f52e-272">"Specific" denotes a specific IP address assigned an interface.</span></span> <span data-ttu-id="5f52e-273">Ячейки таблицы указывают, успешно ли выполнена привязка ("Success") или возвращена ошибка ("INUSE" для ошибки [всаеаддринусе](windows-sockets-error-codes-2.md) ; "Доступ" для ошибки [всаеакцес](windows-sockets-error-codes-2.md) ).</span><span class="sxs-lookup"><span data-stu-id="5f52e-273">The table cells indicate whether or not the bind is successful ("Success") or the error returned ("INUSE" for the [WSAEADDRINUSE](windows-sockets-error-codes-2.md) error; "ACCESS" for the [WSAEACCES](windows-sockets-error-codes-2.md) error).</span></span>
>
> <span data-ttu-id="5f52e-274">Также обратите внимание, что в этой конкретной таблице оба вызова [**BIND**](/windows/win32/api/winsock/nf-winsock-bind) выполняются под одной и той же учетной записью пользователя.</span><span class="sxs-lookup"><span data-stu-id="5f52e-274">Also note that in this specific table, both [**bind**](/windows/win32/api/winsock/nf-winsock-bind) calls are made under the same user account.</span></span>

<table>
    <tr>
        <td bgcolor="#C0C0C0" colspan="2" rowspan="3"><span data-ttu-id="5f52e-275">Первый вызов <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>привязки</strong></a></span><span class="sxs-lookup"><span data-stu-id="5f52e-275">First <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>bind</strong></a> call</span></span></td>
        <td bgcolor="#C0C0C0" colspan="6"><span data-ttu-id="5f52e-276">Второй вызов <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>BIND</strong></a></span><span class="sxs-lookup"><span data-stu-id="5f52e-276">Second <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>bind</strong></a> call</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="5f52e-277">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="5f52e-277">Default</span></span></td>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="5f52e-278">SO_REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="5f52e-278">SO_REUSEADDR</span></span></td>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="5f52e-279">SO_EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="5f52e-279">SO_EXCLUSIVEADDRUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-280">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-280">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-281">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-281">Specific</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-282">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-282">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-283">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-283">Specific</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-284">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-284">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-285">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-285">Specific</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="5f52e-286">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="5f52e-286">Default</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-287">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-287">Wildcard</span></span></td>
        <td><span data-ttu-id="5f52e-288">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-288">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-289">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-289">Success</span></span></td>
        <td><span data-ttu-id="5f52e-290">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-290">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-291">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-291">Success</span></span></td>
        <td><span data-ttu-id="5f52e-292">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-292">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-293">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-293">Success</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-294">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-294">Specific</span></span></td>
        <td><span data-ttu-id="5f52e-295">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-295">Success</span></span></td>
        <td><span data-ttu-id="5f52e-296">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-296">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-297">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-297">Success</span></span></td>
        <td><span data-ttu-id="5f52e-298">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-298">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-299">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-299">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-300">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-300">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="5f52e-301">SO_REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="5f52e-301">SO_REUSEADDR</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-302">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-302">Wildcard</span></span></td>
        <td><span data-ttu-id="5f52e-303">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-303">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-304">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-304">Success</span></span></td>
        <td><span data-ttu-id="5f52e-305">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-305">Success</span></span></td>
        <td><span data-ttu-id="5f52e-306">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-306">Success</span></span></td>
        <td><span data-ttu-id="5f52e-307">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-307">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-308">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-308">Success</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-309">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-309">Specific</span></span></td>
        <td><span data-ttu-id="5f52e-310">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-310">Success</span></span></td>
        <td><span data-ttu-id="5f52e-311">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-311">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-312">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-312">Success</span></span></td>
        <td><span data-ttu-id="5f52e-313">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-313">Success</span></span></td>
        <td><span data-ttu-id="5f52e-314">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-314">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-315">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-315">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="5f52e-316">SO_EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="5f52e-316">SO_EXCLUSIVEADDRUSE</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-317">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-317">Wildcard</span></span></td>
        <td><span data-ttu-id="5f52e-318">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-318">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-319">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-319">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-320">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-320">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-321">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-321">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-322">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-322">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-323">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-323">ACCESS</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-324">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-324">Specific</span></span></td>
        <td><span data-ttu-id="5f52e-325">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-325">Success</span></span></td>
        <td><span data-ttu-id="5f52e-326">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-326">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-327">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-327">Success</span></span></td>
        <td><span data-ttu-id="5f52e-328">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-328">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-329">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-329">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-330">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-330">INUSE</span></span></td>
    </tr>
</table>

<span data-ttu-id="5f52e-331">Несколько записей в таблице выше.</span><span class="sxs-lookup"><span data-stu-id="5f52e-331">A few entries in the table above merit explanation.</span></span>

<span data-ttu-id="5f52e-332">Например, если первый вызывающий объект задает **\_ ексклусивеаддрусе** для определенного адреса, а второй вызывающий объект пытается вызвать [**BIND**](/windows/win32/api/winsock/nf-winsock-bind) с адресом-шаблоном в том же порте, второй вызов **BIND** будет выполнен.</span><span class="sxs-lookup"><span data-stu-id="5f52e-332">For example, if the first caller sets **SO\_EXCLUSIVEADDRUSE** on a specific address, and second caller attempts to call [**bind**](/windows/win32/api/winsock/nf-winsock-bind) with a wildcard address on the same port, the second **bind** call will succeed.</span></span> <span data-ttu-id="5f52e-333">В этом конкретном случае второй вызывающий объект привязывается ко всем интерфейсам, кроме определенного адреса, к которому привязан первый вызывающий объект.</span><span class="sxs-lookup"><span data-stu-id="5f52e-333">In this particular case, the second caller is bound to all interfaces except the specific address to which the first caller is bound.</span></span> <span data-ttu-id="5f52e-334">Обратите внимание, что обратный в данном случае не имеет значения true: Если первый вызывающий метод устанавливает **так, что \_ ексклусивеаддрусе** и вызывает **BIND** с флагом-шаблоном, второй вызывающий объект не может вызвать **BIND** с тем же портом.</span><span class="sxs-lookup"><span data-stu-id="5f52e-334">Note that the reverse of this case is not true: if the first caller sets **SO\_EXCLUSIVEADDRUSE** and calls **bind** with the wildcard flag, the second caller is not able to call **bind** with the same port.</span></span>

<span data-ttu-id="5f52e-335">Поведение привязки сокета изменяется, когда вызовы привязок сокета выполняются под разными учетными записями пользователей.</span><span class="sxs-lookup"><span data-stu-id="5f52e-335">The socket binding behavior changes when the socket bind calls are made under different user accounts.</span></span> <span data-ttu-id="5f52e-336">В таблице ниже указывается поведение, которое происходит в операционных системах Windows Server 2003 и более поздних версиях, когда второй сокет пытается выполнить привязку к адресу, ранее привязанному к первому сокету, используя определенные параметры сокета и другую учетную запись пользователя.</span><span class="sxs-lookup"><span data-stu-id="5f52e-336">The table below specifies the behavior that occurs in Windows Server 2003 and later operating systems when a second socket attempts to bind to an address previously bound to by a first socket using specific socket options and a different user account.</span></span>

<table>
    <tr>
        <td bgcolor="#C0C0C0" colspan="2" rowspan="3"><span data-ttu-id="5f52e-337">Первый вызов <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>привязки</strong></a></span><span class="sxs-lookup"><span data-stu-id="5f52e-337">First <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>bind</strong></a> call</span></span></td>
        <td bgcolor="#C0C0C0" colspan="6"><span data-ttu-id="5f52e-338">Второй вызов <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>BIND</strong></a></span><span class="sxs-lookup"><span data-stu-id="5f52e-338">Second <a href="/windows/win32/api/winsock/nf-winsock-bind"><strong>bind</strong></a> call</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="5f52e-339">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="5f52e-339">Default</span></span></td>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="5f52e-340">SO_REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="5f52e-340">SO_REUSEADDR</span></span></td>
        <td bgcolor="#C0C0C0" colspan="2"><span data-ttu-id="5f52e-341">SO_EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="5f52e-341">SO_EXCLUSIVEADDRUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-342">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-342">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-343">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-343">Specific</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-344">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-344">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-345">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-345">Specific</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-346">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-346">Wildcard</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-347">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-347">Specific</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="5f52e-348">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="5f52e-348">Default</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-349">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-349">Wildcard</span></span></td>
        <td><span data-ttu-id="5f52e-350">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-350">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-351">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-351">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-352">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-352">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-353">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-353">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-354">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-354">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-355">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-355">ACCESS</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-356">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-356">Specific</span></span></td>
        <td><span data-ttu-id="5f52e-357">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-357">Success</span></span></td>
        <td><span data-ttu-id="5f52e-358">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-358">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-359">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-359">Success</span></span></td>
        <td><span data-ttu-id="5f52e-360">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-360">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-361">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-361">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-362">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-362">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="5f52e-363">SO_REUSEADDR</span><span class="sxs-lookup"><span data-stu-id="5f52e-363">SO_REUSEADDR</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-364">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-364">Wildcard</span></span></td>
        <td><span data-ttu-id="5f52e-365">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-365">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-366">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-366">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-367">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-367">Success</span></span></td>
        <td><span data-ttu-id="5f52e-368">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-368">Success</span></span></td>
        <td><span data-ttu-id="5f52e-369">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-369">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-370">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-370">ACCESS</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-371">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-371">Specific</span></span></td>
        <td><span data-ttu-id="5f52e-372">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-372">Success</span></span></td>
        <td><span data-ttu-id="5f52e-373">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-373">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-374">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-374">Success</span></span></td>
        <td><span data-ttu-id="5f52e-375">Успех</span><span class="sxs-lookup"><span data-stu-id="5f52e-375">Success</span></span></td>
        <td><span data-ttu-id="5f52e-376">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-376">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-377">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-377">INUSE</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0" rowspan="2"><span data-ttu-id="5f52e-378">SO_EXCLUSIVEADDRUSE</span><span class="sxs-lookup"><span data-stu-id="5f52e-378">SO_EXCLUSIVEADDRUSE</span></span></td>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-379">Подстановочный знак</span><span class="sxs-lookup"><span data-stu-id="5f52e-379">Wildcard</span></span></td>
        <td><span data-ttu-id="5f52e-380">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-380">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-381">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-381">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-382">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-382">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-383">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-383">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-384">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-384">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-385">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-385">ACCESS</span></span></td>
    </tr>
    <tr>
        <td bgcolor="#C0C0C0"><span data-ttu-id="5f52e-386">Specific</span><span class="sxs-lookup"><span data-stu-id="5f52e-386">Specific</span></span></td>
        <td><span data-ttu-id="5f52e-387">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-387">Success</span></span></td>
        <td><span data-ttu-id="5f52e-388">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-388">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-389">Успешно</span><span class="sxs-lookup"><span data-stu-id="5f52e-389">Success</span></span></td>
        <td><span data-ttu-id="5f52e-390">ACCESS;</span><span class="sxs-lookup"><span data-stu-id="5f52e-390">ACCESS</span></span></td>
        <td><span data-ttu-id="5f52e-391">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-391">INUSE</span></span></td>
        <td><span data-ttu-id="5f52e-392">ИСПОЛЬЗУЕМЫХ</span><span class="sxs-lookup"><span data-stu-id="5f52e-392">INUSE</span></span></td>
    </tr>
</table>

<span data-ttu-id="5f52e-393">Обратите внимание, что поведение по умолчанию отличается в случае, когда вызовы [**привязки**](/windows/win32/api/winsock/nf-winsock-bind) выполняются под разными учетными записями пользователей.</span><span class="sxs-lookup"><span data-stu-id="5f52e-393">Note that the default behavior is different when the [**bind**](/windows/win32/api/winsock/nf-winsock-bind) calls are made under different user accounts.</span></span> <span data-ttu-id="5f52e-394">Если первый вызывающий объект не задает параметры на сокете и привязывается к подстановочному адресу, второй вызывающий объект не может установить параметр **so \_ реусеаддр** и успешно выполнить привязку к тому же порту.</span><span class="sxs-lookup"><span data-stu-id="5f52e-394">If the first caller does not set any options on the socket and binds to the wildcard address, then the second caller cannot set the **SO\_REUSEADDR** option and successfully bind to the same port.</span></span> <span data-ttu-id="5f52e-395">Поведение по умолчанию без Set Options также возвращает ошибку.</span><span class="sxs-lookup"><span data-stu-id="5f52e-395">The default behavior with no options set returns an error, as well.</span></span>

<span data-ttu-id="5f52e-396">В Windows Vista и более поздних версиях можно создать двойной сокет стека, работающий как с IPv6, так и с IPv4.</span><span class="sxs-lookup"><span data-stu-id="5f52e-396">On Windows Vista and later, a dual stack socket can be created which operates over both IPv6 and IPv4.</span></span> <span data-ttu-id="5f52e-397">Если сокет с двумя стеками привязан к адресу с подстановочными знаками, указанный порт резервируется как в сетевых стеках IPv4, так и IPv6, а также на проверках, связанных с **таким \_ реусеаддр** , и **поэтому \_ ексклусивеаддрусе** (если задан).</span><span class="sxs-lookup"><span data-stu-id="5f52e-397">When a dual stack socket is bound to the wildcard address, the given port is reserved on both the IPv4 and IPv6 networking stacks and the checks associated with **SO\_REUSEADDR** and **SO\_EXCLUSIVEADDRUSE** (if set) are made.</span></span> <span data-ttu-id="5f52e-398">Эти проверки должны выполняться в обоих сетевых стеках.</span><span class="sxs-lookup"><span data-stu-id="5f52e-398">These checks must succeed on both networking stacks.</span></span> <span data-ttu-id="5f52e-399">Например, если сокет TCP с двумя стеками устанавливает **так, что \_ ексклусивеаддрусе** , а затем пытается выполнить привязку к порту 5000, то другие TCP-сокеты не могут быть предварительно привязаны к порту 5000 (с помощью подстановочного знака или специального символа).</span><span class="sxs-lookup"><span data-stu-id="5f52e-399">For example, if a dual stack TCP socket sets **SO\_EXCLUSIVEADDRUSE** and then tries to bind to port 5000, then no other TCP socket can be previously bound to port 5000 (either wildcard or specific).</span></span> <span data-ttu-id="5f52e-400">В этом случае, если TCP-сокет IPv4 был ранее привязан к адресу замыкания на порте 5000, вызов [**привязки**](/windows/win32/api/winsock/nf-winsock-bind) для двойного сокета стека завершится с [всаеакцес](windows-sockets-error-codes-2.md).</span><span class="sxs-lookup"><span data-stu-id="5f52e-400">In this case if an IPv4 TCP socket was previously bound to the loopback address on port 5000, the [**bind**](/windows/win32/api/winsock/nf-winsock-bind) call for the dual stack socket would fail with [WSAEACCES](windows-sockets-error-codes-2.md).</span></span>

## <a name="application-strategies"></a><span data-ttu-id="5f52e-401">Стратегии приложений</span><span class="sxs-lookup"><span data-stu-id="5f52e-401">Application Strategies</span></span>

<span data-ttu-id="5f52e-402">При разработке сетевого приложения, работающего на уровне сокета, важно учитывать необходимый тип безопасности сокета.</span><span class="sxs-lookup"><span data-stu-id="5f52e-402">When developing network application that operate at the socket layer, it is important to consider the type of socket security necessary.</span></span> <span data-ttu-id="5f52e-403">Клиентские приложения — приложения, которые соединяют или отправляют данные в службу — редко занимают дополнительные действия, так как они привязаны к случайному временному порту (эфемерный).</span><span class="sxs-lookup"><span data-stu-id="5f52e-403">Client applications — applications that connect or send data to a service — rarely require any additional steps since they bind to a random local (ephemeral) port.</span></span> <span data-ttu-id="5f52e-404">Если для правильной работы клиента требуется определенная локальная привязка портов, необходимо учитывать безопасность сокета.</span><span class="sxs-lookup"><span data-stu-id="5f52e-404">If the client does require a specific local port binding in order to function correctly, then you must consider socket security.</span></span>

<span data-ttu-id="5f52e-405">Параметр **\_ реусеаддр** имеет очень мало использования в обычных приложениях, помимо многоадресных сокетов, где данные доставляются во все сокеты, привязанные к одному и тому же порту.</span><span class="sxs-lookup"><span data-stu-id="5f52e-405">The **SO\_REUSEADDR** option has very few uses in normal applications aside from multicast sockets where data is delivered to all of the sockets bound on the same port.</span></span> <span data-ttu-id="5f52e-406">В противном случае любое приложение, устанавливающее этот параметр сокета, должно быть переработано для удаления зависимости, так как она еминентли уязвима для "захвата сокета".</span><span class="sxs-lookup"><span data-stu-id="5f52e-406">Otherwise, any application that sets this socket option should be redesigned to remove the dependency since it is eminently vulnerable to "socket hijacking".</span></span> <span data-ttu-id="5f52e-407">Пока для потенциального захвата порта в серверном приложении можно использовать параметр **\_ реусеаддр** Socket, приложение должно считаться небезопасным.</span><span class="sxs-lookup"><span data-stu-id="5f52e-407">As long as **SO\_REUSEADDR** socket option can be used to potentially hijack a port in a server application, the application must be considered to be not secure.</span></span>

<span data-ttu-id="5f52e-408">Все серверные приложения должны **иметь \_ Ексклусивеаддрусе, чтобы обеспечить** высокий уровень безопасности сокетов.</span><span class="sxs-lookup"><span data-stu-id="5f52e-408">All server applications must set **SO\_EXCLUSIVEADDRUSE** for a strong level of socket security.</span></span> <span data-ttu-id="5f52e-409">Это не только предотвращает перехват порта вредоносными программами, но и указывает, привязано ли другое приложение к запрошенному порту.</span><span class="sxs-lookup"><span data-stu-id="5f52e-409">Not only does it prevent malicious software from hijacking the port, but it also indicates whether or not another application is bound to the requested port.</span></span> <span data-ttu-id="5f52e-410">Например, вызов для [**привязки**](/windows/win32/api/winsock/nf-winsock-bind) к адресу с подстановочными знаками процесса с установленным параметром сокета **so \_ ексклусивеаддрусе** завершится ошибкой, если другой процесс в данный момент привязан к тому же порту в определенном интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="5f52e-410">For example, a call to [**bind**](/windows/win32/api/winsock/nf-winsock-bind) on the wildcard address by a process with the **SO\_EXCLUSIVEADDRUSE** socket option set will fail if another process is currently bound to the same port on a specific interface.</span></span>

<span data-ttu-id="5f52e-411">Наконец, несмотря на то, что в Windows Server 2003 улучшена безопасность сокетов, приложение должно всегда устанавливать параметр **so \_ ексклусивеаддрусе** , чтобы обеспечить его привязку ко всем конкретным интерфейсам, запрошенным процессом.</span><span class="sxs-lookup"><span data-stu-id="5f52e-411">Lastly, even though socket security has been improved in Windows Server 2003, an application should always set the **SO\_EXCLUSIVEADDRUSE** socket option to ensure that it binds to all the specific interfaces the process has requested.</span></span> <span data-ttu-id="5f52e-412">Безопасность сокетов в Windows Server 2003 обеспечивает повышенный уровень безопасности для устаревших приложений, но разработчики приложений должны по-прежнему проектировать свои продукты, учитывая все аспекты безопасности.</span><span class="sxs-lookup"><span data-stu-id="5f52e-412">The socket security in Windows Server 2003 adds an increased level of security for legacy applications, but application developers must still design their products with all aspects of security in mind.</span></span>
