---
description: Программные интерфейсы, используемые для запроса различных типов пространств имен и для регистрации сведений в пространстве имен, если они поддерживаются, различаются.
ms.assetid: 6a037e8d-49f3-4286-929a-8bb64ea0960f
title: Архитектура поставщика пространства имен в SPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e1cb567933cae60f56137eba39845bf27ad8c1a8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104263066"
---
# <a name="namespace-provider-architecture-in-the-spi"></a><span data-ttu-id="35cc3-103">Архитектура поставщика пространства имен в SPI</span><span class="sxs-lookup"><span data-stu-id="35cc3-103">Namespace Provider Architecture in the SPI</span></span>

<span data-ttu-id="35cc3-104">Программные интерфейсы, используемые для запроса различных типов пространств имен и для регистрации сведений в пространстве имен, если они поддерживаются, различаются.</span><span class="sxs-lookup"><span data-stu-id="35cc3-104">Programmatic interfaces used to query the various types of namespaces and to register information within a namespace, if supported, differ widely.</span></span> <span data-ttu-id="35cc3-105">Поставщик пространства имен — это локально резидентное приложение, которое может сопоставляться между пространством имен "сокеты Windows" и некоторым существующим пространством имен, которое может быть реализовано локально или через сеть.</span><span class="sxs-lookup"><span data-stu-id="35cc3-105">A namespace provider is a locally-resident application that can map between the Windows Sockets namespace SPI and some existing namespace that could be implemented locally or accessed through the network.</span></span> <span data-ttu-id="35cc3-106">Это показано ниже.</span><span class="sxs-lookup"><span data-stu-id="35cc3-106">This is illustrated as follows:</span></span>

![Схема поставщика пространства имен](images/ovrvw3-1.png)

> [!Note]  
> <span data-ttu-id="35cc3-108">Для данного пространства имен, например DNS, можно установить несколько поставщиков пространства имен на одном компьютере.</span><span class="sxs-lookup"><span data-stu-id="35cc3-108">It is possible for a given namespace, for example DNS, to have more than one namespace provider installed on a given computer.</span></span>

 

<span data-ttu-id="35cc3-109">Как упоминалось выше, общий термин «служба» относится к серверной части приложения «клиент/сервер».</span><span class="sxs-lookup"><span data-stu-id="35cc3-109">As mentioned above, the generic term, service, refers to the server-half of a client/server application.</span></span> <span data-ttu-id="35cc3-110">В сокетах Windows служба связана с классом службы, а каждый экземпляр конкретной службы имеет имя службы, которое должно быть уникальным в пределах класса службы.</span><span class="sxs-lookup"><span data-stu-id="35cc3-110">In Windows Sockets, a service is associated with a service class and each instance of a particular service has a service name which must be unique within the service class.</span></span> <span data-ttu-id="35cc3-111">Примеры классов служб включают FTP-сервер, SQL Server, XYZ Corp. сведения о сотруднике и т. д.</span><span class="sxs-lookup"><span data-stu-id="35cc3-111">Examples of service classes include FTP Server, SQL Server, XYZ Corp. Employee Info Server, and so on.</span></span>

<span data-ttu-id="35cc3-112">Как показано в примере, некоторые классы служб хорошо известны, а другие являются уникальными и относятся к конкретному вертикальному приложению.</span><span class="sxs-lookup"><span data-stu-id="35cc3-112">As the example attempts to illustrate, some service classes are well known while others are unique and specific to a particular vertical application.</span></span> <span data-ttu-id="35cc3-113">В любом случае каждый класс службы представляется как имя класса, так и идентификатор класса.</span><span class="sxs-lookup"><span data-stu-id="35cc3-113">In either case, every service class is represented by both a class name and a class identifier.</span></span> <span data-ttu-id="35cc3-114">Имя класса не обязательно должно быть уникальным, но идентификатор класса должен быть.</span><span class="sxs-lookup"><span data-stu-id="35cc3-114">The class name does not necessarily need to be unique, but the class identifier must be.</span></span> <span data-ttu-id="35cc3-115">Глобальные уникальные идентификаторы (GUID) используются для представления идентификаторов классов служб.</span><span class="sxs-lookup"><span data-stu-id="35cc3-115">Globally Unique Identifiers (GUIDs) are used to represent service class IDs.</span></span> <span data-ttu-id="35cc3-116">Для хорошо известных служб, имен классов и идентификаторов классов (GUID) были предварительно выделены и доступны макросы для преобразования между, например, с номерами TCP-портов и соответствующими идентификаторами GUID идентификатора класса.</span><span class="sxs-lookup"><span data-stu-id="35cc3-116">For well-known services, class names, and class identifiers (GUIDs) have been preallocated, and macros are available to convert between, for example, TCP port numbers and the corresponding class identifier GUIDs.</span></span> <span data-ttu-id="35cc3-117">Для других служб разработчик выбирает имя класса и использует служебную программу Uuidgen.exe для создания идентификатора GUID для идентификатора класса.</span><span class="sxs-lookup"><span data-stu-id="35cc3-117">For other services, the developer chooses the class name and uses the Uuidgen.exe utility to generate a GUID for the class identifier.</span></span>

<span data-ttu-id="35cc3-118">Существует понятие класса службы, позволяющее установить набор атрибутов, которые хранятся в общих экземплярах конкретной службы.</span><span class="sxs-lookup"><span data-stu-id="35cc3-118">The concept of a service class exists to allow a set of attributes to be established that are held in common by all instances of a particular service.</span></span> <span data-ttu-id="35cc3-119">Этот набор атрибутов предоставляется сокетам Windows в момент определения класса службы и называется сведениями о схеме класса службы.</span><span class="sxs-lookup"><span data-stu-id="35cc3-119">This set of attributes is supplied to Windows Sockets at the time the service class is defined, and is referred to as the service class schema information.</span></span> <span data-ttu-id="35cc3-120">32.dll Ws2, \_ в свою очередь, передает эти сведения всем активным поставщикам пространства имен.</span><span class="sxs-lookup"><span data-stu-id="35cc3-120">The Ws2\_32.dll in turn relays this information to all active namespace providers.</span></span> <span data-ttu-id="35cc3-121">Когда экземпляр службы устанавливается и становится доступным на главном компьютере, его имя службы используется для различения конкретного экземпляра от других, которые могут быть известны пространству имен.</span><span class="sxs-lookup"><span data-stu-id="35cc3-121">When an instance of a service is installed and made available on a host computer, its service name is used to distinguish this particular instance from others that may be known to the namespace.</span></span>

<span data-ttu-id="35cc3-122">Имейте в виду, что установка класса службы должна выполняться только на компьютерах, где выполняется служба, а не на всех клиентах, которые могут использовать эту службу.</span><span class="sxs-lookup"><span data-stu-id="35cc3-122">Be aware that the installation of a service class only needs to occur on computers where the service executes, not on all of the clients which may utilize the service.</span></span> <span data-ttu-id="35cc3-123">По возможности Ws232.dll предоставит \_ сведения о схеме класса службы поставщику пространства имен на момент регистрации экземпляра службы или запуска запроса службы.</span><span class="sxs-lookup"><span data-stu-id="35cc3-123">When possible, the Ws2\_32.dll will provide service class schema information to a namespace provider at the time an instance of a service is to be registered or a service query is initiated.</span></span> <span data-ttu-id="35cc3-124">32.dll Ws2, \_ само собой, не хранит эту информацию, но пытается получить ее из поставщика пространства имен, который указывал на возможность предоставления этих данных.</span><span class="sxs-lookup"><span data-stu-id="35cc3-124">The Ws2\_32.dll does not, of course, store this information itself, but attempts to retrieve it from a namespace provider that has indicated its ability to supply this data.</span></span> <span data-ttu-id="35cc3-125">Поскольку не существует гарантии того, что Ws2 \_32.dll сможет предоставить схему класса службы, поставщики пространства имен, которые нуждаются в этих данных, должны иметь резервный механизм, чтобы получить его с помощью средств, относящихся к пространству имен.</span><span class="sxs-lookup"><span data-stu-id="35cc3-125">Because there is no guarantee that the Ws2\_32.dll will be able to supply the service class schema, namespace providers that require this information must have a fallback mechanism to obtain it through namespace-specific means.</span></span>

<span data-ttu-id="35cc3-126">В системе доменных имен Интернета нет четко определенных средств для хранения сведений о схеме класса службы.</span><span class="sxs-lookup"><span data-stu-id="35cc3-126">The Internet Domain Name System does not have a well-defined means to store service class schema information.</span></span> <span data-ttu-id="35cc3-127">В результате поставщики пространства имен DNS смогут поддерживать только хорошо известные службы TCP/IP, для которых был предварительно выделен идентификатор GUID класса службы.</span><span class="sxs-lookup"><span data-stu-id="35cc3-127">As a result, DNS namespace providers will only be able to accommodate well-known TCP/IP services for which a service class GUID has been preallocated.</span></span> <span data-ttu-id="35cc3-128">На практике это не является серьезным ограничением, поскольку идентификаторы GUID класса службы предварительно выделены для всего набора портов TCP и UDP, а также доступны макросы для получения идентификатора GUID, связанного с любым портом TCP или UDP.</span><span class="sxs-lookup"><span data-stu-id="35cc3-128">In practice, this is not a serious limitation since service class GUIDs have been preallocated for the entire set of TCP and UDP ports, and macros are available to retrieve the GUID associated with any TCP or UDP port.</span></span> <span data-ttu-id="35cc3-129">Таким образом, все привычные службы, такие как FTP, Telnet, Whois и т. д., хорошо поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="35cc3-129">Thus, all of the familiar services such as ftp, telnet, whois, etc. are well supported.</span></span> <span data-ttu-id="35cc3-130">При запросе этих служб по соглашению имя узла целевого компьютера является именем экземпляра службы.</span><span class="sxs-lookup"><span data-stu-id="35cc3-130">When querying for these services, by convention the host name of the target computer is the service instance name.</span></span>

<span data-ttu-id="35cc3-131">В нашем примере с нашим классом службы имена экземпляров службы FTP могут быть "alder.intel.com" или "rhino.microsoft.com", тогда как экземпляру сервера XYZ Corp. Employee info можно присвоить имя "XYZ Corp. Employee info Server версии 3,5".</span><span class="sxs-lookup"><span data-stu-id="35cc3-131">Continuing with our service class example, instance names of the ftp service may be "alder.intel.com" or "rhino.microsoft.com" while an instance of the XYZ Corp. Employee Info Server might be named "XYZ Corp. Employee Info Server Version 3.5".</span></span> <span data-ttu-id="35cc3-132">В первых двух случаях сочетание идентификатора GUID класса службы для FTP и имени компьютера (указанное в качестве имени экземпляра службы) однозначно определяет нужную службу.</span><span class="sxs-lookup"><span data-stu-id="35cc3-132">In the first two cases, the combination of the service class GUID for ftp and the computer name (supplied as the service instance name) uniquely identify the desired service.</span></span> <span data-ttu-id="35cc3-133">В третьем случае имя узла, где находится служба, может быть обнаружено во время запроса службы, поэтому имя экземпляра службы не должно включать имя узла.</span><span class="sxs-lookup"><span data-stu-id="35cc3-133">In the third case, the host name where the service resides can be discovered at service query time, so the service instance name does not need to include a host name.</span></span>

 

 



