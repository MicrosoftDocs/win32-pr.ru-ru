---
description: Программные интерфейсы, используемые для запроса различных типов пространств имен и для регистрации сведений в пространстве имен, если они поддерживаются, различаются.
ms.assetid: 6a037e8d-49f3-4286-929a-8bb64ea0960f
title: Архитектура поставщика пространства имен в SPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e1cb567933cae60f56137eba39845bf27ad8c1a8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104263066"
---
# <a name="namespace-provider-architecture-in-the-spi"></a>Архитектура поставщика пространства имен в SPI

Программные интерфейсы, используемые для запроса различных типов пространств имен и для регистрации сведений в пространстве имен, если они поддерживаются, различаются. Поставщик пространства имен — это локально резидентное приложение, которое может сопоставляться между пространством имен "сокеты Windows" и некоторым существующим пространством имен, которое может быть реализовано локально или через сеть. Это показано ниже.

![Схема поставщика пространства имен](images/ovrvw3-1.png)

> [!Note]  
> Для данного пространства имен, например DNS, можно установить несколько поставщиков пространства имен на одном компьютере.

 

Как упоминалось выше, общий термин «служба» относится к серверной части приложения «клиент/сервер». В сокетах Windows служба связана с классом службы, а каждый экземпляр конкретной службы имеет имя службы, которое должно быть уникальным в пределах класса службы. Примеры классов служб включают FTP-сервер, SQL Server, XYZ Corp. сведения о сотруднике и т. д.

Как показано в примере, некоторые классы служб хорошо известны, а другие являются уникальными и относятся к конкретному вертикальному приложению. В любом случае каждый класс службы представляется как имя класса, так и идентификатор класса. Имя класса не обязательно должно быть уникальным, но идентификатор класса должен быть. Глобальные уникальные идентификаторы (GUID) используются для представления идентификаторов классов служб. Для хорошо известных служб, имен классов и идентификаторов классов (GUID) были предварительно выделены и доступны макросы для преобразования между, например, с номерами TCP-портов и соответствующими идентификаторами GUID идентификатора класса. Для других служб разработчик выбирает имя класса и использует служебную программу Uuidgen.exe для создания идентификатора GUID для идентификатора класса.

Существует понятие класса службы, позволяющее установить набор атрибутов, которые хранятся в общих экземплярах конкретной службы. Этот набор атрибутов предоставляется сокетам Windows в момент определения класса службы и называется сведениями о схеме класса службы. 32.dll Ws2, \_ в свою очередь, передает эти сведения всем активным поставщикам пространства имен. Когда экземпляр службы устанавливается и становится доступным на главном компьютере, его имя службы используется для различения конкретного экземпляра от других, которые могут быть известны пространству имен.

Имейте в виду, что установка класса службы должна выполняться только на компьютерах, где выполняется служба, а не на всех клиентах, которые могут использовать эту службу. По возможности Ws232.dll предоставит \_ сведения о схеме класса службы поставщику пространства имен на момент регистрации экземпляра службы или запуска запроса службы. 32.dll Ws2, \_ само собой, не хранит эту информацию, но пытается получить ее из поставщика пространства имен, который указывал на возможность предоставления этих данных. Поскольку не существует гарантии того, что Ws2 \_32.dll сможет предоставить схему класса службы, поставщики пространства имен, которые нуждаются в этих данных, должны иметь резервный механизм, чтобы получить его с помощью средств, относящихся к пространству имен.

В системе доменных имен Интернета нет четко определенных средств для хранения сведений о схеме класса службы. В результате поставщики пространства имен DNS смогут поддерживать только хорошо известные службы TCP/IP, для которых был предварительно выделен идентификатор GUID класса службы. На практике это не является серьезным ограничением, поскольку идентификаторы GUID класса службы предварительно выделены для всего набора портов TCP и UDP, а также доступны макросы для получения идентификатора GUID, связанного с любым портом TCP или UDP. Таким образом, все привычные службы, такие как FTP, Telnet, Whois и т. д., хорошо поддерживаются. При запросе этих служб по соглашению имя узла целевого компьютера является именем экземпляра службы.

В нашем примере с нашим классом службы имена экземпляров службы FTP могут быть "alder.intel.com" или "rhino.microsoft.com", тогда как экземпляру сервера XYZ Corp. Employee info можно присвоить имя "XYZ Corp. Employee info Server версии 3,5". В первых двух случаях сочетание идентификатора GUID класса службы для FTP и имени компьютера (указанное в качестве имени экземпляра службы) однозначно определяет нужную службу. В третьем случае имя узла, где находится служба, может быть обнаружено во время запроса службы, поэтому имя экземпляра службы не должно включать имя узла.

 

 



