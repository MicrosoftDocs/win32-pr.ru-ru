---
description: Чтобы поставщик пространства имен был доступен через сокеты Windows, он должен быть правильно установлен в системе и зарегистрирован с помощью сокетов Windows.
ms.assetid: c73baf62-b862-476c-b381-be00699e78ca
title: Настройка разрешения имен и установка
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 423e0ca7c9c5290a040a17e0f1ded2a97a1aed15
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105673275"
---
# <a name="name-resolution-configuration-and-installation"></a><span data-ttu-id="7d1b2-103">Настройка разрешения имен и установка</span><span class="sxs-lookup"><span data-stu-id="7d1b2-103">Name Resolution Configuration and Installation</span></span>

<span data-ttu-id="7d1b2-104">Чтобы поставщик пространства имен был доступен через сокеты Windows, он должен быть правильно установлен в системе и зарегистрирован с помощью сокетов Windows.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-104">In order for a namespace provider to be accessible through Windows Sockets it must be properly installed on the system and registered with Windows Sockets.</span></span> <span data-ttu-id="7d1b2-105">При установке поставщика пространства имен путем вызова программы установки поставщика необходимо добавить сведения о конфигурации в базу данных конфигурации, чтобы предоставить Ws2 \_32.dll необходимые сведения о поставщике услуг.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-105">When a namespace provider is installed by invoking a vendor's installation program, configuration information must be added to a configuration database to give the Ws2\_32.dll required information regarding the service provider.</span></span> <span data-ttu-id="7d1b2-106">Ws2 \_32.dll экспортирует [**всЦинсталлнамеспаце**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespace) для использования программой установки поставщика.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-106">The Ws2\_32.dll exports [**WSCInstallNameSpace**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespace) for the vendor's installation program to use.</span></span> <span data-ttu-id="7d1b2-107">Эта функция используется для предоставления релевантной информации о устанавливаемом поставщике услуг.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-107">This function is used to supply relevant information about the service provider to be installed.</span></span> <span data-ttu-id="7d1b2-108">Эти данные включают:</span><span class="sxs-lookup"><span data-stu-id="7d1b2-108">This information includes:</span></span>

-   <span data-ttu-id="7d1b2-109">Имя поставщика — строка, представляющая поставщика для интерфейса на панели управления.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-109">Provider Name — A string representing the provider for display in Control Panel.</span></span>
-   <span data-ttu-id="7d1b2-110">Версия поставщика — версия этого поставщика.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-110">Provider Version — The version of this provider.</span></span>
-   <span data-ttu-id="7d1b2-111">Путь к поставщику — путь к библиотеке DLL поставщика.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-111">Provider Path — A path name to the provider DLL.</span></span>
-   <span data-ttu-id="7d1b2-112">Пространство имен — пространство имен, поддерживаемое поставщиком.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-112">Namespace — The namespace supported by the provider.</span></span>
-   <span data-ttu-id="7d1b2-113">GUID поставщика — уникальный, предоставленный поставщиком номер, представляющий эту комбинацию поставщика и пространства имен.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-113">Provider GUID — A unique, vendor-supplied number representing this provider/namespace combination.</span></span> <span data-ttu-id="7d1b2-114">Он используется в качестве ключа для всех последующих ссылок на этот поставщик, а также для удаления.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-114">This is used as a key for all subsequent references to this provider, and for uninstall.</span></span> <span data-ttu-id="7d1b2-115">Эти значения создаются с помощью служебной программы Uuidgen.exe.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-115">These values are created using the Uuidgen.exe utility.</span></span>
-   <span data-ttu-id="7d1b2-116">Хранит все флаги — флаг, указывающий, будет ли данный поставщик пространства имен отвечать за хранение всех сведений о схеме класса службы для всех классов служб.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-116">Stores all flags — a flag indicating whether this namespace provider will be responsible for retaining all service class schema information for all service classes.</span></span> <span data-ttu-id="7d1b2-117">Если такой поставщик существует, \_32.dllу Ws2 не требуется запрашивать эти сведения у каждого отдельного поставщика пространства имен.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-117">If such a provider exists, the Ws2\_32.dll does not need to query each individual namespace provider for this information.</span></span>

<span data-ttu-id="7d1b2-118">В Windows Vista и более поздних версиях предусмотрена Улучшенная функция [**WSCInstallNameSpaceEx32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespaceex32) , позволяющая поставщику пространства имен передавать дополнительный большой двоичный объект данных, относящийся к пространству имен.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-118">On Windows Vista and later, an enhanced [**WSCInstallNameSpaceEx32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespaceex32) function is provided that allows the namespace provider to pass an additional blob of data specific to the namespace.</span></span>

<span data-ttu-id="7d1b2-119">На 64-разрядных платформах для установки пространства имен в 32-разрядном каталоге предоставляются аналогичные функции [**WSCInstallNameSpace32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespace32) и [**WSCInstallNameSpaceEx32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespaceex32) .</span><span class="sxs-lookup"><span data-stu-id="7d1b2-119">On 64-bit platforms, similar [**WSCInstallNameSpace32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespace32) and [**WSCInstallNameSpaceEx32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespaceex32) functions are provided to install a namespace in the 32-bit catalog.</span></span>

<span data-ttu-id="7d1b2-120">32.dll Ws2 \_ также предоставляет функцию [**вскунинсталлнамеспаце**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscuninstallnamespace)для программы удаления поставщика, которая удаляет всю необходимую информацию из базы данных конфигурации.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-120">The Ws2\_32.dll also provides a function, [**WSCUnInstallNameSpace**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscuninstallnamespace), for a vendor's deinstallation program to remove all the relevant information from the configuration database.</span></span> <span data-ttu-id="7d1b2-121">Точное расположение и формат этих сведений о конфигурации являются частными для32.dll Ws2 \_ и могут управляться только описанными выше функциями.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-121">The exact location and format of this configuration information is private to the Ws2\_32.dll, and can only be manipulated by the above-mentioned functions.</span></span>

<span data-ttu-id="7d1b2-122">На 64-разрядных платформах для удаления пространства имен в 32-разрядном каталоге предоставляется аналогичная функция [**WSCInstallNameSpace32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespace32) .</span><span class="sxs-lookup"><span data-stu-id="7d1b2-122">On 64-bit platforms, a similar [**WSCInstallNameSpace32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallnamespace32) function is provided to uninstall a namespace in the 32-bit catalog.</span></span>

<span data-ttu-id="7d1b2-123">В любой момент поставщик пространства имен считается активным или неактивным, и этот параметр управляется с помощью функций [**всценабленспровидер**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenablensprovider) и [**WSCEnableNSProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenablensprovider32) .</span><span class="sxs-lookup"><span data-stu-id="7d1b2-123">At any point, an namespace provider is considered to be either active or inactive, with this setting controlled through the [**WSCEnableNSProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenablensprovider) and [**WSCEnableNSProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenablensprovider32) functions.</span></span> <span data-ttu-id="7d1b2-124">Неактивные поставщики пространства имен продолжают отображаться при перечислении (с помощью функций [**всаенумнамеспацепровидерс**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersa), [**всаенумнамеспацепровидерсекс**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersexa), [**WSCEnumNameSpaceProviders32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceproviders32)и [**WSCEnumNameSpaceProvidersEx32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceprovidersex32) ), но \_32.dll Ws2 не будет маршрутизировать запросы или операции регистрации служб для этих поставщиков.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-124">Namespace providers that are inactive continue to show up when enumerated (using the [**WSAEnumNameSpaceProviders**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersa), [**WSAEnumNameSpaceProvidersEx**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumnamespaceprovidersexa), [**WSCEnumNameSpaceProviders32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceproviders32), and [**WSCEnumNameSpaceProvidersEx32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumnamespaceprovidersex32) functions), but the Ws2\_32.dll will not route any query or service registration operations to these providers.</span></span> <span data-ttu-id="7d1b2-125">Эта возможность может быть полезной в ситуациях, когда более одного из установленных поставщиков пространств имен может поддерживать заданное пространство имен.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-125">This capability can be useful in situations where more than one of the installed namespace providers can support a given namespace.</span></span>

<span data-ttu-id="7d1b2-126">Если в одной функции API имеется ссылка на несколько поставщиков пространств имен, порядок, в котором выполняется маршрутизация запросов и операций регистрации в поставщики пространства имен, не определен.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-126">When multiple namespace providers are referenced in a single API function, the order in which the order in which the queries and registration operations are routed to namespace providers is unspecified.</span></span> <span data-ttu-id="7d1b2-127">Порядок не связан с порядком, в котором устанавливаются поставщики пространства имен.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-127">The order is unrelated to the order in which namespace providers are installed.</span></span> <span data-ttu-id="7d1b2-128">Существует два способа управления тем, какие поставщики пространства имен используются для разрешения запроса имени.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-128">There are two ways to control which namespace providers are used to resolve a name query.</span></span> <span data-ttu-id="7d1b2-129">Во-первых, функции [**всценабленспровидер**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenablensprovider) и [**WSCEnableNSProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenablensprovider32) можно использовать для включения и отключения пространств имен на уровне компьютера, постоянно.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-129">First, the [**WSCEnableNSProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenablensprovider) and [**WSCEnableNSProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenablensprovider32) functions can be used to enable and disable namespaces in a computer-wide, persistent way.</span></span> <span data-ttu-id="7d1b2-130">Во-вторых, приложения могут направить отдельный запрос конкретному поставщику, указав идентификатор GUID, определяющий поставщика, как часть запроса.</span><span class="sxs-lookup"><span data-stu-id="7d1b2-130">Second, applications can direct an individual query to a particular provider by specifying that provider's identifying GUID as part of the query.</span></span>

 

 



