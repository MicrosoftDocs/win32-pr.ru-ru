---
description: Вычисление накладных расходов с помощью netstat
ms.assetid: d96a8fba-8d76-443f-be49-81a8ad7050fa
title: Вычисление накладных расходов с помощью netstat
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a7843c3cd445bee66e25a9f191ae4b78093faea0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105701563"
---
# <a name="calculating-overhead-with-netstat"></a>Вычисление накладных расходов с помощью netstat

Чтобы избежать снижения нагрузки на данные, такие как широковещательный или многоадресный трафик, следует вычислять накладные расходы с помощью netstat в тихой сети.

**Вычисление сетевой нагрузки приложения с помощью программы netstat**

1.  Получение статистики текущего интерфейса с помощью программы netstat.
2.  Запустите приложение.
3.  Получите статистику интерфейса снова с помощью программы netstat.
4.  Вычислите число байтов, полученных между двумя измерениями netstat.

## <a name="example"></a>Пример

В следующем примере показаны эти действия с использованием TTCP для отправки 10 байт данных по одному байту за раз.

Во-первых, вычисляется теоретическая нагрузка на приложение. Для этого теста все пакеты имеют размер 60 байт (минимум Ethernet). Для этого требуется три пакета, чтобы настроить подключение, 10 пакетов данных, 10 пакетов подтверждения (отложенное подтверждение инициируется почти каждый раз) и четыре пакета для корректного закрытия подключения.

Это соответствует 27 пакетам по 60 байт или 1620 байт (3 + 4 + 10 + 10) \* 60 = 1620). Так как передаются только 10 байт данных, нагрузка составляет 1610 байт, что превышает 99% нагрузки на протокол.

### <a name="commands"></a>Команды

**netstat-e**

``` syntax
Interface Statistics
                     Received     Sent
Bytes                392291400    444684566
Unicast packets      487627       570086
Non-unicast packets  1159163      11300
Discards             0            0
Errors               0            0
Unknown protocols    52812
```

**Ttcp-t-H0-D-L1-N10-P9 172.31.71.99**

``` syntax
ttcp-t: 10 bytes in 2168 real milliseconds = 0 KB/sec
ttcp-t: 10 I/O calls, msec/call = 216, calls/sec = 4, bytes/call = 1
```

**netstat-e**

``` syntax
Interface Statistics
                      Received     Sent
Bytes                 39229207     444685382
Unicast packets       487641       570100
Non-unicast packets   1159164      11301
Discards              0            0
Errors                0            0
Unknown protocols     52812
```

### <a name="calculations"></a>Вычисления

**Отправлено:** 816 байт

**Получено:** 674 байт

**Всего байт:** 1490

**Байт пользователя:** 10

**Накладные расходы:** 1480/1490 = 99,3%

* * Гудпут: * * = 5 байт/сек (или 40 бит/с)

> [!Note]  
> Фактические переданные байты не соответствуют теоретическому значению, так как в значениях netstat не учитывается размер байтов для заполнения.

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Поведение приложения](application-behavior-2.md)
</dt> <dt>

[Высокопроизводительные приложения Windows Sockets](high-performance-windows-sockets-applications-2.md)
</dt> </dl>

 

 



