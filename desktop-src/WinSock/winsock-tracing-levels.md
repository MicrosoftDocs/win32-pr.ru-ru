---
description: Дополнительные сведения см. в статье уровни трассировки Winsock.
ms.assetid: a92bc4d2-257a-478a-b10d-4fada4323c9b
title: Уровни трассировки Winsock
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b225558015fb823cd02028a1ae1433d3d0549896
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105712533"
---
# <a name="winsock-tracing-levels"></a>Уровни трассировки Winsock

## <a name="levels-of-winsock-tracing"></a>Уровни трассировки Winsock

В трассировке Winsock возможны два уровня ведения журнала:

-   Сведения
-   Подробный

Информационный уровень отслеживает события создания и закрытия сокета, а также любые ошибки, возникающие на сокете.

Уровень подробных данных включает события уровня информации и добавляет дополнительную трассировку для событий отправки и получения. Подробное ведение журнала используется для перехвата проблем с повреждением буфера, а также для плохо написанных приложений.

Уровень Information или verbose можно использовать с трассировкой событий сети Winsock. Трассировка изменений каталога Winsock поддерживает только уровень информации.

## <a name="information-event-tracing"></a>Трассировка информационных событий

В следующем списке приведены сведения об операциях сокета сетевых событий Winsock, которые отслеживаются на уровне информации:

-   Создание сокета

    Событие заносится в журнал при создании сокета, который может использоваться для трассировки времени существования сокета. Эти события также включают сокеты, созданные с помощью приема соединений на сокете прослушивания.

-   Bind

    Локальный IP-адрес заносится в журнал, чтобы помочь сопоставлять данные трассировки Winsock с вызовами сокета приложения.

-   Подключение

    Удаленный IP-адрес подключенного сокета заносится в журнал, чтобы помочь сопоставить данные трассировки Winsock с вызовами сокета приложения.

-   Winsock — инициированные прерывания и отмены

    Когда Winsock активно прерывает или отменяет запрос, событие заносится в журнал.

-   Сброс инициированного транспорта

    Когда базовый транспорт указывает, что подключение сброшено, событие заносится в журнал.

-   Ошибки отправки и получения

    При сбое вызова Send или Receive к базовому транспорту событие регистрируется в журнале.

-   Отключение сокета и закрытие

    Событие регистрируется при закрытии маркера сокета.

## <a name="verbose-event-tracing"></a>Подробная трассировка событий

Все информационные события отслеживаются на уровне подробных данных. В следующем списке приведены дополнительные операции сокета событий сети Winsock, которые отслеживаются на уровне подробных данных.

-   Буферы отправки и получения

    События записываются в журнал для адресов буфера пользователя и длины, когда вызовы Send и Receive публикуются в Winsock, а также после завершения этих вызовов. Это полезно для диагностики проблем повторного использования буфера, а также для неэффективного использования буферов.

-   Параметры сокета

    Событие регистрируется, когда приложение изменяет определенные значения параметров сокета. Некоторые из параметров в журнале включают \_ сндбуф, поэтому \_ РКВБУФ, SIO \_ \_ \_ и фионбио.

-   Всаполл и выберите

    Событие заносится в журнал использования [**всаполл**](/windows/win32/api/winsock2/nf-winsock2-wsapoll) и вызовов [**SELECT**](/windows/desktop/api/Winsock2/nf-winsock2-select) , которые можно использовать для поиска узких мест производительности.

-   Winsock — инициированные прерывания и отмены

    Когда Winsock активно прерывает или отменяет запрос, событие заносится в журнал.

-   Маска события

    Событие заносится в журнал для маски событий, регистрируемой приложением при помощи функции [**всаевентселект**](/windows/desktop/api/Winsock2/nf-winsock2-wsaeventselect) .

-   Datagram

    Событие регистрируется каждый раз, когда происходит датаграмма, и нет буферного пространства для его копирования.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Управление трассировкой Winsock](control-of-winsock-tracing.md)
</dt> <dt>

[Трассировка Winsock](winsock-tracing.md)
</dt> <dt>

[Сведения о трассировке изменений каталога Winsock](winsock-layered-service-provider-tracing-event-details.md)
</dt> <dt>

[Сведения о трассировке событий сети Winsock](winsock-tracing-event-details.md)
</dt> </dl>

 

 
