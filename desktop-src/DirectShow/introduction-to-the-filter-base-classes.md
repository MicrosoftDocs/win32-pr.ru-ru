---
description: Общие сведения о базовых классах фильтров
ms.assetid: db6324d7-1914-44a8-a202-dff752b61c1a
title: Общие сведения о базовых классах фильтров
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f44c104d8fe155a7c9f0edba72770a508c8ec43d
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104416384"
---
# <a name="introduction-to-the-filter-base-classes"></a><span data-ttu-id="caac2-103">Общие сведения о базовых классах фильтров</span><span class="sxs-lookup"><span data-stu-id="caac2-103">Introduction to the Filter Base Classes</span></span>

<span data-ttu-id="caac2-104">В этой статье описывается Библиотека базовых классов DirectShow (Microsoft).</span><span class="sxs-lookup"><span data-stu-id="caac2-104">This article describes the Microsoft DirectShow base class library.</span></span> <span data-ttu-id="caac2-105">Эта библиотека предназначена для разработчиков фильтров, но средства записи приложений могут найти некоторые вспомогательные классы и программы отладки, которые полезны.</span><span class="sxs-lookup"><span data-stu-id="caac2-105">This library is intended for filter developers, but application writers might find some of the helper classes and debugging utilities useful.</span></span> <span data-ttu-id="caac2-106">Тем не менее, Библиотека базовых классов не требуется для программирования DirectShow.</span><span class="sxs-lookup"><span data-stu-id="caac2-106">The base class library is not required for DirectShow programming, however.</span></span>

<span data-ttu-id="caac2-107">В следующих разделах приводится сводка наиболее важных базовых классов в библиотеке.</span><span class="sxs-lookup"><span data-stu-id="caac2-107">The following sections summarize the most important base classes in the library.</span></span>

<span data-ttu-id="caac2-108">**Классы объектов COM**</span><span class="sxs-lookup"><span data-stu-id="caac2-108">**COM Object Classes**</span></span>

<span data-ttu-id="caac2-109">Создание COM-объектов поддерживается следующими классами:</span><span class="sxs-lookup"><span data-stu-id="caac2-109">The following classes support the creation of COM objects:</span></span>



| <span data-ttu-id="caac2-110">Класс</span><span class="sxs-lookup"><span data-stu-id="caac2-110">Class</span></span>                              | <span data-ttu-id="caac2-111">Описание</span><span class="sxs-lookup"><span data-stu-id="caac2-111">Description</span></span>                            |
|------------------------------------|----------------------------------------|
| [<span data-ttu-id="caac2-112">**кбасеобжект**</span><span class="sxs-lookup"><span data-stu-id="caac2-112">**CBaseObject**</span></span>](cbaseobject.md) | <span data-ttu-id="caac2-113">Базовый класс объекта.</span><span class="sxs-lookup"><span data-stu-id="caac2-113">Base object class.</span></span>                     |
| [<span data-ttu-id="caac2-114">**кункновн**</span><span class="sxs-lookup"><span data-stu-id="caac2-114">**CUnknown**</span></span>](cunknown.md)       | <span data-ttu-id="caac2-115">Реализует интерфейс **IUnknown** .</span><span class="sxs-lookup"><span data-stu-id="caac2-115">Implements the **IUnknown** interface.</span></span> |



 

<span data-ttu-id="caac2-116">Большинство классов DirectShow являются производными от **кбасеобжект**.</span><span class="sxs-lookup"><span data-stu-id="caac2-116">Most of the DirectShow classes derive from **CBaseObject**.</span></span> <span data-ttu-id="caac2-117">Этот класс предоставляет помощь при отладке, сохраняя счетчик всех активных объектов в библиотеке DLL во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="caac2-117">This class provides debugging assistance by keeping a count of all the active objects in the DLL at run time.</span></span> <span data-ttu-id="caac2-118">В отладочных сборках библиотека DLL утверждает, выгружается ли она, пока число объектов больше нуля.</span><span class="sxs-lookup"><span data-stu-id="caac2-118">In debug builds, the DLL asserts if it is unloaded while the object count is greater than zero.</span></span> <span data-ttu-id="caac2-119">Это упрощает мониторинг утечек, вызванных проблемами подсчета ссылок.</span><span class="sxs-lookup"><span data-stu-id="caac2-119">This makes it easier to track down leaks caused by reference-counting problems.</span></span>

<span data-ttu-id="caac2-120">Все базовые классы, поддерживающие COM-интерфейсы, являются производными от **кункновн**, который наследует **кбасеобжект**.</span><span class="sxs-lookup"><span data-stu-id="caac2-120">All of the base classes that support COM interfaces derive from **CUnknown**, which inherits **CBaseObject**.</span></span> <span data-ttu-id="caac2-121">Класс **кункновн** поддерживает подсчет ссылок, **QueryInterface** и агрегирование.</span><span class="sxs-lookup"><span data-stu-id="caac2-121">The **CUnknown** class supports reference counting, **QueryInterface**, and aggregration.</span></span> <span data-ttu-id="caac2-122">Дополнительные сведения см. [в разделе Реализация IUnknown](how-to-implement-iunknown.md).</span><span class="sxs-lookup"><span data-stu-id="caac2-122">For more information, see [How to Implement IUnknown](how-to-implement-iunknown.md).</span></span>

<span data-ttu-id="caac2-123">**Фильтрация и закрепление классов**</span><span class="sxs-lookup"><span data-stu-id="caac2-123">**Filter and Pin Classes**</span></span>

<span data-ttu-id="caac2-124">Следующие классы поддерживают создание фильтров и объектов-закрепления DirectShow:</span><span class="sxs-lookup"><span data-stu-id="caac2-124">The following classes support the creation of DirectShow filter and pin objects:</span></span>



| <span data-ttu-id="caac2-125">Класс</span><span class="sxs-lookup"><span data-stu-id="caac2-125">Class</span></span>                                    | <span data-ttu-id="caac2-126">Описание</span><span class="sxs-lookup"><span data-stu-id="caac2-126">Description</span></span>                                                                                                                                                     |
|------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="caac2-127">**кбасефилтер**</span><span class="sxs-lookup"><span data-stu-id="caac2-127">**CBaseFilter**</span></span>](cbasefilter.md)       | <span data-ttu-id="caac2-128">Базовый класс для фильтров.</span><span class="sxs-lookup"><span data-stu-id="caac2-128">Base class for filters.</span></span> <span data-ttu-id="caac2-129">Реализует интерфейс [**ибасефилтер**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter) .</span><span class="sxs-lookup"><span data-stu-id="caac2-129">Implements the [**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter) interface.</span></span>                                                                            |
| [<span data-ttu-id="caac2-130">**кбасепин**</span><span class="sxs-lookup"><span data-stu-id="caac2-130">**CBasePin**</span></span>](cbasepin.md)             | <span data-ttu-id="caac2-131">Базовый класс для ПИН-кодов.</span><span class="sxs-lookup"><span data-stu-id="caac2-131">Base class for pins.</span></span> <span data-ttu-id="caac2-132">Реализует интерфейсы [**Ипин**](/windows/desktop/api/Strmif/nn-strmif-ipin) и [**икуалитиконтрол**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol) .</span><span class="sxs-lookup"><span data-stu-id="caac2-132">Implements the [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin) and [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol) interfaces.</span></span>                                             |
| [<span data-ttu-id="caac2-133">**кбасеинпутпин**</span><span class="sxs-lookup"><span data-stu-id="caac2-133">**CBaseInputPin**</span></span>](cbaseinputpin.md)   | <span data-ttu-id="caac2-134">Базовый класс для входных ПИН-кодов, использующих транспорт локальной памяти.</span><span class="sxs-lookup"><span data-stu-id="caac2-134">Base class for input pins that use local memory transport.</span></span> <span data-ttu-id="caac2-135">Реализует интерфейс [**имеминпутпин**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) .</span><span class="sxs-lookup"><span data-stu-id="caac2-135">Implements the [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) interface.</span></span> <span data-ttu-id="caac2-136">Этот класс является производным от **кбасепин**.</span><span class="sxs-lookup"><span data-stu-id="caac2-136">This class derives from **CBasePin**.</span></span> |
| [<span data-ttu-id="caac2-137">**кбасеаутпутпин**</span><span class="sxs-lookup"><span data-stu-id="caac2-137">**CBaseOutputPin**</span></span>](cbaseoutputpin.md) | <span data-ttu-id="caac2-138">Базовый класс для выходных закрепления, использующих соединения **имеминпутпин** .</span><span class="sxs-lookup"><span data-stu-id="caac2-138">Base class for output pins that use **IMemInputPin** connections.</span></span> <span data-ttu-id="caac2-139">Этот класс является производным от **кбасепин**.</span><span class="sxs-lookup"><span data-stu-id="caac2-139">This class derives from **CBasePin**.</span></span>                                                         |



 

<span data-ttu-id="caac2-140">Следующие классы полезны для создания более специализированных типов фильтров:</span><span class="sxs-lookup"><span data-stu-id="caac2-140">The following classes are useful for creating more specialized types of filters:</span></span>



| <span data-ttu-id="caac2-141">Класс</span><span class="sxs-lookup"><span data-stu-id="caac2-141">Class</span></span>                                                  | <span data-ttu-id="caac2-142">Описание</span><span class="sxs-lookup"><span data-stu-id="caac2-142">Description</span></span>                                                                                                                                                                                                                                                                                               |
|--------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="caac2-143">**ксаурце**</span><span class="sxs-lookup"><span data-stu-id="caac2-143">**CSource**</span></span>](csource.md)                             | <span data-ttu-id="caac2-144">Базовый класс для фильтров источника.</span><span class="sxs-lookup"><span data-stu-id="caac2-144">Base class for source filters.</span></span> <span data-ttu-id="caac2-145">Этот класс предназначен для создания источников push-уведомлений.</span><span class="sxs-lookup"><span data-stu-id="caac2-145">This class is designed for creating push sources.</span></span> <span data-ttu-id="caac2-146">Он не подходит для источников извлечения, таких как средства чтения файлов.</span><span class="sxs-lookup"><span data-stu-id="caac2-146">It is not suitable for pull sources, such as file readers.</span></span> <span data-ttu-id="caac2-147">Чтобы создать выходные сигналы для этого класса, используйте класс [**ксаурцестреам**](csourcestream.md) .</span><span class="sxs-lookup"><span data-stu-id="caac2-147">To create output pins for this class, use the [**CSourceStream**](csourcestream.md) class.</span></span>                                                                   |
| [<span data-ttu-id="caac2-148">**ктрансформфилтер**</span><span class="sxs-lookup"><span data-stu-id="caac2-148">**CTransformFilter**</span></span>](ctransformfilter.md)           | <span data-ttu-id="caac2-149">Базовый класс для фильтров преобразований.</span><span class="sxs-lookup"><span data-stu-id="caac2-149">Base class for transform filters.</span></span> <span data-ttu-id="caac2-150">Этот класс выполняет копирование данных.</span><span class="sxs-lookup"><span data-stu-id="caac2-150">This class performs a copy on the data.</span></span> <span data-ttu-id="caac2-151">ПИН-коды для этого класса: [**ктрансформинпутпин**](ctransforminputpin.md) и [**ктрансформаутпутпин**](ctransformoutputpin.md).</span><span class="sxs-lookup"><span data-stu-id="caac2-151">The pins for this class are [**CTransformInputPin**](ctransforminputpin.md) and [**CTransformOutputPin**](ctransformoutputpin.md).</span></span>                                                                                            |
| [<span data-ttu-id="caac2-152">**ктрансинплацефилтер**</span><span class="sxs-lookup"><span data-stu-id="caac2-152">**CTransInPlaceFilter**</span></span>](ctransinplacefilter.md)     | <span data-ttu-id="caac2-153">Базовый класс для фильтров преобразования, которые не копируют данные.</span><span class="sxs-lookup"><span data-stu-id="caac2-153">Base class for transform filters that do not copy data.</span></span> <span data-ttu-id="caac2-154">Этот класс выполняет обработку данных непосредственно на входных данных, прежде чем передавать их нисходящим.</span><span class="sxs-lookup"><span data-stu-id="caac2-154">This class performs the data processing directly on the input data before passing it downstream.</span></span> <span data-ttu-id="caac2-155">ПИН-коды для этого класса: [**ктрансинплацеинпутпин**](ctransinplaceinputpin.md) и [**ктрансинплацеаутпутпин**](ctransinplaceoutputpin.md).</span><span class="sxs-lookup"><span data-stu-id="caac2-155">The pins for this class are [**CTransInPlaceInputPin**](ctransinplaceinputpin.md) and [**CTransInPlaceOutputPin**](ctransinplaceoutputpin.md).</span></span> |
| [<span data-ttu-id="caac2-156">**квидеотрансформфилтер**</span><span class="sxs-lookup"><span data-stu-id="caac2-156">**CVideoTransformFilter**</span></span>](cvideotransformfilter.md) | <span data-ttu-id="caac2-157">Базовый класс для фильтров преобразования видео.</span><span class="sxs-lookup"><span data-stu-id="caac2-157">Base class for video transform filters.</span></span> <span data-ttu-id="caac2-158">Этот класс является производным от **ктрансформфилтер** и добавляет поддержку контроля качества.</span><span class="sxs-lookup"><span data-stu-id="caac2-158">This class derives from **CTransformFilter** and adds support for quality control.</span></span>                                                                                                                                                                                |
| [<span data-ttu-id="caac2-159">**кбасерендерер**</span><span class="sxs-lookup"><span data-stu-id="caac2-159">**CBaseRenderer**</span></span>](cbaserenderer.md)                 | <span data-ttu-id="caac2-160">Базовый класс для фильтров модуля подготовки отчетов.</span><span class="sxs-lookup"><span data-stu-id="caac2-160">Base class for renderer filters.</span></span> <span data-ttu-id="caac2-161">Входной ПИН-код для этого класса — [**крендереринпутпин**](crendererinputpin.md).</span><span class="sxs-lookup"><span data-stu-id="caac2-161">The input pin for this class is [**CRendererInputPin**](crendererinputpin.md).</span></span>                                                                                                                                                                                          |
| [<span data-ttu-id="caac2-162">**кбасевидеорендерер**</span><span class="sxs-lookup"><span data-stu-id="caac2-162">**CBaseVideoRenderer**</span></span>](cbasevideorenderer.md)       | <span data-ttu-id="caac2-163">Базовый класс для модулей подготовки видео.</span><span class="sxs-lookup"><span data-stu-id="caac2-163">Base class for video renderers.</span></span> <span data-ttu-id="caac2-164">Этот класс является производным от **кбасерендерер**.</span><span class="sxs-lookup"><span data-stu-id="caac2-164">This class derives from **CBaseRenderer**.</span></span>                                                                                                                                                                                                                                |



 

<span data-ttu-id="caac2-165">Чтобы использовать эти классы, необходимо создать собственный класс и написать код для поддержки функций, характерных для вашего фильтра.</span><span class="sxs-lookup"><span data-stu-id="caac2-165">To use these classes, you must derive your own class and write code to support the functionality that is specific to your filter.</span></span> <span data-ttu-id="caac2-166">Чем более специализированный базовый класс, тем меньше кода нужно будет писать в производном классе.</span><span class="sxs-lookup"><span data-stu-id="caac2-166">The more specialized the base class, the less code you will need to write in your derived class.</span></span>

<span data-ttu-id="caac2-167">**Вспомогательные объекты**</span><span class="sxs-lookup"><span data-stu-id="caac2-167">**Helper Objects**</span></span>

<span data-ttu-id="caac2-168">Следующие классы реализуют вспомогательные объекты, используемые фильтрами и ПИН-коды.</span><span class="sxs-lookup"><span data-stu-id="caac2-168">The following classes implement helper objects that are used by filters and pins.</span></span> <span data-ttu-id="caac2-169">Большинство из этих классов можно использовать без наследования от них новых классов:</span><span class="sxs-lookup"><span data-stu-id="caac2-169">Most of these classes can be used without deriving new classes from them:</span></span>



| <span data-ttu-id="caac2-170">Класс</span><span class="sxs-lookup"><span data-stu-id="caac2-170">Class</span></span>                                              | <span data-ttu-id="caac2-171">Описание</span><span class="sxs-lookup"><span data-stu-id="caac2-171">Description</span></span>                                                                                                                                                        |
|----------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="caac2-172">**кпуллпин**</span><span class="sxs-lookup"><span data-stu-id="caac2-172">**CPullPin**</span></span>](cpullpin.md)                       | <span data-ttu-id="caac2-173">Вспомогательный объект для входных закрепления фильтров анализатора.</span><span class="sxs-lookup"><span data-stu-id="caac2-173">Helper object for input pins on parser filters.</span></span> <span data-ttu-id="caac2-174">Поддерживает соединения [**иасинкреадер**](/windows/desktop/api/Strmif/nn-strmif-iasyncreader) с источниками извлечения.</span><span class="sxs-lookup"><span data-stu-id="caac2-174">Supports [**IAsyncReader**](/windows/desktop/api/Strmif/nn-strmif-iasyncreader) connections with pull sources.</span></span>                                       |
| [<span data-ttu-id="caac2-175">**каутпуткуеуе**</span><span class="sxs-lookup"><span data-stu-id="caac2-175">**COutputQueue**</span></span>](coutputqueue.md)               | <span data-ttu-id="caac2-176">Вспомогательный объект для выходных закрепления, которые ставят образцы в очередь для доставки в рабочем потоке.</span><span class="sxs-lookup"><span data-stu-id="caac2-176">Helper object for output pins that queue samples for delivery on a worker thread.</span></span>                                                                                  |
| [<span data-ttu-id="caac2-177">**ксаурцесикинг**</span><span class="sxs-lookup"><span data-stu-id="caac2-177">**CSourceSeeking**</span></span>](csourceseeking.md)           | <span data-ttu-id="caac2-178">Объект справки для реализации поиска в фильтре источника с точно одним выходным ПИН-кодом.</span><span class="sxs-lookup"><span data-stu-id="caac2-178">Help object for implementing seeking on a source filter with exactly one output pin.</span></span> <span data-ttu-id="caac2-179">(Этот класс не предназначен для фильтров с несколькими ПИН-контактами, такими как анализаторы.)</span><span class="sxs-lookup"><span data-stu-id="caac2-179">(This class is not designed for filters with multiple pins, such as parsers.)</span></span> |
| [<span data-ttu-id="caac2-180">**ценумпинс**</span><span class="sxs-lookup"><span data-stu-id="caac2-180">**CEnumPins**</span></span>](cenumpins.md)                     | <span data-ttu-id="caac2-181">Объект Enumerator для перечисления ПИН-кодов в фильтре.</span><span class="sxs-lookup"><span data-stu-id="caac2-181">Enumerator object for enumerating pins on a filter.</span></span> <span data-ttu-id="caac2-182">Реализует интерфейс [**иенумпинс**](/windows/desktop/api/Strmif/nn-strmif-ienumpins) .</span><span class="sxs-lookup"><span data-stu-id="caac2-182">Implements the [**IEnumPins**](/windows/desktop/api/Strmif/nn-strmif-ienumpins) interface.</span></span>                                                       |
| [<span data-ttu-id="caac2-183">**ценуммедиатипес**</span><span class="sxs-lookup"><span data-stu-id="caac2-183">**CEnumMediaTypes**</span></span>](cenummediatypes.md)         | <span data-ttu-id="caac2-184">Объект перечислителя для перечисления предпочтительных типов мультимедиа на ПИН-коде.</span><span class="sxs-lookup"><span data-stu-id="caac2-184">Enumerator object for enumerating preferred media types on a pin.</span></span> <span data-ttu-id="caac2-185">Реализует интерфейс [**иенуммедиатипес**](/windows/desktop/api/Strmif/nn-strmif-ienummediatypes) .</span><span class="sxs-lookup"><span data-stu-id="caac2-185">Implements the [**IEnumMediaTypes**](/windows/desktop/api/Strmif/nn-strmif-ienummediatypes) interface.</span></span>                             |
| [<span data-ttu-id="caac2-186">**кмемаллокатор**</span><span class="sxs-lookup"><span data-stu-id="caac2-186">**CMemAllocator**</span></span>](cmemallocator.md)             | <span data-ttu-id="caac2-187">Объект распределителя памяти.</span><span class="sxs-lookup"><span data-stu-id="caac2-187">Memory allocator object.</span></span> <span data-ttu-id="caac2-188">Реализует интерфейс [**имемаллокатор**](/windows/desktop/api/Strmif/nn-strmif-imemallocator) .</span><span class="sxs-lookup"><span data-stu-id="caac2-188">Implements the [**IMemAllocator**](/windows/desktop/api/Strmif/nn-strmif-imemallocator) interface.</span></span>                                                                          |
| [<span data-ttu-id="caac2-189">**кмедиасампле**</span><span class="sxs-lookup"><span data-stu-id="caac2-189">**CMediaSample**</span></span>](cmediasample.md)               | <span data-ttu-id="caac2-190">Пример объекта мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="caac2-190">Media sample object.</span></span> <span data-ttu-id="caac2-191">Реализует интерфейс [**IMediaSample2**](/windows/desktop/api/Strmif/nn-strmif-imediasample2) .</span><span class="sxs-lookup"><span data-stu-id="caac2-191">Implements the [**IMediaSample2**](/windows/desktop/api/Strmif/nn-strmif-imediasample2) interface.</span></span>                                                                              |
| [<span data-ttu-id="caac2-192">**кбасереференцеклокк**</span><span class="sxs-lookup"><span data-stu-id="caac2-192">**CBaseReferenceClock**</span></span>](cbasereferenceclock.md) | <span data-ttu-id="caac2-193">Базовый класс для ссылочных синхронизирующих импульсов.</span><span class="sxs-lookup"><span data-stu-id="caac2-193">Base class for reference clocks.</span></span> <span data-ttu-id="caac2-194">Реализует интерфейс [**иреференцеклокк**](/windows/desktop/api/Strmif/nn-strmif-ireferenceclock) .</span><span class="sxs-lookup"><span data-stu-id="caac2-194">Implements the [**IReferenceClock**](/windows/desktop/api/Strmif/nn-strmif-ireferenceclock) interface.</span></span>                                                              |
| [<span data-ttu-id="caac2-195">**кмедиатипе**</span><span class="sxs-lookup"><span data-stu-id="caac2-195">**CMediaType**</span></span>](cmediatype.md)                   | <span data-ttu-id="caac2-196">Вспомогательный объект для манипулирования структурами [**\_ \_ типов мультимедиа AM**](/windows/win32/api/strmif/ns-strmif-am_media_type) .</span><span class="sxs-lookup"><span data-stu-id="caac2-196">Helper object for manipulating [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) structures.</span></span>                                                                                |



 

 

 



