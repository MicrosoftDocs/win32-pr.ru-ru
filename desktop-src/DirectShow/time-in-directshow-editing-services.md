---
description: Время в службах редактирования DirectShow
ms.assetid: 4e8cc766-97f3-45d5-9c4a-5cd6e9ad9c09
title: Время в службах редактирования DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 421831742a2805f58d61c2258dad89d339131f58
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105674443"
---
# <a name="time-in-directshow-editing-services"></a><span data-ttu-id="2e9e8-103">Время в службах редактирования DirectShow</span><span class="sxs-lookup"><span data-stu-id="2e9e8-103">Time in DirectShow Editing Services</span></span>

<span data-ttu-id="2e9e8-104">\[Этот API не поддерживается и может быть изменен или недоступен в будущем.\]</span><span class="sxs-lookup"><span data-stu-id="2e9e8-104">\[This API is not supported and may be altered or unavailable in the future.\]</span></span>

<span data-ttu-id="2e9e8-105">Чтобы изменить видео, необходимо работать с некоторыми важными концепциями времени.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-105">To edit video, you must work with some important timing concepts.</span></span> <span data-ttu-id="2e9e8-106">Пример:</span><span class="sxs-lookup"><span data-stu-id="2e9e8-106">For example:</span></span>

-   <span data-ttu-id="2e9e8-107">Каждый клип имеет длительность.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-107">Each clip has a duration.</span></span>
-   <span data-ttu-id="2e9e8-108">Клипы, переходы и эффекты отображаются в определенном времени в проекте.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-108">Clips, transitions, and effects appear at certain times in a project.</span></span>
-   <span data-ttu-id="2e9e8-109">Видео имеет частоту кадров, выраженную в кадрах в секунду (кадров/с).</span><span class="sxs-lookup"><span data-stu-id="2e9e8-109">Video has a frame rate, expressed in frames per second (fps).</span></span>

<span data-ttu-id="2e9e8-110">[Службы редактирования данных DirectShow](directshow-editing-services.md) (DES) предоставляют различные методы, которые устанавливают или извлекают время и частоту кадров.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-110">[DirectShow Editing Services](directshow-editing-services.md) (DES) provides various methods that set or retrieve times and frame rates.</span></span> <span data-ttu-id="2e9e8-111">Значение этих значений зависит от контекста.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-111">The meaning of these values depends on the context.</span></span>

<span data-ttu-id="2e9e8-112">**Значения времени**</span><span class="sxs-lookup"><span data-stu-id="2e9e8-112">**Time Values**</span></span>

<span data-ttu-id="2e9e8-113">Если параметр выражает время, то возможны три различных значения:</span><span class="sxs-lookup"><span data-stu-id="2e9e8-113">When a parameter expresses a time, three distinct meanings are possible:</span></span>

-   <span data-ttu-id="2e9e8-114">*Время временной шкалы*: время относительно начала временной шкалы.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-114">*Timeline time*: The time relative to the beginning of the timeline.</span></span> <span data-ttu-id="2e9e8-115">Например, клип может начаться с 2 секунд на временную шкалу, а переход на временную шкалу может произойти через 15 секунд.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-115">For example, a clip might start 2 seconds into the timeline, or a transition might occur 15 seconds into the timeline.</span></span> <span data-ttu-id="2e9e8-116">Временная шкала определяет окончательный готовый к просмотру проект, поэтому время временной шкалы можно также представить как "время проекта".</span><span class="sxs-lookup"><span data-stu-id="2e9e8-116">The timeline determines the final rendered project, so you can also think of timeline time as "project time."</span></span>
-   <span data-ttu-id="2e9e8-117">*Время мультимедиа*: точка в исходном файле относительно начала файла, достигнутая во время нормального воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-117">*Media time*: A point in a source file relative to the start of the file, as reached during normal playback.</span></span> <span data-ttu-id="2e9e8-118">Например, если у вас есть 10-секундный видеофайл, точка посрединного файла будет находиться в течение 5 секунд, выраженного в виде времени мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-118">For example, if you have a 10-second video file, the point midway through the file occurs at 5 seconds, expressed as a media time.</span></span>
-   <span data-ttu-id="2e9e8-119">*Родительское время*: время относительно объекта на временной шкале.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-119">*Parent time*: Time relative to an object in the timeline.</span></span> <span data-ttu-id="2e9e8-120">Например, если объект запускается в течение 8 секунд на временной шкале и содержит другой объект, который начинается с 10 секунд на временной шкале, дочерний объект начинается с 2 секунд относительно родительского.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-120">For example, if an object starts at 8 seconds on the timeline and contains another object that starts at 10 seconds on the timeline, the child object starts at 2 seconds relative to the parent.</span></span> <span data-ttu-id="2e9e8-121">Виртуальные дорожки начинаются со времени 0 относительно временной шкалы.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-121">Virtual tracks all start at time zero, relative to the timeline.</span></span> <span data-ttu-id="2e9e8-122">Таким образом, для любого объекта в виртуальной дорожке значение родительского времени равно времени временной шкалы.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-122">So for any object in a virtual track, parent time equals timeline time.</span></span>

<span data-ttu-id="2e9e8-123">Время мультимедиа применяется только к исходным объектам.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-123">Media time applies only to source objects.</span></span> <span data-ttu-id="2e9e8-124">Каждый исходный объект имеет время запуска носителя и время окончания работы с носителем.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-124">Each source object has a media start time and a media stop time.</span></span> <span data-ttu-id="2e9e8-125">Например, предположим, что у вас есть 10-секундный видеоролик, и вы хотите использовать только 5 секунд из середины клипа, обрезать первые 2 секунды и последние 3 секунды из клипа.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-125">For example, suppose you have a 10-second video clip, and you want to use only 5 seconds from the middle of the clip, trimming the first 2 seconds and the last 3 seconds from the clip.</span></span> <span data-ttu-id="2e9e8-126">Если требуется, чтобы клип выглядел 20 секунд в проекте (и предполагается нормальная скорость воспроизведения), необходимо указать следующее время начала и окончания.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-126">If you want the clip to appear 20 seconds into the project (and assuming a normal playback rate) you would specify the following start and stop times.</span></span>

-   <span data-ttu-id="2e9e8-127">Начало носителя: 2 секунды</span><span class="sxs-lookup"><span data-stu-id="2e9e8-127">Media start: 2 seconds</span></span>
-   <span data-ttu-id="2e9e8-128">Окончание носителя: 7 секунд</span><span class="sxs-lookup"><span data-stu-id="2e9e8-128">Media stop: 7 seconds</span></span>
-   <span data-ttu-id="2e9e8-129">Начало временной шкалы: 20 секунд</span><span class="sxs-lookup"><span data-stu-id="2e9e8-129">Timeline start: 20 seconds</span></span>
-   <span data-ttu-id="2e9e8-130">Окончание временной шкалы: 25 секунд</span><span class="sxs-lookup"><span data-stu-id="2e9e8-130">Timeline stop: 25 seconds</span></span>

    ![Вставка исходного клипа на временную шкалу](images/des-time1.png)

<span data-ttu-id="2e9e8-132">**Частота кадров**</span><span class="sxs-lookup"><span data-stu-id="2e9e8-132">**Frame Rates**</span></span>

<span data-ttu-id="2e9e8-133">Частота кадров — это "скорость" потока мультимедиа, измеряемая в кадрах за секунду.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-133">Frame rate is the "speed" of a media stream, measured in frames per second.</span></span> <span data-ttu-id="2e9e8-134">Как и значения времени, значение частоты кадров зависит от контекста:</span><span class="sxs-lookup"><span data-stu-id="2e9e8-134">As with time values, the meaning of a frame rate depends on the context:</span></span>

-   <span data-ttu-id="2e9e8-135">**Частота выходных кадров:** Частота кадров окончательно подготовленного проекта, определяемая группой.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-135">**Output frame rate:** The frame rate of the final rendered project, defined by the group.</span></span> <span data-ttu-id="2e9e8-136">При подготовке проекта каждая группа преобразуется в отдельный поток мультимедиа с собственной частотой кадров.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-136">When you render the project, each group becomes a separate media stream with its own frame rate.</span></span>
-   <span data-ttu-id="2e9e8-137">**Частота исходного кадра:** Частота кадров, в которой изначально был создан исходный файл.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-137">**Source frame rate:** The frame rate in which the source file was originally authored.</span></span> <span data-ttu-id="2e9e8-138">Созданная частота кадров не должна соответствовать частоте выходных кадров группы.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-138">The authored frame rate does not have to match the group's output frame rate.</span></span> <span data-ttu-id="2e9e8-139">При необходимости DES будет автоматически исмереть выборку или расдаунсамплинг файла.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-139">DES will automatically upsample or downsample the file as needed.</span></span> <span data-ttu-id="2e9e8-140">Для большинства форматов мультимедиа алгоритм DES может определить частоту кадров, изучив формат.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-140">For most media formats, DES can determine the frame rate by examining the format.</span></span> <span data-ttu-id="2e9e8-141">Последовательность DIB является исключением; необходимо указать частоту кадров последовательности DIB.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-141">A DIB sequence is an exception; you must specify the frame rate of a DIB sequence.</span></span> <span data-ttu-id="2e9e8-142">(Дополнительные сведения см. в разделе [Работа с источниками](working-with-sources.md).)</span><span class="sxs-lookup"><span data-stu-id="2e9e8-142">(For more information, see [Working with Sources](working-with-sources.md).)</span></span>

<span data-ttu-id="2e9e8-143">**Скорость воспроизведения:** Очевидная скорость исходного клипа, когда он отображается в проекте.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-143">**Playback rate:** The apparent speed of a source clip when it appears in the project.</span></span> <span data-ttu-id="2e9e8-144">Например, в течение 10 секунд видео на временной шкале может уместиться не более 5 секунд.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-144">For example, 10 seconds' of video can be fit into 5 seconds on the timeline.</span></span> <span data-ttu-id="2e9e8-145">В результате скорость зажима увеличивается на 2, как показано на следующей схеме.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-145">As a result, the speed of the clip increases by a factor of 2, as the following diagram illustrates.</span></span>

![повышение скорости воспроизведения исходного кода](images/des-time2.png)

<span data-ttu-id="2e9e8-147">(С источником звука также будет смещена высота.) Следующая формула определяет скорость воспроизведения исходного клипа:</span><span class="sxs-lookup"><span data-stu-id="2e9e8-147">(With an audio source, the pitch would shift as well.) The following formula determines a source clip's playback rate:</span></span>

-   <span data-ttu-id="2e9e8-148">Скорость воспроизведения = (воспроизведение носителя — начало носителя)/(окончание временной шкалы — начало временной шкалы)</span><span class="sxs-lookup"><span data-stu-id="2e9e8-148">Playback rate = (Media Stop – Media Start) / (Timeline Stop – Timeline Start)</span></span>

<span data-ttu-id="2e9e8-149">Обратите внимание, что каждая из этих трех ставок не зависит от других.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-149">Note that each of these three rates is independent of the others:</span></span>

-   <span data-ttu-id="2e9e8-150">Можно ускорить или замедлить работу клипа, изменяя время работы со носителями. Это не влияет на частоту кадров окончательного вывода.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-150">You can speed up or slow down a clip by adjusting the media times; this does not affect the frame rate of the final output.</span></span>
-   <span data-ttu-id="2e9e8-151">Можно увеличить или уменьшить частоту выходных кадров, не влияя на скорость воспроизведения файла.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-151">You can increase or decrease the output frame rate without affecting how fast a file plays.</span></span>
-   <span data-ttu-id="2e9e8-152">Вы можете сочетать в одной группе исходные файлы, имеющие разную частоту кадров, а DES — выборке или понижение уровня для каждого клипа в соответствии с частотой кадров группы.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-152">You can mix, within the same group, source files that have different authored frame rates, and DES will upsample or downsample each clip to match the group's frame rate.</span></span>

<span data-ttu-id="2e9e8-153">При отрисовке проекта все значения времени округляются до ближайшей границы фрейма, что определяется частотой кадров группы.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-153">When you render a project, all times are rounded to the nearest frame boundary, as determined by the group frame rate.</span></span> <span data-ttu-id="2e9e8-154">Например, предположим, что у группы видео частота кадров составляет 30 кадров/с.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-154">For example, suppose a video group has a frame rate of 30 fps.</span></span> <span data-ttu-id="2e9e8-155">Каждый кадр имеет примерно 33 миллисекунд (МС).</span><span class="sxs-lookup"><span data-stu-id="2e9e8-155">Each frame is roughly 33 milliseconds (ms).</span></span> <span data-ttu-id="2e9e8-156">Предположим, что вы добавили в временную шкалу исходный ролик с 1,68 секунд, начиная с нулевого времени.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-156">Suppose you add a 1.68-second source clip to the timeline, starting at time zero.</span></span> <span data-ttu-id="2e9e8-157">Источник не заканчивается на границе фрейма, поэтому DES округляет время ожидания до 1,6666 секунд (50 кадров).</span><span class="sxs-lookup"><span data-stu-id="2e9e8-157">The source does not end exactly on a frame boundary, so DES rounds the stop time to 1.6666 seconds (50 frames).</span></span> <span data-ttu-id="2e9e8-158">Если в проекте, готовом для просмотра, выполняется поиск в 1,68 секунд, то в кадре 51st будет выполнен поиск после конца источника.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-158">If you seek to 1.68 seconds in the rendered project, you will actually seek past the end of the source, to the 51st frame.</span></span>

<span data-ttu-id="2e9e8-159">Однако DES не перезаписывает время окончания источника.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-159">However, DES does not overwrite the source's stop time.</span></span> <span data-ttu-id="2e9e8-160">Позже вы можете изменить частоту кадров группы или переместить источник в новое место на временной шкале, где оно округляется по-другому.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-160">You might later change the group frame rate, or move the source to a new spot in the timeline where it rounds differently.</span></span> <span data-ttu-id="2e9e8-161">Таким образом, DES сохраняет исходное время окончания и округляет только при необходимости.</span><span class="sxs-lookup"><span data-stu-id="2e9e8-161">Therefore, DES preserves the original stop time and rounds only when necessary.</span></span> <span data-ttu-id="2e9e8-162">Дополнительные сведения см. в разделе [**иамтимелинеобж:: фикстимес**](iamtimelineobj-fixtimes.md).</span><span class="sxs-lookup"><span data-stu-id="2e9e8-162">For more information, see [**IAMTimelineObj::FixTimes**](iamtimelineobj-fixtimes.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="2e9e8-163">См. также</span><span class="sxs-lookup"><span data-stu-id="2e9e8-163">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="2e9e8-164">начало работы с помощью служб редактирования DirectShow</span><span class="sxs-lookup"><span data-stu-id="2e9e8-164">Getting Started with DirectShow Editing Services</span></span>](getting-started-with-directshow-editing-services.md)
</dt> </dl>

 

 



