---
description: Рекомендации по регистрации фильтров
ms.assetid: 05945937-9e01-4930-ae95-1931a711b55e
title: Рекомендации по регистрации фильтров
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5ed616d90c17d232995994d8ceccfdc72d022d56
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104139251"
---
# <a name="guidelines-for-registering-filters"></a><span data-ttu-id="a7b09-103">Рекомендации по регистрации фильтров</span><span class="sxs-lookup"><span data-stu-id="a7b09-103">Guidelines for Registering Filters</span></span>

<span data-ttu-id="a7b09-104">Данные реестра фильтра определяют, как диспетчер Graph Manager работает во время [интеллектуального соединения](intelligent-connect.md).</span><span class="sxs-lookup"><span data-stu-id="a7b09-104">The filter registry information determines how the Filter Graph Manager functions during [Intelligent Connect](intelligent-connect.md).</span></span> <span data-ttu-id="a7b09-105">Поэтому он влияет на каждое приложение, написанное для DirectShow, а не только на те, которые будут использовать фильтр.</span><span class="sxs-lookup"><span data-stu-id="a7b09-105">Thus, it affects every application written for DirectShow, not just the ones that will use your filter.</span></span> <span data-ttu-id="a7b09-106">Следует убедиться, что фильтр работает правильно, следуя этим рекомендациям.</span><span class="sxs-lookup"><span data-stu-id="a7b09-106">You should make sure that your filter behaves correctly, by following these guidelines.</span></span>

1.  <span data-ttu-id="a7b09-107">Нужны ли вам данные фильтра в реестре?</span><span class="sxs-lookup"><span data-stu-id="a7b09-107">Do you need the filter data in the registry?</span></span> <span data-ttu-id="a7b09-108">Для многих пользовательских фильтров нет причин сделать фильтр видимым для модуля сопоставления фильтров или перечислителя системных устройств.</span><span class="sxs-lookup"><span data-stu-id="a7b09-108">For many custom filters, there is no reason to make the filter visible to the Filter Mapper or the System Device Enumerator.</span></span> <span data-ttu-id="a7b09-109">Пока вы регистрируете библиотеку DLL, приложение может создать фильтр с помощью **CoCreateInstance**.</span><span class="sxs-lookup"><span data-stu-id="a7b09-109">As long as you register the DLL, your application can create the filter using **CoCreateInstance**.</span></span> <span data-ttu-id="a7b09-110">В этом случае просто опустите структуру [**\_ фильтра амовиесетуп**](amoviesetup-filter.md) из шаблона фабрики.</span><span class="sxs-lookup"><span data-stu-id="a7b09-110">In that case, simply omit the [**AMOVIESETUP\_FILTER**](amoviesetup-filter.md) structure from the factory template.</span></span> <span data-ttu-id="a7b09-111">(Один недостаток заключается в том, что фильтр не будет отображаться в Графедит.</span><span class="sxs-lookup"><span data-stu-id="a7b09-111">(One drawback is that your filter will not be visible in GraphEdit.</span></span> <span data-ttu-id="a7b09-112">Чтобы обойти это, можно создать закрытую категорию "тестирование" с помощью метода [**IFilterMapper2:: креатекатегори**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-createcategory) .</span><span class="sxs-lookup"><span data-stu-id="a7b09-112">To get around this, you can create a private "Testing" category using the [**IFilterMapper2::CreateCategory**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-createcategory) method.</span></span> <span data-ttu-id="a7b09-113">Это следует делать только для отладочных сборок.)</span><span class="sxs-lookup"><span data-stu-id="a7b09-113">You should only do this for debug builds.)</span></span>
2.  <span data-ttu-id="a7b09-114">Выберите правильную категорию фильтра.</span><span class="sxs-lookup"><span data-stu-id="a7b09-114">Choose the correct filter category.</span></span> <span data-ttu-id="a7b09-115">Категория "фильтры DirectShow по умолчанию" предназначена для фильтров общего назначения.</span><span class="sxs-lookup"><span data-stu-id="a7b09-115">The default "DirectShow Filters" category is for general purpose filters.</span></span> <span data-ttu-id="a7b09-116">При необходимости Зарегистрируйте фильтр в более определенной категории.</span><span class="sxs-lookup"><span data-stu-id="a7b09-116">Whenever appropriate, register your filter in a more specific category.</span></span> <span data-ttu-id="a7b09-117">Когда [**IFilterMapper2**](/windows/desktop/api/Strmif/nn-strmif-ifiltermapper2) ищет фильтр, он пропускает любую категорию, у которой недоступность \_ \_ не \_ используется или меньше.</span><span class="sxs-lookup"><span data-stu-id="a7b09-117">When [**IFilterMapper2**](/windows/desktop/api/Strmif/nn-strmif-ifiltermapper2) searches for a filter, it ignores any category whose merit is MERIT\_DO\_NOT\_USE or less.</span></span> <span data-ttu-id="a7b09-118">Категории, не предназначенные для нормального воспроизведения, имеют низкий уровень.</span><span class="sxs-lookup"><span data-stu-id="a7b09-118">Categories not intended for normal playback have low merit.</span></span>
3.  <span data-ttu-id="a7b09-119">Не указывайте \_ параметр MediaType None, медиасубтипе \_ None или GUID \_ null в сведениях о [**амовиесетуп \_ MEDIATYPE**](amoviesetup-mediatype.md) для ПИН-кода.</span><span class="sxs-lookup"><span data-stu-id="a7b09-119">Avoid specifying MEDIATYPE\_None, MEDIASUBTYPE\_None, or GUID\_NULL in the [**AMOVIESETUP\_MEDIATYPE**](amoviesetup-mediatype.md) information for a pin.</span></span> <span data-ttu-id="a7b09-120">**IFilterMapper2** обрабатывает их как подстановочные знаки, что может замедлять процесс построения графа.</span><span class="sxs-lookup"><span data-stu-id="a7b09-120">**IFilterMapper2** treats these as wildcards, which can slow the graph-building process.</span></span>
4.  <span data-ttu-id="a7b09-121">Выберите наименьшее возможное значение.</span><span class="sxs-lookup"><span data-stu-id="a7b09-121">Choose the lowest merit value possible.</span></span> <span data-ttu-id="a7b09-122">Ниже приведены некоторые рекомендации.</span><span class="sxs-lookup"><span data-stu-id="a7b09-122">Here are some guidelines:</span></span>

    | <span data-ttu-id="a7b09-123">Тип фильтра</span><span class="sxs-lookup"><span data-stu-id="a7b09-123">Type of filter</span></span>                                                                                       | <span data-ttu-id="a7b09-124">Рекомендуемый успешный</span><span class="sxs-lookup"><span data-stu-id="a7b09-124">Recommended merit</span></span>                                                                                   |
    |------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="a7b09-125">Модуль подготовки отчетов по умолчанию</span><span class="sxs-lookup"><span data-stu-id="a7b09-125">Default renderer</span></span>                                                                                     | <span data-ttu-id="a7b09-126">у вас нет \_ предпочтений.</span><span class="sxs-lookup"><span data-stu-id="a7b09-126">MERIT\_PREFERRED.</span></span> <span data-ttu-id="a7b09-127">Однако для стандартных типов носителей пользовательский модуль подготовки отчетов никогда не должен быть значением по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a7b09-127">For standard media types, however, a custom renderer should never be the default.</span></span> |
    | <span data-ttu-id="a7b09-128">Модуль подготовки отчетов не по умолчанию</span><span class="sxs-lookup"><span data-stu-id="a7b09-128">Non-default renderer</span></span>                                                                                 | <span data-ttu-id="a7b09-129">\_ \_ Недоступность не \_ используется или \_ маловероятно</span><span class="sxs-lookup"><span data-stu-id="a7b09-129">MERIT\_DO\_NOT\_USE or MERIT\_UNLIKELY</span></span>                                                              |
    | <span data-ttu-id="a7b09-130">Мультиплексирован</span><span class="sxs-lookup"><span data-stu-id="a7b09-130">Mux</span></span>                                                                                                  | <span data-ttu-id="a7b09-131">\_ \_ не \_ использовать</span><span class="sxs-lookup"><span data-stu-id="a7b09-131">MERIT\_DO\_NOT\_USE</span></span>                                                                                 |
    | <span data-ttu-id="a7b09-132">Показан</span><span class="sxs-lookup"><span data-stu-id="a7b09-132">Decoder</span></span>                                                                                              | <span data-ttu-id="a7b09-133">неуспешный \_ режим</span><span class="sxs-lookup"><span data-stu-id="a7b09-133">MERIT\_NORMAL</span></span>                                                                                       |
    | <span data-ttu-id="a7b09-134">Спиттер, средство синтаксического анализа</span><span class="sxs-lookup"><span data-stu-id="a7b09-134">Spitter, parser</span></span>                                                                                      | <span data-ttu-id="a7b09-135">С \_ нормальным или с низким уровнем</span><span class="sxs-lookup"><span data-stu-id="a7b09-135">MERIT\_NORMAL or lower</span></span>                                                                              |
    | <span data-ttu-id="a7b09-136">Фильтр специального назначения; любой фильтр, созданный непосредственно приложением</span><span class="sxs-lookup"><span data-stu-id="a7b09-136">Special purpose filter; any filter that is created directly by the application</span></span>                       | <span data-ttu-id="a7b09-137">\_ \_ не \_ использовать</span><span class="sxs-lookup"><span data-stu-id="a7b09-137">MERIT\_DO\_NOT\_USE</span></span>                                                                                 |
    | <span data-ttu-id="a7b09-138">Сбор</span><span class="sxs-lookup"><span data-stu-id="a7b09-138">Capture</span></span>                                                                                              | <span data-ttu-id="a7b09-139">\_ \_ не \_ использовать</span><span class="sxs-lookup"><span data-stu-id="a7b09-139">MERIT\_DO\_NOT\_USE</span></span>                                                                                 |
    | <span data-ttu-id="a7b09-140">"Резервный" фильтр; Например, [фильтр преобразователя цветового пространства](color-space-converter-filter.md)</span><span class="sxs-lookup"><span data-stu-id="a7b09-140">"Fallback" filter; for example, the [Color Space Converter Filter](color-space-converter-filter.md)</span></span> | <span data-ttu-id="a7b09-141">\_маловероятно</span><span class="sxs-lookup"><span data-stu-id="a7b09-141">MERIT\_UNLIKELY</span></span>                                                                                     |

    

     

    <span data-ttu-id="a7b09-142">Если вы указываете, что не стоит использовать фильтр \_ \_ \_ , подумайте, нужно ли регистрировать эти сведения в первую очередь.</span><span class="sxs-lookup"><span data-stu-id="a7b09-142">If you are giving a filter a merit of MERIT\_DO\_NOT\_USE, consider whether you need to register this information in the first place.</span></span> <span data-ttu-id="a7b09-143">(См. элемент 1.)</span><span class="sxs-lookup"><span data-stu-id="a7b09-143">(See item 1.)</span></span>

5.  <span data-ttu-id="a7b09-144">Не регистрируйте фильтр в категории "фильтры DirectShow", которая принимает 24-битный RGB.</span><span class="sxs-lookup"><span data-stu-id="a7b09-144">Do not register a filter in the "DirectShow Filters" category that accepts 24-bit RGB.</span></span> <span data-ttu-id="a7b09-145">Фильтр повлияет на фильтр преобразователя цветового пространства.</span><span class="sxs-lookup"><span data-stu-id="a7b09-145">Your filter will interfere with the Color Space Converter filter.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a7b09-146">См. также</span><span class="sxs-lookup"><span data-stu-id="a7b09-146">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a7b09-147">Как зарегистрировать фильтры DirectShow</span><span class="sxs-lookup"><span data-stu-id="a7b09-147">How to Register DirectShow Filters</span></span>](how-to-register-directshow-filters.md)
</dt> </dl>

 

 



