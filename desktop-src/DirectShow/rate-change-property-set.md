---
description: Набор свойств изменения скорости позволяет фильтрам источников и синтаксических анализаторов MPEG-2 изменять скорость воспроизведения. Для этого набора свойств должны поддерживаться декодеры MPEG-2. Для управления скоростью воспроизведения DVD-навигатор и механизм буфера потока используют это свойство.
ms.assetid: f88c64ce-af76-49fe-8ebd-029928506243
title: Набор свойств изменения скорости (Двдмедиа. h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 5eb222f8a2fe388d8ea582448d2ba5aa6c9d7e80
ms.sourcegitcommit: 63753fcfb0afbbe5ec283fb8316e62c2dc950f66
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2021
ms.locfileid: "107909612"
---
# <a name="rate-change-property-set"></a><span data-ttu-id="08d8a-105">Набор свойств изменения скорости</span><span class="sxs-lookup"><span data-stu-id="08d8a-105">Rate Change Property Set</span></span>

<span data-ttu-id="08d8a-106">Набор свойств изменения скорости позволяет фильтрам источников и синтаксических анализаторов MPEG-2 изменять скорость воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="08d8a-106">The Rate Change property set enables MPEG-2 source/parser filters to change the playback rate.</span></span> <span data-ttu-id="08d8a-107">Для этого набора свойств должны поддерживаться декодеры MPEG-2.</span><span class="sxs-lookup"><span data-stu-id="08d8a-107">MPEG-2 decoders should support this property set.</span></span> <span data-ttu-id="08d8a-108">Для управления скоростью воспроизведения DVD-навигатор и механизм буфера потока используют это свойство.</span><span class="sxs-lookup"><span data-stu-id="08d8a-108">The DVD Navigator and the Stream Buffer Engine both use this property set to control playback rates.</span></span>



| <span data-ttu-id="08d8a-109">Метка</span><span class="sxs-lookup"><span data-stu-id="08d8a-109">Label</span></span> | <span data-ttu-id="08d8a-110">Значение</span><span class="sxs-lookup"><span data-stu-id="08d8a-110">Value</span></span> |
|-------------------|-------------------------------|
| <span data-ttu-id="08d8a-111">Идентификатор GUID набора свойств</span><span class="sxs-lookup"><span data-stu-id="08d8a-111">Property Set GUID</span></span> | <span data-ttu-id="08d8a-112">\_Кспропсетид \_ тсратечанже</span><span class="sxs-lookup"><span data-stu-id="08d8a-112">AM\_KSPROPSETID\_TSRateChange</span></span> |



 



| <span data-ttu-id="08d8a-113">Идентификатор свойства</span><span class="sxs-lookup"><span data-stu-id="08d8a-113">Property ID</span></span>                                                                   | <span data-ttu-id="08d8a-114">Описание</span><span class="sxs-lookup"><span data-stu-id="08d8a-114">Description</span></span>                                                                            |
|-------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|
| [<span data-ttu-id="08d8a-115">**\_Ставка \_ корректтс**</span><span class="sxs-lookup"><span data-stu-id="08d8a-115">**AM\_RATE\_CorrectTS**</span></span>](am-rate-correctts-property.md)                     | <span data-ttu-id="08d8a-116">Информирует декодер о том, что навигатор устанавливает правильные метки времени.</span><span class="sxs-lookup"><span data-stu-id="08d8a-116">Informs the decoder that the Navigator is setting the correct time stamps.</span></span>             |
| <span data-ttu-id="08d8a-117">\_Ставка \_ ексактратечанже</span><span class="sxs-lookup"><span data-stu-id="08d8a-117">AM\_RATE\_ExactRateChange</span></span>                                                     | <span data-ttu-id="08d8a-118">Является устаревшей.</span><span class="sxs-lookup"><span data-stu-id="08d8a-118">Obsolete.</span></span>                                                                              |
| [<span data-ttu-id="08d8a-119">**\_Ставка \_ максфуллдатарате**</span><span class="sxs-lookup"><span data-stu-id="08d8a-119">**AM\_RATE\_MaxFullDataRate**</span></span>](am-rate-maxfulldatarate-property.md)         | <span data-ttu-id="08d8a-120">Запрашивает у декодера максимальную скорость передачи данных декодера.</span><span class="sxs-lookup"><span data-stu-id="08d8a-120">Queries the decoder for the decoder's maximum data rate.</span></span>                               |
| [<span data-ttu-id="08d8a-121">**\_Ставка \_ куерифуллфрамерате**</span><span class="sxs-lookup"><span data-stu-id="08d8a-121">**AM\_RATE\_QueryFullFrameRate**</span></span>](am-rate-queryfullframerate-property.md)   | <span data-ttu-id="08d8a-122">Запрашивает декодер для максимальной частоты полных кадров декодера.</span><span class="sxs-lookup"><span data-stu-id="08d8a-122">Queries the decoder for the decoder's maximum full-frame rate.</span></span>                         |
| [<span data-ttu-id="08d8a-123">**\_Ставка \_ куериластратесегптс**</span><span class="sxs-lookup"><span data-stu-id="08d8a-123">**AM\_RATE\_QueryLastRateSegPTS**</span></span>](am-rate-querylastratesegpts-property.md) | <span data-ttu-id="08d8a-124">Запрашивает у декодера время начала сегмента ставки, который был задан последним.</span><span class="sxs-lookup"><span data-stu-id="08d8a-124">Queries the decoder for the start time of the rate segment that was set most recently.</span></span> |
| [<span data-ttu-id="08d8a-125">**\_Ставка \_ симплератечанже**</span><span class="sxs-lookup"><span data-stu-id="08d8a-125">**AM\_RATE\_SimpleRateChange**</span></span>](am-rate-simpleratechange-property.md)       | <span data-ttu-id="08d8a-126">Отправляет изменение скорости в декодер.</span><span class="sxs-lookup"><span data-stu-id="08d8a-126">Sends a rate change to the decoder.</span></span>                                                    |
| <span data-ttu-id="08d8a-127">\_Шаг по скорости \_</span><span class="sxs-lookup"><span data-stu-id="08d8a-127">AM\_RATE\_Step</span></span>                                                                | <span data-ttu-id="08d8a-128">Является устаревшей.</span><span class="sxs-lookup"><span data-stu-id="08d8a-128">Obsolete.</span></span> <span data-ttu-id="08d8a-129">См. раздел [набор свойств пошагового выполнения кадра](frame-stepping-property-set.md).</span><span class="sxs-lookup"><span data-stu-id="08d8a-129">See [Frame Stepping Property Set](frame-stepping-property-set.md).</span></span>          |
| [<span data-ttu-id="08d8a-130">**\_Ставка \_ усератеверсион**</span><span class="sxs-lookup"><span data-stu-id="08d8a-130">**AM\_RATE\_UseRateVersion**</span></span>](am-rate-userateversion-property.md)           | <span data-ttu-id="08d8a-131">Указывает, какую версию механизма изменения скорости использовать.</span><span class="sxs-lookup"><span data-stu-id="08d8a-131">Specifies which version of the rate change mechanism to use.</span></span>                           |



 

## <a name="remarks"></a><span data-ttu-id="08d8a-132">Комментарии</span><span class="sxs-lookup"><span data-stu-id="08d8a-132">Remarks</span></span>

<span data-ttu-id="08d8a-133">В контексте этого набора свойств Rate измеряет скорость, с которой отметки времени отменяются относительно эталонного времени.</span><span class="sxs-lookup"><span data-stu-id="08d8a-133">In the context of this property set, rate measures the rate at which time stamps advance relative to the reference clock.</span></span> <span data-ttu-id="08d8a-134">Оцените скорость воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="08d8a-134">Rate the inverse of playback speed.</span></span> <span data-ttu-id="08d8a-135">Например, если скорость воспроизведения составляет 2x, то метки времени должны увеличиваться в 1/2.</span><span class="sxs-lookup"><span data-stu-id="08d8a-135">For example, if the playback speed is 2x, the time stamps must increase at 1/2 the normal rate.</span></span> <span data-ttu-id="08d8a-136">Это преобразуется в более быструю скорость воспроизведения, так как образцы отображаются раньше, чем обычные.</span><span class="sxs-lookup"><span data-stu-id="08d8a-136">This translates to a faster playback speed, because samples are rendered earlier than normal.</span></span>

<span data-ttu-id="08d8a-137">Образцы отправляются в декодер со штампом времени, равным времени презентации по ставке 1x.</span><span class="sxs-lookup"><span data-stu-id="08d8a-137">Samples are sent to the decoder with a time stamp equal to the presentation time at 1x rate.</span></span> <span data-ttu-id="08d8a-138">Декодер должен масштабировать метки времени на выходных образцах до правильного времени презентации для текущей ставки.</span><span class="sxs-lookup"><span data-stu-id="08d8a-138">The decoder must scale the time stamps on the output samples to the correct presentation time for the current rate.</span></span> <span data-ttu-id="08d8a-139">Например, если ставка 1/2 (то есть скорость воспроизведения — 2x), декодер должен масштабировать отметки времени на 1/2.</span><span class="sxs-lookup"><span data-stu-id="08d8a-139">For example, if the rate is 1/2 (meaning the playback speed is 2x), the decoder must scale the time stamps by 1/2.</span></span> <span data-ttu-id="08d8a-140">Как правило, метки времени имеют только кадры.</span><span class="sxs-lookup"><span data-stu-id="08d8a-140">Generally, only I frames have time stamps.</span></span> <span data-ttu-id="08d8a-141">Декодеру необходимо интерполяцию меток времени для кадров B и P.</span><span class="sxs-lookup"><span data-stu-id="08d8a-141">The decoder must interpolate the time stamps for the B and P frames.</span></span> <span data-ttu-id="08d8a-142">Обратите внимание, что при обратном воспроизведении метки времени продолжают увеличиваться — отметки времени никогда не переходят назад.</span><span class="sxs-lookup"><span data-stu-id="08d8a-142">Note that during reverse playback, time stamps continue to increase — time stamps never go backward.</span></span>

<span data-ttu-id="08d8a-143">Определены две версии набора свойств изменения скорости: версия 1,0 и версия 1,1.</span><span class="sxs-lookup"><span data-stu-id="08d8a-143">Two versions of the Rate Change property set are defined, version 1.0 and version 1.1.</span></span> <span data-ttu-id="08d8a-144">Поведение по умолчанию предоставляется версией 1,0.</span><span class="sxs-lookup"><span data-stu-id="08d8a-144">The default behavior is given by version 1.0.</span></span> <span data-ttu-id="08d8a-145">Разработчикам декодера рекомендуется поддерживать версию 1,1, так как она обеспечивает более гладкую работу по воспроизведению.</span><span class="sxs-lookup"><span data-stu-id="08d8a-145">Decoder vendors are encouraged to support version 1.1, because it provides a smoother playback experience.</span></span> <span data-ttu-id="08d8a-146">В настоящее время Навигатор DVD использует версию 1,0.</span><span class="sxs-lookup"><span data-stu-id="08d8a-146">The DVD Navigator currently uses version 1.0.</span></span> <span data-ttu-id="08d8a-147">Обработчик буфера потока использует версию 1,1.</span><span class="sxs-lookup"><span data-stu-id="08d8a-147">The Stream Buffer Engine uses version 1.1.</span></span>

### <a name="rate-change-version-10"></a><span data-ttu-id="08d8a-148">Частота изменения, версия 1,0</span><span class="sxs-lookup"><span data-stu-id="08d8a-148">Rate Change Version 1.0</span></span>

<span data-ttu-id="08d8a-149">Версия 1,0 набора свойств частота изменения определяет поведение по умолчанию для декодеров MPEG-2.</span><span class="sxs-lookup"><span data-stu-id="08d8a-149">Version 1.0 of the Rate Change property set defines the default behavior for MPEG-2 decoders.</span></span>

<span data-ttu-id="08d8a-150">Фильтр источника сигнализирует об изменении скорости, задав свойство [**\_ \_ симплератечанже Rate**](am-rate-simpleratechange-property.md) .</span><span class="sxs-lookup"><span data-stu-id="08d8a-150">The source filter signals a rate change by setting the [**AM\_RATE\_SimpleRateChange**](am-rate-simpleratechange-property.md) property.</span></span> <span data-ttu-id="08d8a-151">Данные для этого свойства — это новая частота, а также время начала входного примера, когда скорость вступает в силу.</span><span class="sxs-lookup"><span data-stu-id="08d8a-151">The data for this property is the new rate, plus the start time on the input sample when the rate takes effect.</span></span> <span data-ttu-id="08d8a-152">Декодер поддерживает очередь изменений частоты ожидания, отсортированных по времени начала.</span><span class="sxs-lookup"><span data-stu-id="08d8a-152">The decoder maintains a queue of pending rate changes, sorted by start time.</span></span>

<span data-ttu-id="08d8a-153">Прежде чем переход на DVD-диск изменится на скорость, отличный от 1x, он доставляет все ожидающие выборки, временно устанавливает частоту в 1,0 и очищает диаграмму.</span><span class="sxs-lookup"><span data-stu-id="08d8a-153">Before the DVD Navigator changes to a non-1x speed, it delivers all pending samples, temporarily sets the rate to 1.0, and flushes the graph.</span></span> <span data-ttu-id="08d8a-154">Затем задается новая частота.</span><span class="sxs-lookup"><span data-stu-id="08d8a-154">Then it sets the new rate.</span></span> <span data-ttu-id="08d8a-155">Все изменения частоты планируются в конце текущего ВОБУ (единица объекта Video).</span><span class="sxs-lookup"><span data-stu-id="08d8a-155">All rate changes are scheduled for the end of the current VOBU (video object unit).</span></span> <span data-ttu-id="08d8a-156">Обратите внимание, что при сбросе графа время презентации сбрасывается до нуля.</span><span class="sxs-lookup"><span data-stu-id="08d8a-156">Note that flushing the graph resets the presentation time to zero.</span></span>

<span data-ttu-id="08d8a-157">DVD-навигатор работает в режиме « *гладкий* » или « *Сканировать*».</span><span class="sxs-lookup"><span data-stu-id="08d8a-157">The DVD Navigator operates either in *smooth mode* or in *scan mode*.</span></span> <span data-ttu-id="08d8a-158">В режиме сглаживания каждый кадр отправляется в декодер, включая фреймы B и кадры P.</span><span class="sxs-lookup"><span data-stu-id="08d8a-158">In smooth mode, it sends every frame to the decoder, including B frames and P frames.</span></span> <span data-ttu-id="08d8a-159">Навигатор DVD использует режим сглаживания, когда скорость воспроизведения больше нуля, но меньше, чем скорость передачи данных максимальный предел неудачных декодера.</span><span class="sxs-lookup"><span data-stu-id="08d8a-159">The DVD Navigator uses smooth mode whenever playback speed is greater than zero but less than the decoder's maxmimum data rate.</span></span> <span data-ttu-id="08d8a-160">Если скорость воспроизведения меньше нуля (обратная воспроизведение) или превышает максимальную скорость передачи данных декодера, то Навигатор DVD использует режим сканирования, где он отправляет только кадры I в декодер.</span><span class="sxs-lookup"><span data-stu-id="08d8a-160">If playback speed is less than zero (reverse playback), or exceeds the decoder's maximum data rate, the DVD Navigator uses scan mode, where it sends just the I frames to the decoder.</span></span> <span data-ttu-id="08d8a-161">При очень высоких скоростях он может пропустить некоторые кадры I. Например, он может отправить все остальные кадры I.</span><span class="sxs-lookup"><span data-stu-id="08d8a-161">At very high speeds, it may skip some I frames; for example, it may send every other I frame.</span></span>

<span data-ttu-id="08d8a-162">По умолчанию Навигатор DVD выключает аудиопоток, не превышающий 1,0.</span><span class="sxs-lookup"><span data-stu-id="08d8a-162">By default, the DVD Navigator mutes the audio stream for rates other than 1.0.</span></span> <span data-ttu-id="08d8a-163">Это можно изменить, вызвав [**IDvdControl2:: SetOption**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-setoption) с \_ флагом DVD аудиодурингффвдрев.</span><span class="sxs-lookup"><span data-stu-id="08d8a-163">You can change this by calling [**IDvdControl2::SetOption**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-setoption) with the DVD\_AudioDuringFFwdRew flag.</span></span>

### <a name="rate-change-version-11"></a><span data-ttu-id="08d8a-164">Частота изменения, версия 1,1</span><span class="sxs-lookup"><span data-stu-id="08d8a-164">Rate Change Version 1.1</span></span>

<span data-ttu-id="08d8a-165">Значение свойства частота изменения в версии 1,1 следует тем же основным принципам, что и версия 1,0, со следующими отличиями.</span><span class="sxs-lookup"><span data-stu-id="08d8a-165">Version 1.1 of the Rate Change property set follows the same basic principles as version 1.0, with the following differences:</span></span>

-   <span data-ttu-id="08d8a-166">Фильтр источника сигнализирует декодеру использовать версию 1,1, задав свойство [**\_ \_ усератеверсион Rate**](am-rate-userateversion-property.md) .</span><span class="sxs-lookup"><span data-stu-id="08d8a-166">The source filter signals the decoder to use version 1.1 by setting the [**AM\_RATE\_UseRateVersion**](am-rate-userateversion-property.md) property.</span></span> <span data-ttu-id="08d8a-167">В противном случае декодер должен использовать поведение версии 1,0.</span><span class="sxs-lookup"><span data-stu-id="08d8a-167">Otherwise, the decoder should use the version 1.0 behavior.</span></span>
-   <span data-ttu-id="08d8a-168">Фильтр источника не очищает граф между изменениями скорости.</span><span class="sxs-lookup"><span data-stu-id="08d8a-168">The source filter does not flush the graph between rate changes.</span></span> <span data-ttu-id="08d8a-169">Таким образом, метки времени увеличиваются монотонно на границах изменения скорости, а не в ноль.</span><span class="sxs-lookup"><span data-stu-id="08d8a-169">Time stamps therefore increase monotonically across rate change boundaries, rather than resetting to zero.</span></span>
-   <span data-ttu-id="08d8a-170">Вместо того чтобы ставить в очередь изменение частоты для определенного времени ссылки, фильтр источника может указать, что изменение скорости применяется к *примеру наиболее прямого примера* декодера, определенному в качестве образца в заголовке исходящей очереди декодера.</span><span class="sxs-lookup"><span data-stu-id="08d8a-170">Instead of queuing a rate change for a particular reference time, the source filter can specify that a rate change applies to the decoder's *most forward sample*, defined as the sample at the head of the decoder's outgoing queue.</span></span> <span data-ttu-id="08d8a-171">Для этого фильтр источника использует свойство [**\_ \_ симплератечанже Rate**](am-rate-simpleratechange-property.md) , но устанавливает время начала равное-1.</span><span class="sxs-lookup"><span data-stu-id="08d8a-171">To do so, the source filter uses the [**AM\_RATE\_SimpleRateChange**](am-rate-simpleratechange-property.md) property but sets the start time equal to -1.</span></span>
-   <span data-ttu-id="08d8a-172">Фильтр источника может запросить у декодера время начала изменения скорости, которое было поставлено в очередь недавно.</span><span class="sxs-lookup"><span data-stu-id="08d8a-172">The source filter can query the decoder for the start time of the rate change that was queued most recently.</span></span> <span data-ttu-id="08d8a-173">Для этой цели используется свойство [**\_ \_ куериластратесегптс Rate**](am-rate-querylastratesegpts-property.md) .</span><span class="sxs-lookup"><span data-stu-id="08d8a-173">It uses the [**AM\_RATE\_QueryLastRateSegPTS**](am-rate-querylastratesegpts-property.md) property for this purpose.</span></span>
-   <span data-ttu-id="08d8a-174">Фильтр источника не удаляет образцы.</span><span class="sxs-lookup"><span data-stu-id="08d8a-174">The source filter does not drop samples.</span></span> <span data-ttu-id="08d8a-175">Если скорость превышает максимальную скорость передачи данных декодера, декодер должен при необходимости удалить кадры.</span><span class="sxs-lookup"><span data-stu-id="08d8a-175">If the rate exceeds the decoder's maximum data rate, the decoder should drop frames as necessary.</span></span>
-   <span data-ttu-id="08d8a-176">Фильтр источника не выключает звуковой поток, независимо от максимальной скорости передачи данных в видеодекодере.</span><span class="sxs-lookup"><span data-stu-id="08d8a-176">The source filter does not mute the audio stream, regardless of the audio decoder's maximum data rate.</span></span> <span data-ttu-id="08d8a-177">Звуковой декодер может удалить образцы, если скорость воспроизведения превышает максимальную скорость декодера.</span><span class="sxs-lookup"><span data-stu-id="08d8a-177">The audio decoder can drop samples if the playback speed exceeds the decoder's maximum rate.</span></span> <span data-ttu-id="08d8a-178">Однако он по-прежнему должен поддерживать очередь запланированных изменений.</span><span class="sxs-lookup"><span data-stu-id="08d8a-178">However, it should still maintain the queue of scheduled rate changes.</span></span>

## <a name="requirements"></a><span data-ttu-id="08d8a-179">Requirements (Требования)</span><span class="sxs-lookup"><span data-stu-id="08d8a-179">Requirements</span></span>



| <span data-ttu-id="08d8a-180">Требование</span><span class="sxs-lookup"><span data-stu-id="08d8a-180">Requirement</span></span> | <span data-ttu-id="08d8a-181">Значение</span><span class="sxs-lookup"><span data-stu-id="08d8a-181">Value</span></span> |
|-------------------|---------------------------------------------------------------------------------------|
| <span data-ttu-id="08d8a-182">Заголовок</span><span class="sxs-lookup"><span data-stu-id="08d8a-182">Header</span></span><br/> | <dl> <span data-ttu-id="08d8a-183"><dt>Двдмедиа. h</dt></span><span class="sxs-lookup"><span data-stu-id="08d8a-183"><dt>Dvdmedia.h</dt></span></span> </dl> |



## <a name="see-also"></a><span data-ttu-id="08d8a-184">См. также</span><span class="sxs-lookup"><span data-stu-id="08d8a-184">See also</span></span>

<dl> <dt>

[<span data-ttu-id="08d8a-185">Наборы свойств</span><span class="sxs-lookup"><span data-stu-id="08d8a-185">Property Sets</span></span>](property-sets.md)
</dt> </dl>

 

 




