---
description: Класс Ккмдкуеуе является базовым классом, предоставляющим очередь объектов Кдеферредкомманд и функций-членов для добавления, удаления, проверки состояния и вызова команд в очереди.
ms.assetid: 6bd0f0f3-3c56-47d2-9fd8-e2863a2afa33
title: Класс Ккмдкуеуе
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CCmdQueue
api_type:
- COM
api_location: ''
ms.openlocfilehash: 78af7a975d54ba832bbdf1fb7f8027f87b747660
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104139495"
---
# <a name="ccmdqueue-class"></a><span data-ttu-id="750c1-103">Класс Ккмдкуеуе</span><span class="sxs-lookup"><span data-stu-id="750c1-103">CCmdQueue class</span></span>

<span data-ttu-id="750c1-104">`CCmdQueue`Класс является базовым классом, предоставляющим очередь объектов [**кдеферредкомманд**](cdeferredcommand.md) и функций-членов для добавления, удаления, проверки состояния и вызова команд в очереди.</span><span class="sxs-lookup"><span data-stu-id="750c1-104">The `CCmdQueue` class is a base class that provides a queue of [**CDeferredCommand**](cdeferredcommand.md) objects and member functions to add, remove, check status, and invoke the queued commands.</span></span> <span data-ttu-id="750c1-105">`CCmdQueue`Объект является частью объекта, реализующего методы [**икуеуекомманд**](/windows/desktop/api/Control/nn-control-iqueuecommand) .</span><span class="sxs-lookup"><span data-stu-id="750c1-105">A `CCmdQueue` object is a part of an object that implements [**IQueueCommand**](/windows/desktop/api/Control/nn-control-iqueuecommand) methods.</span></span> <span data-ttu-id="750c1-106">Диспетчер графов фильтров реализует методы **икуеуекомманд** , чтобы приложения могли ставить команды в очередь на графе фильтра.</span><span class="sxs-lookup"><span data-stu-id="750c1-106">The filter graph manager implements **IQueueCommand** methods so that applications can queue commands to the filter graph.</span></span> <span data-ttu-id="750c1-107">Фильтры, реализующие интерфейс **икуеуекомманд** , непосредственно используют этот класс.</span><span class="sxs-lookup"><span data-stu-id="750c1-107">Filters that implement the **IQueueCommand** interface directly use this class.</span></span> <span data-ttu-id="750c1-108">Если вы хотите использовать объекты **кдеферредкомманд** , ваша очередь должна быть производной от этого класса.</span><span class="sxs-lookup"><span data-stu-id="750c1-108">If you want to use **CDeferredCommand** objects, your queue must be derived from this class.</span></span>

<span data-ttu-id="750c1-109">Существует два режима синхронизации: грубая и точная.</span><span class="sxs-lookup"><span data-stu-id="750c1-109">There are two modes of synchronization: coarse and accurate.</span></span> <span data-ttu-id="750c1-110">В грубом режиме приложение ожидает, пока не поступит указанное время, а затем не выполнит команду.</span><span class="sxs-lookup"><span data-stu-id="750c1-110">In coarse mode, the application waits until a specified time arrives and then executes the command.</span></span> <span data-ttu-id="750c1-111">В точном режиме приложение ожидает, пока не начнется обработка в образце, который отображается на момент времени, а затем выполняет команду.</span><span class="sxs-lookup"><span data-stu-id="750c1-111">In accurate mode, the application waits until processing begins on the sample that appears at the time, and then executes the command.</span></span> <span data-ttu-id="750c1-112">Фильтр определяет, какой из них будет реализовывать.</span><span class="sxs-lookup"><span data-stu-id="750c1-112">The filter determines which one it will implement.</span></span> <span data-ttu-id="750c1-113">Диспетчер графов фильтров всегда реализует грубый режим для команд, которые помещаются в очередь диспетчера графа фильтров.</span><span class="sxs-lookup"><span data-stu-id="750c1-113">The filter graph manager always implements coarse mode for commands that are queued at the filter graph manager.</span></span>

<span data-ttu-id="750c1-114">Если требуется грубая синхронизация, возможно, потребуется подождать, пока не появится команда, а затем выполнить ее.</span><span class="sxs-lookup"><span data-stu-id="750c1-114">If you want coarse synchronization, you probably want to wait until there is a command due, and then execute it.</span></span> <span data-ttu-id="750c1-115">Это можно сделать, вызвав [**ккмдкуеуе:: жетдуекомманд**](ccmdqueue-getduecommand.md).</span><span class="sxs-lookup"><span data-stu-id="750c1-115">You can do this by calling [**CCmdQueue::GetDueCommand**](ccmdqueue-getduecommand.md).</span></span> <span data-ttu-id="750c1-116">Если у вас есть несколько вещей, которые нужно ожидать, получите дескриптор события от [**ккмдкуеуе:: жетдуехандле**](ccmdqueue-getduehandle.md) , а затем вызовите **Ккмдкуеуе:: жетдуекомманд** , когда это сигнальное сообщение.</span><span class="sxs-lookup"><span data-stu-id="750c1-116">If you have several things to wait for, get the event handle from [**CCmdQueue::GetDueHandle**](ccmdqueue-getduehandle.md) and then call **CCmdQueue::GetDueCommand** when this is signaled.</span></span> <span data-ttu-id="750c1-117">[**время потока**](stream-time.md) будет перемещаться только между вызовами функций членов [**Ккмдкуеуе:: Run**](ccmdqueue-run.md) и [**ккмдкуеуе:: ендрун**](ccmdqueue-endrun.md) .</span><span class="sxs-lookup"><span data-stu-id="750c1-117">[**stream time**](stream-time.md) will advance only between calls to the [**CCmdQueue::Run**](ccmdqueue-run.md) and [**CCmdQueue::EndRun**](ccmdqueue-endrun.md) member functions.</span></span> <span data-ttu-id="750c1-118">Нет никакой гарантии, что если этот маркер задан, команда будет готова.</span><span class="sxs-lookup"><span data-stu-id="750c1-118">There is no guarantee that if the handle is set, there will be a command ready.</span></span> <span data-ttu-id="750c1-119">Каждый раз, когда событие получает сигнал, вызовите функцию-член **жетдуекомманд** (возможно, с нулевым временем ожидания); Это может вернуть электронное \_ прерывание, если команда не готова.</span><span class="sxs-lookup"><span data-stu-id="750c1-119">Each time the event is signaled, call the **GetDueCommand** member function (probably with a time-out of zero); this can return E\_ABORT if no command is ready.</span></span>

<span data-ttu-id="750c1-120">Если требуется точная синхронизация, вызовите функцию-член [**ккмдкуеуе:: жеткомманддуефор**](ccmdqueue-getcommandduefor.md) и передайте примеры, которые вы собираетесь обработать в качестве параметра.</span><span class="sxs-lookup"><span data-stu-id="750c1-120">If you want accurate synchronization, call the [**CCmdQueue::GetCommandDueFor**](ccmdqueue-getcommandduefor.md) member function and pass the samples you are about to process as a parameter.</span></span> <span data-ttu-id="750c1-121">Он возвращает следующее:</span><span class="sxs-lookup"><span data-stu-id="750c1-121">This returns the following:</span></span>

-   <span data-ttu-id="750c1-122">Команда времени выполнения из-за или до этого времени потока.</span><span class="sxs-lookup"><span data-stu-id="750c1-122">A stream-time command due at or before that stream time.</span></span>
-   <span data-ttu-id="750c1-123">Команда времени презентации, обусловленная или до представления времени потока.</span><span class="sxs-lookup"><span data-stu-id="750c1-123">A presentation-time command due at or before the presentation of the stream time.</span></span> <span data-ttu-id="750c1-124">Сделайте это только между функциями-членами [**ккмдкуеуе:: Run**](ccmdqueue-run.md) и [**Ккмдкуеуе:: ендрун**](ccmdqueue-endrun.md) , так как за пределами этого не известно, что сопоставление потокового времени со временем представления неизвестно.</span><span class="sxs-lookup"><span data-stu-id="750c1-124">Do this only between the [**CCmdQueue::Run**](ccmdqueue-run.md) and [**CCmdQueue::EndRun**](ccmdqueue-endrun.md) member functions, because outside of this, the mapping from stream time to presentation time is not known.</span></span>
-   <span data-ttu-id="750c1-125">Любая команда во время презентации.</span><span class="sxs-lookup"><span data-stu-id="750c1-125">Any presentation-time command due now.</span></span>

<span data-ttu-id="750c1-126">Если требуется точная синхронизация для образцов, которые могут быть обработаны во время приостановленного режима, необходимо использовать команды времени потока.</span><span class="sxs-lookup"><span data-stu-id="750c1-126">If you want accurate synchronization for samples that might be processed during paused mode, you must use stream-time commands.</span></span>

<span data-ttu-id="750c1-127">Во всех случаях команды остаются в очереди до вызова или отмены.</span><span class="sxs-lookup"><span data-stu-id="750c1-127">In all cases, commands remain queued until called or canceled.</span></span> <span data-ttu-id="750c1-128">Настройка и сброс обработчика событий полностью управляются этим объектом очереди.</span><span class="sxs-lookup"><span data-stu-id="750c1-128">The setting and resetting of the event handle is managed entirely by this queue object.</span></span>



| <span data-ttu-id="750c1-129">Защищенные члены данных</span><span class="sxs-lookup"><span data-stu-id="750c1-129">Protected Data Members</span></span>                                 | <span data-ttu-id="750c1-130">Описание</span><span class="sxs-lookup"><span data-stu-id="750c1-130">Description</span></span>                                                                                            |
|--------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="750c1-131">m \_ бруннинг</span><span class="sxs-lookup"><span data-stu-id="750c1-131">m\_bRunning</span></span>                                            | <span data-ttu-id="750c1-132">Флаг для состояния выполнения; Задайте **значение true** при запуске.</span><span class="sxs-lookup"><span data-stu-id="750c1-132">Flag for running state; set **TRUE** when running.</span></span>                                                     |
| <span data-ttu-id="750c1-133">m \_ двадвисе</span><span class="sxs-lookup"><span data-stu-id="750c1-133">m\_dwAdvise</span></span>                                            | <span data-ttu-id="750c1-134">Порекомендовать идентификатор из ссылочного времени (ноль, если нет необработанных уведомлений).</span><span class="sxs-lookup"><span data-stu-id="750c1-134">Advise identifier from the reference clock (zero if no outstanding advise).</span></span>                            |
| <span data-ttu-id="750c1-135">m \_ евдуе</span><span class="sxs-lookup"><span data-stu-id="750c1-135">m\_evDue</span></span>                                               | <span data-ttu-id="750c1-136">Задает время, когда должны быть вызваны какие-либо команды.</span><span class="sxs-lookup"><span data-stu-id="750c1-136">Sets the time when any commands are due.</span></span>                                                               |
| <span data-ttu-id="750c1-137">m \_ листпресентатион</span><span class="sxs-lookup"><span data-stu-id="750c1-137">m\_listPresentation</span></span>                                    | <span data-ttu-id="750c1-138">Хранит команды в очереди во время презентации.</span><span class="sxs-lookup"><span data-stu-id="750c1-138">Stores commands queued in presentation time.</span></span>                                                           |
| <span data-ttu-id="750c1-139">m \_ листстреам</span><span class="sxs-lookup"><span data-stu-id="750c1-139">m\_listStream</span></span>                                          | <span data-ttu-id="750c1-140">Хранит команды, помещенные в очередь во время потока.</span><span class="sxs-lookup"><span data-stu-id="750c1-140">Stores commands queued in stream time.</span></span>                                                                 |
| <span data-ttu-id="750c1-141">\_Блокировка m</span><span class="sxs-lookup"><span data-stu-id="750c1-141">m\_Lock</span></span>                                                | <span data-ttu-id="750c1-142">Обеспечивает защиту доступа к спискам.</span><span class="sxs-lookup"><span data-stu-id="750c1-142">Protects access to lists.</span></span>                                                                              |
| <span data-ttu-id="750c1-143">m \_ пклокк</span><span class="sxs-lookup"><span data-stu-id="750c1-143">m\_pClock</span></span>                                              | <span data-ttu-id="750c1-144">Текущее ссылочное время.</span><span class="sxs-lookup"><span data-stu-id="750c1-144">Current reference clock.</span></span>                                                                               |
| <span data-ttu-id="750c1-145">m \_ стреамтимеоффсет</span><span class="sxs-lookup"><span data-stu-id="750c1-145">m\_StreamTimeOffset</span></span>                                    | <span data-ttu-id="750c1-146">Содержит смещение времени потока, если значение **m \_ Бруннинг** равно **true**.</span><span class="sxs-lookup"><span data-stu-id="750c1-146">Contains the stream time offset when **m\_bRunning** is **TRUE**.</span></span>                                      |
| <span data-ttu-id="750c1-147">m \_ стреамтимеоффсет</span><span class="sxs-lookup"><span data-stu-id="750c1-147">m\_StreamTimeOffset</span></span>                                    | <span data-ttu-id="750c1-148">Содержит смещение времени потока, если значение **m \_ Бруннинг** равно **true**.</span><span class="sxs-lookup"><span data-stu-id="750c1-148">Contains the stream time offset when **m\_bRunning** is **TRUE**.</span></span>                                      |
| <span data-ttu-id="750c1-149">Функции элементов</span><span class="sxs-lookup"><span data-stu-id="750c1-149">Member Functions</span></span>                                       | <span data-ttu-id="750c1-150">Описание</span><span class="sxs-lookup"><span data-stu-id="750c1-150">Description</span></span>                                                                                            |
| [<span data-ttu-id="750c1-151">**ккмдкуеуе**</span><span class="sxs-lookup"><span data-stu-id="750c1-151">**CCmdQueue**</span></span>](ccmdqueue-ccmdqueue.md)               | <span data-ttu-id="750c1-152">Конструирует объект **ккмдкуеуе** .</span><span class="sxs-lookup"><span data-stu-id="750c1-152">Constructs a **CCmdQueue** object.</span></span>                                                                     |
| [<span data-ttu-id="750c1-153">**чекктиме**</span><span class="sxs-lookup"><span data-stu-id="750c1-153">**CheckTime**</span></span>](ccmdqueue-checktime.md)               | <span data-ttu-id="750c1-154">Определяет, вызвано ли заданное время.</span><span class="sxs-lookup"><span data-stu-id="750c1-154">Determines if a given time is due.</span></span>                                                                     |
| [<span data-ttu-id="750c1-155">**жетдуехандле**</span><span class="sxs-lookup"><span data-stu-id="750c1-155">**GetDueHandle**</span></span>](ccmdqueue-getduehandle.md)         | <span data-ttu-id="750c1-156">Извлекает дескриптор события, который будет сигнальным.</span><span class="sxs-lookup"><span data-stu-id="750c1-156">Retrieves the event handle that will be signaled.</span></span>                                                      |
| <span data-ttu-id="750c1-157">Переопределяемые функции элементов</span><span class="sxs-lookup"><span data-stu-id="750c1-157">Overridable Member Functions</span></span>                           | <span data-ttu-id="750c1-158">Описание</span><span class="sxs-lookup"><span data-stu-id="750c1-158">Description</span></span>                                                                                            |
| [<span data-ttu-id="750c1-159">**ендрун**</span><span class="sxs-lookup"><span data-stu-id="750c1-159">**EndRun**</span></span>](ccmdqueue-endrun.md)                     | <span data-ttu-id="750c1-160">Переключается в режим "остановлено" или "приостановлено".</span><span class="sxs-lookup"><span data-stu-id="750c1-160">Switches to stopped or paused mode.</span></span>                                                                    |
| [<span data-ttu-id="750c1-161">**жеткомманддуефор**</span><span class="sxs-lookup"><span data-stu-id="750c1-161">**GetCommandDueFor**</span></span>](ccmdqueue-getcommandduefor.md) | <span data-ttu-id="750c1-162">Извлекает отложенную команду, запланированную в указанное время.</span><span class="sxs-lookup"><span data-stu-id="750c1-162">Retrieves a deferred command that is scheduled at a specified time.</span></span>                                    |
| [<span data-ttu-id="750c1-163">**жетдуекомманд**</span><span class="sxs-lookup"><span data-stu-id="750c1-163">**GetDueCommand**</span></span>](ccmdqueue-getduecommand.md)       | <span data-ttu-id="750c1-164">Извлекает указатель на следующую команду из-за.</span><span class="sxs-lookup"><span data-stu-id="750c1-164">Retrieves a pointer to the next command that is due.</span></span>                                                   |
| [<span data-ttu-id="750c1-165">**Вставляет**</span><span class="sxs-lookup"><span data-stu-id="750c1-165">**Insert**</span></span>](ccmdqueue-insert.md)                     | <span data-ttu-id="750c1-166">Добавляет объект [**кдеферредкомманд**](cdeferredcommand.md) в очередь.</span><span class="sxs-lookup"><span data-stu-id="750c1-166">Adds the [**CDeferredCommand**](cdeferredcommand.md) object to the queue.</span></span>                             |
| [<span data-ttu-id="750c1-167">**Оператор new**</span><span class="sxs-lookup"><span data-stu-id="750c1-167">**New**</span></span>](ccmdqueue-new.md)                           | <span data-ttu-id="750c1-168">Инициализирует команду для выполнения и возвращает новый объект [**кдеферредкомманд**](cdeferredcommand.md) .</span><span class="sxs-lookup"><span data-stu-id="750c1-168">Initializes a command to be run and returns a new [**CDeferredCommand**](cdeferredcommand.md) object.</span></span> |
| [<span data-ttu-id="750c1-169">**Отменит**</span><span class="sxs-lookup"><span data-stu-id="750c1-169">**Remove**</span></span>](ccmdqueue-remove.md)                     | <span data-ttu-id="750c1-170">Удаляет объект [**кдеферредкомманд**](cdeferredcommand.md) из очереди.</span><span class="sxs-lookup"><span data-stu-id="750c1-170">Removes the [**CDeferredCommand**](cdeferredcommand.md) object from the queue.</span></span>                        |
| [<span data-ttu-id="750c1-171">**Выполнить**</span><span class="sxs-lookup"><span data-stu-id="750c1-171">**Run**</span></span>](ccmdqueue-run.md)                           | <span data-ttu-id="750c1-172">Переключается в режим выполнения.</span><span class="sxs-lookup"><span data-stu-id="750c1-172">Switches to running mode.</span></span>                                                                              |
| [<span data-ttu-id="750c1-173">**сетсинксаурце**</span><span class="sxs-lookup"><span data-stu-id="750c1-173">**SetSyncSource**</span></span>](ccmdqueue-setsyncsource.md)       | <span data-ttu-id="750c1-174">Задает часы, используемые для времени.</span><span class="sxs-lookup"><span data-stu-id="750c1-174">Sets the clock used for timing.</span></span>                                                                        |
| [<span data-ttu-id="750c1-175">**сеттимеадвисе**</span><span class="sxs-lookup"><span data-stu-id="750c1-175">**SetTimeAdvise**</span></span>](ccmdqueue-settimeadvise.md)       | <span data-ttu-id="750c1-176">Настраивает событие таймера со ссылочным временем.</span><span class="sxs-lookup"><span data-stu-id="750c1-176">Sets up a timer event with the reference clock.</span></span>                                                        |



 

 

 



