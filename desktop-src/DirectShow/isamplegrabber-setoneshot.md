---
description: Метод Сетонешот указывает, будет ли остановлен образец фильтра захвата после того, как фильтр получит пример.
ms.assetid: 7e3a3e8c-1834-425b-9657-279ab4451a2b
title: 'Метод Исамплеграббер:: Сетонешот (Кедит. h)'
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- ISampleGrabber.SetOneShot
api_type:
- COM
api_location:
- strmiids.lib
- strmiids.dll
ms.openlocfilehash: 7829bd57cb2d813f71e17a4925d6e5fab7cc34330041461b691e00eae6ca5cad
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117817685"
---
# <a name="isamplegrabbersetoneshot-method"></a>Метод Исамплеграббер:: Сетонешот

> [!Note]  
> \[Не рекомендуется. Этот API может быть удален из будущих выпусков Windows.\]

 

Метод **сетонешот** указывает, будет ли остановлен [**образец фильтра захвата**](sample-grabber-filter.md) после того, как фильтр получит пример.

## <a name="syntax"></a>Синтаксис


```C++
HRESULT SetOneShot(
   BOOL OneShot
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*онешот* 
</dt> <dd>

Логическое значение, указывающее, будет ли остановлен образец фильтра захвата после получения образца.



| Значение                                                                                                                                    | Значение                                                                                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
| <span id="TRUE"></span><span id="true"></span><dl> <dt>TRUE * * * *</dt> </dl>    | Пример захвата останавливается после первой выборки. <br/>                                                      |
| <span id="FALSE"></span><span id="false"></span><dl> <dt>FALSE * * * *</dt> </dl> | После первой выборки образец захвата продолжит обрабатывать образцы. Это поведение по умолчанию.<br/> |



 

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Если этот метод завершается успешно, возвращается значение **S \_ ОК**. В противном случае возвращается код ошибки **HRESULT** .

## <a name="remarks"></a>Remarks

Используйте этот метод, чтобы получить один пример из потока следующим образом:

1.  Вызовите **сетонешот** со значением **true**.
2.  При необходимости используйте интерфейс [**имедиасикинг**](/windows/desktop/api/Strmif/nn-strmif-imediaseeking) , чтобы перейти к положению в потоке.
3.  Вызовите [**имедиаконтрол:: Run**](/windows/desktop/api/Control/nf-control-imediacontrol-run) , чтобы запустить граф фильтра.
4.  Вызовите метод [**имедиаевент:: ваитфоркомплетион**](/windows/desktop/api/Control/nf-control-imediaevent-waitforcompletion) , чтобы дождаться остановки графа. Кроме того, можно вызвать [**имедиаевент:: четный**](/windows/desktop/api/Control/nf-control-imediaevent-getevent) , чтобы получить события графа, пока не появится событие [**\_ завершения EC**](ec-complete.md) .

После остановки захвата образца граф фильтра по-прежнему находится в состоянии выполняется. Чтобы получить другой пример, можно найти или приостановить граф.

> [!Note]  
> В более ранней версии документации указано, что граф фильтра останавливается после получения образца. Это неточно. Поток завершается, но граф остается в состоянии выполнения.

 

Образец захвата реализует Однофакторный режим, вызывая [**Ипин:: EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream) в подчиненном фильтре и возвращая \_ false из метода [**имеминпутпин:: Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive) .

> [!Note]  
> Файл заголовка Кедит. h несовместим с заголовками Direct3D позднее версии 7.

 

> [!Note]  
> чтобы получить кедит. h, скачайте [обновление Microsoft Windows SDK для Windows Vista и платформа .NET Framework 3,0](https://msdn.microsoft.com/windowsvista/bb980924.aspx). кедит. h недоступен в Microsoft Windows SDK для Windows 7 и платформа .NET Framework 3,5 с пакетом обновления 1 (sp1).

 

## <a name="requirements"></a>Требования



| Требование | Значение |
|--------------------|-----------------------------------------------------------------------------------------|
| Заголовок<br/>  | <dl> <dt>Кедит. h</dt> </dl>      |
| Библиотека<br/> | <dl> <dt>Стрмиидс. lib</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Использование образца захвата](using-the-sample-grabber.md)
</dt> <dt>

[**Интерфейс Исамплеграббер**](isamplegrabber.md)
</dt> </dl>

 

 




