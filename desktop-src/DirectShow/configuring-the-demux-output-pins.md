---
description: Настройка закрепления выходных данных демультиплексирование
ms.assetid: c53f3fe6-5588-4faf-ba5c-6a6cf7e16f3a
title: Настройка закрепления выходных данных демультиплексирование
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b56a24af3f49f26efe4ff6afad075a3cef61fcd1
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104140234"
---
# <a name="configuring-the-demux-output-pins"></a><span data-ttu-id="b9375-103">Настройка закрепления выходных данных демультиплексирование</span><span class="sxs-lookup"><span data-stu-id="b9375-103">Configuring the Demux Output Pins</span></span>

<span data-ttu-id="b9375-104">Когда MPEG-2 демультиплексирование получает пакет данных, он должен определить, какой ПИН-код должен анализироваться и доставлять данные.</span><span class="sxs-lookup"><span data-stu-id="b9375-104">When the MPEG-2 demux receives a packet of data, it must determine which output pin should parse and deliver the data.</span></span> <span data-ttu-id="b9375-105">В режиме потока программы демультиплексирование сопоставляет идентификаторы потоков с выходными контактами.</span><span class="sxs-lookup"><span data-stu-id="b9375-105">In program stream mode, the demux maps stream IDs to output pins.</span></span> <span data-ttu-id="b9375-106">В режиме транспортного потока он сопоставляет идентификаторы PID с выходными контактами.</span><span class="sxs-lookup"><span data-stu-id="b9375-106">In transport stream mode, it maps PIDs to output pins.</span></span> <span data-ttu-id="b9375-107">Например, в режиме транспортного потока, если PID 0x31 сопоставлен с закреплением 0, каждый пакет служб терминалов с этим номером PID направляется в выходной ПИН-код 0.</span><span class="sxs-lookup"><span data-stu-id="b9375-107">For example, in transport stream mode, if PID 0x31 is mapped to pin 0, then every TS packet with that PID number is routed to output pin 0.</span></span> <span data-ttu-id="b9375-108">Если демультиплексирование получает пакет, идентификатор потока или PID которого не сопоставлен ни с одним выходным ПИН-кодом, он просто удаляет пакет.</span><span class="sxs-lookup"><span data-stu-id="b9375-108">If the demux receives a packet whose stream ID or PID is not mapped to any output pin, it simply discards the packet.</span></span>

<span data-ttu-id="b9375-109">В режиме опроса демультиплексирование автоматически создает выходные сигналы для потоков аудио и видео в файле и сопоставляет идентификаторы потоков с контактами.</span><span class="sxs-lookup"><span data-stu-id="b9375-109">In pull mode, the demux automatically creates output pins for the audio and video streams in the file, and maps the stream IDs to the pins.</span></span>

<span data-ttu-id="b9375-110">В режиме принудительной отправки выходные контакты должны быть настроены приложением или другим фильтром.</span><span class="sxs-lookup"><span data-stu-id="b9375-110">In push mode, the output pins must be configured by the application or by another filter.</span></span> <span data-ttu-id="b9375-111">Для источников цифрового телевидения, использующих архитектуру драйвера вещания (BDA), фильтр поставщика сети работает с фильтром TIF для настройки демультиплексирование.</span><span class="sxs-lookup"><span data-stu-id="b9375-111">For digital television sources using the Broadcast Driver Architecture (BDA), the network provider filter works with the TIF filter to configure the demux.</span></span> <span data-ttu-id="b9375-112">Приложению не нужно ничего делать.</span><span class="sxs-lookup"><span data-stu-id="b9375-112">The application does not have to do anything.</span></span> <span data-ttu-id="b9375-113">В других сценариях приложение должно настроить контакты вывода.</span><span class="sxs-lookup"><span data-stu-id="b9375-113">In other scenarios, the application must configure the output pins.</span></span>

<span data-ttu-id="b9375-114">Демультиплексирование начинается без выходных закрепления.</span><span class="sxs-lookup"><span data-stu-id="b9375-114">The demux starts with no output pins.</span></span> <span data-ttu-id="b9375-115">Чтобы создать выходной ПИН-код, вызовите метод [**IMpeg2Demultiplexer:: креатеаутпутпин**](/windows/desktop/api/Strmif/nf-strmif-impeg2demultiplexer-createoutputpin) в фильтре.</span><span class="sxs-lookup"><span data-stu-id="b9375-115">To create an output pin, call the [**IMpeg2Demultiplexer::CreateOutputPin**](/windows/desktop/api/Strmif/nf-strmif-impeg2demultiplexer-createoutputpin) method on the filter.</span></span> <span data-ttu-id="b9375-116">Этот метод принимает тип мультимедиа и имя ПИН-кода и возвращает указатель **Ипин** .</span><span class="sxs-lookup"><span data-stu-id="b9375-116">This method takes a media type and a pin name, and returns an **IPin** pointer.</span></span> <span data-ttu-id="b9375-117">Тип мультимедиа используется, когда ПИН-код подключается к другому фильтру, как правило, декодер — пример [с использованием демультиплексирование с простейшими потоками](using-the-demux-with-elementary-streams.md).</span><span class="sxs-lookup"><span data-stu-id="b9375-117">The media type is used when the pin connects to another filter, typically a decoder—an example is given the section [Using the Demux with Elementary Streams](using-the-demux-with-elementary-streams.md).</span></span> <span data-ttu-id="b9375-118">Имя ПИН-кода может быть любым, за исключением того, что дублирующиеся имена ПИН-кодов не допускаются.</span><span class="sxs-lookup"><span data-stu-id="b9375-118">The pin name can be anything you like, except that duplicate pin names are not allowed.</span></span>

<span data-ttu-id="b9375-119">Затем назначьте один или несколько идентификаторов потоков или PID новому выходному ПИН-коду.</span><span class="sxs-lookup"><span data-stu-id="b9375-119">Next, assign one or more stream IDs or PIDs to the new output pin.</span></span> <span data-ttu-id="b9375-120">Для потоков программы запросите ПИН-код для **IMPEG2StreamIdMap** и вызовите [**IMPEG2StreamIdMap:: мапстреамид**](/windows/desktop/api/Strmif/nf-strmif-impeg2streamidmap-mapstreamid).</span><span class="sxs-lookup"><span data-stu-id="b9375-120">For program streams, query the pin for **IMPEG2StreamIdMap** and call [**IMPEG2StreamIdMap::MapStreamId**](/windows/desktop/api/Strmif/nf-strmif-impeg2streamidmap-mapstreamid).</span></span> <span data-ttu-id="b9375-121">Для транспортных потоков запросите ПИН-код для **IMPEG2PIDMap** и вызовите [**IMPEG2PIDMap:: маппид**](/previous-versions/windows/desktop/api/Bdaiface/nf-bdaiface-impeg2pidmap-mappid).</span><span class="sxs-lookup"><span data-stu-id="b9375-121">For transport streams, query the pin for **IMPEG2PIDMap** and call [**IMPEG2PIDMap::MapPID**](/previous-versions/windows/desktop/api/Bdaiface/nf-bdaiface-impeg2pidmap-mappid).</span></span>

<span data-ttu-id="b9375-122">Существует несколько способов, с помощью которых демультиплексирование может анализировать пакеты служб терминалов.</span><span class="sxs-lookup"><span data-stu-id="b9375-122">There are several ways that the demux can parse TS packets.</span></span> <span data-ttu-id="b9375-123">Для каждого выходного ПИН-кода метод анализа определяется параметром *медиасамплеконтент* для метода **маппид** .</span><span class="sxs-lookup"><span data-stu-id="b9375-123">For each output pin, the parsing method is determined by the *MediaSampleContent* parameter to the **MapPID** method.</span></span>



| <span data-ttu-id="b9375-124">Значение</span><span class="sxs-lookup"><span data-stu-id="b9375-124">Value</span></span>                     | <span data-ttu-id="b9375-125">Описание</span><span class="sxs-lookup"><span data-stu-id="b9375-125">Description</span></span>                                                                                                                                                                                                                                                                                                                                                        |
|---------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="b9375-126">\_простейший \_ поток мультимедиа</span><span class="sxs-lookup"><span data-stu-id="b9375-126">MEDIA\_ELEMENTARY\_STREAM</span></span> | <span data-ttu-id="b9375-127">Фильтр доставляет ПЕССИМИСТическую полезную нагрузку.</span><span class="sxs-lookup"><span data-stu-id="b9375-127">The filter delivers PES payloads.</span></span> <span data-ttu-id="b9375-128">В этом режиме фильтр депаккетизес PES пакеты, поэтому нисходящий фильтр получает байтовый поток ES без заголовков PES.</span><span class="sxs-lookup"><span data-stu-id="b9375-128">In this mode, the filter depacketizes the PES packets, so the downstream filter receives the ES byte stream, without the PES packet headers.</span></span> <span data-ttu-id="b9375-129">(Только для потоков аудио и видео.)</span><span class="sxs-lookup"><span data-stu-id="b9375-129">(Audio and video streams only.)</span></span>                                                                                                                                                     |
| <span data-ttu-id="b9375-130">MEDIA \_ MPEG2 \_ psi</span><span class="sxs-lookup"><span data-stu-id="b9375-130">MEDIA\_MPEG2\_PSI</span></span>         | <span data-ttu-id="b9375-131">Фильтр предоставляет полные разделы PSI, такие как таблицы PAT, таблицы ПЛТ, таблицы CAT и т. д.</span><span class="sxs-lookup"><span data-stu-id="b9375-131">The filter delivers complete PSI sections, such as PAT tables, PMT tables, CAT tables, and so forth.</span></span>                                                                                                                                                                                                                                                               |
| <span data-ttu-id="b9375-132">\_ \_ полезные данные транспорта носителей</span><span class="sxs-lookup"><span data-stu-id="b9375-132">MEDIA\_TRANSPORT\_PAYLOAD</span></span> | <span data-ttu-id="b9375-133">Фильтр извлекает полезные данные из пакетов служб терминалов и доставляет их без дальнейшего анализа.</span><span class="sxs-lookup"><span data-stu-id="b9375-133">The filter extracts the payloads from the TS packets and delivers them without further parsing.</span></span> <span data-ttu-id="b9375-134">Для простейших потоков это означает, что демультиплексирование будет доставлять все ПЕССИМИСТические пакеты, включая заголовки PES.</span><span class="sxs-lookup"><span data-stu-id="b9375-134">For elementary streams, this means the demux will deliver entire PES packets, including the PES packet headers.</span></span>                                                                                                                                                    |
| <span data-ttu-id="b9375-135">\_пакет транспорта \_ носителя</span><span class="sxs-lookup"><span data-stu-id="b9375-135">MEDIA\_TRANSPORT\_PACKET</span></span>  | <span data-ttu-id="b9375-136">Фильтр доставляет пакеты TS целиком.</span><span class="sxs-lookup"><span data-stu-id="b9375-136">The filter delivers entire TS packets.</span></span> <span data-ttu-id="b9375-137">Демультиплексирование направляет пакеты служб терминалов в соответствии с их идентификаторами процесса, но не просматривает или не обрабатывает пакеты иным образом.</span><span class="sxs-lookup"><span data-stu-id="b9375-137">The demux routes the TS packets according to their PIDs, but does not otherwise examine or process the packets.</span></span> <span data-ttu-id="b9375-138">Пакеты с ошибками не отфильтровываются. Демультиплексирование не выполняет повторное мультиплексирование пакетов, и результирующий поток вывода не является совместимым транспортным потоком MPEG-2.</span><span class="sxs-lookup"><span data-stu-id="b9375-138">Packets with errors are not filtered out. The demux does not re-multiplex the packets, and the resulting output stream is not a compliant MPEG-2 transport stream.</span></span> <span data-ttu-id="b9375-139">Этот режим называется *сквозным* режимом.</span><span class="sxs-lookup"><span data-stu-id="b9375-139">This mode is called *pass through* mode.</span></span> |



 

<span data-ttu-id="b9375-140">Для потоков программ демультиплексирование всегда доставляет PES.</span><span class="sxs-lookup"><span data-stu-id="b9375-140">For program streams, the demux always delivers PES payloads.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b9375-141">См. также</span><span class="sxs-lookup"><span data-stu-id="b9375-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b9375-142">Использование демультиплексора MPEG-2</span><span class="sxs-lookup"><span data-stu-id="b9375-142">Using the MPEG-2 Demultiplexer</span></span>](using-the-mpeg-2-demultiplexer.md)
</dt> </dl>

 

 



