---
description: Диспетчер видеопортов
ms.assetid: d70558a5-9820-432a-b4f3-ccf7bb2a34d5
title: Диспетчер видеопортов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: db4f030e6be9035432207dc608a775a0e1d30b09
ms.sourcegitcommit: 63753fcfb0afbbe5ec283fb8316e62c2dc950f66
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2021
ms.locfileid: "107909202"
---
# <a name="video-port-manager"></a><span data-ttu-id="ce0ec-103">Диспетчер видеопортов</span><span class="sxs-lookup"><span data-stu-id="ce0ec-103">Video Port Manager</span></span>

<span data-ttu-id="ce0ec-104">Фильтр диспетчера видеопортов (ВПМ) позволяет использовать фильтр визуализации 7 (VMR-7) с устройствами видеозаписи или аппаратными декодерами, которые используют видеопорт.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-104">The Video Port Manager filter (VPM) enables the Video Mixing Renderer Filter 7 (VMR-7) to work with video capture devices or hardware decoders that use a video port.</span></span> <span data-ttu-id="ce0ec-105">Видеопорт — это прямое аппаратное соединение с графической микросхемой.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-105">A video port is a direct hardware connection to the graphics chip.</span></span> <span data-ttu-id="ce0ec-106">Он позволяет передавать видео непосредственно в графический процессор без перебора системной шины.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-106">It enables video to be transferred directly to the graphics chip without going over the system bus.</span></span>

> [!Note]  
> <span data-ttu-id="ce0ec-107">Диспетчер видеопортов несовместим с VMR-9, так как VMR-9 не поддерживает порты видео.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-107">The Video Port Manager is not compatible with the VMR-9, because the VMR-9 does not support video ports.</span></span>

 



| <span data-ttu-id="ce0ec-108">Метка</span><span class="sxs-lookup"><span data-stu-id="ce0ec-108">Label</span></span> | <span data-ttu-id="ce0ec-109">Значение</span><span class="sxs-lookup"><span data-stu-id="ce0ec-109">Value</span></span> |
|------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ce0ec-110">Интерфейсы фильтра</span><span class="sxs-lookup"><span data-stu-id="ce0ec-110">Filter Interfaces</span></span>                        | <span data-ttu-id="ce0ec-111">[**ИамвидеодеЦиматионпропертиес**](/windows/desktop/api/Strmif/nn-strmif-iamvideodecimationproperties), [**ибасефилтер**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**икспропертисет**](ikspropertyset.md), [**икуалпроп**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop), [**ивпманажер**](/windows/desktop/api/Strmif/nn-strmif-ivpmanager)</span><span class="sxs-lookup"><span data-stu-id="ce0ec-111">[**IAMVideoDecimationProperties**](/windows/desktop/api/Strmif/nn-strmif-iamvideodecimationproperties), [**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**IKsPropertySet**](ikspropertyset.md), [**IQualProp**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop), [**IVPManager**](/windows/desktop/api/Strmif/nn-strmif-ivpmanager)</span></span> |
| <span data-ttu-id="ce0ec-112">Типы носителей входных закрепления</span><span class="sxs-lookup"><span data-stu-id="ce0ec-112">Input Pin Media Types</span></span>                    | <span data-ttu-id="ce0ec-113">MEDIATYPE \_ Video, медиасубтипе \_ ВПВИДЕО или медиасубтипе \_ ВПВБИ, отформатировать \_ нет</span><span class="sxs-lookup"><span data-stu-id="ce0ec-113">MEDIATYPE\_Video, MEDIASUBTYPE\_VPVideo or MEDIASUBTYPE\_VPVBI, FORMAT\_None</span></span>                                                                                                                                         |
| <span data-ttu-id="ce0ec-114">Интерфейсы входных закрепления</span><span class="sxs-lookup"><span data-stu-id="ce0ec-114">Input Pin Interfaces</span></span>                     | <span data-ttu-id="ce0ec-115">[**Икспин**](ikspin.md), [**икспропертисет**](ikspropertyset.md), [**имеминпутпин**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**Ипин**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**ипинконнектион**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection), [**икуалитиконтрол**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span><span class="sxs-lookup"><span data-stu-id="ce0ec-115">[**IKsPin**](ikspin.md), [**IKsPropertySet**](ikspropertyset.md), [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span></span> |
| <span data-ttu-id="ce0ec-116">Типы носителей для выходного ПИН-кода</span><span class="sxs-lookup"><span data-stu-id="ce0ec-116">Output Pin Media Types</span></span>                   | <span data-ttu-id="ce0ec-117">МУЛЬТИМЕДИЙное \_ видео, формат \_ VideoInfo2</span><span class="sxs-lookup"><span data-stu-id="ce0ec-117">MEDIATYPE\_Video, FORMAT\_VideoInfo2</span></span>                                                                                                                                                                                 |
| <span data-ttu-id="ce0ec-118">Интерфейсы выходного ПИН-кода</span><span class="sxs-lookup"><span data-stu-id="ce0ec-118">Output Pin Interfaces</span></span>                    | <span data-ttu-id="ce0ec-119">[**Ипин**](/windows/desktop/api/Strmif/nn-strmif-ipin), [ **икуалитиконтрол**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span><span class="sxs-lookup"><span data-stu-id="ce0ec-119">[**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span></span>                                                                                                                                                     |
| <span data-ttu-id="ce0ec-120">Фильтровать CLSID</span><span class="sxs-lookup"><span data-stu-id="ce0ec-120">Filter CLSID</span></span>                             | <span data-ttu-id="ce0ec-121">\_ВИДЕОПОРТМАНАЖЕР CLSID</span><span class="sxs-lookup"><span data-stu-id="ce0ec-121">CLSID\_VideoPortManager</span></span>                                                                                                                                                                                              |
| [<span data-ttu-id="ce0ec-122">Заслуживают</span><span class="sxs-lookup"><span data-stu-id="ce0ec-122">Merit</span></span>](merit.md)                       | <span data-ttu-id="ce0ec-123">неуспешный \_ режим</span><span class="sxs-lookup"><span data-stu-id="ce0ec-123">MERIT\_NORMAL</span></span>                                                                                                                                                                                                        |
| [<span data-ttu-id="ce0ec-124">Категория фильтра</span><span class="sxs-lookup"><span data-stu-id="ce0ec-124">Filter Category</span></span>](filter-categories.md) | <span data-ttu-id="ce0ec-125">\_ЛЕГАЦИАМФИЛТЕРКАТЕГОРИ CLSID</span><span class="sxs-lookup"><span data-stu-id="ce0ec-125">CLSID\_LegacyAmFilterCategory</span></span>                                                                                                                                                                                        |



 

## <a name="remarks"></a><span data-ttu-id="ce0ec-126">Комментарии</span><span class="sxs-lookup"><span data-stu-id="ce0ec-126">Remarks</span></span>

<span data-ttu-id="ce0ec-127">Диспетчер видеопортов сочетает в себе функции порта видео в [фильтре микшера наложения](overlay-mixer-filter.md) и функции [распределительной панели ВБИ](vbi-surface-allocator.md).</span><span class="sxs-lookup"><span data-stu-id="ce0ec-127">The Video Port Manager combines the video port functionality of the [Overlay Mixer Filter](overlay-mixer-filter.md) and the functionality of the [VBI Surface Allocator](vbi-surface-allocator.md).</span></span> <span data-ttu-id="ce0ec-128">ВПМ выделяет видео порты и поверхности и синхронизирует данные из видеопорта.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-128">The VPM allocates video ports and surfaces, and synchronizes data capture from the video port.</span></span> <span data-ttu-id="ce0ec-129">Он позволяет записывать видеопорты, не зависящие от отрисовки.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-129">It allows video port-based capture that is independent of rendering.</span></span> <span data-ttu-id="ce0ec-130">Если требуется предварительная версия, ВПМ координирует с VMR-7, чтобы отобразить данные видеопортов, захваченных видео.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-130">If preview is desired, the VPM coordinates with the VMR-7 to display captured video port data.</span></span> <span data-ttu-id="ce0ec-131">Если в системе имеется порт видео, то фильтру записи требуются дополнительные буферы для извлечения данных ВБИ из видеопотока.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-131">When a video port is present on the system, the capture filter requires additional buffers to extract VBI data from the video stream.</span></span> <span data-ttu-id="ce0ec-132">Эти буферы предоставляются ВПМ.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-132">These buffers are provided by the VPM.</span></span> <span data-ttu-id="ce0ec-133">После того как фильтр записи извлекли данные ВБИ, он доставляет его на отдельный ПИН-код для фильтров, таких как декодер CC.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-133">Once the capture filter has extracted the VBI data, it delivers it on a separate pin to filters such as the CC Decoder.</span></span> <span data-ttu-id="ce0ec-134">На следующем рисунке показаны ВПМ и его соединения в графе фильтра.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-134">The following illustration shows the VPM and its connections in a filter graph.</span></span>

![сегмент графа фильтра диспетчера видеопортов](images/vpm.png)

<span data-ttu-id="ce0ec-136">Построитель DVD Graph автоматически добавляет ВПМ к графу фильтра при обнаружении порта видео в системе.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-136">The DVD Graph Builder adds the VPM to the filter graph automatically when a video port is detected on the system.</span></span> <span data-ttu-id="ce0ec-137">После добавления на диаграмму ВПМ использует объект DirectDraw, предоставляемый модулем подготовки видео, для выделения двух или трех поверхностей.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-137">Once added to the graph, the VPM uses a DirectDraw object provided by the Video Mixing Renderer to allocate two or three surfaces.</span></span> <span data-ttu-id="ce0ec-138">Эти поверхности получают оцифрованные кадры из вышестоящего фильтра захвата.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-138">These surfaces receive the digitized frames from the upstream capture filter.</span></span> <span data-ttu-id="ce0ec-139">В ответ на уведомления о событиях пользовательского режима, отправляемые при наличии данных в области, ВПМ выполняет автоматический Блит на поверхность, предоставляемую VMR.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-139">In response to user-mode event notifications sent when data is present in the surface, the VPM performs an automatic blit to an offscreen surface provided by the VMR.</span></span>

<span data-ttu-id="ce0ec-140">Тот факт, что ВПМ использует несколько поверхностей для входных буферов, означает, что для него требуется больше ресурсов, чем для предыдущей реализации видеопортов DirectShow.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-140">The fact that the VPM uses multiple surfaces for its input buffers means that it requires more VRAM than the previous DirectShow video port implementation.</span></span> <span data-ttu-id="ce0ec-141">Дополнительная Блит от ВПМ к VMR-7 требует дополнительной пропускной способности видеопамяти.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-141">The extra blit from the VPM to the VMR-7 requires additional video memory bandwidth.</span></span> <span data-ttu-id="ce0ec-142">И так как автоматическое зеркальное отображение оборудования больше не используется, существует теоретическая вероятность потери кадров, но многофакторная очевидность предполагает, что это не происходит.</span><span class="sxs-lookup"><span data-stu-id="ce0ec-142">And since hardware auto-flipping is not used any longer, there is a theoretical potential for dropped frames, but the empirical evidence suggests that this does not occur.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ce0ec-143">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="ce0ec-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ce0ec-144">Фильтры DirectShow</span><span class="sxs-lookup"><span data-stu-id="ce0ec-144">DirectShow Filters</span></span>](directshow-filters.md)
</dt> <dt>

[<span data-ttu-id="ce0ec-145">**Интерфейс Ивпманажер**</span><span class="sxs-lookup"><span data-stu-id="ce0ec-145">**IVPManager Interface**</span></span>](/windows/desktop/api/Strmif/nn-strmif-ivpmanager)
</dt> </dl>

 

 



