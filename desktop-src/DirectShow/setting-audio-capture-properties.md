---
description: Настройка свойств записи звука
ms.assetid: 81400072-91d7-4db4-86d3-d072663e691f
title: Настройка свойств записи звука
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 31afe61d4641906391934bafe4c3acb8a911a9fe
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104262282"
---
# <a name="setting-audio-capture-properties"></a><span data-ttu-id="8e6f3-103">Настройка свойств записи звука</span><span class="sxs-lookup"><span data-stu-id="8e6f3-103">Setting Audio Capture Properties</span></span>

<span data-ttu-id="8e6f3-104">Каждый входной ПИН-код в фильтре записи звука предоставляет интерфейс [**иамаудиоинпутмиксер**](/windows/desktop/api/Strmif/nn-strmif-iamaudioinputmixer) .</span><span class="sxs-lookup"><span data-stu-id="8e6f3-104">Each input pin on the Audio Capture Filter exposes the [**IAMAudioInputMixer**](/windows/desktop/api/Strmif/nn-strmif-iamaudioinputmixer) interface.</span></span> <span data-ttu-id="8e6f3-105">Используйте этот интерфейс для включения или отключения определенных входных данных путем вызова метода [**иамаудиоинпутмиксер::p UT \_ Enable**](/windows/desktop/api/Strmif/nf-strmif-iamaudioinputmixer-put_enable) для ПИН-кода.</span><span class="sxs-lookup"><span data-stu-id="8e6f3-105">Use this interface to enable or disable a particular input, by calling the [**IAMAudioInputMixer::put\_Enable**](/windows/desktop/api/Strmif/nf-strmif-iamaudioinputmixer-put_enable) method on the pin.</span></span> <span data-ttu-id="8e6f3-106">Кроме того, этот интерфейс используется для задания свойств входных данных, например низких частот, уровней высоких частот и громкости.</span><span class="sxs-lookup"><span data-stu-id="8e6f3-106">Also use this interface to set properties of an input, such as the bass, treble, and volume levels.</span></span> <span data-ttu-id="8e6f3-107">При одновременной записи нескольких входных данных можно управлять общими уровнями басов, высоких частот и громкости через интерфейс **иамаудиоинпутмиксер** в самом фильтре.</span><span class="sxs-lookup"><span data-stu-id="8e6f3-107">If you are capturing multiple inputs at once, you can control the overall bass, treble, and volume levels through the **IAMAudioInputMixer** interface on the filter itself.</span></span>

<span data-ttu-id="8e6f3-108">Доступные частоты выборки и звуковые форматы для записи определяются драйвером.</span><span class="sxs-lookup"><span data-stu-id="8e6f3-108">The available sampling rates and audio formats for capture are determined by the driver.</span></span> <span data-ttu-id="8e6f3-109">Используйте интерфейс [**иамстреамконфиг**](/windows/desktop/api/Strmif/nn-strmif-iamstreamconfig) на выходном ПИН-коде фильтра записи звука, чтобы перечислить доступные частоты выборки и форматы и задать нужный формат.</span><span class="sxs-lookup"><span data-stu-id="8e6f3-109">Use the [**IAMStreamConfig**](/windows/desktop/api/Strmif/nn-strmif-iamstreamconfig) interface on the Audio Capture Filter's output pin to enumerate the available sampling rates and formats and set the desired format.</span></span> <span data-ttu-id="8e6f3-110">Фильтр может подключаться к любому фильтру, принимающему тип носителя выходного контакта.</span><span class="sxs-lookup"><span data-stu-id="8e6f3-110">The filter can connect downstream to any filter that accepts the output pin's media type.</span></span>

<span data-ttu-id="8e6f3-111">Фильтр записи звука также предоставляет интерфейс [**иамбуффернеготиатион**](/windows/desktop/api/Strmif/nn-strmif-iambuffernegotiation) .</span><span class="sxs-lookup"><span data-stu-id="8e6f3-111">The Audio Capture Filter also exposes the [**IAMBufferNegotiation**](/windows/desktop/api/Strmif/nn-strmif-iambuffernegotiation) interface.</span></span> <span data-ttu-id="8e6f3-112">Этот интерфейс полезен для контроля количества задержек в предварительной версии аудио.</span><span class="sxs-lookup"><span data-stu-id="8e6f3-112">This interface is useful for controlling the amount of latency in audio preview.</span></span> <span data-ttu-id="8e6f3-113">По умолчанию фильтр записи звука использует размер буфера половинной секунды.</span><span class="sxs-lookup"><span data-stu-id="8e6f3-113">By default, the Audio Capture filter uses a half-second buffer size.</span></span> <span data-ttu-id="8e6f3-114">Этот размер буфера оптимальен для записи, но приводит к задержке предварительной версии в половину секунды.</span><span class="sxs-lookup"><span data-stu-id="8e6f3-114">This buffer size is optimal for capturing but causes a half-second preview delay.</span></span> <span data-ttu-id="8e6f3-115">Чтобы уменьшить задержку, вызовите метод [**иамбуффернеготиатион:: сугжесталлокаторпропертиес**](/windows/desktop/api/Strmif/nf-strmif-iambuffernegotiation-suggestallocatorproperties) перед подключением выходного ПИН-кода фильтра записи звука.</span><span class="sxs-lookup"><span data-stu-id="8e6f3-115">To reduce the latency, call the [**IAMBufferNegotiation::SuggestAllocatorProperties**](/windows/desktop/api/Strmif/nf-strmif-iambuffernegotiation-suggestallocatorproperties) method before you connect the Audio Capture Filter's output pin.</span></span> <span data-ttu-id="8e6f3-116">Этот метод принимает указатель на структуру [**\_ свойств распределителя**](/windows/win32/api/strmif/ns-strmif-allocator_properties) .</span><span class="sxs-lookup"><span data-stu-id="8e6f3-116">This method takes a pointer to the [**ALLOCATOR\_PROPERTIES**](/windows/win32/api/strmif/ns-strmif-allocator_properties) structure.</span></span> <span data-ttu-id="8e6f3-117">Используйте элемент **кббуффер** , чтобы указать размер буфера в байтах.</span><span class="sxs-lookup"><span data-stu-id="8e6f3-117">Use the **cbBuffer** member to specify the buffer size, in bytes.</span></span> <span data-ttu-id="8e6f3-118">Буфер 80 миллисекунд обычно является надежным, но может быть достаточно буферов из 30 или 40 миллисекунд.</span><span class="sxs-lookup"><span data-stu-id="8e6f3-118">An 80 millisecond buffer is generally safe, but buffers of 30 or 40 milliseconds might be sufficient.</span></span> <span data-ttu-id="8e6f3-119">Если буферы слишком малы, качество звука будет снижено.</span><span class="sxs-lookup"><span data-stu-id="8e6f3-119">If the buffers are too small, the sound quality will be degraded.</span></span>

 

 



