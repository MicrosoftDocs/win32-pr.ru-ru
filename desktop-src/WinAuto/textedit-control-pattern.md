---
title: Шаблон элемента управления также TextEdit
description: Содержит рекомендации и соглашения для реализации Итекстедитпровидер, включая сведения о свойствах и методах.
ms.assetid: AA9E04AC-1AC0-6434-ADEF-9FF82ADA7CD9
keywords:
- Модель автоматизации пользовательского интерфейса, реализация шаблона элемента управления также TextEdit
- Модель автоматизации пользовательского интерфейса, шаблон элемента управления также TextEdit
- шаблоны элементов управления, также TextEdit
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bdf8512db4f676a263bf46bdbdfea7b6b7eaba11
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104339092"
---
# <a name="textedit-control-pattern"></a><span data-ttu-id="c6fc4-106">Шаблон элемента управления также TextEdit</span><span class="sxs-lookup"><span data-stu-id="c6fc4-106">TextEdit Control Pattern</span></span>

<span data-ttu-id="c6fc4-107">Содержит рекомендации и соглашения для реализации [**итекстедитпровидер**](/windows/desktop/api/uiautomationcore/nn-uiautomationcore-itexteditprovider), включая сведения о свойствах и методах.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-107">Introduces guidelines and conventions for implementing [**ITextEditProvider**](/windows/desktop/api/uiautomationcore/nn-uiautomationcore-itexteditprovider), including information about properties and methods.</span></span> <span data-ttu-id="c6fc4-108">Шаблон элемента управления **также TextEdit** используется для программного доступа к элементу управления, изменяющему текст, например элемент управления, выполняющий автоматическое исправление или обеспечивающий входную композицию.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-108">The **TextEdit** control pattern is used for programmatic access to a control that modifies text, for example a control that performs auto-correction or enables input composition.</span></span>

> [!Note]  
> <span data-ttu-id="c6fc4-109">Примечания по реализации в этом разделе относятся к интерфейсам API, которые поступают из платформы текстовых служб (TSF).</span><span class="sxs-lookup"><span data-stu-id="c6fc4-109">Implementation notes in this topic refer to APIs that come from Text Services Framework (TSF).</span></span> <span data-ttu-id="c6fc4-110">Дополнительные сведения о TSF и Справочнике по API см. в разделе [Платформа текстовых служб](/windows/desktop/TSF/text-services-framework).</span><span class="sxs-lookup"><span data-stu-id="c6fc4-110">For more info about TSF and the API reference, see [Text Services Framework](/windows/desktop/TSF/text-services-framework).</span></span>

 

## <a name="required-members-for-itexteditprovider"></a><span data-ttu-id="c6fc4-111">Обязательные члены для **итекстедитпровидер**</span><span class="sxs-lookup"><span data-stu-id="c6fc4-111">Required Members for **ITextEditProvider**</span></span>

<span data-ttu-id="c6fc4-112">Эти свойства и методы необходимы для реализации интерфейса [**итекстедитпровидер**](/windows/desktop/api/uiautomationcore/nn-uiautomationcore-itexteditprovider) .</span><span class="sxs-lookup"><span data-stu-id="c6fc4-112">These properties and methods are required for implementing the [**ITextEditProvider**](/windows/desktop/api/uiautomationcore/nn-uiautomationcore-itexteditprovider) interface.</span></span>



| <span data-ttu-id="c6fc4-113">Обязательные члены</span><span class="sxs-lookup"><span data-stu-id="c6fc4-113">Required members</span></span>                                                              | <span data-ttu-id="c6fc4-114">Тип члена</span><span class="sxs-lookup"><span data-stu-id="c6fc4-114">Member type</span></span> | <span data-ttu-id="c6fc4-115">Примечания</span><span class="sxs-lookup"><span data-stu-id="c6fc4-115">Notes</span></span>                                                                                                                                                                                                                                                                                   |
|-------------------------------------------------------------------------------|-------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="c6fc4-116">**жетактивекомпоситион**</span><span class="sxs-lookup"><span data-stu-id="c6fc4-116">**GetActiveComposition**</span></span>](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-itexteditprovider-getactivecomposition) | <span data-ttu-id="c6fc4-117">Метод</span><span class="sxs-lookup"><span data-stu-id="c6fc4-117">Method</span></span>      | <span data-ttu-id="c6fc4-118">Возвращает диапазон текущего преобразования (нет, если преобразование отсутствует).</span><span class="sxs-lookup"><span data-stu-id="c6fc4-118">Returns the range of the current conversion (none if there is no conversion).</span></span> <span data-ttu-id="c6fc4-119">Возвращает активную композицию (в TSF это диапазон, помеченный **\_ \_ компоновкой свойств GUID**).</span><span class="sxs-lookup"><span data-stu-id="c6fc4-119">Return the active composition (in TSF, this is the range marked by **GUID\_PROP\_COMPOSING**).</span></span> <span data-ttu-id="c6fc4-120">Например, для японского редактора методов ввода (IME) Microsoft это будет полный подчеркнутый текст.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-120">For example with the Microsoft Japanese Input Method Editor (IME), this would be the full underlined text.</span></span> |
| [<span data-ttu-id="c6fc4-121">**жетконверсионтаржет**</span><span class="sxs-lookup"><span data-stu-id="c6fc4-121">**GetConversionTarget**</span></span>](/windows/desktop/api/UIAutomationCore/nf-uiautomationcore-itexteditprovider-getconversiontarget)   | <span data-ttu-id="c6fc4-122">Метод</span><span class="sxs-lookup"><span data-stu-id="c6fc4-122">Method</span></span>      | <span data-ttu-id="c6fc4-123">Возвращает текущий диапазон целей преобразования (нет, если преобразование отсутствует).</span><span class="sxs-lookup"><span data-stu-id="c6fc4-123">Returns the current conversion target range (none if no conversion).</span></span> <span data-ttu-id="c6fc4-124">В TSF это диапазон символов, помеченных как **tf \_ attr \_ Target \_ нотконвертед** или **tf \_ attr Target, \_ \_ преобразованный** из структуры **tf \_ дисплайаттрибуте** .</span><span class="sxs-lookup"><span data-stu-id="c6fc4-124">In TSF, this is the range of characters marked as **TF\_ATTR\_TARGET\_NOTCONVERTED** or **TF\_ATTR\_TARGET\_CONVERTED** from the **TF\_DISPLAYATTRIBUTE** structure.</span></span>                                               |



 

<span data-ttu-id="c6fc4-125">События **текстедиттекстчанжед** и **конверсионтаржетчанжед** должны вызываться ЭЛЕМЕНТАМИ модели автоматизации пользовательского интерфейса Майкрософт, поддерживающими шаблон **также TextEdit** .</span><span class="sxs-lookup"><span data-stu-id="c6fc4-125">The **TextEditTextChanged** and **ConversionTargetChanged** events are required to be raised by Microsoft UI Automation elements supporting the **TextEdit** pattern.</span></span>

### <a name="textedittextchanged"></a><span data-ttu-id="c6fc4-126">**текстедиттекстчанжед**</span><span class="sxs-lookup"><span data-stu-id="c6fc4-126">**TextEditTextChanged**</span></span>

-   <span data-ttu-id="c6fc4-127">Используйте функцию [**уиараисетекстедиттекстчанжедевент**](/windows/desktop/api/UIAutomationCoreApi/nf-uiautomationcoreapi-uiaraisetextedittextchangedevent) для вызова события **текстедиттекстчанжед** .</span><span class="sxs-lookup"><span data-stu-id="c6fc4-127">Use the [**UiaRaiseTextEditTextChangedEvent**](/windows/desktop/api/UIAutomationCoreApi/nf-uiautomationcoreapi-uiaraisetextedittextchangedevent) function to raise the **TextEditTextChanged** event.</span></span>
-   <span data-ttu-id="c6fc4-128">В следующей таблице перечислены случаи, когда следует вызывать событие и параметры [**уиараисетекстедиттекстчанжедевент**](/windows/desktop/api/UIAutomationCoreApi/nf-uiautomationcoreapi-uiaraisetextedittextchangedevent) для использования.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-128">The following table lists the cases when you should raise the event and the [**UiaRaiseTextEditTextChangedEvent**](/windows/desktop/api/UIAutomationCoreApi/nf-uiautomationcoreapi-uiaraisetextedittextchangedevent) parameters to use.</span></span>



| <span data-ttu-id="c6fc4-129">текстедитчанжетипе</span><span class="sxs-lookup"><span data-stu-id="c6fc4-129">TextEditChangeType</span></span>                                            | <span data-ttu-id="c6fc4-130">Полезные данные события</span><span class="sxs-lookup"><span data-stu-id="c6fc4-130">Event Payload</span></span>                                | <span data-ttu-id="c6fc4-131">Примечания</span><span class="sxs-lookup"><span data-stu-id="c6fc4-131">Notes</span></span>                                                                                                                                                                                                                                                                                                                                                                                        |
|---------------------------------------------------------------|----------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="c6fc4-132">**Задать**</span><span class="sxs-lookup"><span data-stu-id="c6fc4-132">**AutoCorrect**</span></span>](/windows/desktop/api/UIAutomationCore/ne-uiautomationcore-texteditchangetype)          | <span data-ttu-id="c6fc4-133">Новая исправленная строка</span><span class="sxs-lookup"><span data-stu-id="c6fc4-133">New corrected string</span></span>                         | <span data-ttu-id="c6fc4-134">Вызывается, когда элемент управления выполнил автоматическое исправление.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-134">Raised when an auto-correction is made by the control.</span></span> <span data-ttu-id="c6fc4-135">Или всякий раз, когда замена выполняется с помощью TSF, а диапазон имеет **идентификатор GUID \_ prop \_ ТКБ \_** , **\_ \_ \_ применяемый** в качестве альтернативного значения ТКБ.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-135">Or whenever a replacement is made through TSF and the range has a **GUID\_PROP\_TKB\_ALTERNATES** value of **TKB\_ALTERNATES\_AUTOCORRECTION\_APPLIED**.</span></span><br/>                                                                                                                                                                   |
| [<span data-ttu-id="c6fc4-136">**Композиция**</span><span class="sxs-lookup"><span data-stu-id="c6fc4-136">**Composition**</span></span>](/windows/desktop/api/UIAutomationCore/ne-uiautomationcore-texteditchangetype)          | <span data-ttu-id="c6fc4-137">Обновленная строка</span><span class="sxs-lookup"><span data-stu-id="c6fc4-137">The updated string</span></span>                           | <span data-ttu-id="c6fc4-138">Полезная нагрузка должна включать только измененные символы (не отправляйте всю строку композиции).</span><span class="sxs-lookup"><span data-stu-id="c6fc4-138">The payload must only include the characters that changed (do not send the entire composition string).</span></span> <span data-ttu-id="c6fc4-139">Возникает при замене композиции.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-139">Raised whenever a composition replacement is made.</span></span> <span data-ttu-id="c6fc4-140">В TSF замена композиции определяется как замена с установленным флагом " **\_ prop \_** " набора GUID.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-140">In TSF, a composition replacement is defined as a replacement that has the **GUID\_PROP\_COMPOSING** flag set.</span></span> <span data-ttu-id="c6fc4-141">Элементы управления редактирования, реализующие TSF, могут отслеживать эти изменения с помощью уведомления **онендедит** .</span><span class="sxs-lookup"><span data-stu-id="c6fc4-141">Edit controls implementing TSF can monitor for these changes via the **OnEndEdit** notification.</span></span><br/>         |
| [<span data-ttu-id="c6fc4-142">**компоситионфинализед**</span><span class="sxs-lookup"><span data-stu-id="c6fc4-142">**CompositionFinalized**</span></span>](/windows/desktop/api/UIAutomationCore/ne-uiautomationcore-texteditchangetype) | <span data-ttu-id="c6fc4-143">Окончательная строка композиции (см. примечания)</span><span class="sxs-lookup"><span data-stu-id="c6fc4-143">The finalized composition string (see Notes)</span></span> | <span data-ttu-id="c6fc4-144">В TSF строка преобразования, для которой выполняется финализация, определяется с помощью флага формирования **GUID \_ \_** , удаляемого из композиции.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-144">In TSF, the conversion string being finalized is defined by the **GUID\_PROP\_COMPOSING** flag being removed from a composition.</span></span> <span data-ttu-id="c6fc4-145">Элементы управления редактирования, реализующие TSF, должны определить окончательную строку из **ендкомпоситион** и вызвать событие при вызове **онендедит** .</span><span class="sxs-lookup"><span data-stu-id="c6fc4-145">Edit controls implementing TSF should determine the finalized string from **EndComposition** and raise the event when **OnEndEdit** is called.</span></span><br/> <span data-ttu-id="c6fc4-146">Окончательная строка композиции может быть пустой, если композиция была отменена или удалена.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-146">The finalized composition string may be empty if composition was cancelled or deleted.</span></span><br/> |



 

### <a name="conversiontargetchanged"></a><span data-ttu-id="c6fc4-147">**конверсионтаржетчанжед**</span><span class="sxs-lookup"><span data-stu-id="c6fc4-147">**ConversionTargetChanged**</span></span>

-   <span data-ttu-id="c6fc4-148">**Конверсионтаржетчанжед** возникает при изменении целевого объекта преобразования с одного целевого объекта на другой.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-148">**ConversionTargetChanged** occurs when conversion target changes from one target to another.</span></span>
-   <span data-ttu-id="c6fc4-149">Используйте функцию [**уиараисеаутоматионевент**](/windows/desktop/api/UIAutomationCoreApi/nf-uiautomationcoreapi-uiaraiseautomationevent) для вызова события **конверсионтаржетчанжед** (передайте идентификатор события [**UIA \_ также TextEdit \_ конверсионтаржетчанжедевентид**](https://www.bing.com/search?q=**UIA\_TextEdit\_ConversionTargetChangedEventId**) ).</span><span class="sxs-lookup"><span data-stu-id="c6fc4-149">Use the [**UiaRaiseAutomationEvent**](/windows/desktop/api/UIAutomationCoreApi/nf-uiautomationcoreapi-uiaraiseautomationevent) function to raise the **ConversionTargetChanged** event (pass the [**UIA\_TextEdit\_ConversionTargetChangedEventId**](https://www.bing.com/search?q=**UIA\_TextEdit\_ConversionTargetChangedEventId**) event identifier).</span></span>
-   <span data-ttu-id="c6fc4-150">**Конверсионтаржетчанжед** не следует вызывать при изменении содержимого целевого объекта.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-150">**ConversionTargetChanged** should not be raised when the content of the target changes.</span></span> <span data-ttu-id="c6fc4-151">Если целевое изменение происходит одновременно с изменением композиции, то событие изменения целевого объекта должно быть вызвано после того, как все события композиции уже созданы.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-151">If the target change occurs simultaneous with a composition change, the target change event must be raised after any composition events have already been raised.</span></span>
-   <span data-ttu-id="c6fc4-152">В TSF цель преобразования определяется значением параметра **tf \_ attr \_ Target, \_ преобразованным** из структуры **tf \_ дисплайаттрибуте** .</span><span class="sxs-lookup"><span data-stu-id="c6fc4-152">In TSF, the conversion target is defined by the value **TF\_ATTR\_TARGET\_CONVERTED** being set from the **TF\_DISPLAYATTRIBUTE** structure.</span></span> <span data-ttu-id="c6fc4-153">Изменения можно отслеживать с помощью **онендедит**.</span><span class="sxs-lookup"><span data-stu-id="c6fc4-153">Changes can be monitored using **OnEndEdit**.</span></span>

## <a name="related-topics"></a><span data-ttu-id="c6fc4-154">См. также</span><span class="sxs-lookup"><span data-stu-id="c6fc4-154">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="c6fc4-155">**Зрения**</span><span class="sxs-lookup"><span data-stu-id="c6fc4-155">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="c6fc4-156">Типы элементов управления и поддерживаемые ими шаблоны элементов управления</span><span class="sxs-lookup"><span data-stu-id="c6fc4-156">Control Types and Their Supported Control Patterns</span></span>](uiauto-controlpatternmapping.md)
</dt> <dt>

[<span data-ttu-id="c6fc4-157">Общие сведения о шаблонах элементов управления модели автоматизации пользовательского интерфейса</span><span class="sxs-lookup"><span data-stu-id="c6fc4-157">UI Automation Control Patterns Overview</span></span>](uiauto-controlpatternsoverview.md)
</dt> <dt>

[<span data-ttu-id="c6fc4-158">Общие сведения о дереве модели автоматизации пользовательского интерфейса</span><span class="sxs-lookup"><span data-stu-id="c6fc4-158">UI Automation Tree Overview</span></span>](uiauto-treeoverview.md)
</dt> </dl>

 

