---
title: Использование TBS
description: Каждая команда, отправленная в TBS, связана с определенной сущностью. Это достигается путем создания одного или нескольких контекстов для сущности, которые затем связываются с каждой последующей командой, отправленной этой сущностью.
ms.assetid: 609f1e95-9868-4e34-8758-71306ac4e51f
keywords:
- TBS базовых служб TPM, примеры
- TBS базовых служб TPM, использование
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 189d047e6cf969887e390ac7dad1cfc8cdbfa4f9
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986525"
---
# <a name="using-tbs"></a>Использование TBS

Функция базовых служб TPM делится на четыре функциональные области:

-   [Виртуализация ресурсов](resource-virtualization.md)
-   [Планирование команд](command-scheduling.md)
-   [Управление питанием](power-management.md)
-   [Блокировка команд](command-blocking.md)

Чтобы обеспечить доступ различных сущностей к ресурсам друг друга, каждая команда, отправленная в TBS, связана с определенной сущностью. Это достигается путем создания одного или нескольких контекстов для сущности, которые затем связываются с каждой последующей командой, отправленной этой сущностью. Каждая команда включает объект Context, который позволяет TBS выполнять команды доверенного платформенного модуля в соответствующем контексте. Все объекты, созданные командами, удаляются из доверенного платформенного модуля при закрытии контекста.

Сущность создает контекст перед тем, как сначала обращается к TBS, и сохраняет контекст, пока не завершит выполнение доступа к TBS. Например, в случае Тсс функция TCG Core Services (TCS) в Тсс создаст контекст TBS при запуске и сохранит этот контекст активным, пока не завершится.

Для Windows Server 2008 и Windows Vista TBS разрешает доступ к API TBS для учетных записей администратора, службы NT AUTHORITY \\ LocalService и NT Authority \\ NetworkService. По умолчанию эти учетные записи являются только теми, которые могут подключаться к TBS и создавать контексты. Ограничения доступа можно изменить, **создав ключ реестра** с именем String (**reg \_ SZ**) имя значения реестра **SecurityDescriptor** <dl> <dt>

Тип данных
</dt> <dd>REG_SZ</dd> </dl> under it as follows:

```
HKEY_LOCAL_MACHINE
   Software
      Microsoft
         TPM
            Access
               SecurityDescriptor = SecurityDescriptor
```

Пример.

**О:БАГ: ОШИБКА: (A;; 0 x00000001;;; BA) (A;; 0 x00000001;;; NS) (A;; 0 x00000001;;; Местоположение**

По умолчанию максимальное число контекстов, поддерживаемых TBS, равно 25. Это число можно изменить путем создания или изменения значения реестра **DWORD** с именем **максконтекстс** в разделе **hKey \_ Local \_ Machine** \\ **Software** \\ **Microsoft** \\ **TPM**. Использование контекста TBS в режиме реального времени можно наблюдать с помощью средства "системный монитор" для отслеживания количества контекстов TBS.

Для Windows 8, Windows Server 2012 и более поздних версий TBS предоставляет доступ к стандартным пользователям и администраторам. Разделы реестра **SecurityDescriptor** и **максконтекстс** стали устаревшими. Для Windows 8, Windows Server 2012 и более поздних версий TBS разрешает доступ к определенным командам с помощью блокировки команд.

Для Windows 10 версии 1607 TBS разрешает доступ из приложений AppContainer. Для каждой версии TPM ключи **блоккедаппконтаинеркоммандс** и **AllowedW8AppContainerCommands** были добавлены с соответствующими списками заблокированных и разрешенных команд TPM соответственно.

В Windows 1803 10 разделы реестра в разделе **AllowedW8AppContainerCommands** больше не поддерживаются.

 

 




