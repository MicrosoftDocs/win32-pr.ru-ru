---
description: Шифрование с открытым ключом (также называемое шифрованием асимметричного ключа) использует пару ключей для шифрования и расшифровки содержимого.
ms.assetid: 93f65367-ca4b-4b44-9833-0653cfd3f3d3
title: Инфраструктура открытых ключей
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 55e4ff0b2b3912bc44851be105c2e2b15200eb62
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105663627"
---
# <a name="public-key-infrastructure"></a><span data-ttu-id="4cb26-103">Инфраструктура открытых ключей</span><span class="sxs-lookup"><span data-stu-id="4cb26-103">Public Key Infrastructure</span></span>

<span data-ttu-id="4cb26-104">Шифрование с открытым ключом (также называемое шифрованием асимметричного ключа) использует пару ключей для шифрования и расшифровки содержимого.</span><span class="sxs-lookup"><span data-stu-id="4cb26-104">Public-key cryptography (also called asymmetric-key cryptography) uses a key pair to encrypt and decrypt content.</span></span> <span data-ttu-id="4cb26-105">Пара ключей состоит из одного открытого и одного закрытого ключа, которые математически связаны.</span><span class="sxs-lookup"><span data-stu-id="4cb26-105">The key pair consists of one public and one private key that are mathematically related.</span></span> <span data-ttu-id="4cb26-106">Человек, который может безопасно взаимодействовать с другими пользователями, сможет распространять [*открытый ключ*](/windows/desktop/SecGloss/p-gly) , но должен хранить секрет [*закрытого ключа*](/windows/desktop/SecGloss/p-gly) .</span><span class="sxs-lookup"><span data-stu-id="4cb26-106">An individual who intends to communicate securely with others can distribute the [*public key*](/windows/desktop/SecGloss/p-gly) but must keep the [*private key*](/windows/desktop/SecGloss/p-gly) secret.</span></span> <span data-ttu-id="4cb26-107">Содержимое, зашифрованное с помощью одного из ключей, можно расшифровать с помощью другого.</span><span class="sxs-lookup"><span data-stu-id="4cb26-107">Content encrypted by using one of the keys can be decrypted by using the other.</span></span> <span data-ttu-id="4cb26-108">Предположим, например, что Боб хочет отправить Алисе сообщение электронной почты.</span><span class="sxs-lookup"><span data-stu-id="4cb26-108">Assume, for example, that Bob wants to send a secure email message to Alice.</span></span> <span data-ttu-id="4cb26-109">Это можно сделать следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4cb26-109">This can be accomplished in the following manner:</span></span>

1.  <span data-ttu-id="4cb26-110">У Боба и Алисы есть свои пары ключей.</span><span class="sxs-lookup"><span data-stu-id="4cb26-110">Both Bob and Alice have their own key pairs.</span></span> <span data-ttu-id="4cb26-111">Они безопасно сохранили свои закрытые ключи и отправили их открытые ключи непосредственно друг другу.</span><span class="sxs-lookup"><span data-stu-id="4cb26-111">They have kept their private keys securely to themselves and have sent their public keys directly to each other.</span></span>
2.  <span data-ttu-id="4cb26-112">Боб использует открытый ключ Алисы для шифрования и отправки сообщения.</span><span class="sxs-lookup"><span data-stu-id="4cb26-112">Bob uses Alice's public key to encrypt the message and sends it to her.</span></span>
3.  <span data-ttu-id="4cb26-113">Алиса использует свой закрытый ключ для расшифровки сообщения.</span><span class="sxs-lookup"><span data-stu-id="4cb26-113">Alice uses her private key to decrypt the message.</span></span>

<span data-ttu-id="4cb26-114">В этом упрощенном примере выделяется по крайней мере одна очевидная проблема: у Боба должен быть открытый ключ, который он использовал для шифрования сообщения.</span><span class="sxs-lookup"><span data-stu-id="4cb26-114">This simplified example highlights at least one obvious concern Bob must have about the public key he used to encrypt the message.</span></span> <span data-ttu-id="4cb26-115">То есть он не знает, что ключ, который он использовал для шифрования, на самом деле принадлежит Алисе.</span><span class="sxs-lookup"><span data-stu-id="4cb26-115">That is, he cannot know with certainty that the key he used for encryption actually belonged to Alice.</span></span> <span data-ttu-id="4cb26-116">Возможно, что другая сторона, отслеживающая коммуникационный канал между Бобом и Алисой, заменяла другой ключ.</span><span class="sxs-lookup"><span data-stu-id="4cb26-116">It is possible that another party monitoring the communication channel between Bob and Alice substituted a different key.</span></span>

<span data-ttu-id="4cb26-117">Концепция инфраструктуры открытого ключа изменилась для помощи в устранении этой проблемы и других.</span><span class="sxs-lookup"><span data-stu-id="4cb26-117">The public key infrastructure concept has evolved to help address this problem and others.</span></span> <span data-ttu-id="4cb26-118">Инфраструктура открытых ключей (PKI) состоит из программных и аппаратных элементов, которые доверенная третья сторона может использовать для установления целостности и принадлежности открытого ключа.</span><span class="sxs-lookup"><span data-stu-id="4cb26-118">A public key infrastructure (PKI) consists of software and hardware elements that a trusted third party can use to establish the integrity and ownership of a public key.</span></span> <span data-ttu-id="4cb26-119">Доверенная сторона, называемая [*центром сертификации*](/windows/desktop/SecGloss/c-gly) (CA), обычно выполняет эту задачу, выдавая подписанные (зашифрованные) двоичные сертификаты, подтверждающие подлинность субъекта сертификата, и привязывает удостоверение к открытому ключу, содержащемуся в сертификате.</span><span class="sxs-lookup"><span data-stu-id="4cb26-119">The trusted party, called a [*certification authority*](/windows/desktop/SecGloss/c-gly) (CA), typically accomplishes this by issuing signed (encrypted) binary certificates that affirm the identity of the certificate subject and bind that identity to the public key contained in the certificate.</span></span> <span data-ttu-id="4cb26-120">ЦС подписывает сертификат с помощью его закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="4cb26-120">The CA signs the certificate by using its private key.</span></span> <span data-ttu-id="4cb26-121">Он выдает соответствующий открытый ключ всем заинтересованным сторонам в самозаверяющего сертификата ЦС.</span><span class="sxs-lookup"><span data-stu-id="4cb26-121">It issues the corresponding public key to all interested parties in a self-signed CA certificate.</span></span> <span data-ttu-id="4cb26-122">При использовании ЦС предыдущий пример можно изменить следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4cb26-122">When a CA is used, the preceding example can be modified in the following manner:</span></span>

1.  <span data-ttu-id="4cb26-123">Предположим, что центр сертификации выдал подписанный цифровой сертификат, который содержит его открытый ключ.</span><span class="sxs-lookup"><span data-stu-id="4cb26-123">Assume that the CA has issued a signed digital certificate that contains its public key.</span></span> <span data-ttu-id="4cb26-124">ЦС самостоятельно подписывает этот сертификат с помощью закрытого ключа, соответствующего открытому ключу в сертификате.</span><span class="sxs-lookup"><span data-stu-id="4cb26-124">The CA self-signs this certificate by using the private key that corresponds to the public key in the certificate.</span></span>
2.  <span data-ttu-id="4cb26-125">Алиса и Боб согласны использовать ЦС для проверки своих удостоверений.</span><span class="sxs-lookup"><span data-stu-id="4cb26-125">Alice and Bob agree to use the CA to verify their identities.</span></span>
3.  <span data-ttu-id="4cb26-126">Алиса запрашивает сертификат открытого ключа от ЦС.</span><span class="sxs-lookup"><span data-stu-id="4cb26-126">Alice requests a public key certificate from the CA.</span></span>
4.  <span data-ttu-id="4cb26-127">Центр сертификации проверяет свое удостоверение, выдает хэш содержимого, которое будет являться его сертификатом, подписывает хэш с помощью закрытого ключа, соответствующего открытому ключу в опубликованном сертификате ЦС, создает новый сертификат путем сцепления содержимого сертификата и подписанного хэша и делает новый сертификат общедоступным.</span><span class="sxs-lookup"><span data-stu-id="4cb26-127">The CA verifies her identity, computes a hash of the content that will make up her certificate, signs the hash by using the private key that corresponds to the public key in the published CA certificate, creates a new certificate by concatenating the certificate content and the signed hash, and makes the new certificate publicly available.</span></span>
5.  <span data-ttu-id="4cb26-128">Боб получает сертификат, расшифровывает подписанный хэш с помощью открытого ключа ЦС, вычисляет новый хэш содержимого сертификата и сравнивает эти два хэша.</span><span class="sxs-lookup"><span data-stu-id="4cb26-128">Bob retrieves the certificate, decrypts the signed hash by using the public key of the CA, computes a new hash of the certificate content, and compares the two hashes.</span></span> <span data-ttu-id="4cb26-129">Если хэши совпадают, подпись проверяется, и Боб может предположить, что открытый ключ в сертификате действительно принадлежит Алисе.</span><span class="sxs-lookup"><span data-stu-id="4cb26-129">If the hashes match, the signature is verified and Bob can assume that the public key in the certificate does indeed belong to Alice.</span></span>
6.  <span data-ttu-id="4cb26-130">Боб использует проверенный открытый ключ Алисы для шифрования сообщения.</span><span class="sxs-lookup"><span data-stu-id="4cb26-130">Bob uses Alice's verified public key to encrypt a message to her.</span></span>
7.  <span data-ttu-id="4cb26-131">Алиса использует свой закрытый ключ для расшифровки сообщения от Боба.</span><span class="sxs-lookup"><span data-stu-id="4cb26-131">Alice uses her private key to decrypt the message from Bob.</span></span>

<span data-ttu-id="4cb26-132">В целом процесс подписи сертификата позволяет Бобу проверить, что открытый ключ не был изменен или поврежден во время передачи.</span><span class="sxs-lookup"><span data-stu-id="4cb26-132">In summary, the certificate signing process enables Bob to verify that the public key was not tampered with or corrupted during transit.</span></span> <span data-ttu-id="4cb26-133">Перед выдачей сертификата центр сертификации хэширует содержимое, подписывает (шифрует) хэш с помощью собственного закрытого ключа и включает зашифрованный хэш в выданный сертификат.</span><span class="sxs-lookup"><span data-stu-id="4cb26-133">Before issuing a certificate, the CA hashes the contents, signs (encrypts) the hash by using its own private key, and includes the encrypted hash in the issued certificate.</span></span> <span data-ttu-id="4cb26-134">Боб проверяет содержимое сертификата, расшифровывать хэш с помощью открытого ключа ЦС, выполняя отдельный хэш содержимого сертификата и сравнивая два хэша.</span><span class="sxs-lookup"><span data-stu-id="4cb26-134">Bob verifies the certificate contents by decrypting the hash with the CA public key, performing a separate hash of the certificate contents, and comparing the two hashes.</span></span> <span data-ttu-id="4cb26-135">Если они совпадают, Боб может быть уверенным в том, что сертификат и открытый ключ, которые он содержит, не были изменены.</span><span class="sxs-lookup"><span data-stu-id="4cb26-135">If they match, Bob can be reasonably certain that the certificate and the public key it contains have not been altered.</span></span>

<span data-ttu-id="4cb26-136">Типичная PKI состоит из следующих элементов.</span><span class="sxs-lookup"><span data-stu-id="4cb26-136">A typical PKI consists of the following elements.</span></span>

| <span data-ttu-id="4cb26-137">Элемент</span><span class="sxs-lookup"><span data-stu-id="4cb26-137">Element</span></span>                            | <span data-ttu-id="4cb26-138">Описание</span><span class="sxs-lookup"><span data-stu-id="4cb26-138">Description</span></span>                                                                                                                                                                               |
|------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="4cb26-139">Центр сертификации</span><span class="sxs-lookup"><span data-stu-id="4cb26-139">Certification Authority</span></span><br/> | <span data-ttu-id="4cb26-140">Выступает в качестве корня доверия в инфраструктуре открытого ключа и предоставляет службы для проверки подлинности удостоверений отдельных пользователей, компьютеров и других сущностей в сети.</span><span class="sxs-lookup"><span data-stu-id="4cb26-140">Acts as the root of trust in a public key infrastructure and provides services that authenticate the identity of individuals, computers, and other entities in a network.</span></span><br/>      |
| <span data-ttu-id="4cb26-141">Центр регистрации</span><span class="sxs-lookup"><span data-stu-id="4cb26-141">Registration Authority</span></span><br/>  | <span data-ttu-id="4cb26-142">Сертификат выдается корневым ЦС для выдаче сертификатов для конкретных применений, разрешенных корнем.</span><span class="sxs-lookup"><span data-stu-id="4cb26-142">Is certified by a root CA to issue certificates for specific uses permitted by the root.</span></span> <span data-ttu-id="4cb26-143">В PKI Майкрософт центр регистрации (RA) обычно называется подчиненным ЦС.</span><span class="sxs-lookup"><span data-stu-id="4cb26-143">In a Microsoft PKI, a registration authority (RA) is usually called a subordinate CA.</span></span><br/> |
| <span data-ttu-id="4cb26-144">База данных сертификатов</span><span class="sxs-lookup"><span data-stu-id="4cb26-144">Certificate Database</span></span><br/>    | <span data-ttu-id="4cb26-145">Сохраняет запросы сертификатов, выданные и отозванные сертификаты и запросы сертификатов в центре сертификации или RA.</span><span class="sxs-lookup"><span data-stu-id="4cb26-145">Saves certificate requests and issued and revoked certificates and certificate requests on the CA or RA.</span></span><br/>                                                                       |
| <span data-ttu-id="4cb26-146">Хранилище сертификатов</span><span class="sxs-lookup"><span data-stu-id="4cb26-146">Certificate Store</span></span><br/>       | <span data-ttu-id="4cb26-147">Сохраняет выданные сертификаты и ожидающие или отклоненные запросы сертификатов на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="4cb26-147">Saves issued certificates and pending or rejected certificate requests on the local computer.</span></span><br/>                                                                                  |
| <span data-ttu-id="4cb26-148">Сервер архивирования ключей</span><span class="sxs-lookup"><span data-stu-id="4cb26-148">Key Archival Server</span></span><br/>     | <span data-ttu-id="4cb26-149">Сохраняет зашифрованные закрытые ключи в базе данных сертификатов для восстановления после потери.</span><span class="sxs-lookup"><span data-stu-id="4cb26-149">Saves encrypted private keys in the certificate database for recovery after loss.</span></span><br/>                                                                                              |



 

<span data-ttu-id="4cb26-150">API регистрации сертификатов позволяет отправлять запросы на архивацию сертификатов и ключей в центры сертификации и регистрации и устанавливать выданный сертификат на локальный компьютер.</span><span class="sxs-lookup"><span data-stu-id="4cb26-150">The Certificate Enrollment API enables you to submit certificate and key archival requests to certification and registration authorities and install the issued certificate on a local computer.</span></span> <span data-ttu-id="4cb26-151">Он не позволяет напрямую управлять базой данных сертификатов или хранилищем сертификатов.</span><span class="sxs-lookup"><span data-stu-id="4cb26-151">It does not enable you to directly manipulate the certificate database or certificate store.</span></span>

<span data-ttu-id="4cb26-152">В следующих разделах инфраструктура открытых ключей Майкрософт обсуждается более подробно:</span><span class="sxs-lookup"><span data-stu-id="4cb26-152">The following topics discuss the Microsoft public key infrastructure in more detail:</span></span>

-   [<span data-ttu-id="4cb26-153">Сертификаты открытого ключа X. 509</span><span class="sxs-lookup"><span data-stu-id="4cb26-153">X.509 Public Key Certificates</span></span>](about-x-509-public-key-certificates.md)
-   [<span data-ttu-id="4cb26-154">Элементы PKI</span><span class="sxs-lookup"><span data-stu-id="4cb26-154">PKI Elements</span></span>](about-pki-components.md)
-   [<span data-ttu-id="4cb26-155">Модели доверия</span><span class="sxs-lookup"><span data-stu-id="4cb26-155">Trust Models</span></span>](about-trust-models.md)

## <a name="related-topics"></a><span data-ttu-id="4cb26-156">См. также</span><span class="sxs-lookup"><span data-stu-id="4cb26-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4cb26-157">Сведения об API регистрации сертификатов</span><span class="sxs-lookup"><span data-stu-id="4cb26-157">About the Certificate Enrollment API</span></span>](about-the-certificate-enrollment-api.md)
</dt> </dl>

 

