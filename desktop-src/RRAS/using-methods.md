---
title: Использование методов
description: Когда клиент регистрируется в диспетчере таблиц маршрутизации, он может экспортировать набор методов. Эти методы используются другими клиентами для получения сведений, относящихся к клиенту. Методы обеспечивают частный обмен данными между клиентами диспетчера таблиц маршрутизации.
ms.assetid: 6d984a02-d005-43ad-81c4-968ae9c1a105
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 33bd895fbb3f8f54224522786b5794c5c6c57a9e
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986557"
---
# <a name="using-methods"></a>Использование методов

Когда клиент регистрируется в диспетчере таблиц маршрутизации, он может экспортировать набор методов. Эти методы используются другими клиентами для получения сведений, относящихся к клиенту. Методы обеспечивают частный обмен данными между клиентами диспетчера таблиц маршрутизации.

Клиент может получить список методов, экспортированных другим клиентом. Клиент вызывает функцию [**ртмжетентитимесодс**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmgetentitymethods) , предоставляя маркер целевого клиента.

Каждый метод, экспортированный клиентом, однозначно идентифицируется по его идентификатору метода. Каждый клиент может экспортировать до 32 методов. Каждый метод соответствует биту, заданному в элементе **месодтипе** структуры [**\_ \_ \_ метода экспорта сущности RTM**](/windows/win32/api/rtmv2/nc-rtmv2-_entity_method) . Для вызова нескольких методов клиент должен выполнить логическую операцию или идентификаторы для этих методов. Синтаксис и семантика входных и выходных структур для каждого протокола должны быть указаны при реализации протокола.

> [!Note]  
> Значения идентификатора метода, соответствующие биту, заданному в нижней половине элемента **месодтипе** (младшие 16 бит), зарезервированы корпорацией Майкрософт.

 

Чтобы вызвать второй метод клиента, клиент вызывает функцию [**ртминвокемесод**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtminvokemethod) . Диспетчер таблиц маршрутизации единолично все запросы на вызов методов клиента. Диспетчер таблиц маршрутизации выполняет две функции, когда она единолично между клиентами:

-   Запретить второму клиенту вызывать метод для клиента, который отменяет регистрацию.
-   Удержание запроса "Invoke", если методы заблокированы, и разрешение продолжения запроса при разблокировании методов.

Если клиент должен запретить другим клиентам выполнять свои методы, клиент может вызвать [**ртмблоккмесодс**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtmblockmethods). Диспетчер таблиц маршрутизации не позволит обработать вызов [**ртминвокемесод**](/windows/desktop/api/Rtmv2/nf-rtmv2-rtminvokemethod) , пока клиент не разблокирует свои методы снова.

Обычно клиенты блокируют методы при внесении изменений в закрытые данные, которыми обмениваются клиенты. Блокирующие методы являются необязательным действием. Клиент также может использовать внутренние блокировки, чтобы предотвратить вызов методов другими клиентами.

Пример кода, демонстрирующий использование этих функций, см. [в разделе Получение и вызов экспортированных методов для клиента](obtain-and-call-the-exported-methods-for-a-client.md).

 

 




