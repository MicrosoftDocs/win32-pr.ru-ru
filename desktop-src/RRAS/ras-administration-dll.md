---
title: О библиотеках DLL администрирования RAS
description: Библиотека DLL администрирования RAS экспортирует функции, которые сервер удаленного доступа вызывает каждый раз, когда пользователь пытается подключиться или отключиться.
ms.assetid: c15c6e2d-3bb6-4583-9ac3-19528feb863f
keywords:
- Администрирование RAS, Библиотека DLL администрирования RAS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1cb170e8cfa331ab9591aa509772c6f6a743fa49
ms.sourcegitcommit: cba7f424a292fd7f3a8518947b9466439b455419
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/23/2019
ms.locfileid: "104532915"
---
# <a name="about-ras-administration-dlls"></a><span data-ttu-id="12af5-104">О библиотеках DLL администрирования RAS</span><span class="sxs-lookup"><span data-stu-id="12af5-104">About RAS administration DLLs</span></span>

<span data-ttu-id="12af5-105">Библиотека DLL администрирования RAS экспортирует функции, которые сервер удаленного доступа вызывает каждый раз, когда пользователь пытается подключиться или отключиться.</span><span class="sxs-lookup"><span data-stu-id="12af5-105">The RAS Administration DLL exports functions that the RAS server calls whenever a user tries to connect or disconnect.</span></span> <span data-ttu-id="12af5-106">Ниже приведены некоторые из возможных вариантов использования библиотеки DLL администрирования RAS.</span><span class="sxs-lookup"><span data-stu-id="12af5-106">Here are some of the possible uses for a RAS administration DLL:</span></span>

-   <span data-ttu-id="12af5-107">Решите, следует ли разрешить пользователю подключаться к серверу.</span><span class="sxs-lookup"><span data-stu-id="12af5-107">Decide whether to allow a user to connect to the server.</span></span> <span data-ttu-id="12af5-108">Библиотека DLL администрирования может обеспечить проверку безопасности в дополнение к стандартной проверке подлинности пользователя службы удаленного доступа.</span><span class="sxs-lookup"><span data-stu-id="12af5-108">The administration DLL can provide a security check in addition to the standard RAS user authentication.</span></span>
-   <span data-ttu-id="12af5-109">Запишите время, когда каждый пользователь подключается к серверу и отключается от него.</span><span class="sxs-lookup"><span data-stu-id="12af5-109">Record the time that each user connects to and disconnects from the server.</span></span> <span data-ttu-id="12af5-110">Это может быть полезно для выставления счетов или проведения аудита.</span><span class="sxs-lookup"><span data-stu-id="12af5-110">This can be useful for billing or auditing purposes.</span></span>
-   <span data-ttu-id="12af5-111">Назначьте IP-адрес каждому пользователю.</span><span class="sxs-lookup"><span data-stu-id="12af5-111">Assign an IP address to each user.</span></span> <span data-ttu-id="12af5-112">Это полезно для обеспечения безопасности, так как эта функция используется для отображения подключения пользователя к определенному компьютеру.</span><span class="sxs-lookup"><span data-stu-id="12af5-112">This is useful for security, because this feature is used to map a user's connection to a specific computer.</span></span>

<span data-ttu-id="12af5-113">Расположение библиотеки DLL администрирования RAS указывается в реестре; см. [раздел Установка реестра библиотеки DLL администрирования RAS](ras-administration-dll-registry-setup.md).</span><span class="sxs-lookup"><span data-stu-id="12af5-113">The location of the RAS Administration DLL is specified in the registry; see [RAS Administration DLL Registry Setup](ras-administration-dll-registry-setup.md).</span></span>

<span data-ttu-id="12af5-114">Служба RAS поддерживает несколько библиотек администрирования.</span><span class="sxs-lookup"><span data-stu-id="12af5-114">RAS supports multiple Administration DLLs.</span></span> <span data-ttu-id="12af5-115">Реестр поддерживает несколько расположений DLL.</span><span class="sxs-lookup"><span data-stu-id="12af5-115">The registry supports multiple DLL locations.</span></span> <span data-ttu-id="12af5-116">Служба RAS вызывает функции в библиотеках DLL в том порядке, в котором библиотеки DLL перечислены в реестре. см. [раздел Установка реестра библиотеки DLL администрирования RAS](ras-administration-dll-registry-setup.md).</span><span class="sxs-lookup"><span data-stu-id="12af5-116">RAS calls the functions in the DLLs in the order in which the DLLs are listed in the registry; see [RAS Administration DLL Registry Setup](ras-administration-dll-registry-setup.md).</span></span>

<span data-ttu-id="12af5-117">**Сервер Windows 2000:** Служба RAS не поддерживает несколько библиотек DLL.</span><span class="sxs-lookup"><span data-stu-id="12af5-117">**Windows 2000 Server:** RAS does not support multiple DLLs.</span></span>

<span data-ttu-id="12af5-118">Библиотека DLL администрирования RAS должна реализовывать и экспортировать все следующие функции:</span><span class="sxs-lookup"><span data-stu-id="12af5-118">A RAS administration DLL must implement and export all of the following functions:</span></span>

[<span data-ttu-id="12af5-119">**мпрадминакцептневлинк**</span><span class="sxs-lookup"><span data-stu-id="12af5-119">**MprAdminAcceptNewLink**</span></span>](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewlink)

[<span data-ttu-id="12af5-120">**мпрадмининитиализедлл**</span><span class="sxs-lookup"><span data-stu-id="12af5-120">**MprAdminInitializeDll**</span></span>](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininitializedll)

[<span data-ttu-id="12af5-121">**мпрадминлинкхангупнотификатион**</span><span class="sxs-lookup"><span data-stu-id="12af5-121">**MprAdminLinkHangupNotification**</span></span>](/windows/desktop/api/Mprapi/nf-mprapi-mpradminlinkhangupnotification)

[<span data-ttu-id="12af5-122">**мпрадминтерминатедлл**</span><span class="sxs-lookup"><span data-stu-id="12af5-122">**MprAdminTerminateDll**</span></span>](/windows/desktop/api/Mprapi/nf-mprapi-mpradminterminatedll)

<span data-ttu-id="12af5-123">Кроме того, Библиотека DLL администрирования RAS должна реализовывать и экспортировать либо</span><span class="sxs-lookup"><span data-stu-id="12af5-123">In addition, the RAS administration DLL must implement and export either</span></span>

<span data-ttu-id="12af5-124">[**Мпрадминакцептневконнектион**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) и</span><span class="sxs-lookup"><span data-stu-id="12af5-124">[**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) and</span></span>

[<span data-ttu-id="12af5-125">**мпрадминконнектионхангупнотификатион**</span><span class="sxs-lookup"><span data-stu-id="12af5-125">**MprAdminConnectionHangupNotification**</span></span>](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification)

<span data-ttu-id="12af5-126">или</span><span class="sxs-lookup"><span data-stu-id="12af5-126">or</span></span>

<span data-ttu-id="12af5-127">[**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) и</span><span class="sxs-lookup"><span data-stu-id="12af5-127">[**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) and</span></span>

[<span data-ttu-id="12af5-128">**MprAdminConnectionHangupNotification2**</span><span class="sxs-lookup"><span data-stu-id="12af5-128">**MprAdminConnectionHangupNotification2**</span></span>](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification2)

<span data-ttu-id="12af5-129">Если все необходимые функции не реализованы, служба удаленного доступа не сможет запуститься.</span><span class="sxs-lookup"><span data-stu-id="12af5-129">If all of the required functions are not implemented, RAS fails to start.</span></span>

<span data-ttu-id="12af5-130">**Сервер Windows 2000:** Библиотека DLL администрирования должна реализовывать функции [**мпрадминжетипаддрессфорусер**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) и [**мпрадминрелеасеипаддресс**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) .</span><span class="sxs-lookup"><span data-stu-id="12af5-130">**Windows 2000 Server:** An administration DLL must implement the [**MprAdminGetIpAddressForUser**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) and [**MprAdminReleaseIpAddress**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) functions.</span></span> <span data-ttu-id="12af5-131">Если библиотека DLL реализует одну из этих функций, она также должна реализовывать и другую.</span><span class="sxs-lookup"><span data-stu-id="12af5-131">If the DLL implements one of these functions it must implement the other as well.</span></span>

<span data-ttu-id="12af5-132">Служба RAS вызывает функцию [**мпрадмининитиализедлл**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininitializedll) при первой загрузке службы маршрутизации и удаленного доступа.</span><span class="sxs-lookup"><span data-stu-id="12af5-132">RAS calls the [**MprAdminInitializeDll**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininitializedll) function when the Routing and Remote Access Service first starts up.</span></span> <span data-ttu-id="12af5-133">Функция **мпрадмининитиализедлл** предоставляет библиотеке DLL администрирования возможность выполнить необходимую инициализацию.</span><span class="sxs-lookup"><span data-stu-id="12af5-133">The **MprAdminInitializeDll** function provides an opportunity for the administration DLL to do any necessary initialization.</span></span> <span data-ttu-id="12af5-134">Аналогичным образом служба RAS вызывает службу [**мпрадминтерминатедлл**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminterminatedll) , когда служба маршрутизации и удаленного доступа завершает работу.</span><span class="sxs-lookup"><span data-stu-id="12af5-134">Similarly, RAS calls the [**MprAdminTerminateDll**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminterminatedll) service when the Routing and Remote Access Service shuts down.</span></span> <span data-ttu-id="12af5-135">Эта функция позволяет библиотеке DLL администрирования выполнять необходимую очистку перед выходом.</span><span class="sxs-lookup"><span data-stu-id="12af5-135">This function allows the administration DLL to perform any necessary cleanup before exiting.</span></span>

<span data-ttu-id="12af5-136">Функции [**мпрадминакцептневконнектион**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) и [**мпрадминконнектионхангупнотификатион**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification) позволяют библиотеке DLL выполнять аудит подключений пользователей к серверу.</span><span class="sxs-lookup"><span data-stu-id="12af5-136">The [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) and [**MprAdminConnectionHangupNotification**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification) functions enable the DLL to audit user connections to the server.</span></span> <span data-ttu-id="12af5-137">Сервер RAS вызывает функцию **мпрадминакцептневконнектион** каждый раз, когда пользователь пытается подключиться.</span><span class="sxs-lookup"><span data-stu-id="12af5-137">A RAS server calls the **MprAdminAcceptNewConnection** function whenever a user tries to connect.</span></span> <span data-ttu-id="12af5-138">Эта функция позволяет запретить пользователю подключаться.</span><span class="sxs-lookup"><span data-stu-id="12af5-138">This function makes it possible to prevent the user from connecting.</span></span> <span data-ttu-id="12af5-139">Функция **мпрадминакцептневконнектион** также может создавать записи журнала для выставления счетов или аудита.</span><span class="sxs-lookup"><span data-stu-id="12af5-139">The **MprAdminAcceptNewConnection** function could also generate log entries for billing or auditing.</span></span> <span data-ttu-id="12af5-140">Когда пользователь отключается, сервер удаленного доступа вызывает функцию **мпрадминконнектионхангупнотификатион** , которая может регистрировать время отключения пользователя.</span><span class="sxs-lookup"><span data-stu-id="12af5-140">When the user disconnects, the RAS server calls the **MprAdminConnectionHangupNotification** function, which can log the time at which the user disconnected.</span></span>

<span data-ttu-id="12af5-141">Функции [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) и [**MprAdminConnectionHangupNotification2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification2) похожи на **мпрадминакцептневконнектион** и [**мпрадминконнектионхангупнотификатион**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification).</span><span class="sxs-lookup"><span data-stu-id="12af5-141">The [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) and [**MprAdminConnectionHangupNotification2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification2) functions are similar to **MprAdminAcceptNewConnection** and [**MprAdminConnectionHangupNotification**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification).</span></span> <span data-ttu-id="12af5-142">Однако когда служба RAS вызывает функции **MprAdminAcceptNewConnection2** и **MprAdminConnectionHangupNotification2** , служба RAS передает дополнительный параметр типа [**RAS \_ Connection \_ 2**](/windows/desktop/api/Mprapi/ns-mprapi-ras_connection_2).</span><span class="sxs-lookup"><span data-stu-id="12af5-142">However, when RAS calls the **MprAdminAcceptNewConnection2** and **MprAdminConnectionHangupNotification2** functions, RAS passes in an additional parameter of type [**RAS\_CONNECTION\_2**](/windows/desktop/api/Mprapi/ns-mprapi-ras_connection_2).</span></span>

<span data-ttu-id="12af5-143">Служба RAS поддерживает несколько библиотек администрирования.</span><span class="sxs-lookup"><span data-stu-id="12af5-143">RAS supports multiple Administration DLLs.</span></span> <span data-ttu-id="12af5-144">Пользователю с удаленным доступом разрешено подключаться, только если реализация функции [**мпрадминакцептневконнектион**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) или [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) в каждой из библиотек DLL принимает соединение.</span><span class="sxs-lookup"><span data-stu-id="12af5-144">The remote-access user is allowed to connect only if the implementation of the [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) or [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) function in each of the DLLs accepts the connection.</span></span> <span data-ttu-id="12af5-145">Иными словами, каждая библиотека DLL должна принять подключение, чтобы пользователю было разрешено подключаться.</span><span class="sxs-lookup"><span data-stu-id="12af5-145">In other words, every DLL must accept the connection in order for the user to be allowed to connect.</span></span>

<span data-ttu-id="12af5-146">При подключении к серверу удаленного доступа может использоваться одно подключение RAS для использования нескольких ссылок.</span><span class="sxs-lookup"><span data-stu-id="12af5-146">It is possible for a single RAS connection to use multiple links when connecting to a RAS server.</span></span> <span data-ttu-id="12af5-147">Функции [**мпрадминакцептневлинк**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewlink) и [**мпрадминлинкхангупнотификатион**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminlinkhangupnotification) позволяют библиотеке DLL администрирования управлять отдельными связями в соединении.</span><span class="sxs-lookup"><span data-stu-id="12af5-147">The [**MprAdminAcceptNewLink**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewlink) and [**MprAdminLinkHangupNotification**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminlinkhangupnotification) functions make it possible for the Administration DLL to manage individual links in a connection.</span></span> <span data-ttu-id="12af5-148">Служба RAS вызывает **мпрадминакцептневлинк** всякий раз, когда для соединения устанавливается новая связь.</span><span class="sxs-lookup"><span data-stu-id="12af5-148">RAS calls **MprAdminAcceptNewLink** whenever a new link is established for a connection.</span></span> <span data-ttu-id="12af5-149">Так как все соединения содержат по крайней мере одну ссылку, служба RAS всегда вызывает **мпрадминакцептневлинк** сразу после [**мпрадминакцептневконнектион**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) или [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) , при условии, что [**мпрадминакцептневконнектион**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) или [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) приняли соединение.</span><span class="sxs-lookup"><span data-stu-id="12af5-149">Because all connections involve at least one link, RAS always calls **MprAdminAcceptNewLink** once immediately after [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) or [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) returns, provided that [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) or [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) accepted the connection.</span></span> <span data-ttu-id="12af5-150">Служба RAS вызывает **мпрадминлинкхангупнотификатион** каждый раз при завершении работы ссылки для подключения.</span><span class="sxs-lookup"><span data-stu-id="12af5-150">RAS calls **MprAdminLinkHangupNotification** whenever a link for a connection is shutdown.</span></span>

<span data-ttu-id="12af5-151">Поскольку RAS поддерживает несколько библиотек администрирования, пользователю с удаленным доступом разрешено подключаться только в том случае, если в каждой из библиотек DLL принимается соединение с помощью функции [**мпрадминакцептневлинк**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewlink) .</span><span class="sxs-lookup"><span data-stu-id="12af5-151">Because RAS supports multiple Administration DLLs, the remote-access user is allowed to connect only if the implementation of the [**MprAdminAcceptNewLink**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewlink) function in each of the DLLs accepts the connection.</span></span> <span data-ttu-id="12af5-152">Иными словами, каждая библиотека DLL должна принять ссылку, чтобы установить ссылку.</span><span class="sxs-lookup"><span data-stu-id="12af5-152">In other words, every DLL must accept the link in order for the link to be established.</span></span>

<span data-ttu-id="12af5-153">После того как сервер удаленного доступа пройдет проверку подлинности пользователя, он вызывает функцию [**мпрадминжетипаддрессфорусер**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) для получения IP-адреса для удаленного клиента.</span><span class="sxs-lookup"><span data-stu-id="12af5-153">After the RAS server has authenticated a user, it calls the [**MprAdminGetIpAddressForUser**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) function to get an IP address for the remote client.</span></span> <span data-ttu-id="12af5-154">Эта функция предоставляет альтернативную схему для сопоставления IP-адреса с пользователем удаленного доступа.</span><span class="sxs-lookup"><span data-stu-id="12af5-154">This function provides an alternate scheme for mapping an IP address to a dial-in user.</span></span> <span data-ttu-id="12af5-155">Если **мпрадминжетипаддрессфорусер** не реализован, сервер удаленного доступа связывает удаленного пользователя с IP-адресом, выбранным из статического пула IP-адресов или выбранного сервером DHCP.</span><span class="sxs-lookup"><span data-stu-id="12af5-155">If **MprAdminGetIpAddressForUser** is not implemented, a RAS server associates the remote user with an IP address that is selected from a static pool of IP addresses, or one selected by a Dynamic Host Configuration Protocol (DHCP) server.</span></span> <span data-ttu-id="12af5-156">Функция **мпрадминжетипаддрессфорусер** позволяет библиотеке DLL переопределить этот IP-адрес по умолчанию и указать конкретный IP-адрес для каждого пользователя.</span><span class="sxs-lookup"><span data-stu-id="12af5-156">The **MprAdminGetIpAddressForUser** function allows the DLL to override this default IP address and specify a particular IP address for each user.</span></span> <span data-ttu-id="12af5-157">Функция **мпрадминжетипаддрессфорусер** может установить флаг, который заставляет службу RAS вызывать функцию [**мпрадминрелеасеипаддресс**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) при отключении пользователя.</span><span class="sxs-lookup"><span data-stu-id="12af5-157">The **MprAdminGetIpAddressForUser** function can set a flag that causes RAS to call the [**MprAdminReleaseIpAddress**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) function when the user disconnects.</span></span> <span data-ttu-id="12af5-158">После этого библиотека DLL может использовать **мпрадминрелеасеипаддресс** для обновления сопоставления пользователя и IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="12af5-158">The DLL can then use **MprAdminReleaseIpAddress** to update its user-to-IP-address mapping.</span></span>

<span data-ttu-id="12af5-159">Служба RAS поддерживает несколько библиотек администрирования, но вызывает функции [**мпрадминжетипаддрессфорусер**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) и [**мпрадминрелеасеипаддресс**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) только в первой библиотеке DLL, которая реализует и экспортирует их.</span><span class="sxs-lookup"><span data-stu-id="12af5-159">RAS supports multiple Administration DLLs, but it calls the [**MprAdminGetIpAddressForUser**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) and [**MprAdminReleaseIpAddress**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) functions only in the first DLL that implements and export them.</span></span> <span data-ttu-id="12af5-160">Служба RAS игнорирует реализации этих функций в других библиотеках DLL.</span><span class="sxs-lookup"><span data-stu-id="12af5-160">RAS ignores implementations of these functions in the other DLLs.</span></span> <span data-ttu-id="12af5-161">Служба RAS проверяет наличие библиотек DLL для этих функций в том порядке, в котором они перечислены в [реестре](ras-administration-dll-registry-setup.md).</span><span class="sxs-lookup"><span data-stu-id="12af5-161">RAS checks the DLLs for these functions in the order in which they are listed in the [registry](ras-administration-dll-registry-setup.md).</span></span>

<span data-ttu-id="12af5-162">Служба RAS сериализует вызовы в библиотеку DLL администрирования.</span><span class="sxs-lookup"><span data-stu-id="12af5-162">RAS serializes calls into the administration DLL.</span></span> <span data-ttu-id="12af5-163">Вызов одной из функций библиотеки DLL для данного клиента RAS не приводит к прерыванию вызова этой функции для другого клиента RAS. Служба RAS не вызывает функцию для другого клиента, пока не завершится первоначальный вызов.</span><span class="sxs-lookup"><span data-stu-id="12af5-163">A call into one of the DLL's functions for a given RAS client does not preempt a call to that function for a different RAS client; RAS does not call the function for the other client until the initial call is complete.</span></span> <span data-ttu-id="12af5-164">Более того, сериализация распространяется на определенные группы функций.</span><span class="sxs-lookup"><span data-stu-id="12af5-164">Furthermore, serialization extends to certain groups of functions.</span></span> <span data-ttu-id="12af5-165">Функции IP-адреса сериализуются как группа. вызов либо [**мпрадминжетипаддрессфорусер**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) , либо [**мпрадминрелеасеипаддресс**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) блокирует вызовы обеих функций до тех пор, пока не будет возвращен начальный вызов.</span><span class="sxs-lookup"><span data-stu-id="12af5-165">The IP address functions are serialized as a group; a call into either [**MprAdminGetIpAddressForUser**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingetipaddressforuser) or [**MprAdminReleaseIpAddress**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminreleaseipaddress) blocks calls into both functions until the initial call has returned.</span></span> <span data-ttu-id="12af5-166">[**Мпрадминакцептневконнектион**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) и [**мпрадминконнектионхангупнотификатион**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification) также сериализуются как группа.</span><span class="sxs-lookup"><span data-stu-id="12af5-166">[**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) and [**MprAdminConnectionHangupNotification**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionhangupnotification) are also serialized as a group.</span></span>

<span data-ttu-id="12af5-167">Служба RAS выполняет функции, которые назначают IP-адреса в одном процессе; функции для уведомлений соединения и отключения выполняются в другом процессе.</span><span class="sxs-lookup"><span data-stu-id="12af5-167">RAS executes the functions that assign IP addresses in one process; the functions for connection and disconnection notifications are executed in another process.</span></span> <span data-ttu-id="12af5-168">Следовательно, Библиотека DLL не зависит от общих данных между этими двумя наборами функций.</span><span class="sxs-lookup"><span data-stu-id="12af5-168">Consequently, the DLL does not depend on shared data between these two sets of functions.</span></span>

<span data-ttu-id="12af5-169">Не вызывайте ни функции [администрирования RAS](ras-administration-functions.md) , ни [функции администрирования пользователей RAS](ras-user-administration-functions.md) внутри функции вызова.</span><span class="sxs-lookup"><span data-stu-id="12af5-169">Do not call any of the [RAS Administration Functions](ras-administration-functions.md) or [RAS User Administration Functions](ras-user-administration-functions.md) from inside a callout function.</span></span> <span data-ttu-id="12af5-170">Вызовы этих функций не будут возвращаться при вызове из функции вызова.</span><span class="sxs-lookup"><span data-stu-id="12af5-170">Calls to these functions will not return when made from within a callout function.</span></span>

<span data-ttu-id="12af5-171">Сервер RAS регистрирует ошибку в журнале системных событий, если возникает ошибка при попытке загрузить библиотеку DLL администрирования RAS или вызов одной из функций библиотеки DLL.</span><span class="sxs-lookup"><span data-stu-id="12af5-171">The RAS server logs an error in the system event log if an error occurs when it tries to load a RAS administration DLL or when calling one of the DLL's functions.</span></span> <span data-ttu-id="12af5-172">Это может произойти, например, если в библиотеке DLL указано неправильное имя экспортируемой функции или если она не включала имя функции в DEF-файл.</span><span class="sxs-lookup"><span data-stu-id="12af5-172">This can happen, for example, if the DLL specified the wrong name for an exported function, or if it did not include the function name in the DEF file.</span></span> <span data-ttu-id="12af5-173">Запись в журнале событий указывает причину сбоя.</span><span class="sxs-lookup"><span data-stu-id="12af5-173">The entry in the event log indicates the reason for the failure.</span></span>

<span data-ttu-id="12af5-174">**Windows 2000/NT:** Несколько библиотек DLL администрирования не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="12af5-174">**Windows 2000/NT:** Multiple administration DLLs are not supported.</span></span>

 

 




