---
title: Подключения обратного вызова
description: Служба RAS поддерживает соединения, в которых удаленный сервер зависает, а затем выполняет обратный вызов клиента для установления соединения.
ms.assetid: 25f0e84d-8900-4efe-b07d-59f25186c976
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9aabe3bf5503f16d7d27e44e02dc19ccb2a6f2e5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103793518"
---
# <a name="callback-connections"></a><span data-ttu-id="31e28-103">Подключения обратного вызова</span><span class="sxs-lookup"><span data-stu-id="31e28-103">Callback Connections</span></span>

<span data-ttu-id="31e28-104">Служба RAS поддерживает соединения, в которых удаленный сервер зависает, а затем выполняет обратный вызов клиента для установления соединения.</span><span class="sxs-lookup"><span data-stu-id="31e28-104">RAS supports connections in which the remote server hangs up and then calls back to the client to establish the connection.</span></span>

<span data-ttu-id="31e28-105">Для каждого пользователя, который может подключаться к серверу удаленного доступа, сервер хранит атрибут обратного вызова, который управляет тем, как устанавливается соединение.</span><span class="sxs-lookup"><span data-stu-id="31e28-105">For each user that can connect to a RAS server, the server stores a callback attribute that controls how the connection is made.</span></span> <span data-ttu-id="31e28-106">Атрибут по умолчанию не имеет обратного вызова, что означает, что пользователь может подключиться к серверу удаленного доступа без обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="31e28-106">The default attribute is No Callback, which means that the user can connect to the RAS server without a callback.</span></span> <span data-ttu-id="31e28-107">Кроме того, администратор сервера RAS может назначить пользователю предустановку или атрибут обратного вызова, установленный на вызывающий объект.</span><span class="sxs-lookup"><span data-stu-id="31e28-107">Alternatively, the administrator of the RAS server can assign to a user either the Preset or Set-By-Caller callback attribute.</span></span>

<span data-ttu-id="31e28-108">Для пользователя, которому назначено ограничение, администратор указывает номер телефона, который сервер удаленного доступа должен выполнить для установления соединения.</span><span class="sxs-lookup"><span data-stu-id="31e28-108">For a user assigned the Preset restriction, the administrator specifies a phone number that the RAS server must call back to establish a connection.</span></span> <span data-ttu-id="31e28-109">Пользователь не может указать другое число, и соединение не может быть установлено без обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="31e28-109">The user cannot specify a different number, and the connection cannot be made without a callback.</span></span>

<span data-ttu-id="31e28-110">Предустановленная операция обратного вызова автоматически обрабатывается диспетчером подключений удаленного доступа и удаленным сервером.</span><span class="sxs-lookup"><span data-stu-id="31e28-110">A Preset callback operation is handled automatically by the Remote Access Connection Manager and the remote server.</span></span> <span data-ttu-id="31e28-111">Клиентское приложение RAS не обязано выполнять никаких действий, кроме предоставления отзывов пользователю при вызове обработчика уведомлений во время различных состояний операции обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="31e28-111">The RAS client application does not need to do anything other than provide feedback to the user when the notification handler is called during the various states of the callback operation.</span></span>

<span data-ttu-id="31e28-112">Пользователь, которому назначено право абонента Set by, может подключаться с помощью обратного вызова или без него.</span><span class="sxs-lookup"><span data-stu-id="31e28-112">A user assigned the Set By Caller privilege can choose to connect either with or without a callback.</span></span> <span data-ttu-id="31e28-113">Вызов [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) использует элемент **сзкаллбаккнумбер** структуры [**расдиалпарамс**](/previous-versions/windows/desktop/legacy/aa377238(v=vs.85)) для указания выбора.</span><span class="sxs-lookup"><span data-stu-id="31e28-113">The [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala) call uses the **szCallbackNumber** member of the [**RASDIALPARAMS**](/previous-versions/windows/desktop/legacy/aa377238(v=vs.85)) structure to indicate the choice.</span></span>

<span data-ttu-id="31e28-114">Член **сзкаллбаккнумбер** может просто указать номер обратного вызова; или, чтобы установить соединение без обратного вызова, **сзкаллбаккнумбер** может указывать на пустую строку "".</span><span class="sxs-lookup"><span data-stu-id="31e28-114">The **szCallbackNumber** member can simply specify the callback number; or, to establish the connection without a callback, **szCallbackNumber** can point to an empty string, "".</span></span> <span data-ttu-id="31e28-115">В любом из этих случаев диспетчер подключений удаленного доступа автоматически обрабатывает операцию подключения.</span><span class="sxs-lookup"><span data-stu-id="31e28-115">In either of these cases, the Remote Access Connection Manager handles the connection operation automatically.</span></span> <span data-ttu-id="31e28-116">Как и в случае с предустановленной операцией обратного вызова, клиенту RAS не нужно выполнять никаких действий, кроме предоставления отзыва пользователю.</span><span class="sxs-lookup"><span data-stu-id="31e28-116">As with a Preset callback operation, the RAS client does not need to perform any action other than to provide feedback to the user.</span></span>

<span data-ttu-id="31e28-117">Если вызов [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) включает [приостановленные состояния](paused-states.md), **сзкаллбаккнумбер** может указывать на строку звездочки " \* ", чтобы указать, что операция подключения должна перейти в приостановленное состояние, чтобы пользователь мог ввести номер обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="31e28-117">If the [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala) call enables [paused states](paused-states.md), **szCallbackNumber** can point to an asterisk string, "\*", to indicate that the connection operation should enter a paused state to allow the user to type in the callback number.</span></span> <span data-ttu-id="31e28-118">В этом случае операция подключения для набора, назначенного пользователем вызывающего, переходит в приостановленное состояние после того, как удаленный сервер пройдет проверку подлинности пользователя.</span><span class="sxs-lookup"><span data-stu-id="31e28-118">In this case, the connection operation for a Set By Caller user enters a paused state after the remote server has authenticated the user.</span></span> <span data-ttu-id="31e28-119">Во время приостановленного состояния клиент RAS получает от пользователя ввод номера обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="31e28-119">During the paused state, the RAS client gets the callback number input from the user.</span></span> <span data-ttu-id="31e28-120">Затем клиент возобновляет операцию подключения, выполнив второй вызов **rasdial** , в котором **сзкаллбаккнумбер** указывает число, предоставленное пользователем.</span><span class="sxs-lookup"><span data-stu-id="31e28-120">The client then resumes the connection operation by making a second **RasDial** call in which **szCallbackNumber** specifies the number supplied by the user.</span></span>

> [!Note]  
> <span data-ttu-id="31e28-121">Если приостановленные состояния не включены, то при **сзкаллбаккнумбер** указывает на звездочку в виде строки " \* ".</span><span class="sxs-lookup"><span data-stu-id="31e28-121">If paused states are not enabled there is a different meaning when **szCallbackNumber** points to an asterisk string, "\*".</span></span> <span data-ttu-id="31e28-122">В этом случае звездочка означает, что номер обратного вызова хранится в файле телефонной книги, указанном в вызове [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) .</span><span class="sxs-lookup"><span data-stu-id="31e28-122">In this case, the asterisk indicates that the callback number is stored in the phone-book file specified by the [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala) call.</span></span>

 

<span data-ttu-id="31e28-123">В случае обратного вызова вызов функции [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) не возвращает значение до тех пор, пока сервер не выполнит обратный вызов клиента.</span><span class="sxs-lookup"><span data-stu-id="31e28-123">In the event of a callback, the call to [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala) does not return until after the server has called back the client.</span></span>

 

 