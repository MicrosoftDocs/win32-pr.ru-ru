---
title: Сведения об администрировании сервера удаленного доступа и порта
description: Функции администрирования сервера RAS получают сведения об указанном сервере RAS и его портах. Эти функции также используются для завершения подключения на указанном порту сервера удаленного доступа.
ms.assetid: eedac23e-d716-451e-b08b-594398656bb5
keywords:
- Администрирование удаленного доступа RRAS, администрирование сервера и порта
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4cb9d3cc520efa6bbb492e8d9e967d423548f96a
ms.sourcegitcommit: cba7f424a292fd7f3a8518947b9466439b455419
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/23/2019
ms.locfileid: "104487196"
---
# <a name="about-ras-server-and-port-administration"></a><span data-ttu-id="94371-105">Сведения об администрировании сервера удаленного доступа и порта</span><span class="sxs-lookup"><span data-stu-id="94371-105">About RAS Server and Port Administration</span></span>

<span data-ttu-id="94371-106">Функции администрирования сервера RAS получают сведения об указанном сервере RAS и его портах.</span><span class="sxs-lookup"><span data-stu-id="94371-106">The RAS server administration functions get information about a specified RAS server and its ports.</span></span> <span data-ttu-id="94371-107">Эти функции также используются для завершения подключения на указанном порту сервера удаленного доступа.</span><span class="sxs-lookup"><span data-stu-id="94371-107">These functions are also used to terminate a connection on a specified RAS server port.</span></span>

<span data-ttu-id="94371-108">Функция [**мпрадминсервержетинфо**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminservergetinfo) возвращает структуру [**сервера MPR \_ \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_server_0) , содержащую сведения о конфигурации сервера удаленного доступа.</span><span class="sxs-lookup"><span data-stu-id="94371-108">The [**MprAdminServerGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminservergetinfo) function returns a [**MPR\_SERVER\_0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_server_0) structure that contains information about the configuration of a RAS server.</span></span> <span data-ttu-id="94371-109">Возвращаемые сведения включают число портов, доступных в настоящее время для подключений, число портов, используемых в настоящий момент, и номер версии сервера.</span><span class="sxs-lookup"><span data-stu-id="94371-109">The returned information includes the number of ports currently available for connections, the number of ports currently in use, and the server version number.</span></span>

<span data-ttu-id="94371-110">Функция [**мпрадминпортенум**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) извлекает массив структур [**\_ порта RAS \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) .</span><span class="sxs-lookup"><span data-stu-id="94371-110">The [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) function retrieves an array of [**RAS\_PORT\_0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) structures.</span></span> <span data-ttu-id="94371-111">Каждая структура содержит сведения для одного из портов, настроенных на сервере удаленного доступа.</span><span class="sxs-lookup"><span data-stu-id="94371-111">Each structure contains information for one of the ports configured on a RAS server.</span></span> <span data-ttu-id="94371-112">Сведения для каждого порта включают в себя:</span><span class="sxs-lookup"><span data-stu-id="94371-112">The information for each port includes:</span></span>

-   <span data-ttu-id="94371-113">Имя порта</span><span class="sxs-lookup"><span data-stu-id="94371-113">The name of the port</span></span>
-   <span data-ttu-id="94371-114">Сведения об устройстве, подключенном к порту</span><span class="sxs-lookup"><span data-stu-id="94371-114">Information about the device attached to the port</span></span>
-   <span data-ttu-id="94371-115">Является ли RAS-сервер, связанный с портом, сервером Windows NT или Windows 2000</span><span class="sxs-lookup"><span data-stu-id="94371-115">Whether the RAS server associated with the port is a Windows NT/Windows 2000 Server</span></span>
-   <span data-ttu-id="94371-116">Используется ли порт в данный момент, и, если это так, сведения о подключении</span><span class="sxs-lookup"><span data-stu-id="94371-116">Whether the port is currently in use and, if it is, information about the connection</span></span>

<span data-ttu-id="94371-117">Чтобы получить порты, используемые конкретным подключением, передайте [**мпрадминпортенум**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) маркера в это соединение в параметре *хконнектион* .</span><span class="sxs-lookup"><span data-stu-id="94371-117">To obtain the ports in use by a specific connection, pass [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) a handle to that connection in the *hConnection* parameter.</span></span> <span data-ttu-id="94371-118">Чтобы получить маркер соединения, используйте функцию [**мпрадминконнектионенум**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionenum) .</span><span class="sxs-lookup"><span data-stu-id="94371-118">To obtain a handle to a connection, use the [**MprAdminConnectionEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionenum) function.</span></span> <span data-ttu-id="94371-119">Кроме того, если вы реализовали [библиотеку DLL администрирования RAS](ras-administration-dll.md), функции [**мпрадминакцептневконнектион**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) и [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) получают маркер для каждого нового подключения во время установки соединения.</span><span class="sxs-lookup"><span data-stu-id="94371-119">Alternatively, if you have implemented a [RAS Administration DLL](ras-administration-dll.md), the [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) and [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) functions receive a handle to each new connection at the time the connection is established.</span></span>

<span data-ttu-id="94371-120">Вы можете вызвать функцию [**мпрадминпортжетинфо**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) , чтобы получить дополнительные сведения об указанном порте на сервере удаленного доступа.</span><span class="sxs-lookup"><span data-stu-id="94371-120">You can call the [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) function to get additional information about a specified port on a RAS server.</span></span> <span data-ttu-id="94371-121">Эта функция возвращает структуру [**\_ порта RAS \_ 1**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_1) , которая содержит структуру [**\_ порта RAS \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) и дополнительные сведения о текущем состоянии порта.</span><span class="sxs-lookup"><span data-stu-id="94371-121">This function returns a [**RAS\_PORT\_1**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_1) structure that contains a [**RAS\_PORT\_0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) structure and additional information about the current state of the port.</span></span> <span data-ttu-id="94371-122">Функция [**расадминпортжетинфо**](rasadminportgetinfo.md) также возвращает массив структур [**\_ параметров RAS**](ras-parameters-str.md) , описывающих значения всех ключей, связанных с портом.</span><span class="sxs-lookup"><span data-stu-id="94371-122">The [**RasAdminPortGetInfo**](rasadminportgetinfo.md) function also returns an array of [**RAS\_PARAMETERS**](ras-parameters-str.md) structures that describe the values of any media-specific keys associated with the port.</span></span> <span data-ttu-id="94371-123">Структура **\_ параметров RAS** использует значение из перечисления [**\_ \_ форматов params RAS**](ras-params-format-str.md) , чтобы указать формат значения для каждого ключа, относящегося к носителю.</span><span class="sxs-lookup"><span data-stu-id="94371-123">A **RAS\_PARAMETERS** structure uses a value from the [**RAS\_PARAMS\_FORMAT**](ras-params-format-str.md) enumeration to indicate the format of the value for each media-specific key.</span></span>

<span data-ttu-id="94371-124">Функция [**мпрадминпортжетинфо**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) также возвращает структуру [**\_ \_ статистики порта RAS**](ras-port-statistics-str.md) , которая содержит различные статистические счетчики для текущего соединения (если таковые имеются) в порте.</span><span class="sxs-lookup"><span data-stu-id="94371-124">The [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) function also returns a [**RAS\_PORT\_STATISTICS**](ras-port-statistics-str.md) structure that contains various statistic counters for the current connection, if any, on the port.</span></span> <span data-ttu-id="94371-125">Для порта, который является частью многоканального подключения, **мпрадминпортжетинфо** возвращает статистику для отдельного порта и совокупную статистику для всех портов, участвующих в соединении.</span><span class="sxs-lookup"><span data-stu-id="94371-125">For a port that is part of a multilink connection, **MprAdminPortGetInfo** returns statistics for the individual port and cumulative statistics for all ports involved in the connection.</span></span> <span data-ttu-id="94371-126">Для сброса счетчиков статистики для порта можно использовать функцию [**мпрадминпортклеарстатс**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportclearstats) .</span><span class="sxs-lookup"><span data-stu-id="94371-126">You can use the [**MprAdminPortClearStats**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportclearstats) function to reset the statistic counters for the port.</span></span> <span data-ttu-id="94371-127">Функция [**мпрадминпортдисконнект**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportdisconnect) отключает используемый порт.</span><span class="sxs-lookup"><span data-stu-id="94371-127">The [**MprAdminPortDisconnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportdisconnect) function disconnects a port that is in use.</span></span>

<span data-ttu-id="94371-128">Используйте функцию [**мпрадминбуфферфри**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminbufferfree) для освобождения памяти, выделенной функциями [**мпрадминпортенум**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) и [**мпрадминпортжетинфо**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) .</span><span class="sxs-lookup"><span data-stu-id="94371-128">Use the [**MprAdminBufferFree**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminbufferfree) function to free memory allocated by the [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) and [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) functions.</span></span> <span data-ttu-id="94371-129">Используйте функцию [**мпрадминжетеррорстринг**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingeterrorstring) для получения строки, которая описывает код ошибки RAS, возвращенный одной из функций администрирования сервера RAS (расадмин).</span><span class="sxs-lookup"><span data-stu-id="94371-129">Use the [**MprAdminGetErrorString**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingeterrorstring) function to get a string that describes a RAS error code returned by one of the RAS server administration (RasAdmin) functions.</span></span>

 

 




