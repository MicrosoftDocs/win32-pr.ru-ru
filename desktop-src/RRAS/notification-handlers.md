---
title: Обработчики уведомлений
description: Асинхронный вызов RasDial должен указывать обработчик уведомлений.
ms.assetid: 6d23d6ac-08ad-4fe2-a4af-021e4d384079
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: efe735a17de4386bc48648cd20decd218ab102d2
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986790"
---
# <a name="notification-handlers"></a><span data-ttu-id="0fbce-103">Обработчики уведомлений</span><span class="sxs-lookup"><span data-stu-id="0fbce-103">Notification Handlers</span></span>

<span data-ttu-id="0fbce-104">Асинхронный вызов [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) должен указывать обработчик уведомлений.</span><span class="sxs-lookup"><span data-stu-id="0fbce-104">An asynchronous [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala) call must specify a notification handler.</span></span> <span data-ttu-id="0fbce-105">Во время асинхронной операции подключения диспетчер подключений удаленного доступа использует обработчик уведомлений для информирования клиента RAS при изменении [состояния соединения](connection-states.md) или при возникновении ошибки.</span><span class="sxs-lookup"><span data-stu-id="0fbce-105">During an asynchronous connection operation, the Remote Access Connection Manager uses the notification handler to inform the RAS client whenever the [connection state](connection-states.md) changes or an error occurs.</span></span>

<span data-ttu-id="0fbce-106">Действия, выполняемые обработчиком уведомлений, можно разделить на следующие категории:</span><span class="sxs-lookup"><span data-stu-id="0fbce-106">The actions performed by a notification handler can be divided into the following categories:</span></span>

-   <span data-ttu-id="0fbce-107">[Обработка ошибок](handling-ras-errors.md).</span><span class="sxs-lookup"><span data-stu-id="0fbce-107">[Handling errors](handling-ras-errors.md).</span></span>
-   <span data-ttu-id="0fbce-108">Предоставление пользователю отзывов о том, что операция подключения продолжается через различные состояния подключения.</span><span class="sxs-lookup"><span data-stu-id="0fbce-108">Providing feedback to the user as the connection operation proceeds through the various connection states.</span></span> <span data-ttu-id="0fbce-109">См. [информационные уведомления](informational-notifications.md).</span><span class="sxs-lookup"><span data-stu-id="0fbce-109">See [Informational Notifications](informational-notifications.md).</span></span>
-   <span data-ttu-id="0fbce-110">Обработка [приостановленных состояний](paused-states.md).</span><span class="sxs-lookup"><span data-stu-id="0fbce-110">Handling [paused states](paused-states.md).</span></span>
-   <span data-ttu-id="0fbce-111">Сигнализация клиентского приложения RAS о завершении операции подключения.</span><span class="sxs-lookup"><span data-stu-id="0fbce-111">Signaling the RAS client application when the connection operation has been completed.</span></span> <span data-ttu-id="0fbce-112">См. [уведомления о завершении](completion-notifications.md).</span><span class="sxs-lookup"><span data-stu-id="0fbce-112">See [Completion Notifications](completion-notifications.md).</span></span>

<span data-ttu-id="0fbce-113">Существует три типа обработчиков уведомлений, каждый из которых получает одну и ту же основную информацию: текущее состояние соединения и код ошибки, которые не равны нулю, только если произошла ошибка.</span><span class="sxs-lookup"><span data-stu-id="0fbce-113">There are three types of notification handlers, each of which receives the same basic information: the current connection state and an error code that is nonzero only if an error has occurred.</span></span>



| <span data-ttu-id="0fbce-114">Значение</span><span class="sxs-lookup"><span data-stu-id="0fbce-114">Value</span></span>                                | <span data-ttu-id="0fbce-115">Определение</span><span class="sxs-lookup"><span data-stu-id="0fbce-115">Definition</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|--------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="0fbce-116">**расдиалфунк**</span><span class="sxs-lookup"><span data-stu-id="0fbce-116">**RasDialFunc**</span></span>](/windows/desktop/api/Ras/nc-ras-rasdialfunc)   | <span data-ttu-id="0fbce-117">Прототип функции обратного вызова, который получает только текущее состояние соединения и сведения о коде ошибки.</span><span class="sxs-lookup"><span data-stu-id="0fbce-117">A callback function prototype that receives only the current connection state and error code information.</span></span>                                                                                                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="0fbce-118">**RasDialFunc1**</span><span class="sxs-lookup"><span data-stu-id="0fbce-118">**RasDialFunc1**</span></span>](/windows/desktop/api/Ras/nc-ras-rasdialfunc1) | <span data-ttu-id="0fbce-119">Прототип функции обратного вызова, который получает обработчик подключения **храсконн** и расширенные сведения об ошибке в дополнение к основным сведениям.</span><span class="sxs-lookup"><span data-stu-id="0fbce-119">A callback function prototype that receives the **HRASCONN** connection handle and extended error information in addition to the basic information.</span></span> <span data-ttu-id="0fbce-120">Параметр Handle для подключения делает [**RasDialFunc1**](/windows/desktop/api/Ras/nc-ras-rasdialfunc1) полезным для клиентских приложений, поддерживающих несколько одновременных операций подключения.</span><span class="sxs-lookup"><span data-stu-id="0fbce-120">The connection handle parameter makes [**RasDialFunc1**](/windows/desktop/api/Ras/nc-ras-rasdialfunc1) useful for client applications that support multiple simultaneous connection operations.</span></span> <span data-ttu-id="0fbce-121">Это позволяет клиенту указать одну и ту же функцию обратного вызова для всех операций, а также позволяет функции обратного вызова определить, какое подключение изменяет состояния.</span><span class="sxs-lookup"><span data-stu-id="0fbce-121">This allows the client to specify the same callback function for all operations, and enables the callback function to determine which connection is changing states.</span></span> |
| [<span data-ttu-id="0fbce-122">**RasDialFunc2**</span><span class="sxs-lookup"><span data-stu-id="0fbce-122">**RasDialFunc2**</span></span>](/windows/desktop/api/Ras/nc-ras-rasdialfunc2) | <span data-ttu-id="0fbce-123">Функция обратного вызова, аналогичная [**RasDialFunc1**](/windows/desktop/api/Ras/nc-ras-rasdialfunc1).</span><span class="sxs-lookup"><span data-stu-id="0fbce-123">A callback function similar to [**RasDialFunc1**](/windows/desktop/api/Ras/nc-ras-rasdialfunc1).</span></span> <span data-ttu-id="0fbce-124">Однако [**RasDialFunc2**](/windows/desktop/api/Ras/nc-ras-rasdialfunc2) усовершенствован для поддержки многоканальных подключений.</span><span class="sxs-lookup"><span data-stu-id="0fbce-124">However, [**RasDialFunc2**](/windows/desktop/api/Ras/nc-ras-rasdialfunc2) is enhanced to support multilink connections.</span></span>                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="0fbce-125">Маркер окна</span><span class="sxs-lookup"><span data-stu-id="0fbce-125">Window handle</span></span>                        | <span data-ttu-id="0fbce-126">Описатель окна, на который служба RAS отправляет сообщения [**WM \_ расдиалевент**](wm-rasdialevent.md) , содержащие сведения о текущем состоянии соединения и коде ошибки.</span><span class="sxs-lookup"><span data-stu-id="0fbce-126">A window handle to which RAS sends [**WM\_RASDIALEVENT**](wm-rasdialevent.md) messages containing the current connection state and error code information.</span></span> <span data-ttu-id="0fbce-127">Используйте этот метод, если исходный код должен быть совместим с 16-разрядной версией Windows, поскольку 16-разрядная версия Windows не поддерживает ни одну из функций обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="0fbce-127">Use this method if your source code must be compatible with 16-bit Windows, because 16-bit Windows does not support either of the callback functions.</span></span>                                                                                                                                                                            |



 

<span data-ttu-id="0fbce-128">Диспетчер подключений удаленного доступа приостанавливает операцию подключения до тех пор, пока обработчик уведомлений не вернет значение.</span><span class="sxs-lookup"><span data-stu-id="0fbce-128">The Remote Access Connection Manager suspends the connection operation until the notification handler returns.</span></span> <span data-ttu-id="0fbce-129">По этой причине обработчик должен возвращать как можно скорее, если не возникла ошибка.</span><span class="sxs-lookup"><span data-stu-id="0fbce-129">For this reason, the handler should return as soon as possible unless an error has occurred.</span></span>

<span data-ttu-id="0fbce-130">Функцию [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) не следует вызывать из обработчика уведомлений.</span><span class="sxs-lookup"><span data-stu-id="0fbce-130">The [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala) function should not be called from within a notification handler.</span></span> <span data-ttu-id="0fbce-131">Другие функции удаленного доступа ( [**расжетконнектстатус**](/windows/desktop/api/Ras/nf-ras-rasgetconnectstatusa), [**расенументриес**](/windows/desktop/api/Ras/nf-ras-rasenumentriesa), [**расенумконнектионс**](/windows/desktop/api/Ras/nf-ras-rasenumconnectionsa), [**расжетеррорстринг**](/windows/desktop/api/Ras/nf-ras-rasgeterrorstringa)и [**рашангуп**](/windows/desktop/api/Ras/nf-ras-rashangupa)) могут быть вызваны из обработчика.</span><span class="sxs-lookup"><span data-stu-id="0fbce-131">The other remote access functions ( [**RasGetConnectStatus**](/windows/desktop/api/Ras/nf-ras-rasgetconnectstatusa), [**RasEnumEntries**](/windows/desktop/api/Ras/nf-ras-rasenumentriesa), [**RasEnumConnections**](/windows/desktop/api/Ras/nf-ras-rasenumconnectionsa), [**RasGetErrorString**](/windows/desktop/api/Ras/nf-ras-rasgeterrorstringa), and [**RasHangUp**](/windows/desktop/api/Ras/nf-ras-rashangupa)) can be called from within a handler.</span></span>

 

 




