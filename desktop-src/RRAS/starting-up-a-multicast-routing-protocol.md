---
title: Запуск протокола многоадресной маршрутизации
description: В следующей таблице приведена последовательность действий по взаимодействию при запуске между протоколом маршрутизации и диспетчером групп многоадресной рассылки.
ms.assetid: 14524745-5cf9-442c-a5b4-b1ef313151cf
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 63fc5dc5b25541c798ac0907a54dd19105a4c641
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104488072"
---
# <a name="starting-up-a-multicast-routing-protocol"></a><span data-ttu-id="e9e19-103">Запуск протокола многоадресной маршрутизации</span><span class="sxs-lookup"><span data-stu-id="e9e19-103">Starting Up a Multicast Routing Protocol</span></span>

<span data-ttu-id="e9e19-104">В следующей таблице приведена последовательность действий по взаимодействию при запуске между протоколом маршрутизации и диспетчером групп многоадресной рассылки.</span><span class="sxs-lookup"><span data-stu-id="e9e19-104">The following table summarizes a series of steps in a startup interaction between a routing protocol and the multicast group manager.</span></span> <span data-ttu-id="e9e19-105">В первом столбце описываются действия, выполняемые протоколом маршрутизации, а также ответы протокола маршрутизации к диспетчеру групп многоадресной рассылки.</span><span class="sxs-lookup"><span data-stu-id="e9e19-105">The first column describes actions that the routing protocol performs and the responses of the routing protocol to the multicast group manager.</span></span> <span data-ttu-id="e9e19-106">Во втором столбце описаны ответы диспетчера групп многоадресной рассылки по протоколу маршрутизации и действия, выполняемые диспетчером групп многоадресной рассылки, такие как обратные вызовы.</span><span class="sxs-lookup"><span data-stu-id="e9e19-106">The second column describes the multicast group manager's responses to the routing protocol and any actions the multicast group manager performs such as callbacks.</span></span> <span data-ttu-id="e9e19-107">В третьем столбце представлены дополнительные сведения.</span><span class="sxs-lookup"><span data-stu-id="e9e19-107">The third column presents any additional information.</span></span>

<span data-ttu-id="e9e19-108">Каждая строка таблицы представляет один шаг.</span><span class="sxs-lookup"><span data-stu-id="e9e19-108">Each row of the table represents one step.</span></span>



| <span data-ttu-id="e9e19-109">Действие протокола маршрутизации</span><span class="sxs-lookup"><span data-stu-id="e9e19-109">Routing protocol action</span></span>                                                                                                                                                                                                                                                                                                                 | <span data-ttu-id="e9e19-110">Действие диспетчера групп многоадресной рассылки</span><span class="sxs-lookup"><span data-stu-id="e9e19-110">Multicast group manager action</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                            | <span data-ttu-id="e9e19-111">Примечания</span><span class="sxs-lookup"><span data-stu-id="e9e19-111">Notes</span></span>                                                                                                                                                                                                                                   |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e9e19-112">Зарегистрируйтесь в диспетчере групп многоадресной рассылки с помощью функции [**мгмрегистермпротокол**](/windows/desktop/api/Mgm/nf-mgm-mgmregistermprotocol) .</span><span class="sxs-lookup"><span data-stu-id="e9e19-112">Register with the multicast group manager using the [**MgmRegisterMProtocol**](/windows/desktop/api/Mgm/nf-mgm-mgmregistermprotocol) function.</span></span>                                                                                                                                                                                                                      | <span data-ttu-id="e9e19-113">Вернитесь к протоколу маршрутизации, который должен использоваться протоколом для идентификации в последующих вызовах API МГМ.</span><span class="sxs-lookup"><span data-stu-id="e9e19-113">Return to the routing protocol a handle that the protocol must use to identify itself in subsequent MGM API calls.</span></span>                                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                                                                         |
| <span data-ttu-id="e9e19-114">Определите, владеет ли уже интерфейс, и протокол маршрутизации, который его владеет, с помощью функции [**мгмжетпротоколонинтерфаце**](/windows/desktop/api/Mgm/nf-mgm-mgmgetprotocoloninterface) .</span><span class="sxs-lookup"><span data-stu-id="e9e19-114">Determine if an interface is already owned, and the routing protocol that owns it using the [**MgmGetProtocolOnInterface**](/windows/desktop/api/Mgm/nf-mgm-mgmgetprotocoloninterface) function.</span></span>                                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | <span data-ttu-id="e9e19-115">Протокол IGMP может использовать эту функцию для определения владельца интерфейса и выполнения обработки, зависящей от протокола, с информацией, возвращаемой этой функцией.</span><span class="sxs-lookup"><span data-stu-id="e9e19-115">IGMP can use this function to determine the owner of an interface, and perform protocol-specific processing with the information returned by this function.</span></span>                                                                             |
| <span data-ttu-id="e9e19-116">Стать владельцем всех интерфейсов, на которых включен протокол, с помощью функции [**мгмтакеинтерфацеовнершип**](/windows/desktop/api/Mgm/nf-mgm-mgmtakeinterfaceownership) .</span><span class="sxs-lookup"><span data-stu-id="e9e19-116">Take ownership of all the interfaces on which the protocol is enabled using the [**MgmTakeInterfaceOwnership**](/windows/desktop/api/Mgm/nf-mgm-mgmtakeinterfaceownership) function.</span></span>                                                                                                                                                                                | <span data-ttu-id="e9e19-117">Если протокол IGMP уже владеет интерфейсом, а вызов функции [**мгмтакеинтерфацеовнершип**](/windows/desktop/api/Mgm/nf-mgm-mgmtakeinterfaceownership) получен для того же интерфейса, обратитесь по адресу IGMP, используя обратный вызов [**\_ \_ \_ обратного вызова IGMP в пмгм Disable**](/windows/win32/api/mgm/nc-mgm-pmgm_disable_igmp_callback) .</span><span class="sxs-lookup"><span data-stu-id="e9e19-117">If IGMP has already taken ownership of an interface and the [**MgmTakeInterfaceOwnership**](/windows/desktop/api/Mgm/nf-mgm-mgmtakeinterfaceownership) function call is received for the same interface, contact IGMP using the [**PMGM\_DISABLE\_IGMP\_CALLBACK**](/windows/win32/api/mgm/nc-mgm-pmgm_disable_igmp_callback) callback.</span></span> <span data-ttu-id="e9e19-118">После внесения всех изменений в многоадресные данные, касающиеся владения интерфейсом, обратитесь к IGMP снова с помощью [**пмгм \_ Enable \_ IGMP \_**](/windows/desktop/api/Mgm/nc-mgm-pmgm_enable_igmp_callback).</span><span class="sxs-lookup"><span data-stu-id="e9e19-118">Once all changes to multicast data regarding interface ownership have been made, contact IGMP again using [**PMGM\_ENABLE\_IGMP\_CALLBACK**](/windows/desktop/api/Mgm/nc-mgm-pmgm_enable_igmp_callback).</span></span><br/> | <span data-ttu-id="e9e19-119">Только один протокол может владеть интерфейсом в определенный момент времени в дополнение к IGMP.</span><span class="sxs-lookup"><span data-stu-id="e9e19-119">Only one protocol can own an interface at a given time, in addition to IGMP.</span></span>                                                                                                                                                            |
| <span data-ttu-id="e9e19-120">Определите текущее состояние членства в группе на маршрутизаторе.</span><span class="sxs-lookup"><span data-stu-id="e9e19-120">Determine the current state of group membership on the router.</span></span> <span data-ttu-id="e9e19-121">Это действие выполняется с помощью функций перечисления членства в группах: [**мгмграупенумератионстарт**](/windows/desktop/api/Mgm/nf-mgm-mgmgroupenumerationstart), [**мгмграупенумератионжетнекст**](/windows/desktop/api/Mgm/nf-mgm-mgmgroupenumerationgetnext)и [**мгмграупенумератионенд**](/windows/desktop/api/Mgm/nf-mgm-mgmgroupenumerationend).</span><span class="sxs-lookup"><span data-stu-id="e9e19-121">This action is performed using the group membership enumeration functions: [**MgmGroupEnumerationStart**](/windows/desktop/api/Mgm/nf-mgm-mgmgroupenumerationstart), [**MgmGroupEnumerationGetNext**](/windows/desktop/api/Mgm/nf-mgm-mgmgroupenumerationgetnext), and [**MgmGroupEnumerationEnd**](/windows/desktop/api/Mgm/nf-mgm-mgmgroupenumerationend).</span></span> | <span data-ttu-id="e9e19-122">Возвращает список групп.</span><span class="sxs-lookup"><span data-stu-id="e9e19-122">Return the list of groups.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                | <span data-ttu-id="e9e19-123">Протоколы маршрутизации могут использовать результаты для определения действий, выполняемых в зависимости от групп, которые уже были присоединены.</span><span class="sxs-lookup"><span data-stu-id="e9e19-123">Routing protocols can use the results to determine what actions to take based on the groups that have already been joined.</span></span> <span data-ttu-id="e9e19-124">Полный пример использования этих функций см. в разделе [Перечисление групп](enumerating-groups.md) .</span><span class="sxs-lookup"><span data-stu-id="e9e19-124">See [Enumerating Groups](enumerating-groups.md) for a complete example of using these functions.</span></span><br/> |



 

 

