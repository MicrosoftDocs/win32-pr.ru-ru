---
title: Сведения об управлении маршрутизаторами с помощью MIB
description: API-интерфейсы базы MIB для управления маршрутизаторами позволяют запрашивать и задавать значения переменных MIB, экспортируемых одним из диспетчеров маршрутизаторов или любыми протоколами маршрутизации, которые служба диспетчера маршрутизаторов.
ms.assetid: d0fafd82-e7cb-4524-a499-d14830f02b21
keywords:
- Маршрутизация, база сведений об управлении
- Маршрутизация, базовая информация об управлении, описание
- Основные сведения об управлении RRAS
- MIB
- MIB, раздел "сведения об управлении"
- Основные сведения об управлении RRAS
- Основные сведения об управлении RRAS, описание
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e015dacc0b36a00ab62d42c710551aa368aa59e0
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103776742"
---
# <a name="about-router-management-with-mib"></a><span data-ttu-id="e2cf5-110">Сведения об управлении маршрутизаторами с помощью MIB</span><span class="sxs-lookup"><span data-stu-id="e2cf5-110">About Router Management with MIB</span></span>

<span data-ttu-id="e2cf5-111">API-интерфейсы базы MIB для управления маршрутизаторами позволяют запрашивать и задавать значения переменных MIB, экспортируемых одним из диспетчеров маршрутизаторов или любыми протоколами маршрутизации, которые служба диспетчера маршрутизаторов.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-111">The Management Information Base (MIB) APIs for router management makes it possible to query and set the values of MIB variables exported by one of the router managers or any of the routing protocols that the router managers service.</span></span> <span data-ttu-id="e2cf5-112">С помощью этого API маршрутизатор поддерживает протокол SNMP.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-112">By using this API, the router supports the Simple Network Management Protocol (SNMP).</span></span>

<span data-ttu-id="e2cf5-113">В платформе SNMP каждый из управляемых объектов маршрутизатора представлен переменной, имеющей уникальный идентификатор объекта (OID).</span><span class="sxs-lookup"><span data-stu-id="e2cf5-113">In the SNMP framework, each of the manageable objects in the router is represented by a variable that has a unique Object Identifier (OID).</span></span> <span data-ttu-id="e2cf5-114">Соответствующий каждому OID соответствует значению, представляющему текущее состояние объекта.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-114">Corresponding to each OID is a value that represents the current state of the object.</span></span> <span data-ttu-id="e2cf5-115">Коллекция OID и значений называется базой данных управления (MIB).</span><span class="sxs-lookup"><span data-stu-id="e2cf5-115">The collection of OIDs and values is referred to as a Management Information Base (MIB).</span></span> <span data-ttu-id="e2cf5-116">Вызовы Мпрадминмиб позволяют разработчику указать объект по его OID и либо запросить, либо записать ("Set") значение объекта.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-116">The MprAdminMib calls allow a developer to specify an object by its OID and either query or write ("Set") the object's value.</span></span>

<span data-ttu-id="e2cf5-117">Чтобы запрашивать и задавать переменные MIB, модуль служб, который выполняет вызовы, должен определить набор структур данных.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-117">To query and set MIB variables, the module that services the calls must define a set of data structures.</span></span> <span data-ttu-id="e2cf5-118">Эти структуры данных включают структуры для использования в качестве идентификаторов объектов и структур, которые содержат значения переменных MIB, к которым осуществляется доступ.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-118">These data structures include structures to use as Object Identifiers and structures that hold the values of the MIB variables being accessed.</span></span> <span data-ttu-id="e2cf5-119">Эти структуры данных являются непрозрачными для всех, кроме вызывающей стороны функции MIB и модуля, обслуживающего вызов.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-119">These data structures are opaque to all but the caller of the MIB function and the module servicing the call.</span></span>

<span data-ttu-id="e2cf5-120">Модуль, обслуживающий вызов MIB, является диспетчером маршрутизатора или одним из протоколов маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-120">The module servicing the MIB call is a router manager or one of the routing protocols.</span></span> <span data-ttu-id="e2cf5-121">Вызывающий объект должен указать Диспетчер маршрутизации, даже если вызов обрабатывается одним из протоколов маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-121">The caller must specify a router manager even if the call is handled by one of the routing protocols.</span></span> <span data-ttu-id="e2cf5-122">В этом случае вызывающий объект должен указать Диспетчер маршрутизаторов, соответствующий семейству протоколов для этого протокола маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-122">In such a case, the caller should specify the router manager that corresponds to the protocol family for that routing protocol.</span></span> <span data-ttu-id="e2cf5-123">Например, если протокол маршрутизации с открытым кратчайшим маршрутом (OSPF) обрабатывает вызов MIB, вызывающему объекту необходимо указать Диспетчер IP-маршрутизаторов, так как OSPF принадлежит семейству IP-протоколов.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-123">For example, if the Open Shortest Path First (OSPF) routing protocol were handling the MIB call, the caller would need to specify the IP Router Manager, since OSPF belongs to the IP protocol family.</span></span> <span data-ttu-id="e2cf5-124">В каждой из функций MIB параметр *двтранспортид* указывает Диспетчер маршрутизации, а параметр *раутингпид* указывает протокол маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-124">In each of the MIB functions, the *dwTransportId* parameter specifies a router manager, and the *RoutingPid* parameter specifies the routing protocol.</span></span> <span data-ttu-id="e2cf5-125">Диспетчер маршрутизаторов также имеет уникальный *раутингпид*, так как некоторые переменные MIB могут обрабатываться самим диспетчером маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-125">The router manager also has a unique *RoutingPid*, since some of the MIB variables may be handled by the router manager itself.</span></span>

<span data-ttu-id="e2cf5-126">Функции Мпрадминмиб можно вызывать на компьютере, отличном от управляемого.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-126">The MprAdminMib functions can be called on a computer other than the one being administered.</span></span> <span data-ttu-id="e2cf5-127">Функции Мпрадминмиб, которые запрашивают или записывают значения, принимают в качестве параметра обработку на компьютер для администрирования.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-127">The MprAdminMIB functions that query or write values, take as a parameter a handle to the computer to administer.</span></span> <span data-ttu-id="e2cf5-128">Используйте функцию [**мпрадминмибсерверконнект**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibserverconnect) для установления соединения с удаленным компьютером и получения этого маркера.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-128">Use the [**MprAdminMIBServerConnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibserverconnect) function to establish the connection to the remote computer and obtain this handle.</span></span> <span data-ttu-id="e2cf5-129">После вызова необходимых функций Мпрадминмиб для выполнения определенной административной задачи вызовите функцию [**мпрадминмибсервердисконнект**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibserverdisconnect) , чтобы завершить подключение к удаленному компьютеру.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-129">After calling the necessary MprAdminMIB functions to accomplish a particular administrative task, call the [**MprAdminMIBServerDisconnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibserverdisconnect) function to terminate the connection to the remote computer.</span></span>

<span data-ttu-id="e2cf5-130">Функции [**мпрадминмибентрикреате**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrycreate) и [**мпрадминмибентрисет**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentryset) принимают в качестве параметров OID и буфер, который содержит новое значение для объекта.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-130">The [**MprAdminMIBEntryCreate**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrycreate) and [**MprAdminMIBEntrySet**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentryset) functions take as parameters an OID and a buffer which contains the new value for the object.</span></span>

<span data-ttu-id="e2cf5-131">Функции [**мпрадминмибентрижет**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentryget), [**мпрадминмибентрижетфирст**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrygetfirst) и [**мпрадминмибентрижетнекст**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrygetnext) принимают в качестве параметров идентификатор объекта и адрес переменной указателя.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-131">The [**MprAdminMIBEntryGet**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentryget), [**MprAdminMIBEntryGetFirst**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrygetfirst) and [**MprAdminMIBEntryGetNext**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrygetnext) functions take as parameters an OID and the address of a pointer variable.</span></span> <span data-ttu-id="e2cf5-132">При успешном возвращении переменная указателя указывает на буфер, содержащий значение для объекта.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-132">On successful return, the pointer variable points to a buffer that contains the value for the object.</span></span> <span data-ttu-id="e2cf5-133">Вызывающий объект должен освободить память для этого буфера, вызвав функцию [**мпрадминмиббуфферфри**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibbufferfree) .</span><span class="sxs-lookup"><span data-stu-id="e2cf5-133">The caller should free the memory for this buffer by calling the [**MprAdminMIBBufferFree**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibbufferfree) function.</span></span>

<span data-ttu-id="e2cf5-134">Функции [**мпрадминмибентрижетфирст**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrygetfirst) и [**мпрадминмибентрижетнекст**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrygetnext) позволяют разработчику выполнять *проверку SNMP*.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-134">The [**MprAdminMIBEntryGetFirst**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrygetfirst) and [**MprAdminMIBEntryGetNext**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminmibentrygetnext) functions enable a developer to perform an *SNMP walk*.</span></span> <span data-ttu-id="e2cf5-135">Так как идентификаторы объектов упорядочены, каждый OID и, следовательно, каждый управляемый объект имеет *следующий* OID.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-135">Because the OIDs are ordered, each OID and therefore each manageable object has a *next* OID.</span></span> <span data-ttu-id="e2cf5-136">Проверка SNMP означает обход части MIB путем считывания или записи последовательности идентификаторов объектов.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-136">An SNMP walk refers to traversing a portion of the MIB by reading or writing a sequence of OIDs.</span></span>

<span data-ttu-id="e2cf5-137">Все вызовы Мпрадминмиб проходят через диспетчер динамического интерфейса (DIM).</span><span class="sxs-lookup"><span data-stu-id="e2cf5-137">All MprAdminMib calls pass through the Dynamic Interface Manager (DIM).</span></span> <span data-ttu-id="e2cf5-138">В зависимости от OID, DIM передает вызов одному из диспетчеров маршрутизаторов.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-138">Depending on the OID, DIM passes the call to one of the router managers.</span></span> <span data-ttu-id="e2cf5-139">(Протокол SNMP и протокол IPX).</span><span class="sxs-lookup"><span data-stu-id="e2cf5-139">(Both IP and IPX support SNMP).</span></span> <span data-ttu-id="e2cf5-140">Опять же, в зависимости от OID диспетчер маршрутизаторов может обрабатывать сам вызов или передавать вызов одному из его клиентов.</span><span class="sxs-lookup"><span data-stu-id="e2cf5-140">Again, depending on the OID, the router manager may handle the call itself, or pass the call to one of its clients.</span></span> <span data-ttu-id="e2cf5-141">Все клиенты маршрутизатора должны реализовать и экспортировать следующие функции, соответствующие аналогично именованным функциям Мпрадминмиб:</span><span class="sxs-lookup"><span data-stu-id="e2cf5-141">All router clients are required to implement and export the following functions which correspond to the similarly named MprAdminMIB functions:</span></span>

-   [<span data-ttu-id="e2cf5-142">**мибкреате**</span><span class="sxs-lookup"><span data-stu-id="e2cf5-142">**MibCreate**</span></span>](/windows/desktop/api/Routprot/nc-routprot-pmib_create)
-   [<span data-ttu-id="e2cf5-143">**мибделете**</span><span class="sxs-lookup"><span data-stu-id="e2cf5-143">**MibDelete**</span></span>](/windows/desktop/api/Routprot/nc-routprot-pmib_delete)
-   [<span data-ttu-id="e2cf5-144">**мибсет**</span><span class="sxs-lookup"><span data-stu-id="e2cf5-144">**MibSet**</span></span>](/windows/desktop/api/Routprot/nc-routprot-pmib_set)
-   [<span data-ttu-id="e2cf5-145">**мибжет**</span><span class="sxs-lookup"><span data-stu-id="e2cf5-145">**MibGet**</span></span>](/windows/desktop/api/Routprot/nc-routprot-pmib_get)
-   [<span data-ttu-id="e2cf5-146">**мибжетфирст**</span><span class="sxs-lookup"><span data-stu-id="e2cf5-146">**MibGetFirst**</span></span>](/windows/desktop/api/Routprot/nc-routprot-pmib_get_first)
-   [<span data-ttu-id="e2cf5-147">**мибжетнекст**</span><span class="sxs-lookup"><span data-stu-id="e2cf5-147">**MibGetNext**</span></span>](/windows/desktop/api/Routprot/nc-routprot-pmib_get_next)
-   [<span data-ttu-id="e2cf5-148">**мибжеттрапинфо**</span><span class="sxs-lookup"><span data-stu-id="e2cf5-148">**MibGetTrapInfo**</span></span>](/windows/desktop/api/Routprot/nc-routprot-pmib_get_trap_info)
-   [<span data-ttu-id="e2cf5-149">**мибсеттрапинфо**</span><span class="sxs-lookup"><span data-stu-id="e2cf5-149">**MibSetTrapInfo**</span></span>](/windows/desktop/api/Routprot/nc-routprot-pmib_set_trap_info)

 

 




