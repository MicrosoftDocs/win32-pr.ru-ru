---
title: Завершение работы протокола многоадресной маршрутизации
description: В следующей таблице приведена последовательность действий по взаимодействию при завершении работы между диспетчером групп многоадресной рассылки и протоколом маршрутизации при завершении работы протокола маршрутизации.
ms.assetid: d868218d-7939-45d1-9e2f-3415c40f1a62
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 08d35285bdf613cb8ec5966fa438742004a97c0a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103793146"
---
# <a name="shutting-down-a-multicast-routing-protocol"></a><span data-ttu-id="52303-103">Завершение работы протокола многоадресной маршрутизации</span><span class="sxs-lookup"><span data-stu-id="52303-103">Shutting Down a Multicast Routing Protocol</span></span>

<span data-ttu-id="52303-104">В следующей таблице приведена последовательность действий по взаимодействию при завершении работы между диспетчером групп многоадресной рассылки и протоколом маршрутизации при завершении работы протокола маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="52303-104">The following table summarizes a series of steps in a shutdown interaction between the multicast group manager and the routing protocol when the routing protocol is shutting down.</span></span> <span data-ttu-id="52303-105">В первом столбце описываются действия, выполняемые протоколом маршрутизации, а также ответы протокола маршрутизации к диспетчеру групп многоадресной рассылки.</span><span class="sxs-lookup"><span data-stu-id="52303-105">The first column describes the actions that the routing protocol performs and the routing protocol's responses to the multicast group manager.</span></span> <span data-ttu-id="52303-106">Во втором столбце описаны ответы диспетчера групп многоадресной рассылки по протоколу маршрутизации и действия, выполняемые диспетчером групп многоадресной рассылки, такие как обратные вызовы.</span><span class="sxs-lookup"><span data-stu-id="52303-106">The second column describes the multicast group manager's responses to the routing protocol and any actions the multicast group manager performs such as callbacks.</span></span> <span data-ttu-id="52303-107">В третьем столбце представлены дополнительные сведения.</span><span class="sxs-lookup"><span data-stu-id="52303-107">The third column presents any additional information.</span></span>

<span data-ttu-id="52303-108">Каждая строка таблицы представляет один шаг.</span><span class="sxs-lookup"><span data-stu-id="52303-108">Each row of the table represents one step.</span></span>



| <span data-ttu-id="52303-109">Действие протокола маршрутизации</span><span class="sxs-lookup"><span data-stu-id="52303-109">Routing protocol action</span></span>                                                                                                                                     | <span data-ttu-id="52303-110">Действие диспетчера групп многоадресной рассылки</span><span class="sxs-lookup"><span data-stu-id="52303-110">Multicast group manager action</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                            | <span data-ttu-id="52303-111">Примечания</span><span class="sxs-lookup"><span data-stu-id="52303-111">Notes</span></span>                                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|
| <span data-ttu-id="52303-112">Выпустите владение каждым интерфейсом, владельцем которого является протокол маршрутизации, с помощью функции [**мгмрелеасеинтерфацеовнершип**](/windows/desktop/api/Mgm/nf-mgm-mgmreleaseinterfaceownership) .</span><span class="sxs-lookup"><span data-stu-id="52303-112">Release ownership of each interface that the routing protocol owns using the [**MgmReleaseInterfaceOwnership**](/windows/desktop/api/Mgm/nf-mgm-mgmreleaseinterfaceownership) function.</span></span> | <span data-ttu-id="52303-113">Если на интерфейсе, который был только что выпущен протоколом маршрутизации, запущена служба IGMP, обратитесь по адресу IGMP с помощью обратного вызова [**пмгм \_ disable \_ IGMP \_**](/windows/win32/api/mgm/nc-mgm-pmgm_disable_igmp_callback) .</span><span class="sxs-lookup"><span data-stu-id="52303-113">If IGMP is also running on the interface that was just released by a routing protocol, contact IGMP using the [**PMGM\_DISABLE\_IGMP\_CALLBACK**](/windows/win32/api/mgm/nc-mgm-pmgm_disable_igmp_callback) callback.</span></span> <span data-ttu-id="52303-114">После внесения всех изменений в многоадресные данные, касающиеся владения интерфейсом, обратитесь к IGMP снова, используя обратный вызов [**пмгм \_ Enable \_ IGMP \_**](/windows/desktop/api/Mgm/nc-mgm-pmgm_enable_igmp_callback) .</span><span class="sxs-lookup"><span data-stu-id="52303-114">Once all changes to multicast data regarding interface ownership have been made, contact IGMP again using [**PMGM\_ENABLE\_IGMP\_CALLBACK**](/windows/desktop/api/Mgm/nc-mgm-pmgm_enable_igmp_callback) callback.</span></span><br/> <span data-ttu-id="52303-115">Удалите все записи перенаправления, связанные с этим интерфейсом.</span><span class="sxs-lookup"><span data-stu-id="52303-115">Delete all the forwarding entries associated with this interface.</span></span><br/> |                                                                           |
| <span data-ttu-id="52303-116">Отмените регистрацию в диспетчере групп многоадресной рассылки с помощью функции [**мгмдерегистермпротокол**](/windows/desktop/api/Mgm/nf-mgm-mgmderegistermprotocol) .</span><span class="sxs-lookup"><span data-stu-id="52303-116">Deregister with the multicast group manager using the [**MgmDeRegisterMProtocol**](/windows/desktop/api/Mgm/nf-mgm-mgmderegistermprotocol) function.</span></span>                                    | <span data-ttu-id="52303-117">Удалите маркер, возвращенный протоколу маршрутизации, с помощью предыдущего вызова функции [**мгмдерегистермпротокол**](/windows/desktop/api/Mgm/nf-mgm-mgmderegistermprotocol) .</span><span class="sxs-lookup"><span data-stu-id="52303-117">Destroy the handle that was returned to the routing protocol by a previous call to the [**MgmDeRegisterMProtocol**](/windows/desktop/api/Mgm/nf-mgm-mgmderegistermprotocol) function.</span></span>                                                                                                                                                                                                                                                                                                                 | <span data-ttu-id="52303-118">Протокол маршрутизации больше не может использовать этот обработчик для вызова функций МГМ.</span><span class="sxs-lookup"><span data-stu-id="52303-118">The routing protocol can no longer use this handle to call MGM functions.</span></span> |



 

 

