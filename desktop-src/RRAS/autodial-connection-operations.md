---
title: Операции подключения автонабора
description: Если попытка подключения к сетевому адресу завершается сбоем из-за недоступности узла, система выполняет поиск адреса в базе данных сопоставления автоматического набора номера.
ms.assetid: 343ee69e-1ff5-4107-9ddb-4245c3b4a54d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 150fa8542d1724be9d60f997db7952d6df387b9b
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104413056"
---
# <a name="autodial-connection-operations"></a><span data-ttu-id="a9db4-103">Операции подключения автонабора</span><span class="sxs-lookup"><span data-stu-id="a9db4-103">AutoDial Connection Operations</span></span>

<span data-ttu-id="a9db4-104">Если попытка подключения к сетевому адресу завершается сбоем из-за недоступности узла, система выполняет поиск адреса в базе данных сопоставления автоматического набора номера.</span><span class="sxs-lookup"><span data-stu-id="a9db4-104">When an attempt to connect to a network address fails because the host cannot be reached, the system searches the AutoDial mapping database for the address.</span></span> <span data-ttu-id="a9db4-105">Если адрес находится в базе данных, система инициирует операцию автонабора для [**расаутодиалентри**](/previous-versions/windows/desktop/legacy/aa376721(v=vs.85))(если таковая имеется), которая соответствует локальному телефонному расположению TAPI.</span><span class="sxs-lookup"><span data-stu-id="a9db4-105">If the address is in the database, the system initiates an AutoDial operation for the [**RASAUTODIALENTRY**](/previous-versions/windows/desktop/legacy/aa376721(v=vs.85)), if any, that corresponds to the local TAPI dialing location.</span></span>

<span data-ttu-id="a9db4-106">API RAS предоставляет функции, позволяющие задавать и запрашивать параметры автонабора, которые управляют подключениями автонабора.</span><span class="sxs-lookup"><span data-stu-id="a9db4-106">The RAS API provides functions that enable you to set and query AutoDial parameters that control AutoDial connections.</span></span> <span data-ttu-id="a9db4-107">Вы можете вызвать функцию [**рассетаутодиаленабле**](/windows/desktop/api/Ras/nf-ras-rassetautodialenablea) , чтобы включить или отключить функцию автоматического набора номера для УКАЗАННОГО местоположения TAPI.</span><span class="sxs-lookup"><span data-stu-id="a9db4-107">You can call the [**RasSetAutodialEnable**](/windows/desktop/api/Ras/nf-ras-rassetautodialenablea) function to enable or disable the AutoDial feature for a specified TAPI dialing location.</span></span> <span data-ttu-id="a9db4-108">Функция [**расжетаутодиаленабле**](/windows/desktop/api/Ras/nf-ras-rasgetautodialenablea) указывает, включена ли функция автоматического набора номера для указанного места вызова TAPI.</span><span class="sxs-lookup"><span data-stu-id="a9db4-108">The [**RasGetAutodialEnable**](/windows/desktop/api/Ras/nf-ras-rasgetautodialenablea) function indicates whether the AutoDial feature is enabled for a specified TAPI dialing location.</span></span> <span data-ttu-id="a9db4-109">Дополнительные сведения о расположении набора номера TAPI см. в документации по интерфейсу TAPI.</span><span class="sxs-lookup"><span data-stu-id="a9db4-109">For more information about TAPI dialing locations, see the TAPI documentation.</span></span> <span data-ttu-id="a9db4-110">Для задания других параметров подключения автонабора можно вызвать функцию [**рассетаутодиалпарам**](/windows/desktop/api/Ras/nf-ras-rassetautodialparama) .</span><span class="sxs-lookup"><span data-stu-id="a9db4-110">You can call the [**RasSetAutodialParam**](/windows/desktop/api/Ras/nf-ras-rassetautodialparama) function to set other AutoDial connection parameters.</span></span> <span data-ttu-id="a9db4-111">Например, можно отключить автонабор подключений для текущего сеанса входа в систему.</span><span class="sxs-lookup"><span data-stu-id="a9db4-111">For example, you can disable AutoDial connections for the current logon session.</span></span> <span data-ttu-id="a9db4-112">Вызовите функцию [**расжетаутодиалпарам**](/windows/desktop/api/Ras/nf-ras-rasgetautodialparama) , чтобы определить текущее значение параметров автоматического подключения.</span><span class="sxs-lookup"><span data-stu-id="a9db4-112">Call the [**RasGetAutodialParam**](/windows/desktop/api/Ras/nf-ras-rasgetautodialparama) function to determine the current value of the AutoDial connection parameters.</span></span>

<span data-ttu-id="a9db4-113">Система предоставляет пользовательский интерфейс по умолчанию для операций автонабора номера.</span><span class="sxs-lookup"><span data-stu-id="a9db4-113">The system provides a default user interface for AutoDial dialing operations.</span></span> <span data-ttu-id="a9db4-114">Однако можно создать библиотеку динамической компоновки (DLL) автоматического набора номера, чтобы предоставить настраиваемый пользовательский интерфейс для операций автонабора номеров, включающих указанные записи телефонной книги.</span><span class="sxs-lookup"><span data-stu-id="a9db4-114">However, you can create an AutoDial dynamic-link library (DLL) to provide a custom user interface for AutoDial dialing operations involving specified phone-book entries.</span></span> <span data-ttu-id="a9db4-115">Библиотека DLL автонабора должна экспортировать как ANSI, так и Юникод-версию обработчика автонабора [**расадфунк**](/windows/desktop/api/Ras/nc-ras-rasadfunca) .</span><span class="sxs-lookup"><span data-stu-id="a9db4-115">Your AutoDial DLL must export both an ANSI and a Unicode version of a [**RASADFunc**](/windows/desktop/api/Ras/nc-ras-rasadfunca) AutoDial handler.</span></span>

<span data-ttu-id="a9db4-116">Чтобы включить пользовательский обработчик автонабора для записи телефонной книги, вызовите функцию [**рассетентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rassetentrypropertiesa) , чтобы задать свойства для этой записи.</span><span class="sxs-lookup"><span data-stu-id="a9db4-116">To enable your custom AutoDial handler for a phone-book entry, call the [**RasSetEntryProperties**](/windows/desktop/api/Ras/nf-ras-rassetentrypropertiesa) function to set the properties for that entry.</span></span> <span data-ttu-id="a9db4-117">Члены **сзаутодиалдлл** и **сзаутодиалфунк** структуры [**Расентри**](/previous-versions/windows/desktop/legacy/aa377274(v=vs.85)) , передаваемые в **Рассетентрипропертиес** , указывают имя библиотеки DLL автонабора и имя функции [**расадфунк**](/windows/desktop/api/Ras/nc-ras-rasadfunca) , исключая суффикс "A" или "W".</span><span class="sxs-lookup"><span data-stu-id="a9db4-117">The **szAutodialDll** and **szAutodialFunc** members of the [**RASENTRY**](/previous-versions/windows/desktop/legacy/aa377274(v=vs.85)) structure passed to **RasSetEntryProperties** specify the name of your AutoDial DLL and the name of your [**RASADFunc**](/windows/desktop/api/Ras/nc-ras-rasadfunca) function, excluding the "A" or "W" suffix.</span></span>

<span data-ttu-id="a9db4-118">Когда система запускает операцию автоматического набора номера для записи телефонной книги с пользовательским обработчиком автоматического набора, он вызывает указанный [**расадфунк**](/windows/desktop/api/Ras/nc-ras-rasadfunca).</span><span class="sxs-lookup"><span data-stu-id="a9db4-118">When the system starts an AutoDial operation for a phone-book entry with a custom AutoDial handler, it calls the specified [**RASADFunc**](/windows/desktop/api/Ras/nc-ras-rasadfunca).</span></span> <span data-ttu-id="a9db4-119">Функция **расадфунк** получает указатель на структуру [**расадпарамс**](/previous-versions/windows/desktop/legacy/aa376719(v=vs.85)) , которая указывает расположение и родительское окно для окна пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="a9db4-119">The **RASADFunc** function receives a pointer to a [**RASADPARAMS**](/previous-versions/windows/desktop/legacy/aa376719(v=vs.85)) structure that indicates the location and parent window for the window of your user interface.</span></span> <span data-ttu-id="a9db4-120">**Расадфунк** может запустить поток для выполнения настраиваемой операции набора.</span><span class="sxs-lookup"><span data-stu-id="a9db4-120">Your **RASADFunc** can start a thread to perform the custom dialing operation.</span></span> <span data-ttu-id="a9db4-121">Функция **расадфунк** возвращает **значение true** , чтобы указать, что она заняла набор, или **значение false** , чтобы разрешить системе выполнять набор.</span><span class="sxs-lookup"><span data-stu-id="a9db4-121">The **RASADFunc** function returns **TRUE** to indicate that it took over the dialing, or **FALSE** to allow the system to perform the dialing.</span></span> <span data-ttu-id="a9db4-122">Настраиваемая операция набора номера должна использовать функцию [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) для выполнения фактического набора.</span><span class="sxs-lookup"><span data-stu-id="a9db4-122">Your custom dialing operation must use the [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala) function to do the actual dialing.</span></span> <span data-ttu-id="a9db4-123">После завершения операции набора номера пользовательская операция набора номера указывает на успешное выполнение или сбой, задавая переменную, на которую указывает параметр *лпдвреткоде* , передаваемый в [**расадфунк**](/windows/desktop/api/Ras/nc-ras-rasadfunca).</span><span class="sxs-lookup"><span data-stu-id="a9db4-123">When the dialing operation has been completed, the custom dialing operation indicates success or failure by setting the variable pointed to by the *lpdwRetCode* parameter passed to [**RASADFunc**](/windows/desktop/api/Ras/nc-ras-rasadfunca).</span></span>

 

 