---
title: Подзаписи и многоканальные подключения
description: Windows NT Server 4,0 обеспечивает поддержку для подзаписей телефонных книг, которые обеспечивают многоканальные подключения. Многоканальное соединение сочетает пропускную способность нескольких подключений, чтобы обеспечить единое подключение с более высокой пропускной способностью.
ms.assetid: 19cf6e1a-cdba-47e4-8d8f-d6030ed6f9e3
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c1970e2e2ad668b376b1097aa20cd18986fb605a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104338732"
---
# <a name="subentries-and-multilink-connections"></a><span data-ttu-id="a390f-104">Подзаписи и многоканальные подключения</span><span class="sxs-lookup"><span data-stu-id="a390f-104">Subentries and Multilink Connections</span></span>

<span data-ttu-id="a390f-105">Windows NT Server 4,0 обеспечивает поддержку для подзаписей телефонных книг, которые обеспечивают многоканальные подключения.</span><span class="sxs-lookup"><span data-stu-id="a390f-105">Windows NT Server 4.0 provides support for phone-book subentries, which enable multilink connections.</span></span> <span data-ttu-id="a390f-106">Многоканальное соединение сочетает пропускную способность нескольких подключений, чтобы обеспечить единое подключение с более высокой пропускной способностью.</span><span class="sxs-lookup"><span data-stu-id="a390f-106">A multilink connection combines the bandwidth of multiple connections to provide a single connection with higher bandwidth.</span></span>

<span data-ttu-id="a390f-107">Запись телефонной книги RAS может содержать ноль или более подзаписей.</span><span class="sxs-lookup"><span data-stu-id="a390f-107">A RAS phone-book entry can have zero or more subentries.</span></span> <span data-ttu-id="a390f-108">Функция [**расжетентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rasgetentrypropertiesa) извлекает структуру [**расентри**](/previous-versions/windows/desktop/legacy/aa377274(v=vs.85)) , содержащую сведения о подзаписях записи телефонной книги.</span><span class="sxs-lookup"><span data-stu-id="a390f-108">The [**RasGetEntryProperties**](/windows/desktop/api/Ras/nf-ras-rasgetentrypropertiesa) function retrieves a [**RASENTRY**](/previous-versions/windows/desktop/legacy/aa377274(v=vs.85)) structure that includes information about the subentries of a phone-book entry.</span></span> <span data-ttu-id="a390f-109">Элемент **двсубентриес** структуры **расентри** указывает количество подзаписей.</span><span class="sxs-lookup"><span data-stu-id="a390f-109">The **dwSubEntries** member of the **RASENTRY** structure indicates the number of subentries.</span></span> <span data-ttu-id="a390f-110">Записи телефонной книги изначально не имеют подзаписей.</span><span class="sxs-lookup"><span data-stu-id="a390f-110">Phone-book entries initially have no subentries.</span></span> <span data-ttu-id="a390f-111">Чтобы добавить подзаписи в запись телефонной книги, используйте функцию [**рассетсубентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rassetsubentrypropertiesa) .</span><span class="sxs-lookup"><span data-stu-id="a390f-111">To add subentries to a phone-book entry, use the [**RasSetSubEntryProperties**](/windows/desktop/api/Ras/nf-ras-rassetsubentrypropertiesa) function.</span></span>

<span data-ttu-id="a390f-112">Свойства каждой подзаписи включают номер телефона, имя и тип устройства TAPI, которое будет использоваться при наборе подзаписи.</span><span class="sxs-lookup"><span data-stu-id="a390f-112">The properties for each subentry include a phone number and the name and type of the TAPI device to use when dialing the subentry.</span></span> <span data-ttu-id="a390f-113">Кроме того, подзапись может включать список дополнительных телефонных номеров для набираемых, если служба RAS не может установить соединение с использованием основного номера.</span><span class="sxs-lookup"><span data-stu-id="a390f-113">In addition, a subentry can include a list of alternate phone numbers to dial if RAS cannot make a connection using the primary number.</span></span> <span data-ttu-id="a390f-114">Функции [**рассетсубентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rassetsubentrypropertiesa) и [**Расжетсубентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rasgetsubentrypropertiesa) используют структуру [**рассубентри**](/previous-versions/windows/desktop/legacy/aa377839(v=vs.85)) для установки и получения свойств указанной подзаписи телефонной книги.</span><span class="sxs-lookup"><span data-stu-id="a390f-114">The [**RasSetSubEntryProperties**](/windows/desktop/api/Ras/nf-ras-rassetsubentrypropertiesa) and [**RasGetSubEntryProperties**](/windows/desktop/api/Ras/nf-ras-rasgetsubentrypropertiesa) functions use the [**RASSUBENTRY**](/previous-versions/windows/desktop/legacy/aa377839(v=vs.85)) structure to set and retrieve the properties of a specified phone-book subentry.</span></span> <span data-ttu-id="a390f-115">Подзаписи идентифицируются с помощью индекса, отсчитываемый от единицы.</span><span class="sxs-lookup"><span data-stu-id="a390f-115">Subentries are identified by a one-based index.</span></span>

<span data-ttu-id="a390f-116">Вы можете вызвать функцию [**рассетентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rassetentrypropertiesa) , чтобы настроить запись RAS с многоканальным подключением для подключения всех подзаписей при первом наборе.</span><span class="sxs-lookup"><span data-stu-id="a390f-116">You can call the [**RasSetEntryProperties**](/windows/desktop/api/Ras/nf-ras-rassetentrypropertiesa) function to configure a multilink RAS entry to connect all subentries when it is first dialed.</span></span> <span data-ttu-id="a390f-117">Кроме того, можно настроить запись для предоставления переменной пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="a390f-117">Alternatively, you can configure an entry to provide variable bandwidth.</span></span> <span data-ttu-id="a390f-118">В этом случае служба удаленного доступа сначала подключает одну подзапись, а затем подключает или отключает дополнительные подзаписи по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="a390f-118">In this case, RAS connects a single subentry initially, and then connects or disconnects additional subentries as needed.</span></span> <span data-ttu-id="a390f-119">Для многоканального подключения с переменной пропускной способностью можно использовать структуру [**расдиалпарамс**](/previous-versions/windows/desktop/legacy/aa377238(v=vs.85)) , чтобы указать начальную подзапись для соединения при вызове функции [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) .</span><span class="sxs-lookup"><span data-stu-id="a390f-119">For a variable-bandwidth multilink connection, you can use the [**RASDIALPARAMS**](/previous-versions/windows/desktop/legacy/aa377238(v=vs.85)) structure to specify the initial subentry to connect when you call the [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala) function.</span></span> <span data-ttu-id="a390f-120">При использовании функции [**расдиалдлг**](/windows/desktop/api/Rasdlg/nf-rasdlg-rasdialdlga) для подключения записи многоканальной связи можно использовать структуру [**расдиалдлг**](/previous-versions/windows/desktop/legacy/aa377023(v=vs.85)) , чтобы указать начальную подзапись для подключения.</span><span class="sxs-lookup"><span data-stu-id="a390f-120">When using the [**RasDialDlg**](/windows/desktop/api/Rasdlg/nf-rasdlg-rasdialdlga) function to connect a multilink entry, you can use the [**RASDIALDLG**](/previous-versions/windows/desktop/legacy/aa377023(v=vs.85)) structure to specify the initial subentry to connect.</span></span>

<span data-ttu-id="a390f-121">Для многоканального подключения с переменной пропускной способностью используйте структуру [**расентри**](/previous-versions/windows/desktop/legacy/aa377274(v=vs.85)) с функцией [**рассетентрипропертиес**](/windows/desktop/api/Ras/nf-ras-rassetentrypropertiesa) , чтобы указать параметры для подключения и отключения отдельных подзаписей.</span><span class="sxs-lookup"><span data-stu-id="a390f-121">For a variable-bandwidth multilink connection, use the [**RASENTRY**](/previous-versions/windows/desktop/legacy/aa377274(v=vs.85)) structure with the [**RasSetEntryProperties**](/windows/desktop/api/Ras/nf-ras-rassetentrypropertiesa) function to specify the parameters for connecting and disconnecting the individual subentries.</span></span> <span data-ttu-id="a390f-122">Служба RAS подключает дополнительную подзапись, когда используемая пропускная способность превышает указанный процент доступной пропускной способности в течение указанного интервала.</span><span class="sxs-lookup"><span data-stu-id="a390f-122">RAS connects an additional subentry when the bandwidth being used exceeds a specified percentage of the available bandwidth for a specified interval.</span></span>

<span data-ttu-id="a390f-123">При вызове функции [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) для установления многоканального подключения можно указать функцию обратного вызова [**RasDialFunc2**](/windows/desktop/api/Ras/nc-ras-rasdialfunc2) для получения уведомлений о соединении.</span><span class="sxs-lookup"><span data-stu-id="a390f-123">If you call the [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala) function to establish a multilink connection, you can specify a [**RasDialFunc2**](/windows/desktop/api/Ras/nc-ras-rasdialfunc2) callback function to receive notifications about the connection.</span></span> <span data-ttu-id="a390f-124">**RasDialFunc2** похож на функцию обратного вызова [**RasDialFunc1**](/windows/desktop/api/Ras/nc-ras-rasdialfunc1) , за исключением того, что она предоставляет дополнительные сведения для многоканального соединения, например индекс подзаписи, вызвавшей уведомление.</span><span class="sxs-lookup"><span data-stu-id="a390f-124">**RasDialFunc2** is similar to the [**RasDialFunc1**](/windows/desktop/api/Ras/nc-ras-rasdialfunc1) callback function, except that it provides additional information for a multilink connection, such as the index of the subentry that caused the notification.</span></span> <span data-ttu-id="a390f-125">Служба RAS вызывает функцию **RasDialFunc2** при подключении или отключении подзаписи.</span><span class="sxs-lookup"><span data-stu-id="a390f-125">RAS calls your **RasDialFunc2** function when it connects or disconnects a subentry.</span></span>

<span data-ttu-id="a390f-126">Вы можете использовать **храсконн** подключения, чтобы зависнуть или получить сведения о многоканальном соединении.</span><span class="sxs-lookup"><span data-stu-id="a390f-126">You can use an **HRASCONN** connection handle to hang up or retrieve information about a multilink connection.</span></span> <span data-ttu-id="a390f-127">Можно получить маркер подключения для каждого подключения подзаписи, из которого состоит многоканальное соединение, а также для комбинированного многоканального подключения.</span><span class="sxs-lookup"><span data-stu-id="a390f-127">You can get a connection handle for each of the subentry connections that make up the multilink, as well as for the combined multilink connection.</span></span> <span data-ttu-id="a390f-128">При вызове функции [**rasdial**](/windows/desktop/api/Ras/nf-ras-rasdiala) для установления многоканального соединения функция **rasdial** возвращает маркер комбинированного многоканального соединения.</span><span class="sxs-lookup"><span data-stu-id="a390f-128">When you call the [**RasDial**](/windows/desktop/api/Ras/nf-ras-rasdiala) function to establish a multilink connection, **RasDial** returns a handle to the combined multilink connection.</span></span> <span data-ttu-id="a390f-129">Аналогичным образом [**расенумконнектионс**](/windows/desktop/api/Ras/nf-ras-rasenumconnectionsa) возвращает комбинированный многоканальный маркер при перечислении соединений.</span><span class="sxs-lookup"><span data-stu-id="a390f-129">Similarly, [**RasEnumConnections**](/windows/desktop/api/Ras/nf-ras-rasenumconnectionsa) returns the combined multilink handle when you enumerate connections.</span></span> <span data-ttu-id="a390f-130">Чтобы получить маркер для одного из подключений подзаписи в многоканальном соединении, вызовите функцию [**расжетсубентрихандле**](/windows/desktop/api/Ras/nf-ras-rasgetsubentryhandlea) .</span><span class="sxs-lookup"><span data-stu-id="a390f-130">To get a handle to one of the subentry connections in a multilink connection, call the [**RasGetSubEntryHandle**](/windows/desktop/api/Ras/nf-ras-rasgetsubentryhandlea) function.</span></span>

<span data-ttu-id="a390f-131">Можно использовать объединенный дескриптор многоканального подключения и дескрипторы подключения подзаписи в функциях [**рашангуп**](/windows/desktop/api/Ras/nf-ras-rashangupa), [**расжетконнектстатус**](/windows/desktop/api/Ras/nf-ras-rasgetconnectstatusa)и [**расжетпрожектионинфо**](/previous-versions/windows/embedded/ms897107(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="a390f-131">You can use the combined multilink connection handle and the subentry connection handles in the [**RasHangUp**](/windows/desktop/api/Ras/nf-ras-rashangupa), [**RasGetConnectStatus**](/windows/desktop/api/Ras/nf-ras-rasgetconnectstatusa), and [**RasGetProjectionInfo**](/previous-versions/windows/embedded/ms897107(v=msdn.10)) functions.</span></span> <span data-ttu-id="a390f-132">Вызов **рашангуп** с Объединенным многоканальным маркером завершает все соединение. При вызове с помощью маркера подзаписи зависает только это подключение подзаписи.</span><span class="sxs-lookup"><span data-stu-id="a390f-132">Calling **RasHangUp** with a combined multilink handle terminates the entire connection; calling it with a subentry handle hangs up only that subentry connection.</span></span> <span data-ttu-id="a390f-133">Аналогичным образом **расжетконнектстатус** возвращает сведения для Объединенного или индивидуального соединения в зависимости от указанного маркера.</span><span class="sxs-lookup"><span data-stu-id="a390f-133">Similarly, **RasGetConnectStatus** returns information for the combined or individual connection, depending on the handle specified.</span></span> <span data-ttu-id="a390f-134">Сведения о проекции, возвращаемые функцией **расжетпрожектионинфо** для записи многоканальной связи, одинаковы для каждого дескриптора соединения подзаписи, как для основного дескриптора соединения.</span><span class="sxs-lookup"><span data-stu-id="a390f-134">The projection information returned by **RasGetProjectionInfo** for a multilink entry is the same for each of the subentry connection handles as it is for the main connection handle.</span></span>

 

 