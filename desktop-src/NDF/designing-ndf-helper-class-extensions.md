---
title: Проектирование расширений вспомогательных классов NDF
description: Этот раздел предназначен для предоставления общих рекомендаций в процессе разработки расширения вспомогательного класса.
ms.assetid: f5dbd198-7d22-4e7e-830e-6753e9f4d6c8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d91ff748d8139aad17fca3710b17e73b5e1eaa14
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986353"
---
# <a name="designing-ndf-helper-class-extensions"></a><span data-ttu-id="ad8e3-103">Проектирование расширений вспомогательных классов NDF</span><span class="sxs-lookup"><span data-stu-id="ad8e3-103">Designing NDF Helper Class Extensions</span></span>

<span data-ttu-id="ad8e3-104">Этот раздел предназначен для предоставления общих рекомендаций в процессе разработки расширения вспомогательного класса.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-104">This topic is intended to provide generic guidance through the helper class extension development process.</span></span> <span data-ttu-id="ad8e3-105">Рекомендации в этом разделе применимы ко всем вспомогательным расширениям классов.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-105">The guidance in this topic applies to all helper class extensions.</span></span> <span data-ttu-id="ad8e3-106">Дополнительные сведения см. в разделе [расширяемый вспомогательный класс поддержки платформы фильтрации Windows](windows-filtering-platform-extensible-helper-class.md) и [расширяемые вспомогательные классы диагностики беспроводных сетей 802,11](802-11-wireless-diagnostics-extensible-helper-classes.md).</span><span class="sxs-lookup"><span data-stu-id="ad8e3-106">For more specific guidance, see [Windows Filtering Platform Extensible Helper Class](windows-filtering-platform-extensible-helper-class.md) and [802.11 Wireless Diagnostics Extensible Helper Classes](802-11-wireless-diagnostics-extensible-helper-classes.md).</span></span>

## <a name="extending-ndf-functionality"></a><span data-ttu-id="ad8e3-107">Расширение функциональности NDF</span><span class="sxs-lookup"><span data-stu-id="ad8e3-107">Extending NDF Functionality</span></span>

<span data-ttu-id="ad8e3-108">Windows Vista и более поздние версии поставляются с различными уже реализованными вспомогательными классами, которые могут диагностировать и устранять широкий спектр проблем.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-108">Windows Vista and later versions ship with a variety of helper classes already implemented that can diagnose and repair a wide range of issues.</span></span> <span data-ttu-id="ad8e3-109">Однако иногда сторонние разработчики могут расширить эти вспомогательные классы для диагностики и устранения проблем, связанных с конкретными продуктами и реализациями.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-109">At times, however, third-party developers may wish to extend these helper classes to diagnose and resolve issues specific to their particular products and implementations.</span></span>

<span data-ttu-id="ad8e3-110">Следующие вспомогательные классы Microsoft NDF являются расширяемыми.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-110">The following Microsoft NDF helper classes are extensible.</span></span>

-   [<span data-ttu-id="ad8e3-111">Платформа фильтрации Windows</span><span class="sxs-lookup"><span data-stu-id="ad8e3-111">Windows Filtering Platform</span></span>](windows-filtering-platform-extensible-helper-class.md)
-   [<span data-ttu-id="ad8e3-112">Безопасность беспроводных сетей</span><span class="sxs-lookup"><span data-stu-id="ad8e3-112">Wireless Security</span></span>](802-11-wireless-diagnostics-extensible-helper-classes.md)

## <a name="implementing-a-helper-class-extension"></a><span data-ttu-id="ad8e3-113">Реализация расширения вспомогательного класса</span><span class="sxs-lookup"><span data-stu-id="ad8e3-113">Implementing a Helper Class Extension</span></span>

<span data-ttu-id="ad8e3-114">Корпорация Майкрософт поставляет два интерфейса, которые можно использовать для разработки расширений классов поддержки NDF.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-114">Microsoft ships two interfaces that can be used to develop NDF helper class extensions.</span></span>

<span data-ttu-id="ad8e3-115">Интерфейс [**инетдиагхелперинфо**](/windows/desktop/api/ndhelper/nn-ndhelper-inetdiaghelperinfo) вызывается ndf для проверки наличия всех необходимых сведений и выбора правильного вспомогательного класса.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-115">The [**INetDiagHelperInfo**](/windows/desktop/api/ndhelper/nn-ndhelper-inetdiaghelperinfo) interface is called by NDF to validate that it has all required information and that it has chosen the correct helper class.</span></span> <span data-ttu-id="ad8e3-116">Это достигается с помощью метода [**жетаттрибутеинфо**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelperinfo-getattributeinfo) .</span><span class="sxs-lookup"><span data-stu-id="ad8e3-116">It accomplishes this through the [**GetAttributeInfo**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelperinfo-getattributeinfo) method.</span></span>

<span data-ttu-id="ad8e3-117">Интерфейс [**инетдиагхелпер**](/windows/desktop/api/ndhelper/nn-ndhelper-inetdiaghelper) вызывается ndf для большинства действий, происходящих во время процедуры диагностики.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-117">The [**INetDiagHelper**](/windows/desktop/api/ndhelper/nn-ndhelper-inetdiaghelper) interface is called by NDF for most of the activities that occur during the diagnostic procedure.</span></span> <span data-ttu-id="ad8e3-118">Некоторые из его методов являются обязательными, но другие являются необязательными для конкретных применений.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-118">Several of its methods are required, but others are optional for specific uses.</span></span>

<span data-ttu-id="ad8e3-119">К необходимым методам относятся [**Initialize**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-initialize) и [**жетдиагностиксинфо**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-getdiagnosticsinfo).</span><span class="sxs-lookup"><span data-stu-id="ad8e3-119">The required methods include [**Initialize**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-initialize) and [**GetDiagnosticsInfo**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-getdiagnosticsinfo).</span></span> <span data-ttu-id="ad8e3-120">NDF вызывает метод **Initialize** для отправки параметров ключей в расширение вспомогательного класса для инициализации его состояния экземпляра.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-120">NDF calls **Initialize** to send key parameters to the helper class extension to initialize its instance state.</span></span> <span data-ttu-id="ad8e3-121">**Жетдиагностиксинфо** предоставляет оценку того, как долго может пройти диагностика и требуется ли олицетворение исходного контекста пользователя.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-121">**GetDiagnosticsInfo** provides an estimate of how long the diagnosis may take and whether it requires impersonation of the original user context.</span></span>

<span data-ttu-id="ad8e3-122">Другой метод, [**ловхеалс**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-lowhealth), вызывается для диагностики сетевого компонента, соответствующего вспомогательному классу.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-122">Another method, [**LowHealth**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-lowhealth), is called to perform diagnosis on the network component corresponding to the helper class.</span></span> <span data-ttu-id="ad8e3-123">Метод [**Cancel**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-cancel) вызывается, когда ndf определяет текущую диагностику или восстановление, которые должны быть остановлены.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-123">[**Cancel**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-cancel) is called when NDF determines an ongoing diagnosis or repair should be stopped.</span></span> <span data-ttu-id="ad8e3-124">[**Очистка**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-cleanup) позволяет ndf освобождать ресурсы ndf, которые использовали расширение вспомогательного класса с момента вызова метода [**Initialize**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-initialize) .</span><span class="sxs-lookup"><span data-stu-id="ad8e3-124">[**Cleanup**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-cleanup) allows NDF to release NDF resources that the helper class extension has used since the call to [**Initialize**](/windows/desktop/api/ndhelper/nf-ndhelper-inetdiaghelper-initialize) was made.</span></span>

<span data-ttu-id="ad8e3-125">Дополнительные сведения о дополнительных методах см. в разделе [**инетдиагхелпер**](/windows/desktop/api/ndhelper/nn-ndhelper-inetdiaghelper).</span><span class="sxs-lookup"><span data-stu-id="ad8e3-125">For information on additional methods, see [**INetDiagHelper**](/windows/desktop/api/ndhelper/nn-ndhelper-inetdiaghelper).</span></span>

<span data-ttu-id="ad8e3-126">Расширения классов модуля поддержки NDF используются для диагностики и устранения проблем подключения, связанных с конкретным приложением или компонентом.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-126">NDF helper class extensions are used to diagnose and resolve connectivity problems associated with a specific application or component.</span></span> <span data-ttu-id="ad8e3-127">Они также проверяют успешность или сбой попытки разрешения.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-127">They also validate the success or failure of a resolution attempt.</span></span>

<span data-ttu-id="ad8e3-128">Разработчики, которые рассматривают реализацию расширения вспомогательного класса, должны выполнять следующие задачи.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-128">Developers considering the implementation of a helper class extension should perform the following tasks.</span></span>

-   <span data-ttu-id="ad8e3-129">Выявление пользовательских сценариев, в которых полезны операции диагностики и восстановления.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-129">Identify user scenarios in which diagnostic and repair actions are helpful.</span></span>
-   <span data-ttu-id="ad8e3-130">Предоставление решений для часто встречающихся проблем с подключением.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-130">Provide resolutions to frequently encountered connectivity problems.</span></span>
-   <span data-ttu-id="ad8e3-131">Если требуется расширение вспомогательного класса, определите модель работоспособности компонента, используемую для представления состояния работоспособности компонента в NDF.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-131">If a helper class extension is required, define a component health model used to represent the component's health state in NDF.</span></span>

## <a name="identify-user-scenarios"></a><span data-ttu-id="ad8e3-132">Поиск пользовательских сценариев</span><span class="sxs-lookup"><span data-stu-id="ad8e3-132">Identify User Scenarios</span></span>

<span data-ttu-id="ad8e3-133">Тестирование и использование приложения может уже предоставить шаблоны, которые расширение вспомогательного класса может диагностировать и, возможно, восстановить.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-133">Testing and use of an application may have already provided discernable patterns that a helper class extension may be able to diagnose and possibly repair.</span></span> <span data-ttu-id="ad8e3-134">Разработчики приложений могут использовать эти данные для определения наиболее важных проблем с подключением к адресу и для определения пользовательских сценариев, в которых вероятнее всего возникают проблемы с подключением.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-134">Application developers can use this data to determine the most important connectivity issues to address and to identify the user scenarios in which connectivity issues are likely to occur.</span></span>

<span data-ttu-id="ad8e3-135">Определить основную причину каждой проблемы крайне важно в этой части процесса.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-135">Determining the root cause of each problem is vital in this part of the process.</span></span> <span data-ttu-id="ad8e3-136">Это может потребовать всестороннего исследования, но поможет вам создать программное обеспечение, которое будет гораздо проще для пользователей и администраторов.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-136">This may require extensive research, but will help create software that is far easier for users and administrators to use.</span></span> <span data-ttu-id="ad8e3-137">Если основная причина не определена, то становится трудной или невозможной предложить разрешение проблемы с помощью расширения вспомогательного класса.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-137">If a root cause is not identified, it becomes difficult or impossible to offer problem resolution using the helper class extension.</span></span>

## <a name="provide-resolutions"></a><span data-ttu-id="ad8e3-138">Предоставление решений</span><span class="sxs-lookup"><span data-stu-id="ad8e3-138">Provide Resolutions</span></span>

<span data-ttu-id="ad8e3-139">После того как группа разработчиков определит основные причины проблем, связанных с их программным обеспечением, следующим шагом будет определение соответствующих действий по устранению проблемы, чтобы помочь пользователю максимально эффективно решить проблему.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-139">After a development team has identified the root causes of problems associated with their software, the next step is to identify the appropriate resolution actions for helping the user solve the problem as efficiently as possible.</span></span>

<span data-ttu-id="ad8e3-140">Не все разрешения требует создания расширения вспомогательного класса или автоматического действия.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-140">Not all resolutions require that a helper class extension or automated action be created.</span></span> <span data-ttu-id="ad8e3-141">В некоторых случаях Группа может определить, что наилучшим решением для устранения основной причины является исправление или обновление компонента, предоставление дополнительного содержимого справки для компонента или разработка других стратегий, предоставляющих лучшие долгосрочные решения.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-141">In some cases, the team may determine that the best approach to resolving a root cause is to fix or update the component, provide additional help content for the component, or develop other strategies that provide better long-term solutions.</span></span>

<span data-ttu-id="ad8e3-142">Для проблем, когда автоматизированное действие является идеальным, создание расширения вспомогательного класса NDF часто является отличным решением.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-142">For problems in which an automated action is ideal, creating an NDF helper class extension is often an excellent solution.</span></span>

<span data-ttu-id="ad8e3-143">Расширения вспомогательных классов возвращают сведения о основных причинах и сведения об исправлении пользователям с помощью NDF.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-143">Helper class extensions return information about root causes and repair information to users through NDF.</span></span> <span data-ttu-id="ad8e3-144">Строки, используемые для описания основных причин и сведений об исправлении, должны быть простыми и простыми для понимания нетехническим пользователем.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-144">The strings used to describe the root causes and repair information must be simple and easy for a non-technical user to understand.</span></span> <span data-ttu-id="ad8e3-145">Дополнительные сведения об этих строках см. в разделе [рекомендации по пользовательскому интерфейсу для расширений классов модуля поддержки ndf](user-interface-guidelines-for-ndf-helper-class-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="ad8e3-145">For more information on these strings, see [User Interface Guidelines for NDF Helper Class Extensions](user-interface-guidelines-for-ndf-helper-class-extensions.md).</span></span>

## <a name="define-a-component-health-model"></a><span data-ttu-id="ad8e3-146">Определение модели работоспособности компонента</span><span class="sxs-lookup"><span data-stu-id="ad8e3-146">Define a Component Health Model</span></span>

<span data-ttu-id="ad8e3-147">Разработчики программного обеспечения должны определить уровни "работоспособности", связанные с управляемостью проблем с сетью.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-147">Software developers should define levels of "health" associated with the manageability of networking problems.</span></span> <span data-ttu-id="ad8e3-148">Модель работоспособности, используемая для разработки вспомогательных классов, определяет только два уровня работоспособности: работоспособность и неработоспособность.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-148">A health model used to develop helper classes defines just two levels of health: healthy and unhealthy.</span></span> <span data-ttu-id="ad8e3-149">Эти уровни можно также применять к расширениям классов поддержки NDF.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-149">These levels can also be applied to NDF helper class extensions.</span></span>

<span data-ttu-id="ad8e3-150">Работоспособный компонент указывает на отсутствие проблем.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-150">A healthy component indicates an absence of problems.</span></span> <span data-ttu-id="ad8e3-151">Компонент может считаться неработоспособным из-за собственных проблем или из-за проблем, возникающих в других компонентах, от которых он зависит.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-151">A component can be considered unhealthy because of its own problems, or because of problems occurring in other components on which it depends.</span></span>



| <span data-ttu-id="ad8e3-152">Термин</span><span class="sxs-lookup"><span data-stu-id="ad8e3-152">Term</span></span>                                                                                                                             | <span data-ttu-id="ad8e3-153">Описание</span><span class="sxs-lookup"><span data-stu-id="ad8e3-153">Description</span></span>                                                                                                                      |
|----------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ad8e3-154"><span id="LowHealth"></span><span id="lowhealth"></span><span id="LOWHEALTH"></span>ловхеалс</span><span class="sxs-lookup"><span data-stu-id="ad8e3-154"><span id="LowHealth"></span><span id="lowhealth"></span><span id="LOWHEALTH"></span>LowHealth</span></span><br/>                         | <span data-ttu-id="ad8e3-155">Это состояние указывает на неприемлемый уровень сбоев от этого компонента и на то, что компонент является проблемой.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-155">This state indicates an unacceptable level of failures from this component, and that the component is the problem.</span></span><br/>    |
| <span data-ttu-id="ad8e3-156"><span id="LowHealth_Below"></span><span id="lowhealth_below"></span><span id="LOWHEALTH_BELOW"></span>Ловхеалс ниже</span><span class="sxs-lookup"><span data-stu-id="ad8e3-156"><span id="LowHealth_Below"></span><span id="lowhealth_below"></span><span id="LOWHEALTH_BELOW"></span>LowHealth Below</span></span><br/> | <span data-ttu-id="ad8e3-157">Это состояние указывает на неприемлемый уровень сбоев от компонента локального компьютера, от которого зависит этот компонент.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-157">This state indicates an unacceptable level of failures from a local machine component that this component depends on.</span></span><br/> |



 

<span data-ttu-id="ad8e3-158">Когда выполняется диагностика с помощью NDF, расширение вспомогательного класса запрашивает ряд вопросов для определения состояния работоспособности.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-158">When diagnosis takes place using NDF, the helper class extension is asked a series of questions to determine its state of health.</span></span> <span data-ttu-id="ad8e3-159">Если расширение реагирует на неработоспособность, то NDF запрашивает уточнение вопросов, пытается диагностировать проблему, ее расположение и место, где будет выглядеть следующее.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-159">If the extension responds that it is unhealthy, NDF asks clarifying questions, trying to diagnose the problem, its location, and where to look next.</span></span> <span data-ttu-id="ad8e3-160">Каждый вспомогательный класс должен иметь возможность ответить на вопрос низкого уровня работоспособности, чтобы лучше направить соответствующие диагностические действия.</span><span class="sxs-lookup"><span data-stu-id="ad8e3-160">Each helper class must be able to answer the question of low health in order to better direct appropriate diagnostic activities.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ad8e3-161">См. также</span><span class="sxs-lookup"><span data-stu-id="ad8e3-161">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ad8e3-162">Расширяемый вспомогательный класс платформы фильтрации Windows</span><span class="sxs-lookup"><span data-stu-id="ad8e3-162">Windows Filtering Platform Extensible Helper Class</span></span>](windows-filtering-platform-extensible-helper-class.md)
</dt> <dt>

[<span data-ttu-id="ad8e3-163">Расширяемые вспомогательные классы диагностики беспроводной сети 802,11</span><span class="sxs-lookup"><span data-stu-id="ad8e3-163">802.11 Wireless Diagnostics Extensible Helper Classes</span></span>](802-11-wireless-diagnostics-extensible-helper-classes.md)
</dt> </dl>

 

 





