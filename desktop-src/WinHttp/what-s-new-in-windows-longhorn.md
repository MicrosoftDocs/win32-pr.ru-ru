---
description: Начиная с Windows Server 2008 и Windows Vista, API WinHTTP был усовершенствован для включения следующих функций.
ms.assetid: b47a2e38-67bd-4d43-936c-8781641cb7f6
title: Новые возможности Windows Server 2008 и Windows Vista
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fac0f274b45e1db79fb79340b7f490de96f57e8f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104497499"
---
# <a name="whats-new-in-windows-server-2008-and-windows-vista"></a><span data-ttu-id="7865c-103">Новые возможности Windows Server 2008 и Windows Vista</span><span class="sxs-lookup"><span data-stu-id="7865c-103">What's New in Windows Server 2008 and Windows Vista</span></span>

<span data-ttu-id="7865c-104">Начиная с Windows Server 2008 и Windows Vista, API WinHTTP был усовершенствован для включения следующих функций.</span><span class="sxs-lookup"><span data-stu-id="7865c-104">Starting in Windows Server 2008 and Windows Vista, the WinHTTP API has been enhanced to include the following features.</span></span>

## <a name="greater-than-4-gb-upload"></a><span data-ttu-id="7865c-105">Отправка превышает 4 ГБ.</span><span class="sxs-lookup"><span data-stu-id="7865c-105">Greater Than 4-GB Upload.</span></span>

<span data-ttu-id="7865c-106">[**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) может передавать только 4 ГБ данных из-за ограничений в значении параметра общей длины DWORD.</span><span class="sxs-lookup"><span data-stu-id="7865c-106">[**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) can send only 4 GB of data because of limitations in the size of the DWORD total length parameter.</span></span> <span data-ttu-id="7865c-107">Чтобы позволить приложениям передавать более 4 ГБ данных, в запрос добавляется заголовок Content-Length, указывающий данные в виде большого \_ целого числа (2 ^ 64 байта).</span><span class="sxs-lookup"><span data-stu-id="7865c-107">To enable applications to send more than 4 GB of data, the Content-Length header is added to the request specifying data as large as a LARGE\_INTEGER (2^64 bytes).</span></span> <span data-ttu-id="7865c-108">Дополнительные сведения см. в разделе **WinHttpSendRequest**.</span><span class="sxs-lookup"><span data-stu-id="7865c-108">For more information, see **WinHttpSendRequest**.</span></span> <span data-ttu-id="7865c-109">Эта функция не поддерживается в COM-объекте [**ивинхттпрекуест**](iwinhttprequest-interface.md) .</span><span class="sxs-lookup"><span data-stu-id="7865c-109">This feature is not supported on the [**IWinHttpRequest**](iwinhttprequest-interface.md) COM object.</span></span>

## <a name="transfer-encoding-header"></a><span data-ttu-id="7865c-110">Заголовок Transfer-Encoding</span><span class="sxs-lookup"><span data-stu-id="7865c-110">Transfer-Encoding Header</span></span>

<span data-ttu-id="7865c-111">Заголовок Transfer-Encoding позволяет приложениям передавать фрагментированные данные на сервер.</span><span class="sxs-lookup"><span data-stu-id="7865c-111">The Transfer-Encoding header enables applications to send chunked data to the server.</span></span> <span data-ttu-id="7865c-112">Если в запросе имеется заголовок Transfer-Encoding, приложение отправляет запрос с телом сущности нулевой длины в вызове [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest).</span><span class="sxs-lookup"><span data-stu-id="7865c-112">When the Transfer-Encoding header is present on the request, the application sends the request with a zero length entity body in the call to [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest).</span></span> <span data-ttu-id="7865c-113">Тело сущности отправляется в последующих вызовах [**WinHttpWriteData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata).</span><span class="sxs-lookup"><span data-stu-id="7865c-113">The entity body is sent in subsequent calls to [**WinHttpWriteData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata).</span></span> <span data-ttu-id="7865c-114">Эта функция не поддерживается в COM-объекте [**ивинхттпрекуест**](iwinhttprequest-interface.md) .</span><span class="sxs-lookup"><span data-stu-id="7865c-114">This feature is not supported on the [**IWinHttpRequest**](iwinhttprequest-interface.md) COM object.</span></span>

## <a name="ssl-client-certificate-issuer-list-retrieval"></a><span data-ttu-id="7865c-115">Получение списка издателей SSL-сертификатов клиентов</span><span class="sxs-lookup"><span data-stu-id="7865c-115">SSL Client Certificate Issuer List Retrieval</span></span>

<span data-ttu-id="7865c-116">Приложение может получить список издателей сертификата клиента SSL, когда [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) завершается с **ошибкой \_ , \_ \_ \_ \_ требуется сертификат проверки подлинности клиента WinHTTP**.</span><span class="sxs-lookup"><span data-stu-id="7865c-116">The application can retrieve the SSL client certificate Issuer List when [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) fails with an **ERROR\_WINHTTP\_CLIENT\_AUTH\_CERT\_NEEDED**.</span></span> <span data-ttu-id="7865c-117">Новый параметр, **\_ \_ \_ \_ \_ список издателей сертификатов клиента**, позволяет приложениям получать список издателей сертификатов и фильтровать список для оптимального сертификата.</span><span class="sxs-lookup"><span data-stu-id="7865c-117">A new option, **WINHTTP\_OPTION\_CLIENT\_CERT\_ISSUER\_LIST**, allows applications to retrieve the certificate Issuer List and filter the list for the optimal certificate.</span></span> <span data-ttu-id="7865c-118">Дополнительные сведения см. в разделах [**Параметры**](option-flags.md) и [Получение списка поставщиков для проверки подлинности клиента SSL](ssl-in-winhttp.md) .</span><span class="sxs-lookup"><span data-stu-id="7865c-118">For more information, see the [**Option Flags**](option-flags.md) and [Issuer List Retrieval for SSL Client Authentication](ssl-in-winhttp.md) topics.</span></span> <span data-ttu-id="7865c-119">Эта функция не поддерживается в COM-объекте [**ивинхттпрекуест**](iwinhttprequest-interface.md) .</span><span class="sxs-lookup"><span data-stu-id="7865c-119">This feature is not supported on the [**IWinHttpRequest**](iwinhttprequest-interface.md) COM object.</span></span>

## <a name="optional-client-certificates"></a><span data-ttu-id="7865c-120">Необязательные сертификаты клиента</span><span class="sxs-lookup"><span data-stu-id="7865c-120">Optional Client Certificates</span></span>

<span data-ttu-id="7865c-121">Когда [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) завершается с **ошибкой \_ , \_ \_ \_ \_ требуется сертификат проверки подлинности клиента WinHTTP**, сервер может не требовать SSL-сертификата клиента.</span><span class="sxs-lookup"><span data-stu-id="7865c-121">When [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) fails with an **ERROR\_WINHTTP\_CLIENT\_AUTH\_CERT\_NEEDED**, the server may not require the SSL client certificate.</span></span> <span data-ttu-id="7865c-122">Сервер может иметь возможность вернуться к другой форме проверки подлинности или разрешить клиенту продолжать анонимный доступ.</span><span class="sxs-lookup"><span data-stu-id="7865c-122">The server may be able to revert to another form of authentication, or allow the client to proceed with anonymous access.</span></span> <span data-ttu-id="7865c-123">Приложение задает параметр " **\_ \_ \_ \_ контекст сертификата клиента" для параметра WinHTTP** и указывает макрос, используемый WinHTTP для определения необходимости в сертификате клиента.</span><span class="sxs-lookup"><span data-stu-id="7865c-123">The application sets the **WINHTTP\_OPTION\_CLIENT\_CERT\_CONTEXT** option and specifies a macro that WinHttp uses to determine if the client certificate is required.</span></span> <span data-ttu-id="7865c-124">Дополнительные сведения см. в разделе [**флаги параметров**](option-flags.md).</span><span class="sxs-lookup"><span data-stu-id="7865c-124">For more information, see [**Option Flags**](option-flags.md).</span></span> <span data-ttu-id="7865c-125">Эта функция не поддерживается в COM-объекте [**ивинхттпрекуест**](iwinhttprequest-interface.md) .</span><span class="sxs-lookup"><span data-stu-id="7865c-125">This feature is not supported on the [**IWinHttpRequest**](iwinhttprequest-interface.md) COM object.</span></span>

## <a name="source-and-destination-ip-addresses"></a><span data-ttu-id="7865c-126">Исходный и конечный IP-адреса</span><span class="sxs-lookup"><span data-stu-id="7865c-126">Source and Destination IP Addresses</span></span>

<span data-ttu-id="7865c-127">После завершения [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) приложение может получить исходный и конечный IP-адрес и порт запроса, создавшего ответ.</span><span class="sxs-lookup"><span data-stu-id="7865c-127">When [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) completes, the application can retrieve the source and destination IP address and port of the request that generated the response.</span></span> <span data-ttu-id="7865c-128">Доступна новая структура для получения адресов источника и назначения, если установлен параметр **\_ \_ \_ сведения о соединении с параметром WinHTTP** .</span><span class="sxs-lookup"><span data-stu-id="7865c-128">A new structure is provided to receive the source and destination addresses when the **WINHTTP\_OPTION\_CONNECTION\_INFO** option is set.</span></span> <span data-ttu-id="7865c-129">Дополнительные сведения см. в разделе [**флаги параметров**](option-flags.md).</span><span class="sxs-lookup"><span data-stu-id="7865c-129">For more information, see [**Option Flags**](option-flags.md).</span></span> <span data-ttu-id="7865c-130">Эта функция не поддерживается в COM-объекте [**ивинхттпрекуест**](iwinhttprequest-interface.md) .</span><span class="sxs-lookup"><span data-stu-id="7865c-130">This feature is not supported on the [**IWinHttpRequest**](iwinhttprequest-interface.md) COM object.</span></span>

## <a name="additional-ssl-client-authentication-errors"></a><span data-ttu-id="7865c-131">Дополнительные ошибки проверки подлинности клиента SSL</span><span class="sxs-lookup"><span data-stu-id="7865c-131">Additional SSL Client Authentication Errors</span></span>

<span data-ttu-id="7865c-132">Дополнительные сведения об ошибках проверки подлинности клиента SSL см. в этой статье.</span><span class="sxs-lookup"><span data-stu-id="7865c-132">Additional SSL client authentication errors provide more information about the SSL Client certificate.</span></span> <span data-ttu-id="7865c-133">**Ошибка при \_ Сертификат \_ клиента \_ WinHTTP \_ без \_ закрытого \_ ключа** и **Ошибка \_ WinHTTP сертификат \_ \_ без доступа к сертификату клиента \_ \_ закрытый \_ ключ** — это новая ошибка для Windows Server 2008 и Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="7865c-133">**ERROR\_WINHTTP\_CLIENT\_CERT\_NO\_PRIVATE\_KEY** and **ERROR\_WINHTTP\_CERT\_NO\_ACCESS\_PRIVATE\_KEY** client certificate errors are new for Windows Server 2008 and Windows Vista.</span></span> <span data-ttu-id="7865c-134">COM-объект [**ивинхттпрекуест**](iwinhttprequest-interface.md) возвращает эти ошибки в HRESULT.</span><span class="sxs-lookup"><span data-stu-id="7865c-134">The [**IWinHttpRequest**](iwinhttprequest-interface.md) COM object returns these errors in an HRESULT.</span></span>

 

 



