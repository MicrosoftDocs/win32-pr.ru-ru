---
description: Службы Microsoft Windows HTTP Services (WinHTTP) предоставляют серверный интерфейс высокого уровня, поддерживающий протоколы HTTP/2 и 1,1.
ms.assetid: 8337f699-3ec0-4397-acc2-6dc813f7542d
title: Сведения о WinHTTP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 150c829410a1601a3ede7f115f4594276af7fead
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105683792"
---
# <a name="about-winhttp"></a><span data-ttu-id="ddc54-103">Сведения о WinHTTP</span><span class="sxs-lookup"><span data-stu-id="ddc54-103">About WinHTTP</span></span>

> [!NOTE]
> <span data-ttu-id="ddc54-104">Для контейнеров приложений и системных служб, начиная с Windows 10, версия 1709, HTTP/2 (см. [RFC7540](https://tools.ietf.org/html/rfc7540)) включена по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ddc54-104">For app containers and system services since Windows 10, version 1709, HTTP/2 (see [RFC7540](https://tools.ietf.org/html/rfc7540)) is on by default.</span></span>

<span data-ttu-id="ddc54-105">Службы Microsoft Windows HTTP Services (WinHTTP) предоставляют серверный интерфейс высокого уровня, поддерживающий протоколы HTTP/2 и 1,1.</span><span class="sxs-lookup"><span data-stu-id="ddc54-105">Microsoft Windows HTTP Services (WinHTTP) provides you with a server-supported, high-level interface to the HTTP/2 and 1.1 Internet protocols.</span></span> <span data-ttu-id="ddc54-106">Служба WinHTTP предназначена для использования в основном в сценариях на основе сервера серверными приложениями, взаимодействующими с HTTP-серверами.</span><span class="sxs-lookup"><span data-stu-id="ddc54-106">WinHTTP is designed to be used primarily in server-based scenarios by server applications that communicate with HTTP servers.</span></span>

<span data-ttu-id="ddc54-107">[WinInet](/windows/desktop/WinInet/portal) был разработан как клиентская платформа HTTP для интерактивных приложений для настольных систем.</span><span class="sxs-lookup"><span data-stu-id="ddc54-107">[WinINet](/windows/desktop/WinInet/portal) was designed as an HTTP client platform for interactive desktop applications.</span></span> <span data-ttu-id="ddc54-108">WinINet отображает пользовательский интерфейс для некоторых операций, таких как сбор учетных данных пользователя.</span><span class="sxs-lookup"><span data-stu-id="ddc54-108">WinINet displays a user interface for some operations such as collecting user credentials.</span></span> <span data-ttu-id="ddc54-109">Однако WinHTTP обрабатывает эти операции программным способом.</span><span class="sxs-lookup"><span data-stu-id="ddc54-109">WinHTTP, however, handles these operations programmatically.</span></span> <span data-ttu-id="ddc54-110">Серверным приложениям, которым требуются службы клиента HTTP, следует использовать WinHTTP, а не WinINet.</span><span class="sxs-lookup"><span data-stu-id="ddc54-110">Server applications that require HTTP client services should use WinHTTP instead of WinINet.</span></span> <span data-ttu-id="ddc54-111">Дополнительные сведения см. [в статье Перенос приложений WinInet в WinHTTP](porting-wininet-applications-to-winhttp.md).</span><span class="sxs-lookup"><span data-stu-id="ddc54-111">For more information, see [Porting WinINet Applications to WinHTTP](porting-wininet-applications-to-winhttp.md).</span></span>

<span data-ttu-id="ddc54-112">Служба WinHTTP также предназначена для использования в системных службах и клиентских приложениях на основе HTTP.</span><span class="sxs-lookup"><span data-stu-id="ddc54-112">WinHTTP is also designed for use in system services and HTTP-based client applications.</span></span> <span data-ttu-id="ddc54-113">Однако однопользовательские приложения, которым требуются функции протокола FTP, сохраняемость файлов cookie, кэширование, автоматическая обработка диалоговых окон учетных данных, совместимость с Internet Explorer или поддержка платформ нижнего уровня, должны использовать [WinInet](/windows/desktop/WinInet/portal).</span><span class="sxs-lookup"><span data-stu-id="ddc54-113">However, single-user applications that require FTP protocol functionality, cookie persistence, caching, automatic credential dialog handling, Internet Explorer compatibility, or downlevel platform support should consider using [WinINet](/windows/desktop/WinInet/portal).</span></span>

<span data-ttu-id="ddc54-114">Этот интерфейс доступен из C/C++ с помощью интерфейса прикладного программирования (API) WinHTTP или с помощью интерфейсов [**ивинхттпрекуест**](iwinhttprequest-interface.md) и [**ивинхттпрекуестевентс**](iwinhttprequestevents-interface.md) .</span><span class="sxs-lookup"><span data-stu-id="ddc54-114">This interface is accessible from C/C++ by using either the WinHTTP application programming interface (API), or by using the [**IWinHttpRequest**](iwinhttprequest-interface.md) and [**IWinHttpRequestEvents**](iwinhttprequestevents-interface.md) interfaces.</span></span> <span data-ttu-id="ddc54-115">Кроме того, служба WinHTTP доступна из скриптов и Visual Basic Майкрософт через объект WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="ddc54-115">WinHTTP is also accessible from script and Microsoft Visual Basic through the WinHTTP object.</span></span> <span data-ttu-id="ddc54-116">Дополнительные сведения и описания отдельных функций см. в справочнике по функциям WinHTTP для конкретного языка.</span><span class="sxs-lookup"><span data-stu-id="ddc54-116">For more information and descriptions of the individual functions, see the WinHTTP functions reference for the specific language.</span></span>

<span data-ttu-id="ddc54-117">Начиная с Windows 8, WinHTTP предоставляет API-интерфейсы для включения подключений с помощью [протокола WebSocket](https://tools.ietf.org/html/rfc6455)l, например [**винхттпвебсоккетсенд**](/windows/desktop/api/winhttp/nf-winhttp-winhttpwebsocketsend) и [**винхттпвебсоккетрецеиве**](/windows/desktop/api/winhttp/nf-winhttp-winhttpwebsocketreceive).</span><span class="sxs-lookup"><span data-stu-id="ddc54-117">Starting with Windows 8, WinHTTP provides APIs to enable connections using the [WebSocket Protocol](https://tools.ietf.org/html/rfc6455)l, such as [**WinHttpWebSocketSend**](/windows/desktop/api/winhttp/nf-winhttp-winhttpwebsocketsend) and [**WinHttpWebSocketReceive**](/windows/desktop/api/winhttp/nf-winhttp-winhttpwebsocketreceive).</span></span>

> [!Caution]  
> <span data-ttu-id="ddc54-118">WinHTTP не является повторным входом, за исключением обратного вызова асинхронного завершения.</span><span class="sxs-lookup"><span data-stu-id="ddc54-118">WinHTTP is not reentrant except during asynchronous completion callback.</span></span> <span data-ttu-id="ddc54-119">Это значит, что пока поток вызывается в одну из таких функций WinHTTP, как WinHttpSendRequest, WinHttpReceiveResponse, Винхттпкуеридатааваилабле, Винхттпсенддата или WinHttpWriteData, он никогда не должен вызывать WinHTTP еще раз до завершения первого вызова.</span><span class="sxs-lookup"><span data-stu-id="ddc54-119">That is, while a thread has a call pending to one of the WinHTTP functions such as WinHttpSendRequest, WinHttpReceiveResponse, WinHttpQueryDataAvailable, WinHttpSendData, or WinHttpWriteData, it must never call WinHTTP a second time until the first call has completed.</span></span> <span data-ttu-id="ddc54-120">Один из сценариев, при котором может произойти второй вызов, выглядит следующим образом: Если приложение помещает в очередь асинхронный вызов процедуры (APC) в поток, который обращается к WinHTTP, и если служба WinHTTP выполняет интерактивное ожидание с оповещением, то можно запустить APC.</span><span class="sxs-lookup"><span data-stu-id="ddc54-120">One scenario under which a second call could occur is as follows: If an application queues an Asynchronous Procedure Call (APC) to the thread that calls into WinHTTP, and if WinHTTP performs an alertable wait internally, the APC can run.</span></span> <span data-ttu-id="ddc54-121">Если подпрограмму APC также необходимо вызвать WinHTTP, он повторно вводит API WinHTTP, и внутреннее состояние WinHTTP может быть повреждено.</span><span class="sxs-lookup"><span data-stu-id="ddc54-121">If the APC routine happens also to call WinHTTP, it reenters the WinHTTP API, and the internal state of WinHTTP can be corrupted.</span></span>

## <a name="winhttp-51-features"></a><span data-ttu-id="ddc54-122">Функции WinHTTP 5,1</span><span class="sxs-lookup"><span data-stu-id="ddc54-122">WinHTTP 5.1 Features</span></span>

<span data-ttu-id="ddc54-123">В версии 5,1 WinHTTP были добавлены следующие функции.</span><span class="sxs-lookup"><span data-stu-id="ddc54-123">The following features were added in version 5.1 of WinHTTP:</span></span>

-   <span data-ttu-id="ddc54-124">Поддержка IPv6.</span><span class="sxs-lookup"><span data-stu-id="ddc54-124">IPv6 support.</span></span>
-   <span data-ttu-id="ddc54-125">Возможности автопрокси.</span><span class="sxs-lookup"><span data-stu-id="ddc54-125">AutoProxy capabilities.</span></span>
-   <span data-ttu-id="ddc54-126">Протокол HTTP/1.0, включая поддержку подключений постоянного подключения и файлов cookie сеанса.</span><span class="sxs-lookup"><span data-stu-id="ddc54-126">HTTP/1.0 protocol, including support for keep-alive (persistent) connections and session cookies.</span></span>
-   <span data-ttu-id="ddc54-127">Поддержка поблочного перемещения HTTP/1.1 для HTTP-ответов.</span><span class="sxs-lookup"><span data-stu-id="ddc54-127">HTTP/1.1 chunked transfer support for HTTP responses.</span></span>
-   <span data-ttu-id="ddc54-128">Создание пулов анонимных подключений между сеансами.</span><span class="sxs-lookup"><span data-stu-id="ddc54-128">Keep-alive pooling of anonymous connections across sessions.</span></span>
-   <span data-ttu-id="ddc54-129">Функции SSL (SSL), включая сертификаты клиентов.</span><span class="sxs-lookup"><span data-stu-id="ddc54-129">Secure Sockets Layer (SSL) functionality, including client certificates.</span></span> <span data-ttu-id="ddc54-130">Поддерживаемые протоколы SSL включают следующие: SSL 2,0, SSL 3,0 и TLS 1,0.</span><span class="sxs-lookup"><span data-stu-id="ddc54-130">Supported SSL protocols include the following: SSL 2.0, SSL 3.0, and Transport Layer Security (TLS) 1.0.</span></span>
-   <span data-ttu-id="ddc54-131">Поддержка проверки подлинности сервера и прокси, включая интегрированную поддержку Microsoft Passport 1,4 и пакета Negotiate/ [Kerberos](../com/kerberos-v5-protocol.md) .</span><span class="sxs-lookup"><span data-stu-id="ddc54-131">Support for server and proxy authentication, including integrated support for Microsoft Passport 1.4 and the Negotiate/ [Kerberos](../com/kerberos-v5-protocol.md) package.</span></span>
-   <span data-ttu-id="ddc54-132">Автоматическая обработка перенаправлений, если она не подавлена.</span><span class="sxs-lookup"><span data-stu-id="ddc54-132">Automatic handling of redirects unless suppressed.</span></span>
-   <span data-ttu-id="ddc54-133">Интерфейс, поддерживающий создание скриптов, в дополнение к API.</span><span class="sxs-lookup"><span data-stu-id="ddc54-133">Scriptable interface in addition to the API.</span></span>
-   <span data-ttu-id="ddc54-134">Служебная программа трассировки для облегчения устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="ddc54-134">Trace utility to help troubleshoot problems.</span></span>

<span data-ttu-id="ddc54-135">В WinHTTP не поддерживаются некоторые функции [WinInet](/windows/desktop/WinInet/portal) , в том числе кэширование URL-адресов и постоянные файлы cookie, автопрокси, автонабор номеров, Автономная поддержка и протокол FTP (FTP).</span><span class="sxs-lookup"><span data-stu-id="ddc54-135">A number of [WinINet](/windows/desktop/WinInet/portal) features are not supported in WinHTTP, including URL caching and persistent cookies, autoproxy, autodialing, offline support, and File Transfer Protocol (FTP).</span></span>

<span data-ttu-id="ddc54-136">Дополнительные сведения об изменениях, появившихся в версии 5,1, см. в разделе [новые возможности WinHTTP 5,1](what-s-new-in-winhttp-5-1.md).</span><span class="sxs-lookup"><span data-stu-id="ddc54-136">For more information about changes introduced in version 5.1, see [What's New in WinHTTP 5.1](what-s-new-in-winhttp-5-1.md).</span></span>

## <a name="getting-started-with-winhttp"></a><span data-ttu-id="ddc54-137">начало работы с помощью WinHTTP</span><span class="sxs-lookup"><span data-stu-id="ddc54-137">Getting Started with WinHTTP</span></span>

<span data-ttu-id="ddc54-138">Дополнительные сведения о WinHTTP см. в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="ddc54-138">For more information about WinHTTP, see the following topics.</span></span>

* <span data-ttu-id="ddc54-139">[WinInet и WinHTTP](/windows/desktop/wininet/wininet-vs-winhttp) сравнивают две технологии для доступа к HTTP.</span><span class="sxs-lookup"><span data-stu-id="ddc54-139">[WinINet vs. WinHTTP](/windows/desktop/wininet/wininet-vs-winhttp) compares the two technologies for accessing HTTP.</span></span>
* <span data-ttu-id="ddc54-140">В [версиях WinHTTP](winhttp-versions.md) описывается журнал версий WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="ddc54-140">[WinHTTP Versions](winhttp-versions.md) describes the version history of WinHTTP.</span></span>
* <span data-ttu-id="ddc54-141">[Новые возможности в winhttp 5,1](what-s-new-in-winhttp-5-1.md) описывают изменения и новые функции в WinHTTP 5,1.</span><span class="sxs-lookup"><span data-stu-id="ddc54-141">[What's New in WinHTTP 5.1](what-s-new-in-winhttp-5-1.md) describes changes and new features in WinHTTP 5.1.</span></span>
* <span data-ttu-id="ddc54-142">[Терминология сети](network-terminology.md) описывает полезные понятия и терминологию, связанные с сетями в целом, и протокол HTTP в частности.</span><span class="sxs-lookup"><span data-stu-id="ddc54-142">[Network Terminology](network-terminology.md) describes useful concepts and terminology relating to networking in general and the HTTP protocol in particular.</span></span>
* <span data-ttu-id="ddc54-143">[Выбор интерфейса WinHTTP](choosing-a-winhttp-interface.md) описывает API C/C++ и COM-интерфейс для WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="ddc54-143">[Choosing a WinHTTP Interface](choosing-a-winhttp-interface.md) describes the C/C++ API and the COM interface for WinHTTP.</span></span>
* <span data-ttu-id="ddc54-144">[Вопросы безопасности WinHTTP](winhttp-security-considerations.md) описание проблем безопасности, которые следует учитывать при использовании WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="ddc54-144">[WinHTTP Security Considerations](winhttp-security-considerations.md) describes security issues to be aware of when using WinHTTP.</span></span>
* <span data-ttu-id="ddc54-145">[Перенос приложений WinInet в WinHTTP](porting-wininet-applications-to-winhttp.md) Описание способов изменения существующих приложений [WinInet](/windows/desktop/WinInet/portal) для использования API WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="ddc54-145">[Porting WinINet Applications to WinHTTP](porting-wininet-applications-to-winhttp.md) describes how to modify your existing [WinINet](/windows/desktop/WinInet/portal) applications to use the WinHTTP API.</span></span>
