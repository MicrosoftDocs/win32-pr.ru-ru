---
title: Srdelayed.exe
description: Приложения, выполняющие операции восстановления состояния системы на ранних этапах запуска операционной системы, могут не использовать функции управления файлами для перемещения, удаления или установки коротких имен определенных системных файлов.
ms.assetid: cedeb48e-bc1d-48d1-9bee-0b8b0132c3e5
keywords:
- Резервная копия Srdelayed.exe
- Резервная копия восстановления состояния системы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5a5f6b281c07f5b0ad8d6cd7e59b4f93ec9208a5
ms.sourcegitcommit: 46376be61d3fa308f9b1a06d7e2fa122a39755af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/10/2020
ms.locfileid: "104488460"
---
# <a name="srdelayedexe"></a><span data-ttu-id="7ff06-105">Srdelayed.exe</span><span class="sxs-lookup"><span data-stu-id="7ff06-105">Srdelayed.exe</span></span>

<span data-ttu-id="7ff06-106">Приложения, выполняющие операции восстановления состояния системы на ранних этапах запуска операционной системы, могут не использовать функции управления файлами для перемещения, удаления или установки коротких имен определенных системных файлов.</span><span class="sxs-lookup"><span data-stu-id="7ff06-106">Applications that perform system state restore operations early in the startup of the operating system may be unable to use the file management functions to move, delete, or set the short name of certain system files.</span></span> <span data-ttu-id="7ff06-107">Srdelayed.exe — это исполняемый файл, поставляемый с компонентом cистема архивации данных Windows Server (WSB) в Windows Server 2008, который может включать приложения восстановления состояния системы для перемещения, удаления и установки коротких имен системных файлов.</span><span class="sxs-lookup"><span data-stu-id="7ff06-107">Srdelayed.exe is an executable file, provided with the Windows Server Backup (WSB) feature in Windows Server 2008, that can enable system state recovery applications to move, delete, and set the short name of system files.</span></span>

<span data-ttu-id="7ff06-108">Средство Срделайед предназначено для приложений восстановления состояния системы. она не заменяет функции управления файлами.</span><span class="sxs-lookup"><span data-stu-id="7ff06-108">The Srdelayed tool is intended for system state recovery applications; it does not replace the file management functions.</span></span> <span data-ttu-id="7ff06-109">Это средство следует использовать только в том случае, если приложению не удается переместить, удалить или задать короткое имя системного файла с помощью функций [**мовефиликс**](/windows/desktop/api/winbase/nf-winbase-movefileexa), [**DeleteFile**](/windows/desktop/api/fileapi/nf-fileapi-deletefilea)и [**сетфилешортнаме**](/windows/desktop/api/winbase/nf-winbase-setfileshortnamea) .</span><span class="sxs-lookup"><span data-stu-id="7ff06-109">This tool should be used only when the application is unable to move, delete, or set the short name of a system file using the [**MoveFileEx**](/windows/desktop/api/winbase/nf-winbase-movefileexa), [**DeleteFile**](/windows/desktop/api/fileapi/nf-fileapi-deletefilea), and [**SetFileShortName**](/windows/desktop/api/winbase/nf-winbase-setfileshortnamea) functions.</span></span> <span data-ttu-id="7ff06-110">При восстановлении состояния системы и перезапуске Srdelayed.exe используется средством восстановления системы, а средство командной строки wbadmin.exe — для перемещения, удаления и задания краткого имени определенных системных файлов.</span><span class="sxs-lookup"><span data-stu-id="7ff06-110">During a system state restore and restart, Srdelayed.exe is used by System Restore and the wbadmin.exe command-line tool to move, delete, and set the short name on certain system files.</span></span> <span data-ttu-id="7ff06-111">Таким образом, срделайед может быть полезен для разработчиков, которым требуется возможность восстановления этих системных файлов в собственных приложениях восстановления состояния системы.</span><span class="sxs-lookup"><span data-stu-id="7ff06-111">Srdelayed may therefore be useful to developers that require the capability to restore these system files in their own system state recovery applications.</span></span>

<span data-ttu-id="7ff06-112">Срделайед может выполнять следующие операции:</span><span class="sxs-lookup"><span data-stu-id="7ff06-112">Srdelayed can perform the following operations:</span></span>

-   <span data-ttu-id="7ff06-113">Операция перемещения файла, аналогичная функции [**мовефиликс**](/windows/desktop/api/winbase/nf-winbase-movefileexa) с параметром **MOVEFILE \_ delay \_ до \_** флага reboot.</span><span class="sxs-lookup"><span data-stu-id="7ff06-113">A move file operation similar to the [**MoveFileEx**](/windows/desktop/api/winbase/nf-winbase-movefileexa) function with the **MOVEFILE\_DELAY\_UNTIL\_REBOOT** flag</span></span>
-   <span data-ttu-id="7ff06-114">Операция удаления файла, аналогичная функции [**DeleteFile**](/windows/desktop/api/fileapi/nf-fileapi-deletefilea)</span><span class="sxs-lookup"><span data-stu-id="7ff06-114">A delete file operation similar to the [**DeleteFile**](/windows/desktop/api/fileapi/nf-fileapi-deletefilea) function</span></span>
-   <span data-ttu-id="7ff06-115">Операция задания короткого имени, аналогичная функции [**сетфилешортнаме**](/windows/desktop/api/winbase/nf-winbase-setfileshortnamea)</span><span class="sxs-lookup"><span data-stu-id="7ff06-115">A set short-name operation similar to the [**SetFileShortName**](/windows/desktop/api/winbase/nf-winbase-setfileshortnamea) function</span></span>

<span data-ttu-id="7ff06-116">Чтобы использовать Срделайед, приложению требуется полный путь к расположению файла Srdelayed.exe и полный путь к текстовому файлу в Юникоде, который вы создали для хранения сведений, необходимых средству для выполнения всех запрошенных операций управления файлами.</span><span class="sxs-lookup"><span data-stu-id="7ff06-116">To use Srdelayed, your application requires the full path to the location of the Srdelayed.exe file and the full path to a Unicode text file that you have authored to contain the information the tool needs to perform all the file management operations being requested.</span></span> <span data-ttu-id="7ff06-117">Приложение несет ответственность за обеспечение того, что этот текстовый файл не содержит избыточных запросов для операции и обрабатывает все необходимые порядок операций управления файлами.</span><span class="sxs-lookup"><span data-stu-id="7ff06-117">Your application is responsible for ensuring that this text file does not contain redundant requests for an operation and that it handles any required ordering of the file management operations.</span></span> <span data-ttu-id="7ff06-118">Например, поскольку папка должна быть пустой для удаления, приложение должно убедиться, что в текстовом файле указано удаление всех файлов в папке, прежде чем запрашивать удаление папки.</span><span class="sxs-lookup"><span data-stu-id="7ff06-118">For example, because a folder must be empty to be deleted, your application needs to ensure that the text file specifies the removal of all files inside the folder before requesting the folder be deleted.</span></span>

<span data-ttu-id="7ff06-119">Если запись **сетупексекуте** еще не существует в реестре, приложение должно создать запись типа **reg \_ Multi \_ SZ** с именем **сетупексекуте** в следующем разделе реестра: **hKey \_ локальный \_ компьютер** \\ **System** \\ **CurrentControlSet** \\ **Управление** \\ **диспетчером сеансов**.</span><span class="sxs-lookup"><span data-stu-id="7ff06-119">If the **SetupExecute** entry does not already exist in the registry, your application needs to create a **REG\_MULTI\_SZ** type entry named **SetupExecute** under the following registry key: **HKEY\_LOCAL\_MACHINE**\\**System**\\**CurrentControlSet**\\**Control**\\**Session Manager**.</span></span>

<span data-ttu-id="7ff06-120">Приложение должно использовать следующий формат, чтобы присвоить параметру **сетупексекуте** полный путь к расположению файла Srdelayed.exe и полный путь к расположению текстового файла.</span><span class="sxs-lookup"><span data-stu-id="7ff06-120">Your application should use the following format to set the value of **SetupExecute** to the full path to the location of the Srdelayed.exe file and the full path to the location of the text file.</span></span> <span data-ttu-id="7ff06-121">Добавьте префикс " \\ \\ ?? \\ " в путь к текстовому файлу следующим образом:</span><span class="sxs-lookup"><span data-stu-id="7ff06-121">Prefix "\\\\??\\" to the path of the text file, as follows:</span></span>

<span data-ttu-id="7ff06-122">*Полный путь к Srdelayed.exe* \\ \\ ?? \\ *Полный путь к текстовому файлу*</span><span class="sxs-lookup"><span data-stu-id="7ff06-122">*Full Path to Srdelayed.exe* \\\\??\\*Full Path to Text file*</span></span>  


<span data-ttu-id="7ff06-123">Например, следующее значение для **сетупексекуте** указывает, что Srdelayed.exe находится в папке System32, а текстовый файл называется делайедоператионс:</span><span class="sxs-lookup"><span data-stu-id="7ff06-123">For example, the following value for **SetupExecute** indicates that the Srdelayed.exe is located in the System32 folder and the text file is named DelayedOperations:</span></span>

<span data-ttu-id="7ff06-124">В. \\ Windows \\ system32 \\srdelayed.exe \\ \\ ?? \\ C: \\ temp \\ делайедоператионс</span><span class="sxs-lookup"><span data-stu-id="7ff06-124">C:\\Windows\\System32\\srdelayed.exe \\\\??\\C:\\temp\\DelayedOperations</span></span>  


<span data-ttu-id="7ff06-125">Пробелы в пути и имени должны быть шестнадцатеричной кодировкой.</span><span class="sxs-lookup"><span data-stu-id="7ff06-125">Spaces in the path and name should be hexadecimal encoded.</span></span> <span data-ttu-id="7ff06-126">Например, для *программных файлов* закодировать путь как " \\ \\ ?? \\ C:Program%20Files \\a.dll ".</span><span class="sxs-lookup"><span data-stu-id="7ff06-126">For example, for *Program Files*, encode the path as "\\\\??\\C:Program%20Files\\a.dll".</span></span>

<span data-ttu-id="7ff06-127">При восстановлении реестра или системы после перезагрузки приложение должно обеспечить запись **сетупексекуте** в правильном кусте реестра.</span><span class="sxs-lookup"><span data-stu-id="7ff06-127">When the registry or system is being restored upon restart, your application needs to ensure that **SetupExecute** gets written in the correct registry hive.</span></span> <span data-ttu-id="7ff06-128">Восстановление реестра выполняется перед запуском Srdelayed.exe.</span><span class="sxs-lookup"><span data-stu-id="7ff06-128">Recovery of the registry is performed before Srdelayed.exe is run.</span></span> <span data-ttu-id="7ff06-129">Приложению необходимо записать **сетупексекуте** в восстановленную версию реестра, так как это считанная версия.</span><span class="sxs-lookup"><span data-stu-id="7ff06-129">The application needs to write **SetupExecute** into the recovered version of the registry because this is the version that is read.</span></span>

## <a name="format-for-the-srdelayed-input-file"></a><span data-ttu-id="7ff06-130">Формат входного файла Срделайед</span><span class="sxs-lookup"><span data-stu-id="7ff06-130">Format for the Srdelayed Input File</span></span>

<span data-ttu-id="7ff06-131">Все сведения Срделайед, необходимые для выполнения операций управления файлами, указываются в виде строки символов Юникода в текстовом файле Юникода.</span><span class="sxs-lookup"><span data-stu-id="7ff06-131">All the information Srdelayed needs to perform file management operations is specified as a string of Unicode characters in a Unicode text file.</span></span> <span data-ttu-id="7ff06-132">Строка символов Юникода разделяется на записи, которые разделяются на четыре поля.</span><span class="sxs-lookup"><span data-stu-id="7ff06-132">The string of Unicode characters is partitioned into records that are themselves each partitioned into four fields.</span></span> <span data-ttu-id="7ff06-133">Каждая запись указывает один файл перемещения, удалить файл или задать операцию короткого имени.</span><span class="sxs-lookup"><span data-stu-id="7ff06-133">Each record specifies a single move file, delete file, or set short-name operation.</span></span> <span data-ttu-id="7ff06-134">Четыре поля каждой записи содержат параметры для операции.</span><span class="sxs-lookup"><span data-stu-id="7ff06-134">The four fields of each record contain the parameters for the operation.</span></span> <span data-ttu-id="7ff06-135">Srdelayed.exe выполняет каждую операцию в том порядке, в котором их записи происходят в строке.</span><span class="sxs-lookup"><span data-stu-id="7ff06-135">Srdelayed.exe performs each operation in the order that their records occur in the string.</span></span> <span data-ttu-id="7ff06-136">Приложение должно проверить наличие повторяющихся записей в этом файле и удалить дубликаты.</span><span class="sxs-lookup"><span data-stu-id="7ff06-136">Your application should check for any duplicate records in this file and remove the duplicates.</span></span>

<span data-ttu-id="7ff06-137">Следующая строка иллюстрирует формат файла, запрашивающего две операции и состоящего из двух записей.</span><span class="sxs-lookup"><span data-stu-id="7ff06-137">The following string illustrates the format for a file requesting two operations and consisting of two records.</span></span> <span data-ttu-id="7ff06-138">Каждое поле параметра заканчивается одним символом L " \\ 0".</span><span class="sxs-lookup"><span data-stu-id="7ff06-138">Each parameter field ends with a single L'\\0' character.</span></span> <span data-ttu-id="7ff06-139">Запись состоит из четырех последовательных полей.</span><span class="sxs-lookup"><span data-stu-id="7ff06-139">A record is composed of four consecutive fields.</span></span> <span data-ttu-id="7ff06-140">\\К концу всех записей добавляется дополнительный один символ L "0".</span><span class="sxs-lookup"><span data-stu-id="7ff06-140">An additional single L'\\0' character is appended to the end of all records.</span></span>

`<ParamA1>L'\0'<ParamA2>L'\0'<ParamA3>L'\0'<ParamA4>L'\0'<ParamB1>L'\0'<ParamB2>L'\0'<ParamB3>L'\0'<ParamB4>L'\0'L'\0'`  
`|-----------------------RecordA------------------------|------------------------RecordB------------------------|`  


<span data-ttu-id="7ff06-141">Значение первого, второго, третьего и четвертого полей параметров зависит от того, описывает ли запись описание операции перемещения, удаления или задания короткого имени.</span><span class="sxs-lookup"><span data-stu-id="7ff06-141">The meaning of the first, second, third, and fourth parameter fields depends on whether the record describes a move, delete, or set short-name operation.</span></span>

## <a name="format-for-a-move-file-record"></a><span data-ttu-id="7ff06-142">Формат записи для перемещения файла</span><span class="sxs-lookup"><span data-stu-id="7ff06-142">Format for a Move File Record</span></span>

<span data-ttu-id="7ff06-143">Поле 1 определяет это как запрос на перемещение файла.</span><span class="sxs-lookup"><span data-stu-id="7ff06-143">Field 1 identifies this as a request to move a file.</span></span> <span data-ttu-id="7ff06-144">Значение в этом поле всегда равно L "MoveFile" и учитывает регистр.</span><span class="sxs-lookup"><span data-stu-id="7ff06-144">The value in this field is always L"MoveFile" and is case sensitive.</span></span>

<span data-ttu-id="7ff06-145">Поле 2 указывает исходное расположение файла.</span><span class="sxs-lookup"><span data-stu-id="7ff06-145">Field 2 specifies the source location of the file.</span></span> <span data-ttu-id="7ff06-146">Операция перемещения файла Срделайед не поддерживает перемещение папки.</span><span class="sxs-lookup"><span data-stu-id="7ff06-146">The Srdelayed move file operation does not support moving a folder.</span></span> <span data-ttu-id="7ff06-147">В этом поле должен быть указан файл.</span><span class="sxs-lookup"><span data-stu-id="7ff06-147">A file must be specified in this field.</span></span> <span data-ttu-id="7ff06-148">Значение этого поля представляет собой полный путь к файлу, добавленному к " \\ \\ ?? \\ ", если путь не включает глобальный уникальный идентификатор (GUID), в \\ \\ \\ качестве префикса используется "?".</span><span class="sxs-lookup"><span data-stu-id="7ff06-148">The value for this field is the full path of the file appended to "\\\\??\\" unless the path includes a globally unique identifier (GUID), which uses "\\\\?\\" as a prefix.</span></span> <span data-ttu-id="7ff06-149">Удалить " \\ \\ ? \\ " перед добавлением в " \\ \\ ?? \\ ".</span><span class="sxs-lookup"><span data-stu-id="7ff06-149">Remove "\\\\?\\" before appending to "\\\\??\\".</span></span>

<span data-ttu-id="7ff06-150">Поле 3 задает назначение файла.</span><span class="sxs-lookup"><span data-stu-id="7ff06-150">Field 3 specifies the destination of the file.</span></span> <span data-ttu-id="7ff06-151">Операция перемещения файла работает только в пределах тома.</span><span class="sxs-lookup"><span data-stu-id="7ff06-151">The move file operation works only within a volume.</span></span> <span data-ttu-id="7ff06-152">Источник и назначение должны находиться на одном томе.</span><span class="sxs-lookup"><span data-stu-id="7ff06-152">The source and destination must be on the same volume.</span></span> <span data-ttu-id="7ff06-153">Значение этого поля представляет собой полный путь к файлу, добавленному к " \\ \\ ?? \\ ", если путь не включает глобальный уникальный идентификатор (GUID), в \\ \\ \\ качестве префикса используется "?".</span><span class="sxs-lookup"><span data-stu-id="7ff06-153">The value for this field is the full path of the file appended to "\\\\??\\" unless the path includes a globally unique identifier (GUID), which uses "\\\\?\\" as a prefix.</span></span> <span data-ttu-id="7ff06-154">Удалить " \\ \\ ? \\ " перед добавлением в " \\ \\ ?? \\ ".</span><span class="sxs-lookup"><span data-stu-id="7ff06-154">Remove "\\\\?\\" before appending to "\\\\??\\".</span></span>

<span data-ttu-id="7ff06-155">Поле 4 получает сведения о состоянии от Срделайед.</span><span class="sxs-lookup"><span data-stu-id="7ff06-155">Field 4 receives status information from Srdelayed.</span></span> <span data-ttu-id="7ff06-156">Для новой записи значение в этом поле должно быть равно L "Нотексекутед".</span><span class="sxs-lookup"><span data-stu-id="7ff06-156">The value in this field should be set to L"NotExecuted" for a new record.</span></span>

<span data-ttu-id="7ff06-157">Следующий пример ссылается на файл по пути к диску.</span><span class="sxs-lookup"><span data-stu-id="7ff06-157">The following example references the file by drive path.</span></span> <span data-ttu-id="7ff06-158">Если путь и имя источника имеют значение C: \\ Stage \\a.dll, эта запись запрашивает, срделайед переместить его на диск c: \\ temp \\a.dll.</span><span class="sxs-lookup"><span data-stu-id="7ff06-158">If the path and name of the source is C:\\Stage\\a.dll, this record requests that Srdelayed move it to C:\\temp\\a.dll.</span></span>

<span data-ttu-id="7ff06-159">MoveFile \\ \\ ?? \\ В. \\ этап \\a.dll \\ \\ ?? \\ C: \\ temp \\a.dll нотексекутед</span><span class="sxs-lookup"><span data-stu-id="7ff06-159">MoveFile \\\\??\\C:\\Stage\\a.dll \\\\??\\C:\\temp\\a.dll NotExecuted</span></span>  


<span data-ttu-id="7ff06-160">В следующем примере показано, как ссылаться на файл по пути GUID тома.</span><span class="sxs-lookup"><span data-stu-id="7ff06-160">The following example references the file by volume GUID path.</span></span> <span data-ttu-id="7ff06-161">Если путь и имя источника имеют значение \\ \\ ? \\a.dll стадия {26a21bda-a627-11d7-9931-806e6f6e6963 \\ } \\ , запрашивается ли эта запись, которую срделайед переместить \\ \\ ? \\ Том {26a21bda-a627-11d7-9931-806e6f6e6963}, \\ временный \\a.dll</span><span class="sxs-lookup"><span data-stu-id="7ff06-161">If the path and name of the source is \\\\?\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\Stage\\a.dll, this record requests that Srdelayed move it to \\\\?\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\a.dll</span></span>

 <span data-ttu-id="7ff06-162">MoveFile \\ \\ ?? \\ Стадия {26a21bda-a627-11d7-9931-806e6f6e6963} \\ \\a.dll \\ \\ ?? \\ Том {26a21bda-a627-11d7-9931-806e6f6e6963}, \\ временный \\a.dll нотексекутед</span><span class="sxs-lookup"><span data-stu-id="7ff06-162">MoveFile \\\\??\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\Stage\\a.dll \\\\??\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\a.dll NotExecuted</span></span>  


## <a name="format-for-a-delete-file-record"></a><span data-ttu-id="7ff06-163">Формат записи файла удаления</span><span class="sxs-lookup"><span data-stu-id="7ff06-163">Format for a Delete File Record</span></span>

<span data-ttu-id="7ff06-164">Поле 1 определяет это как запрос на удаление файла.</span><span class="sxs-lookup"><span data-stu-id="7ff06-164">Field 1 identifies this as a request to delete a file.</span></span> <span data-ttu-id="7ff06-165">Значение в этом поле всегда равно L "DeleteFile" и учитывает регистр.</span><span class="sxs-lookup"><span data-stu-id="7ff06-165">The value in this field is always L"DeleteFile" and is case sensitive.</span></span>

<span data-ttu-id="7ff06-166">Поле 2 не используется.</span><span class="sxs-lookup"><span data-stu-id="7ff06-166">Field 2 is unused.</span></span> <span data-ttu-id="7ff06-167">Значение в этом поле должно быть равно L "не используется".</span><span class="sxs-lookup"><span data-stu-id="7ff06-167">The value in this field should be set to L"Unused".</span></span>

<span data-ttu-id="7ff06-168">Поле 3 указывает удаляемый файл.</span><span class="sxs-lookup"><span data-stu-id="7ff06-168">Field 3 specifies the file to be removed.</span></span> <span data-ttu-id="7ff06-169">Чтобы удалить папку, она должна быть пустой.</span><span class="sxs-lookup"><span data-stu-id="7ff06-169">A folder must be empty to be removed.</span></span> <span data-ttu-id="7ff06-170">Используйте операции удаления файлов, чтобы удалить все файлы из папки перед удалением папки.</span><span class="sxs-lookup"><span data-stu-id="7ff06-170">Use delete file operations to remove all files in the folder before removing the folder.</span></span> <span data-ttu-id="7ff06-171">Значение этого поля представляет собой полный путь к файлу, добавленному к " \\ \\ ?? \\ ", если путь не включает глобальный уникальный идентификатор (GUID), в \\ \\ \\ качестве префикса используется "?".</span><span class="sxs-lookup"><span data-stu-id="7ff06-171">The value for this field is the full path of the file appended to "\\\\??\\" unless the path includes a globally unique identifier (GUID), which uses "\\\\?\\" as a prefix.</span></span> <span data-ttu-id="7ff06-172">Удалить " \\ \\ ? \\ " перед добавлением в " \\ \\ ?? \\ ".</span><span class="sxs-lookup"><span data-stu-id="7ff06-172">Remove "\\\\?\\" before appending to "\\\\??\\".</span></span>

<span data-ttu-id="7ff06-173">Поле 4 получает сведения о состоянии от Срделайед.</span><span class="sxs-lookup"><span data-stu-id="7ff06-173">Field 4 receives status information from Srdelayed.</span></span> <span data-ttu-id="7ff06-174">Для новой записи значение в этом поле должно быть равно L "Нотексекутед".</span><span class="sxs-lookup"><span data-stu-id="7ff06-174">The value in this field should be set to L"NotExecuted" for a new record.</span></span>

<span data-ttu-id="7ff06-175">Следующий пример ссылается на файл по пути к диску.</span><span class="sxs-lookup"><span data-stu-id="7ff06-175">The following example references the file by drive path.</span></span> <span data-ttu-id="7ff06-176">Если путь и имя имеют значение C: \\ temp \\b.dll, эта запись запрашивает, срделайед удалить файл.</span><span class="sxs-lookup"><span data-stu-id="7ff06-176">If the path and name is C:\\temp\\b.dll, this record requests that Srdelayed delete the file.</span></span>

<span data-ttu-id="7ff06-177">DeleteFile не используется \\ \\ ? \\ C: \\ temp \\b.dll нотексекутед</span><span class="sxs-lookup"><span data-stu-id="7ff06-177">DeleteFile Unused \\\\??\\C:\\temp\\b.dll NotExecuted</span></span>  


<span data-ttu-id="7ff06-178">В следующем примере показано, как ссылаться на файл по GUID тома.</span><span class="sxs-lookup"><span data-stu-id="7ff06-178">The following example references the file by volume GUID.</span></span> <span data-ttu-id="7ff06-179">Если путь и имя имеют значение \\ \\ ? \\ Volume {26a21bda-a627-11d7-9931-806e6f6e6963} \\ temp \\b.dll, эта запись запрашивает, срделайед удалить файл.</span><span class="sxs-lookup"><span data-stu-id="7ff06-179">If the path and name is \\\\?\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\b.dll, this record requests that Srdelayed remove the file.</span></span>

<span data-ttu-id="7ff06-180">DeleteFile не используется \\ \\ ? \\ Том {26a21bda-a627-11d7-9931-806e6f6e6963}, \\ временный \\b.dll\\ нотексекутед</span><span class="sxs-lookup"><span data-stu-id="7ff06-180">DeleteFile Unused \\\\??\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\b.dll\\ NotExecuted</span></span>  


## <a name="format-for-set-short-name-record"></a><span data-ttu-id="7ff06-181">Формат записи Short-Name Set</span><span class="sxs-lookup"><span data-stu-id="7ff06-181">Format for Set Short-Name Record</span></span>

<span data-ttu-id="7ff06-182">Поле 1 определяет это как запрос на задание краткого имени файла.</span><span class="sxs-lookup"><span data-stu-id="7ff06-182">Field 1 identifies this as a request to set a file's short name.</span></span> <span data-ttu-id="7ff06-183">Значение в этом поле всегда равно L "Сетфилешортнаме" и учитывает регистр.</span><span class="sxs-lookup"><span data-stu-id="7ff06-183">The value in this field is always L"SetFileShortName" and is case sensitive.</span></span>

<span data-ttu-id="7ff06-184">Поле 2 указывает короткое имя.</span><span class="sxs-lookup"><span data-stu-id="7ff06-184">Field 2 specifies the short name.</span></span>

<span data-ttu-id="7ff06-185">Поле 3. указывает путь и длинное имя для получения короткого имени.</span><span class="sxs-lookup"><span data-stu-id="7ff06-185">Field 3 field specifies the path and long name to receive the short name.</span></span> <span data-ttu-id="7ff06-186">Значение этого поля представляет собой путь и длинное имя файла, добавленного к " \\ \\ ?? \\ ", если путь не включает в себя глобальный уникальный идентификатор (GUID), в качестве префикса которого используется символ " \\ \\ ? \\ ".</span><span class="sxs-lookup"><span data-stu-id="7ff06-186">The value for this field is the path and long name of the file appended to "\\\\??\\" unless the path includes a globally unique identifier (GUID), which uses "\\\\?\\" as a prefix.</span></span> <span data-ttu-id="7ff06-187">Удалить " \\ \\ ? \\ " перед добавлением в " \\ \\ ?? \\ ".</span><span class="sxs-lookup"><span data-stu-id="7ff06-187">Remove "\\\\?\\" before appending to "\\\\??\\".</span></span>

<span data-ttu-id="7ff06-188">Поле 4 получает сведения о состоянии от Срделайед.</span><span class="sxs-lookup"><span data-stu-id="7ff06-188">Field 4 receives status information from Srdelayed.</span></span> <span data-ttu-id="7ff06-189">Для новой записи значение в этом поле должно быть равно L "Нотексекутед".</span><span class="sxs-lookup"><span data-stu-id="7ff06-189">The value in this field should be set to L"NotExecuted" for a new record.</span></span>

<span data-ttu-id="7ff06-190">Следующий пример ссылается на файл по пути к диску.</span><span class="sxs-lookup"><span data-stu-id="7ff06-190">The following example references the file by drive path.</span></span> <span data-ttu-id="7ff06-191">Если путь и имя файла имеют значение C: \\ temp \\ShortFileName.dll, эта запись запрашивает, что файл получает короткое имя, шортн ~1.dll.</span><span class="sxs-lookup"><span data-stu-id="7ff06-191">If the path and name of the file is C:\\temp\\ShortFileName.dll, this record requests that the file receive a short name, ShortN~1.dll.</span></span>

<span data-ttu-id="7ff06-192">Сетфилешортнаме Шортн ~1.dll \\ \\ ?? \\ C: \\ temp \\ShortFileName.dll нотексекутед</span><span class="sxs-lookup"><span data-stu-id="7ff06-192">SetFileShortName ShortN~1.dll \\\\??\\C:\\temp\\ShortFileName.dll NotExecuted</span></span>  


<span data-ttu-id="7ff06-193">В следующем примере показано, как ссылаться на файл по GUID тома.</span><span class="sxs-lookup"><span data-stu-id="7ff06-193">The following example references the file by volume GUID.</span></span> <span data-ttu-id="7ff06-194">Если путь и имя файла имеют значение \\ \\ ? \\ Volume {26a21bda-a627-11d7-9931-806e6f6e6963} \\ temp \\ShortFileName.dll\\ , эта запись запрашивает, что файл получает короткое имя, шортн ~1.dll.</span><span class="sxs-lookup"><span data-stu-id="7ff06-194">If the path and name of the file is \\\\?\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\ShortFileName.dll\\, this record requests that the file receive a short name, ShortN~1.dll.</span></span>

<span data-ttu-id="7ff06-195">Сетфилешортнаме Шортн ~1.dll \\ \\ ?? \\ Том {26a21bda-a627-11d7-9931-806e6f6e6963}, \\ временный \\ShortFileName.dll\\ нотексекутед</span><span class="sxs-lookup"><span data-stu-id="7ff06-195">SetFileShortName ShortN~1.dll \\\\??\\Volume{26a21bda-a627-11d7-9931-806e6f6e6963}\\temp\\ShortFileName.dll\\ NotExecuted</span></span>  


## <a name="srdelayed-operations-status"></a><span data-ttu-id="7ff06-196">Состояние операций срделайед</span><span class="sxs-lookup"><span data-stu-id="7ff06-196">Srdelayed Operations Status</span></span>

<span data-ttu-id="7ff06-197">Срделайед записывает строку L "SC =*XXXXXXX*" в четвертое поле каждой записи текстового файла, где *XXXXXXX* — это шестнадцатеричное значение, указывающее состояние запрошенной операции.</span><span class="sxs-lookup"><span data-stu-id="7ff06-197">Srdelayed writes the string L"SC=*xxxxxxx*" into the fourth field of each record of the text file, where *xxxxxxx* is a hexadecimal that indicates the status of the requested operation.</span></span> <span data-ttu-id="7ff06-198">Нулевое значение указывает на то, что операция завершилась удачно.</span><span class="sxs-lookup"><span data-stu-id="7ff06-198">A value of zero indicates the operation succeeded.</span></span>

<span data-ttu-id="7ff06-199">Срделайед создает раздел реестра с именем **SystemRestore** в разделе **hKey \_ Local \_ Machine** \\ **Software** \\ **Microsoft** \\ **Windows NT** \\ **CurrentVersion** для записи результата всей операции восстановления.</span><span class="sxs-lookup"><span data-stu-id="7ff06-199">Srdelayed creates a registry key named **SystemRestore** under **HKEY\_LOCAL\_MACHINE**\\**Software**\\**Microsoft**\\**Windows NT**\\**CurrentVersion** to log the outcome of the entire restore operation.</span></span> <span data-ttu-id="7ff06-200">Если Срделайед выполняет все запрошенные операции с успешным выполнением, имя Ресторестатусресулт записывается в этом разделе с нулевым значением.</span><span class="sxs-lookup"><span data-stu-id="7ff06-200">If Srdelayed performs all the requested operations with success, the name RestoreStatusResult is written under this key with a zero value.</span></span> <span data-ttu-id="7ff06-201">Если Срделайед не удается выполнить какие-либо из запрошенных операций, имена Ресторестатусресулт и Ресторестатусдетаилс записываются в этом разделе с ненулевыми значениями.</span><span class="sxs-lookup"><span data-stu-id="7ff06-201">If Srdelayed is unable to perform any of the requested operations, the names RestoreStatusResult and RestoreStatusDetails are written under this key with nonzero values.</span></span> <span data-ttu-id="7ff06-202">Имя Ресторестатусдетаилс записывается под этим ключом только в том случае, если Срделайед не может выполнить какие-либо запрошенные операции.</span><span class="sxs-lookup"><span data-stu-id="7ff06-202">The name RestoreStatusDetails is written under this key only if Srdelayed is unable to perform any requested operations.</span></span> <span data-ttu-id="7ff06-203">Если операция для задания краткого имени файла завершается неудачно, Срделайед переходит к следующей операции.</span><span class="sxs-lookup"><span data-stu-id="7ff06-203">If an operation to set the short name of a file is unsuccessful, Srdelayed continues to the next operation.</span></span> <span data-ttu-id="7ff06-204">Срделайед считает, что операции перемещения файла и удаления файлов являются критическими и не продолжают работу, если операция перемещения или удаления завершается неудачно.</span><span class="sxs-lookup"><span data-stu-id="7ff06-204">Srdelayed considers the move file and delete file operations to be critical and does not continue if a move or delete operation is unsuccessful.</span></span>

 

 