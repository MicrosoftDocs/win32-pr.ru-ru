---
description: Объект Volume
ms.assetid: 92013015-b0f5-4b92-937b-c2637f65810c
title: Объект Volume
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4e47092a237e7b0e9441b08c410d95d0836dbdb7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105674456"
---
# <a name="volume-object"></a><span data-ttu-id="d7d05-103">Объект Volume</span><span class="sxs-lookup"><span data-stu-id="d7d05-103">Volume Object</span></span>

<span data-ttu-id="d7d05-104">\[Начиная с Windows 8 и Windows Server 2012, интерфейс COM [службы виртуальных дисков](virtual-disk-service-portal.md) заменяется [API управления хранилищами Windows](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]</span><span class="sxs-lookup"><span data-stu-id="d7d05-104">\[Beginning with Windows 8 and Windows Server 2012, the [Virtual Disk Service](virtual-disk-service-portal.md) COM interface is superseded by the [Windows Storage Management API](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]</span></span>

<span data-ttu-id="d7d05-105">Объект тома моделирует логическую единицу хранения, созданную поставщиком программного обеспечения и представленную файловой системе в качестве диска.</span><span class="sxs-lookup"><span data-stu-id="d7d05-105">A volume object models a logical storage unit that is created by a software provider and presented to the file system as a disk.</span></span> <span data-ttu-id="d7d05-106">Каждый том состоит по крайней мере из одного плекса тома, который, в свою очередь, состоит из экстентов одного или нескольких дисков.</span><span class="sxs-lookup"><span data-stu-id="d7d05-106">Each volume comprises at least one volume plex, which is in turn composed of extents from one or more disks.</span></span>

## <a name="volume-types"></a><span data-ttu-id="d7d05-107">Типы томов</span><span class="sxs-lookup"><span data-stu-id="d7d05-107">Volume Types</span></span>

<span data-ttu-id="d7d05-108">Служба VDS поддерживает пять типов томов: простые, составные, чередующиеся, зеркальные и чередующиеся с четностью.</span><span class="sxs-lookup"><span data-stu-id="d7d05-108">VDS supports five volume types: simple, spanned, striped, mirrored, and striped with parity.</span></span> <span data-ttu-id="d7d05-109">Простые, составные и чередующиеся тома не являются отказоустойчивыми; тома с зеркальным отображением и четности являются отказоустойчивыми.</span><span class="sxs-lookup"><span data-stu-id="d7d05-109">Simple, spanned, and striped volumes are non-fault tolerant; mirrored and parity volumes are fault tolerant.</span></span> <span data-ttu-id="d7d05-110">В оставшейся части этого раздела описываются все типы томов VDS.</span><span class="sxs-lookup"><span data-stu-id="d7d05-110">The remainder of this section describes each of the VDS volume types.</span></span>

-   <span data-ttu-id="d7d05-111">Простой том — это часть физического диска, которая работает, как будто это физически отдельная единица.</span><span class="sxs-lookup"><span data-stu-id="d7d05-111">A simple volume is a portion of a physical disk that functions as though it were a physically separate unit.</span></span> <span data-ttu-id="d7d05-112">Простой том может состоять из одного региона на диске или нескольких регионов того же диска, которые связаны друг с другом.</span><span class="sxs-lookup"><span data-stu-id="d7d05-112">A simple volume can consist of a single region on a disk or multiple regions of the same disk that are linked together.</span></span>
-   <span data-ttu-id="d7d05-113">Составной том объединяет области нераспределенного пространства из нескольких дисков в один логический том, что позволяет более эффективно использовать все пространство и все буквы дисков в системе с несколькими дисками.</span><span class="sxs-lookup"><span data-stu-id="d7d05-113">A spanned volume combines areas of unallocated space from multiple disks into one logical volume, allowing you to more efficiently use all of the space and all the drive letters on a multiple-disk system.</span></span>
-   <span data-ttu-id="d7d05-114">Чередующийся том создается путем объединения областей свободного места на двух или более дисках в один логический том.</span><span class="sxs-lookup"><span data-stu-id="d7d05-114">A striped volume is created by combining areas of free space on two or more disks into one logical volume.</span></span> <span data-ttu-id="d7d05-115">Чередующиеся тома используют RAID-0, который распределяет данные между несколькими дисками.</span><span class="sxs-lookup"><span data-stu-id="d7d05-115">Striped volumes use RAID-0, which stripes data across multiple disks.</span></span> <span data-ttu-id="d7d05-116">Чередующиеся тома не могут быть расширены или зеркально отображены и не обеспечивают отказоустойчивость.</span><span class="sxs-lookup"><span data-stu-id="d7d05-116">Striped volumes cannot be extended or mirrored, and do not offer fault tolerance.</span></span> <span data-ttu-id="d7d05-117">В случае сбоя одного из дисков, содержащих чередующийся том, произойдет сбой всего тома.</span><span class="sxs-lookup"><span data-stu-id="d7d05-117">If one of the disks containing a striped volume fails, the entire volume fails.</span></span> <span data-ttu-id="d7d05-118">При создании чередующихся томов лучше использовать диски с одинаковым размером, моделью и производителем.</span><span class="sxs-lookup"><span data-stu-id="d7d05-118">When creating striped volumes, it is best to use disks that are of the same size, model, and manufacturer.</span></span>
-   <span data-ttu-id="d7d05-119">Зеркальный том — это отказоустойчивый том, обеспечивающий избыточность данных с помощью двух копий (или плексов) тома для дублирования данных, хранящихся на томе.</span><span class="sxs-lookup"><span data-stu-id="d7d05-119">A mirrored volume is a fault-tolerant volume that provides data redundancy by using two copies, or plexes, of the volume to duplicate the data that is stored on the volume.</span></span> <span data-ttu-id="d7d05-120">Все данные, записанные на зеркальный том, записываются в оба плекса, расположенные на разных физических дисках.</span><span class="sxs-lookup"><span data-stu-id="d7d05-120">All data that is written to the mirrored volume is written to both plexes, which are located on separate physical disks.</span></span> <span data-ttu-id="d7d05-121">В случае сбоя одного из физических дисков данные на неисправном диске становятся недоступными, но система будет продолжать работать с использованием диска, не соответствующего затронутому.</span><span class="sxs-lookup"><span data-stu-id="d7d05-121">If one of the physical disks fails, the data on the failed disk becomes unavailable, but the system continues to operate using the unaffected disk.</span></span>
-   <span data-ttu-id="d7d05-122">Чередующийся том с четностью — это отказоустойчивый том с данными и четностью, который периодически распределяется между тремя или более физическими дисками.</span><span class="sxs-lookup"><span data-stu-id="d7d05-122">A striped with parity volume is a fault-tolerant volume with data and parity striped intermittently across three or more physical disks.</span></span> <span data-ttu-id="d7d05-123">В случае сбоя части физического диска можно повторно создать данные, находящийся в неисправной части, из оставшихся данных и четности.</span><span class="sxs-lookup"><span data-stu-id="d7d05-123">If a portion of a physical disk fails, you can recreate the data that was on the failed portion from the remaining data and parity.</span></span> <span data-ttu-id="d7d05-124">Этот тип тома (также называемый томом RAID-5) является хорошим решением для избыточности данных в компьютерной среде, в которой большинство действий состоит из чтения данных.</span><span class="sxs-lookup"><span data-stu-id="d7d05-124">This volume type (also called a RAID-5 volume) is a good solution for data redundancy in a computer environment in which most activity consists of reading data.</span></span>

### <a name="volume-creation"></a><span data-ttu-id="d7d05-125">Создание тома</span><span class="sxs-lookup"><span data-stu-id="d7d05-125">Volume Creation</span></span>

<span data-ttu-id="d7d05-126">Базовый и динамический поставщики программного обеспечения поддерживают частично направленное создание томов; вызывающий объект указывает только те атрибуты, которые относятся к определенному интересу, и позволяет поставщику выбрать остальные.</span><span class="sxs-lookup"><span data-stu-id="d7d05-126">Basic and dynamic software providers support partially directed volume creation; a caller specifies only those attributes that are of particular interest, and allows the provider to choose the rest.</span></span> <span data-ttu-id="d7d05-127">Служба VDS автоматически подключает созданный том, за исключением платформ Windows Server 2003, Enterprise Edition и Windows Server 2003, Datacenter Edition.</span><span class="sxs-lookup"><span data-stu-id="d7d05-127">VDS mounts a newly created volume automatically, except on Windows Server 2003, Enterprise Edition and Windows Server 2003, Datacenter Edition platforms.</span></span>

### <a name="working-with-volumes"></a><span data-ttu-id="d7d05-128">Работа с томами</span><span class="sxs-lookup"><span data-stu-id="d7d05-128">Working with Volumes</span></span>

<span data-ttu-id="d7d05-129">Всегда Создавайте том в том же пакете, что и диски, на которые он входит.</span><span class="sxs-lookup"><span data-stu-id="d7d05-129">Always create a volume within the same pack as the disks that contribute to it.</span></span> <span data-ttu-id="d7d05-130">Используйте метод [**ивдспакк:: креатеволуме**](/windows/desktop/api/Vds/nf-vds-ivdspack-createvolume) для создания нового объекта тома.</span><span class="sxs-lookup"><span data-stu-id="d7d05-130">Use the [**IVdsPack::CreateVolume**](/windows/desktop/api/Vds/nf-vds-ivdspack-createvolume) method to create a new volume object.</span></span> <span data-ttu-id="d7d05-131">Можно определить тома, содержащиеся в определенном пакете, вызвав метод [**куериволумес**](/windows/desktop/api/Vds/nf-vds-ivdspack-queryvolumes) , который также предоставляется [**ивдспакк**](/windows/desktop/api/Vds/nn-vds-ivdspack).</span><span class="sxs-lookup"><span data-stu-id="d7d05-131">You can determine the volumes that are contained within a specific pack by invoking the [**QueryVolumes**](/windows/desktop/api/Vds/nf-vds-ivdspack-queryvolumes) method, also exposed by [**IVdsPack**](/windows/desktop/api/Vds/nn-vds-ivdspack).</span></span> <span data-ttu-id="d7d05-132">Вызывающий объект может получить указатель на конкретный том, выбрав нужный объект тома из перечисления, возвращаемого **куериволумес**.</span><span class="sxs-lookup"><span data-stu-id="d7d05-132">A caller can get a pointer to a specific volume by selecting the desired volume object from the enumeration that is returned by **QueryVolumes**.</span></span> <span data-ttu-id="d7d05-133">С помощью объекта Volume можно задать состояние. запрос для плексов; расширение и сжатие тома; Добавление, прерывание и удаление плексов; и удалите том.</span><span class="sxs-lookup"><span data-stu-id="d7d05-133">With a volume object, you can set the status; query for plexes; extend and shrink the volume; add, break, and remove plexes; and delete the volume.</span></span>

<span data-ttu-id="d7d05-134">В дополнение к идентификатору объекта, имени и серийному номеру свойства объекта тома включают тип тома, размер, состояние, работоспособность, состояние перехода, флаги и рекомендуемый тип файловой системы.</span><span class="sxs-lookup"><span data-stu-id="d7d05-134">In addition to an object identifier, a name, and a serial number, volume object properties include the volume type, size, status, health, transition state, flags, and a recommended file system type.</span></span>

<span data-ttu-id="d7d05-135">В следующей таблице перечислены связанные интерфейсы, перечисления и структуры.</span><span class="sxs-lookup"><span data-stu-id="d7d05-135">The following table lists related interfaces, enumerations, and structures.</span></span>



| <span data-ttu-id="d7d05-136">Тип</span><span class="sxs-lookup"><span data-stu-id="d7d05-136">Type</span></span>                                              | <span data-ttu-id="d7d05-137">Элемент</span><span class="sxs-lookup"><span data-stu-id="d7d05-137">Element</span></span>                                                                                                                                                                                                               |
|---------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d7d05-138">Интерфейсы, которые всегда предоставляются этим объектом</span><span class="sxs-lookup"><span data-stu-id="d7d05-138">Interfaces that are always exposed by this object</span></span> | <span data-ttu-id="d7d05-139">[**Ивдсволуме**](/windows/desktop/api/Vds/nn-vds-ivdsvolume), [**ивдсволумемф**](/windows/desktop/api/Vds/nn-vds-ivdsvolumemf), [**IVdsVolumeMF2**](/windows/desktop/api/Vds/nn-vds-ivdsvolumemf2) \* , [**ивдсволумеонлине**](/windows/desktop/api/Vds/nn-vds-ivdsvolumeonline) \* и [**ивдсволумешринк**](/windows/desktop/api/Vds/nn-vds-ivdsvolumeshrink) \* .</span><span class="sxs-lookup"><span data-stu-id="d7d05-139">[**IVdsVolume**](/windows/desktop/api/Vds/nn-vds-ivdsvolume), [**IVdsVolumeMF**](/windows/desktop/api/Vds/nn-vds-ivdsvolumemf), [**IVdsVolumeMF2**](/windows/desktop/api/Vds/nn-vds-ivdsvolumemf2)\*, [**IVdsVolumeOnline**](/windows/desktop/api/Vds/nn-vds-ivdsvolumeonline)\*, and [**IVdsVolumeShrink**](/windows/desktop/api/Vds/nn-vds-ivdsvolumeshrink)\*.</span></span> |
| <span data-ttu-id="d7d05-140">Связанные перечисления</span><span class="sxs-lookup"><span data-stu-id="d7d05-140">Associated enumerations</span></span>                           | <span data-ttu-id="d7d05-141">Служба [**VDS \_ \_Флаг тома**](/windows/desktop/api/Vds/ne-vds-vds_volume_flag), [**\_ \_ состояние тома VDS**](/windows/desktop/api/Vds/ne-vds-vds_volume_status), [**\_ \_ тип тома VDS**](/windows/desktop/api/Vds/ne-vds-vds_volume_type)и [**\_ \_ \_ тип экстента диска VDS**](/windows/desktop/api/Vds/ne-vds-vds_disk_extent_type).</span><span class="sxs-lookup"><span data-stu-id="d7d05-141">[**VDS\_VOLUME\_FLAG**](/windows/desktop/api/Vds/ne-vds-vds_volume_flag), [**VDS\_VOLUME\_STATUS**](/windows/desktop/api/Vds/ne-vds-vds_volume_status), [**VDS\_VOLUME\_TYPE**](/windows/desktop/api/Vds/ne-vds-vds_volume_type), and [**VDS\_DISK\_EXTENT\_TYPE**](/windows/desktop/api/Vds/ne-vds-vds_disk_extent_type).</span></span>            |
| <span data-ttu-id="d7d05-142">Связанные структуры</span><span class="sxs-lookup"><span data-stu-id="d7d05-142">Associated structures</span></span>                             | <span data-ttu-id="d7d05-143">Служба [**VDS \_ Уведомление \_ тома**](/windows/desktop/api/Vds/ns-vds-vds_volume_prop) и [**\_ \_ уведомления о томе VDS**](/windows/desktop/api/Vds/ns-vds-vds_volume_notification).</span><span class="sxs-lookup"><span data-stu-id="d7d05-143">[**VDS\_VOLUME\_PROP**](/windows/desktop/api/Vds/ns-vds-vds_volume_prop) and [**VDS\_VOLUME\_NOTIFICATION**](/windows/desktop/api/Vds/ns-vds-vds_volume_notification).</span></span>                                                                                                        |



 

<span data-ttu-id="d7d05-144">**\* Windows Server 2003:** эти интерфейсы не поддерживаются до Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="d7d05-144">**\*Windows Server 2003:** These interfaces are not supported until Windows Vista.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d7d05-145">См. также</span><span class="sxs-lookup"><span data-stu-id="d7d05-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d7d05-146">Объекты поставщика программного обеспечения</span><span class="sxs-lookup"><span data-stu-id="d7d05-146">Software Provider Objects</span></span>](software-provider-objects.md)
</dt> </dl>

 

 
