---
description: О службе VDS
ms.assetid: b2f7628c-b567-40a9-9ad7-6c47077af5fb
title: О службе VDS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 911145fda8f2dd63c886530af3d8507c38d8e829
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/04/2021
ms.locfileid: "104570433"
---
# <a name="about-vds"></a><span data-ttu-id="90eeb-103">О службе VDS</span><span class="sxs-lookup"><span data-stu-id="90eeb-103">About VDS</span></span>

<span data-ttu-id="90eeb-104">\[Начиная с Windows 8 и Windows Server 2012, интерфейс COM [службы виртуальных дисков](virtual-disk-service-portal.md) заменяется [API управления хранилищами Windows](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]</span><span class="sxs-lookup"><span data-stu-id="90eeb-104">\[Beginning with Windows 8 and Windows Server 2012, the [Virtual Disk Service](virtual-disk-service-portal.md) COM interface is superseded by the [Windows Storage Management API](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]</span></span>

<span data-ttu-id="90eeb-105">Служба виртуальных дисков — это служба Microsoft Windows, которая выполняет операции запроса и настройки по запросу конечных пользователей, сценариев и приложений.</span><span class="sxs-lookup"><span data-stu-id="90eeb-105">Virtual Disk Service is a Microsoft Windows service that performs query and configuration operations at the request of end users, scripts, and applications.</span></span> <span data-ttu-id="90eeb-106">Служба расширяет имеющиеся возможности хранения операционных систем Windows Server следующими способами:</span><span class="sxs-lookup"><span data-stu-id="90eeb-106">The service extends the existing storage capabilities of Windows Server operating systems in the following ways:</span></span>

-   <span data-ttu-id="90eeb-107">Предоставляет API для существующих функций управления томами и дисками в Windows.</span><span class="sxs-lookup"><span data-stu-id="90eeb-107">Provides an API to the existing volume and disk management features in Windows.</span></span>
-   <span data-ttu-id="90eeb-108">Объединяет управление томами и аппаратно избыточный массив независимых дисков (RAID) с помощью одного API.</span><span class="sxs-lookup"><span data-stu-id="90eeb-108">Unifies volume management and hardware Redundant Array of Independent Disks (RAID) management under a single API.</span></span>

<span data-ttu-id="90eeb-109">Служба VDS не выполняет следующие действия по управлению хранилищем:</span><span class="sxs-lookup"><span data-stu-id="90eeb-109">VDS does not perform the following storage-management activities:</span></span>

-   <span data-ttu-id="90eeb-110">Управление подсистемой оборудования, например мониторинг температуры или мониторинг статистики производительности для дисковых массивов.</span><span class="sxs-lookup"><span data-stu-id="90eeb-110">Hardware subsystem management, such as temperature monitoring or the monitoring of performance statistics for disk arrays.</span></span>
-   <span data-ttu-id="90eeb-111">Управление структурой сети хранения данных (SAN), например, зонирование Host-Based Adapter (HBA) и безопасность.</span><span class="sxs-lookup"><span data-stu-id="90eeb-111">Storage Area Network (SAN) fabric management, such as Host-Based Adapter (HBA) zoning and security.</span></span>

<span data-ttu-id="90eeb-112">В следующих разделах описывается архитектура VDS, роль поставщиков VDS и API.</span><span class="sxs-lookup"><span data-stu-id="90eeb-112">The sections that follow describe the architecture of VDS, the role of VDS providers, and the API.</span></span>

## <a name="service-architecture"></a><span data-ttu-id="90eeb-113">Архитектура службы</span><span class="sxs-lookup"><span data-stu-id="90eeb-113">Service Architecture</span></span>

<span data-ttu-id="90eeb-114">Служба VDS определяет три интерфейса: единый интерфейс между уровнем приложения и службой, а также два интерфейса между программами службы и поставщика на уровне данных.</span><span class="sxs-lookup"><span data-stu-id="90eeb-114">VDS defines three interfaces: a single interface between the application layer and the service, and two interfaces between the service and provider programs in the data layer.</span></span> <span data-ttu-id="90eeb-115">На следующем рисунке показана граница между службами и границами между приложениями и поставщиками.</span><span class="sxs-lookup"><span data-stu-id="90eeb-115">The following illustration shows the application-to-service boundary and the service-to-provider boundary.</span></span>

![Схема, на которой показана архитектура службы, разбивается на разделы "приложения", "Служба виртуальных дисков" и "поставщики VDS".](images/vdsoverview.png)

<span data-ttu-id="90eeb-117">N-уровневая архитектура позволяет службе VDS координировать функции файловой системы, синхронизировать действия поставщика и выполнять арбитраж между приложениями.</span><span class="sxs-lookup"><span data-stu-id="90eeb-117">N-tier architecture enables VDS to coordinate with the file-system functions, synchronize provider activities, and arbitrate between applications.</span></span> <span data-ttu-id="90eeb-118">Между приложением и поставщиком служба VDS предоставляет единую функциональность для приложений, даже если некоторые из базовых поставщиков могут не иметь такой единообразия.</span><span class="sxs-lookup"><span data-stu-id="90eeb-118">Being between the application and provider, VDS presents uniform functionality to applications even though some the underlying providers might lack such uniformity.</span></span>

<span data-ttu-id="90eeb-119">Служба реализует общие функциональные возможности: форматирование томов, Добавление и удаление букв дисков или подключенных папок, а также управление нераспределенными дисками — дисками, не имеющими сведений о разделах.</span><span class="sxs-lookup"><span data-stu-id="90eeb-119">The service implements common functionality: formatting volumes, adding and removing drive letters or mounted folders, as well as managing unallocated disks—disks having no partition information.</span></span> <span data-ttu-id="90eeb-120">Служба VDS также возвращает уведомления о событиях зарегистрированным приложениям.</span><span class="sxs-lookup"><span data-stu-id="90eeb-120">VDS also returns event notifications to registered applications.</span></span> <span data-ttu-id="90eeb-121">Дополнительные сведения см. в разделе [уведомления службы VDS](vds-notification-model.md).</span><span class="sxs-lookup"><span data-stu-id="90eeb-121">For details, see [VDS Notifications](vds-notification-model.md).</span></span>

## <a name="role-of-providers"></a><span data-ttu-id="90eeb-122">Роль поставщиков</span><span class="sxs-lookup"><span data-stu-id="90eeb-122">Role of Providers</span></span>

<span data-ttu-id="90eeb-123">Служба VDS определяет два интерфейса поставщика, один для поставщика программного обеспечения, а другой для поставщика оборудования.</span><span class="sxs-lookup"><span data-stu-id="90eeb-123">VDS defines two provider interfaces, one for a software provider and one for a hardware provider.</span></span> <span data-ttu-id="90eeb-124">Каждый поставщик реализует отдельную часть API, определенную службой VDS:</span><span class="sxs-lookup"><span data-stu-id="90eeb-124">Each provider implements a different portion of the API defined by VDS:</span></span>

-   <span data-ttu-id="90eeb-125">*Поставщик программного обеспечения* — это программа на основе узла, поддерживаемая драйвером режима ядра в стеке ввода-вывода хранилища.</span><span class="sxs-lookup"><span data-stu-id="90eeb-125">A *software provider* is a host-based program that is supported by a kernel-mode driver in the storage I/O stack.</span></span> <span data-ttu-id="90eeb-126">Поставщик — среда выполнения ядра взаимодействует с диспетчером подключения во время загрузки или диспетчер самонастраивающийся (PnP) во время обнаружения, чтобы затребовать каждый диск.</span><span class="sxs-lookup"><span data-stu-id="90eeb-126">The provider-kernel runtime interacts with the Mount Manager at boot time or the Plug and Play (PnP) Manager at discovery time to claim each disk.</span></span> <span data-ttu-id="90eeb-127">Поставщики программного обеспечения работают с томами, дисками и разделами диска.</span><span class="sxs-lookup"><span data-stu-id="90eeb-127">Software providers operate on volumes, disks, and disk partitions.</span></span>

    <span data-ttu-id="90eeb-128">Служба VDS содержит два типа поставщиков.</span><span class="sxs-lookup"><span data-stu-id="90eeb-128">VDS includes two provider types.</span></span> <span data-ttu-id="90eeb-129">Базовый поставщик программного обеспечения управляет базовыми дисками и не поддерживает отказоустойчивую привязку.</span><span class="sxs-lookup"><span data-stu-id="90eeb-129">The basic software provider manages basic disks and offers no fault-tolerant binding.</span></span> <span data-ttu-id="90eeb-130">Динамический поставщик программного обеспечения управляет динамическими дисками и предлагает управление сбоями там, где это возможно.</span><span class="sxs-lookup"><span data-stu-id="90eeb-130">The dynamic software provider manages dynamic disks and offers fault management where applicable.</span></span> <span data-ttu-id="90eeb-131">Поведение поставщика программного обеспечения согласуется с поведением базовых и динамических дисков на узле.</span><span class="sxs-lookup"><span data-stu-id="90eeb-131">Software-provider behavior is consistent with the behavior of basic and dynamic disks on the host.</span></span> <span data-ttu-id="90eeb-132">Например, если операционная система данного узла поддерживает отказоустойчивые динамические диски, служба VDS также поддерживает это поведение на узле.</span><span class="sxs-lookup"><span data-stu-id="90eeb-132">For example, if the operating system of a given host supports fault-tolerant dynamic disks, VDS also supports this behavior on the host.</span></span>

-   <span data-ttu-id="90eeb-133">*Поставщик оборудования* реализует методы, используемые для управления подсистемой хранения — аппаратным массивом дисков или адаптером, который позволяет создавать логические диски, настроенные для повышения производительности, доступности данных или восстановления данных.</span><span class="sxs-lookup"><span data-stu-id="90eeb-133">A *hardware provider* implements the methods that are used to manage a storage subsystem—a hardware disk array or adapter card that enables the creation of logical disks configured to enhance performance, data availability, or data recovery.</span></span> <span data-ttu-id="90eeb-134">Многие производители больших массивов RAID создают поставщик оборудования, предназначенный для использования с VDS.</span><span class="sxs-lookup"><span data-stu-id="90eeb-134">Many major RAID cabinet manufacturers have produced a hardware provider that is designed for use with VDS.</span></span> <span data-ttu-id="90eeb-135">Потребители служб должны получить поставщика оборудования и соответствующее оборудование от изготовителя.</span><span class="sxs-lookup"><span data-stu-id="90eeb-135">Service consumers must obtain a hardware provider and associated hardware from the manufacturer.</span></span>

    <span data-ttu-id="90eeb-136">Возможности поставщика оборудования зависят от возможностей базового оборудования.</span><span class="sxs-lookup"><span data-stu-id="90eeb-136">The capabilities of a hardware provider depend on the capabilities of the underlying hardware.</span></span> <span data-ttu-id="90eeb-137">Следовательно, степень, в которой каждый производитель реализует API, может различаться.</span><span class="sxs-lookup"><span data-stu-id="90eeb-137">Consequently, the degree to which each manufacturer implements the API can vary.</span></span> <span data-ttu-id="90eeb-138">Например, производители могут включать дополнительные методы для оптимизации конфигураций, отслеживания и динамической настройки производительности, автоматизации управления сбоями или предоставления других выгодных функций.</span><span class="sxs-lookup"><span data-stu-id="90eeb-138">For example, manufacturers can include additional methods to optimize configurations, monitor and dynamically tune performance, automate fault management, or provide other beneficial functionality.</span></span>

    <span data-ttu-id="90eeb-139">Поставщики оборудования предлагают несколько вариантов настройки, недоступных для поставщиков программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="90eeb-139">Hardware providers offer several configuration options that are not available to the software providers.</span></span> <span data-ttu-id="90eeb-140">Наиболее важным является модель конфигурации автоматического волшебя, которая представляет собой представление хранилища на основе атрибутов для каждого приложения.</span><span class="sxs-lookup"><span data-stu-id="90eeb-140">Most notable is the automagic configuration model, which presents an attribute-based view of storage to each application.</span></span> <span data-ttu-id="90eeb-141">Указания привязки, такие как "главным образом" операции чтения или "требуется быстрое восстановление после сбоя", заменяют сложность привязки физического хранилища к виртуальному хранилищу.</span><span class="sxs-lookup"><span data-stu-id="90eeb-141">Binding hints, such as "mostly reads" or "fast crash recovery required" replace the complexity of binding physical storage into virtual storage.</span></span> <span data-ttu-id="90eeb-142">Каждый поставщик оборудования выполняет сопоставление экстентов, выделение пространства и выбор типа привязки на основе подсказок, которые передаются приложением.</span><span class="sxs-lookup"><span data-stu-id="90eeb-142">Each hardware provider performs extent mapping, space allocation, and binding-type selection based on the hints that are submitted by an application.</span></span> <span data-ttu-id="90eeb-143">Описание полного поставщика оборудования, включая параметры конфигурации, см. в документации, поставляемой производителем подсистемы.</span><span class="sxs-lookup"><span data-stu-id="90eeb-143">For the complete hardware provider description, including the configuration options, see the documentation that is supplied by the subsystem manufacturer.</span></span>

## <a name="application-programming-interface"></a><span data-ttu-id="90eeb-144">Прикладной программный интерфейс</span><span class="sxs-lookup"><span data-stu-id="90eeb-144">Application Programming Interface</span></span>

<span data-ttu-id="90eeb-145">Приложения могут вызывать методы VDS для запроса и настройки дисков на основе узла, хранилища RAID или и того и другого.</span><span class="sxs-lookup"><span data-stu-id="90eeb-145">Applications can invoke VDS methods to query and configure host-based disks, RAID storage, or both.</span></span> <span data-ttu-id="90eeb-146">Общие сведения об API см. в разделе [объектная модель VDS](vds-object-model.md).</span><span class="sxs-lookup"><span data-stu-id="90eeb-146">For an overview of the API, see the [VDS Object Model](vds-object-model.md).</span></span>

<span data-ttu-id="90eeb-147">Типичные приложения для службы VDS позволяют решать проблемы управления конфигурацией и мониторинга, а также варьировать диапазон от выделенных систем управления хранением до приложений для обратной Организации, которые ищут более эффективное управление конфигурацией и управлением сбоями.</span><span class="sxs-lookup"><span data-stu-id="90eeb-147">Typical applications for VDS solve configuration management and monitoring problems, and range from dedicated storage-management systems to back-office applications seeking better control over configuration or fault management.</span></span> <span data-ttu-id="90eeb-148">Следующие приложения используют службу VDS сегодня:</span><span class="sxs-lookup"><span data-stu-id="90eeb-148">The following applications use VDS today:</span></span>

-   <span data-ttu-id="90eeb-149">Оснастка "Управление дисками" позволяет настраивать диски, управляемые главным компьютером, и управлять ими.</span><span class="sxs-lookup"><span data-stu-id="90eeb-149">The Disk Management snap-in configures and manages disks controlled by a host computer.</span></span> <span data-ttu-id="90eeb-150">Системные администраторы и конечные пользователи могут запрашивать и настраивать локальные (или удаленные) диски и тома с помощью этого средства пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="90eeb-150">System administrators and end users can query and configure local (or remote) disks and volumes with this user interface (UI) tool.</span></span>
-   <span data-ttu-id="90eeb-151">Diskpart.exe — это программа командной строки, которая настраивает диски, тома и разделы и управляет ими.</span><span class="sxs-lookup"><span data-stu-id="90eeb-151">Diskpart.exe is a command-line utility that configures and manages disks, volumes, and partitions.</span></span>
-   <span data-ttu-id="90eeb-152">Diskraid.exe — это программа командной строки, которая настраивает и управляет аппаратными подсистемами RAID.</span><span class="sxs-lookup"><span data-stu-id="90eeb-152">Diskraid.exe is a command-line utility that configures and manages hardware RAID subsystems.</span></span> <span data-ttu-id="90eeb-153">Эта служебная программа может взаимодействовать с любым оборудованием хранилища, сопровождаемым поставщиком оборудования VDS.</span><span class="sxs-lookup"><span data-stu-id="90eeb-153">This utility can interact with any storage hardware that is accompanied by a VDS hardware provider.</span></span>

## <a name="related-topics"></a><span data-ttu-id="90eeb-154">См. также</span><span class="sxs-lookup"><span data-stu-id="90eeb-154">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="90eeb-155">Служба виртуальных дисков</span><span class="sxs-lookup"><span data-stu-id="90eeb-155">Virtual Disk Service</span></span>](virtual-disk-service-portal.md)
</dt> <dt>

[<span data-ttu-id="90eeb-156">Уведомления службы VDS</span><span class="sxs-lookup"><span data-stu-id="90eeb-156">VDS Notifications</span></span>](vds-notification-model.md)
</dt> <dt>

[<span data-ttu-id="90eeb-157">Объектная модель VDS</span><span class="sxs-lookup"><span data-stu-id="90eeb-157">VDS Object Model</span></span>](vds-object-model.md)
</dt> </dl>

 

 
