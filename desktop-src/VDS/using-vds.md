---
description: Использование VDS
ms.assetid: aa4be499-625d-4dbd-828c-4a55ff2dba2c
title: Использование VDS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c648c5cc2507c4819f98367c367099248a0e723f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104272438"
---
# <a name="using-vds"></a><span data-ttu-id="227b6-103">Использование VDS</span><span class="sxs-lookup"><span data-stu-id="227b6-103">Using VDS</span></span>

<span data-ttu-id="227b6-104">\[Начиная с Windows 8 и Windows Server 2012, интерфейс COM [службы виртуальных дисков](virtual-disk-service-portal.md) заменяется [API управления хранилищами Windows](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]</span><span class="sxs-lookup"><span data-stu-id="227b6-104">\[Beginning with Windows 8 and Windows Server 2012, the [Virtual Disk Service](virtual-disk-service-portal.md) COM interface is superseded by the [Windows Storage Management API](/previous-versions/windows/desktop/stormgmt/windows-storage-management-api-portal).\]</span></span>

<span data-ttu-id="227b6-105">Служба VDS предоставляет интерфейс для разработки сценариев и графического пользовательского интерфейса, который может упростить действия, выполняемые администратором Windows Server, который управляет разнородным набором систем хранения, переносит данные между различными конфигурациями оборудования с течением времени.</span><span class="sxs-lookup"><span data-stu-id="227b6-105">VDS supplies an interface for scripting and GUI development that can simplify the activities that are performed by a Windows server administrator who manages a heterogeneous set of storage systems, migrating data across different hardware configurations over time.</span></span> <span data-ttu-id="227b6-106">Если вы не знакомы с объектами, используемыми в разработке VDS, см. статью [объектная модель VDS](vds-object-model.md).</span><span class="sxs-lookup"><span data-stu-id="227b6-106">If you are unfamiliar with the objects that are used in VDS development, see the [VDS Object Model](vds-object-model.md).</span></span>

<span data-ttu-id="227b6-107">Несколько точек перед началом:</span><span class="sxs-lookup"><span data-stu-id="227b6-107">A few points before you begin:</span></span>

-   <span data-ttu-id="227b6-108">Хотя служба VDS включает поставщика программного обеспечения, вы должны приобрести поставщик оборудования и соответствующее оборудование отдельно, чтобы воспользоваться преимуществами операций поставщика оборудования.</span><span class="sxs-lookup"><span data-stu-id="227b6-108">While VDS includes a software provider, you must purchase a hardware provider and the associated hardware separately to take advantage of the hardware provider operations.</span></span> <span data-ttu-id="227b6-109">Инструкции по установке см. в документации, предоставляемой производителем оборудования.</span><span class="sxs-lookup"><span data-stu-id="227b6-109">For installation instructions, see the documentation that is provided by the hardware manufacturer.</span></span>
-   <span data-ttu-id="227b6-110">Для некоторых операций требуются тома в формате NTFS.</span><span class="sxs-lookup"><span data-stu-id="227b6-110">Some operations require NTFS-formatted volumes.</span></span> <span data-ttu-id="227b6-111">Например, при подключении тома к существующему каталогу том, содержащий каталог, должен быть отформатирован с помощью NTFS.</span><span class="sxs-lookup"><span data-stu-id="227b6-111">For example, when you mount a volume on an existing directory, the volume that contains the directory must be formatted with NTFS.</span></span> <span data-ttu-id="227b6-112">Другие файловые системы не поддерживают эту операцию.</span><span class="sxs-lookup"><span data-stu-id="227b6-112">Other file systems do not support this operation.</span></span> <span data-ttu-id="227b6-113">Сведения об операциях, требующих файловой системы NTFS, см. на странице каждого метода в [справочнике по службе VDS](vds-reference.md).</span><span class="sxs-lookup"><span data-stu-id="227b6-113">For information about operations that require NTFS, see each method page in [VDS Reference](vds-reference.md).</span></span>

## <a name="programming-languages"></a><span data-ttu-id="227b6-114">Языки программирования</span><span class="sxs-lookup"><span data-stu-id="227b6-114">Programming Languages</span></span>

<span data-ttu-id="227b6-115">Используйте любой язык программирования, который подходит для разработки с использованием модели COM, например языка C или C++.</span><span class="sxs-lookup"><span data-stu-id="227b6-115">Use any programming language that is suitable for development with COM, such as the C language or C++.</span></span>

## <a name="security"></a><span data-ttu-id="227b6-116">Безопасность</span><span class="sxs-lookup"><span data-stu-id="227b6-116">Security</span></span>

<span data-ttu-id="227b6-117">Брандмауэр Windows включен по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="227b6-117">Windows Firewall is enabled by default.</span></span> <span data-ttu-id="227b6-118">Это может вызвать сбой проверки подлинности для интерфейсов обратного вызова, например [**ивдсадвисесинк**](/windows/desktop/api/Vds/nn-vds-ivdsadvisesink), которые могут быть выполнены удаленно.</span><span class="sxs-lookup"><span data-stu-id="227b6-118">This can cause authentication to fail for callback interfaces, such as [**IVdsAdviseSink**](/windows/desktop/api/Vds/nn-vds-ivdsadvisesink), that can be executed remotely.</span></span> <span data-ttu-id="227b6-119">Если на клиентском компьютере или сервере включен брандмауэр Windows, необходимо добавить удаленное управление томами на вкладку **исключения** в брандмауэре Windows.</span><span class="sxs-lookup"><span data-stu-id="227b6-119">If Windows Firewall is enabled on either the client or the server, you must add Remote Volume Management to the **Exceptions** tab in Windows Firewall.</span></span>

<span data-ttu-id="227b6-120">**Windows Server 2003:** В Windows Server 2003 с пакетом обновления 2 (SP2) и Windows Server 2003 с пакетом обновления 1 (SP1), если брандмауэр Windows включен на клиенте или сервере и если сервер настроен на использование проверки подлинности NTLM, необходимо добавить следующие параметры на вкладку **исключения** в брандмауэре Windows для соответствующего компьютера.</span><span class="sxs-lookup"><span data-stu-id="227b6-120">**Windows Server 2003:** In Windows Server 2003 with Service Pack 2 (SP2) and Windows Server 2003 with Service Pack 1 (SP1), if Windows Firewall is enabled on either the client or the server and if the server is configured to use NTLM authentication, you must add the following settings to the **Exceptions** tab in Windows Firewall for the appropriate computer.</span></span>

| <span data-ttu-id="227b6-121">Компьютер</span><span class="sxs-lookup"><span data-stu-id="227b6-121">Computer</span></span>                 | <span data-ttu-id="227b6-122">Параметры исключений</span><span class="sxs-lookup"><span data-stu-id="227b6-122">Exceptions settings</span></span>                                                                 |
|--------------------------|-------------------------------------------------------------------------------------|
| <span data-ttu-id="227b6-123">Клиентский компьютер (локальный)</span><span class="sxs-lookup"><span data-stu-id="227b6-123">Client computer (local)</span></span>  | <span data-ttu-id="227b6-124">Dmremote.exe</span><span class="sxs-lookup"><span data-stu-id="227b6-124">Dmremote.exe</span></span><br/> <span data-ttu-id="227b6-125">Mmc.exe</span><span class="sxs-lookup"><span data-stu-id="227b6-125">Mmc.exe</span></span><br/> <span data-ttu-id="227b6-126">Vdsldr.exe</span><span class="sxs-lookup"><span data-stu-id="227b6-126">Vdsldr.exe</span></span><br/> <span data-ttu-id="227b6-127">TCP 135</span><span class="sxs-lookup"><span data-stu-id="227b6-127">TCP 135</span></span><br/> |
| <span data-ttu-id="227b6-128">Серверный компьютер (удаленный)</span><span class="sxs-lookup"><span data-stu-id="227b6-128">Server computer (remote)</span></span> | <span data-ttu-id="227b6-129">Dmadmin.exe</span><span class="sxs-lookup"><span data-stu-id="227b6-129">Dmadmin.exe</span></span><br/> <span data-ttu-id="227b6-130">Vds.exe</span><span class="sxs-lookup"><span data-stu-id="227b6-130">Vds.exe</span></span><br/> <span data-ttu-id="227b6-131">TCP 135</span><span class="sxs-lookup"><span data-stu-id="227b6-131">TCP 135</span></span><br/>                        |



 

<span data-ttu-id="227b6-132">Обратите внимание, что брандмауэр Windows не включен по умолчанию до Windows Server 2003 с пакетом обновления 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="227b6-132">Note that Windows Firewall is not enabled by default until Windows Server 2003 with SP1.</span></span>

<span data-ttu-id="227b6-133">Приложение, использующее службу VDS, должно запускаться в учетной записи группы "оператор архивации" или "Администраторы".</span><span class="sxs-lookup"><span data-stu-id="227b6-133">An application that is using VDS must run under the Backup Operator or Administrators group account.</span></span> <span data-ttu-id="227b6-134">Без соответствующих прав приложение может создать объект загрузчика службы, но объект не будет загружать VDS.</span><span class="sxs-lookup"><span data-stu-id="227b6-134">Without the appropriate privilege, an application can create a service loader object, but the object will not load VDS.</span></span> <span data-ttu-id="227b6-135">Вместо этого возвращается ошибка, указывающая, что доступ к службе VDS запрещен.</span><span class="sxs-lookup"><span data-stu-id="227b6-135">Instead, it returns an error indicating that access to VDS is denied.</span></span>

<span data-ttu-id="227b6-136">Если сеть использует проверку подлинности NTLM, клиентский компьютер должен разрешить анонимный доступ.</span><span class="sxs-lookup"><span data-stu-id="227b6-136">If the network uses NTLM authentication, the client computer should allow anonymous access.</span></span> <span data-ttu-id="227b6-137">В этом случае, если клиентский компьютер работает под управлением операционной системы Windows Server, анонимный доступ включен по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="227b6-137">In this case, if the client computer is running a Windows Server operating system, anonymous access is enabled by default.</span></span> <span data-ttu-id="227b6-138">При использовании клиентской операционной системы Windows анонимный доступ должен быть включен с помощью Dcomcnfg.exe.</span><span class="sxs-lookup"><span data-stu-id="227b6-138">If it is running a Windows Client operating system, anonymous access must be enabled using Dcomcnfg.exe.</span></span>

## <a name="configuration-and-query-operations"></a><span data-ttu-id="227b6-139">Операции настройки и запросов</span><span class="sxs-lookup"><span data-stu-id="227b6-139">Configuration and Query Operations</span></span>

<span data-ttu-id="227b6-140">Для операций настройки и запросов используется наиболее подходящий компьютер, поставщик, подсистема или пакет.</span><span class="sxs-lookup"><span data-stu-id="227b6-140">Configuration and query operations are scoped by the most relevant computer, provider, subsystem, or pack.</span></span> <span data-ttu-id="227b6-141">Запросы переходят только на одного поставщика или на один уровень иерархии привязки.</span><span class="sxs-lookup"><span data-stu-id="227b6-141">Queries traverse only one provider or one level of the binding hierarchy.</span></span> <span data-ttu-id="227b6-142">Для создания полного представления вызывающий объект должен запрашиваться по каждому уровню.</span><span class="sxs-lookup"><span data-stu-id="227b6-142">To build a full view, the caller must query across and down each level.</span></span> <span data-ttu-id="227b6-143">В следующем списке приведены примеры.</span><span class="sxs-lookup"><span data-stu-id="227b6-143">The following list includes examples:</span></span>

-   <span data-ttu-id="227b6-144">Чтобы просмотреть все диски на компьютере, вызывающие объекты должны запрашивать все поставщики программного обеспечения для дисков, которые требуются этим поставщикам.</span><span class="sxs-lookup"><span data-stu-id="227b6-144">To view all disks on a computer, callers must query across all software providers for the disks that are claimed by those providers.</span></span>
-   <span data-ttu-id="227b6-145">Чтобы определить, какие диски участвуют в томе с программным стеком, вызывающие объекты сначала определяют участвующие в нем плексов, а затем запрашивают экстенты дисков для каждого плекса.</span><span class="sxs-lookup"><span data-stu-id="227b6-145">To determine which disks contribute to a software-stacked volume, callers first determine the contributing plexes and then query for the disk extents for each plex.</span></span>
-   <span data-ttu-id="227b6-146">Чтобы просмотреть все диски, подключенные к данной подсистеме, вызывающие объекты должны запрашивать подсистему.</span><span class="sxs-lookup"><span data-stu-id="227b6-146">To view all the drives that are attached to a given subsystem, callers must query the subsystem.</span></span>
-   <span data-ttu-id="227b6-147">Чтобы просмотреть все LUN, предоставляемые данной подсистемой, вызывающие объекты должны запрашивать подсистему.</span><span class="sxs-lookup"><span data-stu-id="227b6-147">To view all the LUNs that are exposed by a given subsystem, callers must query the subsystem.</span></span>
-   <span data-ttu-id="227b6-148">Чтобы просмотреть все хранилища в сети SAN или кластере, вызывающие объекты должны запрашивать каждый из компьютеров для всех поставщиков оборудования, запрашивать каждый поставщик для всех подсистем, а затем запрашивать каждую подсистему.</span><span class="sxs-lookup"><span data-stu-id="227b6-148">To view all storage on a SAN or a cluster, callers must query each computer for all hardware providers, query each provider for all subsystems, and then query each subsystem.</span></span>

<span data-ttu-id="227b6-149">Хотя каждый отдельный запрос не возвращает дубликаты, повторяющиеся запросы между компьютерами или поставщиками могут накапливать дубликаты.</span><span class="sxs-lookup"><span data-stu-id="227b6-149">While each individual query will not return duplicates, repeated queries across computers or across providers can accumulate duplicates.</span></span> <span data-ttu-id="227b6-150">Вызывающие объекты должны реализовывать любую фильтрацию.</span><span class="sxs-lookup"><span data-stu-id="227b6-150">Callers must implement any filtering.</span></span> <span data-ttu-id="227b6-151">Обратите внимание, что приложения управления SAN могут использовать Active Directory или репозиторий для хранения сведений о конфигурации; может не потребоваться запрашивать каждый компьютер.</span><span class="sxs-lookup"><span data-stu-id="227b6-151">Note also that SAN management applications can use the Active Directory or a repository to persist configuration information; it might not be necessary to query each computer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="227b6-152">См. также</span><span class="sxs-lookup"><span data-stu-id="227b6-152">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="227b6-153">Служба виртуальных дисков</span><span class="sxs-lookup"><span data-stu-id="227b6-153">Virtual Disk Service</span></span>](virtual-disk-service-portal.md)
</dt> <dt>

[<span data-ttu-id="227b6-154">Объектная модель VDS</span><span class="sxs-lookup"><span data-stu-id="227b6-154">VDS Object Model</span></span>](vds-object-model.md)
</dt> <dt>

[<span data-ttu-id="227b6-155">Ссылка на службу VDS</span><span class="sxs-lookup"><span data-stu-id="227b6-155">VDS Reference</span></span>](vds-reference.md)
</dt> </dl>

 

