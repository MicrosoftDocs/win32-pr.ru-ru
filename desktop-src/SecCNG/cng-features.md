---
description: CNG имеет следующие возможности.
ms.assetid: 400a2b6e-6bbe-4ba4-abde-a2f625007517
title: Функции CNG
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df40606a255adc90bd36540571979c1c34579611
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662167"
---
# <a name="cng-features"></a><span data-ttu-id="c050b-103">Функции CNG</span><span class="sxs-lookup"><span data-stu-id="c050b-103">CNG Features</span></span>

<span data-ttu-id="c050b-104">CNG имеет следующие возможности.</span><span class="sxs-lookup"><span data-stu-id="c050b-104">CNG has the following features.</span></span>

-   [<span data-ttu-id="c050b-105">Гибкость шифрования</span><span class="sxs-lookup"><span data-stu-id="c050b-105">Cryptographic Agility</span></span>](#cryptographic-agility)
-   [<span data-ttu-id="c050b-106">Сертификация и соответствие требованиям</span><span class="sxs-lookup"><span data-stu-id="c050b-106">Certification and Compliance</span></span>](#certification-and-compliance)
-   [<span data-ttu-id="c050b-107">Поддержка пакета Suite B</span><span class="sxs-lookup"><span data-stu-id="c050b-107">Suite B Support</span></span>](#suite-b-support)
-   [<span data-ttu-id="c050b-108">Поддержка прежних версий</span><span class="sxs-lookup"><span data-stu-id="c050b-108">Legacy Support</span></span>](#legacy-support)
-   [<span data-ttu-id="c050b-109">Поддержка режима ядра</span><span class="sxs-lookup"><span data-stu-id="c050b-109">Kernel Mode Support</span></span>](#kernel-mode-support)
-   [<span data-ttu-id="c050b-110">Аудит</span><span class="sxs-lookup"><span data-stu-id="c050b-110">Auditing</span></span>](#auditing)
-   [<span data-ttu-id="c050b-111">Заменяемые генераторы случайных чисел</span><span class="sxs-lookup"><span data-stu-id="c050b-111">Replaceable Random Number Generators</span></span>](#replaceable-random-number-generators)
-   [<span data-ttu-id="c050b-112">Потокобезопасность</span><span class="sxs-lookup"><span data-stu-id="c050b-112">Thread Safety</span></span>](#thread-safety)
-   [<span data-ttu-id="c050b-113">Режим работы</span><span class="sxs-lookup"><span data-stu-id="c050b-113">Mode of Operation</span></span>](#mode-of-operation)

## <a name="cryptographic-agility"></a><span data-ttu-id="c050b-114">Гибкость шифрования</span><span class="sxs-lookup"><span data-stu-id="c050b-114">Cryptographic Agility</span></span>

<span data-ttu-id="c050b-115">Одной из ключевых особенностей CNG является криптографическая гибкость, иногда называемая независимым от криптографии.</span><span class="sxs-lookup"><span data-stu-id="c050b-115">One of the key value propositions of CNG is cryptographic agility, sometimes called cryptographic agnosticism.</span></span> <span data-ttu-id="c050b-116">Однако для этого требуется преобразовать реализацию протоколов, таких [*SSL как протоколы*](/windows/desktop/SecGloss/s-gly) [*SSL или TLS, CMS (*](/windows/desktop/SecGloss/t-gly) S/MIME), IPsec, Kerberos и т. д., в CNG.</span><span class="sxs-lookup"><span data-stu-id="c050b-116">Converting implementation of protocols like [*Secure Sockets Layer protocol*](/windows/desktop/SecGloss/s-gly) (SSL) or [*transport layer security*](/windows/desktop/SecGloss/t-gly) (TLS), CMS (S/MIME), IPsec, Kerberos, and so on, to CNG, however, was required to make this ability valuable.</span></span> <span data-ttu-id="c050b-117">На уровне CNG было необходимо обеспечить подстановку и возможность обнаружения для всех типов алгоритмов (симметричные, асимметричные, хэш-функции), генерации случайных чисел и других служебных функций.</span><span class="sxs-lookup"><span data-stu-id="c050b-117">At the CNG level, it was necessary to provide substitution and discoverability for all the algorithm types (symmetric, asymmetric, hash functions), random number generation, and other utility functions.</span></span> <span data-ttu-id="c050b-118">Изменения на уровне протокола являются более значимыми, так как во многих случаях API протоколов необходимы для добавления выбранных алгоритмов и других возможностей гибкости, которые ранее не существовали.</span><span class="sxs-lookup"><span data-stu-id="c050b-118">The protocol-level changes are more significant because in many cases the protocol APIs needed to add algorithm selection and other flexibility options that did not previously exist.</span></span>

<span data-ttu-id="c050b-119">CNG впервые доступен в Windows Vista и располагается для замены существующих применений [*CryptoAPI*](/windows/desktop/SecGloss/c-gly) во всем стеке программного обеспечения Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="c050b-119">CNG is first available in Windows Vista and is positioned to replace existing uses of [*CryptoAPI*](/windows/desktop/SecGloss/c-gly) throughout the Microsoft software stack.</span></span> <span data-ttu-id="c050b-120">Сторонние разработчики найдут в CNG множество новых функций, включая:</span><span class="sxs-lookup"><span data-stu-id="c050b-120">Third-party developers will find lots of new features in CNG, including:</span></span>

-   <span data-ttu-id="c050b-121">Новая система настройки шифрования, поддерживающая лучшую гибкость шифрования.</span><span class="sxs-lookup"><span data-stu-id="c050b-121">A new crypto configuration system, supporting better cryptographic agility.</span></span>
-   <span data-ttu-id="c050b-122">Детализированная абстракция для хранилища ключей (и разделение хранилища от операций алгоритма).</span><span class="sxs-lookup"><span data-stu-id="c050b-122">Finer-grained abstraction for key storage (and separation of storage from algorithm operations).</span></span>
-   <span data-ttu-id="c050b-123">Изоляция процессов для операций с долгосрочными ключами.</span><span class="sxs-lookup"><span data-stu-id="c050b-123">Process isolation for operations with long-term keys.</span></span>
-   <span data-ttu-id="c050b-124">Заменяемые генераторы случайных чисел.</span><span class="sxs-lookup"><span data-stu-id="c050b-124">Replaceable random number generators.</span></span>
-   <span data-ttu-id="c050b-125">Сброс ограничений на экспорт.</span><span class="sxs-lookup"><span data-stu-id="c050b-125">Relief from export signing restrictions.</span></span>
-   <span data-ttu-id="c050b-126">Безопасность потоков во всем стеке.</span><span class="sxs-lookup"><span data-stu-id="c050b-126">Thread-safety throughout the stack.</span></span>
-   <span data-ttu-id="c050b-127">Криптографический API в режиме ядра.</span><span class="sxs-lookup"><span data-stu-id="c050b-127">Kernel-mode cryptographic API.</span></span>

<span data-ttu-id="c050b-128">Кроме того, CNG поддерживает все необходимые алгоритмы Suite B, включая шифрование на основе [*эллиптических*](/windows/desktop/SecGloss/e-gly) кривых (ECC).</span><span class="sxs-lookup"><span data-stu-id="c050b-128">In addition, CNG includes support for all required Suite B algorithms, including [*elliptic curve cryptography*](/windows/desktop/SecGloss/e-gly) (ECC).</span></span> <span data-ttu-id="c050b-129">Существующие приложения CryptoAPI продолжат работать, как только CNG становится доступным.</span><span class="sxs-lookup"><span data-stu-id="c050b-129">Existing CryptoAPI applications will continue to work as CNG becomes available.</span></span>

## <a name="certification-and-compliance"></a><span data-ttu-id="c050b-130">Сертификация и соответствие требованиям</span><span class="sxs-lookup"><span data-stu-id="c050b-130">Certification and Compliance</span></span>

<span data-ttu-id="c050b-131">CNG проверяется на Федеральный стандарт обработки информации (FIPS) 140-2 и является частью цели оценки сертификации Windows с общим критерием.</span><span class="sxs-lookup"><span data-stu-id="c050b-131">CNG is validated to Federal Information Processing Standards (FIPS) 140-2 and is part of the Target of Evaluation for the Windows Common Criteria certification.</span></span> <span data-ttu-id="c050b-132">CNG был разработан для использования в качестве компонента в проверенной системе уровня FIPS 2.</span><span class="sxs-lookup"><span data-stu-id="c050b-132">CNG was designed to be usable as a component in a FIPS level 2 validated system.</span></span>

<span data-ttu-id="c050b-133">CNG соответствует требованиям общего критерия, сохраняя и используя длинные ключи в безопасном процессе.</span><span class="sxs-lookup"><span data-stu-id="c050b-133">CNG complies with Common Criteria requirements by storing and using long lived keys in a secure process.</span></span>

## <a name="suite-b-support"></a><span data-ttu-id="c050b-134">Поддержка пакета Suite B</span><span class="sxs-lookup"><span data-stu-id="c050b-134">Suite B Support</span></span>

<span data-ttu-id="c050b-135">Важной функцией CNG является поддержка алгоритмов Suite B.</span><span class="sxs-lookup"><span data-stu-id="c050b-135">An important feature of CNG is its support for the Suite B algorithms.</span></span> <span data-ttu-id="c050b-136">В феврале 2005 г. Агентство национальной безопасности (NSA) США объявило координированный набор симметричного шифрования, асимметричное секретное соглашение (также известный как обмен ключами), цифровую подпись и хэш-функции для будущего использования правительства США, именуемого *Suite B*. NSA объявил о том, что сертифицированные реализации Suite B могут и использоваться для защиты информации, обозначенной как основные секретные, секретные и конфиденциальные сведения, которые в прошлом были описаны как конфиденциальные, но не классифицированные.</span><span class="sxs-lookup"><span data-stu-id="c050b-136">In February of 2005, the National Security Agency (NSA) of the United States announced a coordinated set of symmetric encryption, asymmetric secret agreement (also known as key exchange), digital signature and hash functions for future U.S. government use called *Suite B*. The NSA has announced that certified Suite B implementations can and will be used for the protection of information designated as Top Secret, Secret, and private information that, in the past was described as Sensitive-But-Unclassified.</span></span> <span data-ttu-id="c050b-137">По этой причине поддержка Suite B очень важна для поставщиков программного обеспечения и системных интеграторов, а также для корпорации Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="c050b-137">Because of this, Suite B support is very important to application software vendors and system integrators as well as to Microsoft.</span></span>

<span data-ttu-id="c050b-138">Все алгоритмы Suite B являются общеизвестными.</span><span class="sxs-lookup"><span data-stu-id="c050b-138">All Suite B algorithms are publicly known.</span></span> <span data-ttu-id="c050b-139">Они были разработаны за пределами области государственных органов, исторически сопоставленные с разработкой алгоритма шифрования.</span><span class="sxs-lookup"><span data-stu-id="c050b-139">They have been developed outside the scope of the government secrecy historically associated with cryptographic algorithm development.</span></span> <span data-ttu-id="c050b-140">В этом же периоде некоторые европейские страны и регионы также предложили те же требования Suite B для защиты информации.</span><span class="sxs-lookup"><span data-stu-id="c050b-140">In this same time frame, some European countries and regions have also proposed the same Suite B requirements for protecting their information.</span></span>

<span data-ttu-id="c050b-141">Криптография Suite B рекомендует использовать эллиптическую кривую Diffie-Hellman (ECDH) во многих существующих протоколах, таких как протокол IKE (IKE, в основном используется в IPsec [*), TLS*](/windows/desktop/SecGloss/t-gly) и защищенный MIME (S/MIME).</span><span class="sxs-lookup"><span data-stu-id="c050b-141">Suite B cryptography recommends use of elliptic curve Diffie-Hellman (ECDH) in many existing protocols such as the Internet Key Exchange (IKE, mainly used in IPsec), [*transport layer security*](/windows/desktop/SecGloss/t-gly) (TLS), and Secure MIME (S/MIME).</span></span>

<span data-ttu-id="c050b-142">CNG включает поддержку набора B, который распространяется на все необходимые алгоритмы: AES (все размеры ключей), Семейство SHA-2 (SHA-256, SHA-384 и SHA-512) для алгоритмов хэширования, ECDH и DSA (ECDSA) на основе стандартных кривых стандарта NIST P-256, P-384 и P-521.</span><span class="sxs-lookup"><span data-stu-id="c050b-142">CNG includes support for Suite B that extends to all required algorithms: AES (all key sizes), the SHA-2 family (SHA-256, SHA-384 and SHA-512) of hashing algorithms, ECDH, and elliptic curve DSA (ECDSA) over the NIST-standard prime curves P-256, P-384, and P-521.</span></span> <span data-ttu-id="c050b-143">Двоичные кривые, кривые Коблитз, пользовательские простые кривые и эллиптическая кривая Менезес-qu-Ванстоне (ЕКМКВ) не поддерживаются поставщиками алгоритмов Майкрософт, входящими в состав Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="c050b-143">Binary curves, Koblitz curves, custom prime curves, and elliptic curve Menezes-Qu-Vanstone (ECMQV) are not supported by the Microsoft algorithm providers included with Windows Vista.</span></span>

## <a name="legacy-support"></a><span data-ttu-id="c050b-144">Поддержка прежних версий</span><span class="sxs-lookup"><span data-stu-id="c050b-144">Legacy Support</span></span>

<span data-ttu-id="c050b-145">CNG обеспечивает поддержку текущего набора алгоритмов в [*CryptoAPI*](/windows/desktop/SecGloss/c-gly) 1,0.</span><span class="sxs-lookup"><span data-stu-id="c050b-145">CNG provides support for the current set of algorithms in [*CryptoAPI*](/windows/desktop/SecGloss/c-gly) 1.0.</span></span> <span data-ttu-id="c050b-146">Все алгоритмы, которые в настоящее время поддерживаются в *CryptoAPI* 1,0, по-прежнему будут поддерживаться в CNG.</span><span class="sxs-lookup"><span data-stu-id="c050b-146">Every algorithm that is currently supported in *CryptoAPI* 1.0 will continue to be supported in CNG.</span></span>

## <a name="kernel-mode-support"></a><span data-ttu-id="c050b-147">Поддержка режима ядра</span><span class="sxs-lookup"><span data-stu-id="c050b-147">Kernel Mode Support</span></span>

<span data-ttu-id="c050b-148">CNG поддерживает шифрование в режиме ядра.</span><span class="sxs-lookup"><span data-stu-id="c050b-148">CNG supports cryptography in kernel mode.</span></span> <span data-ttu-id="c050b-149">Одни и те же API-интерфейсы используются как в ядре, так и в пользовательском режиме для полной поддержки криптографических функций.</span><span class="sxs-lookup"><span data-stu-id="c050b-149">The same APIs are used in both kernel and user mode to fully support the cryptography features.</span></span> <span data-ttu-id="c050b-150">Как SSL/TLS, так и IPsec работают в режиме ядра в дополнение к процессам загрузки, которые будут использовать CNG.</span><span class="sxs-lookup"><span data-stu-id="c050b-150">Both SSL/TLS and IPsec operate in kernel mode in addition to boot processes that will be using CNG.</span></span> <span data-ttu-id="c050b-151">Не все функции CNG могут быть вызваны из режима ядра.</span><span class="sxs-lookup"><span data-stu-id="c050b-151">Not all CNG functions can be called from kernel mode.</span></span> <span data-ttu-id="c050b-152">В справочном разделе по функциям, которые не могут быть вызваны из режима ядра, будет явно указано, что функция не может быть вызвана из режима ядра.</span><span class="sxs-lookup"><span data-stu-id="c050b-152">The reference topic for the functions that cannot be called from kernel mode will explicitly state that the function cannot be called from kernel mode.</span></span> <span data-ttu-id="c050b-153">В противном случае все функции CNG могут быть вызваны из режима ядра, если вызывающий объект работает на **пассивном \_ уровне** [*IRQL*](/windows/desktop/SecGloss/i-gly).</span><span class="sxs-lookup"><span data-stu-id="c050b-153">Otherwise, all CNG functions can be called from kernel mode if the caller is running at **PASSIVE\_LEVEL** [*IRQL*](/windows/desktop/SecGloss/i-gly).</span></span> <span data-ttu-id="c050b-154">Кроме того, некоторые функции CNG в режиме ядра могут быть вызваны на **\_ уровне диспетчеризации IRQL** в зависимости от возможностей поставщика.</span><span class="sxs-lookup"><span data-stu-id="c050b-154">In addition, some kernel mode CNG functions may be callable at **DISPATCH\_LEVEL IRQL**, depending on the provider's capabilities.</span></span>

<span data-ttu-id="c050b-155">Интерфейс поставщика поддержки безопасности ядра (Майкрософт) (Ksecdd.sys) — это программный модуль шифрования, основанный на уровне ядра Windows.</span><span class="sxs-lookup"><span data-stu-id="c050b-155">The Microsoft kernel security support provider interface (Ksecdd.sys) is a general purpose, software-based, cryptographic module residing at the kernel mode level of Windows.</span></span> <span data-ttu-id="c050b-156">Ksecdd.sys запускается как драйвер экспорта в режиме ядра и предоставляет службы шифрования через задокументированные интерфейсы для компонентов ядра.</span><span class="sxs-lookup"><span data-stu-id="c050b-156">Ksecdd.sys runs as a kernel mode export driver, and provides cryptographic services through their documented interfaces to kernel components.</span></span> <span data-ttu-id="c050b-157">Единственным встроенным алгоритмом поставщика (Майкрософт), который не поддерживается Ksecdd.sys, является DSA.</span><span class="sxs-lookup"><span data-stu-id="c050b-157">The only built-in Microsoft provider algorithm that is not supported by Ksecdd.sys is DSA.</span></span>

<span data-ttu-id="c050b-158">**Windows Server 2008 и Windows Vista:** CNG не поддерживает подключаемые алгоритмы и поставщики в режиме ядра.</span><span class="sxs-lookup"><span data-stu-id="c050b-158">**Windows Server 2008 and Windows Vista:** CNG does not support pluggable algorithms and providers in kernel mode.</span></span> <span data-ttu-id="c050b-159">Единственными поддерживаемыми алгоритмами шифрования, доступными в режиме ядра, являются реализации, предоставляемые корпорацией Майкрософт через интерфейсы API CNG в режиме ядра.</span><span class="sxs-lookup"><span data-stu-id="c050b-159">The only supported cryptographic algorithms available in kernel mode are those implementations provided by Microsoft through the kernel mode CNG APIs.</span></span>

## <a name="auditing"></a><span data-ttu-id="c050b-160">Аудит</span><span class="sxs-lookup"><span data-stu-id="c050b-160">Auditing</span></span>

<span data-ttu-id="c050b-161">Для соблюдения некоторых требований к общему критерию, помимо обеспечения полной безопасности, многие действия, происходящие на уровне CNG, подлежат аудиту в поставщике хранилища ключей Майкрософт (KSP).</span><span class="sxs-lookup"><span data-stu-id="c050b-161">To comply with some of the Common Criteria requirements in addition to providing comprehensive security, many actions that happen in the CNG layer are audited in the Microsoft software key storage provider (KSP).</span></span> <span data-ttu-id="c050b-162">Для создания записей аудита в журнале безопасности KSP Майкрософт соблюдает следующие рекомендации.</span><span class="sxs-lookup"><span data-stu-id="c050b-162">The Microsoft KSP adheres to the following guidelines to create audit records in the security log:</span></span>

-   <span data-ttu-id="c050b-163">Аудит ошибок создания ключей и пар ключей, включая сбои самотестирования, должен проводиться.</span><span class="sxs-lookup"><span data-stu-id="c050b-163">Key and key-pair generation failures, including self-test failures, must be audited.</span></span>
-   <span data-ttu-id="c050b-164">Необходимо провести аудит импорта и экспорта ключей.</span><span class="sxs-lookup"><span data-stu-id="c050b-164">Key import and export must be audited.</span></span>
-   <span data-ttu-id="c050b-165">Аудит сбоев уничтожения ключей должен проводиться.</span><span class="sxs-lookup"><span data-stu-id="c050b-165">Key destruction failures must be audited.</span></span>
-   <span data-ttu-id="c050b-166">Необходимо проводить аудит постоянных ключей, когда они записываются в файлы и считываются из них.</span><span class="sxs-lookup"><span data-stu-id="c050b-166">Persistent keys need to be audited when they are written to and read from files.</span></span>
-   <span data-ttu-id="c050b-167">Необходимо провести аудит сбоев при проверке согласованности между парами.</span><span class="sxs-lookup"><span data-stu-id="c050b-167">Pair-wise consistency check failures must be audited.</span></span>
-   <span data-ttu-id="c050b-168">Аудит ошибок проверки секретного ключа, если таковые имеются, должен проводиться, например, проверки четности ключей 3DES.</span><span class="sxs-lookup"><span data-stu-id="c050b-168">Secret key validation failures, if any, must be audited, for example, parity checks on 3DES keys.</span></span>
-   <span data-ttu-id="c050b-169">Сбои при шифровании, расшифровке, хэшировании, подписи, проверке, обмене ключами и создании случайных чисел должны быть проверены.</span><span class="sxs-lookup"><span data-stu-id="c050b-169">Failures in encryption, decryption, hashing, signature, verification, key exchange, and random number generation must be audited.</span></span>
-   <span data-ttu-id="c050b-170">Необходимо проводить аудит самопроверок шифрования.</span><span class="sxs-lookup"><span data-stu-id="c050b-170">Cryptographic self-tests must be audited.</span></span>

<span data-ttu-id="c050b-171">Как правило, если у ключа нет имени, это эфемерный ключ.</span><span class="sxs-lookup"><span data-stu-id="c050b-171">In general, if a key does not have a name, it is an ephemeral key.</span></span> <span data-ttu-id="c050b-172">Эфемерный ключ не сохраняется, и KSP Майкрософт не создает записи аудита для временных ключей.</span><span class="sxs-lookup"><span data-stu-id="c050b-172">An ephemeral key does not persist, and the Microsoft KSP does not generate audit records for ephemeral keys.</span></span> <span data-ttu-id="c050b-173">KSP Майкрософт создает записи аудита в пользовательском режиме только в процессе LSA.</span><span class="sxs-lookup"><span data-stu-id="c050b-173">The Microsoft KSP generates audit records in user mode in the LSA process only.</span></span> <span data-ttu-id="c050b-174">Записи аудита не создаются в режиме ядра CNG.</span><span class="sxs-lookup"><span data-stu-id="c050b-174">No audit record is generated by kernel mode CNG.</span></span> <span data-ttu-id="c050b-175">Администраторам необходимо настроить политику аудита для получения всех журналов аудита KSP из журнала безопасности.</span><span class="sxs-lookup"><span data-stu-id="c050b-175">Administrators need to configure the audit policy to obtain all KSP audit logs from the security log.</span></span> <span data-ttu-id="c050b-176">Для настройки дополнительных аудитов, создаваемых KSP, администратор должен запустить следующую командную строку:</span><span class="sxs-lookup"><span data-stu-id="c050b-176">An administrator must run the following command line to configure additional audits generated by KSPs:</span></span>

<span data-ttu-id="c050b-177">**auditpol/Set/субкатегори: "другие системные события"/сукцесс: enable/фаилуре: enable**</span><span class="sxs-lookup"><span data-stu-id="c050b-177">**auditpol /set /subcategory:"other system events" /success:enable /failure:enable**</span></span>

## <a name="replaceable-random-number-generators"></a><span data-ttu-id="c050b-178">Заменяемые генераторы случайных чисел</span><span class="sxs-lookup"><span data-stu-id="c050b-178">Replaceable Random Number Generators</span></span>

<span data-ttu-id="c050b-179">Еще одно улучшение, предоставляемое CNG, — это возможность заменить генератор случайных чисел по умолчанию (РНГ).</span><span class="sxs-lookup"><span data-stu-id="c050b-179">Another improvement that CNG provides is the ability to replace the default random number generator (RNG).</span></span> <span data-ttu-id="c050b-180">В CryptoAPI можно предоставить альтернативный РНГ в составе поставщика служб шифрования (CSP), но невозможно перенаправить базовый CSP Майкрософт для использования другого РНГ.</span><span class="sxs-lookup"><span data-stu-id="c050b-180">In CryptoAPI, it is possible to provide an alternate RNG as part of a cryptographic service provider (CSP), but it is not possible to redirect the Microsoft Base CSPs to use another RNG.</span></span> <span data-ttu-id="c050b-181">CNG позволяет явно указывать определенный РНГ для использования в определенных вызовах.</span><span class="sxs-lookup"><span data-stu-id="c050b-181">CNG makes it possible to explicitly specify a particular RNG to use within particular calls.</span></span>

## <a name="thread-safety"></a><span data-ttu-id="c050b-182">Потокобезопасность</span><span class="sxs-lookup"><span data-stu-id="c050b-182">Thread Safety</span></span>

<span data-ttu-id="c050b-183">Любые функции, изменяющие одну и ту же область памяти в то же время (критические секции) при вызове из отдельных потоков, не являются потокобезопасными.</span><span class="sxs-lookup"><span data-stu-id="c050b-183">Any functions that modify the same area of memory at the same time (critical sections) when being called from separate threads are not thread safe.</span></span>

## <a name="mode-of-operation"></a><span data-ttu-id="c050b-184">Режим работы</span><span class="sxs-lookup"><span data-stu-id="c050b-184">Mode of Operation</span></span>

<span data-ttu-id="c050b-185">CNG поддерживает пять режимов операций, которые можно использовать с симметричными блочными шифрами через API-интерфейсы шифрования.</span><span class="sxs-lookup"><span data-stu-id="c050b-185">CNG supports five modes of operations that can be used with symmetric block ciphers through the encryption APIs.</span></span> <span data-ttu-id="c050b-186">Эти режимы и их поддержка перечислены в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="c050b-186">These modes and their supportability are listed in the following table.</span></span> <span data-ttu-id="c050b-187">Режим работы можно изменить, задав свойство [**\_ \_ режима цепочки BCRYPT**](cng-property-identifiers.md) для поставщика алгоритма с помощью функции [**бкриптсетпроперти**](/windows/desktop/api/Bcrypt/nf-bcrypt-bcryptsetproperty) .</span><span class="sxs-lookup"><span data-stu-id="c050b-187">The mode of operation can be changed by setting the [**BCRYPT\_CHAINING\_MODE**](cng-property-identifiers.md) property for the algorithm provider by using the [**BCryptSetProperty**](/windows/desktop/api/Bcrypt/nf-bcrypt-bcryptsetproperty) function.</span></span>



| <span data-ttu-id="c050b-188">Режим работы</span><span class="sxs-lookup"><span data-stu-id="c050b-188">Mode of operation</span></span>           | <span data-ttu-id="c050b-189">\_Значение режима цепочки BCRYPT \_</span><span class="sxs-lookup"><span data-stu-id="c050b-189">BCRYPT\_CHAINING\_MODE value</span></span> | <span data-ttu-id="c050b-190">Алгоритмы</span><span class="sxs-lookup"><span data-stu-id="c050b-190">Algorithms</span></span>              | <span data-ttu-id="c050b-191">Standard</span><span class="sxs-lookup"><span data-stu-id="c050b-191">Standard</span></span>  |
|-----------------------------|------------------------------|-------------------------|-----------|
| <span data-ttu-id="c050b-192">ECB (Electronic режимом)</span><span class="sxs-lookup"><span data-stu-id="c050b-192">ECB (Electronic Codebook)</span></span>   | <span data-ttu-id="c050b-193">**\_режим цепочки BCRYPT \_ \_ ECB**</span><span class="sxs-lookup"><span data-stu-id="c050b-193">**BCRYPT\_CHAIN\_MODE\_ECB**</span></span> | <span data-ttu-id="c050b-194">Симметричные блочные шифры</span><span class="sxs-lookup"><span data-stu-id="c050b-194">Symmetric block ciphers</span></span> | <span data-ttu-id="c050b-195">SP800 — 38A</span><span class="sxs-lookup"><span data-stu-id="c050b-195">SP800-38A</span></span> |
| <span data-ttu-id="c050b-196">CBC (цепочки блоков шифра)</span><span class="sxs-lookup"><span data-stu-id="c050b-196">CBC (Cipher Block Chaining)</span></span> | <span data-ttu-id="c050b-197">**\_режим цепочки BCRYPT \_ \_ CBC**</span><span class="sxs-lookup"><span data-stu-id="c050b-197">**BCRYPT\_CHAIN\_MODE\_CBC**</span></span> | <span data-ttu-id="c050b-198">Симметричные блочные шифры</span><span class="sxs-lookup"><span data-stu-id="c050b-198">Symmetric block ciphers</span></span> | <span data-ttu-id="c050b-199">SP800 — 38A</span><span class="sxs-lookup"><span data-stu-id="c050b-199">SP800-38A</span></span> |
| <span data-ttu-id="c050b-200">CFB (отзыв шифра)</span><span class="sxs-lookup"><span data-stu-id="c050b-200">CFB (Cipher Feedback)</span></span>       | <span data-ttu-id="c050b-201">**\_CFB режим цепочки BCRYPT \_ \_**</span><span class="sxs-lookup"><span data-stu-id="c050b-201">**BCRYPT\_CHAIN\_MODE\_CFB**</span></span> | <span data-ttu-id="c050b-202">Симметричные блочные шифры</span><span class="sxs-lookup"><span data-stu-id="c050b-202">Symmetric block ciphers</span></span> | <span data-ttu-id="c050b-203">SP800 — 38A</span><span class="sxs-lookup"><span data-stu-id="c050b-203">SP800-38A</span></span> |
| <span data-ttu-id="c050b-204">CCM (счетчик с CBC)</span><span class="sxs-lookup"><span data-stu-id="c050b-204">CCM (Counter with CBC)</span></span>      | <span data-ttu-id="c050b-205">**\_CCM в \_ режиме ЦЕПОЧКи BCRYPT \_**</span><span class="sxs-lookup"><span data-stu-id="c050b-205">**BCRYPT\_CHAIN\_MODE\_CCM**</span></span> | <span data-ttu-id="c050b-206">AES</span><span class="sxs-lookup"><span data-stu-id="c050b-206">AES</span></span>                     | <span data-ttu-id="c050b-207">SP800 — 38C</span><span class="sxs-lookup"><span data-stu-id="c050b-207">SP800-38C</span></span> |
| <span data-ttu-id="c050b-208">GCM (режим Галоис/Counter)</span><span class="sxs-lookup"><span data-stu-id="c050b-208">GCM (Galois/Counter Mode)</span></span>   | <span data-ttu-id="c050b-209">**\_gcm в \_ режиме ЦЕПОЧКи BCRYPT \_**</span><span class="sxs-lookup"><span data-stu-id="c050b-209">**BCRYPT\_CHAIN\_MODE\_GCM**</span></span> | <span data-ttu-id="c050b-210">AES</span><span class="sxs-lookup"><span data-stu-id="c050b-210">AES</span></span>                     | <span data-ttu-id="c050b-211">SP800 — 38D</span><span class="sxs-lookup"><span data-stu-id="c050b-211">SP800-38D</span></span> |



 

> [!Note]  
> <span data-ttu-id="c050b-212">В Windows Vista определены только режимы работы в ECB, CBC и CFB.</span><span class="sxs-lookup"><span data-stu-id="c050b-212">Only ECB, CBC, and CFB modes of operation are defined in Windows Vista.</span></span> <span data-ttu-id="c050b-213">Для GCM и CCM требуется Windows Vista с пакетом обновления 1 (SP1) или Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="c050b-213">GCM and CCM require Windows Vista with Service Pack 1 (SP1) or Windows Server 2008.</span></span>

 

 

 
