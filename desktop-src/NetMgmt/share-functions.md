---
title: Функции общего доступа
description: Функции общего доступа к управлению сетью управляют общими ресурсами. Общий ресурс — это локальный ресурс на сервере (например, каталог на диске, устройство печати или именованный канал), к которому могут обращаться пользователи и приложения в сети.
ms.assetid: 3764c667-2290-48e6-ba3a-c74eee2c27f9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5034d46e233ebb7ed4de691bd79942a3ecdf5263
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104413516"
---
# <a name="share-functions"></a><span data-ttu-id="86b39-104">Функции общего доступа</span><span class="sxs-lookup"><span data-stu-id="86b39-104">Share Functions</span></span>

<span data-ttu-id="86b39-105">Функции общего доступа к управлению сетью управляют общими ресурсами.</span><span class="sxs-lookup"><span data-stu-id="86b39-105">The network management share functions control shared resources.</span></span> <span data-ttu-id="86b39-106">Общий ресурс — это локальный ресурс на сервере (например, каталог на диске, устройство печати или именованный канал), к которому могут обращаться пользователи и приложения в сети.</span><span class="sxs-lookup"><span data-stu-id="86b39-106">A shared resource is a local resource on a server (for example, a disk directory, print device, or named pipe) that can be accessed by users and applications on the network.</span></span>

<span data-ttu-id="86b39-107">Функции общего доступа перечислены ниже.</span><span class="sxs-lookup"><span data-stu-id="86b39-107">The share functions are listed following.</span></span>



| <span data-ttu-id="86b39-108">Функция</span><span class="sxs-lookup"><span data-stu-id="86b39-108">Function</span></span>                                  | <span data-ttu-id="86b39-109">Описание</span><span class="sxs-lookup"><span data-stu-id="86b39-109">Description</span></span>                                                          |
|-------------------------------------------|----------------------------------------------------------------------|
| [<span data-ttu-id="86b39-110">**нетшареадд**</span><span class="sxs-lookup"><span data-stu-id="86b39-110">**NetShareAdd**</span></span>](/windows/desktop/api/lmshare/nf-lmshare-netshareadd)         | <span data-ttu-id="86b39-111">Предоставляет общий доступ к ресурсу на сервере.</span><span class="sxs-lookup"><span data-stu-id="86b39-111">Shares a resource on a server.</span></span>                                       |
| [<span data-ttu-id="86b39-112">**нетшаречекк**</span><span class="sxs-lookup"><span data-stu-id="86b39-112">**NetShareCheck**</span></span>](/windows/desktop/api/lmshare/nf-lmshare-netsharecheck)     | <span data-ttu-id="86b39-113">Запрашивает, является ли сервер общим для устройства.</span><span class="sxs-lookup"><span data-stu-id="86b39-113">Queries whether a server is sharing a device.</span></span>                        |
| [<span data-ttu-id="86b39-114">**нетшаредел**</span><span class="sxs-lookup"><span data-stu-id="86b39-114">**NetShareDel**</span></span>](/windows/desktop/api/lmshare/nf-lmshare-netsharedel)         | <span data-ttu-id="86b39-115">Удаляет имя общего ресурса из списка общих ресурсов сервера.</span><span class="sxs-lookup"><span data-stu-id="86b39-115">Deletes a share name from a server's list of shared resources.</span></span>       |
| [<span data-ttu-id="86b39-116">**нетшаринум**</span><span class="sxs-lookup"><span data-stu-id="86b39-116">**NetShareEnum**</span></span>](/windows/desktop/api/lmshare/nf-lmshare-netshareenum)       | <span data-ttu-id="86b39-117">Возвращает общие сведения о каждом общем ресурсе на сервере.</span><span class="sxs-lookup"><span data-stu-id="86b39-117">Retrieves share information about each shared resource on a server.</span></span>  |
| [<span data-ttu-id="86b39-118">**нетшарежетинфо**</span><span class="sxs-lookup"><span data-stu-id="86b39-118">**NetShareGetInfo**</span></span>](/windows/desktop/api/lmshare/nf-lmshare-netsharegetinfo) | <span data-ttu-id="86b39-119">Извлекает сведения об указанном общем ресурсе на сервере.</span><span class="sxs-lookup"><span data-stu-id="86b39-119">Retrieves information about a specified shared resource on a server.</span></span> |
| [<span data-ttu-id="86b39-120">**нетшаресетинфо**</span><span class="sxs-lookup"><span data-stu-id="86b39-120">**NetShareSetInfo**</span></span>](/windows/desktop/api/lmshare/nf-lmshare-netsharesetinfo) | <span data-ttu-id="86b39-121">Задает параметры общего ресурса.</span><span class="sxs-lookup"><span data-stu-id="86b39-121">Sets a shared resource's parameters.</span></span>                                 |



 

<span data-ttu-id="86b39-122">Эти функции общего доступа применяются только к общим папкам на сервере Server Message Block (LAN Manager).</span><span class="sxs-lookup"><span data-stu-id="86b39-122">These share function apply only to shares on a Server Message Block (LAN Manager) server.</span></span> <span data-ttu-id="86b39-123">Эти функции общего доступа не поддерживают общие папки распределенная файловая система (DFS).</span><span class="sxs-lookup"><span data-stu-id="86b39-123">These share functions do not support Distributed File System (DFS) shares.</span></span> <span data-ttu-id="86b39-124">Например, функция [**нетшарежетинфо**](/windows/desktop/api/lmshare/nf-lmshare-netsharegetinfo) может получать сведения только об указанном ресурсе на SMB-сервере.</span><span class="sxs-lookup"><span data-stu-id="86b39-124">For example, the [**NetShareGetInfo**](/windows/desktop/api/lmshare/nf-lmshare-netsharegetinfo) function can only retrieve information for a specified share resource on an SMB Server.</span></span> <span data-ttu-id="86b39-125">Чтобы получить сведения для общего ресурса с помощью другого поставщика сети (например, WebDAV или общей папки DFS), используйте функцию [**внетжетконнектион**](/windows/desktop/api/winnetwk/nf-winnetwk-wnetgetconnectiona) .</span><span class="sxs-lookup"><span data-stu-id="86b39-125">To retrieve information for a share using a different network provider (WebDAV or a DFS share, for example), use the [**WNetGetConnection**](/windows/desktop/api/winnetwk/nf-winnetwk-wnetgetconnectiona) function.</span></span>

<span data-ttu-id="86b39-126">Функция [**нетшареадд**](/windows/desktop/api/lmshare/nf-lmshare-netshareadd) позволяет пользователю или приложению совместно использовать ресурс определенного типа, используя указанное имя общего ресурса.</span><span class="sxs-lookup"><span data-stu-id="86b39-126">The [**NetShareAdd**](/windows/desktop/api/lmshare/nf-lmshare-netshareadd) function allows a user or application to share a resource of a specific type using the specified share name.</span></span> <span data-ttu-id="86b39-127">Для предоставления общего доступа к ресурсу функции **нетшареадд** требуется имя общего ресурса и имя локального устройства.</span><span class="sxs-lookup"><span data-stu-id="86b39-127">The **NetShareAdd** function requires the share name and local device name to share the resource.</span></span> <span data-ttu-id="86b39-128">Для доступа к ресурсу пользователю или приложению должна быть назначена учетная запись на сервере.</span><span class="sxs-lookup"><span data-stu-id="86b39-128">A user or application must have an account on the server to access the resource.</span></span>

<span data-ttu-id="86b39-129">Можно также указать дескриптор безопасности, который будет связан с общим ресурсом.</span><span class="sxs-lookup"><span data-stu-id="86b39-129">You can also specify a security descriptor to be associated with a share.</span></span> <span data-ttu-id="86b39-130">Дескрипторы безопасности определяют, каким пользователям разрешен доступ к файлам через общую папку, а также к какому типу доступа.</span><span class="sxs-lookup"><span data-stu-id="86b39-130">Security descriptors specify which users are allowed to access files through the share, and with what type of access.</span></span> <span data-ttu-id="86b39-131">При вызове **нетшареадд** или [**Нетшаресетинфо**](/windows/desktop/api/lmshare/nf-lmshare-netsharesetinfo)укажите [**\_ дескриптор безопасности**](/windows/desktop/api/winnt/ns-winnt-security_descriptor) со сведениями об [**общей информации \_ \_ 502**](/windows/desktop/api/lmshare/ns-lmshare-share_info_502) .</span><span class="sxs-lookup"><span data-stu-id="86b39-131">Specify a [**SECURITY\_DESCRIPTOR**](/windows/desktop/api/winnt/ns-winnt-security_descriptor) with the [**SHARE\_INFO\_502**](/windows/desktop/api/lmshare/ns-lmshare-share_info_502) information level when calling **NetShareAdd** or [**NetShareSetInfo**](/windows/desktop/api/lmshare/nf-lmshare-netsharesetinfo).</span></span> <span data-ttu-id="86b39-132">**Нетшаресетинфо** поддерживает информационный [**уровень \_ \_ 1501**](/windows/desktop/api/lmshare/ns-lmshare-share_info_1501) .</span><span class="sxs-lookup"><span data-stu-id="86b39-132">**NetShareSetInfo** supports the [**SHARE\_INFO\_1501**](/windows/desktop/api/lmshare/ns-lmshare-share_info_1501) information level.</span></span> <span data-ttu-id="86b39-133">Дополнительные сведения о дескрипторах безопасности см. в разделе [Управление доступом](/windows/desktop/SecAuthZ/access-control).</span><span class="sxs-lookup"><span data-stu-id="86b39-133">For more information about security descriptors, see [Access Control](/windows/desktop/SecAuthZ/access-control).</span></span>

<span data-ttu-id="86b39-134">Функции управления сетью используют следующие специальные имена общих ресурсов для межпроцессного взаимодействия (IPC) и удаленного администрирования сервера.</span><span class="sxs-lookup"><span data-stu-id="86b39-134">The network management functions use the following special share names for interprocess communication (IPC) and remote administration of the server:</span></span>

-   <span data-ttu-id="86b39-135">IPC $, зарезервировано для межпроцессного взаимодействия</span><span class="sxs-lookup"><span data-stu-id="86b39-135">IPC$, reserved for interprocess communication</span></span>
-   <span data-ttu-id="86b39-136">Администратор $, зарезервированный для удаленного администрирования</span><span class="sxs-lookup"><span data-stu-id="86b39-136">ADMIN$, reserved for remote administration</span></span>
-   <span data-ttu-id="86b39-137">A $, B $, C $ (и другие имена локальных дисков, за которыми следует знак доллара), назначенный для локальных дисковых устройств</span><span class="sxs-lookup"><span data-stu-id="86b39-137">A$, B$, C$ (and other local disk names followed by a dollar sign), assigned to local disk devices</span></span>

<span data-ttu-id="86b39-138">Чтобы получить список всех подключений к общему ресурсу на сервере или получить список всех соединений, установленных с определенного компьютера, вызовите функцию [**нетконнектионенум**](/windows/desktop/api/lmshare/nf-lmshare-netconnectionenum) .</span><span class="sxs-lookup"><span data-stu-id="86b39-138">To list all connections made to a shared resource on a server, or to list all connections established from a particular computer, call the [**NetConnectionEnum**](/windows/desktop/api/lmshare/nf-lmshare-netconnectionenum) function.</span></span> <span data-ttu-id="86b39-139">Вы можете вызвать **нетконнектионенум** в сведениях о [**соединении \_ \_ 0**](/windows/desktop/api/lmshare/ns-lmshare-connection_info_0) и на уровнях информации о [**подключении \_ \_ 1**](/windows/desktop/api/lmshare/ns-lmshare-connection_info_1) .</span><span class="sxs-lookup"><span data-stu-id="86b39-139">You can call **NetConnectionEnum** at the [**CONNECTION\_INFO\_0**](/windows/desktop/api/lmshare/ns-lmshare-connection_info_0) and [**CONNECTION\_INFO\_1**](/windows/desktop/api/lmshare/ns-lmshare-connection_info_1) information levels.</span></span>

<span data-ttu-id="86b39-140">Функции общего доступа доступны на следующих уровнях информации, хотя некоторые уровни общего доступа применимы только к некоторым функциям общего доступа:</span><span class="sxs-lookup"><span data-stu-id="86b39-140">Share functions are available at the following information levels although some share levels are only applicable to some of the share functions:</span></span>

-   [<span data-ttu-id="86b39-141">**ПОДЕЛИТЬСЯ \_ информацией \_ 0**</span><span class="sxs-lookup"><span data-stu-id="86b39-141">**SHARE\_INFO\_0**</span></span>](/windows/desktop/api/lmshare/ns-lmshare-share_info_0)
-   [<span data-ttu-id="86b39-142">**Общие \_ сведения \_ 1**</span><span class="sxs-lookup"><span data-stu-id="86b39-142">**SHARE\_INFO\_1**</span></span>](/windows/desktop/api/lmshare/ns-lmshare-share_info_1)
-   [<span data-ttu-id="86b39-143">**Общие \_ сведения \_ 2**</span><span class="sxs-lookup"><span data-stu-id="86b39-143">**SHARE\_INFO\_2**</span></span>](/windows/desktop/api/lmshare/ns-lmshare-share_info_2)
-   [<span data-ttu-id="86b39-144">**Общие \_ сведения \_ 501**</span><span class="sxs-lookup"><span data-stu-id="86b39-144">**SHARE\_INFO\_501**</span></span>](/windows/desktop/api/lmshare/ns-lmshare-share_info_501)
-   [<span data-ttu-id="86b39-145">**Общие \_ сведения \_ 502**</span><span class="sxs-lookup"><span data-stu-id="86b39-145">**SHARE\_INFO\_502**</span></span>](/windows/desktop/api/lmshare/ns-lmshare-share_info_502)
-   [<span data-ttu-id="86b39-146">**Общие \_ сведения \_ 503**</span><span class="sxs-lookup"><span data-stu-id="86b39-146">**SHARE\_INFO\_503**</span></span>](/windows/desktop/api/lmshare/ns-lmshare-share_info_503)
-   [<span data-ttu-id="86b39-147">**Общие \_ сведения \_ 1004**</span><span class="sxs-lookup"><span data-stu-id="86b39-147">**SHARE\_INFO\_1004**</span></span>](/windows/desktop/api/lmshare/ns-lmshare-share_info_1004)
-   [<span data-ttu-id="86b39-148">**Общие \_ сведения \_ 1005**</span><span class="sxs-lookup"><span data-stu-id="86b39-148">**SHARE\_INFO\_1005**</span></span>](/windows/desktop/api/lmshare/ns-lmshare-share_info_1005)
-   [<span data-ttu-id="86b39-149">**Общие \_ сведения \_ 1006**</span><span class="sxs-lookup"><span data-stu-id="86b39-149">**SHARE\_INFO\_1006**</span></span>](/windows/desktop/api/lmshare/ns-lmshare-share_info_1006)
-   [<span data-ttu-id="86b39-150">**Общие \_ сведения \_ 1501**</span><span class="sxs-lookup"><span data-stu-id="86b39-150">**SHARE\_INFO\_1501**</span></span>](/windows/desktop/api/lmshare/ns-lmshare-share_info_1501)

<span data-ttu-id="86b39-151">Дополнительные сведения см. в документации по определенной функции общего доступа.</span><span class="sxs-lookup"><span data-stu-id="86b39-151">Please review to documentation for a specific share function for details.</span></span>

<span data-ttu-id="86b39-152">При программировании для Active Directory можно вызвать определенные методы интерфейса Active Directory (ADSI) для достижения тех же функций, которые можно достичь, вызвав функции общего доступа к управлению сетью.</span><span class="sxs-lookup"><span data-stu-id="86b39-152">If you are programming for Active Directory, you may be able to call certain Active Directory Service Interface (ADSI) methods to achieve the same functionality you can achieve by calling the network management share functions.</span></span> <span data-ttu-id="86b39-153">Дополнительные сведения см. в разделе [**иадсфилешаре**](/windows/desktop/api/iads/nn-iads-iadsfileshare).</span><span class="sxs-lookup"><span data-stu-id="86b39-153">For more information, see [**IADsFileShare**](/windows/desktop/api/iads/nn-iads-iadsfileshare).</span></span>

 

 