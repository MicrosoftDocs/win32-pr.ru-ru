---
title: Требования к функциям управления сетью на контроллерах домен Active Directory
description: При вызове одной из функций управления сетью, перечисленных в этом разделе, на контроллере домена, работающем Active Directory, доступ к защищаемому объекту разрешен или запрещен на основе списка управления доступом (ACL) для объекта.
ms.assetid: 4dfb3180-3ca5-4e22-b7a1-4e6b132431fb
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a8c6b646290ef6352a529a37243a6ea30c8b0d39
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103890757"
---
# <a name="requirements-for-network-management-functions-on-active-directory-domain-controllers"></a><span data-ttu-id="abd6e-103">Требования к функциям управления сетью на контроллерах домен Active Directory</span><span class="sxs-lookup"><span data-stu-id="abd6e-103">Requirements for Network Management Functions on Active Directory Domain Controllers</span></span>

<span data-ttu-id="abd6e-104">При вызове одной из функций управления сетью, перечисленных в этом разделе, на контроллере домена, работающем Active Directory, доступ к [защищаемому объекту](/windows/desktop/SecAuthZ/securable-objects) разрешен или запрещен на основе [списка управления доступом](/windows/desktop/SecAuthZ/access-control-lists) (ACL) для объекта.</span><span class="sxs-lookup"><span data-stu-id="abd6e-104">If you call one of the network management functions listed in this topic on a domain controller running Active Directory, access to a [securable object](/windows/desktop/SecAuthZ/securable-objects) is allowed or denied based on the [access-control list](/windows/desktop/SecAuthZ/access-control-lists) (ACL) for the object.</span></span> <span data-ttu-id="abd6e-105">(Списки управления доступом указываются в каталоге.)</span><span class="sxs-lookup"><span data-stu-id="abd6e-105">(ACLs are specified in the directory.)</span></span>

<span data-ttu-id="abd6e-106">Различные требования к доступу относятся к информационным запросам и обновлениям информации.</span><span class="sxs-lookup"><span data-stu-id="abd6e-106">Different access requirements apply to information queries and information updates.</span></span>

## <a name="queries"></a><span data-ttu-id="abd6e-107">Запросы</span><span class="sxs-lookup"><span data-stu-id="abd6e-107">Queries</span></span>

<span data-ttu-id="abd6e-108">Для запросов ACL по умолчанию разрешает всем прошедшим проверку подлинности пользователям и членам группы "[пред-Windows 2000 доступ](/windows/desktop/SecAuthZ/allowing-anonymous-access)" чтение и перечисление информации.</span><span class="sxs-lookup"><span data-stu-id="abd6e-108">For queries, the default ACL permits all authenticated users and members of the "[Pre-Windows 2000 compatible access](/windows/desktop/SecAuthZ/allowing-anonymous-access)" group to read and enumerate information.</span></span> <span data-ttu-id="abd6e-109">Затрагиваются перечисленные ниже функции.</span><span class="sxs-lookup"><span data-stu-id="abd6e-109">The functions listed following are affected:</span></span>

-   <span data-ttu-id="abd6e-110">[**Нетграупенум**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupenum), [**нетграупжетинфо**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupgetinfo), [**нетграупжетусерс**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupgetusers)</span><span class="sxs-lookup"><span data-stu-id="abd6e-110">[**NetGroupEnum**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupenum), [**NetGroupGetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupgetinfo), [**NetGroupGetUsers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupgetusers)</span></span>
-   <span data-ttu-id="abd6e-111">[**Нетлокалграупенум**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupenum), [**нетлокалграупжетинфо**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupgetinfo), [**нетлокалграупжетмемберс**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupgetmembers)</span><span class="sxs-lookup"><span data-stu-id="abd6e-111">[**NetLocalGroupEnum**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupenum), [**NetLocalGroupGetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupgetinfo), [**NetLocalGroupGetMembers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupgetmembers)</span></span>
-   [<span data-ttu-id="abd6e-112">**неткуеридисплайинформатион**</span><span class="sxs-lookup"><span data-stu-id="abd6e-112">**NetQueryDisplayInformation**</span></span>](/windows/desktop/api/Lmaccess/nf-lmaccess-netquerydisplayinformation)
-   <span data-ttu-id="abd6e-113">[**Нетсессионжетинфо**](/windows/desktop/api/lmshare/nf-lmshare-netsessiongetinfo) (только уровни 1 и 2)</span><span class="sxs-lookup"><span data-stu-id="abd6e-113">[**NetSessionGetInfo**](/windows/desktop/api/lmshare/nf-lmshare-netsessiongetinfo) (levels 1 and 2 only)</span></span>
-   <span data-ttu-id="abd6e-114">[**Нетшаринум**](/windows/desktop/api/lmshare/nf-lmshare-netshareenum) (только уровни 2 и 502)</span><span class="sxs-lookup"><span data-stu-id="abd6e-114">[**NetShareEnum**](/windows/desktop/api/lmshare/nf-lmshare-netshareenum) (levels 2 and 502 only)</span></span>
-   <span data-ttu-id="abd6e-115">[**Нетусеренум**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuserenum), [**нетусержетграупс**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusergetgroups), [**нетусержетинфо**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusergetinfo), [**нетусержетлокалграупс**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusergetlocalgroups), [**нетусермодалсжет**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusermodalsget)</span><span class="sxs-lookup"><span data-stu-id="abd6e-115">[**NetUserEnum**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuserenum), [**NetUserGetGroups**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusergetgroups), [**NetUserGetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusergetinfo), [**NetUserGetLocalGroups**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusergetlocalgroups), [**NetUserModalsGet**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusermodalsget)</span></span>
-   <span data-ttu-id="abd6e-116">[**Нетвкстажетинфо**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstagetinfo), [ **нетвкстаусеренум**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstauserenum)</span><span class="sxs-lookup"><span data-stu-id="abd6e-116">[**NetWkstaGetInfo**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstagetinfo), [**NetWkstaUserEnum**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstauserenum)</span></span>

<span data-ttu-id="abd6e-117">Анонимный доступ к сведениям о группе требует явного добавления пользователя в группу "пред-Windows 2000 доступ".</span><span class="sxs-lookup"><span data-stu-id="abd6e-117">Anonymous access to group information requires that the user Anonymous be explicitly added to the "Pre-Windows 2000 compatible access" group.</span></span> <span data-ttu-id="abd6e-118">Это связано с тем, что анонимные маркеры не включают идентификатор безопасности группы «все».</span><span class="sxs-lookup"><span data-stu-id="abd6e-118">This is because anonymous tokens do not include the Everyone Group SID.</span></span>

<span data-ttu-id="abd6e-119">**Windows 2000:** По умолчанию группа "пред-Windows 2000 доступ к данным" включает в себя всех членов группы.</span><span class="sxs-lookup"><span data-stu-id="abd6e-119">**Windows 2000:** By default, the "Pre-Windows 2000 compatible access" group includes Everyone as a member.</span></span> <span data-ttu-id="abd6e-120">Это обеспечивает анонимный доступ (анонимный вход) к информации, если система разрешает анонимный доступ.</span><span class="sxs-lookup"><span data-stu-id="abd6e-120">This enables anonymous access (Anonymous Logon) to information if the system allows anonymous access.</span></span> <span data-ttu-id="abd6e-121">Администраторы могут в любое время удалить всех пользователей из группы "пред-Windows 2000 доступ".</span><span class="sxs-lookup"><span data-stu-id="abd6e-121">Administrators can remove Everyone from the "Pre-Windows 2000 Compatible Access" group at any time.</span></span> <span data-ttu-id="abd6e-122">Удаление всех пользователей из группы запрещает доступ к данным только прошедшим проверку пользователям.</span><span class="sxs-lookup"><span data-stu-id="abd6e-122">Removing Everyone from the group restricts information access to authenticated users only.</span></span> <span data-ttu-id="abd6e-123">Дополнительные сведения об анонимном доступе см. в разделе [идентификаторы безопасности](/windows/desktop/SecAuthZ/security-identifiers) и [хорошо известные](/windows/desktop/SecAuthZ/well-known-sids)идентификаторы SID.</span><span class="sxs-lookup"><span data-stu-id="abd6e-123">For more information about anonymous access, see [Security Identifiers](/windows/desktop/SecAuthZ/security-identifiers) and [Well-Known SIDs](/windows/desktop/SecAuthZ/well-known-sids).</span></span>

<span data-ttu-id="abd6e-124">Вы можете переопределить значение по умолчанию системы, задав в реестре следующий раздел в значении 1:</span><span class="sxs-lookup"><span data-stu-id="abd6e-124">You can override the system default by setting the following key in the registry to the value 1:</span></span>

<span data-ttu-id="abd6e-125">**HKey \_ Локальный \_ компьютер \\ система \\ CurrentControlSet \\ Управление \\ локальным компьютером LSA** \\ **еверйонеинклудесанонимаус** = 1</span><span class="sxs-lookup"><span data-stu-id="abd6e-125">**HKEY\_LOCAL\_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Lsa**\\**EveryoneIncludesAnonymous** = 1</span></span>

<span data-ttu-id="abd6e-126">Дополнительные сведения о анонимном доступе к сведениям о группе при вызове этих двух функций см. в разделе [**нетвкстажетинфо**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstagetinfo) и [**нетвкстаусеренум**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstauserenum) .</span><span class="sxs-lookup"><span data-stu-id="abd6e-126">See [**NetWkstaGetInfo**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstagetinfo) and [**NetWkstaUserEnum**](/windows/desktop/api/Lmwksta/nf-lmwksta-netwkstauserenum) for additional information about anonymous access to group information when calling these two functions.</span></span>

## <a name="updates"></a><span data-ttu-id="abd6e-127">Обновления</span><span class="sxs-lookup"><span data-stu-id="abd6e-127">Updates</span></span>

<span data-ttu-id="abd6e-128">Для обновлений ACL по умолчанию допускает запись сведений только администраторам домена и операторам учетных записей.</span><span class="sxs-lookup"><span data-stu-id="abd6e-128">For updates, the default ACL permits only Domain Administrators and Account Operators to write information.</span></span> <span data-ttu-id="abd6e-129">Единственное исключение заключается в том, что пользователи могут изменить свой пароль и задать \* \_ \_ поле комментария usr Усри.</span><span class="sxs-lookup"><span data-stu-id="abd6e-129">One exception is that users can change their own password and set the usri\*\_usr\_comment field.</span></span> <span data-ttu-id="abd6e-130">Еще одно исключение заключается в том, что операторы учета не могут изменять учетные записи администрирования.</span><span class="sxs-lookup"><span data-stu-id="abd6e-130">Another exception is that Account Operators cannot modify administration accounts.</span></span> <span data-ttu-id="abd6e-131">Затрагиваются перечисленные ниже функции.</span><span class="sxs-lookup"><span data-stu-id="abd6e-131">The functions listed following are affected:</span></span>

-   <span data-ttu-id="abd6e-132">[**Нетграупадд**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupadd), [**нетграупаддусер**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupadduser), [**нетграупдел**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupdel), [**нетграупделусер**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupdeluser), [**нетграупсетинфо**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupsetinfo), [**нетграупсетусерс**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupsetusers)</span><span class="sxs-lookup"><span data-stu-id="abd6e-132">[**NetGroupAdd**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupadd), [**NetGroupAddUser**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupadduser), [**NetGroupDel**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupdel), [**NetGroupDelUser**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupdeluser), [**NetGroupSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupsetinfo), [**NetGroupSetUsers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupsetusers)</span></span>
-   <span data-ttu-id="abd6e-133">[**Нетлокалграупадд**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupadd), [**нетлокалграупаддмемберс**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupaddmembers), [**нетлокалграупдел**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupdel), [**нетлокалграупделмемберс**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupdelmembers), [**NetLocalGroupSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupsetinfo), [**NetLocalGroupSetMembers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupsetmembers)</span><span class="sxs-lookup"><span data-stu-id="abd6e-133">[**NetLocalGroupAdd**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupadd), [**NetLocalGroupAddMembers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupaddmembers), [**NetLocalGroupDel**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupdel), [**NetLocalGroupDelMembers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupdelmembers), [**NetLocalGroupSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupsetinfo), [**NetLocalGroupSetMembers**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupsetmembers)</span></span>
-   [<span data-ttu-id="abd6e-134">**нетмессажебуфферсенд**</span><span class="sxs-lookup"><span data-stu-id="abd6e-134">**NetMessageBufferSend**</span></span>](/windows/desktop/api/Lmmsg/nf-lmmsg-netmessagebuffersend)
-   <span data-ttu-id="abd6e-135">[**Нетусерадд**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuseradd), [**нетусерчанжепассворд**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuserchangepassword), [**нетусердел**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuserdel), [**нетусермодалссет**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusermodalsset), [**нетусерсетграупс**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusersetgroups), [**нетусерсетинфо**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusersetinfo)</span><span class="sxs-lookup"><span data-stu-id="abd6e-135">[**NetUserAdd**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuseradd), [**NetUserChangePassword**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuserchangepassword), [**NetUserDel**](/windows/desktop/api/Lmaccess/nf-lmaccess-netuserdel), [**NetUserModalsSet**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusermodalsset), [**NetUserSetGroups**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusersetgroups), [**NetUserSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusersetinfo)</span></span>

<span data-ttu-id="abd6e-136">Как правило, вызывающие объекты должны иметь доступ на запись ко всему объекту для достижения вызовов [**нетусермодалссет**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusermodalsset), [**нетусерсетинфо**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusersetinfo), [**нетграупсетинфо**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupsetinfo) и [**нетлокалграупсетинфо**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupsetinfo) .</span><span class="sxs-lookup"><span data-stu-id="abd6e-136">Typically, callers must have write access to the entire object for calls to [**NetUserModalsSet**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusermodalsset), [**NetUserSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netusersetinfo), [**NetGroupSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netgroupsetinfo) and [**NetLocalGroupSetInfo**](/windows/desktop/api/Lmaccess/nf-lmaccess-netlocalgroupsetinfo) to succeed.</span></span> <span data-ttu-id="abd6e-137">Для более точного контроля доступа рекомендуется использовать интерфейсы ADSI.</span><span class="sxs-lookup"><span data-stu-id="abd6e-137">For finer access control, you should consider using ADSI.</span></span> <span data-ttu-id="abd6e-138">Дополнительные сведения о ADSI см. в разделе [интерфейсы служб Active Directory](/windows/desktop/ADSI/active-directory-service-interfaces-adsi).</span><span class="sxs-lookup"><span data-stu-id="abd6e-138">For more information about ADSI, see [Active Directory Service Interfaces](/windows/desktop/ADSI/active-directory-service-interfaces-adsi).</span></span>

<span data-ttu-id="abd6e-139">Дополнительные сведения об управлении доступом к защищаемым объектам см. в разделе [Управление доступом](/windows/desktop/SecAuthZ/access-control), [права](/windows/desktop/SecAuthZ/privileges)доступа и [защищаемые объекты](/windows/desktop/SecAuthZ/securable-objects).</span><span class="sxs-lookup"><span data-stu-id="abd6e-139">For more information about controlling access to securable objects, see [Access Control](/windows/desktop/SecAuthZ/access-control), [Privileges](/windows/desktop/SecAuthZ/privileges), and [Securable Objects](/windows/desktop/SecAuthZ/securable-objects).</span></span> <span data-ttu-id="abd6e-140">Дополнительные сведения о вызове функций, требующих прав администратора, см. [в разделе Запуск с особыми привилегиями](/windows/desktop/SecBP/running-with-special-privileges).</span><span class="sxs-lookup"><span data-stu-id="abd6e-140">For more information about calling functions that require administrator privileges, see [Running with Special Privileges](/windows/desktop/SecBP/running-with-special-privileges).</span></span>

 

 