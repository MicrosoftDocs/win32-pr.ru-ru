---
description: Объекты пользовательского интерфейса поддерживают только один обработчик для каждого объекта. Процессы не могут наследовать или дублировать дескрипторы для объектов пользователей. Процессы в одном сеансе не могут ссылаться на пользовательский обработчик в другом сеансе.
ms.assetid: 07edc049-26d9-4f42-a5e7-e1f4c8435a6c
title: Пользовательские объекты
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d5ed8afcf0f1d0e4c232cf503bc2c7ba86dca42d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104553559"
---
# <a name="user-objects"></a><span data-ttu-id="04f58-105">Пользовательские объекты</span><span class="sxs-lookup"><span data-stu-id="04f58-105">User Objects</span></span>

<span data-ttu-id="04f58-106">Объекты пользовательского интерфейса поддерживают только один обработчик для каждого объекта.</span><span class="sxs-lookup"><span data-stu-id="04f58-106">User interface objects support only one handle per object.</span></span> <span data-ttu-id="04f58-107">Процессы не могут наследовать или дублировать дескрипторы для объектов пользователей.</span><span class="sxs-lookup"><span data-stu-id="04f58-107">Processes cannot inherit or duplicate handles to user objects.</span></span> <span data-ttu-id="04f58-108">Процессы в одном сеансе не могут ссылаться на пользовательский обработчик в другом сеансе.</span><span class="sxs-lookup"><span data-stu-id="04f58-108">Processes in one session cannot reference a user handle in another session.</span></span>

<span data-ttu-id="04f58-109">Существует теоретический предел в 65 536 пользовательских дескрипторов на сеанс.</span><span class="sxs-lookup"><span data-stu-id="04f58-109">There is a theoretical limit of 65,536 user handles per session.</span></span> <span data-ttu-id="04f58-110">Однако максимальное число дескрипторов пользователей, которые могут быть открыты для каждого сеанса, обычно меньше, так как на него влияет доступная память.</span><span class="sxs-lookup"><span data-stu-id="04f58-110">However, the maximum number of user handles that can be opened per session is usually lower, since it is affected by available memory.</span></span> <span data-ttu-id="04f58-111">Существует также ограничение по умолчанию для каждого процесса дескрипторов пользователей.</span><span class="sxs-lookup"><span data-stu-id="04f58-111">There is also a default per-process limit of user handles.</span></span> <span data-ttu-id="04f58-112">Чтобы изменить это ограничение, задайте следующее значение реестра:</span><span class="sxs-lookup"><span data-stu-id="04f58-112">To change this limit, set the following registry value:</span></span>

<span data-ttu-id="04f58-113">**HKey \_ \_** \\ **Программное обеспечение** локального компьютера \\ **Microsoft** \\ **Windows NT** \\ **CurrentVersion** \\ **Windows** \\ **усерпроцесшандлекуота**</span><span class="sxs-lookup"><span data-stu-id="04f58-113">**HKEY\_LOCAL\_MACHINE**\\**SOFTWARE**\\**Microsoft**\\**Windows NT**\\**CurrentVersion**\\**Windows**\\**USERProcessHandleQuota**</span></span>

<span data-ttu-id="04f58-114">Для этого значения можно задать число от 200 до 18 000.</span><span class="sxs-lookup"><span data-stu-id="04f58-114">This value can be set to a number between 200 and 18,000.</span></span>

## <a name="handles-to-user-objects"></a><span data-ttu-id="04f58-115">Дескрипторы объектов пользователей</span><span class="sxs-lookup"><span data-stu-id="04f58-115">Handles to User Objects</span></span>

<span data-ttu-id="04f58-116">Дескрипторы объектов пользователей являются общедоступными для всех процессов.</span><span class="sxs-lookup"><span data-stu-id="04f58-116">Handles to user objects are public to all processes.</span></span> <span data-ttu-id="04f58-117">То есть любой процесс может использовать пользовательский обработчик объекта при условии, что этот процесс имеет доступ к этому объекту.</span><span class="sxs-lookup"><span data-stu-id="04f58-117">That is, any process can use the user object handle, provided that the process has security access to the object.</span></span>

<span data-ttu-id="04f58-118">На следующем рисунке приложение создает объект Window.</span><span class="sxs-lookup"><span data-stu-id="04f58-118">In the following illustration, an application creates a window object.</span></span> <span data-ttu-id="04f58-119">Функция [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) создает объект Window и возвращает маркер объекта.</span><span class="sxs-lookup"><span data-stu-id="04f58-119">The [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) function creates the window object and returns an object handle.</span></span>

![приложение, создающее объект Window](images/cshob-01.png)

<span data-ttu-id="04f58-121">После создания объекта Window приложение может использовать маркер окна для вывода или изменения окна.</span><span class="sxs-lookup"><span data-stu-id="04f58-121">After the window object has been created, the application can use the window handle to display or change the window.</span></span> <span data-ttu-id="04f58-122">Этот маркер остается действительным до тех пор, пока не будет уничтожен объект Window.</span><span class="sxs-lookup"><span data-stu-id="04f58-122">The handle remains valid until the window object is destroyed.</span></span>

<span data-ttu-id="04f58-123">На следующем рисунке приложение уничтожает объект Window.</span><span class="sxs-lookup"><span data-stu-id="04f58-123">In the next illustration, the application destroys the window object.</span></span> <span data-ttu-id="04f58-124">Функция [**дестройвиндов**](/windows/win32/api/winuser/nf-winuser-destroywindow) удаляет объект Window из памяти, что делает недействительным маркер окна.</span><span class="sxs-lookup"><span data-stu-id="04f58-124">The [**DestroyWindow**](/windows/win32/api/winuser/nf-winuser-destroywindow) function removes the window object from memory, which invalidates the window handle.</span></span>

![уничтожение объекта окна](images/cshob-02.png)

## <a name="managing-user-objects"></a><span data-ttu-id="04f58-126">Управление объектами пользователей</span><span class="sxs-lookup"><span data-stu-id="04f58-126">Managing User Objects</span></span>

<span data-ttu-id="04f58-127">В следующей таблице перечислены объекты пользователей, а также функции создателя и уничтожения каждого объекта.</span><span class="sxs-lookup"><span data-stu-id="04f58-127">The following table lists the user objects, along with each object's creator and destroyer functions.</span></span> <span data-ttu-id="04f58-128">Функции Creator создают объект и обработчик объекта или просто возвращают существующий объектный обработчик.</span><span class="sxs-lookup"><span data-stu-id="04f58-128">The creator functions either create the object and an object handle or simply return the existing object handle.</span></span> <span data-ttu-id="04f58-129">Функции уничтожения удаляют объект из памяти, что делает недействительным обработку объекта.</span><span class="sxs-lookup"><span data-stu-id="04f58-129">The destroyer functions remove the object from memory, which invalidates the object handle.</span></span>



| <span data-ttu-id="04f58-130">Объект-пользователь</span><span class="sxs-lookup"><span data-stu-id="04f58-130">User object</span></span>       | <span data-ttu-id="04f58-131">Функция Creator</span><span class="sxs-lookup"><span data-stu-id="04f58-131">Creator function</span></span>                                                                                                                                                                                                                                                              | <span data-ttu-id="04f58-132">Функция уничтожения</span><span class="sxs-lookup"><span data-stu-id="04f58-132">Destroyer function</span></span>                                                                                   |
|-------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="04f58-133">Таблица сочетаний клавиш</span><span class="sxs-lookup"><span data-stu-id="04f58-133">Accelerator table</span></span> | [<span data-ttu-id="04f58-134">**креатеакцелератортабле**</span><span class="sxs-lookup"><span data-stu-id="04f58-134">**CreateAcceleratorTable**</span></span>](/windows/win32/api/winuser/nf-winuser-createacceleratortablea)                                                                                                                                                                                                               | [<span data-ttu-id="04f58-135">**дестройакцелератортабле**</span><span class="sxs-lookup"><span data-stu-id="04f58-135">**DestroyAcceleratorTable**</span></span>](/windows/win32/api/winuser/nf-winuser-destroyacceleratortable)                                    |
| <span data-ttu-id="04f58-136">Курсор</span><span class="sxs-lookup"><span data-stu-id="04f58-136">Caret</span></span>             | [<span data-ttu-id="04f58-137">**креатекарет**</span><span class="sxs-lookup"><span data-stu-id="04f58-137">**CreateCaret**</span></span>](/windows/win32/api/winuser/nf-winuser-createcaret)                                                                                                                                                                                                                                     | [<span data-ttu-id="04f58-138">**дестройкарет**</span><span class="sxs-lookup"><span data-stu-id="04f58-138">**DestroyCaret**</span></span>](/windows/win32/api/winuser/nf-winuser-destroycaret)                                                          |
| <span data-ttu-id="04f58-139">Курсор</span><span class="sxs-lookup"><span data-stu-id="04f58-139">Cursor</span></span>            | <span data-ttu-id="04f58-140">[**Креатекурсор**](/windows/win32/api/winuser/nf-winuser-createcursor), [**лоадкурсор**](/windows/win32/api/winuser/nf-winuser-loadcursora), [**лоадимаже**](/windows/win32/api/winuser/nf-winuser-loadimagea)</span><span class="sxs-lookup"><span data-stu-id="04f58-140">[**CreateCursor**](/windows/win32/api/winuser/nf-winuser-createcursor), [**LoadCursor**](/windows/win32/api/winuser/nf-winuser-loadcursora), [**LoadImage**](/windows/win32/api/winuser/nf-winuser-loadimagea)</span></span>                                                                                                                                                   | [<span data-ttu-id="04f58-141">**дестройкурсор**</span><span class="sxs-lookup"><span data-stu-id="04f58-141">**DestroyCursor**</span></span>](/windows/win32/api/winuser/nf-winuser-destroycursor)                                                        |
| <span data-ttu-id="04f58-142">Беседа DDE</span><span class="sxs-lookup"><span data-stu-id="04f58-142">DDE conversation</span></span>  | <span data-ttu-id="04f58-143">[**Ддеконнект**](/windows/win32/api/ddeml/nf-ddeml-ddeconnect), [ **ддеконнектлист**](/windows/win32/api/ddeml/nf-ddeml-ddeconnectlist)</span><span class="sxs-lookup"><span data-stu-id="04f58-143">[**DdeConnect**](/windows/win32/api/ddeml/nf-ddeml-ddeconnect), [**DdeConnectList**](/windows/win32/api/ddeml/nf-ddeml-ddeconnectlist)</span></span>                                                                                                                                                                                      | <span data-ttu-id="04f58-144">[**Ддедисконнект**](/windows/win32/api/ddeml/nf-ddeml-ddedisconnect), [ **ддедисконнектлист**](/windows/win32/api/ddeml/nf-ddeml-ddedisconnectlist)</span><span class="sxs-lookup"><span data-stu-id="04f58-144">[**DdeDisconnect**](/windows/win32/api/ddeml/nf-ddeml-ddedisconnect), [**DdeDisconnectList**](/windows/win32/api/ddeml/nf-ddeml-ddedisconnectlist)</span></span> |
| <span data-ttu-id="04f58-145">Ключ</span><span class="sxs-lookup"><span data-stu-id="04f58-145">Hook</span></span>              | [<span data-ttu-id="04f58-146">**сетвиндовшукекс**</span><span class="sxs-lookup"><span data-stu-id="04f58-146">**SetWindowsHookEx**</span></span>](/windows/win32/api/winuser/nf-winuser-setwindowshookexa)                                                                                                                                                                                                                           | [<span data-ttu-id="04f58-147">**унхуквиндовшукекс**</span><span class="sxs-lookup"><span data-stu-id="04f58-147">**UnhookWindowsHookEx**</span></span>](/windows/win32/api/winuser/nf-winuser-unhookwindowshookex)                                            |
| <span data-ttu-id="04f58-148">Значок</span><span class="sxs-lookup"><span data-stu-id="04f58-148">Icon</span></span>              | <span data-ttu-id="04f58-149">[**Креатеикониндирект**](/windows/win32/api/winuser/nf-winuser-createiconindirect), [**лоадикон**](/windows/win32/api/winuser/nf-winuser-loadicona), [**лоадимаже**](/windows/win32/api/winuser/nf-winuser-loadimagea)</span><span class="sxs-lookup"><span data-stu-id="04f58-149">[**CreateIconIndirect**](/windows/win32/api/winuser/nf-winuser-createiconindirect), [**LoadIcon**](/windows/win32/api/winuser/nf-winuser-loadicona), [**LoadImage**](/windows/win32/api/winuser/nf-winuser-loadimagea)</span></span>                                                                                                                                           | [<span data-ttu-id="04f58-150">**дестройикон**</span><span class="sxs-lookup"><span data-stu-id="04f58-150">**DestroyIcon**</span></span>](/windows/win32/api/winuser/nf-winuser-destroyicon)                                                            |
| <span data-ttu-id="04f58-151">Меню</span><span class="sxs-lookup"><span data-stu-id="04f58-151">Menu</span></span>              | <span data-ttu-id="04f58-152">[**Креатемену**](/windows/win32/api/winuser/nf-winuser-createmenu), [**креатепопупмену**](/windows/win32/api/winuser/nf-winuser-createpopupmenu), [**лоадмену**](/windows/win32/api/winuser/nf-winuser-loadmenua), [**лоадменуиндирект**](/windows/win32/api/winuser/nf-winuser-loadmenuindirecta)</span><span class="sxs-lookup"><span data-stu-id="04f58-152">[**CreateMenu**](/windows/win32/api/winuser/nf-winuser-createmenu), [**CreatePopupMenu**](/windows/win32/api/winuser/nf-winuser-createpopupmenu), [**LoadMenu**](/windows/win32/api/winuser/nf-winuser-loadmenua), [**LoadMenuIndirect**](/windows/win32/api/winuser/nf-winuser-loadmenuindirecta)</span></span>                                                                                          | [<span data-ttu-id="04f58-153">**дестроймену**</span><span class="sxs-lookup"><span data-stu-id="04f58-153">**DestroyMenu**</span></span>](/windows/win32/api/winuser/nf-winuser-destroymenu)                                                            |
| <span data-ttu-id="04f58-154">Окно</span><span class="sxs-lookup"><span data-stu-id="04f58-154">Window</span></span>            | <span data-ttu-id="04f58-155">[**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa), [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa), [**креатедиалогпарам**](/windows/win32/api/winuser/nf-winuser-createdialogparama), [**креатедиалогиндиректпарам**](/windows/win32/api/winuser/nf-winuser-createdialogindirectparama), [**креатемдивиндов**](/windows/win32/api/winuser/nf-winuser-createmdiwindowa)</span><span class="sxs-lookup"><span data-stu-id="04f58-155">[**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa), [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa), [**CreateDialogParam**](/windows/win32/api/winuser/nf-winuser-createdialogparama), [**CreateDialogIndirectParam**](/windows/win32/api/winuser/nf-winuser-createdialogindirectparama), [**CreateMDIWindow**](/windows/win32/api/winuser/nf-winuser-createmdiwindowa)</span></span> | [<span data-ttu-id="04f58-156">**дестройвиндов**</span><span class="sxs-lookup"><span data-stu-id="04f58-156">**DestroyWindow**</span></span>](/windows/win32/api/winuser/nf-winuser-destroywindow)                                                        |
| <span data-ttu-id="04f58-157">Расположение окна</span><span class="sxs-lookup"><span data-stu-id="04f58-157">Window position</span></span>   | [<span data-ttu-id="04f58-158">**бегиндефервиндовпос**</span><span class="sxs-lookup"><span data-stu-id="04f58-158">**BeginDeferWindowPos**</span></span>](/windows/win32/api/winuser/nf-winuser-begindeferwindowpos)                                                                                                                                                                                                                     | [<span data-ttu-id="04f58-159">**енддефервиндовпос**</span><span class="sxs-lookup"><span data-stu-id="04f58-159">**EndDeferWindowPos**</span></span>](/windows/win32/api/winuser/nf-winuser-enddeferwindowpos)                                                |



 

 

 
