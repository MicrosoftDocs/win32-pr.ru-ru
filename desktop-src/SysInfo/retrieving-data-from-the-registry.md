---
description: Чтобы получить данные из реестра, приложение обычно перечисляет подразделы ключа до тех пор, пока не найдет конкретный, а затем извлечет данные из значения или связанных с ним значений.
ms.assetid: ce4be388-5506-4d01-a73c-33372ef4ccd7
title: Получение данных из реестра
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 45d8dd6f6e4d667cf2760c7cba441200755fb6c3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104081434"
---
# <a name="retrieving-data-from-the-registry"></a><span data-ttu-id="ca3fd-103">Получение данных из реестра</span><span class="sxs-lookup"><span data-stu-id="ca3fd-103">Retrieving Data from the Registry</span></span>

<span data-ttu-id="ca3fd-104">Чтобы получить данные из реестра, приложение обычно перечисляет подразделы ключа до тех пор, пока не найдет конкретный, а затем извлечет данные из значения или связанных с ним значений.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-104">To retrieve data from the registry, an application typically enumerates the subkeys of a key until it finds a particular one and then retrieves data from the value or values associated with it.</span></span> <span data-ttu-id="ca3fd-105">Приложение может вызвать функцию [**реженумкэйекс**](/windows/desktop/api/Winreg/nf-winreg-regenumkeyexa) для перечисления подразделов заданного ключа.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-105">An application can call the [**RegEnumKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regenumkeyexa) function to enumerate the subkeys of a given key.</span></span>

<span data-ttu-id="ca3fd-106">Чтобы получить подробные данные о конкретном подразделе, приложение может вызвать функцию [**регкуеринфокэй**](/windows/desktop/api/Winreg/nf-winreg-regqueryinfokeya) .</span><span class="sxs-lookup"><span data-stu-id="ca3fd-106">To retrieve detailed data about a particular subkey, an application can call the [**RegQueryInfoKey**](/windows/desktop/api/Winreg/nf-winreg-regqueryinfokeya) function.</span></span> <span data-ttu-id="ca3fd-107">Функция [**регжеткэйсекурити**](/windows/desktop/api/winreg/nf-winreg-reggetkeysecurity) извлекает копию дескриптора безопасности, защищающего ключ.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-107">The [**RegGetKeySecurity**](/windows/desktop/api/winreg/nf-winreg-reggetkeysecurity) function retrieves a copy of the security descriptor protecting a key.</span></span>

<span data-ttu-id="ca3fd-108">Приложение может использовать функцию [**реженумвалуе**](/windows/desktop/api/Winreg/nf-winreg-regenumvaluea) для перечисления значений для данного ключа, а функция [**процедура RegQueryValueEx**](/windows/desktop/api/Winreg/nf-winreg-regqueryvalueexa) — для получения определенного значения для ключа.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-108">An application can use the [**RegEnumValue**](/windows/desktop/api/Winreg/nf-winreg-regenumvaluea) function to enumerate the values for a given key, and [**RegQueryValueEx**](/windows/desktop/api/Winreg/nf-winreg-regqueryvalueexa) function to retrieve a particular value for a key.</span></span> <span data-ttu-id="ca3fd-109">Приложение обычно вызывает **реженумвалуе** для определения имен значений, а затем **процедура RegQueryValueEx** для получения данных для имен.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-109">An application typically calls **RegEnumValue** to determine the value names and then **RegQueryValueEx** to retrieve the data for the names.</span></span>

<span data-ttu-id="ca3fd-110">Функция [**регкуеримултиплевалуес**](/windows/desktop/api/Winreg/nf-winreg-regquerymultiplevaluesa) Извлекает тип и данные для списка имен значений, связанных с открытым ключом реестра.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-110">The [**RegQueryMultipleValues**](/windows/desktop/api/Winreg/nf-winreg-regquerymultiplevaluesa) function retrieves the type and data for a list of value names associated with an open registry key.</span></span> <span data-ttu-id="ca3fd-111">Эта функция полезна для поставщиков динамических ключей, так как обеспечивает согласованность данных за счет извлечения нескольких значений в атомарной операции.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-111">This function is useful for dynamic key providers because it assures consistency of data by retrieving multiple values in an atomic operation.</span></span>

<span data-ttu-id="ca3fd-112">Так как другие приложения могут изменять данные в значении реестра между моментом, когда приложение может считывать значение и использовать его, может потребоваться убедиться в том, что приложение содержит последние данные.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-112">Because other applications can change the data in a registry value between the time your application can read a value and use it, you may need to ensure your application has the latest data.</span></span> <span data-ttu-id="ca3fd-113">Функцию [**регнотифичанжекэйвалуе**](/windows/desktop/api/Winreg/nf-winreg-regnotifychangekeyvalue) можно использовать для уведомления вызывающего потока о внесении изменений в атрибуты или содержимое раздела реестра или при удалении ключа.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-113">You can use the [**RegNotifyChangeKeyValue**](/windows/desktop/api/Winreg/nf-winreg-regnotifychangekeyvalue) function to notify the calling thread when there are changes to the attributes or contents of a registry key, or if the key is deleted.</span></span> <span data-ttu-id="ca3fd-114">Функция сообщает объекту события об уведомлении вызывающей стороны.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-114">The function signals an event object to notify the caller.</span></span> <span data-ttu-id="ca3fd-115">Если поток, вызывающий **регнотифичанжекэйвалуе** , завершает работу, событие получает сигнал и отслеживание раздела реестра останавливается.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-115">If the thread that calls **RegNotifyChangeKeyValue** exits, the event is signaled and the monitoring of the registry key is stopped.</span></span>

<span data-ttu-id="ca3fd-116">Вы можете контролировать или указывать, какие изменения должны быть переданы с помощью фильтра уведомления или флага.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-116">You can control or specify what changes should be reported through the use of a notify filter or flag.</span></span> <span data-ttu-id="ca3fd-117">Как правило, изменения передаются посредством сигнализации о событии, указанном для функции.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-117">Usually, changes are reported by signaling an event that you specify to the function.</span></span> <span data-ttu-id="ca3fd-118">Обратите внимание, что функция [**регнотифичанжекэйвалуе**](/windows/desktop/api/Winreg/nf-winreg-regnotifychangekeyvalue) не работает с удаленными дескрипторами.</span><span class="sxs-lookup"><span data-stu-id="ca3fd-118">Note that the [**RegNotifyChangeKeyValue**](/windows/desktop/api/Winreg/nf-winreg-regnotifychangekeyvalue) function does not work with remote handles.</span></span>

<span data-ttu-id="ca3fd-119">Дополнительные сведения о мониторинге операций с реестром см. в разделе [**Реестр**](/windows/desktop/ETW/registry).</span><span class="sxs-lookup"><span data-stu-id="ca3fd-119">To monitor registry operations in more detail, see [**Registry**](/windows/desktop/ETW/registry).</span></span>

 

 
