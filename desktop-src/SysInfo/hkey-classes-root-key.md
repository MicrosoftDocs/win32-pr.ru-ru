---
description: '\_ \_ Ключ корневых классов hKey (HKCR) содержит сопоставления расширения имени файла и сведения о регистрации класса COM, такие как ProgID, CLSID и идентификаторов IID. В основном она предназначена для обеспечения совместимости с реестром в 16-разрядных версиях Windows.'
ms.assetid: b404875f-11e1-48f2-98d2-0378a0646ed3
title: Ключ HKEY_CLASSES_ROOT
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1e7aebe0e59424eb5ff7584fe61c2c5089eb887b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103912783"
---
# <a name="hkey_classes_root-key"></a><span data-ttu-id="92b76-104">\_ \_ Корневой ключ классов hKey</span><span class="sxs-lookup"><span data-stu-id="92b76-104">HKEY\_CLASSES\_ROOT Key</span></span>

<span data-ttu-id="92b76-105">Ключ **\_ \_ корневых классов hKey** (**HKCR**) содержит сопоставления расширения имени файла и сведения о регистрации класса COM, такие как [ProgID](../com/-progid--key.md), [CLSID](../com/clsid-key-hklm.md)и [идентификаторов IID](../com/interface-key.md).</span><span class="sxs-lookup"><span data-stu-id="92b76-105">The **HKEY\_CLASSES\_ROOT** (**HKCR**) key contains file name extension associations and COM class registration information such as [ProgIDs](../com/-progid--key.md), [CLSIDs](../com/clsid-key-hklm.md), and [IIDs](../com/interface-key.md).</span></span> <span data-ttu-id="92b76-106">В основном она предназначена для обеспечения совместимости с реестром в 16-разрядных версиях Windows.</span><span class="sxs-lookup"><span data-stu-id="92b76-106">It is primarily intended for compatibility with the registry in 16-bit Windows.</span></span>

<span data-ttu-id="92b76-107">Сведения о регистрации класса и расширении имени файла хранятся как на **\_ локальном \_ компьютере hKey** , так и в разделе реестра **hKey для \_ текущих \_ пользователей** .</span><span class="sxs-lookup"><span data-stu-id="92b76-107">Class registration and file name extension information is stored under both the **HKEY\_LOCAL\_MACHINE** and **HKEY\_CURRENT\_USER** keys.</span></span> <span data-ttu-id="92b76-108">Ключ **\_ \_ \\ \\ классов программного обеспечения для локального компьютера hKey** содержит параметры по умолчанию, которые могут применяться ко всем пользователям на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="92b76-108">The **HKEY\_LOCAL\_MACHINE\\Software\\Classes** key contains default settings that can apply to all users on the local computer.</span></span> <span data-ttu-id="92b76-109">Ключ **" \_ \_ классы текущего \\ пользовательского \\ программного обеспечения hKey** " содержит параметры, которые применяются только к интерактивному пользователю.</span><span class="sxs-lookup"><span data-stu-id="92b76-109">The **HKEY\_CURRENT\_USER\\Software\\Classes** key contains settings that apply only to the interactive user.</span></span> <span data-ttu-id="92b76-110">**\_ \_ Корневой ключ классов hKey** предоставляет представление реестра, которое объединяет информацию из этих двух источников.</span><span class="sxs-lookup"><span data-stu-id="92b76-110">The **HKEY\_CLASSES\_ROOT** key provides a view of the registry that merges the information from these two sources.</span></span> <span data-ttu-id="92b76-111">**HKey \_ \_Корневой каталог классов** также предоставляет объединенное представление для приложений, предназначенных для предыдущих версий Windows.</span><span class="sxs-lookup"><span data-stu-id="92b76-111">**HKEY\_CLASSES\_ROOT** also provides this merged view for applications designed for previous versions of Windows.</span></span>

<span data-ttu-id="92b76-112">Параметры, определяемые пользователем, имеют приоритет над параметрами по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="92b76-112">The user-specific settings have priority over the default settings.</span></span> <span data-ttu-id="92b76-113">Например, параметр по умолчанию может указывать конкретное приложение для работы с Doc-файлами.</span><span class="sxs-lookup"><span data-stu-id="92b76-113">For example, the default setting might specify a particular application to handle .doc files.</span></span> <span data-ttu-id="92b76-114">Но пользователь может переопределить этот параметр, указав другое приложение в реестре.</span><span class="sxs-lookup"><span data-stu-id="92b76-114">But a user can override this setting by specifying a different application in the registry.</span></span>

<span data-ttu-id="92b76-115">Функции реестра, такие как [**RegOpenKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regopenkeyexa) или [**процедура RegQueryValueEx**](/windows/desktop/api/Winreg/nf-winreg-regqueryvalueexa) , позволяют указать **\_ \_ корневой ключ классов hKey** .</span><span class="sxs-lookup"><span data-stu-id="92b76-115">Registry functions such as [**RegOpenKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regopenkeyexa) or [**RegQueryValueEx**](/windows/desktop/api/Winreg/nf-winreg-regqueryvalueexa) allow you to specify the **HKEY\_CLASSES\_ROOT** key.</span></span> <span data-ttu-id="92b76-116">При вызове этих функций из процесса, выполняемого в интерактивной учетной записи пользователя, система объединяет параметры по умолчанию в **\_ \_ \\ \\ классах программного обеспечения локального компьютера в hKey** с параметрами интерактивного пользователя в **hKey \_ \_ \\ \\**.</span><span class="sxs-lookup"><span data-stu-id="92b76-116">When you call these functions from a process running in the interactive user account, the system merges the default settings in **HKEY\_LOCAL\_MACHINE\\Software\\Classes** with the interactive user's settings at **HKEY\_CURRENT\_USER\\Software\\Classes**.</span></span> <span data-ttu-id="92b76-117">Дополнительные сведения о слиянии этих параметров см. в разделе [объединенное представление \_ \_ корня классов hKey](merged-view-of-hkey-classes-root.md).</span><span class="sxs-lookup"><span data-stu-id="92b76-117">For more information on how these settings are merged, see [Merged View of HKEY\_CLASSES\_ROOT](merged-view-of-hkey-classes-root.md).</span></span>

<span data-ttu-id="92b76-118">Чтобы изменить параметры для интерактивного пользователя, храните изменения в разделе **hKey \_ Current \_ user \\ Software \\ Classes** , а не в **\_ \_ корневых классах hKey**.</span><span class="sxs-lookup"><span data-stu-id="92b76-118">To change the settings for the interactive user, store the changes under **HKEY\_CURRENT\_USER\\Software\\Classes** rather than **HKEY\_CLASSES\_ROOT**.</span></span>

<span data-ttu-id="92b76-119">Чтобы изменить параметры по умолчанию, сохраните изменения в **разделе \_ \_ \\ \\ классы программного обеспечения для локального компьютера hKey**.</span><span class="sxs-lookup"><span data-stu-id="92b76-119">To change the default settings, store the changes under **HKEY\_LOCAL\_MACHINE\\Software\\Classes**.</span></span> <span data-ttu-id="92b76-120">Если вы записываете ключи в ключ **в \_ \_ корневом каталоге hKey classes**, система сохраняет информацию в разделе **\_ \_ \\ \\ классы программного обеспечения локального компьютера hKey**.</span><span class="sxs-lookup"><span data-stu-id="92b76-120">If you write keys to a key under **HKEY\_CLASSES\_ROOT**, the system stores the information under **HKEY\_LOCAL\_MACHINE\\Software\\Classes**.</span></span> <span data-ttu-id="92b76-121">Если вы записываете значения в ключ **в \_ \_ корневой папке classes**, а ключ уже существует в разделе Классы **\_ текущего \_ пользовательского \\ программного обеспечения \\ hKey**, система сохранит там информацию, а не в разделе **\_ \_ \\ \\ классы программного обеспечения локального компьютера hKey**.</span><span class="sxs-lookup"><span data-stu-id="92b76-121">If you write values to a key under **HKEY\_CLASSES\_ROOT**, and the key already exists under **HKEY\_CURRENT\_USER\\Software\\Classes**, the system will store the information there instead of under **HKEY\_LOCAL\_MACHINE\\Software\\Classes**.</span></span>

<span data-ttu-id="92b76-122">Процессы, выполняющиеся в контексте безопасности, отличном от текущего пользователя, не должны использовать **\_ \_ корневой ключ классов hKey** с функциями реестра.</span><span class="sxs-lookup"><span data-stu-id="92b76-122">Processes running in a security context other than that of the interactive user should not use the **HKEY\_CLASSES\_ROOT** key with the registry functions.</span></span> <span data-ttu-id="92b76-123">Вместо этого такие процессы могут явно открыть ключ **\_ \_ \\ \\ классов программного обеспечения для локального компьютера hKey** , чтобы получить доступ к параметрам по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="92b76-123">Instead, such processes can explicitly open the **HKEY\_LOCAL\_MACHINE\\Software\\Classes** key to access the default settings.</span></span> <span data-ttu-id="92b76-124">Чтобы открыть раздел реестра, который объединяет содержимое **\_ \_ \\ \\ классов программного обеспечения локального компьютера hKey** с параметрами указанного пользователя, эти процессы могут вызывать функцию [**регопенусерклассесрут**](/windows/desktop/api/Winreg/nf-winreg-regopenuserclassesroot) .</span><span class="sxs-lookup"><span data-stu-id="92b76-124">To open a registry key that merges the contents of **HKEY\_LOCAL\_MACHINE\\Software\\Classes** with the settings for a specified user, these processes can call the [**RegOpenUserClassesRoot**](/windows/desktop/api/Winreg/nf-winreg-regopenuserclassesroot) function.</span></span> <span data-ttu-id="92b76-125">Например, поток, [олицетворяющий](/windows/desktop/SecAuthZ/client-impersonation) клиент, может вызвать **регопенусерклассесрут** , если ему нужно получить объединенное представление для олицетворенного клиента.</span><span class="sxs-lookup"><span data-stu-id="92b76-125">For example, a thread that is [impersonating](/windows/desktop/SecAuthZ/client-impersonation) a client can call **RegOpenUserClassesRoot** if it needs to retrieve a merged view for the client being impersonated.</span></span> <span data-ttu-id="92b76-126">Обратите внимание, что **регопенусерклассесрут** завершается ошибкой, если профиль пользователя для указанного пользователя не был загружен.</span><span class="sxs-lookup"><span data-stu-id="92b76-126">Note that **RegOpenUserClassesRoot** fails if the user profile for the specified user has not been loaded.</span></span> <span data-ttu-id="92b76-127">Система автоматически загружает профиль для интерактивного пользователя при входе в систему.</span><span class="sxs-lookup"><span data-stu-id="92b76-127">The system automatically loads the profile for the interactive user when logging on.</span></span> <span data-ttu-id="92b76-128">Для других пользователей необходимо вызвать функцию [**LoadUserProfile**](/windows/win32/api/userenv/nf-userenv-loaduserprofilea) для явной загрузки профиля пользователя.</span><span class="sxs-lookup"><span data-stu-id="92b76-128">For other users, you need to call the [**LoadUserProfile**](/windows/win32/api/userenv/nf-userenv-loaduserprofilea) function to explicitly load the user's profile.</span></span>

<span data-ttu-id="92b76-129">Если приложение запускается с правами администратора, а контроль учетных записей отключен, среда выполнения COM игнорирует конфигурацию COM для каждого пользователя и обращается только к конфигурации COM для каждого компьютера.</span><span class="sxs-lookup"><span data-stu-id="92b76-129">If an application is run with administrator rights and User Account Control is disabled, the COM runtime ignores the per-user COM configuration and accesses only the per-machine COM configuration.</span></span> <span data-ttu-id="92b76-130">Приложения, для которых требуются права администратора, должны регистрировать зависимые COM-объекты во время установки в хранилище конфигураций COM для каждого компьютера (**hKey, \_ \_ \\ \\ классы программного обеспечения для локального компьютера**).</span><span class="sxs-lookup"><span data-stu-id="92b76-130">Applications that require administrator rights should register dependent COM objects during installation to the per-machine COM configuration store (**HKEY\_LOCAL\_MACHINE\\Software\\Classes**).</span></span> <span data-ttu-id="92b76-131">Дополнительные сведения см. в разделе [AC: UAC: конфигурация Per-User com](/previous-versions/bb756926(v=msdn.10)).</span><span class="sxs-lookup"><span data-stu-id="92b76-131">For more information, see [AC: UAC: COM Per-User Configuration](/previous-versions/bb756926(v=msdn.10)).</span></span>

<span data-ttu-id="92b76-132">**Windows Server 2003 и Windows XP/2000:** Приложения могут регистрировать зависимые COM-объекты в хранилище конфигураций COM на уровне компьютера или на уровне пользователя (в **\_ \_ \\ \\ классе "программное обеспечение локального компьютера** " или в **hKey \_ текущих \_ пользовательских \\ \\ классов**).</span><span class="sxs-lookup"><span data-stu-id="92b76-132">**Windows Server 2003 and Windows XP/2000:** Applications can register dependent COM objects to either the per-machine or per-user COM configuration store (**HKEY\_LOCAL\_MACHINE\\Software\\Classes** or **HKEY\_CURRENT\_USER\\Software\\Classes**).</span></span>

## <a name="related-topics"></a><span data-ttu-id="92b76-133">См. также</span><span class="sxs-lookup"><span data-stu-id="92b76-133">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="92b76-134">[\_Корневой узел классов hKey \_ (Справочник по реестру набора ресурсов)](/previous-versions/windows/it-pro/windows-server-2003/cc739822(v=ws.10))</span><span class="sxs-lookup"><span data-stu-id="92b76-134">[HKEY\_CLASSES\_ROOT (Resource Kit Registry Reference)](/previous-versions/windows/it-pro/windows-server-2003/cc739822(v=ws.10))</span></span>
</dt> </dl>

 

 
