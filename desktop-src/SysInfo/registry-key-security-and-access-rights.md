---
description: Модель безопасности Windows позволяет управлять доступом к разделам реестра. Дополнительные сведения о безопасности см. в разделе Модель Access-Control.
ms.assetid: 266d5c8e-1bcd-48e5-bc06-2fbc956d8658
title: Безопасность раздела реестра и права доступа
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 73c80f21d296a88425024745d7442847a187cd43
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105663496"
---
# <a name="registry-key-security-and-access-rights"></a><span data-ttu-id="0c674-104">Безопасность раздела реестра и права доступа</span><span class="sxs-lookup"><span data-stu-id="0c674-104">Registry Key Security and Access Rights</span></span>

<span data-ttu-id="0c674-105">Модель безопасности Windows позволяет управлять доступом к разделам реестра.</span><span class="sxs-lookup"><span data-stu-id="0c674-105">The Windows security model enables you to control access to registry keys.</span></span> <span data-ttu-id="0c674-106">Дополнительные сведения о безопасности см. в разделе [модель управления доступом](/windows/desktop/SecAuthZ/access-control-model).</span><span class="sxs-lookup"><span data-stu-id="0c674-106">For more information about security, see [Access-Control Model](/windows/desktop/SecAuthZ/access-control-model).</span></span>

<span data-ttu-id="0c674-107">При вызове функции [**регкреатекэйекс**](/windows/desktop/api/Winreg/nf-winreg-regcreatekeyexa) или [**регсеткэйсекурити**](/windows/desktop/api/winreg/nf-winreg-regsetkeysecurity) можно указать [дескриптор безопасности](/windows/desktop/SecAuthZ/security-descriptors) для раздела реестра.</span><span class="sxs-lookup"><span data-stu-id="0c674-107">You can specify a [security descriptor](/windows/desktop/SecAuthZ/security-descriptors) for a registry key when you call the [**RegCreateKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regcreatekeyexa) or [**RegSetKeySecurity**](/windows/desktop/api/winreg/nf-winreg-regsetkeysecurity) function.</span></span> <span data-ttu-id="0c674-108">Если указано **значение NULL**, ключ получает дескриптор безопасности по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="0c674-108">If you specify **NULL**, the key gets a default security descriptor.</span></span> <span data-ttu-id="0c674-109">Списки управления доступом в дескрипторе безопасности по умолчанию для ключа наследуются от его прямого родительского ключа.</span><span class="sxs-lookup"><span data-stu-id="0c674-109">The ACLs in a default security descriptor for a key are inherited from its direct parent key.</span></span>

<span data-ttu-id="0c674-110">Чтобы получить дескриптор безопасности раздела реестра, вызовите функцию [**регжеткэйсекурити**](/windows/desktop/api/winreg/nf-winreg-reggetkeysecurity), [**жетнамедсекуритинфо**](/windows/desktop/api/aclapi/nf-aclapi-getnamedsecurityinfoa)или [**жетсекуритинфо**](/windows/desktop/api/aclapi/nf-aclapi-getsecurityinfo) .</span><span class="sxs-lookup"><span data-stu-id="0c674-110">To get the security descriptor of a registry key, call the [**RegGetKeySecurity**](/windows/desktop/api/winreg/nf-winreg-reggetkeysecurity), [**GetNamedSecurityInfo**](/windows/desktop/api/aclapi/nf-aclapi-getnamedsecurityinfoa), or [**GetSecurityInfo**](/windows/desktop/api/aclapi/nf-aclapi-getsecurityinfo) function.</span></span>

<span data-ttu-id="0c674-111">Допустимые права доступа к разделам реестра включают разрешения на удаление, чтение \_ , запись \_ DAC и запись \_ [права доступа](/windows/desktop/SecAuthZ/standard-access-rights)владельца.</span><span class="sxs-lookup"><span data-stu-id="0c674-111">The valid access rights for registry keys include the DELETE, READ\_CONTROL, WRITE\_DAC, and WRITE\_OWNER [standard access rights](/windows/desktop/SecAuthZ/standard-access-rights).</span></span> <span data-ttu-id="0c674-112">Разделы реестра не поддерживают стандартную СИНХРОНИЗАЦИю прав доступа.</span><span class="sxs-lookup"><span data-stu-id="0c674-112">Registry keys do not support the SYNCHRONIZE standard access right.</span></span>

<span data-ttu-id="0c674-113">В следующей таблице перечислены определенные права доступа для объектов разделов реестра.</span><span class="sxs-lookup"><span data-stu-id="0c674-113">The following table lists the specific access rights for registry key objects.</span></span>



| <span data-ttu-id="0c674-114">Значение</span><span class="sxs-lookup"><span data-stu-id="0c674-114">Value</span></span>                                         | <span data-ttu-id="0c674-115">Значение</span><span class="sxs-lookup"><span data-stu-id="0c674-115">Meaning</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|-----------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="0c674-116">КЛЮЧЕВОЙ \_ полный \_ доступ (0xF003F)</span><span class="sxs-lookup"><span data-stu-id="0c674-116">KEY\_ALL\_ACCESS (0xF003F)</span></span><br/>         | <span data-ttu-id="0c674-117">Объединяет стандартные \_ права \_ , значение ключевого \_ запроса \_ , значение ключевого \_ набора \_ , ключ \_ создания \_ \_ подключа, ключ \_ перечисления \_ \_ подразделов, ключевые \_ уведомления и ключевые \_ \_ права доступа для создания ссылок.</span><span class="sxs-lookup"><span data-stu-id="0c674-117">Combines the STANDARD\_RIGHTS\_REQUIRED, KEY\_QUERY\_VALUE, KEY\_SET\_VALUE, KEY\_CREATE\_SUB\_KEY, KEY\_ENUMERATE\_SUB\_KEYS, KEY\_NOTIFY, and KEY\_CREATE\_LINK access rights.</span></span><br/>                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="0c674-118">\_Ссылка для создания ключа \_ (0x0020)</span><span class="sxs-lookup"><span data-stu-id="0c674-118">KEY\_CREATE\_LINK (0x0020)</span></span><br/>         | <span data-ttu-id="0c674-119">Зарезервировано для системного использования.</span><span class="sxs-lookup"><span data-stu-id="0c674-119">Reserved for system use.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="0c674-120">КЛЮЧ \_ создания \_ \_ подраздела (0x0004)</span><span class="sxs-lookup"><span data-stu-id="0c674-120">KEY\_CREATE\_SUB\_KEY (0x0004)</span></span><br/>     | <span data-ttu-id="0c674-121">Требуется для создания подраздела раздела реестра.</span><span class="sxs-lookup"><span data-stu-id="0c674-121">Required to create a subkey of a registry key.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="0c674-122">КЛЮЧ, \_ Перечисление \_ вложенных \_ ключей (0x0008)</span><span class="sxs-lookup"><span data-stu-id="0c674-122">KEY\_ENUMERATE\_SUB\_KEYS (0x0008)</span></span><br/> | <span data-ttu-id="0c674-123">Требуется для перечисления подразделов раздела реестра.</span><span class="sxs-lookup"><span data-stu-id="0c674-123">Required to enumerate the subkeys of a registry key.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="0c674-124">\_Выполнение ключа (0x20019)</span><span class="sxs-lookup"><span data-stu-id="0c674-124">KEY\_EXECUTE (0x20019)</span></span><br/>             | <span data-ttu-id="0c674-125">Эквивалентно Read для ключа \_ .</span><span class="sxs-lookup"><span data-stu-id="0c674-125">Equivalent to KEY\_READ.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="0c674-126">\_Уведомление Key (0x0010)</span><span class="sxs-lookup"><span data-stu-id="0c674-126">KEY\_NOTIFY (0x0010)</span></span><br/>               | <span data-ttu-id="0c674-127">Требуется для запроса уведомлений об изменениях для раздела реестра или подразделов раздела реестра.</span><span class="sxs-lookup"><span data-stu-id="0c674-127">Required to request change notifications for a registry key or for subkeys of a registry key.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="0c674-128">Значение КЛЮЧЕВого \_ запроса \_ (0x0001)</span><span class="sxs-lookup"><span data-stu-id="0c674-128">KEY\_QUERY\_VALUE (0x0001)</span></span><br/>         | <span data-ttu-id="0c674-129">Требуется для запроса значений раздела реестра.</span><span class="sxs-lookup"><span data-stu-id="0c674-129">Required to query the values of a registry key.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="0c674-130">\_Чтение ключа (0x20019)</span><span class="sxs-lookup"><span data-stu-id="0c674-130">KEY\_READ (0x20019)</span></span><br/>                | <span data-ttu-id="0c674-131">Объединяет стандартные \_ права на \_ чтение, \_ значение ключа запроса \_ , ключевые \_ разделы перечисления \_ \_ и ключевые \_ уведомления.</span><span class="sxs-lookup"><span data-stu-id="0c674-131">Combines the STANDARD\_RIGHTS\_READ, KEY\_QUERY\_VALUE, KEY\_ENUMERATE\_SUB\_KEYS, and KEY\_NOTIFY values.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="0c674-132">\_Значение набора ключей \_ (0x0002)</span><span class="sxs-lookup"><span data-stu-id="0c674-132">KEY\_SET\_VALUE (0x0002)</span></span><br/>           | <span data-ttu-id="0c674-133">Требуется для создания, удаления или установки значения реестра.</span><span class="sxs-lookup"><span data-stu-id="0c674-133">Required to create, delete, or set a registry value.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="0c674-134">КЛЮЧ \_ WOW64 \_ 32KEY (0x0200)</span><span class="sxs-lookup"><span data-stu-id="0c674-134">KEY\_WOW64\_32KEY (0x0200)</span></span><br/>         | <span data-ttu-id="0c674-135">Указывает, что приложение в 64-разрядной версии Windows должно выполняться в представлении реестра с 32-битным.</span><span class="sxs-lookup"><span data-stu-id="0c674-135">Indicates that an application on 64-bit Windows should operate on the 32-bit registry view.</span></span> <span data-ttu-id="0c674-136">Этот флаг игнорируется в 32-разрядных Windows.</span><span class="sxs-lookup"><span data-stu-id="0c674-136">This flag is ignored by 32-bit Windows.</span></span> <span data-ttu-id="0c674-137">Дополнительные сведения см. [в разделе доступ к альтернативному представлению реестра](/windows/desktop/WinProg64/accessing-an-alternate-registry-view).</span><span class="sxs-lookup"><span data-stu-id="0c674-137">For more information, see [Accessing an Alternate Registry View](/windows/desktop/WinProg64/accessing-an-alternate-registry-view).</span></span><br/> <span data-ttu-id="0c674-138">Этот флаг необходимо сочетать с оператором или с другими флагами в этой таблице, которые запрашивают или обращаются к значениям реестра.</span><span class="sxs-lookup"><span data-stu-id="0c674-138">This flag must be combined using the OR operator with the other flags in this table that either query or access registry values.</span></span><br/> <span data-ttu-id="0c674-139">**Windows 2000:** Этот флаг не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="0c674-139">**Windows 2000:** This flag is not supported.</span></span><br/> |
| <span data-ttu-id="0c674-140">КЛЮЧ \_ WOW64 \_ 64KEY (0x0100)</span><span class="sxs-lookup"><span data-stu-id="0c674-140">KEY\_WOW64\_64KEY (0x0100)</span></span><br/>         | <span data-ttu-id="0c674-141">Указывает, что приложение в 64-разрядной версии Windows должно выполняться в представлении реестра с 64-битным.</span><span class="sxs-lookup"><span data-stu-id="0c674-141">Indicates that an application on 64-bit Windows should operate on the 64-bit registry view.</span></span> <span data-ttu-id="0c674-142">Этот флаг игнорируется в 32-разрядных Windows.</span><span class="sxs-lookup"><span data-stu-id="0c674-142">This flag is ignored by 32-bit Windows.</span></span> <span data-ttu-id="0c674-143">Дополнительные сведения см. [в разделе доступ к альтернативному представлению реестра](/windows/desktop/WinProg64/accessing-an-alternate-registry-view).</span><span class="sxs-lookup"><span data-stu-id="0c674-143">For more information, see [Accessing an Alternate Registry View](/windows/desktop/WinProg64/accessing-an-alternate-registry-view).</span></span><br/> <span data-ttu-id="0c674-144">Этот флаг необходимо сочетать с оператором или с другими флагами в этой таблице, которые запрашивают или обращаются к значениям реестра.</span><span class="sxs-lookup"><span data-stu-id="0c674-144">This flag must be combined using the OR operator with the other flags in this table that either query or access registry values.</span></span><br/> <span data-ttu-id="0c674-145">**Windows 2000:** Этот флаг не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="0c674-145">**Windows 2000:** This flag is not supported.</span></span><br/> |
| <span data-ttu-id="0c674-146">\_Запись ключа (0x20006)</span><span class="sxs-lookup"><span data-stu-id="0c674-146">KEY\_WRITE (0x20006)</span></span><br/>               | <span data-ttu-id="0c674-147">Объединяет стандартные права \_ \_ доступа на запись, \_ значение набора ключей \_ и ключ \_ создания \_ \_ подключа.</span><span class="sxs-lookup"><span data-stu-id="0c674-147">Combines the STANDARD\_RIGHTS\_WRITE, KEY\_SET\_VALUE, and KEY\_CREATE\_SUB\_KEY access rights.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                            |



 

<span data-ttu-id="0c674-148">При вызове функции [**RegOpenKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regopenkeyexa) система проверяет запрошенные права доступа к дескриптору безопасности ключа.</span><span class="sxs-lookup"><span data-stu-id="0c674-148">When you call the [**RegOpenKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regopenkeyexa) function, the system checks the requested access rights against the key's security descriptor.</span></span> <span data-ttu-id="0c674-149">Если пользователь не имеет правильного доступа к разделу реестра, операция открытия завершается ошибкой.</span><span class="sxs-lookup"><span data-stu-id="0c674-149">If the user does not have the correct access to the registry key, the open operation fails.</span></span> <span data-ttu-id="0c674-150">Если администратору требуется доступ к ключу, решение заключается в том, чтобы включить \_ \_ привилегию SE Take Ownership \_ Name и открыть раздел реестра с доступом на запись \_ владельца.</span><span class="sxs-lookup"><span data-stu-id="0c674-150">If an administrator needs access to the key, the solution is to enable the SE\_TAKE\_OWNERSHIP\_NAME privilege and open the registry key with WRITE\_OWNER access.</span></span> <span data-ttu-id="0c674-151">Дополнительные сведения см. в разделе [Включение и отключение привилегий](/windows/desktop/SecAuthZ/enabling-and-disabling-privileges-in-c--).</span><span class="sxs-lookup"><span data-stu-id="0c674-151">For more information, see [Enabling and Disabling Privileges](/windows/desktop/SecAuthZ/enabling-and-disabling-privileges-in-c--).</span></span>

<span data-ttu-id="0c674-152">Можно запросить право доступа к \_ системе \_ безопасности системы доступа к разделу реестра, если требуется прочитать или записать системный список управления доступом (SACL) ключа.</span><span class="sxs-lookup"><span data-stu-id="0c674-152">You can request the ACCESS\_SYSTEM\_SECURITY access right to a registry key if you want to read or write the key's system access control list (SACL).</span></span> <span data-ttu-id="0c674-153">Дополнительные сведения см. в разделе [списки управления доступом (ACL)](/windows/desktop/SecAuthZ/access-control-lists) и [права доступа к спискам SACL](/windows/desktop/SecAuthZ/sacl-access-right).</span><span class="sxs-lookup"><span data-stu-id="0c674-153">For more information, see [Access-Control Lists (ACLs)](/windows/desktop/SecAuthZ/access-control-lists) and [SACL Access Right](/windows/desktop/SecAuthZ/sacl-access-right).</span></span>

<span data-ttu-id="0c674-154">Чтобы просмотреть текущие права доступа для ключа, включая стандартные разделы, используйте редактор реестра (Regedt32.exe).</span><span class="sxs-lookup"><span data-stu-id="0c674-154">To view the current access rights for a key, including the predefined keys, use the Registry Editor (Regedt32.exe).</span></span> <span data-ttu-id="0c674-155">После перехода к нужному ключу перейдите в меню **Правка** и выберите **разрешения**.</span><span class="sxs-lookup"><span data-stu-id="0c674-155">After navigating to the desired key, go to the **Edit** menu and select **Permissions**.</span></span>

 

