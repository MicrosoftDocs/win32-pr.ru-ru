---
description: Приложения могут сохранить часть реестра в файле, а затем загрузить содержимое файла обратно в реестр.
ms.assetid: a71a564d-934a-46e8-b555-989a6fa82337
title: Файлы реестра
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 44916618946f6541495186aa5843799c9b864fbc
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103998675"
---
# <a name="registry-files"></a><span data-ttu-id="865cf-103">Файлы реестра</span><span class="sxs-lookup"><span data-stu-id="865cf-103">Registry Files</span></span>

<span data-ttu-id="865cf-104">Приложения могут сохранить часть реестра в файле, а затем загрузить содержимое файла обратно в реестр.</span><span class="sxs-lookup"><span data-stu-id="865cf-104">Applications can save part of the registry in a file and then load the contents of the file back into the registry.</span></span> <span data-ttu-id="865cf-105">Файл реестра полезен при управлении большим объемом данных, при выполнении множества записей в реестре или при передаче данных, а также при повторной выгрузке.</span><span class="sxs-lookup"><span data-stu-id="865cf-105">A registry file is useful when a large amount of data is being manipulated, when many entries are being made in the registry, or when the data is transitory and must be loaded and then unloaded again.</span></span> <span data-ttu-id="865cf-106">Приложения, которые архивируются и восстанавливают части реестра, скорее всего, используют файлы реестра.</span><span class="sxs-lookup"><span data-stu-id="865cf-106">Applications that back up and restore parts of the registry are likely to use registry files.</span></span>

<span data-ttu-id="865cf-107">Чтобы сохранить ключ и его подразделы и значения в файле реестра, приложение может вызвать функцию [**регсавекэй**](/windows/desktop/api/Winreg/nf-winreg-regsavekeya) или [**регсавекэйекс**](/windows/desktop/api/Winreg/nf-winreg-regsavekeyexa) .</span><span class="sxs-lookup"><span data-stu-id="865cf-107">To save a key and its subkeys and values to a registry file, an application can call the [**RegSaveKey**](/windows/desktop/api/Winreg/nf-winreg-regsavekeya) or [**RegSaveKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regsavekeyexa) function.</span></span>

<span data-ttu-id="865cf-108">[**Регсавекэй**](/windows/desktop/api/Winreg/nf-winreg-regsavekeya) и [**регсавекэйекс**](/windows/desktop/api/Winreg/nf-winreg-regsavekeyexa) создают файл с атрибутом Archive.</span><span class="sxs-lookup"><span data-stu-id="865cf-108">[**RegSaveKey**](/windows/desktop/api/Winreg/nf-winreg-regsavekeya) and [**RegSaveKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regsavekeyexa) create the file with the archive attribute.</span></span> <span data-ttu-id="865cf-109">Файл создается в текущем каталоге процесса для локального ключа и в каталоге% systemroot% \\ system32 удаленного ключа.</span><span class="sxs-lookup"><span data-stu-id="865cf-109">The file is created in the current directory of the process for a local key, and in the %systemroot%\\system32 directory for a remote key.</span></span>

<span data-ttu-id="865cf-110">Файлы реестра имеют два следующих формата: Standard и latest.</span><span class="sxs-lookup"><span data-stu-id="865cf-110">Registry files have the following two formats: standard and latest.</span></span> <span data-ttu-id="865cf-111">Стандартный формат — единственный формат, поддерживаемый Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="865cf-111">The standard format is the only format supported by Windows 2000.</span></span> <span data-ttu-id="865cf-112">Кроме того, она поддерживается в более поздних версиях Windows для обеспечения обратной совместимости.</span><span class="sxs-lookup"><span data-stu-id="865cf-112">It is also supported by later versions of Windows for backward compatibility.</span></span> <span data-ttu-id="865cf-113">[**Регсавекэй**](/windows/desktop/api/Winreg/nf-winreg-regsavekeya) создает файлы в стандартном формате.</span><span class="sxs-lookup"><span data-stu-id="865cf-113">[**RegSaveKey**](/windows/desktop/api/Winreg/nf-winreg-regsavekeya) creates files in the standard format.</span></span>

<span data-ttu-id="865cf-114">Последний формат поддерживается начиная с Windows XP.</span><span class="sxs-lookup"><span data-stu-id="865cf-114">The latest format is supported starting with Windows XP.</span></span> <span data-ttu-id="865cf-115">Файлы реестра, созданные в этом формате, не могут быть загружены в Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="865cf-115">Registry files that are created in this format cannot be loaded on Windows 2000.</span></span> <span data-ttu-id="865cf-116">[**Регсавекэйекс**](/windows/desktop/api/Winreg/nf-winreg-regsavekeyexa) может сохранять файлы реестра в любом формате, указывая \_ стандартный формат REG \_ или \_ последний формат REG \_ .</span><span class="sxs-lookup"><span data-stu-id="865cf-116">[**RegSaveKeyEx**](/windows/desktop/api/Winreg/nf-winreg-regsavekeyexa) can save registry files in either format by specifying either REG\_STANDARD\_FORMAT or REG\_LATEST\_FORMAT.</span></span> <span data-ttu-id="865cf-117">Таким образом, его можно использовать для преобразования файлов реестра, использующих стандартный формат, в последний формат.</span><span class="sxs-lookup"><span data-stu-id="865cf-117">Therefore, it can be used to convert registry files that use the standard format to the latest format.</span></span>

<span data-ttu-id="865cf-118">Чтобы записать файл реестра обратно в реестр, приложение может использовать функции [**реглоадкэй**](/windows/desktop/api/Winreg/nf-winreg-regloadkeya), [**регреплацекэй**](/windows/desktop/api/Winreg/nf-winreg-regreplacekeya)или [**регресторекэй**](/windows/desktop/api/Winreg/nf-winreg-regrestorekeya) следующим образом.</span><span class="sxs-lookup"><span data-stu-id="865cf-118">To write the registry file back to the registry, an application can use the [**RegLoadKey**](/windows/desktop/api/Winreg/nf-winreg-regloadkeya), [**RegReplaceKey**](/windows/desktop/api/Winreg/nf-winreg-regreplacekeya), or [**RegRestoreKey**](/windows/desktop/api/Winreg/nf-winreg-regrestorekeya) functions as follows.</span></span>

-   <span data-ttu-id="865cf-119">**Реглоадкэй** загружает данные реестра из указанного файла в указанный подраздел в разделе **hKey \_ Users** или **hKey на \_ локальном \_** компьютере вызывающего приложения или на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="865cf-119">**RegLoadKey** loads registry data from a specified file into a specified subkey under **HKEY\_USERS** or **HKEY\_LOCAL\_MACHINE** on the calling application's computer or on a remote computer.</span></span> <span data-ttu-id="865cf-120">Функция создает указанный подраздел, если он еще не существует.</span><span class="sxs-lookup"><span data-stu-id="865cf-120">The function creates the specified subkey if it does not already exist.</span></span> <span data-ttu-id="865cf-121">После вызова этой функции приложение может использовать функцию [**регунлоадкэй**](/windows/desktop/api/Winreg/nf-winreg-regunloadkeya) для восстановления предыдущего состояния реестра.</span><span class="sxs-lookup"><span data-stu-id="865cf-121">After calling this function, an application can use the [**RegUnLoadKey**](/windows/desktop/api/Winreg/nf-winreg-regunloadkeya) function to restore the registry to its previous state.</span></span>
-   <span data-ttu-id="865cf-122">[**Регреплацекэй**](/windows/desktop/api/Winreg/nf-winreg-regreplacekeya) заменяет ключ и все его подразделы и значения в реестре данными, содержащимися в указанном файле.</span><span class="sxs-lookup"><span data-stu-id="865cf-122">[**RegReplaceKey**](/windows/desktop/api/Winreg/nf-winreg-regreplacekeya) replaces a key and all its subkeys and values in the registry with the data contained in a specified file.</span></span> <span data-ttu-id="865cf-123">Новые данные вступают в силу при следующем запуске системы.</span><span class="sxs-lookup"><span data-stu-id="865cf-123">The new data takes effect the next time the system is started.</span></span>
-   <span data-ttu-id="865cf-124">[**Регресторекэй**](/windows/desktop/api/Winreg/nf-winreg-regrestorekeya) загружает данные реестра из указанного файла в указанный ключ на компьютере вызывающего приложения или на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="865cf-124">[**RegRestoreKey**](/windows/desktop/api/Winreg/nf-winreg-regrestorekeya) loads registry data from a specified file into a specified key on the calling application's computer or on a remote computer.</span></span> <span data-ttu-id="865cf-125">Эта функция заменяет подразделы и значения, расположенные ниже указанного ключа, на подразделы и значения, которые следуют за ключом верхнего уровня в файле.</span><span class="sxs-lookup"><span data-stu-id="865cf-125">This function replaces the subkeys and values below the specified key with the subkeys and values that follow the top-level key in the file.</span></span>

<span data-ttu-id="865cf-126">Функция [**регконнектрегистри**](/windows/desktop/api/Winreg/nf-winreg-regconnectregistrya) устанавливает соединение с предопределенным маркером реестра на другом компьютере.</span><span class="sxs-lookup"><span data-stu-id="865cf-126">The [**RegConnectRegistry**](/windows/desktop/api/Winreg/nf-winreg-regconnectregistrya) function establishes a connection to a predefined registry handle on another computer.</span></span> <span data-ttu-id="865cf-127">Приложение использует эту функцию в основном для доступа к информации из удаленного реестра на других компьютерах в сетевой среде, что также можно сделать с помощью редактора реестра.</span><span class="sxs-lookup"><span data-stu-id="865cf-127">An application uses this function primarily to access information from a remote registry on other machines in a network environment, which you can also do by using the Registry Editor.</span></span> <span data-ttu-id="865cf-128">Для резервного копирования реестра или регулирования сетевого доступа к нему может потребоваться доступ к удаленному реестру.</span><span class="sxs-lookup"><span data-stu-id="865cf-128">You might want to access a remote registry to back up a registry or regulate network access to it.</span></span> <span data-ttu-id="865cf-129">Обратите внимание, что у вас должны быть соответствующие разрешения для доступа к удаленному реестру с помощью этой функции.</span><span class="sxs-lookup"><span data-stu-id="865cf-129">Note that you must have appropriate permissions to access a remote registry using this function.</span></span>

 

 



