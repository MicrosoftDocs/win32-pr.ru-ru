---
title: Последовательность вызовов API-интерфейса для запрашивающих сторон
description: Сведения о последовательности вызовов API-интерфейса для запрашивающих сторон. См. Обзор последовательности вызовов и Просмотр дополнительных доступных ресурсов.
ms.assetid: 83276783-aee5-43ac-982d-1144df982a7d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 49c93afea6dbf4c3220bbeaec4f6278eb3d0b756
ms.sourcegitcommit: b0ebdefc3dcd5c04bede94091833aa1015a2f95c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "103987900"
---
# <a name="supplicant-api-call-sequence"></a><span data-ttu-id="7895b-104">Последовательность вызовов API-интерфейса для запрашивающих сторон</span><span class="sxs-lookup"><span data-stu-id="7895b-104">Supplicant API Call Sequence</span></span>

<span data-ttu-id="7895b-105">В этом разделе содержится конкретная последовательность вызовов для API-интерфейса запрашивающего устройства.</span><span class="sxs-lookup"><span data-stu-id="7895b-105">This topic provides the specific call sequence for the supplicant API.</span></span>

## <a name="supplicant-api-call-sequence-overview"></a><span data-ttu-id="7895b-106">Обзор последовательности вызовов API-интерфейса для запрашивающих сторон</span><span class="sxs-lookup"><span data-stu-id="7895b-106">Supplicant API Call Sequence Overview</span></span>

<span data-ttu-id="7895b-107">Когда запрашивающий объект получает пакет EAP от поставщика, например точку доступа, обычно возникает следующий поток вызова API-интерфейса.</span><span class="sxs-lookup"><span data-stu-id="7895b-107">When the supplicant receives an EAP packet from a provider, such as an access point, the following supplicant API call flow typically occurs.</span></span>

-   <span data-ttu-id="7895b-108">Приложение вызывает [**еафостпирбегинсессион**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerbeginsession) с данными конфигурации EAPHost и данными пользователя.</span><span class="sxs-lookup"><span data-stu-id="7895b-108">The application calls [**EapHostPeerBeginSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerbeginsession) with EAPHost configuration data and user data.</span></span> <span data-ttu-id="7895b-109">Успешный вызов возвращает обработчик **сеанса \_ EAP \_** .</span><span class="sxs-lookup"><span data-stu-id="7895b-109">A successful call returns an **EAP\_SESSION\_HANDLE** session handle.</span></span>
-   <span data-ttu-id="7895b-110">Каждый пакет, полученный с помощью запрашивающего устройства, обрабатывается вызовом [**еафостпирпроцессрецеиведпаккет**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket).</span><span class="sxs-lookup"><span data-stu-id="7895b-110">Each packet received by the supplicant is processed by a call to [**EapHostPeerProcessReceivedPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket).</span></span> <span data-ttu-id="7895b-111">Затем запрашивающий объект вызывает функцию, соответствующую коду действия, возвращаемому функцией.</span><span class="sxs-lookup"><span data-stu-id="7895b-111">The supplicant then calls the function corresponding to the action code returned by the function.</span></span>
-   <span data-ttu-id="7895b-112">Если код действия — **еафостпирреспонсесенд**, то запрашивающий объект вызывает [**еафостпиржетсендпаккет**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetsendpacket) , чтобы получить ответ, отправляемый в средство проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="7895b-112">If the action code is **EapHostPeerResponseSend**, then the supplicant calls [**EapHostPeerGetSendPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetsendpacket) to obtain the response to be sent to the authenticator.</span></span>
-   <span data-ttu-id="7895b-113">Если во время сеанса код действия, возвращенный в качестве запрашивающего, является **еафостпирреспонсереспонд**, он указывает на доступность атрибутов EAP.</span><span class="sxs-lookup"><span data-stu-id="7895b-113">If during the session, the action code returned to the supplicant is **EapHostPeerResponseRespond**, it indicates that EAP attributes are available.</span></span> <span data-ttu-id="7895b-114">Затем этот запрашивающий объект вызывает [**еафостпиржетреспонсеаттрибутес**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresponseattributes) , чтобы получить их.</span><span class="sxs-lookup"><span data-stu-id="7895b-114">The supplicant then calls [**EapHostPeerGetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresponseattributes) to obtain them.</span></span> <span data-ttu-id="7895b-115">Эти атрибуты содержат дополнительные данные, используемые в процессе проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="7895b-115">These attributes contain supplemental data used during the authentication process.</span></span> <span data-ttu-id="7895b-116">После того как запрашивающая сторона завершит обработку атрибутов, он вызывает [**еафостпирсетреспонсеаттрибутес**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetresponseattributes) , который обновляет данные.</span><span class="sxs-lookup"><span data-stu-id="7895b-116">After supplicant completes processing the attributes it calls [**EapHostPeerSetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetresponseattributes) which updates the data.</span></span> <span data-ttu-id="7895b-117">Эта функция возвращает код действия, который определяет следующее действие вызывающего устройства.</span><span class="sxs-lookup"><span data-stu-id="7895b-117">This function returns an action code which determines the supplicant's next action.</span></span>
-   <span data-ttu-id="7895b-118">Если код действия **еафостпирреспонсеинвокеуи** , он создает диалоговое окно пользовательского интерфейса для получения интерактивных данных от пользователя, таких как учетные данные или сведения об удостоверении.</span><span class="sxs-lookup"><span data-stu-id="7895b-118">If the action code is **EapHostPeerResponseInvokeUI** the supplicant raises a user interface dialog to obtain interactive data from the user, such as credentials or identity information.</span></span> <span data-ttu-id="7895b-119">См. сведения о взаимодействии пользователей с потоком вызовов API для запрашивающих сторон.</span><span class="sxs-lookup"><span data-stu-id="7895b-119">See User Interaction with the Supplicant API Call Flow below.</span></span>
-   <span data-ttu-id="7895b-120">Если код действия — **еафостпирреспонсересулт**, это означает, что результаты сеанса проверки подлинности доступны для данного запрашивающего устройства.</span><span class="sxs-lookup"><span data-stu-id="7895b-120">If the action code is **EapHostPeerResponseResult**, it indicates that the results of the authentication session are available to the supplicant.</span></span> <span data-ttu-id="7895b-121">Затем этот запрашивающий объект вызывает [**еафостпиржетресулт**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresult) для получения результатов.</span><span class="sxs-lookup"><span data-stu-id="7895b-121">The supplicant then calls [**EapHostPeerGetResult**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresult) to obtain the results.</span></span> <span data-ttu-id="7895b-122">Независимо от того, указывают ли результаты на успех или сбой, запрашивающий объект вызывает [**еафостпирендсессион**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerendsession).</span><span class="sxs-lookup"><span data-stu-id="7895b-122">Regardless of whether the results indicate success or failure, the supplicant calls [**EapHostPeerEndSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerendsession).</span></span> <span data-ttu-id="7895b-123">В случае сбоя можно выполнить повторную проверку подлинности, открыв другой сеанс с EAPHost и предоставив новое удостоверение, или повторить попытку проверки подлинности с исходным удостоверением.</span><span class="sxs-lookup"><span data-stu-id="7895b-123">In the case of failure, re-authentication can be attempted by opening another session with EAPHost and providing a new identity, or attempting authentication with the original identity again.</span></span>

## <a name="user-interaction-with-the-supplicant-api-call-flow"></a><span data-ttu-id="7895b-124">Взаимодействие пользователя с потоком вызовов API-интерфейса для запрашивающих сторон</span><span class="sxs-lookup"><span data-stu-id="7895b-124">User Interaction with the Supplicant API Call Flow</span></span>

<span data-ttu-id="7895b-125">В некоторых случаях для продолжения процесса проверки подлинности запрашивающему пользователю необходимо получить сведения от пользователя.</span><span class="sxs-lookup"><span data-stu-id="7895b-125">In certain cases, the supplicant needs to obtain information from the user to continue the authentication process.</span></span>

<span data-ttu-id="7895b-126">В следующем списке показана последовательность вызовов в пользовательском интерфейсе и процессе вызова EAPHost, необходимых для включения интерактивного ввода.</span><span class="sxs-lookup"><span data-stu-id="7895b-126">The following list demonstrates the sequence of calls on the supplicant and EAPHost UI process necessary to enable interactive input.</span></span>

1.  <span data-ttu-id="7895b-127">Запрашивающий объект получает контекст текущего пользовательского интерфейса путем вызова [**еафостпиржетуиконтекст**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetuicontext).</span><span class="sxs-lookup"><span data-stu-id="7895b-127">The supplicant obtains the current user interface context by calling [**EapHostPeerGetUIContext**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetuicontext).</span></span>
2.  <span data-ttu-id="7895b-128">Затем запрашивающий объект отправляет данные контекста пользовательского интерфейса в процесс запрашивающего пользователя.</span><span class="sxs-lookup"><span data-stu-id="7895b-128">The supplicant then sends the UI context data to the supplicant UI process.</span></span>
    > [!Note]  
    > <span data-ttu-id="7895b-129">Процесс пользовательского интерфейса, который обычно собирает пользовательский интерфейс или обрабатывает интерактивный пользовательский интерфейс, отделен от процесса запрашивающего устройства.</span><span class="sxs-lookup"><span data-stu-id="7895b-129">The UI process, which typically collects UI or handles interactive UI, is separate from the supplicant process.</span></span> <span data-ttu-id="7895b-130">Разделение этих двух процессов не является требованием EAPHost, но это имеет преимущество, позволяя процессу пользовательского интерфейса взаимодействовать с рабочим столом.</span><span class="sxs-lookup"><span data-stu-id="7895b-130">Separating the two processes is not a requirement of EAPHost, but doing so has the advantage of allowing the UI process to interact with the desktop.</span></span>

     

3.  <span data-ttu-id="7895b-131">Если запрашивающая сторона хочет отобразить пользовательский интерфейс самостоятельно, он вызывает функцию [**еафостпиркуеринтерактивеуиинпутфиелдс**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) , чтобы получить поля ввода для вызова интерактивных компонентов пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="7895b-131">If the supplicant wants to render the UI by itself then it calls the [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) function to obtain the input fields for interactive UI components to be raised.</span></span> <span data-ttu-id="7895b-132">В противном случае он следует традиционной модели вызова интерактивного пользовательского интерфейса метода путем вызова [ **еафостпиринвокеинтерактивеуи**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui)</span><span class="sxs-lookup"><span data-stu-id="7895b-132">Otherwise, it follows the traditional model of invoking method interactive UI by calling [**EapHostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui)</span></span>
    > [!Note]  
    > <span data-ttu-id="7895b-133">Если [**возвращается \_ \_ \_ \_ \_ \_ неподдерживаемая операция метода протокола EAPHOST EAP E**](eap-related-error-and-information-constants.md) , то он должен следовать традиционной модели вызова интерактивного пользовательского интерфейса метода с помощью вызова [**еафостпиринвокеинтерактивеуи**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui).</span><span class="sxs-lookup"><span data-stu-id="7895b-133">If [**EAP\_E\_EAPHOST\_METHOD\_OPERATION\_NOT\_SUPPORTED**](eap-related-error-and-information-constants.md) is returned, the supplicant must follow the traditional model of invoking method interactive UI by calling [**EapHostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui).</span></span> <span data-ttu-id="7895b-134">При возникновении ошибки [**еафостпиркуеринтерактивеуиинпутфиелдс**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) вернет код возврата, отличный от **null**.</span><span class="sxs-lookup"><span data-stu-id="7895b-134">If there is an error, [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) will return a return code other than **NULL**.</span></span>

     

4.  <span data-ttu-id="7895b-135">Указывает, вызывает ли запрашивающий объект [**еафостпиркуеринтерактивеуиинпутфиелдс**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) или [**еафостпиринвокеинтерактивеуи**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui) , что процесс пользовательского интерфейса передает существующие данные контекста и загружает Eappcfg.dll.</span><span class="sxs-lookup"><span data-stu-id="7895b-135">Whether the supplicant calls [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) or [**EaphostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui) the UI process passes the existing context data and loads Eappcfg.dll.</span></span> <span data-ttu-id="7895b-136">Для накопления новых данных вызывается соответствующий пользовательский интерфейс.</span><span class="sxs-lookup"><span data-stu-id="7895b-136">Appropriate UI is raised to collect the new data.</span></span> <span data-ttu-id="7895b-137">Новые данные контекста пользовательского интерфейса, которые теперь могут содержать ввод данных пользователем, копируются, а старые данные контекста освобождаются с помощью вызова [**еаппирфримемори**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeerfreememory).</span><span class="sxs-lookup"><span data-stu-id="7895b-137">The new UI context data, which may now contain user input, is copied, and the old context data is released with a call to [**EapPeerFreeMemory**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeerfreememory).</span></span>
5.  <span data-ttu-id="7895b-138">Процесс пользовательского интерфейса возвращает новый контекст данных запрашивающему сторона, который вызывает [**еафостпирсетуиконтекст**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetuicontext) , чтобы задать его.</span><span class="sxs-lookup"><span data-stu-id="7895b-138">The UI process returns the new context data to the supplicant, which calls [**EapHostPeerSetUIContext**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetuicontext) to set it.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7895b-139">См. также</span><span class="sxs-lookup"><span data-stu-id="7895b-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7895b-140">Последовательность вызовов API однорангового метода</span><span class="sxs-lookup"><span data-stu-id="7895b-140">Peer Method API Call Sequence</span></span>](peer-method-api-call-sequence.md)
</dt> <dt>

[<span data-ttu-id="7895b-141">Последовательность вызовов API метода средства проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="7895b-141">Authenticator Method API Call Sequence</span></span>](authenticator-method-api-call-sequence.md)
</dt> <dt>

[<span data-ttu-id="7895b-142">Последовательность вызовов EAPHost</span><span class="sxs-lookup"><span data-stu-id="7895b-142">EAPHost Call Sequence</span></span>](about-eaphost-call-sequences.md)
</dt> <dt>

[<span data-ttu-id="7895b-143">EAPHost отправителей запросов</span><span class="sxs-lookup"><span data-stu-id="7895b-143">EAPHost Supplicants</span></span>](eaphost-supplicants.md)
</dt> </dl>

 

 




