---
title: Последовательность вызовов API метода средства проверки подлинности
description: Сведения о последовательности вызовов API метода средства проверки подлинности. См. список, демонстрирующий последовательность вызовов, сделанных с помощью EAPHost в методе проверки подлинности EAP.
ms.assetid: 4756300c-5e49-44e8-ab49-1993d780d2a3
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3bb5c7d64bfe6e38ebb97550dc76fe8ffcae8176
ms.sourcegitcommit: b0ebdefc3dcd5c04bede94091833aa1015a2f95c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "104413740"
---
# <a name="authenticator-method-api-call-sequence"></a><span data-ttu-id="b7ae2-104">Последовательность вызовов API метода средства проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="b7ae2-104">Authenticator Method API Call Sequence</span></span>

<span data-ttu-id="b7ae2-105">В этом разделе содержится конкретная последовательность вызовов для API метода средства проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-105">This topic provides the specific call sequence for the authenticator method API.</span></span> <span data-ttu-id="b7ae2-106">Во время обычного сеанса проверки подлинности EAP EAPHost выполняет ряд вызовов метода EAP, реализующих API-интерфейсы метода проверки подлинности EAPHost.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-106">During a typical EAP authentication session EAPHost makes a number of calls on an EAP method that implement the EAPHost authenticator method APIs.</span></span>

<span data-ttu-id="b7ae2-107">В следующем списке показана последовательность вызовов, выполненных с помощью EAPHost в методе проверки подлинности EAP.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-107">The following list demonstrates the sequence of calls made by EAPHost on an EAP authenticator method.</span></span>

-   <span data-ttu-id="b7ae2-108">Сначала EAP Authenticator загружает библиотеку DLL метода EAP, используемую для конкретной проверки подлинности на сервере политики сети (NPS) или другом сервере проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-108">The EAP authenticator first loads the EAP method DLL used for the specific authentication on a network policy server (NPS) or other authentication server.</span></span>
-   <span data-ttu-id="b7ae2-109">Вызывает [**еапаусентикаторжетинфо**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeergetinfo) для метода с заполненной структурой [**\_ типа EAP**](/windows/desktop/api/eaptypes/ns-eaptypes-eap_type) для получения списка указателей на функции, реализованные в библиотеке DLL.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-109">Calls [**EapAuthenticatorGetInfo**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeergetinfo) on the method with a populated [**EAP\_TYPE**](/windows/desktop/api/eaptypes/ns-eaptypes-eap_type) structure to obtain a list of pointers to functions implemented on the DLL.</span></span> <span data-ttu-id="b7ae2-110">Последующие вызовы функций, выполняемые методами проверки подлинности (Server), предполагаются для реализации в библиотеке DLL.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-110">Subsequent function calls by the authenticator methods (server) are assumed to be implemented on the DLL.</span></span>
-   <span data-ttu-id="b7ae2-111">Вызывает [**еапаусентикаторинитиализе**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeerinitialize) , чтобы указать библиотеке методов EAP подготовить по крайней мере один сеанс проверки подлинности с помощью этого метода проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-111">Calls [**EapAuthenticatorInitialize**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeerinitialize) to instruct the EAP method library to prepare for at least one authentication session using this authenticator method.</span></span>
-   <span data-ttu-id="b7ae2-112">Вызывает [**еапмесодаусентикаторбегинсессион**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorbeginsession) , чтобы установить уникальный сеанс проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-112">Calls [**EapMethodAuthenticatorBeginSession**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorbeginsession) to establish a unique authentication session.</span></span>
-   <span data-ttu-id="b7ae2-113">Повторяет следующие шаги, пока [**еапмесодаусентикаторрецеивепаккет**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorreceivepacket) не указывает, что результат проверки подлинности доступен.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-113">Repeats the following steps until [**EapMethodAuthenticatorReceivePacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorreceivepacket) indicates that an authentication result is available.</span></span>
    -   <span data-ttu-id="b7ae2-114">Вызывает [**еапмесодаусентикаторсендпаккет**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsendpacket) с указателем на пакет запроса для передачи в запрашивающую сторона.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-114">Calls [**EapMethodAuthenticatorSendPacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsendpacket) with a pointer to a request packet to pass to the supplicant.</span></span>
    -   <span data-ttu-id="b7ae2-115">Вызывает [**еапмесодаусентикаторрецеивепаккет**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorreceivepacket) , чтобы получить пакет ответа, отправленный с помощью запрашивающей стороны.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-115">Calls [**EapMethodAuthenticatorReceivePacket**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorreceivepacket) to retrieve the response packet sent by the supplicant.</span></span> <span data-ttu-id="b7ae2-116">Эта функция возвращает код **\_ \_ \_ \_ действия ответа метода проверки** подлинности EAP, который указывает на следующее действие, которое средство проверки подлинности должно пройти в сеансе проверки подлинности EAP.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-116">This function returns a **EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_ACTION** code that indicates the next action the authenticator must take in the EAP authentication session.</span></span>
    -   <span data-ttu-id="b7ae2-117">Если код действия [ \_ \_ \_ \_ отвечает на ответ метода проверки подлинности EAP Method](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action), он указывает, что метод EAP имеет атрибуты, доступные для проверки подлинности и передачи в одноранговый метод.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-117">If the action code is [EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_RESPOND](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action), it indicates that the EAP method has attributes available for the authenticator to retrieve and pass to the peer method.</span></span> <span data-ttu-id="b7ae2-118">Средство проверки подлинности вызывает [**еапмесодаусентикаторжетаттрибутес**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorgetattributes) для получения различных атрибутов проверки подлинности EAP из метода проверки подлинности EAP.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-118">Authenticator calls [**EapMethodAuthenticatorGetAttributes**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorgetattributes) to obtain the various EAP authentication attributes from the EAP authenticator method.</span></span> <span data-ttu-id="b7ae2-119">После того как средство проверки подлинности обрабатывает атрибуты, он вызывает [**еапмесодаусентикаторсетаттрибутес**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsetattributes) , который предоставляет обновленные атрибуты проверки подлинности EAP для установки в методе EAP Authenticator.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-119">After the authenticator processes the attributes it calls [**EapMethodAuthenticatorSetAttributes**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorsetattributes) which provides updated EAP authentication attributes to set on the EAP authenticator method.</span></span> <span data-ttu-id="b7ae2-120">Эта функция возвращает код **\_ \_ \_ \_ действия ответа метода проверки подлинности EAP** , который определяет последующее действие.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-120">This function returns a **EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_ACTION** code which determines the subsequent action.</span></span>
-   <span data-ttu-id="b7ae2-121">Если код действия является [ \_ \_ \_ \_ результатом ответа метода](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action)аутентификации EAP, он указывает, что средство проверки подлинности определило результаты сеанса аутентификации, и эти результаты доступны для EAPHost.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-121">If the action code is [EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_RESULT](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action), it indicates that the authenticator has determined the results of the authentication session, and those results are available to EAPHost.</span></span> <span data-ttu-id="b7ae2-122">Средство проверки подлинности вызывает [**еапмесодаусентикаторжетресулт**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorgetresult) и получает результаты сеанса проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-122">Authenticator calls [**EapMethodAuthenticatorGetResult**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorgetresult) and obtains the results of the authentication session.</span></span>
-   <span data-ttu-id="b7ae2-123">За ним следует вызов [**еапмесодаусентикаторендсессион**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorendsession) , чтобы завершить сеанс проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-123">This is followed by a call to [**EapMethodAuthenticatorEndSession**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorendsession) to end the authentication session.</span></span>
-   <span data-ttu-id="b7ae2-124">Наконец, выполняется вызов [**еапмесодаусентикаторшутдовн**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorshutdown) для выгрузки библиотеки DLL метода средства проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-124">Finally, a call is made to [**EapMethodAuthenticatorShutdown**](/previous-versions/windows/desktop/api/eapmethodauthenticatorapis/nf-eapmethodauthenticatorapis-eapmethodauthenticatorshutdown) to unload the authenticator method DLL.</span></span>
-   <span data-ttu-id="b7ae2-125">Выгружает библиотеку методов EAP.</span><span class="sxs-lookup"><span data-stu-id="b7ae2-125">Unloads the EAP method library.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b7ae2-126">См. также</span><span class="sxs-lookup"><span data-stu-id="b7ae2-126">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b7ae2-127">**\_ \_ действие ответа метода проверки подлинности EAP \_ \_**</span><span class="sxs-lookup"><span data-stu-id="b7ae2-127">**EAP\_METHOD\_AUTHENTICATOR\_RESPONSE\_ACTION**</span></span>](/windows/desktop/api/EapAuthenticatorActionDefine/ne-eapauthenticatoractiondefine-eap_method_authenticator_response_action)
</dt> <dt>

[<span data-ttu-id="b7ae2-128">Последовательность вызовов API-интерфейса для запрашивающих сторон</span><span class="sxs-lookup"><span data-stu-id="b7ae2-128">Supplicant API Call Sequence</span></span>](supplicant-api-call-sequence.md)
</dt> <dt>

[<span data-ttu-id="b7ae2-129">Последовательность вызовов API однорангового метода</span><span class="sxs-lookup"><span data-stu-id="b7ae2-129">Peer Method API Call Sequence</span></span>](peer-method-api-call-sequence.md)
</dt> <dt>

[<span data-ttu-id="b7ae2-130">Последовательности вызовов EAPHost</span><span class="sxs-lookup"><span data-stu-id="b7ae2-130">EAPHost Call Sequences</span></span>](about-eaphost-call-sequences.md)
</dt> </dl>

 

 




