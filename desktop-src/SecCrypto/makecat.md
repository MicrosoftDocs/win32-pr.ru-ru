---
description: Средство CryptoAPI, которое создает файл каталога.
ms.assetid: 233b3644-f2a5-4166-bac0-30bf2f54e957
title: макекат
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 980c58530c55006d28ecd7589b0313844e9dbe46
ms.sourcegitcommit: 61a4c522182aa1cacbf5669683d9570a3bf043b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2021
ms.locfileid: "122886259"
---
# <a name="makecat"></a>макекат

Средство Макекат — это средство CryptoAPI, которое создает файл каталога. макекат доступен как часть пакета средств разработки Microsoft Windows Software Development Kit (SDK) для Windows 7 и платформа .NET Framework 4,0 и устанавливается по умолчанию в \\ папку Bin в пути установки пакета SDK.

Средство Макекат использует следующий синтаксис команды:

**Макекат** \[ **-n** \| **-r** \| **-v** \] *Имя файла*

## <a name="parameters"></a>Параметры



| Параметр             | Описание                                                                                                                                                              |
|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **-n**<br/>     | Не останавливайте восстановление при устранимой ошибке.<br/>                                                                                                                           |
| **-r**<br/>     | Принудительное завершение Макекат при обнаружении устранимых ошибок. В частности, она будет завершаться при обработке записей в разделе файлы каталога CDF-файла.<br/> |
| **-v**<br/>     | Verbose. Отображает все ход выполнения и сообщения об ошибках.<br/>                                                                                                            |
| *FileName*<br/> | Имя файла. CDF, который необходимо проанализировать. Сведения о требуемой структуре и содержимом см. в разделе Примечания.<br/>                                                                         |



 

## <a name="remarks"></a>Комментарии

CDF – файл должен быть построен со следующими спецификациями.

``` syntax
[CatalogHeader]
Name=Name              
ResultDir=ResultDir   
PublicVersion=[|1]
CatalogVersion = [|1|2]
HashAlgorithms=[|SHA1|SHA256]
PageHashes=[true|false]
EncodingType=Encodingtype 
CATATTR1={type}:{oid}:{value} (optional)
CATATTR2={type}:{oid}:{value} (optional)

[CatalogFiles]
{reference tag}=file path and name
{reference tag}ALTSIPID={guid} (optional)
{reference tag}ATTR1={type}:{oid}:{value} (optional)
{reference tag}ATTR2={type}:{oid}:{value} (optional)
<HASH>kernel32.dll=kernel32.dll
<HASH>ntdll.dll=ntdll.dll
```

> [!Note]  
> Последняя запись в файле. CDF должна всегда содержать явный символ новой строки в конце строки.

 

\[Раздел каталогхеадер \] определяет сведения о файле всего каталога.



| Параметр                    | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|---------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Имя<br/>           | Имя файла каталога, включая его расширение.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| ресултдир<br/>      | Каталог, в который будет помещен созданный файл. cat. Если этот параметр не указан, используется текущий каталог по умолчанию. Если каталог не существует, он будет создан.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| публикверсион<br/>  | Этот параметр не поддерживается. <br/> **Windows server 2008 R2, Windows 7, Windows server 2008, Windows Vista, Windows server 2003 и Windows XP:** Версия каталога. Если оставить это поле пустым, используется значение по умолчанию, равное 1.<br/> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| каталогверсион<br/> | Версия каталога. Если версия отсутствует или имеет значение 1, то значение "0x100" передается параметру *двпубликверсион* функции [**крипткатопен**](/windows/desktop/api/Mscat/nf-mscat-cryptcatopen) , а также создается файл каталога версии 1. Параметр Хашалгорисмс должен быть пустым или содержать SHA1.<br/> Если для версии задано значение 2, то в параметре *двпубликверсион* функции [**крипткатопен**](/windows/desktop/api/Mscat/nf-mscat-cryptcatopen) передается "0x200", а также создается файл каталога версии 2. Параметр Хашалгорисмс должен содержать SHA256.<br/> Если этот параметр имеется, но содержит любое значение, отличное от 1 или 2, то средство Макекат выдаст ошибку.<br/> **Windows server 2008 R2, Windows 7, Windows server 2008, Windows Vista, Windows server 2003 и Windows XP:** Этот параметр не поддерживается.<br/> <br/> |
| хашалгорисмс<br/> | Имя используемого алгоритма хэширования. Дополнительные сведения см. в описании параметра Каталогверсион.<br/> **Windows server 2008 R2, Windows 7, Windows server 2008, Windows Vista, Windows server 2003 и Windows XP:** Этот параметр не поддерживается.<br/> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| пажехашес<br/>     | Указывает, следует ли хэшировать файлы, перечисленные в &lt; &gt; параметре hash в \[ \] разделе каталогфилес<br/> **Windows server 2008 R2, Windows 7, Windows server 2008, Windows Vista, Windows server 2003 и Windows XP:** Этот параметр не поддерживается.<br/> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| енкодингтипе<br/>   | Тип используемой кодировки сообщений. Если оставить это поле пустым, Енкодингтипе по умолчанию будет иметь номер PKCS \_ 7 ASN кодировка \_ \_ \| X509 \_ ASN \_ , 0x00010001. <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |



 

\[Раздел каталогфилес \] определяет каждый член файла каталога с файлами различных типов и атрибутов различных типов в отдельных группах.



<table>
<colgroup>
<col  />
<col  />
</colgroup>
<thead>
<tr class="header">
<th>Параметр</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>тег ссылки<br/></td>
<td>Текстовая ссылка на файл. Это могут быть любые текстовые символы ASCII, кроме знака равенства (=). Система должна иметь возможность воспроизводить этот тег после установки. <br/> Используйте &lt; хэш &gt; в качестве префикса имени файла. В результате тег будет являться хэшем файла в форме строки ASCII. <br/></td>
</tr>
<tr class="even">
<td>путь и имя файла<br/></td>
<td>Имя файла, включая расширение для синтаксического анализа и относительный путь к файлу. В каталог можно добавить любой тип файла, который можно подписать с помощью средства SignTool. Например, в каталог можно добавить имена файлов со следующими расширениями: .exe, .cab,. cat,. ocx, .dll и. STL.<br/></td>
</tr>
<tr class="odd">
<td>алтсипид<br/></td>
<td>Идентификатор GUID SIP, который будет использоваться для хэширования вместо стандартного SIP, основанного на типе файлов. Эта запись не является обязательной. Если эта запись отсутствует, элемент будет хэширован с использованием SIP по умолчанию. Если установленный по умолчанию SIP не найден, будет использоваться плоский модуль SIP.<br/></td>
</tr>
<tr class="even">
<td>guid<br/></td>
<td>Текстовое представление идентификатора GUID.<br/></td>
</tr>
<tr class="odd">
<td>аттркс<br/></td>
<td>Необязательный элемент. Атрибут или оператор о файле или содержимом. Может существовать любое количество атрибутов, включая None.<br/></td>
</tr>
<tr class="even">
<td>тип<br/></td>
<td>Определяет, какой тип атрибута добавляется в формате 0x00000000 (текст). Этот параметр может быть сочетанием битового<strong>или</strong> нуля или более следующих значений:<br/>
<ul>
<li>0x10000000 прошедший проверку атрибут (подписанный, включается в хэш).</li>
<li>0x20000000 непроверенный атрибут (без подписи, не включается в хэш, не поддающийся проверке).</li>
<li>Атрибут 0x01000000 не будет реплицирован в записи SHA1 в каталоге Каталогверсион 2.</li>
<li>Атрибут 0x00010000 представлен в виде открытого текста. Преобразование не выполняется.</li>
<li>Атрибут 0x00020000 представлен в кодировке Base-64. Используется для представления двоичных данных.</li>
<li>0x00000001 — это пара "имя-значение". Используйте параметр OID для имени. Этот атрибут работает слишком долго; Поэтому используйте этот параметр с осторожностью.</li>
<li>на атрибут 0x00000002 ссылается <a href="/windows/desktop/SecGloss/o-gly"><em>идентификатор объекта</em></a> (OID).</li>
</ul>
<br/></td>
</tr>
<tr class="odd">
<td>oid<br/></td>
<td>Текстовое представление ключа ссылки атрибута. Это OID в виде текстовой строки в точечно-десятичной нотации (например, a. b. c. d) или в текстовом имени.<br/></td>
</tr>
<tr class="even">
<td>value<br/></td>
<td>Текстовое представление значения атрибута. Тип используемого текстового представления зависит от значения параметра Type. КОНЦА строки символы определяют длину.<br/></td>
</tr>
<tr class="odd">
<td>&lt;ФУНКЦИИ&gt;<br/></td>
<td>Хэширует указанный файл.<br/></td>
</tr>
</tbody>
</table>



 

Созданный файл каталога не подписан. Если он должен быть подписан до передачи, он подписывается с помощью средства [SignTool](signtool.md).

 

 
