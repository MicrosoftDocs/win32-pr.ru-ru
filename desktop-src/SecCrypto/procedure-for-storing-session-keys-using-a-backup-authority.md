---
description: Приложение, использующее центр архивации для хранения ключей сеансов, обычно выполняет эти действия.
ms.assetid: 859310ed-6000-44c8-92f7-974326ce0fc9
title: Хранение ключей сеанса с помощью центра архивации
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d59906874f384d4eed9e20d6a781b14e3feba313
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104345725"
---
# <a name="storing-session-keys-using-a-backup-authority"></a>Хранение ключей сеанса с помощью центра архивации

Приложение, использующее [*Центр архивации*](../secgloss/b-gly.md) для хранения ключей сеансов, обычно выполняет эти действия.

**Использование центра архивации**

1.  Зашифровать файл обычным образом.
2.  Экспортируйте [*ключ сеанса*](../secgloss/s-gly.md) , используемый для шифрования файла, в [*простой ключевой BLOB-объект*](../secgloss/s-gly.md), указав, что ваш собственный [*открытый ключ обмена ключами*](../secgloss/k-gly.md) используется для шифрования большого двоичного объекта ключа. Сохраните этот ключевой BLOB-объект с помощью зашифрованного файла.
3.  Снова экспортируйте ключ сеанса. это указывает, что открытый ключ центра архивации будет использоваться для шифрования большого двоичного объекта ключа. Отправьте этот ключевой BLOB-объект в Центр архивации вместе с описанием ключа, серийным номером и т. д.

Если [*пара ключей*](../secgloss/k-gly.md) потеряна, ключи можно будет получить из [*центра архивации*](../secgloss/b-gly.md) , если можно установить удостоверение владельца ключей. Процедура установления удостоверения определяется политикой конкретного центра архивации и не предусматривает использования CryptoAPI.

Для кода, необходимого для создания ключа сеанса и экспорта этого ключа в [*простой ключевой BLOB-объект*](../secgloss/s-gly.md) , который можно записать в файл на диске, см. [Пример программы C: экспорт ключа сеанса](example-c-program-exporting-a-session-key.md).

 

 
