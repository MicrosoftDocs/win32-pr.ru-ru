---
description: Используется для представления записей реестра, управляющих кэшированием закрытых ключей программных CSP Майкрософт.
ms.assetid: 67909072-72fe-4777-ae52-a7b9047c9dd5
title: Константы кэширования закрытых ключей (Винкрипт. h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 6afa1394b33f4e36e31934e813b7c9fc41814e28
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103913624"
---
# <a name="private-key-caching-constants"></a><span data-ttu-id="e20b1-103">Константы кэширования закрытого ключа</span><span class="sxs-lookup"><span data-stu-id="e20b1-103">Private Key Caching Constants</span></span>

<span data-ttu-id="e20b1-104">Следующие константы используются для представления записей реестра, управляющих кэшированием [*закрытых ключей*](../secgloss/p-gly.md) программных CSP Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="e20b1-104">The following constants are used to represent registry entries that control [*private key*](../secgloss/p-gly.md) caching by Microsoft software-based CSPs.</span></span>



| <span data-ttu-id="e20b1-105">Константа/значение</span><span class="sxs-lookup"><span data-stu-id="e20b1-105">Constant/value</span></span>                                                                                                                                                                                                                                                                                                                                                                                    | <span data-ttu-id="e20b1-106">Описание</span><span class="sxs-lookup"><span data-stu-id="e20b1-106">Description</span></span>                                                                                                |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------|
| <span id="szKEY_CRYPTOAPI_PRIVATE_KEY_OPTIONS"></span><span id="szkey_cryptoapi_private_key_options"></span><span id="SZKEY_CRYPTOAPI_PRIVATE_KEY_OPTIONS"></span><dl> <span data-ttu-id="e20b1-107"><dt>**сзкэй \_ \_ \_ \_ Параметры закрытого ключа CRYPTOAPI**</dt> <dt>"политики программного обеспечения \\ \\ \\ \\ Microsoft \\ \\ Cryptography"</dt></span><span class="sxs-lookup"><span data-stu-id="e20b1-107"><dt>**szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS**</dt> <dt>"Software\\\\Policies\\\\Microsoft\\\\Cryptography"</dt></span></span> </dl> | <span data-ttu-id="e20b1-108">Путь в корне **\_ локального \_ компьютера hKey** в записях реестра для кэширования закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="e20b1-108">The path, under the **HKEY\_LOCAL\_MACHINE** root, of the private key caching registry entries.</span></span><br/> |



<span data-ttu-id="e20b1-109">Следующие константы используются для обнаружения значений реестра, управляющих кэшированием закрытых ключей глобально для конкретного процесса в соответствии с программным CSP корпорации Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="e20b1-109">The following constants are used to identify registry values that control private key caching globally for a specific process by Microsoft software-based CSPs.</span></span>



| <span data-ttu-id="e20b1-110">Константа/значение</span><span class="sxs-lookup"><span data-stu-id="e20b1-110">Constant/value</span></span>                                                                                                                                                                                                                                                                                                                                                                                    | <span data-ttu-id="e20b1-111">Описание</span><span class="sxs-lookup"><span data-stu-id="e20b1-111">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="szPRIV_KEY_CACHE_MAX_ITEMS"></span><span id="szpriv_key_cache_max_items"></span><span id="SZPRIV_KEY_CACHE_MAX_ITEMS"></span><dl> <span data-ttu-id="e20b1-112"><dt>**сзприв \_ \_ \_ Максимальное число \_ элементов в кэше ключей**</dt> <dt>"привкэйкачемакситемс"</dt></span><span class="sxs-lookup"><span data-stu-id="e20b1-112"><dt>**szPRIV\_KEY\_CACHE\_MAX\_ITEMS**</dt> <dt>"PrivKeyCacheMaxItems"</dt></span></span> </dl>                                                                  | <span data-ttu-id="e20b1-113">Значение **reg \_ DWORD** в разделе реестра **Options сзкэй ( \_ \_ \_ \_ Параметры закрытого ключа CRYPTOAPI** ), которое указывает максимальное количество закрытых ключей, которые могут быть кэшированы в один раз для одного процесса.</span><span class="sxs-lookup"><span data-stu-id="e20b1-113">A **REG\_DWORD** value under the **szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS** registry key that specifies the maximum number of private keys that can be cached at one time for a single process.</span></span> <span data-ttu-id="e20b1-114">Эта проверка выполняется при считывании сохраненного закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="e20b1-114">This check is performed whenever a stored private key is read.</span></span> <span data-ttu-id="e20b1-115">Если превышено максимальное число, из кэша удаляется наименее недавно использованный ключ.</span><span class="sxs-lookup"><span data-stu-id="e20b1-115">If the maximum number is exceeded, the least recently used key is removed from the cache.</span></span><br/> <span data-ttu-id="e20b1-116">Если это значение равно нулю, ключи не кэшируются.</span><span class="sxs-lookup"><span data-stu-id="e20b1-116">If this value is zero, no keys are cached.</span></span> <span data-ttu-id="e20b1-117">Если это значение отсутствует, по умолчанию используется значение **\_ \_ \_ максимального числа \_ элементов \_ кэша ключей кприв по** умолчанию.</span><span class="sxs-lookup"><span data-stu-id="e20b1-117">If this value is not present, the **cPRIV\_KEY\_CACHE\_MAX\_ITEMS\_DEFAULT** value is used as the default.</span></span><br/> <span data-ttu-id="e20b1-118">Если в открытом контексте имеется ссылка на закрытый ключ, который удаляется из кэша, этот ключ считывается из хранилища при следующей попытке использования ключа.</span><span class="sxs-lookup"><span data-stu-id="e20b1-118">If a private key that is deleted from the cache is currently referenced in an open context, then the key is read from storage the next time an attempt is made to use the key.</span></span><br/> <span data-ttu-id="e20b1-119">**Windows Server 2003 и Windows XP с пакетом обновления 1 (SP1) и более ранними версиями:** Это значение реестра не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="e20b1-119">**Windows Server 2003 and Windows XP with SP1 and earlier:** This registry value is not supported.</span></span><br/>                                  |
| <span id="cPRIV_KEY_CACHE_MAX_ITEMS_DEFAULT"></span><span id="cpriv_key_cache_max_items_default"></span><span id="CPRIV_KEY_CACHE_MAX_ITEMS_DEFAULT"></span><dl> <span data-ttu-id="e20b1-120"><dt>**кприв \_ \_ \_ Максимальное число элементов в кэше ключей \_ \_ по умолчанию**</dt> <dt>20</dt></span><span class="sxs-lookup"><span data-stu-id="e20b1-120"><dt>**cPRIV\_KEY\_CACHE\_MAX\_ITEMS\_DEFAULT**</dt> <dt>20</dt></span></span> </dl>                                                         | <span data-ttu-id="e20b1-121">Значение по умолчанию для параметра реестра **\_ \_ \_ Max \_ Items кэша ключей сзприв** , если значение не указано.</span><span class="sxs-lookup"><span data-stu-id="e20b1-121">The default value of the **szPRIV\_KEY\_CACHE\_MAX\_ITEMS** registry entry if no value is specified.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span id="szPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS"></span><span id="szpriv_key_cache_purge_interval_seconds"></span><span id="SZPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS"></span><dl> <span data-ttu-id="e20b1-122"><dt>**сзприв \_ \_Интервал очистки кэша ключей (в \_ \_ \_ секундах**</dt> <dt>— "привкэйкачепуржеинтервалсекондс"</dt> )</span><span class="sxs-lookup"><span data-stu-id="e20b1-122"><dt>**szPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS**</dt> <dt>"PrivKeyCachePurgeIntervalSeconds"</dt></span></span> </dl> | <span data-ttu-id="e20b1-123">Значение **reg \_ DWORD** в разделе реестра **Options сзкэй ( \_ \_ \_ \_ Параметры закрытого ключа CRYPTOAPI** ), которое указывает максимальный возраст (в секундах) любого кэшированного закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="e20b1-123">A **REG\_DWORD** value under the **szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS** registry key that specifies the maximum age, in seconds, of any cached private key.</span></span> <span data-ttu-id="e20b1-124">Эта проверка выполняется при использовании или считывании сохраненного закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="e20b1-124">This check is performed whenever a stored private key is used or read.</span></span> <span data-ttu-id="e20b1-125">Если это время прошло с момента последнего сброса, все кэшированные ключи, на которые нет ссылок с момента последнего очистки, будут удалены из кэша.</span><span class="sxs-lookup"><span data-stu-id="e20b1-125">If this amount of time has elapsed since the last clearing occurred, all cached keys that have not been referenced since the last clearing will be removed from the cache.</span></span><br/> <span data-ttu-id="e20b1-126">Если это значение отсутствует, по умолчанию используется значение **\_ \_ интервала очистки кэша ключей кприв в \_ \_ \_ секундах \_** .</span><span class="sxs-lookup"><span data-stu-id="e20b1-126">If this value is not present, the **cPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS\_DEFAULT** value is used as the default.</span></span><br/> <span data-ttu-id="e20b1-127">Если в открытом контексте имеется ссылка на закрытый ключ, который удаляется из кэша, ключ будет считан из хранилища при следующей попытке использования ключа.</span><span class="sxs-lookup"><span data-stu-id="e20b1-127">If a private key that is cleared from the cache is currently referenced in an open context, then the key will be read from storage the next time an attempt is made to use the key.</span></span><br/> <span data-ttu-id="e20b1-128">**Windows Server 2003 и Windows XP с пакетом обновления 1 (SP1) и более ранними версиями:** Это значение реестра не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="e20b1-128">**Windows Server 2003 and Windows XP with SP1 and earlier:** This registry value is not supported.</span></span><br/> |
| <span id="cPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS_DEFAULT"></span><span id="cpriv_key_cache_purge_interval_seconds_default"></span><span id="CPRIV_KEY_CACHE_PURGE_INTERVAL_SECONDS_DEFAULT"></span><dl> <span data-ttu-id="e20b1-129"><dt>**кприв \_ \_Интервал очистки кэша ключей (в \_ \_ \_ секундах) \_ по умолчанию**</dt> <dt>86400</dt></span><span class="sxs-lookup"><span data-stu-id="e20b1-129"><dt>**cPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS\_DEFAULT**</dt> <dt>86400</dt></span></span> </dl> | <span data-ttu-id="e20b1-130">Значение по умолчанию для **\_ \_ интервала очистки кэша ключей сзприв в \_ \_ \_ секундах** , если значение не указано.</span><span class="sxs-lookup"><span data-stu-id="e20b1-130">The default value of the **szPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS** registry entry if no value is specified.</span></span> <span data-ttu-id="e20b1-131">Это значение эквивалентно одному дню.</span><span class="sxs-lookup"><span data-stu-id="e20b1-131">This value is equivalent to one day.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |



<span data-ttu-id="e20b1-132">Следующие константы используются для обнаружения значений реестра, управляющих кэшированием закрытых ключей для одного программного экземпляра [*поставщика служб шифрования*](../secgloss/c-gly.md) (CSP) корпорации Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="e20b1-132">The following constants are used to identify registry values that control private key caching for a single Microsoft software-based [*cryptographic service provider*](../secgloss/c-gly.md) (CSP) instance.</span></span>



| <span data-ttu-id="e20b1-133">Константа/значение</span><span class="sxs-lookup"><span data-stu-id="e20b1-133">Constant/value</span></span>                                                                                                                                                                                                                                                                                          | <span data-ttu-id="e20b1-134">Описание</span><span class="sxs-lookup"><span data-stu-id="e20b1-134">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <dl> <span data-ttu-id="e20b1-135"><dt></dt><dt>"Алловкачепв"</dt></span><span class="sxs-lookup"><span data-stu-id="e20b1-135"><dt></dt> <dt>"AllowCachePW"</dt></span></span> </dl>                                                                                                                                                         | <span data-ttu-id="e20b1-136">Значение **reg \_ DWORD** в разделе " **\_ \_ \\ политики программного обеспечения локального компьютера" ( \\ \\ Майкрософт) \\ \\ Защита** раздела реестра, которое указывает, включено ли кэширование паролей для защищенных паролем ключей в CSP на основе программного обеспечения Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="e20b1-136">A **REG\_DWORD** value under the **HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Policies\\Microsoft\\Cryptography\\Protect** registry key that specifies whether password caching is enabled for password-protected keys in the Microsoft software-based CSPs.</span></span> <span data-ttu-id="e20b1-137">Если это значение равно 0, то кэширование паролей будет дисабелд и пользователю будет предложено ввести пароль при каждом использовании ключа, защищенного паролем.</span><span class="sxs-lookup"><span data-stu-id="e20b1-137">If this value is 0, then password caching is disabeld and the user is prompted for the password every time a password-protected key is used.</span></span> <span data-ttu-id="e20b1-138">Любое другое значение или отсутствие этого значения указывает на то, что пароль будет кэшироваться.</span><span class="sxs-lookup"><span data-stu-id="e20b1-138">Any other value, or the absence of this value, indicates that the password will be cached.</span></span> <span data-ttu-id="e20b1-139">В этом сценарии пользователю предлагается один раз для каждого отдельного ключа.</span><span class="sxs-lookup"><span data-stu-id="e20b1-139">In this scenario, the user is only prompted once per process for each such key.</span></span> <br/> |
| <span id="szKEY_CACHE_ENABLED"></span><span id="szkey_cache_enabled"></span><span id="SZKEY_CACHE_ENABLED"></span><dl> <span data-ttu-id="e20b1-140"><dt>**сзкэй \_ КЭШ \_ включен**</dt> <dt>"качеприватекэйс"</dt></span><span class="sxs-lookup"><span data-stu-id="e20b1-140"><dt>**szKEY\_CACHE\_ENABLED**</dt> <dt>"CachePrivateKeys"</dt></span></span> </dl>          | <span data-ttu-id="e20b1-141">Значение **reg \_ DWORD** в разделе реестра **Options сзкэй ( \_ \_ \_ \_ Параметры закрытого ключа CRYPTOAPI** ), которое указывает, включено ли кэширование закрытых ключей.</span><span class="sxs-lookup"><span data-stu-id="e20b1-141">A **REG\_DWORD** value under the **szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS** registry key that specifies whether private key caching is enabled.</span></span> <span data-ttu-id="e20b1-142">Если это значение равно 1, то кэширование закрытых ключей включено.</span><span class="sxs-lookup"><span data-stu-id="e20b1-142">If this value is 1, then private key caching is enabled.</span></span> <span data-ttu-id="e20b1-143">Любое другое значение или отсутствие этого значения указывает на то, что кэширование закрытых ключей отключено.</span><span class="sxs-lookup"><span data-stu-id="e20b1-143">Any other value, or the absence of this value, indicates that private key caching is disabled.</span></span><br/> <span data-ttu-id="e20b1-144">Windows **Vista с пакетом обновления 1 (SP1), Windows Vista и Windows XP:** Это значение реестра не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="e20b1-144">**Windows Vista with SP1, Windows Vista and Windows XP:** This registry value is not supported.</span></span><br/>                                                                                                                                                        |
| <span id="szKEY_CACHE_SECONDS"></span><span id="szkey_cache_seconds"></span><span id="SZKEY_CACHE_SECONDS"></span><dl> <span data-ttu-id="e20b1-145"><dt>**сзкэй \_ \_Секунды кэша**</dt> <dt>"приватекэйлифетимесекондс"</dt></span><span class="sxs-lookup"><span data-stu-id="e20b1-145"><dt>**szKEY\_CACHE\_SECONDS**</dt> <dt>"PrivateKeyLifetimeSeconds"</dt></span></span> </dl> | <span data-ttu-id="e20b1-146">Значение **reg \_ DWORD** в разделе реестра **Options сзкэй ( \_ \_ \_ \_ Параметры закрытого ключа CRYPTOAPI** ), которое указывает максимальный возраст (в секундах) любого кэшированного закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="e20b1-146">A **REG\_DWORD** value under the **szKEY\_CRYPTOAPI\_PRIVATE\_KEY\_OPTIONS** registry key that specifies the maximum age, in seconds, of any cached private key.</span></span><br/> <span data-ttu-id="e20b1-147">**Windows XP:** Это значение реестра не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="e20b1-147">**Windows XP:** This registry value is not supported.</span></span><br/>                                                                                                                                                                                                                                                                                                                                          |



## <a name="remarks"></a><span data-ttu-id="e20b1-148">Комментарии</span><span class="sxs-lookup"><span data-stu-id="e20b1-148">Remarks</span></span>

<span data-ttu-id="e20b1-149">Различия между значениями в **\_ кэше сзкэй \_** и **\_ \_ интервалом очистки кэша ключей сзприв в \_ \_ \_ секундах** приведены ниже.</span><span class="sxs-lookup"><span data-stu-id="e20b1-149">The differences between the **szKEY\_CACHE\_SECONDS** and the **szPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS** values are as follows:</span></span>

 <span data-ttu-id="e20b1-150">**\_секунды кэша \_ сзкэй**</span><span class="sxs-lookup"><span data-stu-id="e20b1-150">**szKEY\_CACHE\_SECONDS**</span></span>  

-   <span data-ttu-id="e20b1-151">Это значение применяется только к конкретному CSP.</span><span class="sxs-lookup"><span data-stu-id="e20b1-151">This value only applies to a specific CSP.</span></span> <span data-ttu-id="e20b1-152">После выпуска CSP также освобождается кэш CSP.</span><span class="sxs-lookup"><span data-stu-id="e20b1-152">After the CSP is released, the CSP's cache is released as well.</span></span>  
-   <span data-ttu-id="e20b1-153">Это значение применяется только в том случае, если предпринимается попытка использовать конкретный закрытый ключ с заданным маркером контекста.</span><span class="sxs-lookup"><span data-stu-id="e20b1-153">This value is only applied when an attempt is made to use a specific private key with a specific context handle.</span></span>  

<span data-ttu-id="e20b1-154">**\_ \_ интервал очистки кэша ключей сзприв в \_ \_ \_ секундах**</span><span class="sxs-lookup"><span data-stu-id="e20b1-154">**szPRIV\_KEY\_CACHE\_PURGE\_INTERVAL\_SECONDS**</span></span>  

-   <span data-ttu-id="e20b1-155">Это значение применяется ко всем CSP в процессе.</span><span class="sxs-lookup"><span data-stu-id="e20b1-155">This value applies to all CSPs in a process.</span></span> <span data-ttu-id="e20b1-156">Даже если поставщик CSP освобожден, этот кэш не освобождается.</span><span class="sxs-lookup"><span data-stu-id="e20b1-156">Even if the CSP is released, this cache is not released.</span></span>  
-   <span data-ttu-id="e20b1-157">Это значение применяется каждый раз, когда любой сохраненный закрытый ключ используется или считывается из хранилища в одном процессе.</span><span class="sxs-lookup"><span data-stu-id="e20b1-157">This value applies whenever any stored private key is used or read from storage in a single process.</span></span>  



## <a name="requirements"></a><span data-ttu-id="e20b1-158">Требования</span><span class="sxs-lookup"><span data-stu-id="e20b1-158">Requirements</span></span>



| <span data-ttu-id="e20b1-159">Требование</span><span class="sxs-lookup"><span data-stu-id="e20b1-159">Requirement</span></span> | <span data-ttu-id="e20b1-160">Значение</span><span class="sxs-lookup"><span data-stu-id="e20b1-160">Value</span></span> |
|-------------------------------------|---------------------------------------------------------------------------------------|
| <span data-ttu-id="e20b1-161">Минимальная версия клиента</span><span class="sxs-lookup"><span data-stu-id="e20b1-161">Minimum supported client</span></span><br/> | <span data-ttu-id="e20b1-162">Только для \[ классических приложений Windows XP\]</span><span class="sxs-lookup"><span data-stu-id="e20b1-162">Windows XP \[desktop apps only\]</span></span><br/>                                           |
| <span data-ttu-id="e20b1-163">Минимальная версия сервера</span><span class="sxs-lookup"><span data-stu-id="e20b1-163">Minimum supported server</span></span><br/> | <span data-ttu-id="e20b1-164">\[Только для настольных приложений Windows Server 2003\]</span><span class="sxs-lookup"><span data-stu-id="e20b1-164">Windows Server 2003 \[desktop apps only\]</span></span><br/>                                  |
| <span data-ttu-id="e20b1-165">Header</span><span class="sxs-lookup"><span data-stu-id="e20b1-165">Header</span></span><br/>                   | <dl> <span data-ttu-id="e20b1-166"><dt>Винкрипт. h</dt></span><span class="sxs-lookup"><span data-stu-id="e20b1-166"><dt>Wincrypt.h</dt></span></span> </dl> |



 

 
