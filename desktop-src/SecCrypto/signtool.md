---
title: SignTool
description: Средство SignTool — это программа командной строки, которая выполняет цифровую подпись файлов, проверяет подписи в файлах и файлы меток времени.
ms.assetid: aa59cb35-5fba-4ce8-97ea-fc767c83f88e
ms.topic: article
ms.date: 10/12/2020
ms.openlocfilehash: 884d4c132a2877a51cef7610dd32e8ef6b9c4bc3
ms.sourcegitcommit: 25e1fa2b3641ae13b79e0afdf9cb7a168d99e009
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/16/2020
ms.locfileid: "104414057"
---
# <a name="signtool"></a><span data-ttu-id="3f760-103">SignTool</span><span class="sxs-lookup"><span data-stu-id="3f760-103">SignTool</span></span>

<span data-ttu-id="3f760-104">Средство SignTool — это программа командной строки, которая выполняет цифровую подпись файлов, проверяет подписи в файлах и файлы меток времени.</span><span class="sxs-lookup"><span data-stu-id="3f760-104">SignTool is a command-line tool that digitally signs files, verifies the signatures in files, and timestamps files.</span></span> <span data-ttu-id="3f760-105">Сведения о том, почему файлы подписи важны, см. [в статье Введение в подписывание кода](cryptography-tools.md).</span><span class="sxs-lookup"><span data-stu-id="3f760-105">For information about why signing files is important, see [Introduction to Code Signing](cryptography-tools.md).</span></span> <span data-ttu-id="3f760-106">Средство устанавливается в \\ папку bin пути установки пакета средств разработки программного обеспечения (SDK) для Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="3f760-106">The tool is installed in the \\Bin folder of the Microsoft Windows Software Development Kit (SDK) installation path.</span></span>

<span data-ttu-id="3f760-107">Средство SignTool доступно в составе Windows SDK, которое можно скачать из <https://developer.microsoft.com/windows/downloads/windows-10-sdk/> .</span><span class="sxs-lookup"><span data-stu-id="3f760-107">SignTool is available as part of the Windows SDK, which you can download from <https://developer.microsoft.com/windows/downloads/windows-10-sdk/>.</span></span>

> [!Note]  
> <span data-ttu-id="3f760-108">Для Windows 10 SDK, Windows 10 ХЛК, Windows 10 WDK и Windows 10 ADK **builds 20236 и более поздних версий** теперь потребуется указать алгоритм дайджеста.</span><span class="sxs-lookup"><span data-stu-id="3f760-108">The Windows 10 SDK, Windows 10 HLK, Windows 10 WDK and Windows 10 ADK **builds 20236 and above** will now require specifying the digest algorithm.</span></span> <span data-ttu-id="3f760-109">Команда подписывания средства SignTool требует, `file digest algorithm` `timestamp digest algorithm` чтобы параметр/FD был указан во время подписывания и метки времени, соответственно.</span><span class="sxs-lookup"><span data-stu-id="3f760-109">The SignTool sign command requires the /fd `file digest algorithm` and the /td `timestamp digest algorithm` option to be specified during signing and timestamping, respectively.</span></span> <span data-ttu-id="3f760-110">Предупреждение (код ошибки 0, изначально) будет выдаваться, если/fd не задан во время подписывания и если/ТД не указан во время метки времени.</span><span class="sxs-lookup"><span data-stu-id="3f760-110">A warning (error code 0, initially) will be thrown if /fd is not specified during signing and if /td is not specified during timestamping.</span></span> <span data-ttu-id="3f760-111">В более поздних версиях средства SignTool предупреждение станет ошибкой.</span><span class="sxs-lookup"><span data-stu-id="3f760-111">In later versions of SignTool, the warning will become an error.</span></span> <span data-ttu-id="3f760-112">В отрасли рекомендуется использовать SHA256, поскольку он более безопасный, чем SHA1.</span><span class="sxs-lookup"><span data-stu-id="3f760-112">SHA256 is recommended and considered to be more secure than SHA1 by the industry.</span></span>  


## <a name="syntax"></a><span data-ttu-id="3f760-113">Синтаксис</span><span class="sxs-lookup"><span data-stu-id="3f760-113">Syntax</span></span>  
  
```console  
signtool [command] [options] [file_name | ...]  
```  

## <a name="parameters"></a><span data-ttu-id="3f760-114">Параметры</span><span class="sxs-lookup"><span data-stu-id="3f760-114">Parameters</span></span>  
  
|<span data-ttu-id="3f760-115">Аргумент</span><span class="sxs-lookup"><span data-stu-id="3f760-115">Argument</span></span>|<span data-ttu-id="3f760-116">Описание</span><span class="sxs-lookup"><span data-stu-id="3f760-116">Description</span></span>|  
|----|----|  
|`command`|<span data-ttu-id="3f760-117">Одна из четырех команд (`catdb`, `sign`, `Timestamp` или `Verify`), указывающая операцию, которую требуется выполнить с файлом.</span><span class="sxs-lookup"><span data-stu-id="3f760-117">One of four commands (`catdb`, `sign`, `Timestamp`, or `Verify`) that specifies an operation to perform on a file.</span></span> <span data-ttu-id="3f760-118">Описание каждой из команд дано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="3f760-118">For a description of each command, see the next table.</span></span>|  
|`options`|<span data-ttu-id="3f760-119">Параметр, изменяющий команду.</span><span class="sxs-lookup"><span data-stu-id="3f760-119">An option that modifies a command.</span></span> <span data-ttu-id="3f760-120">Кроме глобальных параметров `/q` и `/v` каждая команда поддерживает уникальный набор параметров.</span><span class="sxs-lookup"><span data-stu-id="3f760-120">In addition to the global `/q` and `/v` options, each command supports a unique set of options.</span></span>|  
|`file_name`|<span data-ttu-id="3f760-121">Путь к подписываемому файлу.</span><span class="sxs-lookup"><span data-stu-id="3f760-121">The path to a file to sign.</span></span>| 


<span data-ttu-id="3f760-122">Средство SignTool поддерживает следующие команды.</span><span class="sxs-lookup"><span data-stu-id="3f760-122">The following commands are supported by SignTool.</span></span>

|<span data-ttu-id="3f760-123">Get-Help</span><span class="sxs-lookup"><span data-stu-id="3f760-123">Command</span></span>|<span data-ttu-id="3f760-124">Описание</span><span class="sxs-lookup"><span data-stu-id="3f760-124">Description</span></span>|  
|----|----|  
|`Catdb`|<span data-ttu-id="3f760-125">Добавляет файл каталога в базу данных каталогов или удаляет его из этой базы данных.</span><span class="sxs-lookup"><span data-stu-id="3f760-125">Adds a catalog file to, or removes it from, a catalog database.</span></span> <span data-ttu-id="3f760-126">Базы данных каталогов используются для автоматического поиска файлов каталогов и определяются идентификаторами GUID.</span><span class="sxs-lookup"><span data-stu-id="3f760-126">Catalog databases are used for automatic lookup of catalog files and are identified by GUID.</span></span> <span data-ttu-id="3f760-127">Список параметров, поддерживаемых командой `catdb`, см. в разделе [Параметры команды "catdb"](/dotnet/framework/tools/signtool-exe#catdb-command-options).</span><span class="sxs-lookup"><span data-stu-id="3f760-127">For a list of the options supported by the `catdb` command, see [catdb Command Options](/dotnet/framework/tools/signtool-exe#catdb-command-options).</span></span>|  
|`Sign`|<span data-ttu-id="3f760-128">Присваивает цифровые подписи файлам.</span><span class="sxs-lookup"><span data-stu-id="3f760-128">Digitally signs files.</span></span> <span data-ttu-id="3f760-129">Цифровые подписи обеспечивают защиту файлов от несанкционированного доступа и позволяют пользователям проверять, кем подписан файл, на основе сертификата подписи.</span><span class="sxs-lookup"><span data-stu-id="3f760-129">Digital signatures protect files from tampering, and enable users to verify the signer based on a signing certificate.</span></span> <span data-ttu-id="3f760-130">Список параметров, поддерживаемых командой `sign`, см. в разделе [Параметры команды "sign"](/dotnet/framework/tools/signtool-exe#sign-command-options).</span><span class="sxs-lookup"><span data-stu-id="3f760-130">For a list of the options supported by the `sign` command, see [sign Command Options](/dotnet/framework/tools/signtool-exe#sign-command-options).</span></span>|  
|`Timestamp`|<span data-ttu-id="3f760-131">Присваивает отметки времени для файлов.</span><span class="sxs-lookup"><span data-stu-id="3f760-131">Time-stamps files.</span></span> <span data-ttu-id="3f760-132">Список параметров, поддерживаемых командой `TimeStamp`, см. в разделе [Параметры команды "TimeStamp"](/dotnet/framework/tools/signtool-exe#timestamp-command-options).</span><span class="sxs-lookup"><span data-stu-id="3f760-132">For a list of the options supported by the `TimeStamp` command, see [TimeStamp Command Options](/dotnet/framework/tools/signtool-exe#timestamp-command-options).</span></span>|  
|`Verify`|<span data-ttu-id="3f760-133">Проверяет цифровую подпись файлов, определяя, был ли сертификат подписи выдан доверенным центром сертификации, был ли сертификат подписи отозван, и, если требуется, действителен ли сертификат подписи для конкретной политики.</span><span class="sxs-lookup"><span data-stu-id="3f760-133">Verifies the digital signature of files by determining whether the signing certificate was issued by a trusted authority, whether the signing certificate has been revoked, and, optionally, whether the signing certificate is valid for a specific policy.</span></span> <span data-ttu-id="3f760-134">Список параметров, поддерживаемых командой `Verify`, см. в разделе [Параметры команды "Verify"](/dotnet/framework/tools/signtool-exe#verify-command-options).</span><span class="sxs-lookup"><span data-stu-id="3f760-134">For a list of the options supported by the `Verify` command, see [Verify Command Options](/dotnet/framework/tools/signtool-exe#verify-command-options).</span></span>|

 <span data-ttu-id="3f760-135">Следующие параметры доступны для всех команд программы Sign Tool.</span><span class="sxs-lookup"><span data-stu-id="3f760-135">The following options apply to all Sign Tool commands.</span></span>  
  
|<span data-ttu-id="3f760-136">Глобальный параметр</span><span class="sxs-lookup"><span data-stu-id="3f760-136">Global option</span></span>|<span data-ttu-id="3f760-137">Описание</span><span class="sxs-lookup"><span data-stu-id="3f760-137">Description</span></span>|  
|----|----|  
|<span data-ttu-id="3f760-138">**/q**</span><span class="sxs-lookup"><span data-stu-id="3f760-138">**/q**</span></span>|<span data-ttu-id="3f760-139">Не отображает выходные данные, если команда выполнена успешно, и отображает минимальные выходные данные, если команда завершилась ошибкой.</span><span class="sxs-lookup"><span data-stu-id="3f760-139">Displays no output if the command runs successfully, and displays minimal output if the command fails.</span></span>|  
|<span data-ttu-id="3f760-140">**/v**</span><span class="sxs-lookup"><span data-stu-id="3f760-140">**/v**</span></span>|<span data-ttu-id="3f760-141">Отображает подробные выходные данные независимо от того, выполнена ли команда успешно или с ошибкой, и отображает предупреждения.</span><span class="sxs-lookup"><span data-stu-id="3f760-141">Displays verbose output regardless of whether the command runs successfully or fails, and displays warning messages.</span></span>|  
|<span data-ttu-id="3f760-142">**/debug**</span><span class="sxs-lookup"><span data-stu-id="3f760-142">**/debug**</span></span>|<span data-ttu-id="3f760-143">Отображает отладочную информацию.</span><span class="sxs-lookup"><span data-stu-id="3f760-143">Displays debugging information.</span></span>|  

 
## <a name="catdb-command-options"></a><span data-ttu-id="3f760-144">Параметры команды catdb</span><span class="sxs-lookup"><span data-stu-id="3f760-144">Catdb command options</span></span>  

 <span data-ttu-id="3f760-145">В следующей таблице перечислены параметры, которые могут использоваться с командой `Catdb`.</span><span class="sxs-lookup"><span data-stu-id="3f760-145">The following table lists the options that can be used with the `Catdb` command.</span></span>

| <span data-ttu-id="3f760-146">Параметр "catdb"</span><span class="sxs-lookup"><span data-stu-id="3f760-146">Catdb option</span></span> | <span data-ttu-id="3f760-147">Описание</span><span class="sxs-lookup"><span data-stu-id="3f760-147">Description</span></span> |
|----|----| 
| <span data-ttu-id="3f760-148">**/d**</span><span class="sxs-lookup"><span data-stu-id="3f760-148">**/d**</span></span> | <span data-ttu-id="3f760-149">Указывает, что база данных каталога по умолчанию будет обновлена.</span><span class="sxs-lookup"><span data-stu-id="3f760-149">Specifies that the default catalog database be updated.</span></span> <span data-ttu-id="3f760-150">Если не используется ни параметр **/d** , ни **/G** , средство SignTool обновляет базу данных системных компонентов и драйверов.</span><span class="sxs-lookup"><span data-stu-id="3f760-150">If neither the **/d** nor **/g** option is used, SignTool updates the system component and driver database.</span></span> |
| <span data-ttu-id="3f760-151">**/G** *GUID*</span><span class="sxs-lookup"><span data-stu-id="3f760-151">**/g** *GUID*</span></span> | <span data-ttu-id="3f760-152">Указывает, что база данных каталога, определяемая идентификатором GUID, будет обновлена.</span><span class="sxs-lookup"><span data-stu-id="3f760-152">Specifies that the catalog database identified by the GUID be updated.</span></span>|
| <span data-ttu-id="3f760-153">**/r**</span><span class="sxs-lookup"><span data-stu-id="3f760-153">**/r**</span></span> | <span data-ttu-id="3f760-154">Удаляет указанный каталог из базы данных каталога.</span><span class="sxs-lookup"><span data-stu-id="3f760-154">Removes the specified catalog from the catalog database.</span></span> <span data-ttu-id="3f760-155">Если этот параметр не указан, средство SignTool добавит указанный каталог в базу данных каталога.</span><span class="sxs-lookup"><span data-stu-id="3f760-155">If this option is not specified, SignTool will add the specified catalog to the catalog database.</span></span>|
| <span data-ttu-id="3f760-156">**/u**</span><span class="sxs-lookup"><span data-stu-id="3f760-156">**/u**</span></span> | <span data-ttu-id="3f760-157">Указывает, что для добавленных файлов каталога автоматически создается уникальное имя.</span><span class="sxs-lookup"><span data-stu-id="3f760-157">Specifies that a unique name be automatically generated for the added catalog files.</span></span> <span data-ttu-id="3f760-158">Пир необходимости, файлы каталогов переименовываются, чтобы предотвратить конфликты имен с существующими файлами каталогов.</span><span class="sxs-lookup"><span data-stu-id="3f760-158">If necessary, the catalog files are renamed to prevent name conflicts with existing catalog files.</span></span> <span data-ttu-id="3f760-159">Если этот параметр не указан, средство SignTool перезаписывает существующий каталог, имя которого совпадает с именем добавляемого каталога.</span><span class="sxs-lookup"><span data-stu-id="3f760-159">If this option is not specified, SignTool overwrites any existing catalog that has the same name as the catalog being added.</span></span>|

> [!Note]  
> <span data-ttu-id="3f760-160">Базы данных каталога используются для автоматического поиска файлов каталога.</span><span class="sxs-lookup"><span data-stu-id="3f760-160">Catalog databases are used for automatic lookup of catalog files.</span></span>


## <a name="sign-command-options"></a><span data-ttu-id="3f760-161">Параметры команды "Sign"</span><span class="sxs-lookup"><span data-stu-id="3f760-161">Sign command options</span></span>  

 <span data-ttu-id="3f760-162">В следующей таблице перечислены параметры, которые могут использоваться с командой `sign`.</span><span class="sxs-lookup"><span data-stu-id="3f760-162">The following table lists the options that can be used with the `sign` command.</span></span>  
  
|<span data-ttu-id="3f760-163">Параметр команды "sign"</span><span class="sxs-lookup"><span data-stu-id="3f760-163">Sign command option</span></span>|<span data-ttu-id="3f760-164">Описание</span><span class="sxs-lookup"><span data-stu-id="3f760-164">Description</span></span>|  
|----|----| 
|`/a`|<span data-ttu-id="3f760-165">Автоматически выбирает лучший сертификат подписи.</span><span class="sxs-lookup"><span data-stu-id="3f760-165">Automatically selects the best signing certificate.</span></span> <span data-ttu-id="3f760-166">Программа Sign Tool найдет все действительные сертификаты, которые удовлетворяют всем указанным условиям, и выберет тот, который действителен в течение наиболее длительного периода времени.</span><span class="sxs-lookup"><span data-stu-id="3f760-166">Sign Tool will find all valid certificates that satisfy all specified conditions and select the one that is valid for the longest time.</span></span> <span data-ttu-id="3f760-167">Если этот параметр не указан, программа Sign Tool находит и использует только один допустимый сертификат подписи.</span><span class="sxs-lookup"><span data-stu-id="3f760-167">If this option is not present, Sign Tool expects to find only one valid signing certificate.</span></span>|  
|<span data-ttu-id="3f760-168">`/ac`  *file*</span><span class="sxs-lookup"><span data-stu-id="3f760-168">`/ac`  *file*</span></span>|<span data-ttu-id="3f760-169">Добавляет дополнительный сертификат из файла *file* в блок подписи.</span><span class="sxs-lookup"><span data-stu-id="3f760-169">Adds an additional certificate from *file* to the signature block.</span></span>|  
|`/as`|<span data-ttu-id="3f760-170">Добавляет эту подпись.</span><span class="sxs-lookup"><span data-stu-id="3f760-170">Appends this signature.</span></span> <span data-ttu-id="3f760-171">Если основная подпись отсутствует, данная подпись становится основной.</span><span class="sxs-lookup"><span data-stu-id="3f760-171">If no primary signature is present, this signature is made the primary signature instead.</span></span>|  
|<span data-ttu-id="3f760-172">`/c`  *CertTemplateName*</span><span class="sxs-lookup"><span data-stu-id="3f760-172">`/c`  *CertTemplateName*</span></span>|<span data-ttu-id="3f760-173">Указывает имя шаблона сертификата (расширение Microsoft) для сертификата подписи.</span><span class="sxs-lookup"><span data-stu-id="3f760-173">Specifies the Certificate Template Name (a Microsoft extension) for the signing certificate.</span></span>|  
|<span data-ttu-id="3f760-174">`/csp`  *CSPName*</span><span class="sxs-lookup"><span data-stu-id="3f760-174">`/csp`  *CSPName*</span></span>|<span data-ttu-id="3f760-175">Указывается поставщик служб шифрования (CSP), содержащий контейнер закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="3f760-175">Specifies the cryptographic service provider (CSP) that contains the private key container.</span></span>|  
|<span data-ttu-id="3f760-176">`/d`  *Desc*</span><span class="sxs-lookup"><span data-stu-id="3f760-176">`/d`  *Desc*</span></span>|<span data-ttu-id="3f760-177">Задает описание подписанного содержимого.</span><span class="sxs-lookup"><span data-stu-id="3f760-177">Specifies a description of the signed content.</span></span>|  
|<span data-ttu-id="3f760-178">`/dg`  *Путь*</span><span class="sxs-lookup"><span data-stu-id="3f760-178">`/dg`  *Path*</span></span>|<span data-ttu-id="3f760-179">Формирует дайджест для подписи и неподписанные файлы PKCS7.</span><span class="sxs-lookup"><span data-stu-id="3f760-179">Generates the digest to be signed and the unsigned PKCS7 files.</span></span> <span data-ttu-id="3f760-180">Выходные данные дайджеста и PKCS7 имеют следующие файлы: *пас\филенаме.Диг* и *Path\FileName.p7u*.</span><span class="sxs-lookup"><span data-stu-id="3f760-180">The output digest and PKCS7 files will be: *Path\FileName.dig* and *Path\FileName.p7u*.</span></span> <span data-ttu-id="3f760-181">Чтобы вывести дополнительный XML-файл, см. раздел <strong>/дксмл</strong>.</span><span class="sxs-lookup"><span data-stu-id="3f760-181">To output an additional XML file, see <strong>/dxml</strong>.</span></span>|  
|<span data-ttu-id="3f760-182">`/di`  *Путь*</span><span class="sxs-lookup"><span data-stu-id="3f760-182">`/di`  *Path*</span></span>|<span data-ttu-id="3f760-183">Создает подпись путем приема со знакомого дайджеста в неподписанный файл PKCS7.</span><span class="sxs-lookup"><span data-stu-id="3f760-183">Creates the signature by ingesting the signed digest to the unsigned PKCS7 file.</span></span> <span data-ttu-id="3f760-184">Входное хэш-значение и неподписанные файлы PKCS7 должны быть: *пас\филенаме.Диг.сигнед* и *Path\FileName.p7u*.</span><span class="sxs-lookup"><span data-stu-id="3f760-184">The input signed digest and unsigned PKCS7 files should be: *Path\FileName.dig.signed* and *Path\FileName.p7u*.</span></span>|  
|<span data-ttu-id="3f760-185">`/dlib`  *КОМПОНОВКИ*</span><span class="sxs-lookup"><span data-stu-id="3f760-185">`/dlib`  *DLL*</span></span>|<span data-ttu-id="3f760-186">Указывает DLL-библиотеку, реализующую <code>AuthenticodeDigestSign</code> функцию для подписи дайджеста.</span><span class="sxs-lookup"><span data-stu-id="3f760-186">Specifies the DLL implementing the <code>AuthenticodeDigestSign</code> function to sign the digest with.</span></span> <span data-ttu-id="3f760-187">Этот параметр аналогичен использованию средства <strong>SignTool</strong> отдельно с коммутаторами <strong>/ДГ</strong>, <strong>/ДС</strong>и <strong>/ди</strong> , за исключением того, что этот параметр вызывает все три как одну атомарную операцию.</span><span class="sxs-lookup"><span data-stu-id="3f760-187">This option is equivalent to using <strong>SignTool</strong> separately with the <strong>/dg</strong>, <strong>/ds</strong>, and <strong>/di</strong> switches, except this option invokes all three as one atomic operation.</span></span>|  
|<span data-ttu-id="3f760-188">`/dmdf`  *Файлов*</span><span class="sxs-lookup"><span data-stu-id="3f760-188">`/dmdf`  *Filename*</span></span>|<span data-ttu-id="3f760-189">При использовании с параметром <strong>/ДГ</strong> передает содержимое файла в <code>AuthenticodeDigestSign</code> функцию без изменения.</span><span class="sxs-lookup"><span data-stu-id="3f760-189">When used with the <strong>/dg</strong> option, passes the file’s contents to the <code>AuthenticodeDigestSign</code> function without modification.</span></span>|  
|`/ds`  |<span data-ttu-id="3f760-190">Подписывает только дайджест.</span><span class="sxs-lookup"><span data-stu-id="3f760-190">Signs the digest only.</span></span> <span data-ttu-id="3f760-191">Входной файл должен быть дайджестом, созданным с помощью параметра <strong>/ДГ</strong> .</span><span class="sxs-lookup"><span data-stu-id="3f760-191">The input file should be the digest generated by the <strong>/dg</strong> option.</span></span> <span data-ttu-id="3f760-192">Выходной файл будет иметь значение: *File. подпись*.</span><span class="sxs-lookup"><span data-stu-id="3f760-192">The output file will be: *File.signed*.</span></span>|  
|<span data-ttu-id="3f760-193">`/du`  *URL*</span><span class="sxs-lookup"><span data-stu-id="3f760-193">`/du`  *URL*</span></span>|<span data-ttu-id="3f760-194">Задает URL-адрес для расширенного описания подписанного содержимого.</span><span class="sxs-lookup"><span data-stu-id="3f760-194">Specifies a Uniform Resource Locator (URL) for the expanded description of the signed content.</span></span>|  
|`/dxml`  |<span data-ttu-id="3f760-195">При использовании с параметром <strong>/ДГ</strong> создает XML-файл.</span><span class="sxs-lookup"><span data-stu-id="3f760-195">When used with the <strong>/dg</strong> option, produces an XML file.</span></span> <span data-ttu-id="3f760-196">Выходной файл будет: *Path\FileName.dig.xml*.</span><span class="sxs-lookup"><span data-stu-id="3f760-196">The output file will be: *Path\FileName.dig.xml*.</span></span>|  
|<span data-ttu-id="3f760-197">`/f`  *SignCertFile*</span><span class="sxs-lookup"><span data-stu-id="3f760-197">`/f`  *SignCertFile*</span></span>|<span data-ttu-id="3f760-198">Задает сертификат подписи в файле.</span><span class="sxs-lookup"><span data-stu-id="3f760-198">Specifies the signing certificate in a file.</span></span> <span data-ttu-id="3f760-199">Если формат файла — Personal Information Exchange (PFX), и он защищен паролем, задайте пароль с помощью параметра `/p`.</span><span class="sxs-lookup"><span data-stu-id="3f760-199">If the file is in Personal Information Exchange (PFX) format and protected by a password, use the `/p` option to specify the password.</span></span> <span data-ttu-id="3f760-200">Если файл не содержит закрытых ключей, с помощью параметров `/csp` и `/kc` задайте CSP и имя контейнера закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="3f760-200">If the file does not contain private keys, use the `/csp` and `/kc` options to specify the CSP and private key container name.</span></span>|  
|<span data-ttu-id="3f760-201">`/fd`*алгоритм*</span><span class="sxs-lookup"><span data-stu-id="3f760-201">`/fd` *alg*</span></span>|<span data-ttu-id="3f760-202">Задает алгоритм хэш-кода файла, который будет использоваться при создании подписей файлов.</span><span class="sxs-lookup"><span data-stu-id="3f760-202">Specifies the file digest algorithm to use for creating file signatures.</span></span> </br> <span data-ttu-id="3f760-203">**Примечание.** Если во время подписывания не указан параметр <strong>/FD</strong> , создается предупреждение.</span><span class="sxs-lookup"><span data-stu-id="3f760-203">**Note:** A warning is generated if <strong>/fd</strong> switch is not provided while signing.</span></span> <span data-ttu-id="3f760-204">Алгоритмом по умолчанию является SHA1, но рекомендуется использовать SHA256.</span><span class="sxs-lookup"><span data-stu-id="3f760-204">The default alg is SHA1 but SHA256 is recommended.</span></span>|
|<span data-ttu-id="3f760-205">`/fd`  *certHash*</span><span class="sxs-lookup"><span data-stu-id="3f760-205">`/fd`  *certHash*</span></span>|<span data-ttu-id="3f760-206">Указание строки certHash является действием по умолчанию для алгоритма, используемого в сертификате для подписи.</span><span class="sxs-lookup"><span data-stu-id="3f760-206">Specifying the string certHash will default to the algorithm used on the signing certificate.</span></span> </br> <span data-ttu-id="3f760-207">**Примечание.** Доступно только в комплектах Windows 10, 20236 и более поздних версиях.</span><span class="sxs-lookup"><span data-stu-id="3f760-207">**Note:** Only available in Windows 10 kit builds 20236 and greater.</span></span>|  
|<span data-ttu-id="3f760-208">`/i`  *IssuerName*</span><span class="sxs-lookup"><span data-stu-id="3f760-208">`/i`  *IssuerName*</span></span>|<span data-ttu-id="3f760-209">Задает имя поставщика сертификата подписи.</span><span class="sxs-lookup"><span data-stu-id="3f760-209">Specifies the name of the issuer of the signing certificate.</span></span> <span data-ttu-id="3f760-210">Это значение может быть подстрокой полного имени поставщика.</span><span class="sxs-lookup"><span data-stu-id="3f760-210">This value can be a substring of the entire issuer name.</span></span>|  
|<span data-ttu-id="3f760-211">`/kc`  *PrivKeyContainerName*</span><span class="sxs-lookup"><span data-stu-id="3f760-211">`/kc`  *PrivKeyContainerName*</span></span>|<span data-ttu-id="3f760-212">Задает имя контейнера закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="3f760-212">Specifies the private key container name.</span></span>|  
|<span data-ttu-id="3f760-213">`/n`  *SubjectName*</span><span class="sxs-lookup"><span data-stu-id="3f760-213">`/n`  *SubjectName*</span></span>|<span data-ttu-id="3f760-214">Задает имя субъекта сертификата подписи.</span><span class="sxs-lookup"><span data-stu-id="3f760-214">Specifies the name of the subject of the signing certificate.</span></span> <span data-ttu-id="3f760-215">Это значение может быть подстрокой полного имени субъекта.</span><span class="sxs-lookup"><span data-stu-id="3f760-215">This value can be a substring of the entire subject name.</span></span>|  
|`/nph`|<span data-ttu-id="3f760-216">Если поддерживается, отключает хэши страниц для исполняемых файлов.</span><span class="sxs-lookup"><span data-stu-id="3f760-216">If supported, suppresses page hashes for executable files.</span></span> <span data-ttu-id="3f760-217">Значение по умолчанию определяется переменной среды SIGNTOOL_PAGE_HASHES и версией файла "wintrust.dll".</span><span class="sxs-lookup"><span data-stu-id="3f760-217">The default is determined by the SIGNTOOL_PAGE_HASHES environment variable and by the wintrust.dll version.</span></span> <span data-ttu-id="3f760-218">Этот параметр игнорируется для файлов, отличных от PE-файлов.</span><span class="sxs-lookup"><span data-stu-id="3f760-218">This option is ignored for non-PE files.</span></span>|  
|<span data-ttu-id="3f760-219">`/p`  *Password*</span><span class="sxs-lookup"><span data-stu-id="3f760-219">`/p`  *Password*</span></span>|<span data-ttu-id="3f760-220">Задает пароль, который используется при открытии PFX-файла.</span><span class="sxs-lookup"><span data-stu-id="3f760-220">Specifies the password to use when opening a PFX file.</span></span> <span data-ttu-id="3f760-221">(PFX-файл указывается с помощью параметра `/f`.)</span><span class="sxs-lookup"><span data-stu-id="3f760-221">(Use the `/f` option to specify a PFX file.)</span></span>|  
|<span data-ttu-id="3f760-222">`/p7` *Путь*</span><span class="sxs-lookup"><span data-stu-id="3f760-222">`/p7` *Path*</span></span>|<span data-ttu-id="3f760-223">Указывает, что для каждого заданного файла содержимого создается файл PKCS #7.</span><span class="sxs-lookup"><span data-stu-id="3f760-223">Specifies that a Public Key Cryptography Standards (PKCS) #7 file is produced for each specified content file.</span></span> <span data-ttu-id="3f760-224">Файлы PKCS #7 имеют имена вида *путь*\\*имя_файла*.p7.</span><span class="sxs-lookup"><span data-stu-id="3f760-224">PKCS #7 files are named *path*\\*filename*.p7.</span></span>|  
|<span data-ttu-id="3f760-225">`/p7ce` *Value*</span><span class="sxs-lookup"><span data-stu-id="3f760-225">`/p7ce` *Value*</span></span>|<span data-ttu-id="3f760-226">Задает параметры для подписанного содержимого PKCS #7.</span><span class="sxs-lookup"><span data-stu-id="3f760-226">Specifies options for the signed PKCS #7 content.</span></span> <span data-ttu-id="3f760-227">Задайте значение *Value* как "Embedded", чтобы внедрить подписанное содержимое в файл PKCS #7, или как "DetachedSignedData", чтобы создать подписанную часть данных отсоединенного файла PKCS #7.</span><span class="sxs-lookup"><span data-stu-id="3f760-227">Set *Value* to "Embedded" to embed the signed content in the PKCS #7 file, or to "DetachedSignedData" to produce the signed data portion of a detached PKCS #7 file.</span></span> <span data-ttu-id="3f760-228">Если параметр `/p7ce` не используется, подписанное содержимое встраивается по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="3f760-228">If the `/p7ce` option is not used, the signed content is embedded by default.</span></span>|  
|<span data-ttu-id="3f760-229">`/p7co` *\<OID>*</span><span class="sxs-lookup"><span data-stu-id="3f760-229">`/p7co` *\<OID>*</span></span>|<span data-ttu-id="3f760-230">Задает идентификатор объекта (OID), определяющий подписанное содержимое PKCS #7.</span><span class="sxs-lookup"><span data-stu-id="3f760-230">Specifies the object identifier (OID) that identifies the signed PKCS #7 content.</span></span>|  
|`/ph`|<span data-ttu-id="3f760-231">Если поддерживается, генерирует хэши страниц для исполняемых файлов.</span><span class="sxs-lookup"><span data-stu-id="3f760-231">If supported, generates page hashes for executable files.</span></span>|  
|<span data-ttu-id="3f760-232">`/r`  *RootSubjectName*</span><span class="sxs-lookup"><span data-stu-id="3f760-232">`/r`  *RootSubjectName*</span></span>|<span data-ttu-id="3f760-233">Задает имя субъекта корневого сертификата, к которому должна быть протянута цепочка сертификата подписи.</span><span class="sxs-lookup"><span data-stu-id="3f760-233">Specifies the name of the subject of the root certificate that the signing certificate must chain to.</span></span> <span data-ttu-id="3f760-234">Это значение может быть подстрокой полного имени субъекта корневого сертификата.</span><span class="sxs-lookup"><span data-stu-id="3f760-234">This value may be a substring of the entire subject name of the root certificate.</span></span>|  
|<span data-ttu-id="3f760-235">`/s`  *StoreName*</span><span class="sxs-lookup"><span data-stu-id="3f760-235">`/s`  *StoreName*</span></span>|<span data-ttu-id="3f760-236">Указывает хранилище, которое открывается при поиске сертификата.</span><span class="sxs-lookup"><span data-stu-id="3f760-236">Specifies the store to open when searching for the certificate.</span></span> <span data-ttu-id="3f760-237">Если этот дополнительный параметр не указан, открывается хранилище `My`.</span><span class="sxs-lookup"><span data-stu-id="3f760-237">If this option is not specified, the `My` store is opened.</span></span>|  
|<span data-ttu-id="3f760-238">`/sha1`  *Hash*</span><span class="sxs-lookup"><span data-stu-id="3f760-238">`/sha1`  *Hash*</span></span>|<span data-ttu-id="3f760-239">Задает хэш SHA1 сертификата подписи.</span><span class="sxs-lookup"><span data-stu-id="3f760-239">Specifies the SHA1 hash of the signing certificate.</span></span> <span data-ttu-id="3f760-240">Хэш SHA1 обычно указывается, когда несколько сертификатов удовлетворяют критериям, заданным остальными ключами.</span><span class="sxs-lookup"><span data-stu-id="3f760-240">The SHA1 hash is commonly specified when multiple certificates satisfy the criteria specified by the remaining switches.</span></span>|  
|`/sm`|<span data-ttu-id="3f760-241">Указывает, что вместо пользовательского хранилища используется хранилище на компьютере.</span><span class="sxs-lookup"><span data-stu-id="3f760-241">Specifies that a machine store, instead of a user store, is used.</span></span>|  
|<span data-ttu-id="3f760-242">`/t`  *URL*</span><span class="sxs-lookup"><span data-stu-id="3f760-242">`/t`  *URL*</span></span>|<span data-ttu-id="3f760-243">Задает URL-адрес сервера отметок времени.</span><span class="sxs-lookup"><span data-stu-id="3f760-243">Specifies the URL of the time stamp server.</span></span> <span data-ttu-id="3f760-244">Если этот параметр (или параметр `/tr`) отсутствует, подписанному файлу не присваивается отметка времени.</span><span class="sxs-lookup"><span data-stu-id="3f760-244">If this option (or `/tr`) is not present, the signed file will not be time stamped.</span></span> <span data-ttu-id="3f760-245">Если присвоение отметки времени не удалось, выдается предупреждение.</span><span class="sxs-lookup"><span data-stu-id="3f760-245">A warning is generated if time stamping fails.</span></span> <span data-ttu-id="3f760-246">Данный параметр невозможно использовать одновременно с параметром `/tr`.</span><span class="sxs-lookup"><span data-stu-id="3f760-246">This option cannot be used with the `/tr` option.</span></span>|  
|<span data-ttu-id="3f760-247">`/td`  *alg*</span><span class="sxs-lookup"><span data-stu-id="3f760-247">`/td`  *alg*</span></span>|<span data-ttu-id="3f760-248">Используется с параметром `/tr`, чтобы запросить алгоритм дайджеста, используемый сервером отметок времени RFC 3161.</span><span class="sxs-lookup"><span data-stu-id="3f760-248">Used with the `/tr` option to request a digest algorithm used by the RFC 3161 time stamp server.</span></span> </br> <span data-ttu-id="3f760-249">**Примечание.** Если при отметке времени не указан параметр <strong>/ТД</strong> , создается предупреждение.</span><span class="sxs-lookup"><span data-stu-id="3f760-249">**Note:** A warning is generated if <strong>/td</strong> switch is not provided while timestamping.</span></span> <span data-ttu-id="3f760-250">Алгоритмом по умолчанию является SHA1, но рекомендуется использовать SHA256.</span><span class="sxs-lookup"><span data-stu-id="3f760-250">The default alg is SHA1 but SHA256 is recommended.</span></span> <br/> <span data-ttu-id="3f760-251">Параметр <strong>/ТД</strong> должен быть объявлен после параметра <strong>/tr</strong> , а не до.</span><span class="sxs-lookup"><span data-stu-id="3f760-251">The <strong>/td</strong> switch must be declared after the <strong>/tr</strong> switch, not before.</span></span> <span data-ttu-id="3f760-252">Если параметр <strong>/ТД</strong> объявлен перед параметром <strong>/tr</strong> , то возвращаемая отметка времени возвращается из алгоритма SHA1 вместо предполагаемого алгоритма SHA256.</span><span class="sxs-lookup"><span data-stu-id="3f760-252">If the <strong>/td</strong> switch is declared before the <strong>/tr</strong> switch, the timestamp that is returned is from an SHA1 algorithm instead of the intended SHA256 algorithm.</span></span> |
|<span data-ttu-id="3f760-253">`/tr`  *URL*</span><span class="sxs-lookup"><span data-stu-id="3f760-253">`/tr`  *URL*</span></span>|<span data-ttu-id="3f760-254">Задает URL-адрес сервера отметок времени RFC 3161.</span><span class="sxs-lookup"><span data-stu-id="3f760-254">Specifies the URL of the RFC 3161 time stamp server.</span></span> <span data-ttu-id="3f760-255">Если этот параметр (или параметр `/t`) отсутствует, подписанному файлу не присваивается отметка времени.</span><span class="sxs-lookup"><span data-stu-id="3f760-255">If this option (or `/t`) is not present, the signed file will not be time stamped.</span></span> <span data-ttu-id="3f760-256">Если присвоение отметки времени не удалось, выдается предупреждение.</span><span class="sxs-lookup"><span data-stu-id="3f760-256">A warning is generated if time stamping fails.</span></span> <span data-ttu-id="3f760-257">Данный параметр невозможно использовать одновременно с параметром `/t`.</span><span class="sxs-lookup"><span data-stu-id="3f760-257">This option cannot be used with the `/t` option.</span></span>|  
|<span data-ttu-id="3f760-258">`/u`  *Usage*</span><span class="sxs-lookup"><span data-stu-id="3f760-258">`/u`  *Usage*</span></span>|<span data-ttu-id="3f760-259">Задает расширенное использование ключа (EKU), которое должно быть представлено в сертификате подписи.</span><span class="sxs-lookup"><span data-stu-id="3f760-259">Specifies the enhanced key usage (EKU) that must be present in the signing certificate.</span></span> <span data-ttu-id="3f760-260">Значение использования может быть задано идентификатором объекта или строкой.</span><span class="sxs-lookup"><span data-stu-id="3f760-260">The usage value can be specified by OID or string.</span></span> <span data-ttu-id="3f760-261">По умолчанию используется подписывание кода (1.3.6.1.5.5.7.3.3).</span><span class="sxs-lookup"><span data-stu-id="3f760-261">The default usage is "Code Signing" (1.3.6.1.5.5.7.3.3).</span></span>|  
|`/uw`|<span data-ttu-id="3f760-262">Задает использование "Windows System Component Verification" (1.3.6.1.4.1.311.10.3.6).</span><span class="sxs-lookup"><span data-stu-id="3f760-262">Specifies usage of "Windows System Component Verification" (1.3.6.1.4.1.311.10.3.6).</span></span>|  
  
 <span data-ttu-id="3f760-263">Примеры использования см. в разделе [Использование средства SignTool для подписания файла](using-signtool-to-sign-a-file.md).</span><span class="sxs-lookup"><span data-stu-id="3f760-263">For usage examples, see [Using SignTool to Sign a File](using-signtool-to-sign-a-file.md).</span></span>  
  

## <a name="timestamp-command-options"></a><span data-ttu-id="3f760-264">Параметры команды TimeStamp</span><span class="sxs-lookup"><span data-stu-id="3f760-264">TimeStamp command options</span></span>  

 <span data-ttu-id="3f760-265">В следующей таблице перечислены параметры, которые могут использоваться с командой `TimeStamp`.</span><span class="sxs-lookup"><span data-stu-id="3f760-265">The following table lists the options that can be used with the `TimeStamp` command.</span></span>  
  
|<span data-ttu-id="3f760-266">Параметр "TimeStamp"</span><span class="sxs-lookup"><span data-stu-id="3f760-266">TimeStamp option</span></span>|<span data-ttu-id="3f760-267">Описание</span><span class="sxs-lookup"><span data-stu-id="3f760-267">Description</span></span>|  
|----|----|  
|`/p7`|<span data-ttu-id="3f760-268">Присваивает файлам PKCS #7 отметки времени.</span><span class="sxs-lookup"><span data-stu-id="3f760-268">Time stamps PKCS #7 files.</span></span>|  
|<span data-ttu-id="3f760-269">`/t`  *URL*</span><span class="sxs-lookup"><span data-stu-id="3f760-269">`/t`  *URL*</span></span>|<span data-ttu-id="3f760-270">Задает URL-адрес сервера отметок времени.</span><span class="sxs-lookup"><span data-stu-id="3f760-270">Specifies the URL of the time stamp server.</span></span> <span data-ttu-id="3f760-271">Файл, получающий отметку времени, должен быть заранее подписан.</span><span class="sxs-lookup"><span data-stu-id="3f760-271">The file being time stamped must have previously been signed.</span></span> <span data-ttu-id="3f760-272">Необходимо использовать параметр `/t` или `/tr`.</span><span class="sxs-lookup"><span data-stu-id="3f760-272">Either the `/t` or the `/tr` option is required.</span></span>|  
|<span data-ttu-id="3f760-273">`/td`  *alg*</span><span class="sxs-lookup"><span data-stu-id="3f760-273">`/td`  *alg*</span></span>|<span data-ttu-id="3f760-274">Используется с параметром `/tr`, чтобы запросить алгоритм дайджеста, используемый сервером отметок времени RFC 3161.</span><span class="sxs-lookup"><span data-stu-id="3f760-274">Used with the `/tr` option to request a digest algorithm used by the RFC 3161 time stamp server.</span></span> </br> <span data-ttu-id="3f760-275">**Примечание.** Если при отметке времени не указан параметр <strong>/ТД</strong> , создается предупреждение.</span><span class="sxs-lookup"><span data-stu-id="3f760-275">**Note:** A warning is generated if <strong>/td</strong> switch is not provided while timestamping.</span></span> <span data-ttu-id="3f760-276">Алгоритмом по умолчанию является SHA1, но рекомендуется использовать SHA256.</span><span class="sxs-lookup"><span data-stu-id="3f760-276">The default alg is SHA1 but SHA256 is recommended.</span></span> <br/> <span data-ttu-id="3f760-277">Параметр <strong>/ТД</strong> должен быть объявлен после параметра <strong>/tr</strong> , а не до.</span><span class="sxs-lookup"><span data-stu-id="3f760-277">The <strong>/td</strong> switch must be declared after the <strong>/tr</strong> switch, not before.</span></span> <span data-ttu-id="3f760-278">Если параметр <strong>/ТД</strong> объявлен перед параметром <strong>/tr</strong> , то возвращаемая отметка времени возвращается из алгоритма SHA1 вместо предполагаемого алгоритма SHA256.</span><span class="sxs-lookup"><span data-stu-id="3f760-278">If the <strong>/td</strong> switch is declared before the <strong>/tr</strong> switch, the timestamp that is returned is from an SHA1 algorithm instead of the intended SHA256 algorithm.</span></span> |
|<span data-ttu-id="3f760-279">`/tp` *index*</span><span class="sxs-lookup"><span data-stu-id="3f760-279">`/tp` *index*</span></span>|<span data-ttu-id="3f760-280">Присваивает подписи метку времени в *index*.</span><span class="sxs-lookup"><span data-stu-id="3f760-280">Time stamps the signature at *index*.</span></span>|  
|<span data-ttu-id="3f760-281">`/tr`  *URL*</span><span class="sxs-lookup"><span data-stu-id="3f760-281">`/tr`  *URL*</span></span>|<span data-ttu-id="3f760-282">Задает URL-адрес сервера отметок времени RFC 3161.</span><span class="sxs-lookup"><span data-stu-id="3f760-282">Specifies the URL of the RFC 3161 time stamp server.</span></span> <span data-ttu-id="3f760-283">Файл, получающий отметку времени, должен быть заранее подписан.</span><span class="sxs-lookup"><span data-stu-id="3f760-283">The file being time stamped must have previously been signed.</span></span> <span data-ttu-id="3f760-284">Необходимо использовать параметр `/tr` или `/t`.</span><span class="sxs-lookup"><span data-stu-id="3f760-284">Either the `/tr` or the `/t` option is required.</span></span>|  


## <a name="verify-command-options"></a><span data-ttu-id="3f760-285">Параметры команды "проверить"</span><span class="sxs-lookup"><span data-stu-id="3f760-285">Verify command options</span></span>  

|<span data-ttu-id="3f760-286">Параметр "Verify"</span><span class="sxs-lookup"><span data-stu-id="3f760-286">Verify option</span></span>|<span data-ttu-id="3f760-287">Описание</span><span class="sxs-lookup"><span data-stu-id="3f760-287">Description</span></span>|
|----|----|
| <span data-ttu-id="3f760-288">**/a**</span><span class="sxs-lookup"><span data-stu-id="3f760-288">**/a**</span></span> | <span data-ttu-id="3f760-289">Указывает, что все методы могут использоваться для проверки файла.</span><span class="sxs-lookup"><span data-stu-id="3f760-289">Specifies that all methods can be used to verify the file.</span></span> <span data-ttu-id="3f760-290">Сначала выполняется поиск в базах данных каталогов, чтобы определить, подписан ли файл в каталоге.</span><span class="sxs-lookup"><span data-stu-id="3f760-290">First, the catalog databases are searched to determine whether the file is signed in a catalog.</span></span> <span data-ttu-id="3f760-291">Если файл не подписан ни в одном каталоге, средство SignTool пытается проверить внедренную подпись файла.</span><span class="sxs-lookup"><span data-stu-id="3f760-291">If the file is not signed in any catalog, SignTool attempts to verify the file's embedded signature.</span></span> <span data-ttu-id="3f760-292">Этот параметр рекомендуется использовать при проверке файлов, которые могут быть подписаны или не подписаны в каталоге.</span><span class="sxs-lookup"><span data-stu-id="3f760-292">This option is recommended when verifying files that may or may not be signed in a catalog.</span></span> <span data-ttu-id="3f760-293">Примеры файлов, которые могут быть не подписаны, содержат файлы или драйверы Windows.</span><span class="sxs-lookup"><span data-stu-id="3f760-293">Examples of files that may or may not be signed include Windows files or drivers.</span></span> |
| <span data-ttu-id="3f760-294">**/AD**</span><span class="sxs-lookup"><span data-stu-id="3f760-294">**/ad**</span></span> | <span data-ttu-id="3f760-295">Выполняет поиск каталога, используя базу данных каталогов по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="3f760-295">Finds the catalog by using the default catalog database.</span></span> |
| <span data-ttu-id="3f760-296">**/all**</span><span class="sxs-lookup"><span data-stu-id="3f760-296">**/all**</span></span> | <span data-ttu-id="3f760-297">Проверяет все подписи в файле с несколькими сигнатурами.</span><span class="sxs-lookup"><span data-stu-id="3f760-297">Verifies all signatures in a file with multiple signatures.</span></span> |
| <span data-ttu-id="3f760-298">**/ас**</span><span class="sxs-lookup"><span data-stu-id="3f760-298">**/as**</span></span> | <span data-ttu-id="3f760-299">Выполняет поиск каталога, используя базу данных каталога системных компонентов (драйверов).</span><span class="sxs-lookup"><span data-stu-id="3f760-299">Finds the catalog by using the system component (driver) catalog database.</span></span> |
| <span data-ttu-id="3f760-300">**/АГ** *катдбгуид*</span><span class="sxs-lookup"><span data-stu-id="3f760-300">**/ag** *CatDBGUID*</span></span> | <span data-ttu-id="3f760-301">Находит каталог в базе данных каталога, определяемый **идентификатором GUID**.</span><span class="sxs-lookup"><span data-stu-id="3f760-301">Finds the catalog in the catalog database identified by the **GUID**.</span></span> |
| <span data-ttu-id="3f760-302">**/c** *катфиле*</span><span class="sxs-lookup"><span data-stu-id="3f760-302">**/c** *CatFile*</span></span> | <span data-ttu-id="3f760-303">Задает файл каталога по имени.</span><span class="sxs-lookup"><span data-stu-id="3f760-303">Specifies the catalog file by name.</span></span> |
| <span data-ttu-id="3f760-304">**/d**</span><span class="sxs-lookup"><span data-stu-id="3f760-304">**/d**</span></span> | <span data-ttu-id="3f760-305">Печать описания и URL-адреса описания.</span><span class="sxs-lookup"><span data-stu-id="3f760-305">Print the description and description URL.</span></span><br/> <span data-ttu-id="3f760-306">**Windows Vista и более ранние версии:** Этот флаг не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="3f760-306">**Windows Vista and earlier:** This flag is not supported.</span></span><br/> |
| <span data-ttu-id="3f760-307">**/ДС** *индекс*</span><span class="sxs-lookup"><span data-stu-id="3f760-307">**/ds** *Index*</span></span> | <span data-ttu-id="3f760-308">Проверяет подпись в определенной позиции.</span><span class="sxs-lookup"><span data-stu-id="3f760-308">Verifies the signature at a certain position.</span></span> |
| <span data-ttu-id="3f760-309">**/хаш**{**SHA1** \| **SHA256**}</span><span class="sxs-lookup"><span data-stu-id="3f760-309">**/hash**{**SHA1**\|**SHA256**}</span></span> | <span data-ttu-id="3f760-310">Задает необязательный алгоритм хэширования, который должен использоваться при поиске файла в каталоге.</span><span class="sxs-lookup"><span data-stu-id="3f760-310">Specifies an optional hash algorithm to use when searching for a file in a catalog.</span></span> |
| <span data-ttu-id="3f760-311">**/кп**</span><span class="sxs-lookup"><span data-stu-id="3f760-311">**/kp**</span></span> | <span data-ttu-id="3f760-312">Выполняет проверку с помощью политики подписывания драйвера режима ядра x64.</span><span class="sxs-lookup"><span data-stu-id="3f760-312">Performs the verification by using the x64 kernel-mode driver signing policy.</span></span> |
| <span data-ttu-id="3f760-313">**/мс**</span><span class="sxs-lookup"><span data-stu-id="3f760-313">**/ms**</span></span> | <span data-ttu-id="3f760-314">Использует несколько семантик проверки.</span><span class="sxs-lookup"><span data-stu-id="3f760-314">Uses multiple verification semantics.</span></span> <span data-ttu-id="3f760-315">Это поведение по умолчанию для вызова [**WinVerifyTrust**](/windows/desktop/api/Wintrust/nf-wintrust-winverifytrust) .</span><span class="sxs-lookup"><span data-stu-id="3f760-315">This is the default behavior of a [**WinVerifyTrust**](/windows/desktop/api/Wintrust/nf-wintrust-winverifytrust) call.</span></span> |
| <span data-ttu-id="3f760-316">**/O** *версия*</span><span class="sxs-lookup"><span data-stu-id="3f760-316">**/o** *Version*</span></span> | <span data-ttu-id="3f760-317">Проверяет файл в соответствии с версией операционной системы.</span><span class="sxs-lookup"><span data-stu-id="3f760-317">Verifies the file by operating system version.</span></span> <span data-ttu-id="3f760-318">Параметр Version имеет вид:</span><span class="sxs-lookup"><span data-stu-id="3f760-318">The version parameter is of the form:</span></span><br/> <span data-ttu-id="3f760-319">*PlatformID ***:*** вермажор ***.*** Верминор ***.*** BuildNumber*</span><span class="sxs-lookup"><span data-stu-id="3f760-319">*PlatformID ***:*** VerMajor ***.*** VerMinor ***.*** BuildNumber*</span></span><br/> <span data-ttu-id="3f760-320">Рекомендуется использовать параметр */o* .</span><span class="sxs-lookup"><span data-stu-id="3f760-320">The use of the */o* switch is recommended.</span></span> <span data-ttu-id="3f760-321">Если */o* не указан, средство SignTool может возвращать непредвиденные результаты.</span><span class="sxs-lookup"><span data-stu-id="3f760-321">If */o* is not specified SignTool may return unexpected results.</span></span> <span data-ttu-id="3f760-322">Например, если не включить параметр */o* , то системные каталоги, которые правильно проверяются в более старой ОС, могут неправильно проверяться в более новой ОС.</span><span class="sxs-lookup"><span data-stu-id="3f760-322">For example, if you do not include the */o* switch, then system catalogs that validate correctly on an older OS may not validate correctly on a newer OS.</span></span> |
| <span data-ttu-id="3f760-323">**/p7**</span><span class="sxs-lookup"><span data-stu-id="3f760-323">**/p7**</span></span> | <span data-ttu-id="3f760-324">Проверьте \# файлы PKCS 7.</span><span class="sxs-lookup"><span data-stu-id="3f760-324">Verify PKCS \#7 files.</span></span> <span data-ttu-id="3f760-325">Для проверки PKCS 7 существующие политики не используются \# .</span><span class="sxs-lookup"><span data-stu-id="3f760-325">No existing policies are used for PKCS \#7 validation.</span></span> <span data-ttu-id="3f760-326">Подпись проверяется, и для сертификата подписи строится цепочка.</span><span class="sxs-lookup"><span data-stu-id="3f760-326">The signature is checked and a chain is built for the signing certificate.</span></span> |
| <span data-ttu-id="3f760-327">**/па**</span><span class="sxs-lookup"><span data-stu-id="3f760-327">**/pa**</span></span> | <span data-ttu-id="3f760-328">Указывает, что используется политика проверки подлинности по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="3f760-328">Specifies that the Default Authentication Verification Policy is used.</span></span> <span data-ttu-id="3f760-329">Если параметр **/ПА** не указан, средство SignTool использует политику проверки драйверов Windows.</span><span class="sxs-lookup"><span data-stu-id="3f760-329">If the **/pa** option is not specified, SignTool uses the Windows Driver Verification Policy.</span></span> <span data-ttu-id="3f760-330">Этот параметр нельзя использовать с параметрами **catdb** .</span><span class="sxs-lookup"><span data-stu-id="3f760-330">This option cannot be used with the **catdb** options.</span></span> |
| <span data-ttu-id="3f760-331">**/ПГ** *полицигуид*</span><span class="sxs-lookup"><span data-stu-id="3f760-331">**/pg** *PolicyGUID*</span></span> | <span data-ttu-id="3f760-332">Задает политику проверки по **идентификатору GUID**.</span><span class="sxs-lookup"><span data-stu-id="3f760-332">Specifies a verification policy by **GUID**.</span></span> <span data-ttu-id="3f760-333">**Идентификатор GUID** соответствует параметру actionID политики проверки.</span><span class="sxs-lookup"><span data-stu-id="3f760-333">The **GUID** corresponds to the ActionID of the verification policy.</span></span> <span data-ttu-id="3f760-334">Этот параметр нельзя использовать с параметрами **catdb** .</span><span class="sxs-lookup"><span data-stu-id="3f760-334">This option cannot be used with the **catdb** options.</span></span> |
| <span data-ttu-id="3f760-335">**/pH создает**</span><span class="sxs-lookup"><span data-stu-id="3f760-335">**/ph**</span></span> | <span data-ttu-id="3f760-336">Печать и проверка хэш-значений страниц.</span><span class="sxs-lookup"><span data-stu-id="3f760-336">Print and verify page hash values.</span></span><br/> <span data-ttu-id="3f760-337">**Windows Vista и более ранние версии:** Этот флаг не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="3f760-337">**Windows Vista and earlier:** This flag is not supported.</span></span><br/>  |
| <span data-ttu-id="3f760-338">**/R** *рутсубжектнаме*</span><span class="sxs-lookup"><span data-stu-id="3f760-338">**/r** *RootSubjectName*</span></span> | <span data-ttu-id="3f760-339">Задает имя субъекта корневого сертификата, к которому должна быть протянута цепочка сертификата подписи.</span><span class="sxs-lookup"><span data-stu-id="3f760-339">Specifies the name of the subject of the root certificate that the signing certificate must chain to.</span></span> <span data-ttu-id="3f760-340">Это значение может быть подстрокой полного имени субъекта корневого сертификата.</span><span class="sxs-lookup"><span data-stu-id="3f760-340">This value can be a substring of the entire subject name of the root certificate.</span></span> |
| <span data-ttu-id="3f760-341">**/тв**</span><span class="sxs-lookup"><span data-stu-id="3f760-341">**/tw**</span></span> | <span data-ttu-id="3f760-342">Указывает, что предупреждение создается, если подпись не имеет отметки времени.</span><span class="sxs-lookup"><span data-stu-id="3f760-342">Specifies that a warning is generated if the signature is not time stamped.</span></span>|


<span data-ttu-id="3f760-343">Команда SignTool **Verify** определяет, был ли сертификат подписи выдан доверенным центром сертификации, был ли отозван сертификат для подписи и, при необходимости, является ли сертификат подписи допустимым для конкретной политики.</span><span class="sxs-lookup"><span data-stu-id="3f760-343">The SignTool **verify** command determines whether the signing certificate was issued by a trusted authority, whether the signing certificate has been revoked, and, optionally, whether the signing certificate is valid for a specific policy.</span></span>  

<span data-ttu-id="3f760-344">Команда SignTool **Verify** выводит состояние **встроенной** подписи, если не указан параметр для поиска каталога (/a,/AD,/АС,/АГ,/c).</span><span class="sxs-lookup"><span data-stu-id="3f760-344">The SignTool **verify** command will output the **embedded** signature status unless an option is specified to search a catalog (/a, /ad, /as, /ag, /c).</span></span>


## <a name="return-value"></a><span data-ttu-id="3f760-345">Возвращаемое значение</span><span class="sxs-lookup"><span data-stu-id="3f760-345">Return value</span></span>  

 <span data-ttu-id="3f760-346">Программа Sign Tool при прерывании возвращает один из следующих кодов выхода.</span><span class="sxs-lookup"><span data-stu-id="3f760-346">Sign Tool returns one of the following exit codes when it terminates.</span></span>  
  
|<span data-ttu-id="3f760-347">Код выхода</span><span class="sxs-lookup"><span data-stu-id="3f760-347">Exit code</span></span>|<span data-ttu-id="3f760-348">Описание</span><span class="sxs-lookup"><span data-stu-id="3f760-348">Description</span></span>|  
|----|----| 
|<span data-ttu-id="3f760-349">0</span><span class="sxs-lookup"><span data-stu-id="3f760-349">0</span></span>|<span data-ttu-id="3f760-350">Выполнение прошло успешно.</span><span class="sxs-lookup"><span data-stu-id="3f760-350">Execution was successful.</span></span>|  
|<span data-ttu-id="3f760-351">1</span><span class="sxs-lookup"><span data-stu-id="3f760-351">1</span></span>|<span data-ttu-id="3f760-352">Сбой выполнения.</span><span class="sxs-lookup"><span data-stu-id="3f760-352">Execution has failed.</span></span>|  
|<span data-ttu-id="3f760-353">2</span><span class="sxs-lookup"><span data-stu-id="3f760-353">2</span></span>|<span data-ttu-id="3f760-354">Выполнение завершено с предупреждениями.</span><span class="sxs-lookup"><span data-stu-id="3f760-354">Execution has completed with warnings.</span></span>|


## <a name="examples"></a><span data-ttu-id="3f760-355">Примеры</span><span class="sxs-lookup"><span data-stu-id="3f760-355">Examples</span></span>  

 <span data-ttu-id="3f760-356">Следующая команда добавляет файл каталога "MyCatalogFileName.cat" в базу данных системных компонентов и драйверов.</span><span class="sxs-lookup"><span data-stu-id="3f760-356">The following command adds the catalog file MyCatalogFileName.cat to the system component and driver database.</span></span> <span data-ttu-id="3f760-357">Параметр `/u` создает уникальное имя, если это необходимо для предотвращения замены существующего файла каталога с именем `MyCatalogFileName.cat`.</span><span class="sxs-lookup"><span data-stu-id="3f760-357">The `/u` option generates a unique name if necessary to prevent replacing an existing catalog file named `MyCatalogFileName.cat`.</span></span>  
  
```console  
signtool catdb /v /u MyCatalogFileName.cat  
```  
  
 <span data-ttu-id="3f760-358">При выполнении следующей команды файл подписывается автоматически с помощью наиболее подходящего сертификата.</span><span class="sxs-lookup"><span data-stu-id="3f760-358">The following command signs a file automatically by using the best certificate.</span></span>  
  
```console  
signtool sign /a /fd SHA256 MyFile.exe 
```  
  
 <span data-ttu-id="3f760-359">При выполнении следующей команды файл подписывается цифровой подписью с помощью сертификата, хранящегося в защищенном паролем PFX-файле.</span><span class="sxs-lookup"><span data-stu-id="3f760-359">The following command digitally signs a file by using a certificate stored in a password-protected PFX file.</span></span>  
  
```console  
signtool sign /f MyCert.pfx /p MyPassword /fd SHA256 MyFile.exe 
```  
  
 <span data-ttu-id="3f760-360">При выполнении следующей команды файл подписывается цифровой подписью, и ему присваивается отметка времени.</span><span class="sxs-lookup"><span data-stu-id="3f760-360">The following command digitally signs and time-stamps a file.</span></span> <span data-ttu-id="3f760-361">Сертификат, используемый для подписания файла, хранится в PFX-файле.</span><span class="sxs-lookup"><span data-stu-id="3f760-361">The certificate used to sign the file is stored in a PFX file.</span></span>  
  
```console  
signtool sign /f MyCert.pfx /t http://timestamp.digicert.com /fd SHA256 MyFile.exe 
```  
  
 <span data-ttu-id="3f760-362">При выполнении следующей команды файл подписывается с помощью сертификата, расположенного в хранилище `My`, с именем субъекта `My Company Certificate`.</span><span class="sxs-lookup"><span data-stu-id="3f760-362">The following command signs a file by using a certificate located in the `My` store that has a subject name of `My Company Certificate`.</span></span>  
  
```console  
signtool sign /n "My Company Certificate" /fd SHA256 MyFile.exe 
```  
  
 <span data-ttu-id="3f760-363">При выполнении следующей команды подписывается элемент управления ActiveX и предоставляется информация, отображаемая в Internet Explorer, когда пользователю предлагается установить элемент управления.</span><span class="sxs-lookup"><span data-stu-id="3f760-363">The following command signs an ActiveX control and provides information that is displayed by Internet Explorer when the user is prompted to install the control.</span></span>  
  
```console  
Signtool sign /f MyCert.pfx /d: "MyControl" /du http://www.example.com/MyControl/info.html /fd SHA256 MyControl.exe 
```  
  
 <span data-ttu-id="3f760-364">При выполнении следующей команды файлу, у которого уже имеется цифровая подпись, присваивается отметка времени.</span><span class="sxs-lookup"><span data-stu-id="3f760-364">The following command time-stamps a file that has already been digitally signed.</span></span>  
  
```console  
signtool timestamp /t http://timestamp.digicert.com MyFile.exe
```  

<span data-ttu-id="3f760-365">Следующая команда помечает файл с помощью сервера меток времени RFC 3161.</span><span class="sxs-lookup"><span data-stu-id="3f760-365">The following command time-stamps a file using an RFC 3161 timestamp server.</span></span>  
  
```console  
signtool timestamp /tr http://timestamp.digicert.com /td SHA256 MyFile.exe
```  
  
 <span data-ttu-id="3f760-366">Следующая команда проверяет наличие подписи у файла.</span><span class="sxs-lookup"><span data-stu-id="3f760-366">The following command verifies that a file has been signed.</span></span>  
  
```console  
signtool verify MyFile.exe  
```  
  
 <span data-ttu-id="3f760-367">Следующая команда проверяет системный файл, который может быть подписан в каталоге.</span><span class="sxs-lookup"><span data-stu-id="3f760-367">The following command verifies a system file that may be signed in a catalog.</span></span>  
  
```console  
signtool verify /a SystemFile.dll  
```  
  
 <span data-ttu-id="3f760-368">Следующая команда проверяет системный файл, подписанный в каталоге с именем `MyCatalog.cat`.</span><span class="sxs-lookup"><span data-stu-id="3f760-368">The following command verifies a system file that is signed in a catalog named `MyCatalog.cat`.</span></span>  
  
```console  
signtool verify /c MyCatalog.cat SystemFile.dll  
```  
