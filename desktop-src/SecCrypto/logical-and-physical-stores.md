---
description: Системные хранилища по умолчанию, включая мои, CA и ROOT, реализуются в виде логических хранилищ коллекций с несколькими предопределенными физическими хранилищами в качестве их хранилищ элементов.
ms.assetid: 1d82b94b-4842-454a-aca4-823cd264ac52
title: Логические и физические хранилища
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 66a5441bac91e39b7f4c124daecd3a6a569c323c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103810253"
---
# <a name="logical-and-physical-stores"></a><span data-ttu-id="07dda-103">Логические и физические хранилища</span><span class="sxs-lookup"><span data-stu-id="07dda-103">Logical and Physical Stores</span></span>

<span data-ttu-id="07dda-104">Системные хранилища по умолчанию, включая мои, CA и ROOT, реализуются в виде логических хранилищ коллекций с несколькими предопределенными физическими хранилищами в качестве их хранилищ элементов.</span><span class="sxs-lookup"><span data-stu-id="07dda-104">Default system stores, including MY, CA, and ROOT, are implemented as logical collection stores with a number of predefined physical stores as their member stores.</span></span> <span data-ttu-id="07dda-105">Элементы физического хранилища системного хранилища открываются автоматически при открытии хранилища системы.</span><span class="sxs-lookup"><span data-stu-id="07dda-105">The member physical stores of a system store are opened automatically when the system store is opened.</span></span> <span data-ttu-id="07dda-106">Пользователь может добавлять дополнительные физические хранилища в любую коллекцию системных хранилищ.</span><span class="sxs-lookup"><span data-stu-id="07dda-106">A user can add additional physical stores to any system store collection.</span></span> <span data-ttu-id="07dda-107">Функция CryptoAPI [**цертрегистерфисикалсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregisterphysicalstore) добавляет новое физическое хранилище в коллекцию системных хранилищ.</span><span class="sxs-lookup"><span data-stu-id="07dda-107">The CryptoAPI function [**CertRegisterPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregisterphysicalstore) adds a new physical store to a system store collection.</span></span> <span data-ttu-id="07dda-108">[**Цертунрегистерфисикалсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregisterphysicalstore) отменяет связь физического хранилища с логическим хранилищем.</span><span class="sxs-lookup"><span data-stu-id="07dda-108">[**CertUnregisterPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregisterphysicalstore) disassociates a physical store from a logical system store.</span></span> <span data-ttu-id="07dda-109">[**Цертрегистерсистемсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregistersystemstore) создает новое системное хранилище в разделе реестра hKey, а [**цертунрегистерсистемсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregistersystemstore) удаляет системное хранилище из реестра.</span><span class="sxs-lookup"><span data-stu-id="07dda-109">[**CertRegisterSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certregistersystemstore) creates a new system store under a registry hKey, while [**CertUnregisterSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certunregistersystemstore) removes a system store from the registry.</span></span>

<span data-ttu-id="07dda-110">В CryptoAPI системные хранилища — это логические хранилища со связанными физическими хранилищами.</span><span class="sxs-lookup"><span data-stu-id="07dda-110">In CryptoAPI, system stores are logical stores with associated physical stores.</span></span> <span data-ttu-id="07dda-111">Все сертификаты в существующем системном хранилище остаются доступными, а физическое Добавление новых сертификатов выполняется в физических хранилищах, составляющих логическое хранилище системы.</span><span class="sxs-lookup"><span data-stu-id="07dda-111">All the certificates in an existing system store remain available, and the physical addition of new certificates is made in the physical stores that make up the logical system store.</span></span>

<span data-ttu-id="07dda-112">Пользователи, которые предпочитают продолжать использовать физические хранилища систем и не преобразовывать их в логические хранилища, могут открывать системные хранилища с \_ помощью \_ \_ поставщика системного реестра хранилища сертификатов Prov \_ .</span><span class="sxs-lookup"><span data-stu-id="07dda-112">Users who prefer to continue to use physical system stores and not convert to logical stores can open system stores with the CERT\_STORE\_PROV\_SYSTEM\_REGISTRY provider.</span></span> <span data-ttu-id="07dda-113">Этот поставщик будет по-прежнему использовать каждое системное хранилище как единое физическое хранилище.</span><span class="sxs-lookup"><span data-stu-id="07dda-113">This provider will continue to use each system store as a single, physical store.</span></span>

<span data-ttu-id="07dda-114">Функции [**цертенумсистемсторелокатион**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstorelocation), [**цертенумсистемсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstore)и [**цертенумфисикалсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumphysicalstore) переводят список расположений системных хранилищ, доступных системных хранилищ и всех физических хранилищ, входящих в системное хранилище.</span><span class="sxs-lookup"><span data-stu-id="07dda-114">The functions [**CertEnumSystemStoreLocation**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstorelocation), [**CertEnumSystemStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumsystemstore), and [**CertEnumPhysicalStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certenumphysicalstore) list system store locations, available system stores, and all physical stores that are members of a system store.</span></span>

<span data-ttu-id="07dda-115">Системные хранилища также могут быть перемещены.</span><span class="sxs-lookup"><span data-stu-id="07dda-115">System stores can also be relocated.</span></span> <span data-ttu-id="07dda-116">По умолчанию системное хранилище открывается относительно подраздела реестра после предопределенного шаблона.</span><span class="sxs-lookup"><span data-stu-id="07dda-116">By default, a system store is opened relative to a registry subkey following a predefined pattern.</span></span> <span data-ttu-id="07dda-117">Дополнительные сведения см. в разделе [расположения системных хранилищ](system-store-locations.md).</span><span class="sxs-lookup"><span data-stu-id="07dda-117">For more information, see [System Store Locations](system-store-locations.md).</span></span> <span data-ttu-id="07dda-118">При настройке \_ флага переустановки хранилища системы сертификатов \_ \_ \_ в параметре *DwFlags* , переданном в [**цертопенсторе**](/windows/desktop/api/Wincrypt/nf-wincrypt-certopenstore) , в реестр помещается системное хранилище в заданном пользователем подразделе реестра, а не в стандартном.</span><span class="sxs-lookup"><span data-stu-id="07dda-118">Setting CERT\_SYSTEM\_STORE\_RELOCATE\_FLAG in the *dwFlags* parameter passed to [**CertOpenStore**](/windows/desktop/api/Wincrypt/nf-wincrypt-certopenstore) places a system store in the registry under a user-specified registry subkey instead of the predefined one.</span></span>

 

 



