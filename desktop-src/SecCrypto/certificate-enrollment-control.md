---
description: Управление регистрацией сертификатов может использоваться приложением, которое должно запросить выдачу сертификата для именованной темы.
ms.assetid: ce6661b0-7ed2-452f-a54c-6705d14f3298
title: Управление регистрацией сертификатов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e417a9db7984cbb58b7c2e3b51d828b6d61a97b6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662361"
---
# <a name="certificate-enrollment-control"></a><span data-ttu-id="9c0ac-103">Управление регистрацией сертификатов</span><span class="sxs-lookup"><span data-stu-id="9c0ac-103">Certificate Enrollment Control</span></span>

<span data-ttu-id="9c0ac-104">Управление регистрацией сертификатов может использоваться приложением, которое должно запросить выдачу сертификата для именованной темы.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-104">Certificate Enrollment Control can be used by an application that must request that a certificate be issued to a named subject.</span></span> <span data-ttu-id="9c0ac-105">Он предназначен для приема данных в виде двоичной строки (BSTR).</span><span class="sxs-lookup"><span data-stu-id="9c0ac-105">It is designed to accept data in the form of a binary string (BSTR).</span></span> <span data-ttu-id="9c0ac-106">Данные могут поступать с веб-страницы или из пользовательского интерфейса Visual Basic или Visual C++ системы разработки.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-106">The data can come from a webpage or from the user interface of the Visual Basic or Visual C++ development system.</span></span> <span data-ttu-id="9c0ac-107">Выходные данные управления регистрацией сертификатов — это \# запрос сертификата PKCS 10, который может быть отправлен в [*центр сертификации*](../secgloss/c-gly.md) (ЦС).</span><span class="sxs-lookup"><span data-stu-id="9c0ac-107">The output from the Certificate Enrollment Control is a PKCS \#10 certificate request that can be sent on to a [*certification authority*](../secgloss/c-gly.md) (CA).</span></span>

![Управление регистрацией сертификатов](images/xen-arch.png)

<span data-ttu-id="9c0ac-109">Необходимые сведения о пользователе, субъекте сертификата, собираются пользовательским интерфейсом.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-109">Necessary information about the user, the certificate subject, is collected by the User Interface.</span></span> <span data-ttu-id="9c0ac-110">Эти сведения предоставляются в качестве входных данных BSTR для управления регистрацией сертификатов.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-110">This information is provided as a BSTR input to the Certificate Enrollment Control.</span></span> <span data-ttu-id="9c0ac-111">Элемент управления "регистрация сертификата" создает соответствующий ключ подписи, ключ обмена ключами или обе пары ключей.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-111">The Certificate Enrollment Control generates the appropriate signature key, key exchange key, or both key pairs.</span></span> <span data-ttu-id="9c0ac-112">Затем элемент управления создает и подписывает \# [*запрос сертификата*](../secgloss/c-gly.md) PKCS 10 с помощью созданного [*закрытого ключа*](../secgloss/p-gly.md).</span><span class="sxs-lookup"><span data-stu-id="9c0ac-112">The control then generates and signs a PKCS \#10 [*certificate request*](../secgloss/c-gly.md) by using the generated [*private key*](../secgloss/p-gly.md).</span></span> <span data-ttu-id="9c0ac-113">Затем Управление регистрацией сертификатов связывает пару ключей с временным фиктивным сертификатом, который хранится в хранилище запросов, пока выданный сертификат не будет возвращен из центра сертификации.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-113">The Certificate Enrollment Control then links the key pair to a temporary dummy certificate which is stored in the request store until the issued certificate is returned from a certification authority.</span></span> <span data-ttu-id="9c0ac-114">Наконец, приложение отправляет \# запрос сертификата PKCS 10 в центр сертификации.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-114">Finally, the application sends the PKCS \#10 certificate request to a CA.</span></span>

<span data-ttu-id="9c0ac-115">Если центр сертификации утверждает запрос на сертификат, ЦС создает сертификат, содержащий открытый ключ.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-115">If the CA approves the certificate request, the CA creates a certificate containing the public key.</span></span> <span data-ttu-id="9c0ac-116">ЦС также подписывает и возвращает сертификат.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-116">The CA also signs and returns the certificate.</span></span>

<span data-ttu-id="9c0ac-117">Когда запрошенный сертификат возвращается из центра сертификации, приложение передает \# сообщение PKCS 7 обратно в контроль регистрации сертификатов, где сертификат или цепочка сертификатов извлекаются из \# сообщения PKCS 7.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-117">When the requested certificate is returned from the CA, the application passes the PKCS \#7 message back to the Certificate Enrollment Control where the certificate or chain of certificates is extracted from the PKCS \#7 message.</span></span> <span data-ttu-id="9c0ac-118">Сертификат и другие сертификаты в цепочке доверия хранятся в [*хранилище сертификатов*](../secgloss/c-gly.md).</span><span class="sxs-lookup"><span data-stu-id="9c0ac-118">The certificate and any other certificates in the chain of trust are stored in a [*certificate store*](../secgloss/c-gly.md).</span></span> <span data-ttu-id="9c0ac-119">Возвращенный сертификат не изменяется каким-либо образом.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-119">The returned certificate is not modified in any way.</span></span> <span data-ttu-id="9c0ac-120">Все приложения, поддерживающие сертификаты, теперь могут получать доступ к этому сертификату из хранилища.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-120">Any certificate-aware application can now access this certificate from the store.</span></span>

<span data-ttu-id="9c0ac-121">Управление регистрацией смарт-карт используется администратором для регистрации от имени пользователей смарт-карт.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-121">Smart Card Enrollment Control is used by an administrator to enroll on behalf of smart card users.</span></span> <span data-ttu-id="9c0ac-122">Процесс регистрации приводит к выдаче сертификата, который хранится на смарт-карте пользователя.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-122">The enrollment process results in a certificate being issued that is stored on a user's smart card.</span></span>

<span data-ttu-id="9c0ac-123">Управление регистрацией смарт-карты содержится в Scrdenrl.dll и состоит из одного объекта, **скрденр**.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-123">The Smart Card Enrollment Control is contained in Scrdenrl.dll and consists of one object, **SCrdEnr**.</span></span> <span data-ttu-id="9c0ac-124">Другие объекты не включаются в Scrdenrl.dll.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-124">No other objects are included in Scrdenrl.dll.</span></span> <span data-ttu-id="9c0ac-125">Этот объект регистрации смарт-карты можно использовать с языком сценариев, например Visual Basic Scripting Edition (VBScript).</span><span class="sxs-lookup"><span data-stu-id="9c0ac-125">This Smart Card Enrollment object can be used with a script language, such as Visual Basic Scripting Edition (VBScript).</span></span>

<span data-ttu-id="9c0ac-126">На компьютере, на котором работает Управление регистрацией смарт-карты, должен быть установлен [*модуль чтения смарт-карт*](../secgloss/r-gly.md) .</span><span class="sxs-lookup"><span data-stu-id="9c0ac-126">A [*smart card reader*](../secgloss/r-gly.md) must be installed on the computer running the Smart Card Enrollment Control.</span></span>

<span data-ttu-id="9c0ac-127">Кроме того, поставщик смарт-карты должен получить сертификат подписи на основе шаблона сертификата "Енроллментажент".</span><span class="sxs-lookup"><span data-stu-id="9c0ac-127">Additionally, the smart card issuer must have obtained a signing certificate based on the "EnrollmentAgent" certificate template.</span></span> <span data-ttu-id="9c0ac-128">Этот сертификат подписи будет использоваться для подписания запроса на сертификат, созданного от имени получателя смарт-карты.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-128">This signing certificate will be used to sign the certificate request generated on behalf of the smart card recipient.</span></span> <span data-ttu-id="9c0ac-129">По умолчанию администраторы домена получают разрешение на запрос сертификата на основе шаблона "агент регистрации".</span><span class="sxs-lookup"><span data-stu-id="9c0ac-129">By default, domain administrators are granted permission to request a certificate based on the "Enrollment Agent" template.</span></span> <span data-ttu-id="9c0ac-130">Другим пользователям может быть предоставлено разрешение на регистрацию сертификата "Енроллментажент" (с помощью оснастки MMC "сайты и службы" Active Directory); Тем не менее, это позволяет пользователю самостоятельно выдать смарт-карту с правами администратора домена.</span><span class="sxs-lookup"><span data-stu-id="9c0ac-130">Another user can be granted permission to enroll for an "EnrollmentAgent" certificate (by means of the Active Directory Sites and Services MMC snap-in); doing so, however, allows this user to self-issue a smart card with domain administrator privileges.</span></span>

 

 
