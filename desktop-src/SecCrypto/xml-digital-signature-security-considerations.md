---
description: Приложения, которые подписывают и проверяют цифровые подписи XML, должны быть написаны в соответствии со следующими рекомендациями, чтобы избежать атак типа "отказ в обслуживании", потери данных и компрометации конфиденциальной информации.
ms.assetid: aa972946-9860-49c1-ae94-3f315684c291
title: Вопросы безопасности цифровых подписей XML
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4e54b4c5f3f863e0bc84172a7507bfe8609e2df7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105684086"
---
# <a name="xml-digital-signature-security-considerations"></a><span data-ttu-id="f5f9b-103">Вопросы безопасности цифровых подписей XML</span><span class="sxs-lookup"><span data-stu-id="f5f9b-103">XML Digital Signature Security Considerations</span></span>

<span data-ttu-id="f5f9b-104">Приложения, которые подписывают и проверяют цифровые подписи XML, должны быть написаны в соответствии со следующими рекомендациями, чтобы избежать атак типа "отказ в обслуживании", потери данных и компрометации конфиденциальной информации.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-104">Applications that sign and verify XML digital signatures should be written according to the following best practices to avoid denial of service attacks, data loss, and compromise of private information.</span></span> <span data-ttu-id="f5f9b-105">В списке ниже приводятся общие рекомендации. Однако разработчикам рекомендуется выполнить дополнительный анализ безопасности для своих приложений и ознакомиться с последними рекомендациями по использованию цифровых подписей, опубликованными консорциумом W3C.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-105">The list below provides general guidance; however, developers are encouraged to perform additional security analysis specific to their applications and review the latest digital signatures best practices published by the W3C.</span></span>

-   [<span data-ttu-id="f5f9b-106">Проверка доверия для ключа подписывания</span><span class="sxs-lookup"><span data-stu-id="f5f9b-106">Verify trust of the signing key</span></span>](#verify-trust-of-the-signing-key)
-   [<span data-ttu-id="f5f9b-107">Сначала проверьте ключ подписывания и проверьте SignedInfo, а затем проверьте ссылки.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-107">First verify the signing key and validate SignedInfo, then validate references</span></span>](#first-verify-the-signing-key-and-validate-signedinfo-then-validate-references)
-   [<span data-ttu-id="f5f9b-108">Использование минимального набора алгоритмов канонизации и преобразований</span><span class="sxs-lookup"><span data-stu-id="f5f9b-108">Use the minimal set of canonicalization algorithms and transforms required</span></span>](#use-the-minimal-set-of-canonicalization-algorithms-and-transforms-required)
-   [<span data-ttu-id="f5f9b-109">Убедитесь, что целевые URI указывают на назначения в ожидаемой области.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-109">Ensure target URIs point to destinations within the expected scope</span></span>](#ensure-target-uris-point-to-destinations-within-the-expected-scope)
-   [<span data-ttu-id="f5f9b-110">Проверка того, что данные, потребляемые приложением, проверены подписью</span><span class="sxs-lookup"><span data-stu-id="f5f9b-110">Verify the data consumed by the application is verified by the signature</span></span>](#verify-the-data-consumed-by-the-application-is-verified-by-the-signature)
-   [<span data-ttu-id="f5f9b-111">Следование рекомендациям по обеспечению шифрования</span><span class="sxs-lookup"><span data-stu-id="f5f9b-111">Follow best cryptographic practices</span></span>](#follow-best-cryptographic-practices)

## <a name="verify-trust-of-the-signing-key"></a><span data-ttu-id="f5f9b-112">Проверка доверия для ключа подписывания</span><span class="sxs-lookup"><span data-stu-id="f5f9b-112">Verify trust of the signing key</span></span>

<span data-ttu-id="f5f9b-113">Убедитесь, что ключ подписывания является доверенным, проверив соответствующий сертификат [*X. 509*](../secgloss/x-gly.md) (и цепочку сертификатов), включенный в подписанное сообщение.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-113">Ensure that the signing key is trusted by verifying the corresponding [*X.509*](../secgloss/x-gly.md) certificate (and certificate chain) included in the signed message.</span></span> <span data-ttu-id="f5f9b-114">Кроме того, отношение доверия в ключе подписывания можно установить по внешнему каналу, такому как администратор, который настраивает набор доверенных ключей, или приложение, которое запрашивает надежную службу по протоколу Secure.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-114">Alternately, trust in the signing key can be established in an out-of-band fashion, such as an administrator configuring a set of trusted keys, or an application querying a trusted service over a secure channel.</span></span>

## <a name="first-verify-the-signing-key-and-validate-signedinfo-then-validate-references"></a><span data-ttu-id="f5f9b-115">Сначала проверьте ключ подписывания и проверьте SignedInfo, а затем проверьте ссылки.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-115">First verify the signing key and validate SignedInfo, then validate references</span></span>

<span data-ttu-id="f5f9b-116">Проверьте отношение доверия в ключе подписывания и целостность элемента **SignedInfo** перед проверкой ссылок.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-116">Verify trust in the signing key and the integrity of the **SignedInfo** element prior to validating references.</span></span> <span data-ttu-id="f5f9b-117">Аналогичным образом, приложения должны проверять элементы **манифеста** до разрешения ссылок, содержащихся в элементах **манифеста** .</span><span class="sxs-lookup"><span data-stu-id="f5f9b-117">Similarly, applications should validate **Manifest** elements prior to resolving references contained in the **Manifest** elements.</span></span> <span data-ttu-id="f5f9b-118">**Ссылочные** элементы позволяют определить целевые URI, преобразования и алгоритмы канонизации.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-118">**Reference** elements allow the specification of target URIs, transforms, and canonicalization algorithms.</span></span> <span data-ttu-id="f5f9b-119">Если проверка не выполнена, эти поля потенциально могут использоваться для создания отказа в обслуживании, потери данных или других атак.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-119">If not validated, these fields can potentially be used to create denial of service, data loss, or other attacks.</span></span>

## <a name="use-the-minimal-set-of-canonicalization-algorithms-and-transforms-required"></a><span data-ttu-id="f5f9b-120">Использование минимального набора алгоритмов канонизации и преобразований</span><span class="sxs-lookup"><span data-stu-id="f5f9b-120">Use the minimal set of canonicalization algorithms and transforms required</span></span>

<span data-ttu-id="f5f9b-121">XSLT и XPATH не должны использоваться в элементах, не прошедших проверку подлинности, например в **KeyInfo**.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-121">XSLT and XPATH should not be used within unauthenticated elements, such as **KeyInfo**.</span></span> <span data-ttu-id="f5f9b-122">Если приложению требуется использовать XPath, Ограничьте набор выражений XPATH только теми, которые используют предки или сами оси, и не вычисляют строковое значение элементов.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-122">If an application requires use of XPath, constrain the set of XPATH expressions allowed to only those that use the ancestor or self axes and do not compute the string value of elements.</span></span> <span data-ttu-id="f5f9b-123">По умолчанию Криптксмл поддерживает ограниченный набор алгоритмов канонизации (см. раздел Поддерживаемые URI в [алгоритмах шифрования цифровых подписей XML](xml-digital-signature-cryptographic-algorithms.md)).</span><span class="sxs-lookup"><span data-stu-id="f5f9b-123">By default, CryptXML supports a limited set of canonicalization algorithms (see supported URIs in [XML Digital Signature Cryptographic Algorithms](xml-digital-signature-cryptographic-algorithms.md)).</span></span> <span data-ttu-id="f5f9b-124">Разработчики могут реализовать дополнительные преобразования или алгоритмы канонизации для использования в своих приложениях.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-124">Developers can implement additional transforms or canonicalization algorithms for use within their application.</span></span> <span data-ttu-id="f5f9b-125">Однако использование сложных алгоритмов создает возможность атак типа «отказ в обслуживании» или нарушает характеристики отрицания подписи.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-125">However, the use of complex algorithms creates the possibility of denial of service attacks or of breaking a signature's repudiation characteristics.</span></span> <span data-ttu-id="f5f9b-126">В тех случаях, когда для приложения требуются преобразования, ограничьте число преобразований, которые могут быть заданы для каждой ссылки, на наибольшее число, необходимое приложению.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-126">In cases where transforms are required by the application, limit the number of transforms that can be specified per reference to the highest number required by the application.</span></span> <span data-ttu-id="f5f9b-127">Такой подход позволяет устранить атаки типа «отказ в обслуживании» на основе чрезмерного использования преобразований.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-127">This practice mitigates denial of service attacks based on excessive use of transforms.</span></span>

## <a name="ensure-target-uris-point-to-destinations-within-the-expected-scope"></a><span data-ttu-id="f5f9b-128">Убедитесь, что целевые URI указывают на назначения в ожидаемой области.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-128">Ensure target URIs point to destinations within the expected scope</span></span>

<span data-ttu-id="f5f9b-129">Приложения должны ограничивать целевые URI до наименьшей области, необходимой для приложения.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-129">Applications should limit target URIs to the smallest scope required by the application.</span></span> <span data-ttu-id="f5f9b-130">Например, предполагается, что URI указывают на назначения в том же документе, файлы в определенном целевом каталоге или сетевые расположения в определенном домене DNS.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-130">For example, URIs might be expected to point to destinations within the same document, files in a specific target directory, or network locations within a specific DNS domain.</span></span> <span data-ttu-id="f5f9b-131">Универсальные коды ресурсов (URI), заданные за пределами ожидаемого домена, могут привести к тому, что приложение сможет получить вредоносное содержимое, отправить вредоносные HTTP-запросы (возможно, содержащие строки запроса) или вызвать проверку подлинности приложений на вредоносных серверах.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-131">URIs set by an attacker to point outside the expected domain could cause an application to retrieve malicious content, send malicious HTTP requests (possibly containing query strings), or cause applications to authenticate to malicious servers.</span></span>

## <a name="verify-the-data-consumed-by-the-application-is-verified-by-the-signature"></a><span data-ttu-id="f5f9b-132">Проверка того, что данные, потребляемые приложением, проверены подписью</span><span class="sxs-lookup"><span data-stu-id="f5f9b-132">Verify the data consumed by the application is verified by the signature</span></span>

<span data-ttu-id="f5f9b-133">Если приложение проверяет ключ подписывания и элементы **SignedInfo** и **Reference** , но приложение использует важные данные, на которые не ссылается сигнатура, подпись не обеспечивает никакой осмысленной защиты.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-133">If the application validates the signing key and the **SignedInfo** and **Reference** elements, but the application consumes important data not referenced by the signature, the signature provides no meaningful protection.</span></span> <span data-ttu-id="f5f9b-134">Семантическое значение сигнатуры может изменяться в зависимости от расположения подписи в документе.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-134">The semantic meaning of a signature may vary based on the signature's position within the document.</span></span> <span data-ttu-id="f5f9b-135">Приложениям рекомендуется проверять расположение подписи в документе.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-135">Applications are encouraged to check the position of the signature within a document.</span></span> <span data-ttu-id="f5f9b-136">Кроме того, проверьте расположение данных и имен элементов, на которые указывают ссылки, чтобы устранить атаки подстановки и заключения в оболочку.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-136">Additionally, check the position of referenced data and element names to mitigate substitution and wrapping attacks.</span></span>

## <a name="follow-best-cryptographic-practices"></a><span data-ttu-id="f5f9b-137">Следование рекомендациям по обеспечению шифрования</span><span class="sxs-lookup"><span data-stu-id="f5f9b-137">Follow best cryptographic practices</span></span>

<span data-ttu-id="f5f9b-138">Алгоритмы шифрования становятся более надежными по мере обнаружения новых атак, а также становятся доступными дополнительные вычислительные мощности.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-138">Cryptographic algorithms become weaker over time as new attacks are discovered and more computing power becomes available.</span></span> <span data-ttu-id="f5f9b-139">Не следует жестко кодировать идентификаторы алгоритмов шифрования или размеры ключей в приложениях.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-139">Do not hard code cryptographic algorithm identifiers or key sizes into your applications.</span></span> <span data-ttu-id="f5f9b-140">Более полный список лучших методов шифрования см. в статьях Майкла Ховарда и Стив Липнер, «минимальные криптографические стандарты SDL» в *жизненном цикле разработки безопасности* (Redmond, Вашингтон: Microsoft Press, 2006), 251 – 258.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-140">For a more complete list of best cryptographic practices, see Michael Howard and Steve Lipner, "SDL Minimum Cryptographic Standards," in *The Security Development Lifecycle* (Redmond, Washington: Microsoft Press, 2006), 251–258.</span></span>

<span data-ttu-id="f5f9b-141">Дополнительные рекомендации можно найти на веб-сайте W3C: https://www.w3.org .</span><span class="sxs-lookup"><span data-stu-id="f5f9b-141">Additional best practices can be found on the W3C website: https://www.w3.org.</span></span>

> [!Note]  
> <span data-ttu-id="f5f9b-142">Эти ресурсы могут быть недоступны в некоторых языках и странах или регионах.</span><span class="sxs-lookup"><span data-stu-id="f5f9b-142">These resources may not be available in some languages and countries or regions.</span></span>

 

 

 
