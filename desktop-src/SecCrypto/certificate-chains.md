---
description: Чтобы использовать сертификаты для обеспечения безопасности, необходимо проверить подлинность и допустимость каждого полученного сертификата. Эта проверка зависит от концепции доверия и делегирования \[ пакета средств разработки программного обеспечения (SDK) доверенной платформы \] .
ms.assetid: e6cb0280-f531-40dc-bbb1-d8115d026e03
title: Цепочки сертификатов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bea42b6788997a86aade6f89d0f35d92a74daafc
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104497271"
---
# <a name="certificate-chains"></a><span data-ttu-id="dc418-104">Цепочки сертификатов</span><span class="sxs-lookup"><span data-stu-id="dc418-104">Certificate Chains</span></span>

<span data-ttu-id="dc418-105">Чтобы использовать [*Сертификаты*](../secgloss/c-gly.md) для обеспечения безопасности, необходимо проверить подлинность и допустимость каждого полученного сертификата.</span><span class="sxs-lookup"><span data-stu-id="dc418-105">To use [*certificates*](../secgloss/c-gly.md) for security, the authenticity and validity of each certificate received must be verified.</span></span> <span data-ttu-id="dc418-106">Эта проверка зависит от концепции доверия и делегирования доверия. Дополнительные сведения см. в разделе [Иерархия доверия](hierarchy-of-trust.md).</span><span class="sxs-lookup"><span data-stu-id="dc418-106">This verification depends upon the concept of trust and the delegation of trust; for more information, see [Hierarchy of Trust](hierarchy-of-trust.md).</span></span>

<span data-ttu-id="dc418-107">Каждый сертификат содержит поле субъекта, идентифицирующее пользователя или группу, в которую был выдан сертификат.</span><span class="sxs-lookup"><span data-stu-id="dc418-107">Every certificate contains a subject field that identifies the individual or group to which the certificate was issued.</span></span> <span data-ttu-id="dc418-108">Каждый сертификат также содержит поле Issuer, которое определяет [*центр сертификации*](../secgloss/c-gly.md) (ЦС), который позволяет сертифицировать удостоверение субъекта.</span><span class="sxs-lookup"><span data-stu-id="dc418-108">Every certificate also contains an issuer field that identifies the [*certification authority*](../secgloss/c-gly.md) (CA) empowered to certify the identity of the subject.</span></span>

<span data-ttu-id="dc418-109">Цепочка сертификатов состоит из всех сертификатов, необходимых для сертификации субъекта, идентифицируемого конечным сертификатом.</span><span class="sxs-lookup"><span data-stu-id="dc418-109">A certificate chain consists of all the certificates needed to certify the subject identified by the end certificate.</span></span> <span data-ttu-id="dc418-110">На практике это относится к конечному сертификату, сертификатам промежуточных ЦС и сертификату корневого ЦС, доверенному для всех сторон в цепочке.</span><span class="sxs-lookup"><span data-stu-id="dc418-110">In practice this includes the end certificate, the certificates of intermediate CAs, and the certificate of a root CA trusted by all parties in the chain.</span></span> <span data-ttu-id="dc418-111">Каждый промежуточный ЦС в цепочке содержит сертификат, выданный центром сертификации на один уровень выше в иерархии доверия.</span><span class="sxs-lookup"><span data-stu-id="dc418-111">Every intermediate CA in the chain holds a certificate issued by the CA one level above it in the trust hierarchy.</span></span> <span data-ttu-id="dc418-112">Корневой ЦС выдает сертификат самому себе.</span><span class="sxs-lookup"><span data-stu-id="dc418-112">The root CA issues a certificate for itself.</span></span>

<span data-ttu-id="dc418-113">Процесс проверки подлинности и допустимости вновь полученного сертификата включает проверку всех сертификатов в цепочке сертификатов из исходного доверенного ЦС, доступ к которому осуществляется через промежуточные центры сертификации, а затем — только что полученный сертификат, который называется конечным.</span><span class="sxs-lookup"><span data-stu-id="dc418-113">The process of verifying the authenticity and validity of a newly received certificate involves checking all of the certificates in the chain of certificates from the original, universally trusted CA, through any intermediate CAs, down to the certificate just received which is called the end certificate.</span></span> <span data-ttu-id="dc418-114">Новый сертификат может быть доверенным только в том случае, если все сертификаты в цепочке сертификатов выдаются и действительны.</span><span class="sxs-lookup"><span data-stu-id="dc418-114">A new certificate can only be trusted if each certificate in that certificate's chain is properly issued and valid.</span></span>

<span data-ttu-id="dc418-115">Отслеживание всех сертификатов, для которых создается новый конечный сертификат, может стать громоздким.</span><span class="sxs-lookup"><span data-stu-id="dc418-115">Tracking all of the certificates that back a new end certificate can become cumbersome.</span></span> <span data-ttu-id="dc418-116">Таким образом, технология [*CryptoAPI*](../secgloss/c-gly.md) 2,0 предоставляет функции, автоматизирующие создание цепочки сертификатов, которая возвращает любой заданный конечный сертификат.</span><span class="sxs-lookup"><span data-stu-id="dc418-116">Therefore, [*CryptoAPI*](../secgloss/c-gly.md) 2.0 technology provides functions that automate creating the chain of certificates that back any given end certificate.</span></span> <span data-ttu-id="dc418-117">Эти функции также проверяют и сообщают о допустимости каждого сертификата в цепочке.</span><span class="sxs-lookup"><span data-stu-id="dc418-117">These functions also check and report on the validity of each certificate in a chain.</span></span>

<span data-ttu-id="dc418-118">Функции сборки и проверки цепочки [*CryptoAPI*](../secgloss/c-gly.md) 2,0 используют механизм цепочки для создания и проверки цепочек сертификатов.</span><span class="sxs-lookup"><span data-stu-id="dc418-118">The chain-building and checking functions of [*CryptoAPI*](../secgloss/c-gly.md) 2.0 use a chain engine to create and verify chains of certificates.</span></span> <span data-ttu-id="dc418-119">Механизм цепочки определяет пространство имен хранилища и секционирование кэша для инфраструктуры цепочки сертификатов.</span><span class="sxs-lookup"><span data-stu-id="dc418-119">A chain engine defines a store namespace and cache partitioning for the Certificate Chaining Infrastructure.</span></span> <span data-ttu-id="dc418-120">CryptoAPI 2.0 предоставляет механизм цепочки по умолчанию для любого процесса приложения, который использует только системные хранилища по умолчанию (например, "MY", "root", "CA" и "доверие") для построения цепочки и кэширования.</span><span class="sxs-lookup"><span data-stu-id="dc418-120">CryptoAPI 2.0 provides a default chain engine for any application process that only uses default system stores (for example, MY, Root, CA, and Trust) for chain building and caching.</span></span> <span data-ttu-id="dc418-121">Приложение может определить собственное пространство имен хранилища или иметь свой собственный секционированный кэш, создав собственный обработчик цепочки.</span><span class="sxs-lookup"><span data-stu-id="dc418-121">An application can define its own store namespace or have its own partitioned cache by creating its own chain engine.</span></span> <span data-ttu-id="dc418-122">Для достижения оптимального поведения кэширования рекомендуется создать единый механизм цепочки при запуске приложения и использовать его в течение всего времени существования приложения.</span><span class="sxs-lookup"><span data-stu-id="dc418-122">To achieve optimal caching behavior, we recommend you create a single chain engine at application startup and use that chain engine throughout the lifetime of the application.</span></span>

<span data-ttu-id="dc418-123">Список функций см. в разделе [функции проверки цепочки сертификатов](cryptography-functions.md).</span><span class="sxs-lookup"><span data-stu-id="dc418-123">For a list of functions, see [Certificate Chain Verification Functions](cryptography-functions.md).</span></span> <span data-ttu-id="dc418-124">Для программы, создающей цепочки сертификатов и проверяющих сертификаты, см. [Пример программы C: создание цепочки сертификатов](example-c-program-creating-a-certificate-chain.md).</span><span class="sxs-lookup"><span data-stu-id="dc418-124">For a program that builds certificate chains and verifies certificates, see [Example C Program: Creating a Certificate Chain](example-c-program-creating-a-certificate-chain.md).</span></span>

 

 
