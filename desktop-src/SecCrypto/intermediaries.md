---
description: Посредники взаимодействуют с клиентскими приложениями, чтобы разрешить им отправлять запросы на сертификаты, и (предполагая, что запрос получает выданный сертификат), чтобы загрузить выданный сертификат на клиент.
ms.assetid: c696f09e-98d3-4cea-8ea1-cd8f40b74f12
title: Посредники
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 040e79abb03bd0363d37fdad79f7311412b0ffe2
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "105664801"
---
# <a name="intermediaries"></a><span data-ttu-id="0d40c-103">Посредники</span><span class="sxs-lookup"><span data-stu-id="0d40c-103">Intermediaries</span></span>

<span data-ttu-id="0d40c-104">Посредники взаимодействуют с клиентскими приложениями, чтобы разрешить им отправлять [*запросы на сертификаты*](../secgloss/c-gly.md), и (предполагая, что запрос получает выданный сертификат), чтобы загрузить выданный сертификат на клиент.</span><span class="sxs-lookup"><span data-stu-id="0d40c-104">Intermediaries communicate with client applications to allow them to submit [*certificate requests*](../secgloss/c-gly.md), and (assuming that the request results in an issued certificate) to download the issued certificate to the client.</span></span> <span data-ttu-id="0d40c-105">Каждый протокол транспортного уровня требует собственного посредника.</span><span class="sxs-lookup"><span data-stu-id="0d40c-105">Each transport layer protocol requires its own intermediary.</span></span>

<span data-ttu-id="0d40c-106">Службы сертификации Майкрософт поставляются с промежуточными (страницами веб-регистрации) для HTTP.</span><span class="sxs-lookup"><span data-stu-id="0d40c-106">Microsoft Certificate Services ships with an intermediary (the web enrollment pages) for HTTP.</span></span> <span data-ttu-id="0d40c-107">Еще одним примером посредника является оснастка Microsoft Windows Certificates MMC (которая позволяет вызвать мастер запросов на сертификат).</span><span class="sxs-lookup"><span data-stu-id="0d40c-107">Another example of an intermediary is the Microsoft Windows Certificates MMC snap-in (which allows the Certificate Request Wizard to be invoked).</span></span> <span data-ttu-id="0d40c-108">Если в службах сертификации используются другие протоколы транспортного уровня, разработчик может создать промежуточный носитель для каждого требуемого транспортного уровня.</span><span class="sxs-lookup"><span data-stu-id="0d40c-108">If other transport layer protocols are to be used with Certificate Services, a developer can create an intermediary for each desired transport layer protocol.</span></span>

<span data-ttu-id="0d40c-109">Посредники взаимодействуют со службами сертификации с помощью интерфейсов [**интерфейса ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) и [**ицертконфиг**](/windows/desktop/api/Certcli/nn-certcli-icertconfig) , предоставляемых ядром сервера.</span><span class="sxs-lookup"><span data-stu-id="0d40c-109">Intermediaries communicate with Certificate Services using the [**ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) and [**ICertConfig**](/windows/desktop/api/Certcli/nn-certcli-icertconfig) interfaces provided by the server engine.</span></span> <span data-ttu-id="0d40c-110">Метод [**интерфейса ICertRequest:: submit**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-submit) используется для отправки [*запроса на сертификат*](../secgloss/c-gly.md), а для получения полученного сертификата используется [**интерфейса ICertRequest:: Certificate**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-getcertificate) .</span><span class="sxs-lookup"><span data-stu-id="0d40c-110">The [**ICertRequest::Submit**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-submit) method is used to submit a [*certificate request*](../secgloss/c-gly.md), and [**ICertRequest::GetCertificate**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-getcertificate) is used to get the resulting issued certificate.</span></span> <span data-ttu-id="0d40c-111">Аналогичным образом [**ицертконфиг:: config**](/windows/desktop/api/Certcli/nf-certcli-icertconfig-getconfig) используется для определения центра сертификации, который может использоваться для выдачи сертификата.</span><span class="sxs-lookup"><span data-stu-id="0d40c-111">Similarly, [**ICertConfig::GetConfig**](/windows/desktop/api/Certcli/nf-certcli-icertconfig-getconfig) is used to determine which certification authority can be used to issue the certificate.</span></span>

<span data-ttu-id="0d40c-112">Посредник не зависит от языка.</span><span class="sxs-lookup"><span data-stu-id="0d40c-112">An intermediary is not language-dependent.</span></span> <span data-ttu-id="0d40c-113">Это может быть программа, написанная на C++, Visual Basic, Java, script или на другом языке.</span><span class="sxs-lookup"><span data-stu-id="0d40c-113">It may be a program written in C++, Visual Basic, Java, script, or another language.</span></span>

<span data-ttu-id="0d40c-114">Помимо сбора данных от клиента до создания запроса на сертификат, посредник может указывать атрибуты запроса.</span><span class="sxs-lookup"><span data-stu-id="0d40c-114">In addition to gathering data from the client to build a certificate request, an intermediary may specify request attributes.</span></span> <span data-ttu-id="0d40c-115">Запросы, отправленные в [*центр сертификации*](../secgloss/c-gly.md) , на котором выполняется модуль политики предприятия, должны указывать тип запрошенного сертификата, указав либо атрибут "CertificateTemplate", либо расширение шаблона сертификата в самом запросе.</span><span class="sxs-lookup"><span data-stu-id="0d40c-115">Requests submitted to a [*certification authority*](../secgloss/c-gly.md) running the enterprise policy module must indicate the type of certificate requested by specifying either a "CertificateTemplate" attribute or a Certificate Template extension in the request itself.</span></span>

<span data-ttu-id="0d40c-116">Обратите внимание, что во время создания запроса на сертификат разработчики (и посредники) несут ответственность за поддержание секретности закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="0d40c-116">Note that during the creation of a certificate request, developers (and intermediaries) are responsible for maintaining the secrecy of the private key.</span></span> <span data-ttu-id="0d40c-117">После компрометации закрытого ключа (с потерей секрета) он бесполезен.</span><span class="sxs-lookup"><span data-stu-id="0d40c-117">After a private key has been compromised (lost its secrecy), it is useless.</span></span>

<span data-ttu-id="0d40c-118">Веб-страницы регистрации служб сертификатов используют [интерфейсы регистрации сертификатов](cryptography-interfaces.md), которые защищают закрытые ключи путем их создания на рабочей станции.</span><span class="sxs-lookup"><span data-stu-id="0d40c-118">The Certificate Services web enrollment pages use the [Certificate Enrollment Interfaces](cryptography-interfaces.md), which protects private keys by generating them on the workstation.</span></span> <span data-ttu-id="0d40c-119">Помимо поддержания секретности закрытого ключа, Управление регистрацией сертификатов позволяет указать поставщику служб шифрования, спецификацию ключа, стойкость ключа и хэш-алгоритма в качестве посредника.</span><span class="sxs-lookup"><span data-stu-id="0d40c-119">In addition to maintaining the secrecy of the private key, the Certificate Enrollment Control allows an intermediary to specify the Cryptographic Service Provider, key specification, key strength, and hash algorithm.</span></span>

<span data-ttu-id="0d40c-120">Оснастка MMC "сертификаты" также использует Управление регистрацией сертификатов (Xenroll.dll).</span><span class="sxs-lookup"><span data-stu-id="0d40c-120">The Certificates MMC snap-in also uses the Certificate Enrollment Control (Xenroll.dll).</span></span> <span data-ttu-id="0d40c-121">Однако, когда веб-страницы регистрации служб сертификатов вызывают загрузку ресурса контроля регистрации сертификатов (Xenroll.dll) на клиент при необходимости, оснастка MMC "сертификаты" работает в среде, где Xenroll.dll уже является доступным ресурсом.</span><span class="sxs-lookup"><span data-stu-id="0d40c-121">However, where the Certificate Services web enrollment pages cause the Certificate Enrollment Control resource (Xenroll.dll) to be downloaded to the client if needed, the Certificates MMC snap-in runs in an environment where Xenroll.dll is already an available resource.</span></span>

<span data-ttu-id="0d40c-122">Помимо [**интерфейса ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) и [**ицертконфиг**](/windows/desktop/api/Certcli/nn-certcli-icertconfig), разработчики посредников могут найти [интерфейсы регистрации сертификатов](cryptography-interfaces.md) и [Управление регистрацией смарт-карт](certificate-enrollment-control.md) .</span><span class="sxs-lookup"><span data-stu-id="0d40c-122">In addition to [**ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) and [**ICertConfig**](/windows/desktop/api/Certcli/nn-certcli-icertconfig), developers of intermediaries may find the [Certificate Enrollment Interfaces](cryptography-interfaces.md) and the [Smart Card Enrollment Control](certificate-enrollment-control.md) to be useful.</span></span>

 

 
