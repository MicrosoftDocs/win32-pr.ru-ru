---
description: Описывает задачи, которые необходимо выполнить для создания подписанного сообщения.
ms.assetid: 61896022-28c2-4f70-977a-c990b4b23c55
title: Создание подписанного сообщения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9645509c140168267bf48915f68a884b51dee6e7f5a19b2a153e3fd6ff7d5afe
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117769255"
---
# <a name="creating-a-signed-message"></a>Создание подписанного сообщения

На следующем рисунке показаны задачи, которые необходимо выполнить для создания подписанного сообщения. Шаги приведены на рисунке ниже.

![Подписывание сообщения](images/signdmsg.png)

**Создание подписанного сообщения**

1.  Создайте данные (при необходимости) и получите указатель на него.
2.  Откройте [*хранилище сертификатов*](../secgloss/c-gly.md) , содержащее сертификат подписи.
3.  Получите [*закрытый ключ*](../secgloss/p-gly.md) для сертификата. Перед использованием сертификата необходимо задать для него свойство, чтобы связать сертификат с определенным [*CSP*](../secgloss/c-gly.md), а в пределах этого CSP — с определенным закрытым ключом. Этот параметр необходимо задать один раз.
4.  Выберите алгоритм хэширования для операции дайджеста. Рекомендуется выбирать алгоритм хеширования из настраиваемого расположения, которое впоследствии можно обновить без внесения изменений в код.
5.  Отправьте данные с помощью функции хэширования, используя алгоритм хэширования, создавая [*хэш*](../secgloss/h-gly.md) (дайджест) данных.
6.  С помощью [*закрытого ключа*](../secgloss/p-gly.md) , полученного через свойство сертификата, зашифруйте дайджест, создавая сигнатуру.
7.  Включите в подписанное сообщение следующее:

    -   Подписанные данные
    -   Хэш-алгоритм
    -   Подпись
    -   Идентификатор подписавший (поставщик сертификата и серийный номер);
    -   Сертификат подписавший (необязательно)

Подробные процедуры и примеры см. в разделе [процедура подписывания данных](procedure-for-signing-data.md) и [Пример программы на языке C: подписывание сообщения и проверка подписи сообщения](example-c-program-signing-a-message-and-verifying-a-message-signature.md).

 

 
