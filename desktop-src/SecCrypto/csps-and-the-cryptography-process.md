---
description: Функции CryptoAPI используют поставщики служб шифрования (CSP) для шифрования и расшифровки, а для хранения ключей и обеспечения безопасности.
ms.assetid: 7977e59b-7ce1-4bb4-aae4-d67b7d646493
title: CSP и процесс шифрования
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f5404fc3641a9a2c753158f5acb84850f3f0f29
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104072684"
---
# <a name="csps-and-the-cryptography-process"></a><span data-ttu-id="734fe-103">CSP и процесс шифрования</span><span class="sxs-lookup"><span data-stu-id="734fe-103">CSPs and the Cryptography Process</span></span>

<span data-ttu-id="734fe-104">Функции [*CryptoAPI*](../secgloss/c-gly.md) используют [*поставщики служб шифрования*](../secgloss/c-gly.md) (CSP) для шифрования и расшифровки, а для хранения ключей и обеспечения безопасности.</span><span class="sxs-lookup"><span data-stu-id="734fe-104">[*CryptoAPI*](../secgloss/c-gly.md) functions use [*cryptographic service providers*](../secgloss/c-gly.md) (CSPs) to perform encryption and decryption, and to provide key storage and security.</span></span> <span data-ttu-id="734fe-105">Эти CSP являются независимыми модулями.</span><span class="sxs-lookup"><span data-stu-id="734fe-105">These CSPs are independent modules.</span></span> <span data-ttu-id="734fe-106">В идеале CSP записываются как независимые от конкретного приложения, чтобы любое приложение выполнялось с различными CSP.</span><span class="sxs-lookup"><span data-stu-id="734fe-106">Ideally, CSPs are written to be independent of a particular application, so that any application will run with a variety of CSPs.</span></span> <span data-ttu-id="734fe-107">Однако на практике некоторые приложения имеют особые требования, требующие настроенного CSP.</span><span class="sxs-lookup"><span data-stu-id="734fe-107">In reality, however, some applications have specific requirements that require a customized CSP.</span></span> <span data-ttu-id="734fe-108">Это сравнение с моделью Windows [*GDI*](../secgloss/g-gly.md) .</span><span class="sxs-lookup"><span data-stu-id="734fe-108">This compares to the Windows [*GDI*](../secgloss/g-gly.md) model.</span></span> <span data-ttu-id="734fe-109">CSP аналогичны драйверам графических устройств.</span><span class="sxs-lookup"><span data-stu-id="734fe-109">CSPs are analogous to graphics device drivers.</span></span>

<span data-ttu-id="734fe-110">Качество защиты для ключей в системе является параметром модели CSP, а не системой в целом.</span><span class="sxs-lookup"><span data-stu-id="734fe-110">The quality of protection for keys within the system is a design parameter of the CSP and not of the system as a whole.</span></span> <span data-ttu-id="734fe-111">Это позволяет приложению работать в различных контекстах безопасности без изменения.</span><span class="sxs-lookup"><span data-stu-id="734fe-111">This allows an application to run in a variety of security contexts without modification.</span></span>

<span data-ttu-id="734fe-112">Приложения Access, предназначенные для внутренних криптографических функций, тщательно ограничиваются.</span><span class="sxs-lookup"><span data-stu-id="734fe-112">The access applications have to the cryptographic internals is carefully restricted.</span></span> <span data-ttu-id="734fe-113">Это упрощает разработку защищенных и переносимых приложений.</span><span class="sxs-lookup"><span data-stu-id="734fe-113">This facilitates secure and portable application development.</span></span>

<span data-ttu-id="734fe-114">Применяются следующие три правила проектирования:</span><span class="sxs-lookup"><span data-stu-id="734fe-114">The following three design rules apply:</span></span>

-   <span data-ttu-id="734fe-115">Приложения не могут напрямую обращаться к материалам ключа.</span><span class="sxs-lookup"><span data-stu-id="734fe-115">Applications cannot directly access keying material.</span></span> <span data-ttu-id="734fe-116">Поскольку все материалы по ключам создаются в CSP и используются приложением с помощью непрозрачных дескрипторов, приложение или связанные с ним DLL-библиотеки не имеют никакого риска, что он либо рассматривает материал ключа, либо выбирает материал для создания ключей из плохих случайных источников.</span><span class="sxs-lookup"><span data-stu-id="734fe-116">Because all keying material is generated within the CSP and used by the application through opaque handles, there is no risk of an application or its associated DLLs either divulging keying material or choosing keying material from poor random sources.</span></span>
-   <span data-ttu-id="734fe-117">Приложения не могут указывать сведения о криптографических операциях.</span><span class="sxs-lookup"><span data-stu-id="734fe-117">Applications cannot specify the details of cryptographic operations.</span></span> <span data-ttu-id="734fe-118">Интерфейс CSP позволяет приложению выбрать алгоритм шифрования или подписи, но реализация каждой криптографической операции выполняется CSP.</span><span class="sxs-lookup"><span data-stu-id="734fe-118">The CSP interface allows an application to choose an encryption or signature algorithm, but the implementation of every cryptographic operation is done by the CSP.</span></span>
-   <span data-ttu-id="734fe-119">Приложения не обрабатывали [*учетные данные*](../secgloss/c-gly.md) пользователя или другие данные проверки подлинности пользователя.</span><span class="sxs-lookup"><span data-stu-id="734fe-119">Applications do not handle user [*credentials*](../secgloss/c-gly.md) or other user authentication data.</span></span> <span data-ttu-id="734fe-120">Проверка подлинности пользователя выполняется CSP; Таким образом, будущие CSP с расширенными возможностями проверки подлинности, такие как биометрические входы, будут работать без необходимости изменения модели проверки подлинности приложения.</span><span class="sxs-lookup"><span data-stu-id="734fe-120">User authentication is done by the CSP; therefore, future CSPs with advanced authentication capabilities, such as biometric inputs, will function without needing to change the application authentication model.</span></span>

<span data-ttu-id="734fe-121">Как минимум CSP состоит из библиотеки динамической компоновки (DLL) и [*файла сигнатур*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="734fe-121">At a minimum, a CSP consists of a dynamic-link library (DLL) and a [*signature file*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="734fe-122">Файл сигнатуры необходим для того, чтобы интерфейс [*CryptoAPI*](../secgloss/c-gly.md) распознавал CSP.</span><span class="sxs-lookup"><span data-stu-id="734fe-122">The signature file is necessary to ensure that the [*CryptoAPI*](../secgloss/c-gly.md) recognizes the CSP.</span></span> <span data-ttu-id="734fe-123">CryptoAPI периодически проверяет эту подпись, чтобы убедиться в том, что обнаружены все изменения, внесенные в CSP.</span><span class="sxs-lookup"><span data-stu-id="734fe-123">CryptoAPI validates this signature periodically to ensure that any tampering with the CSP is detected.</span></span>

<span data-ttu-id="734fe-124">Некоторые поставщики служб шифрования могут реализовать часть их функций в службе с разделением адресов через локальную RPC или оборудование, вызванное с помощью драйвера системного устройства.</span><span class="sxs-lookup"><span data-stu-id="734fe-124">Some CSPs can implement a fraction of their functionality in an address-separated service called through local RPC or in hardware called through a system device driver.</span></span> <span data-ttu-id="734fe-125">Изоляция глобальных криптографических операций и централизованного шифрования в службе с разделением адреса или оборудованием обеспечивает защиту ключей и операций от несанкционированного изменения в пространстве данных приложения.</span><span class="sxs-lookup"><span data-stu-id="734fe-125">Isolating global key-state and central cryptographic operations in an address-separated service or in hardware keeps keys and operations safe from tampering within an application data space.</span></span>

<span data-ttu-id="734fe-126">Не рекомендуется использовать для приложений атрибуты, относящиеся к конкретному CSP.</span><span class="sxs-lookup"><span data-stu-id="734fe-126">It is unwise for applications to take advantage of attributes particular to a specific CSP.</span></span> <span data-ttu-id="734fe-127">Например, базовый поставщик служб шифрования Майкрософт (предоставляемый CryptoAPI) поддерживает 40-разрядные ключи сеанса и 512-разрядные открытые ключи.</span><span class="sxs-lookup"><span data-stu-id="734fe-127">For example, the Microsoft Base Cryptographic Provider (supplied with CryptoAPI) supports 40-bit session keys and 512-bit public keys.</span></span> <span data-ttu-id="734fe-128">Приложения, работающие с этими ключами, должны избегать предположений относительно объема памяти, необходимого для хранения этих ключей, так как приложение, скорее всего, завершится ошибкой, если используется другой CSP.</span><span class="sxs-lookup"><span data-stu-id="734fe-128">Applications manipulating these keys must avoid assumptions about the amount of memory needed to store these keys because the application is likely to fail if a different CSP is used.</span></span> <span data-ttu-id="734fe-129">Хорошо написанные приложения должны работать с различными CSP.</span><span class="sxs-lookup"><span data-stu-id="734fe-129">Well-written applications must work with a variety of CSPs.</span></span>

<span data-ttu-id="734fe-130">Дополнительные сведения о типах поставщиков служб шифрования и стандартных CSP, которые можно использовать с CryptoAPI, см. в разделе [типы поставщиков](cryptographic-provider-types.md) служб шифрования и [поставщики служб шифрования Майкрософт](microsoft-cryptographic-service-providers.md).</span><span class="sxs-lookup"><span data-stu-id="734fe-130">For details about cryptographic provider types and predefined CSPs that can be used with CryptoAPI, see [Cryptographic Provider Types](cryptographic-provider-types.md) and [Microsoft Cryptographic Service Providers](microsoft-cryptographic-service-providers.md).</span></span>

 

 
