---
description: При считывании каждой записи службы из базы данных установленных служб SCM создает запись службы для службы.
ms.assetid: c0ee43e2-af9b-4578-9017-46a5ed50b938
title: Список записей службы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1143625de977c7e5c488c5cc56620adc3a5454db
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662399"
---
# <a name="service-record-list"></a><span data-ttu-id="462c3-103">Список записей службы</span><span class="sxs-lookup"><span data-stu-id="462c3-103">Service Record List</span></span>

<span data-ttu-id="462c3-104">При считывании каждой записи службы из базы данных установленных служб SCM создает запись службы для службы.</span><span class="sxs-lookup"><span data-stu-id="462c3-104">As each service entry is read from the database of installed services, the SCM creates a service record for the service.</span></span> <span data-ttu-id="462c3-105">Запись службы включает:</span><span class="sxs-lookup"><span data-stu-id="462c3-105">A service record includes:</span></span>

-   <span data-ttu-id="462c3-106">Имя службы</span><span class="sxs-lookup"><span data-stu-id="462c3-106">Service name</span></span>
-   <span data-ttu-id="462c3-107">Тип запуска (автоматический запуск или запуск по требованию)</span><span class="sxs-lookup"><span data-stu-id="462c3-107">Start type (auto-start or demand-start)</span></span>
-   <span data-ttu-id="462c3-108">Состояние службы (см. [**структуру \_ состояния службы**](/windows/desktop/api/Winsvc/ns-winsvc-service_status) )</span><span class="sxs-lookup"><span data-stu-id="462c3-108">Service status (see the [**SERVICE\_STATUS**](/windows/desktop/api/Winsvc/ns-winsvc-service_status) structure)</span></span> <dl> <span data-ttu-id="462c3-109">Тип</span><span class="sxs-lookup"><span data-stu-id="462c3-109">Type</span></span>  
    <span data-ttu-id="462c3-110">Текущее состояние</span><span class="sxs-lookup"><span data-stu-id="462c3-110">Current state</span></span>  
    <span data-ttu-id="462c3-111">Допустимые управляющие коды</span><span class="sxs-lookup"><span data-stu-id="462c3-111">Acceptable control codes</span></span>  
    <span data-ttu-id="462c3-112">Код выхода</span><span class="sxs-lookup"><span data-stu-id="462c3-112">Exit code</span></span>  
    <span data-ttu-id="462c3-113">Указание ожидания</span><span class="sxs-lookup"><span data-stu-id="462c3-113">Wait hint</span></span>  
    </dl>
-   Pointer to dependency list

<span data-ttu-id="462c3-114">Имя пользователя и пароль учетной записи указываются во время установки службы.</span><span class="sxs-lookup"><span data-stu-id="462c3-114">The user name and password of an account are specified at the time the service is installed.</span></span> <span data-ttu-id="462c3-115">SCM хранит имя пользователя в реестре и пароль в защищенной части локального центра безопасности (LSA).</span><span class="sxs-lookup"><span data-stu-id="462c3-115">The SCM stores the user name in the registry and the password in a secure portion of the Local Security Authority (LSA).</span></span> <span data-ttu-id="462c3-116">Системный администратор может создавать учетные записи с паролями, срок действия которых никогда не истекает.</span><span class="sxs-lookup"><span data-stu-id="462c3-116">The system administrator can create accounts with passwords that never expire.</span></span> <span data-ttu-id="462c3-117">Кроме того, системный администратор может создавать учетные записи с просроченными паролями и управлять этими учетными записями, периодически изменяя пароли.</span><span class="sxs-lookup"><span data-stu-id="462c3-117">Alternatively, the system administrator can create accounts with passwords that expire and manage the accounts by changing the passwords periodically.</span></span>

<span data-ttu-id="462c3-118">SCM хранит две копии пароля учетной записи пользователя, текущий пароль и пароль резервной копии.</span><span class="sxs-lookup"><span data-stu-id="462c3-118">The SCM keeps two copies of a user account's password, a current password and a backup password.</span></span> <span data-ttu-id="462c3-119">Пароль, указанный при первом запуске службы, сохраняется в качестве текущего пароля, а пароль резервной копии не инициализируется.</span><span class="sxs-lookup"><span data-stu-id="462c3-119">The password specified the first time the service is installed is stored as the current password and the backup password is not initialized.</span></span> <span data-ttu-id="462c3-120">Когда SCM пытается запустить службу в контексте безопасности учетной записи пользователя, он использует текущий пароль.</span><span class="sxs-lookup"><span data-stu-id="462c3-120">When the SCM attempts to run the service in the security context of the user account, it uses the current password.</span></span> <span data-ttu-id="462c3-121">Если текущий пароль используется успешно, он также сохраняется как пароль резервной копии.</span><span class="sxs-lookup"><span data-stu-id="462c3-121">If the current password is used successfully, it is also saved as the backup password.</span></span> <span data-ttu-id="462c3-122">Если пароль изменен с помощью функции [**чанжесервицеконфиг**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfiga) или служебной программы панели управления "службы", новый пароль хранится в качестве текущего пароля, а предыдущий пароль хранится в качестве пароля для резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="462c3-122">If the password is modified with the [**ChangeServiceConfig**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfiga) function, or the Services control panel utility, the new password is stored as the current password and the previous password is stored as the backup password.</span></span> <span data-ttu-id="462c3-123">Если SCM пытается запустить службу, а текущий пароль завершается неудачей, то он использует пароль резервной копии.</span><span class="sxs-lookup"><span data-stu-id="462c3-123">If the SCM attempts to start the service and the current password fails, then it uses the backup password.</span></span> <span data-ttu-id="462c3-124">Если пароль резервной копии используется успешно, он сохраняется как текущий пароль.</span><span class="sxs-lookup"><span data-stu-id="462c3-124">If the backup password is used successfully, it is saved as the current password.</span></span>

<span data-ttu-id="462c3-125">SCM обновляет состояние службы, когда служба отправляет уведомления о состоянии, используя функцию [**сбой SetServiceStatus**](/windows/desktop/api/Winsvc/nf-winsvc-setservicestatus) .</span><span class="sxs-lookup"><span data-stu-id="462c3-125">The SCM updates the service status when a service sends it status notifications using the [**SetServiceStatus**](/windows/desktop/api/Winsvc/nf-winsvc-setservicestatus) function.</span></span> <span data-ttu-id="462c3-126">SCM поддерживает состояние службы драйвера путем запроса к системе ввода-вывода вместо получения уведомлений о состоянии, как это происходит от службы.</span><span class="sxs-lookup"><span data-stu-id="462c3-126">The SCM maintains the status of a driver service by querying the I/O system, instead of receiving status notifications, as it does from a service.</span></span>

<span data-ttu-id="462c3-127">Служба может зарегистрировать дополнительные сведения о типе, вызвав функцию [**сетсервицебитс**](/windows/desktop/api/Lmserver/nf-lmserver-setservicebits) .</span><span class="sxs-lookup"><span data-stu-id="462c3-127">A service can register additional type information by calling the [**SetServiceBits**](/windows/desktop/api/Lmserver/nf-lmserver-setservicebits) function.</span></span> <span data-ttu-id="462c3-128">Функции [**нетсервержетинфо**](/windows/desktop/api/lmserver/nf-lmserver-netservergetinfo) и [**нетсерверенум**](/windows/desktop/api/lmserver/nf-lmserver-netserverenum) получают Поддерживаемые типы служб.</span><span class="sxs-lookup"><span data-stu-id="462c3-128">The [**NetServerGetInfo**](/windows/desktop/api/lmserver/nf-lmserver-netservergetinfo) and [**NetServerEnum**](/windows/desktop/api/lmserver/nf-lmserver-netserverenum) functions obtain the supported service types.</span></span>

 

 
