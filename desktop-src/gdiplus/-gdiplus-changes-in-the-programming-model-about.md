---
description: В следующих разделах описывается несколько способов программирования с помощью Windows GDI+, которые отличаются от программирования с помощью Windows интерфейс графических устройств (GDI).
ms.assetid: 89a154c1-6a49-45d6-a73c-94b0b1567408
title: Изменения в модели программирования
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a90cd6f1c3a6ebab1e55562e67cb4926f0ffedf9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104080640"
---
# <a name="changes-in-the-programming-model"></a><span data-ttu-id="bd186-103">Изменения в модели программирования</span><span class="sxs-lookup"><span data-stu-id="bd186-103">Changes in the Programming Model</span></span>

<span data-ttu-id="bd186-104">В следующих разделах описывается несколько способов программирования с помощью Windows GDI+, которые отличаются от программирования с помощью Windows интерфейс графических устройств (GDI).</span><span class="sxs-lookup"><span data-stu-id="bd186-104">The following sections describe several ways that programming with Windows GDI+ is different from programming with Windows Graphics Device Interface (GDI).</span></span>

-   [<span data-ttu-id="bd186-105">Контексты устройств, дескрипторы и графические объекты</span><span class="sxs-lookup"><span data-stu-id="bd186-105">Device Contexts, Handles, and Graphics Objects</span></span>](#device-contexts-handles-and-graphics-objects)
-   [<span data-ttu-id="bd186-106">Два способа рисования линии</span><span class="sxs-lookup"><span data-stu-id="bd186-106">Two Ways to Draw a Line</span></span>](#two-ways-to-draw-a-line)
    -   [<span data-ttu-id="bd186-107">Рисование линии с помощью GDI</span><span class="sxs-lookup"><span data-stu-id="bd186-107">Drawing a line with GDI</span></span>](#drawing-a-line-with-gdi)
    -   [<span data-ttu-id="bd186-108">Рисование линии с помощью GDI+ и интерфейса класса C++</span><span class="sxs-lookup"><span data-stu-id="bd186-108">Drawing a line with GDI+ and the C++ class interface</span></span>](#drawing-a-line-with-gdi-and-the-c-class-interface)
-   [<span data-ttu-id="bd186-109">Перья, кисти, пути, изображения и шрифты в качестве параметров</span><span class="sxs-lookup"><span data-stu-id="bd186-109">Pens, Brushes, Paths, Images, and Fonts as Parameters</span></span>](#pens-brushes-paths-images-and-fonts-as-parameters)
-   [<span data-ttu-id="bd186-110">Перегрузка методов</span><span class="sxs-lookup"><span data-stu-id="bd186-110">Method Overloading</span></span>](#method-overloading)
-   [<span data-ttu-id="bd186-111">Нет больше текущей должности</span><span class="sxs-lookup"><span data-stu-id="bd186-111">No More Current Position</span></span>](#no-more-current-position)
-   [<span data-ttu-id="bd186-112">Отдельные методы для рисования и заполнения</span><span class="sxs-lookup"><span data-stu-id="bd186-112">Separate Methods for Draw and Fill</span></span>](#separate-methods-for-draw-and-fill)
-   [<span data-ttu-id="bd186-113">Конструирование областей</span><span class="sxs-lookup"><span data-stu-id="bd186-113">Constructing Regions</span></span>](#constructing-regions)

## <a name="device-contexts-handles-and-graphics-objects"></a><span data-ttu-id="bd186-114">Контексты устройств, дескрипторы и графические объекты</span><span class="sxs-lookup"><span data-stu-id="bd186-114">Device Contexts, Handles, and Graphics Objects</span></span>

<span data-ttu-id="bd186-115">Если вы написали программы с помощью GDI (интерфейса графических устройств, входящего в предыдущие версии Windows), вы знакомы с концепцией контекста устройства (DC).</span><span class="sxs-lookup"><span data-stu-id="bd186-115">If you have written programs using GDI (the graphics device interface included in previous versions of Windows), you are familiar with the idea of a device context (DC).</span></span> <span data-ttu-id="bd186-116">Контекст устройства — это структура, используемая Windows для хранения сведений о возможностях конкретного устройства отображения и атрибутов, определяющих, как элементы будут отображаться на этом устройстве.</span><span class="sxs-lookup"><span data-stu-id="bd186-116">A device context is a structure used by Windows to store information about the capabilities of a particular display device and attributes that specify how items will be drawn on that device.</span></span> <span data-ttu-id="bd186-117">Контекст устройства для экранного видео также связан с определенным окном на экране.</span><span class="sxs-lookup"><span data-stu-id="bd186-117">A device context for a video display is also associated with a particular window on the display.</span></span> <span data-ttu-id="bd186-118">Сначала вы получаете маркер контекста устройства (HDC), а затем передаете этот обработчик в качестве аргумента функциям GDI, которые фактически выполняют рисование.</span><span class="sxs-lookup"><span data-stu-id="bd186-118">First you obtain a handle to a device context (HDC), and then you pass that handle as an argument to GDI functions that actually do the drawing.</span></span> <span data-ttu-id="bd186-119">Вы также передаете этот обработчик в качестве аргумента функциям GDI, которые получают или устанавливают атрибуты контекста устройства.</span><span class="sxs-lookup"><span data-stu-id="bd186-119">You also pass the handle as an argument to GDI functions that obtain or set the attributes of the device context.</span></span>

<span data-ttu-id="bd186-120">При использовании GDI+ вам не нужно думать о дескрипторах и контекстах устройств, как это делается при использовании GDI.</span><span class="sxs-lookup"><span data-stu-id="bd186-120">When you use GDI+, you don't have to be as concerned with handles and device contexts as you do when you use GDI.</span></span> <span data-ttu-id="bd186-121">Вы просто создаете [**графический**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) объект, а затем вызываете его методы в привычном объектно-ориентированном стиле — Миграфиксобжект. DrawLine (*Parameters*).</span><span class="sxs-lookup"><span data-stu-id="bd186-121">You simply create a [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) object and then invoke its methods in the familiar object-oriented style — myGraphicsObject.DrawLine(*parameters*).</span></span> <span data-ttu-id="bd186-122">Объект **Graphics** является основой интерфейса GDI+ так же, как контекст устройства является ядром GDI.</span><span class="sxs-lookup"><span data-stu-id="bd186-122">The **Graphics** object is at the core of GDI+ just as the device context is at the core of GDI.</span></span> <span data-ttu-id="bd186-123">Контекст устройства и объект **Graphics** играют аналогичные роли, но существуют фундаментальные различия между моделью программирования на основе маркеров, используемой с контекстами устройств (GDI), и объектно-ориентированной моделью, используемой с **графическими** объектами (GDI+).</span><span class="sxs-lookup"><span data-stu-id="bd186-123">The device context and the **Graphics** object play similar roles, but there are some fundamental differences between the handle-based programming model used with device contexts (GDI) and the object-oriented model used with **Graphics** objects (GDI+).</span></span>

<span data-ttu-id="bd186-124">[**Графический**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) объект, как и контекст устройства, связан с определенным окном на экране и содержит атрибуты (например, режим сглаживания и подсказку для визуализации текста), указывающий способ отрисовки элементов.</span><span class="sxs-lookup"><span data-stu-id="bd186-124">The [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) object, like the device context, is associated with a particular window on the screen and contains attributes (for example, smoothing mode and text rendering hint) that specify how items are to be drawn.</span></span> <span data-ttu-id="bd186-125">Однако объект **Graphics** не привязан к Перу, кисти, пути, изображению или шрифту в качестве контекста устройства.</span><span class="sxs-lookup"><span data-stu-id="bd186-125">However, the **Graphics** object is not tied to a pen, brush, path, image, or font as a device context is.</span></span> <span data-ttu-id="bd186-126">Например, в GDI, прежде чем можно будет использовать контекст устройства для рисования линии, необходимо вызвать функцию [SelectObject](/windows/win32/api/wingdi/nf-wingdi-selectobject) , чтобы связать объект Pen с контекстом устройства.</span><span class="sxs-lookup"><span data-stu-id="bd186-126">For example, in GDI, before you can use a device context to draw a line, you must call [SelectObject](/windows/win32/api/wingdi/nf-wingdi-selectobject) to associate a pen object with the device context.</span></span> <span data-ttu-id="bd186-127">Это называется выделением пера в контексте устройства.</span><span class="sxs-lookup"><span data-stu-id="bd186-127">This is referred to as selecting the pen into the device context.</span></span> <span data-ttu-id="bd186-128">Все линии, нарисованные в контексте устройства, будут использовать это перо до тех пор, пока не будет выбрано другое перо.</span><span class="sxs-lookup"><span data-stu-id="bd186-128">All lines drawn in the device context will use that pen until you select a different pen.</span></span> <span data-ttu-id="bd186-129">При использовании GDI+ объект [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) передается в качестве аргумента в метод [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) класса **Graphics** .</span><span class="sxs-lookup"><span data-stu-id="bd186-129">With GDI+, you pass a [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) object as an argument to the [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) method of the **Graphics** class.</span></span> <span data-ttu-id="bd186-130">Можно использовать другой объект **Pen** в каждом ряду вызовов метода DrawLine без связывания заданного объекта **Pen** с **графическим** объектом.</span><span class="sxs-lookup"><span data-stu-id="bd186-130">You can use a different **Pen** object in each of a series of DrawLine calls without having to associate a given **Pen** object with a **Graphics** object.</span></span>

## <a name="two-ways-to-draw-a-line"></a><span data-ttu-id="bd186-131">Два способа рисования линии</span><span class="sxs-lookup"><span data-stu-id="bd186-131">Two Ways to Draw a Line</span></span>

<span data-ttu-id="bd186-132">В следующих двух примерах каждый рисуется красная линия ширины 3 из расположения (20, 10) в положение (200 100).</span><span class="sxs-lookup"><span data-stu-id="bd186-132">The following two examples each draw a red line of width 3 from location (20, 10) to location (200,100).</span></span> <span data-ttu-id="bd186-133">Первый пример вызывает GDI, а второй вызывает GDI+ через интерфейс класса C++.</span><span class="sxs-lookup"><span data-stu-id="bd186-133">The first example calls GDI, and the second calls GDI+ through the C++ class interface.</span></span>

-   [<span data-ttu-id="bd186-134">Рисование линии с помощью GDI</span><span class="sxs-lookup"><span data-stu-id="bd186-134">Drawing a line with GDI</span></span>](#drawing-a-line-with-gdi)
-   [<span data-ttu-id="bd186-135">Рисование линии с помощью GDI+ и интерфейса класса C++</span><span class="sxs-lookup"><span data-stu-id="bd186-135">Drawing a line with GDI+ and the C++ class interface</span></span>](#drawing-a-line-with-gdi-and-the-c-class-interface)

### <a name="drawing-a-line-with-gdi"></a><span data-ttu-id="bd186-136">Рисование линии с помощью GDI</span><span class="sxs-lookup"><span data-stu-id="bd186-136">Drawing a line with GDI</span></span>

<span data-ttu-id="bd186-137">Чтобы нарисовать линию с помощью GDI, необходимы два объекта: контекст устройства и перо.</span><span class="sxs-lookup"><span data-stu-id="bd186-137">To draw a line with GDI, you need two objects: a device context and a pen.</span></span> <span data-ttu-id="bd186-138">Вы получаете обработчик контекста устройства, вызывая [**бегинпаинт**](/windows/win32/api/winuser/nf-winuser-beginpaint), и указатель на перо, вызывая [креатепен](/windows/win32/api/wingdi/nf-wingdi-createpen).</span><span class="sxs-lookup"><span data-stu-id="bd186-138">You get a handle to a device context by calling [**BeginPaint**](/windows/win32/api/winuser/nf-winuser-beginpaint), and a handle to a pen by calling [CreatePen](/windows/win32/api/wingdi/nf-wingdi-createpen).</span></span> <span data-ttu-id="bd186-139">Затем следует вызвать функцию [SelectObject](/windows/win32/api/wingdi/nf-wingdi-selectobject) , чтобы выбрать перо в контексте устройства.</span><span class="sxs-lookup"><span data-stu-id="bd186-139">Next, you call [SelectObject](/windows/win32/api/wingdi/nf-wingdi-selectobject) to select the pen into the device context.</span></span> <span data-ttu-id="bd186-140">Установите для параметра "перо" значение (20, 10), вызвав [моветоекс](/windows/win32/api/wingdi/nf-wingdi-movetoex) , а затем нарисуйте линию с этой позицией пера на (200, 100), вызвав **lineTo**.</span><span class="sxs-lookup"><span data-stu-id="bd186-140">You set the pen position to (20, 10) by calling [MoveToEx](/windows/win32/api/wingdi/nf-wingdi-movetoex) and then draw a line from that pen position to (200, 100) by calling **LineTo**.</span></span> <span data-ttu-id="bd186-141">Обратите внимание, что Моветоекс и [lineTo](/windows/win32/api/wingdi/nf-wingdi-lineto) одновременно получают **HDC** в качестве аргумента.</span><span class="sxs-lookup"><span data-stu-id="bd186-141">Note that MoveToEx and [LineTo](/windows/win32/api/wingdi/nf-wingdi-lineto) both receive **hdc** as an argument.</span></span>


```
HDC          hdc;
PAINTSTRUCT  ps;
HPEN         hPen;
HPEN         hPenOld;
hdc = BeginPaint(hWnd, &ps);
   hPen = CreatePen(PS_SOLID, 3, RGB(255, 0, 0));
   hPenOld = (HPEN)SelectObject(hdc, hPen);
   MoveToEx(hdc, 20, 10, NULL);
   LineTo(hdc, 200, 100);
   SelectObject(hdc, hPenOld);
   DeleteObject(hPen);
EndPaint(hWnd, &ps);
```



### <a name="drawing-a-line-with-gdi-and-the-c-class-interface"></a><span data-ttu-id="bd186-142">Рисование линии с помощью GDI+ и интерфейса класса C++</span><span class="sxs-lookup"><span data-stu-id="bd186-142">Drawing a line with GDI+ and the C++ class interface</span></span>

<span data-ttu-id="bd186-143">Чтобы нарисовать линию с помощью GDI+ и интерфейса класса C++, необходим объект [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) и объект [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) .</span><span class="sxs-lookup"><span data-stu-id="bd186-143">To draw a line with GDI+ and the C++ class interface, you need a [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) object and a [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) object.</span></span> <span data-ttu-id="bd186-144">Обратите внимание, что окна для обработки этих объектов не запрашиваются.</span><span class="sxs-lookup"><span data-stu-id="bd186-144">Note that you don't ask Windows for handles to these objects.</span></span> <span data-ttu-id="bd186-145">Вместо этого конструкторы используются для создания экземпляра класса **Graphics** ( **графического** объекта) и экземпляра класса **Pen** (объект **Pen** ).</span><span class="sxs-lookup"><span data-stu-id="bd186-145">Instead, you use constructors to create an instance of the **Graphics** class (a **Graphics** object) and an instance of the **Pen** class (a **Pen** object).</span></span> <span data-ttu-id="bd186-146">Рисование линии включает вызов метода [**Graphics::D равлине**](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) класса **Graphics** .</span><span class="sxs-lookup"><span data-stu-id="bd186-146">Drawing a line involves calling the [**Graphics::DrawLine**](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) method of the **Graphics** class.</span></span> <span data-ttu-id="bd186-147">Первый параметр метода **Graphics::D равлине** является указателем на объект **Pen** .</span><span class="sxs-lookup"><span data-stu-id="bd186-147">The first parameter of the **Graphics::DrawLine** method is a pointer to your **Pen** object.</span></span> <span data-ttu-id="bd186-148">Это более простая и более гибкая схема, чем выбор пера в контексте устройства, как показано в предыдущем примере GDI.</span><span class="sxs-lookup"><span data-stu-id="bd186-148">This is a simpler and more flexible scheme than selecting a pen into a device context as shown in the preceding GDI example.</span></span>


```
HDC          hdc;
PAINTSTRUCT  ps;
Pen*         myPen;
Graphics*    myGraphics;
hdc = BeginPaint(hWnd, &ps);
   myPen = new Pen(Color(255, 255, 0, 0), 3);
   myGraphics = new Graphics(hdc);
   myGraphics->DrawLine(myPen, 20, 10, 200, 100);
   delete myGraphics;
   delete myPen;
EndPaint(hWnd, &ps);
```



## <a name="pens-brushes-paths-images-and-fonts-as-parameters"></a><span data-ttu-id="bd186-149">Перья, кисти, пути, изображения и шрифты в качестве параметров</span><span class="sxs-lookup"><span data-stu-id="bd186-149">Pens, Brushes, Paths, Images, and Fonts as Parameters</span></span>

<span data-ttu-id="bd186-150">В предыдущих примерах показано, что объекты [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) можно создавать и обслуживать отдельно от объекта [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) , который предоставляет методы рисования.</span><span class="sxs-lookup"><span data-stu-id="bd186-150">The preceding examples show that [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) objects can be created and maintained separately from the [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) object, which supplies the drawing methods.</span></span> <span data-ttu-id="bd186-151">Объекты [**Brush**](/windows/win32/api/gdiplusbrush/nl-gdiplusbrush-brush), [**GraphicsPath**](/windows/win32/api/gdipluspath/nl-gdipluspath-graphicspath), [**Image**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-image)и [**Font**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-font) также можно создавать и поддерживать отдельно от объекта **Graphics** .</span><span class="sxs-lookup"><span data-stu-id="bd186-151">[**Brush**](/windows/win32/api/gdiplusbrush/nl-gdiplusbrush-brush), [**GraphicsPath**](/windows/win32/api/gdipluspath/nl-gdipluspath-graphicspath), [**Image**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-image), and [**Font**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-font) objects can also be created and maintained separately from the **Graphics** object.</span></span> <span data-ttu-id="bd186-152">Многие из методов рисования, предоставляемых классом **Graphics** , получают объект **Brush**, **GraphicsPath**, **Image** или **Font** в качестве аргумента.</span><span class="sxs-lookup"><span data-stu-id="bd186-152">Many of the drawing methods provided by the **Graphics** class receive a **Brush**, **GraphicsPath**, **Image**, or **Font** object as an argument.</span></span> <span data-ttu-id="bd186-153">Например, адрес объекта **Brush** передается в качестве аргумента в метод [филлректангле](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-fillrectangle(inconstbrush_inreal_inreal_inreal_inreal)) , а адрес объекта **GraphicsPath** передается в качестве аргумента в метод [**Graphics::D равпас**](/windows/win32/api/Gdiplusgraphics/nf-gdiplusgraphics-graphics-drawpath) .</span><span class="sxs-lookup"><span data-stu-id="bd186-153">For example, the address of a **Brush** object is passed as an argument to the [FillRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-fillrectangle(inconstbrush_inreal_inreal_inreal_inreal)) method, and the address of a **GraphicsPath** object is passed as an argument to the [**Graphics::DrawPath**](/windows/win32/api/Gdiplusgraphics/nf-gdiplusgraphics-graphics-drawpath) method.</span></span> <span data-ttu-id="bd186-154">Аналогичным образом адреса объектов **Image** и **Font** передаются методам [DrawImage](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawimage(inimage_inconstpointf_)) и [DrawString](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawstring(constwchar_int_constfont_constpointf__constbrush)) .</span><span class="sxs-lookup"><span data-stu-id="bd186-154">Similarly, addresses of **Image** and **Font** objects are passed to the [DrawImage](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawimage(inimage_inconstpointf_)) and [DrawString](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawstring(constwchar_int_constfont_constpointf__constbrush)) methods.</span></span> <span data-ttu-id="bd186-155">Это отличается от GDI, где вы выбрали кисть, путь, изображение или шрифт в контексте устройства, а затем передаем дескриптор контекста устройства в качестве аргумента функции рисования.</span><span class="sxs-lookup"><span data-stu-id="bd186-155">This is in contrast to GDI where you select a brush, path, image, or font into the device context and then pass a handle to the device context as an argument to a drawing function.</span></span>

## <a name="method-overloading"></a><span data-ttu-id="bd186-156">Перегрузка методов</span><span class="sxs-lookup"><span data-stu-id="bd186-156">Method Overloading</span></span>

<span data-ttu-id="bd186-157">Многие из методов GDI+ перегружены; то есть несколько методов имеют одно и то же имя, но имеют разные списки параметров.</span><span class="sxs-lookup"><span data-stu-id="bd186-157">Many of the GDI+ methods are overloaded; that is, several methods share the same name but have different parameter lists.</span></span> <span data-ttu-id="bd186-158">Например, метод [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) класса [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) имеет следующие формы:</span><span class="sxs-lookup"><span data-stu-id="bd186-158">For example, the [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) method of the [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) class comes in the following forms:</span></span>


```
Status DrawLine(IN const Pen* pen,
                IN REAL x1,
                IN REAL y1,
                IN REAL x2,
                IN REAL y2);
Status DrawLine(IN const Pen* pen,
                IN const PointF& pt1,
                IN const PointF& pt2);
Status DrawLine(IN const Pen* pen,
                IN INT x1,
                IN INT y1,
                IN INT x2,
                IN INT y2);
    
Status DrawLine(IN const Pen* pen,
                IN const Point& pt1,
                IN const Point& pt2);
```



<span data-ttu-id="bd186-159">Все четыре варианта [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) выше получают указатель на объект [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) , координаты начальной точки и координаты конечной точки.</span><span class="sxs-lookup"><span data-stu-id="bd186-159">All four of the [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) variations above receive a pointer to a [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) object, the coordinates of the starting point, and the coordinates of the ending point.</span></span> <span data-ttu-id="bd186-160">Первые два варианта получают координаты в виде чисел с плавающей запятой, а последние два варианта получают координаты как целые числа.</span><span class="sxs-lookup"><span data-stu-id="bd186-160">The first two variations receive the coordinates as floating point numbers, and the last two variations receive the coordinates as integers.</span></span> <span data-ttu-id="bd186-161">Первый и третий варианты получают координаты как список из четырех отдельных чисел, а второй и четвертый варианты получают координаты в виде пары объектов [**Point**](/windows/win32/api/gdiplustypes/nl-gdiplustypes-point) (или [**PointF**](/windows/win32/api/gdiplustypes/nl-gdiplustypes-pointf)).</span><span class="sxs-lookup"><span data-stu-id="bd186-161">The first and third variations receive the coordinates as a list of four separate numbers, while the second and fourth variations receive the coordinates as a pair of [**Point**](/windows/win32/api/gdiplustypes/nl-gdiplustypes-point) (or [**PointF**](/windows/win32/api/gdiplustypes/nl-gdiplustypes-pointf)) objects.</span></span>

## <a name="no-more-current-position"></a><span data-ttu-id="bd186-162">Нет больше текущей должности</span><span class="sxs-lookup"><span data-stu-id="bd186-162">No More Current Position</span></span>

<span data-ttu-id="bd186-163">Обратите внимание, что в методах [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) , показанных ранее, начальная и конечная точки линии принимаются в качестве аргументов.</span><span class="sxs-lookup"><span data-stu-id="bd186-163">Note that in the [DrawLine](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawline(inconstpen_inreal_inreal_inreal_inreal)) methods shown previously both the starting point and the ending point of the line are received as arguments.</span></span> <span data-ttu-id="bd186-164">Это отправлено из схемы GDI, где вы вызываете **моветоекс** для установки текущей позиции пера, за которой следует значение **lineTo** , чтобы нарисовать линию, начинающуюся с (**x1**, **Y1**) и заканчивая в (**x2**, **Y2**).</span><span class="sxs-lookup"><span data-stu-id="bd186-164">This is a departure from the GDI scheme where you call **MoveToEx** to set the current pen position followed by **LineTo** in order to draw a line starting at (**x1**, **y1**) and ending at (**x2**, **y2**).</span></span> <span data-ttu-id="bd186-165">В GDI+ в целом прекращено понятие текущего расположения.</span><span class="sxs-lookup"><span data-stu-id="bd186-165">GDI+ as a whole has abandoned the notion of current position.</span></span>

## <a name="separate-methods-for-draw-and-fill"></a><span data-ttu-id="bd186-166">Отдельные методы для рисования и заполнения</span><span class="sxs-lookup"><span data-stu-id="bd186-166">Separate Methods for Draw and Fill</span></span>

<span data-ttu-id="bd186-167">Интерфейс GDI+ является более гибким, чем GDI, когда речь идет о рисовании контуров и заполнении внутренних областей фигур, таких как прямоугольники.</span><span class="sxs-lookup"><span data-stu-id="bd186-167">GDI+ is more flexible than GDI when it comes to drawing the outlines and filling the interiors of shapes like rectangles.</span></span> <span data-ttu-id="bd186-168">GDI имеет функцию [Rectangle](/windows/win32/api/wingdi/nf-wingdi-rectangle) , которая рисует контур и заполняет внутреннюю часть прямоугольника на один шаг.</span><span class="sxs-lookup"><span data-stu-id="bd186-168">GDI has a [Rectangle](/windows/win32/api/wingdi/nf-wingdi-rectangle) function that draws the outline and fills the interior of a rectangle all in one step.</span></span> <span data-ttu-id="bd186-169">Контур рисуется с помощью выбранного пера, а внутренняя часть заполняется текущей выбранной кистью.</span><span class="sxs-lookup"><span data-stu-id="bd186-169">The outline is drawn with the currently selected pen, and the interior is filled with the currently selected brush.</span></span>


```
hBrush = CreateHatchBrush(HS_CROSS, RGB(0, 0, 255));
hPen = CreatePen(PS_SOLID, 3, RGB(255, 0, 0));
SelectObject(hdc, hBrush);
SelectObject(hdc, hPen);
Rectangle(hdc, 100, 50, 200, 80);
```



<span data-ttu-id="bd186-170">GDI+ имеет отдельные методы для рисования контура и заполнения внутренней части прямоугольника.</span><span class="sxs-lookup"><span data-stu-id="bd186-170">GDI+ has separate methods for drawing the outline and filling the interior of a rectangle.</span></span> <span data-ttu-id="bd186-171">Метод [DrawRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawrectangle(inconstpen_inreal_inreal_inreal_inreal)) класса [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) имеет адрес объекта [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) в качестве одного из его параметров, а метод [филлректангле](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-fillrectangle(inconstbrush_inreal_inreal_inreal_inreal)) имеет адрес объекта [**Brush**](/windows/win32/api/gdiplusbrush/nl-gdiplusbrush-brush) в качестве одного из его параметров.</span><span class="sxs-lookup"><span data-stu-id="bd186-171">The [DrawRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawrectangle(inconstpen_inreal_inreal_inreal_inreal)) method of the [**Graphics**](/windows/win32/api/gdiplusgraphics/nl-gdiplusgraphics-graphics) class has the address of a [**Pen**](/windows/win32/api/gdipluspen/nl-gdipluspen-pen) object as one of its parameters, and the [FillRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-fillrectangle(inconstbrush_inreal_inreal_inreal_inreal)) method has the address of a [**Brush**](/windows/win32/api/gdiplusbrush/nl-gdiplusbrush-brush) object as one of its parameters.</span></span>


```
HatchBrush* myHatchBrush = new HatchBrush(
   HatchStyleCross,
   Color(255, 0, 255, 0),
   Color(255, 0, 0, 255));
Pen* myPen = new Pen(Color(255, 255, 0, 0), 3);
myGraphics.FillRectangle(myHatchBrush, 100, 50, 100, 30);
myGraphics.DrawRectangle(myPen, 100, 50, 100, 30);
```



<span data-ttu-id="bd186-172">Обратите внимание, что методы [филлректангле](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-fillrectangle(inconstbrush_inreal_inreal_inreal_inreal)) и [DrawRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawrectangle(inconstpen_inreal_inreal_inreal_inreal)) в GDI+ получают аргументы, указывающие левую границу, верхнюю, ширину и высоту прямоугольника.</span><span class="sxs-lookup"><span data-stu-id="bd186-172">Note that the [FillRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-fillrectangle(inconstbrush_inreal_inreal_inreal_inreal)) and [DrawRectangle](/windows/win32/api/gdiplusgraphics/nf-gdiplusgraphics-graphics-drawrectangle(inconstpen_inreal_inreal_inreal_inreal)) methods in GDI+ receive arguments that specify the rectangle's left edge, top, width, and height.</span></span> <span data-ttu-id="bd186-173">Это отличается от функции[Rectangle](/windows/win32/api/wingdi/nf-wingdi-rectangle) GDI, которая принимает аргументы, указывающие левый край прямоугольника, правый край, верхний и нижний.</span><span class="sxs-lookup"><span data-stu-id="bd186-173">This is in contrast to the GDI[Rectangle](/windows/win32/api/wingdi/nf-wingdi-rectangle) function, which takes arguments that specify the rectangle's left edge, right edge, top, and bottom.</span></span> <span data-ttu-id="bd186-174">Также обратите внимание, что конструктор для класса [**Color**](/windows/win32/api/gdipluscolor/nl-gdipluscolor-color) в GDI+ имеет четыре параметра.</span><span class="sxs-lookup"><span data-stu-id="bd186-174">Also note that the constructor for the [**Color**](/windows/win32/api/gdipluscolor/nl-gdipluscolor-color) class in GDI+ has four parameters.</span></span> <span data-ttu-id="bd186-175">Последние три параметра — это обычные значения красного, зеленого и синего. Первый параметр — это альфа-значение, указывающее экстент, в котором нарисованный цвет смешивается с цветом фона.</span><span class="sxs-lookup"><span data-stu-id="bd186-175">The last three parameters are the usual red, green, and blue values; the first parameter is the alpha value, which specifies the extent to which the color being drawn is blended with the background color.</span></span>

## <a name="constructing-regions"></a><span data-ttu-id="bd186-176">Конструирование областей</span><span class="sxs-lookup"><span data-stu-id="bd186-176">Constructing Regions</span></span>

<span data-ttu-id="bd186-177">GDI предоставляет несколько функций для создания регионов: Креатеректргн, Креатиллптикргн, Креатераундректргн, Креатеполигонргн и Креатеполиполигонргн.</span><span class="sxs-lookup"><span data-stu-id="bd186-177">GDI provides several functions for creating regions: CreateRectRgn, CreateEllpticRgn, CreateRoundRectRgn, CreatePolygonRgn, and CreatePolyPolygonRgn.</span></span> <span data-ttu-id="bd186-178">Класс [**Region**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-region) в GDI+ может иметь аналогичные конструкторы, принимающие прямоугольники, эллипсы, скругленные прямоугольники и многоугольники в качестве аргументов, но это не так.</span><span class="sxs-lookup"><span data-stu-id="bd186-178">You might expect the [**Region**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-region) class in GDI+ to have analogous constructors that take rectangles, ellipses, rounded rectangles, and polygons as arguments, but that is not the case.</span></span> <span data-ttu-id="bd186-179">Класс **Region** в GDI+ предоставляет конструктор, который получает ссылку на объект [**Rect**](/windows/win32/api/gdiplustypes/nl-gdiplustypes-rect) и другой конструктор, получающий адрес объекта [**GraphicsPath**](/windows/win32/api/gdipluspath/nl-gdipluspath-graphicspath) .</span><span class="sxs-lookup"><span data-stu-id="bd186-179">The **Region** class in GDI+ provides a constructor that receives a [**Rect**](/windows/win32/api/gdiplustypes/nl-gdiplustypes-rect) object reference and another constructor that receives the address of a [**GraphicsPath**](/windows/win32/api/gdipluspath/nl-gdipluspath-graphicspath) object.</span></span> <span data-ttu-id="bd186-180">Если вы хотите создать область на основе эллипса, скругленного прямоугольника или многоугольника, вы можете легко сделать это, создав объект **GraphicsPath** (который содержит эллипс), а затем передав адрес этого объекта **GraphicsPath** в конструктор **Region** .</span><span class="sxs-lookup"><span data-stu-id="bd186-180">If you want to construct a region based on an ellipse, rounded rectangle, or polygon, you can easily do so by creating a **GraphicsPath** object (that contains an ellipse, for example) and then passing the address of that **GraphicsPath** object to a **Region** constructor.</span></span>

<span data-ttu-id="bd186-181">Интерфейс GDI+ упрощает формирование сложных областей путем объединения фигур и путей.</span><span class="sxs-lookup"><span data-stu-id="bd186-181">GDI+ makes it easy to form complex regions by combining shapes and paths.</span></span> <span data-ttu-id="bd186-182">Класс [**Region**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-region) содержит методы [Union](/windows/win32/api/gdiplusheaders/nf-gdiplusheaders-region-union(inconstrectf_)) и [Intersect](/windows/win32/api/gdiplusheaders/nf-gdiplusheaders-region-intersect(inconstgraphicspath)) , которые можно использовать для дополнения существующей области с путем или другим регионом.</span><span class="sxs-lookup"><span data-stu-id="bd186-182">The [**Region**](/windows/win32/api/gdiplusheaders/nl-gdiplusheaders-region) class has [Union](/windows/win32/api/gdiplusheaders/nf-gdiplusheaders-region-union(inconstrectf_)) and [Intersect](/windows/win32/api/gdiplusheaders/nf-gdiplusheaders-region-intersect(inconstgraphicspath)) methods that you can use to augment an existing region with a path or another region.</span></span> <span data-ttu-id="bd186-183">Одной из замечательных функций схемы GDI+ является то, что объект [**GraphicsPath**](/windows/win32/api/gdipluspath/nl-gdipluspath-graphicspath) не уничтожается, когда он передается в качестве аргумента в конструктор **Region** .</span><span class="sxs-lookup"><span data-stu-id="bd186-183">One nice feature of the GDI+ scheme is that a [**GraphicsPath**](/windows/win32/api/gdipluspath/nl-gdipluspath-graphicspath) object is not destroyed when it is passed as an argument to a **Region** constructor.</span></span> <span data-ttu-id="bd186-184">В GDI можно преобразовать путь в область с помощью функции [пасторегион](/windows/win32/api/wingdi/nf-wingdi-pathtoregion) , но путь уничтожается в процессе.</span><span class="sxs-lookup"><span data-stu-id="bd186-184">In GDI, you can convert a path to a region with the [PathToRegion](/windows/win32/api/wingdi/nf-wingdi-pathtoregion) function, but the path is destroyed in the process.</span></span> <span data-ttu-id="bd186-185">Кроме того, объект **GraphicsPath** не уничтожается, когда его адрес передается в качестве аргумента в метод Union или INTERSECT, поэтому можно использовать заданный путь в качестве стандартного блока для нескольких отдельных регионов.</span><span class="sxs-lookup"><span data-stu-id="bd186-185">Also, a **GraphicsPath** object is not destroyed when its address is passed as an argument to a Union or Intersect method, so you can use a given path as a building block for several separate regions.</span></span> <span data-ttu-id="bd186-186">Это показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="bd186-186">This is shown in the following example.</span></span> <span data-ttu-id="bd186-187">Предположим, что **онепас** является указателем на объект **GraphicsPath** (простой или сложный), который уже был инициализирован.</span><span class="sxs-lookup"><span data-stu-id="bd186-187">Assume that **onePath** is a pointer to a **GraphicsPath** object (simple or complex) that has already been initialized.</span></span>


```
Region  region1(rect1);
Region  region2(rect2);
region1.Union(onePath);
region2.Intersect(onePath);
```



 

 
