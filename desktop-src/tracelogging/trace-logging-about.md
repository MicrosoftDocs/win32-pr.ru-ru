---
title: О Трацелоггинг
description: Трацелоггинг — это новая трассировка событий Windows 10 для приложений пользовательского режима и драйверов режима ядра.
ms.assetid: 8C6A9E91-98F9-4D6B-A937-A22BA7CEB1E4
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a6c2b1ca72385a51df1e0cd82f3e91c198f15b5d
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103890764"
---
# <a name="about-tracelogging"></a><span data-ttu-id="d8dfc-103">О Трацелоггинг</span><span class="sxs-lookup"><span data-stu-id="d8dfc-103">About TraceLogging</span></span>

<span data-ttu-id="d8dfc-104">Трацелоггинг — это новая трассировка событий Windows 10 для приложений пользовательского режима и драйверов режима ядра.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-104">TraceLogging is the new Windows 10 event tracing for user-mode applications and kernel-mode drivers.</span></span> <span data-ttu-id="d8dfc-105">Трацелоггинг — это формат для самостоятельного описания трассировки событий Windows (ETW).</span><span class="sxs-lookup"><span data-stu-id="d8dfc-105">TraceLogging is a format for self-describing Event Tracing for Windows (ETW).</span></span> <span data-ttu-id="d8dfc-106">Трацелоггинг строится на трассировке событий Windows (ETW) и предоставляет упрощенный способ инструментирования кода.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-106">TraceLogging builds on Event Tracing for Windows (ETW) and provides a simplified way to instrument code.</span></span>

<span data-ttu-id="d8dfc-107">Трацелоггинг предлагает простоту препроцессора трассировки программного обеспечения Windows (WPP) с дополнительным преимуществом, позволяющим включать структурированные данные с событиями, возможность корреляции событий и все, без необходимости отдельного XML-файла манифеста инструментирования.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-107">TraceLogging offers the simplicity of Windows software trace preprocessor (WPP) with the added benefit of being able to include structured data with events, the capability of correlating events, and all without requiring a separate instrumentation manifest XML file.</span></span> <span data-ttu-id="d8dfc-108">События — это самостоятельное описание, которое означает, что двоичный файл, содержащий манифест инструментирования, не требуется регистрировать в системе, чтобы использовать API-интерфейсы Data Trace (TDH) для декодирования и отображения событий.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-108">Events are self-describing which means that a binary containing the instrumentation manifest does not need to be registered on the system in order to use the Trace Data Helper (TDH) APIs to decode and show events.</span></span>

<span data-ttu-id="d8dfc-109">Трассировка событий для Windows (ETW) появилась в Windows 2000 и обновлена в Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-109">Event Tracing for Windows (ETW) was introduced with Windows 2000 and updated in Windows Vista.</span></span> <span data-ttu-id="d8dfc-110">Трацелоггинг построены поверх API ETW Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-110">Tracelogging builds on top of the Windows Vista ETW APIs.</span></span> <span data-ttu-id="d8dfc-111">Поставщики могут использовать технологию Трацелоггинг и по-прежнему работают в Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-111">Providers can use the TraceLogging technology and still work on Windows Vista.</span></span> <span data-ttu-id="d8dfc-112">Для управления поставщиками Трацелоггинг можно использовать существующие контроллеры (с использованием Windows Вистаапис).</span><span class="sxs-lookup"><span data-stu-id="d8dfc-112">Existing controllers (using Windows VistaAPIs) can be used to control TraceLogging providers.</span></span>

<span data-ttu-id="d8dfc-113">Трацелоггинг также совместим с существующими инструментами.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-113">TraceLogging is also compatible with existing tools.</span></span> <span data-ttu-id="d8dfc-114">Поставщики, использующие ETW на основе манифеста, по-прежнему поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-114">Providers that use manifest-based ETW are still supported.</span></span> <span data-ttu-id="d8dfc-115">Не нужно преобразовывать поставщики ETW на основе манифеста в поставщики Трацелоггинг, если вы не хотите воспользоваться преимуществами Трацелоггинг.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-115">You do not need to convert manifest based ETW providers to TraceLogging providers unless you wish to take advantage of the simplicity that TraceLogging provides.</span></span> <span data-ttu-id="d8dfc-116">Также поддерживается трассировка WPP.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-116">WPP tracing is also still supported.</span></span>

<span data-ttu-id="d8dfc-117">Трацелоггинг строится на основе ETW, но вносит несколько важных усовершенствований:</span><span class="sxs-lookup"><span data-stu-id="d8dfc-117">TraceLogging builds upon ETW but introduces several important improvements:</span></span>

-   <span data-ttu-id="d8dfc-118">Трассировка события так же проста, как вызов API.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-118">Tracing an event is as simple as an API call.</span></span>
-   <span data-ttu-id="d8dfc-119">События являются самоописывающими и не нуждаются в дополнительных двоичных файлах, содержащих скомпилированный манифест события для интерпретации события.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-119">Events are self-describing and do not require any additional binaries containing the compiled event manifest to interpret the event.</span></span> <span data-ttu-id="d8dfc-120">Все метаданные о событии записываются в событие.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-120">All the metadata about the event is recorded in the event.</span></span>
-   <span data-ttu-id="d8dfc-121">Действия внутри одного процесса можно легко выразить с помощью событий запуска и остановки.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-121">Activities inside a single process can be easily expressed through start and stop events.</span></span>
-   <span data-ttu-id="d8dfc-122">Трацелоггинг совместим с существующей поддержкой инструментирования.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-122">TraceLogging is compatible with existing instrumentation support.</span></span> <span data-ttu-id="d8dfc-123">Новые API ETW продолжат поддерживать старые поставщики.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-123">The new ETW APIs continue to support the old providers.</span></span> <span data-ttu-id="d8dfc-124">Вы можете вкладывать новые интерфейсы API ETW в стратегические сценарии, оставляя старые точки инструментирования.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-124">You can invest in the new ETW APIs for strategic scenarios while leaving your old instrumentation points as they are.</span></span>
-   <span data-ttu-id="d8dfc-125">Трацелоггинг предлагает один и тот же API трассировки событий для Windows 10, Xbox One и Windows 10 Mobile.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-125">TraceLogging offers the same event tracing API for Windows 10, Xbox One, and Windows 10 Mobile.</span></span>
-   <span data-ttu-id="d8dfc-126">Интерфейсы API Трацелоггинг доступны на языках C, C++, .NET и среда выполнения Windows.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-126">TraceLogging APIs are accessible from C, C++, .NET, and Windows Runtime.</span></span>

## <a name="api-high-level-overview"></a><span data-ttu-id="d8dfc-127">Высокоуровневый обзор API</span><span class="sxs-lookup"><span data-stu-id="d8dfc-127">API high-level overview</span></span>

<span data-ttu-id="d8dfc-128">Существует три отдельных API Трацелоггинг, предназначенных для разных аудиторов разработчиков.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-128">There are three separate TraceLogging APIs that target different developer audiences.</span></span> <span data-ttu-id="d8dfc-129">Каждый API разработан для удовлетворения различных наборов требований, соответствующих целевой аудитории этого API.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-129">Each API was designed to meet different sets of requirements as appropriate for the target audience of that API.</span></span>

<span data-ttu-id="d8dfc-130">Для разработчиков WinRT:</span><span class="sxs-lookup"><span data-stu-id="d8dfc-130">For WinRT developers:</span></span>

-   <span data-ttu-id="d8dfc-131">[**LoggingChannel**](/uwp/api/Windows.Foundation.Diagnostics.LoggingChannel) был расширен в Windows 10 для записи в журнал событий трассировки событий Windows (ETW) без необходимости манифеста.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-131">[**LoggingChannel**](/uwp/api/Windows.Foundation.Diagnostics.LoggingChannel) has been extended in Windows 10 to log self-describing Event Tracing for Windows (ETW) events without the need for a manifest.</span></span>
-   <span data-ttu-id="d8dfc-132">[**Логгингактивити**](/windows/win32/api/traceloggingactivity/nl-traceloggingactivity-traceloggingactivity) был расширен в Windows 10 для предоставления методов запуска и отмены действия, которые обеспечивают управление форматом и содержимым событий запуска и завершения.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-132">[**LoggingActivity**](/windows/win32/api/traceloggingactivity/nl-traceloggingactivity-traceloggingactivity) has been extended in Windows 10 to provide activity start and stop methods that provide control over the format and contents of the Start and Stop events.</span></span> <span data-ttu-id="d8dfc-133">Кроме того, действия могут быть вложенными.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-133">Additionally, activities can be nested.</span></span>

<span data-ttu-id="d8dfc-134">Для разработчиков C/C++:</span><span class="sxs-lookup"><span data-stu-id="d8dfc-134">For C/C++ developers:</span></span>

-   <span data-ttu-id="d8dfc-135">Трацелоггингпровидер. h содержит наиболее эффективный API, однако этот API плохо подходит для использования в динамических сценариях (сценариях), таких как JavaScript.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-135">TraceLoggingProvider.h contains the most efficient API, however this API is not well suited for use in dynamic (scripted) scenarios such as Javascript.</span></span> <span data-ttu-id="d8dfc-136">Этот API можно использовать в пользовательском режиме и в коде режима ядра.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-136">This API can be used in user-mode and kernel-mode code.</span></span>

<span data-ttu-id="d8dfc-137">Для разработчиков управляемого кода (Microsoft .NET Framework):</span><span class="sxs-lookup"><span data-stu-id="d8dfc-137">For managed code (Microsoft .NET Framework) developers:</span></span>

-   <span data-ttu-id="d8dfc-138">Класс [EventSource](/dotnet/api/system.diagnostics.tracing.eventsource) , поставляемый с предыдущими версиями платформа .NET Framework уже поддерживал запись событий ETW — автоматическое создание манифеста и Встраивание манифеста в поток событий.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-138">The [EventSource](/dotnet/api/system.diagnostics.tracing.eventsource) class that shipped with previous versions of the .NET Framework already supported writing ETW events - automatically generating the manifest and embedding the manifest into the event stream.</span></span> <span data-ttu-id="d8dfc-139">Однако разработчику по-прежнему пришлось отследить манифест для декодирования событий (если не работает сценарий, в котором поддерживался встроенный манифест).</span><span class="sxs-lookup"><span data-stu-id="d8dfc-139">However, the developer still had to keep track of the manifest to decode the events (unless working in a scenario where the embedded manifest was supported).</span></span> <span data-ttu-id="d8dfc-140">Трацелоггинг позволяет полностью устранять манифест.</span><span class="sxs-lookup"><span data-stu-id="d8dfc-140">TraceLogging allows the manifest to be eliminated completely.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d8dfc-141">См. также</span><span class="sxs-lookup"><span data-stu-id="d8dfc-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d8dfc-142">Сведения о трассировке событий</span><span class="sxs-lookup"><span data-stu-id="d8dfc-142">About Event Tracing</span></span>](/windows/desktop/ETW/about-event-tracing)
</dt> </dl>

 

 