---
description: Описание появления библиотек для Windows 7.
ms.assetid: 83c47963-4c8e-45ee-b707-bd45cfe048cd
title: Библиотеки оболочки Windows в Windows 7
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fb94551d80d0230966626f1bd6499801aff889c4
ms.sourcegitcommit: 3bdf30edb314e0fcd17dc4ddbc70e4ec7d3596e6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/10/2021
ms.locfileid: "105684724"
---
# <a name="windows-shell-libraries-in-windows"></a><span data-ttu-id="694e4-103">Библиотеки оболочки Windows в Windows</span><span class="sxs-lookup"><span data-stu-id="694e4-103">Windows Shell Libraries in Windows</span></span>

<span data-ttu-id="694e4-104">В этом разделе описаны общие сведения о библиотеках для Windows 7 и более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="694e4-104">This topic outlines the introduction of libraries for Windows 7 and later.</span></span> <span data-ttu-id="694e4-105">Библиотеки — это функция оболочки Windows.</span><span class="sxs-lookup"><span data-stu-id="694e4-105">Libraries are a Windows Shell feature.</span></span> <span data-ttu-id="694e4-106">Для доступа к функциональным возможностям оболочки Windows, таким как библиотеки, сторонние разработчики приложений Windows Search должны сначала реализовать хранилище данных оболочки.</span><span class="sxs-lookup"><span data-stu-id="694e4-106">To access Windows Shell functionality, such as libraries, third-party developers of Windows Search applications must first implement a Shell data store.</span></span> <span data-ttu-id="694e4-107">Дополнительные сведения см. [в разделе Реализация базовых интерфейсов объекта папки](/previous-versions/windows/desktop/legacy/cc144093(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="694e4-107">For more information, see [Implementing the Basic Folder Object Interfaces](/previous-versions/windows/desktop/legacy/cc144093(v=vs.85)).</span></span>

<span data-ttu-id="694e4-108">Этот раздел организован следующим образом:</span><span class="sxs-lookup"><span data-stu-id="694e4-108">This topic is organized as follows:</span></span>

- [<span data-ttu-id="694e4-109">Libraries</span><span class="sxs-lookup"><span data-stu-id="694e4-109">Libraries</span></span>](#libraries)
  - [<span data-ttu-id="694e4-110">Точки входа пользовательских данных</span><span class="sxs-lookup"><span data-stu-id="694e4-110">User Data Entry Points</span></span>](#user-data-entry-points)
  - [<span data-ttu-id="694e4-111">Коллекции папок</span><span class="sxs-lookup"><span data-stu-id="694e4-111">Collections of Folders</span></span>](#collections-of-folders)
  - [<span data-ttu-id="694e4-112">Поддерживаемые папки в библиотеках</span><span class="sxs-lookup"><span data-stu-id="694e4-112">Supported Folders in Libraries</span></span>](#supported-folders-in-libraries)
  - [<span data-ttu-id="694e4-113">Резервное хранилище</span><span class="sxs-lookup"><span data-stu-id="694e4-113">Storage-Backed</span></span>](#storage-backed)
  - [<span data-ttu-id="694e4-114">Контейнеры оболочки, не относящиеся к файловой системе</span><span class="sxs-lookup"><span data-stu-id="694e4-114">Non-File System Shell Containers</span></span>](#non-file-system-shell-containers)
  - [<span data-ttu-id="694e4-115">Описания библиотек</span><span class="sxs-lookup"><span data-stu-id="694e4-115">Library Descriptions</span></span>](#library-descriptions)
- [<span data-ttu-id="694e4-116">См. также</span><span class="sxs-lookup"><span data-stu-id="694e4-116">Related topics</span></span>](#related-topics)

## <a name="libraries"></a><span data-ttu-id="694e4-117">Библиотеки</span><span class="sxs-lookup"><span data-stu-id="694e4-117">Libraries</span></span>

<span data-ttu-id="694e4-118">В Windows 7 и более поздних версиях библиотеки являются репозиторием пользовательских данных по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="694e4-118">In Windows 7 and later, libraries are the default repository of user data.</span></span> <span data-ttu-id="694e4-119">Пользователи могут просматривать свои файлы точно так же, как в папке, или просматривать их файлы по свойствам, таким как дата, тип и автор.</span><span class="sxs-lookup"><span data-stu-id="694e4-119">Users can browse their files the same way they would in a folder, or they can view their files arranged by properties such as date, type, and author.</span></span> <span data-ttu-id="694e4-120">В отличие от папки Библиотека не хранит элементы, но отображает файлы, хранящиеся в нескольких папках одновременно.</span><span class="sxs-lookup"><span data-stu-id="694e4-120">Unlike a folder, a library does not actually store items, but displays files that are stored in several folders at the same time.</span></span> <span data-ttu-id="694e4-121">Библиотеки предоставляют единую точку доступа и сводные представления для пользователей их агрегированного содержимого.</span><span class="sxs-lookup"><span data-stu-id="694e4-121">Libraries provide a single access point and rich view pivots to users of their aggregated content.</span></span> <span data-ttu-id="694e4-122">Например, если у пользователя есть музыкальные файлы в папках на внешнем диске, а не в папке **«Моя музыка** », они смогут немедленно получить доступ ко всем музыкальным файлам через библиотеку музыки.</span><span class="sxs-lookup"><span data-stu-id="694e4-122">For example, if a user has music files in folders on an external drive in addition to the **My Music** folder, then they are able to immediately access all music files through the Music library.</span></span>

### <a name="user-data-entry-points"></a><span data-ttu-id="694e4-123">Точки входа пользовательских данных</span><span class="sxs-lookup"><span data-stu-id="694e4-123">User Data Entry Points</span></span>

<span data-ttu-id="694e4-124">Библиотеки по умолчанию ( **«Мои документы**», **«Мои рисунки**» и т. д.) эквивалентны [известной папке](/previous-versions/windows/desktop/legacy/bb776911(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="694e4-124">Default libraries (such as **My Documents**, **My Pictures**, and so forth) are the equivalent of [Known Folder](/previous-versions/windows/desktop/legacy/bb776911(v=vs.85)).</span></span> <span data-ttu-id="694e4-125">Библиотеки по умолчанию предоставляют пользователям привычные точки входа, но поскольку содержимое библиотеки не ограничено известными библиотеками содержимого папок, пользователям предоставляется больше возможностей для определения места хранения документов и мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="694e4-125">Default libraries provide familiar entry points to users, but because library content is not limited to Known Folder content libraries give users more freedom to determine where documents and media should be stored.</span></span> <span data-ttu-id="694e4-126">Библиотеки предоставляются через пространство имен оболочки (источник данных оболочки).</span><span class="sxs-lookup"><span data-stu-id="694e4-126">Libraries are exposed through the Shell namespace (Shell data source).</span></span> <span data-ttu-id="694e4-127">Приложение может предоставить пользователям те же знакомые точки входа в данные, включив поддержку библиотеки и просмотр.</span><span class="sxs-lookup"><span data-stu-id="694e4-127">Your application can provide users with the same familiar entry points to their data by enabling library awareness, and browsing.</span></span>

### <a name="collections-of-folders"></a><span data-ttu-id="694e4-128">Коллекции папок</span><span class="sxs-lookup"><span data-stu-id="694e4-128">Collections of Folders</span></span>

<span data-ttu-id="694e4-129">Библиотеки представляют собой определяемые пользователем коллекции содержимого.</span><span class="sxs-lookup"><span data-stu-id="694e4-129">Libraries are user-defined collections of content.</span></span> <span data-ttu-id="694e4-130">Windows Search индексирует поддерживаемые папки, если они включены в библиотеки.</span><span class="sxs-lookup"><span data-stu-id="694e4-130">Windows Search indexes supported folders when they are included in libraries.</span></span> <span data-ttu-id="694e4-131">Это позволяет осуществлять мгновенный поиск и упорядочение стеков на основе свойств в библиотеках.</span><span class="sxs-lookup"><span data-stu-id="694e4-131">This enables instant search, and property-based stack arrangement views in libraries.</span></span>

### <a name="supported-folders-in-libraries"></a><span data-ttu-id="694e4-132">Поддерживаемые папки в библиотеках</span><span class="sxs-lookup"><span data-stu-id="694e4-132">Supported Folders in Libraries</span></span>

<span data-ttu-id="694e4-133">Для поддержки папок в библиотеках они должны быть индексированы на локальном компьютере и индексироваться на удаленном компьютере Windows или индексироваться на сервере с файлами, индексированными с помощью службы поиска Windows.</span><span class="sxs-lookup"><span data-stu-id="694e4-133">For folders to be supported in libraries, they must be indexable on the local machine, and indexed either on a remote Windows machine, or indexed on a server with files indexed by Windows Search.</span></span>

<span data-ttu-id="694e4-134">Пользователям в диалоговом окне управления библиотекой Windows запрещено добавлять неподдерживаемые папки.</span><span class="sxs-lookup"><span data-stu-id="694e4-134">Unsupported folders are blocked from being added by users in the Windows library management dialog.</span></span> <span data-ttu-id="694e4-135">Если неиндексированные удаленные папки добавляются в библиотеку с помощью API [ишелллибрари](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishelllibrary) , то взаимодействие с пользователем библиотеки вернется в режим «в **безопасности** библиотеки».</span><span class="sxs-lookup"><span data-stu-id="694e4-135">If non-indexed remote folders are added to a library using the [IShellLibrary](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishelllibrary) API, then the library user experience will revert to library **Safe Mode**.</span></span> <span data-ttu-id="694e4-136">В таких функциях **безопасного режима** , как представления стека на основе свойств, предложения по фильтрации и поддержка поиска в **меню «Пуск** », удаляются из затронутой библиотеки.</span><span class="sxs-lookup"><span data-stu-id="694e4-136">In **Safe Mode** features such as property-based stack arrangement views, filter suggestions, and **Start Menu** search support are removed from the affected library.</span></span>

<span data-ttu-id="694e4-137">В следующей таблице перечислены папки, содержащиеся в библиотеках, с помощью диалогового окна управления библиотекой Windows Explorer, и папки, которые не поддерживаются в **защищенном режиме**.</span><span class="sxs-lookup"><span data-stu-id="694e4-137">The following table lists folders included in libraries using the Windows Explorer library management dialog, and folders that are unsupported in **Safe Mode**:</span></span>

| <span data-ttu-id="694e4-138">Поддерживаемые папки</span><span class="sxs-lookup"><span data-stu-id="694e4-138">Supported Folders</span></span>                                                                                                                            | <span data-ttu-id="694e4-139">Неподдерживаемые папки</span><span class="sxs-lookup"><span data-stu-id="694e4-139">Unsupported Folders</span></span>                                                                                     |
|----------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="694e4-140">Фиксированные и внешние жесткие диски NTFS и FAT32</span><span class="sxs-lookup"><span data-stu-id="694e4-140">Fixed and external NTFS and FAT32 hard drives</span></span>                                                                                                | <span data-ttu-id="694e4-141">Съемные носители (например, сумбдривес и SD-карты)</span><span class="sxs-lookup"><span data-stu-id="694e4-141">Removable drives (such as thumbdrives and SD cards)</span></span>                                                     |
| <span data-ttu-id="694e4-142">Общие папки, индексируемые службой поиска Windows (например, серверы подразделений и на компьютерах под управлением Windows 10 и Windows 7 Домашняя)</span><span class="sxs-lookup"><span data-stu-id="694e4-142">Shares that are indexed by Windows Search (such as departmental servers, and on computers running Windows 10, and Windows 7 Home edition)</span></span> | <span data-ttu-id="694e4-143">Съемные носители (например, компакт-диски и DVD)</span><span class="sxs-lookup"><span data-stu-id="694e4-143">Removable media (such as CDs and DVDs)</span></span>                                                                  |
| <span data-ttu-id="694e4-144">Общие папки, доступные вне сети (например, **перенаправленные документы**, **кэш на стороне клиента**)</span><span class="sxs-lookup"><span data-stu-id="694e4-144">Shares that are available offline (such as **Redirected My Documents**, **Client Side Cache**)</span></span>                                               | <span data-ttu-id="694e4-145">Сетевые папки, которые недоступны для автономной и удаленной индексации (например, для дисков NAS);</span><span class="sxs-lookup"><span data-stu-id="694e4-145">Network shares that are neither available offline nor remotely indexed (such as NAS drives)</span></span>             |
| <span data-ttu-id="694e4-146">Недоступно</span><span class="sxs-lookup"><span data-stu-id="694e4-146">n/a</span></span>                                                                                                                                          | <span data-ttu-id="694e4-147">Другие источники данных (например, Microsoft SharePoint, Microsoft Exchange, Microsoft OneDrive и т. д.)</span><span class="sxs-lookup"><span data-stu-id="694e4-147">Other data sources (such as Microsoft SharePoint, Microsoft Exchange, Microsoft OneDrive, and so forth)</span></span> |

### <a name="storage-backed"></a><span data-ttu-id="694e4-148">Storage-Backed</span><span class="sxs-lookup"><span data-stu-id="694e4-148">Storage-Backed</span></span>

<span data-ttu-id="694e4-149">Библиотеки представляют собой коллекции папок хранилища.</span><span class="sxs-lookup"><span data-stu-id="694e4-149">Libraries are collections of storage folders.</span></span> <span data-ttu-id="694e4-150">Пользователи могут сохранять и копировать файлы непосредственно в библиотеку, поскольку для отправки этих файлов в каждой библиотеке существует расположение для сохранения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="694e4-150">Users can save and copy files to a library directly, since every library has a default save location to send these files to.</span></span> <span data-ttu-id="694e4-151">Для библиотек по умолчанию это известная пользователем папка, включенная в библиотеку (например, **Мои документы**), или первая папка, добавленная в пользовательскую библиотеку.</span><span class="sxs-lookup"><span data-stu-id="694e4-151">For default libraries, this is user Known Folder that is included in a library (such as **My Documents**), or the first folder added to a custom library.</span></span> <span data-ttu-id="694e4-152">Это папка, куда файлы перемещаются, когда пользователь перетаскивает и удаляет файлы в библиотеке или сохраняет их в библиотеке с помощью диалогового окна common File.</span><span class="sxs-lookup"><span data-stu-id="694e4-152">This is the folder where files go when a user drags and drops files on to a library or saves to a library with the common file dialog.</span></span> <span data-ttu-id="694e4-153">Пользователь может изменить место сохранения библиотеки по умолчанию в любой момент, но если она удалит расположение для сохранения по умолчанию, в качестве нового расположения для сохранения будет выбрана следующая папка в библиотеке.</span><span class="sxs-lookup"><span data-stu-id="694e4-153">The user may change the default save location of a library at any point, but if she removes the default save location, the next folder in the library will be selected as the new save location.</span></span> <span data-ttu-id="694e4-154">Пользователи могут дополнительно сохранить в любой папке, к которой у них есть разрешения, которые были добавлены в библиотеку.</span><span class="sxs-lookup"><span data-stu-id="694e4-154">Users can additionally save to any folder they have permissions to that has been included in a library.</span></span>

### <a name="non-file-system-shell-containers"></a><span data-ttu-id="694e4-155">Контейнеры оболочки, не относящиеся к файловой системе</span><span class="sxs-lookup"><span data-stu-id="694e4-155">Non-File System Shell Containers</span></span>

<span data-ttu-id="694e4-156">Библиотеки могут содержать системные контейнеры оболочки, такие как **компьютер** и **Панель управления**, но содержат элементы файловой системы.</span><span class="sxs-lookup"><span data-stu-id="694e4-156">Libraries can contain on-file system Shell containers, such as **Computer** and **Control Panel**, but contain file system items.</span></span> <span data-ttu-id="694e4-157">Папки и содержимое библиотеки можно перечислить и получить доступ к ним с помощью интерфейсов API для файлов и папок файловой системы в предыдущих операционных системах.</span><span class="sxs-lookup"><span data-stu-id="694e4-157">Library folders and contents can be enumerated and accessed using APIs for file system files and folders in previous operating systems.</span></span> <span data-ttu-id="694e4-158">Если приложение сильно зависит от специфических интерфейсов API для файловой системы, то API [ишелллибрари](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishelllibrary) можно использовать для получения путей файловой системы к папкам и файлам в библиотеках.</span><span class="sxs-lookup"><span data-stu-id="694e4-158">If your application is heavily dependent on file system specific APIs, then the [IShellLibrary](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishelllibrary) API can be used to obtain the file system paths of folders and files within libraries.</span></span> <span data-ttu-id="694e4-159">В большинстве случаев рекомендуется использовать модель программирования оболочки для поддержки нескольких версий Windows и гибкости элементов.</span><span class="sxs-lookup"><span data-stu-id="694e4-159">In most cases it is recommended that you use the Shell programming model to support multiple Windows versions and item flexibility.</span></span> <span data-ttu-id="694e4-160">Дополнительные сведения см. [в разделе Навигация по пространству имен оболочки](https://msdn.microsoft.com/library/dd378496(VS.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="694e4-160">For more information, see [Navigating the Shell Namespace](https://msdn.microsoft.com/library/dd378496(VS.85).aspx).</span></span>

### <a name="library-descriptions"></a><span data-ttu-id="694e4-161">Описания библиотек</span><span class="sxs-lookup"><span data-stu-id="694e4-161">Library Descriptions</span></span>

<span data-ttu-id="694e4-162">Описания библиотек сохраняются на диске в виде XML-файла в папке библиотеки Microsoft Windows% AppData% \\ \\ (и, возможно, в виде **\_ библиотек FOLDERID**).</span><span class="sxs-lookup"><span data-stu-id="694e4-162">Library descriptions are saved on disk as an XML file in the %appdata%Microsoft\\Windows\\Libraries folder (and potentially as **FOLDERID\_Libraries**.</span></span> <span data-ttu-id="694e4-163">Дополнительные сведения о **\_ библиотеках FOLDERID** см. в разделе [кновнфолдерид](/windows/desktop/shell/knownfolderid).</span><span class="sxs-lookup"><span data-stu-id="694e4-163">For more information about **FOLDERID\_Libraries**, see [KNOWNFOLDERID](/windows/desktop/shell/knownfolderid).</span></span>

<span data-ttu-id="694e4-164">Файлы описания библиотеки — это XML-файлы с расширением Library-MS.</span><span class="sxs-lookup"><span data-stu-id="694e4-164">Library description files are XML files with the file name extension .library-ms.</span></span> <span data-ttu-id="694e4-165">Эти файлы никогда не должны быть доступны или изменены приложениями.</span><span class="sxs-lookup"><span data-stu-id="694e4-165">They files should never be accessed or edited by applications.</span></span> <span data-ttu-id="694e4-166">Текст пути к папке, сохраненный в файлах описания библиотеки, не всегда является текущим.</span><span class="sxs-lookup"><span data-stu-id="694e4-166">The folder path text persisted to the library description files is not always current.</span></span> <span data-ttu-id="694e4-167">Папки библиотеки сохраняются в файле описания библиотеки в формате ссылок на сериализованную двоичную [оболочку](/windows/desktop/shell/links) .</span><span class="sxs-lookup"><span data-stu-id="694e4-167">Library folders are persisted in the library description file in the serialized binary [Shell Links](/windows/desktop/shell/links) format.</span></span> <span data-ttu-id="694e4-168">Дополнительные сведения о библиотеках и схеме описания библиотеки см. в разделе [Библиотека описание схемы](../shell/library-schema-entry.md).</span><span class="sxs-lookup"><span data-stu-id="694e4-168">For more information about libraries and the Library Description schema, see [Library Description Schema](../shell/library-schema-entry.md).</span></span> <span data-ttu-id="694e4-169">Дополнительные сведения о соединителях федеративного поиска и схеме описания соединителя поиска см. в [схеме описания соединителя](search-sconn-desc-schema-entry.md).</span><span class="sxs-lookup"><span data-stu-id="694e4-169">For more information about federated search connectors and the Search Connector Description schema, [Search Connector Description Schema](search-sconn-desc-schema-entry.md).</span></span>

> <span data-ttu-id="694e4-170">[ПРИМЕЧАНИЕ]</span><span class="sxs-lookup"><span data-stu-id="694e4-170">[NOTE]</span></span>  
> <span data-ttu-id="694e4-171">Приложения всегда используют модель программирования оболочки или API [ишелллибрари](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishelllibrary) для работы с содержимым библиотеки и никогда не пытаются вручную получить доступ к файлу описания библиотеки или изменить его.</span><span class="sxs-lookup"><span data-stu-id="694e4-171">Applications should always use the Shell programming model or the [IShellLibrary](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ishelllibrary) API to consume and manipulate library contents, and never attempt to manually access or edit the library description file.</span></span>

## <a name="related-topics"></a><span data-ttu-id="694e4-172">См. также</span><span class="sxs-lookup"><span data-stu-id="694e4-172">Related topics</span></span>

[<span data-ttu-id="694e4-173">Поиск Windows 7</span><span class="sxs-lookup"><span data-stu-id="694e4-173">Windows 7 Search</span></span>](./-search-3x-wds-overview.md)

[<span data-ttu-id="694e4-174">Новый для поиска Windows 7</span><span class="sxs-lookup"><span data-stu-id="694e4-174">New for Windows 7 Search</span></span>](new-for-windows-7-search.md)

[<span data-ttu-id="694e4-175">Определение приоритетов индексирования и событий набора строк в Windows 7</span><span class="sxs-lookup"><span data-stu-id="694e4-175">Indexing Prioritization and Rowset Events in Windows 7</span></span>](indexing-prioritization-and-rowset-events.md)