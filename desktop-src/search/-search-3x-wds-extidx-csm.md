---
description: Диспетчер области сканирования (CSM) — это набор интерфейсов, которые предоставляют методы для информирования подсистемы Windows Search о контейнерах для обхода и элементов в этих контейнерах для включения или исключения в каталог.
ms.assetid: 7d65d00a-7294-4718-b593-89394b2e416f
title: Использование диспетчера области сканирования
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ef79c9e5a2a4b1dda97bf8a8be7bbaa35d5ecd2c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104144194"
---
# <a name="using-the-crawl-scope-manager"></a><span data-ttu-id="36c3b-103">Использование диспетчера области сканирования</span><span class="sxs-lookup"><span data-stu-id="36c3b-103">Using the Crawl Scope Manager</span></span>

<span data-ttu-id="36c3b-104">Диспетчер области сканирования (CSM) — это набор интерфейсов, которые предоставляют методы для информирования подсистемы Windows Search о контейнерах для обхода и элементов в этих контейнерах для включения или исключения в каталог.</span><span class="sxs-lookup"><span data-stu-id="36c3b-104">The Crawl Scope Manager (CSM) is a set of interfaces that provides methods to inform the Windows Search engine about containers to crawl and items under those containers to include or exclude in the catalog.</span></span> <span data-ttu-id="36c3b-105">Разработчики могут использовать CSM для определения области обхода содержимого программным способом для нового хранилища данных или обработчика протокола.</span><span class="sxs-lookup"><span data-stu-id="36c3b-105">Developers can use the CSM to define a crawl scope programmatically for a new data store or protocol handler.</span></span> <span data-ttu-id="36c3b-106">Администраторы могут использовать CSM для просмотра индексов всех пользователей, корней поиска и правил области.</span><span class="sxs-lookup"><span data-stu-id="36c3b-106">Administrators can use the CSM to view all users' indexes, search roots, and scope rules.</span></span>

<span data-ttu-id="36c3b-107">Этот раздел организован следующим образом:</span><span class="sxs-lookup"><span data-stu-id="36c3b-107">This section is organized as follows:</span></span>

-   [<span data-ttu-id="36c3b-108">Что такое диспетчер области обхода содержимого?</span><span class="sxs-lookup"><span data-stu-id="36c3b-108">What is the Crawl Scope Manager?</span></span>](#what-is-the-crawl-scope-manager)
-   [<span data-ttu-id="36c3b-109">Поиск по корням и правилам области</span><span class="sxs-lookup"><span data-stu-id="36c3b-109">Search Roots and Scope Rules</span></span>](#search-roots-and-scope-rules)
    -   [<span data-ttu-id="36c3b-110">Поиск по корням</span><span class="sxs-lookup"><span data-stu-id="36c3b-110">Search Roots</span></span>](#search-roots-and-scope-rules)
    -   [<span data-ttu-id="36c3b-111">Правила области</span><span class="sxs-lookup"><span data-stu-id="36c3b-111">Scope Rules</span></span>](#scope-rules)
-   [<span data-ttu-id="36c3b-112">Групповые политики, поддерживаемые диспетчером области сканирования</span><span class="sxs-lookup"><span data-stu-id="36c3b-112">Group Policies Supported by the Crawl Scope Manager</span></span>](#group-policies-supported-by-the-crawl-scope-manager)
-   [<span data-ttu-id="36c3b-113">См. также</span><span class="sxs-lookup"><span data-stu-id="36c3b-113">Related topics</span></span>](#related-topics)

## <a name="what-is-the-crawl-scope-manager"></a><span data-ttu-id="36c3b-114">Что такое диспетчер области обхода содержимого?</span><span class="sxs-lookup"><span data-stu-id="36c3b-114">What is the Crawl Scope Manager?</span></span>

<span data-ttu-id="36c3b-115">Чтобы разобраться в диспетчере области сканирования, необходимо понимать следующие термины.</span><span class="sxs-lookup"><span data-stu-id="36c3b-115">To understand the Crawl Scope Manager, you must understand the following terms:</span></span>

-   <span data-ttu-id="36c3b-116">*Область сканирования* — это набор URL-адресов, указывающих на хранилища данных или контейнеры (хранилища данных электронной почты, базы данных, сетевые файловые ресурсы и т. д.), которые индексатор выполняет сканирование для элементов индекса.</span><span class="sxs-lookup"><span data-stu-id="36c3b-116">A *crawl scope* is a set of URLs pointing to data stores or containers (email data stores, databases, network file shares, and so on) that the indexer crawls to index items.</span></span> <span data-ttu-id="36c3b-117">Для иерархического хранилища данных область обхода содержимого может включать родительский URL-адрес, но не допускать дочерний URL-адрес и наоборот.</span><span class="sxs-lookup"><span data-stu-id="36c3b-117">For a hierarchical data store, the crawl scope can include a parent URL but exclude a child URL and vice versa.</span></span> <span data-ttu-id="36c3b-118">Элементы в области сканирования индексируются; элементы за пределами области сканирования не учитываются.</span><span class="sxs-lookup"><span data-stu-id="36c3b-118">Items within the crawl scope are indexed; items outside the crawl scope are ignored.</span></span>
-   <span data-ttu-id="36c3b-119">*Корень поиска* — это URL-адрес верхнего уровня, который определяет контейнер или хранилище данных, связанное с определенным обработчиком протокола.</span><span class="sxs-lookup"><span data-stu-id="36c3b-119">A *search root* is the top-level URL identifying a container or data store that is associated with a particular protocol handler.</span></span> <span data-ttu-id="36c3b-120">Корни поиска могут обозначать расположения, характерные для пользователя, которые находятся на удаленном компьютере или соответствуют шаблону с подстановочными знаками.</span><span class="sxs-lookup"><span data-stu-id="36c3b-120">Search roots can identify locations that are specific to a user, that are on a remote computer, or that match a wildcard pattern.</span></span> <span data-ttu-id="36c3b-121">При добавлении нового хранилища данных или обработчика протокола необходимо также добавить корень поиска в область обхода содержимого.</span><span class="sxs-lookup"><span data-stu-id="36c3b-121">When you add a new data store or protocol handler, you should also add a search root to the crawl scope.</span></span>
-   <span data-ttu-id="36c3b-122">*Правило области* — это правило, которое включает или исключает URL-адреса в корне поиска для обхода и индексирования.</span><span class="sxs-lookup"><span data-stu-id="36c3b-122">A *scope rule* is a rule that includes or excludes URLs within a search root from being crawled and indexed.</span></span> <span data-ttu-id="36c3b-123">Например, предположим, что необходимо индексировать все объекты в папке ProjectFiles, кроме прототипов вложенных папок.</span><span class="sxs-lookup"><span data-stu-id="36c3b-123">For example, suppose you want everything within the ProjectFiles folder indexed except for the subfolder Prototypes.</span></span> <span data-ttu-id="36c3b-124">Вам потребуется правило включения для file:///C: \\ ворктеама \\ ProjectFiles \\ и правило исключения для file:///C: \\ ворктеама \\ ProjectFiles \\ prototype \\ .</span><span class="sxs-lookup"><span data-stu-id="36c3b-124">You would need an inclusion rule for file:///C:\\WorkteamA\\ProjectFiles\\ and an exclusion rule for file:///C:\\WorkteamA\\ProjectFiles\\Prototypes\\.</span></span>

<span data-ttu-id="36c3b-125">**Диспетчер области обхода содержимого (CSM)** — это набор API-интерфейсов, позволяющих добавлять, удалять и перечислять корни поиска и правила области для индексатора поиска Windows.</span><span class="sxs-lookup"><span data-stu-id="36c3b-125">The **Crawl Scope Manager (CSM)** is a set of APIs that lets you add, remove, and enumerate search roots and scope rules for the Windows Search indexer.</span></span> <span data-ttu-id="36c3b-126">Если требуется, чтобы индексатор начал сканирование нового контейнера, можно использовать CSM, чтобы задать корневые элементы поиска и правила определения области для путей в корне поиска.</span><span class="sxs-lookup"><span data-stu-id="36c3b-126">When you want the indexer to begin crawling a new container, you can use the CSM to set the search root(s) and scope rules for paths within the search root(s).</span></span> <span data-ttu-id="36c3b-127">Например, при установке нового обработчика протокола можно создать корень поиска и добавить одно или несколько правил включения. Затем индексатор может начать сканирование для первоначального индексирования.</span><span class="sxs-lookup"><span data-stu-id="36c3b-127">For example, if you install a new protocol handler, you can create a search root and add one or more inclusion rules; then the indexer can start a crawl for the initial indexing.</span></span> <span data-ttu-id="36c3b-128">CSM предлагает следующие интерфейсы, которые помогут вам сделать это программным способом.</span><span class="sxs-lookup"><span data-stu-id="36c3b-128">The CSM offers the following interfaces to help you do this programmatically.</span></span>

-   [<span data-ttu-id="36c3b-129">**иенумсеарчрутс**</span><span class="sxs-lookup"><span data-stu-id="36c3b-129">**IEnumSearchRoots**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-ienumsearchroots)
-   [<span data-ttu-id="36c3b-130">иенумсеарчскоперулес</span><span class="sxs-lookup"><span data-stu-id="36c3b-130">IEnumSearchScopeRules</span></span>](/windows/win32/api/searchapi/nn-searchapi-ienumsearchscoperules)
-   [<span data-ttu-id="36c3b-131">**исеарчкравлскопеманажер**</span><span class="sxs-lookup"><span data-stu-id="36c3b-131">**ISearchCrawlScopeManager**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager)
-   [<span data-ttu-id="36c3b-132">ISearchCrawlScopeManager2</span><span class="sxs-lookup"><span data-stu-id="36c3b-132">ISearchCrawlScopeManager2</span></span>](/windows/win32/api/searchapi/nn-searchapi-isearchcrawlscopemanager2)
-   [<span data-ttu-id="36c3b-133">**исеарчрут**</span><span class="sxs-lookup"><span data-stu-id="36c3b-133">**ISearchRoot**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-isearchroot)
-   [<span data-ttu-id="36c3b-134">**исеарчскоперуле**</span><span class="sxs-lookup"><span data-stu-id="36c3b-134">**ISearchScopeRule**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-isearchscoperule)
-   [<span data-ttu-id="36c3b-135">исеарчитем</span><span class="sxs-lookup"><span data-stu-id="36c3b-135">ISearchItem</span></span>](./-search-isearchitem.md)

<span data-ttu-id="36c3b-136">Хотя вы можете использовать интерфейсы API CSM для программного определения области обхода содержимого, CSM был разработан для поддержки конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="36c3b-136">While you can use the CSM APIs to define a crawl scope programmatically, the CSM was designed to support end users as well.</span></span> <span data-ttu-id="36c3b-137">Например, предположим, что вы разработали обработчик протокола для нового хранилища данных и хотите позволить пользователям или администраторам управлять тем, какие пути должны индексироваться.</span><span class="sxs-lookup"><span data-stu-id="36c3b-137">For example, suppose you have developed a protocol handler for a new data store, and you want to let users or administrators manage which paths should be indexed.</span></span> <span data-ttu-id="36c3b-138">Диспетчер области обхода содержимого можно использовать для задания одного или нескольких корней поиска (например, file:///C: \\ MyContainer \\ ), а пользовательский интерфейс Windows Search для настройки параметров индексирования будет отображать каждый корень поиска с флажком.</span><span class="sxs-lookup"><span data-stu-id="36c3b-138">You can use the Crawl Scope Manager to set one or more search roots (for example, file:///C:\\MyContainer\\), and the Windows Search user interface for setting indexing options will display each search root with a check box.</span></span> <span data-ttu-id="36c3b-139">Пользователи могут включить или исключить этот путь или дочерние элементы этого пути.</span><span class="sxs-lookup"><span data-stu-id="36c3b-139">Users can then include or exclude that path or children of that path.</span></span>

## <a name="search-roots-and-scope-rules"></a><span data-ttu-id="36c3b-140">Поиск по корням и правилам области</span><span class="sxs-lookup"><span data-stu-id="36c3b-140">Search Roots and Scope Rules</span></span>

<span data-ttu-id="36c3b-141">Поиск в корнях и правилах области вместе определяют рабочий набор URL-адресов, который состоит из области сканирования индексатора.</span><span class="sxs-lookup"><span data-stu-id="36c3b-141">Search roots and scope rules together define a working set of URLs that comprise the indexer's crawl scope.</span></span>

### <a name="search-roots"></a><span data-ttu-id="36c3b-142">Поиск по корням</span><span class="sxs-lookup"><span data-stu-id="36c3b-142">Search Roots</span></span>

<span data-ttu-id="36c3b-143">При настройке корня поиска не указываются, какие части этого хранилища должны индексироваться. Он просто сигнализирует, что хранилище содержимого существует и связано с зарегистрированным обработчиком протокола.</span><span class="sxs-lookup"><span data-stu-id="36c3b-143">Setting a search root does not specify which parts of this store should be indexed; it merely signals that a content store exists and is associated with a registered protocol handler.</span></span> <span data-ttu-id="36c3b-144">Синтаксис корневого поиска включает протокол, идентификатор безопасности сайта или пользователя и путь к расположениям для обхода.</span><span class="sxs-lookup"><span data-stu-id="36c3b-144">The syntax of a search root includes a protocol, a site or user security identifier, and a path to the location(s) to be crawled.</span></span>

<span data-ttu-id="36c3b-145">Вы должны создать новые корни поиска, когда:</span><span class="sxs-lookup"><span data-stu-id="36c3b-145">You should create new search roots when you:</span></span>

-   <span data-ttu-id="36c3b-146">Установка обработчика протокола или</span><span class="sxs-lookup"><span data-stu-id="36c3b-146">Install a protocol handler OR</span></span>
-   <span data-ttu-id="36c3b-147">Хотите индексировать новое хранилище данных</span><span class="sxs-lookup"><span data-stu-id="36c3b-147">Want to index a new data store</span></span>

<span data-ttu-id="36c3b-148">AND</span><span class="sxs-lookup"><span data-stu-id="36c3b-148">AND</span></span>

-   <span data-ttu-id="36c3b-149">Это хранилище данных еще не находится в области обхода индексатора.</span><span class="sxs-lookup"><span data-stu-id="36c3b-149">that data store is not already in the indexer's crawl scope.</span></span>

<span data-ttu-id="36c3b-150">Инструкции по добавлению, удалению и перечислению корней поиска см. в разделе [Управление корнями поиска](-search-3x-wds-extidx-csm-searchroots.md) .</span><span class="sxs-lookup"><span data-stu-id="36c3b-150">Refer to [Managing Search Roots](-search-3x-wds-extidx-csm-searchroots.md) for instructions on adding, removing, and enumerating search roots.</span></span>

### <a name="scope-rules"></a><span data-ttu-id="36c3b-151">Правила области</span><span class="sxs-lookup"><span data-stu-id="36c3b-151">Scope Rules</span></span>

<span data-ttu-id="36c3b-152">Правила области включают или исключают URL-адреса в корне поиска для обхода и индексирования.</span><span class="sxs-lookup"><span data-stu-id="36c3b-152">Scope rules include or exclude URLs within a search root from being crawled and indexed.</span></span> <span data-ttu-id="36c3b-153">Правила области могут устанавливаться конечными пользователями, групповой политикой или сторонними разработчиками.</span><span class="sxs-lookup"><span data-stu-id="36c3b-153">Scope rules can be set by end users, by group policy, or by third-party developers.</span></span> <span data-ttu-id="36c3b-154">Правила области следует определять программным способом при определении нового корня поиска.</span><span class="sxs-lookup"><span data-stu-id="36c3b-154">You should define scope rules programmatically when you define a new search root.</span></span> <span data-ttu-id="36c3b-155">Корни поиска и правила области образуют область обхода по умолчанию для хранилища данных и обработчика протокола.</span><span class="sxs-lookup"><span data-stu-id="36c3b-155">Your search roots and scope rules comprise the default crawl scope for your data store and protocol handler.</span></span>

> [!Note]  
> <span data-ttu-id="36c3b-156">Пользователи с доступом к панели управления могут изменять область обхода по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="36c3b-156">Users with access to Control Panel can modify the default crawl scope.</span></span> <span data-ttu-id="36c3b-157">Таким образом, любое приложение, предлагающее Управление областью, должно всегда получать правила непосредственно из CSM, используя методы перечисления вместо того, чтобы полагаться на собственную сохраненную копию правил пользователя.</span><span class="sxs-lookup"><span data-stu-id="36c3b-157">Therefore, any application that offers scope management should always get the rules directly from the CSM by using the enumeration methods instead of relying on its own saved copy of the user's rules.</span></span>

 

<span data-ttu-id="36c3b-158">Инструкции по добавлению, удалению, возврату и перечислению правил области см. в разделе [Управление правилами области](-search-3x-wds-extidx-csm-scoperules.md) .</span><span class="sxs-lookup"><span data-stu-id="36c3b-158">Refer to [Managing Scope Rules](-search-3x-wds-extidx-csm-scoperules.md) for instructions on adding, removing, reverting, and enumerating scope rules.</span></span>

## <a name="group-policies-supported-by-the-crawl-scope-manager"></a><span data-ttu-id="36c3b-159">Групповые политики, поддерживаемые диспетчером области сканирования</span><span class="sxs-lookup"><span data-stu-id="36c3b-159">Group Policies Supported by the Crawl Scope Manager</span></span>

<span data-ttu-id="36c3b-160">Системные администраторы могут определять области обхода содержимого в своих организациях с помощью групповых политик.</span><span class="sxs-lookup"><span data-stu-id="36c3b-160">System administrators can define crawl scopes across their organizations by using Group Policies.</span></span> <span data-ttu-id="36c3b-161">Эти правила групповой политики также могут действовать в качестве правил по умолчанию, которые пользователи могут переопределить.</span><span class="sxs-lookup"><span data-stu-id="36c3b-161">These group policy rules can also act as default rules, which users can override.</span></span> <span data-ttu-id="36c3b-162">Например, один набор каталогов может быть индексирован для одной группы пользователей и другой — для другой группы пользователей, что позволяет пользователям отменить выбор значений по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="36c3b-162">For example, you can have one set of directories indexed for one group of users and a different set for another group of users, allowing the users to deselect these defaults.</span></span> <span data-ttu-id="36c3b-163">Правила групповой политики также могут действовать как правила принудительного исключения, которые пользователи не могут переопределять, предотвращая, например, определенные пользователи для индексирования определенных сетевых ресурсов.</span><span class="sxs-lookup"><span data-stu-id="36c3b-163">Group policy rules can also act as forced exclusion rules that users cannot override, preventing certain users from indexing certain network shares, for example.</span></span>

## <a name="related-topics"></a><span data-ttu-id="36c3b-164">См. также</span><span class="sxs-lookup"><span data-stu-id="36c3b-164">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="36c3b-165">Управление корнями поиска</span><span class="sxs-lookup"><span data-stu-id="36c3b-165">Managing Search Roots</span></span>](-search-3x-wds-extidx-csm-searchroots.md)
</dt> <dt>

[<span data-ttu-id="36c3b-166">Управление правилами области</span><span class="sxs-lookup"><span data-stu-id="36c3b-166">Managing Scope Rules</span></span>](-search-3x-wds-extidx-csm-scoperules.md)
</dt> <dt>

[<span data-ttu-id="36c3b-167">Процесс индексирования</span><span class="sxs-lookup"><span data-stu-id="36c3b-167">The Indexing Process</span></span>](-search-indexing-process-overview.md)
</dt> </dl>

 

 
