---
title: Диалоговые окна поиска и замены
description: Отображает немодальное диалоговое окно, позволяющее пользователю указать строку для поиска, а также параметры, используемые при поиске текста в документе.
ms.assetid: c8c035bf-795d-42a7-abc6-168dea43e6e9
keywords:
- Пользовательский интерфейс Windows, ввод данных пользователем
- Пользовательский интерфейс Windows, Библиотека общих диалоговых окон
- ввод пользователя, Библиотека общих диалоговых окон
- запись вводимых пользователем данных, Библиотека общих диалоговых окон
- Библиотека общих диалоговых окон
- Общие диалоговые окна
- диалоговое окно «Поиск»
- Замена - диалоговое окно
- Настройка диалогового окна «Поиск»
- диалоговое окно "Настройка замены"
- стандартные диалоговые окна
- диалоговые окна, Поиск
- диалоговые окна, замена
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5e3cf2c5217d586c0a5ada74fb7dd72aaca5f804
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104569960"
---
# <a name="find-and-replace-dialog-boxes"></a><span data-ttu-id="787a2-116">Диалоговые окна поиска и замены</span><span class="sxs-lookup"><span data-stu-id="787a2-116">Find and Replace Dialog Boxes</span></span>

<span data-ttu-id="787a2-117">Отображает немодальное диалоговое окно, позволяющее пользователю указать строку для поиска, а также параметры, используемые при поиске текста в документе.</span><span class="sxs-lookup"><span data-stu-id="787a2-117">Displays a modeless dialog box that allows the user to specify a string to search for, as well as options to use when searching for text in a document.</span></span> <span data-ttu-id="787a2-118">Диалоговое окно **Замена** позволяет пользователю указать строку для поиска и строку замены, а также параметры для управления операцией.</span><span class="sxs-lookup"><span data-stu-id="787a2-118">The **Replace** dialog box lets the user specify a string to search for and a replacement string, as well as options to control the operation.</span></span>

<span data-ttu-id="787a2-119">Вы создаете и отображаете диалоговое окно **поиска** , инициализируя структуру [**финдреплаце**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) и передавая структуру в функцию [**строки FindText**](/windows/desktop/api/Commdlg/nf-commdlg-findtexta) .</span><span class="sxs-lookup"><span data-stu-id="787a2-119">You create and display a **Find** dialog box by initializing a [**FINDREPLACE**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) structure and passing the structure to the [**FindText**](/windows/desktop/api/Commdlg/nf-commdlg-findtexta) function.</span></span> <span data-ttu-id="787a2-120">На следующем рисунке показано типичное диалоговое окно « **найти** ».</span><span class="sxs-lookup"><span data-stu-id="787a2-120">The following illustration shows a typical **Find** dialog box.</span></span>

![диалоговое окно «найти»](images/finddialogboxxp.png)

<span data-ttu-id="787a2-122">Вы создаете и отображаете диалоговое окно **замены** , инициализируя структуру [**финдреплаце**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) и передавая структуру в функцию [**реплацетекст**](/windows/desktop/api/Commdlg/nf-commdlg-replacetexta) .</span><span class="sxs-lookup"><span data-stu-id="787a2-122">You create and display a **Replace** dialog box by initializing a [**FINDREPLACE**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) structure and passing the structure to the [**ReplaceText**](/windows/desktop/api/Commdlg/nf-commdlg-replacetexta) function.</span></span> <span data-ttu-id="787a2-123">На следующем рисунке показано типичное диалоговое окно **замены** .</span><span class="sxs-lookup"><span data-stu-id="787a2-123">The following illustration shows a typical **Replace** dialog box.</span></span>

![диалоговое окно "замена"](images/replacedialogboxxp.png)

<span data-ttu-id="787a2-125">В отличие от других общих диалоговых окон, диалоговые окна **найти** и **заменить** являются немодальными.</span><span class="sxs-lookup"><span data-stu-id="787a2-125">Unlike other common dialog boxes, the **Find** and **Replace** dialog boxes are modeless.</span></span> <span data-ttu-id="787a2-126">Немодальное диалоговое окно позволяет пользователю переключаться между диалоговым окном и окном, которое его создало.</span><span class="sxs-lookup"><span data-stu-id="787a2-126">A modeless dialog box allows the user to switch between the dialog box and the window that created it.</span></span> <span data-ttu-id="787a2-127">Это полезно для того, чтобы позволить пользователю выполнять поиск строки, перейти в окно приложения для работы со строкой и вернуться в диалоговое окно для поиска другой строки без повторения команды, необходимой для открытия диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="787a2-127">This is useful for letting the user search for a string, switch to the application window to work on the string, and switch back to the dialog box to search for another string without repeating the command needed to open the dialog box.</span></span>

<span data-ttu-id="787a2-128">Если функция [**строки FindText**](/windows/desktop/api/Commdlg/nf-commdlg-findtexta) или [**реплацетекст**](/windows/desktop/api/Commdlg/nf-commdlg-replacetexta) успешно создает диалоговое окно, она возвращает маркер диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="787a2-128">If the [**FindText**](/windows/desktop/api/Commdlg/nf-commdlg-findtexta) or [**ReplaceText**](/windows/desktop/api/Commdlg/nf-commdlg-replacetexta) function successfully creates the dialog box, it returns a handle to the dialog box.</span></span> <span data-ttu-id="787a2-129">Этот обработчик можно использовать для перемещения и взаимодействия с диалоговым окном.</span><span class="sxs-lookup"><span data-stu-id="787a2-129">You can use this handle to move and communicate with the dialog box.</span></span> <span data-ttu-id="787a2-130">Если функция не может создать диалоговое окно, она возвращает **значение NULL**.</span><span class="sxs-lookup"><span data-stu-id="787a2-130">If the function cannot create the dialog box, it returns **NULL**.</span></span> <span data-ttu-id="787a2-131">Причину ошибки можно определить, вызвав функцию [**коммдлжекстендедеррор**](/windows/desktop/api/Commdlg/nf-commdlg-commdlgextendederror) для получения значения расширенной ошибки.</span><span class="sxs-lookup"><span data-stu-id="787a2-131">You can determine the cause of an error by calling the [**CommDlgExtendedError**](/windows/desktop/api/Commdlg/nf-commdlg-commdlgextendederror) function to retrieve the extended error value.</span></span>

<span data-ttu-id="787a2-132">В этом разделе рассматриваются следующие темы.</span><span class="sxs-lookup"><span data-stu-id="787a2-132">This section discusses the following topics.</span></span>

-   [<span data-ttu-id="787a2-133">Зарегистрированное сообщение ФИНДМСГСТРИНГ</span><span class="sxs-lookup"><span data-stu-id="787a2-133">The FINDMSGSTRING Registered Message</span></span>](#the-findmsgstring-registered-message)
-   [<span data-ttu-id="787a2-134">Настройка диалогового окна «найти или заменить»</span><span class="sxs-lookup"><span data-stu-id="787a2-134">Customizing the Find or Replace Dialog Box</span></span>](#customizing-the-find-or-replace-dialog-box)

## <a name="the-findmsgstring-registered-message"></a><span data-ttu-id="787a2-135">Зарегистрированное сообщение ФИНДМСГСТРИНГ</span><span class="sxs-lookup"><span data-stu-id="787a2-135">The FINDMSGSTRING Registered Message</span></span>

<span data-ttu-id="787a2-136">Перед созданием диалогового окна **найти** или **заменить** необходимо вызвать функцию [**регистервиндовмессаже**](/windows/desktop/api/winuser/nf-winuser-registerwindowmessagea) , чтобы получить идентификатор сообщения для зарегистрированного сообщения [**финдмсгстринг**](findmsgstring.md) .</span><span class="sxs-lookup"><span data-stu-id="787a2-136">Before creating a **Find** or **Replace** dialog box, you must call the [**RegisterWindowMessage**](/windows/desktop/api/winuser/nf-winuser-registerwindowmessagea) function to get a message identifier for the [**FINDMSGSTRING**](findmsgstring.md) registered message.</span></span> <span data-ttu-id="787a2-137">Затем можно использовать идентификатор для обнаружения и обработки сообщений, отправленных из диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="787a2-137">You can then use the identifier to detect and process messages sent from the dialog box.</span></span> <span data-ttu-id="787a2-138">Когда пользователь нажимает кнопку **Найти далее**, **заменять** или **заменять все** в диалоговом окне, процедура диалогового окна отправляет сообщение **финдмсгстринг** в процедуру Window окна Owner.</span><span class="sxs-lookup"><span data-stu-id="787a2-138">When the user clicks the **Find Next**, **Replace**, or **Replace All** button in a dialog box, the dialog box procedure sends a **FINDMSGSTRING** message to the window procedure of the owner window.</span></span> <span data-ttu-id="787a2-139">При создании диалогового окна элемент **хвндовнер** структуры [**финдреплаце**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) определяет окно владельца.</span><span class="sxs-lookup"><span data-stu-id="787a2-139">When you create the dialog box, the **hwndOwner** member of the [**FINDREPLACE**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) structure identifies the owner window.</span></span>

<span data-ttu-id="787a2-140">Параметр *lParam* сообщения [**финдмсгстринг**](findmsgstring.md) является указателем на структуру [**финдреплаце**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) , которая была указана при создании диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="787a2-140">The *lParam* parameter of a [**FINDMSGSTRING**](findmsgstring.md) message is a pointer to the [**FINDREPLACE**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) structure that you specified when you created the dialog box.</span></span> <span data-ttu-id="787a2-141">Перед отправкой сообщения диалоговое окно устанавливает члены этой структуры с последним вводом пользователя, включая строку для поиска, строку замены (если она есть) и параметры для операции поиска и замены.</span><span class="sxs-lookup"><span data-stu-id="787a2-141">Before sending the message, the dialog box sets the members of this structure with the latest user input, including the string to search for, the replacement string (if any), and options for the find-and-replace operation.</span></span>

<span data-ttu-id="787a2-142">В сообщении [**финдмсгстринг**](findmsgstring.md) элемент **flags** структуры [**финдреплаце**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) включает один из следующих флагов для указания события, вызвавшего сообщение.</span><span class="sxs-lookup"><span data-stu-id="787a2-142">In a [**FINDMSGSTRING**](findmsgstring.md) message, the **Flags** member of the [**FINDREPLACE**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) structure includes one of the following flags to indicate the event that caused the message.</span></span>



| <span data-ttu-id="787a2-143">Flag</span><span class="sxs-lookup"><span data-stu-id="787a2-143">Flag</span></span>               | <span data-ttu-id="787a2-144">Значение</span><span class="sxs-lookup"><span data-stu-id="787a2-144">Meaning</span></span>                                                                                                                                                                                                     |
|--------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="787a2-145">**FR \_ диалогтерм**</span><span class="sxs-lookup"><span data-stu-id="787a2-145">**FR\_DIALOGTERM**</span></span> | <span data-ttu-id="787a2-146">Диалоговое окно закрывается.</span><span class="sxs-lookup"><span data-stu-id="787a2-146">The dialog box is closing.</span></span> <span data-ttu-id="787a2-147">После того как окно-владелец обработает это сообщение, маркер диалогового окна становится недействительным.</span><span class="sxs-lookup"><span data-stu-id="787a2-147">After the owner window processes this message, a handle to the dialog box is no longer valid.</span></span>                                                                                    |
| <span data-ttu-id="787a2-148">**FR \_ FINDNEXT**</span><span class="sxs-lookup"><span data-stu-id="787a2-148">**FR\_FINDNEXT**</span></span>   | <span data-ttu-id="787a2-149">Пользователь нащелкнул кнопку " **Найти далее** " в диалоговом окне " **найти** или **заменить** ".</span><span class="sxs-lookup"><span data-stu-id="787a2-149">The user clicked the **Find Next** button in a **Find** or **Replace** dialog box.</span></span> <span data-ttu-id="787a2-150">Член **лпстрфиндвхат** указывает строку для поиска.</span><span class="sxs-lookup"><span data-stu-id="787a2-150">The **lpstrFindWhat** member specifies the string to search for.</span></span>                                                         |
| <span data-ttu-id="787a2-151">**FR \_ заменить**</span><span class="sxs-lookup"><span data-stu-id="787a2-151">**FR\_REPLACE**</span></span>    | <span data-ttu-id="787a2-152">Пользователь нащелкнул кнопку **заменить** в диалоговом окне **заменить** .</span><span class="sxs-lookup"><span data-stu-id="787a2-152">The user clicked the **Replace** button in a **Replace** dialog box.</span></span> <span data-ttu-id="787a2-153">Член **лпстрфиндвхат** указывает строку для замены, а член **лпстрреплацевис** указывает замещающую строку.</span><span class="sxs-lookup"><span data-stu-id="787a2-153">The **lpstrFindWhat** member specifies the string to replace and the **lpstrReplaceWith** member specifies the replacement string.</span></span>     |
| <span data-ttu-id="787a2-154">**FR \_ REPLACEALL**</span><span class="sxs-lookup"><span data-stu-id="787a2-154">**FR\_REPLACEALL**</span></span> | <span data-ttu-id="787a2-155">Пользователь щелкнул кнопку **заменить все** в диалоговом окне **заменить** .</span><span class="sxs-lookup"><span data-stu-id="787a2-155">The user clicked the **Replace All** button in a **Replace** dialog box.</span></span> <span data-ttu-id="787a2-156">Член **лпстрфиндвхат** указывает строку для замены, а член **лпстрреплацевис** указывает замещающую строку.</span><span class="sxs-lookup"><span data-stu-id="787a2-156">The **lpstrFindWhat** member specifies the string to replace and the **lpstrReplaceWith** member specifies the replacement string.</span></span> |



 

<span data-ttu-id="787a2-157">Для параметра **найти следующее** или **заменить все** сообщение элемент **flags** может включать любое сочетание следующих флагов для указания параметров поиска.</span><span class="sxs-lookup"><span data-stu-id="787a2-157">For a **Find Next** or **Replace All** message, the **Flags** member can include any combination of the following flags to indicate the search options.</span></span>



| <span data-ttu-id="787a2-158">Flag</span><span class="sxs-lookup"><span data-stu-id="787a2-158">Flag</span></span>              | <span data-ttu-id="787a2-159">Значение</span><span class="sxs-lookup"><span data-stu-id="787a2-159">Meaning</span></span>                                                                                                                                                                                                                                                                                          |
|-------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="787a2-160">**FR \_ вниз**</span><span class="sxs-lookup"><span data-stu-id="787a2-160">**FR\_DOWN**</span></span>      | <span data-ttu-id="787a2-161">Если задано, кнопка " **вниз** " в переключателях направления выбирается, указывая, что пользователь хочет выполнить поиск от текущего расположения до конца документа.</span><span class="sxs-lookup"><span data-stu-id="787a2-161">If set, the **Down** button of the direction radio buttons is selected, indicating that user wants to search from the current location to the end of the document.</span></span> <span data-ttu-id="787a2-162">Если значение **fr \_ Down** не задано, то выбирается кнопка **вверх** , чтобы пользователь хотел выполнить поиск в начале документа.</span><span class="sxs-lookup"><span data-stu-id="787a2-162">If **FR\_DOWN** is not set, the **Up** button is selected so the user wants to search to the beginning of the document.</span></span>       |
| <span data-ttu-id="787a2-163">**FR \_ матчкасе**</span><span class="sxs-lookup"><span data-stu-id="787a2-163">**FR\_MATCHCASE**</span></span> | <span data-ttu-id="787a2-164">Если задано значение, флажок **учитывать регистр** устанавливается, указывая, что пользователь хочет, чтобы поиск был чувствительным к регистру.</span><span class="sxs-lookup"><span data-stu-id="787a2-164">If set, the **Match Case** check box is selected, indicating that the user wants the search to be case sensitive.</span></span> <span data-ttu-id="787a2-165">Если значение **fr \_ матчкасе** не задано, флажок не установлен, чтобы поиск можно было учитывать без учета регистра.</span><span class="sxs-lookup"><span data-stu-id="787a2-165">If **FR\_MATCHCASE** is not set, the check box is unselected so that the search can be case insensitive.</span></span>                                                                       |
| <span data-ttu-id="787a2-166">**FR \_ вхолеворд**</span><span class="sxs-lookup"><span data-stu-id="787a2-166">**FR\_WHOLEWORD**</span></span> | <span data-ttu-id="787a2-167">Если задано значение, то флажок **только слово целиком** будет установлен, указывая, что пользователь хочет искать только целые слова, соответствующие строке поиска.</span><span class="sxs-lookup"><span data-stu-id="787a2-167">If set, the **Match Whole Word Only** check box is selected, indicating that the user wants to search only for whole words that match the search string.</span></span> <span data-ttu-id="787a2-168">Если значение **fr \_ вхолеворд** не задано, флажок не выбран, поэтому следует искать фрагменты слов, соответствующие строке поиска.</span><span class="sxs-lookup"><span data-stu-id="787a2-168">If **FR\_WHOLEWORD** is not set, the check box is unselected so you should also search for word fragments that match the search string.</span></span> |



 

## <a name="customizing-the-find-or-replace-dialog-box"></a><span data-ttu-id="787a2-169">Настройка диалогового окна «найти или заменить»</span><span class="sxs-lookup"><span data-stu-id="787a2-169">Customizing the Find or Replace Dialog Box</span></span>

<span data-ttu-id="787a2-170">Для настройки диалогового окна **найти** или **заменить** можно использовать любой из следующих методов.</span><span class="sxs-lookup"><span data-stu-id="787a2-170">To customize a **Find** or **Replace** dialog box, you can use any of the following methods:</span></span>

-   <span data-ttu-id="787a2-171">Укажите значения в структуре [**финдреплаце**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) при создании диалогового окна</span><span class="sxs-lookup"><span data-stu-id="787a2-171">Specify values in the [**FINDREPLACE**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) structure when you create the dialog box</span></span>
-   <span data-ttu-id="787a2-172">Предоставление пользовательского шаблона</span><span class="sxs-lookup"><span data-stu-id="787a2-172">Provide a custom template</span></span>
-   <span data-ttu-id="787a2-173">Предоставление процедуры-обработчика</span><span class="sxs-lookup"><span data-stu-id="787a2-173">Provide a hook procedure</span></span>

<span data-ttu-id="787a2-174">При создании диалогового окна **найти** или **заменить** можно установить флаги в элементе **flags** структуры [**финдреплаце**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) , чтобы скрыть или отключить любой элемент управления параметров поиска.</span><span class="sxs-lookup"><span data-stu-id="787a2-174">When you create a **Find** or **Replace** dialog box, you can set flags in the **Flags** member of the [**FINDREPLACE**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) structure to hide or disable any of the search option controls.</span></span> <span data-ttu-id="787a2-175">Например, можно установить \_ флаг fr номатчкасе, чтобы снять флажок **учитывать регистр** , или установить \_ флаг fr хидематчкасе, чтобы скрыть его.</span><span class="sxs-lookup"><span data-stu-id="787a2-175">For example, you can set the FR\_NOMATCHCASE flag to disable the **Match Case** check box or set the FR\_HIDEMATCHCASE flag to hide it.</span></span>

<span data-ttu-id="787a2-176">Можно указать пользовательский шаблон для диалогового окна **найти** или **заменить** , например, если требуется включить дополнительные элементы управления, которые являются уникальными для приложения.</span><span class="sxs-lookup"><span data-stu-id="787a2-176">You can provide a custom template for a **Find** or **Replace** dialog box, for example, if you want to include additional controls that are unique to your application.</span></span> <span data-ttu-id="787a2-177">Функции [**строки FindText**](/windows/desktop/api/Commdlg/nf-commdlg-findtexta) и [**реплацетекст**](/windows/desktop/api/Commdlg/nf-commdlg-replacetexta) используют пользовательский шаблон вместо шаблона по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="787a2-177">The [**FindText**](/windows/desktop/api/Commdlg/nf-commdlg-findtexta) and [**ReplaceText**](/windows/desktop/api/Commdlg/nf-commdlg-replacetexta) functions use your custom template in place of the default template.</span></span>

<span data-ttu-id="787a2-178">**Предоставление пользовательского шаблона для диалогового окна «Поиск» или «замена»**</span><span class="sxs-lookup"><span data-stu-id="787a2-178">**To provide a custom template for a Find or Replace dialog box**</span></span>

1.  <span data-ttu-id="787a2-179">Создайте пользовательский шаблон, изменив шаблон по умолчанию, указанный в файле строки FindText. DLG.</span><span class="sxs-lookup"><span data-stu-id="787a2-179">Create the custom template by modifying the default template specified in the Findtext.dlg file.</span></span> <span data-ttu-id="787a2-180">Идентификаторы элементов управления, используемые в шаблоне диалогового окна **поиска** или **замены** по умолчанию, определяются в файле длгс. h.</span><span class="sxs-lookup"><span data-stu-id="787a2-180">The control identifiers used in the default **Find** or **Replace** dialog template are defined in the Dlgs.h file.</span></span>
2.  <span data-ttu-id="787a2-181">Используйте структуру [**финдреплаце**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) , чтобы включить шаблон следующим образом:</span><span class="sxs-lookup"><span data-stu-id="787a2-181">Use the [**FINDREPLACE**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) structure to enable the template as follows:</span></span>
    -   -   <span data-ttu-id="787a2-182">Если пользовательский шаблон является ресурсом в приложении или библиотеке динамической компоновки, установите \_ флаг fr енаблетемплате в элементе **flags** .</span><span class="sxs-lookup"><span data-stu-id="787a2-182">If your custom template is a resource in an application or dynamic-link library, set the FR\_ENABLETEMPLATE flag in the **Flags** member.</span></span> <span data-ttu-id="787a2-183">Используйте элементы **HINSTANCE** и **лптемплатенаме** структуры для задания имени модуля и ресурса.</span><span class="sxs-lookup"><span data-stu-id="787a2-183">Use the **hInstance** and **lpTemplateName** members of the structure to identify the module and resource name.</span></span>

            <span data-ttu-id="787a2-184">-Или-</span><span class="sxs-lookup"><span data-stu-id="787a2-184">-Or-</span></span>

        -   <span data-ttu-id="787a2-185">Если пользовательский шаблон уже находится в памяти, установите \_ флаг fr енаблетемплатехандле.</span><span class="sxs-lookup"><span data-stu-id="787a2-185">If your custom template is already in memory, set the FR\_ENABLETEMPLATEHANDLE flag.</span></span> <span data-ttu-id="787a2-186">Используйте элемент **HINSTANCE** для задания объекта памяти, содержащего шаблон.</span><span class="sxs-lookup"><span data-stu-id="787a2-186">Use the **hInstance** member to identify the memory object that contains the template.</span></span>

<span data-ttu-id="787a2-187">Вы можете предоставить процедуру обработчика [**фрхукпрок**](/windows/win32/api/commdlg/nc-commdlg-lpfrhookproc) для диалогового окна **найти** или **заменить** .</span><span class="sxs-lookup"><span data-stu-id="787a2-187">You can provide an [**FRHookProc**](/windows/win32/api/commdlg/nc-commdlg-lpfrhookproc) hook procedure for a **Find** or **Replace** dialog box.</span></span> <span data-ttu-id="787a2-188">Процедура-обработчик может обрабатывать сообщения, отправленные в диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="787a2-188">The hook procedure can process messages sent to the dialog box.</span></span> <span data-ttu-id="787a2-189">При использовании пользовательского шаблона для определения дополнительных элементов управления необходимо предоставить процедуру-обработчик для обработки входных данных для элементов управления.</span><span class="sxs-lookup"><span data-stu-id="787a2-189">If you use a custom template to define additional controls, you must provide a hook procedure to process input for your controls.</span></span>

<span data-ttu-id="787a2-190">**Включение процедуры-обработчика для диалогового окна «найти или заменить»**</span><span class="sxs-lookup"><span data-stu-id="787a2-190">**To enable a hook procedure for a Find or Replace dialog box**</span></span>

1.  <span data-ttu-id="787a2-191">Установите флаг FR \_ енаблехук в элементе **flags** структуры [**финдреплаце**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) .</span><span class="sxs-lookup"><span data-stu-id="787a2-191">Set the FR\_ENABLEHOOK flag in the **Flags** member of the [**FINDREPLACE**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) structure.</span></span>
2.  <span data-ttu-id="787a2-192">Укажите адрес процедуры-обработчика в элементе **лпфнхук** .</span><span class="sxs-lookup"><span data-stu-id="787a2-192">Specify the address of the hook procedure in the **lpfnHook** member.</span></span>

<span data-ttu-id="787a2-193">После обработки сообщения [**WM \_ инитдиалог**](wm-initdialog.md) процедура диалогового окна отправляет сообщение **WM \_ инитдиалог** в процедуру-обработчик.</span><span class="sxs-lookup"><span data-stu-id="787a2-193">After processing its [**WM\_INITDIALOG**](wm-initdialog.md) message, the dialog box procedure sends a **WM\_INITDIALOG** message to the hook procedure.</span></span> <span data-ttu-id="787a2-194">Параметр *lParam* этого сообщения является указателем на структуру [**финдреплаце**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) , используемую для инициализации диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="787a2-194">The *lParam* parameter of this message is a pointer to the [**FINDREPLACE**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) structure used to initialize the dialog box.</span></span>

<span data-ttu-id="787a2-195">Если процедура-обработчик возвращает **значение false** в ответ на [**сообщение \_ инитдиалог WM**](wm-initdialog.md) , диалоговое окно не будет отображаться, если оно не отображается в процедуре обработчика.</span><span class="sxs-lookup"><span data-stu-id="787a2-195">If the hook procedure returns **FALSE** in response to the [**WM\_INITDIALOG**](wm-initdialog.md) message, the dialog box will not be shown unless the hook procedure displays it.</span></span> <span data-ttu-id="787a2-196">Для этого сначала необходимо выполнить все остальные операции рисования, а затем вызвать функции [**ShowWindow**](/windows/desktop/api/winuser/nf-winuser-showwindow) и [**упдатевиндов**](/windows/desktop/api/winuser/nf-winuser-updatewindow) .</span><span class="sxs-lookup"><span data-stu-id="787a2-196">To do this, first perform any other paint operations, and then call the [**ShowWindow**](/windows/desktop/api/winuser/nf-winuser-showwindow) and [**UpdateWindow**](/windows/desktop/api/winuser/nf-winuser-updatewindow) functions.</span></span> <span data-ttu-id="787a2-197">Примером является следующий код:</span><span class="sxs-lookup"><span data-stu-id="787a2-197">The following code provides an example:</span></span>


```
// We've returned FALSE in response to WM_INITDIALOG. 
// We've performed any other paint operations. 
// Now we display the dialog box. 
ShowWindow(hDlg, SW_SHOWNORMAL); 
UpdateWindow(hDlg); 
```



 

 