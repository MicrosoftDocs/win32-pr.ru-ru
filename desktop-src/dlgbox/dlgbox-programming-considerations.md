---
title: Рекомендации по программированию диалоговых окон
description: В этом обзоре рассматриваются некоторые вопросы программирования, касающиеся диалоговых окон.
ms.assetid: 49024a0f-ea92-4d56-b063-8e5fcdbd884a
keywords:
- Пользовательский интерфейс Windows, окна
- Пользовательский интерфейс Windows, диалоговые окна
- окна, диалоговые окна
- диалоговые окна, сведения
- процедуры диалоговых окон
- диалоговые окна, процедуры
- Сообщение WM_INITDIALOG
- Сообщение WM_COMMAND
- Сообщение WM_PARENTNOTIFY
- сообщения управления цветом
- диалоговые окна, обработка сообщений
- диалоговые окна, интерфейс клавиатуры
- диалоговые окна, назначенные клавиши
- диалоговые окна, пользовательские
- настраиваемые диалоговые окна
- диалоговые окна, параметры
ms.topic: article
ms.date: 08/25/2020
ms.openlocfilehash: 790abe7c76cdb99f86b2a90a133b15faae721e0e
ms.sourcegitcommit: f7cf41ffc79d1ffead9de2fc61677201f94b423a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2020
ms.locfileid: "105691678"
---
# <a name="dialog-box-programming-considerations"></a><span data-ttu-id="89511-119">Рекомендации по программированию диалоговых окон</span><span class="sxs-lookup"><span data-stu-id="89511-119">Dialog Box Programming Considerations</span></span>

<span data-ttu-id="89511-120">В этом обзоре рассматриваются некоторые вопросы программирования, касающиеся диалоговых окон.</span><span class="sxs-lookup"><span data-stu-id="89511-120">This overview discusses some programming considerations concerning dialog boxes.</span></span>

<span data-ttu-id="89511-121">Обзор включает в себя следующие разделы.</span><span class="sxs-lookup"><span data-stu-id="89511-121">The overview includes the following topics.</span></span>

-   [<span data-ttu-id="89511-122">Процедуры диалоговых окон</span><span class="sxs-lookup"><span data-stu-id="89511-122">Dialog Box Procedures</span></span>](#dialog-box-procedures)
    -   [<span data-ttu-id="89511-123">\_Сообщение ИНИТДИАЛОГ WM</span><span class="sxs-lookup"><span data-stu-id="89511-123">The WM\_INITDIALOG Message</span></span>](wm-initdialog.md)
    -   [<span data-ttu-id="89511-124">\_Командное сообщение WM</span><span class="sxs-lookup"><span data-stu-id="89511-124">The WM\_COMMAND Message</span></span>](/windows/desktop/menurc/wm-command)
    -   [<span data-ttu-id="89511-125">\_Сообщение ПАРЕНТНОТИФИ WM</span><span class="sxs-lookup"><span data-stu-id="89511-125">The WM\_PARENTNOTIFY Message</span></span>](/previous-versions/windows/desktop/inputmsg/wm-parentnotify)
    -   [<span data-ttu-id="89511-126">Сообщения управления цветом</span><span class="sxs-lookup"><span data-stu-id="89511-126">Control-Color Messages</span></span>](#control-color-messages)
    -   [<span data-ttu-id="89511-127">Диалоговое окно обработки сообщений по умолчанию</span><span class="sxs-lookup"><span data-stu-id="89511-127">Dialog Box Default Message Processing</span></span>](#dialog-box-default-message-processing)
-   [<span data-ttu-id="89511-128">Интерфейс клавиатуры диалогового окна</span><span class="sxs-lookup"><span data-stu-id="89511-128">Dialog Box Keyboard Interface</span></span>](#dialog-box-keyboard-interface)
    -   [<span data-ttu-id="89511-129">Стиль WS \_ TABSTOP</span><span class="sxs-lookup"><span data-stu-id="89511-129">The WS\_TABSTOP Style</span></span>](/windows/desktop/winmsg/window-styles)
    -   [<span data-ttu-id="89511-130">\_Стиль группы WS</span><span class="sxs-lookup"><span data-stu-id="89511-130">The WS\_GROUP Style</span></span>](/windows/desktop/winmsg/window-styles)
    -   [<span data-ttu-id="89511-131">Назначенные клавиши</span><span class="sxs-lookup"><span data-stu-id="89511-131">Mnemonics</span></span>](#mnemonics)
-   [<span data-ttu-id="89511-132">Параметры диалогового окна</span><span class="sxs-lookup"><span data-stu-id="89511-132">Dialog Box Settings</span></span>](#dialog-box-settings)
    -   [<span data-ttu-id="89511-133">Переключатели и флажки</span><span class="sxs-lookup"><span data-stu-id="89511-133">Radio Buttons and Check Boxes</span></span>](#radio-buttons-and-check-boxes)
    -   [<span data-ttu-id="89511-134">Диалоговое окно "изменить элементы управления"</span><span class="sxs-lookup"><span data-stu-id="89511-134">Dialog Box Edit Controls</span></span>](#dialog-box-edit-controls)
    -   [<span data-ttu-id="89511-135">Списки, поля со списком и списки каталогов</span><span class="sxs-lookup"><span data-stu-id="89511-135">List Boxes, Combo Boxes, and Directory Listings</span></span>](#list-boxes-combo-boxes-and-directory-listings)
    -   [<span data-ttu-id="89511-136">Сообщения управления диалогового окна</span><span class="sxs-lookup"><span data-stu-id="89511-136">Dialog Box Control Messages</span></span>](#dialog-box-control-messages)
-   [<span data-ttu-id="89511-137">Пользовательские диалоговые окна</span><span class="sxs-lookup"><span data-stu-id="89511-137">Custom Dialog Boxes</span></span>](#custom-dialog-boxes)

## <a name="dialog-box-procedures"></a><span data-ttu-id="89511-138">Процедуры диалоговых окон</span><span class="sxs-lookup"><span data-stu-id="89511-138">Dialog Box Procedures</span></span>

<span data-ttu-id="89511-139">Процедура диалогового окна аналогична процедуре окна, в которой система отправляет сообщения в процедуру, когда она содержит сведения, которые нужно предоставить или выполнить задачи. В отличие от оконной процедуры, процедура диалогового окна никогда не вызывает функцию [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) .</span><span class="sxs-lookup"><span data-stu-id="89511-139">A dialog box procedure is similar to a window procedure in that the system sends messages to the procedure when it has information to give or tasks to carry out. Unlike a window procedure, a dialog box procedure never calls the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function.</span></span> <span data-ttu-id="89511-140">Вместо этого он возвращает **значение true** , если обрабатывает сообщение, или **значение false** в противном случае.</span><span class="sxs-lookup"><span data-stu-id="89511-140">Instead, it returns **TRUE** if it processes a message or **FALSE** if it does not.</span></span>

<span data-ttu-id="89511-141">Каждая процедура диалогового окна имеет следующий вид:</span><span class="sxs-lookup"><span data-stu-id="89511-141">Every dialog box procedure has the following form:</span></span>

```cpp
BOOL CALLBACK DlgProc(HWND hwndDlg, UINT message, WPARAM wParam, LPARAM lParam) 
{ 
    switch (message) 
    { 
 
        // Place message cases here. 
 
        default: 
            return FALSE; 
    } 
}
```

<span data-ttu-id="89511-142">Параметры процедуры служат той же цели, что и в процедуре окна, при этом параметр *хвнддлг* получает маркер окна диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-142">The procedure parameters serve the same purpose as in a window procedure, with the *hwndDlg* parameter receiving the window handle of the dialog box.</span></span>

<span data-ttu-id="89511-143">Большинство процедур диалоговых окон обрабатывают сообщение [**WM \_ инитдиалог**](wm-initdialog.md) и [**\_ Командные сообщения WM**](/windows/desktop/menurc/wm-command) , отправленные элементами управления, но обрабатывают немногие другие сообщения.</span><span class="sxs-lookup"><span data-stu-id="89511-143">Most dialog box procedures process the [**WM\_INITDIALOG**](wm-initdialog.md) message and the [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) messages sent by the controls, but process few if any other messages.</span></span> <span data-ttu-id="89511-144">Если процедура диалогового окна не обрабатывает сообщение, она должна вернуть **значение false** , чтобы система обрабатывала внутренние сообщения.</span><span class="sxs-lookup"><span data-stu-id="89511-144">If a dialog box procedure does not process a message, it must return **FALSE** to direct the system to process the messages internally.</span></span> <span data-ttu-id="89511-145">Единственным исключением из этого правила является сообщение **WM \_ инитдиалог** .</span><span class="sxs-lookup"><span data-stu-id="89511-145">The only exception to this rule is the **WM\_INITDIALOG** message.</span></span> <span data-ttu-id="89511-146">Процедура диалогового окна должна возвращать **значение true** , чтобы система обрабатывала сообщение **WM \_ инитдиалог** .</span><span class="sxs-lookup"><span data-stu-id="89511-146">The dialog box procedure must return **TRUE** to direct the system to further process the **WM\_INITDIALOG** message.</span></span> <span data-ttu-id="89511-147">В любом случае процедура не должна вызывать [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span><span class="sxs-lookup"><span data-stu-id="89511-147">In any case, the procedure must not call [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span></span>

- [<span data-ttu-id="89511-148">\_Сообщение ИНИТДИАЛОГ WM</span><span class="sxs-lookup"><span data-stu-id="89511-148">The WM\_INITDIALOG Message</span></span>](#the-wm_initdialog-message)
- [<span data-ttu-id="89511-149">\_Командное сообщение WM</span><span class="sxs-lookup"><span data-stu-id="89511-149">The WM\_COMMAND Message</span></span>](#the-wm_command-message)
- [<span data-ttu-id="89511-150">\_Сообщение ПАРЕНТНОТИФИ WM</span><span class="sxs-lookup"><span data-stu-id="89511-150">The WM\_PARENTNOTIFY Message</span></span>](#the-wm_parentnotify-message)
- [<span data-ttu-id="89511-151">Сообщения управления цветом</span><span class="sxs-lookup"><span data-stu-id="89511-151">Control-Color Messages</span></span>](#control-color-messages)
- [<span data-ttu-id="89511-152">Диалоговое окно обработки сообщений по умолчанию</span><span class="sxs-lookup"><span data-stu-id="89511-152">Dialog Box Default Message Processing</span></span>](#dialog-box-default-message-processing)

### <a name="the-wm_initdialog-message"></a><span data-ttu-id="89511-153">\_Сообщение ИНИТДИАЛОГ WM</span><span class="sxs-lookup"><span data-stu-id="89511-153">The WM\_INITDIALOG Message</span></span>

<span data-ttu-id="89511-154">Система не отправляет сообщение о [**\_ создании WM**](/windows/desktop/winmsg/wm-create) в процедуру диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-154">The system does not send a [**WM\_CREATE**](/windows/desktop/winmsg/wm-create) message to the dialog box procedure.</span></span> <span data-ttu-id="89511-155">Вместо этого он отправляет сообщение [**WM \_ инитдиалог**](wm-initdialog.md) при создании диалогового окна и всех его элементов управления, но перед отображением диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-155">Instead, it sends a [**WM\_INITDIALOG**](wm-initdialog.md) message when it creates the dialog box and all its controls but before it displays the dialog box.</span></span> <span data-ttu-id="89511-156">Процедура должна выполнить инициализацию, необходимую для того, чтобы в диалоговом окне отображались текущие параметры, связанные с задачей.</span><span class="sxs-lookup"><span data-stu-id="89511-156">The procedure should carry out any initialization required to ensure that the dialog box displays the current settings associated with the task.</span></span> <span data-ttu-id="89511-157">Например, если диалоговое окно содержит элемент управления для отображения текущего диска и каталога, процедура должна определить текущий диск и каталог и задать это значение для элемента управления.</span><span class="sxs-lookup"><span data-stu-id="89511-157">For example, when a dialog box contains a control to show the current drive and directory, the procedure must determine the current drive and directory and set the control to that value.</span></span>

<span data-ttu-id="89511-158">Процедура может инициализировать элементы управления с помощью таких функций, как [**сетдлгитемтекст**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemtexta) и [**чеккдлгбуттон**](https://msdn.microsoft.com/library/Cc410649(v=MSDN.10).aspx).</span><span class="sxs-lookup"><span data-stu-id="89511-158">The procedure can initialize controls by using functions such as [**SetDlgItemText**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemtexta) and [**CheckDlgButton**](https://msdn.microsoft.com/library/Cc410649(v=MSDN.10).aspx).</span></span> <span data-ttu-id="89511-159">Так как элементы управления являются окнами, процедура также может управлять ими с помощью функций управления окнами, таких как [**енаблевиндов**](/windows/desktop/api/winuser/nf-winuser-enablewindow) и [**SetFocus**](/windows/desktop/api/winuser/nf-winuser-setfocus).</span><span class="sxs-lookup"><span data-stu-id="89511-159">Because controls are windows, the procedure can also manipulate them by using window-management functions such as [**EnableWindow**](/windows/desktop/api/winuser/nf-winuser-enablewindow) and [**SetFocus**](/windows/desktop/api/winuser/nf-winuser-setfocus).</span></span> <span data-ttu-id="89511-160">Процедура может получить маркер окна для элемента управления с помощью функции [**жетдлгитем**](/windows/desktop/api/Winuser/nf-winuser-getdlgitem) .</span><span class="sxs-lookup"><span data-stu-id="89511-160">The procedure can retrieve the window handle to a control by using the [**GetDlgItem**](/windows/desktop/api/Winuser/nf-winuser-getdlgitem) function.</span></span>

<span data-ttu-id="89511-161">При необходимости процедура диалогового окна может изменить содержимое, состояние и расположение любого элемента управления.</span><span class="sxs-lookup"><span data-stu-id="89511-161">The dialog box procedure can change the contents, state, and position of any control as needed.</span></span> <span data-ttu-id="89511-162">Например, в диалоговом окне, содержащем список имен файлов и кнопку **Открыть** , процедура может отключить кнопку **Открыть** , пока пользователь не выберет файл из списка.</span><span class="sxs-lookup"><span data-stu-id="89511-162">For example, in a dialog box that contains a list box of filenames and an **Open** button, the procedure can disable the **Open** button until the user selects a file from the list.</span></span> <span data-ttu-id="89511-163">В этом примере шаблон диалогового окна задает стиль [**WS \_ disabled**](/windows/desktop/winmsg/window-styles) для кнопки **Открыть** , и система автоматически отключает кнопку при ее создании.</span><span class="sxs-lookup"><span data-stu-id="89511-163">In this example, the dialog box template specifies the [**WS\_DISABLED**](/windows/desktop/winmsg/window-styles) style for the **Open** button and the system automatically disables the button when creating it.</span></span> <span data-ttu-id="89511-164">Когда процедура диалогового окна получает сообщение уведомления из списка, показывающего, что пользователь выбрал файл, процедура вызывает функцию [**енаблевиндов**](/windows/desktop/api/winuser/nf-winuser-enablewindow) для включения кнопки **Открыть** .</span><span class="sxs-lookup"><span data-stu-id="89511-164">When the dialog box procedure receives a notification message from the list box indicating that the user has selected a file, the procedure calls the [**EnableWindow**](/windows/desktop/api/winuser/nf-winuser-enablewindow) function to enable the **Open** button.</span></span>

<span data-ttu-id="89511-165">Чтобы отобразить пользовательский значок в строке заголовка диалогового окна, обработчик [**WM \_ инитдиалог**](wm-initdialog.md) может отправить сообщение [**WM \_ сетикон**](/windows/desktop/winmsg/wm-seticon) в диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="89511-165">To display a custom icon on the caption bar of the dialog box, your [**WM\_INITDIALOG**](wm-initdialog.md) handler can send the [**WM\_SETICON**](/windows/desktop/winmsg/wm-seticon) message to the dialog box.</span></span>

<span data-ttu-id="89511-166">Если приложение создает диалоговое окно с помощью одной из функций [**диалогбокспарам**](/windows/desktop/api/Winuser/nf-winuser-dialogboxparama), [**диалогбоксиндиректпарам**](/windows/desktop/api/Winuser/nf-winuser-dialogboxindirectparama), [**Креатедиалогпарам**](/windows/desktop/api/Winuser/nf-winuser-createdialogparama)или [**креатедиалогиндиректпарам**](/windows/desktop/api/Winuser/nf-winuser-createdialogindirectparama), параметр *lParam* для сообщения [**WM \_ INITDIALOG**](wm-initdialog.md) содержит дополнительный параметр, передаваемый функции.</span><span class="sxs-lookup"><span data-stu-id="89511-166">If the application creates the dialog box by using one of the functions [**DialogBoxParam**](/windows/desktop/api/Winuser/nf-winuser-dialogboxparama), [**DialogBoxIndirectParam**](/windows/desktop/api/Winuser/nf-winuser-dialogboxindirectparama), [**CreateDialogParam**](/windows/desktop/api/Winuser/nf-winuser-createdialogparama), or [**CreateDialogIndirectParam**](/windows/desktop/api/Winuser/nf-winuser-createdialogindirectparama), the *lParam* parameter for the [**WM\_INITDIALOG**](wm-initdialog.md) message contains the extra parameter passed to the function.</span></span> <span data-ttu-id="89511-167">Приложения обычно используют этот дополнительный параметр для передачи указателя на дополнительные сведения об инициализации в процедуру диалогового окна, но процедура диалогового окна должна определять значение параметра.</span><span class="sxs-lookup"><span data-stu-id="89511-167">Applications typically use this extra parameter to pass a pointer to additional initialization information to the dialog box procedure, but the dialog box procedure must determine the meaning of the parameter.</span></span> <span data-ttu-id="89511-168">Если приложение использует другую функцию для создания диалогового окна, система устанавливает для параметра *lParam* **значение NULL**.</span><span class="sxs-lookup"><span data-stu-id="89511-168">If the application uses another function to create the dialog box, the system sets the *lParam* parameter to **NULL**.</span></span>

<span data-ttu-id="89511-169">Перед возвратом из сообщения [**WM \_ инитдиалог**](wm-initdialog.md) процедура должна определить, должен ли он установить фокус ввода на указанный элемент управления.</span><span class="sxs-lookup"><span data-stu-id="89511-169">Before returning from the [**WM\_INITDIALOG**](wm-initdialog.md) message, the procedure should determine whether it should set the input focus to a specified control.</span></span> <span data-ttu-id="89511-170">Если процедура диалогового окна возвращает **значение true**, система автоматически устанавливает фокус ввода на элемент управления, чей обработчик окна находится в параметре *wParam* .</span><span class="sxs-lookup"><span data-stu-id="89511-170">If the dialog box procedure returns **TRUE**, the system automatically sets the input focus to the control whose window handle is in the *wParam* parameter.</span></span> <span data-ttu-id="89511-171">Если элемент управления, получивший фокус по умолчанию, не подходит, он может установить фокус на соответствующий элемент управления с помощью функции [**SetFocus**](/windows/desktop/api/winuser/nf-winuser-setfocus) .</span><span class="sxs-lookup"><span data-stu-id="89511-171">If the control receiving the default focus is not appropriate, it can set the focus to the appropriate control by using the [**SetFocus**](/windows/desktop/api/winuser/nf-winuser-setfocus) function.</span></span> <span data-ttu-id="89511-172">Если процедура устанавливает фокус ввода, она должна возвращать **значение false** , чтобы система не настраивает фокус по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="89511-172">If the procedure sets the input focus, it must return **FALSE** to prevent the system from setting the default focus.</span></span> <span data-ttu-id="89511-173">Элементом управления, получающим фокус ввода по умолчанию, всегда является первый элемент управления, указанный в шаблоне, который является видимым, не отключен и имеет стиль [WS \_ TABSTOP](/windows/desktop/winmsg/window-styles) .</span><span class="sxs-lookup"><span data-stu-id="89511-173">The control receiving the default input focus is always the first control specified in the template that is visible, not disabled, and has the [WS\_TABSTOP](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="89511-174">Если такой элемент управления не существует, система устанавливает фокус ввода по умолчанию на первый элемент управления в шаблоне.</span><span class="sxs-lookup"><span data-stu-id="89511-174">If no such control exists, the system sets the default input focus to the first control in the template.</span></span>

### <a name="the-wm_command-message"></a><span data-ttu-id="89511-175">\_Командное сообщение WM</span><span class="sxs-lookup"><span data-stu-id="89511-175">The WM\_COMMAND Message</span></span>

<span data-ttu-id="89511-176">Элемент управления может отправить [**\_ командное сообщение WM**](/windows/desktop/menurc/wm-command) в процедуру диалогового окна, когда пользователь выполняет действие в элементе управления.</span><span class="sxs-lookup"><span data-stu-id="89511-176">A control can send a [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) message to the dialog box procedure when the user carries out an action in the control.</span></span> <span data-ttu-id="89511-177">Эти сообщения, называемые сообщениями уведомления, сообщают о процедуре ввода данных пользователем и позволяют им выполнять соответствующие ответы.</span><span class="sxs-lookup"><span data-stu-id="89511-177">These messages, called notification messages, inform the procedure of user input and permit it to carry out appropriate responses.</span></span>

<span data-ttu-id="89511-178">Все стандартные элементы управления, за исключением статических элементов управления, отправляют сообщения уведомлений для выбранных действий пользователя.</span><span class="sxs-lookup"><span data-stu-id="89511-178">All predefined controls, except static controls, send notification messages for selected user actions.</span></span> <span data-ttu-id="89511-179">Например, при нажатии кнопки с помощью кнопки отправки отправляется млрд долл уведомление о [**\_ нажатии**](../controls/bn-clicked.md) на кнопку.</span><span class="sxs-lookup"><span data-stu-id="89511-179">For example, a push button sends the [**BN\_CLICKED**](../controls/bn-clicked.md) notification message whenever the user clicks the button.</span></span> <span data-ttu-id="89511-180">Во всех случаях в слове с низким приоритетом параметра *wParam* содержится идентификатор элемента управления, а в верхнем порядке слово *wParam* — код уведомления, а параметр *lParam* содержит управляющий маркер окна.</span><span class="sxs-lookup"><span data-stu-id="89511-180">In all cases, the low-order word of the *wParam* parameter contains the control identifier, the high-order word of *wParam* contains the notification code, and the *lParam* parameter contains the control window handle.</span></span>

<span data-ttu-id="89511-181">Процедура диалогового окна должна отслеживать и обрабатывать сообщения уведомления.</span><span class="sxs-lookup"><span data-stu-id="89511-181">The dialog box procedure should monitor and process notification messages.</span></span> <span data-ttu-id="89511-182">В частности, процедура должна обрабатывать сообщения с идентификаторами ИДОК или ИДКАНЦЕЛ; Эти сообщения представляют запрос пользователем, который закрывает диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="89511-182">In particular, the procedure must process messages having the IDOK or IDCANCEL identifiers; these messages represent a request by the user to close the dialog box.</span></span> <span data-ttu-id="89511-183">Процедура должна закрыть диалоговое окно с помощью функции [**EndDialog**](/windows/desktop/api/Winuser/nf-winuser-enddialog) для модальных диалоговых окон и функции [**дестройвиндов**](/windows/desktop/api/winuser/nf-winuser-destroywindow) для немодальных диалоговых окон.</span><span class="sxs-lookup"><span data-stu-id="89511-183">The procedure should close the dialog box by using the [**EndDialog**](/windows/desktop/api/Winuser/nf-winuser-enddialog) function for modal dialog boxes and the [**DestroyWindow**](/windows/desktop/api/winuser/nf-winuser-destroywindow) function for modeless dialog boxes.</span></span>

<span data-ttu-id="89511-184">Система также отправляет [**\_ Командные сообщения WM**](/windows/desktop/menurc/wm-command) в процедуру диалогового окна, если в диалоговом окне есть меню, например меню **окно** , и пользователь щелкает пункт меню.</span><span class="sxs-lookup"><span data-stu-id="89511-184">The system also sends [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) messages to the dialog box procedure if the dialog box has a menu, such as the **window** menu, and the user clicks a menu item.</span></span> <span data-ttu-id="89511-185">В частности, система отправляет **\_ командное сообщение WM** с параметром *wParam* , установленным в **идканцел** каждый раз, когда пользователь нажимает кнопку « **Закрыть** » в меню окна диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-185">In particular, the system sends a **WM\_COMMAND** message with the *wParam* parameter set to **IDCANCEL** whenever the user clicks **Close** in the dialog box's window menu.</span></span> <span data-ttu-id="89511-186">Сообщение практически идентично сообщению уведомления, отправленному кнопкой **Отмена** , и должно обрабатываться точно таким же образом.</span><span class="sxs-lookup"><span data-stu-id="89511-186">The message is nearly identical to the notification message sent by the **Cancel** button and should be processed in exactly the same way.</span></span>

### <a name="the-wm_parentnotify-message"></a><span data-ttu-id="89511-187">\_Сообщение ПАРЕНТНОТИФИ WM</span><span class="sxs-lookup"><span data-stu-id="89511-187">The WM\_PARENTNOTIFY Message</span></span>

<span data-ttu-id="89511-188">Элемент управления отправляет сообщение [**WM \_ парентнотифи**](/previous-versions/windows/desktop/inputmsg/wm-parentnotify) всякий раз, когда пользователь нажимает кнопку мыши и указывает на элемент управления.</span><span class="sxs-lookup"><span data-stu-id="89511-188">A control sends a [**WM\_PARENTNOTIFY**](/previous-versions/windows/desktop/inputmsg/wm-parentnotify) message whenever the user presses a mouse button while pointing to the control.</span></span> <span data-ttu-id="89511-189">Некоторые приложения преобразуют это сообщение как сигнал для выполнения действия, связанного с элементом управления, например для отображения строки текста, описывающей назначение элемента управления.</span><span class="sxs-lookup"><span data-stu-id="89511-189">Some applications interpret this message as a signal to carry out an action related to the control, such as displaying a line of text describing the purpose of the control.</span></span>

<span data-ttu-id="89511-190">Система также отправляет сообщения [**WM \_ парентнотифи**](/previous-versions/windows/desktop/inputmsg/wm-parentnotify) при создании и уничтожении окна, но не для элементов управления, созданных из шаблона диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-190">The system also sends [**WM\_PARENTNOTIFY**](/previous-versions/windows/desktop/inputmsg/wm-parentnotify) messages when it creates and destroys a window, but not for controls created from a dialog box template.</span></span> <span data-ttu-id="89511-191">Система предотвращает эти сообщения, указывая стиль **WS \_ ex \_ нопарентнотифи** при создании элементов управления.</span><span class="sxs-lookup"><span data-stu-id="89511-191">The system prevents these messages by specifying the **WS\_EX\_NOPARENTNOTIFY** style when creating the controls.</span></span> <span data-ttu-id="89511-192">Приложение не может переопределить это поведение по умолчанию, если оно не создает собственные элементы управления для диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-192">An application cannot override this default behavior unless it creates its own controls for the dialog box.</span></span>

### <a name="control-color-messages"></a><span data-ttu-id="89511-193">Сообщения Control-Color</span><span class="sxs-lookup"><span data-stu-id="89511-193">Control-Color Messages</span></span>

<span data-ttu-id="89511-194">Элементы управления и система могут отсылать сообщения управления цветом, когда они хотят, чтобы процедура диалогового окна закрашивания фон элемента управления или другого окна с помощью определенной кисти и цветов.</span><span class="sxs-lookup"><span data-stu-id="89511-194">Controls and the system can send control-color messages when they want the dialog box procedure to paint the background of a control or other window by using a specific brush and colors.</span></span> <span data-ttu-id="89511-195">Это может быть полезно, когда приложения переопределяют цвета по умолчанию, используемые в диалоговых окнах и их элементах управления.</span><span class="sxs-lookup"><span data-stu-id="89511-195">This can be useful when applications override the default colors used in dialog boxes and their controls.</span></span> <span data-ttu-id="89511-196">Ниже приведены сообщения управления цветом, которые заменили сообщение **WM \_ ктлколор** .</span><span class="sxs-lookup"><span data-stu-id="89511-196">Following are the control-color messages, which have replaced the **WM\_CTLCOLOR** message.</span></span>

-   [<span data-ttu-id="89511-197">**WM \_ ктлколорбтн**</span><span class="sxs-lookup"><span data-stu-id="89511-197">**WM\_CTLCOLORBTN**</span></span>](../controls/wm-ctlcolorbtn.md)
-   [<span data-ttu-id="89511-198">**WM \_ ктлколордлг**</span><span class="sxs-lookup"><span data-stu-id="89511-198">**WM\_CTLCOLORDLG**</span></span>](wm-ctlcolordlg.md)
-   [<span data-ttu-id="89511-199">**WM \_ ктлколоредит**</span><span class="sxs-lookup"><span data-stu-id="89511-199">**WM\_CTLCOLOREDIT**</span></span>](../controls/wm-ctlcoloredit.md)
-   [<span data-ttu-id="89511-200">**WM \_ ктлколорлистбокс**</span><span class="sxs-lookup"><span data-stu-id="89511-200">**WM\_CTLCOLORLISTBOX**</span></span>](../controls/wm-ctlcolorlistbox.md)
-   [<span data-ttu-id="89511-201">**WM \_ ктлколорскроллбар**</span><span class="sxs-lookup"><span data-stu-id="89511-201">**WM\_CTLCOLORSCROLLBAR**</span></span>](../controls/wm-ctlcolorscrollbar.md)
-   [<span data-ttu-id="89511-202">**WM \_ ктлколорстатик**</span><span class="sxs-lookup"><span data-stu-id="89511-202">**WM\_CTLCOLORSTATIC**</span></span>](../controls/wm-ctlcolorstatic.md)

<span data-ttu-id="89511-203">Элемент управления отправляет сообщение с цветом элемента управления в процедуру диалогового окна непосредственно перед тем, как оно рисует собственный фон.</span><span class="sxs-lookup"><span data-stu-id="89511-203">A control sends a control-color message to the dialog box procedure just before it paints its own background.</span></span> <span data-ttu-id="89511-204">Сообщение позволяет процедуре указать, какую кисть использовать, а также задать цвета фона и переднего плана.</span><span class="sxs-lookup"><span data-stu-id="89511-204">The message allows the procedure to specify which brush to use and to set the background and foreground colors.</span></span> <span data-ttu-id="89511-205">Процедура задает кисть, возвращая маркер кисти.</span><span class="sxs-lookup"><span data-stu-id="89511-205">The procedure specifies a brush by returning the brush handle.</span></span> <span data-ttu-id="89511-206">Чтобы задать цвета фона и переднего плана, процедура использует функции [**сетбкколор**](/windows/desktop/api/wingdi/nf-wingdi-setbkcolor) и [**сеттекстколор**](/windows/desktop/api/wingdi/nf-wingdi-settextcolor) с контекстом устройства просмотра элемента управления.</span><span class="sxs-lookup"><span data-stu-id="89511-206">To set the background and foreground colors, the procedure uses the [**SetBkColor**](/windows/desktop/api/wingdi/nf-wingdi-setbkcolor) and [**SetTextColor**](/windows/desktop/api/wingdi/nf-wingdi-settextcolor) functions with the control's display device context.</span></span> <span data-ttu-id="89511-207">Сообщение Control-Color передает маркер контексту дисплея устройства в процедуру в параметре *wParam* сообщения.</span><span class="sxs-lookup"><span data-stu-id="89511-207">The control-color message passes a handle to the display device context to the procedure in the message's *wParam* parameter.</span></span>

<span data-ttu-id="89511-208">Система отправляет сообщение [**WM \_ ктлколордлг**](wm-ctlcolordlg.md) в процедуру диалогового окна, если процедура не обрабатывает сообщение [**WM \_ ерасебкгнд**](/windows/desktop/winmsg/wm-erasebkgnd) .</span><span class="sxs-lookup"><span data-stu-id="89511-208">The system sends a [**WM\_CTLCOLORDLG**](wm-ctlcolordlg.md) message to the dialog box procedure if the procedure does not process the [**WM\_ERASEBKGND**](/windows/desktop/winmsg/wm-erasebkgnd) message.</span></span> <span data-ttu-id="89511-209">В стандартном классе диалогового окна отсутствует кисть фона класса, поэтому это сообщение позволяет процедуре определять собственный фон без необходимости включения кода для выполнения работы.</span><span class="sxs-lookup"><span data-stu-id="89511-209">The predefined dialog box class does not have a class background brush, so this message lets the procedure define its own background without having to include the code to carry out the work.</span></span>

<span data-ttu-id="89511-210">В любом случае, если процедура диалогового окна не обрабатывает сообщение цвета элемента управления, система использует кисть с цветом окна по умолчанию, чтобы закрасить фон для всех элементов управления и окон, за исключением полос прокрутки.</span><span class="sxs-lookup"><span data-stu-id="89511-210">In any case, when a dialog box procedure does not process a control-color message, the system uses a brush with the default window color to paint the background for all controls and windows except scroll bars.</span></span> <span data-ttu-id="89511-211">Приложение может получить цвет окна по умолчанию, передав значение **\_ окна цвета** в функцию [**жетсисколор**](/windows/desktop/api/winuser/nf-winuser-getsyscolor) .</span><span class="sxs-lookup"><span data-stu-id="89511-211">An application can retrieve the default window color by passing the **COLOR\_WINDOW** value to the [**GetSysColor**](/windows/desktop/api/winuser/nf-winuser-getsyscolor) function.</span></span> <span data-ttu-id="89511-212">Во время рисования фона цвет переднего плана для контекста отображаемого устройства задается как цвет текста по умолчанию (**цветовая \_ WINDOWTEXT**).</span><span class="sxs-lookup"><span data-stu-id="89511-212">While the background is painted, the foreground color for the display device context is set to the default text color (**COLOR\_WINDOWTEXT**).</span></span> <span data-ttu-id="89511-213">Для полос прокрутки система использует кисть, имеющую цвет полосы прокрутки по умолчанию (**цветовая \_** шкала).</span><span class="sxs-lookup"><span data-stu-id="89511-213">For scroll bars, the system uses a brush having the default scroll bar color (**COLOR\_SCROLLBAR**).</span></span> <span data-ttu-id="89511-214">В этом случае цвета фона и переднего плана для контекста отображаемого устройства устанавливаются в белый и черный соответственно.</span><span class="sxs-lookup"><span data-stu-id="89511-214">In this case, the background and foreground colors for the display device context are set to white and black, respectively.</span></span>

### <a name="dialog-box-default-message-processing"></a><span data-ttu-id="89511-215">Диалоговое окно обработки сообщений по умолчанию</span><span class="sxs-lookup"><span data-stu-id="89511-215">Dialog Box Default Message Processing</span></span>

<span data-ttu-id="89511-216">Процедура окна для предопределенного класса диалогового окна выполняет обработку по умолчанию для всех сообщений, которые не обрабатывает процедура диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-216">The window procedure for the predefined dialog box class carries out default processing for all messages that the dialog box procedure does not process.</span></span> <span data-ttu-id="89511-217">Когда процедура диалогового окна возвращает **false** для любого сообщения, предопределенная процедура окна проверяет сообщения и выполняет следующие действия по умолчанию:</span><span class="sxs-lookup"><span data-stu-id="89511-217">When the dialog box procedure returns **FALSE** for any message, the predefined window procedure checks the messages and carries out the following default actions:</span></span>



| <span data-ttu-id="89511-218">Сообщение</span><span class="sxs-lookup"><span data-stu-id="89511-218">Message</span></span>                                            | <span data-ttu-id="89511-219">Действие по умолчанию</span><span class="sxs-lookup"><span data-stu-id="89511-219">Default action</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|----------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="89511-220">**\_ЖЕТДЕФИД DM**</span><span class="sxs-lookup"><span data-stu-id="89511-220">**DM\_GETDEFID**</span></span>](dm-getdefid.md)                | <span data-ttu-id="89511-221">Это сообщение можно отправить в диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="89511-221">You can send this message to a dialog box.</span></span> <span data-ttu-id="89511-222">Диалоговое окно возвращает идентификатор элемента управления кнопки по умолчанию, если диалоговое окно имеет такое значение. в противном случае возвращается ноль.</span><span class="sxs-lookup"><span data-stu-id="89511-222">The dialog box returns the control identifier of the default push button, if the dialog box has one; otherwise, it returns zero.</span></span>                                                                                                                                                                                                                                                                                                                      |
| [<span data-ttu-id="89511-223">**\_изменение расположения DM**</span><span class="sxs-lookup"><span data-stu-id="89511-223">**DM\_REPOSITION**</span></span>](dm-reposition.md)            | <span data-ttu-id="89511-224">Это сообщение можно отправить в диалоговое окно верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="89511-224">You can send this message to a top-level dialog box.</span></span> <span data-ttu-id="89511-225">Диалоговое окно перемещается, чтобы оно поместилось в область рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="89511-225">The dialog box repositions itself so it fits within the desktop area.</span></span>                                                                                                                                                                                                                                                                                                                                                                       |
| [<span data-ttu-id="89511-226">**\_СЕТДЕФИД DM**</span><span class="sxs-lookup"><span data-stu-id="89511-226">**DM\_SETDEFID**</span></span>](dm-setdefid.md)                | <span data-ttu-id="89511-227">Это сообщение можно отправить в диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="89511-227">You can send this message to a dialog box.</span></span> <span data-ttu-id="89511-228">Диалоговое окно задает для кнопки принудительной отправки по умолчанию элемент управления, заданный идентификатором элемента управления в параметре *wParam* .</span><span class="sxs-lookup"><span data-stu-id="89511-228">The dialog box sets the default push button to the control specified by the control identifier in the *wParam* parameter.</span></span>                                                                                                                                                                                                                                                                                                                             |
| [<span data-ttu-id="89511-229">**\_Активация WM**</span><span class="sxs-lookup"><span data-stu-id="89511-229">**WM\_ACTIVATE**</span></span>](/windows/desktop/inputdev/wm-activate)           | <span data-ttu-id="89511-230">Восстанавливает фокус ввода на элементе управления, определяемом ранее сохраненным обработчиком, если диалоговое окно активировано.</span><span class="sxs-lookup"><span data-stu-id="89511-230">Restores the input focus to the control identified by the previously saved handle if the dialog box is activated.</span></span> <span data-ttu-id="89511-231">В противном случае процедура сохраняет маркер элемента управления, имеющего фокус ввода.</span><span class="sxs-lookup"><span data-stu-id="89511-231">Otherwise, the procedure saves the handle to the control having the input focus.</span></span>                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="89511-232">**WM \_ чартоитем**</span><span class="sxs-lookup"><span data-stu-id="89511-232">**WM\_CHARTOITEM**</span></span>](../controls/wm-chartoitem.md)         | <span data-ttu-id="89511-233">Возвращает ноль.</span><span class="sxs-lookup"><span data-stu-id="89511-233">Returns zero.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="89511-234">**\_Закрыть WM**</span><span class="sxs-lookup"><span data-stu-id="89511-234">**WM\_CLOSE**</span></span>](/windows/desktop/winmsg/wm-close)                   | <span data-ttu-id="89511-235">Отправляет в диалоговое окно сообщение с уведомлением о [**\_ нажатии млрд долл**](../controls/bn-clicked.md) , указывая **идканцел** в качестве идентификатора элемента управления.</span><span class="sxs-lookup"><span data-stu-id="89511-235">Posts the [**BN\_CLICKED**](../controls/bn-clicked.md) notification message to the dialog box, specifying **IDCANCEL** as the control identifier.</span></span> <span data-ttu-id="89511-236">Если диалоговое окно содержит идентификатор элемента управления ИДКАНЦЕЛ и элемент управления в данный момент отключен, процедура выдает предупреждение и не заносит сообщение.</span><span class="sxs-lookup"><span data-stu-id="89511-236">If the dialog box has an IDCANCEL control identifier and the control is currently disabled, the procedure sounds a warning and does not post the message.</span></span>                                                                                                                                                                                              |
| [<span data-ttu-id="89511-237">**WM \_ компареитем**</span><span class="sxs-lookup"><span data-stu-id="89511-237">**WM\_COMPAREITEM**</span></span>](../controls/wm-compareitem.md)       | <span data-ttu-id="89511-238">Возвращает ноль.</span><span class="sxs-lookup"><span data-stu-id="89511-238">Returns zero.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="89511-239">**WM \_ ерасебкгнд**</span><span class="sxs-lookup"><span data-stu-id="89511-239">**WM\_ERASEBKGND**</span></span>](/windows/desktop/winmsg/wm-erasebkgnd)         | <span data-ttu-id="89511-240">Заполняет клиентскую область диалогового окна, используя либо кисть, возвращенную из сообщения [**WM \_ ктлколордлг**](wm-ctlcolordlg.md) , либо цвет окна по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="89511-240">Fills the dialog box client area by using either the brush returned from the [**WM\_CTLCOLORDLG**](wm-ctlcolordlg.md) message or with the default window color.</span></span>                                                                                                                                                                                                                                                                                                                                 |
| [<span data-ttu-id="89511-241">**WM, \_ Шрифт**</span><span class="sxs-lookup"><span data-stu-id="89511-241">**WM\_GETFONT**</span></span>](/windows/desktop/winmsg/wm-getfont)               | <span data-ttu-id="89511-242">Возвращает маркер для определяемого приложением шрифта диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-242">Returns a handle to the application-defined dialog box font.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="89511-243">**WM \_ инитдиалог**</span><span class="sxs-lookup"><span data-stu-id="89511-243">**WM\_INITDIALOG**</span></span>](wm-initdialog.md)            | <span data-ttu-id="89511-244">Возвращает ноль.</span><span class="sxs-lookup"><span data-stu-id="89511-244">Returns zero.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="89511-245">**WM \_ лбуттондовн**</span><span class="sxs-lookup"><span data-stu-id="89511-245">**WM\_LBUTTONDOWN**</span></span>](/windows/desktop/inputdev/wm-lbuttondown)     | <span data-ttu-id="89511-246">Отправляет сообщение [**\_ шовдропдовн CB**](../controls/cb-showdropdown.md) в поле со списком, имеющее фокус ввода, направляя элемент управления скрывать его раскрывающийся список.</span><span class="sxs-lookup"><span data-stu-id="89511-246">Sends a [**CB\_SHOWDROPDOWN**](../controls/cb-showdropdown.md) message to the combo box having the input focus, directing the control to hide its drop-down list box.</span></span> <span data-ttu-id="89511-247">Процедура вызывает [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) для завершения действия по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="89511-247">The procedure calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) to complete the default action.</span></span>                                                                                                                                                                                                                                      |
| [<span data-ttu-id="89511-248">**WM \_ нкдестрой**</span><span class="sxs-lookup"><span data-stu-id="89511-248">**WM\_NCDESTROY**</span></span>](/windows/desktop/winmsg/wm-ncdestroy)           | <span data-ttu-id="89511-249">Освобождает глобальную память, выделенную для элементов управления для редактирования в диалоговом окне (применяется к диалоговым окнам, в которых указан стиль [**\_ локаледит DS**](dialog-box-styles.md) ), и освобождает все определенные приложением шрифты (применяется в диалоговых окнах, в которых задан стиль [**DS \_ сетфонт**](dialog-box-styles.md) или [**DS \_ шеллфонт**](dialog-box-styles.md) ).</span><span class="sxs-lookup"><span data-stu-id="89511-249">Releases global memory allocated for edit controls in the dialog box (applies to dialog boxes that specify the [**DS\_LOCALEDIT**](dialog-box-styles.md) style) and frees any application-defined font (applies to dialog boxes that specify the [**DS\_SETFONT**](dialog-box-styles.md) or [**DS\_SHELLFONT**](dialog-box-styles.md) style).</span></span> <span data-ttu-id="89511-250">Процедура вызывает функцию [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) для завершения действия по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="89511-250">The procedure calls the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function to complete the default action.</span></span> |
| [<span data-ttu-id="89511-251">**WM \_ нклбуттондовн**</span><span class="sxs-lookup"><span data-stu-id="89511-251">**WM\_NCLBUTTONDOWN**</span></span>](/windows/desktop/inputdev/wm-nclbuttondown) | <span data-ttu-id="89511-252">Отправляет сообщение [**\_ шовдропдовн CB**](../controls/cb-showdropdown.md) в поле со списком, имеющее фокус ввода, направляя элемент управления скрывать его раскрывающийся список.</span><span class="sxs-lookup"><span data-stu-id="89511-252">Sends a [**CB\_SHOWDROPDOWN**](../controls/cb-showdropdown.md) message to the combo box having the input focus, directing the control to hide its drop-down list box.</span></span> <span data-ttu-id="89511-253">Процедура вызывает [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) для завершения действия по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="89511-253">The procedure calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) to complete the default action.</span></span>                                                                                                                                                                                                                                      |
| [<span data-ttu-id="89511-254">**WM \_ некстдлгктл**</span><span class="sxs-lookup"><span data-stu-id="89511-254">**WM\_NEXTDLGCTL**</span></span>](wm-nextdlgctl.md)            | <span data-ttu-id="89511-255">Устанавливает фокус ввода на следующий или предыдущий элемент управления в диалоговом окне, на элемент управления, определенный маркером в параметре *wParam* , или на первый элемент управления в диалоговом окне, который является видимым, не отключен и имеет стиль [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) .</span><span class="sxs-lookup"><span data-stu-id="89511-255">Sets the input focus to the next or previous control in the dialog box, to the control identified by the handle in the *wParam* parameter, or to the first control in the dialog box that is visible, not disabled, and has the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="89511-256">Процедура пропускает это сообщение, если текущее окно с фокусом ввода не является элементом управления.</span><span class="sxs-lookup"><span data-stu-id="89511-256">The procedure ignores this message if the current window with the input focus is not a control.</span></span>                                                                                                                  |
| [<span data-ttu-id="89511-257">**WM \_ SETFOCUS**</span><span class="sxs-lookup"><span data-stu-id="89511-257">**WM\_SETFOCUS**</span></span>](/windows/desktop/inputdev/wm-setfocus)           | <span data-ttu-id="89511-258">Устанавливает фокус ввода на элемент управления, определяемый ранее сохраненным маркером окна управления.</span><span class="sxs-lookup"><span data-stu-id="89511-258">Sets the input focus to the control identified by a previously saved control window handle.</span></span> <span data-ttu-id="89511-259">Если такого обработчика не существует, процедура задает фокус ввода первому элементу управления в шаблоне диалогового окна, который является видимым, не отключенным и имеет стиль [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) .</span><span class="sxs-lookup"><span data-stu-id="89511-259">If no such handle exists, the procedure sets the input focus to the first control in the dialog box template that is visible, not disabled, and has the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="89511-260">Если такой элемент управления не существует, процедура устанавливает фокус ввода на первый элемент управления в шаблоне.</span><span class="sxs-lookup"><span data-stu-id="89511-260">If no such control exists, the procedure sets the input focus to the first control in the template.</span></span>                                                                                          |
| [<span data-ttu-id="89511-261">**WM \_ SHOWWINDOW**</span><span class="sxs-lookup"><span data-stu-id="89511-261">**WM\_SHOWWINDOW**</span></span>](/windows/desktop/winmsg/wm-showwindow)         | <span data-ttu-id="89511-262">Сохраняет маркер элемента управления, имеющего фокус ввода, если диалоговое окно скрыто, а затем вызывает [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) для завершения действия по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="89511-262">Saves a handle to the control having the input focus if the dialog box is being hidden, then calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) to complete the default action.</span></span>                                                                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="89511-263">**WM \_ сискомманд**</span><span class="sxs-lookup"><span data-stu-id="89511-263">**WM\_SYSCOMMAND**</span></span>](/windows/desktop/menurc/wm-syscommand)         | <span data-ttu-id="89511-264">Сохраняет маркер элемента управления, имеющего фокус ввода, если диалоговое окно свернется, а затем вызывает [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) для завершения действия по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="89511-264">Saves a handle to the control having the input focus if the dialog box is being minimized, then calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) to complete the default action.</span></span>                                                                                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="89511-265">**WM \_ вкэйтоитем**</span><span class="sxs-lookup"><span data-stu-id="89511-265">**WM\_VKEYTOITEM**</span></span>](../controls/wm-vkeytoitem.md)         | <span data-ttu-id="89511-266">Возвращает ноль.</span><span class="sxs-lookup"><span data-stu-id="89511-266">Returns zero.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |

<span data-ttu-id="89511-267">Предопределенная процедура окна передает все остальные сообщения в [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) для обработки по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="89511-267">The predefined window procedure passes all other messages to [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) for default processing.</span></span>

## <a name="dialog-box-keyboard-interface"></a><span data-ttu-id="89511-268">Интерфейс клавиатуры диалогового окна</span><span class="sxs-lookup"><span data-stu-id="89511-268">Dialog Box Keyboard Interface</span></span>

<span data-ttu-id="89511-269">Система предоставляет специальный интерфейс клавиатуры для диалоговых окон, который выполняет специальную обработку нескольких ключей.</span><span class="sxs-lookup"><span data-stu-id="89511-269">The system provides a special keyboard interface for dialog boxes that carries out special processing for several keys.</span></span> <span data-ttu-id="89511-270">Интерфейс создает сообщения, соответствующие определенным кнопкам в диалоговом окне, или изменяет фокус ввода с одного элемента управления на другой.</span><span class="sxs-lookup"><span data-stu-id="89511-270">The interface generates messages that correspond to certain buttons in the dialog box or changes the input focus from one control to another.</span></span> <span data-ttu-id="89511-271">Ниже приведены ключи, используемые в этом интерфейсе, и соответствующие им действия.</span><span class="sxs-lookup"><span data-stu-id="89511-271">Following are the keys used in this interface and their respective actions.</span></span>


| <span data-ttu-id="89511-272">Клавиши</span><span class="sxs-lookup"><span data-stu-id="89511-272">Key</span></span>            | <span data-ttu-id="89511-273">Действие</span><span class="sxs-lookup"><span data-stu-id="89511-273">Action</span></span>                                                                                                                                                                    |
|----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="89511-274">ALT +*мнемоника*</span><span class="sxs-lookup"><span data-stu-id="89511-274">ALT+*mnemonic*</span></span> | <span data-ttu-id="89511-275">Перемещает фокус ввода на первый элемент управления (имеющий стиль [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) ) после статического элемента управления, содержащего заданную назначенную клавишу.</span><span class="sxs-lookup"><span data-stu-id="89511-275">Moves the input focus to the first control (having the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style) after the static control containing the specified mnemonic.</span></span>        |
| <span data-ttu-id="89511-276">СБОЙ</span><span class="sxs-lookup"><span data-stu-id="89511-276">DOWN</span></span>           | <span data-ttu-id="89511-277">Перемещает фокус ввода к следующему элементу управления в группе.</span><span class="sxs-lookup"><span data-stu-id="89511-277">Moves the input focus to the next control in the group.</span></span>                                                                                                                   |
| <span data-ttu-id="89511-278">ВВОД</span><span class="sxs-lookup"><span data-stu-id="89511-278">ENTER</span></span>          | <span data-ttu-id="89511-279">Отправляет [**\_ командное сообщение WM**](/windows/desktop/menurc/wm-command) в процедуру диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-279">Sends a [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) message to the dialog box procedure.</span></span> <span data-ttu-id="89511-280">Параметр *wParam* имеет значение идок или идентификатор элемента управления для кнопки отправки по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="89511-280">The *wParam* parameter is set to IDOK or control identifier of the default push button.</span></span> |
| <span data-ttu-id="89511-281">ESC</span><span class="sxs-lookup"><span data-stu-id="89511-281">ESC</span></span>            | <span data-ttu-id="89511-282">Отправляет [**\_ командное сообщение WM**](/windows/desktop/menurc/wm-command) в процедуру диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-282">Sends a [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) message to the dialog box procedure.</span></span> <span data-ttu-id="89511-283">Параметр *wParam* имеет значение идканцел.</span><span class="sxs-lookup"><span data-stu-id="89511-283">The *wParam* parameter is set to IDCANCEL.</span></span>                                              |
| <span data-ttu-id="89511-284">LEFT</span><span class="sxs-lookup"><span data-stu-id="89511-284">LEFT</span></span>           | <span data-ttu-id="89511-285">Перемещает фокус ввода к предыдущему элементу управления в группе.</span><span class="sxs-lookup"><span data-stu-id="89511-285">Moves the input focus to the previous control in the group.</span></span>                                                                                                               |
| <span data-ttu-id="89511-286">*ассемблер*</span><span class="sxs-lookup"><span data-stu-id="89511-286">*mnemonic*</span></span>     | <span data-ttu-id="89511-287">Перемещает фокус ввода на первый элемент управления (имеющий стиль [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) ) после статического элемента управления, содержащего заданную назначенную клавишу.</span><span class="sxs-lookup"><span data-stu-id="89511-287">Moves the input focus to the first control (having the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style) after the static control containing the specified mnemonic.</span></span>        |
| <span data-ttu-id="89511-288">RIGHT</span><span class="sxs-lookup"><span data-stu-id="89511-288">RIGHT</span></span>          | <span data-ttu-id="89511-289">Перемещает фокус ввода к следующему элементу управления в группе.</span><span class="sxs-lookup"><span data-stu-id="89511-289">Moves the input focus to the next control in the group.</span></span>                                                                                                                   |
| <span data-ttu-id="89511-290">SHIFT + TAB</span><span class="sxs-lookup"><span data-stu-id="89511-290">SHIFT+TAB</span></span>      | <span data-ttu-id="89511-291">Перемещает фокус ввода на предыдущий элемент управления, имеющий стиль [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) .</span><span class="sxs-lookup"><span data-stu-id="89511-291">Moves the input focus to the previous control that has the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span>                                                                |
| <span data-ttu-id="89511-292">TAB</span><span class="sxs-lookup"><span data-stu-id="89511-292">TAB</span></span>            | <span data-ttu-id="89511-293">Перемещает фокус ввода на следующий элемент управления, имеющий стиль [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) .</span><span class="sxs-lookup"><span data-stu-id="89511-293">Moves the input focus to the next control that has the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span>                                                                    |
| <span data-ttu-id="89511-294">UP</span><span class="sxs-lookup"><span data-stu-id="89511-294">UP</span></span>             | <span data-ttu-id="89511-295">Перемещает фокус ввода к предыдущему элементу управления в группе.</span><span class="sxs-lookup"><span data-stu-id="89511-295">Moves the input focus to the previous control in the group.</span></span>                                                                                                               |

<span data-ttu-id="89511-296">Система автоматически предоставляет интерфейс клавиатуры для всех модальных диалоговых окон.</span><span class="sxs-lookup"><span data-stu-id="89511-296">The system automatically provides the keyboard interface for all modal dialog boxes.</span></span> <span data-ttu-id="89511-297">Он не предоставляет интерфейс для немодальных диалоговых окон, если только приложение не вызывает функцию [**исдиалогмессаже**](/windows/desktop/api/Winuser/nf-winuser-isdialogmessagea) для фильтрации сообщений в основном цикле обработки сообщений.</span><span class="sxs-lookup"><span data-stu-id="89511-297">It does not provide the interface for modeless dialog boxes unless the application calls the [**IsDialogMessage**](/windows/desktop/api/Winuser/nf-winuser-isdialogmessagea) function to filter messages in its main message loop.</span></span> <span data-ttu-id="89511-298">Это означает, что приложение должно передать сообщение в **исдиалогмессаже** сразу после получения сообщения из очереди сообщений.</span><span class="sxs-lookup"><span data-stu-id="89511-298">This means that the application must pass the message to **IsDialogMessage** immediately after retrieving the message from the message queue.</span></span> <span data-ttu-id="89511-299">Функция обрабатывает сообщения, если это диалоговое окно, и возвращает ненулевое значение, указывающее, что сообщение было обработано и не должно передаваться в функцию [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) или [**DispatchMessage**](/windows/desktop/api/winuser/nf-winuser-dispatchmessage) .</span><span class="sxs-lookup"><span data-stu-id="89511-299">The function processes the messages if it is for the dialog box and returns a nonzero value to indicate that the message has been processed and must not be passed to the [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) or [**DispatchMessage**](/windows/desktop/api/winuser/nf-winuser-dispatchmessage) function.</span></span>

<span data-ttu-id="89511-300">Так как интерфейс клавиатуры диалогового окна использует клавиши направления для перемещения между элементами управления в диалоговом окне, приложение не может использовать эти ключи для прокрутки содержимого любого модального диалогового окна или любого немодального диалогового окна, для которого вызывается [**исдиалогмессаже**](/windows/desktop/api/Winuser/nf-winuser-isdialogmessagea) .</span><span class="sxs-lookup"><span data-stu-id="89511-300">Because the dialog box keyboard interface uses direction keys to move between controls in a dialog box, an application cannot use these keys to scroll the contents of any modal dialog box or any modeless dialog box for which [**IsDialogMessage**](/windows/desktop/api/Winuser/nf-winuser-isdialogmessagea) is called.</span></span> <span data-ttu-id="89511-301">Если в диалоговом окне есть полосы прокрутки, приложение должно предоставить альтернативный интерфейс клавиатуры для полос прокрутки.</span><span class="sxs-lookup"><span data-stu-id="89511-301">When a dialog box has scroll bars, the application must provide an alternate keyboard interface for the scroll bars.</span></span> <span data-ttu-id="89511-302">Обратите внимание, что интерфейс мыши для прокрутки доступен, когда система включает мышь.</span><span class="sxs-lookup"><span data-stu-id="89511-302">Note that the mouse interface for scrolling is available when the system includes a mouse.</span></span>

### <a name="the-ws_tabstop-style"></a><span data-ttu-id="89511-303">Стиль WS \_ TABSTOP</span><span class="sxs-lookup"><span data-stu-id="89511-303">The WS\_TABSTOP Style</span></span>

<span data-ttu-id="89511-304">Стиль [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) определяет элементы управления, в которые пользователь может перемещаться с помощью клавиши TAB или клавиш SHIFT + TAB.</span><span class="sxs-lookup"><span data-stu-id="89511-304">The [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style specifies the controls to which the user can move by pressing the TAB key or SHIFT+TAB keys.</span></span>

<span data-ttu-id="89511-305">Когда пользователь нажимает клавишу TAB или SHIFT + TAB, система сначала определяет, обрабатываются ли эти ключи элементом управления, на котором в данный момент находится фокус ввода.</span><span class="sxs-lookup"><span data-stu-id="89511-305">When the user presses TAB or SHIFT+TAB, the system first determines whether these keys are processed by the control that currently has the input focus.</span></span> <span data-ttu-id="89511-306">Он отправляет элемент управления как сообщение [**WM \_ жетдлгкоде**](wm-getdlgcode.md) , и если элемент управления возвращает длгк \_ ванттаб, система передает ключи элементу управления.</span><span class="sxs-lookup"><span data-stu-id="89511-306">It sends the control a [**WM\_GETDLGCODE**](wm-getdlgcode.md) message, and if the control returns DLGC\_WANTTAB, the system passes the keys to the control.</span></span> <span data-ttu-id="89511-307">В противном случае система использует функцию [**жетнекстдлгтабитем**](/windows/desktop/api/Winuser/nf-winuser-getnextdlgtabitem) для нахождение следующего элемента управления, который является видимым, не отключен и имеет стиль [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) .</span><span class="sxs-lookup"><span data-stu-id="89511-307">Otherwise, the system uses the [**GetNextDlgTabItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlgtabitem) function to locate the next control that is visible, not disabled, and that has the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="89511-308">Поиск начинается с элемента управления, на котором в данный момент находится фокус ввода, и продолжается в том порядке, в котором они были созданы, — то есть в порядке, в котором они определены в шаблоне диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-308">The search starts with the control currently having the input focus and proceeds in the order in which the controls were created—that is, the order in which they are defined in the dialog box template.</span></span> <span data-ttu-id="89511-309">Когда система находит элемент управления, имеющий необходимые характеристики, система перемещает фокус ввода на него.</span><span class="sxs-lookup"><span data-stu-id="89511-309">When the system locates a control having the required characteristics, the system moves the input focus to it.</span></span>

<span data-ttu-id="89511-310">Если поиск следующего элемента управления с стилем [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) встречает окно с стилем WS **\_ ex \_ контролпарент** , система рекурсивно выполняет поиск дочерних элементов окна.</span><span class="sxs-lookup"><span data-stu-id="89511-310">If the search for the next control with the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style encounters a window with the **WS\_EX\_CONTROLPARENT** style, the system recursively searches the window's children.</span></span>

<span data-ttu-id="89511-311">Приложение также может использовать [**жетнекстдлгтабитем**](/windows/desktop/api/Winuser/nf-winuser-getnextdlgtabitem) для нахождение элементов управления, имеющих стиль [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) .</span><span class="sxs-lookup"><span data-stu-id="89511-311">An application can also use [**GetNextDlgTabItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlgtabitem) to locate controls having the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="89511-312">Функция получает маркер окна следующего или предыдущего элемента управления со стилем **WS \_ TABSTOP** без перемещения фокуса ввода.</span><span class="sxs-lookup"><span data-stu-id="89511-312">The function retrieves the window handle of the next or previous control having the **WS\_TABSTOP** style without moving the input focus.</span></span>

### <a name="the-ws_group-style"></a><span data-ttu-id="89511-313">\_Стиль группы WS</span><span class="sxs-lookup"><span data-stu-id="89511-313">The WS\_GROUP Style</span></span>

<span data-ttu-id="89511-314">По умолчанию система перемещает фокус ввода к следующему или предыдущему элементу управления каждый раз, когда пользователь нажимает клавишу направления.</span><span class="sxs-lookup"><span data-stu-id="89511-314">By default, the system moves the input focus to the next or previous control whenever the user presses a direction key.</span></span> <span data-ttu-id="89511-315">Пока текущий элемент управления с фокусом ввода не обрабатывает эти ключи, а следующий или предыдущий элемент управления не является статическим, система по-прежнему перемещает фокус ввода с помощью всех элементов управления в диалоговом окне, так как пользователь по-прежнему нажимает клавиши направления.</span><span class="sxs-lookup"><span data-stu-id="89511-315">As long as the current control with the input focus does not process these keys and the next or previous control is not a static control, the system continues to move the input focus through all controls in the dialog box as the user continues to press the direction keys.</span></span>

<span data-ttu-id="89511-316">Приложение может использовать стиль [**\_ группы WS**](/windows/desktop/winmsg/window-styles) для изменения этого поведения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="89511-316">An application can use the [**WS\_GROUP**](/windows/desktop/winmsg/window-styles) style to modify this default behavior.</span></span> <span data-ttu-id="89511-317">Стиль отмечает начало группы элементов управления.</span><span class="sxs-lookup"><span data-stu-id="89511-317">The style marks the beginning of a group of controls.</span></span> <span data-ttu-id="89511-318">Если элемент управления в группе имеет фокус ввода, когда пользователь начинает вводить клавиши направления, фокус остается в группе.</span><span class="sxs-lookup"><span data-stu-id="89511-318">If a control in the group has the input focus when the user begins pressing direction keys, the focus remains in the group.</span></span> <span data-ttu-id="89511-319">Как правило, первый элемент управления в группе должен иметь стиль **\_ группы WS** , а все остальные элементы управления в группе не должны иметь этого стиля.</span><span class="sxs-lookup"><span data-stu-id="89511-319">In general, the first control in a group must have the **WS\_GROUP** style and all other controls in the group must not have this style.</span></span> <span data-ttu-id="89511-320">Все элементы управления в группе должны быть непрерывными, то есть они должны быть созданы последовательно без промежуточных элементов управления.</span><span class="sxs-lookup"><span data-stu-id="89511-320">All controls in the group must be contiguous—that is, they must have been created consecutively with no intervening controls.</span></span>

<span data-ttu-id="89511-321">Когда пользователь нажимает клавишу направления, система сначала определяет, обрабатывает ли текущий элемент управления фокус ввода клавишами направления.</span><span class="sxs-lookup"><span data-stu-id="89511-321">When the user presses a direction key, the system first determines whether the current control having the input focus processes the direction keys.</span></span> <span data-ttu-id="89511-322">Система отправляет сообщение [**WM \_ жетдлгкоде**](wm-getdlgcode.md) элементу управления, и, если элемент управления возвращает значение **длгк \_ вантарровс** , передает ключ элементу управления.</span><span class="sxs-lookup"><span data-stu-id="89511-322">The system sends a [**WM\_GETDLGCODE**](wm-getdlgcode.md) message to the control and if the control returns the **DLGC\_WANTARROWS** value, passes the key to the control.</span></span> <span data-ttu-id="89511-323">В противном случае система использует функцию [**жетнекстдлгграупитем**](/windows/desktop/api/Winuser/nf-winuser-getnextdlggroupitem) для определения следующего элемента управления в группе.</span><span class="sxs-lookup"><span data-stu-id="89511-323">Otherwise, the system uses the [**GetNextDlgGroupItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlggroupitem) function to determine the next control in the group.</span></span>

<span data-ttu-id="89511-324">[**Жетнекстдлгграупитем**](/windows/desktop/api/Winuser/nf-winuser-getnextdlggroupitem) выполняет поиск элементов управления в порядке (или в обратную последовательность), в котором они были созданы.</span><span class="sxs-lookup"><span data-stu-id="89511-324">[**GetNextDlgGroupItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlggroupitem) searches controls in the order (or reverse order) they were created.</span></span> <span data-ttu-id="89511-325">Если пользователь нажимает клавишу со стрелкой вправо или вниз, **жетнекстдлгграупитем** возвращает следующий элемент управления, если у этого элемента управления нет стиля [**\_ группы WS**](/windows/desktop/winmsg/window-styles) .</span><span class="sxs-lookup"><span data-stu-id="89511-325">If the user presses the RIGHT or DOWN key, **GetNextDlgGroupItem** returns the next control if that control does not have the [**WS\_GROUP**](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="89511-326">В противном случае функция изменяет порядок поиска и возвращает первый элемент управления, имеющий стиль **\_ группы WS** .</span><span class="sxs-lookup"><span data-stu-id="89511-326">Otherwise, the function reverses the order of the search and returns the first control that has the **WS\_GROUP** style.</span></span> <span data-ttu-id="89511-327">Если пользователь нажимает клавишу LEFT или UP, функция возвращает предыдущий элемент управления, если у текущего элемента управления нет стиля **\_ группы WS** .</span><span class="sxs-lookup"><span data-stu-id="89511-327">If the user presses the LEFT or UP key, the function returns the previous control unless the current control already has the **WS\_GROUP** style.</span></span> <span data-ttu-id="89511-328">Если текущий элемент управления имеет этот стиль, функция меняет порядок поиска, находит первый элемент управления, имеющий стиль **\_ группы WS** , и возвращает элемент управления, непосредственно предшествующий найденному элементу управления.</span><span class="sxs-lookup"><span data-stu-id="89511-328">If the current control has this style, the function reverses the order of the search, locates the first control having the **WS\_GROUP** style, and returns the control that immediately precedes the located control.</span></span>

<span data-ttu-id="89511-329">Если поиск следующего элемента управления в группе встречает окно с стилем **WS \_ ex \_ контролпарент** , система рекурсивно выполняет поиск дочерних элементов окна.</span><span class="sxs-lookup"><span data-stu-id="89511-329">If the search for the next control in the group encounters a window with the **WS\_EX\_CONTROLPARENT** style, the system recursively searches the window's children.</span></span>

<span data-ttu-id="89511-330">После того как система получит следующий или предыдущий элемент управления, она отправляет элементу управления сообщение [**WM \_ жетдлгкоде**](wm-getdlgcode.md) для определения типа элемента управления.</span><span class="sxs-lookup"><span data-stu-id="89511-330">After the system has the next or previous control, it sends a [**WM\_GETDLGCODE**](wm-getdlgcode.md) message to the control to determine the control type.</span></span> <span data-ttu-id="89511-331">Затем система перемещает фокус ввода на элемент управления, если он не является статическим элементом управления.</span><span class="sxs-lookup"><span data-stu-id="89511-331">The system then moves the input focus to control if it is not a static control.</span></span> <span data-ttu-id="89511-332">Если элемент управления является автоматическим переключателем, система отправляет сообщение [**BM \_ Click**](../controls/bm-click.md) .</span><span class="sxs-lookup"><span data-stu-id="89511-332">If the control is an automatic radio button, the system sends a [**BM\_CLICK**](../controls/bm-click.md) message to it.</span></span> <span data-ttu-id="89511-333">Приложение также может использовать [**жетнекстдлгграупитем**](/windows/desktop/api/Winuser/nf-winuser-getnextdlggroupitem) для нахождение элементов управления в группе.</span><span class="sxs-lookup"><span data-stu-id="89511-333">An application can also use [**GetNextDlgGroupItem**](/windows/desktop/api/Winuser/nf-winuser-getnextdlggroupitem) to locate controls in a group.</span></span>

<span data-ttu-id="89511-334">Как правило, первый элемент управления в группе объединяет стили [**WS \_**](/windows/desktop/winmsg/window-styles) и [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) , чтобы пользователь мог перемещаться из группы в группу с помощью клавиши TAB.</span><span class="sxs-lookup"><span data-stu-id="89511-334">Generally, the first control in the group combines the [**WS\_GROUP**](/windows/desktop/winmsg/window-styles) and [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) styles so that the user can move from group to group by using the TAB key.</span></span> <span data-ttu-id="89511-335">Если группа содержит переключатели, приложение должно применить стиль **WS \_ TABSTOP** только к первому элементу управления в группе.</span><span class="sxs-lookup"><span data-stu-id="89511-335">If the group contains radio buttons, the application should apply the **WS\_TABSTOP** style only to the first control in the group.</span></span> <span data-ttu-id="89511-336">Система автоматически перемещает стиль при перемещении пользователя между элементами управления в группе.</span><span class="sxs-lookup"><span data-stu-id="89511-336">The system automatically moves the style when the user moves between controls in the group.</span></span> <span data-ttu-id="89511-337">Это гарантирует, что фокус ввода всегда будет находиться в последнем выбранном элементе управления, когда пользователь переместится в группу с помощью клавиши TAB.</span><span class="sxs-lookup"><span data-stu-id="89511-337">This ensures that the input focus will always be on the most recently selected control when the user moves to the group using the TAB key.</span></span>

### <a name="mnemonics"></a><span data-ttu-id="89511-338">Назначенные клавиши</span><span class="sxs-lookup"><span data-stu-id="89511-338">Mnemonics</span></span>

<span data-ttu-id="89511-339">Назначенная клавиша — это выбранная буква или цифра в метке кнопки или в тексте статического элемента управления.</span><span class="sxs-lookup"><span data-stu-id="89511-339">A mnemonic is a selected letter or digit in the label of a button or in the text of a static control.</span></span> <span data-ttu-id="89511-340">Система перемещает фокус ввода на элемент управления, связанный с назначенным символом, каждый раз, когда пользователь либо нажимает клавишу, соответствующую назначенной клавише, либо нажимает этот ключ и сочетание клавиш ALT.</span><span class="sxs-lookup"><span data-stu-id="89511-340">The system moves the input focus to the control associated with the mnemonic whenever the user either presses the key that corresponds to the mnemonic or presses this key and the ALT key in combination.</span></span> <span data-ttu-id="89511-341">Назначенные клавиши дают возможность быстро перейти к указанному элементу управления с помощью клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="89511-341">Mnemonics provide a quick way for the user to move to a specified control by using the keyboard.</span></span>

<span data-ttu-id="89511-342">Приложение создает назначенную клавишу для элемента управления, вставляя амперсанд (&) непосредственно перед выбранной буквой или цифрой в метке или тексте для элемента управления.</span><span class="sxs-lookup"><span data-stu-id="89511-342">An application creates a mnemonic for a control by inserting the ampersand (&) immediately before the selected letter or digit in the label or text for the control.</span></span> <span data-ttu-id="89511-343">В большинстве случаев строка, заканчивающаяся нулевым символом элемента управления в шаблоне диалогового окна, содержит амперсанд.</span><span class="sxs-lookup"><span data-stu-id="89511-343">In most cases, the null-terminated string provided with the control in the dialog box template contains the ampersand.</span></span> <span data-ttu-id="89511-344">Однако приложение может создать назначенный символ в любое время, заменив существующую метку или текст элемента управления с помощью функции [**сетдлгитемтекст**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemtexta) .</span><span class="sxs-lookup"><span data-stu-id="89511-344">However, an application can create a mnemonic at any time by replacing a control's existing label or text by using the [**SetDlgItemText**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemtexta) function.</span></span> <span data-ttu-id="89511-345">Для каждого элемента управления можно указать только один мнемонический символ.</span><span class="sxs-lookup"><span data-stu-id="89511-345">Only one mnemonic can be specified for each control.</span></span> <span data-ttu-id="89511-346">Хотя рекомендуется, нажатия клавиш в диалоговом окне не обязательно должны быть уникальными.</span><span class="sxs-lookup"><span data-stu-id="89511-346">Although it is recommended, mnemonics in a dialog box need not be unique.</span></span>

<span data-ttu-id="89511-347">Когда пользователь нажимает клавишу с буквой или цифрой, система сначала определяет, обрабатывается ли ключ текущим элементом управления, имеющим фокус ввода.</span><span class="sxs-lookup"><span data-stu-id="89511-347">When the user presses a letter or digit key, the system first determines whether the current control having the input focus processes the key.</span></span> <span data-ttu-id="89511-348">Система отправляет в элемент управления сообщение [**WM \_ жетдлгкоде**](wm-getdlgcode.md) , а если элемент управления возвращает значение **длгк \_ ванталлкэйс** или **DLG \_ вантмессаже** , система передает ключ элементу управления.</span><span class="sxs-lookup"><span data-stu-id="89511-348">The system sends a [**WM\_GETDLGCODE**](wm-getdlgcode.md) message to the control, and if the control returns the **DLGC\_WANTALLKEYS** or **DLG\_WANTMESSAGE** value, the system passes the key to the control.</span></span> <span data-ttu-id="89511-349">В противном случае он выполняет поиск элемента управления, мнемоника которого совпадает с указанной буквой или цифрой.</span><span class="sxs-lookup"><span data-stu-id="89511-349">Otherwise, it searches for a control whose mnemonic matches the specified letter or digit.</span></span> <span data-ttu-id="89511-350">Он продолжит поиск, пока не найдет элемент управления или проверит все элементы управления.</span><span class="sxs-lookup"><span data-stu-id="89511-350">It continues to search until it locates a control or has examined all controls.</span></span> <span data-ttu-id="89511-351">Во время поиска он пропускает все статические элементы управления с стилем [**\_ префикса SS**](../controls/static-control-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="89511-351">During the search, it skips any static controls that have the [**SS\_NOPREFIX**](../controls/static-control-styles.md) style.</span></span>

<span data-ttu-id="89511-352">Если поиск элемента управления с совпадающим назначенным клавишей встречает окно с стилем **WS \_ ex \_ контролпарент** , система рекурсивно выполняет поиск дочерних элементов окна.</span><span class="sxs-lookup"><span data-stu-id="89511-352">If the search for a control with a matching mnemonic encounters a window with the **WS\_EX\_CONTROLPARENT** style, the system recursively searches the window's children.</span></span>

<span data-ttu-id="89511-353">Если система находит статический элемент управления и элемент управления не отключен, система перемещает фокус ввода на первый элемент управления после того, как статический элемент управления является видимым, не отключен и имеет стиль [**WS \_ TABSTOP**](/windows/desktop/winmsg/window-styles) .</span><span class="sxs-lookup"><span data-stu-id="89511-353">If the system locates a static control and the control is not disabled, the system moves the input focus to the first control after the static control that is visible, not disabled, and that has the [**WS\_TABSTOP**](/windows/desktop/winmsg/window-styles) style.</span></span> <span data-ttu-id="89511-354">Если система находит другой элемент управления с соответствующим назначенным символом, он перемещает фокус ввода на этот элемент управления.</span><span class="sxs-lookup"><span data-stu-id="89511-354">If the system locates some other control that has a matching mnemonic, it moves the input focus to that control.</span></span> <span data-ttu-id="89511-355">Если элемент управления является кнопкой по умолчанию, система отправляет в диалоговое окно процедуру, [**млрд долл \_ Нажатие**](../controls/bn-clicked.md) на сообщение уведомления.</span><span class="sxs-lookup"><span data-stu-id="89511-355">If the control is a default push button, the system sends a [**BN\_CLICKED**](../controls/bn-clicked.md) notification message to the dialog box procedure.</span></span> <span data-ttu-id="89511-356">Если элемент управления является другим стилем кнопки и в диалоговом окне нет другого элемента управления, имеющего одинаковые назначенные клавиши, система отправляет элементу управления сообщение [**BM \_ Click**](../controls/bm-click.md) .</span><span class="sxs-lookup"><span data-stu-id="89511-356">If the control is another style of button and there is no other control in the dialog box having the same mnemonic, the system sends the [**BM\_CLICK**](../controls/bm-click.md) message to the control.</span></span>

## <a name="dialog-box-settings"></a><span data-ttu-id="89511-357">Параметры диалогового окна</span><span class="sxs-lookup"><span data-stu-id="89511-357">Dialog Box Settings</span></span>

<span data-ttu-id="89511-358">Параметры диалогового окна — это текущие настройки и значения для элементов управления в диалоговом окне.</span><span class="sxs-lookup"><span data-stu-id="89511-358">The dialog box settings are the current selections and values for the controls in the dialog box.</span></span> <span data-ttu-id="89511-359">Процедура диалогового окна отвечает за инициализацию элементов управления этими параметрами при создании диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-359">The dialog box procedure is responsible for initializing the controls to these settings when creating the dialog box.</span></span> <span data-ttu-id="89511-360">Он также отвечает за извлечение текущих параметров из элементов управления перед уничтожением диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-360">It is also responsible for retrieving the current settings from the controls before destroying the dialog box.</span></span> <span data-ttu-id="89511-361">Методы, используемые для инициализации и получения параметров, зависят от типа элемента управления.</span><span class="sxs-lookup"><span data-stu-id="89511-361">The methods used to initialize and retrieve settings depend on the type of control.</span></span>

<span data-ttu-id="89511-362">Дополнительные сведения см. в следующих разделах:</span><span class="sxs-lookup"><span data-stu-id="89511-362">For more information, see the following topics:</span></span>

-   [<span data-ttu-id="89511-363">Переключатели и флажки</span><span class="sxs-lookup"><span data-stu-id="89511-363">Radio Buttons and Check Boxes</span></span>](#radio-buttons-and-check-boxes)
-   [<span data-ttu-id="89511-364">Диалоговое окно "изменить элементы управления"</span><span class="sxs-lookup"><span data-stu-id="89511-364">Dialog Box Edit Controls</span></span>](#dialog-box-edit-controls)
-   [<span data-ttu-id="89511-365">Списки, поля со списком и списки каталогов</span><span class="sxs-lookup"><span data-stu-id="89511-365">List Boxes, Combo Boxes, and Directory Listings</span></span>](#list-boxes-combo-boxes-and-directory-listings)
-   [<span data-ttu-id="89511-366">Сообщения управления диалогового окна</span><span class="sxs-lookup"><span data-stu-id="89511-366">Dialog Box Control Messages</span></span>](#dialog-box-control-messages)

### <a name="radio-buttons-and-check-boxes"></a><span data-ttu-id="89511-367">Переключатели и флажки</span><span class="sxs-lookup"><span data-stu-id="89511-367">Radio Buttons and Check Boxes</span></span>

<span data-ttu-id="89511-368">В диалоговых окнах используются переключатели и флажки, позволяющие пользователю выбирать из списка параметров.</span><span class="sxs-lookup"><span data-stu-id="89511-368">Dialog boxes use radio buttons and check boxes to let the user choose from a list of options.</span></span> <span data-ttu-id="89511-369">Переключатели позволяют пользователю выбирать взаимоисключающие параметры. флажки позволяют пользователю выбрать сочетание параметров.</span><span class="sxs-lookup"><span data-stu-id="89511-369">Radio buttons let the user choose from mutually exclusive options; check boxes let the user pick a combination of options.</span></span>

<span data-ttu-id="89511-370">Процедура диалогового окна может установить начальное состояние флажка с помощью функции [**чеккдлгбуттон**](https://msdn.microsoft.com/library/Cc410649(v=MSDN.10).aspx) , которая устанавливает или снимает флажок.</span><span class="sxs-lookup"><span data-stu-id="89511-370">The dialog box procedure can set the initial state of a check box by using the [**CheckDlgButton**](https://msdn.microsoft.com/library/Cc410649(v=MSDN.10).aspx) function, which sets or clears the check box.</span></span> <span data-ttu-id="89511-371">Для переключателей в группе взаимоисключающих переключателей процедура диалогового окна может использовать функцию [**чеккрадиобуттон**](https://msdn.microsoft.com/library/Cc410654(v=MSDN.10).aspx) для установки соответствующего переключателя и автоматического сброса любого другого переключателя.</span><span class="sxs-lookup"><span data-stu-id="89511-371">For radio buttons in a group of mutually exclusive radio buttons, the dialog box procedure can use the [**CheckRadioButton**](https://msdn.microsoft.com/library/Cc410654(v=MSDN.10).aspx) function to set the appropriate radio button and automatically clear any other radio button.</span></span>

<span data-ttu-id="89511-372">Перед завершением диалогового окна процедура диалогового окна может проверить состояние каждого переключателя и установить флажок с помощью функции [**исдлгбуттончеккед**](https://msdn.microsoft.com/library/Cc364806(v=MSDN.10).aspx) , которая возвращает текущее состояние кнопки.</span><span class="sxs-lookup"><span data-stu-id="89511-372">Before a dialog box terminates, the dialog box procedure can check the state of each radio button and check box by using the [**IsDlgButtonChecked**](https://msdn.microsoft.com/library/Cc364806(v=MSDN.10).aspx) function, which returns the current state of the button.</span></span> <span data-ttu-id="89511-373">Обычно диалоговое окно сохраняет эти сведения для инициализации кнопок при следующем создании диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-373">A dialog box typically saves this information to initialize the buttons the next time it creates the dialog box.</span></span>

### <a name="dialog-box-edit-controls"></a><span data-ttu-id="89511-374">Диалоговое окно "изменить элементы управления"</span><span class="sxs-lookup"><span data-stu-id="89511-374">Dialog Box Edit Controls</span></span>

<span data-ttu-id="89511-375">Многие диалоговые окна имеют элементы управления редактирования, которые позволяют пользователю вводить текст в качестве входных данных.</span><span class="sxs-lookup"><span data-stu-id="89511-375">Many dialog boxes have edit controls that let the user supply text as input.</span></span> <span data-ttu-id="89511-376">Большинство процедур диалоговых окон инициализируют элемент управления "поле ввода" при первом запуске диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-376">Most dialog box procedures initialize an edit control when the dialog box first starts.</span></span> <span data-ttu-id="89511-377">Например, процедура диалогового окна может поместить в элемент управления предложенное имя файла, которое пользователь может выбрать, изменить или заменить.</span><span class="sxs-lookup"><span data-stu-id="89511-377">For example, the dialog box procedure may place a proposed filename in the control that the user can then select, modify, or replace.</span></span> <span data-ttu-id="89511-378">Процедура диалогового окна может задать текст в элементе управления "поле ввода" с помощью функции [**сетдлгитемтекст**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemtexta) , которая копирует текст из указанного буфера в элемент управления "поле ввода".</span><span class="sxs-lookup"><span data-stu-id="89511-378">The dialog box procedure can set the text in an edit control by using the [**SetDlgItemText**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemtexta) function, which copies text from a specified buffer to the edit control.</span></span> <span data-ttu-id="89511-379">Когда элемент управления Edit получает фокус ввода, он автоматически выбирает полный текст для редактирования.</span><span class="sxs-lookup"><span data-stu-id="89511-379">When the edit control receives the input focus, it automatically selects the complete text for editing.</span></span>

<span data-ttu-id="89511-380">Поскольку элементы управления "поле ввода" не возвращают текст в диалоговое окно, процедура диалогового окна должна получить текст перед завершением.</span><span class="sxs-lookup"><span data-stu-id="89511-380">Because edit controls do not automatically return their text to the dialog box, the dialog box procedure must retrieve the text before it terminates.</span></span> <span data-ttu-id="89511-381">Он может получить текст с помощью функции [**жетдлгитемтекст**](/windows/desktop/api/Winuser/nf-winuser-getdlgitemtexta) , которая копирует текст элемента управления "поле ввода" в буфер.</span><span class="sxs-lookup"><span data-stu-id="89511-381">It can retrieve the text by using the [**GetDlgItemText**](/windows/desktop/api/Winuser/nf-winuser-getdlgitemtexta) function, which copies the edit control text to a buffer.</span></span> <span data-ttu-id="89511-382">Процедура диалогового окна обычно сохраняет этот текст для последующей инициализации элемента управления "поле ввода" или передает его в родительское окно для обработки.</span><span class="sxs-lookup"><span data-stu-id="89511-382">The dialog box procedure typically saves this text to initialize the edit control later or passes it on to the parent window for processing.</span></span>

<span data-ttu-id="89511-383">В некоторых диалоговых окнах используются элементы управления редактированием, позволяющие пользователю вводить числа.</span><span class="sxs-lookup"><span data-stu-id="89511-383">Some dialog boxes use edit controls that let the user enter numbers.</span></span> <span data-ttu-id="89511-384">Процедура диалогового окна может получить число из элемента управления "поле ввода" с помощью функции [**жетдлгитеминт**](/windows/desktop/api/Winuser/nf-winuser-getdlgitemint) , которая извлекает текст из элемента управления "поле ввода" и преобразует текст в десятичное значение.</span><span class="sxs-lookup"><span data-stu-id="89511-384">The dialog box procedure can retrieve a number from an edit control by using the [**GetDlgItemInt**](/windows/desktop/api/Winuser/nf-winuser-getdlgitemint) function, which retrieves the text from the edit control and converts the text to a decimal value.</span></span> <span data-ttu-id="89511-385">Пользователь вводит число в десятичных цифрах.</span><span class="sxs-lookup"><span data-stu-id="89511-385">The user types the number in decimal digits.</span></span> <span data-ttu-id="89511-386">Он может быть либо знаком, либо без знака.</span><span class="sxs-lookup"><span data-stu-id="89511-386">It can be either signed or unsigned.</span></span> <span data-ttu-id="89511-387">Процедура диалогового окна может отображать целое число с помощью функции [**сетдлгитеминт**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemint) .</span><span class="sxs-lookup"><span data-stu-id="89511-387">The dialog box procedure can display an integer by using the [**SetDlgItemInt**](/windows/desktop/api/Winuser/nf-winuser-setdlgitemint) function.</span></span> <span data-ttu-id="89511-388">**Сетдлгитеминт** Преобразует целое число со знаком или без знака в строку десятичных цифр.</span><span class="sxs-lookup"><span data-stu-id="89511-388">**SetDlgItemInt** converts a signed or unsigned integer to a string of decimal digits.</span></span>

### <a name="list-boxes-combo-boxes-and-directory-listings"></a><span data-ttu-id="89511-389">Списки, поля со списком и списки каталогов</span><span class="sxs-lookup"><span data-stu-id="89511-389">List Boxes, Combo Boxes, and Directory Listings</span></span>

<span data-ttu-id="89511-390">В некоторых диалоговых окнах отображаются списки имен, из которых пользователь может выбрать одно или несколько имен.</span><span class="sxs-lookup"><span data-stu-id="89511-390">Some dialog boxes display lists of names from which the user can select one or more names.</span></span> <span data-ttu-id="89511-391">Для вывода списка имен файлов, например, в диалоговом окне обычно используется окно со списком и функции [**длгдирлист**](https://msdn.microsoft.com/library/Cc410788(v=MSDN.10).aspx) и [**длгдирселектекс**](https://msdn.microsoft.com/library/Cc410769(v=MSDN.10).aspx) .</span><span class="sxs-lookup"><span data-stu-id="89511-391">To display a list of filenames, for example, a dialog box typically uses a list box and the [**DlgDirList**](https://msdn.microsoft.com/library/Cc410788(v=MSDN.10).aspx) and [**DlgDirSelectEx**](https://msdn.microsoft.com/library/Cc410769(v=MSDN.10).aspx) functions.</span></span> <span data-ttu-id="89511-392">Функция **длгдирлист** автоматически заполняет список именами файлов в текущем каталоге.</span><span class="sxs-lookup"><span data-stu-id="89511-392">The **DlgDirList** function automatically fills a list box with the filenames in the current directory.</span></span> <span data-ttu-id="89511-393">Функция **длгдирселект** извлекает выбранное имя файла из списка.</span><span class="sxs-lookup"><span data-stu-id="89511-393">The **DlgDirSelect** function retrieves the selected filename from the list box.</span></span> <span data-ttu-id="89511-394">Вместе эти две функции предоставляют удобный способ для отображения списка каталогов, чтобы пользователь мог выбрать файл без ввода его имени и расположения.</span><span class="sxs-lookup"><span data-stu-id="89511-394">Together, these two functions provide a convenient way for a dialog box to display a directory listing so the user can select a file without having to type its name and location.</span></span>

<span data-ttu-id="89511-395">Диалоговое окно также может использовать поле со списком для вывода списка имен файлов.</span><span class="sxs-lookup"><span data-stu-id="89511-395">A dialog box can also use a combo box to display a list of filenames.</span></span> <span data-ttu-id="89511-396">Функция [**длгдирлисткомбобокс**](https://msdn.microsoft.com/library/Cc410798(v=MSDN.10).aspx) автоматически заполняет список в поле со списком именами файлов в текущем каталоге.</span><span class="sxs-lookup"><span data-stu-id="89511-396">The [**DlgDirListComboBox**](https://msdn.microsoft.com/library/Cc410798(v=MSDN.10).aspx) function automatically fills a list box portion of the combo box with the filenames in the current directory.</span></span> <span data-ttu-id="89511-397">Функция [**длгдирселекткомбобоксекс**](https://msdn.microsoft.com/library/Cc410768(v=MSDN.10).aspx) извлекает выбранное имя файла из списка.</span><span class="sxs-lookup"><span data-stu-id="89511-397">The [**DlgDirSelectComboBoxEx**](https://msdn.microsoft.com/library/Cc410768(v=MSDN.10).aspx) function retrieves a selected filename from the list box portion.</span></span>

### <a name="dialog-box-control-messages"></a><span data-ttu-id="89511-398">Сообщения управления диалогового окна</span><span class="sxs-lookup"><span data-stu-id="89511-398">Dialog Box Control Messages</span></span>

<span data-ttu-id="89511-399">Многие элементы управления распознают стандартные сообщения, которые при получении элементами управления приводят к тому, что они выполняют некоторые действия.</span><span class="sxs-lookup"><span data-stu-id="89511-399">Many controls recognize predefined messages that, when received by controls, cause them to carry out some action.</span></span> <span data-ttu-id="89511-400">Например, сообщение [**BM \_ сетчекк**](../controls/bm-setcheck.md) устанавливает флажок в окошке, а сообщение [**EM \_ жетсел**](../controls/em-getsel.md) извлекает часть текста элемента управления, которая в данный момент выбрана.</span><span class="sxs-lookup"><span data-stu-id="89511-400">For example, the [**BM\_SETCHECK**](../controls/bm-setcheck.md) message sets the check in a check box and the [**EM\_GETSEL**](../controls/em-getsel.md) message retrieves the portion of the control's text that is currently selected.</span></span> <span data-ttu-id="89511-401">Управляющие сообщения предоставляют процедуре диалогового окна больший и гибкий доступ к элементам управления, чем стандартные функции, поэтому они часто используются, когда диалоговое окно требует сложных взаимодействий с пользователем.</span><span class="sxs-lookup"><span data-stu-id="89511-401">The control messages give a dialog procedure greater and more flexible access to the controls than the standard functions, so they are often used when the dialog box requires complex interactions with the user.</span></span>

<span data-ttu-id="89511-402">Процедура диалогового окна может отправить сообщение в элемент управления, предоставив идентификатор элемента управления и используя функцию [**сенддлгитеммессаже**](/windows/desktop/api/Winuser/nf-winuser-senddlgitemmessagea) , которая идентична функции [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) , за исключением того, что она использует идентификатор элемента управления вместо обработчика окна для идентификации элемента управления, получающего сообщение.</span><span class="sxs-lookup"><span data-stu-id="89511-402">A dialog box procedure can send a message to a control by supplying the control identifier and using the [**SendDlgItemMessage**](/windows/desktop/api/Winuser/nf-winuser-senddlgitemmessagea) function, which is identical to the [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) function, except that it uses a control identifier instead of a window handle to identify the control that is to receive the message.</span></span> <span data-ttu-id="89511-403">Для указанного сообщения может потребоваться, чтобы процедура диалогового окна отправляла параметры с сообщением, а сообщение может иметь соответствующие возвращаемые значения.</span><span class="sxs-lookup"><span data-stu-id="89511-403">A specified message may require that the dialog procedure send parameters with the message, and the message may have corresponding return values.</span></span> <span data-ttu-id="89511-404">Операция и требования каждого управляющего сообщения зависят от назначения сообщения и элемента управления, который его обрабатывает.</span><span class="sxs-lookup"><span data-stu-id="89511-404">The operation and requirements of each control message depends on the purpose of the message and the control that processes it.</span></span>

<span data-ttu-id="89511-405">Дополнительные сведения об управляющих сообщениях см. в разделе [элементы управления Windows](../controls/window-controls.md).</span><span class="sxs-lookup"><span data-stu-id="89511-405">For more information about the control messages, see [Windows Controls](../controls/window-controls.md).</span></span>

## <a name="custom-dialog-boxes"></a><span data-ttu-id="89511-406">Пользовательские диалоговые окна</span><span class="sxs-lookup"><span data-stu-id="89511-406">Custom Dialog Boxes</span></span>

<span data-ttu-id="89511-407">Приложение может создавать пользовательские диалоговые окна с помощью определяемого приложением класса окна для диалоговых окон вместо использования стандартного класса диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-407">An application can create custom dialog boxes by using an application-defined window class for the dialog boxes instead of using the predefined dialog box class.</span></span> <span data-ttu-id="89511-408">Приложения обычно используют этот метод, когда диалоговое окно является основным окном, но оно также полезно для создания модальных и немодальных диалоговых окон для приложений, имеющих стандартные перекрывающиеся окна.</span><span class="sxs-lookup"><span data-stu-id="89511-408">Applications typically use this method when a dialog box is their main window, but it is also useful for creating modal and modeless dialog boxes for applications that have standard overlapping windows.</span></span>

<span data-ttu-id="89511-409">Определяемый приложением класс позволяет приложению определить процедуру окна для диалогового окна и обработать сообщения перед их отправкой в процедуру диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-409">The application-defined window class allows the application to define a window procedure for the dialog box and process messages before sending them to the dialog box procedure.</span></span> <span data-ttu-id="89511-410">Он также позволяет приложению определить значок класса, кисть фона класса и меню класса для этого диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-410">It also lets the application define a class icon, a class background brush, and a class menu for the dialog box.</span></span> <span data-ttu-id="89511-411">Приложение должно зарегистрировать класс окна перед попыткой создания диалогового окна и предоставить шаблон диалогового окна с помощью значения Atom или имени класса окна.</span><span class="sxs-lookup"><span data-stu-id="89511-411">The application must register the window class before attempting to create a dialog box and must provide the dialog box template with the atom value or name of the window class.</span></span>

<span data-ttu-id="89511-412">Многие приложения создают новый класс диалогового окна, сначала получая сведения о классе для предопределенного класса диалогового окна и передавая его в функцию [**жетклассинфо**](/windows/desktop/api/winuser/nf-winuser-getclassinfoa) , которая заполняет структуру [**вндкласс**](/windows/win32/api/winuser/ns-winuser-wndclassa) данными.</span><span class="sxs-lookup"><span data-stu-id="89511-412">Many applications create a new dialog box class by first retrieving the class information for the predefined dialog box class, and passing it to the [**GetClassInfo**](/windows/desktop/api/winuser/nf-winuser-getclassinfoa) function, which fills a [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure with the information.</span></span> <span data-ttu-id="89511-413">Приложение изменяет отдельные члены структуры, такие как имя класса, кисть и значок, затем регистрирует новый класс с помощью функции [**registerClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) .</span><span class="sxs-lookup"><span data-stu-id="89511-413">The application modifies individual members of the structure, such as the class name, brush, and icon, then registers the new class by using the [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) function.</span></span> <span data-ttu-id="89511-414">Если приложение заполняет структуру **вндкласс** самостоятельно, оно должно установить для элемента **кбвндекстра** значение **длгвиндовекстра**, которое представляет собой количество дополнительных байтов, необходимых системе для каждого диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-414">If an application fills the **WNDCLASS** structure on its own, it must set the **cbWndExtra** member to the **DLGWINDOWEXTRA**, which is the number of extra bytes the system requires for each dialog box.</span></span> <span data-ttu-id="89511-415">Если приложение также использует дополнительные байты для каждого диалогового окна, они должны превышать дополнительные байты, необходимые системе.</span><span class="sxs-lookup"><span data-stu-id="89511-415">If an application also uses extra bytes for each dialog box, they must be beyond the extra bytes required by the system.</span></span>

<span data-ttu-id="89511-416">Процедура окна для пользовательского диалогового окна имеет те же параметры и требования, что и любая другая процедура окна.</span><span class="sxs-lookup"><span data-stu-id="89511-416">The window procedure for the custom dialog box has the same parameters and requirements as any other window procedure.</span></span> <span data-ttu-id="89511-417">В отличие от других оконных процедур, процедура окна для этого диалогового окна должна вызывать функцию [**дефдлгпрок**](/windows/desktop/api/Winuser/nf-winuser-defdlgprocw) вместо функции [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) для любых сообщений, которые она не обрабатывает.</span><span class="sxs-lookup"><span data-stu-id="89511-417">Unlike other window procedures, however, the window procedure for this dialog box should call the [**DefDlgProc**](/windows/desktop/api/Winuser/nf-winuser-defdlgprocw) function instead of the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function for any messages it does not process.</span></span> <span data-ttu-id="89511-418">**Дефдлгпрок** выполняет ту же обработку сообщений по умолчанию, что и процедура окна для предопределенного диалогового окна, в том числе вызов процедуры диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-418">**DefDlgProc** carries out the same default message processing as the window procedure for the predefined dialog box, which includes calling the dialog box procedure.</span></span>

<span data-ttu-id="89511-419">Приложение может также создавать пользовательские диалоговые окна, подклассировать процедуру окна предопределенного диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="89511-419">An application can also create custom dialog boxes by subclassing the window procedure of the predefined dialog box.</span></span> <span data-ttu-id="89511-420">Функция [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) позволяет приложению указать процедуру окна для указанного окна.</span><span class="sxs-lookup"><span data-stu-id="89511-420">The [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) function lets an application specify the window procedure for a specified window.</span></span> <span data-ttu-id="89511-421">Приложение также может попытаться создать подкласс с помощью функции [**сеткласслонг**](/windows/desktop/api/winuser/nf-winuser-setclasslonga) , но это повлияет на все диалоговые окна в системе, а не только на те, которые принадлежат приложению.</span><span class="sxs-lookup"><span data-stu-id="89511-421">The application may also attempt to subclass by using the [**SetClassLong**](/windows/desktop/api/winuser/nf-winuser-setclasslonga) function, but doing so affects all dialog boxes in the system, not just those belonging to the application.</span></span>

<span data-ttu-id="89511-422">Приложения, которые создают настраиваемые диалоговые окна, иногда предоставляют альтернативный интерфейс клавиатуры для диалоговых окон.</span><span class="sxs-lookup"><span data-stu-id="89511-422">Applications that create custom dialog boxes sometimes provide an alternate keyboard interface for the dialog boxes.</span></span> <span data-ttu-id="89511-423">Для немодальных диалоговых окон это может означать, что приложение не вызывает функцию [**исдиалогмессаже**](/windows/desktop/api/Winuser/nf-winuser-isdialogmessagea) и обрабатывает все вводы с клавиатуры в пользовательской процедуре окна.</span><span class="sxs-lookup"><span data-stu-id="89511-423">For modeless dialog boxes, this may mean the application does not call the [**IsDialogMessage**](/windows/desktop/api/Winuser/nf-winuser-isdialogmessagea) function and instead processes all keyboard input in the custom window procedure.</span></span> <span data-ttu-id="89511-424">В таких случаях приложение может использовать сообщение [**WM \_ некстдлгктл**](wm-nextdlgctl.md) для сворачивания кода, необходимого для перемещения фокуса ввода с одного элемента управления на другой.</span><span class="sxs-lookup"><span data-stu-id="89511-424">In such cases, the application can use the [**WM\_NEXTDLGCTL**](wm-nextdlgctl.md) message to minimize the code needed to move the input focus from one control to another.</span></span> <span data-ttu-id="89511-425">Это сообщение, передаваемое в [**дефдлгпрок**](/windows/desktop/api/Winuser/nf-winuser-defdlgprocw), перемещает фокус ввода на указанный элемент управления и обновляет внешний вид элементов управления, таких как перемещение границы кнопки по умолчанию или установка автоматических переключателей.</span><span class="sxs-lookup"><span data-stu-id="89511-425">This message, when passed to [**DefDlgProc**](/windows/desktop/api/Winuser/nf-winuser-defdlgprocw), moves the input focus to a specified control and updates the appearance of the controls, such as moving the default push button border or setting an automatic radio button.</span></span>
