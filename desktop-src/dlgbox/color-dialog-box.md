---
title: Диалоговое окно "Цвет"
description: Отображает модальное диалоговое окно, позволяющее пользователю выбрать конкретное значение цвета.
ms.assetid: 248586b5-5068-4021-8407-56eb79243789
keywords:
- ввод пользователя, Библиотека общих диалоговых окон
- запись вводимых пользователем данных, Библиотека общих диалоговых окон
- Библиотека общих диалоговых окон
- Общие диалоговые окна
- Диалоговое окно "Цвет"
- диалоговое окно «частичный цвет»
- диалоговое окно «полный цвет»
- диалоговое окно «Настройка цвета»
- Цветовая модель RGB
- Цветовая модель HSL
- оттенок — яркость насыщенности (HSL)
- HSL (яркость насыщенности оттенок)
- RGB (красный зеленый цвет)
- красный зеленый цвет (RGB)
- обработчики, диалоговое окно "цвет"
- стандартные диалоговые окна
- диалоговые окна, цвет
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4bb90150f49ea7bed4edac53af40ba89e0459946
ms.sourcegitcommit: 56f8e4d5119e5018363fa2dc3472cdff203c6913
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/19/2020
ms.locfileid: "104571497"
---
# <a name="color-dialog-box"></a><span data-ttu-id="fc8ba-120">Диалоговое окно "Цвет"</span><span class="sxs-lookup"><span data-stu-id="fc8ba-120">Color Dialog Box</span></span>

<span data-ttu-id="fc8ba-121">Отображает модальное диалоговое окно, позволяющее пользователю выбрать конкретное значение цвета.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-121">Displays a modal dialog box that allows the user to choose a specific color value.</span></span> <span data-ttu-id="fc8ba-122">Пользователь может выбрать цвет из набора базовых или пользовательских цветовых палитр.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-122">The user can choose a color from either a set of basic or custom color palettes.</span></span> <span data-ttu-id="fc8ba-123">Кроме того, пользователь может создать значение цвета, изменив значения цвета RGB или тона, насыщенности, яркости (HSL) пользовательского интерфейса диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-123">Alternatively, the user can generate a color value by modifying the RGB or hue, saturation, luminosity (HSL) color values of the dialog box user interface.</span></span> <span data-ttu-id="fc8ba-124">Диалоговое окно **Цвет** ВОЗВРАЩАЕТ значение RGB цвета, выбранного пользователем.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-124">The **Color** dialog box returns the RGB value of the color selected by the user.</span></span>

<span data-ttu-id="fc8ba-125">Создание и отображение диалогового окна **цвета** осуществляется путем инициализации структуры [**чусеколор**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) и передачи структуры в функцию [**чусеколор**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="fc8ba-125">You create and display a **Color** dialog box by initializing a [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure and passing the structure to the [**ChooseColor**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) function.</span></span> <span data-ttu-id="fc8ba-126">Устанавливая различные значения параметров для структуры **чусеколор** , можно повлиять на отображение диалогового окна «цвет».</span><span class="sxs-lookup"><span data-stu-id="fc8ba-126">By setting different parameter values for the **CHOOSECOLOR** structure, you can affect how the Color dialog box appears.</span></span> <span data-ttu-id="fc8ba-127">Например, можно отобразить полную или частичную версию пользовательского интерфейса диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-127">For example, you can display either a full or partial user interface version of the dialog box.</span></span> <span data-ttu-id="fc8ba-128">На следующем рисунке показана полная версия пользовательского интерфейса диалогового окна " **Цвет** ".</span><span class="sxs-lookup"><span data-stu-id="fc8ba-128">The following illustration shows the full user interface version of the **Color** dialog box.</span></span>

![Цвет - диалоговое окно](images/colordialogboxxp.png)

<span data-ttu-id="fc8ba-130">Если пользователь нажмет кнопку **ОК** , [**Чусеколор**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) возвращает **значение true**.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-130">If the user clicks the **OK** button, [**ChooseColor**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) returns **TRUE**.</span></span> <span data-ttu-id="fc8ba-131">Элемент **ргбресулт** структуры [**чусеколор**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) содержит значение цвета RGB цвета, выбранного пользователем.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-131">The **rgbResult** member of the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure contains the RGB color value of the color selected by the user.</span></span> <span data-ttu-id="fc8ba-132">Значение цвета RGB определяет интенситиес для отдельных красного, зеленого и синего цветов, составляющих выбранный цвет.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-132">The RGB color value specifies the intensities of the individual red, green, and blue colors that make up the selected color.</span></span> <span data-ttu-id="fc8ba-133">Отдельные значения находятся в диапазоне от 0 до 255.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-133">The individual values range from 0 through 255.</span></span> <span data-ttu-id="fc8ba-134">Используйте макросы [**rvalue**](/windows/desktop/api/wingdi/nf-wingdi-getrvalue), [**жетгвалуе**](/windows/desktop/api/wingdi/nf-wingdi-getgvalue)и [**жетбвалуе**](/windows/desktop/api/wingdi/nf-wingdi-getbvalue) для извлечения отдельных цветов из значения цвета RGB.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-134">Use the [**GetRValue**](/windows/desktop/api/wingdi/nf-wingdi-getrvalue), [**GetGValue**](/windows/desktop/api/wingdi/nf-wingdi-getgvalue), and [**GetBValue**](/windows/desktop/api/wingdi/nf-wingdi-getbvalue) macros to extract individual colors from an RGB color value.</span></span>

<span data-ttu-id="fc8ba-135">Если пользователь отменяет диалоговое окно « **Цвет** » или возникает ошибка, [**чусеколор**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) возвращает **значение «ложь** », а элемент **ргбресулт** не определен.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-135">If the user cancels the **Color** dialog box or an error occurs, [**ChooseColor**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) returns **FALSE** and the **rgbResult** member is not defined.</span></span> <span data-ttu-id="fc8ba-136">Чтобы определить причину ошибки, вызовите функцию [**коммдлжекстендедеррор**](/windows/desktop/api/Commdlg/nf-commdlg-commdlgextendederror) , чтобы получить расширенное значение ошибки.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-136">To determine the cause of the error, call the [**CommDlgExtendedError**](/windows/desktop/api/Commdlg/nf-commdlg-commdlgextendederror) function to retrieve the extended error value.</span></span>

<span data-ttu-id="fc8ba-137">В этом разделе рассматриваются следующие темы.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-137">The following subjects are covered in this section</span></span>

-   [<span data-ttu-id="fc8ba-138">Диалоговые окна полного и частичного цвета</span><span class="sxs-lookup"><span data-stu-id="fc8ba-138">Full and Partial Color Dialog Boxes</span></span>](#full-and-partial-color-dialog-boxes)
-   [<span data-ttu-id="fc8ba-139">Настройка диалогового окна «цвет»</span><span class="sxs-lookup"><span data-stu-id="fc8ba-139">Customizing the Color Dialog Box</span></span>](#customizing-the-color-dialog-box)
    -   [<span data-ttu-id="fc8ba-140">Предоставление пользовательского шаблона для диалогового окна «цвет»</span><span class="sxs-lookup"><span data-stu-id="fc8ba-140">To provide a custom template for the Color dialog box</span></span>](#to-provide-a-custom-template-for-the-color-dialog-box)
    -   [<span data-ttu-id="fc8ba-141">Включение процедуры-обработчика для диалогового окна «цвет»</span><span class="sxs-lookup"><span data-stu-id="fc8ba-141">To enable a hook procedure for the Color dialog box</span></span>](#to-enable-a-hook-procedure-for-the-color-dialog-box)
-   [<span data-ttu-id="fc8ba-142">Цветовые модели, используемые в диалоговом окне «цвет»</span><span class="sxs-lookup"><span data-stu-id="fc8ba-142">Color Models Used by the Color Dialog Box</span></span>](#color-models-used-by-the-color-dialog-box)
    -   [<span data-ttu-id="fc8ba-143">Цветовая модель RGB</span><span class="sxs-lookup"><span data-stu-id="fc8ba-143">RGB Color Model</span></span>](#rgb-color-model)
    -   [<span data-ttu-id="fc8ba-144">Цветовая модель HSL</span><span class="sxs-lookup"><span data-stu-id="fc8ba-144">HSL Color Model</span></span>](#hsl-color-model)
    -   [<span data-ttu-id="fc8ba-145">Преобразование значений HSL в значения RGB</span><span class="sxs-lookup"><span data-stu-id="fc8ba-145">Converting HSL Values to RGB Values</span></span>](#converting-hsl-values-to-rgb-values)

## <a name="full-and-partial-color-dialog-boxes"></a><span data-ttu-id="fc8ba-146">Диалоговые окна полного и частичного цвета</span><span class="sxs-lookup"><span data-stu-id="fc8ba-146">Full and Partial Color Dialog Boxes</span></span>

<span data-ttu-id="fc8ba-147">Диалоговое окно «цвет» имеет полную версию и частичную версию пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-147">The Color dialog box has a full version and a partial version of the user interface.</span></span> <span data-ttu-id="fc8ba-148">Полная версия включает основные элементы управления и содержит дополнительные элементы управления, позволяющие пользователю создавать собственные цвета.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-148">The full version includes the basic controls and has additional controls that allow the user to create custom colors.</span></span> <span data-ttu-id="fc8ba-149">Частичная версия содержит элементы управления, отображающие базовые и пользовательские цветовые палитры, из которых пользователь может выбрать значение цвета.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-149">The partial version has controls that display the basic and custom color palettes from which the user can select a color value.</span></span>

<span data-ttu-id="fc8ba-150">Частичная версия диалогового окна Цвет включает кнопку **определить пользовательские цвета** .</span><span class="sxs-lookup"><span data-stu-id="fc8ba-150">The partial version of the Color dialog box includes a **Define Custom Colors** button.</span></span> <span data-ttu-id="fc8ba-151">Пользователь может нажать эту кнопку, чтобы отобразить полную версию.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-151">The user can click this button to display the full version.</span></span> <span data-ttu-id="fc8ba-152">Можно направить диалоговое окно цвет, чтобы всегда отображалась полная версия, установив флаг **CC \_ фуллопен** в элементе **flags** структуры [**чусеколор**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) .</span><span class="sxs-lookup"><span data-stu-id="fc8ba-152">You can direct the Color dialog box to always display the full version by setting the **CC\_FULLOPEN** flag in the **Flags** member of the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure.</span></span> <span data-ttu-id="fc8ba-153">Чтобы запретить пользователю создавать пользовательские цвета, можно установить флаг **CC \_ превентфуллопен** , чтобы отключить кнопку **определить пользовательские цвета** .</span><span class="sxs-lookup"><span data-stu-id="fc8ba-153">To prevent the user from creating custom colors, you can set the **CC\_PREVENTFULLOPEN** flag to disable the **Define Custom Colors** button.</span></span>

<span data-ttu-id="fc8ba-154">Основные цвета представляют собой выбор цветов, доступных на указанном устройстве.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-154">The basic colors represent a selection of the colors available on the specified device.</span></span> <span data-ttu-id="fc8ba-155">Фактическое число отображаемых цветов определяется драйвером экрана.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-155">The actual number of colors displayed is determined by the display driver.</span></span> <span data-ttu-id="fc8ba-156">Например, драйвер VGA отображает 48 цветов, а монохромный драйвер экрана отображает только 16.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-156">For example, a VGA driver displays 48 colors, and a monochrome display driver displays only 16.</span></span>

<span data-ttu-id="fc8ba-157">Пользовательские цвета задаются или создаются пользователем.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-157">The custom colors are those that you specify or that the user creates.</span></span> <span data-ttu-id="fc8ba-158">При создании диалогового окна «цвет» необходимо использовать элемент **лпкустколорс** структуры [**чусеколор**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) для указания начальных значений для 16 пользовательских цветов.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-158">When you create a Color dialog box, you must use the **lpCustColors** member of the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure to specify the initial values for the 16 custom colors.</span></span> <span data-ttu-id="fc8ba-159">Если открыта полная версия диалогового окна цвет, пользователь может создать пользовательский цвет одним из следующих способов:</span><span class="sxs-lookup"><span data-stu-id="fc8ba-159">If the full version of the Color dialog box is open, the user can create a custom color by one the following methods:</span></span>

-   <span data-ttu-id="fc8ba-160">Перемещение курсора в элементе управления "спектр цветов" и элементе управления "яркость слайда"</span><span class="sxs-lookup"><span data-stu-id="fc8ba-160">Moving the cursor in the color spectrum control and the luminosity slide control</span></span>
-   <span data-ttu-id="fc8ba-161">Ввод значений RGB в элементы управления " **красный**", " **зеленый**" и " **синий** "</span><span class="sxs-lookup"><span data-stu-id="fc8ba-161">Typing RGB values in the **Red**, **Green**, and **Blue** edit controls</span></span>
-   <span data-ttu-id="fc8ba-162">Ввод значений HSL в элементы управления " **оттенок**", " **Кот**" и " **яркость** "</span><span class="sxs-lookup"><span data-stu-id="fc8ba-162">Typing HSL values in the **Hue**, **Sat**, and **Lum** edit controls</span></span>

<span data-ttu-id="fc8ba-163">Чтобы добавить новый пользовательский цвет к отображению пользовательских цветов, пользователь может нажать кнопку **Добавить в пользовательские цвета** .</span><span class="sxs-lookup"><span data-stu-id="fc8ba-163">To add a new custom color to the custom colors display, the user can click the **Add to Custom Colors** button.</span></span> <span data-ttu-id="fc8ba-164">Это также приводит к тому, что диалоговое окно копирует значение RGB нового цвета в соответствующий элемент массива, на который указывает элемент **лпкустколорс** .</span><span class="sxs-lookup"><span data-stu-id="fc8ba-164">This also causes the dialog box to copy the RGB value of the new color to the corresponding element in the array pointed to by the **lpCustColors** member.</span></span> <span data-ttu-id="fc8ba-165">Чтобы сохранить новые пользовательские цвета между вызовами [**чусеколор**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)), необходимо выделить статическую память для массива.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-165">To preserve new custom colors between calls to [**ChooseColor**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)), you should allocate static memory for the array.</span></span> <span data-ttu-id="fc8ba-166">Дополнительные сведения о цветовых моделях RGB и HSL см. [в разделе цветовые модели, используемые в диалоговом окне "цвет"](#color-models-used-by-the-color-dialog-box).</span><span class="sxs-lookup"><span data-stu-id="fc8ba-166">For more information about the RGB and HSL color models, see [Color Models Used by the Color Dialog Box](#color-models-used-by-the-color-dialog-box).</span></span>

## <a name="customizing-the-color-dialog-box"></a><span data-ttu-id="fc8ba-167">Настройка диалогового окна «цвет»</span><span class="sxs-lookup"><span data-stu-id="fc8ba-167">Customizing the Color Dialog Box</span></span>

<span data-ttu-id="fc8ba-168">Чтобы настроить диалоговое окно цвета, можно использовать любой из следующих методов.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-168">To customize a Color dialog box, you can use any of the following methods:</span></span>

-   <span data-ttu-id="fc8ba-169">Укажите значения в структуре [**чусеколор**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) при создании диалогового окна</span><span class="sxs-lookup"><span data-stu-id="fc8ba-169">Specify values in the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure when you create the dialog box</span></span>
-   <span data-ttu-id="fc8ba-170">Предоставление пользовательского шаблона</span><span class="sxs-lookup"><span data-stu-id="fc8ba-170">Provide a custom template</span></span>
-   <span data-ttu-id="fc8ba-171">Предоставление процедуры-обработчика</span><span class="sxs-lookup"><span data-stu-id="fc8ba-171">Provide a hook procedure</span></span>

<span data-ttu-id="fc8ba-172">Внешний вид и поведение диалогового окна «цвет» можно изменить, установив флаги в элементе **flags** структуры [**чусеколор**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) .</span><span class="sxs-lookup"><span data-stu-id="fc8ba-172">You can modify the appearance and behavior of the Color dialog box by setting flags in the **Flags** member of the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure.</span></span> <span data-ttu-id="fc8ba-173">Например, можно установить флаг **CC \_ солидколор** , чтобы задать для диалогового окна Отображение только сплошных цветов.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-173">For example, you can set the **CC\_SOLIDCOLOR** flag to direct the dialog box to display only solid colors.</span></span> <span data-ttu-id="fc8ba-174">Чтобы в диалоговом окне изначально был выбран цвет, отличный от черного, установите флаг **CC \_ ргбинит** и укажите цвет в элементе **ргбресулт** .</span><span class="sxs-lookup"><span data-stu-id="fc8ba-174">To cause the dialog box to initially select a color other than black, set the **CC\_RGBINIT** flag and specify a color in the **rgbResult** member.</span></span>

<span data-ttu-id="fc8ba-175">Можно указать пользовательский шаблон для диалогового окна цвет, например, если требуется включить дополнительные элементы управления, которые являются уникальными для приложения.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-175">You can provide a custom template for the Color dialog box, for example, if you want to include additional controls that are unique to your application.</span></span> <span data-ttu-id="fc8ba-176">Функция [**чусеколор**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) использует пользовательский шаблон вместо шаблона по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-176">The [**ChooseColor**](/previous-versions/windows/desktop/legacy/ms646912(v=vs.85)) function uses your custom template in place of the default template.</span></span>

### <a name="to-provide-a-custom-template-for-the-color-dialog-box"></a><span data-ttu-id="fc8ba-177">Предоставление пользовательского шаблона для диалогового окна «цвет»</span><span class="sxs-lookup"><span data-stu-id="fc8ba-177">To provide a custom template for the Color dialog box</span></span>

1.  <span data-ttu-id="fc8ba-178">Создайте пользовательский шаблон, изменив шаблон по умолчанию, указанный в файле Color. DLG.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-178">Create the custom template by modifying the default template specified in the Color.dlg file.</span></span> <span data-ttu-id="fc8ba-179">Идентификаторы элементов управления, используемые в шаблоне диалогового окна цвета по умолчанию, определяются в файле Color. DLG.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-179">The control identifiers used in the default Color dialog template are defined in the Color.dlg file.</span></span>
2.  <span data-ttu-id="fc8ba-180">Используйте структуру [**чусеколор**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) , чтобы включить шаблон следующим образом:</span><span class="sxs-lookup"><span data-stu-id="fc8ba-180">Use the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure to enable the template as follows:</span></span>
    -   <span data-ttu-id="fc8ba-181">Если пользовательский шаблон является ресурсом в приложении или библиотеке динамической компоновки, установите флаг **CC \_ енаблетемплате** в элементе **flags** .</span><span class="sxs-lookup"><span data-stu-id="fc8ba-181">If your custom template is a resource in an application or dynamic link library, set the **CC\_ENABLETEMPLATE** flag in the **Flags** member.</span></span> <span data-ttu-id="fc8ba-182">Используйте элементы **HINSTANCE** и **лптемплатенаме** структуры для задания имени модуля и ресурса.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-182">Use the **hInstance** and **lpTemplateName** members of the structure to identify the module and resource name.</span></span>

        <span data-ttu-id="fc8ba-183">-Или-</span><span class="sxs-lookup"><span data-stu-id="fc8ba-183">-Or-</span></span>

    -   <span data-ttu-id="fc8ba-184">Если пользовательский шаблон уже находится в памяти, установите флаг **CC \_ енаблетемплатехандле** .</span><span class="sxs-lookup"><span data-stu-id="fc8ba-184">If your custom template is already in memory, set the **CC\_ENABLETEMPLATEHANDLE** flag.</span></span> <span data-ttu-id="fc8ba-185">Используйте элемент **HINSTANCE** для задания объекта памяти, содержащего шаблон.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-185">Use the **hInstance** member to identify the memory object that contains the template.</span></span>

<span data-ttu-id="fc8ba-186">Для диалогового окна «цвет» можно предоставить процедуру обработчика [**кчукпрок**](/windows/win32/api/commdlg/nc-commdlg-lpcchookproc) .</span><span class="sxs-lookup"><span data-stu-id="fc8ba-186">You can provide a [**CCHookProc**](/windows/win32/api/commdlg/nc-commdlg-lpcchookproc) hook procedure for the Color dialog box.</span></span> <span data-ttu-id="fc8ba-187">Процедура-обработчик может обрабатывать сообщения, отправленные в диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-187">The hook procedure can process messages sent to the dialog box.</span></span> <span data-ttu-id="fc8ba-188">Кроме того, можно использовать зарегистрированные сообщения для управления поведением диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-188">It can also use registered messages to control the behavior of the dialog box.</span></span> <span data-ttu-id="fc8ba-189">При использовании пользовательского шаблона для определения дополнительных элементов управления необходимо предоставить процедуру-обработчик для обработки входных данных для элементов управления.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-189">If you use a custom template to define additional controls, you must provide a hook procedure to process input for your controls.</span></span>

### <a name="to-enable-a-hook-procedure-for-the-color-dialog-box"></a><span data-ttu-id="fc8ba-190">Включение процедуры-обработчика для диалогового окна «цвет»</span><span class="sxs-lookup"><span data-stu-id="fc8ba-190">To enable a hook procedure for the Color dialog box</span></span>

1.  <span data-ttu-id="fc8ba-191">Установите флаг **CC \_ енаблехук** в элементе **flags** структуры [**чусеколор**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) .</span><span class="sxs-lookup"><span data-stu-id="fc8ba-191">Set the **CC\_ENABLEHOOK** flag in the **Flags** member of the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure.</span></span>
2.  <span data-ttu-id="fc8ba-192">Укажите адрес процедуры-обработчика в элементе **лпфнхук** .</span><span class="sxs-lookup"><span data-stu-id="fc8ba-192">Specify the address of the hook procedure in the **lpfnHook** member.</span></span>

<span data-ttu-id="fc8ba-193">После обработки сообщения [**WM \_ инитдиалог**](wm-initdialog.md) процедура диалогового окна отправляет сообщение **WM \_ инитдиалог** в процедуру-обработчик.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-193">After processing its [**WM\_INITDIALOG**](wm-initdialog.md) message, the dialog box procedure sends a **WM\_INITDIALOG** message to the hook procedure.</span></span> <span data-ttu-id="fc8ba-194">Параметр *lParam* этого сообщения является указателем на структуру [**чусеколор**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) , используемую для инициализации диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-194">The *lParam* parameter of this message is a pointer to the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure used to initialize the dialog box.</span></span>

<span data-ttu-id="fc8ba-195">При нажатии пользователем кнопки " **ОК** " диалоговое окно отправляет зарегистрированное сообщение [**колорокстринг**](colorokstring.md) в процедуру-обработчик.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-195">The dialog box sends the [**COLOROKSTRING**](colorokstring.md) registered message to the hook procedure when the user clicks the **OK** button.</span></span> <span data-ttu-id="fc8ba-196">Процедура-обработчик может отклонить выбранный цвет и принудительно оставить диалоговое окно открытым, возвращая ноль при получении этого сообщения.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-196">The hook procedure can reject the selected color and force the dialog box to remain open by returning zero when it receives this message.</span></span> <span data-ttu-id="fc8ba-197">Процедура-обработчик может заставить диалоговое окно выбрать определенный цвет, отправив сообщение [**сетргбстринг**](setrgbstring.md) Registered в диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-197">The hook procedure can force the dialog box to select a particular color by sending the [**SETRGBSTRING**](setrgbstring.md) registered message to the dialog box.</span></span> <span data-ttu-id="fc8ba-198">Чтобы использовать эти зарегистрированные сообщения, необходимо передать константы **колорокстринг** и **Сетргбстринг** в функцию [**регистервиндовмессаже**](/windows/desktop/api/winuser/nf-winuser-registerwindowmessagea) , чтобы получить идентификатор сообщения.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-198">To use these registered messages, you must pass the **COLOROKSTRING** and **SETRGBSTRING** constants to the [**RegisterWindowMessage**](/windows/desktop/api/winuser/nf-winuser-registerwindowmessagea) function to get a message identifier.</span></span> <span data-ttu-id="fc8ba-199">Затем можно использовать идентификатор для обнаружения и обработки сообщений, отправленных из диалогового окна, или для отправки сообщений в диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-199">You can then use the identifier to detect and process messages sent from the dialog box, or to send messages to the dialog box.</span></span>

## <a name="color-models-used-by-the-color-dialog-box"></a><span data-ttu-id="fc8ba-200">Цветовые модели, используемые в диалоговом окне «цвет»</span><span class="sxs-lookup"><span data-stu-id="fc8ba-200">Color Models Used by the Color Dialog Box</span></span>

<span data-ttu-id="fc8ba-201">Расширение "пользовательские цвета" диалогового окна "цвет" позволяет пользователю указать цвет с помощью значений RGB или HSL.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-201">The custom colors extension of the Color dialog box allows the user to specify a color using RGB or HSL values.</span></span> <span data-ttu-id="fc8ba-202">Однако структура [**чусеколор**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) использует только значения RGB для сообщения цветов, созданных или выбранных пользователем.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-202">However, the [**CHOOSECOLOR**](/windows/win32/api/commdlg/ns-commdlg-choosecolora-r1) structure uses only RGB values to report the colors created or selected by the user.</span></span>

-   [<span data-ttu-id="fc8ba-203">Цветовая модель RGB</span><span class="sxs-lookup"><span data-stu-id="fc8ba-203">RGB Color Model</span></span>](#rgb-color-model)
-   [<span data-ttu-id="fc8ba-204">Цветовая модель HSL</span><span class="sxs-lookup"><span data-stu-id="fc8ba-204">HSL Color Model</span></span>](#hsl-color-model)
-   [<span data-ttu-id="fc8ba-205">Преобразование значений HSL в значения RGB</span><span class="sxs-lookup"><span data-stu-id="fc8ba-205">Converting HSL Values to RGB Values</span></span>](#converting-hsl-values-to-rgb-values)

### <a name="rgb-color-model"></a><span data-ttu-id="fc8ba-206">Цветовая модель RGB</span><span class="sxs-lookup"><span data-stu-id="fc8ba-206">RGB Color Model</span></span>

<span data-ttu-id="fc8ba-207">Модель RGB используется для обозначения цветов для отображения и других устройств, которые порождают освещение.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-207">The RGB model is used to designate colors for displays and other devices that emit light.</span></span> <span data-ttu-id="fc8ba-208">Допустимые значения красного, зеленого и синего в диапазоне от 0 до 255, значение 0 указывает на минимальную интенсивность и 255, указывающее на максимальную интенсивность.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-208">Valid red, green, and blue values range from 0 through 255, with 0 indicating minimum intensity and 255 indicating maximum intensity.</span></span> <span data-ttu-id="fc8ba-209">На следующем рисунке показано, как можно объединить основные цвета красного, зеленого и синего цветов, чтобы получить четыре дополнительных цвета.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-209">The following illustration shows how the primary colors red, green, and blue can be combined to produce four additional colors.</span></span> <span data-ttu-id="fc8ba-210">(Для устройств вывода цвет черный результат, когда значения красного, зеленого и синего равны 0.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-210">(For display devices, the color black results when the red, green, and blue values are set to 0.</span></span> <span data-ttu-id="fc8ba-211">В технологии вывода «черный» — отсутствие всех цветов.)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-211">In display technology, black is the absence of all colors.)</span></span>

![перекрывающиеся красные, зеленые и синие круги](images/rgbcolormodel.png)

<span data-ttu-id="fc8ba-213">В следующей таблице перечислены восемь цветов модели RGB и связанные с ними значения RGB.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-213">The following table lists eight colors of the RGB model and their associated RGB values.</span></span>



| <span data-ttu-id="fc8ba-214">Цвет</span><span class="sxs-lookup"><span data-stu-id="fc8ba-214">Color</span></span>   | <span data-ttu-id="fc8ba-215">Значения RGB</span><span class="sxs-lookup"><span data-stu-id="fc8ba-215">RGB values</span></span>    |
|---------|---------------|
| <span data-ttu-id="fc8ba-216">Красный</span><span class="sxs-lookup"><span data-stu-id="fc8ba-216">Red</span></span>     | <span data-ttu-id="fc8ba-217">255, 0, 0</span><span class="sxs-lookup"><span data-stu-id="fc8ba-217">255, 0, 0</span></span>     |
| <span data-ttu-id="fc8ba-218">Зеленый</span><span class="sxs-lookup"><span data-stu-id="fc8ba-218">Green</span></span>   | <span data-ttu-id="fc8ba-219">0, 255, 0</span><span class="sxs-lookup"><span data-stu-id="fc8ba-219">0, 255, 0</span></span>     |
| <span data-ttu-id="fc8ba-220">Синий</span><span class="sxs-lookup"><span data-stu-id="fc8ba-220">Blue</span></span>    | <span data-ttu-id="fc8ba-221">0, 0, 255</span><span class="sxs-lookup"><span data-stu-id="fc8ba-221">0, 0, 255</span></span>     |
| <span data-ttu-id="fc8ba-222">Цвет</span><span class="sxs-lookup"><span data-stu-id="fc8ba-222">Cyan</span></span>    | <span data-ttu-id="fc8ba-223">0, 255, 255</span><span class="sxs-lookup"><span data-stu-id="fc8ba-223">0, 255, 255</span></span>   |
| <span data-ttu-id="fc8ba-224">Пурпурный</span><span class="sxs-lookup"><span data-stu-id="fc8ba-224">Magenta</span></span> | <span data-ttu-id="fc8ba-225">255, 0, 255</span><span class="sxs-lookup"><span data-stu-id="fc8ba-225">255, 0, 255</span></span>   |
| <span data-ttu-id="fc8ba-226">Желтый</span><span class="sxs-lookup"><span data-stu-id="fc8ba-226">Yellow</span></span>  | <span data-ttu-id="fc8ba-227">255, 255, 0</span><span class="sxs-lookup"><span data-stu-id="fc8ba-227">255, 255, 0</span></span>   |
| <span data-ttu-id="fc8ba-228">Белый</span><span class="sxs-lookup"><span data-stu-id="fc8ba-228">White</span></span>   | <span data-ttu-id="fc8ba-229">255, 255, 255</span><span class="sxs-lookup"><span data-stu-id="fc8ba-229">255, 255, 255</span></span> |
| <span data-ttu-id="fc8ba-230">Черный</span><span class="sxs-lookup"><span data-stu-id="fc8ba-230">Black</span></span>   | <span data-ttu-id="fc8ba-231">0, 0, 0</span><span class="sxs-lookup"><span data-stu-id="fc8ba-231">0, 0, 0</span></span>       |



 

<span data-ttu-id="fc8ba-232">Система хранит внутренние цвета в виде 32-битных значений RGB, имеющих следующую шестнадцатеричную форму: 0x00BBGGRR.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-232">The system stores internal colors as 32-bit RGB values that have the following hexadecimal form: 0x00bbggrr.</span></span>

<span data-ttu-id="fc8ba-233">Байт нижнего порядка содержит значение для относительной интенсивности красного цвета; второй байт содержит значение для зеленого цвета; третий байт содержит значение синего.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-233">The low-order byte contains a value for the relative intensity of red; the second byte contains a value for green; and the third byte contains a value for blue.</span></span> <span data-ttu-id="fc8ba-234">Байт высокого порядка должен быть равен нулю.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-234">The high-order byte must be zero.</span></span>

<span data-ttu-id="fc8ba-235">Можно использовать макрос [**RGB**](/windows/desktop/api/wingdi/nf-wingdi-rgb) для получения значения RGB, основанного на заданном интенситиес, для красного, зеленого и синего компонентов.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-235">You can use the [**RGB**](/windows/desktop/api/wingdi/nf-wingdi-rgb) macro to get an RGB value based on specified intensities for the red, green, and blue components.</span></span> <span data-ttu-id="fc8ba-236">Используйте макросы [**rvalue**](/windows/desktop/api/wingdi/nf-wingdi-getrvalue), [**жетбвалуе**](/windows/desktop/api/wingdi/nf-wingdi-getbvalue)и [**жетгвалуе**](/windows/desktop/api/wingdi/nf-wingdi-getgvalue) для извлечения отдельных цветов из значения цвета RGB.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-236">Use the [**GetRValue**](/windows/desktop/api/wingdi/nf-wingdi-getrvalue), [**GetBValue**](/windows/desktop/api/wingdi/nf-wingdi-getbvalue), and [**GetGValue**](/windows/desktop/api/wingdi/nf-wingdi-getgvalue) macros to extract individual colors from an RGB color value.</span></span>

### <a name="hsl-color-model"></a><span data-ttu-id="fc8ba-237">Цветовая модель HSL</span><span class="sxs-lookup"><span data-stu-id="fc8ba-237">HSL Color Model</span></span>

<span data-ttu-id="fc8ba-238">Диалоговое окно цвет предоставляет элементы управления для указания значений HSL.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-238">The Color dialog box provides controls for specifying HSL values.</span></span> <span data-ttu-id="fc8ba-239">На следующем рисунке показан элемент управления спектром цветов и элемент управления "яркость слайда", отображаемый в диалоговом окне "цвет".</span><span class="sxs-lookup"><span data-stu-id="fc8ba-239">The following illustration shows the color spectrum control and the luminosity slide control that appear in the Color dialog box.</span></span> <span data-ttu-id="fc8ba-240">На рисунке также показаны диапазоны значений, которые пользователь может указать с помощью этих элементов управления.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-240">The illustration also shows the ranges of values the user can specify with these controls.</span></span>

![спектр цветов и шкала яркости](images/colordialogranges.png)

<span data-ttu-id="fc8ba-242">В диалоговом окне «цвет» значения насыщенности и яркости должны быть в диапазоне от 0 до 240, а значение оттенка должно находиться в диапазоне от 0 до 239.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-242">In the Color dialog box, the saturation and luminosity values must be in the range 0 through 240, and the hue value must be in the range 0 through 239.</span></span>

### <a name="converting-hsl-values-to-rgb-values"></a><span data-ttu-id="fc8ba-243">Преобразование значений HSL в значения RGB</span><span class="sxs-lookup"><span data-stu-id="fc8ba-243">Converting HSL Values to RGB Values</span></span>

<span data-ttu-id="fc8ba-244">Процедура диалогового окна, представленная в Comdlg32.dll для диалогового окна «цвет», содержит код, преобразующий значения HSL в соответствующие значения RGB.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-244">The dialog box procedure provided in Comdlg32.dll for the Color dialog box contains code that converts HSL values to the corresponding RGB values.</span></span> <span data-ttu-id="fc8ba-245">В следующей таблице перечислены восемь цветов модели RGB и соответствующие значения HSL и RGB.</span><span class="sxs-lookup"><span data-stu-id="fc8ba-245">The following table lists eight colors of the RGB model and their associated HSL and RGB values.</span></span>



| <span data-ttu-id="fc8ba-246">Цвет</span><span class="sxs-lookup"><span data-stu-id="fc8ba-246">Color</span></span>   | <span data-ttu-id="fc8ba-247">Значения HSL</span><span class="sxs-lookup"><span data-stu-id="fc8ba-247">HSL values</span></span>      | <span data-ttu-id="fc8ba-248">Значения RGB</span><span class="sxs-lookup"><span data-stu-id="fc8ba-248">RGB values</span></span>      |
|---------|-----------------|-----------------|
| <span data-ttu-id="fc8ba-249">Красный</span><span class="sxs-lookup"><span data-stu-id="fc8ba-249">Red</span></span>     | <span data-ttu-id="fc8ba-250">(0, 240, 120)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-250">(0, 240, 120)</span></span>   | <span data-ttu-id="fc8ba-251">(255, 0, 0)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-251">(255, 0, 0)</span></span>     |
| <span data-ttu-id="fc8ba-252">Желтый</span><span class="sxs-lookup"><span data-stu-id="fc8ba-252">Yellow</span></span>  | <span data-ttu-id="fc8ba-253">(40, 240, 120)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-253">(40, 240, 120)</span></span>  | <span data-ttu-id="fc8ba-254">(255, 255, 0)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-254">(255, 255, 0)</span></span>   |
| <span data-ttu-id="fc8ba-255">Зеленый</span><span class="sxs-lookup"><span data-stu-id="fc8ba-255">Green</span></span>   | <span data-ttu-id="fc8ba-256">(80, 240, 120)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-256">(80, 240, 120)</span></span>  | <span data-ttu-id="fc8ba-257">(0, 255, 0)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-257">(0, 255, 0)</span></span>     |
| <span data-ttu-id="fc8ba-258">Цвет</span><span class="sxs-lookup"><span data-stu-id="fc8ba-258">Cyan</span></span>    | <span data-ttu-id="fc8ba-259">(120, 240, 120)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-259">(120, 240, 120)</span></span> | <span data-ttu-id="fc8ba-260">(0, 255, 255)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-260">(0, 255, 255)</span></span>   |
| <span data-ttu-id="fc8ba-261">Синий</span><span class="sxs-lookup"><span data-stu-id="fc8ba-261">Blue</span></span>    | <span data-ttu-id="fc8ba-262">(160, 240, 120)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-262">(160, 240, 120)</span></span> | <span data-ttu-id="fc8ba-263">(0, 0, 255)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-263">(0, 0, 255)</span></span>     |
| <span data-ttu-id="fc8ba-264">Пурпурный</span><span class="sxs-lookup"><span data-stu-id="fc8ba-264">Magenta</span></span> | <span data-ttu-id="fc8ba-265">(200, 240, 120)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-265">(200, 240, 120)</span></span> | <span data-ttu-id="fc8ba-266">(255, 0, 255)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-266">(255, 0, 255)</span></span>   |
| <span data-ttu-id="fc8ba-267">Белый</span><span class="sxs-lookup"><span data-stu-id="fc8ba-267">White</span></span>   | <span data-ttu-id="fc8ba-268">(0, 0, 240)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-268">(0, 0, 240)</span></span>     | <span data-ttu-id="fc8ba-269">(255, 255, 255)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-269">(255, 255, 255)</span></span> |
| <span data-ttu-id="fc8ba-270">Черный</span><span class="sxs-lookup"><span data-stu-id="fc8ba-270">Black</span></span>   | <span data-ttu-id="fc8ba-271">(0, 0, 0)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-271">(0, 0, 0)</span></span>       | <span data-ttu-id="fc8ba-272">(0, 0, 0)</span><span class="sxs-lookup"><span data-stu-id="fc8ba-272">(0, 0, 0)</span></span>       |



 

 

 
