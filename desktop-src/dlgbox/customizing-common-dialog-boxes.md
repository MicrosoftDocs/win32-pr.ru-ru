---
title: Настройка общих диалоговых окон
description: В этом разделе описывается использование общих диалоговых окон.
ms.assetid: 31ba9deb-32e6-455c-be0e-ff8bcc691c80
keywords:
- Библиотека общих диалоговых окон, Настройка
- Общие диалоговые окна, Настройка
- Настройка общих диалоговых окон
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b7eaa71c4f6fc6aa038ef150eb53935f6b3ec280
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104413553"
---
# <a name="customizing-common-dialog-boxes"></a><span data-ttu-id="a2df4-106">Настройка общих диалоговых окон</span><span class="sxs-lookup"><span data-stu-id="a2df4-106">Customizing Common Dialog Boxes</span></span>

<span data-ttu-id="a2df4-107">Общие диалоговые окна можно использовать в стандартной форме или настроить.</span><span class="sxs-lookup"><span data-stu-id="a2df4-107">You can use the common dialog boxes in their standard form, or you can customize them.</span></span> <span data-ttu-id="a2df4-108">С точки зрения пользователя главным преимуществом общего диалогового окна является его единообразный внешний вид и функциональность приложения.</span><span class="sxs-lookup"><span data-stu-id="a2df4-108">From the user's perspective, the chief benefit of the common dialog box is its consistent appearance and functionality from application to application.</span></span> <span data-ttu-id="a2df4-109">Поэтому важно настроить общее диалоговое окно только в том случае, если оно совершенно необходимо для приложения.</span><span class="sxs-lookup"><span data-stu-id="a2df4-109">Therefore, it is important that you customize a common dialog box only when it is absolutely necessary for an application.</span></span> <span data-ttu-id="a2df4-110">В противном случае последовательный внешний вид и простой интерфейс программирования теряются.</span><span class="sxs-lookup"><span data-stu-id="a2df4-110">Otherwise, the consistent appearance and simple coding interface are lost.</span></span> <span data-ttu-id="a2df4-111">Соответствующие настройки не имеют большого количества исходных элементов управления.</span><span class="sxs-lookup"><span data-stu-id="a2df4-111">Appropriate customizations leave intact as many of the original controls as possible.</span></span> <span data-ttu-id="a2df4-112">Изменение размера диалогового окна или добавление новых элементов управления в пространстве, которое уже доступно в диалоговом окне, является соответствующей настройкой.</span><span class="sxs-lookup"><span data-stu-id="a2df4-112">Increasing the size of the dialog box or adding new controls in the space already available in the dialog box is an appropriate customization.</span></span> <span data-ttu-id="a2df4-113">Скрытие исходных элементов управления или иным образом изменение предполагаемой функциональности исходных элементов управления является менее подходящей настройкой.</span><span class="sxs-lookup"><span data-stu-id="a2df4-113">Hiding original controls or otherwise changing the intended functionality of the original controls is a less appropriate customization.</span></span>

<span data-ttu-id="a2df4-114">В этом разделе рассматриваются следующие методы настройки общего диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="a2df4-114">This section discusses the following methods for customizing a common dialog box:</span></span>

-   [<span data-ttu-id="a2df4-115">Пользовательские шаблоны</span><span class="sxs-lookup"><span data-stu-id="a2df4-115">Custom Templates</span></span>](#custom-templates)
-   [<span data-ttu-id="a2df4-116">Процедуры-обработчики для общих диалоговых окон</span><span class="sxs-lookup"><span data-stu-id="a2df4-116">Hook Procedures for Common Dialog Boxes</span></span>](#hook-procedures-for-common-dialog-boxes)
-   [<span data-ttu-id="a2df4-117">Сообщения общего диалогового окна</span><span class="sxs-lookup"><span data-stu-id="a2df4-117">Common Dialog Messages</span></span>](#common-dialog-messages)
-   [<span data-ttu-id="a2df4-118">Поддержка справки</span><span class="sxs-lookup"><span data-stu-id="a2df4-118">Help Support</span></span>](#help-support)
    -   [<span data-ttu-id="a2df4-119">Контекстно-зависимая справка</span><span class="sxs-lookup"><span data-stu-id="a2df4-119">Context-Sensitive Help</span></span>](#context-sensitive-help)
    -   [<span data-ttu-id="a2df4-120">Кнопка "Справка"</span><span class="sxs-lookup"><span data-stu-id="a2df4-120">The Help Button</span></span>](#the-help-button)

## <a name="custom-templates"></a><span data-ttu-id="a2df4-121">Пользовательские шаблоны</span><span class="sxs-lookup"><span data-stu-id="a2df4-121">Custom Templates</span></span>

<span data-ttu-id="a2df4-122">Общие диалоговые окна имеют шаблоны по умолчанию, которые определяют число, тип и расположение стандартных элементов управления в диалоговом окне.</span><span class="sxs-lookup"><span data-stu-id="a2df4-122">Common dialog boxes have default templates that define the number, type, and position of the standard controls in the dialog box.</span></span> <span data-ttu-id="a2df4-123">Вы можете определить пользовательский шаблон, чтобы предоставить пользователям доступ к дополнительным элементам управления, которые являются уникальными для приложения.</span><span class="sxs-lookup"><span data-stu-id="a2df4-123">You can define a custom template to give users access to additional controls that are unique to your application.</span></span>

<span data-ttu-id="a2df4-124">Для всех общих диалоговых окон, Кроме диалоговых окон « **Открыть** » и « **Сохранить как** » в стиле обозревателя, необходимо изменить шаблон по умолчанию, чтобы создать пользовательский шаблон, который заменит шаблон по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a2df4-124">For all common dialog boxes except the Explorer-style **Open** and **Save As** dialog boxes, you modify the default template to create a custom template that replaces the default template.</span></span> <span data-ttu-id="a2df4-125">Пользовательский шаблон определяет тип и расположение стандартных элементов управления, а также дополнительные элементы управления.</span><span class="sxs-lookup"><span data-stu-id="a2df4-125">The custom template defines the type and position of the standard controls as well as any additional controls.</span></span>

<span data-ttu-id="a2df4-126">При создании пользовательского шаблона диалогового окна путем изменения шаблона диалогового окна по умолчанию убедитесь, что идентификаторы для всех добавленных элементов управления уникальны и не конфликтуют с идентификаторами стандартных элементов управления.</span><span class="sxs-lookup"><span data-stu-id="a2df4-126">When you create a custom dialog box template by modifying the default dialog box template, make sure the identifiers for any added controls are unique and do not conflict with the identifiers of the standard controls.</span></span> <span data-ttu-id="a2df4-127">В следующей таблице перечислены имена файлов шаблонов по умолчанию и включаемых файлов для каждого из типов стандартных диалоговых окон.</span><span class="sxs-lookup"><span data-stu-id="a2df4-127">The following table lists the name of the default template file and include file for each of the common dialog box types.</span></span>



| <span data-ttu-id="a2df4-128">Тип диалогового окна</span><span class="sxs-lookup"><span data-stu-id="a2df4-128">Dialog box type</span></span>               | <span data-ttu-id="a2df4-129">Файл шаблона</span><span class="sxs-lookup"><span data-stu-id="a2df4-129">Template file</span></span> | <span data-ttu-id="a2df4-130">Включаемый файл</span><span class="sxs-lookup"><span data-stu-id="a2df4-130">Include file</span></span> |
|-------------------------------|---------------|--------------|
| <span data-ttu-id="a2df4-131">**Цвет**</span><span class="sxs-lookup"><span data-stu-id="a2df4-131">**Color**</span></span>                     | <span data-ttu-id="a2df4-132">Color. DLG</span><span class="sxs-lookup"><span data-stu-id="a2df4-132">Color.dlg</span></span>     | <span data-ttu-id="a2df4-133">Колордлг. h</span><span class="sxs-lookup"><span data-stu-id="a2df4-133">ColorDlg.h</span></span>   |
| <span data-ttu-id="a2df4-134">**Поиск**</span><span class="sxs-lookup"><span data-stu-id="a2df4-134">**Find**</span></span>                      | <span data-ttu-id="a2df4-135">Строки FindText. DLG</span><span class="sxs-lookup"><span data-stu-id="a2df4-135">Findtext.dlg</span></span>  | <span data-ttu-id="a2df4-136">Длгс. h</span><span class="sxs-lookup"><span data-stu-id="a2df4-136">Dlgs.h</span></span>       |
| <span data-ttu-id="a2df4-137">**Шрифт**</span><span class="sxs-lookup"><span data-stu-id="a2df4-137">**Font**</span></span>                      | <span data-ttu-id="a2df4-138">Font. DLG</span><span class="sxs-lookup"><span data-stu-id="a2df4-138">Font.dlg</span></span>      | <span data-ttu-id="a2df4-139">Длгс. h</span><span class="sxs-lookup"><span data-stu-id="a2df4-139">Dlgs.h</span></span>       |
| <span data-ttu-id="a2df4-140">**Открыть** (множественный выбор)</span><span class="sxs-lookup"><span data-stu-id="a2df4-140">**Open** (multiple selection)</span></span> | <span data-ttu-id="a2df4-141">FileOpen. DLG</span><span class="sxs-lookup"><span data-stu-id="a2df4-141">Fileopen.dlg</span></span>  | <span data-ttu-id="a2df4-142">Длгс. h</span><span class="sxs-lookup"><span data-stu-id="a2df4-142">Dlgs.h</span></span>       |
| <span data-ttu-id="a2df4-143">**Открыть** (одиночный выбор)</span><span class="sxs-lookup"><span data-stu-id="a2df4-143">**Open** (single selection)</span></span>   | <span data-ttu-id="a2df4-144">FileOpen. DLG</span><span class="sxs-lookup"><span data-stu-id="a2df4-144">Fileopen.dlg</span></span>  | <span data-ttu-id="a2df4-145">Длгс. h</span><span class="sxs-lookup"><span data-stu-id="a2df4-145">Dlgs.h</span></span>       |
| <span data-ttu-id="a2df4-146">**Параметры страницы**</span><span class="sxs-lookup"><span data-stu-id="a2df4-146">**Page Setup**</span></span>                | <span data-ttu-id="a2df4-147">Прнсетуп. DLG</span><span class="sxs-lookup"><span data-stu-id="a2df4-147">Prnsetup.dlg</span></span>  | <span data-ttu-id="a2df4-148">Длгс. h</span><span class="sxs-lookup"><span data-stu-id="a2df4-148">Dlgs.h</span></span>       |
| <span data-ttu-id="a2df4-149">**Печать**</span><span class="sxs-lookup"><span data-stu-id="a2df4-149">**Print**</span></span>                     | <span data-ttu-id="a2df4-150">Прнсетуп. DLG</span><span class="sxs-lookup"><span data-stu-id="a2df4-150">Prnsetup.dlg</span></span>  | <span data-ttu-id="a2df4-151">Длгс. h</span><span class="sxs-lookup"><span data-stu-id="a2df4-151">Dlgs.h</span></span>       |
| <span data-ttu-id="a2df4-152">**Настройка печати** (устарела)</span><span class="sxs-lookup"><span data-stu-id="a2df4-152">**Print Setup** (obsolete)</span></span>    | <span data-ttu-id="a2df4-153">Прнсетуп. DLG</span><span class="sxs-lookup"><span data-stu-id="a2df4-153">Prnsetup.dlg</span></span>  | <span data-ttu-id="a2df4-154">Длгс. h</span><span class="sxs-lookup"><span data-stu-id="a2df4-154">Dlgs.h</span></span>       |
| <span data-ttu-id="a2df4-155">**Заменить**</span><span class="sxs-lookup"><span data-stu-id="a2df4-155">**Replace**</span></span>                   | <span data-ttu-id="a2df4-156">Строки FindText. DLG</span><span class="sxs-lookup"><span data-stu-id="a2df4-156">Findtext.dlg</span></span>  | <span data-ttu-id="a2df4-157">Длгс. h</span><span class="sxs-lookup"><span data-stu-id="a2df4-157">Dlgs.h</span></span>       |



 

<span data-ttu-id="a2df4-158">Чтобы включить пользовательский шаблон, необходимо установить флаг в элементе **flags** соответствующей структуры для диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="a2df4-158">To enable a custom template, you must set a flag in the **Flags** member of the corresponding structure for the dialog box.</span></span> <span data-ttu-id="a2df4-159">Если шаблон является ресурсом в приложении или библиотеке динамической компоновки, установите флаг **енаблетемплате** в элементе **flags** и используйте члены класса **HINSTANCE** и **лптемплатенаме** структуры для обозначения имени модуля и ресурса.</span><span class="sxs-lookup"><span data-stu-id="a2df4-159">If the template is a resource in an application or dynamic-link library, set an **ENABLETEMPLATE** flag in the **Flags** member, and use the **hInstance** and **lpTemplateName** members of the structure to identify the module and resource name.</span></span> <span data-ttu-id="a2df4-160">Если шаблон уже находится в памяти, установите флаг **енаблетемплатехандле** в элементе **flags** и используйте элемент **HINSTANCE** для обозначения объекта памяти, содержащего шаблон.</span><span class="sxs-lookup"><span data-stu-id="a2df4-160">If the template is already in memory, set an **ENABLETEMPLATEHANDLE** flag in the **Flags** member, and use the **hInstance** member to identify the memory object that contains the template.</span></span>

<span data-ttu-id="a2df4-161">В большинстве случаев необходимо также включить процедуру-обработчик для диалогового окна, чтобы поддерживать и обрабатывать входные данные для дополнительных элементов управления в пользовательском шаблоне.</span><span class="sxs-lookup"><span data-stu-id="a2df4-161">In most cases, you must also enable a hook procedure for the dialog box to support and process input for the additional controls in your custom template.</span></span>

<span data-ttu-id="a2df4-162">Для диалоговых окон « **Открыть** » и « **Сохранить как** » в стиле обозревателя шаблоны по умолчанию недоступны для изменения.</span><span class="sxs-lookup"><span data-stu-id="a2df4-162">For the Explorer-style **Open** and **Save As** dialog boxes, the default templates are not available for modification.</span></span> <span data-ttu-id="a2df4-163">Вместо этого пользовательский шаблон определяет дочернее диалоговое окно, включающее только те элементы, которые добавляются в стандартное диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="a2df4-163">Instead, your custom template defines a child dialog box that includes only the items to be added to the standard dialog box.</span></span> <span data-ttu-id="a2df4-164">Пользовательский шаблон также может определять статический элемент управления, указывающий расположение кластера стандартных элементов управления в дочернем диалоговом окне.</span><span class="sxs-lookup"><span data-stu-id="a2df4-164">The custom template can also define a static control that specifies the location of the cluster of standard controls in the child dialog box.</span></span> <span data-ttu-id="a2df4-165">Дополнительные сведения см. в разделе [пользовательские шаблоны в стиле обозревателя](open-and-save-as-dialog-boxes.md).</span><span class="sxs-lookup"><span data-stu-id="a2df4-165">For more information, see [Explorer-Style Custom Templates](open-and-save-as-dialog-boxes.md).</span></span>

## <a name="hook-procedures-for-common-dialog-boxes"></a><span data-ttu-id="a2df4-166">Процедуры-обработчики для общих диалоговых окон</span><span class="sxs-lookup"><span data-stu-id="a2df4-166">Hook Procedures for Common Dialog Boxes</span></span>

<span data-ttu-id="a2df4-167">Для каждого из общих диалоговых окон можно включить процедуру-обработчик для обработки сообщений из процедуры диалогового окна по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a2df4-167">For each of the common dialog boxes, you can enable a hook procedure to process messages from the default dialog box procedure.</span></span> <span data-ttu-id="a2df4-168">Существует два общих типа процедур обработчиков общих диалоговых окон:</span><span class="sxs-lookup"><span data-stu-id="a2df4-168">There are two general types of common dialog hook procedures:</span></span>

-   <span data-ttu-id="a2df4-169">Стандартная процедура-обработчик, используемая в большинстве распространенных диалоговых окон</span><span class="sxs-lookup"><span data-stu-id="a2df4-169">The standard hook procedure used with most common dialog boxes</span></span>
-   <span data-ttu-id="a2df4-170">Процедура-обработчик в стиле обозревателя, поддерживаемая диалоговыми окнами **Открыть** и **Сохранить как**</span><span class="sxs-lookup"><span data-stu-id="a2df4-170">The Explorer-style hook procedure supported by the **Open** and **Save As** dialog boxes</span></span>

<span data-ttu-id="a2df4-171">При предоставлении стандартной процедуры-обработчика для одного из общих диалоговых окон процедура диалогового окна по умолчанию обрабатывает ее сообщения следующим образом.</span><span class="sxs-lookup"><span data-stu-id="a2df4-171">When you provide a standard hook procedure for one of the common dialog boxes, the default dialog box procedure handles its messages as follows.</span></span>



| <span data-ttu-id="a2df4-172">Сообщение</span><span class="sxs-lookup"><span data-stu-id="a2df4-172">Message</span></span>                                 | <span data-ttu-id="a2df4-173">Обработка</span><span class="sxs-lookup"><span data-stu-id="a2df4-173">Handling</span></span>                                                                                                                                                                                                             |
|-----------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="a2df4-174">**WM \_ инитдиалог**</span><span class="sxs-lookup"><span data-stu-id="a2df4-174">**WM\_INITDIALOG**</span></span>](wm-initdialog.md) | <span data-ttu-id="a2df4-175">Процедура диалогового окна по умолчанию обрабатывает сообщение перед его передачей в процедуру-обработчик.</span><span class="sxs-lookup"><span data-stu-id="a2df4-175">The default dialog box procedure processes the message before passing it to the hook procedure.</span></span> <span data-ttu-id="a2df4-176">Параметр *lParam* сообщения является указателем на структуру инициализации, заданную при создании диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="a2df4-176">The message's *lParam* parameter is a pointer to the initialization structure specified when the dialog was created.</span></span> |
| <span data-ttu-id="a2df4-177">Все остальные сообщения</span><span class="sxs-lookup"><span data-stu-id="a2df4-177">All other messages</span></span>                      | <span data-ttu-id="a2df4-178">Процедура-обработчик сначала получает сообщение.</span><span class="sxs-lookup"><span data-stu-id="a2df4-178">The hook procedure receives the message first.</span></span> <span data-ttu-id="a2df4-179">Затем возвращаемое значение процедуры-обработчика определяет, обрабатывает ли сообщение процедура диалогового окна по умолчанию или игнорирует его.</span><span class="sxs-lookup"><span data-stu-id="a2df4-179">Then, the return value of the hook procedure determines whether the default dialog procedure processes the message or ignores it.</span></span>                                     |



 

<span data-ttu-id="a2df4-180">Для диалоговых окон « **Открыть** » и « **Сохранить как** » в стиле обозревателя процедура обработчика не получает сообщения, предназначенные для стандартных элементов управления в диалоговом окне.</span><span class="sxs-lookup"><span data-stu-id="a2df4-180">For the Explorer-style **Open** and **Save As** dialog boxes, the hook procedure does not receive messages intended for the standard controls in the dialog box.</span></span> <span data-ttu-id="a2df4-181">Вместо этого он получает сообщения уведомления из диалогового окна и сообщения для всех дополнительных элементов управления, определенных в пользовательском шаблоне.</span><span class="sxs-lookup"><span data-stu-id="a2df4-181">Instead, it receives notification messages from the dialog box and messages for any additional controls that you defined in a custom template.</span></span> <span data-ttu-id="a2df4-182">Дополнительные сведения см. в разделе [процедуры-обработчики в стиле обозревателя](open-and-save-as-dialog-boxes.md).</span><span class="sxs-lookup"><span data-stu-id="a2df4-182">For more information, see [Explorer-Style Hook Procedures](open-and-save-as-dialog-boxes.md).</span></span>

<span data-ttu-id="a2df4-183">Чтобы включить процедуру-обработчик, установите значение **енаблехук** в элементе **flags** соответствующей структуры для этого диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="a2df4-183">To enable a hook procedure, set an **ENABLEHOOK** value in the **Flags** member of the corresponding structure for the dialog box.</span></span> <span data-ttu-id="a2df4-184">Если установлен флаг **енаблехук** , то элемент **лпфнхук** структуры должен указывать адрес процедуры-обработчика.</span><span class="sxs-lookup"><span data-stu-id="a2df4-184">If an **ENABLEHOOK** flag is set, an **lpfnHook** member of the structure must specify the address of the hook procedure.</span></span>

<span data-ttu-id="a2df4-185">В следующей таблице показан тип процедуры-ловушки, которую необходимо предоставить для каждого из общих диалоговых окон.</span><span class="sxs-lookup"><span data-stu-id="a2df4-185">The following table shows the type of hook procedure to provide for each of the common dialog boxes.</span></span>



| <span data-ttu-id="a2df4-186">Тип диалогового окна</span><span class="sxs-lookup"><span data-stu-id="a2df4-186">Dialog box type</span></span>                          | <span data-ttu-id="a2df4-187">Процедура обработчика</span><span class="sxs-lookup"><span data-stu-id="a2df4-187">Hook procedure</span></span>                                      |
|------------------------------------------|-----------------------------------------------------|
| <span data-ttu-id="a2df4-188">**Цвет**</span><span class="sxs-lookup"><span data-stu-id="a2df4-188">**Color**</span></span>                                | [<span data-ttu-id="a2df4-189">*кчукпрок*</span><span class="sxs-lookup"><span data-stu-id="a2df4-189">*CCHookProc*</span></span>](/windows/win32/api/commdlg/nc-commdlg-lpcchookproc)                      |
| <span data-ttu-id="a2df4-190">**Найти** или **заменить**</span><span class="sxs-lookup"><span data-stu-id="a2df4-190">**Find** or **Replace**</span></span>                  | [<span data-ttu-id="a2df4-191">*фрхукпрок*</span><span class="sxs-lookup"><span data-stu-id="a2df4-191">*FRHookProc*</span></span>](/windows/win32/api/commdlg/nc-commdlg-lpfrhookproc)                      |
| <span data-ttu-id="a2df4-192">**Шрифт**</span><span class="sxs-lookup"><span data-stu-id="a2df4-192">**Font**</span></span>                                 | [<span data-ttu-id="a2df4-193">*кфхукпрок*</span><span class="sxs-lookup"><span data-stu-id="a2df4-193">*CFHookProc*</span></span>](/windows/win32/api/commdlg/nc-commdlg-lpcfhookproc)                      |
| <span data-ttu-id="a2df4-194">**Открыть** или **Сохранить как** (обозреватель-стиль)</span><span class="sxs-lookup"><span data-stu-id="a2df4-194">**Open** or **Save As** (Explorer-style)</span></span> | [<span data-ttu-id="a2df4-195">*офнхукпрок*</span><span class="sxs-lookup"><span data-stu-id="a2df4-195">*OFNHookProc*</span></span>](/windows/win32/api/commdlg/nc-commdlg-lpofnhookproc)                    |
| <span data-ttu-id="a2df4-196">**Открыть** или **Сохранить как** (старый стиль)</span><span class="sxs-lookup"><span data-stu-id="a2df4-196">**Open** or **Save As** (Old-style)</span></span>      | <span data-ttu-id="a2df4-197">[*офнхукпроколдстиле*](/previous-versions/windows/desktop/legacy/ms646932(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="a2df4-197">[*OFNHookProcOldStyle*](/previous-versions/windows/desktop/legacy/ms646932(v=vs.85))</span></span> |
| <span data-ttu-id="a2df4-198">**Печать**</span><span class="sxs-lookup"><span data-stu-id="a2df4-198">**Print**</span></span>                                | [<span data-ttu-id="a2df4-199">*принсукпрок*</span><span class="sxs-lookup"><span data-stu-id="a2df4-199">*PrintHookProc*</span></span>](/windows/win32/api/commdlg/nc-commdlg-lpprinthookproc)                |
| <span data-ttu-id="a2df4-200">**Параметры страницы**</span><span class="sxs-lookup"><span data-stu-id="a2df4-200">**Page Setup**</span></span>                           | [<span data-ttu-id="a2df4-201">*пажесетуфук*</span><span class="sxs-lookup"><span data-stu-id="a2df4-201">*PageSetupHook*</span></span>](/windows/win32/api/commdlg/nc-commdlg-lppagesetuphook)                |



 

<span data-ttu-id="a2df4-202">В диалоговом окне « **Параметры страницы** » можно также указать процедуру-обработчик [*пажепаинсук*](/windows/win32/api/commdlg/nc-commdlg-lppagepainthook) .</span><span class="sxs-lookup"><span data-stu-id="a2df4-202">For the **Page Setup** dialog box, you can also specify a [*PagePaintHook*](/windows/win32/api/commdlg/nc-commdlg-lppagepainthook) hook procedure.</span></span> <span data-ttu-id="a2df4-203">Это специальная процедура-ловушка, которую можно использовать для настройки внешнего вида образца страницы, отображаемого в диалоговом окне « **Параметры страницы** ».</span><span class="sxs-lookup"><span data-stu-id="a2df4-203">This is a special hook procedure that you can use to customize the appearance of the sample page displayed by the **Page Setup** dialog box.</span></span>

> [!Note]  
> <span data-ttu-id="a2df4-204">Диалоговое окно « **Настройка печати** » заменено диалоговым окном « **Параметры страницы** ».</span><span class="sxs-lookup"><span data-stu-id="a2df4-204">The **Print Setup** dialog box has been superseded by the **Page Setup** dialog box.</span></span> <span data-ttu-id="a2df4-205">Приложения должны использовать диалоговое окно " **Параметры страницы** ".</span><span class="sxs-lookup"><span data-stu-id="a2df4-205">Applications should use the **Page Setup** dialog box.</span></span> <span data-ttu-id="a2df4-206">Однако для обеспечения совместимости функция [**принтдлг**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) по мере необходимости поддерживает отображение диалогового окна « **Настройка печати** ».</span><span class="sxs-lookup"><span data-stu-id="a2df4-206">However, for compatibility, the [**PrintDlg**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) function continues to support display of the **Print Setup** dialog box.</span></span> <span data-ttu-id="a2df4-207">Вы можете предоставить процедуру обработчика [*сетуфукпрок*](/windows/win32/api/commdlg/nc-commdlg-lpsetuphookproc) для диалогового окна « **Настройка печати** ».</span><span class="sxs-lookup"><span data-stu-id="a2df4-207">You can provide a [*SetupHookProc*](/windows/win32/api/commdlg/nc-commdlg-lpsetuphookproc) hook procedure for the **Print Setup** dialog box.</span></span>

 

## <a name="common-dialog-messages"></a><span data-ttu-id="a2df4-208">Сообщения общего диалогового окна</span><span class="sxs-lookup"><span data-stu-id="a2df4-208">Common Dialog Messages</span></span>

<span data-ttu-id="a2df4-209">В общих диалоговых окнах сообщения используются для уведомления процедуры окна или процедуры-обработчика при возникновении определенных событий.</span><span class="sxs-lookup"><span data-stu-id="a2df4-209">Common dialog boxes use messages to notify your window procedure or hook procedure when certain events occur.</span></span> <span data-ttu-id="a2df4-210">Кроме того, есть сообщения, которые можно отправить в общее диалоговое окно для получения сведений или для управления поведением или внешним видом диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="a2df4-210">In addition, there are messages that you can send to a common dialog box to retrieve information or to control the behavior or appearance of the dialog box.</span></span> <span data-ttu-id="a2df4-211">В этом разделе описаны общие сообщения диалогового окна, регистрируемые функцией [**регистервиндовмессаже**](/windows/desktop/api/winuser/nf-winuser-registerwindowmessagea) , сообщения, используемые в диалоговом окне **Шрифт** и диалоговое окно **Параметры страницы** , а также сообщения, используемые в диалоговых окнах **Открыть** и **Сохранить как** в стиле обозревателя.</span><span class="sxs-lookup"><span data-stu-id="a2df4-211">This section describes the common dialog messages registered by the [**RegisterWindowMessage**](/windows/desktop/api/winuser/nf-winuser-registerwindowmessagea) function, messages used by the **Font** dialog box and **Page Setup** dialog box, and messages used by the Explorer-style **Open** and **Save As** dialog boxes.</span></span>

<span data-ttu-id="a2df4-212">Библиотека общих диалоговых окон определяет набор строк сообщений.</span><span class="sxs-lookup"><span data-stu-id="a2df4-212">The Common Dialog Box Library defines a set of message strings.</span></span> <span data-ttu-id="a2df4-213">Можно передать константу, связанную с одной из этих строк сообщения, в [**регистервиндовмессаже**](/windows/desktop/api/winuser/nf-winuser-registerwindowmessagea) , чтобы получить идентификатор сообщения.</span><span class="sxs-lookup"><span data-stu-id="a2df4-213">You can pass a constant associated with one of these message strings to [**RegisterWindowMessage**](/windows/desktop/api/winuser/nf-winuser-registerwindowmessagea) to get a message identifier.</span></span> <span data-ttu-id="a2df4-214">Затем можно использовать идентификатор для обнаружения и обработки сообщений, отправленных из общего диалогового окна, или для отправки сообщений в общее диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="a2df4-214">You can then use the identifier to detect and process messages sent from a common dialog box, or to send messages to a common dialog box.</span></span> <span data-ttu-id="a2df4-215">В следующей таблице приведены константы сообщений и описание их использования.</span><span class="sxs-lookup"><span data-stu-id="a2df4-215">The following table shows the message constants and describes their use.</span></span>



| <span data-ttu-id="a2df4-216">контантс</span><span class="sxs-lookup"><span data-stu-id="a2df4-216">Contants</span></span>                               | <span data-ttu-id="a2df4-217">Использовать</span><span class="sxs-lookup"><span data-stu-id="a2df4-217">Use</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                    |
|----------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="a2df4-218">**колорокстринг**</span><span class="sxs-lookup"><span data-stu-id="a2df4-218">**COLOROKSTRING**</span></span>](colorokstring.md) | <span data-ttu-id="a2df4-219">Диалоговое окно **цвета** отправляет это сообщение в процедуру-обработчик, когда пользователь выбирает цвет и нажимает кнопку **ОК** .</span><span class="sxs-lookup"><span data-stu-id="a2df4-219">A **Color** dialog box sends this message to the hook procedure when the user selects a color and clicks the **OK** button.</span></span> <span data-ttu-id="a2df4-220">Процедура-обработчик может принять цвет или отклонить его и принудительно оставить диалоговое окно открытым.</span><span class="sxs-lookup"><span data-stu-id="a2df4-220">The hook procedure can accept the color, or reject it and force the dialog box to remain open.</span></span>                                                                                                                                                                                             |
| [<span data-ttu-id="a2df4-221">**филеокстринг**</span><span class="sxs-lookup"><span data-stu-id="a2df4-221">**FILEOKSTRING**</span></span>](fileokstring.md)   | <span data-ttu-id="a2df4-222">Диалоговое окно **Открыть** или **Сохранить как** отправляет это сообщение в процедуру-обработчик, когда пользователь выбирает имя файла и нажимает кнопку **ОК** .</span><span class="sxs-lookup"><span data-stu-id="a2df4-222">An **Open** or **Save As** dialog box sends this message to the hook procedure when the user selects a file name and clicks the **OK** button.</span></span> <span data-ttu-id="a2df4-223">Процедура-обработчик может принять имя файла или отклонить его и принудительно оставить диалоговое окно открытым.</span><span class="sxs-lookup"><span data-stu-id="a2df4-223">The hook procedure can accept the file name, or reject it and force the dialog box to remain open.</span></span> <span data-ttu-id="a2df4-224">Для диалоговых окон « **Открыть** » и « **Сохранить как** » в стиле обозревателя это сообщение было заменено сообщением уведомления [**\_ филеок CDN**](cdn-fileok.md) .</span><span class="sxs-lookup"><span data-stu-id="a2df4-224">For Explorer-style **Open** and **Save As** dialog boxes, this message has been superseded by the [**CDN\_FILEOK**](cdn-fileok.md) notification message.</span></span><br/> |
| [<span data-ttu-id="a2df4-225">**финдмсгстринг**</span><span class="sxs-lookup"><span data-stu-id="a2df4-225">**FINDMSGSTRING**</span></span>](findmsgstring.md) | <span data-ttu-id="a2df4-226">Диалоговое окно **Поиск** или **Замена** отправляет это сообщение в процедуру окна родительского окна, когда пользователь нажимает кнопку **Найти далее**, **заменять** или **заменить все** или закрывает диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="a2df4-226">A **Find** or **Replace** dialog box sends this message to the window procedure of its parent window when the user clicks the **Find Next**, **Replace**, or **Replace All**, or closes the dialog box.</span></span> <span data-ttu-id="a2df4-227">Параметр *lParam* сообщения является указателем на структуру [**финдреплаце**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) , содержащую входные данные пользователя.</span><span class="sxs-lookup"><span data-stu-id="a2df4-227">The message's *lParam* parameter is a pointer to a [**FINDREPLACE**](/windows/win32/api/commdlg/ns-commdlg-findreplacea) structure containing the user's input.</span></span>                                                                               |
| [<span data-ttu-id="a2df4-228">**хелпмсгстринг**</span><span class="sxs-lookup"><span data-stu-id="a2df4-228">**HELPMSGSTRING**</span></span>](helpmsgstring.md) | <span data-ttu-id="a2df4-229">Все общие диалоговые окна отправляют это сообщение в процедуру окна своего родительского окна, когда пользователь нажимает кнопку " **Справка** ".</span><span class="sxs-lookup"><span data-stu-id="a2df4-229">All common dialog boxes send this message to the window procedure of their parent window when the user clicks the **Help** button.</span></span> <span data-ttu-id="a2df4-230">Для диалоговых окон « **Открыть** » и « **Сохранить как** » в стиле обозревателя это сообщение было заменено сообщением с уведомлением в [**\_ справке CDN**](cdn-help.md) .</span><span class="sxs-lookup"><span data-stu-id="a2df4-230">For Explorer-style **Open** and **Save As** dialog boxes, this message has been superseded by the [**CDN\_HELP**](cdn-help.md) notification message.</span></span><br/>                                                                                                                    |
| [<span data-ttu-id="a2df4-231">**лбселчстринг**</span><span class="sxs-lookup"><span data-stu-id="a2df4-231">**LBSELCHSTRING**</span></span>](lbselchstring.md) | <span data-ttu-id="a2df4-232">Диалоговое окно **Открыть** или **Сохранить как** отправляет это сообщение в процедуру-обработчик, когда пользователь изменяет выбор в списке **имя файла** .</span><span class="sxs-lookup"><span data-stu-id="a2df4-232">An **Open** or **Save As** dialog box sends this message to the hook procedure when the user changes the selection in the **File Name** list box.</span></span> <span data-ttu-id="a2df4-233">Для диалоговых окон « **Открыть** » и « **Сохранить как** » в стиле обозревателя это сообщение было заменено сообщением уведомления [**\_ селчанже CDN**](cdn-selchange.md) .</span><span class="sxs-lookup"><span data-stu-id="a2df4-233">For Explorer-style **Open** and **Save As** dialog boxes, this message has been superseded by the [**CDN\_SELCHANGE**](cdn-selchange.md) notification message.</span></span><br/>                                                                                           |
| [<span data-ttu-id="a2df4-234">**сетргбстринг**</span><span class="sxs-lookup"><span data-stu-id="a2df4-234">**SETRGBSTRING**</span></span>](setrgbstring.md)   | <span data-ttu-id="a2df4-235">Процедура-обработчик может отправить это сообщение в диалоговое окно **цвета** , чтобы задать текущее выделение цветом.</span><span class="sxs-lookup"><span data-stu-id="a2df4-235">A hook procedure can send this message to a **Color** dialog box to set the current color selection.</span></span>                                                                                                                                                                                                                                                                                                                   |
| [<span data-ttu-id="a2df4-236">**шаревистринг**</span><span class="sxs-lookup"><span data-stu-id="a2df4-236">**SHAREVISTRING**</span></span>](sharevistring.md) | <span data-ttu-id="a2df4-237">Диалоговое окно **Открыть** или **Сохранить как** отправляет это сообщение в процедуру обработки, если при нажатии пользователем кнопки **ОК** возникает нарушение совместного доступа для выбранного файла.</span><span class="sxs-lookup"><span data-stu-id="a2df4-237">An **Open** or **Save As** dialog box sends this message to the hook procedure if a sharing violation occurs for the selected file when the user clicks the **OK** button.</span></span> <span data-ttu-id="a2df4-238">Для диалоговых окон « **Открыть** » и « **Сохранить как** » в стиле обозревателя это сообщение было заменено сообщением уведомления [**\_ шаревиолатион CDN**](cdn-shareviolation.md) .</span><span class="sxs-lookup"><span data-stu-id="a2df4-238">For Explorer-style **Open** and **Save As** dialog boxes, this message has been superseded by the [**CDN\_SHAREVIOLATION**](cdn-shareviolation.md) notification message.</span></span><br/>                                                        |



 

<span data-ttu-id="a2df4-239">Некоторые общие диалоговые окна отправляют и получают другие сообщения окна.</span><span class="sxs-lookup"><span data-stu-id="a2df4-239">Some common dialog boxes send and receive other window messages.</span></span> <span data-ttu-id="a2df4-240">Процедура обработчика для диалогового окна **шрифта** может отправить любое сообщение **\_ CHOOSEFONT \_ \* WM** в диалоговое окно **Шрифт** .</span><span class="sxs-lookup"><span data-stu-id="a2df4-240">The hook procedure for a **Font** dialog box can send any of the **WM\_CHOOSEFONT\_\*** messages to the **Font** dialog box.</span></span> <span data-ttu-id="a2df4-241">Дополнительные сведения см. в разделе [диалоговое окно "Шрифт"](font-dialog-box.md).</span><span class="sxs-lookup"><span data-stu-id="a2df4-241">For more information, see [Font Dialog Box](font-dialog-box.md).</span></span> <span data-ttu-id="a2df4-242">Диалоговое окно **Параметры страницы** отправляет сообщения **WM \_ PSD \_ \*** , если вы включили процедуру-обработчик [*пажепаинсук*](/windows/win32/api/commdlg/nc-commdlg-lppagepainthook) .</span><span class="sxs-lookup"><span data-stu-id="a2df4-242">The **Page Setup** dialog box sends the **WM\_PSD\_\*** messages if you have enabled a [*PagePaintHook*](/windows/win32/api/commdlg/nc-commdlg-lppagepainthook) hook procedure.</span></span> <span data-ttu-id="a2df4-243">Дополнительные сведения см. в разделе [диалоговое окно "Параметры страницы"](page-setup-dialog-box.md).</span><span class="sxs-lookup"><span data-stu-id="a2df4-243">For more information, see [Page Setup Dialog Box](page-setup-dialog-box.md).</span></span>

<span data-ttu-id="a2df4-244">Диалоговые окна обозревателя **Открыть** и **Сохранить как** поддерживают набор предопределенных сообщений.</span><span class="sxs-lookup"><span data-stu-id="a2df4-244">The Explorer-style **Open** and **Save As** dialog boxes support a set of predefined messages.</span></span> <span data-ttu-id="a2df4-245">К ним относятся сообщения уведомления, отправленные в виде сообщения [**WM \_ Notify**](../controls/wm-notify.md) в процедуру обработки, и сообщения, которые процедура-ловушка может отправить в диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="a2df4-245">These include notification messages sent in the form of a [**WM\_NOTIFY**](../controls/wm-notify.md) message to your hook procedure, and messages that your hook procedure can send to the dialog box.</span></span> <span data-ttu-id="a2df4-246">Полный список этих сообщений см. в разделе [процедуры перехватчика в стиле обозревателя](open-and-save-as-dialog-boxes.md).</span><span class="sxs-lookup"><span data-stu-id="a2df4-246">For a complete list of these messages, see [Explorer-Style Hook Procedures](open-and-save-as-dialog-boxes.md).</span></span>

## <a name="help-support"></a><span data-ttu-id="a2df4-247">Поддержка справки</span><span class="sxs-lookup"><span data-stu-id="a2df4-247">Help Support</span></span>

<span data-ttu-id="a2df4-248">Общие диалоговые окна предоставляют контекстно-зависимую справку для стандартных элементов управления диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="a2df4-248">Common dialog boxes provide context-sensitive help for the standard controls of the dialog box.</span></span> <span data-ttu-id="a2df4-249">Чтобы предоставить дополнительную справку для общего диалогового окна, можно отобразить кнопку **справки** и обработать сообщения, созданные при нажатии пользователем кнопки.</span><span class="sxs-lookup"><span data-stu-id="a2df4-249">To provide additional help for a common dialog box, you can display a **Help** button and process messages generated when the user clicks the button.</span></span> <span data-ttu-id="a2df4-250">Кнопка **Справка** является дополнением к контекстно-зависимой справке по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a2df4-250">The **Help** button is a supplement to the default context-sensitive help.</span></span> <span data-ttu-id="a2df4-251">Кнопка **Справка** полезна для описания общего назначения диалогового окна, применяемого в приложении.</span><span class="sxs-lookup"><span data-stu-id="a2df4-251">The **Help** button is useful for describing the general purpose of the dialog box as it applies to your application.</span></span>

-   [<span data-ttu-id="a2df4-252">Контекстно-зависимая справка</span><span class="sxs-lookup"><span data-stu-id="a2df4-252">Context-Sensitive Help</span></span>](#context-sensitive-help)
-   [<span data-ttu-id="a2df4-253">Кнопка "Справка"</span><span class="sxs-lookup"><span data-stu-id="a2df4-253">The Help Button</span></span>](#the-help-button)

### <a name="context-sensitive-help"></a><span data-ttu-id="a2df4-254">Справка по Context-Sensitive</span><span class="sxs-lookup"><span data-stu-id="a2df4-254">Context-Sensitive Help</span></span>

<span data-ttu-id="a2df4-255">Все общие диалоговые окна предоставляют контекстно-зависимую справку для стандартных элементов управления диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="a2df4-255">All common dialog boxes provide context-sensitive help for the standard controls of the dialog box.</span></span> <span data-ttu-id="a2df4-256">Пользователь может отображать справку для отдельных элементов управления любым из следующих способов:</span><span class="sxs-lookup"><span data-stu-id="a2df4-256">The user can display help for individual controls by any of the following methods:</span></span>

-   <span data-ttu-id="a2df4-257">Выбор элемента управления и нажатие клавиши F1.</span><span class="sxs-lookup"><span data-stu-id="a2df4-257">Selecting the control and pressing the F1 key.</span></span>
-   <span data-ttu-id="a2df4-258">Нажатие кнопки « **?** »</span><span class="sxs-lookup"><span data-stu-id="a2df4-258">Clicking the **?**</span></span> <span data-ttu-id="a2df4-259">в строке заголовка и затем щелкнув элемент управления.</span><span class="sxs-lookup"><span data-stu-id="a2df4-259">button in the title bar and subsequently clicking on a control.</span></span>
-   <span data-ttu-id="a2df4-260">Щелчок правой кнопкой мыши над элементом управления.</span><span class="sxs-lookup"><span data-stu-id="a2df4-260">Clicking the right mouse button over a control.</span></span>

<span data-ttu-id="a2df4-261">Если диалоговое окно настраивается путем добавления новых элементов управления, необходимо также расширить поддержку справки для этих элементов управления, обрабатывая запросы для справки в процедуре обработки.</span><span class="sxs-lookup"><span data-stu-id="a2df4-261">If you customize a dialog box by adding new controls, you must also extend help support for these controls by processing requests for help in the hook procedure.</span></span> <span data-ttu-id="a2df4-262">Процедура-обработчик получает следующие сообщения, когда пользователь запрашивает справку.</span><span class="sxs-lookup"><span data-stu-id="a2df4-262">The hook procedure receives the following messages when the user requests help.</span></span>



| <span data-ttu-id="a2df4-263">Рекомендуемые действия</span><span class="sxs-lookup"><span data-stu-id="a2df4-263">User action</span></span>                                                           | <span data-ttu-id="a2df4-264">Сообщение</span><span class="sxs-lookup"><span data-stu-id="a2df4-264">Message</span></span>                                      |
|-----------------------------------------------------------------------|----------------------------------------------|
| <span data-ttu-id="a2df4-265">Щелкните правой кнопкой мыши на элементе управления.</span><span class="sxs-lookup"><span data-stu-id="a2df4-265">Click the right mouse button over a control.</span></span>                          | [<span data-ttu-id="a2df4-266">**WM \_ CONTEXTMENU**</span><span class="sxs-lookup"><span data-stu-id="a2df4-266">**WM\_CONTEXTMENU**</span></span>](/windows/desktop/menurc/wm-contextmenu) |
| <span data-ttu-id="a2df4-267">Нажата клавиша F1.</span><span class="sxs-lookup"><span data-stu-id="a2df4-267">Pressed the F1 key.</span></span>                                                   | [<span data-ttu-id="a2df4-268">**\_Справка WM**</span><span class="sxs-lookup"><span data-stu-id="a2df4-268">**WM\_HELP**</span></span>](../shell/wm-help.md)               |
| <span data-ttu-id="a2df4-269">Щелкнули **?**</span><span class="sxs-lookup"><span data-stu-id="a2df4-269">Clicked the **?**</span></span> <span data-ttu-id="a2df4-270">в строке заголовка, а затем щелкните элемент управления.</span><span class="sxs-lookup"><span data-stu-id="a2df4-270">button on the title bar and then clicked a control.</span></span> | [<span data-ttu-id="a2df4-271">**\_Справка WM**</span><span class="sxs-lookup"><span data-stu-id="a2df4-271">**WM\_HELP**</span></span>](../shell/wm-help.md)               |



 

<span data-ttu-id="a2df4-272">Эти сообщения следует обрабатывать для добавленных элементов управления, но позволить диалоговому окну по умолчанию обрабатывать сообщения для стандартных элементов управления.</span><span class="sxs-lookup"><span data-stu-id="a2df4-272">You should process these messages for the controls you have added, but let the default dialog box procedure process the messages for the standard controls.</span></span> <span data-ttu-id="a2df4-273">Дополнительные сведения об обработке этих сообщений см. в [справке](/previous-versions/windows/desktop/legacy/bb776786(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="a2df4-273">For more information about how to process these messages, see [Help](/previous-versions/windows/desktop/legacy/bb776786(v=vs.85)).</span></span>

### <a name="the-help-button"></a><span data-ttu-id="a2df4-274">Кнопка "Справка"</span><span class="sxs-lookup"><span data-stu-id="a2df4-274">The Help Button</span></span>

<span data-ttu-id="a2df4-275">Можно отобразить кнопку **справки** в любом из общих диалоговых окон, задав значение **SHOWHELP** в элементе **flags** структуры инициализации для диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="a2df4-275">You can display a **Help** button in any of the common dialog boxes by setting a **SHOWHELP** value in the **Flags** member of the initialization structure for the dialog box.</span></span> <span data-ttu-id="a2df4-276">Если отображается кнопка **Справка** , необходимо обработать запрос пользователя для получения справки.</span><span class="sxs-lookup"><span data-stu-id="a2df4-276">If you display the **Help** button, you must process the user's request for help.</span></span> <span data-ttu-id="a2df4-277">Обработку можно выполнить либо в одной из процедур окна приложения, либо в процедуре обработки диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="a2df4-277">The processing can be done either in one of your application's window procedures or in a hook procedure for the dialog box.</span></span> <span data-ttu-id="a2df4-278">Как правило, запрос на помощь обрабатывается вызовом функции [**WinHelp**](/windows/win32/api/winuser/nf-winuser-winhelpa) .</span><span class="sxs-lookup"><span data-stu-id="a2df4-278">Typically, you would process the request for help by calling the [**WinHelp**](/windows/win32/api/winuser/nf-winuser-winhelpa) function.</span></span>

<span data-ttu-id="a2df4-279">Для обработки сообщений справки в одной из оконных процедур необходимо получить идентификатор сообщения для строки, определяемой значением [**хелпмсгстринг**](helpmsgstring.md) , и определить окно для получения сообщений.</span><span class="sxs-lookup"><span data-stu-id="a2df4-279">To process help messages in one of your window procedures, you must get a message identifier for the string defined by the [**HELPMSGSTRING**](helpmsgstring.md) value and identify the window to receive messages.</span></span> <span data-ttu-id="a2df4-280">Чтобы получить идентификатор сообщения, укажите **хелпмсгстринг** в качестве параметра в вызове функции [**регистервиндовмессаже**](/windows/desktop/api/winuser/nf-winuser-registerwindowmessagea) .</span><span class="sxs-lookup"><span data-stu-id="a2df4-280">To get the message identifier, specify **HELPMSGSTRING** as the parameter in a call to the [**RegisterWindowMessage**](/windows/desktop/api/winuser/nf-winuser-registerwindowmessagea) function.</span></span> <span data-ttu-id="a2df4-281">При создании диалогового окна используйте элемент **хвндовнер** структуры инициализации диалогового окна, чтобы указать окно, которое будет принимать сообщения.</span><span class="sxs-lookup"><span data-stu-id="a2df4-281">When you create the dialog box, use the **hwndOwner** member of the dialog box initialization structure to identify the window that is to receive the messages.</span></span> <span data-ttu-id="a2df4-282">Процедура диалогового окна отправляет сообщение в процедуру окна каждый раз, когда пользователь нажимает кнопку « **Справка** ».</span><span class="sxs-lookup"><span data-stu-id="a2df4-282">The dialog box procedure sends the message to the window procedure whenever the user clicks the **Help** button.</span></span>

<span data-ttu-id="a2df4-283">Для обработки сообщений справки в процедуре обработки необходимо обработать [**\_ командное сообщение WM**](/windows/desktop/menurc/wm-command) .</span><span class="sxs-lookup"><span data-stu-id="a2df4-283">To process help messages in a hook procedure, you should process the [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) message.</span></span> <span data-ttu-id="a2df4-284">Процедура-обработчик предоставляет справку, если параметр *wParam* этого сообщения указывает, что пользователь щелкнул кнопку " **Справка** ".</span><span class="sxs-lookup"><span data-stu-id="a2df4-284">The hook procedure provides help if the *wParam* parameter of this message indicates that the user clicked the **Help** button.</span></span> <span data-ttu-id="a2df4-285">Идентификатор кнопки **справки** — это константа **пшхелп** , определенная в файле длгс. h.</span><span class="sxs-lookup"><span data-stu-id="a2df4-285">The identifier of the **Help** button is the **pshHelp** constant defined in the Dlgs.h file.</span></span>

<span data-ttu-id="a2df4-286">Процедуры-обработчики для диалоговых окон " **Открыть** " и " **Сохранить как** " в стиле обозревателя не получают [**\_ Командные сообщения WM**](/windows/desktop/menurc/wm-command) для кнопки " **Справка** ".</span><span class="sxs-lookup"><span data-stu-id="a2df4-286">Hook procedures for the Explorer-style **Open** and **Save As** dialog boxes do not receive [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) messages for the **Help** button.</span></span> <span data-ttu-id="a2df4-287">Вместо этого при нажатии кнопки « **Справка** » диалоговое окно отправляет сообщение с уведомлением о [**\_ помощи CDN**](cdn-help.md) в процедуру обработки.</span><span class="sxs-lookup"><span data-stu-id="a2df4-287">Instead, the dialog box sends a [**CDN\_HELP**](cdn-help.md) notification message to the hook procedure when the **Help** button is clicked.</span></span>

 

