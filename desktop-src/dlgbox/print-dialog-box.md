---
title: Диалоговое окно «Печать»
description: Диалоговое окно печать позволяет пользователю выбрать параметры для конкретного задания печати.
ms.assetid: 34f69b25-8a89-4322-af4c-a80b85a4a973
keywords:
- Пользовательский интерфейс Windows, ввод данных пользователем
- Пользовательский интерфейс Windows, Библиотека общих диалоговых окон
- ввод пользователя, Библиотека общих диалоговых окон
- запись вводимых пользователем данных, Библиотека общих диалоговых окон
- Библиотека общих диалоговых окон
- Общие диалоговые окна
- Печать - диалоговое окно
- Диалоговое окно «Настройка печати»
- Настройка диалогового окна «Печать»
- стандартные диалоговые окна
- диалоговые окна, печать
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4fae1dd244391ea16478a0cb4f10803cf622dc64
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104134531"
---
# <a name="print-dialog-box"></a><span data-ttu-id="e44e2-114">Диалоговое окно «Печать»</span><span class="sxs-lookup"><span data-stu-id="e44e2-114">Print Dialog Box</span></span>

<span data-ttu-id="e44e2-115">Диалоговое окно **Печать** позволяет пользователю выбрать параметры для конкретного задания печати.</span><span class="sxs-lookup"><span data-stu-id="e44e2-115">The **Print** dialog box lets the user select options for a particular print job.</span></span> <span data-ttu-id="e44e2-116">Например, пользователь может указать используемый принтер, диапазон печатаемых страниц и количество копий.</span><span class="sxs-lookup"><span data-stu-id="e44e2-116">For example, the user can specify the printer to use, the range of pages to print, and the number of copies.</span></span>

<span data-ttu-id="e44e2-117">Функцию [**принтдлжекс**](/previous-versions/windows/desktop/legacy/ms646942(v=vs.85)) можно использовать для отображения страницы [свойств печати](print-property-sheet.md), содержащей страницу « **Общие** », содержащую элементы управления, аналогичные диалоговому окну « **Печать** ».</span><span class="sxs-lookup"><span data-stu-id="e44e2-117">You can use the [**PrintDlgEx**](/previous-versions/windows/desktop/legacy/ms646942(v=vs.85)) function to display a [Print Property Sheet](print-property-sheet.md), which has a **General** page containing controls similar to the **Print** dialog box.</span></span> <span data-ttu-id="e44e2-118">Страница свойств также может содержать дополнительные страницы свойств, относящиеся к конкретному приложению и драйверу, после страницы **Общие** .</span><span class="sxs-lookup"><span data-stu-id="e44e2-118">The property sheet can also have additional application-specific and driver-specific property pages following the **General** page.</span></span>

<span data-ttu-id="e44e2-119">Создание и отображение диалогового окна **Печать** осуществляется путем инициализации структуры [**принтдлг**](/windows/win32/api/commdlg/ns-commdlg-printdlga) и передачи структуры в функцию [**принтдлг**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="e44e2-119">You create and display a **Print** dialog box by initializing a [**PRINTDLG**](/windows/win32/api/commdlg/ns-commdlg-printdlga) structure and passing the structure to the [**PrintDlg**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) function.</span></span>

<span data-ttu-id="e44e2-120">На следующем рисунке показано типичное диалоговое окно **печати** .</span><span class="sxs-lookup"><span data-stu-id="e44e2-120">The following illustration shows a typical **Print** dialog box.</span></span>

![диалоговое окно «Печать»](images/printdialogboxxp.png)

<span data-ttu-id="e44e2-122">Если пользователь нажмет кнопку **ОК** , [**Принтдлг**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) возвращает **значение true** и использует структуру [**принтдлг**](/windows/win32/api/commdlg/ns-commdlg-printdlga) для возврата сведений о выборе пользователя.</span><span class="sxs-lookup"><span data-stu-id="e44e2-122">If the user clicks the **OK** button, [**PrintDlg**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) returns **TRUE** and uses the [**PRINTDLG**](/windows/win32/api/commdlg/ns-commdlg-printdlga) structure to return information about the user's selections.</span></span> <span data-ttu-id="e44e2-123">Например, члены **хдевмоде** и **хдевнамес** обычно возвращают глобальные дескрипторы памяти для структур и [**DEVNAMES**](/windows/win32/api/commdlg/ns-commdlg-devnames) .</span><span class="sxs-lookup"><span data-stu-id="e44e2-123">For example, the **hDevMode** and **hDevNames** members typically return global memory handles for and [**DEVNAMES**](/windows/win32/api/commdlg/ns-commdlg-devnames) structures.</span></span> <span data-ttu-id="e44e2-124">Сведения в этих структурах можно использовать для создания контекста устройства или информационного контекста для выбранного принтера.</span><span class="sxs-lookup"><span data-stu-id="e44e2-124">You can use the information in these structures to create a device context or an information context for the selected printer.</span></span>

<span data-ttu-id="e44e2-125">Если пользователь отменяет диалоговое окно **Печать** или возникает ошибка, [**Принтдлг**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) возвращает **значение false**.</span><span class="sxs-lookup"><span data-stu-id="e44e2-125">If the user cancels the **Print** dialog box or an error occurs, [**PrintDlg**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) returns **FALSE**.</span></span> <span data-ttu-id="e44e2-126">Причину ошибки можно определить с помощью функции [**коммдлжекстендедеррор**](/windows/desktop/api/Commdlg/nf-commdlg-commdlgextendederror) , чтобы получить расширенное значение ошибки.</span><span class="sxs-lookup"><span data-stu-id="e44e2-126">You can determine the cause of an error by using the [**CommDlgExtendedError**](/windows/desktop/api/Commdlg/nf-commdlg-commdlgextendederror) function to retrieve the extended error value.</span></span>

<span data-ttu-id="e44e2-127">Диалоговое окно **Печать** содержит группу **диапазонов печати** переключателей, указывающих, хочет ли пользователь печатать все страницы, диапазон страниц или только выделенный текст.</span><span class="sxs-lookup"><span data-stu-id="e44e2-127">The **Print** dialog box includes a **Print Range** group of radio buttons that indicate whether the user wants to print all pages, a range of pages, or only the selected text.</span></span> <span data-ttu-id="e44e2-128">Перед вызовом [**принтдлг**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85))можно задать один из флагов **PD \_ ALLPAGES**, **PD \_ Selection** или **PD \_ паженумс** , чтобы указать, какая кнопка изначально выбрана.</span><span class="sxs-lookup"><span data-stu-id="e44e2-128">Before calling [**PrintDlg**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)), you can set one of the **PD\_ALLPAGES**, **PD\_SELECTION**, or **PD\_PAGENUMS** flags to indicate which button is initially selected.</span></span> <span data-ttu-id="e44e2-129">Когда **принтдлг** возвращает **значение true**, функция устанавливает один из этих флагов для указания выбора пользователя.</span><span class="sxs-lookup"><span data-stu-id="e44e2-129">When **PrintDlg** returns **TRUE**, the function sets one of these flags to indicate the user's selections.</span></span> <span data-ttu-id="e44e2-130">Если задано значение **PD \_ паженумс** , то элементы **Нфромпаже** и **нтопаже** структуры [**принтдлг**](/windows/win32/api/commdlg/ns-commdlg-printdlga) содержат начальную и конечную страницы, указанные пользователем.</span><span class="sxs-lookup"><span data-stu-id="e44e2-130">If **PD\_PAGENUMS** is set, the **nFromPage** and **nToPage** members of the [**PRINTDLG**](/windows/win32/api/commdlg/ns-commdlg-printdlga) structure contain the starting and ending pages specified by the user.</span></span> <span data-ttu-id="e44e2-131">Чтобы отключить переключатель **страницы** и связанные **с** ним элементы управления и **для** редактирования, установите флаг **PD \_ нопаженумс** .</span><span class="sxs-lookup"><span data-stu-id="e44e2-131">To disable the **Pages** radio button and its associated **From** and **To** edit controls, set the **PD\_NOPAGENUMS** flag.</span></span> <span data-ttu-id="e44e2-132">Чтобы отключить переключатель « **Выбор** », установите флаг « **PD \_** ».</span><span class="sxs-lookup"><span data-stu-id="e44e2-132">To disable the **Selection** radio button, set the **PD\_NOSELECTION** flag.</span></span>

<span data-ttu-id="e44e2-133">Диалоговое окно содержит элемент управления "поле ввода", в котором пользователь может ввести число печатаемых копий.</span><span class="sxs-lookup"><span data-stu-id="e44e2-133">The dialog box includes an edit control in which the user can type the number of copies to print.</span></span> <span data-ttu-id="e44e2-134">Если элемент **хдевмоде** структуры [**принтдлг**](/windows/win32/api/commdlg/ns-commdlg-printdlga) имеет значение, отличное от **null**, то элемент **дмкопиес** структуры указывает начальное значение для этого элемента управления "поле ввода".</span><span class="sxs-lookup"><span data-stu-id="e44e2-134">If the **hDevMode** member of the [**PRINTDLG**](/windows/win32/api/commdlg/ns-commdlg-printdlga) structure is non-**NULL**, the **dmCopies** member of the structure specifies the initial value for this edit control.</span></span> <span data-ttu-id="e44e2-135">Если **хдевмоде** имеет **значение NULL**, то элемент **нкопиес** структуры **принтдлг** указывает начальное значение.</span><span class="sxs-lookup"><span data-stu-id="e44e2-135">If **hDevMode** is **NULL**, the **nCopies** member of the **PRINTDLG** structure specifies the initial value.</span></span> <span data-ttu-id="e44e2-136">Когда [**принтдлг**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) возвращает, **нкопиес** обычно указывает количество копий, указанное пользователем.</span><span class="sxs-lookup"><span data-stu-id="e44e2-136">When [**PrintDlg**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) returns, **nCopies** typically indicates the number of copies specified by the user.</span></span> <span data-ttu-id="e44e2-137">Однако если установить флаг **PD \_ уседевмодекопиесандколлате** при создании диалогового окна, **нкопиес** всегда имеет значение 1 при возвращении, а элемент **дмкопиес** [**DEVMODE**](/windows/win32/api/wingdi/ns-wingdi-devmodea) указывает число печатаемых копий.</span><span class="sxs-lookup"><span data-stu-id="e44e2-137">However, if you set the **PD\_USEDEVMODECOPIESANDCOLLATE** flag when you create the dialog box, **nCopies** is always set to 1 on return and the **dmCopies** member of [**DEVMODE**](/windows/win32/api/wingdi/ns-wingdi-devmodea) indicates the number of copies to print.</span></span>

<span data-ttu-id="e44e2-138">Флажок **COLLATE** указывает, хочет ли пользователь выполнить сортировку страниц, если печатается несколько копий.</span><span class="sxs-lookup"><span data-stu-id="e44e2-138">The **Collate** check box indicates whether the user wants to collate the pages if multiple copies are being printed.</span></span> <span data-ttu-id="e44e2-139">Флаг **\_ сортировки параметров PD** устанавливается, если установлен флажок **COLLATE** .</span><span class="sxs-lookup"><span data-stu-id="e44e2-139">The **PD\_COLLATE** flag is set if the **Collate** check box is selected.</span></span> <span data-ttu-id="e44e2-140">Если приложение не поддерживает несколько копий или смоделированные параметры сортировки, установите флаг **PD \_ уседевмодекопиесандколлате** в элементе **flags** структуры [**принтдлг**](/windows/win32/api/commdlg/ns-commdlg-printdlga) .</span><span class="sxs-lookup"><span data-stu-id="e44e2-140">If your application does not support multiple copies or simulated collation, set the **PD\_USEDEVMODECOPIESANDCOLLATE** flag in the **Flags** member of the [**PRINTDLG**](/windows/win32/api/commdlg/ns-commdlg-printdlga) structure.</span></span> <span data-ttu-id="e44e2-141">Если драйвер принтера не поддерживает несколько копий и параметров сортировки, флажок **Параметры сортировки** и **число копий** элемента управления "поле ввода" отключаются.</span><span class="sxs-lookup"><span data-stu-id="e44e2-141">This disables the **Collate** check box and the **Number of Copies** edit control unless the printer driver supports multiple copies and collation.</span></span>

<span data-ttu-id="e44e2-142">Флажок **Печать в файл** указывает, хочет ли пользователь отправить выходные данные в файл, а не на принтер.</span><span class="sxs-lookup"><span data-stu-id="e44e2-142">The **Print To File** check box indicates whether the user wants to send output to a file rather than to a printer.</span></span> <span data-ttu-id="e44e2-143">Можно установить флаг **PD \_ PRINTTOFILE** , чтобы был изначально установлен флажок.</span><span class="sxs-lookup"><span data-stu-id="e44e2-143">You can set the **PD\_PRINTTOFILE** flag so the check box is initially selected.</span></span> <span data-ttu-id="e44e2-144">Чтобы скрыть этот флажок, установите флаг **PD \_ хидепринттофиле** .</span><span class="sxs-lookup"><span data-stu-id="e44e2-144">To hide the check box, set the **PD\_HIDEPRINTTOFILE** flag.</span></span> <span data-ttu-id="e44e2-145">Чтобы отключить его, установите флаг **PD \_ дисаблепринттофиле** .</span><span class="sxs-lookup"><span data-stu-id="e44e2-145">To disable it, set the **PD\_DISABLEPRINTTOFILE** flag.</span></span> <span data-ttu-id="e44e2-146">Если пользователь выбирает параметр **Print to File (печать в файл** ), [**Принтдлг**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) устанавливает флаг **PD \_ PRINTTOFILE** и возвращает «file:» в смещении, указанном элементом **ваутпутоффсет** структуры [**DEVNAMES**](/windows/win32/api/commdlg/ns-commdlg-devnames) .</span><span class="sxs-lookup"><span data-stu-id="e44e2-146">If the user selects the **Print To File** option, [**PrintDlg**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) sets the **PD\_PRINTTOFILE** flag and returns "FILE:" at the offset indicated by the **wOutputOffset** member of the [**DEVNAMES**](/windows/win32/api/commdlg/ns-commdlg-devnames) structure.</span></span> <span data-ttu-id="e44e2-147">При вызове функции для запуска операции печати укажите эту строку "FILE:" в элементе **лпсзаутпут** структуры.</span><span class="sxs-lookup"><span data-stu-id="e44e2-147">When you call the function to start the printing operation, specify this "FILE:" string in the **lpszOutput** member of the structure.</span></span> <span data-ttu-id="e44e2-148">Указание этой строки приводит к тому, что подсистема печати запрашивает у пользователя имя выходного файла.</span><span class="sxs-lookup"><span data-stu-id="e44e2-148">Specifying this string causes the print subsystem to query the user for the name of the output file.</span></span>

<span data-ttu-id="e44e2-149">По умолчанию в диалоговом окне « **Печать** » изначально отображаются сведения о текущем принтере по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="e44e2-149">By default, the **Print** dialog box initially displays information about the current default printer.</span></span> <span data-ttu-id="e44e2-150">Чтобы отобразить сведения для другого установленного принтера, инициализируйте и [**DEVNAMES**](/windows/win32/api/commdlg/ns-commdlg-devnames) структуру и назначьте структуре глобальный маркер памяти для элементов **хдевмоде** и **хдевнамес** .</span><span class="sxs-lookup"><span data-stu-id="e44e2-150">To display information for another installed printer, initialize a and a [**DEVNAMES**](/windows/win32/api/commdlg/ns-commdlg-devnames) structure and assign the global memory handle to the structure to the **hDevMode** and **hDevNames** members.</span></span> <span data-ttu-id="e44e2-151">Имя устройства, указанное в элементе **дмдевиценаме** структуры [**DEVMODE**](/windows/win32/api/wingdi/ns-wingdi-devmodea) и в члене **вдривероффсет** структуры **DEVNAMES** , должно определять устройство принтера, которое также указано в \[ разделе Devices \] файла Win.ini.</span><span class="sxs-lookup"><span data-stu-id="e44e2-151">The device name you specify in the **dmDeviceName** member of the [**DEVMODE**](/windows/win32/api/wingdi/ns-wingdi-devmodea) structure and in the **wDriverOffset** member of the **DEVNAMES** structure must identify a printer device that is also listed in the \[Devices\] section of the Win.ini file.</span></span> <span data-ttu-id="e44e2-152">Если устройство отсутствует в списке, [**принтдлг**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) возвращает ошибку.</span><span class="sxs-lookup"><span data-stu-id="e44e2-152">If the device is not listed, [**PrintDlg**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) returns an error.</span></span>

<span data-ttu-id="e44e2-153">Можно направить [**принтдлг**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) для создания контекста устройства или информационного контекста для принтера, установив флаг **PD \_ ретурндк** или PD в **элементе \_** **flags** структуры [**принтдлг**](/windows/win32/api/commdlg/ns-commdlg-printdlga) .</span><span class="sxs-lookup"><span data-stu-id="e44e2-153">You can direct [**PrintDlg**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) to create a device context or information context for the printer by setting the **PD\_RETURNDC** or **PD\_RETURNIC** flag in the **Flags** member of the [**PRINTDLG**](/windows/win32/api/commdlg/ns-commdlg-printdlga) structure.</span></span> <span data-ttu-id="e44e2-154">Функция возвращает маркер контекста устройства или информационного контекста в члене **HDC** .</span><span class="sxs-lookup"><span data-stu-id="e44e2-154">The function returns a handle to the device context or information context in the **hDC** member.</span></span> <span data-ttu-id="e44e2-155">Если вы используете флаг **PD \_ ретурндк** , можно использовать контекст устройства для создания выходных данных для принтера.</span><span class="sxs-lookup"><span data-stu-id="e44e2-155">If you use the **PD\_RETURNDC** flag, you can use the device context to generate output for the printer.</span></span>

<span data-ttu-id="e44e2-156">Чтобы получить сведения о принтере по умолчанию без отображения диалогового окна « **Печать** », установите флаг **PD \_ ретурндефаулт** .</span><span class="sxs-lookup"><span data-stu-id="e44e2-156">To retrieve information about the default printer without displaying the **Print** dialog box, set the **PD\_RETURNDEFAULT** flag.</span></span> <span data-ttu-id="e44e2-157">В этом случае [**принтдлг**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) возвращается сразу после задания элементов **хдевмоде** и **хдевнамес** для обработки структур, содержащих эти сведения.</span><span class="sxs-lookup"><span data-stu-id="e44e2-157">In this case, [**PrintDlg**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) returns immediately after setting the **hDevMode** and **hDevNames** members to handles for structures containing the information.</span></span>

<span data-ttu-id="e44e2-158">По умолчанию [**принтдлг**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) отображает окна сообщений при возникновении ошибок.</span><span class="sxs-lookup"><span data-stu-id="e44e2-158">By default, [**PrintDlg**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) displays message boxes when errors occur.</span></span> <span data-ttu-id="e44e2-159">Например, функция отображает сообщение об ошибке, если принтеры не установлены.</span><span class="sxs-lookup"><span data-stu-id="e44e2-159">For example, the function displays an error message if no printers are installed.</span></span> <span data-ttu-id="e44e2-160">Чтобы функция не отображала эти предупреждающие сообщения, установите флаг " **PD \ \_ предупреждение** ".</span><span class="sxs-lookup"><span data-stu-id="e44e2-160">To prevent the function from displaying these warning messages, set the **PD\_NOWARNING** flag.</span></span>

<span data-ttu-id="e44e2-161">В этом разделе рассматриваются следующие темы.</span><span class="sxs-lookup"><span data-stu-id="e44e2-161">The following topics are discussed in this section.</span></span>

-   [<span data-ttu-id="e44e2-162">Настройка диалогового окна «Печать»</span><span class="sxs-lookup"><span data-stu-id="e44e2-162">Customizing the Print Dialog Box</span></span>](#customizing-the-print-dialog-box)
-   [<span data-ttu-id="e44e2-163">Диалоговое окно «Настройка печати»</span><span class="sxs-lookup"><span data-stu-id="e44e2-163">Print Setup Dialog Box</span></span>](#print-setup-dialog-box)

## <a name="customizing-the-print-dialog-box"></a><span data-ttu-id="e44e2-164">Настройка диалогового окна «Печать»</span><span class="sxs-lookup"><span data-stu-id="e44e2-164">Customizing the Print Dialog Box</span></span>

<span data-ttu-id="e44e2-165">Можно указать пользовательский шаблон для диалогового окна **Печать** , например, если требуется включить дополнительные элементы управления, которые являются уникальными для приложения.</span><span class="sxs-lookup"><span data-stu-id="e44e2-165">You can provide a custom template for the **Print** dialog box, for example, if you want to include additional controls that are unique to your application.</span></span> <span data-ttu-id="e44e2-166">Функция [**принтдлг**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) использует пользовательский шаблон вместо шаблона по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="e44e2-166">The [**PrintDlg**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) function uses your custom template in place of the default template.</span></span>

<span data-ttu-id="e44e2-167">Чтобы предоставить пользовательский шаблон для диалогового окна « **Печать** », выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="e44e2-167">To provide a custom template for the **Print** dialog box:</span></span>

1.  <span data-ttu-id="e44e2-168">Создайте пользовательский шаблон, изменив шаблон по умолчанию, указанный в файле Прнсетуп. DLG.</span><span class="sxs-lookup"><span data-stu-id="e44e2-168">Create the custom template by modifying the default template specified in the Prnsetup.dlg file.</span></span> <span data-ttu-id="e44e2-169">Идентификаторы элементов управления, используемые в шаблоне диалогового окна **печати** по умолчанию, определяются в файле длгс. h.</span><span class="sxs-lookup"><span data-stu-id="e44e2-169">The control identifiers used in the default **Print** dialog template are defined in the Dlgs.h file.</span></span>
2.  <span data-ttu-id="e44e2-170">Используйте структуру [**принтдлг**](/windows/win32/api/commdlg/ns-commdlg-printdlga) , чтобы включить шаблон следующим образом:</span><span class="sxs-lookup"><span data-stu-id="e44e2-170">Use the [**PRINTDLG**](/windows/win32/api/commdlg/ns-commdlg-printdlga) structure to enable the template as follows:</span></span>
    -   <span data-ttu-id="e44e2-171">Если пользовательский шаблон является ресурсом в приложении или библиотеке динамической компоновки, установите флаг **PD \_ енаблепринттемплате** в элементе **flags** .</span><span class="sxs-lookup"><span data-stu-id="e44e2-171">If your custom template is a resource in an application or dynamic-link library, set the **PD\_ENABLEPRINTTEMPLATE** flag in the **Flags** member.</span></span> <span data-ttu-id="e44e2-172">Используйте элементы **HINSTANCE** и **лппринттемплатенаме** структуры для задания имени модуля и ресурса.</span><span class="sxs-lookup"><span data-stu-id="e44e2-172">Use the **hInstance** and **lpPrintTemplateName** members of the structure to identify the module and resource name.</span></span>

        <span data-ttu-id="e44e2-173">-Или-</span><span class="sxs-lookup"><span data-stu-id="e44e2-173">-Or-</span></span>

    -   <span data-ttu-id="e44e2-174">Если пользовательский шаблон уже находится в памяти, установите флаг **PD \_ енаблепринттемплатехандле** .</span><span class="sxs-lookup"><span data-stu-id="e44e2-174">If your custom template is already in memory, set the **PD\_ENABLEPRINTTEMPLATEHANDLE** flag.</span></span> <span data-ttu-id="e44e2-175">Используйте элемент **хпринттемплате** для задания объекта памяти, содержащего шаблон.</span><span class="sxs-lookup"><span data-stu-id="e44e2-175">Use the **hPrintTemplate** member to identify the memory object that contains the template.</span></span>

<span data-ttu-id="e44e2-176">Для диалогового окна « **Печать** » можно предоставить процедуру обработчика [**принсукпрок**](/windows/win32/api/commdlg/nc-commdlg-lpprinthookproc) .</span><span class="sxs-lookup"><span data-stu-id="e44e2-176">You can provide a [**PrintHookProc**](/windows/win32/api/commdlg/nc-commdlg-lpprinthookproc) hook procedure for the **Print** dialog box.</span></span> <span data-ttu-id="e44e2-177">Процедура-обработчик может обрабатывать сообщения, отправленные в диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="e44e2-177">The hook procedure can process messages sent to the dialog box.</span></span> <span data-ttu-id="e44e2-178">Он также может отсылать сообщения в диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="e44e2-178">It can also send messages to the dialog box.</span></span> <span data-ttu-id="e44e2-179">При использовании пользовательского шаблона для определения дополнительных элементов управления необходимо предоставить процедуру-обработчик для обработки входных данных для элементов управления.</span><span class="sxs-lookup"><span data-stu-id="e44e2-179">If you use a custom template to define additional controls, you must provide a hook procedure to process input for your controls.</span></span>

<span data-ttu-id="e44e2-180">Чтобы включить процедуру-обработчик для диалогового окна « **Печать** », выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="e44e2-180">To enable a hook procedure for the **Print** dialog box:</span></span>

1.  <span data-ttu-id="e44e2-181">Установите флаг **PD \_ енаблепринсук** в элементе **flags** структуры [**принтдлг**](/windows/win32/api/commdlg/ns-commdlg-printdlga) .</span><span class="sxs-lookup"><span data-stu-id="e44e2-181">Set the **PD\_ENABLEPRINTHOOK** flag in the **Flags** member of the [**PRINTDLG**](/windows/win32/api/commdlg/ns-commdlg-printdlga) structure.</span></span>
2.  <span data-ttu-id="e44e2-182">Укажите адрес процедуры-обработчика в элементе **лпфнпринсук** .</span><span class="sxs-lookup"><span data-stu-id="e44e2-182">Specify the address of the hook procedure in the **lpfnPrintHook** member.</span></span>

<span data-ttu-id="e44e2-183">После обработки сообщения [**WM \_ инитдиалог**](wm-initdialog.md) процедура диалогового окна отправляет сообщение **WM \_ инитдиалог** в процедуру-обработчик.</span><span class="sxs-lookup"><span data-stu-id="e44e2-183">After processing its [**WM\_INITDIALOG**](wm-initdialog.md) message, the dialog box procedure sends a **WM\_INITDIALOG** message to the hook procedure.</span></span> <span data-ttu-id="e44e2-184">Параметр *lParam* этого сообщения является указателем на структуру [**принтдлг**](/windows/win32/api/commdlg/ns-commdlg-printdlga) , используемую для инициализации диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="e44e2-184">The *lParam* parameter of this message is a pointer to the [**PRINTDLG**](/windows/win32/api/commdlg/ns-commdlg-printdlga) structure used to initialize the dialog box.</span></span>

## <a name="print-setup-dialog-box"></a><span data-ttu-id="e44e2-185">Диалоговое окно «Настройка печати»</span><span class="sxs-lookup"><span data-stu-id="e44e2-185">Print Setup Dialog Box</span></span>

<span data-ttu-id="e44e2-186">Можно создать и отобразить диалоговое окно **Настройка печати** , установив флаг **PD \_ принтсетуп** в вызове функции [**принтдлг**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="e44e2-186">You can create and display a **Print Setup** dialog box by setting the **PD\_PRINTSETUP** flag in a call to the [**PrintDlg**](/previous-versions/windows/desktop/legacy/ms646940(v=vs.85)) function.</span></span> <span data-ttu-id="e44e2-187">Однако диалоговое окно **Настройка печати** заменено диалоговым окном **Параметры страницы** и не должно использоваться в новых приложениях.</span><span class="sxs-lookup"><span data-stu-id="e44e2-187">However, the **Print Setup** dialog box has been superseded by the **Page Setup** dialog box and should not be used in new applications.</span></span>

<span data-ttu-id="e44e2-188">Следующие флаги применяются только к диалоговому окну « **Настройка печати** ».</span><span class="sxs-lookup"><span data-stu-id="e44e2-188">The following flags apply only to the **Print Setup** dialog box:</span></span>

-   <span data-ttu-id="e44e2-189">**PD \_ енаблесетуфук**</span><span class="sxs-lookup"><span data-stu-id="e44e2-189">**PD\_ENABLESETUPHOOK**</span></span>
-   <span data-ttu-id="e44e2-190">**PD \_ енаблесетуптемплате**</span><span class="sxs-lookup"><span data-stu-id="e44e2-190">**PD\_ENABLESETUPTEMPLATE**</span></span>
-   <span data-ttu-id="e44e2-191">**PD \_ енаблесетуптемплатехандле**</span><span class="sxs-lookup"><span data-stu-id="e44e2-191">**PD\_ENABLESETUPTEMPLATEHANDLE**</span></span>

 

 