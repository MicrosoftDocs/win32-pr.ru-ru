---
description: Для пользователя система может быть либо включена, либо выключена.
ms.assetid: 3d897a88-125e-457f-9ea7-ac2056b0767a
title: Состояния питания системы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f18cf6323ae852a871869066a2e9baa2860e6978
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105673793"
---
# <a name="system-power-states"></a><span data-ttu-id="1db56-103">Состояния питания системы</span><span class="sxs-lookup"><span data-stu-id="1db56-103">System Power States</span></span>

<span data-ttu-id="1db56-104">Для пользователя система может быть либо включена, либо выключена.</span><span class="sxs-lookup"><span data-stu-id="1db56-104">To the user, the system appears to be either on or off.</span></span> <span data-ttu-id="1db56-105">Другие обнаруживаемые состояния отсутствуют.</span><span class="sxs-lookup"><span data-stu-id="1db56-105">There are no other detectable states.</span></span> <span data-ttu-id="1db56-106">Однако система поддерживает несколько состояний электропитания, которые соответствуют состояниям электропитания, заданным в спецификации расширенной конфигурации и интерфейса питания (ACPI).</span><span class="sxs-lookup"><span data-stu-id="1db56-106">However, the system supports multiple power states that correspond to the power states defined in the Advanced Configuration and Power Interface (ACPI) specification.</span></span> <span data-ttu-id="1db56-107">Существуют также разновидности этих состояний, например гибридный спящий режим и быстрый запуск.</span><span class="sxs-lookup"><span data-stu-id="1db56-107">There are also variations of these states, such as hybrid sleep and fast startup.</span></span> <span data-ttu-id="1db56-108">В этом разделе рассматриваются эти состояния и описывается их связь друг с другом.</span><span class="sxs-lookup"><span data-stu-id="1db56-108">This topic introduces these states and describes how they relate to each other.</span></span>

> [!NOTE]
> <span data-ttu-id="1db56-109">Системные интеграторы и разработчики, создающие драйверы или приложения с системной службой, должны быть особенно осторожными к проблемам с качеством драйвера, например утечкам памяти.</span><span class="sxs-lookup"><span data-stu-id="1db56-109">System integrators and developers creating drivers or applications with a system service should be particularly careful of driver quality issues, such as memory leaks.</span></span> <span data-ttu-id="1db56-110">Хотя всегда было важно качество драйвера, время между перезагрузкой ядра может быть значительно длиннее, чем в предыдущих версиях ОС, поскольку при инициировании пользователем спящего режима и завершении работы ядро, драйверы и службы будут сохранены и восстановлены, а не запущены повторно.</span><span class="sxs-lookup"><span data-stu-id="1db56-110">While driver quality has always been important, the up time between kernel reboots may be significantly longer than on previous versions of the OS because on user initiated sleeps and shutdowns, the kernel, drivers, and services will be preserved and restored, not re-started.</span></span>

 

<span data-ttu-id="1db56-111">В следующей таблице перечислены состояния питания ACPI от самого высокого до самого низкого энергопотребления.</span><span class="sxs-lookup"><span data-stu-id="1db56-111">The following table lists the ACPI power states from highest to lowest power consumption.</span></span>



<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="1db56-112">Состояние электропитания</span><span class="sxs-lookup"><span data-stu-id="1db56-112">Power state</span></span></th>
<th><span data-ttu-id="1db56-113">Состояние ACPI</span><span class="sxs-lookup"><span data-stu-id="1db56-113">ACPI state</span></span></th>
<th><span data-ttu-id="1db56-114">Описание</span><span class="sxs-lookup"><span data-stu-id="1db56-114">Description</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="1db56-115">Выполняется операция</span><span class="sxs-lookup"><span data-stu-id="1db56-115">Working</span></span><br/></td>
<td><span data-ttu-id="1db56-116">S0</span><span class="sxs-lookup"><span data-stu-id="1db56-116">S0</span></span><br/></td>
<td><span data-ttu-id="1db56-117">Система полностью пригодна для использования.</span><span class="sxs-lookup"><span data-stu-id="1db56-117">The system is fully usable.</span></span> <span data-ttu-id="1db56-118">Аппаратные компоненты, которые не используются, могут сэкономить электроэнергию за счет пониженного энергопотребления.</span><span class="sxs-lookup"><span data-stu-id="1db56-118">Hardware components that are not in use can save power by entering a lower power state.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="1db56-119">Сон</span><span class="sxs-lookup"><span data-stu-id="1db56-119">Sleep</span></span><br/> <span data-ttu-id="1db56-120">(Современный ждущий режим)</span><span class="sxs-lookup"><span data-stu-id="1db56-120">(Modern Standby)</span></span><br/></td>
<td><span data-ttu-id="1db56-121">Низкое энергопотребление S0</span><span class="sxs-lookup"><span data-stu-id="1db56-121">S0 low-power idle</span></span><br/></td>
<td><span data-ttu-id="1db56-122">Некоторые системы SoC поддерживают состояние низкого энергосбережения, известное как <a href="/windows-hardware/design/device-experiences/modern-standby">современные ждущие режимы</a>.</span><span class="sxs-lookup"><span data-stu-id="1db56-122">Some SoC systems support a low-power idle state known as <a href="/windows-hardware/design/device-experiences/modern-standby">Modern Standby</a>.</span></span> <span data-ttu-id="1db56-123">В этом состоянии система может быстро переключиться с низкого энергопотребления на режим высокой мощности, чтобы он мог быстро реагировать на события оборудования и сети.</span><span class="sxs-lookup"><span data-stu-id="1db56-123">In this state, the system can very quickly switch from a low-power state to high-power state, so that it can respond quickly to hardware and network events.</span></span> <span data-ttu-id="1db56-124">Системы, поддерживающие современные резервные, не используют S1-S3.</span><span class="sxs-lookup"><span data-stu-id="1db56-124">Systems that support Modern Standby do not use S1-S3.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="1db56-125">Сон</span><span class="sxs-lookup"><span data-stu-id="1db56-125">Sleep</span></span><br/></td>
<td><span data-ttu-id="1db56-126">S1</span><span class="sxs-lookup"><span data-stu-id="1db56-126">S1</span></span><br/> <span data-ttu-id="1db56-127">S2</span><span class="sxs-lookup"><span data-stu-id="1db56-127">S2</span></span><br/> <span data-ttu-id="1db56-128">S3</span><span class="sxs-lookup"><span data-stu-id="1db56-128">S3</span></span><br/></td>
<td><span data-ttu-id="1db56-129">Вероятно, система отключена.</span><span class="sxs-lookup"><span data-stu-id="1db56-129">The system appears to be off.</span></span> <span data-ttu-id="1db56-130">Потребляемая мощность в этих штатах (S1-S3) меньше S0 и больше, чем S4; S3 потребляет меньше энергии, чем S2, и S2 потребляет меньше энергии, чем S1.</span><span class="sxs-lookup"><span data-stu-id="1db56-130">Power consumed in these states (S1-S3) is less than S0 and more than S4; S3 consumes less power than S2, and S2 consumes less power than S1.</span></span> <span data-ttu-id="1db56-131">Обычно системы поддерживают одно из этих трех состояний, а не все три.</span><span class="sxs-lookup"><span data-stu-id="1db56-131">Systems typically support one of these three states, not all three.</span></span><br/> <span data-ttu-id="1db56-132">В этих состояниях (S1-S3) постоянно обновляется Энергозависимая память для поддержания состояния системы.</span><span class="sxs-lookup"><span data-stu-id="1db56-132">In these states (S1-S3), volatile memory is kept refreshed to maintain the system state.</span></span> <span data-ttu-id="1db56-133">Некоторые компоненты остаются включенными, поэтому компьютер может выходить из входных данных с клавиатуры, локальной сети или USB-устройства.</span><span class="sxs-lookup"><span data-stu-id="1db56-133">Some components remain powered so the computer can wake from input from the keyboard, LAN, or a USB device.</span></span><br/> <span data-ttu-id="1db56-134"><em>Гибридный спящий режим</em>, используемый на настольных компьютерах, — это место, где система использует файл гибернации с S1-S3.</span><span class="sxs-lookup"><span data-stu-id="1db56-134"><em>Hybrid sleep</em>, used on desktops, is where a system uses a hibernation file with S1-S3.</span></span> <span data-ttu-id="1db56-135">Файл гибернации сохраняет состояние системы в случае, если система теряет питание в спящем режиме.</span><span class="sxs-lookup"><span data-stu-id="1db56-135">The hibernation file saves the system state in case the system loses power while in sleep.</span></span><br/>
<blockquote>
[!Note]<br />
<span data-ttu-id="1db56-136">Системы SoC, поддерживающие современные резервные (состояния низкого энергопотребления), не используют S1-S3.</span><span class="sxs-lookup"><span data-stu-id="1db56-136">SoC systems that support modern standby (the low-power idle state) do not use S1-S3.</span></span>
</blockquote>
<br/> <br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="1db56-137">Режим гибернации</span><span class="sxs-lookup"><span data-stu-id="1db56-137">Hibernate</span></span><br/></td>
<td><span data-ttu-id="1db56-138">S4</span><span class="sxs-lookup"><span data-stu-id="1db56-138">S4</span></span><br/></td>
<td><span data-ttu-id="1db56-139">Вероятно, система отключена.</span><span class="sxs-lookup"><span data-stu-id="1db56-139">The system appears to be off.</span></span> <span data-ttu-id="1db56-140">Энергопотребление уменьшается до самого нижнего уровня.</span><span class="sxs-lookup"><span data-stu-id="1db56-140">Power consumption is reduced to the lowest level.</span></span> <span data-ttu-id="1db56-141">Система сохраняет содержимое энергозависимой памяти в файл гибернации для сохранения состояния системы.</span><span class="sxs-lookup"><span data-stu-id="1db56-141">The system saves the contents of volatile memory to a hibernation file to preserve system state.</span></span> <span data-ttu-id="1db56-142">Некоторые компоненты остаются включенными, поэтому компьютер может выходить из входных данных с клавиатуры, локальной сети или USB-устройства.</span><span class="sxs-lookup"><span data-stu-id="1db56-142">Some components remain powered so the computer can wake from input from the keyboard, LAN, or a USB device.</span></span> <span data-ttu-id="1db56-143">Рабочий контекст можно восстановить, если он хранится на незащищенном носителе.</span><span class="sxs-lookup"><span data-stu-id="1db56-143">The working context can be restored if it is stored on nonvolatile media.</span></span> <br/> <span data-ttu-id="1db56-144"><em>Быстрый запуск</em> — это место, где пользователь выходит из системы перед созданием файла спящего режима.</span><span class="sxs-lookup"><span data-stu-id="1db56-144"><em>Fast startup</em> is where the user is logged off before the hibernation file is created.</span></span> <span data-ttu-id="1db56-145">Это позволяет сократить файл гибернации, что более подходит для систем с меньшими возможностями хранения.</span><span class="sxs-lookup"><span data-stu-id="1db56-145">This allows for a smaller hibernation file, more appropriate for systems with less storage capabilities.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="1db56-146">Мягкое отключение</span><span class="sxs-lookup"><span data-stu-id="1db56-146">Soft Off</span></span><br/></td>
<td><span data-ttu-id="1db56-147">S5</span><span class="sxs-lookup"><span data-stu-id="1db56-147">S5</span></span><br/></td>
<td><span data-ttu-id="1db56-148">Вероятно, система отключена.</span><span class="sxs-lookup"><span data-stu-id="1db56-148">The system appears to be off.</span></span> <span data-ttu-id="1db56-149">Это состояние состоит из полного завершения работы и цикла загрузки.</span><span class="sxs-lookup"><span data-stu-id="1db56-149">This state is comprised of a full shutdown and boot cycle.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="1db56-150">Механическое выключение</span><span class="sxs-lookup"><span data-stu-id="1db56-150">Mechanical Off</span></span><br/></td>
<td><span data-ttu-id="1db56-151">G3</span><span class="sxs-lookup"><span data-stu-id="1db56-151">G3</span></span><br/></td>
<td><span data-ttu-id="1db56-152">Система полностью отключена и не потребляет электроэнергии.</span><span class="sxs-lookup"><span data-stu-id="1db56-152">The system is completely off and consumes no power.</span></span> <span data-ttu-id="1db56-153">Система возвращается в рабочее состояние только после полной перезагрузки.</span><span class="sxs-lookup"><span data-stu-id="1db56-153">The system returns to the working state only after a full reboot.</span></span><br/></td>
</tr>
</tbody>
</table>



 

<span data-ttu-id="1db56-154">Перечисление [**\_ \_ состояния энергопотребления системы**](/windows/desktop/api/WinNT/ne-winnt-system_power_state) определяет значения, используемые для указания состояния питания системы.</span><span class="sxs-lookup"><span data-stu-id="1db56-154">The [**SYSTEM\_POWER\_STATE**](/windows/desktop/api/WinNT/ne-winnt-system_power_state) enumeration defines values that are used to specify system power states.</span></span>

## <a name="working-state-s0"></a><span data-ttu-id="1db56-155">Рабочее состояние (S0)</span><span class="sxs-lookup"><span data-stu-id="1db56-155">Working state (S0)</span></span>

<span data-ttu-id="1db56-156">Во время рабочего состояния система находится в спящем режиме и работает.</span><span class="sxs-lookup"><span data-stu-id="1db56-156">During the working state, the system is awake and running.</span></span> <span data-ttu-id="1db56-157">Проще говоря, устройство "включено".</span><span class="sxs-lookup"><span data-stu-id="1db56-157">In simple terms, the device is "on."</span></span> <span data-ttu-id="1db56-158">Если экран включен или выключен, устройство находится в полном состоянии выполнения.</span><span class="sxs-lookup"><span data-stu-id="1db56-158">Whether the screen is on or off, the device is in a full running state.</span></span> <span data-ttu-id="1db56-159">Для экономии энергии, особенно на устройствах с питанием от аккумулятора, мы настоятельно рекомендуем выключить аппаратные компоненты, если они не используются.</span><span class="sxs-lookup"><span data-stu-id="1db56-159">To conserve energy, especially on battery powered devices, we highly recommend powering-down hardware components when they're not being used.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1db56-160">Выключите аппаратные компоненты, если они не используются, независимо от состояния.</span><span class="sxs-lookup"><span data-stu-id="1db56-160">Power-down hardware components whenever they're not being used - regardless of the state.</span></span> <span data-ttu-id="1db56-161">Низкое энергопотребление — важное замечание для потребителей мобильных устройств.</span><span class="sxs-lookup"><span data-stu-id="1db56-161">Low power consumption is an important consideration for mobile device consumers.</span></span>

 

## <a name="sleep-state-modern-standby"></a><span data-ttu-id="1db56-162">Состояние сна (современный ждущий режим)</span><span class="sxs-lookup"><span data-stu-id="1db56-162">Sleep state (Modern Standby)</span></span>

<span data-ttu-id="1db56-163">В режиме низкого энергопотребления S0 в рабочем состоянии, которое также называется [современным ждущим](/windows-hardware/design/device-experiences/modern-standby)режимом, система остается частично работающей.</span><span class="sxs-lookup"><span data-stu-id="1db56-163">In the S0 low-power idle mode of the working state, also referred to as [Modern Standby](/windows-hardware/design/device-experiences/modern-standby), the system remains partially running.</span></span> <span data-ttu-id="1db56-164">В современных ждущих режимах система может оставаться в актуальном состоянии при каждом доступе к подходящей сети, а также при необходимости выполнять пробуждение, если требуется действие в реальном времени, например обслуживание ОС.</span><span class="sxs-lookup"><span data-stu-id="1db56-164">During Modern Standby, the system can stay up-to-date whenever a suitable network is available and also wake when real-time action is required, such as OS maintenance.</span></span> <span data-ttu-id="1db56-165">Современные спящие функции выполняются значительно быстрее, чем S1-S3.</span><span class="sxs-lookup"><span data-stu-id="1db56-165">Modern Standby wakes significantly faster than S1-S3.</span></span> <span data-ttu-id="1db56-166">Дополнительные сведения см. в статье [современные резервные](/windows-hardware/design/device-experiences/modern-standby).</span><span class="sxs-lookup"><span data-stu-id="1db56-166">For more info, see [Modern Standby](/windows-hardware/design/device-experiences/modern-standby).</span></span>

> [!Note]  
> <span data-ttu-id="1db56-167">Современные ждущие режимы доступны только в некоторых системах SoC.</span><span class="sxs-lookup"><span data-stu-id="1db56-167">Modern Standby is only available on some SoC systems.</span></span> <span data-ttu-id="1db56-168">Если она поддерживается, система не поддерживает S1-S3.</span><span class="sxs-lookup"><span data-stu-id="1db56-168">When it's supported, the system does not support S1-S3.</span></span>

 

## <a name="sleep-state-s1-s3"></a><span data-ttu-id="1db56-169">Состояние сна (S1 — S3)</span><span class="sxs-lookup"><span data-stu-id="1db56-169">Sleep state (S1-S3)</span></span>

<span data-ttu-id="1db56-170">Система переходит в спящий режим на основе ряда критериев, включая действия пользователя или приложения, а также предпочтения, заданные пользователем на странице **параметров** **Power & Sleep** .</span><span class="sxs-lookup"><span data-stu-id="1db56-170">The system enters sleep based on a number of criteria, including user or application activity and preferences that the user sets on the **Power & sleep** page of the **Settings** app.</span></span> <span data-ttu-id="1db56-171">По умолчанию система использует состояние сна с наименьшим энергопотреблением, поддерживаемое всеми включенными устройствами пробуждения.</span><span class="sxs-lookup"><span data-stu-id="1db56-171">By default, the system uses the lowest-powered sleep state supported by all enabled wake-up devices.</span></span> <span data-ttu-id="1db56-172">Дополнительные сведения о том, как система определяет, когда следует переходить в спящий режим, см. в разделе [условия спящего режима системы](system-sleep-criteria.md).</span><span class="sxs-lookup"><span data-stu-id="1db56-172">For more information about how the system determines when to enter sleep, see [System Sleep Criteria](system-sleep-criteria.md).</span></span>

<span data-ttu-id="1db56-173">Перед переходом системы в спящий режим он определяет соответствующее состояние сна, уведомляет приложения и драйверы ожидающего перехода, а затем переводит систему в состояние сна.</span><span class="sxs-lookup"><span data-stu-id="1db56-173">Before the system enters sleep, it determines the appropriate sleep state, notifies applications and drivers of the pending transition, and then transitions the system to the sleep state.</span></span> <span data-ttu-id="1db56-174">В случае критического перехода, например при достижении порогового значения критического аккумулятора, система не уведомляет приложения и драйверы.</span><span class="sxs-lookup"><span data-stu-id="1db56-174">In the case of a critical transition, such as when the critical battery threshold is reached, the system does not notify applications and drivers.</span></span> <span data-ttu-id="1db56-175">Приложения должны быть подготовлены для этого и предпринять соответствующие действия при возврате системы в рабочее состояние.</span><span class="sxs-lookup"><span data-stu-id="1db56-175">Applications need to be prepared for this and take the appropriate action when the system returns to the working state.</span></span>

<span data-ttu-id="1db56-176">В этих состояниях (S1-S3) постоянно обновляется Энергозависимая память для поддержания состояния системы.</span><span class="sxs-lookup"><span data-stu-id="1db56-176">In these states (S1-S3), volatile memory is kept refreshed to maintain the system state.</span></span> <span data-ttu-id="1db56-177">Некоторые компоненты остаются включенными, поэтому компьютер может выходить из входных данных с клавиатуры, локальной сети или USB-устройства.</span><span class="sxs-lookup"><span data-stu-id="1db56-177">Some components remain powered so the computer can wake from input from the keyboard, LAN, or a USB device.</span></span>

<span data-ttu-id="1db56-178">Система также выходит из спящего режима в ответ на действия пользователя или событие пробуждения, определенное приложением.</span><span class="sxs-lookup"><span data-stu-id="1db56-178">The system also wakes from sleep in response to user activity or a wake-up event defined by an application.</span></span> <span data-ttu-id="1db56-179">Дополнительные сведения см. в разделе [системные события пробуждения](system-wake-up-events.md).</span><span class="sxs-lookup"><span data-stu-id="1db56-179">For more information, see [System Wake-up Events](system-wake-up-events.md).</span></span> <span data-ttu-id="1db56-180">Время, необходимое для пробуждения системы, зависит от состояния сна, из которого он выходит из спящего режима.</span><span class="sxs-lookup"><span data-stu-id="1db56-180">The amount of time it takes the system to wake depends on the sleep state it is waking from.</span></span> <span data-ttu-id="1db56-181">Система занимает больше времени для выхода из состояния с низким энергопотреблением (S3), чем из состояния с более высоким энергопотреблением (S1) из-за дополнительной работы, которую может потребоваться оборудование (стабилизация источника питания, повторная инициализация процессора и т. д.).</span><span class="sxs-lookup"><span data-stu-id="1db56-181">The system takes more time to wake from a lower-powered state (S3) than from a higher-powered state (S1) because of the extra work the hardware may have to do (stabilize the power supply, reinitialize the processor, and so forth).</span></span>

> [!Caution]  
> <span data-ttu-id="1db56-182">При вызове [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate)значение параметра **ES AWAYMODE должно использоваться \_ \_** только в тех случаях, когда они совершенно необходимы приложениям мультимедиа, которым требуется система для выполнения фоновых задач, таких как запись содержимого телевизионных передач или потокового мультимедиа на другие устройства, пока система находится в спящем режиме.</span><span class="sxs-lookup"><span data-stu-id="1db56-182">When calling [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate), the **ES\_AWAYMODE\_REQUIRED** value should be used only when absolutely necessary by media applications that require the system to perform background tasks such as recording television content or streaming media to other devices while the system appears to be sleeping.</span></span> <span data-ttu-id="1db56-183">Приложения, не требующие критической фоновой обработки или выполняемые на переносных компьютерах, не должны включать режим отсутствия, так как не позволяет системе сэкономить электроэнергию, переходя в режим true Sleep.</span><span class="sxs-lookup"><span data-stu-id="1db56-183">Applications that do not require critical background processing or that run on portable computers should not enable away mode because it prevents the system from conserving power by entering true sleep.</span></span>

 

### <a name="hybrid-sleep-s1-s3--hibernation-file"></a><span data-ttu-id="1db56-184">Гибридный спящий режим (S1-S3 + файл гибернации)</span><span class="sxs-lookup"><span data-stu-id="1db56-184">Hybrid sleep (S1-S3 + hibernation file)</span></span>

<span data-ttu-id="1db56-185">*Гибридный спящий режим* — это специальное состояние, которое представляет собой сочетание состояний спящего режима и спящего режима, когда система использует файл гибернации с S1-S3.</span><span class="sxs-lookup"><span data-stu-id="1db56-185">*Hybrid sleep* is a special state that's a combination of the sleep and hibernation states, it's when a system uses a hibernation file with S1-S3.</span></span> <span data-ttu-id="1db56-186">Он доступен только в некоторых системах.</span><span class="sxs-lookup"><span data-stu-id="1db56-186">It's only available on some systems.</span></span> <span data-ttu-id="1db56-187">Если этот параметр включен, система записывает файл гибернации, но переходит в спящий режим с повышенным энергопотреблением.</span><span class="sxs-lookup"><span data-stu-id="1db56-187">When enabled, the system writes a hibernation file but enters a higher-powered sleep state.</span></span> <span data-ttu-id="1db56-188">Если при переходе системы в спящий режим питание теряется, система выходит из спящего режима, что занимает больше времени, но восстанавливает состояние системы пользователя.</span><span class="sxs-lookup"><span data-stu-id="1db56-188">If power is lost while the system is sleeping, the system wakes from hibernation, which takes longer but restores the user's system state.</span></span>

## <a name="hibernate-state-s4"></a><span data-ttu-id="1db56-189">Состояние гибернации (S4)</span><span class="sxs-lookup"><span data-stu-id="1db56-189">Hibernate state (S4)</span></span>

<span data-ttu-id="1db56-190">Windows использует режим гибернации для быстрого запуска.</span><span class="sxs-lookup"><span data-stu-id="1db56-190">Windows uses hibernation to provide a fast startup experience.</span></span> <span data-ttu-id="1db56-191">Если он доступен, он также используется на мобильных устройствах для продления времени работы батареи системы, предоставляя механизм сохранения всех состояний пользователей до завершения работы системы.</span><span class="sxs-lookup"><span data-stu-id="1db56-191">When available, it's also used on mobile devices to extend the usable battery life of a system by giving a mechanism to save all of the user s state prior to shutting down the system.</span></span> <span data-ttu-id="1db56-192">При переходе в спящий режим все содержимое памяти записывается в файл на основном системном диске, *файле гибернации*.</span><span class="sxs-lookup"><span data-stu-id="1db56-192">In a Hibernate transition, all the contents of memory are written to a file on the primary system drive, the *hibernation file*.</span></span> <span data-ttu-id="1db56-193">Это сохраняет состояние операционной системы, приложений и устройств.</span><span class="sxs-lookup"><span data-stu-id="1db56-193">This preserves the state of the operating system, applications, and devices.</span></span> <span data-ttu-id="1db56-194">В случае, когда объем общей памяти потребляет всю физическую память, файл гибернации должен быть достаточно большим, чтобы гарантировать наличие места для сохранения всего содержимого физической памяти.</span><span class="sxs-lookup"><span data-stu-id="1db56-194">In the case where the combined memory footprint consumes all of physical memory, the hibernation file must be large enough to ensure there will be space to save all the contents of physical memory.</span></span> <span data-ttu-id="1db56-195">Поскольку данные записываются в долговременное хранилище, DRAM не требуется поддерживать самообновление и могут быть выключены. Это означает, что энергопотребление режима гибернации очень низкий, почти так же, как питание выключено.</span><span class="sxs-lookup"><span data-stu-id="1db56-195">Since data is written to non-volatile storage, DRAM does not need to maintain self-refresh and can be powered off, which means power consumption of hibernation is very low, almost the same as power off.</span></span>

<span data-ttu-id="1db56-196">Во время полного завершения работы и загрузки (S5) весь сеанс пользователя уничтожается и перезапускается при следующей загрузке.</span><span class="sxs-lookup"><span data-stu-id="1db56-196">During a full shutdown and boot (S5), the entire user session is torn down and restarted on the next boot.</span></span> <span data-ttu-id="1db56-197">В отличие от спящего режима (S4), сеанс пользователя закрывается и сохраняется состояние пользователя.</span><span class="sxs-lookup"><span data-stu-id="1db56-197">In contrast, during a hibernation (S4), the user session is closed and the user state is saved.</span></span>

### <a name="fast-startup-reduced-hibernation-file"></a><span data-ttu-id="1db56-198">Быстрый запуск (сокращенный файл гибернации)</span><span class="sxs-lookup"><span data-stu-id="1db56-198">Fast startup (reduced hibernation file)</span></span>

<span data-ttu-id="1db56-199">*Быстрый запуск* — это тип завершения работы, который использует файл гибернации для ускорения последующей загрузки.</span><span class="sxs-lookup"><span data-stu-id="1db56-199">*Fast startup* is a type of shutdown that uses a hibernation file to speed up the subsequent boot.</span></span> <span data-ttu-id="1db56-200">Во время этого типа отключения пользователь выходит из системы перед созданием файла спящего режима.</span><span class="sxs-lookup"><span data-stu-id="1db56-200">During this type of shutdown, the user is logged off before the hibernation file is created.</span></span> <span data-ttu-id="1db56-201">Быстрый запуск позволяет сократить файл гибернации, что более подходит для систем с меньшими возможностями хранения.</span><span class="sxs-lookup"><span data-stu-id="1db56-201">Fast startup allows for a smaller hibernation file, more appropriate for systems with less storage capabilities.</span></span> <span data-ttu-id="1db56-202">Дополнительные сведения см. в разделе [типы файлов спящего режима](#hibernation-file-types).</span><span class="sxs-lookup"><span data-stu-id="1db56-202">For more info, see [Hibernation file types](#hibernation-file-types).</span></span>

<span data-ttu-id="1db56-203">При использовании быстрого запуска система отображается пользователю как при полном завершении работы (S5), даже несмотря на то, что система на самом деле прошла работу в режиме S4.</span><span class="sxs-lookup"><span data-stu-id="1db56-203">When using fast startup, the system appears to the user as though a full shutdown (S5) has occurred, even though the system has actually gone through S4.</span></span> <span data-ttu-id="1db56-204">Сюда входит, как система реагирует на сигналы пробуждения устройства.</span><span class="sxs-lookup"><span data-stu-id="1db56-204">This includes how the system responds to device wake alarms.</span></span>

<span data-ttu-id="1db56-205">Быстрый запуск — журналы сеансов пользователей, но содержимое ядра (сеанс 0) записывается на жесткий диск.</span><span class="sxs-lookup"><span data-stu-id="1db56-205">Fast startup logs off user sessions, but the contents of kernel (session 0) are written to hard disk.</span></span> <span data-ttu-id="1db56-206">Это обеспечивает более быструю загрузку.</span><span class="sxs-lookup"><span data-stu-id="1db56-206">This enables faster boot.</span></span>

<span data-ttu-id="1db56-207">Чтобы программно запустить быстрое завершение работы в стиле запуска, вызовите функцию [**инитиатешутдовн**](/windows/desktop/api/winreg/nf-winreg-initiateshutdowna) с флагом **\_ гибридного завершения работы** или функцией [**ExitWindowsEx**](/windows/desktop/api/winuser/nf-winuser-exitwindowsex) с флагом **\_ гибридного \_ завершения работы евкс** .</span><span class="sxs-lookup"><span data-stu-id="1db56-207">To programmatically initiate a fast startup-style shutdown, call the [**InitiateShutdown**](/windows/desktop/api/winreg/nf-winreg-initiateshutdowna) function with the **SHUTDOWN\_HYBRID** flag or the [**ExitWindowsEx**](/windows/desktop/api/winuser/nf-winuser-exitwindowsex) function with the **EWX\_HYBRID\_SHUTDOWN** flag.</span></span>

> [!Note]  
> <span data-ttu-id="1db56-208">Начиная с Windows 8, по умолчанию используется быстрый запуск, когда запрашивается завершение работы системы.</span><span class="sxs-lookup"><span data-stu-id="1db56-208">Starting in Windows 8, fast startup is the default transition when a system shutdown is requested.</span></span> <span data-ttu-id="1db56-209">Полное завершение работы (S5) возникает при запросе перезагрузки системы (или при вызове приложением API завершения работы).</span><span class="sxs-lookup"><span data-stu-id="1db56-209">A full shutdown (S5) occurs when a system restart is requested (or an application calls a shutdown API).</span></span>

 

### <a name="entering-hibernation"></a><span data-ttu-id="1db56-210">Переход в спящий режим</span><span class="sxs-lookup"><span data-stu-id="1db56-210">Entering hibernation</span></span>

<span data-ttu-id="1db56-211">При выполнении запроса в спящий режим выполняются следующие шаги, когда система переходит в спящий режим:</span><span class="sxs-lookup"><span data-stu-id="1db56-211">When a hibernate request is made, the following steps occur as the system enters hibernation:</span></span>

1.  <span data-ttu-id="1db56-212">Уведомления о приложениях и службах</span><span class="sxs-lookup"><span data-stu-id="1db56-212">Apps and services are notified</span></span>
2.  <span data-ttu-id="1db56-213">Уведомления о драйверах</span><span class="sxs-lookup"><span data-stu-id="1db56-213">Drivers are notified</span></span>
3.  <span data-ttu-id="1db56-214">Состояние пользователя и системы сохраняется на диске в сжатом формате</span><span class="sxs-lookup"><span data-stu-id="1db56-214">User and system state is saved to disk in a compressed format</span></span>
4.  <span data-ttu-id="1db56-215">Оповещение встроенного по</span><span class="sxs-lookup"><span data-stu-id="1db56-215">Firmware is notified</span></span>

> [!Note]  
> <span data-ttu-id="1db56-216">Начиная с Windows 8, все ядра системы используются для сжатия данных в памяти и записи на диск.</span><span class="sxs-lookup"><span data-stu-id="1db56-216">Starting in Windows 8, all cores on the system are used to compress the data in memory and write it to disk.</span></span>

 

<span data-ttu-id="1db56-217">Чтобы программно запустить переход в спящий режим, вызовите функцию [**сетсуспендстате**](/windows/desktop/api/PowrProf/nf-powrprof-setsuspendstate) .</span><span class="sxs-lookup"><span data-stu-id="1db56-217">To programmatically initiate a hibernate transition, call the [**SetSuspendState**](/windows/desktop/api/PowrProf/nf-powrprof-setsuspendstate) function.</span></span>

### <a name="resuming-from-hibernation"></a><span data-ttu-id="1db56-218">Возобновление из спящего режима</span><span class="sxs-lookup"><span data-stu-id="1db56-218">Resuming from hibernation</span></span>

<span data-ttu-id="1db56-219">При выходе системы из спящего режима.</span><span class="sxs-lookup"><span data-stu-id="1db56-219">When a system resumes from hibernation.</span></span>

<span data-ttu-id="1db56-220">При включении системы в процессе выхода из спящего режима выполняются следующие действия.</span><span class="sxs-lookup"><span data-stu-id="1db56-220">When a system is powered on, the following steps occur as the system resumes from hibernation.</span></span>

1.  <span data-ttu-id="1db56-221">Системная запись</span><span class="sxs-lookup"><span data-stu-id="1db56-221">System POST</span></span>
2.  <span data-ttu-id="1db56-222">Системная память распаковывается и восстанавливается из файла гибернации</span><span class="sxs-lookup"><span data-stu-id="1db56-222">System memory is decompressed and restored from the hibernation file</span></span>
3.  <span data-ttu-id="1db56-223">Инициализация устройства</span><span class="sxs-lookup"><span data-stu-id="1db56-223">Device initialization</span></span>
4.  <span data-ttu-id="1db56-224">Драйверы восстанавливаются до перехода в спящий режим.</span><span class="sxs-lookup"><span data-stu-id="1db56-224">Drivers are restored to the state they were in prior to hibernation</span></span>
5.  <span data-ttu-id="1db56-225">Службы восстанавливаются в состояние, в котором они находились до перехода в режим гибернации</span><span class="sxs-lookup"><span data-stu-id="1db56-225">Services are restored to the state they were in prior to hibernation</span></span>
6.  <span data-ttu-id="1db56-226">Система станет доступной для входа</span><span class="sxs-lookup"><span data-stu-id="1db56-226">System becomes available for login</span></span>

<span data-ttu-id="1db56-227">Выход из спящего режима начинается с системного сообщения, похожего на завершение работы S5.</span><span class="sxs-lookup"><span data-stu-id="1db56-227">A resume from hibernation starts with a system POST that is similar to an S5 shutdown.</span></span> <span data-ttu-id="1db56-228">Диспетчер загрузки ОС определяет, что требуется возобновление из спящего режима, выявляя допустимый файл гибернации.</span><span class="sxs-lookup"><span data-stu-id="1db56-228">The OS boot manager determines that a resume from hibernation is required by detecting a valid hibernation file.</span></span> <span data-ttu-id="1db56-229">Затем она направляет систему к возобновлению, восстанавливая содержимое памяти и все регистры архитектуры.</span><span class="sxs-lookup"><span data-stu-id="1db56-229">Then it directs the system to resume, restoring the contents of memory and all architectural registers.</span></span> <span data-ttu-id="1db56-230">В случае выхода из спящего режима содержимое системной памяти считывается с диска, распаковывается и восстанавливается, что приводит систему в точное состояние, в котором она находилась в спящем режиме.</span><span class="sxs-lookup"><span data-stu-id="1db56-230">In the case of a resume from hibernation, the contents of the system memory are read back in from the disk, decompressed, and restored, putting the system in the exact state it was in when it was hibernated.</span></span> <span data-ttu-id="1db56-231">После восстановления памяти устройства перезапускаются, а компьютер возвращается в состояние выполнения, готовое для входа.</span><span class="sxs-lookup"><span data-stu-id="1db56-231">After memory is restored, the devices are re-started, the machine returns to a running state, ready for login.</span></span>

> [!Note]  
> <span data-ttu-id="1db56-232">При выходе из спящего режима драйверы и службы получают уведомления, но не перезапускаются.</span><span class="sxs-lookup"><span data-stu-id="1db56-232">During a resume from hibernation, drivers and services are notified, but are not restarted.</span></span> <span data-ttu-id="1db56-233">Они восстанавливаются только в том состоянии, в котором они были до перехода в режим гибернации.</span><span class="sxs-lookup"><span data-stu-id="1db56-233">They are only restored to the state they were in prior to hibernation.</span></span>

 

### <a name="hibernation-file-types"></a><span data-ttu-id="1db56-234">Типы файлов спящего режима</span><span class="sxs-lookup"><span data-stu-id="1db56-234">Hibernation file types</span></span>

<span data-ttu-id="1db56-235">Файлы гибернации используются для гибридного спящего режима, быстрого запуска и стандартного спящего режима (описан ранее).</span><span class="sxs-lookup"><span data-stu-id="1db56-235">Hibernation files are used for hybrid sleep, fast startup, and standard hibernation (described earlier).</span></span> <span data-ttu-id="1db56-236">Существует два типа, отличающиеся по размеру, файлы спящего режима полного и уменьшенного размера.</span><span class="sxs-lookup"><span data-stu-id="1db56-236">There are two types, differentiated by size, a full and reduced size hibernation file.</span></span> <span data-ttu-id="1db56-237">Сокращенный файл гибернации может использоваться только при быстром запуске.</span><span class="sxs-lookup"><span data-stu-id="1db56-237">Only fast startup can use a reduced hibernation file.</span></span>



| <span data-ttu-id="1db56-238">Тип файла спящего режима</span><span class="sxs-lookup"><span data-stu-id="1db56-238">Hibernation file type</span></span> | <span data-ttu-id="1db56-239">Размер по умолчанию</span><span class="sxs-lookup"><span data-stu-id="1db56-239">Default size</span></span>           | <span data-ttu-id="1db56-240">Поддерживает...</span><span class="sxs-lookup"><span data-stu-id="1db56-240">Supports...</span></span>                           |
|-----------------------|------------------------|---------------------------------------|
| <span data-ttu-id="1db56-241">Полное</span><span class="sxs-lookup"><span data-stu-id="1db56-241">Full</span></span>                  | <span data-ttu-id="1db56-242">40% физической памяти</span><span class="sxs-lookup"><span data-stu-id="1db56-242">40% of physical memory</span></span> | <span data-ttu-id="1db56-243">режим гибернации, гибридный спящий режим, быстрый запуск</span><span class="sxs-lookup"><span data-stu-id="1db56-243">hibernate, hybrid sleep, fast startup</span></span> |
| <span data-ttu-id="1db56-244">XDR</span><span class="sxs-lookup"><span data-stu-id="1db56-244">Reduced</span></span>               | <span data-ttu-id="1db56-245">20% физической памяти</span><span class="sxs-lookup"><span data-stu-id="1db56-245">20% of physical memory</span></span> | <span data-ttu-id="1db56-246">Быстрый запуск</span><span class="sxs-lookup"><span data-stu-id="1db56-246">fast startup</span></span>                          |



 

<span data-ttu-id="1db56-247">Чтобы проверить или изменить тип используемого файла спящего режима, запустите служебную программу **powercfg.exe** .</span><span class="sxs-lookup"><span data-stu-id="1db56-247">To verify or change the type of hibernation file used, run the **powercfg.exe** utility.</span></span> <span data-ttu-id="1db56-248">В следующих примерах показано, как это делать.</span><span class="sxs-lookup"><span data-stu-id="1db56-248">The following examples demonstrate how.</span></span> <span data-ttu-id="1db56-249">Чтобы получить дополнительные сведения, запустите `powercfg /? hibernate`.</span><span class="sxs-lookup"><span data-stu-id="1db56-249">For more information, run `powercfg /? hibernate`.</span></span>



|                                                                         |                                                                                                                                                                                                                                                                                                                                                    |
|-------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="1db56-250">Пример</span><span class="sxs-lookup"><span data-stu-id="1db56-250">Example</span></span>                                                                 | <span data-ttu-id="1db56-251">Описание</span><span class="sxs-lookup"><span data-stu-id="1db56-251">Description</span></span>                                                                                                                                                                                                                                                                                                                                        |
| `powercfg /a`<br/>                                                | <span data-ttu-id="1db56-252">**Проверьте тип файла спящего режима.**</span><span class="sxs-lookup"><span data-stu-id="1db56-252">**Verify the hibernation file type.**</span></span> <span data-ttu-id="1db56-253">При использовании полного файла гибернации состояние "Гибернация" является доступным параметром.</span><span class="sxs-lookup"><span data-stu-id="1db56-253">When a full hibernation file is used, the results state that hibernation is an available option.</span></span> <span data-ttu-id="1db56-254">Если используется сокращенный файл гибернации, то результаты не будут поддерживаться в спящем режиме.</span><span class="sxs-lookup"><span data-stu-id="1db56-254">When a reduced hibernation file is used, the results will say hibernation is not supported.</span></span> <span data-ttu-id="1db56-255">Если в системе вообще нет файла спящего режима, результаты будут включены в спящий режим.</span><span class="sxs-lookup"><span data-stu-id="1db56-255">If the system has no hibernation file at all, the results will say hibernation has not been enabled.</span></span><br/> |
| `powercfg /h /type full`<br/>                                     | <span data-ttu-id="1db56-256">**Измените тип файла спящего режима на полный.**</span><span class="sxs-lookup"><span data-stu-id="1db56-256">**Change the hibernation file type to full.**</span></span> <span data-ttu-id="1db56-257">Это не рекомендуется в системах с объемом памяти менее 32 ГБ.</span><span class="sxs-lookup"><span data-stu-id="1db56-257">This is not recommended on systems with less than 32GB of storage.</span></span><br/>                                                                                                                                                                                                                        |
| `powercfg /h /type reduced`<br/>                                  | <span data-ttu-id="1db56-258">**Измените тип файла спящего режима на сокращенный.**</span><span class="sxs-lookup"><span data-stu-id="1db56-258">**Change the hibernation file type to reduced.**</span></span> <span data-ttu-id="1db56-259">Если команда возвращает «неверный параметр», см. Следующий пример.</span><span class="sxs-lookup"><span data-stu-id="1db56-259">If the command returns "the parameter is incorrect", see the following example.</span></span><br/>                                                                                                                                                                                                        |
| `powercfg /h /size 0`<br/> `powercfg /h /type reduced`<br/> | <span data-ttu-id="1db56-260">**Повторите попытку изменения типа файла спящего режима на сокращенный.**</span><span class="sxs-lookup"><span data-stu-id="1db56-260">**Retry changing the hibernation file type to reduced.**</span></span> <span data-ttu-id="1db56-261">Если для файла гибернации задан пользовательский размер более 40%, необходимо сначала установить размер файла равным нулю.</span><span class="sxs-lookup"><span data-stu-id="1db56-261">If the hibernation file is set to a custom size greater than 40%, you must first set the size of the file to zero.</span></span> <span data-ttu-id="1db56-262">Затем повторите настройку.</span><span class="sxs-lookup"><span data-stu-id="1db56-262">Then retry the reduced configuration.</span></span><br/>                                                                                                                       |



 

## <a name="soft-off-state-s5"></a><span data-ttu-id="1db56-263">Состояние мягкого отключения (S5)</span><span class="sxs-lookup"><span data-stu-id="1db56-263">Soft Off state (S5)</span></span>

<span data-ttu-id="1db56-264">Состояние «мягкое отключение» происходит, когда система полностью завершает работу без файла гибернации.</span><span class="sxs-lookup"><span data-stu-id="1db56-264">The soft off state is when the system fully shuts down without a hibernation file.</span></span> <span data-ttu-id="1db56-265">Мягкое отключение также называется "полным завершением работы".</span><span class="sxs-lookup"><span data-stu-id="1db56-265">Soft off is also known as a "full shutdown."</span></span> <span data-ttu-id="1db56-266">Во время полного завершения работы и загрузки весь сеанс пользователя уничтожается и перезапускается при следующей загрузке.</span><span class="sxs-lookup"><span data-stu-id="1db56-266">During a full shutdown and boot, the entire user session is torn down and restarted on the next boot.</span></span> <span data-ttu-id="1db56-267">Следовательно, Загрузка/запуск из этого состояния занимает значительно больше времени, чем S1-S4.</span><span class="sxs-lookup"><span data-stu-id="1db56-267">Consequently, a boot/startup from this state takes significantly longer than S1-S4.</span></span> <span data-ttu-id="1db56-268">Полное завершение работы (S5) возникает при запросе перезагрузки системы (или при вызове приложением API завершения работы).</span><span class="sxs-lookup"><span data-stu-id="1db56-268">A full shutdown (S5) occurs when a system restart is requested (or an application calls a shutdown API).</span></span>

## <a name="mechanical-off-state-g3"></a><span data-ttu-id="1db56-269">Состояние механических вывыкл. (G3)</span><span class="sxs-lookup"><span data-stu-id="1db56-269">Mechanical Off state (G3)</span></span>

<span data-ttu-id="1db56-270">В этом состоянии система полностью отключена и не потребляет электроэнергии.</span><span class="sxs-lookup"><span data-stu-id="1db56-270">In this state, the system is completely off and consumes no power.</span></span> <span data-ttu-id="1db56-271">Система возвращается в рабочее состояние только после полной перезагрузки.</span><span class="sxs-lookup"><span data-stu-id="1db56-271">The system returns to the working state only after a full reboot.</span></span>

## <a name="wake-on-lan-behavior"></a><span data-ttu-id="1db56-272">Режим пробуждения по локальной сети</span><span class="sxs-lookup"><span data-stu-id="1db56-272">Wake-on-LAN behavior</span></span>

<span data-ttu-id="1db56-273">Функция Wake-on-LAN (WOL) выводит компьютер из состояния пониженного энергопотребления, когда сетевой адаптер обнаруживает событие WOL (как правило, специально сконструированный пакет Ethernet).</span><span class="sxs-lookup"><span data-stu-id="1db56-273">The wake-on-LAN (WOL) feature wakes the computer from a low power state when a network adapter detects a WOL event (typically, a specially constructed Ethernet packet).</span></span>

<span data-ttu-id="1db56-274">WOL поддерживается в спящем режиме (S3) или режиме гибернации (S4).</span><span class="sxs-lookup"><span data-stu-id="1db56-274">WOL is supported from sleep (S3) or hibernate (S4).</span></span> <span data-ttu-id="1db56-275">Он не поддерживается в состоянии завершения работы с быстрым запуском или с мягким отключением (S5).</span><span class="sxs-lookup"><span data-stu-id="1db56-275">It is not supported from fast startup or soft off (S5) shutdown states.</span></span> <span data-ttu-id="1db56-276">Сетевые карты не включаются в пробуждение в этих штатах, так как пользователи не хотят, чтобы их системы пробуждаться самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="1db56-276">NICs are not armed for wake in these states because users do not expect their systems to wake up on their own.</span></span>

> [!Note]  
> <span data-ttu-id="1db56-277">Протокол WOL официально не поддерживается при мягком выключении (S5).</span><span class="sxs-lookup"><span data-stu-id="1db56-277">WOL is not officially supported from soft off (S5).</span></span> <span data-ttu-id="1db56-278">Однако BIOS в некоторых системах может поддерживать арминг сетевые карты для пробуждения, даже если Windows не участвует в процессе.</span><span class="sxs-lookup"><span data-stu-id="1db56-278">However, the BIOS on some systems may support arming NICs for wake, even though Windows is not involved in the process.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="1db56-279">См. также</span><span class="sxs-lookup"><span data-stu-id="1db56-279">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1db56-280">Сведения об управлении питанием</span><span class="sxs-lookup"><span data-stu-id="1db56-280">About Power Management</span></span>](about-power-management.md)
</dt> </dl>
