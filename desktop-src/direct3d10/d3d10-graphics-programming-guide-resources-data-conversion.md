---
description: В следующих разделах описано, как Direct3D обрабатывает преобразования между типами данных.
ms.assetid: 454d3fd0-fc0f-46a9-925e-13f8e3c39f02
title: Правила преобразования данных
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 61abdc58811af9155c67d7b32bcd47e9d4b71ea5
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103807349"
---
# <a name="data-conversion-rules"></a><span data-ttu-id="95c2a-103">Правила преобразования данных</span><span class="sxs-lookup"><span data-stu-id="95c2a-103">Data Conversion Rules</span></span>

<span data-ttu-id="95c2a-104">В следующих разделах описано, как Direct3D обрабатывает преобразования между типами данных.</span><span class="sxs-lookup"><span data-stu-id="95c2a-104">The following sections describe how Direct3D handles conversions between data types.</span></span>

-   [<span data-ttu-id="95c2a-105">Терминология типов данных</span><span class="sxs-lookup"><span data-stu-id="95c2a-105">Data Type Terminology</span></span>](#data-type-terminology)
-   [<span data-ttu-id="95c2a-106">Преобразование с плавающей запятой</span><span class="sxs-lookup"><span data-stu-id="95c2a-106">Floating Point Conversion</span></span>](#floating-point-conversion)
    -   [<span data-ttu-id="95c2a-107">Конвервертинг из более высокого представления диапазона в представление с меньшим диапазоном</span><span class="sxs-lookup"><span data-stu-id="95c2a-107">Conververting from a higher range representation to a lower range representation</span></span>](#conververting-from-a-higher-range-representation-to-a-lower-range-representation)
    -   [<span data-ttu-id="95c2a-108">Преобразование представления с меньшим диапазоном в представление с более высоким диапазоном</span><span class="sxs-lookup"><span data-stu-id="95c2a-108">Converting from a lower range representation to a higher range representation</span></span>](#converting-from-a-lower-range-representation-to-a-higher-range-representation)
-   [<span data-ttu-id="95c2a-109">Целочисленное преобразование</span><span class="sxs-lookup"><span data-stu-id="95c2a-109">Integer Conversion</span></span>](#integer-conversion)
-   [<span data-ttu-id="95c2a-110">Преобразование целых чисел с фиксированной запятой</span><span class="sxs-lookup"><span data-stu-id="95c2a-110">Fixed Point Integer Conversion</span></span>](#fixed-point-integer-conversion)
-   [<span data-ttu-id="95c2a-111">См. также</span><span class="sxs-lookup"><span data-stu-id="95c2a-111">Related topics</span></span>](#related-topics)

## <a name="data-type-terminology"></a><span data-ttu-id="95c2a-112">Терминология типов данных</span><span class="sxs-lookup"><span data-stu-id="95c2a-112">Data Type Terminology</span></span>

<span data-ttu-id="95c2a-113">В дальнейшем термины из следующего набора используются для описания преобразований различных форматов.</span><span class="sxs-lookup"><span data-stu-id="95c2a-113">The following set of terms are subsequently used to characterize various format conversions.</span></span>



| <span data-ttu-id="95c2a-114">Термин</span><span class="sxs-lookup"><span data-stu-id="95c2a-114">Term</span></span>  | <span data-ttu-id="95c2a-115">Определение</span><span class="sxs-lookup"><span data-stu-id="95c2a-115">Definition</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|-------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="95c2a-116">SNORM</span><span class="sxs-lookup"><span data-stu-id="95c2a-116">SNORM</span></span> | <span data-ttu-id="95c2a-117">Нормализованное целое число со знаком, то есть для n-разрядного числа в дополнительном коде максимальное значение означает 1,0f (например, 5-разрядное значение 01111 сопоставляется с 1,0f), а минимальное значение означает -1,0f (например, 5-разрядное значение 10000 сопоставляется с -1,0f).</span><span class="sxs-lookup"><span data-stu-id="95c2a-117">Signed normalized integer, meaning that for an n-bit 2's complement number, the maximum value means 1.0f (e.g. the 5-bit value 01111 maps to 1.0f), and the minimum value means -1.0f (e.g. the 5-bit value 10000 maps to -1.0f).</span></span> <span data-ttu-id="95c2a-118">Кроме того, второе после минимального число сопоставляется с -1,0f (например, 5-разрядное значение 10001 сопоставляется с -1,0f).</span><span class="sxs-lookup"><span data-stu-id="95c2a-118">In addition, the second-minimum number maps to -1.0f (e.g. the 5-bit value 10001 maps to -1.0f).</span></span> <span data-ttu-id="95c2a-119">Таким образом, существует два представления целых чисел для -1,0f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-119">There are thus two integer representations for -1.0f.</span></span> <span data-ttu-id="95c2a-120">Для 0,0f и 1,0f существует по одному представлению.</span><span class="sxs-lookup"><span data-stu-id="95c2a-120">There is a single representation for 0.0f, and a single representation for 1.0f.</span></span> <span data-ttu-id="95c2a-121">В результате получается набор представлений целых чисел для равномерно распределенных значений с плавающей точкой в диапазоне от -1,0f до 0,0f и дополнительный набор представлений для чисел в диапазоне от 0,0f до 1,0f</span><span class="sxs-lookup"><span data-stu-id="95c2a-121">This results in a set of integer representations for evenly spaced floating point values in the range (-1.0f...0.0f), and also a complementary set of representations for numbers in the range (0.0f...1.0f)</span></span> |
| <span data-ttu-id="95c2a-122">UNORM</span><span class="sxs-lookup"><span data-stu-id="95c2a-122">UNORM</span></span> | <span data-ttu-id="95c2a-123">Нормализованное целое число без знака, то есть для n-разрядного числа все нули означают 0,0f, а все единицы — 1,0f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-123">Unsigned normalized integer, meaning that for an n-bit number, all 0's means 0.0f, and all 1's means 1.0f.</span></span> <span data-ttu-id="95c2a-124">Представлена последовательность равномерно распределенных значений с плавающей точкой от 0,0f до 1,0f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-124">A sequence of evenly spaced floating point values from 0.0f to 1.0f are represented.</span></span> <span data-ttu-id="95c2a-125">Например, 2-разрядное число UNORM представляет 0,0f, 1/3, 2/3 и 1,0f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-125">e.g. a 2-bit UNORM represents 0.0f, 1/3, 2/3, and 1.0f.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="95c2a-126">SINT</span><span class="sxs-lookup"><span data-stu-id="95c2a-126">SINT</span></span>  | <span data-ttu-id="95c2a-127">Целое число со знаком.</span><span class="sxs-lookup"><span data-stu-id="95c2a-127">Signed integer.</span></span> <span data-ttu-id="95c2a-128">Целое число в дополнительном коде.</span><span class="sxs-lookup"><span data-stu-id="95c2a-128">2's complement integer.</span></span> <span data-ttu-id="95c2a-129">Например, 3-разрядное число SINT представляет целочисленные значения -4, -3, -2, -1, 0, 1, 2, 3.</span><span class="sxs-lookup"><span data-stu-id="95c2a-129">e.g. an 3-bit SINT represents the integral values -4, -3, -2, -1, 0, 1, 2, 3.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="95c2a-130">UINT</span><span class="sxs-lookup"><span data-stu-id="95c2a-130">UINT</span></span>  | <span data-ttu-id="95c2a-131">Целое число без знака.</span><span class="sxs-lookup"><span data-stu-id="95c2a-131">Unsigned integer.</span></span> <span data-ttu-id="95c2a-132">Например, 3-разрядное число UINT представляет целочисленные значения 0, 1, 2, 3, 4, 5, 6, 7.</span><span class="sxs-lookup"><span data-stu-id="95c2a-132">e.g. a 3-bit UINT represents the integral values 0, 1, 2, 3, 4, 5, 6, 7.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="95c2a-133">FLOAT</span><span class="sxs-lookup"><span data-stu-id="95c2a-133">FLOAT</span></span> | <span data-ttu-id="95c2a-134">Значение с плавающей точкой в любом из представлений, определенных Direct3D.</span><span class="sxs-lookup"><span data-stu-id="95c2a-134">A floating-point value in any of the representations defined by Direct3D.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="95c2a-135">SRGB</span><span class="sxs-lookup"><span data-stu-id="95c2a-135">SRGB</span></span>  | <span data-ttu-id="95c2a-136">Аналог UNORM в том смысле, что для n-разрядного числа все нули означают 0,0f, а все единицы — 1,0f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-136">Similar to UNORM, in that for an n-bit number, all 0's means 0.0f and all 1's means 1.0f.</span></span> <span data-ttu-id="95c2a-137">Но в случае с SRGB, в отличие от UNORM, последовательность целочисленных кодировок без знака в диапазоне между всеми нулями и всеми единицами представляет нелинейную последовательность в интерпретации чисел с плавающей точкой в диапазоне от 0,0f до 1,0f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-137">However unlike UNORM, with SRGB the sequence of unsigned integer encodings between all 0's to all 1's represent a nonlinear progression in the floating point interpretation of the numbers, between 0.0f to 1.0f.</span></span> <span data-ttu-id="95c2a-138">Грубо говоря, если нелинейная последовательность SRGB отображается как последовательность цветов, для "среднего" наблюдателя при "средних" условиях просмотра на "среднем" дисплее она будет выглядеть, как линейный набор уровней яркости.</span><span class="sxs-lookup"><span data-stu-id="95c2a-138">Roughly, if this nonlinear progression, SRGB, is displayed as a sequence of colors, it would appear as a linear ramp of luminosity levels to an "average" observer, under "average" viewing conditions, on an "average" display.</span></span> <span data-ttu-id="95c2a-139">Полные сведения см. в цветовом стандарте SRGB IEC 61996-2-1 на сайте Международной электротехнической комиссии (IEC).</span><span class="sxs-lookup"><span data-stu-id="95c2a-139">For complete detail, refer to the SRGB color standard, IEC 61996-2-1, at IEC (International Electrotechnical Commission).</span></span>                |



 

## <a name="floating-point-conversion"></a><span data-ttu-id="95c2a-140">Преобразование с плавающей точкой</span><span class="sxs-lookup"><span data-stu-id="95c2a-140">Floating Point Conversion</span></span>

<span data-ttu-id="95c2a-141">При выполнении преобразования с плавающей точкой между разными представлениями, включая представления без плавающей точки, действуют следующие правила.</span><span class="sxs-lookup"><span data-stu-id="95c2a-141">Whenever a floating point conversion between different representations occurs, including to or from non-floating point representations, the following rules apply.</span></span>

### <a name="conververting-from-a-higher-range-representation-to-a-lower-range-representation"></a><span data-ttu-id="95c2a-142">Преобразование из представления верхнего диапазона в представление нижнего диапазона</span><span class="sxs-lookup"><span data-stu-id="95c2a-142">Conververting from a higher range representation to a lower range representation</span></span>

-   <span data-ttu-id="95c2a-143">При преобразовании в другой формат с плавающей точкой используется округление к нулю</span><span class="sxs-lookup"><span data-stu-id="95c2a-143">Round-to-zero is used during conversion to another float format.</span></span> <span data-ttu-id="95c2a-144">Если целевое значение является целым числом или числом с плавающей точкой, используется округление до ближайшего четного числа, если в описании преобразования явно не указана необходимость использования другого метода округления, такого как округление к ближайшему при преобразовании из FLOAT в SNORM, из FLOAT в UNORM или из FLOAT в SRGB</span><span class="sxs-lookup"><span data-stu-id="95c2a-144">If the target is an integer or fixed point format, round-to-nearest-even is used, unless the conversion is explicitly documented as using another rounding behavior, such as round-to-nearest for FLOAT to SNORM, FLOAT to UNORM or FLOAT to SRGB.</span></span> <span data-ttu-id="95c2a-145">Исключениями также являются инструкции шейдеров ftoi и ftou, в которых используется округление к нулю.</span><span class="sxs-lookup"><span data-stu-id="95c2a-145">Other exceptions are the ftoi and ftou shader instructions, which use round-to-zero.</span></span> <span data-ttu-id="95c2a-146">Наконец, для преобразований чисел с плавающей точкой в числа с фиксированной точкой, используемых текстурным дискретизатором и средством прорисовки, указывается допуск от бесконечно точного идеала, измеряемый единицей наименьшей точности.</span><span class="sxs-lookup"><span data-stu-id="95c2a-146">Finally, the float-to-fixed conversions used by the texture sampler and rasterizer have a specified tolerance measured in Unit-Last-Place from an infinitely precise ideal.</span></span>
-   <span data-ttu-id="95c2a-147">В случае с исходными значениями за пределами динамического диапазона конечного формата нижнего диапазона (например,</span><span class="sxs-lookup"><span data-stu-id="95c2a-147">For source values greater than the dynamic range of a lower range target format (eg.</span></span> <span data-ttu-id="95c2a-148">большое 32-разрядное значение с плавающей точкой записывается в 16-разрядный RenderTarget с плавающей точкой) получается максимальное представляемое (с соответствующим знаком) значение БЕЗ учета бесконечности со знаком (из-за описанного выше округления к нулю).</span><span class="sxs-lookup"><span data-stu-id="95c2a-148">a large 32-bit float value is written into a 16-bit float RenderTarget), the maximum representable (appropriately signed) value results, NOT including signed infinity (due to the round to zero described above).</span></span>
-   <span data-ttu-id="95c2a-149">Не число в формате верхнего диапазона преобразуется в представление не числа в формате нижнего диапазона, если представление не числа существует в формате нижнего диапазона.</span><span class="sxs-lookup"><span data-stu-id="95c2a-149">NaN in a higher range format will be converted to NaN representation in the lower range format if the NaN representation exists in the lower range format.</span></span> <span data-ttu-id="95c2a-150">Если в формате нижнего диапазона нет представления не числа, результатом будет 0.</span><span class="sxs-lookup"><span data-stu-id="95c2a-150">If the lower format does not have a NaN representation, the result will be 0.</span></span>
-   <span data-ttu-id="95c2a-151">Бесконечное число в формате верхнего диапазона преобразуется в бесконечное число в формате нижнего диапазона, если возможно.</span><span class="sxs-lookup"><span data-stu-id="95c2a-151">INF in a higher range format will be converted to INF in the lower range format if available.</span></span> <span data-ttu-id="95c2a-152">Если в формате нижнего диапазона нет представления бесконечного числа, оно преобразуется в максимальное представляемое значение.</span><span class="sxs-lookup"><span data-stu-id="95c2a-152">If the lower format does not have an INF representation, it will be converted to the maximum value representable.</span></span> <span data-ttu-id="95c2a-153">Знак будет сохранен, если он доступен в конечном формате.</span><span class="sxs-lookup"><span data-stu-id="95c2a-153">The sign will be preserved if available in the target format.</span></span>
-   <span data-ttu-id="95c2a-154">Денормализованное число в формате верхнего диапазона преобразуется в представление денормализованного числа в формате нижнего диапазона, если оно есть в формате нижнего диапазона и преобразование возможно. В противном случае результатом будет 0.</span><span class="sxs-lookup"><span data-stu-id="95c2a-154">Denorm in a higher range format will be converted to the Denorm representation in the lower range format if available in the lower range format and the conversion is possible, otherwise the result is 0.</span></span> <span data-ttu-id="95c2a-155">Бит знака будет сохранен, если он доступен в конечном формате.</span><span class="sxs-lookup"><span data-stu-id="95c2a-155">The sign bit will be preserved if available in the target format.</span></span>

### <a name="converting-from-a-lower-range-representation-to-a-higher-range-representation"></a><span data-ttu-id="95c2a-156">Преобразование из представления нижнего диапазона в представление верхнего диапазона</span><span class="sxs-lookup"><span data-stu-id="95c2a-156">Converting from a lower range representation to a higher range representation</span></span>

-   <span data-ttu-id="95c2a-157">Не число в формате нижнего диапазона преобразуется в представление не числа в формате верхнего диапазона, если оно доступно в формате верхнего диапазона.</span><span class="sxs-lookup"><span data-stu-id="95c2a-157">NaN in a lower range format will be converted to the NaN representation in the higher range format if available in the higher range format.</span></span> <span data-ttu-id="95c2a-158">Если в формате верхнего диапазона нет представления не числа, оно преобразуется в 0.</span><span class="sxs-lookup"><span data-stu-id="95c2a-158">If the higher range format does not have a NaN representation, it will be converted to 0.</span></span>
-   <span data-ttu-id="95c2a-159">Бесконечное число в формате нижнего диапазона преобразуется в представление бесконечного числа в формате верхнего диапазона, если оно доступно в формате верхнего диапазона.</span><span class="sxs-lookup"><span data-stu-id="95c2a-159">INF in a lower range format will be converted to the INF representation in the higher range format if available in the higher range format.</span></span> <span data-ttu-id="95c2a-160">Если в более высоком формате отсутствует INF-представление, оно будет преобразовано в максимальное значение, которое можно представить (MAX \_ float в этом формате).</span><span class="sxs-lookup"><span data-stu-id="95c2a-160">If the higher format does not have an INF representation, it will be converted to the maximum value representable (MAX\_FLOAT in that format).</span></span> <span data-ttu-id="95c2a-161">Знак будет сохранен, если он доступен в конечном формате.</span><span class="sxs-lookup"><span data-stu-id="95c2a-161">The sign will be preserved if available in the target format.</span></span>
-   <span data-ttu-id="95c2a-162">Денормализованное число в формате нижнего диапазона преобразуется в нормализованное представление в формате верхнего диапазона, если это возможно, или в представление денормализованного числа в формате верхнего диапазона при наличии такого представления.</span><span class="sxs-lookup"><span data-stu-id="95c2a-162">Denorm in a lower range format will be converted to a normalized representation in the higher range format if possible, or else to a Denorm representation in the higher range format if the Denorm representation exists.</span></span> <span data-ttu-id="95c2a-163">Если ни одну из этих операций не удается выполнить из-за отсутствия представления денормализованного числа в формате верхнего диапазона, число преобразуется в 0.</span><span class="sxs-lookup"><span data-stu-id="95c2a-163">Failing those, if the higher range format does not have a Denorm representation, it will be converted to 0.</span></span> <span data-ttu-id="95c2a-164">Знак будет сохранен, если он доступен в конечном формате.</span><span class="sxs-lookup"><span data-stu-id="95c2a-164">The sign will be preserved if available in the target format.</span></span> <span data-ttu-id="95c2a-165">Обратите внимание, что 32-разрядные числа с плавающей точкой считаются форматом без представления денормализованного числа, так как денормализованные числа в операциях с 32-разрядными числами с плавающей точкой приводятся к нулю с сохранением знака.</span><span class="sxs-lookup"><span data-stu-id="95c2a-165">Note that 32-bit float numbers count as a format without a Denorm representation (because Denorms in operations on 32-bit floats flush to sign preserved 0).</span></span>

## <a name="integer-conversion"></a><span data-ttu-id="95c2a-166">Преобразование целых чисел</span><span class="sxs-lookup"><span data-stu-id="95c2a-166">Integer Conversion</span></span>

<span data-ttu-id="95c2a-167">В следующей таблице описаны преобразования из различных описанных выше представлений в другие представления.</span><span class="sxs-lookup"><span data-stu-id="95c2a-167">The following table describes conversions from various representations described above to other representations.</span></span> <span data-ttu-id="95c2a-168">Показаны только преобразования, которые фактически происходят в Direct3D.</span><span class="sxs-lookup"><span data-stu-id="95c2a-168">Only conversions that actually occur in Direct3D are shown.</span></span>



<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="95c2a-169">Тип исходных данных</span><span class="sxs-lookup"><span data-stu-id="95c2a-169">Source Data Type</span></span></th>
<th><span data-ttu-id="95c2a-170">Тип конечных данных</span><span class="sxs-lookup"><span data-stu-id="95c2a-170">Destination Data Type</span></span></th>
<th><span data-ttu-id="95c2a-171">Правило преобразования</span><span class="sxs-lookup"><span data-stu-id="95c2a-171">Conversion Rule</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="95c2a-172">SNORM</span><span class="sxs-lookup"><span data-stu-id="95c2a-172">SNORM</span></span></td>
<td><span data-ttu-id="95c2a-173">FLOAT</span><span class="sxs-lookup"><span data-stu-id="95c2a-173">FLOAT</span></span></td>
<td><span data-ttu-id="95c2a-174">Преобразование n-разрядного целочисленного значения, представляющего диапазон со знаком [от -1,0f до 1,0f], в число с плавающей точкой происходит следующим образом.</span><span class="sxs-lookup"><span data-stu-id="95c2a-174">Given an n-bit integer value representing the signed range [-1.0f to 1.0f], conversion to floating-point is as follows.</span></span><br/>
<ul>
<li><span data-ttu-id="95c2a-175">Наименьшее отрицательное значение сопоставляется с -1,0f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-175">The most-negative value maps to -1.0f.</span></span> <span data-ttu-id="95c2a-176">Например, 5-разрядное значение 10000 сопоставляется с - 1,0f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-176">e.g. the 5-bit value 10000 maps to -1.0f.</span></span></li>
<li><span data-ttu-id="95c2a-177">Все остальные значение преобразуются в числа с плавающей точкой (назовем их c), а результат вычисляется по формуле c \* (1,0f / (2⁽ⁿ⁻¹⁾-1)).</span><span class="sxs-lookup"><span data-stu-id="95c2a-177">Every other value is converted to a float (call it c), and then result = c \* (1.0f / (2⁽ⁿ⁻¹⁾-1)).</span></span> <span data-ttu-id="95c2a-178">Например, 5-разрядное значение 10001 преобразуется в -15,0f и делится на 15,0f — в результате получается -1,0f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-178">For example the 5-bit value 10001 is converted to -15.0f, and then divided by 15.0f, yielding -1.0f.</span></span></li>
</ul></td>
</tr>
<tr class="even">
<td><span data-ttu-id="95c2a-179">FLOAT</span><span class="sxs-lookup"><span data-stu-id="95c2a-179">FLOAT</span></span></td>
<td><span data-ttu-id="95c2a-180">SNORM</span><span class="sxs-lookup"><span data-stu-id="95c2a-180">SNORM</span></span></td>
<td><span data-ttu-id="95c2a-181">Преобразование числа с плавающей точкой в n-разрядное целочисленное значение, представляющее диапазон со знаком [от -1,0f до 1,0f], происходит следующим образом.</span><span class="sxs-lookup"><span data-stu-id="95c2a-181">Given a floating-point number, conversion to an n-bit integer value representing the signed range [-1.0f to 1.0f] is as follows.</span></span><br/>
<ul>
<li><span data-ttu-id="95c2a-182">Пусть c представляет начальное значение.</span><span class="sxs-lookup"><span data-stu-id="95c2a-182">Let c represent the starting value.</span></span></li>
<li><span data-ttu-id="95c2a-183">Если c не число, результатом будет 0.</span><span class="sxs-lookup"><span data-stu-id="95c2a-183">If c is NaN, the result is 0.</span></span></li>
<li><span data-ttu-id="95c2a-184">Если c > 1.0 f, включая INF, он имеет значение 1,0 f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-184">If c > 1.0f, including INF, it is clamped to 1.0f.</span></span></li>
<li><span data-ttu-id="95c2a-185">Если c <-1.0 f, включая-INF, он имеет значение-1.0 f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-185">If c < -1.0f, including -INF, it is clamped to -1.0f.</span></span></li>
<li><span data-ttu-id="95c2a-186">Преобразование из шкалы чисел с плавающей точкой в шкалу целых чисел: c = c \* (2ⁿ⁻¹-1).</span><span class="sxs-lookup"><span data-stu-id="95c2a-186">Convert from float scale to integer scale: c = c \* (2ⁿ⁻¹-1).</span></span></li>
<li><span data-ttu-id="95c2a-187">Преобразование в целое число происходит следующим образом.</span><span class="sxs-lookup"><span data-stu-id="95c2a-187">Convert to an integer as follows.</span></span>
<ul>
<li><span data-ttu-id="95c2a-188">Если c >= 0, c = c + 0,5 f, в противном случае c = c-0,5 f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-188">If c >= 0 then c = c + 0.5f, otherwise, c = c - 0.5f.</span></span></li>
<li><span data-ttu-id="95c2a-189">Десятичная дробь опускается, а оставшееся значение с плавающей точкой (целочисленное) напрямую преобразуется в целое число.</span><span class="sxs-lookup"><span data-stu-id="95c2a-189">Drop the decimal fraction, and the remaining floating point (integral) value is converted directly to an integer.</span></span></li>
</ul></li>
</ul>
<span data-ttu-id="95c2a-190">Для этого преобразования разрешается допуск в виде единицы наименьшей точности D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_Unit-Last-Place (с целочисленной стороны).</span><span class="sxs-lookup"><span data-stu-id="95c2a-190">This conversion is permitted a tolerance of D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_Unit-Last-Place Unit-Last-Place (on the integer side).</span></span> <span data-ttu-id="95c2a-191">Это значит, что после преобразования из шкалы чисел с плавающей точкой в целочисленную шкалу любое значение в пределах единицы наименьшей точности D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP представляемого значения конечного формата может быть сопоставлено с этим значением.</span><span class="sxs-lookup"><span data-stu-id="95c2a-191">This means that after converting from float to integer scale, any value within D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP Unit-Last-Place of a representable target format value is permitted to map to that value.</span></span> <span data-ttu-id="95c2a-192">Дополнительное требование к обратимости данных гарантирует, что преобразование остается неубывающим в пределах всего диапазона, а все выходные значения — достигаемыми.</span><span class="sxs-lookup"><span data-stu-id="95c2a-192">The additional Data Invertability requirement ensures that the conversion is nondecreasing across the range and all output values are attainable.</span></span> <span data-ttu-id="95c2a-193">(В указанных здесь константах <em>xx</em> следует заменить версией Direct3D, например 10, 11 или 12.)</span><span class="sxs-lookup"><span data-stu-id="95c2a-193">(In the constants shown here, <em>xx</em> should be replaced with the Direct3D version, for example 10, 11, or 12.)</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="95c2a-194">UNORM</span><span class="sxs-lookup"><span data-stu-id="95c2a-194">UNORM</span></span></td>
<td><span data-ttu-id="95c2a-195">FLOAT</span><span class="sxs-lookup"><span data-stu-id="95c2a-195">FLOAT</span></span></td>
<td><span data-ttu-id="95c2a-196">Начальное n-разрядное значение преобразуется в число с плавающей точкой (0,0f, 1,0f, 2,0f и т. д.), а затем делится на (2ⁿ-1).</span><span class="sxs-lookup"><span data-stu-id="95c2a-196">The starting n-bit value is converted to float (0.0f, 1.0f, 2.0f, etc.) and then divided by (2ⁿ-1).</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="95c2a-197">FLOAT</span><span class="sxs-lookup"><span data-stu-id="95c2a-197">FLOAT</span></span></td>
<td><span data-ttu-id="95c2a-198">UNORM</span><span class="sxs-lookup"><span data-stu-id="95c2a-198">UNORM</span></span></td>
<td><span data-ttu-id="95c2a-199">Пусть c представляет начальное значение.</span><span class="sxs-lookup"><span data-stu-id="95c2a-199">Let c represent the starting value.</span></span><br/>
<ul>
<li><span data-ttu-id="95c2a-200">Если c не число, результатом будет 0.</span><span class="sxs-lookup"><span data-stu-id="95c2a-200">If c is NaN, the result is 0.</span></span></li>
<li><span data-ttu-id="95c2a-201">Если c > 1.0 f, включая INF, он имеет значение 1,0 f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-201">If c > 1.0f, including INF, it is clamped to 1.0f.</span></span></li>
<li><span data-ttu-id="95c2a-202">Если c < 0,0 f, включая-INF, он заменяется на 0,0 f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-202">If c < 0.0f, including -INF, it is clamped to 0.0f.</span></span></li>
<li><span data-ttu-id="95c2a-203">Преобразование из шкалы чисел с плавающей точкой в шкалу целых чисел: c = c \* (2ⁿ-1).</span><span class="sxs-lookup"><span data-stu-id="95c2a-203">Convert from float scale to integer scale: c = c \* (2ⁿ-1).</span></span></li>
<li><span data-ttu-id="95c2a-204">Преобразование в целое число.</span><span class="sxs-lookup"><span data-stu-id="95c2a-204">Convert to integer.</span></span>
<ul>
<li><span data-ttu-id="95c2a-205">c = c + 0,5f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-205">c = c + 0.5f.</span></span></li>
<li><span data-ttu-id="95c2a-206">Десятичная дробь опускается, а оставшееся значение с плавающей точкой (целочисленное) напрямую преобразуется в целое число.</span><span class="sxs-lookup"><span data-stu-id="95c2a-206">The decimal fraction is dropped, and the remaining floating point (integral) value is converted directly to an integer.</span></span></li>
</ul></li>
</ul>
<span data-ttu-id="95c2a-207">Для этого преобразования разрешается допуск в виде единицы наименьшей точности D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP (с целочисленной стороны).</span><span class="sxs-lookup"><span data-stu-id="95c2a-207">This conversion is permitted a tolerance of D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP Unit-Last-Place (on the integer side).</span></span> <span data-ttu-id="95c2a-208">Это значит, что после преобразования из шкалы чисел с плавающей точкой в целочисленную шкалу любое значение в пределах единицы наименьшей точности D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP представляемого значения конечного формата может быть сопоставлено с этим значением.</span><span class="sxs-lookup"><span data-stu-id="95c2a-208">This means that after converting from float to integer scale, any value within D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP Unit-Last-Place of a representable target format value is permitted to map to that value.</span></span> <span data-ttu-id="95c2a-209">Дополнительное требование к обратимости данных гарантирует, что преобразование остается неубывающим в пределах всего диапазона, а все выходные значения — достигаемыми.</span><span class="sxs-lookup"><span data-stu-id="95c2a-209">The additional Data Invertability requirement ensures that the conversion is nondecreasing across the range and all output values are attainable.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="95c2a-210">SRGB</span><span class="sxs-lookup"><span data-stu-id="95c2a-210">SRGB</span></span></td>
<td><span data-ttu-id="95c2a-211">FLOAT</span><span class="sxs-lookup"><span data-stu-id="95c2a-211">FLOAT</span></span></td>
<td><span data-ttu-id="95c2a-212">Ниже описано идеальное преобразование SRGB в FLOAT.</span><span class="sxs-lookup"><span data-stu-id="95c2a-212">The following is the ideal SRGB to FLOAT conversion.</span></span><br/>
<ul>
<li><span data-ttu-id="95c2a-213">Возьмем начальное n-разрядное значение, преобразуем его в целое число (0,0f, 1,0f, 2,0f и т. д.); результат обозначим c.</span><span class="sxs-lookup"><span data-stu-id="95c2a-213">Take the starting n-bit value, convert it a float (0.0f, 1.0f, 2.0f, etc.); call this c.</span></span></li>
<li><span data-ttu-id="95c2a-214">c = c \* (1,0f / (2ⁿ-1))</span><span class="sxs-lookup"><span data-stu-id="95c2a-214">c = c \* (1.0f / (2ⁿ-1))</span></span></li>
<li><span data-ttu-id="95c2a-215">Если (c < = D3D<em>xx</em>_SRGB_TO_FLOAT_THRESHOLD), то: result = c/D3D<em>XX</em>_SRGB_TO_FLOAT_DENOMINATOR_1, else: Result = ((c + D3D<em>xx</em>_SRGB_TO_FLOAT_OFFSET)/D3D<em>XX</em>_SRGB_TO_FLOAT_DENOMINATOR_2) D3D<em>XX</em>_SRGB_TO_FLOAT_EXPONENT</span><span class="sxs-lookup"><span data-stu-id="95c2a-215">If (c < = D3D<em>xx</em>_SRGB_TO_FLOAT_THRESHOLD) then: result = c / D3D<em>xx</em>_SRGB_TO_FLOAT_DENOMINATOR_1, else: result = ((c + D3D<em>xx</em>_SRGB_TO_FLOAT_OFFSET)/D3D<em>xx</em>_SRGB_TO_FLOAT_DENOMINATOR_2)D3D<em>xx</em>_SRGB_TO_FLOAT_EXPONENT</span></span></li>
</ul>
<span data-ttu-id="95c2a-216">Для этого преобразования разрешается допуск в виде единицы наименьшей точности D3D<em>xx</em>_SRGB_TO_FLOAT_TOLERANCE_IN_ULP (со стороны SRGB).</span><span class="sxs-lookup"><span data-stu-id="95c2a-216">This conversion is permitted a tolerance of D3D<em>xx</em>_SRGB_TO_FLOAT_TOLERANCE_IN_ULP Unit-Last-Place (on the SRGB side).</span></span> <br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="95c2a-217">FLOAT</span><span class="sxs-lookup"><span data-stu-id="95c2a-217">FLOAT</span></span></td>
<td><span data-ttu-id="95c2a-218">SRGB</span><span class="sxs-lookup"><span data-stu-id="95c2a-218">SRGB</span></span></td>
<td><span data-ttu-id="95c2a-219">Ниже приведено идеальное преобразование с плавающей запятой > SRGB.</span><span class="sxs-lookup"><span data-stu-id="95c2a-219">The following is the ideal FLOAT -> SRGB conversion.</span></span><br/> <span data-ttu-id="95c2a-220">При условии, что конечный цветовой компонент SRGB содержит n бит.</span><span class="sxs-lookup"><span data-stu-id="95c2a-220">Assuming the target SRGB color component has n bits:</span></span><br/>
<ul>
<li><span data-ttu-id="95c2a-221">Пусть c — это начальное значение.</span><span class="sxs-lookup"><span data-stu-id="95c2a-221">Suppose the starting value is c.</span></span></li>
<li><span data-ttu-id="95c2a-222">Если c не число, результатом будет 0.</span><span class="sxs-lookup"><span data-stu-id="95c2a-222">If c is NaN, the result is 0.</span></span></li>
<li><span data-ttu-id="95c2a-223">Если c > 1.0 f, включая INF, имеет значение 1,0 f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-223">If c > 1.0f, including INF, is clamped to 1.0f.</span></span></li>
<li><span data-ttu-id="95c2a-224">Если c < 0,0 f, включая-INF, он заменяется на 0,0 f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-224">If c < 0.0f, including -INF, it is clamped to 0.0f.</span></span></li>
<li><span data-ttu-id="95c2a-225">Если (c <= D3D<em>xx</em>_FLOAT_TO_SRGB_THRESHOLD), то: c = d3d<em>XX</em>_FLOAT_TO_SRGB_SCALE_1 \* c, else: c = D3D<em>XX</em>_FLOAT_TO_SRGB_SCALE_2 \* c (D3D<em>XX</em>_FLOAT_TO_SRGB_EXPONENT_NUMERATOR/D3D<em>XX</em>_FLOAT_TO_SRGB_EXPONENT_DENOMINATOR) — D3D<em>XX</em>_FLOAT_TO_SRGB_OFFSET</span><span class="sxs-lookup"><span data-stu-id="95c2a-225">If (c <= D3D<em>xx</em>_FLOAT_TO_SRGB_THRESHOLD) then: c = D3D<em>xx</em>_FLOAT_TO_SRGB_SCALE_1 \* c, else: c = D3D<em>xx</em>_FLOAT_TO_SRGB_SCALE_2 \* c(D3D<em>xx</em>_FLOAT_TO_SRGB_EXPONENT_NUMERATOR/D3D<em>xx</em>_FLOAT_TO_SRGB_EXPONENT_DENOMINATOR) - D3D<em>xx</em>_FLOAT_TO_SRGB_OFFSET</span></span></li>
<li><span data-ttu-id="95c2a-226">Преобразование из шкалы чисел с плавающей точкой в шкалу целых чисел: c = c \* (2ⁿ-1).</span><span class="sxs-lookup"><span data-stu-id="95c2a-226">Convert from float scale to integer scale: c = c \* (2ⁿ-1).</span></span></li>
<li><span data-ttu-id="95c2a-227">Преобразование в целое число:</span><span class="sxs-lookup"><span data-stu-id="95c2a-227">Convert to integer:</span></span>
<ul>
<li><span data-ttu-id="95c2a-228">c = c + 0,5f.</span><span class="sxs-lookup"><span data-stu-id="95c2a-228">c = c + 0.5f.</span></span></li>
<li><span data-ttu-id="95c2a-229">Десятичная дробь опускается, а оставшееся значение с плавающей точкой (целочисленное) напрямую преобразуется в целое число.</span><span class="sxs-lookup"><span data-stu-id="95c2a-229">The decimal fraction is dropped, and the remaining floating point (integral) value is converted directly to an integer.</span></span></li>
</ul></li>
</ul>
<span data-ttu-id="95c2a-230">Для этого преобразования разрешается допуск в виде единицы наименьшей точности D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP (с целочисленной стороны).</span><span class="sxs-lookup"><span data-stu-id="95c2a-230">This conversion is permitted a tolerance of D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP Unit-Last-Place (on the integer side).</span></span> <span data-ttu-id="95c2a-231">Это значит, что после преобразования из шкалы чисел с плавающей точкой в целочисленную шкалу любое значение в пределах единицы наименьшей точности D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP представляемого значения конечного формата может быть сопоставлено с этим значением.</span><span class="sxs-lookup"><span data-stu-id="95c2a-231">This means that after converting from float to integer scale, any value within D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP Unit-Last-Place of a representable target format value is permitted to map to that value.</span></span> <span data-ttu-id="95c2a-232">Дополнительное требование к обратимости данных гарантирует, что преобразование остается неубывающим в пределах всего диапазона, а все выходные значения — достигаемыми.</span><span class="sxs-lookup"><span data-stu-id="95c2a-232">The additional Data Invertability requirement ensures that the conversion is nondecreasing across the range and all output values are attainable.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="95c2a-233">SINT</span><span class="sxs-lookup"><span data-stu-id="95c2a-233">SINT</span></span></td>
<td><span data-ttu-id="95c2a-234">SINT с дополнительным числом бит</span><span class="sxs-lookup"><span data-stu-id="95c2a-234">SINT With More Bits</span></span></td>
<td><span data-ttu-id="95c2a-235">Для преобразования SINT в SINT с дополнительным числом бит старший разряд (MSB) начального числа &quot;дополняется знаком&quot; до дополнительных битов, доступных в конечном формате.</span><span class="sxs-lookup"><span data-stu-id="95c2a-235">To convert from SINT to an SINT with more bits, the most significant bit (MSB) of the starting number is &quot;sign-extended&quot; to the additional bits available in the target format.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="95c2a-236">UINT</span><span class="sxs-lookup"><span data-stu-id="95c2a-236">UINT</span></span></td>
<td><span data-ttu-id="95c2a-237">SINT с дополнительным числом бит</span><span class="sxs-lookup"><span data-stu-id="95c2a-237">SINT With More Bits</span></span></td>
<td><span data-ttu-id="95c2a-238">Для преобразования SINT в SINT с дополнительным числом бит число копируется в младшие разряды (LSB) конечного формата, а дополнительные старшие разряды заполняются нулями.</span><span class="sxs-lookup"><span data-stu-id="95c2a-238">To convert from UINT to an SINT with more bits, the number is copied to the target format's least significant bits (LSBs) and additional MSBs are padded with 0.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="95c2a-239">SINT</span><span class="sxs-lookup"><span data-stu-id="95c2a-239">SINT</span></span></td>
<td><span data-ttu-id="95c2a-240">UINT с дополнительным числом бит</span><span class="sxs-lookup"><span data-stu-id="95c2a-240">UINT With More Bits</span></span></td>
<td><span data-ttu-id="95c2a-241">Для преобразования SINT в UINT с дополнительным числом бит значение прикрепляется к 0, если оно отрицательное.</span><span class="sxs-lookup"><span data-stu-id="95c2a-241">To convert from SINT to UINT with more bits: If negative, the value is clamped to 0.</span></span> <span data-ttu-id="95c2a-242">В противном случае число копируется в младшие разряды конечного формата, а дополнительные старшие разряды заполняются нулями.</span><span class="sxs-lookup"><span data-stu-id="95c2a-242">Otherwise the number is copied to the target format's LSBs and additional MSB's are padded with 0.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="95c2a-243">UINT</span><span class="sxs-lookup"><span data-stu-id="95c2a-243">UINT</span></span></td>
<td><span data-ttu-id="95c2a-244">UINT с дополнительным числом бит</span><span class="sxs-lookup"><span data-stu-id="95c2a-244">UINT With More Bits</span></span></td>
<td><span data-ttu-id="95c2a-245">Для преобразования UINT в UINT с дополнительным числом бит число копируется в младшие разряды конечного формата, а дополнительные старшие разряды заполняются нулями.</span><span class="sxs-lookup"><span data-stu-id="95c2a-245">To convert from UINT to UINT with more bits the number is copied to the target format's LSBs and additional MSB's are padded with 0.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="95c2a-246">SINT или UINT</span><span class="sxs-lookup"><span data-stu-id="95c2a-246">SINT or UINT</span></span></td>
<td><span data-ttu-id="95c2a-247">SINT или UINT с дополнительным или одинаковым числом бит</span><span class="sxs-lookup"><span data-stu-id="95c2a-247">SINT or UINT With Fewer or Equal Bits</span></span></td>
<td><span data-ttu-id="95c2a-248">Для преобразования SINT или UINT в SINT или UINT с дополнительным или одинаковым числом бит (или изменения наличия знака) начальное значение прикрепляется к диапазону конечного формата.</span><span class="sxs-lookup"><span data-stu-id="95c2a-248">To convert from a SINT or UINT to SINT or UINT with fewer or equal bits (and/or change in signedness), the starting value is simply clamped to the range of the target format.</span></span><br/></td>
</tr>
</tbody>
</table>



 

## <a name="fixed-point-integer-conversion"></a><span data-ttu-id="95c2a-249">Преобразование целого числа с фиксированной точкой</span><span class="sxs-lookup"><span data-stu-id="95c2a-249">Fixed Point Integer Conversion</span></span>

<span data-ttu-id="95c2a-250">Целые числа с фиксированной точкой — это целые числа некоторой разрядности с неявным десятичным разделителем в фиксированном расположении.</span><span class="sxs-lookup"><span data-stu-id="95c2a-250">Fixed point integers are simply integers of some bit size that have an implicit decimal point at a fixed location.</span></span>

<span data-ttu-id="95c2a-251">Распространенный "целочисленный" тип данных — это особый случай целого числа с фиксированной точкой и десятичным числом в конце.</span><span class="sxs-lookup"><span data-stu-id="95c2a-251">The ubiquitous "integer" data type is a special case of a fixed point integer with the decimal at the end of the number.</span></span>

<span data-ttu-id="95c2a-252">Представления чисел с фиксированной точкой характеризуются как i.f, где i — количество целочисленных бит, а f — дробных бит.</span><span class="sxs-lookup"><span data-stu-id="95c2a-252">Fixed point number representations are characterized as: i.f, where i is the number of integer bits and f is the number of fractional bits.</span></span> <span data-ttu-id="95c2a-253">Например, 16,8 означает, что за 16 целочисленными битами следуют 8 дробных бит.</span><span class="sxs-lookup"><span data-stu-id="95c2a-253">e.g. 16.8 means 16 bits integer followed by 8 bits of fraction.</span></span> <span data-ttu-id="95c2a-254">Целочисленная часть хранится в дополнительном коде, по крайней мере согласно данному здесь определению. Впрочем, для целых чисел без знака можно использовать аналогичное определение.</span><span class="sxs-lookup"><span data-stu-id="95c2a-254">The integer part is stored in 2's complement, at least as defined here (though it can be defined equally for unsigned integers as well).</span></span> <span data-ttu-id="95c2a-255">Дробная часть хранится без знака.</span><span class="sxs-lookup"><span data-stu-id="95c2a-255">The fractional part is stored in unsigned form.</span></span> <span data-ttu-id="95c2a-256">Дробная часть всегда представляет положительную дробь между двумя ближайшими целочисленными значениями, начиная с наименьшего отрицательного.</span><span class="sxs-lookup"><span data-stu-id="95c2a-256">The fractional part always represents the positive fraction between the two nearest integral values, starting from the most negative.</span></span>

<span data-ttu-id="95c2a-257">Операции сложения и вычитания над числами с фиксированной точкой выполняются с помощью стандартных арифметических действий над целыми числами без учета расположения неявного десятичного разделителя.</span><span class="sxs-lookup"><span data-stu-id="95c2a-257">Addition and subtraction operations on fixed point numbers are performed simply using standard integer arithmetic, without any consideration for where the implied decimal lies.</span></span> <span data-ttu-id="95c2a-258">Добавление 1 к числу с фиксированной точкой 16,8 означает лишь добавление 256, так как десятичный разделитель находится в 8 битах от младшего разряда числа.</span><span class="sxs-lookup"><span data-stu-id="95c2a-258">Adding 1 to a 16.8 fixed point number just means adding 256, since the decimal is 8 places in from the least significant end of the number.</span></span> <span data-ttu-id="95c2a-259">Другие операции, например умножение, могут также выполняться с помощью арифметических действий над целыми числами, но в этом случае следует учитывать влияние на фиксированный десятичный разделитель.</span><span class="sxs-lookup"><span data-stu-id="95c2a-259">Other operations such as multiplication, can be performed as well simply using integer arithmetic, provided the effect on the fixed decimal is accounted for.</span></span> <span data-ttu-id="95c2a-260">Например, в результате умножения двух целых чисел 16,8 с помощью действия умножения целых чисел получается 32,16.</span><span class="sxs-lookup"><span data-stu-id="95c2a-260">For example, multiplying two 16.8 integers using an integer multiply produces a 32.16 result.</span></span>

<span data-ttu-id="95c2a-261">Представления целых чисел с фиксированной точкой используются в Direct3D двумя способами.</span><span class="sxs-lookup"><span data-stu-id="95c2a-261">Fixed point integer representations are used in two ways in Direct3D.</span></span>

-   <span data-ttu-id="95c2a-262">Положения вершин после отсечения в средстве прорисовки прикрепляются к фиксированной точке для равномерного распределения точности в области RenderTarget.</span><span class="sxs-lookup"><span data-stu-id="95c2a-262">Post-clipped vertex positions in the rasterizer are snapped to fixed point, to uniformly distribute precision across the RenderTarget area.</span></span> <span data-ttu-id="95c2a-263">Многие операции средства прорисовки, включая, например, выбор передней поверхности, выполняются над положениями, прикрепленными к фиксированной точке, а в некоторых операциях, таких как настройка интерполятора атрибутов, используются положения, преобразованные в число с плавающей точкой из положений, прикрепленных к фиксированной точке.</span><span class="sxs-lookup"><span data-stu-id="95c2a-263">Many rasterizer operations, including face culling as one example, occur on fixed point snapped positions, while other operations, such as attribute interpolator setup, use positions that have been converted back to floating point from the fixed point snapped positions.</span></span>
-   <span data-ttu-id="95c2a-264">Координаты текстуры для операций дискретизации прикрепляются к фиксированной точке (после масштабирования по размеру текстуры) для равномерно распределения точности в области текстуры при выборе расположения и веса блоков задержки фильтра.</span><span class="sxs-lookup"><span data-stu-id="95c2a-264">Texture coordinates for sampling operations are snapped to fixed point (after being scaled by texture size), to uniformly distribute precision across texture space, in choosing filter tap locations/weights.</span></span> <span data-ttu-id="95c2a-265">Значения веса преобразуются в числа с плавающей точкой перед выполнением сами арифметических действий для фильтрации.</span><span class="sxs-lookup"><span data-stu-id="95c2a-265">Weight values are converted back to floating point before actual filtering arithmetic is performed.</span></span>



<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="95c2a-266">Тип исходных данных</span><span class="sxs-lookup"><span data-stu-id="95c2a-266">Source Data Type</span></span></th>
<th><span data-ttu-id="95c2a-267">Тип конечных данных</span><span class="sxs-lookup"><span data-stu-id="95c2a-267">Destination Data Type</span></span></th>
<th><span data-ttu-id="95c2a-268">Правило преобразования</span><span class="sxs-lookup"><span data-stu-id="95c2a-268">Conversion Rule</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="95c2a-269">FLOAT</span><span class="sxs-lookup"><span data-stu-id="95c2a-269">FLOAT</span></span></td>
<td><span data-ttu-id="95c2a-270">Целое число с фиксированной точкой</span><span class="sxs-lookup"><span data-stu-id="95c2a-270">Fixed Point Integer</span></span></td>
<td><span data-ttu-id="95c2a-271">Ниже приведена общая процедура преобразования числа с плавающей точкой n в целое число с фиксированной точкой i.f, где i — количество целочисленных бит (со знаком), а f — количество дробных бит.</span><span class="sxs-lookup"><span data-stu-id="95c2a-271">The following is the general procedure for converting a floating point number n to a fixed point integer i.f, where i is the number of (signed) integer bits and f is the number of fractional bits.</span></span><br/>
<ul>
<li><span data-ttu-id="95c2a-272">Вычисляем FixedMin = -2⁽ⁱ⁻¹⁾</span><span class="sxs-lookup"><span data-stu-id="95c2a-272">Compute FixedMin = -2⁽ⁱ⁻¹⁾</span></span></li>
<li><span data-ttu-id="95c2a-273">Compute Фикседмакс = 2 ⁽ ⁱ ⁻ ¹ ⁾-2<sup>(-f)</sup></span><span class="sxs-lookup"><span data-stu-id="95c2a-273">Compute FixedMax = 2⁽ⁱ⁻¹⁾ - 2<sup>(-f)</sup></span></span></li>
<li><span data-ttu-id="95c2a-274">Если n является NaN, result = 0; Если n имеет значение + INF, result = Фикседмакс \* 2<sup>f</sup>; Если n имеет значение-INF, result = Фикседмин \* 2<sup>f</sup></span><span class="sxs-lookup"><span data-stu-id="95c2a-274">If n is a NaN, result = 0; if n is +Inf, result = FixedMax*2<sup>f</sup>; if n is -Inf, result = FixedMin*2<sup>f</sup></span></span></li>
<li><span data-ttu-id="95c2a-275">Если n >= Фикседмакс, result = Фикседмакс \* 2<sup>f</sup>; Если n <= Фикседмин, result = Фикседмин \* 2 <sup> f</span><span class="sxs-lookup"><span data-stu-id="95c2a-275">If n >= FixedMax, result = Fixedmax*2<sup>f</sup>; if n <= FixedMin, result = FixedMin*2<sup>f</span></span></sup></li>
<li><span data-ttu-id="95c2a-276">Иначе вычисляем n\*2<sup>f</sup> и преобразуем результат в целое число.</span><span class="sxs-lookup"><span data-stu-id="95c2a-276">Else compute n\*2<sup>f</sup> and convert to integer.</span></span></li>
</ul>
<span data-ttu-id="95c2a-277">Для целочисленного результата реализаций разрешается допуск в виде единицы наименьшей точности D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP вместо бесконечно точного значения n\*2<sup>f</sup> после последнего указанного выше действия.</span><span class="sxs-lookup"><span data-stu-id="95c2a-277">Implementations are permitted D3D<em>xx</em>_FLOAT32_TO_INTEGER_TOLERANCE_IN_ULP Unit-Last-Place tolerance in the integer result, instead of the infinitely precise value n\*2<sup>f</sup> after the last step above.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="95c2a-278">Целое число с фиксированной точкой</span><span class="sxs-lookup"><span data-stu-id="95c2a-278">Fixed Point Integer</span></span></td>
<td><span data-ttu-id="95c2a-279">FLOAT</span><span class="sxs-lookup"><span data-stu-id="95c2a-279">FLOAT</span></span></td>
<td><span data-ttu-id="95c2a-280">Предположим, что определенное представление с фиксированной точкой, преобразуемое в число с плавающей точкой, содержит не более 24 бит информации, из которых не более 23 бит относятся к дробному компоненту.</span><span class="sxs-lookup"><span data-stu-id="95c2a-280">Assume that the specific fixed point representation being converted to float does not contain more than a total of 24 bits of information, no more than 23 bits of which is in the fractional component.</span></span> <span data-ttu-id="95c2a-281">Предположим, что данное число с фиксированной точкой, fxp, имеет форму i.f (i целочисленных бит, f дробных бит).</span><span class="sxs-lookup"><span data-stu-id="95c2a-281">Suppose a given fixed point number, fxp, is in i.f form (i bits integer, f bits fraction).</span></span> <span data-ttu-id="95c2a-282">Преобразование в число с плавающей точкой похоже на следующий псевдокод.</span><span class="sxs-lookup"><span data-stu-id="95c2a-282">The conversion to float is akin to the following pseudocode.</span></span><br/> <span data-ttu-id="95c2a-283">float Result = (float) (фксп >> f) +//Извлечение целого числа</span><span class="sxs-lookup"><span data-stu-id="95c2a-283">float result = (float)(fxp >> f) + // extract integer</span></span><br/> <dl> <span data-ttu-id="95c2a-284">((float) (фксп & (2<sup>f</sup> - 1))/(2<sup>f</sup>));//Извлечение дробной части</span><span class="sxs-lookup"><span data-stu-id="95c2a-284">((float)(fxp & (2<sup>f</sup> - 1)) / (2<sup>f</sup>)); // extract fraction</span></span><br />
</dl></td>
</tr>
</tbody>
</table>



 

## <a name="related-topics"></a><span data-ttu-id="95c2a-285">См. также</span><span class="sxs-lookup"><span data-stu-id="95c2a-285">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="95c2a-286">Ресурсы (Direct3D 10)</span><span class="sxs-lookup"><span data-stu-id="95c2a-286">Resources (Direct3D 10)</span></span>](d3d10-graphics-programming-guide-resources.md)
</dt> </dl>

 

 




