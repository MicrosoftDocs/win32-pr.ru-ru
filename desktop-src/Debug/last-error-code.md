---
description: При возникновении ошибки большинство системных функций возвращают код ошибки, обычно 0, NULL или &\# 8211; 1.
ms.assetid: fd5b0d6e-78cf-4f51-b61d-d32576cd485a
title: Код Last-Error
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 80bf0fe2f544fc3d87690be81b0d09767745ef95
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103990408"
---
# <a name="last-error-code"></a><span data-ttu-id="750b4-103">Код Last-Error</span><span class="sxs-lookup"><span data-stu-id="750b4-103">Last-Error Code</span></span>

<span data-ttu-id="750b4-104">При возникновении ошибки большинство системных функций возвращают код ошибки, обычно 0, **null** или – 1.</span><span class="sxs-lookup"><span data-stu-id="750b4-104">When an error occurs, most system functions return an error code, usually 0, **NULL**, or –1.</span></span> <span data-ttu-id="750b4-105">Многие системные функции также устанавливают дополнительный код ошибки, который называется *кодом последней ошибки*.</span><span class="sxs-lookup"><span data-stu-id="750b4-105">Many system functions also set an additional error code called the *last-error code*.</span></span> <span data-ttu-id="750b4-106">Этот код ошибки поддерживается отдельно для каждого выполняющегося потока. Ошибка в одном потоке не перезаписывает код последней ошибки в другом потоке.</span><span class="sxs-lookup"><span data-stu-id="750b4-106">This error code is maintained separately for each running thread; an error in one thread does not overwrite the last-error code in another thread.</span></span> <span data-ttu-id="750b4-107">Любая функция может вызвать функцию [**сетластеррор**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) или [**сетластеррорекс**](/windows/desktop/api/Winuser/nf-winuser-setlasterrorex) , чтобы задать код последней ошибки для текущего потока.</span><span class="sxs-lookup"><span data-stu-id="750b4-107">Any function can call the [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) or [**SetLastErrorEx**](/windows/desktop/api/Winuser/nf-winuser-setlasterrorex) function to set the last-error code for the current thread.</span></span> <span data-ttu-id="750b4-108">Эти функции предназначены в первую очередь для библиотек динамической компоновки (DLL), поэтому они могут предоставлять сведения вызывающему приложению.</span><span class="sxs-lookup"><span data-stu-id="750b4-108">These functions are intended primarily for dynamic-link libraries (DLL), so they can provide information to the calling application.</span></span> <span data-ttu-id="750b4-109">Обратите внимание, что некоторые функции вызывают **сетластеррор** или **сетластеррорекс** с 0 при успешном выполнении, удаляя код ошибки, заданный самой последней неудачной функцией, а другие — нет.</span><span class="sxs-lookup"><span data-stu-id="750b4-109">Note that some functions call **SetLastError** or **SetLastErrorEx** with 0 when they succeed, wiping out the error code set by the most recently failed function, while others do not.</span></span>

<span data-ttu-id="750b4-110">Приложение может получить код последней ошибки с помощью функции [**GetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror) ; код ошибки может дать дополнительные сведения о том, что именно произошло, чтобы завершить работу функции.</span><span class="sxs-lookup"><span data-stu-id="750b4-110">An application can retrieve the last-error code by using the [**GetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror) function; the error code may tell more about what actually occurred to make the function fail.</span></span> <span data-ttu-id="750b4-111">Документация по системным функциям будет указывать условия, при которых функция задает код последней ошибки.</span><span class="sxs-lookup"><span data-stu-id="750b4-111">The documentation for system functions will indicate the conditions under which the function sets the last-error code.</span></span>

<span data-ttu-id="750b4-112">Система определяет набор кодов ошибок, которые могут быть установлены в качестве кодов последней ошибки или возвращены этими функциями.</span><span class="sxs-lookup"><span data-stu-id="750b4-112">The system defines a set of error codes that can be set as last-error codes or be returned by these functions.</span></span> <span data-ttu-id="750b4-113">Коды ошибок представляют собой 32-битные значения (более значащий бит 31).</span><span class="sxs-lookup"><span data-stu-id="750b4-113">Error codes are 32-bit values (bit 31 is the most significant bit).</span></span> <span data-ttu-id="750b4-114">Бит 29 зарезервирован для кодов ошибок, определяемых приложением; код системной ошибки не имеет этого бита.</span><span class="sxs-lookup"><span data-stu-id="750b4-114">Bit 29 is reserved for application-defined error codes; no system error code has this bit set.</span></span> <span data-ttu-id="750b4-115">Если для приложения определены коды ошибок, установите этот бит, чтобы указать, что код ошибки определен приложением, и убедитесь, что коды ошибок не конфликтуют с определенными в системе кодами ошибок.</span><span class="sxs-lookup"><span data-stu-id="750b4-115">If you define error codes for your application, set this bit to indicate that the error code has been defined by an application and to ensure that the error codes do not conflict with any system-defined error codes.</span></span> <span data-ttu-id="750b4-116">Дополнительные сведения см. в разделе WinError. h и [коды системных ошибок](system-error-codes.md).</span><span class="sxs-lookup"><span data-stu-id="750b4-116">For more information, see WinError.h and [System Error Codes](system-error-codes.md).</span></span>

 

 
