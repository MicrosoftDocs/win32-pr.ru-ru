---
title: Рекомендации по именам приложений службы
description: При разработке распределенного приложения необходимо предоставить пользователям приложения метод для указания имени, по которому они могут зарегистрировать приложение в базе данных службы имен.
ms.assetid: cda997b3-6031-4c0f-affc-c766ba4b7fd5
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c67af441da7a51917ae92751345e860e6b0fc92b
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986660"
---
# <a name="name-service-application-guidelines"></a><span data-ttu-id="288b5-103">Рекомендации по именам приложений службы</span><span class="sxs-lookup"><span data-stu-id="288b5-103">Name Service Application Guidelines</span></span>

<span data-ttu-id="288b5-104">При разработке распределенного приложения необходимо предоставить пользователям приложения метод для указания имени, по которому они могут зарегистрировать приложение в базе данных службы имен.</span><span class="sxs-lookup"><span data-stu-id="288b5-104">When you develop your distributed application, you need to provide the application users with a method for specifying the name under which they can register the application in the name service database.</span></span> <span data-ttu-id="288b5-105">Этот метод может состоять из файла данных, ввода командной строки или диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="288b5-105">This method can consist of a data file, command-line input, or dialog box.</span></span>

<span data-ttu-id="288b5-106">Хотя архитектура службы имен RPC поддерживает различные методы организации записей сервера приложения, она оптимизирована для поиска.</span><span class="sxs-lookup"><span data-stu-id="288b5-106">Although the RPC name service architecture supports various methods for organizing an application's server entries, it is optimized for lookups.</span></span> <span data-ttu-id="288b5-107">В результате частое обновление может снизить производительность службы имен и приложения.</span><span class="sxs-lookup"><span data-stu-id="288b5-107">As a result, frequent updates can hinder the performance of both the name service and the application.</span></span> <span data-ttu-id="288b5-108">Чтобы избежать необязательного экспорта информации, выберите проект, позволяющий серверу определить, находится ли информация в базе данных службы имен.</span><span class="sxs-lookup"><span data-stu-id="288b5-108">To avoid exporting information unnecessarily, choose a design that lets the server determine whether its information is in the name service database.</span></span> <span data-ttu-id="288b5-109">Кроме того, каждый экземпляр сервера должен экспортироваться в собственное имя записи.</span><span class="sxs-lookup"><span data-stu-id="288b5-109">In addition, each server instance should export to its own entry name.</span></span> <span data-ttu-id="288b5-110">В противном случае экземпляру будет сложно изменить свои идентификаторы UUID объекта или последовательностей протоколов, не затрагивая данные другого экземпляра.</span><span class="sxs-lookup"><span data-stu-id="288b5-110">Otherwise, it will be difficult for an instance to change its supported object UUIDs or protocol sequences without disturbing another instance's information.</span></span>

<span data-ttu-id="288b5-111">Следующий метод позволяет избежать этих ловушек и обеспечивает хорошую производительность независимо от того, какая служба имен используется в вашей сети.</span><span class="sxs-lookup"><span data-stu-id="288b5-111">The following method avoids these pitfalls and provides good performance, no matter what name service your network uses.</span></span>

<span data-ttu-id="288b5-112">Для начала разработайте приложение таким образом, чтобы при первом запуске конкретного экземпляра сервера он выберет уникальное имя записи сервера и сохранит это имя в реестре вместе с другими сведениями о конфигурации приложения.</span><span class="sxs-lookup"><span data-stu-id="288b5-112">To begin with, design your application so that the first time a given server instance starts, it picks a unique server-entry name and saves this name in the registry along with the application's other configuration information.</span></span> <span data-ttu-id="288b5-113">Затем попытайтесь экспортировать свои дескрипторы привязки и ИДЕНТИФИКАТОРы объектов (если таковые имеются) в запись службы имен.</span><span class="sxs-lookup"><span data-stu-id="288b5-113">Then, have it export its binding handles and object UUIDs, if any, to its name service entry.</span></span>

<span data-ttu-id="288b5-114">При последующих вызовах экземпляра сервера необходимо убедиться, что запись службы имен имеется и содержит правильный набор идентификаторов UUID объекта и дескрипторов привязки.</span><span class="sxs-lookup"><span data-stu-id="288b5-114">Subsequent invocations of the server instance should check that the name service entry is present and contains the correct set of object UUIDs and binding handles.</span></span> <span data-ttu-id="288b5-115">Отсутствующие записи могут означать, что администратор удалил ее или что отключение питания привело к потере данных службы имен.</span><span class="sxs-lookup"><span data-stu-id="288b5-115">A missing entry may mean that an administrator removed it, or that a power outage caused the name service information to be lost.</span></span> <span data-ttu-id="288b5-116">Важно убедиться, что дескрипторы привязки в записи верны; Если администратор добавляет в компьютер поддержку TCP/IP, например, серверы RPC будут прослушивать эту последовательность протокола при вызове [**рпксерверусеаллпротсекс**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqs).</span><span class="sxs-lookup"><span data-stu-id="288b5-116">It is important to verify that the binding handles in the entry are correct; if an administrator adds TCP/IP support to a computer, for example, RPC servers will listen on that protocol sequence when they call [**RpcServerUseAllProtseqs**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqs).</span></span> <span data-ttu-id="288b5-117">Однако если сервер не обновляет запись службы имен, клиенты не будут уведомлены о поддержке протокола TCP.</span><span class="sxs-lookup"><span data-stu-id="288b5-117">However, if the server does not update the name service entry, clients will not be informed that TCP is supported.</span></span>

<span data-ttu-id="288b5-118">При импорте клиента в качестве имени записи должно быть указано **значение NULL** .</span><span class="sxs-lookup"><span data-stu-id="288b5-118">When the client imports, it should specify **NULL** as the entry name.</span></span> <span data-ttu-id="288b5-119">Указание **значения NULL** приводит к тому, что функции библиотеки Microsoft RPC выполняют поиск интерфейса во всех записях службы имен в домене или рабочей группе клиентского компьютера, тем самым находим сведения для каждого экземпляра.</span><span class="sxs-lookup"><span data-stu-id="288b5-119">Specifying **NULL** causes the Microsoft RPC library functions to search for the interface in all name service entries in the client computer's domain or workgroup, thus finding the information for every instance.</span></span>

<span data-ttu-id="288b5-120">Если для представления хорошо известных объектов, таких как принтеры, используются ИДЕНТИФИКАТОРы объектов, можно использовать разновидность этого метода.</span><span class="sxs-lookup"><span data-stu-id="288b5-120">If you use object UUIDs to represent well-known objects such as printers, you can use a variation of this method.</span></span> <span data-ttu-id="288b5-121">Вместо экспорта привязок в одну запись, разработайте приложение таким образом, чтобы каждый экземпляр создавал запись для каждого поддерживаемого объекта, например "/.:/ Printers/Laser1 "и"/.:/ Printers/Laser2».</span><span class="sxs-lookup"><span data-stu-id="288b5-121">Instead of exporting bindings to one entry, design your application so that each instance creates an entry for each supported object, such as "/.:/printers/Laser1" and "/.:/printers/Laser2."</span></span> <span data-ttu-id="288b5-122">Затем необходимо, чтобы сервер выполнил экспорт своих привязок для каждой записи сервера вместе с UUID объекта, относящимся к этой записи.</span><span class="sxs-lookup"><span data-stu-id="288b5-122">Then, have the server export its binding handles to each server entry, along with the object UUID relevant to that entry.</span></span>

<span data-ttu-id="288b5-123">В этом случае клиент может найти ресурс по имени, импортировав его из соответствующей записи сервера. Он не требует UUID объекта ресурса.</span><span class="sxs-lookup"><span data-stu-id="288b5-123">In this case, a client can look up a resource by name by importing from the relevant server entry; it does not require the object UUID of the resource.</span></span> <span data-ttu-id="288b5-124">Если он имеет UUID ресурса, но не имеет имени, он может импортировать из записи **null** .</span><span class="sxs-lookup"><span data-stu-id="288b5-124">If it has the resource UUID but not the name, it can import from the **null** entry.</span></span>

 

 




