---
title: Использование массивов, строк и указателей
description: Программа Doctor (см \\ . примеры \\ RPC \\ Doctor в пакете SDK для платформы) — хороший пример приложения, демонстрирующее компромиссы, связанные с атрибутами Array и String.
ms.assetid: 9aea94a1-ae1f-4bd6-9dd3-146edf0b5fec
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 542a174b9ffd742ecf88de7231449a780be8dca9
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104133998"
---
# <a name="using-arrays-strings-and-pointers"></a><span data-ttu-id="ef625-103">Использование массивов, строк и указателей</span><span class="sxs-lookup"><span data-stu-id="ef625-103">Using Arrays, Strings, and Pointers</span></span>

<span data-ttu-id="ef625-104">Программа Doctor (см \\ . примеры \\ RPC \\ Doctor в пакете SDK для платформы) — хороший пример приложения, демонстрирующее компромиссы, связанные с атрибутами Array и String.</span><span class="sxs-lookup"><span data-stu-id="ef625-104">The Doctor program (see \\samples\\rpc\\doctor in the Platform Software Development Kit (SDK)) is a good example of an application that demonstrates the design trade-offs involved with array and string attributes.</span></span> <span data-ttu-id="ef625-105">Программа Doctor — это небольшая примерная версия более известной программы, Елиза, разработанная с помощью Джозефного средства поиска искусственного интеллекта Веизенбаум в 1960-х.</span><span class="sxs-lookup"><span data-stu-id="ef625-105">The Doctor program is a small sample version of a better-known program, Eliza, developed by artificial intelligence researcher Joseph Weizenbaum at MIT in the 1960s.</span></span> <span data-ttu-id="ef625-106">Программа имитирует серапист, используя простое сопоставление шаблонов для реагирования на ввод естественного языка.</span><span class="sxs-lookup"><span data-stu-id="ef625-106">The program mimics a therapist by using simple pattern-matching to respond to natural language input.</span></span>

<span data-ttu-id="ef625-107">Программа Елиза записала следующий сеанс.</span><span class="sxs-lookup"><span data-stu-id="ef625-107">The Eliza program recorded the following session.</span></span>



| <span data-ttu-id="ef625-108">Пользователь</span><span class="sxs-lookup"><span data-stu-id="ef625-108">User</span></span>                                                | <span data-ttu-id="ef625-109">елиза</span><span class="sxs-lookup"><span data-stu-id="ef625-109">Eliza</span></span>                                                     |
|-----------------------------------------------------|-----------------------------------------------------------|
| <span data-ttu-id="ef625-110">Мужчин все одинаково.</span><span class="sxs-lookup"><span data-stu-id="ef625-110">Men are all alike.</span></span>                                  | <span data-ttu-id="ef625-111">Каким образом?</span><span class="sxs-lookup"><span data-stu-id="ef625-111">In what way?</span></span>                                              |
| <span data-ttu-id="ef625-112">Они всегда беспокоит с нами что-нибудь или другое.</span><span class="sxs-lookup"><span data-stu-id="ef625-112">They're always bugging us about something or other.</span></span> | <span data-ttu-id="ef625-113">Можно ли представить конкретный пример?</span><span class="sxs-lookup"><span data-stu-id="ef625-113">Can you think of a specific example?</span></span>                      |
| <span data-ttu-id="ef625-114">Ну, моя друга я сделал здесь.</span><span class="sxs-lookup"><span data-stu-id="ef625-114">Well, my boyfriend made me come here.</span></span>               | <span data-ttu-id="ef625-115">Ваш друга вы поступите здесь.</span><span class="sxs-lookup"><span data-stu-id="ef625-115">Your boyfriend made you come here.</span></span>                        |
| <span data-ttu-id="ef625-116">Он говорит, что в большинстве раз нажимается.</span><span class="sxs-lookup"><span data-stu-id="ef625-116">He says I'm depressed much of the time.</span></span>             | <span data-ttu-id="ef625-117">К сожалению, мы рады, что вы нажмете.</span><span class="sxs-lookup"><span data-stu-id="ef625-117">I am sorry to hear that you are depressed.</span></span>                |
| <span data-ttu-id="ef625-118">Да, я недовольны.</span><span class="sxs-lookup"><span data-stu-id="ef625-118">It's true, I am unhappy.</span></span>                            | <span data-ttu-id="ef625-119">Вы считаете, что вы полагаете здесь, чтобы не могли бы быть довольны?</span><span class="sxs-lookup"><span data-stu-id="ef625-119">Do you think coming here will help you not to be unhappy?</span></span> |
| <span data-ttu-id="ef625-120">Мне нужна помощь; Похоже, что это так.</span><span class="sxs-lookup"><span data-stu-id="ef625-120">I need some help; that much seems certain.</span></span>          | <span data-ttu-id="ef625-121">Что означает, если у вас есть какая нибудь помощь?</span><span class="sxs-lookup"><span data-stu-id="ef625-121">What would it mean to you if you got some help?</span></span>           |
| <span data-ttu-id="ef625-122">Возможно, я мог бы научиться освоиться с нашей матери.</span><span class="sxs-lookup"><span data-stu-id="ef625-122">Perhaps I could learn to get along with my mother.</span></span>  | <span data-ttu-id="ef625-123">Дополнительные сведения о вашей семье.</span><span class="sxs-lookup"><span data-stu-id="ef625-123">Tell me more about your family.</span></span>                           |
| <span data-ttu-id="ef625-124">Моя мама позаботится об этом.</span><span class="sxs-lookup"><span data-stu-id="ef625-124">My mother takes care of me.</span></span>                         | <span data-ttu-id="ef625-125">Кто еще позаботится о вашей семье?</span><span class="sxs-lookup"><span data-stu-id="ef625-125">Who else in your family takes care of you?</span></span>                |
| <span data-ttu-id="ef625-126">Мой отец.</span><span class="sxs-lookup"><span data-stu-id="ef625-126">My father.</span></span>                                          | <span data-ttu-id="ef625-127">Ваш отец.</span><span class="sxs-lookup"><span data-stu-id="ef625-127">Your father.</span></span>                                              |
| <span data-ttu-id="ef625-128">Вам нравится мой отец.</span><span class="sxs-lookup"><span data-stu-id="ef625-128">You are like my father in some ways.</span></span>                | <span data-ttu-id="ef625-129">Какое сходство вы видите?</span><span class="sxs-lookup"><span data-stu-id="ef625-129">What resemblance do you see?</span></span>                              |



 

<span data-ttu-id="ef625-130">Программу Doctor можно разделить на клиентские и серверные приложения.</span><span class="sxs-lookup"><span data-stu-id="ef625-130">The Doctor program can be split into client-side and server-side applications.</span></span> <span data-ttu-id="ef625-131">Клиентская сторона запрашивает у пользователя пациент и отображает ответ врача.</span><span class="sxs-lookup"><span data-stu-id="ef625-131">The client side prompts the patient for input and displays the doctor's response.</span></span> <span data-ttu-id="ef625-132">Серверная часть обрабатывает входные данные пациента и создает ответ врача.</span><span class="sxs-lookup"><span data-stu-id="ef625-132">The server side processes the patient input and generates the doctor's response.</span></span> <span data-ttu-id="ef625-133">Это классический пример приложения клиент-сервер. Клиент отвечает за взаимодействие с пользователем, когда сервер обрабатывает обширную вычислительную нагрузку.</span><span class="sxs-lookup"><span data-stu-id="ef625-133">This is a classic example of a client-server application: the client is responsible for user interaction while the server handles the extensive computational load.</span></span> <span data-ttu-id="ef625-134">Незначительная часть данных передается и возвращается функцией, но, поскольку данные могут потребовать значительных объемов обработки, сервер обрабатывает его.</span><span class="sxs-lookup"><span data-stu-id="ef625-134">Not much data is passed to and returned by the function but, because the data can require a significant amount of processing, the server processes it.</span></span>

<span data-ttu-id="ef625-135">Программа Doctor использует массив символов для ввода и возвращает другой массив символов в качестве выходных данных.</span><span class="sxs-lookup"><span data-stu-id="ef625-135">The Doctor program uses a character array for input and returns another character array as output.</span></span> <span data-ttu-id="ef625-136">В следующей таблице перечислены четыре способа передачи массивов символов между клиентом и сервером, а также атрибуты и функции, необходимые для реализации каждого подхода.</span><span class="sxs-lookup"><span data-stu-id="ef625-136">The table below lists four ways to pass character arrays between the client and server, and the attributes and functions needed to implement each approach.</span></span>



| <span data-ttu-id="ef625-137">Метод</span><span class="sxs-lookup"><span data-stu-id="ef625-137">Approach</span></span>                       | <span data-ttu-id="ef625-138">Атрибуты или функции</span><span class="sxs-lookup"><span data-stu-id="ef625-138">Attributes or functions</span></span>                                                                                                        |
|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ef625-139">Подсчет массивов символов</span><span class="sxs-lookup"><span data-stu-id="ef625-139">Counted character arrays</span></span>       | <span data-ttu-id="ef625-140">\[[размер \_ :](/windows/desktop/Midl/size-is) \] , \[ [длина \_ :](/windows/desktop/Midl/length-is) \] , \[ [ссылка](/windows/desktop/Midl/ref)\]</span><span class="sxs-lookup"><span data-stu-id="ef625-140">\[ [size\_is](/windows/desktop/Midl/size-is)\], \[ [length\_is](/windows/desktop/Midl/length-is)\], \[ [ref](/windows/desktop/Midl/ref)\]</span></span>                                         |
| <span data-ttu-id="ef625-141">Строки, управляемые заглушкой</span><span class="sxs-lookup"><span data-stu-id="ef625-141">Stub-managed strings</span></span>           | <span data-ttu-id="ef625-142">\[[String](/windows/desktop/Midl/string) \] , \[ [ref](/windows/desktop/Midl/ref) \] , [MIDL \_ пользователь \_ выделяет](/windows/desktop/Midl/midl-user-allocate-1) на сервере</span><span class="sxs-lookup"><span data-stu-id="ef625-142">\[ [string](/windows/desktop/Midl/string)\], \[ [ref](/windows/desktop/Midl/ref)\], [midl\_user\_allocate](/windows/desktop/Midl/midl-user-allocate-1) on server</span></span>                  |
| <span data-ttu-id="ef625-143">Строки, управляемые заглушкой</span><span class="sxs-lookup"><span data-stu-id="ef625-143">Stub-managed strings</span></span>           | <span data-ttu-id="ef625-144">\[[строка](/windows/desktop/Midl/string) \] , \[ [уникальный](/windows/desktop/Midl/unique) \] , [ \_ \_ выделяющий пользователя MIDL](/windows/desktop/Midl/midl-user-allocate-1) на клиенте и сервере</span><span class="sxs-lookup"><span data-stu-id="ef625-144">\[ [string](/windows/desktop/Midl/string)\], \[ [unique](/windows/desktop/Midl/unique)\], [midl\_user\_allocate](/windows/desktop/Midl/midl-user-allocate-1) on client and server</span></span> |
| <span data-ttu-id="ef625-145">Функция, возвращающая строку</span><span class="sxs-lookup"><span data-stu-id="ef625-145">Function that returns a string</span></span> | <span data-ttu-id="ef625-146">\[[уникальный](/windows/desktop/Midl/unique)\]</span><span class="sxs-lookup"><span data-stu-id="ef625-146">\[ [unique](/windows/desktop/Midl/unique)\]</span></span>                                                                                                     |



 

<span data-ttu-id="ef625-147">В пределах ограничений, связанных с этими сочетаниями атрибутов, существуют альтернативные способы отправки одного массива символов от клиента серверу и возврата другого массива символов от сервера к клиенту.</span><span class="sxs-lookup"><span data-stu-id="ef625-147">Within the constraints associated with these combinations of attributes, there are alternative ways of sending one character array from client to server and of returning another character array from server to client.</span></span>

<span data-ttu-id="ef625-148">В следующих разделах демонстрируются компромиссы между различными интерфейсами, которые могут управлять этими параметрами.</span><span class="sxs-lookup"><span data-stu-id="ef625-148">The following topics demonstrate the design trade-offs between the various interfaces that can manage these parameters.</span></span>

-   [<span data-ttu-id="ef625-149">Подсчет массивов символов</span><span class="sxs-lookup"><span data-stu-id="ef625-149">Counted Character Arrays</span></span>](counted-character-arrays.md)
-   [<span data-ttu-id="ef625-150">Строки</span><span class="sxs-lookup"><span data-stu-id="ef625-150">Strings</span></span>](strings.md)
-   [<span data-ttu-id="ef625-151">Несколько уровней указателей</span><span class="sxs-lookup"><span data-stu-id="ef625-151">Multiple Levels of Pointers</span></span>](multiple-levels-of-pointers.md)

 

 