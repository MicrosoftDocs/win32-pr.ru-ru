---
title: Использование массивов, строк и указателей
description: Программа Doctor (см \\ . примеры \\ RPC \\ Doctor в пакете SDK для платформы) — хороший пример приложения, демонстрирующее компромиссы, связанные с атрибутами Array и String.
ms.assetid: 9aea94a1-ae1f-4bd6-9dd3-146edf0b5fec
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 542a174b9ffd742ecf88de7231449a780be8dca9
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104133998"
---
# <a name="using-arrays-strings-and-pointers"></a>Использование массивов, строк и указателей

Программа Doctor (см \\ . примеры \\ RPC \\ Doctor в пакете SDK для платформы) — хороший пример приложения, демонстрирующее компромиссы, связанные с атрибутами Array и String. Программа Doctor — это небольшая примерная версия более известной программы, Елиза, разработанная с помощью Джозефного средства поиска искусственного интеллекта Веизенбаум в 1960-х. Программа имитирует серапист, используя простое сопоставление шаблонов для реагирования на ввод естественного языка.

Программа Елиза записала следующий сеанс.



| Пользователь                                                | елиза                                                     |
|-----------------------------------------------------|-----------------------------------------------------------|
| Мужчин все одинаково.                                  | Каким образом?                                              |
| Они всегда беспокоит с нами что-нибудь или другое. | Можно ли представить конкретный пример?                      |
| Ну, моя друга я сделал здесь.               | Ваш друга вы поступите здесь.                        |
| Он говорит, что в большинстве раз нажимается.             | К сожалению, мы рады, что вы нажмете.                |
| Да, я недовольны.                            | Вы считаете, что вы полагаете здесь, чтобы не могли бы быть довольны? |
| Мне нужна помощь; Похоже, что это так.          | Что означает, если у вас есть какая нибудь помощь?           |
| Возможно, я мог бы научиться освоиться с нашей матери.  | Дополнительные сведения о вашей семье.                           |
| Моя мама позаботится об этом.                         | Кто еще позаботится о вашей семье?                |
| Мой отец.                                          | Ваш отец.                                              |
| Вам нравится мой отец.                | Какое сходство вы видите?                              |



 

Программу Doctor можно разделить на клиентские и серверные приложения. Клиентская сторона запрашивает у пользователя пациент и отображает ответ врача. Серверная часть обрабатывает входные данные пациента и создает ответ врача. Это классический пример приложения клиент-сервер. Клиент отвечает за взаимодействие с пользователем, когда сервер обрабатывает обширную вычислительную нагрузку. Незначительная часть данных передается и возвращается функцией, но, поскольку данные могут потребовать значительных объемов обработки, сервер обрабатывает его.

Программа Doctor использует массив символов для ввода и возвращает другой массив символов в качестве выходных данных. В следующей таблице перечислены четыре способа передачи массивов символов между клиентом и сервером, а также атрибуты и функции, необходимые для реализации каждого подхода.



| Метод                       | Атрибуты или функции                                                                                                        |
|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------|
| Подсчет массивов символов       | \[[размер \_ :](/windows/desktop/Midl/size-is) \] , \[ [длина \_ :](/windows/desktop/Midl/length-is) \] , \[ [ссылка](/windows/desktop/Midl/ref)\]                                         |
| Строки, управляемые заглушкой           | \[[String](/windows/desktop/Midl/string) \] , \[ [ref](/windows/desktop/Midl/ref) \] , [MIDL \_ пользователь \_ выделяет](/windows/desktop/Midl/midl-user-allocate-1) на сервере                  |
| Строки, управляемые заглушкой           | \[[строка](/windows/desktop/Midl/string) \] , \[ [уникальный](/windows/desktop/Midl/unique) \] , [ \_ \_ выделяющий пользователя MIDL](/windows/desktop/Midl/midl-user-allocate-1) на клиенте и сервере |
| Функция, возвращающая строку | \[[уникальный](/windows/desktop/Midl/unique)\]                                                                                                     |



 

В пределах ограничений, связанных с этими сочетаниями атрибутов, существуют альтернативные способы отправки одного массива символов от клиента серверу и возврата другого массива символов от сервера к клиенту.

В следующих разделах демонстрируются компромиссы между различными интерфейсами, которые могут управлять этими параметрами.

-   [Подсчет массивов символов](counted-character-arrays.md)
-   [Строки](strings.md)
-   [Несколько уровней указателей](multiple-levels-of-pointers.md)

 

 