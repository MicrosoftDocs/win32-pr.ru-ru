---
title: Настройка SAP и RPC
description: Сетевые серверы Novell NetWare используют протокол SAP для вещания сведений о доступных службах в сети на другие сетевые устройства.
ms.assetid: 6d6ef481-fc09-4795-8954-33329912ff4f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 385d60168a52cbe5d31368959ec4f21d52f9ad80
ms.sourcegitcommit: 1e8e6e6f27c909900cfa8be58b042456331a82ad
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/15/2019
ms.locfileid: "104411478"
---
# <a name="configuring-sap-and-rpc"></a><span data-ttu-id="942b1-103">Настройка SAP и RPC</span><span class="sxs-lookup"><span data-stu-id="942b1-103">Configuring SAP and RPC</span></span>

<span data-ttu-id="942b1-104">Сетевые серверы Novell NetWare используют протокол SAP для вещания сведений о доступных службах в сети на другие сетевые устройства.</span><span class="sxs-lookup"><span data-stu-id="942b1-104">Novell NetWare network servers use the Service Advertising Protocol (SAP) to broadcast information about available services on the network to other networked devices.</span></span> <span data-ttu-id="942b1-105">Сервер может отправить широковещательное сообщение SAP каждые 60 секунд, чтобы сообщить другим сетевым устройствам о предоставляемых службах.</span><span class="sxs-lookup"><span data-stu-id="942b1-105">A server may send out an SAP broadcast every 60 seconds to inform other network devices about the services it offers.</span></span> <span data-ttu-id="942b1-106">Рабочие станции используют SAPs для поиска необходимых служб в сети.</span><span class="sxs-lookup"><span data-stu-id="942b1-106">Workstations use SAPs to find services they need on the network.</span></span>

<span data-ttu-id="942b1-107">Windows включает службу агента SAP, которая позволяет серверам под управлением Windows взаимодействовать с серверами NetWare.</span><span class="sxs-lookup"><span data-stu-id="942b1-107">Windows includes a SAP Agent service to enable Windows-based servers to interact with NetWare servers.</span></span> <span data-ttu-id="942b1-108">Служба агента SAP будет прослушивать запросы SAP клиентов сети на наличие служб на основе IPX, установленных и работающих на сервере.</span><span class="sxs-lookup"><span data-stu-id="942b1-108">The SAP Agent service will listen for network clients' SAP requests for IPX-based services that are installed and running on the server.</span></span>

<span data-ttu-id="942b1-109">Программное обеспечение, разработанное для объявления в качестве службы по сети с помощью широковещательной рассылки SAP, будет выдавать объявления SAP каждые 60 секунд без установки агента SAP.</span><span class="sxs-lookup"><span data-stu-id="942b1-109">Software that is designed to be advertised as a service over the network by means of a SAP broadcast will issue the SAP announcements every 60 seconds, without having the SAP Agent installed.</span></span> <span data-ttu-id="942b1-110">Однако для того, чтобы сетевые клиенты могли быстро найти сетевую службу IPX, сервер, обслуживающий базу данных службы, должен быть доступен в сети для реагирования на запрос обнаружения службы.</span><span class="sxs-lookup"><span data-stu-id="942b1-110">However, in order for network clients to quickly locate an IPX network service, a server that maintains a service database must be available on the network, to respond to the service location request.</span></span> <span data-ttu-id="942b1-111">Эта база данных службы обычно обслуживается Novell NetWare или совместимым с NetWare сервером.</span><span class="sxs-lookup"><span data-stu-id="942b1-111">This service database is usually maintained by a Novell NetWare or by a NetWare compatible server.</span></span> <span data-ttu-id="942b1-112">Службы файлов и печати (Майкрософт) для NetWare также будут поддерживать базу данных сетевой службы IPX.</span><span class="sxs-lookup"><span data-stu-id="942b1-112">Microsoft File and Print Services for NetWare will also maintain an IPX network service database.</span></span>

<span data-ttu-id="942b1-113">На компьютере под управлением Windows Server, если установлена служба шлюза для NetWare (GSNW), тип SAP 640 будет транслировать каждые 60 секунд со стороны службы удаленного вызова процедур (RPC).</span><span class="sxs-lookup"><span data-stu-id="942b1-113">On a computer running Windows Server, if Gateway Services for NetWare (GSNW) is installed, a SAP Type 640 will broadcast every 60 seconds by the remote procedure call (RPC) service.</span></span> <span data-ttu-id="942b1-114">Вещание SAP будет продолжено даже в том случае, если пользователь отключит службу ШЛЮЗа и агент SAP.</span><span class="sxs-lookup"><span data-stu-id="942b1-114">This SAP broadcast will continue even if the user disables the GSNW and the SAP Agent Service.</span></span>

<span data-ttu-id="942b1-115">Служба RPC выполнит широковещательную рассылку SAP, если установлены клиентские службы для NetWare (CSNW) и служба агента SAP.</span><span class="sxs-lookup"><span data-stu-id="942b1-115">The RPC service will do the SAP broadcast if the Client Services for NetWare (CSNW) and the SAP Agent service are installed.</span></span> <span data-ttu-id="942b1-116">Вещание SAP будет продолжено, даже если пользователь отключается от агента SAP.</span><span class="sxs-lookup"><span data-stu-id="942b1-116">This SAP broadcast will continue even if the user disables the SAP agent.</span></span>

<span data-ttu-id="942b1-117">По умолчанию служба RPC будет проверять наличие служб шлюза для NetWare и службы агента SAP на компьютере под управлением Windows Server.</span><span class="sxs-lookup"><span data-stu-id="942b1-117">By default, the RPC service will check for the presence of Gateway Services for NetWare and the SAP Agent service on the computer running Windows Server.</span></span> <span data-ttu-id="942b1-118">Установка служб файлов и печати для NetWare устанавливает агент SAP.</span><span class="sxs-lookup"><span data-stu-id="942b1-118">Installing File and Print services for NetWare installs a SAP Agent.</span></span>

<span data-ttu-id="942b1-119">На компьютере, на котором установлена клиентская версия Windows с CSNW, служба RPC проверяет наличие службы агента SAP.</span><span class="sxs-lookup"><span data-stu-id="942b1-119">On the computer running a client version of Windows with CSNW, the RPC service checks for the SAP Agent service.</span></span> <span data-ttu-id="942b1-120">Если службы существуют, RPC запустит собственный поток, который будет выполнять широковещательный пакет SAP 640 каждую минуту.</span><span class="sxs-lookup"><span data-stu-id="942b1-120">If the services are present, RPC will start its own thread that will do the SAP broadcast Type 640 every minute.</span></span>

> [!NOTE]
> <span data-ttu-id="942b1-121">Если вы не хотите, чтобы широковещательные передачи SAP направляются в сеть каждые 60 секунд, можно отключить широковещательные рассылки SAP с помощью редактора реестра.</span><span class="sxs-lookup"><span data-stu-id="942b1-121">If you don't want SAP broadcasts on the network every 60 seconds, you can disable SAP broadcasts using the Registry Editor.</span></span> <span data-ttu-id="942b1-122">Предупреждение о неправильном использовании редактора реестра может привести к серьезным проблемам, которые могут потребовать переустановки операционной системы.</span><span class="sxs-lookup"><span data-stu-id="942b1-122">Be warned that using Registry Editor incorrectly can cause serious problems that may require you to reinstall your operating system.</span></span> <span data-ttu-id="942b1-123">Корпорация Майкрософт не гарантирует возможность устранения проблем, возникших в результате неправильного использования редактора реестра.</span><span class="sxs-lookup"><span data-stu-id="942b1-123">Microsoft cannot guarantee that problems resulting from the incorrect use of Registry Editor can be solved.</span></span> <span data-ttu-id="942b1-124">Используйте редактор реестра на свой страх и риск.</span><span class="sxs-lookup"><span data-stu-id="942b1-124">Use Registry Editor at your own risk.</span></span> <span data-ttu-id="942b1-125">Перед редактированием реестра необходимо создать его резервную копию.</span><span class="sxs-lookup"><span data-stu-id="942b1-125">You should back up the registry before you edit it.</span></span>

 

<span data-ttu-id="942b1-126">**Настройка для SAP**</span><span class="sxs-lookup"><span data-stu-id="942b1-126">**To configure for SAP**</span></span>

1.  <span data-ttu-id="942b1-127">Запустите редактор реестра (Regedt32.exe) и перейдите к следующему разделу реестра:</span><span class="sxs-lookup"><span data-stu-id="942b1-127">Run Registry Editor (Regedt32.exe) and go to the following key in the registry:</span></span>

    <span data-ttu-id="942b1-128">**HKEY \_ \_ \\ программное обеспечение локального компьютера \\ Microsoft \\ RPC**</span><span class="sxs-lookup"><span data-stu-id="942b1-128">**HKEY\_LOCAL\_MACHINE\\Software\\Microsoft\\RPC**</span></span>

2.  <span data-ttu-id="942b1-129">В меню **Правка** выберите команду **Добавить значение** и используйте следующую запись:</span><span class="sxs-lookup"><span data-stu-id="942b1-129">On the **Edit** menu, click **Add Value**, and use the following entry:</span></span>
    1.  <span data-ttu-id="942b1-130">Имя значения: Адвертисерпксервице</span><span class="sxs-lookup"><span data-stu-id="942b1-130">Value Name: AdvertiseRpcService</span></span>
    2.  <span data-ttu-id="942b1-131">Тип данных: REG \_ SZ</span><span class="sxs-lookup"><span data-stu-id="942b1-131">Data Type: REG\_SZ</span></span>
    3.  <span data-ttu-id="942b1-132">Строка: нет</span><span class="sxs-lookup"><span data-stu-id="942b1-132">String: No</span></span>
3.  <span data-ttu-id="942b1-133">Использование команды No для строки отключает широковещательную трансляцию RPC SAP.</span><span class="sxs-lookup"><span data-stu-id="942b1-133">Using No for the string turns RPC SAP broadcasting off.</span></span> <span data-ttu-id="942b1-134">При использовании команды Да для строки включается RPC SAP широковещания on.</span><span class="sxs-lookup"><span data-stu-id="942b1-134">Using Yes for the string turns RPC SAP broadcasting on.</span></span>
4.  <span data-ttu-id="942b1-135">Перезагрузите компьютер, чтобы изменения в реестре вступили в силу.</span><span class="sxs-lookup"><span data-stu-id="942b1-135">Restart the computer for the registry change to take effect.</span></span>
    > [!NOTE]
    > <span data-ttu-id="942b1-136">Если широковещательные пакеты SAP продолжают работу после выполнения этих действий, может потребоваться выполнить действия по устранению неполадок.</span><span class="sxs-lookup"><span data-stu-id="942b1-136">If the SAP broadcasts continue after following these steps, you may want to try a troubleshooting step.</span></span> <span data-ttu-id="942b1-137">Удалите строку **нкакн \_ SPX** в следующем разделе реестра:</span><span class="sxs-lookup"><span data-stu-id="942b1-137">Delete the **Ncacn\_spx** string value in the following registry key:</span></span>
    >
    > <span data-ttu-id="942b1-138">**HKEY \_ локальный \_ компьютер \\ программное обеспечение \\ Microsoft \\ RPC \\ серверпротоколс\\**</span><span class="sxs-lookup"><span data-stu-id="942b1-138">**HKEY\_LOCAL\_MACHINE\\Software\\Microsoft\\Rpc\\ServerProtocols\\**</span></span>

     

> [!NOTE]  
> <span data-ttu-id="942b1-139">Это следует использовать только в качестве действия по устранению неполадок.</span><span class="sxs-lookup"><span data-stu-id="942b1-139">This should be used only as a troubleshooting step.</span></span> <span data-ttu-id="942b1-140">Удаление этого строкового значения полностью отключает широковещательные передачи SAP, которые могут потребоваться для правильной работы некоторых программ.</span><span class="sxs-lookup"><span data-stu-id="942b1-140">Deleting this string value completely disables SAP broadcasts which some programs may need in order to function properly.</span></span>