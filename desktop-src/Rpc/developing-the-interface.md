---
title: Разработка интерфейса
description: Интерфейс RPC описывает удаленные функции, реализуемые серверной программой.
ms.assetid: f0dfe9d1-fe84-461c-8684-147fbd0bdefe
keywords:
- Удаленный вызов процедур RPC, задачи, разработка интерфейса
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 68b6f720bcd492e784ad07fe20e221ac54951680
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104134334"
---
# <a name="developing-the-interface"></a><span data-ttu-id="69110-104">Разработка интерфейса</span><span class="sxs-lookup"><span data-stu-id="69110-104">Developing the Interface</span></span>

<span data-ttu-id="69110-105">Интерфейс RPC описывает удаленные функции, реализуемые серверной программой.</span><span class="sxs-lookup"><span data-stu-id="69110-105">An RPC interface describes the remote functions that the server program implements.</span></span> <span data-ttu-id="69110-106">Интерфейс обеспечивает обмен данными между клиентом и сервером, используя те же правила, когда клиент вызывает удаленную процедуру, предлагаемую сервером.</span><span class="sxs-lookup"><span data-stu-id="69110-106">The interface ensures that the client and server communicate using the same rules when the client invokes a remote procedure that the server offers.</span></span> <span data-ttu-id="69110-107">Интерфейс состоит из имени интерфейса, некоторых атрибутов, определений необязательного типа или константы, а также набора объявлений процедур.</span><span class="sxs-lookup"><span data-stu-id="69110-107">An interface consists of an interface name, some attributes, optional type or constant definitions, and a set of procedure declarations.</span></span> <span data-ttu-id="69110-108">Каждое объявление процедуры должно содержать имя процедуры, возвращаемый тип и список параметров.</span><span class="sxs-lookup"><span data-stu-id="69110-108">Each procedure declaration must contain a procedure name, return type, and parameter list.</span></span>

<span data-ttu-id="69110-109">Интерфейсы определяются в язык MIDL (MIDL).</span><span class="sxs-lookup"><span data-stu-id="69110-109">Interfaces are defined in the Microsoft Interface Definition Language (MIDL).</span></span> <span data-ttu-id="69110-110">Если вы знакомы с C или C++, то определения интерфейсов MIDL покажутся довольно простыми.</span><span class="sxs-lookup"><span data-stu-id="69110-110">If you are familiar with C or C++, MIDL interface definitions will seem fairly straightforward.</span></span> <span data-ttu-id="69110-111">MIDL напоминает C и C++ различными способами.</span><span class="sxs-lookup"><span data-stu-id="69110-111">MIDL resembles C and C++ in many ways.</span></span>

<span data-ttu-id="69110-112">При разработке приложения RPC текстовый редактор используется для определения интерфейса и сохранения его в текстовом файле с расширением IDL.</span><span class="sxs-lookup"><span data-stu-id="69110-112">When developing an RPC application, a text editor is used to define the interface and store it in a text file with an .idl extension.</span></span> <span data-ttu-id="69110-113">Дополнительные сведения см. [в файлах IDL и ACF](the-idl-and-acf-files.md).</span><span class="sxs-lookup"><span data-stu-id="69110-113">For more information, see [The IDL and ACF Files](the-idl-and-acf-files.md).</span></span> <span data-ttu-id="69110-114">Компилятор MIDL создает файл заголовка, который программа включает в исходные файлы клиента и сервера.</span><span class="sxs-lookup"><span data-stu-id="69110-114">The MIDL compiler generates a header file that your program includes in the client and server source files.</span></span> <span data-ttu-id="69110-115">Компилятор MIDL также создает два исходных файла на языке C.</span><span class="sxs-lookup"><span data-stu-id="69110-115">The MIDL compiler also generates two C source files.</span></span> <span data-ttu-id="69110-116">Один из них компилируется и связывается с клиентской программой, а другой — с серверной программой.</span><span class="sxs-lookup"><span data-stu-id="69110-116">You compile and link one of these to your client program, and the other to your server program.</span></span> <span data-ttu-id="69110-117">Эти два исходных файла на языке C являются заглушками клиента и сервера.</span><span class="sxs-lookup"><span data-stu-id="69110-117">These two C source files are the client and server stubs.</span></span> <span data-ttu-id="69110-118">Общие сведения о заглушках клиента и сервера см. в разделе [как работает RPC](how-rpc-works.md).</span><span class="sxs-lookup"><span data-stu-id="69110-118">For an overview of the client and server stubs, see [How RPC Works](how-rpc-works.md).</span></span> <span data-ttu-id="69110-119">Общие сведения о компиляторе MIDL см. в разделе [Компиляция файла MIDL](using-midl.md).</span><span class="sxs-lookup"><span data-stu-id="69110-119">For an overview on the MIDL compiler, see [Compiling a MIDL File](using-midl.md).</span></span>

<span data-ttu-id="69110-120">По умолчанию заглушка клиента и сервера имеет одно и то же имя, что может вызвать проблемы, если клиент связывается с заглушкой сервера или наоборот.</span><span class="sxs-lookup"><span data-stu-id="69110-120">By default, the client and server stub have the same name, which can cause problems if the client links with the server stub, or vice-versa.</span></span> <span data-ttu-id="69110-121">Использование параметра MIDL [**/префикс**](/windows/desktop/Midl/-prefix) предотвращает возникновение этой распространенной ошибки.</span><span class="sxs-lookup"><span data-stu-id="69110-121">Using the MIDL [**/prefix**](/windows/desktop/Midl/-prefix) option prevents this common error from occurring.</span></span>

<span data-ttu-id="69110-122">На следующем рисунке показан процесс создания интерфейса.</span><span class="sxs-lookup"><span data-stu-id="69110-122">The following illustration shows the process of creating an interface.</span></span>

![создание заглушек клиента и сервера с помощью параметра/префикс предотвращает случайные проблемы компиляции](images/idldev.png)

<span data-ttu-id="69110-124">Также может потребоваться указать файл конфигурации приложения (ACF) для входа в компилятор MIDL.</span><span class="sxs-lookup"><span data-stu-id="69110-124">It is possible that you will also need to specify an application configuration file (ACF) for input to the MIDL compiler as well.</span></span> <span data-ttu-id="69110-125">Дополнительные сведения о файлах конфигурации приложений см. [в файлах IDL и ACF](the-idl-and-acf-files.md).</span><span class="sxs-lookup"><span data-stu-id="69110-125">For more information on application configuration files, see [The IDL and ACF Files](the-idl-and-acf-files.md).</span></span>

<span data-ttu-id="69110-126">В дополнение к компилятору MIDL, как правило, необходимо использовать служебную программу uuidgen для создания универсального уникального идентификатора (UUID, взаимозаменяемого с термином GUID).</span><span class="sxs-lookup"><span data-stu-id="69110-126">In addition to the MIDL compiler, you will typically need to use the Uuidgen utility to generate a Universal Unique Identifier (UUID, interchangeable with the term GUID).</span></span> <span data-ttu-id="69110-127">В этом разделе представлены сведения об этих средствах, разделенные на следующие разделы:</span><span class="sxs-lookup"><span data-stu-id="69110-127">This section presents information on both of these tools, divided into the following topics:</span></span>

-   [<span data-ttu-id="69110-128">Создание идентификаторов UUID интерфейса</span><span class="sxs-lookup"><span data-stu-id="69110-128">Generating Interface UUIDs</span></span>](generating-interface-uuids.md)
-   [<span data-ttu-id="69110-129">Использование MIDL</span><span class="sxs-lookup"><span data-stu-id="69110-129">Using MIDL</span></span>](using-midl.md)

 

 