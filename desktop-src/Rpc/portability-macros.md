---
title: Переносимые макросы (RPC. h)
description: Средства удаленного вызова процедур обеспечивают модель, вызов и независимость от соглашений об именовании путем связывания типов данных и типов, возвращаемых функцией, в созданных файлах-заглушках и файлах заголовков с определениями, характерными для каждой платформы.
ms.assetid: 94de1138-5a84-41d8-bf88-97f0ac630f5f
keywords:
- УДАЛЕНная совместимость макросов
topic_type:
- apiref
api_name:
- Portability Macros
api_location:
- Rpc.h
api_type:
- HeaderDef
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 20aa6ebda92d7c3998082fdbb5e5f07aa1be22f37a6ec65a8e81327b8614565a
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120019233"
---
# <a name="portability-macros"></a>Переносимые макросы

Средства удаленного вызова процедур обеспечивают модель, вызов и независимость от соглашений об именовании путем связывания типов данных и типов, возвращаемых функцией, в созданных файлах-заглушках и файлах заголовков с определениями, характерными для каждой платформы. Эти определения макросов гарантируют, что все типы данных и функции, требующие **\_ \_ разработки, задаются** в качестве объектов.

На следующем рисунке показаны определения макросов, применяемые компилятором MIDL для вызовов функций между компонентами RPC:

![Схема, на которой показаны определения макросов MIDL, применимые к вызовам функций.](images/prog-a29.png)

Макросы RPC определяются следующим образом.



| Определение    | Описание                                                                                                                                         |
|---------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| \_\_\_API RPC  | Применяется к вызовам, сделанным заглушкой для пользовательского приложения. Обе функции находятся в одной и той же исполняемой программе.                                       |
| \_\_удаленный \_ RPC  | Применяется к стандартному определению макроса для указателей. Это определение макроса должно отображаться как часть сигнатуры всех предоставляемых пользователем функций. |
| \_\_\_заглушка RPC | Применяется к вызовам, сделанным из библиотеки времени выполнения в заглушку. Эти вызовы можно считать частными.                                                 |
| \_\_\_пользователь RPC | Применяется к вызовам, выполненным библиотекой времени выполнения для пользовательского приложения. Они пересекают границу между библиотекой DLL и приложением.                   |
| \_запись RPC    | Применяется к вызовам, выполненным приложением или заглушкой к библиотеке времени выполнения. Это определение макроса применяется ко всем функциям времени выполнения RPC.           |



 

Для правильной связи с библиотеками времени выполнения Microsoft RPC, заглушками и подпрограммами поддержки, некоторые функции, предоставляемые пользователем, также должны включать эти макросы в определение функции. Используйте **\_ \_ \_ API** макроса RPC при определении функций, связанных с управлением памятью, пользовательскими дескрипторами привязки и атрибутом **передачи \_ as** , а также с помощью макроса **\_ \_ RPC- \_ пользователя** при определении подпрограммы запуска контекста, связанной с дескриптором контекста. Укажите следующие функции:

<dl> <dt>

<span id="__RPC_USER_midl_user_allocate_..._"></span><span id="__rpc_user_midl_user_allocate_..._"></span><span id="__RPC_USER_MIDL_USER_ALLOCATE_..._"></span>\_\_Пользователь \_ *MIDL \_* \_ (...) пользователя RPC User (...)
</dt> <dd></dd> <dt>

<span id="__RPC_USER_midl_user_free_..._"></span><span id="__rpc_user_midl_user_free_..._"></span><span id="__RPC_USER_MIDL_USER_FREE_..._"></span>\_\_\_Бесплатный пользователь *MIDL \_* RPC \_ (...)
</dt> <dd></dd> <dt>

<span id="__RPC_USER__handletype_bind_..._"></span><span id="__rpc_user__handletype_bind_..._"></span><span id="__RPC_USER__HANDLETYPE_BIND_..._"></span>\_\_RPC \_ user *параметром handletype* \_ BIND (...)
</dt> <dd></dd> <dt>

<span id="__RPC_USER_handletype_unbind_..._"></span><span id="__rpc_user_handletype_unbind_..._"></span><span id="__RPC_USER_HANDLETYPE_UNBIND_..._"></span>\_\_RPC \_ -пользователь *параметром handletype* \_ отменить привязку (...)
</dt> <dd></dd> <dt>

<span id="__RPC_USER_type_to_local"></span><span id="__rpc_user_type_to_local"></span><span id="__RPC_USER_TYPE_TO_LOCAL"></span>\_\_\_ *Тип* пользователя RPC — \_ \_ локальный
</dt> <dd></dd> <dt>

<span id="__RPC_USER_type_from_local"></span><span id="__rpc_user_type_from_local"></span><span id="__RPC_USER_TYPE_FROM_LOCAL"></span>\_\_\_ *Тип* пользователя RPC \_ из \_ локальной службы
</dt> <dd></dd> <dt>

<span id="__RPC_USER_type_to_xmit_..._"></span><span id="__rpc_user_type_to_xmit_..._"></span><span id="__RPC_USER_TYPE_TO_XMIT_..._"></span>\_\_\_Тип пользователя RPC \_ для \_ xmit (...)
</dt> <dd></dd> <dt>

<span id="__RPC_USER_type_from_xmit_..._"></span><span id="__rpc_user_type_from_xmit_..._"></span><span id="__RPC_USER_TYPE_FROM_XMIT_..._"></span>\_\_\_ *Тип* пользователя RPC \_ из \_ xmit (...)
</dt> <dd></dd> <dt>

<span id="__RPC_USER_type_free_local"></span><span id="__rpc_user_type_free_local"></span><span id="__RPC_USER_TYPE_FREE_LOCAL"></span>\_\_\_Бесплатный локальный *тип* пользователя RPC \_ \_
</dt> <dd></dd> <dt>

<span id="__RPC_USER_type_free_inst_..._"></span><span id="__rpc_user_type_free_inst_..._"></span><span id="__RPC_USER_TYPE_FREE_INST_..._"></span>\_\_\_ *Тип* пользователя RPC \_ Free \_ Inst (...)
</dt> <dd></dd> <dt>

<span id="__RPC_USER_type_free_xmit_..._"></span><span id="__rpc_user_type_free_xmit_..._"></span><span id="__RPC_USER_TYPE_FREE_XMIT_..._"></span>\_\_\_ *Тип* пользователя RPC \_ Free \_ xmit (...)
</dt> <dd></dd> <dt>

<span id="__RPC_USER_context_rundown_..._"></span><span id="__rpc_user_context_rundown_..._"></span><span id="__RPC_USER_CONTEXT_RUNDOWN_..._"></span>\_\_\_Очистка контекста пользователя RPC \_ (...)
</dt> <dd></dd> </dl>

> [!Note]  
> Все параметры указателя в этих функциях должны быть указаны с помощью макроса **\_ \_ RPC \_**.

 

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|----------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/>                       |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                             |
| Заголовок<br/>                   | <dl> <dt>RPC. h</dt> </dl> |



 

 





