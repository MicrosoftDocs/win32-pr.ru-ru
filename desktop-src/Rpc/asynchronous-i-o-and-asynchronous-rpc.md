---
title: Асинхронный ввод-вывод и асинхронный RPC
description: Асинхронный ввод-вывод является эффективным средством для одного потока, выполняющего одновременное управление несколькими запросами ввода-вывода.
ms.assetid: a9105518-4130-4119-b8d1-e73064b077e9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e932e85283eb67ff6675a646e791bbce5fe15d65
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104413540"
---
# <a name="asynchronous-io-and-asynchronous-rpc"></a><span data-ttu-id="52faa-103">Асинхронный ввод-вывод и асинхронный RPC</span><span class="sxs-lookup"><span data-stu-id="52faa-103">Asynchronous I/O and Asynchronous RPC</span></span>

<span data-ttu-id="52faa-104">Асинхронный ввод-вывод является эффективным средством для одного потока, выполняющего одновременное управление несколькими запросами ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="52faa-104">Asynchronous I/O is an efficient means for a single thread to manage multiple I/O requests simultaneously.</span></span> <span data-ttu-id="52faa-105">Асинхронный RPC на сервере выполняет аналогичные задачи для запросов RPC.</span><span class="sxs-lookup"><span data-stu-id="52faa-105">Asynchronous RPC on the server accomplishes a similar purpose for RPC requests.</span></span> <span data-ttu-id="52faa-106">В версиях Windows, предшествовавших Windows Vista, не рекомендуется отправлять асинхронные запросы ввода-вывода из процедур сервера с помощью асинхронного вызова RPC.</span><span class="sxs-lookup"><span data-stu-id="52faa-106">In versions of Windows prior to Windows Vista, posting asynchronous I/O requests from server procedures using asynchronous RPC is discouraged.</span></span> <span data-ttu-id="52faa-107">Однако в Windows Vista и более поздних версиях Windows запросы асинхронного ввода-вывода, связанные с портом завершения ввода-вывода, поддерживаются асинхронным RPC.</span><span class="sxs-lookup"><span data-stu-id="52faa-107">However, in Windows Vista and later versions of Windows, asynchronous I/O requests that are associated with an I/O completion port are supported by asynchronous RPC.</span></span>

<span data-ttu-id="52faa-108">До выхода Windows Vista асинхронный удаленный вызов процедур может завершиться до завершения асинхронного запроса ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="52faa-108">Prior to Windows Vista, an asynchronous remote procedure call may complete before the asynchronous I/O request completes.</span></span> <span data-ttu-id="52faa-109">По завершении асинхронного вызова его поток может завершиться, если среда выполнения RPC решает, что в нем достаточно потоков для обслуживания ожидаемой рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="52faa-109">When the asynchronous call completes, its thread may terminate if the RPC runtime decides it has enough threads available to service the expected workload.</span></span> <span data-ttu-id="52faa-110">Система привязывает все запросы ввода-вывода к потоку, который их инициирует.</span><span class="sxs-lookup"><span data-stu-id="52faa-110">The system binds all I/O requests to the thread that initiates them.</span></span> <span data-ttu-id="52faa-111">Если поток завершается, все запросы ввода-вывода, ожидающие в этом потоке, прерываются.</span><span class="sxs-lookup"><span data-stu-id="52faa-111">If the thread terminates, any I/O requests pending on that thread are aborted.</span></span> <span data-ttu-id="52faa-112">Ожидающие выполнения запросы на ввод-вывод не могут быть перемещены в другой поток.</span><span class="sxs-lookup"><span data-stu-id="52faa-112">Pending I/O requests cannot be moved to another thread.</span></span>

<span data-ttu-id="52faa-113">Таким образом, разработчики приложений, предназначенные для версий Windows до Windows Vista, могут использовать синхронные операции ввода-вывода в серверных процедурах или пересылать все запросы, затрагивающие асинхронные операции ввода-вывода, в процедуры, выполняющиеся в пуле потоков, управляемом приложением.</span><span class="sxs-lookup"><span data-stu-id="52faa-113">Therefore, application designers targeting versions of Windows prior to Windows Vista can either use synchronous I/O in server procedures, or they can forward all requests that involve asynchronous I/O to procedures executing on a thread pool that the application manages.</span></span> <span data-ttu-id="52faa-114">Windows API предоставляет функции для управления пулом потоков.</span><span class="sxs-lookup"><span data-stu-id="52faa-114">The Windows API provides functions for thread-pool management.</span></span> <span data-ttu-id="52faa-115">См. раздел [функции процессов и потоков](/windows/desktop/ProcThread/process-and-thread-functions).</span><span class="sxs-lookup"><span data-stu-id="52faa-115">See [Process and Thread Functions](/windows/desktop/ProcThread/process-and-thread-functions).</span></span>

 

 