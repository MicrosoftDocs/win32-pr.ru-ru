---
title: Строгое и строго типизированные дескрипторы контекста
description: '\_ \_ Для всех дескрипторов контекста следует использовать атрибут дескриптора с четким контекстом.'
ms.assetid: 2483aa76-0814-4f63-9c38-0aa050d73772
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a45b4e7914034e315f2275e1d928293332012fc4
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104488009"
---
# <a name="strict-and-type-strict-context-handles"></a><span data-ttu-id="49a0c-103">Строгое и строго типизированные дескрипторы контекста</span><span class="sxs-lookup"><span data-stu-id="49a0c-103">Strict and Type Strict Context Handles</span></span>

<span data-ttu-id="49a0c-104">Для всех дескрипторов контекста следует использовать атрибут [**\_ \_ дескриптора с четким контекстом**](/windows/desktop/Midl/strict-context-handle) .</span><span class="sxs-lookup"><span data-stu-id="49a0c-104">Use the [**strict\_context\_handle**](/windows/desktop/Midl/strict-context-handle) attribute for all context handles.</span></span> <span data-ttu-id="49a0c-105">По умолчанию маркер контекста не связан с интерфейсом, что означает, что контекстный обработчик может быть создан на одном интерфейсе, а затем передан другому.</span><span class="sxs-lookup"><span data-stu-id="49a0c-105">By default, a context handle is not associated with an interface, which means a context handle can be created on one interface, then passed to another.</span></span> <span data-ttu-id="49a0c-106">Это простая атака, и многие серверы RPC не могут их предотвратить.</span><span class="sxs-lookup"><span data-stu-id="49a0c-106">This is an easy attack, and many RPC servers fail to prevent it.</span></span>

<span data-ttu-id="49a0c-107">Если два интерфейса соблюдаются в одном процессе, злоумышленник может открыть обработчик контекста на одном интерфейсе и передать его другому, который может переключиться на непредвиденные данные.</span><span class="sxs-lookup"><span data-stu-id="49a0c-107">If two interfaces coexist in the same process, an attacker can open a context handle on one interface, and pass it to another, which may trip over the unexpected data.</span></span> <span data-ttu-id="49a0c-108">Многие разработчики считают, что их программное обеспечение является единственным интерфейсом в процессе, но часто это не так, поскольку как система, так и многие сторонние компоненты используют RPC внутренне, и эти интерфейсы могут создавать дескрипторы контекста.</span><span class="sxs-lookup"><span data-stu-id="49a0c-108">Many developers believe their software is the only interface in a process, but very often that is not the case, because both the system and many third-party components use RPC internally, and those interfaces can create context handles.</span></span> <span data-ttu-id="49a0c-109">Когда используется атрибут [**ограниченного \_ контекста \_**](/windows/desktop/Midl/strict-context-handle) , время выполнения RPC гарантирует, что контекст, созданный в одном интерфейсе, может быть передан в качестве аргумента только методам этого интерфейса.</span><span class="sxs-lookup"><span data-stu-id="49a0c-109">When the [**strict\_context\_handle**](/windows/desktop/Midl/strict-context-handle) attribute is used, the RPC run time ensures that a context created on one interface can be passed as an argument only to methods of that interface.</span></span>

<span data-ttu-id="49a0c-110">В ситуациях, когда приложение разрабатывается для Windows Vista, рекомендуется использовать [**тип \_ строгого \_ \_ маркера контекста**](/windows/desktop/Midl/type-strict-context-handle) .</span><span class="sxs-lookup"><span data-stu-id="49a0c-110">In situations where an application is developed for Windows Vista, the use of [**type\_strict\_context\_handle**](/windows/desktop/Midl/type-strict-context-handle) is available and recommended.</span></span> <span data-ttu-id="49a0c-111">Дескрипторы контекста по умолчанию не связаны с конкретным типом.</span><span class="sxs-lookup"><span data-stu-id="49a0c-111">Context handles are not associated with a specific type by default.</span></span> <span data-ttu-id="49a0c-112">Если в одном процессе используется несколько типов дескрипторов контекста, вредоносный клиент может передать дескриптор контекста вместо другого для получения нежелательных результатов.</span><span class="sxs-lookup"><span data-stu-id="49a0c-112">When multiple types of context handles are used in the same process, it is possible for a malicious client to pass a context handle in place of another to produce undesirable results.</span></span> <span data-ttu-id="49a0c-113">Использование **\_ строгого \_ \_ маркера контекста** позволяет приложениям применять согласованность типов контекстного контекста и предотвращать несовпадение использования типа обрабатываемого контекста.</span><span class="sxs-lookup"><span data-stu-id="49a0c-113">The use of **type\_strict\_context\_handle** allows applications to enforce context handle type consistency and prevent any mismatched context handle type usage.</span></span>

 

 