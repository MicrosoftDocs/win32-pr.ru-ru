---
title: Указатели (RPC)
description: Указатели
ms.assetid: 9756E637-BCBB-48F1-B962-25AF2C917921
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0cabf5109506bc1e194a39c809bfb43a8f952fbf
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "104134886"
---
# <a name="pointers-rpc"></a>Указатели (RPC)

## <a name="common-pointers"></a>Общие указатели

Общий указатель определяется так же, как и все указатели интерфейса и числа байтов.

Существует два возможных макета для описания:

``` syntax
pointer_type<1> pointer_attributes<1>
simple_type<1> FC_PAD
```

–или–

``` syntax
pointer_type<1> pointer_attributes<1>
offset_to_complex_description<2>
```

Первый формат используется, если указатель является указателем на простой тип или неизмененный указатель на строку. Второй формат используется для указателей на все остальные типы. Атрибуты указателя указывают, какой макет описания имеет \_ флаг простого указателя FC \_ .

\_тип указателя<1> является одним из следующих.



| Символ формата | Описание                              |
|------------------|------------------------------------------|
| FC \_ RP           | Указатель ссылки.                     |
| FC \_           | Уникальный указатель.                        |
| FC \_ FP           | Полный указатель.                          |
| FC \_ Op           | Уникальный указатель в интерфейсе объекта. |



 

Основанием для различения операций FC \_ -операций является семантика: в объектных интерфейсах \[ \] перед деупаковкой нового объекта и присваиванием нового значения указателя следует освободить указатель in.

\_Атрибуты указателя<1> могут иметь любой из флагов, показанных в следующей таблице.



| Flag | Описание              |                                                                                                                                                                                                                                       |
|------|--------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 01   | FC \_ выделяет \_ все \_ узлы | Указатель является частью \_ схемы выделения размещения (все узлы).                                                                                                                                                                   |
| 02   | FC \_ не \_ бесплатно           | Указатель выделения (не \_ свободен).                                                                                                                                                                                                      |
| 04   | FC, \_ выделено \_ в \_ стеке   | Указатель, референт которого выделяется в стеке заглушки.                                                                                                                                                                            |
| 08   | \_простой \_ указатель FC      | Указатель на простой тип или неизмененную строку соответствия. Этот флаг задает расположение описания указателя как простой макет указателя, описанный выше, в противном случае указывается формат дескриптора с смещением. |
| 10   | FC, \_ указатель \_ DEREF       | Указатель, который должен быть разыменован перед обработкой референт указателя.                                                                                                                                                           |



 

Указатели, имеющие размер \_ , — (), \_ Функция Max имеет значение (), Length \_ — (), Last \_ — (), а/или First \_ — (). к ним применяются описания строк формата, идентичные указателю на массив соответствующего типа (например, соответствует массиву, если применяется параметр size \_ (), \_ и применяется длина, соответствующий различным массивам \_ .

## <a name="interface-pointers"></a>Указатели интерфейса

Строка формата указателя на интерфейс объекта имеет один из двух форматов в зависимости от того, известен ли компилятору соответствующий идентификатор IID.

Указатель интерфейса с постоянным IID имеет следующее описание:

``` syntax
FC_IP FC_CONSTANT_IID 
iid<16>
```

IID<16> является фактическим IID для указателя интерфейса. IID записывается в строку формата в формате, идентичном структуре данных GUID: длинная, короткая, короткая, символьная \[ 8 \] .

К нему применено описание указателя интерфейса с IID \_ ():

``` syntax
FC_IP FC_PAD 
iid_description<> 
```

Описание IID \_<> является дескриптором корреляции и имеет 4 или 6 байт в зависимости от того, используется ли [**/robust**](/windows/desktop/Midl/-robust) . Значение, вычисленное функцией **ндркомпутеконформанце** , является указателем IID.

## <a name="byte-count-pointers"></a>Указатели числа байтов

Указатели счетчика байтов относятся к Специальному атрибуту оптимизации, который называется \[ **\_ числом байтов** \] . Используются следующие форматы:

``` syntax
FC_BYTE_COUNT_POINTER 
simple_type<1>
byte_count_description<> 
```

перетаскивани

``` syntax
FC_BYTE_COUNT_POINTER 
FC_PAD
byte_count_description<> 
pointee_description<>
```

\_Описание счетчика байтов \_<> является дескриптором корреляции и имеет 4 или 6 байт в зависимости от того, используется ли [**/robust**](/windows/desktop/Midl/-robust) .

В \_ описании<> является описание типа Point.

 

 
