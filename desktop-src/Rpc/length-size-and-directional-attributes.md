---
title: Атрибуты длины, размера и направления
description: При передаче массивов между клиентом и сервером атрибуты с указанием размера \ Max \_ — \, а размер \_ — определяет количество элементов массива, выделенных заглушкой сервера.
ms.assetid: 2c95cf47-6fc0-4ccd-bb4f-acf356596e56
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 98ffbf1ac75ad82a89e258ab595590fce2190b9e
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103793129"
---
# <a name="length-size-and-directional-attributes"></a><span data-ttu-id="10cd8-103">Атрибуты длины, размера и направления</span><span class="sxs-lookup"><span data-stu-id="10cd8-103">Length, Size, and Directional Attributes</span></span>

<span data-ttu-id="10cd8-104">При передаче массивов между клиентом и сервером максимальный размер атрибутов, связанных с размером, определяется \[ [**\_**](/windows/desktop/Midl/max-is) \] \[ [**\_**](/windows/desktop/Midl/size-is) \] как число элементов массива, выделенных заглушкой сервера.</span><span class="sxs-lookup"><span data-stu-id="10cd8-104">In passing arrays between the client and the server, the size-related attributes \[[**max\_is**](/windows/desktop/Midl/max-is)\] and \[[**size\_is**](/windows/desktop/Midl/size-is)\] determine how many array elements the server stub allocates.</span></span> <span data-ttu-id="10cd8-105">Длина атрибутов, связанных с длиной, равна \[ [**\_**](/windows/desktop/Midl/length-is) \] , \[ [**First \_ —**](/windows/desktop/Midl/first-is) \] и \[ [**Last \_ —**](/windows/desktop/Midl/last-is) \] определяет количество элементов, передаваемых как серверу, так и клиенту.</span><span class="sxs-lookup"><span data-stu-id="10cd8-105">The length-related attributes \[[**length\_is**](/windows/desktop/Midl/length-is)\], \[[**first\_is**](/windows/desktop/Midl/first-is)\], and \[[**last\_is**](/windows/desktop/Midl/last-is)\] determine how many elements are transmitted to both the server and the client.</span></span>

<span data-ttu-id="10cd8-106">К параметрам могут применяться различные направления.</span><span class="sxs-lookup"><span data-stu-id="10cd8-106">Different directional attributes can be applied to parameters.</span></span> <span data-ttu-id="10cd8-107">Однако некоторые сочетания атрибутов направления могут вызвать ошибки.</span><span class="sxs-lookup"><span data-stu-id="10cd8-107">However, some combinations of directional attributes can cause errors.</span></span> <span data-ttu-id="10cd8-108">Например, предположим, что вы пишете интерфейс, который указывает процедуру с двумя параметрами, массивом и переданной длиной массива.</span><span class="sxs-lookup"><span data-stu-id="10cd8-108">As an example, suppose you are writing an interface that specifies a procedure with two parameters, an array, and the transmitted length of the array.</span></span> <span data-ttu-id="10cd8-109">Термин *dir \_ attr* относится к атрибуту Direction, примененному к параметру, как:</span><span class="sxs-lookup"><span data-stu-id="10cd8-109">The term *dir\_attr* refers to the directional attribute applied to the parameter as:</span></span>

``` syntax
Proc1(
    [dir_attr] short *plength;
    [dir_attr, length_is(pLength)] short array[MAX_SIZE]);
```

<span data-ttu-id="10cd8-110">Поведение компилятора MIDL для каждого сочетания атрибутов направления описывается в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="10cd8-110">The MIDL compiler behavior for each combination of directional attributes is described in the following table.</span></span>



| <span data-ttu-id="10cd8-111">Array</span><span class="sxs-lookup"><span data-stu-id="10cd8-111">Array</span></span>                                          | <span data-ttu-id="10cd8-112">Параметр длины</span><span class="sxs-lookup"><span data-stu-id="10cd8-112">Length parameter</span></span>                               | <span data-ttu-id="10cd8-113">Действия-заглушки при вызове от клиента к серверу</span><span class="sxs-lookup"><span data-stu-id="10cd8-113">Stub actions during call from client to server</span></span>                                                                                                                                                                                                                          | <span data-ttu-id="10cd8-114">Действия-заглушки при возврате с сервера на клиент</span><span class="sxs-lookup"><span data-stu-id="10cd8-114">Stub actions on return from server to client</span></span>                                                                                                                                                                         |
|------------------------------------------------|------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="10cd8-115">\[[**окне**](/windows/desktop/Midl/in)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-115">\[[**in**](/windows/desktop/Midl/in)\]</span></span>                          | <span data-ttu-id="10cd8-116">\[[**окне**](/windows/desktop/Midl/in)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-116">\[[**in**](/windows/desktop/Midl/in)\]</span></span>                          | <span data-ttu-id="10cd8-117">Передача длины и количества элементов, указанных параметром.</span><span class="sxs-lookup"><span data-stu-id="10cd8-117">Transmit the length and the number of elements indicated by the parameter.</span></span>                                                                                                                                                                                              | <span data-ttu-id="10cd8-118">Данные не передаются.</span><span class="sxs-lookup"><span data-stu-id="10cd8-118">No data transmitted.</span></span>                                                                                                                                                                                                 |
| <span data-ttu-id="10cd8-119">\[[**окне**](/windows/desktop/Midl/in)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-119">\[[**in**](/windows/desktop/Midl/in)\]</span></span>                          | <span data-ttu-id="10cd8-120">\[[**заполняет**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-120">\[[**out**](/windows/desktop/Midl/out-idl)\]</span></span>                    | <span data-ttu-id="10cd8-121">Неюридическая информация; Ошибка компилятора MIDL.</span><span class="sxs-lookup"><span data-stu-id="10cd8-121">Not legal; MIDL compiler error.</span></span>                                                                                                                                                                                                                                         | <span data-ttu-id="10cd8-122">Неюридическая информация; Ошибка компилятора MIDL.</span><span class="sxs-lookup"><span data-stu-id="10cd8-122">Not legal; MIDL compiler error.</span></span>                                                                                                                                                                                      |
| <span data-ttu-id="10cd8-123">\[[**окне**](/windows/desktop/Midl/in)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-123">\[[**in**](/windows/desktop/Midl/in)\]</span></span>                          | <span data-ttu-id="10cd8-124">\[[**в**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-124">\[[**in**](/windows/desktop/Midl/in), [**out**](/windows/desktop/Midl/out-idl)\]</span></span> | <span data-ttu-id="10cd8-125">Передает длину и количество элементов, указанных параметром length.</span><span class="sxs-lookup"><span data-stu-id="10cd8-125">Transmit the length and the number of elements indicated by the length parameter.</span></span>                                                                                                                                                                                       | <span data-ttu-id="10cd8-126">Передавать только длину.</span><span class="sxs-lookup"><span data-stu-id="10cd8-126">Transmit the length only.</span></span>                                                                                                                                                                                            |
| <span data-ttu-id="10cd8-127">\[[**заполняет**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-127">\[[**out**](/windows/desktop/Midl/out-idl)\]</span></span>                    | <span data-ttu-id="10cd8-128">\[[**окне**](/windows/desktop/Midl/in)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-128">\[[**in**](/windows/desktop/Midl/in)\]</span></span>                          | <span data-ttu-id="10cd8-129">Передача длины.</span><span class="sxs-lookup"><span data-stu-id="10cd8-129">Transmit the length.</span></span><br/> <span data-ttu-id="10cd8-130">Если размер массива фиксирован, выделите размер массива на сервере, но не передавайте элементы.</span><span class="sxs-lookup"><span data-stu-id="10cd8-130">If array size is fixed, allocate the array size on the server, but transmit no elements.</span></span><br/> <span data-ttu-id="10cd8-131">Если размер массива не привязан, недопустимый: MIDL — Ошибка компилятора.</span><span class="sxs-lookup"><span data-stu-id="10cd8-131">If array size is not bound, not legal: MIDL compiler error.</span></span><br/>                                                              | <span data-ttu-id="10cd8-132">Передает количество элементов, обозначенных длиной.</span><span class="sxs-lookup"><span data-stu-id="10cd8-132">Transmit the number of elements indicated by the length.</span></span><br/> <span data-ttu-id="10cd8-133">Обратите внимание, что длина может быть изменена и может отличаться от значения на клиенте.</span><span class="sxs-lookup"><span data-stu-id="10cd8-133">Note that the length can be changed and can have a different value from the value on the client.</span></span> <span data-ttu-id="10cd8-134">Не передавать длину.</span><span class="sxs-lookup"><span data-stu-id="10cd8-134">Do not transmit the length.</span></span><br/>          |
| <span data-ttu-id="10cd8-135">\[[**заполняет**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-135">\[[**out**](/windows/desktop/Midl/out-idl)\]</span></span>                    | <span data-ttu-id="10cd8-136">\[[**заполняет**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-136">\[[**out**](/windows/desktop/Midl/out-idl)\]</span></span>                    | <span data-ttu-id="10cd8-137">Выделить место для параметра длины на сервере, но не передавать параметр.</span><span class="sxs-lookup"><span data-stu-id="10cd8-137">Allocate space for the length parameter on the server but do not transmit the parameter.</span></span> <span data-ttu-id="10cd8-138">Если размер массива является фиксированным, выделите размер массива на сервере, но не передавайте элементы.</span><span class="sxs-lookup"><span data-stu-id="10cd8-138">If the array size is fixed, allocate the array size on the server, but transmit no elements.</span></span><br/> <span data-ttu-id="10cd8-139">Если размер массива не фиксирован, недопустимый: MIDL-Ошибка компилятора.</span><span class="sxs-lookup"><span data-stu-id="10cd8-139">If array size is not fixed, not legal: MIDL compiler error.</span></span><br/> | <span data-ttu-id="10cd8-140">Передача длины и количества элементов, обозначенных длиной, заданной в серверном приложении.</span><span class="sxs-lookup"><span data-stu-id="10cd8-140">Transmit the length and the number of elements indicated by the length as set by the server application.</span></span>                                                                                                             |
| <span data-ttu-id="10cd8-141">\[[**заполняет**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-141">\[[**out**](/windows/desktop/Midl/out-idl)\]</span></span>                    | <span data-ttu-id="10cd8-142">\[[**в**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-142">\[[**in**](/windows/desktop/Midl/in), [**out**](/windows/desktop/Midl/out-idl)\]</span></span> | <span data-ttu-id="10cd8-143">Передача параметра длины.</span><span class="sxs-lookup"><span data-stu-id="10cd8-143">Transmit the length parameter.</span></span> <span data-ttu-id="10cd8-144">Если размер массива привязан, следует выделить размер массива на сервере, но не передавать элементы.</span><span class="sxs-lookup"><span data-stu-id="10cd8-144">If the array size is bound, allocate the array size on the server, but transmit no elements.</span></span><br/> <span data-ttu-id="10cd8-145">Если размер массива не привязан, недопустимый: MIDL — Ошибка компилятора.</span><span class="sxs-lookup"><span data-stu-id="10cd8-145">If array size is not bound, not legal: MIDL compiler error.</span></span><br/>                                                           | <span data-ttu-id="10cd8-146">Передача длины.</span><span class="sxs-lookup"><span data-stu-id="10cd8-146">Transmit the length.</span></span> <span data-ttu-id="10cd8-147">Передает количество элементов массива, обозначенное длиной.</span><span class="sxs-lookup"><span data-stu-id="10cd8-147">Transmit the number of array elements indicated by the length.</span></span><br/>                                                                                                                       |
| <span data-ttu-id="10cd8-148">\[[**в**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-148">\[[**in**](/windows/desktop/Midl/in), [**out**](/windows/desktop/Midl/out-idl)\]</span></span> | <span data-ttu-id="10cd8-149">\[[**окне**](/windows/desktop/Midl/in)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-149">\[[**in**](/windows/desktop/Midl/in)\]</span></span>                          | <span data-ttu-id="10cd8-150">Передача длины и количества элементов, указанных параметром.</span><span class="sxs-lookup"><span data-stu-id="10cd8-150">Transmit the length and the number of elements indicated by the parameter.</span></span>                                                                                                                                                                                              | <span data-ttu-id="10cd8-151">Не передавать длину.</span><span class="sxs-lookup"><span data-stu-id="10cd8-151">Do not transmit the length.</span></span> <span data-ttu-id="10cd8-152">Передает количество элементов, обозначенных длиной.</span><span class="sxs-lookup"><span data-stu-id="10cd8-152">Transmit the number of elements indicated by the length.</span></span><br/> <span data-ttu-id="10cd8-153">Обратите внимание, что длину можно изменить, и она может иметь другое значение из исходного значения на клиенте.</span><span class="sxs-lookup"><span data-stu-id="10cd8-153">Note that the length can be changed and can have a different value from the original value on the client.</span></span><br/> |
| <span data-ttu-id="10cd8-154">\[[**в**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-154">\[[**in**](/windows/desktop/Midl/in), [**out**](/windows/desktop/Midl/out-idl)\]</span></span> | <span data-ttu-id="10cd8-155">\[[**заполняет**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-155">\[[**out**](/windows/desktop/Midl/out-idl)\]</span></span>                    | <span data-ttu-id="10cd8-156">Неюридическая информация; Ошибка компилятора MIDL.</span><span class="sxs-lookup"><span data-stu-id="10cd8-156">Not legal; MIDL compiler error.</span></span>                                                                                                                                                                                                                                         | <span data-ttu-id="10cd8-157">Неюридическая информация; Ошибка компилятора MIDL.</span><span class="sxs-lookup"><span data-stu-id="10cd8-157">Not legal; MIDL compiler error.</span></span>                                                                                                                                                                                      |
| <span data-ttu-id="10cd8-158">\[[**в**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-158">\[[**in**](/windows/desktop/Midl/in), [**out**](/windows/desktop/Midl/out-idl)\]</span></span> | <span data-ttu-id="10cd8-159">\[[**в**](/windows/desktop/Midl/in), [ **out**](/windows/desktop/Midl/out-idl)\]</span><span class="sxs-lookup"><span data-stu-id="10cd8-159">\[[**in**](/windows/desktop/Midl/in), [**out**](/windows/desktop/Midl/out-idl)\]</span></span> | <span data-ttu-id="10cd8-160">Передача длины и количества элементов, указанных параметром.</span><span class="sxs-lookup"><span data-stu-id="10cd8-160">Transmit the length and the number of elements indicated by the parameter.</span></span>                                                                                                                                                                                              | <span data-ttu-id="10cd8-161">Передача длины и количества элементов, указанных параметром.</span><span class="sxs-lookup"><span data-stu-id="10cd8-161">Transmit the length and the number of elements indicated by the parameter.</span></span>                                                                                                                                           |



 

<span data-ttu-id="10cd8-162">В общем случае не следует изменять параметры длины и размера на стороне сервера.</span><span class="sxs-lookup"><span data-stu-id="10cd8-162">In general, you should not modify the length or size parameters on the server side.</span></span> <span data-ttu-id="10cd8-163">Если изменить параметр length, память можно будет потерянной.</span><span class="sxs-lookup"><span data-stu-id="10cd8-163">If you change the length parameter, you can orphan memory.</span></span> <span data-ttu-id="10cd8-164">Дополнительные сведения см. в разделе [потеря памяти](memory-orphaning.md).</span><span class="sxs-lookup"><span data-stu-id="10cd8-164">For more information, see [Memory Orphaning](memory-orphaning.md).</span></span>

 

