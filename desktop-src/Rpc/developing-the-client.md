---
title: Разработка клиента
description: Разработка клиентской программы RPC аналогична разработке серверной программы. Сведения о разработке программы RPC Server см. в разделе Разработка сервера.
ms.assetid: 92276326-d478-479e-8fa4-02a2fce58eb6
keywords:
- Удаленный вызов процедур RPC, задачи, разработка клиента
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 10ceddedc4ccfd1d068e3452b64ed8c6b54a621d
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103987790"
---
# <a name="developing-the-client"></a><span data-ttu-id="c01eb-105">Разработка клиента</span><span class="sxs-lookup"><span data-stu-id="c01eb-105">Developing the Client</span></span>

<span data-ttu-id="c01eb-106">Разработка клиентской программы RPC аналогична разработке серверной программы.</span><span class="sxs-lookup"><span data-stu-id="c01eb-106">Developing an RPC client program is similar to developing the server program.</span></span> <span data-ttu-id="c01eb-107">Сведения о разработке программы RPC Server см. в разделе [Разработка сервера](developing-the-server.md).</span><span class="sxs-lookup"><span data-stu-id="c01eb-107">For information on developing an RPC server program, see [Developing the Server](developing-the-server.md).</span></span>

<span data-ttu-id="c01eb-108">Как и при разработке сервера, клиентская программа должна включать файл заголовка, созданный компилятором MIDL из IDL-файла.</span><span class="sxs-lookup"><span data-stu-id="c01eb-108">As in server development, your client program must include the header file that the MIDL compiler generates from your .idl file.</span></span> <span data-ttu-id="c01eb-109">Компилятор MIDL также создает исходный файл на языке C, содержащий клиентскую заглушку.</span><span class="sxs-lookup"><span data-stu-id="c01eb-109">The MIDL compiler also generates a C source file containing the client stub.</span></span> <span data-ttu-id="c01eb-110">Необходимо скомпилировать этот исходный файл на языке C и связать его с клиентской программой.</span><span class="sxs-lookup"><span data-stu-id="c01eb-110">You must compile this C source file and link it to your client program.</span></span> <span data-ttu-id="c01eb-111">(Кроме того, компилятор MIDL создает исходный файл на языке C, содержащий серверную заглушку, но не относящийся к этому обсуждению.)</span><span class="sxs-lookup"><span data-stu-id="c01eb-111">(In addition, the MIDL compiler generates a C source file containing the server stub, but that is not relevant to this discussion.)</span></span>

<span data-ttu-id="c01eb-112">Помимо компиляции и связывания клиентской заглушки с файлами программы, необходимо связать библиотеку импорта (и любые другие библиотеки, необходимые клиентской программе) с клиентской программой.</span><span class="sxs-lookup"><span data-stu-id="c01eb-112">In addition to compiling and linking the client stub with your program files, you must link the import library (and any other libraries your client program needs) to your client program.</span></span> <span data-ttu-id="c01eb-113">Процесс создания клиентской программы RPC показан на следующей схеме.</span><span class="sxs-lookup"><span data-stu-id="c01eb-113">The process of creating an RPC client program is illustrated in the following diagram.</span></span>

![процесс создания клиентской программы для распределенного приложения](images/clntdev.png)

<span data-ttu-id="c01eb-115">В примере на предыдущем рисунке показано создание клиентской программы RPC с именем MyClnt.exe.</span><span class="sxs-lookup"><span data-stu-id="c01eb-115">The example in the preceding illustration demonstrates the creation of an RPC client program called MyClnt.exe.</span></span> <span data-ttu-id="c01eb-116">Первым шагом является определение интерфейса в файле MyApp. idl.</span><span class="sxs-lookup"><span data-stu-id="c01eb-116">The first step is to define the interface in the file MyApp.idl.</span></span> <span data-ttu-id="c01eb-117">Компилятор MIDL использует MyApp. IDL для создания файла MyApp \_ c. c, который содержит клиентскую заглушку.</span><span class="sxs-lookup"><span data-stu-id="c01eb-117">The MIDL compiler uses MyApp.idl to generate the file MyApp\_c.c, which contains the client stub.</span></span> <span data-ttu-id="c01eb-118">Он также создает файл MyApp. h, который должна включать клиентская программа.</span><span class="sxs-lookup"><span data-stu-id="c01eb-118">It also generates the file MyApp.h, which the client program must include.</span></span> <span data-ttu-id="c01eb-119">Клиентская программа также должна включить файлы RPC. h и РПКНДР. h.</span><span class="sxs-lookup"><span data-stu-id="c01eb-119">The client program will also need to include the files RPC.h and RPCNDR.h.</span></span>

<span data-ttu-id="c01eb-120">Сама клиентская программа создается в файле Миклнт. c.</span><span class="sxs-lookup"><span data-stu-id="c01eb-120">The client program itself is created in the file MyClnt.c.</span></span> <span data-ttu-id="c01eb-121">В реальных проектах клиентская программа обычно состоит из нескольких исходных файлов C.</span><span class="sxs-lookup"><span data-stu-id="c01eb-121">In a real project, the client program would typically be composed of several C source files.</span></span> <span data-ttu-id="c01eb-122">Все они должны быть скомпилированы и связаны вместе.</span><span class="sxs-lookup"><span data-stu-id="c01eb-122">All of them would need to be compiled and linked together.</span></span> <span data-ttu-id="c01eb-123">Однако в этом примере для простоты используется только один файл.</span><span class="sxs-lookup"><span data-stu-id="c01eb-123">However, this example uses only one file for simplicity.</span></span>

<span data-ttu-id="c01eb-124">Файлы Миклнт. c и MyApp \_ c. c компилируются и связываются вместе с библиотекой времени выполнения RPC и другими библиотеками, которые требуются клиентской программе.</span><span class="sxs-lookup"><span data-stu-id="c01eb-124">The files MyClnt.c and MyApp\_c.c are compiled and linked together with the RPC run-time library, and any other libraries that the client program needs.</span></span> <span data-ttu-id="c01eb-125">Результатом является исполняемая клиентская программа с именем MyClnt.exe.</span><span class="sxs-lookup"><span data-stu-id="c01eb-125">The result is an executable client program named MyClnt.exe.</span></span>

<span data-ttu-id="c01eb-126">Если вы не компилируете IDL-файл в режиме совместимости использование ([**/ОСФ**](/windows/desktop/Midl/-osf)), клиентская программа должна предоставить функцию для выделения памяти и функцию для ее освобождения.</span><span class="sxs-lookup"><span data-stu-id="c01eb-126">If you do not compile your IDL file in OSF compatibility mode ([**/osf**](/windows/desktop/Midl/-osf)), your client program must provide a function for allocating memory and a function for deallocating it.</span></span> <span data-ttu-id="c01eb-127">Для Windows 2000 и более поздних версий рекомендуется использовать режим [**/Oicf**](/windows/desktop/Midl/-oi).</span><span class="sxs-lookup"><span data-stu-id="c01eb-127">For Windows 2000 and later versions, the recommended mode is [**/Oicf**](/windows/desktop/Midl/-oi).</span></span> <span data-ttu-id="c01eb-128">Дополнительные сведения см. в статье [о выделении и](how-memory-is-allocated-and-deallocated.md)освобождении памяти и назначении [указателей и выделении памяти](pointers-and-memory-allocation.md).</span><span class="sxs-lookup"><span data-stu-id="c01eb-128">For details, see [How Memory Is Allocated and Deallocated](how-memory-is-allocated-and-deallocated.md), and [Pointers and Memory Allocation](pointers-and-memory-allocation.md).</span></span>

 

 