---
title: Использование HTTP в качестве транспорта RPC
description: RPC-over-HTTP позволяет клиентским программам использовать Интернет для выполнения процедур, предоставляемых серверными программами в удаленных сетях.
ms.assetid: b5062d70-7625-4a9f-a8c1-025ef8342fcb
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5860757a6c5df9937e77fc078df2526affb967fa
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104486845"
---
# <a name="using-http-as-an-rpc-transport"></a><span data-ttu-id="05e78-103">Использование HTTP в качестве транспорта RPC</span><span class="sxs-lookup"><span data-stu-id="05e78-103">Using HTTP as an RPC Transport</span></span>

<span data-ttu-id="05e78-104">RPC-over-HTTP позволяет клиентским программам использовать Интернет для выполнения процедур, предоставляемых серверными программами в удаленных сетях.</span><span class="sxs-lookup"><span data-stu-id="05e78-104">RPC-over-HTTP enables client programs to use the Internet to execute procedures provided by server programs on distant networks.</span></span> <span data-ttu-id="05e78-105">RPC через HTTP выполняет туннелирование своих вызовов через установленный HTTP-порт.</span><span class="sxs-lookup"><span data-stu-id="05e78-105">RPC over HTTP tunnels its calls through an established HTTP port.</span></span> <span data-ttu-id="05e78-106">Таким же вызов может пересекать сетевые брандмауэры как в клиентской, так и в серверной сети.</span><span class="sxs-lookup"><span data-stu-id="05e78-106">Thus, its calls can cross network firewalls on both the client and server networks.</span></span>

<span data-ttu-id="05e78-107">RPC через HTTP направляет свои вызовы прокси-серверу RPC, расположенному в сети сервера RPC.</span><span class="sxs-lookup"><span data-stu-id="05e78-107">RPC over HTTP routes its calls to the RPC proxy located on the RPC server's network.</span></span> <span data-ttu-id="05e78-108">Прокси-сервер RPC устанавливает и поддерживает подключение к серверу RPC.</span><span class="sxs-lookup"><span data-stu-id="05e78-108">The RPC Proxy establishes and maintains a connection to the RPC server.</span></span> <span data-ttu-id="05e78-109">Она служит прокси-сервером, отправляет вызовы удаленных процедур на сервер RPC и отправляет ответы сервера обратно через Интернет в клиентское приложение.</span><span class="sxs-lookup"><span data-stu-id="05e78-109">It serves as a proxy, dispatching remote procedure calls to the RPC server and sending the server's replies back across the Internet to the client application.</span></span> <span data-ttu-id="05e78-110">Этот процесс показан на следующей схеме.</span><span class="sxs-lookup"><span data-stu-id="05e78-110">This process is illustrated in the following diagram.</span></span>

![взаимодействие между сервером RPC и сервером IIS для RPC HTTP](images/httprpc1.png)

<span data-ttu-id="05e78-112">На схеме показан брандмауэр в сети клиентского приложения.</span><span class="sxs-lookup"><span data-stu-id="05e78-112">The diagram shows a firewall on the client application's network.</span></span> <span data-ttu-id="05e78-113">Это не требуется для функционирования RPC через HTTP.</span><span class="sxs-lookup"><span data-stu-id="05e78-113">This is not required for RPC over HTTP to operate.</span></span> <span data-ttu-id="05e78-114">Однако если у клиентской сети есть брандмауэр, потребуется также программа прокси-сервера, например Microsoft Proxy Server.</span><span class="sxs-lookup"><span data-stu-id="05e78-114">However, if the client network does have a firewall, it will also need a proxy server program such as Microsoft Proxy Server.</span></span>

<span data-ttu-id="05e78-115">Когда клиентская программа выдает удаленный вызов процедуры по протоколу HTTP в качестве транспорта, Библиотека времени выполнения RPC на клиенте обращается к прокси-серверу RPC.</span><span class="sxs-lookup"><span data-stu-id="05e78-115">When the client program issues a remote procedure call using HTTP as the transport, the RPC run-time library on the client contacts the RPC proxy.</span></span> <span data-ttu-id="05e78-116">В зависимости от того, используется ли клиент RPC, используйте протокол HTTP или HTTPS (HTTP с SSL), порт 80 или порт 443, соответственно.</span><span class="sxs-lookup"><span data-stu-id="05e78-116">Depending on whether the RPC client was asked to use HTTP or HTTPS (HTTP with SSL) port 80 or port 443 is used, respectively.</span></span> <span data-ttu-id="05e78-117">Прокси-сервер RPC обращается к программе RPC Server и устанавливает подключение TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="05e78-117">The RPC proxy contacts the RPC server program and establishes a TCP/IP connection.</span></span> <span data-ttu-id="05e78-118">Клиент и прокси-сервер RPC поддерживают подключения по протоколу HTTP или HTTPS через Интернет.</span><span class="sxs-lookup"><span data-stu-id="05e78-118">The client and the RPC proxy maintain their HTTP or HTTPS connection across the Internet.</span></span> <span data-ttu-id="05e78-119">Подключение по протоколу HTTP или HTTPS к прокси-серверу RPC может проходить через брандмауэр (подчиняются соответствующим разрешениям на доступ), если таковой имеется.</span><span class="sxs-lookup"><span data-stu-id="05e78-119">The client's HTTP or HTTPS connection to the RPC proxy can pass through a firewall (subject to appropriate access permissions) if one is present.</span></span> <span data-ttu-id="05e78-120">Затем сервер может выполнить удаленный вызов процедуры и использовать подключение через прокси-сервер RPC для ответа клиенту.</span><span class="sxs-lookup"><span data-stu-id="05e78-120">The server can then execute the remote procedure call and use the connection through the RPC proxy to reply to the client.</span></span> <span data-ttu-id="05e78-121">Прокси-сервер RPC — это расширение ISAPI, выполняющееся в контексте IIS.</span><span class="sxs-lookup"><span data-stu-id="05e78-121">The RPC proxy is an ISAPI extension running in the context of IIS.</span></span>

<span data-ttu-id="05e78-122">Если клиент или сервер отключаются по какой-либо причине, прокси RPC определит его и завершит сеанс RPC.</span><span class="sxs-lookup"><span data-stu-id="05e78-122">If either the client or the server disconnects for any reason, the RPC proxy will detect it and end the RPC session.</span></span> <span data-ttu-id="05e78-123">Пока сеанс будет продолжен, прокси-сервер RPC сохранит подключение к клиенту и серверу.</span><span class="sxs-lookup"><span data-stu-id="05e78-123">As long as the session continues, the RPC proxy will maintain its connections to the client and the server.</span></span> <span data-ttu-id="05e78-124">Он будет пересылать удаленные вызовы процедур от клиента серверу и отправлять ответы от сервера клиенту.</span><span class="sxs-lookup"><span data-stu-id="05e78-124">It will forward remote procedure calls from the client to the server, and send replies from the server to the client.</span></span>

<span data-ttu-id="05e78-125">Клиентская программа RPC может туннелировать вызовы RPC через Интернет, создав строковую привязку формы:</span><span class="sxs-lookup"><span data-stu-id="05e78-125">The RPC client program can tunnel its RPC calls through the Internet by creating a string binding of the form:</span></span>

``` syntax
[object_uuid@]ncacn_http:rpc_server[endpoint,HttpProxy=proxy_server:http_port,RpcProxy=rpc_proxy:rpc_port,HttpConnectionOption=UseHttpProxy]
```

<span data-ttu-id="05e78-126">Где:</span><span class="sxs-lookup"><span data-stu-id="05e78-126">Where:</span></span>

-   <span data-ttu-id="05e78-127">*\_ UUID объекта* указывает UUID объекта RPC.</span><span class="sxs-lookup"><span data-stu-id="05e78-127">*object\_uuid* specifies an RPC object UUID.</span></span> <span data-ttu-id="05e78-128">Дополнительные сведения см. в разделе [создание идентификаторов UUID интерфейса](generating-interface-uuids.md) и [строкового UUID](string-uuid.md).</span><span class="sxs-lookup"><span data-stu-id="05e78-128">For more information, see [Generating Interface UUIDs](generating-interface-uuids.md) and [String UUID](string-uuid.md).</span></span>
-   <span data-ttu-id="05e78-129">**нкакн \_ http** выбирает спецификацию последовательности протоколов для RPC через HTTP.</span><span class="sxs-lookup"><span data-stu-id="05e78-129">**ncacn\_http** selects the protocol sequence specification for RPC over HTTP.</span></span> <span data-ttu-id="05e78-130">Дополнительные сведения см. в разделе [константы последовательности протоколов](protocol-sequence-constants.md) и [Привязка строк](string-binding.md).</span><span class="sxs-lookup"><span data-stu-id="05e78-130">For more information, see [Protocol Sequence Constants](protocol-sequence-constants.md) and [String Binding](string-binding.md).</span></span>
-   <span data-ttu-id="05e78-131">*RPC- \_ сервер* — это сетевой адрес компьютера, на котором выполняется процесс RPC-сервера.</span><span class="sxs-lookup"><span data-stu-id="05e78-131">*rpc\_server* is the network address of the computer that is executing the RPC server process.</span></span> <span data-ttu-id="05e78-132">Адрес сервера должен быть указан в форме, видимой и понятной компьютеру прокси-сервера RPC, а не клиенту.</span><span class="sxs-lookup"><span data-stu-id="05e78-132">The server address must be specified in a form visible and understandable by the RPC proxy computer, not by the client.</span></span> <span data-ttu-id="05e78-133">Поскольку клиент не подключается непосредственно к серверу, ему не нужно иметь возможность разрешить имя сервера или установить соединение с ним.</span><span class="sxs-lookup"><span data-stu-id="05e78-133">Since the client does not connect directly to the server, it does not need to be able to resolve the name of the server, or establish a connection to it.</span></span> <span data-ttu-id="05e78-134">Прокси-сервер RPC устанавливает подключение от имени клиента, поэтому *\_ сервер RPC* должен быть именем, распознаваемым прокси-сервером RPC.</span><span class="sxs-lookup"><span data-stu-id="05e78-134">The RPC proxy will establish the connection on the client's behalf, and therefore, *rpc\_server* must be a name recognizable by the RPC proxy.</span></span>
-   <span data-ttu-id="05e78-135">*Конечная точка* указывает порт TCP/IP, который сервер RPC прослушивает для удаленных вызовов процедур.</span><span class="sxs-lookup"><span data-stu-id="05e78-135">*endpoint* specifies the TCP/IP port that the RPC server process listens to for remote procedure calls.</span></span> <span data-ttu-id="05e78-136">Дополнительные сведения см. в разделе [Поиск конечных точек](finding-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="05e78-136">For more information, see [Finding Endpoints](finding-endpoints.md).</span></span>
-   <span data-ttu-id="05e78-137">При необходимости **полезных** указывает прокси-сервер HTTP в сети клиента RPC, такой как Microsoft Proxy Server.</span><span class="sxs-lookup"><span data-stu-id="05e78-137">**HttpProxy** optionally specifies an HTTP proxy server on the RPC client's network, such as Microsoft Proxy Server.</span></span> <span data-ttu-id="05e78-138">Если выбран прокси-сервер, то номер порта не указан, заглушка RPC использует порт 80 по умолчанию, если протокол SSL не запрошен, а порт 443, если указан протокол SSL.</span><span class="sxs-lookup"><span data-stu-id="05e78-138">If a proxy server is selected, no port number is specified, the RPC stub uses port 80 by default if SSL is not requested, and port 443 if SSL is specified.</span></span>
-   <span data-ttu-id="05e78-139">**RPCProxy** задает адрес и номер порта компьютера IIS, который выступает в качестве прокси-сервера RPC.</span><span class="sxs-lookup"><span data-stu-id="05e78-139">**RpcProxy** specifies the address and port number of the IIS computer that acts as a proxy to the RPC server.</span></span> <span data-ttu-id="05e78-140">Его необходимо указать, только если сервер RPC находится на компьютере, отличном от компьютера прокси-сервера RPC.</span><span class="sxs-lookup"><span data-stu-id="05e78-140">You only need to specify this if the RPC server process resides on a different computer than the RPC proxy.</span></span> <span data-ttu-id="05e78-141">Если не указать номер порта, клиентская заглушка RPC по умолчанию использует порт 80, если SSL не указан, и использует порт 443, если указан протокол SSL (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="05e78-141">If you do not specify a port number, the RPC client stub by default uses port 80 if SSL is not specified, and uses port 443 if SSL (HTTPS) is specified.</span></span>
-   <span data-ttu-id="05e78-142">**Хттпконнектионоптион** при необходимости позволяет направлять поведение RPC при установлении HTTP-соединений.</span><span class="sxs-lookup"><span data-stu-id="05e78-142">**HttpConnectionOption** optionally allows you to direct RPC’s behavior when making HTTP connections.</span></span> <span data-ttu-id="05e78-143">Значение **усехттппрокси** предписывает RPC направить трафик через прокси-сервер HTTP в любое время, в том числе когда для клиента в Internet Explorer задан параметр «не использовать прокси-сервер для локальных адресов».</span><span class="sxs-lookup"><span data-stu-id="05e78-143">The **UseHttpProxy** value instructs RPC to route its traffic through the Http proxy at all times, including when the client has their Internet Options set in Internet Explorer to “Bypass proxy server for local addresses.”</span></span>

    <span data-ttu-id="05e78-144">Этот параметр поддерживается в Windows 7, Windows Server 2008 R2, Windows 8.1 и Windows Server 2012 R2 с установленным KB2916915.</span><span class="sxs-lookup"><span data-stu-id="05e78-144">This option is supported on Windows 7, Windows Server 2008 R2, Windows 8.1, and Windows Server 2012 R2 with KB2916915 installed.</span></span> <span data-ttu-id="05e78-145">Этот параметр не поддерживается в Windows 8 и Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="05e78-145">This option is not supported on Windows 8 and Windows Server 2012.</span></span> <span data-ttu-id="05e78-146">Приложения могут определить, поддерживается ли этот параметр средой выполнения RPC, проверив значение реестра **коннектионоптионсфлаг** , расположенное в следующем разделе реестра:</span><span class="sxs-lookup"><span data-stu-id="05e78-146">Applications can determine if this option is supported by the RPC runtime by checking the **ConnectionOptionsFlag** registry value located under the following registry key:</span></span>

    <span data-ttu-id="05e78-147">**HKEY \_ \_ \\ программное обеспечение локального компьютера \\ Microsoft \\ RPC**</span><span class="sxs-lookup"><span data-stu-id="05e78-147">**HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Rpc**</span></span>

    <span data-ttu-id="05e78-148">Если задан бит 0 (ЛСБ) этого значения реестра, этот параметр поддерживается. в противном случае этот параметр не поддерживается средой выполнения RPC в системе.</span><span class="sxs-lookup"><span data-stu-id="05e78-148">If the bit 0 (LSB) of this registry value is set, then this specific option is supported; otherwise, this option is not supported by the RPC runtime in the system.</span></span>

<span data-ttu-id="05e78-149">Дополнительные сведения о создании строковых привязок см. в разделе [Binding and Handles](binding-and-handles.md).</span><span class="sxs-lookup"><span data-stu-id="05e78-149">For more information on creating string bindings, see [Binding and Handles](binding-and-handles.md).</span></span>

<span data-ttu-id="05e78-150">Программа RPC-сервера может принимать туннельные вызовы RPC путем прослушивания \_ последовательности протокола HTTP нкакн.</span><span class="sxs-lookup"><span data-stu-id="05e78-150">The RPC server program can accept tunneled RPC calls by listening on the ncacn\_http protocol sequence.</span></span>

<span data-ttu-id="05e78-151">Корпорация Майкрософт имеет две основные реализации RPC по протоколу HTTP: версии 1 и версии 2.</span><span class="sxs-lookup"><span data-stu-id="05e78-151">Microsoft has two major implementations of RPC over HTTP: Version 1 and Version 2.</span></span>

<span data-ttu-id="05e78-152">Версия 1 (называемая RPC через HTTP v1) поддерживается в Windows XP.</span><span class="sxs-lookup"><span data-stu-id="05e78-152">Version 1 (called RPC over HTTP v1) is supported through Windows XP.</span></span> <span data-ttu-id="05e78-153">Версия 1 прокси-сервера RPC поддерживается в Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="05e78-153">Version 1 of the RPC proxy is supported through Windows 2000.</span></span>

<span data-ttu-id="05e78-154">Версия 2 (называемая RPC через HTTP v2) — это текущая версия.</span><span class="sxs-lookup"><span data-stu-id="05e78-154">Version 2 (called RPC over HTTP v2) is the current version.</span></span>

<span data-ttu-id="05e78-155">Две версии имеют различные возможности и ограничены возможностями взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="05e78-155">The two versions have different capabilities and limited interoperability.</span></span> <span data-ttu-id="05e78-156">Сводка различий приведена здесь.</span><span class="sxs-lookup"><span data-stu-id="05e78-156">A summary of the differences is provided here.</span></span> <span data-ttu-id="05e78-157">Рекомендации по взаимодействию см. в статье [требования к системе и взаимодействие для RPC через HTTP](system-requirements-and-interoperability-for-rpc-over-http.md).</span><span class="sxs-lookup"><span data-stu-id="05e78-157">For interoperability considerations, see [System Requirements and Interoperability for RPC over HTTP](system-requirements-and-interoperability-for-rpc-over-http.md).</span></span>

-   <span data-ttu-id="05e78-158">Для RPC через HTTP v1 необходимо включить туннелирование SSL для всех прокси-серверов HTTP и брандмауэров между клиентом RPC через HTTP и прокси-сервером RPC.</span><span class="sxs-lookup"><span data-stu-id="05e78-158">RPC over HTTP v1 requires SSL Tunneling to be enabled on all HTTP proxies/firewalls between the RPC over HTTP client and the RPC proxy.</span></span> <span data-ttu-id="05e78-159">RPC через HTTP v1 попытается создать туннель SSL через порт 80, хотя отправляемые данные фактически не шифруются с помощью SSL.</span><span class="sxs-lookup"><span data-stu-id="05e78-159">RPC over HTTP v1 attempts to build an SSL Tunnel over port 80 even though the data it sends is not actually SSL-encrypted.</span></span> <span data-ttu-id="05e78-160">Прокси-серверы и брандмауэры обычно отклоняют такие запросы, если они не разрешены явным образом.</span><span class="sxs-lookup"><span data-stu-id="05e78-160">Proxies and firewalls usually reject such requests unless explicitly configured to allow them.</span></span> <span data-ttu-id="05e78-161">RPC через HTTP v2 не имеет такого требования.</span><span class="sxs-lookup"><span data-stu-id="05e78-161">RPC over HTTP v2 has no such requirement.</span></span>
-   <span data-ttu-id="05e78-162">RPC через HTTP v1 не может установить сеанс SSL для прокси-сервера RPC.</span><span class="sxs-lookup"><span data-stu-id="05e78-162">RPC over HTTP v1 cannot establish an SSL session to the RPC proxy.</span></span> <span data-ttu-id="05e78-163">RPC через HTTP v2 может передавать весь трафик RPC через HTTP в сеансе SSL. по умолчанию версия 2 требует, чтобы данные отправлялись в сеансе SSL.</span><span class="sxs-lookup"><span data-stu-id="05e78-163">The RPC over HTTP v2 can send all RPC over HTTP traffic within an SSL session; by default v2 requires the data be sent within an SSL session.</span></span>
-   <span data-ttu-id="05e78-164">RPC через HTTP v1 не может пройти проверку подлинности прокси-сервера RPC.</span><span class="sxs-lookup"><span data-stu-id="05e78-164">RPC over HTTP v1 cannot authenticate to the RPC proxy.</span></span> <span data-ttu-id="05e78-165">RPC через HTTP v2 может пройти проверку подлинности; по умолчанию v2 требует проверки подлинности прокси RPC.</span><span class="sxs-lookup"><span data-stu-id="05e78-165">RPC over HTTP v2 can authenticate; by default v2 requires authentication to the RPC proxy.</span></span>
-   <span data-ttu-id="05e78-166">RPC-прокси версии 1 не работает правильно, если компьютер IIS, на котором она установлена, является частью веб-фермы.</span><span class="sxs-lookup"><span data-stu-id="05e78-166">RPC proxy v1 does not operate correctly when the IIS machine on which it is installed is part of a web farm.</span></span> <span data-ttu-id="05e78-167">Прокси-сервер RPC версии 2 работает правильно, если компьютер IIS, на котором он установлен, является частью веб-фермы.</span><span class="sxs-lookup"><span data-stu-id="05e78-167">RPC proxy v2 operates properly when the IIS machine on which it is installed is part of a web farm.</span></span>

> [!Note]  
> <span data-ttu-id="05e78-168">Если Microsoft Internet Explorer установлен на компьютере клиентской программы и клиент не указал **полезных** в своей строковой привязке, клиентская заглушка RPC будет выполнять поиск записи **полезных** в реестре на клиентском компьютере.</span><span class="sxs-lookup"><span data-stu-id="05e78-168">If Microsoft Internet Explorer is installed on the client program's computer and your client does not specify an **HttpProxy** in its string binding, the RPC client stub will search the registry on the client computer for an **HttpProxy** entry.</span></span> <span data-ttu-id="05e78-169">Если он найден, будет использоваться прокси-сервер, указанный в записи реестра.</span><span class="sxs-lookup"><span data-stu-id="05e78-169">If it finds one, it will use the proxy specified in the registry entry.</span></span>

 

<span data-ttu-id="05e78-170">Предположим, например, что клиентская программа должна подключаться через Интернет к серверу RPC на компьютере с именем Server7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="05e78-170">Suppose, for instance, your client program needs to connect across the Internet to an RPC server on a computer called Server7.microsoft.com.</span></span> <span data-ttu-id="05e78-171">Кроме того, предположим, что прокси RPC работает на Major7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="05e78-171">Further, suppose that the RPC proxy runs on Major7.microsoft.com.</span></span> <span data-ttu-id="05e78-172">Программа RPC Server прослушивает порт 2225.</span><span class="sxs-lookup"><span data-stu-id="05e78-172">The RPC server program listens to port 2225.</span></span> <span data-ttu-id="05e78-173">Клиент будет использовать привязку строк:</span><span class="sxs-lookup"><span data-stu-id="05e78-173">Your client would use the string binding:</span></span>

``` syntax
ncacn_http:Server7.microsoft.com[2225, RpcProxy=Major7.microsoft.com]
```

<span data-ttu-id="05e78-174">Если прокси-сервер RPC может разрешить имя сервера как Server7, не требуя полного доменного имени, можно также указать:</span><span class="sxs-lookup"><span data-stu-id="05e78-174">If the RPC proxy can resolve the server name as Server7, without requiring a fully qualified domain name, you can also specify:</span></span>

``` syntax
ncacn_http:Server7 [2225, RpcProxy=Major7.microsoft.com]
```

<span data-ttu-id="05e78-175">Если клиентская сеть использует брандмауэр и прокси-сервер в Интернете с именем мипрокси, а Internet Explorer на клиенте не настроен для использования этого прокси-сервера, необходимо изменить привязку строки клиента на:</span><span class="sxs-lookup"><span data-stu-id="05e78-175">If the client network uses a firewall and an Internet proxy server called myproxy, and Internet Explorer on the client is not configured to use that proxy, you would need to modify the client's string binding to:</span></span>

``` syntax
ncacn_http:Server7.microsoft.com[,HttpProxy=myproxy:80,RpcProxy=Major7.microsoft.com:80]
```

<span data-ttu-id="05e78-176">Это направляет клиента к подключению к программе RPC Server на Server7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="05e78-176">This directs the client to connect to the RPC server program on Server7.microsoft.com.</span></span> <span data-ttu-id="05e78-177">Для этого клиент сначала будет использовать порт 80 (или порт 443, если используется протокол SSL) для подключения к мипрокси.</span><span class="sxs-lookup"><span data-stu-id="05e78-177">To do this, the client will first use port 80 (or port 443 if SSL is used) to connect to myproxy.</span></span> <span data-ttu-id="05e78-178">Это даст клиентской программе доступ к Интернету.</span><span class="sxs-lookup"><span data-stu-id="05e78-178">This will give the client program access to the Internet.</span></span> <span data-ttu-id="05e78-179">При использовании Интернета клиентская программа затем подключается к прокси-серверу RPC на Major7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="05e78-179">Using the Internet, the client program next connects to the RPC proxy on Major7.microsoft.com.</span></span> <span data-ttu-id="05e78-180">Прокси-сервер RPC установит подключение к серверу RPC, работающему на Server7.microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="05e78-180">The RPC proxy will establish a connection to the RPC server program running on Server7.microsoft.com.</span></span>

<span data-ttu-id="05e78-181">Если клиентская сеть использует брандмауэр, а прокси-сервер RPC недоступен, для ускорения установки соединения можно изменить клиентскую привязку строки следующим образом:</span><span class="sxs-lookup"><span data-stu-id="05e78-181">If the client network uses a firewall and if the RPC proxy cannot be reached directly, in order to get a connection established faster, the client string binding can be modified to:</span></span>

``` syntax
ncacn_http:Server7.microsoft.com[RpcProxy=Major7.microsoft.com:80,HttpConnectionOption=UseHttpProxy]
```

<span data-ttu-id="05e78-182">**Хттпконнектионоптион** позволяет направлять поведение RPC при выполнении HTTP-соединений.</span><span class="sxs-lookup"><span data-stu-id="05e78-182">The **HttpConnectionOption** allows you to direct RPC’s behavior when making HTTP connections.</span></span> <span data-ttu-id="05e78-183">Значение **усехттппрокси** предписывает RPC направить трафик через прокси-сервер HTTP в любое время, в том числе когда для клиента в Internet Explorer задан параметр «не использовать прокси-сервер для локальных адресов».</span><span class="sxs-lookup"><span data-stu-id="05e78-183">The **UseHttpProxy** value instructs RPC to route its traffic through the Http proxy at all times, including when the client has their Internet Options set in Internet Explorer to “Bypass proxy server for local addresses.”</span></span> <span data-ttu-id="05e78-184">Это направляет клиенту принудительное подключение к прокси-серверу RPC через прокси-сервер HTTP.</span><span class="sxs-lookup"><span data-stu-id="05e78-184">This directs the client to forcefully connect to the RPC proxy through the Http proxy.</span></span> <span data-ttu-id="05e78-185">Это ускоряет установку подключения, так как обходит любые задержки поиска сервера RPC непосредственно перед использованием HTTP-прокси.</span><span class="sxs-lookup"><span data-stu-id="05e78-185">This speeds up the time to establish a connection since it bypasses any delay searching for the RPC server directly prior to using the HTTP proxy.</span></span>

<span data-ttu-id="05e78-186">Если используется параметр **хттпконнектионоптион** и Internet Explorer на клиенте не настроен для использования этого HTTP-прокси, то подключения могут завершаться сбоем **с \_ \_ недопустимыми \_ \_ параметрами сети RPC S**.</span><span class="sxs-lookup"><span data-stu-id="05e78-186">If the **HttpConnectionOption** option is used and Internet Explorer on the client is not configured to use that Http proxy, connections may fail with **RPC\_S\_INVALID\_NETWORK\_OPTIONS**.</span></span>

<span data-ttu-id="05e78-187">Большинство компьютеров сегодня настроены на просмотр веб-страниц.</span><span class="sxs-lookup"><span data-stu-id="05e78-187">The vast majority of computers today are configured for Web browsing.</span></span> <span data-ttu-id="05e78-188">Таким образом, большинству клиентов не нужно указывать **полезных**, так как они будут получены из параметров подключения к Интернету.</span><span class="sxs-lookup"><span data-stu-id="05e78-188">Therefore, most clients do not need to specify the **HttpProxy**, because it will be retrieved from Internet connectivity settings.</span></span>

 

 




