---
description: Компоненты определяются и создаются модулями записи в своем документе метаданных модуля записи в ответ на событие Identify в начале операции резервного копирования (см. раздел Обзор инициализации резервного копирования) при заполнении документа метаданных модуля записи.
ms.assetid: 5e1c3f9b-ca83-4e70-963b-0a237c6f4b0d
title: Определение компонентов по модулям записи
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa5383e9bc87620f23bb2a3ab067c1913a323782
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103913380"
---
# <a name="definition-of-components-by-writers"></a><span data-ttu-id="60dd7-103">Определение компонентов по модулям записи</span><span class="sxs-lookup"><span data-stu-id="60dd7-103">Definition of Components by Writers</span></span>

<span data-ttu-id="60dd7-104">Компоненты определяются и создаются модулями записи в своем документе метаданных модуля записи в ответ на [*событие Identify*](vssgloss-i.md) в начале операции резервного копирования (см. раздел [Обзор инициализации резервного копирования](overview-of-backup-initialization.md)) при заполнении документа метаданных модуля записи.</span><span class="sxs-lookup"><span data-stu-id="60dd7-104">Components are defined by and instantiated by writers in their Writer Metadata Document in response to an [*Identify event*](vssgloss-i.md) at the start of a backup operation (see [Overview of Backup Initialization](overview-of-backup-initialization.md)) when the Writer Metadata Document is populated.</span></span>

<span data-ttu-id="60dd7-105">При создании компонента в документе метаданных модуля записи с помощью [**ивсскреатевритерметадата**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata) и [**Ивсскреатевритерметадата:: AddComponent**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addcomponent)модуль записи должен указывать:</span><span class="sxs-lookup"><span data-stu-id="60dd7-105">When creating a component in its Writer Metadata Document, using [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata) and [**IVssCreateWriterMetadata::AddComponent**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addcomponent), a writer must specify:</span></span>

-   <span data-ttu-id="60dd7-106">Возможность [ *выбора компонента для резервного копирования*](vssgloss-s.md)</span><span class="sxs-lookup"><span data-stu-id="60dd7-106">Whether the component is [*selectable for backup*](vssgloss-s.md)</span></span>
-   <span data-ttu-id="60dd7-107">Тип компонента</span><span class="sxs-lookup"><span data-stu-id="60dd7-107">A component type</span></span>
-   <span data-ttu-id="60dd7-108">Имя компонента (которое должно быть уникальным не только в пределах данного [*экземпляра модуля записи*](vssgloss-w.md) , но и во всех экземплярах модуля записи)</span><span class="sxs-lookup"><span data-stu-id="60dd7-108">A component name (which must be unique not only within a given [*writer instance*](vssgloss-w.md) but across all writer instances)</span></span>
-   <span data-ttu-id="60dd7-109">Связаны ли с компонентом связанные с записью метаданные, относящиеся к записи</span><span class="sxs-lookup"><span data-stu-id="60dd7-109">Whether the component has any writer-specific metadata associated with it</span></span>
-   <span data-ttu-id="60dd7-110">Требуется ли для модуля записи уведомление после успешной архивации</span><span class="sxs-lookup"><span data-stu-id="60dd7-110">Whether the writer requires notification following a successful backup</span></span>

<span data-ttu-id="60dd7-111">Модули записи могут дополнительно указывать:</span><span class="sxs-lookup"><span data-stu-id="60dd7-111">Writers can optionally specify:</span></span>

-   <span data-ttu-id="60dd7-112">[*Логический путь*](vssgloss-l.md) компонента (который должен быть уникальным не только в пределах данного экземпляра модуля записи, но и во всех экземплярах модуля записи)</span><span class="sxs-lookup"><span data-stu-id="60dd7-112">A component's [*logical path*](vssgloss-l.md) (which must be unique not only within a given writer instance but across all writer instances)</span></span>
-   <span data-ttu-id="60dd7-113">Описание компонента (или заголовок)</span><span class="sxs-lookup"><span data-stu-id="60dd7-113">A component description (or caption)</span></span>
-   <span data-ttu-id="60dd7-114">Значок, используемый с GUI для обозначения компонента</span><span class="sxs-lookup"><span data-stu-id="60dd7-114">An icon to be used with GUIs to indicate the component</span></span>

<span data-ttu-id="60dd7-115">Компонент не обязательно должен содержать какие-либо файлы.</span><span class="sxs-lookup"><span data-stu-id="60dd7-115">It is not necessary for a component to actually contain any files.</span></span> <span data-ttu-id="60dd7-116">Такой вид пустого или фиктивного компонента может быть полезен при Организации компонентов.</span><span class="sxs-lookup"><span data-stu-id="60dd7-116">This sort of empty or "dummy" component can be useful in organizing components.</span></span> <span data-ttu-id="60dd7-117">Такой компонент можно использовать для определения [*набора компонентов*](vssgloss-c.md) и компонента записи (см. раздел [логическое расположение компонентов](logical-pathing-of-components.md)).</span><span class="sxs-lookup"><span data-stu-id="60dd7-117">Such a component can be used to define a [*component set*](vssgloss-c.md) and a writer's component (see [Logical Pathing of Components](logical-pathing-of-components.md)).</span></span>

## <a name="setting-up-component-organization"></a><span data-ttu-id="60dd7-118">Настройка организации компонентов</span><span class="sxs-lookup"><span data-stu-id="60dd7-118">Setting Up Component Organization</span></span>

<span data-ttu-id="60dd7-119">Настройка [*выбора*](vssgloss-s.md) компонента (его [*Выбор для резервного копирования*](vssgloss-s.md)и возможность [*выбора для восстановления*](/windows)) и его [*логических путей*](vssgloss-l.md) позволяет модулю записи затребовать или сделать необязательным включение определенных компонентов в операции резервного копирования или восстановления, а также сгруппировать компоненты в [*Наборы компонентов*](vssgloss-c.md) с одним выбираемым компонентом, действующим в качестве точки входа для всей группы.</span><span class="sxs-lookup"><span data-stu-id="60dd7-119">Setting a component's [*selectability*](vssgloss-s.md) (its [*selectability for backup*](vssgloss-s.md), and its [*selectability for restore*](/windows)) and its [*logical paths*](vssgloss-l.md) allows a writer to mandate or make optional the inclusion of certain components in a backup or restore operation, and to group components into [*component sets*](vssgloss-c.md) with one selectable component acting as an entry point to the whole group.</span></span>

<span data-ttu-id="60dd7-120">Членство в этих группах определяет, какие компоненты будут использоваться во время операций резервного копирования и восстановления.</span><span class="sxs-lookup"><span data-stu-id="60dd7-120">Membership in these groupings determines which components will be used during backup and restore operations.</span></span> <span data-ttu-id="60dd7-121">Использование "выбираемого" значения для получения резервной копии для операции резервного копирования и выбора для восстановления для операции восстановления позволяет разработчикам понять следующее:</span><span class="sxs-lookup"><span data-stu-id="60dd7-121">Using "selectable" to mean selectable for back for backup operation, and selectable for restore for restore operation, developers should understand that:</span></span>

-   <span data-ttu-id="60dd7-122">Если выполняется резервное копирование любых компонентов, управляемых данным модулем записи, инициатор запроса должен [*явным образом включить*](vssgloss-e.md) все невыбираемые [*компоненты*](vssgloss-c.md) без выбора предков в свой [*логический путь*](vssgloss-l.md) к документу компонентов резервного копирования, а также выполнить резервное копирование и восстановление этих компонентов в виде группы.</span><span class="sxs-lookup"><span data-stu-id="60dd7-122">If any components managed by a given writer are backed up, then a requester must [*explicitly include*](vssgloss-e.md) all nonselectable [*components*](vssgloss-c.md) without selectable ancestors in their [*logical path*](vssgloss-l.md) to the Backup Components Document and back up and restore those components as a group.</span></span>
-   <span data-ttu-id="60dd7-123">Инициатор запроса имеет возможность явно добавить выбираемые компоненты в документ резервных копий во время операций резервного копирования и восстановления. После добавления компонента необходимо выполнить его резервное копирование или восстановление.</span><span class="sxs-lookup"><span data-stu-id="60dd7-123">A requester has the option of explicitly adding selectable components to the Backup Components Document during backup and restore operations; once added, the component must be backed up or restored.</span></span>
-   <span data-ttu-id="60dd7-124">Если компонент является выбираемым, компонент и все его [*подкомпоненты*](vssgloss-s.md) (как определено логическими путями) формируют набор компонентов, который может рассматриваться как единый блок, который может участвовать в операциях резервного копирования и восстановления.</span><span class="sxs-lookup"><span data-stu-id="60dd7-124">If a component is selectable, the component and all of its [*subcomponents*](vssgloss-s.md) (as defined by logical paths) form a component set, which can be treated as a single unit that may optionally participate in backup and restore operations.</span></span>
-   <span data-ttu-id="60dd7-125">Инициатор запроса никогда не добавляет невыбираемый компонент с выбираемыми для выбора предками, подкомпонентом в наборе компонентов в документ компонентов резервного копирования во время операций резервного копирования и восстановления.</span><span class="sxs-lookup"><span data-stu-id="60dd7-125">A requester never explicitly adds a nonselectable component with selectable ancestors, a subcomponent in a component set, to its Backup Components Document during backup and restore operations.</span></span> <span data-ttu-id="60dd7-126">Эти компоненты должны быть [*неявно включены*](/windows) в случае явного добавления их выбираемого предка. в этом случае необходимо выполнить резервное копирование или восстановление (см. раздел [Использование компонентов инициатором запроса](use-of-components-by-the-requestor.md)).</span><span class="sxs-lookup"><span data-stu-id="60dd7-126">These components must be [*implicitly included*](/windows) if their selectable ancestor is explicitly added, in which case they must be backed up or restored (see [Use of Components by the Requester](use-of-components-by-the-requestor.md)).</span></span>
-   <span data-ttu-id="60dd7-127">Выбираемый компонент с выбираемым предком по-прежнему является [*подкомпонентом*](vssgloss-s.md) (членом набора компонентов) и может быть неявно включен, если его выбираемый предок явно включен в операцию.</span><span class="sxs-lookup"><span data-stu-id="60dd7-127">A selectable component with a selectable ancestor is still a [*subcomponent*](vssgloss-s.md) (a member of a component set) and may be implicitly included if its selectable ancestor is explicitly included in the operation.</span></span> <span data-ttu-id="60dd7-128">В этом случае сведения о его данных не добавляются в документ компонентов резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="60dd7-128">In this case, its information is not added to the Backup Components Document.</span></span> <span data-ttu-id="60dd7-129">Если его выбираемый предок не включен в операцию, компонент можно явно выбрать для включения в операцию. в этом случае сведения о ней включаются в документ компонентов резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="60dd7-129">If its selectable ancestor is not included in the operation, the component can be explicitly selected for inclusion in the operation, in which case its information is included in the Backup Components Document.</span></span>
-   <span data-ttu-id="60dd7-130">Вложенный компонент, неявно включенный в резервную копию, может быть явно включен в операцию восстановления независимо от состояния любого выбранного предка, если он можно выбрать для восстановления.</span><span class="sxs-lookup"><span data-stu-id="60dd7-130">A subcomponent implicitly included in a backup can be explicitly included in a restore operation, regardless of the status of any selectable ancestor, if it is selectable for restore.</span></span> <span data-ttu-id="60dd7-131">Все подкомпоненты, которые можно выбрать для восстановления, включенные во время операции восстановления, должны содержать сведения, добавленные в документ компонентов резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="60dd7-131">Any selectable for restore subcomponent included during a restore operation must have its information added to the Backup Components Document.</span></span>
-   <span data-ttu-id="60dd7-132">Модуль записи, который не содержал компонент, явно добавленный в документ компонентов резервного копирования до создания [*PrepareForBackup*](vssgloss-p.md) и событий предварительного [*восстановления*](vssgloss-p.md) , не будет получать дополнительные события VSS.</span><span class="sxs-lookup"><span data-stu-id="60dd7-132">A writer that has had no component explicitly added to the Backup Components Document prior to the generation of [*PrepareForBackup*](vssgloss-p.md) and [*PreRestore*](vssgloss-p.md) events will not receive any further VSS events.</span></span>

<span data-ttu-id="60dd7-133">Дополнительные сведения см. в разделе [Работа с выборкой и логическими путями](working-with-selectability-and-logical-paths.md).</span><span class="sxs-lookup"><span data-stu-id="60dd7-133">For more information, see [Working with Selectability and Logical Paths](working-with-selectability-and-logical-paths.md).</span></span>

## <a name="adding-files-to-a-component"></a><span data-ttu-id="60dd7-134">Добавление файлов в компонент</span><span class="sxs-lookup"><span data-stu-id="60dd7-134">Adding Files to a Component</span></span>

<span data-ttu-id="60dd7-135">Компонент содержит сведения о файле в виде [*набора файлов*](vssgloss-f.md) , который содержит:</span><span class="sxs-lookup"><span data-stu-id="60dd7-135">A component contains file information in the form of a [*file set*](vssgloss-f.md) that contains:</span></span>

-   <span data-ttu-id="60dd7-136">Корневой каталог файлов в компоненте.</span><span class="sxs-lookup"><span data-stu-id="60dd7-136">A root directory of the files in the component.</span></span>
-   <span data-ttu-id="60dd7-137">Спецификация файла для файлов в компоненте.</span><span class="sxs-lookup"><span data-stu-id="60dd7-137">A file specification for the files in the component.</span></span>
-   <span data-ttu-id="60dd7-138">Флаг, указывающий, является ли спецификация компонента рекурсивной.</span><span class="sxs-lookup"><span data-stu-id="60dd7-138">A flag that indicates whether the component's specification is recursive.</span></span>

<span data-ttu-id="60dd7-139">В зависимости от типа компонента, который может быть базой данных или файловой группой, и (в случае компонентов базы данных), следует ли загружать файлы данных или журналов, модуль записи вызывает [**ивсскреатевритерметадата:: аддфилестофилеграуп**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup), [**Ивсскреатевритерметадата:: адддатабасефилес**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles)или [**IVssCreateWriterMetadata:: AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) для добавления набора файлов.</span><span class="sxs-lookup"><span data-stu-id="60dd7-139">Depending on component type, which can be a database or a file group, and (in the case of database components) whether the files to be loaded are data or log files, a writer calls [**IVssCreateWriterMetadata::AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup), [**IVssCreateWriterMetadata::AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), or [**IVssCreateWriterMetadata::AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) to add a file set.</span></span>

<span data-ttu-id="60dd7-140">При использовании этих функций следует указать файлы, которые будут добавлены в набор файлов следующим образом:</span><span class="sxs-lookup"><span data-stu-id="60dd7-140">When using these functions, you should specify the files to be added to the file set as follows:</span></span>

-   <span data-ttu-id="60dd7-141">*всзпас*: это путь к каталогу, содержащему файлы, которые необходимо добавить в набор файлов.</span><span class="sxs-lookup"><span data-stu-id="60dd7-141">*wszPath*: This is the path to the directory that contains the files to be added to the file set.</span></span> <span data-ttu-id="60dd7-142">Если параметр *брекурсиве* имеет значение **true**, параметр *всзпас* указывает иерархию каталогов для рекурсивного обхода, и все каталоги должны быть созданы заново, включая пустые каталоги.</span><span class="sxs-lookup"><span data-stu-id="60dd7-142">If the *bRecursive* parameter is set to **true**, the *wszPath* parameter specifies a hierarchy of directories to be traversed recursively, and all directories should be recreated, including empty directories.</span></span>
-   <span data-ttu-id="60dd7-143">*всзфилеспек*: Эта строка указывает файлы в каждом каталоге, которые будут добавлены в набор файлов.</span><span class="sxs-lookup"><span data-stu-id="60dd7-143">*wszFilespec*: This string specifies the files in each directory to be added to the file set.</span></span>

<span data-ttu-id="60dd7-144">Например, предположим, что существует следующая структура каталогов:</span><span class="sxs-lookup"><span data-stu-id="60dd7-144">For example, suppose the following directory structure exists:</span></span>

<dl> <span data-ttu-id="60dd7-145">C: \\ Directory1 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="60dd7-145">C:\\Directory1\\File1.txt</span></span>  
<span data-ttu-id="60dd7-146">C: \\ Directory1 \\File2.txt</span><span class="sxs-lookup"><span data-stu-id="60dd7-146">C:\\Directory1\\File2.txt</span></span>  
<span data-ttu-id="60dd7-147">C: \\ Directory1 \\ Directory2 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="60dd7-147">C:\\Directory1\\Directory2\\File1.txt</span></span>  
<span data-ttu-id="60dd7-148">C: \\ Directory1 \\ Directory2 \\File2.txt</span><span class="sxs-lookup"><span data-stu-id="60dd7-148">C:\\Directory1\\Directory2\\File2.txt</span></span>  
<span data-ttu-id="60dd7-149">C: \\ Directory1 \\ Directory3</span><span class="sxs-lookup"><span data-stu-id="60dd7-149">C:\\Directory1\\Directory3</span></span>\\  
</dl>

<span data-ttu-id="60dd7-150">Если в модуле записи указано "C: \\ Directory1" для *всзпас*, "file1. \* " для *всзфилеспек* и **true** для *брекурсиве*, то запросивший должен включать следующие файлы:</span><span class="sxs-lookup"><span data-stu-id="60dd7-150">If the writer specifies "C:\\Directory1" for *wszPath*, "File1.\*" for *wszFilespec*, and **true** for *bRecursive*, the requester should include these files:</span></span>

<dl> <span data-ttu-id="60dd7-151">C: \\ Directory1 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="60dd7-151">C:\\Directory1\\File1.txt</span></span>  
<span data-ttu-id="60dd7-152">C: \\ Directory1 \\ Directory2 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="60dd7-152">C:\\Directory1\\Directory2\\File1.txt</span></span>  
</dl>

<span data-ttu-id="60dd7-153">Если вместо этого в модуле записи указывается "C: \\ Directory1" для *всзпас*, " \* " для *Всзфилеспек*, а **true** для *брекурсиве*, запросивший должен включать следующие файлы:</span><span class="sxs-lookup"><span data-stu-id="60dd7-153">If the writer instead specifies "C:\\Directory1" for *wszPath*, "\*" for *wszFilespec*, and **true** for *bRecursive*, the requester should include these files:</span></span>

<dl> <span data-ttu-id="60dd7-154">C: \\ Directory1 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="60dd7-154">C:\\Directory1\\File1.txt</span></span>  
<span data-ttu-id="60dd7-155">C: \\ Directory1 \\File2.txt</span><span class="sxs-lookup"><span data-stu-id="60dd7-155">C:\\Directory1\\File2.txt</span></span>  
<span data-ttu-id="60dd7-156">C: \\ Directory1 \\ Directory2 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="60dd7-156">C:\\Directory1\\Directory2\\File1.txt</span></span>  
<span data-ttu-id="60dd7-157">C: \\ Directory1 \\ Directory2 \\File2.txt</span><span class="sxs-lookup"><span data-stu-id="60dd7-157">C:\\Directory1\\Directory2\\File2.txt</span></span>  
</dl>

<span data-ttu-id="60dd7-158">Если в модуле записи указано "C: \\ Directory1" для *всзпас*, \* "" для *всзфилеспек* и **false** для *брекурсиве*, то запросивший должен включать следующие файлы:</span><span class="sxs-lookup"><span data-stu-id="60dd7-158">If the writer specifies "C:\\Directory1" for *wszPath*, "\*" for *wszFilespec*, and **false** for *bRecursive*, the requester should include these files:</span></span>

<dl> <span data-ttu-id="60dd7-159">C: \\ Directory1 \\File1.txt</span><span class="sxs-lookup"><span data-stu-id="60dd7-159">C:\\Directory1\\File1.txt</span></span>  
<span data-ttu-id="60dd7-160">C: \\ Directory1 \\File2.txt</span><span class="sxs-lookup"><span data-stu-id="60dd7-160">C:\\Directory1\\File2.txt</span></span>  
</dl>

<span data-ttu-id="60dd7-161">Во всех приведенных выше примерах каждый раз, когда модуль записи указывает **значение true** для *брекурсиве*, следует создать пустой каталог C: \\ Directory1 \\ Directory3 \\ .</span><span class="sxs-lookup"><span data-stu-id="60dd7-161">In all of the preceding examples, whenever the writer specifies **true** for *bRecursive*, the empty directory C:\\Directory1\\Directory3\\ should be recreated.</span></span>

<span data-ttu-id="60dd7-162">Для набора файлов, добавленного в компонент файловой группы, в случаях, когда файлы, находящиеся на диске, не находятся в том виде, в котором модуль записи рассматривает соответствующее расположение или местоположение по умолчанию, модуль записи имеет возможность добавить альтернативный путь.</span><span class="sxs-lookup"><span data-stu-id="60dd7-162">For a file set added to a file group component, in cases where files currently on disk are not in what the writer would consider the appropriate or default location, a writer has the option of adding an alternate path.</span></span> <span data-ttu-id="60dd7-163">В этих случаях определение пути к набору файлов содержит обычное расположение файлов и место для восстановления файлов, а альтернативный путь содержит текущее расположение файлов для резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="60dd7-163">In these cases, the file set's definition of the path contains the normal location of the files and to where files should be restored, while the alternate path contains the current location of files to be backed up.</span></span>

<span data-ttu-id="60dd7-164">Все файлы в наборе файлов должны существовать во время резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="60dd7-164">All files in the file set must exist at the time of the backup.</span></span> <span data-ttu-id="60dd7-165">Запрашивающие стороны должны предположить, что все файлы, перечисленные в наборе файлов, необходимы для резервного копирования и при отсутствии каких бы то ни было файлов не будут создавать резервные копии.</span><span class="sxs-lookup"><span data-stu-id="60dd7-165">Requesters must assume that all files listed in the file set are required for the backup and will fail the backup if any files are missing.</span></span> <span data-ttu-id="60dd7-166">Обратите внимание, что если \* для параметра *всзфилеспек* задано значение, оно может сопоставлять ноль или более файлов.</span><span class="sxs-lookup"><span data-stu-id="60dd7-166">Note that when "\*" is specified for the *wszFilespec* parameter, it can match zero or more files.</span></span>

<span data-ttu-id="60dd7-167">Обратите внимание, что такие атрибуты документа метаданных модуля записи, как сопоставления альтернативного расположения, явно включенные и исключенные файлы, и методы восстановления задаются на уровне записи, а не на уровне компонента.</span><span class="sxs-lookup"><span data-stu-id="60dd7-167">Note that such Writer Metadata Document attributes as alternate location mappings, explicitly included and excluded files, and restore methods are set at the writer level, not the component level.</span></span> <span data-ttu-id="60dd7-168">(Дополнительные сведения см. [в разделе Работа с документом метаданных модуля записи](working-with-the-writer-metadata-document.md).)</span><span class="sxs-lookup"><span data-stu-id="60dd7-168">(For more information, see [Working with the Writer Metadata Document](working-with-the-writer-metadata-document.md).)</span></span>

## <a name="component-definition-for-backup-and-restore-operations"></a><span data-ttu-id="60dd7-169">Определение компонента для операций резервного копирования и восстановления</span><span class="sxs-lookup"><span data-stu-id="60dd7-169">Component Definition for Backup and Restore Operations</span></span>

<span data-ttu-id="60dd7-170">Операции восстановления и резервного копирования обязательно создают [*событие Identify*](vssgloss-i.md), и для резервного копирования и восстановления они будут обрабатываться одним и тем же методом [**квссвритер:: onidentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) .</span><span class="sxs-lookup"><span data-stu-id="60dd7-170">Both restore and backup operations necessarily generate an [*Identify event*](vssgloss-i.md), and for both backups and restores it will be handled by the same [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) method.</span></span>

<span data-ttu-id="60dd7-171">Во время операций резервного копирования запрашивающие стороны используют сведения, возвращенные методами [**квссвритер:: onidentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) средства записи, чтобы определить, какие модули записи имеются в системе, а затем определить, какие из них следует архивировать.</span><span class="sxs-lookup"><span data-stu-id="60dd7-171">During backup operations, requesters use the information returned by a writer's [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) methods to determine which writers are present on the system and then to determine which of their files to back up.</span></span>

<span data-ttu-id="60dd7-172">Во время операций восстановления информация, возвращаемая событием [**квссвритер:: onidentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) средства записи, используется только для определения удостоверения и состояния модулей записи, имеющихся в системе в настоящее время. сведения о спецификации файла, созданные во время восстановления, не используются.</span><span class="sxs-lookup"><span data-stu-id="60dd7-172">During restore operations, the information returned by a writer's [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) event is used only to establish the identity and status of writers currently present on the system; the file specification information generated during a restore is not used.</span></span> <span data-ttu-id="60dd7-173">Вместо этого для получения этих данных используются документы метаданных модуля записи, хранящиеся во время резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="60dd7-173">Instead, Writer Metadata Documents stored at backup time are used to obtain this data.</span></span>

<span data-ttu-id="60dd7-174">После создания в ходе операции резервного копирования сведения о компоненте модуля записи, а также остальные сведения о модуле записи сохраняются для получения поддержки операций восстановления.</span><span class="sxs-lookup"><span data-stu-id="60dd7-174">Once generated during a backup operation, the writer component information, along with the rest of the writer information, is saved to be retrieved to support restore operations.</span></span> <span data-ttu-id="60dd7-175">Обычно для хранения этих сведений отвечает инициатор запроса.</span><span class="sxs-lookup"><span data-stu-id="60dd7-175">It is typically the responsibility of the requester to store this information.</span></span>

 

 
