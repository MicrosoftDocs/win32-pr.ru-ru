---
description: Участие в программе записи в резервную копию VSS предназначено для того, чтобы позволить приложениям управлять тем, что и как использовать их данные восстановления.
ms.assetid: 076b2e6f-c2ca-4129-8827-1b18a655d634
title: Восстановление без участия в записи
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f89fd5ea855d2d91701d351e860bf966148be587
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104156110"
---
# <a name="restores-without-writer-participation"></a><span data-ttu-id="92aee-103">Восстановление без участия в записи</span><span class="sxs-lookup"><span data-stu-id="92aee-103">Restores without Writer Participation</span></span>

<span data-ttu-id="92aee-104">Участие в программе записи в резервную копию VSS предназначено для того, чтобы позволить приложениям управлять тем, что и как использовать их данные восстановления.</span><span class="sxs-lookup"><span data-stu-id="92aee-104">Writer participation in a VSS backup is designed to allow applications to control what and how their restore data is to be used.</span></span>

<span data-ttu-id="92aee-105">Как правило, если модуль записи доступен в системе, не рекомендуется восстанавливать данные в исходное расположение без участия в записи.</span><span class="sxs-lookup"><span data-stu-id="92aee-105">In general, if a writer is available on a system, it is never advisable to restore data to its original location without writer participation.</span></span> <span data-ttu-id="92aee-106">Такие восстановления, скорее всего, приведут к блокированию файлов назначения и выполнят значительный риск повреждения данных.</span><span class="sxs-lookup"><span data-stu-id="92aee-106">Such a restore would likely encounter locked destination files and runs a significant risk of corrupting data.</span></span>

<span data-ttu-id="92aee-107">Однако существуют причины, по которым приложению резервного копирования может потребоваться восстановить резервную копию VSS без участия в записи.</span><span class="sxs-lookup"><span data-stu-id="92aee-107">However, there are reasons why a backup application might want or need to restore a VSS backup without writer participation:</span></span>

-   <span data-ttu-id="92aee-108">Управление данными осуществляется с помощью приложений, не поддерживающих VSS.</span><span class="sxs-lookup"><span data-stu-id="92aee-108">Data is managed by VSS-unaware applications.</span></span> <span data-ttu-id="92aee-109">Почти каждая система будет иметь некоторые приложения — текстовые редакторы, средства чтения почты, текстовые процессоры и т. д., которые не знаются с VSS.</span><span class="sxs-lookup"><span data-stu-id="92aee-109">Almost every system will have some applications—text editors, mail readers, word processors, and so forth—that are VSS unaware.</span></span> <span data-ttu-id="92aee-110">Эти данные нельзя восстановить с помощью участия в модуле записи.</span><span class="sxs-lookup"><span data-stu-id="92aee-110">This data cannot be restored using writer participation.</span></span>

    <span data-ttu-id="92aee-111">Как правило, этот тип данных не является критически важным для системы или службы и не может быть достаточно проблематичным, или по крайней мере не больше проблем, чем при обычном восстановлении.</span><span class="sxs-lookup"><span data-stu-id="92aee-111">Generally, this type of data is not system- or service-critical, and restoring it should not be problematic, or at least no more problematic than during a conventional restore.</span></span>

    <span data-ttu-id="92aee-112">Как и при подготовке к обычному восстановлению, если это возможно, операторы Restore должны попытаться приостановить или завершить такие приложения перед запуском восстановления VSS.</span><span class="sxs-lookup"><span data-stu-id="92aee-112">As with preparations for conventional restores, if possible, restore operators should attempt to suspend or terminate such applications prior to starting a VSS restore.</span></span>

-   <span data-ttu-id="92aee-113">Отсутствуют модули записи VSS.</span><span class="sxs-lookup"><span data-stu-id="92aee-113">Missing VSS writers.</span></span> <span data-ttu-id="92aee-114">Такая ситуация может быть довольно распространенной при восстановлении состояния поврежденной системы.</span><span class="sxs-lookup"><span data-stu-id="92aee-114">This situation may be fairly common when restoring the state of a damaged system.</span></span> <span data-ttu-id="92aee-115">Операция резервного копирования должна определить, желательно ли восстановление файлов для отсутствующих модулей записи.</span><span class="sxs-lookup"><span data-stu-id="92aee-115">A backup operation must determine whether it is desirable to restore files for missing writers.</span></span> <span data-ttu-id="92aee-116">Если восстановление нежелательно, файлы можно восстановить так же, как при обычной архивации.</span><span class="sxs-lookup"><span data-stu-id="92aee-116">If restoration is desirable, the files can be restored just as a conventional backup would restore them.</span></span>
-   <span data-ttu-id="92aee-117">Частное восстановление данных модуля записи.</span><span class="sxs-lookup"><span data-stu-id="92aee-117">A private restore of a writer's data.</span></span> <span data-ttu-id="92aee-118">Инициатор запроса может выбрать восстановление данных выполняющегося модуля записи в какое-либо частное расположение без уведомления модуля записи.</span><span class="sxs-lookup"><span data-stu-id="92aee-118">A requester may choose to restore the data of a running writer to some private location without notifying the writer.</span></span> <span data-ttu-id="92aee-119">Примером может быть восстановление данных модуля записи для поддержки сравнения в автономном режиме.</span><span class="sxs-lookup"><span data-stu-id="92aee-119">An example of this might be restoration of the writer's data to support offline comparison.</span></span> <span data-ttu-id="92aee-120">В таком случае инициатору запроса не нужно использовать [*новое целевое расположение*](vssgloss-n.md) во время восстановления, так как оно не хочет, чтобы модуль записи мог получить доступ к данным.</span><span class="sxs-lookup"><span data-stu-id="92aee-120">In this sort of situation, a requester would not want to use the [*new target location*](vssgloss-n.md) while doing the restore, because it does not want the writer to access the data.</span></span>
-   <span data-ttu-id="92aee-121">Модуль записи не хочет участвовать во время восстановления.</span><span class="sxs-lookup"><span data-stu-id="92aee-121">A writer does not want to be involved during restore.</span></span> <span data-ttu-id="92aee-122">Модуль записи указывает на это путем передачи в VSS \_ WRE \_ никогда для параметра *вритерресторе* [**ивсскреатевритерметадата:: сетресторемесод**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod).</span><span class="sxs-lookup"><span data-stu-id="92aee-122">A writer indicates this by passing in VSS\_WRE\_NEVER for the *writerRestore* parameter of [**IVssCreateWriterMetadata::SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod).</span></span>
-   <span data-ttu-id="92aee-123">Для модуля записи требуется пользовательский метод восстановления.</span><span class="sxs-lookup"><span data-stu-id="92aee-123">A writer requires a custom restore method.</span></span> <span data-ttu-id="92aee-124">Модуль записи указывает, что для него требуется пользовательское восстановление, передав \_ параметру рме в VSS значение \_ Custom для параметра *method* [**ивсскреатевритерметадата:: сетресторемесод**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod).</span><span class="sxs-lookup"><span data-stu-id="92aee-124">A writer indicates that it requires a custom restore by passing in VSS\_RME\_CUSTOM for the *method* parameter of [**IVssCreateWriterMetadata::SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod).</span></span> <span data-ttu-id="92aee-125">В этом случае этот модуль записи не должен участвовать в процессе восстановления, если в документации по пользовательскому восстановлению для этого модуля записи не указано иное.</span><span class="sxs-lookup"><span data-stu-id="92aee-125">In this case, this writer should not be involved in the restore process unless the custom-restore documentation for that writer indicates otherwise.</span></span>

<span data-ttu-id="92aee-126">Инициатор запроса включает модуль записи в процесс восстановления, указывая один из компонентов модуля записи в вызове [**ивссбаккупкомпонентс:: сетселектедфорресторе**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setselectedforrestore).</span><span class="sxs-lookup"><span data-stu-id="92aee-126">A requester involves a writer in the restore process by specifying one of that writer's components in a call to [**IVssBackupComponents::SetSelectedForRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setselectedforrestore).</span></span> <span data-ttu-id="92aee-127">Данные модуля записи можно восстановить без использования модуля записи, просто не указывая какие-либо компоненты модуля записи в вызове **ивссбаккупкомпонентс:: сетселектедфорресторе**.</span><span class="sxs-lookup"><span data-stu-id="92aee-127">A writer's data can be restored without involving the writer by simply not specifying any of that writer's components in a call to **IVssBackupComponents::SetSelectedForRestore**.</span></span> <span data-ttu-id="92aee-128">Если модуль записи не ожидает каких-либо событий восстановления, то включение этого модуля записи в процесс восстановления может привести к тому, что в этом модуле сообщается о ложных ошибках.</span><span class="sxs-lookup"><span data-stu-id="92aee-128">If a writer does not expect any restore events, involving that writer in the restore process can cause spurious errors to be reported for that writer.</span></span>

 

 



