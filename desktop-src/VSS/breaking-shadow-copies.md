---
description: 'Инициатор запроса может разбивать набор теневых копий с помощью метода Ивссбаккупкомпонентс:: Бреакснапшотсет или IVssBackupComponentsEx2:: Бреакснапшотсетекс.'
ms.assetid: fb796b2f-b6fb-48ee-8d42-36f88cb165aa
title: Критические теневые копии
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7dac84c9f45d16d8a88f9d61ad6e4c277dfad3ae
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105693697"
---
# <a name="breaking-shadow-copies"></a><span data-ttu-id="117f3-103">Критические теневые копии</span><span class="sxs-lookup"><span data-stu-id="117f3-103">Breaking Shadow Copies</span></span>

<span data-ttu-id="117f3-104">Инициатор запроса может разбивать набор теневых копий с помощью метода [**ивссбаккупкомпонентс:: бреакснапшотсет**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-breaksnapshotset) или [**IVssBackupComponentsEx2:: бреакснапшотсетекс**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-breaksnapshotsetex) .</span><span class="sxs-lookup"><span data-stu-id="117f3-104">A requester can break a shadow copy set by using the [**IVssBackupComponents::BreakSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-breaksnapshotset) or [**IVssBackupComponentsEx2::BreakSnapshotSetEx**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-breaksnapshotsetex) method.</span></span>

<span data-ttu-id="117f3-105">Поврежденная теневая копия — это том, содержащий теневую копию, которая больше не управляется службой VSS.</span><span class="sxs-lookup"><span data-stu-id="117f3-105">A broken shadow copy is a volume that contains a shadow copy that is no longer managed by VSS.</span></span> <span data-ttu-id="117f3-106">Критическое назначение теневой копии означает, что [*поставщик*](vssgloss-p.md) теневой копии является [*поставщиком оборудования*](vssgloss-h.md).</span><span class="sxs-lookup"><span data-stu-id="117f3-106">Breaking a shadow copy has meaning only if the shadow copy's [*provider*](vssgloss-p.md) is a [*hardware provider*](vssgloss-h.md).</span></span> <span data-ttu-id="117f3-107">Это связано с тем, что только поставщики оборудования могут реализовать теневую копию в качестве реального тома с жизненным циклом, не зависящим от VSS.</span><span class="sxs-lookup"><span data-stu-id="117f3-107">This is because only hardware providers can implement a shadow copy as an actual volume with a life cycle independent of VSS.</span></span> <span data-ttu-id="117f3-108">Если служба VSS не управляет таким томом, он по-прежнему доступен.</span><span class="sxs-lookup"><span data-stu-id="117f3-108">If VSS does not manage such a volume, it still is available.</span></span>

<span data-ttu-id="117f3-109">Поставщики программного обеспечения поддерживают теневые копии только при работе с операциями VSS.</span><span class="sxs-lookup"><span data-stu-id="117f3-109">Software providers maintain shadow copies only while involved in VSS operations.</span></span> <span data-ttu-id="117f3-110">По этой причине для поставщиков программного обеспечения не имеет смысла прерывать теневую копию.</span><span class="sxs-lookup"><span data-stu-id="117f3-110">For that reason, breaking a shadow copy has no meaning for software providers.</span></span>

<span data-ttu-id="117f3-111">Если теневая копия была под управлением поставщика оборудования, инициатору запроса необходимо импортировать теневую копию перед вызовом [**бреакснапшотсет**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-breaksnapshotset) или [**бреакснапшотсетекс**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-breaksnapshotsetex).</span><span class="sxs-lookup"><span data-stu-id="117f3-111">If the shadow copy was managed by a hardware provider, the requester must import the shadow copy before calling [**BreakSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-breaksnapshotset) or [**BreakSnapshotSetEx**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-breaksnapshotsetex).</span></span> <span data-ttu-id="117f3-112">В случае непереносимого (созданного поставщиком оборудования) теневых копий они импортируются неявно как часть вызова [**ивссбаккупкомпонентс::D оснапшотсет**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) .</span><span class="sxs-lookup"><span data-stu-id="117f3-112">In case of non-transportable (created by a hardware provider) shadow copies, they are imported implicitly as part of the [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) call.</span></span>

<span data-ttu-id="117f3-113">После того как инициатор запроса вызвал [**бреакснапшотсет**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-breaksnapshotset) или [**бреакснапшотсетекс**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-breaksnapshotsetex), набор теневых копий по-прежнему доступен через объекты устройств или другие пути доступа, но больше не является набором теневых копий.</span><span class="sxs-lookup"><span data-stu-id="117f3-113">After the requester has called [**BreakSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-breaksnapshotset) or [**BreakSnapshotSetEx**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-breaksnapshotsetex), the shadow copy set is still accessible via its device objects or other access paths, but it is no longer a shadow copy set.</span></span> <span data-ttu-id="117f3-114">Ее можно управлять как одним или несколькими LUN с помощью COM-интерфейсов службы виртуальных дисков (VDS).</span><span class="sxs-lookup"><span data-stu-id="117f3-114">It can be managed as one or more LUNs by using the Virtual Disk Service (VDS) COM interfaces.</span></span> <span data-ttu-id="117f3-115">С помощью VDS инициатор запроса может преобразовать LUN в чтение и запись, подключить их к буквам дисков, а также маску или снять маску для других компьютеров.</span><span class="sxs-lookup"><span data-stu-id="117f3-115">Using VDS, a requester can convert the LUNs to read/write, mount them with drive letters, or mask/unmask them to other computers.</span></span> <span data-ttu-id="117f3-116">Дополнительные сведения см. в [документации по API службы VDS](../vds/virtual-disk-service-portal.md) .</span><span class="sxs-lookup"><span data-stu-id="117f3-116">See the [VDS API documentation](../vds/virtual-disk-service-portal.md) for more information.</span></span>

 

 
