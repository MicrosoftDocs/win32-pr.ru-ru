---
description: В следующей таблице показана последовательность действий и событий, необходимых для завершения операции резервного копирования. Дополнительные сведения см. в разделе Общие сведения об обработке резервной копии в VSS.
ms.assetid: 12dcb2d1-614b-4c4c-a47c-342f79b20a62
title: Общие сведения о завершении резервного копирования
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4d9268bd8fd4ec51be2ee7a891d4dffb3a5cb1b9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105692898"
---
# <a name="overview-of-backup-termination"></a><span data-ttu-id="ab59a-104">Общие сведения о завершении резервного копирования</span><span class="sxs-lookup"><span data-stu-id="ab59a-104">Overview of Backup Termination</span></span>

<span data-ttu-id="ab59a-105">В следующей таблице показана последовательность действий и событий, необходимых для завершения операции резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="ab59a-105">The following table shows the sequence of actions and events that are required for a backup operation to be terminated.</span></span> <span data-ttu-id="ab59a-106">Дополнительные сведения см. в разделе Общие сведения об [обработке резервной копии в VSS](overview-of-processing-a-backup-under-vss.md).</span><span class="sxs-lookup"><span data-stu-id="ab59a-106">For more information, see [Overview of Processing a Backup Under VSS](overview-of-processing-a-backup-under-vss.md).</span></span>



| <span data-ttu-id="ab59a-107">Действие запросившего</span><span class="sxs-lookup"><span data-stu-id="ab59a-107">Requester action</span></span>                                                                                                                                                                                                              | <span data-ttu-id="ab59a-108">Событие</span><span class="sxs-lookup"><span data-stu-id="ab59a-108">Event</span></span>                                                                 | <span data-ttu-id="ab59a-109">Действие записи</span><span class="sxs-lookup"><span data-stu-id="ab59a-109">Writer action</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="ab59a-110">Инициатор запроса завершает теневую копию, освобождая интерфейс [**ивссбаккупкомпонентс**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) или вызывая [**Ивссбаккупкомпонентс::D елетеснапшотс**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-deletesnapshots).</span><span class="sxs-lookup"><span data-stu-id="ab59a-110">The requester terminates the shadow copy by releasing the [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) interface or by calling [**IVssBackupComponents::DeleteSnapshots**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-deletesnapshots).</span></span> | <span data-ttu-id="ab59a-111">Нет</span><span class="sxs-lookup"><span data-stu-id="ab59a-111">None</span></span>                                                                  | <span data-ttu-id="ab59a-112">Нет</span><span class="sxs-lookup"><span data-stu-id="ab59a-112">None</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="ab59a-113">[**Ивссбаккупкомпонентс**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) освобождается путем вызова [**IUnknown:: Release**](/windows/win32/api/unknwn/nf-unknwn-iunknown-release).</span><span class="sxs-lookup"><span data-stu-id="ab59a-113">[**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) is released by calling [**IUnknown::Release**](/windows/win32/api/unknwn/nf-unknwn-iunknown-release).</span></span>                                                                                                   | [<span data-ttu-id="ab59a-114">*баккупшутдовн*</span><span class="sxs-lookup"><span data-stu-id="ab59a-114">*BackupShutdown*</span></span>](vssgloss-b.md) | <span data-ttu-id="ab59a-115">Модуль записи обрабатывает событие с помощью [**квссвритер:: онбаккупшутдовн**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupshutdown), что позволяет ему очистить любое состояние, связанное с набором теневых копий.</span><span class="sxs-lookup"><span data-stu-id="ab59a-115">The writer handles the event with [**CVssWriter::OnBackupShutdown**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupshutdown), which allows it to clean up any state related to the shadow copy set.</span></span> <span data-ttu-id="ab59a-116">Если операция резервного копирования завершилась сбоем, то есть не создавалось событие [**баккупкомплете**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete) — модуль записи может также выполнять обработку ошибок.</span><span class="sxs-lookup"><span data-stu-id="ab59a-116">If the backup operation failed—that is, it did not generate a [**BackupComplete**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete) event—the writer may also have to perform error handling.</span></span> <span data-ttu-id="ab59a-117">Дополнительные сведения см. в разделе [Обработка событий баккупшутдовн](handling-backupshutdown-events.md) .</span><span class="sxs-lookup"><span data-stu-id="ab59a-117">See [Handling BackupShutdown Events](handling-backupshutdown-events.md) for more information.</span></span> |



 

<span data-ttu-id="ab59a-118">Поскольку интерфейс [**ивссбаккупкомпонентс**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) нельзя использовать повторно, и деструктор интерфейса прерывает теневые копии, обычно нет причины вызвать [**Ивссбаккупкомпонентс::D елетеснапшотс**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-deletesnapshots).</span><span class="sxs-lookup"><span data-stu-id="ab59a-118">Because an [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) interface cannot be reused, and the destructor of the interface terminates the shadow copies, there is typically no reason to call [**IVssBackupComponents::DeleteSnapshots**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-deletesnapshots).</span></span> <span data-ttu-id="ab59a-119">Этот метод предназначен для использования в сочетании с обработкой ошибок и прерыванием резервного копирования (см. раздел [Прерывание операций VSS](aborting-vss-operations.md)).</span><span class="sxs-lookup"><span data-stu-id="ab59a-119">This method is designed to be used in conjunction with error handling and aborting backups (see [Aborting VSS Operations](aborting-vss-operations.md)).</span></span>

 

 
