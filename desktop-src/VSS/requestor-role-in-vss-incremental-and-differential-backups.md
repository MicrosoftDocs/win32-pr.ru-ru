---
description: 'Для поддержки добавочной или разностной операции резервного копирования инициатор запроса должен выполнить следующие действия:'
ms.assetid: a77700e3-8217-460e-bec9-1041d03eec41
title: Роль инициатора запроса в добавочных и разностных резервных копиях VSS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 718a5a0b22d9cc1cfa31404b3a0ac71a3a07731f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105692884"
---
# <a name="requester-role-in-vss-incremental-and-differential-backups"></a><span data-ttu-id="4ee51-103">Роль инициатора запроса в добавочных и разностных резервных копиях VSS</span><span class="sxs-lookup"><span data-stu-id="4ee51-103">Requester Role in VSS Incremental and Differential Backups</span></span>

<span data-ttu-id="4ee51-104">Для поддержки [*добавочной*](vssgloss-i.md) или [*разностной*](vssgloss-d.md) операции резервного копирования инициатор запроса должен выполнить следующие действия:</span><span class="sxs-lookup"><span data-stu-id="4ee51-104">To support an [*incremental*](vssgloss-i.md) or [*differential*](vssgloss-d.md) backup operation, a requester must do the following:</span></span>

1.  <span data-ttu-id="4ee51-105">Определите, какая версия модуля записи доступна (с помощью [**ивссбаккупкомпонентс:: жетвритерметадата**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) , чтобы получить доступ к информации в документах метаданных модуля записи) — в частности, определите, какая схема резервного копирования поддерживается ([**\_ \_ схема резервного копирования VSS**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema)).</span><span class="sxs-lookup"><span data-stu-id="4ee51-105">Determine what degree of writer support is available (using [**IVssBackupComponents::GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) to get access to information in Writer Metadata Documents)—in particular, determine which backup schema are supported ([**VSS\_BACKUP\_SCHEMA**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema)).</span></span>
2.  <span data-ttu-id="4ee51-106">Задайте соответствующее состояние резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="4ee51-106">Set an appropriate backup state.</span></span>
3.  <span data-ttu-id="4ee51-107">Получите спецификации уровня файла и набора файлов для добавочной или разностной резервной копии.</span><span class="sxs-lookup"><span data-stu-id="4ee51-107">Obtain file and file set level specifications for an incremental or differential backup.</span></span>
4.  <span data-ttu-id="4ee51-108">Выполните резервное копирование.</span><span class="sxs-lookup"><span data-stu-id="4ee51-108">Perform the backup.</span></span>

## <a name="requester-determination-of-incremental-and-differential-support-and-configuration"></a><span data-ttu-id="4ee51-109">Определение добавочной и разностной поддержки и конфигурации инициатора запроса</span><span class="sxs-lookup"><span data-stu-id="4ee51-109">Requester Determination of Incremental and Differential Support and Configuration</span></span>

<span data-ttu-id="4ee51-110">Инициатору запроса необходимо получить сведения о поддержке модуля записи до выбора компонентов для включения в добавочную или разностную резервную копию или настройки ее собственного состояния.</span><span class="sxs-lookup"><span data-stu-id="4ee51-110">A requester needs to obtain information about writer support prior to selecting components for inclusion in an incremental or differential backup or setting its own state.</span></span>

<dl> <dt>

<span data-ttu-id="4ee51-111"><span id="Determining_Writer_Support"></span><span id="determining_writer_support"></span><span id="DETERMINING_WRITER_SUPPORT"></span>Определение поддержки модуля записи</span><span class="sxs-lookup"><span data-stu-id="4ee51-111"><span id="Determining_Writer_Support"></span><span id="determining_writer_support"></span><span id="DETERMINING_WRITER_SUPPORT"></span>Determining Writer Support</span></span>
</dt> <dd>

<span data-ttu-id="4ee51-112">Инициатор запроса определяет, поддерживает ли заданный модуль записи добавочные или разностные резервные копии VSS, получая маску схемы резервного копирования с помощью метода [**ивссексаминевритерметадата:: жетбаккупсчема**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema) .</span><span class="sxs-lookup"><span data-stu-id="4ee51-112">A requester determines if a given writer supports VSS incremental or differential backups by retrieving the writer's backup schema mask using the [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema) method.</span></span>

<span data-ttu-id="4ee51-113">Маска схемы резервного копирования модуля записи, поддерживающая добавочные или разностные методы VSS, будет содержать **\_ \_ добавочную** или **\_ \_ разностную резервную копию** VSS или и то, и другое.</span><span class="sxs-lookup"><span data-stu-id="4ee51-113">The backup schema mask of a writer supporting VSS incremental or differential techniques will contain either **VSS\_BS\_INCREMENTAL** or **VSS\_BS\_DIFFERENTIAL**, or both.</span></span> <span data-ttu-id="4ee51-114">Модули записи могут также определять ограничения на их участие с флагом **\_ \_ \_ добавочного \_ разностного копирования в VSS** .</span><span class="sxs-lookup"><span data-stu-id="4ee51-114">Writers may also indicate restrictions on their participation with the **VSS\_BS\_EXCLUSIVE\_INCREMENTAL\_DIFFERENTIAL** flag.</span></span> <span data-ttu-id="4ee51-115">(Дополнительные сведения о схемах резервного копирования см. в разделе [**\_ \_ схема резервного копирования VSS**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema) .)</span><span class="sxs-lookup"><span data-stu-id="4ee51-115">(See [**VSS\_BACKUP\_SCHEMA**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema) for more information on backup schemas).</span></span>

</dd> <dt>

<span data-ttu-id="4ee51-116"><span id="Setting_Requester_Backup_State"></span><span id="setting_requester_backup_state"></span><span id="SETTING_REQUESTER_BACKUP_STATE"></span>Задание состояния резервного копирования запросившего</span><span class="sxs-lookup"><span data-stu-id="4ee51-116"><span id="Setting_Requester_Backup_State"></span><span id="setting_requester_backup_state"></span><span id="SETTING_REQUESTER_BACKUP_STATE"></span>Setting Requester Backup State</span></span>
</dt> <dd>

<span data-ttu-id="4ee51-117">Инициатор запроса указывает на то, что резервная копия является добавочной или разностной резервной копией, настроив тип резервной копии на **\_ BT- \_ добавочную** копию VSS или **VSS \_ BT \_ Differential** с помощью метода [**ивссбаккупкомпонентс:: сетбаккупстате**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate) перед созданием события [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) .</span><span class="sxs-lookup"><span data-stu-id="4ee51-117">A requester indicates that a backup is an incremental or differential backup by setting a backup type to either **VSS\_BT\_INCREMENTAL** or **VSS\_BT\_DIFFERENTIAL** using the [**IVssBackupComponents::SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate) method prior to generating a [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) event.</span></span>

<span data-ttu-id="4ee51-118">Метод [**ивссбаккупкомпонентс:: сетбаккупстате**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate) также используется для указания того, предоставляет ли инициатор запроса [*частичную поддержку файлов*](vssgloss-p.md), которая часто используется для реализации определенных добавочных операций резервного копирования и восстановления.</span><span class="sxs-lookup"><span data-stu-id="4ee51-118">The [**IVssBackupComponents::SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate) method is also used to indicate whether the requester provides [*partial file support*](vssgloss-p.md), which is frequently used to implement certain incremental backup and restore operations.</span></span>

</dd> </dl>

## <a name="getting-writer-specifications-for-incremental-and-differential-backups"></a><span data-ttu-id="4ee51-119">Получение спецификаций модуля записи для добавочных и разностных резервных копий</span><span class="sxs-lookup"><span data-stu-id="4ee51-119">Getting Writer Specifications for Incremental and Differential Backups</span></span>

<span data-ttu-id="4ee51-120">Сведения о спецификации резервного копирования файлов на уровне файлов ([**\_ \_ \_ \_ Тип резервной копии спецификации файлов VSS**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)), содержащиеся в документе метаданных модуля записи каждого модуля записи, доступны для проверки после успешного возврата [**ивссбаккупкомпонентс:: гасервритерметадата**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata).</span><span class="sxs-lookup"><span data-stu-id="4ee51-120">The file-set-level file backup specification information ([**VSS\_FILE\_SPEC\_BACKUP\_TYPE**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)) contained in each writer's Writer Metadata Document is available for examination after the successful return of [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata).</span></span>

<span data-ttu-id="4ee51-121">Тем не менее, модуль записи может добавлять [*файлы различий*](vssgloss-d.md) или запрашивать [*частичную поддержку файлов*](vssgloss-p.md) до успешной обработки события [*моментального снимка*](vssgloss-p.md) .</span><span class="sxs-lookup"><span data-stu-id="4ee51-121">However, a writer can add [*differenced files*](vssgloss-d.md) or ask for [*partial file support*](vssgloss-p.md) until its successful handling of the [*PostSnapshot*](vssgloss-p.md) event.</span></span>

<span data-ttu-id="4ee51-122">Различия в поддержке файлов и частичных файлов могут привести к переопределению типа резервной копии спецификаций файлов, поэтому инициатору может потребоваться отложить полный анализ всех спецификаций модуля записи о добавочных и разностных резервных копиях до успешного возврата [**ивссбаккупкомпонентс::P репарефорбаккуп**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup).</span><span class="sxs-lookup"><span data-stu-id="4ee51-122">Differenced file and partial file support specification can override the file specification backup type, so requesters may want to defer a full analysis of all writer specifications about incremental and differential backups until after the successful return of [**IVssBackupComponents::PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup).</span></span>

<dl> <dt>

<span data-ttu-id="4ee51-123"><span id="Getting_File_Backup_Specification_Information"></span><span id="getting_file_backup_specification_information"></span><span id="GETTING_FILE_BACKUP_SPECIFICATION_INFORMATION"></span>Получение сведений о спецификации резервного копирования файлов</span><span class="sxs-lookup"><span data-stu-id="4ee51-123"><span id="Getting_File_Backup_Specification_Information"></span><span id="getting_file_backup_specification_information"></span><span id="GETTING_FILE_BACKUP_SPECIFICATION_INFORMATION"></span>Getting File Backup Specification Information</span></span>
</dt> <dd>

<span data-ttu-id="4ee51-124">Сведения о спецификации резервного копирования файлов на уровне файлов ([**\_ \_ \_ \_ Тип резервной копии спецификации файлов VSS**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)) содержатся в документе метаданных модуля записи каждого модуля записи и могут быть проверены сразу после успешного возврата [**ивссбаккупкомпонентс:: гасервритерметадата**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata).</span><span class="sxs-lookup"><span data-stu-id="4ee51-124">The file-set-level file backup specification information ([**VSS\_FILE\_SPEC\_BACKUP\_TYPE**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)) is contained in each writer's Writer Metadata Document, and can be examined immediately after the successful return of [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata).</span></span>

<span data-ttu-id="4ee51-125">Запрашивающие стороны должны получить маски спецификаций резервного копирования файлов ([**\_ \_ \_ \_ тип резервного копирования для файлов VSS**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)) для каждого набора файлов каждого компонента модуля записи, включаемого в добавочную или разностную резервную копию независимо от того, был ли компонент [*явно*](vssgloss-e.md) или [*неявно*](vssgloss-i.md) включен.</span><span class="sxs-lookup"><span data-stu-id="4ee51-125">Requesters must obtain file backup specification masks ([**VSS\_FILE\_SPEC\_BACKUP\_TYPE**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)) for every file set of each of a writer's components to be included in the incremental or differential backup, regardless of whether the component was [*explicitly*](vssgloss-e.md) or [*implicitly*](vssgloss-i.md) included.</span></span>

<span data-ttu-id="4ee51-126">Инициатор запроса может определить, какой документ метаданных модуля записи должен быть запрошен с помощью [**ивссбаккупкомпонентс:: жетвритеркомпонентскаунт**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponentscount) и [**Ивссбаккупкомпонентс:: жетвритеркомпонентс**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents).</span><span class="sxs-lookup"><span data-stu-id="4ee51-126">A requester can determine which writers' Writer Metadata Document must be queried by using [**IVssBackupComponents::GetWriterComponentsCount**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponentscount) and [**IVssBackupComponents::GetWriterComponents**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents).</span></span> <span data-ttu-id="4ee51-127">Экземпляр интерфейса [**ивссвритеркомпонентсекст**](/windows/win32/api/vsbackup/nl-vsbackup-ivsswritercomponentsext) , возвращенный **Ивссбаккупкомпонентс:: жетвритеркомпонентс** , предоставляет сведения о записи с помощью метода [**ивссвритеркомпонентсекст:: GetWriterInfo**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswritercomponents-getwriterinfo) .</span><span class="sxs-lookup"><span data-stu-id="4ee51-127">The instance of the [**IVssWriterComponentsExt**](/windows/win32/api/vsbackup/nl-vsbackup-ivsswritercomponentsext) interface returned by **IVssBackupComponents::GetWriterComponents** provides writer information through the [**IVssWriterComponentsExt::GetWriterInfo**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswritercomponents-getwriterinfo) method.</span></span>

<span data-ttu-id="4ee51-128">Инициатор запроса получает сведения о компонентах через экземпляры интерфейса [**ивссвмкомпонент**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) , соответствующие включаемому компоненту, управляемому заданным средством записи, с помощью [**ивссексаминевритерметадата::-Component**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent).</span><span class="sxs-lookup"><span data-stu-id="4ee51-128">The requester obtains component information through instances of the [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) interface corresponding to an included component managed by a given writer by using [**IVssExamineWriterMetadata::GetComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent).</span></span>

<span data-ttu-id="4ee51-129">Сведения о наборах файлов, управляемых компонентом, соответствующим интерфейсу [**ивссвмкомпонент**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) , получаются вызовами методов [**ивссвмкомпонент::-File**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile), [**Ивссвмкомпонент:: Жетдатабасефиле**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabasefile)или [**ивссвмкомпонент:: GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile) (при необходимости).</span><span class="sxs-lookup"><span data-stu-id="4ee51-129">The information about file sets managed by the component corresponding to the [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) interface is obtained by calls to [**IVssWMComponent::GetFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile), [**IVssWMComponent::GetDatabaseFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabasefile), or [**IVssWMComponent::GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile) (as appropriate).</span></span>

<span data-ttu-id="4ee51-130">Эти вызовы могут возвращать экземпляры интерфейса [**ивссвмфиледеск**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) для каждого набора файлов компонента.</span><span class="sxs-lookup"><span data-stu-id="4ee51-130">These calls can return instances of the [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) interface for each of a component's file sets.</span></span>

<span data-ttu-id="4ee51-131">Тип резервной копии спецификации файлов для набора файлов получен путем вызова [**ивссвмфиледеск:: жетбаккуптипемаск**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask).</span><span class="sxs-lookup"><span data-stu-id="4ee51-131">A file set's file specification backup type is obtained by calling [**IVssWMFiledesc::GetBackupTypeMask**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask).</span></span>

</dd> <dt>

<span data-ttu-id="4ee51-132"><span id="Getting_Partial_File_and_Differenced_File_Information"></span><span id="getting_partial_file_and_differenced_file_information"></span><span id="GETTING_PARTIAL_FILE_AND_DIFFERENCED_FILE_INFORMATION"></span>Получение сведений о частичном файле и различии файлов</span><span class="sxs-lookup"><span data-stu-id="4ee51-132"><span id="Getting_Partial_File_and_Differenced_File_Information"></span><span id="getting_partial_file_and_differenced_file_information"></span><span id="GETTING_PARTIAL_FILE_AND_DIFFERENCED_FILE_INFORMATION"></span>Getting Partial File and Differenced File Information</span></span>
</dt> <dd>

<span data-ttu-id="4ee51-133">Инициатор запроса получает частичный файл и более разные сведения о файле через интерфейс [**ивсскомпонент**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) .</span><span class="sxs-lookup"><span data-stu-id="4ee51-133">A requester obtains partial file and differenced file information through the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface.</span></span>

<span data-ttu-id="4ee51-134">Инициатор запроса может выполнять итерацию всех модулей записи, входящих в резервную копию, с помощью [**ивссбаккупкомпонентс:: жетвритеркомпонентскаунт**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponentscount) и [**Ивссбаккупкомпонентс:: жетвритеркомпонентс**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents).</span><span class="sxs-lookup"><span data-stu-id="4ee51-134">A requester can iterate over all writers included in a backup using [**IVssBackupComponents::GetWriterComponentsCount**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponentscount) and [**IVssBackupComponents::GetWriterComponents**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents).</span></span>

<span data-ttu-id="4ee51-135">Экземпляр интерфейса [**ивссвритеркомпонентсекст**](/windows/win32/api/vsbackup/nl-vsbackup-ivsswritercomponentsext) , возвращенный [**Ивссбаккупкомпонентс:: жетвритеркомпонентс**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents) , предоставляет доступ ко всем экземплярам интерфейса [**ивсскомпонент**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) , соответствующим [*специально включаемым*](vssgloss-e.md) компонентам средства записи с помощью методов [**IVssWriterComponentsExt::-Component**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswritercomponents-getcomponent) и [**IVssWriterComponentsExt:: GetComponentCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswritercomponents-getcomponentcount) .</span><span class="sxs-lookup"><span data-stu-id="4ee51-135">The instance of an [**IVssWriterComponentsExt**](/windows/win32/api/vsbackup/nl-vsbackup-ivsswritercomponentsext) interface returned by [**IVssBackupComponents::GetWriterComponents**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritercomponents) provides access to all instances of the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface corresponding to a given writer's [*explicitly included*](vssgloss-e.md) components through the [**IVssWriterComponentsExt::GetComponent**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswritercomponents-getcomponent) and [**IVssWriterComponentsExt::GetComponentCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswritercomponents-getcomponentcount) methods.</span></span>

<span data-ttu-id="4ee51-136">Инициатору запроса потребуется пройти все экземпляры [**ивсскомпонент**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) для всех модулей записи, схема которых поддерживает добавочную или разностную резервную копию, то есть модули записи, для которых маска схемы резервного копирования, возвращенная [**Ивссексаминевритерметадата:: жетбаккупсчема**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema), включает в себя **\_ \_ добавочную копию VSS** , если тип резервного копирования является **BT- \_ \_ добавочным**, или **\_ \_ разностной** копией VSS, если тип резервной копии является **\_ \_ разностной** копи</span><span class="sxs-lookup"><span data-stu-id="4ee51-136">A requester will need to go through all instances of [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) for all writers whose schema support the incremental or differential backup—that is, writers whose backup schema mask, as returned by [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema), includes **VSS\_BS\_INCREMENTAL** when the backup type is **VSS\_BT\_INCREMENTAL**, or **VSS\_BS\_DIFFERENTIAL** when the backup type is **VSS\_BS\_DIFFERENTIAL**.</span></span>

<span data-ttu-id="4ee51-137">Частичные сведения о файле получаются путем вызова [**ивсскомпонент:: жетпартиалфилекаунт**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfilecount) и [**Ивсскомпонент:: жетпартиалфиле**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile) (см. раздел [Работа с частичными файлами](working-with-partial-files.md)).</span><span class="sxs-lookup"><span data-stu-id="4ee51-137">Partial file information is obtained by calling [**IVssComponent::GetPartialFileCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfilecount) and [**IVssComponent::GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile) (see [Working with Partial Files](working-with-partial-files.md)).</span></span>

<span data-ttu-id="4ee51-138">Для модулей записи, которые поддерживают операции резервного копирования на основе данных о последнем изменении файла (записи, маска схемы резервного копирования которых была возвращена [**ивссексаминевритерметадата:: жетбаккупсчема**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema), включает в себя **\_ \_ Последнее \_ изменение VSS**), полученные сведения о файле получаются путем вызова [**Ивсскомпонент:: жетдифференцедфилескаунт**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfilescount) и [**IVssComponent:: GetDifferencedFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile).</span><span class="sxs-lookup"><span data-stu-id="4ee51-138">For writers that support backup operations on the basis of a file's last modification data (writers whose backup schema mask, as returned by [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema), includes **VSS\_BS\_LAST\_MODIFY**), differenced file information is obtained by calling [**IVssComponent::GetDifferencedFilesCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfilescount) and [**IVssComponent::GetDifferencedFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile).</span></span>

<span data-ttu-id="4ee51-139">Обратите внимание, что файлы с различиями могут быть новыми, то есть файлами, не входящими ни в один файл, который в настоящий момент находится в документе метаданных модуля записи данного модуля записи.</span><span class="sxs-lookup"><span data-stu-id="4ee51-139">Note that differenced files may be new files—that is, files that are not members of any file set currently in a given writer's Writer Metadata Document.</span></span>

<span data-ttu-id="4ee51-140">Запрашивающие стороны не должны искать файлы, входящие в состав для частичных файловых операций и как файлы различий.</span><span class="sxs-lookup"><span data-stu-id="4ee51-140">Requesters should not find files included both for partial file operations and as differenced files.</span></span> <span data-ttu-id="4ee51-141">Если инициатор запроса сталкивается с подобным обстоятельством, он должен вернуть и зарегистрировать ошибку модуля записи.</span><span class="sxs-lookup"><span data-stu-id="4ee51-141">If a requester does encounter such a circumstance, it should return and log a writer error.</span></span>

<span data-ttu-id="4ee51-142">Инициатор запроса по-прежнему может продолжать создавать резервные копии файлов проблемного модуля записи, но в этом случае это следует делать в соответствии со спецификацией, приведенной в сведениях о файле различий.</span><span class="sxs-lookup"><span data-stu-id="4ee51-142">A requester may still choose to proceed with backing up the problematic writer's files, but in that case should do so according to the specification found in the differenced file information.</span></span>

</dd> </dl>

## <a name="implementing-incremental-or-differential-backups"></a><span data-ttu-id="4ee51-143">Реализация добавочных или разностных резервных копий</span><span class="sxs-lookup"><span data-stu-id="4ee51-143">Implementing Incremental or Differential Backups</span></span>

<span data-ttu-id="4ee51-144">Перед реализацией резервной копии запрашивающие стороны должны иметь сведения о том, какие модули записи поддерживают [*добавочную*](vssgloss-i.md) или [*разностную*](vssgloss-d.md) резервную копию, все запрошенные операции с частичными файлами, все файлы различий и тип резервных копий для всех остальных файлов.</span><span class="sxs-lookup"><span data-stu-id="4ee51-144">Prior to implementing a backup, requesters should have information about which writers support an [*incremental*](vssgloss-i.md) or [*differential*](vssgloss-d.md) backup, all requested partial file operations, all differenced files, and the file specification backup type of all other files.</span></span>

<dl> <dt>

<span data-ttu-id="4ee51-145"><span id="Nonsupporting_Writers"></span><span id="nonsupporting_writers"></span><span id="NONSUPPORTING_WRITERS"></span>Неподдерживаемые модули записи</span><span class="sxs-lookup"><span data-stu-id="4ee51-145"><span id="Nonsupporting_Writers"></span><span id="nonsupporting_writers"></span><span id="NONSUPPORTING_WRITERS"></span>Nonsupporting Writers</span></span>
</dt> <dd>

<span data-ttu-id="4ee51-146">Модули записи, схема которых не поддерживает добавочную или разностную резервную копию (модули записи, чья маска схемы резервного копирования, возвращенная [**ивссексаминевритерметадата:: жетбаккупсчема**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema), включает в себя **\_ \_ добавочную копию VSS** , если тип резервного копирования — **BT- \_ \_ добавочная** или не включает **\_ \_ разностную копию VSS** , если резервная копия VSS является **\_ \_ разностной**) не обеспечивает прямую поддержку добавочной или разностной архивации</span><span class="sxs-lookup"><span data-stu-id="4ee51-146">Writers whose schema do not support the incremental or differential backup (writers whose backup schema mask, as returned by [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema), includes **VSS\_BS\_INCREMENTAL** when the backup type is **VSS\_BT\_INCREMENTAL** or does not include **VSS\_BS\_DIFFERENTIAL** when the backup type is **VSS\_BS\_DIFFERENTIAL**) cannot provide any direct support to an incremental or differential backup operation.</span></span>

<span data-ttu-id="4ee51-147">Это не обязательно означает, что данные модуля записи не будут участвовать в добавочной или разностной операции резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="4ee51-147">This does not necessarily mean that the writers' data will not be involved in an incremental or differential backup operation.</span></span> <span data-ttu-id="4ee51-148">Тем не менее, при выборе того, что нужно сделать, — это по усмотрению автора запроса.</span><span class="sxs-lookup"><span data-stu-id="4ee51-148">However, the choice of what to do is at the discretion of the requester.</span></span> <span data-ttu-id="4ee51-149">Инициатор запроса может выполнять следующие действия:</span><span class="sxs-lookup"><span data-stu-id="4ee51-149">The requester can do any of the following:</span></span>

-   <span data-ttu-id="4ee51-150">Резервное копирование файлов, относящихся к неподдерживаемым модулям записи (явное указание пользователю)</span><span class="sxs-lookup"><span data-stu-id="4ee51-150">Back up no files belonging to the nonsupporting writers (clearly indicate this to the user)</span></span>
-   <span data-ttu-id="4ee51-151">Резервное копирование всех файлов неподдерживаемых модулей записи</span><span class="sxs-lookup"><span data-stu-id="4ee51-151">Back up all the files of nonsupporting writers</span></span>
-   <span data-ttu-id="4ee51-152">Выполните добавочное резервное копирование с помощью данных файловой системы и собственных журналов инициатора запроса.</span><span class="sxs-lookup"><span data-stu-id="4ee51-152">Perform an incremental backup using file system data and the requester's own history logs.</span></span>

<span data-ttu-id="4ee51-153">Последняя альтернатива должна использоваться с большой осторожностью и только в том случае, если инициатор запроса понимает, поддерживает ли модуль записи добавочное или разностное резервное копирование и восстановление данных независимо от механизма VSS.</span><span class="sxs-lookup"><span data-stu-id="4ee51-153">The last alternative should be used with great care, and only if the requester understands if the writers involved can support incremental or differential backup and restoration of data independent of the VSS mechanism.</span></span>

</dd> <dt>

<span data-ttu-id="4ee51-154"><span id="Supporting_Writers"></span><span id="supporting_writers"></span><span id="SUPPORTING_WRITERS"></span>Вспомогательные модули записи</span><span class="sxs-lookup"><span data-stu-id="4ee51-154"><span id="Supporting_Writers"></span><span id="supporting_writers"></span><span id="SUPPORTING_WRITERS"></span>Supporting Writers</span></span>
</dt> <dd>

<span data-ttu-id="4ee51-155">Инициатору запроса необходимо обработать (по порядку) все [*файлы с разной*](vssgloss-d.md)записью, а затем обработать все [*частичные*](vssgloss-p.md) запросы файлов, а затем выполнить резервное копирование оставшихся файлов в соответствии с их типом резервной копии ([**\_ \_ \_ \_ тип резервного копирования спецификации файлов VSS**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)).</span><span class="sxs-lookup"><span data-stu-id="4ee51-155">A requester needs to process (in order) all of a writer's [*differenced files*](vssgloss-d.md), then handle any [*partial file*](vssgloss-p.md) requests, and then back up remaining files according to their file specification backup type ([**VSS\_FILE\_SPEC\_BACKUP\_TYPE**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)).</span></span>

1.  <span data-ttu-id="4ee51-156">**Резервное копирование различных файлов:**</span><span class="sxs-lookup"><span data-stu-id="4ee51-156">**Backing up Differenced Files:**</span></span>

    <span data-ttu-id="4ee51-157">Для модулей записи, которые поддерживают операции резервного копирования на основе данных о последнем изменении (записи, маска схемы резервного копирования которых была возвращена [**ивссексаминевритерметадата:: жетбаккупсчема**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema), включает в себя **\_ \_ Последнее \_ изменение VSS**), запрашивающая сторона использует путь, спецификацию файла и сведения о флагах рекурсии, возвращаемые [**ивсскомпонент:**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile)</span><span class="sxs-lookup"><span data-stu-id="4ee51-157">For writers that support backup operations on the basis of last modification data (writers whose backup schema mask, as returned by [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema), includes **VSS\_BS\_LAST\_MODIFY**), a requester uses the path, file specification, and recursion flag information returned by [**IVssComponent::GetDifferencedFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile) to generate a list of files as candidates for incremental backup or restore.</span></span>

    <span data-ttu-id="4ee51-158">[**Ивсскомпонент:: жетдифференцедфиле**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile) может также возвращать время последнего изменения (выраженное в виде структуры [**fileTime**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) ).</span><span class="sxs-lookup"><span data-stu-id="4ee51-158">[**IVssComponent::GetDifferencedFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile) can also return a time of last modification (expressed as a [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) structure).</span></span>

    <span data-ttu-id="4ee51-159">Если время последнего изменения, предоставленное модулем записи, не равно нулю, то инициатор запроса использует его в качестве основы (а не сведений о файловой системе или собственных сохраненных данных запрашивающей стороны) для определения того, должен ли файл быть включен в [*добавочную*](vssgloss-i.md) или [*разностную*](vssgloss-d.md) резервную копию.</span><span class="sxs-lookup"><span data-stu-id="4ee51-159">If the last modification time supplied by the writer is nonzero, then the requester uses it as the basis (rather than file system information or the requester's own stored data) for determining if the file should be included in the [*incremental*](vssgloss-i.md) or [*differential*](vssgloss-d.md) backup.</span></span>

    <span data-ttu-id="4ee51-160">Например, если время последнего изменения файла, возвращенное модулем записи, было:</span><span class="sxs-lookup"><span data-stu-id="4ee51-160">For instance, if a file's last modification time as returned by the writer was:</span></span>

    -   <span data-ttu-id="4ee51-161">После последнего полного резервного копирования файл должен быть добавлен как в добавочную, так и в разностную резервную копию.</span><span class="sxs-lookup"><span data-stu-id="4ee51-161">After the last full backup, the file should be included in both incremental and differential backups.</span></span>
    -   <span data-ttu-id="4ee51-162">После последнего полного резервного копирования, но до последнего добавочного резервного копирования, файл должен быть добавлен в операции добавочного резервного копирования, но не на разностное резервное копирование.</span><span class="sxs-lookup"><span data-stu-id="4ee51-162">After the last full backup but prior to the last incremental backup, the file should be included in incremental backup operations, but not differential backups.</span></span>

    <span data-ttu-id="4ee51-163">Если время последнего изменения, предоставленное модулем записи, равно нулю, то запрашивающая сторона должна использовать сведения о файловой системе и собственные хранимые данные для определения времени изменения файла различий.</span><span class="sxs-lookup"><span data-stu-id="4ee51-163">If the last modification time supplied by the writer is zero, then the requester must use file system information and its own stored data to determine the modification time of the differenced file.</span></span>

2.  <span data-ttu-id="4ee51-164">**Использование частичных операций с файлами:**</span><span class="sxs-lookup"><span data-stu-id="4ee51-164">**Using Partial File Operations:**</span></span>

    <span data-ttu-id="4ee51-165">Если средство записи запросило резервное копирование файла с помощью операции частичного файла, то запросивший объект использует сведения о смещении файла для сохранения указанных сегментов файлов на носителе резервных копий.</span><span class="sxs-lookup"><span data-stu-id="4ee51-165">If a writer has requested that a file be backed up using a partial file operation, the requester uses the file offset information to save the indicated file segments to backup media.</span></span> <span data-ttu-id="4ee51-166">(Дополнительные сведения о частичных операциях с файлами см. в разделе [Работа с частичными файлами](working-with-partial-files.md) .)</span><span class="sxs-lookup"><span data-stu-id="4ee51-166">(See [Working with Partial Files](working-with-partial-files.md) for more information on partial file operations).</span></span>

    <span data-ttu-id="4ee51-167">Как отмечалось выше, модуль записи не должен обозначать файл как файл различий и как участник в операции частичного файла.</span><span class="sxs-lookup"><span data-stu-id="4ee51-167">As noted above, a writer should not designate a file both as a differenced file and as a participant in a partial file operation.</span></span> <span data-ttu-id="4ee51-168">Если инициатор запроса сталкивается с подобным обстоятельством, он должен вернуть и зарегистрировать ошибку модуля записи.</span><span class="sxs-lookup"><span data-stu-id="4ee51-168">If a requester does encounter such a circumstance, it should return and log a writer error.</span></span>

    <span data-ttu-id="4ee51-169">Инициатор запроса по-прежнему может продолжать создавать резервные копии файлов проблемного модуля записи, но в этом случае это следует делать в соответствии со спецификацией, приведенной в сведениях о файле различий.</span><span class="sxs-lookup"><span data-stu-id="4ee51-169">A requester may still choose to proceed with backing up the problematic writer's files, but in that case should do so according to the specification found in the differenced file information.</span></span>

3.  <span data-ttu-id="4ee51-170">**Работа с спецификацией файлов тип резервного копирования:**</span><span class="sxs-lookup"><span data-stu-id="4ee51-170">**Working with File Specification Backup Type:**</span></span>

    <span data-ttu-id="4ee51-171">После обработки всех различий файлов и частичных операций с файлами инициатор запроса теперь обрабатывает все оставшиеся файлы в резервном наборе данных на основе их типа резервной копии ([**\_ \_ \_ \_ тип резервного копирования спецификации файлов VSS**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)).</span><span class="sxs-lookup"><span data-stu-id="4ee51-171">Having processed all differenced files and partial file operations, the requester now processes all remaining files in its backup set on the basis of their file specification backup type ([**VSS\_FILE\_SPEC\_BACKUP\_TYPE**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)).</span></span>

    <span data-ttu-id="4ee51-172">Существует три значения параметра "требуется резервное копирование" для перечисления [**\_ \_ \_ \_ типов резервных копий спецификации файлов VSS**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type) , которые влияют на разностное и добавочное резервное копирование.</span><span class="sxs-lookup"><span data-stu-id="4ee51-172">There are three "backup required" values of the [**VSS\_FILE\_SPEC\_BACKUP\_TYPE**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type) enumeration that affect differential and incremental backups:</span></span>

    -   <span data-ttu-id="4ee51-173">\_ФСБТ VSS \_ \_ требуется вся резервная копия \_</span><span class="sxs-lookup"><span data-stu-id="4ee51-173">VSS\_FSBT\_ALL\_BACKUP\_REQUIRED</span></span>
    -   <span data-ttu-id="4ee51-174">\_ \_ требуется добавочное \_ резервное копирование VSS фсбт \_</span><span class="sxs-lookup"><span data-stu-id="4ee51-174">VSS\_FSBT\_INCREMENTAL\_BACKUP\_REQUIRED</span></span>
    -   <span data-ttu-id="4ee51-175">\_ \_ требуется разностное \_ резервное копирование VSS фсбт \_</span><span class="sxs-lookup"><span data-stu-id="4ee51-175">VSS\_FSBT\_DIFFERENTIAL\_BACKUP\_REQUIRED</span></span>

    <span data-ttu-id="4ee51-176">Есть три значения "требуется теневая копия":</span><span class="sxs-lookup"><span data-stu-id="4ee51-176">There are three "shadow copy required" values:</span></span>

    -   <span data-ttu-id="4ee51-177">\_ \_ \_ требуется моментальный снимок фсбт для VSS \_</span><span class="sxs-lookup"><span data-stu-id="4ee51-177">VSS\_FSBT\_ALL\_SNAPSHOT\_REQUIRED</span></span>
    -   <span data-ttu-id="4ee51-178">\_ \_ требуется добавочный \_ моментальный снимок VSS фсбт \_</span><span class="sxs-lookup"><span data-stu-id="4ee51-178">VSS\_FSBT\_INCREMENTAL\_SNAPSHOT\_REQUIRED</span></span>
    -   <span data-ttu-id="4ee51-179">\_ \_ требуется разностный \_ моментальный снимок VSS фсбт \_</span><span class="sxs-lookup"><span data-stu-id="4ee51-179">VSS\_FSBT\_DIFFERENTIAL\_SNAPSHOT\_REQUIRED</span></span>

    <span data-ttu-id="4ee51-180">Наборы файлов с меткой "требуется теневая копия" указывают на то, что инициатору запроса необходимо копировать данные из теневой копии при выполнении ДОБАВОЧных, РАЗНОСТных или всех операций резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="4ee51-180">File sets tagged with a file specification backup type of "shadow copy required" indicate that a requester needs to copy data from a shadow copy when performing INCREMENTAL, DIFFERENTIAL, or ALL (which includes both incremental and differential operations) backup operations.</span></span>

    <span data-ttu-id="4ee51-181">Флаг "требуется резервное копирование", применяемый к операциям ДОБАВОЧного, РАЗНОСТного или всех операций резервного копирования, указывает, что модуль записи требует, чтобы копия текущей версии набора файлов была доступна после восстановления любой операции резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="4ee51-181">The "backup required" flag, applied to INCREMENTAL, DIFFERENTIAL, or ALL backup operations, indicates that the writer expects a copy of the current version of the file set to be available following the restore of any backup operation.</span></span> <span data-ttu-id="4ee51-182">Как правило, это означает, что если набор файлов помечен как "требуется резервное копирование", инициатор запроса скопирует все его члены на носитель резервных копий во время добавочной или разностной резервной копии независимо от того, когда произошло их резервное копирование или изменение.</span><span class="sxs-lookup"><span data-stu-id="4ee51-182">Typically, this means that if a file set is tagged with "backup required," a requester will copy all its members to backup media during an incremental or differential backup, regardless of when their backup or modification last occurred.</span></span>

    <span data-ttu-id="4ee51-183">По умолчанию наборы файлов добавляются в компоненты со спецификацией файлов тип резервной копии \_ фсбт для \_ всех необходимых \_ резервных копий \_ \| VSS \_ фсбт \_ все \_ \_ необходимые снимки.</span><span class="sxs-lookup"><span data-stu-id="4ee51-183">By default, file sets are added to components with a file specification backup type of VSS\_FSBT\_ALL\_BACKUP\_REQUIRED \| VSS\_FSBT\_ALL\_SNAPSHOT\_REQUIRED.</span></span> <span data-ttu-id="4ee51-184">Таким образом, если модуль записи явно не задает тип резервной копии спецификации файла в противном случае, инициатору потребуются копии файлов, не обработанных с помощью частичных операций с файлами, или файлы с определенными отличиями в большинстве наборов файлов, как правило, полностью копируются на носители резервных копий.</span><span class="sxs-lookup"><span data-stu-id="4ee51-184">Therefore, unless a writer explicitly sets the file specification backup type otherwise, requesters will need to copy those files not handled by partial file operations or designated differenced files in most file sets will typically be copied in their entirety to backup media.</span></span>

</dd> <dt>

<span data-ttu-id="4ee51-185"><span id="Backup_Stamps"></span><span id="backup_stamps"></span><span id="BACKUP_STAMPS"></span>Метки резервного копирования</span><span class="sxs-lookup"><span data-stu-id="4ee51-185"><span id="Backup_Stamps"></span><span id="backup_stamps"></span><span id="BACKUP_STAMPS"></span>Backup Stamps</span></span>
</dt> <dd>

<span data-ttu-id="4ee51-186">Модули записи, поддерживающие метки резервного копирования ( \_ \_ Метка времени VSS), могут создавать сведения о штампах резервного копирования, которые будут использоваться для поддержки будущих добавочных и разностных операций резервного копирования и восстановления.</span><span class="sxs-lookup"><span data-stu-id="4ee51-186">Writers that support backup stamps (VSS\_BS\_TIMESTAMP) may choose to generate backup stamp information to be used to support future incremental and differential backup and restore operations.</span></span>

<span data-ttu-id="4ee51-187">Формат и сведения, содержащиеся в строках, содержащих сведения о метке резервной копии, являются частными для модуля записи, который их создает. инициатор запроса не знает, как обрабатывать эту информацию.</span><span class="sxs-lookup"><span data-stu-id="4ee51-187">The format and information contained in strings containing backup stamp information are private to the writer that generates them; the requester does not know how to process this information.</span></span>

<span data-ttu-id="4ee51-188">Вспомогательные модули записи хранят метку резервного копирования в документе компоненты резервного копирования в виде строки с помощью метода [**ивсскомпонент:: сетбаккупстамп**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) .</span><span class="sxs-lookup"><span data-stu-id="4ee51-188">Supporting writers store the backup stamp in the Backup Components Document as a string by using the [**IVssComponent::SetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) method.</span></span>

<span data-ttu-id="4ee51-189">Роль инициатора запроса в обработке сведений о метке резервного копирования — (если она существует), чтобы сделать ее доступной для модуля записи, вызвав [**ивссбаккупкомпонентс:: сетпревиаусбаккупстамп**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) в будущем операции резервного копирования или восстановления.</span><span class="sxs-lookup"><span data-stu-id="4ee51-189">The requester's role in handling backup stamp information is (if it exists) to make it available to the writer by calling [**IVssBackupComponents::SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) in a future backup or restore operation.</span></span>

</dd> </dl>

 

 
