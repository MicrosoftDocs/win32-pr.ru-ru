---
title: Рекомендации по проектированию для пользовательских устройств
description: В этом разделе описаны рекомендации по проектированию, которые помогут определить, требуется ли устройству пользовательский драйвер.
ms.assetid: 8AADE304-4841-41E2-968B-DFCB5B954FF1
ms.topic: article
ms.date: 02/11/2020
ms.openlocfilehash: f503ae556009f3b4b9b88d9f895936218f402fc6
ms.sourcegitcommit: 3d718d8f69d3f86eaecf94c5705d761c5a9ef4a1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/20/2020
ms.locfileid: "103797190"
---
# <a name="design-considerations-for-custom-devices"></a><span data-ttu-id="184da-103">Рекомендации по проектированию для пользовательских устройств</span><span class="sxs-lookup"><span data-stu-id="184da-103">Design Considerations for Custom Devices</span></span>

<span data-ttu-id="184da-104">В этом разделе описаны рекомендации по проектированию, которые помогут определить, требуется ли устройству пользовательский драйвер.</span><span class="sxs-lookup"><span data-stu-id="184da-104">This topic describes design considerations that can help you determine whether your device needs a custom driver.</span></span>

- [<span data-ttu-id="184da-105">Определение типа драйвера для реализации</span><span class="sxs-lookup"><span data-stu-id="184da-105">Determining the type of driver to implement</span></span>](#determining-the-type-of-driver-to-implement)
- [<span data-ttu-id="184da-106">Вопросы безопасности</span><span class="sxs-lookup"><span data-stu-id="184da-106">Security considerations</span></span>](#security-considerations)
- [<span data-ttu-id="184da-107">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="184da-107">Related topics</span></span>](#related-topics)

## <a name="determining-the-type-of-driver-to-implement"></a><span data-ttu-id="184da-108">Определение типа драйвера для реализации</span><span class="sxs-lookup"><span data-stu-id="184da-108">Determining the type of driver to implement</span></span>

<span data-ttu-id="184da-109">В этой таблице описывается, когда необходимо разработать пользовательский драйвер для устройства и взаимодействовать с ним с помощью API доступа к устройству, а также когда следует использовать указанные в Windows стеки устройств.</span><span class="sxs-lookup"><span data-stu-id="184da-109">This table describes when you should develop a custom driver for your device and communicate with it by using the Device Access API, and when you should use Windows-provided device stacks instead.</span></span>

| <span data-ttu-id="184da-110">Для поддержки</span><span class="sxs-lookup"><span data-stu-id="184da-110">To support</span></span> | <span data-ttu-id="184da-111">Реализация</span><span class="sxs-lookup"><span data-stu-id="184da-111">Implementation</span></span> |
|:---|:---|
| <span data-ttu-id="184da-112">Хорошо известные устройства, включая:</span><span class="sxs-lookup"><span data-stu-id="184da-112">Well-known devices, including:</span></span> <ul><li><span data-ttu-id="184da-113">Sensor</span><span class="sxs-lookup"><span data-stu-id="184da-113">Sensor</span></span></li><li><span data-ttu-id="184da-114">Расположение</span><span class="sxs-lookup"><span data-stu-id="184da-114">Location</span></span></li><li><span data-ttu-id="184da-115">Веб-камера</span><span class="sxs-lookup"><span data-stu-id="184da-115">Webcam</span></span></li><li><span data-ttu-id="184da-116">Близость</span><span class="sxs-lookup"><span data-stu-id="184da-116">Proximity</span></span></li><li><span data-ttu-id="184da-117">Служба коротких сообщений (SMS)</span><span class="sxs-lookup"><span data-stu-id="184da-117">Short message service (SMS)</span></span></li><li><span data-ttu-id="184da-118">Широкополосное мобильное подключение</span><span class="sxs-lookup"><span data-stu-id="184da-118">Mobile broadband</span></span></li></ul><br/> | <span data-ttu-id="184da-119">Для многих типов известных устройств не требуется пользовательский драйвер, так как в Windows есть интерфейсы API и расширения классов (ДДИС), управляющие взаимодействием между драйвером и Windows.</span><span class="sxs-lookup"><span data-stu-id="184da-119">For many types of well-known devices, you don't need a custom driver, because Windows includes APIs and class-extension device driver interfaces (DDIs) that manage the communication between the driver and Windows.</span></span> <span data-ttu-id="184da-120">Устройства датчиков, расположения и портативных устройств Windows (WPD) являются примерами классов устройств, которые поддерживают эту поддержку.</span><span class="sxs-lookup"><span data-stu-id="184da-120">Sensor, location, and Windows Portable Device (WPD) devices are some examples of device classes that have this support.</span></span> <span data-ttu-id="184da-121">Если вы создаете драйвер, который использует один из этих ДДИС, предоставляемых Windows для отправки и получения данных и команд, нет необходимости использовать API доступа к устройству в приложении Магазина Windows для доступа к компоненту Broker или отправки управляющих кодов ввода-вывода непосредственно в драйвер.</span><span class="sxs-lookup"><span data-stu-id="184da-121">If you build a driver that uses one of these Windows-provided DDIs to send and receive data and commands, there's no need for your Windows Store app to use the Device Access API to broker access or send input/output (I/O) control codes directly to the driver.</span></span> <br/> <span data-ttu-id="184da-122">Когда приложение Магазина Windows запрашивает доступ к известному устройству с помощью среда выполнения Windows API для своего класса устройств, Windows 8 будет управлять доступом к устройству на основе типа устройства.</span><span class="sxs-lookup"><span data-stu-id="184da-122">When a Windows Store app requests access to a well-known device by using the Windows Runtime API for its device class, Windows 8 will handle device access based on the type of device.</span></span> <span data-ttu-id="184da-123">Приложения всегда получают доступ к некоторым известным типам устройств (например, акселерометров), которые не раскрывают персональные данные.</span><span class="sxs-lookup"><span data-stu-id="184da-123">Apps will always get access to some well-known types of devices (such as accelerometers) that don't reveal any personally identifiable information.</span></span> <span data-ttu-id="184da-124">Другие типы хорошо известных устройств должны быть объявлены в манифесте приложения, прежде чем приложение сможет получить к ним доступ.</span><span class="sxs-lookup"><span data-stu-id="184da-124">Other types of well-known devices must be declared in the application manifest before an app can access them.</span></span> <span data-ttu-id="184da-125">Пользователь должен предоставить приложению разрешение на доступ к устройствам, которые раскрывают конфиденциальную информацию, например расположение, веб-камеру и микрофон, или могут изменять деньги пользователя, например устройства мобильной широкополосной связи.</span><span class="sxs-lookup"><span data-stu-id="184da-125">The user must grant permission for an app to access devices that reveal sensitive information, like location, webcam, and microphone devices, or can cost the user money, like mobile broadband devices.</span></span> <br/> |
| <span data-ttu-id="184da-126">Устройство типа WPD, которое реализует службы MTP.</span><span class="sxs-lookup"><span data-stu-id="184da-126">A WPD device that implements MTP services.</span></span><br/> | <span data-ttu-id="184da-127">Вы можете использовать драйвер класса MTP или создать драйвер с помощью DDI для WPD.</span><span class="sxs-lookup"><span data-stu-id="184da-127">You can use the MTP class driver, or you can build a driver by using the WPD DDI.</span></span><br/> <span data-ttu-id="184da-128">Windows 8 поддерживает службы устройств MTP. Приложение может использовать для доступа к устройству интерфейс API [Windows. Devices. portable](/uwp/api/Windows.Devices.Portable) среда выполнения Windows, API-интерфейс переносимых устройств (com) или компонент автоматизации WPD.</span><span class="sxs-lookup"><span data-stu-id="184da-128">Windows 8 provides support for MTP device services.And an app can use the [Windows.Devices.Portable](/uwp/api/Windows.Devices.Portable) Windows Runtime API, the Portable Device Component Object Model (COM) API, or WPD Automation to access the device.</span></span> <span data-ttu-id="184da-129">Приложению не требуется использовать API доступа к устройству.</span><span class="sxs-lookup"><span data-stu-id="184da-129">Your app doesn't need to use the Device Access API.</span></span><br/> |
| <span data-ttu-id="184da-130">Устройство, которое не имеет предоставляемого Windows расширения класса или драйвера класса.</span><span class="sxs-lookup"><span data-stu-id="184da-130">A device that doesn't have a Windows-provided class extension or class driver.</span></span><br/>  | <span data-ttu-id="184da-131">В этом случае просмотрите [приложения устройства UWP для внутренних устройств](/windows-hardware/drivers/devapps/uwp-device-apps-for-specialized-devices) для специализированных устройств, чтобы определить, нужно ли реализовать пользовательский доступ к драйверу с помощью API доступа к устройству.</span><span class="sxs-lookup"><span data-stu-id="184da-131">In this case, consult the [UWP device apps for internal devices](/windows-hardware/drivers/devapps/uwp-device-apps-for-specialized-devices) for specialized devices to determine whether you must implement custom driver access by using the Device Access API.</span></span><br/> |

## <a name="security-considerations"></a><span data-ttu-id="184da-132">Вопросы безопасности</span><span class="sxs-lookup"><span data-stu-id="184da-132">Security considerations</span></span>

<span data-ttu-id="184da-133">В следующих статьях содержатся рекомендации по написанию безопасного кода C++:</span><span class="sxs-lookup"><span data-stu-id="184da-133">The following articles provide guidance for writing secure C++ code:</span></span>

- [<span data-ttu-id="184da-134">Рекомендации по обеспечению безопасности для C++</span><span class="sxs-lookup"><span data-stu-id="184da-134">Security Best Practices for C++</span></span>](/cpp/security/security-best-practices-for-cpp)
- <span data-ttu-id="184da-135">[Patterns & рекомендации по безопасности для приложений]/Previous-Versions/MSP-n-p/ff650760 (v = пандп. 10))</span><span class="sxs-lookup"><span data-stu-id="184da-135">[Patterns & Practices Security Guidance for Applications]/previous-versions/msp-n-p/ff650760(v=pandp.10))</span></span>

## <a name="related-topics"></a><span data-ttu-id="184da-136">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="184da-136">Related topics</span></span>

<span data-ttu-id="184da-137">[Пример пользовательского доступа к драйверу](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/411c271e537727d737a53fa2cbe99eaecac00cc0/Official%20Windows%20Platform%20Sample/Custom%20driver%20access%20sample), [приложения для устройств UWP для внутренних устройств](/windows-hardware/drivers/devapps/uwp-device-apps-for-specialized-devices), [центр разработки оборудования](/windows-hardware/drivers/)</span><span class="sxs-lookup"><span data-stu-id="184da-137">[Custom Driver Access Sample](https://github.com/microsoftarchive/msdn-code-gallery-microsoft/tree/411c271e537727d737a53fa2cbe99eaecac00cc0/Official%20Windows%20Platform%20Sample/Custom%20driver%20access%20sample), [UWP device apps for internal devices](/windows-hardware/drivers/devapps/uwp-device-apps-for-specialized-devices), [Hardware Dev Center](/windows-hardware/drivers/)</span></span>
