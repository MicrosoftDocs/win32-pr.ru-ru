---
description: Установщик Windows может устанавливать несколько пакетов с помощью обработки транзакций.
ms.assetid: c4a0f4d8-818d-4e60-908b-adaa2a54de95
title: Multiple-Package установки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 65fa30893f353d6661a7f77fe23fe55b4c9b22c1
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105673565"
---
# <a name="multiple-package-installations"></a><span data-ttu-id="20146-103">Multiple-Package установки</span><span class="sxs-lookup"><span data-stu-id="20146-103">Multiple-Package Installations</span></span>

<span data-ttu-id="20146-104">Установщик Windows может устанавливать несколько пакетов с помощью [*обработки транзакций*](t-gly.md).</span><span class="sxs-lookup"><span data-stu-id="20146-104">Windows Installer can install multiple packages using [*transaction processing*](t-gly.md).</span></span> <span data-ttu-id="20146-105">Эта возможность доступна начиная с установщик Windows 4,5.</span><span class="sxs-lookup"><span data-stu-id="20146-105">This capability is available beginning with Windows Installer 4.5.</span></span> <span data-ttu-id="20146-106">Установщик установит все пакеты, относящиеся к транзакции с несколькими пакетами или ни одному из пакетов.</span><span class="sxs-lookup"><span data-stu-id="20146-106">The installer will install all the packages belonging to a multiple-package transaction or none of the packages.</span></span> <span data-ttu-id="20146-107">Если не удается успешно установить все пакеты в транзакции или пользователь отменяет установку, установщик Windows может откатить изменения и восстановить состояние компьютера в исходном состоянии.</span><span class="sxs-lookup"><span data-stu-id="20146-107">If all the packages in the transaction cannot be installed successfully, or if the user cancels the installation, the Windows Installer can roll back changes and restore the computer to its original state.</span></span>

<span data-ttu-id="20146-108">Пакет установки с несколькими пакетами может содержать [таблицу мсиембеддедчаинер](msiembeddedchainer-table.md) , которая ссылается на определяемую пользователем функцию, которая использует [**функции мсибегинтрансактион**](/windows/desktop/api/Msi/nf-msi-msibegintransactiona), [**мсижоинтрансактион**](/windows/desktop/api/Msi/nf-msi-msijointransaction)и [**мсиендтрансактион**](/windows/desktop/api/Msi/nf-msi-msiendtransaction) .</span><span class="sxs-lookup"><span data-stu-id="20146-108">A multiple-package installation package can contain a [MsiEmbeddedChainer table](msiembeddedchainer-table.md) that references a user-defined function that uses the [**MsiBeginTransaction**](/windows/desktop/api/Msi/nf-msi-msibegintransactiona), [**MsiJoinTransaction**](/windows/desktop/api/Msi/nf-msi-msijointransaction), and [**MsiEndTransaction**](/windows/desktop/api/Msi/nf-msi-msiendtransaction) functions.</span></span>

<span data-ttu-id="20146-109">В [таблице мсипаккажецертификате](msipackagecertificate-table.md) перечислены сертификаты цифровых подписей, используемые для проверки подлинности пакетов установки, которые делают установку нескольких пакетов.</span><span class="sxs-lookup"><span data-stu-id="20146-109">The [MsiPackageCertificate Table](msipackagecertificate-table.md) lists digital signature certificates used to verify the identity of the installation packages that make a multiple-package installation.</span></span> <span data-ttu-id="20146-110">С помощью этой таблицы можно сократить количество случаев, когда в многопакетной установке отображается запрос контроля [*учетных записей*](u-gly.md) (UAC), требующий ответ администратором.</span><span class="sxs-lookup"><span data-stu-id="20146-110">You can use this table to reduce the number of times your multiple-package installation displays a [*User Account Control*](u-gly.md) (UAC) prompt that requires a response by an administrator.</span></span>

<span data-ttu-id="20146-111">Следующие установщик Windows функции могут вносить изменения на компьютер пользователя, когда установщик Windows устанавливает, восстанавливает, обновляет или удаляет приложения.</span><span class="sxs-lookup"><span data-stu-id="20146-111">The following Windows Installer functions can make changes to the user's computer when the Windows Installer installs, repairs, updates, or removes applications.</span></span> <span data-ttu-id="20146-112">Начиная с установщик Windows 4,5, установщик может откатить изменения, внесенные этими функциями, во время [*обработки транзакций*](t-gly.md) многопакетной установки.</span><span class="sxs-lookup"><span data-stu-id="20146-112">Beginning with Windows Installer 4.5, the installer can roll back changes made by these functions during the [*transaction processing*](t-gly.md) of a multiple-package installation:</span></span>

<dl>

[<span data-ttu-id="20146-113">**мсиадвертисепродукт**</span><span class="sxs-lookup"><span data-stu-id="20146-113">**MsiAdvertiseProduct**</span></span>](/windows/desktop/api/Msi/nf-msi-msiadvertiseproducta)  
[<span data-ttu-id="20146-114">**мсиадвертисепродуктекс**</span><span class="sxs-lookup"><span data-stu-id="20146-114">**MsiAdvertiseProductEx**</span></span>](/windows/desktop/api/Msi/nf-msi-msiadvertiseproductexa)  
[<span data-ttu-id="20146-115">**мсиапплимултиплепатчес**</span><span class="sxs-lookup"><span data-stu-id="20146-115">**MsiApplyMultiplePatches**</span></span>](/windows/desktop/api/Msi/nf-msi-msiapplymultiplepatchesa)  
[<span data-ttu-id="20146-116">**мсиапплипатч**</span><span class="sxs-lookup"><span data-stu-id="20146-116">**MsiApplyPatch**</span></span>](/windows/desktop/api/Msi/nf-msi-msiapplypatcha)  
[<span data-ttu-id="20146-117">**мсиконфигурефеатуре**</span><span class="sxs-lookup"><span data-stu-id="20146-117">**MsiConfigureFeature**</span></span>](/windows/desktop/api/Msi/nf-msi-msiconfigurefeaturea)  
[<span data-ttu-id="20146-118">**мсиконфигурепродукт**</span><span class="sxs-lookup"><span data-stu-id="20146-118">**MsiConfigureProduct**</span></span>](/windows/desktop/api/Msi/nf-msi-msiconfigureproducta)  
[<span data-ttu-id="20146-119">**мсиконфигурепродуктекс**</span><span class="sxs-lookup"><span data-stu-id="20146-119">**MsiConfigureProductEx**</span></span>](/windows/desktop/api/Msi/nf-msi-msiconfigureproductexa)  
[<span data-ttu-id="20146-120">**мсиинсталлмиссингкомпонент**</span><span class="sxs-lookup"><span data-stu-id="20146-120">**MsiInstallMissingComponent**</span></span>](/windows/desktop/api/Msi/nf-msi-msiinstallmissingcomponenta)  
[<span data-ttu-id="20146-121">**мсиинсталлмиссингфиле**</span><span class="sxs-lookup"><span data-stu-id="20146-121">**MsiInstallMissingFile**</span></span>](/windows/desktop/api/Msi/nf-msi-msiinstallmissingfilea)  
[<span data-ttu-id="20146-122">**мсиинсталлпродукт**</span><span class="sxs-lookup"><span data-stu-id="20146-122">**MsiInstallProduct**</span></span>](/windows/desktop/api/Msi/nf-msi-msiinstallproducta)  
[<span data-ttu-id="20146-123">**мсипровидеассембли**</span><span class="sxs-lookup"><span data-stu-id="20146-123">**MsiProvideAssembly**</span></span>](/windows/desktop/api/Msi/nf-msi-msiprovideassemblya)  
[<span data-ttu-id="20146-124">**мсипровидекомпонент**</span><span class="sxs-lookup"><span data-stu-id="20146-124">**MsiProvideComponent**</span></span>](/windows/desktop/api/Msi/nf-msi-msiprovidecomponenta)  
[<span data-ttu-id="20146-125">**мсипровидекуалифиедкомпонент**</span><span class="sxs-lookup"><span data-stu-id="20146-125">**MsiProvideQualifiedComponent**</span></span>](/windows/desktop/api/Msi/nf-msi-msiprovidequalifiedcomponenta)  
[<span data-ttu-id="20146-126">**мсипровидекуалифиедкомпонентекс**</span><span class="sxs-lookup"><span data-stu-id="20146-126">**MsiProvideQualifiedComponentEx**</span></span>](/windows/desktop/api/Msi/nf-msi-msiprovidequalifiedcomponentexa)  
[<span data-ttu-id="20146-127">**мсиреинсталлфеатуре**</span><span class="sxs-lookup"><span data-stu-id="20146-127">**MsiReinstallFeature**</span></span>](/windows/desktop/api/Msi/nf-msi-msireinstallfeaturea)  
[<span data-ttu-id="20146-128">**мсиреинсталлпродукт**</span><span class="sxs-lookup"><span data-stu-id="20146-128">**MsiReinstallProduct**</span></span>](/windows/desktop/api/Msi/nf-msi-msireinstallproducta)  
[<span data-ttu-id="20146-129">**мсиремовепатчес**</span><span class="sxs-lookup"><span data-stu-id="20146-129">**MsiRemovePatches**</span></span>](/windows/desktop/api/Msi/nf-msi-msiremovepatchesa)  
</dl>

<span data-ttu-id="20146-130">Существует исключение, если установщик Windows встречает пакет, принадлежащий многопакетной установке, содержащей действие [форцеребут](forcereboot-action.md) или [счедулеребут](schedulereboot-action.md) .</span><span class="sxs-lookup"><span data-stu-id="20146-130">There is an exception if the Windows Installer encounters a package belonging to a multiple-package installation that contains a [ForceReboot](forcereboot-action.md) or [ScheduleReboot](schedulereboot-action.md) action.</span></span> <span data-ttu-id="20146-131">В этом случае установщик Windows не устанавливает только этот пакет.</span><span class="sxs-lookup"><span data-stu-id="20146-131">In this case, Windows Installer does not install only that package.</span></span> <span data-ttu-id="20146-132">Можно установить другие пакеты, принадлежащие многопакетной установке, которые не содержат действие Форцеребут или Счедулеребут.</span><span class="sxs-lookup"><span data-stu-id="20146-132">Other packages belonging to the multiple-package installation, that do not contain a ForceReboot or ScheduleReboot action, can be installed.</span></span>

<span data-ttu-id="20146-133">\*\*[Установщик Windows 4,0 и более ранних версий](not-supported-in-windows-installer-4-0.md): \* \*[*обработка транзакций*](t-gly.md) для многопакетных установщик Windows установок не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="20146-133">\*\*[Windows Installer 4.0 and earlier](not-supported-in-windows-installer-4-0.md):  \*\*[*Transaction processing*](t-gly.md) of multiple-package Windows Installer installations is not supported.</span></span> <span data-ttu-id="20146-134">Этим версиям установщик Windows не удается выполнить откат установки нескольких пакетов в рамках одной транзакции.</span><span class="sxs-lookup"><span data-stu-id="20146-134">These versions of the Windows Installer are unable to roll back the installation of multiple packages as a single transaction.</span></span>

<span data-ttu-id="20146-135">**Windows Server 2008 R2 с включенной ролью [службы удаленных рабочих столов](../termserv/terminal-services-portal.md) :** Не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="20146-135">**Windows Server 2008 R2 with the [Remote Desktop Services](../termserv/terminal-services-portal.md) role enabled:** Not supported.</span></span> <span data-ttu-id="20146-136">Если роль [службы удаленных рабочих столов](../termserv/terminal-services-portal.md) включена, то установка нескольких пакетов с помощью [таблицы мсиембеддедчаинер](msiembeddedchainer-table.md) завершается ошибкой.</span><span class="sxs-lookup"><span data-stu-id="20146-136">A multiple package installation using the [MsiEmbeddedChainer table](msiembeddedchainer-table.md) fails if the [Remote Desktop Services](../termserv/terminal-services-portal.md) role is enabled.</span></span>

 

 
