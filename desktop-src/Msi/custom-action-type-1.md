---
description: Разработчики установщик Windowsных пакетов могут использовать настраиваемое действие типа 1, если стандартные действия недостаточны для выполнения установки.
ms.assetid: 277b875f-37f1-4f4d-98ae-7a18131de4f0
title: Тип настраиваемого действия 1
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f72efd083b2cd547ff1dbd7f3bc81a617b5da88e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104081493"
---
# <a name="custom-action-type-1"></a>Тип настраиваемого действия 1

Это пользовательское действие вызывает библиотеку динамической компоновки (DLL), написанную на языке C или C++.

## <a name="source"></a>Источник

Библиотека DLL создается из временного двоичного потока. Исходное поле [таблицы CustomAction](customaction-table.md) содержит ключ к [двоичной таблице](binary-table.md).

Столбец данных в таблице binary содержит данные потока. Для каждой строки выделяется отдельный поток. Новые двоичные данные можно вставить из файла с помощью [**мсирекордсетстреам**](/windows/desktop/api/Msiquery/nf-msiquery-msirecordsetstreama) , за которым следует [**мсивиевмодифи**](/windows/desktop/api/Msiquery/nf-msiquery-msiviewmodify) , чтобы вставить запись в таблицу. При вызове настраиваемого действия потоковые данные копируются во временный файл, который затем обрабатывается в зависимости от типа настраиваемого действия.

## <a name="type-value"></a>Значение типа

Включите следующие биты флагов в столбец Type [таблицы CustomAction](customaction-table.md) , чтобы указать базовый числовой тип.



| Константы                                                          | Шестнадцатеричный | Decimal |
|--------------------------------------------------------------------|-------------|---------|
| **мсидбкустомактионтипедлл**  +  **мсидбкустомактионтипебинаридата** | 0x001       | 1       |



 

## <a name="target"></a>Целевой объект

Библиотека DLL вызывается через точку входа с именем в поле Target [таблицы CustomAction](customaction-table.md), передавая один аргумент, который является обработчиком текущего сеанса установки. Имя точки входа, указанное в таблице, должно совпадать с именем, экспортированным из библиотеки DLL. Обратите внимание, что если функция записи не указана с помощью. DEF-файл или спецификация "/EXPORT: компоновщик" имя может содержать символ подчеркивания в начале и @4 суффикс "". Вызываемая функция должна задавать \_ \_ соглашение о вызовах STDCALL.

## <a name="return-processing-options"></a>Параметры обработки возвращаемых значений

Включите дополнительные биты флага в столбец Type [таблицы CustomAction](customaction-table.md) , чтобы указать параметры обработки возвращаемых данных. Описание параметров и значений см. в разделе [Параметры обработки возвращаемых пользовательских действий](custom-action-return-processing-options.md).

## <a name="execution-scheduling-options"></a>Параметры планирования выполнения

Включите дополнительные биты флагов в столбец Type [таблицы CustomAction](customaction-table.md) , чтобы указать параметры планирования выполнения. Эти параметры управляют несколькими выполнениями пользовательских действий. Описание параметров см. в разделе [Параметры планирования выполнения пользовательских действий](custom-action-execution-scheduling-options.md).

## <a name="in-script-execution-options"></a>Параметры выполнения In-Script

Включите дополнительные биты флага в столбец Type [таблицы CustomAction](customaction-table.md) , чтобы указать параметр выполнения в скрипте. Эти параметры копируют код действия в скрипт выполнения, отката или фиксации. Описание параметров см. в разделе [пользовательские действия In-Script параметры выполнения](custom-action-in-script-execution-options.md).

## <a name="return-values"></a>Возвращаемые значения

См. раздел [возвращаемые значения пользовательских действий](custom-action-return-values.md).

## <a name="remarks"></a>Комментарии

Для пользовательского действия, которое вызывает библиотеку динамической компоновки (DLL), требуется маркер сеанса установки. Если это также отложенное настраиваемое действие выполнения, сеанс может больше не существовать во время выполнения скрипта установки. Сведения о том, как пользовательское действие этого типа может получить сведения о контексте, см. в разделе [Получение контекстных сведений для отложенного выполнения настраиваемых действий](obtaining-context-information-for-deferred-execution-custom-actions.md).

При экспорте таблицы базы данных каждый поток записывается в виде отдельного файла в подпапке с именем после таблицы с использованием первичного ключа в качестве имени файла (столбца имени для двоичной таблицы) и расширения по умолчанию ". ИБД". Имя должно использовать формат 8,3, если файловая система или система управления версиями не поддерживает длинные имена файлов. Файл постоянного архива заменяет данные потока с использованием имени файла, чтобы при импорте таблицы можно было найти данные.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Настраиваемые \_ действия](custom-actions.md)
</dt> <dt>

[Библиотеки динамической компоновки](dynamic-link-libraries.md)
</dt> <dt>

[Получение сведений о контексте для отложенных настраиваемых действий выполнения](obtaining-context-information-for-deferred-execution-custom-actions.md)
</dt> </dl>

 

 



