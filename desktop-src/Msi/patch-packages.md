---
description: Установщик Windows исправление (MSP-файл) — это файл, который используется для доставки обновлений приложениям установщик Windows.
ms.assetid: f59736d7-0b5a-466c-ab60-f210ccccb07f
title: Пакеты исправлений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 56b4bb5b7e182c8118f5a40c45be440784b92099
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103812857"
---
# <a name="patch-packages"></a><span data-ttu-id="6dd64-103">Пакеты исправлений</span><span class="sxs-lookup"><span data-stu-id="6dd64-103">Patch Packages</span></span>

<span data-ttu-id="6dd64-104">Установщик Windows исправление (MSP-файл) — это файл, который используется для доставки обновлений приложениям установщик Windows.</span><span class="sxs-lookup"><span data-stu-id="6dd64-104">A Windows Installer patch (.msp file) is a file used to deliver updates to Windows Installer applications.</span></span> <span data-ttu-id="6dd64-105">Исправление представляет собой автономный пакет, содержащий все сведения, необходимые для обновления приложения.</span><span class="sxs-lookup"><span data-stu-id="6dd64-105">The patch is a self-contained package that contains all the information required to update the application.</span></span> <span data-ttu-id="6dd64-106">Пакет исправлений (MSP-файл) может быть намного меньше, чем установщик Windows пакет (MSI-файл) для всего обновленного приложения.</span><span class="sxs-lookup"><span data-stu-id="6dd64-106">A patch package (.msp file) can be much smaller than the Windows Installer package (.msi file) for the entire updated application.</span></span> <span data-ttu-id="6dd64-107">Дополнительные сведения о доставке небольших обновлений в приложения см. в разделе [уменьшение размера исправления](reducing-patch-size.md).</span><span class="sxs-lookup"><span data-stu-id="6dd64-107">For more information about delivering smaller updates to applications, see [Reducing Patch Size](reducing-patch-size.md).</span></span>

<span data-ttu-id="6dd64-108">Пакет исправлений содержит фактические обновления приложения и описывает, какие версии приложения могут получить исправление.</span><span class="sxs-lookup"><span data-stu-id="6dd64-108">A patch package contains the actual updates to the application and describes which versions of the application can receive the patch.</span></span> <span data-ttu-id="6dd64-109">Исправления содержат не менее двух преобразований баз данных.</span><span class="sxs-lookup"><span data-stu-id="6dd64-109">Patches contain at minimum two database transforms.</span></span> <span data-ttu-id="6dd64-110">Одно преобразование обновляет сведения в базе данных установки приложения.</span><span class="sxs-lookup"><span data-stu-id="6dd64-110">One transform updates the information in the installation database of the application.</span></span> <span data-ttu-id="6dd64-111">Другое преобразование добавляет сведения, используемые установщиком для файлов исправлений.</span><span class="sxs-lookup"><span data-stu-id="6dd64-111">The other transform adds information that the installer uses for patching files.</span></span> <span data-ttu-id="6dd64-112">Установщик использует сведения, предоставляемые преобразованиями для применения файлов исправлений, которые хранятся в потоке CAB-файлов пакета исправлений.</span><span class="sxs-lookup"><span data-stu-id="6dd64-112">The installer uses the information provided by the transforms to apply patch files that are stored in the cabinet file stream of the patch package.</span></span> <span data-ttu-id="6dd64-113">У пакета исправлений нет базы данных, такой как установочный пакет (MSI-файл).</span><span class="sxs-lookup"><span data-stu-id="6dd64-113">A patch package does not have a database like an installation package (.msi file.)</span></span>

<span data-ttu-id="6dd64-114">Начиная с версии установщик Windows 3,0, пакеты исправлений могут содержать сведения, описывающие последовательность исправлений для исправления относительно других обновлений в таблице [мсипатчсекуенце](msipatchsequence-table.md) , а также дополнительные описательные сведения в таблице [мсипатчметадата](msipatchmetadata-table.md) .</span><span class="sxs-lookup"><span data-stu-id="6dd64-114">Beginning with Windows Installer version 3.0, patch packages can contain information that describe the patching sequence for the patch relative to other updates in the [MsiPatchSequence](msipatchsequence-table.md) table and additional descriptive information in the [MsiPatchMetadata](msipatchmetadata-table.md) table.</span></span>

<span data-ttu-id="6dd64-115">Пользователи могут устанавливать приложения и обновления из административного сетевого образа.</span><span class="sxs-lookup"><span data-stu-id="6dd64-115">Users can install applications and updates from a network administrative image.</span></span> <span data-ttu-id="6dd64-116">Хотя пакеты исправлений можно применять к административным установкам, рекомендуемым методом для доставки обновлений является установка исходного приложения пользователями, а затем применение исправлений к локальному экземпляру приложения на своем компьютере.</span><span class="sxs-lookup"><span data-stu-id="6dd64-116">Although patch packages can be applied to administrative installations, the recommended method to deliver updates is to have users install the original application and then apply the patches to the local instance of the application on to their computer.</span></span> <span data-ttu-id="6dd64-117">Это позволяет пользователям синхронизироваться с административным образом.</span><span class="sxs-lookup"><span data-stu-id="6dd64-117">This keeps users in synchronization with the administrative image.</span></span> <span data-ttu-id="6dd64-118">Если к административной установке применяется исправление, все клиенты этой административной установки должны повторно кэшироваться и переустановить приложение для получения обновления.</span><span class="sxs-lookup"><span data-stu-id="6dd64-118">If a patch is applied to the administrative installation, all clients of that administrative installation must recache and reinstall the application to receive the update.</span></span> <span data-ttu-id="6dd64-119">До повторного кэширования и переустановки пользователя пользователь не сможет выполнить установку по запросу и восстановить установки из исправленной административной установки.</span><span class="sxs-lookup"><span data-stu-id="6dd64-119">Until a user recaches and reinstalls, the user is unable to install-on-demand and repair installations from the patched administrative installation.</span></span>

<span data-ttu-id="6dd64-120">Начиная с установщик Windows 3,0, пользователи, не являющиеся администраторами, могут устанавливать исправления для приложений, управляемых пользователем, после того как исправление будет утверждено администратором как доверенное.</span><span class="sxs-lookup"><span data-stu-id="6dd64-120">Beginning with Windows Installer 3.0, non-administrators can apply patches to per-user-managed applications after the patch has been approved as trusted by an administrator.</span></span> <span data-ttu-id="6dd64-121">Дополнительные сведения о том, как это сделать, см. в статье об [установке исправлений Per-User управляемых приложениях](patching-per-user-managed-applications.md).</span><span class="sxs-lookup"><span data-stu-id="6dd64-121">For more information on how to do this, see [Patching Per-User Managed Applications](patching-per-user-managed-applications.md).</span></span> <span data-ttu-id="6dd64-122">Другой способ — использовать исправление учетной записи пользователя с минимальными правами.</span><span class="sxs-lookup"><span data-stu-id="6dd64-122">Another method is to use least privileged user account patching.</span></span>

> [!Note]  
> <span data-ttu-id="6dd64-123">Если задана политика [алловлоккдовнпатч](allowlockdownpatch.md) , пользователи без прав администратора могут применить исправление к существующему приложению при выполнении установки с повышенными привилегиями.</span><span class="sxs-lookup"><span data-stu-id="6dd64-123">If the [AllowLockdownPatch](allowlockdownpatch.md) policy has been set, non-administrator users can apply a patch to an existing application while running an installation at elevated privileges.</span></span> <span data-ttu-id="6dd64-124">Этот метод не рекомендуется, так как он позволяет применять ненадежные исправления к приложению, которое может выполняться с повышенными привилегиями.</span><span class="sxs-lookup"><span data-stu-id="6dd64-124">This method is not recommended because it enables untrusted patches to be applied to an application that can run with elevated privileges.</span></span>

 

<span data-ttu-id="6dd64-125">Пакеты исправлений состоят из следующих частей.</span><span class="sxs-lookup"><span data-stu-id="6dd64-125">Patch packages are comprised of the following parts.</span></span> <span data-ttu-id="6dd64-126">Дополнительные сведения о создании пакетов исправлений см. в разделе [Создание пакета исправлений](creating-a-patch-package.md).</span><span class="sxs-lookup"><span data-stu-id="6dd64-126">For more information about the construction of patch packages, see [Creating a Patch Package](creating-a-patch-package.md).</span></span>

## <a name="summary-information-stream"></a><span data-ttu-id="6dd64-127">Сводный поток информации</span><span class="sxs-lookup"><span data-stu-id="6dd64-127">Summary Information Stream</span></span>

<span data-ttu-id="6dd64-128">Информационный поток сводки пакета исправлений содержит сведения об удостоверении и назначении исправления.</span><span class="sxs-lookup"><span data-stu-id="6dd64-128">The summary information stream of the patch package provides information about the identity and purpose of the patch.</span></span>

<span data-ttu-id="6dd64-129">Информационный поток сводки содержит как минимум следующее:</span><span class="sxs-lookup"><span data-stu-id="6dd64-129">The summary information stream holds a minimum of the following:</span></span>

-   <span data-ttu-id="6dd64-130">Идентификатор GUID, однозначно определяющий исправление.</span><span class="sxs-lookup"><span data-stu-id="6dd64-130">A GUID that uniquely identifies the patch.</span></span> <span data-ttu-id="6dd64-131">Идентификатор GUID для этого исправления добавляется со списком идентификаторов GUID для более ранних исправлений, замененных этим исправлением.</span><span class="sxs-lookup"><span data-stu-id="6dd64-131">The GUID for this patch is appended with a list of GUIDs for earlier patches that are replaced by this patch.</span></span>
-   <span data-ttu-id="6dd64-132">Разделенный точками с запятой список кодов продуктов для допустимых целевых объектов для этого исправления.</span><span class="sxs-lookup"><span data-stu-id="6dd64-132">A semicolon-delimited list of product codes for valid targets for this patch.</span></span>
-   <span data-ttu-id="6dd64-133">Разделенный точками с запятой список преобразованных имен подхранилищ в том порядке, в котором они должны быть обработаны.</span><span class="sxs-lookup"><span data-stu-id="6dd64-133">A semicolon-delimited list of transform substorage names in the order they are to be processed.</span></span>
-   <span data-ttu-id="6dd64-134">Разделенный точками с запятой список источников для этого исправления.</span><span class="sxs-lookup"><span data-stu-id="6dd64-134">A semicolon-delimited list of sources for this patch.</span></span>

## <a name="transform-substorage"></a><span data-ttu-id="6dd64-135">Преобразование подхранилища</span><span class="sxs-lookup"><span data-stu-id="6dd64-135">Transform Substorage</span></span>

<span data-ttu-id="6dd64-136">Пакет исправлений содержит преобразования, которые могут добавлять или удалять файлы, записи реестра, пользовательские интерфейсы и настройки.</span><span class="sxs-lookup"><span data-stu-id="6dd64-136">A patch package contains transforms that can add or remove files, registry entries, user interfaces, and customizations.</span></span> <span data-ttu-id="6dd64-137">Преобразования включаются в пакет в качестве вложенных хранилищ.</span><span class="sxs-lookup"><span data-stu-id="6dd64-137">Transforms are included as substorages in the package.</span></span> <span data-ttu-id="6dd64-138">Пакет исправлений содержит два преобразования для каждой целевой базы данных.</span><span class="sxs-lookup"><span data-stu-id="6dd64-138">A patch package contains two transforms for each target database.</span></span> <span data-ttu-id="6dd64-139">Одно преобразование — это фактические обновления базы данных установки, которое создается на основе различий между исходным и обновленным образами пакета установки.</span><span class="sxs-lookup"><span data-stu-id="6dd64-139">One transform is the actual updates to the installation database and is generated from the differences between the original and updated images of the installation package.</span></span> <span data-ttu-id="6dd64-140">Другое преобразование добавляет записи в таблицы [Patch](patch-table.md), [патчпаккаже](patchpackage-table.md), [Media](media-table.md), [инсталлексекутесекуенце](installexecutesequence-table.md)и [админексекутесекуенце](adminexecutesequence-table.md) .</span><span class="sxs-lookup"><span data-stu-id="6dd64-140">The other transform adds entries to the [Patch](patch-table.md), [PatchPackage](patchpackage-table.md), [Media](media-table.md), [InstallExecuteSequence](installexecutesequence-table.md), and [AdminExecuteSequence](adminexecutesequence-table.md) tables.</span></span> <span data-ttu-id="6dd64-141">Информация во внешнем хранилище связывается с конкретным [**UpgradeCode**](upgradecode.md), [**ProductCode**](productcode.md), [**ProductVersion**](productversion.md)и [**продуктлангуаже**](productlanguage.md).</span><span class="sxs-lookup"><span data-stu-id="6dd64-141">Information in the substorage ties it to a specific [**UpgradeCode**](upgradecode.md), [**ProductCode**](productcode.md), [**ProductVersion**](productversion.md), and [**ProductLanguage**](productlanguage.md).</span></span> <span data-ttu-id="6dd64-142">Пакет исправлений, который можно применить к нескольким целям, содержит более одной пары этих преобразований.</span><span class="sxs-lookup"><span data-stu-id="6dd64-142">A patch package that can be applied to multiple targets contains more than one pair of these transforms.</span></span>

## <a name="cabinet-file-stream"></a><span data-ttu-id="6dd64-143">Поток CAB-файлов</span><span class="sxs-lookup"><span data-stu-id="6dd64-143">Cabinet File Stream</span></span>

<span data-ttu-id="6dd64-144">Поток CAB-файлов, содержащийся в исправлении, может содержать файлы следующих типов:</span><span class="sxs-lookup"><span data-stu-id="6dd64-144">The cabinet file stream included in a patch can contain these types of files:</span></span>

-   <span data-ttu-id="6dd64-145">Файлы исправлений, содержащие сведения, необходимые для изменения старой версии файла в новую версию.</span><span class="sxs-lookup"><span data-stu-id="6dd64-145">Patch files containing the information required to change the old version of the file into the new version.</span></span> <span data-ttu-id="6dd64-146">Для обновления одной или более старых версий файла можно использовать один файл обновления.</span><span class="sxs-lookup"><span data-stu-id="6dd64-146">A single patch file can be used to update one or more old versions of a file.</span></span>
-   <span data-ttu-id="6dd64-147">Дополнительные файлы добавляются в приложение, которое отсутствует в старой версии.</span><span class="sxs-lookup"><span data-stu-id="6dd64-147">Additional files being added to the application that are not present in the old version.</span></span>
-   <span data-ttu-id="6dd64-148">Полный файл замены.</span><span class="sxs-lookup"><span data-stu-id="6dd64-148">An entire replacement file.</span></span> <span data-ttu-id="6dd64-149">В редких случаях, когда новая версия файла меньше, чем исправление, необходимое для обновления старой версии этого файла, новый файл может быть включен полностью.</span><span class="sxs-lookup"><span data-stu-id="6dd64-149">In the rare case where the new version of a file is smaller than the patch required to update the old version of that file, the new file can be included in its entirety.</span></span> <span data-ttu-id="6dd64-150">Это новые файлы, которые устанавливаются со старыми версиями.</span><span class="sxs-lookup"><span data-stu-id="6dd64-150">These are new files that are installed over their old versions.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6dd64-151">См. также</span><span class="sxs-lookup"><span data-stu-id="6dd64-151">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6dd64-152">Создание пакета исправлений</span><span class="sxs-lookup"><span data-stu-id="6dd64-152">Creating a Patch Package</span></span>](creating-a-patch-package.md)
</dt> </dl>

 

 



