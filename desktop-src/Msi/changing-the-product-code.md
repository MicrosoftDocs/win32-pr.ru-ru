---
description: Код продукта — это идентификатор GUID, который является основным идентификатором приложения или продукта. См. коды продуктов.
ms.assetid: 4de84885-587d-405f-ba85-d62e09e8ba92
title: Изменение кода продукта
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a0272f1901ef60342f01f4db091e7a4e62b28e30
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104080680"
---
# <a name="changing-the-product-code"></a><span data-ttu-id="198c9-104">Изменение кода продукта</span><span class="sxs-lookup"><span data-stu-id="198c9-104">Changing the Product Code</span></span>

<span data-ttu-id="198c9-105">Код продукта — это идентификатор GUID, который является основным идентификатором приложения или продукта.</span><span class="sxs-lookup"><span data-stu-id="198c9-105">The product code is a GUID that is the principal identification of an application or product.</span></span> <span data-ttu-id="198c9-106">См. [коды продуктов](product-codes.md).</span><span class="sxs-lookup"><span data-stu-id="198c9-106">See [Product Codes](product-codes.md).</span></span>

<span data-ttu-id="198c9-107">Обновление, которое соответствует следующим рекомендациям, обычно не требует изменения кода продукта и может быть обработано как [небольшое обновление](small-updates.md), или если версия изменяется, как [незначительное обновление](minor-upgrades.md):</span><span class="sxs-lookup"><span data-stu-id="198c9-107">An update that meets the following guidelines generally does not require a change of the product code and can be handled as a [small update](small-updates.md), or if the version is to change, as a [minor upgrade](minor-upgrades.md):</span></span>

-   <span data-ttu-id="198c9-108">Обновление может увеличить или уменьшить дерево компонентов компонентов, но не должно реорганизовывать существующую иерархию компонентов и компонентов, описываемых в таблицах [функций](feature-table.md) и [феатурекомпонентс](featurecomponents-table.md) .</span><span class="sxs-lookup"><span data-stu-id="198c9-108">The update can enlarge or reduce the feature-component tree but it must not reorganize the existing hierarchy of features and components described by the [Feature](feature-table.md) and [FeatureComponents](featurecomponents-table.md) tables.</span></span> <span data-ttu-id="198c9-109">Он может добавить новую функцию в существующее дерево компонентов компонента.</span><span class="sxs-lookup"><span data-stu-id="198c9-109">It can add a new feature to the existing feature-component tree.</span></span> <span data-ttu-id="198c9-110">Если он удаляет родительский компонент, он также должен удалить все дочерние функции удаленного компонента.</span><span class="sxs-lookup"><span data-stu-id="198c9-110">If it removes a parent feature, it must also remove all the child features of the removed feature.</span></span>
-   <span data-ttu-id="198c9-111">Обновление может добавить новый компонент в новую или существующую функцию.</span><span class="sxs-lookup"><span data-stu-id="198c9-111">The update can add a new component to a new or an existing feature.</span></span>
-   <span data-ttu-id="198c9-112">Обновление не должно изменять код компонента любого компонента.</span><span class="sxs-lookup"><span data-stu-id="198c9-112">The update must not change the component code of any component.</span></span> <span data-ttu-id="198c9-113">Таким образом, небольшое обновление или незначительные обновления не должны изменять имя файла ключа компонента, так как для этого потребуется изменить код компонента.</span><span class="sxs-lookup"><span data-stu-id="198c9-113">Consequently, a small update or minor upgrade must never change the name of a component's key file because this would require changing the component code.</span></span>
-   <span data-ttu-id="198c9-114">Обновление не должно изменять имя MSI файла пакета установки.</span><span class="sxs-lookup"><span data-stu-id="198c9-114">The update must not change the name of the .msi file of the installation package.</span></span> <span data-ttu-id="198c9-115">Вместо этого, поскольку он изменяет пакет, он должен изменить код пакета.</span><span class="sxs-lookup"><span data-stu-id="198c9-115">Instead, because it modifies the package, it should change the package code.</span></span> <span data-ttu-id="198c9-116">Обратите внимание, что это означает, что обновление может изменять таблицы, настраиваемые действия и диалоги в MSI, не изменяя имя файла.</span><span class="sxs-lookup"><span data-stu-id="198c9-116">Note that this means that the update can change the tables, custom actions, and dialogs in the .msi file without changing the file's name.</span></span>
-   <span data-ttu-id="198c9-117">Обновление может добавлять, удалять или изменять файлы, разделы реестра или ярлыки компонентов, которые не являются общими для двух или более компонентов.</span><span class="sxs-lookup"><span data-stu-id="198c9-117">The update can add, remove, or modify the files, registry keys, or shortcuts of components that are not shared by two or more features.</span></span> <span data-ttu-id="198c9-118">Если обновление изменяет файл с версией, версия этого файла должна быть увеличена в [таблице File](file-table.md).</span><span class="sxs-lookup"><span data-stu-id="198c9-118">If the update modifies a versioned file, that file's version must be incremented in the [File table](file-table.md).</span></span> <span data-ttu-id="198c9-119">Если обновление удаляет ресурсы, необходимо также обновить таблицы [ремовефиле](removefile-table.md) и [ремоверегистри](removeregistry-table.md) , чтобы удалить все неиспользуемые файлы, разделы реестра или ярлыки, которые уже были установлены.</span><span class="sxs-lookup"><span data-stu-id="198c9-119">If the update removes resources, it should also update the [RemoveFile](removefile-table.md) and [RemoveRegistry](removeregistry-table.md) tables to remove any unused files, registry keys, or shortcuts that have already been installed.</span></span>
-   <span data-ttu-id="198c9-120">Обновление компонента, совместно используемого двумя или более компонентами, должно быть обратно совместимо со всеми приложениями и функциями, которые используют этот компонент.</span><span class="sxs-lookup"><span data-stu-id="198c9-120">The update of a component that is shared by two or more features must be backward compatible with all applications and features that use the component.</span></span> <span data-ttu-id="198c9-121">Обновление может изменить ресурс общего компонента, например файлы, записи реестра и ярлыки, при условии, что изменения являются обратно совместимыми.</span><span class="sxs-lookup"><span data-stu-id="198c9-121">The update can modify the resource of a shared component, such as files, registry entries, and shortcuts, as long as the changes are backward compatible.</span></span> <span data-ttu-id="198c9-122">Не рекомендуется добавлять или удалять файлы, записи реестра или ярлыки из общего компонента.</span><span class="sxs-lookup"><span data-stu-id="198c9-122">It is not recommended that the update add or remove files, registry entries, or shortcuts from a shared component.</span></span>
-   <span data-ttu-id="198c9-123">Небольшое обновление поставляется как [пакет исправлений](patch-packages.md)установщик Windows.</span><span class="sxs-lookup"><span data-stu-id="198c9-123">A small update is shipped as a Windows Installer [patch package](patch-packages.md).</span></span> <span data-ttu-id="198c9-124">(Полный компакт-диск с продуктом обычно не предоставляется при небольшом обновлении.)</span><span class="sxs-lookup"><span data-stu-id="198c9-124">(A full product CD-ROM is usually not provided with a small update.)</span></span>

<span data-ttu-id="198c9-125">Код продукта необходимо изменить, если для обновления выполняется одно из следующих условий.</span><span class="sxs-lookup"><span data-stu-id="198c9-125">The product code must be changed if any of the following are true for the update:</span></span>

-   <span data-ttu-id="198c9-126">Одновременно должна быть возможна установка одновременно существующих и оригинальных и обновленных продуктов в одной системе.</span><span class="sxs-lookup"><span data-stu-id="198c9-126">Coexisting installations of both original and updated products on the same system must be possible.</span></span>
-   <span data-ttu-id="198c9-127">Имя MSI файла было изменено.</span><span class="sxs-lookup"><span data-stu-id="198c9-127">The name of the .msi file has been changed.</span></span>
-   <span data-ttu-id="198c9-128">Изменился код компонента существующего компонента.</span><span class="sxs-lookup"><span data-stu-id="198c9-128">The component code of an existing component has changed.</span></span>
-   <span data-ttu-id="198c9-129">Компонент удаляется из существующей функции.</span><span class="sxs-lookup"><span data-stu-id="198c9-129">A component is removed from an existing feature.</span></span>
-   <span data-ttu-id="198c9-130">Существующая функция была сделана в дочернем элементе существующей функции.</span><span class="sxs-lookup"><span data-stu-id="198c9-130">An existing feature has been made into a child of an existing feature.</span></span>
-   <span data-ttu-id="198c9-131">Существующая дочерняя функция была удалена из ее родительского компонента.</span><span class="sxs-lookup"><span data-stu-id="198c9-131">An existing child feature has been removed from its parent feature.</span></span>

<span data-ttu-id="198c9-132">Обратите внимание, что добавление новой дочерней функции, полностью состоящей из новых компонентов, к существующей функции не требует изменения кода продукта.</span><span class="sxs-lookup"><span data-stu-id="198c9-132">Note that adding a new child feature, consisting entirely of new components, to an existing feature does not require changing the product code.</span></span>

<span data-ttu-id="198c9-133">Новые дочерние функции могут быть созданы путем включения Мсидбфеатуреаттрибутесфолловпарент и Мсидбфеатуреаттрибутесуидисалловабсент в поле Attributes [таблицы Feature](feature-table.md).</span><span class="sxs-lookup"><span data-stu-id="198c9-133">New child features can be authored by including msidbFeatureAttributesFollowParent and msidbFeatureAttributesUIDisallowAbsent in the Attributes field of the [Feature table](feature-table.md).</span></span> <span data-ttu-id="198c9-134">Если при незначительном обновлении добавляются только новые дочерние компоненты, то для принудительной установки новых дочерних компонентов достаточно переустановить = ALL.</span><span class="sxs-lookup"><span data-stu-id="198c9-134">If the minor upgrade only adds new child features, then REINSTALL=ALL is sufficient to force the installation of the new child features.</span></span> <span data-ttu-id="198c9-135">Дополнительные сведения см. в разделе [Управление состояниями выбора компонентов](controlling-feature-selection-states.md).</span><span class="sxs-lookup"><span data-stu-id="198c9-135">For more information, see [Controlling Feature Selection States](controlling-feature-selection-states.md).</span></span>

<span data-ttu-id="198c9-136">Новая дочерняя функция может быть скрыта от пользователя.</span><span class="sxs-lookup"><span data-stu-id="198c9-136">A new child feature may be hidden from the user.</span></span> <span data-ttu-id="198c9-137">Чтобы синхронизировать состояние установки новой дочерней функции с ее родительским компонентом, установите биты Мсидбфеатуреаттрибутесфолловпарент и Мсидбфеатуреаттрибутесуидисалловабсент для дочерней функции.</span><span class="sxs-lookup"><span data-stu-id="198c9-137">To synchronize the installation state of a new child feature with its parent feature, set the msidbFeatureAttributesFollowParent and msidbFeatureAttributesUIDisallowAbsent bits for the child feature.</span></span>

## <a name="related-topics"></a><span data-ttu-id="198c9-138">См. также</span><span class="sxs-lookup"><span data-stu-id="198c9-138">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="198c9-139">Сведения о свойствах</span><span class="sxs-lookup"><span data-stu-id="198c9-139">About Properties</span></span>](about-properties.md)
</dt> <dt>

[<span data-ttu-id="198c9-140">Использование свойств</span><span class="sxs-lookup"><span data-stu-id="198c9-140">Using Properties</span></span>](using-properties.md)
</dt> <dt>

[<span data-ttu-id="198c9-141">Справочник по свойствам</span><span class="sxs-lookup"><span data-stu-id="198c9-141">Property Reference</span></span>](property-reference.md)
</dt> </dl>

 

 



