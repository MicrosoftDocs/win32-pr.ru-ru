---
description: Назначение отложенного выполнения настраиваемого действия заключается в задержке выполнения системного изменения на время выполнения скрипта установки.
ms.assetid: 79bf4d0b-624d-4652-8c4f-0ecd928a88e3
title: Пользовательские действия отложенного выполнения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e09b91793f5d5bbc7be7099c92f8d8f212012d12
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103998823"
---
# <a name="deferred-execution-custom-actions"></a>Пользовательские действия отложенного выполнения

Назначение отложенного выполнения настраиваемого действия заключается в задержке выполнения системного изменения на время выполнения скрипта установки. Это отличается от обычного настраиваемого действия или стандартного действия, в котором установщик выполняет действие немедленно при его возникновении в таблице последовательности или при вызове [**мсидоактион**](/windows/desktop/api/Msiquery/nf-msiquery-msidoactiona). Пользовательское действие отложенного выполнения позволяет автору пакета указывать системные операции в определенной точке выполнения скрипта установки.

Установщик не выполняет настраиваемое действие отложенного выполнения во время обработки последовательности установки. Вместо этого установщик записывает пользовательское действие в скрипт установки. Единственным параметром режима, который устанавливает установщик в этом случае, является МСИРУНМОДЕ \_ Schedule. Описание параметров режима выполнения см. в разделе [**мсижетмоде**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode) .

Пользовательское действие отложенного выполнения должно быть запланировано в таблице выполнение последовательности в разделе, который выполняет создание скрипта. Пользовательские действия отложенного выполнения должны следовать после [инсталлинитиализе](installinitialize-action.md) и предшествовать [функции InstallFinalize](installfinalize-action.md) в последовательности действий.

Настраиваемые действия, которые задают свойства, состояния компонентов, состояния компонентов или целевые каталоги или планируют системные операции путем вставки строк в таблицы последовательности, во многих случаях могут безопасно использовать немедленное выполнение. Однако пользовательские действия, которые изменяют систему напрямую или вызывают другую системную службу, должны быть отложены до момента выполнения сценария установки. Дополнительные сведения о возможных конфликтах между настраиваемыми действиями и основным потоком установки см. в разделе [синхронные и асинхронные настраиваемые действия](synchronous-and-asynchronous-custom-actions.md) .

Поскольку сценарий установки может выполняться вне сеанса установки, в котором он был записан, сеанс может больше не существовать во время выполнения сценария установки. Это означает, что исходный обработчик сеанса и данные свойства, установленные во время последовательности установки, недоступны для отложенного настраиваемого действия выполнения. Отложенные пользовательские действия, вызывающие библиотеки динамической компоновки (DLL), передают маркер, который может использоваться только для получения очень ограниченного объема информации, как описано в разделе [Получение сведений о контексте для отложенного выполнения настраиваемых действий](obtaining-context-information-for-deferred-execution-custom-actions.md).

Обратите внимание, что отложенные настраиваемые действия, включая [откат настраиваемых действий](rollback-custom-actions.md) и [фиксация настраиваемых действий](commit-custom-actions.md), являются единственными типами действий, которые могут выполняться вне контекста безопасности пользователей.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Параметры выполнения In-Script настраиваемого действия](custom-action-in-script-execution-options.md)
</dt> <dt>

[Ссылка на настраиваемое действие](custom-action-reference.md)
</dt> </dl>

 

 



