---
description: В этих разделах описывается исправление установки установщик Windows.
ms.assetid: e3c233bc-4344-449e-9e79-1a3b96ad2d08
title: установка исправлений;
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8c3117723bda1699eeae341fc75db201421f6ae0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105664583"
---
# <a name="patching"></a><span data-ttu-id="ad13d-103">установка исправлений;</span><span class="sxs-lookup"><span data-stu-id="ad13d-103">Patching</span></span>

<span data-ttu-id="ad13d-104">Приложение, которое было установлено с помощью Microsoft установщик Windows, может быть обновлено путем переустановки обновленного пакета установки (MSI-файла) или путем применения исправления установщик Windows (MSP-файл) к приложению.</span><span class="sxs-lookup"><span data-stu-id="ad13d-104">An application that has been installed using the Microsoft Windows Installer can be upgraded by reinstalling an updated installation package (.msi file), or by applying a Windows Installer patch (an .msp file) to the application.</span></span>

<span data-ttu-id="ad13d-105">Установщик Windows исправление (MSP-файл) представляет собой автономный пакет, содержащий обновления для приложения, и сведения о том, какие версии приложения могут получить данное исправление.</span><span class="sxs-lookup"><span data-stu-id="ad13d-105">A Windows Installer patch (.msp file) is a self-contained package that contains the updates to the application and describes which versions of the application can receive the patch.</span></span> <span data-ttu-id="ad13d-106">Исправления содержат как минимум два преобразования базы данных и могут содержать файлы исправлений, которые хранятся в потоке CAB-файлов пакета исправлений.</span><span class="sxs-lookup"><span data-stu-id="ad13d-106">Patches contain at a minimum, two database transforms and can contain patch files that are stored in the cabinet file stream of the patch package.</span></span> <span data-ttu-id="ad13d-107">Дополнительные сведения о частях пакета исправлений установщик Windows см. в разделе [пакеты исправлений](patch-packages.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-107">For more information about the parts of a Windows Installer patch package, see [Patch Packages](patch-packages.md).</span></span>

<span data-ttu-id="ad13d-108">Обслуживание приложений путем предоставления установщик Windows исправления, а не полного пакета установки для обновленного продукта, может иметь свои преимущества.</span><span class="sxs-lookup"><span data-stu-id="ad13d-108">Servicing applications by delivering a Windows Installer patch, rather than a complete installation package for the updated product can have advantages.</span></span> <span data-ttu-id="ad13d-109">Исправление может содержать весь файл или только биты файлов, необходимые для обновления части файла.</span><span class="sxs-lookup"><span data-stu-id="ad13d-109">A patch can contain an entire file or only the file bits necessary to update part of the file.</span></span> <span data-ttu-id="ad13d-110">Это позволяет пользователю загрузить обновление, которое намного меньше, чем установочный пакет для всего продукта.</span><span class="sxs-lookup"><span data-stu-id="ad13d-110">This can enable the user to download an upgrade patch that is much smaller than the installation package for the entire product.</span></span> <span data-ttu-id="ad13d-111">Обновление, использующее исправление, может сохранить пользовательскую настройку приложения при помощи обновления.</span><span class="sxs-lookup"><span data-stu-id="ad13d-111">An update using a patch can preserve a user customization of the application through the upgrade.</span></span>

<span data-ttu-id="ad13d-112">\* \* Установщик Windows 4,5 и более поздних версий: \* \*</span><span class="sxs-lookup"><span data-stu-id="ad13d-112">\*\*Windows Installer 4.5 and later:  \*\*</span></span>

<span data-ttu-id="ad13d-113">Начиная с установщик Windows 4,5, разработчики могут помечать компоненты в исправлении значением **мсидбкомпонентаттрибутесунинсталлонсуперседенце** в [таблице Component](component-table.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-113">Beginning with Windows Installer 4.5, developers can mark components in a patch with the **msidbComponentAttributesUninstallOnSupersedence** value in the [Component table](component-table.md).</span></span> <span data-ttu-id="ad13d-114">Если последующее исправление установлено, для которого в [таблице мсипатчсекуенце](msipatchsequence-table.md) помечается значение **мсидбпатчсекуенцесуперседиарлиер** , чтобы заменить первое исправление, установщик Windows 4,5 и более поздних версий могут отменить регистрацию и удаление компонентов, помеченных **мсидбкомпонентаттрибутесунинсталлонсуперседенце** , чтобы предотвратить освобождение от неиспользуемых компонентов на компьютере.</span><span class="sxs-lookup"><span data-stu-id="ad13d-114">If a subsequent patch is installed, marked with the **msidbPatchSequenceSupersedeEarlier** value in its [MsiPatchSequence table](msipatchsequence-table.md) to supersede the first patch, Windows Installer 4.5 and later can unregister and uninstall components marked **msidbComponentAttributesUninstallOnSupersedence** to prevent leaving behind unused components on the computer.</span></span> <span data-ttu-id="ad13d-115">Если компонент не помечен с помощью этого бита, установка заменяющего исправления может оставить неиспользуемый компонент на компьютере.</span><span class="sxs-lookup"><span data-stu-id="ad13d-115">If the component is not marked with with this bit, installation of the superseding patch can leave an unused component on the computer.</span></span> <span data-ttu-id="ad13d-116">Установка свойства **мсиунинсталлсуперседедкомпонентс** оказывает тот же результат, что и установка этого бита для всех компонентов.</span><span class="sxs-lookup"><span data-stu-id="ad13d-116">Setting the **MSIUNINSTALLSUPERSEDEDCOMPONENTS** property has the same effect as setting this bit for all components.</span></span>

<span data-ttu-id="ad13d-117">\* \* Установщик Windows 3,0 и более поздних версий: \* \*</span><span class="sxs-lookup"><span data-stu-id="ad13d-117">\*\*Windows Installer 3.0 and later:  \*\*</span></span>

<span data-ttu-id="ad13d-118">Разработчики, использующие установщик Windows 3,0 и разрабатывать пакеты исправлений с [таблицей мсипатчсекуенце](msipatchsequence-table.md) , могут создавать пакеты исправлений, которые выполняют следующие действия:</span><span class="sxs-lookup"><span data-stu-id="ad13d-118">Developers who use Windows Installer 3.0, and author patch packages that have the [MsiPatchSequence table](msipatchsequence-table.md) can create patch packages that do the following:</span></span>

-   <span data-ttu-id="ad13d-119">Используйте базовый план продукта, кэшированный установщиком, чтобы упростить обслуживание приложений с меньшими разностными исправлениями.</span><span class="sxs-lookup"><span data-stu-id="ad13d-119">Use the product baseline cached by the installer to more easily service applications with smaller delta patches.</span></span> <span data-ttu-id="ad13d-120">Дополнительные сведения об использовании базовых показателей продукта см. в разделе [уменьшение размера исправления](reducing-patch-size.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-120">For more information about using the product baseline, see [Reducing Patch Size](reducing-patch-size.md).</span></span>
-   <span data-ttu-id="ad13d-121">Пропустить действия, связанные с конкретными таблицами, которые не были изменены с помощью исправления.</span><span class="sxs-lookup"><span data-stu-id="ad13d-121">Skip actions associated with specific tables that are unmodified by the patch.</span></span> <span data-ttu-id="ad13d-122">Это может значительно сократить время, необходимое для установки исправления.</span><span class="sxs-lookup"><span data-stu-id="ad13d-122">This can significantly reduce the time required to install the patch.</span></span> <span data-ttu-id="ad13d-123">Дополнительные сведения о том, какие таблицы можно пропустить, см. в разделе [Оптимизация исправлений](patch-optimization.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-123">For more information about which tables can be skipped, see [Patch Optimization](patch-optimization.md).</span></span>
-   <span data-ttu-id="ad13d-124">Создание и установка исправлений, которые могут быть удалены отдельно и в любом порядке без удаления и повторной установки всего приложения и других исправлений.</span><span class="sxs-lookup"><span data-stu-id="ad13d-124">Create and install patches that can be uninstalled singly, and in any order, without having to uninstall and reinstall the entire application and other patches.</span></span> <span data-ttu-id="ad13d-125">Дополнительные сведения об удалении исправлений см. в разделе [Удаление исправлений](removing-patches.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-125">For more information about uninstalling patches, see [Removing Patches](removing-patches.md).</span></span>
-   <span data-ttu-id="ad13d-126">Устанавливайте исправления в постоянном порядке независимо от порядка, в котором в систему передаются исправления.</span><span class="sxs-lookup"><span data-stu-id="ad13d-126">Apply patches in a constant order regardless of the order that the patches are provided to the system.</span></span> <span data-ttu-id="ad13d-127">Дополнительные сведения о том, как установщик Windows определяет последовательность, используемую для применения исправлений, см. в разделе [виртуализация исправлений](sequencing-patches.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-127">For more information about how the Windows Installer determines the sequence used to apply patches, see [Sequencing Patches](sequencing-patches.md).</span></span>
-   <span data-ttu-id="ad13d-128">Применение исправлений к приложению, которое было установлено в контексте, управляемом пользователем.</span><span class="sxs-lookup"><span data-stu-id="ad13d-128">Apply patches to an application that has been installed in a per-user-managed context.</span></span> <span data-ttu-id="ad13d-129">Дополнительные сведения см. в разделе [Установка исправлений Per-User управляемых приложениях](patching-per-user-managed-applications.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-129">For more information, see [Patching Per-User Managed Applications](patching-per-user-managed-applications.md).</span></span>

<span data-ttu-id="ad13d-130">\* \* Установщик Windows 2,0: \* \*</span><span class="sxs-lookup"><span data-stu-id="ad13d-130">\*\*Windows Installer 2.0:  \*\*</span></span>

<span data-ttu-id="ad13d-131">[Таблица мсипатчсекуенце](msipatchsequence-table.md) не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="ad13d-131">The [MsiPatchSequence table](msipatchsequence-table.md) is not supported.</span></span> <span data-ttu-id="ad13d-132">Начиная с установщик Windows 3,0, пакеты исправлений могут содержать сведения, описывающие последовательность исправлений для исправления относительно других обновлений и дополнительных описательных сведений.</span><span class="sxs-lookup"><span data-stu-id="ad13d-132">Beginning with Windows Installer 3.0, patch packages can contain information that describes the patching sequence for the patch relative to other updates and additional descriptive information.</span></span>

<span data-ttu-id="ad13d-133">Рекомендуемый способ создания пакета исправлений — использование средств создания исправлений, таких как [Msimsp.exe](msimsp-exe.md) и [Patchwiz.dll](patchwiz-dll.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-133">The recommended method for creating a patch package is to use patch creation tools such as [Msimsp.exe](msimsp-exe.md) and [Patchwiz.dll](patchwiz-dll.md).</span></span> <span data-ttu-id="ad13d-134">Разработчики могут создать файл создания исправления, как описано в разделе [Создание пакета исправлений](creating-a-patch-package.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-134">Developers can generate a patch creation file as described in the section: [Creating a Patch Package](creating-a-patch-package.md).</span></span> <span data-ttu-id="ad13d-135">Создание небольшого исправления обновления описано в разделе [Пример исправления для малого обновления](a-small-update-patching-example.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-135">The creation of a small update patch is described in the section: [A Small Update Patching Example](a-small-update-patching-example.md).</span></span>

<span data-ttu-id="ad13d-136">Microsoft установщик Windows принимает URL-адрес в качестве допустимого источника для исправления.</span><span class="sxs-lookup"><span data-stu-id="ad13d-136">Microsoft Windows Installer accepts a Uniform Resource Locator (URL) as a valid source for a patch.</span></span> <span data-ttu-id="ad13d-137">Дополнительные сведения о том, как установить исправление, расположенное на веб-сервере, см. в статье [Загрузка и установка исправления из Интернета](downloading-and-installing-a-patch-from-the-internet.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-137">For more information about how to install a patch located on a Web server, see [Downloading and Installing a Patch From the Internet](downloading-and-installing-a-patch-from-the-internet.md).</span></span>

<span data-ttu-id="ad13d-138">Одно исправление установщик Windows (MSP-файл) можно применить к установочному пакету при первой установке приложения.</span><span class="sxs-lookup"><span data-stu-id="ad13d-138">A single Windows Installer patch (.msp file) can be applied to the installation package when installing an application for the first time.</span></span> <span data-ttu-id="ad13d-139">Дополнительные сведения см. в разделе Установка [исправлений первоначальных установок](patching-initial-installations.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-139">For more information, see [Patching Initial Installations](patching-initial-installations.md).</span></span>

<span data-ttu-id="ad13d-140">Невозможно устранить все обстоятельства, когда приложению обновления может потребоваться доступ к исходному источнику установки.</span><span class="sxs-lookup"><span data-stu-id="ad13d-140">It is not possible to eliminate all circumstances when the application of a patch may require access to the original installation source.</span></span> <span data-ttu-id="ad13d-141">Однако, чтобы не допустить, чтобы исправление потребовало доступа к исходному источнику, придерживайтесь точек, перечисленных в следующем разделе: [предотвращение необходимости доступа к исходному источнику установки для исправления](preventing-a-patch-from-requiring-access-to-the-original-installation-source.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-141">However, to minimize the possibility that your patch will require access to the original source, adhere to the points listed in the following section: [Preventing a Patch from Requiring Access to the Original Installation Source](preventing-a-patch-from-requiring-access-to-the-original-installation-source.md).</span></span>

<span data-ttu-id="ad13d-142">Чтобы максимально ограничить вероятность того, что исправление не будет разбиваться при следующем преобразовании настроек, обычно устанавливается исправление, а затем Настройка.</span><span class="sxs-lookup"><span data-stu-id="ad13d-142">To minimize the possibility that your patch is not broken by a subsequent customization transform, typically the patch is installed first, followed by the customization.</span></span> <span data-ttu-id="ad13d-143">Предварительная установка преобразований настроек, а затем исправление, может привести к нарушению настройки.</span><span class="sxs-lookup"><span data-stu-id="ad13d-143">Installing customization transforms first, and then the patch, may break the customization.</span></span> <span data-ttu-id="ad13d-144">Дополнительные сведения об исправлении настраиваемых приложений см. в разделе [исправление настраиваемых приложений](patching-customized-applications.md).</span><span class="sxs-lookup"><span data-stu-id="ad13d-144">For more information about patching customized applications, see [Patching Customized Applications](patching-customized-applications.md).</span></span>

 

 



