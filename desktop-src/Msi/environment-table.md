---
description: Таблица среда используется для задания значений переменных среды.
ms.assetid: f7106ed6-706f-4e57-989f-030066bcecd3
title: Таблица среды
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d7a4db2e33c01685bdc40475f659e1b03b69b6c6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105683232"
---
# <a name="environment-table"></a><span data-ttu-id="d6758-103">Таблица среды</span><span class="sxs-lookup"><span data-stu-id="d6758-103">Environment Table</span></span>

<span data-ttu-id="d6758-104">Таблица среда используется для задания значений переменных среды.</span><span class="sxs-lookup"><span data-stu-id="d6758-104">The Environment table is used to set the values of environment variables.</span></span>

<span data-ttu-id="d6758-105">Таблица среда содержит следующие столбцы.</span><span class="sxs-lookup"><span data-stu-id="d6758-105">The Environment table has the following columns.</span></span>



| <span data-ttu-id="d6758-106">Столбец</span><span class="sxs-lookup"><span data-stu-id="d6758-106">Column</span></span>      | <span data-ttu-id="d6758-107">Type</span><span class="sxs-lookup"><span data-stu-id="d6758-107">Type</span></span>                         | <span data-ttu-id="d6758-108">Ключ</span><span class="sxs-lookup"><span data-stu-id="d6758-108">Key</span></span> | <span data-ttu-id="d6758-109">Допускает значения NULL</span><span class="sxs-lookup"><span data-stu-id="d6758-109">Nullable</span></span> |
|-------------|------------------------------|-----|----------|
| <span data-ttu-id="d6758-110">Среда</span><span class="sxs-lookup"><span data-stu-id="d6758-110">Environment</span></span> | [<span data-ttu-id="d6758-111">Идентификатор</span><span class="sxs-lookup"><span data-stu-id="d6758-111">Identifier</span></span>](identifier.md) | <span data-ttu-id="d6758-112">Да</span><span class="sxs-lookup"><span data-stu-id="d6758-112">Y</span></span>   | <span data-ttu-id="d6758-113">Нет</span><span class="sxs-lookup"><span data-stu-id="d6758-113">N</span></span>        |
| <span data-ttu-id="d6758-114">Имя</span><span class="sxs-lookup"><span data-stu-id="d6758-114">Name</span></span>        | [<span data-ttu-id="d6758-115">Text</span><span class="sxs-lookup"><span data-stu-id="d6758-115">Text</span></span>](text.md)             | <span data-ttu-id="d6758-116">Нет</span><span class="sxs-lookup"><span data-stu-id="d6758-116">N</span></span>   | <span data-ttu-id="d6758-117">Нет</span><span class="sxs-lookup"><span data-stu-id="d6758-117">N</span></span>        |
| <span data-ttu-id="d6758-118">Значение</span><span class="sxs-lookup"><span data-stu-id="d6758-118">Value</span></span>       | [<span data-ttu-id="d6758-119">Формате</span><span class="sxs-lookup"><span data-stu-id="d6758-119">Formatted</span></span>](formatted.md)   | <span data-ttu-id="d6758-120">Нет</span><span class="sxs-lookup"><span data-stu-id="d6758-120">N</span></span>   | <span data-ttu-id="d6758-121">Да</span><span class="sxs-lookup"><span data-stu-id="d6758-121">Y</span></span>        |
| <span data-ttu-id="d6758-122">Компонент\_</span><span class="sxs-lookup"><span data-stu-id="d6758-122">Component\_</span></span> | [<span data-ttu-id="d6758-123">Идентификатор</span><span class="sxs-lookup"><span data-stu-id="d6758-123">Identifier</span></span>](identifier.md) | <span data-ttu-id="d6758-124">Нет</span><span class="sxs-lookup"><span data-stu-id="d6758-124">N</span></span>   | <span data-ttu-id="d6758-125">Нет</span><span class="sxs-lookup"><span data-stu-id="d6758-125">N</span></span>        |



 

## <a name="columns"></a><span data-ttu-id="d6758-126">Столбцы</span><span class="sxs-lookup"><span data-stu-id="d6758-126">Columns</span></span>

<dl> <dt>

<span data-ttu-id="d6758-127"><span id="Environment"></span><span id="environment"></span><span id="ENVIRONMENT"></span>PXE</span><span class="sxs-lookup"><span data-stu-id="d6758-127"><span id="Environment"></span><span id="environment"></span><span id="ENVIRONMENT"></span>Environment</span></span>
</dt> <dd>

<span data-ttu-id="d6758-128">Это первичный ключ таблицы, который является нелокализованным маркером.</span><span class="sxs-lookup"><span data-stu-id="d6758-128">This is the primary key of the table and is a non-localized token.</span></span>

</dd> <dt>

<span data-ttu-id="d6758-129"><span id="Name"></span><span id="name"></span><span id="NAME"></span>Безымян</span><span class="sxs-lookup"><span data-stu-id="d6758-129"><span id="Name"></span><span id="name"></span><span id="NAME"></span>Name</span></span>
</dt> <dd>

<span data-ttu-id="d6758-130">Этот столбец представляет собой Локализуемое имя переменной среды.</span><span class="sxs-lookup"><span data-stu-id="d6758-130">This column is the localizable name of the environment variable.</span></span> <span data-ttu-id="d6758-131">Значения ключа записываются или удаляются в зависимости от того, какие символы в следующей таблице являются префиксами имени.</span><span class="sxs-lookup"><span data-stu-id="d6758-131">The key values are written or removed depending upon which of the characters in the following table are prefixed to the name.</span></span> <span data-ttu-id="d6758-132">Порядок символов, используемых в префиксе, не влияет.</span><span class="sxs-lookup"><span data-stu-id="d6758-132">There is no effect in the ordering of the symbols used in a prefix.</span></span>



| <span data-ttu-id="d6758-133">Prefix</span><span class="sxs-lookup"><span data-stu-id="d6758-133">Prefix</span></span>                         | <span data-ttu-id="d6758-134">Описание</span><span class="sxs-lookup"><span data-stu-id="d6758-134">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| =                              | <span data-ttu-id="d6758-135">Создайте переменную среды, если она не существует, и настройте ее во время установки.</span><span class="sxs-lookup"><span data-stu-id="d6758-135">Create the environment variable if it does not exist, and then set it during installation.</span></span> <span data-ttu-id="d6758-136">Если переменная среды существует, настройте ее во время установки.</span><span class="sxs-lookup"><span data-stu-id="d6758-136">If the environment variable exists, set it during the installation.</span></span>                                                                                                                                                                                                                                                                                                                                   |
| \+                             | <span data-ttu-id="d6758-137">Создайте переменную среды, если она не существует, и настройте ее во время установки.</span><span class="sxs-lookup"><span data-stu-id="d6758-137">Create the environment variable if it does not exist, then set it during installation.</span></span> <span data-ttu-id="d6758-138">Это не влияет на значение переменной среды, если оно уже существует.</span><span class="sxs-lookup"><span data-stu-id="d6758-138">This has no effect on the value of the environment variable if it already exists.</span></span>                                                                                                                                                                                                                                                                                                                         |
| \-                             | <span data-ttu-id="d6758-139">Удалите переменную среды при удалении компонента.</span><span class="sxs-lookup"><span data-stu-id="d6758-139">Remove the environment variable when the component is removed.</span></span> <span data-ttu-id="d6758-140">Этот символ можно сочетать с любым префиксом.</span><span class="sxs-lookup"><span data-stu-id="d6758-140">This symbol can be combined with any prefix.</span></span>                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="d6758-141">!</span><span class="sxs-lookup"><span data-stu-id="d6758-141">!</span></span>                              | <span data-ttu-id="d6758-142">Удалите переменную среды во время установки.</span><span class="sxs-lookup"><span data-stu-id="d6758-142">Remove the environment variable during an installation.</span></span> <span data-ttu-id="d6758-143">Установщик удаляет переменную среды во время установки, если имя и значение переменной соответствуют записям в полях имя и значение таблицы среда.</span><span class="sxs-lookup"><span data-stu-id="d6758-143">The installer only removes an environment variable during an installation if the name and value of the variable match the entries in the Name and Value fields of the Environment table.</span></span> <span data-ttu-id="d6758-144">Если вы хотите удалить переменную среды, независимо от ее значения, используйте синтаксис "!" и оставьте поле "значение" пустым.</span><span class="sxs-lookup"><span data-stu-id="d6758-144">If you want to remove an environment variable, regardless of its value, use the '!' syntax, and leave the Value field empty.</span></span>                                                                                                                    |
| \*                             | <span data-ttu-id="d6758-145">Этот префикс используется вместе с Windows 2000 для указания на то, что имя относится к системной переменной среды.</span><span class="sxs-lookup"><span data-stu-id="d6758-145">This prefix is used with Windows 2000 to indicate that the name refers to a system environment variable.</span></span> <span data-ttu-id="d6758-146">Если звездочка отсутствует, установщик записывает переменную в среду пользователя.</span><span class="sxs-lookup"><span data-stu-id="d6758-146">If no asterisk is present, the installer writes the variable to the user's environment.</span></span> <span data-ttu-id="d6758-147">Этот символ можно сочетать с любым префиксом.</span><span class="sxs-lookup"><span data-stu-id="d6758-147">This symbol can be combined with any prefix.</span></span> <span data-ttu-id="d6758-148">Пакет, используемый для установки в [контексте установки](installation-context.md) на компьютере, должен записывать переменные среды в среду компьютера, включив \* в столбец имя.</span><span class="sxs-lookup"><span data-stu-id="d6758-148">A package that is used for installation in the per-machine [installation context](installation-context.md) should write environment variables to the machine's environment by including \* in the Name column.</span></span> <span data-ttu-id="d6758-149">Дополнительные сведения см. в подразделе "Примечания".</span><span class="sxs-lookup"><span data-stu-id="d6758-149">For more information, see Remarks.</span></span> |
| =-                             | <span data-ttu-id="d6758-150">Переменная среды задается при установке и удаляется при удалении.</span><span class="sxs-lookup"><span data-stu-id="d6758-150">The environment variable is set on install and removed on uninstall.</span></span> <span data-ttu-id="d6758-151">Это обычное поведение.</span><span class="sxs-lookup"><span data-stu-id="d6758-151">This is the usual behavior.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="d6758-152">!-</span><span class="sxs-lookup"><span data-stu-id="d6758-152">!-</span></span>                             | <span data-ttu-id="d6758-153">Удаляет переменную среды во время установки или удаления.</span><span class="sxs-lookup"><span data-stu-id="d6758-153">Removes an environment variable during an install or uninstall.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="d6758-154">=+ !+</span><span class="sxs-lookup"><span data-stu-id="d6758-154">=+ !+</span></span><br/> <span data-ttu-id="d6758-155">!=</span><span class="sxs-lookup"><span data-stu-id="d6758-155">!=</span></span><br/> | <span data-ttu-id="d6758-156">Эти префиксы не являются допустимыми</span><span class="sxs-lookup"><span data-stu-id="d6758-156">These are not a valid prefixes</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |



 

<span data-ttu-id="d6758-157">Если поле значения в таблице содержит \[ ~ \] , то символы префикса применяются только к указанной части строки.</span><span class="sxs-lookup"><span data-stu-id="d6758-157">If the Value field in the table includes a \[~\], then the prefix characters apply to only the specified portion of the string.</span></span> <span data-ttu-id="d6758-158">Использование \[ ~ \] описано ниже в разделе столбец значений.</span><span class="sxs-lookup"><span data-stu-id="d6758-158">The use of \[~\] is described below in the Value column section.</span></span>

<span data-ttu-id="d6758-159">Переменная среды удаляется, если поле значения таблицы пустое.</span><span class="sxs-lookup"><span data-stu-id="d6758-159">The environment variable is removed if the Value field of the table is blank.</span></span> <span data-ttu-id="d6758-160">Таким образом, если в поле значения указано пустое значение, префикс = удаляет переменную среды при установке, а префикс — удаляет все текущие значения при удалении.</span><span class="sxs-lookup"><span data-stu-id="d6758-160">Therefore, with a blank in the Value field, an = prefix deletes the environment variable on install and a - prefix deletes any current values on uninstall.</span></span>

</dd> <dt>

<span data-ttu-id="d6758-161"><span id="Value"></span><span id="value"></span><span id="VALUE"></span>Значений</span><span class="sxs-lookup"><span data-stu-id="d6758-161"><span id="Value"></span><span id="value"></span><span id="VALUE"></span>Value</span></span>
</dt> <dd>

<span data-ttu-id="d6758-162">Этот столбец содержит локализуемое значение, которое должно быть задано в виде форматированной строки.</span><span class="sxs-lookup"><span data-stu-id="d6758-162">This column contains the localizable value that is to be set as a formatted string.</span></span> <span data-ttu-id="d6758-163">См. раздел [форматированный](formatted.md).</span><span class="sxs-lookup"><span data-stu-id="d6758-163">See [Formatted](formatted.md).</span></span> <span data-ttu-id="d6758-164">Если оставить это поле пустым, переменная будет удалена.</span><span class="sxs-lookup"><span data-stu-id="d6758-164">If this field is left blank, the variable is removed.</span></span> <span data-ttu-id="d6758-165">Если поле пусто, а строка в поле имени предваряется символом-Symbol, то переменная удаляется только при удалении компонента.</span><span class="sxs-lookup"><span data-stu-id="d6758-165">If the field is blank and the string in the Name field is prefixed by the - symbol, the variable is removed only when the component is removed.</span></span>

<span data-ttu-id="d6758-166">Чтобы добавить значение в конец существующей переменной, добавьте к строке в этом поле префикс null \[ ~ \] и символ разделителя.</span><span class="sxs-lookup"><span data-stu-id="d6758-166">To append a value to the end of an existing variable, prefix the string in this field by the Null character \[~\] and the separator character.</span></span> <span data-ttu-id="d6758-167">Например, если точка с запятой является выбранным разделителем: \[ ~ \] ;*Значение*.</span><span class="sxs-lookup"><span data-stu-id="d6758-167">For example, if the semicolon is the chosen separator: \[~\];*Value*.</span></span>

<span data-ttu-id="d6758-168">Чтобы добавить в начало существующей переменной значение, добавьте строку в это поле в качестве разделителя и символа NULL \[ ~ \] .</span><span class="sxs-lookup"><span data-stu-id="d6758-168">To prefix a value to the front of an existing variable, append the string in this field by the separator character and the Null character \[~\].</span></span> <span data-ttu-id="d6758-169">Например, если точка с запятой является выбранным разделителем: *value*; \[ ~ \] .</span><span class="sxs-lookup"><span data-stu-id="d6758-169">For example, if the semicolon is the chosen separator: *Value*;\[~\] .</span></span>

<span data-ttu-id="d6758-170">Если \[ ~ \] в поле отсутствует, строка представляет все значение, которое необходимо установить или удалить.</span><span class="sxs-lookup"><span data-stu-id="d6758-170">If no \[~\] is present in the field, the string represents the entire value to be set or deleted.</span></span>

<span data-ttu-id="d6758-171">Каждая строка может содержать только одно значение.</span><span class="sxs-lookup"><span data-stu-id="d6758-171">Each row can contain only one value.</span></span> <span data-ttu-id="d6758-172">Например, *значение* записи; *Значение* \[ ~ ; \] является более одного значения и не следует использовать, так как это приводит к непредсказуемым результатам.</span><span class="sxs-lookup"><span data-stu-id="d6758-172">For example, the entry *Value*;*Value*;\[~\] is more than one value and should not be used because it causes unpredictable results.</span></span> <span data-ttu-id="d6758-173">*Значение* записи; \[ ~ \] является всего лишь одним значением.</span><span class="sxs-lookup"><span data-stu-id="d6758-173">The entry *Value*;\[~\] is just one value.</span></span>

<span data-ttu-id="d6758-174">Если параметр name имеет префикс +, то \[ ~ \] он не должен использоваться в столбце значение.</span><span class="sxs-lookup"><span data-stu-id="d6758-174">If Name is prefixed with +, then \[~\] must not be used in Value column.</span></span> <span data-ttu-id="d6758-175">Это связано с тем, что смысл «+» и « \[ ~ \] » явно не отличаются друг от друга.</span><span class="sxs-lookup"><span data-stu-id="d6758-175">This is because the meaning of "+" and "\[~\]" are clearly exclusive of one another.</span></span>

</dd> <dt>

<span data-ttu-id="d6758-176"><span id="Component_"></span><span id="component_"></span><span id="COMPONENT_"></span>См\_</span><span class="sxs-lookup"><span data-stu-id="d6758-176"><span id="Component_"></span><span id="component_"></span><span id="COMPONENT_"></span>Component\_</span></span>
</dt> <dd>

<span data-ttu-id="d6758-177">Внешний ключ к первому столбцу [таблицы Component](component-table.md).</span><span class="sxs-lookup"><span data-stu-id="d6758-177">An external key to the first column of the [Component table](component-table.md).</span></span> <span data-ttu-id="d6758-178">Этот столбец ссылается на компонент, который управляет установкой значений среды.</span><span class="sxs-lookup"><span data-stu-id="d6758-178">This column references the component that controls the installation of the environment values.</span></span>

</dd> </dl>

## <a name="remarks"></a><span data-ttu-id="d6758-179">Комментарии</span><span class="sxs-lookup"><span data-stu-id="d6758-179">Remarks</span></span>

<span data-ttu-id="d6758-180">Чтобы установщик задали переменные среды, необходимо указать [действие вритинвиронментстрингс](writeenvironmentstrings-action.md) и [действие Ремовинвиронментстрингс](removeenvironmentstrings-action.md) в [таблице инсталлексекутесекуенце](installexecutesequence-table.md).</span><span class="sxs-lookup"><span data-stu-id="d6758-180">For the installer to set environment variables, the [WriteEnvironmentStrings action](writeenvironmentstrings-action.md) and [RemoveEnvironmentStrings action](removeenvironmentstrings-action.md) need to be listed in the [InstallExecuteSequence Table](installexecutesequence-table.md).</span></span>

<span data-ttu-id="d6758-181">Обратите внимание, что переменные среды не меняются для выполняемой установки при выполнении действия [вритинвиронментстрингс](writeenvironmentstrings-action.md) или [ремовинвиронментстрингс](removeenvironmentstrings-action.md) .</span><span class="sxs-lookup"><span data-stu-id="d6758-181">Note that environment variables do not change for the installation in progress when either the [WriteEnvironmentStrings action](writeenvironmentstrings-action.md) or [RemoveEnvironmentStrings action](removeenvironmentstrings-action.md) are run.</span></span> <span data-ttu-id="d6758-182">В Windows 2000 эта информация хранится в реестре, а сообщение уведомляет об изменениях системы после завершения установки.</span><span class="sxs-lookup"><span data-stu-id="d6758-182">On Windows 2000, this information is stored in the registry and a message notifies the system of changes when the installation completes.</span></span> <span data-ttu-id="d6758-183">Новый процесс или другой процесс, проверяющий эти сообщения, использует новые переменные среды.</span><span class="sxs-lookup"><span data-stu-id="d6758-183">A new process, or another process that checks for these messages, uses the new environment variables.</span></span>

<span data-ttu-id="d6758-184">При изменении переменной среды Path с помощью таблицы Environment не пытайтесь явно ввести весь новый путь в поле значение.</span><span class="sxs-lookup"><span data-stu-id="d6758-184">When modifying the path environment variable with the Environment table, do not attempt to enter the entire new path explicitly into the Value field.</span></span> <span data-ttu-id="d6758-185">Вместо этого Расширьте существующий путь путем добавления значения и разделителя (;) в \[ ~ \] .</span><span class="sxs-lookup"><span data-stu-id="d6758-185">Instead, extend the existing path by prefixing or appending a value and delimiter (;) to \[~\].</span></span> <span data-ttu-id="d6758-186">Если \[ ~ \] в поле значение отсутствует, то существующие сведения о пути теряются, а установка MSI-файла может препятствовать загрузке компьютера.</span><span class="sxs-lookup"><span data-stu-id="d6758-186">If \[~\] is not present in the Value field, the existing path information is lost and installing the .msi file may prevent the computer from booting.</span></span> <span data-ttu-id="d6758-187">Переменная path в основном обычно задается с помощью синтаксиса: \[ ~ \] ; Значений.</span><span class="sxs-lookup"><span data-stu-id="d6758-187">The path variable is mostly commonly set using the syntax: \[~\];Value.</span></span>

<span data-ttu-id="d6758-188">При выполнении установки на компьютере с сервера терминалов установщик записывает переменные среды для каждого пользователя в **HKU \\ . \\Среда по умолчанию**.</span><span class="sxs-lookup"><span data-stu-id="d6758-188">When performing per-machine installations from a terminal server, the installer writes per-user environment variables to **HKU\\.Default\\Environment**.</span></span> <span data-ttu-id="d6758-189">Поскольку службы терминалов не реплицируют этот раздел реестра, при установке не устанавливаются переменные среды для отдельных пользователей.</span><span class="sxs-lookup"><span data-stu-id="d6758-189">Because Terminal Services does not replicate this section of the registry, the installation does not set the per-user environment variables.</span></span> <span data-ttu-id="d6758-190">Пакет, используемый для установки на компьютере, должен записывать переменные среды в среду компьютера, включив \* в столбец имя.</span><span class="sxs-lookup"><span data-stu-id="d6758-190">A package used for per-machine installations should write environment variables to the computer's environment by including \* in the Name column.</span></span> <span data-ttu-id="d6758-191">Если пакет может быть установлен отдельно для каждого пользователя или компьютера, создайте два компонента: (1) для каждого пользователя с записями таблицы окружения, созданными для параметров пользователя, и (2) компонент на компьютере с таблицей окружения, созданной для параметров компьютера.</span><span class="sxs-lookup"><span data-stu-id="d6758-191">If the package can be installed per-user or per-machine, create two components: (1) a per-user component with the Environment table entries authored for user settings, and (2) a per-machine component with the Environment table authored for computer settings.</span></span> <span data-ttu-id="d6758-192">Условие установки этого компонента с помощью [**привилегированного**](privileged.md) свойства.</span><span class="sxs-lookup"><span data-stu-id="d6758-192">Condition the installation of this component using the [**Privileged**](privileged.md) property.</span></span>

## <a name="validation"></a><span data-ttu-id="d6758-193">Проверка</span><span class="sxs-lookup"><span data-stu-id="d6758-193">Validation</span></span>

<dl>

[<span data-ttu-id="d6758-194">ICE03</span><span class="sxs-lookup"><span data-stu-id="d6758-194">ICE03</span></span>](ice03.md)  
[<span data-ttu-id="d6758-195">ICE06</span><span class="sxs-lookup"><span data-stu-id="d6758-195">ICE06</span></span>](ice06.md)  
[<span data-ttu-id="d6758-196">ICE32</span><span class="sxs-lookup"><span data-stu-id="d6758-196">ICE32</span></span>](ice32.md)  
[<span data-ttu-id="d6758-197">ICE46</span><span class="sxs-lookup"><span data-stu-id="d6758-197">ICE46</span></span>](ice46.md)  
[<span data-ttu-id="d6758-198">ICE65</span><span class="sxs-lookup"><span data-stu-id="d6758-198">ICE65</span></span>](ice65.md)  
[<span data-ttu-id="d6758-199">ICE69</span><span class="sxs-lookup"><span data-stu-id="d6758-199">ICE69</span></span>](ice69.md)  
[<span data-ttu-id="d6758-200">ICE80</span><span class="sxs-lookup"><span data-stu-id="d6758-200">ICE80</span></span>](ice80.md)  
</dl>

 

 




