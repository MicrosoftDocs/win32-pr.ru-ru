---
description: Чтобы обеспечить безопасность среды во время установки программного обеспечения, придерживайтесь этих рекомендаций при создании пакета установщик Windows.
ms.assetid: 04d91a9b-0528-4acb-8e11-fc817009db1f
title: Рекомендации по созданию безопасных установок
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9d18e66c38480149ddad9e381c6461ffe50cf0b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105650942"
---
# <a name="guidelines-for-authoring-secure-installations"></a><span data-ttu-id="ae859-103">Рекомендации по созданию безопасных установок</span><span class="sxs-lookup"><span data-stu-id="ae859-103">Guidelines for Authoring Secure Installations</span></span>

<span data-ttu-id="ae859-104">Соблюдение следующих рекомендаций при создании пакета установщик Windows помогает поддерживать безопасную среду во время установки:</span><span class="sxs-lookup"><span data-stu-id="ae859-104">Adherence to the following guidelines when authoring a Windows Installer package helps maintain a secure environment during installation:</span></span>

-   <span data-ttu-id="ae859-105">Администраторы должны установить управляемые приложения в целевую папку установки, для которой пользователи без прав администратора не имеют привилегий изменения или изменения.</span><span class="sxs-lookup"><span data-stu-id="ae859-105">Administrators should install managed applications into a target installation folder for which non-admin users do not have change or modify privileges.</span></span>
-   <span data-ttu-id="ae859-106">Установите для любого свойства, установленного пользователем, открытое свойство.</span><span class="sxs-lookup"><span data-stu-id="ae859-106">Make any property set by the user a public property.</span></span> <span data-ttu-id="ae859-107">Закрытые свойства не могут быть изменены пользователем, взаимодействующим с пользовательским интерфейсом.</span><span class="sxs-lookup"><span data-stu-id="ae859-107">Private properties cannot be changed by the user interacting with the user interface.</span></span> <span data-ttu-id="ae859-108">Дополнительные сведения см. в разделе [о свойствах](about-properties.md).</span><span class="sxs-lookup"><span data-stu-id="ae859-108">For information, see [About Properties](about-properties.md).</span></span>
-   <span data-ttu-id="ae859-109">Не используйте свойства для паролей и других сведений, которые должны оставаться защищенными.</span><span class="sxs-lookup"><span data-stu-id="ae859-109">Do not use properties for passwords or other information that must remain secure.</span></span> <span data-ttu-id="ae859-110">Установщик может записать значение свойства, созданного в [таблице свойств](property-table.md), или во время выполнения, в журнал или системный реестр.</span><span class="sxs-lookup"><span data-stu-id="ae859-110">The installer may write the value of a property authored into the [Property table](property-table.md), or created at run time, into a log or the system registry.</span></span> <span data-ttu-id="ae859-111">Дополнительные сведения см. в разделе [предотвращение записи конфиденциальной информации в файл журнала](preventing-confidential-information-from-being-written-into-the-log-file.md).</span><span class="sxs-lookup"><span data-stu-id="ae859-111">For additional information, see [Preventing Confidential Information from Being Written into the Log File](preventing-confidential-information-from-being-written-into-the-log-file.md).</span></span>
-   <span data-ttu-id="ae859-112">Если для установки требуется, чтобы установщик использовал [*повышенные*](e-gly.md) привилегии, используйте [ограниченные общие свойства](restricted-public-properties.md) , чтобы ограничить общие свойства, которые пользователь может изменять.</span><span class="sxs-lookup"><span data-stu-id="ae859-112">When the installation requires the installer to use [*elevated*](e-gly.md) privileges, use [Restricted Public Properties](restricted-public-properties.md) to restrict the public properties a user can change.</span></span> <span data-ttu-id="ae859-113">Некоторые ограничения обычно необходимы для обеспечения безопасной среды, когда установка требует, чтобы установщик использовал *повышенные* привилегии.</span><span class="sxs-lookup"><span data-stu-id="ae859-113">Some restrictions are commonly necessary to maintain a secure environment when the installation requires the installer to use *elevated* privileges.</span></span>
-   <span data-ttu-id="ae859-114">Избегайте установки служб, имитирующих привилегии конкретного пользователя, так как это может записать данные безопасности в журнал или системный реестр.</span><span class="sxs-lookup"><span data-stu-id="ae859-114">Avoid installing services that impersonate the privileges of a particular user because this may write security data into a log or the system registry.</span></span> <span data-ttu-id="ae859-115">Это создает потенциальную проблему безопасности, конфликт паролей или потери данных конфигурации при перезапуске системы.</span><span class="sxs-lookup"><span data-stu-id="ae859-115">This creates potential for a security problem, password conflict, or the loss of configuration data when the system is restarted.</span></span> <span data-ttu-id="ae859-116">Дополнительные сведения см. в разделе [сервицеинсталл Table](serviceinstall-table.md).</span><span class="sxs-lookup"><span data-stu-id="ae859-116">For details, see [ServiceInstall table](serviceinstall-table.md).</span></span>
-   <span data-ttu-id="ae859-117">Используйте [таблицу локкпермиссионс](lockpermissions-table.md) и [таблицу мсилоккпермиссионсекс](msilockpermissionsex-table.md) для защиты служб, файлов, разделов реестра и созданных папок в заблокированной среде.</span><span class="sxs-lookup"><span data-stu-id="ae859-117">Use the [LockPermissions table](lockpermissions-table.md) and [MsiLockPermissionsEx table](msilockpermissionsex-table.md) to secure services, files, registry keys, and created folders in a locked-down environment.</span></span>
-   <span data-ttu-id="ae859-118">Добавьте в установку цифровые подписи, чтобы обеспечить целостность файлов.</span><span class="sxs-lookup"><span data-stu-id="ae859-118">Add a digital signatures to the installation to ensure the integrity of the files.</span></span> <span data-ttu-id="ae859-119">Дополнительные сведения см. в статьях [цифровые подписи и установщик Windows](digital-signatures-and-windows-installer.md) и [Создание полностью проверенной подписанной установки](authoring-a-fully-verified-signed-installation.md).</span><span class="sxs-lookup"><span data-stu-id="ae859-119">For details, see [Digital Signatures and Windows Installer](digital-signatures-and-windows-installer.md) and [Authoring a Fully Verified Signed Installation](authoring-a-fully-verified-signed-installation.md).</span></span>
-   <span data-ttu-id="ae859-120">Создайте пакет установщик Windows так, что если пользователю отказано в доступе к ресурсам, установка завершается сбоем способом, который поддерживает безопасную среду.</span><span class="sxs-lookup"><span data-stu-id="ae859-120">Author your Windows Installer package such that if the user is denied access to resources, the setup fails in a manner that maintains a secure environment.</span></span> <span data-ttu-id="ae859-121">Проверьте права доступа пользователя и определите, достаточно ли места на диске до начала установки.</span><span class="sxs-lookup"><span data-stu-id="ae859-121">Check the user's access privileges and determine whether there is sufficient disk space before installation begins.</span></span> <span data-ttu-id="ae859-122">Как правило, установщик должен отображать диалоговое окно обзора, только если текущий пользователь является администратором или если установка не требует [*повышенных*](e-gly.md) привилегий.</span><span class="sxs-lookup"><span data-stu-id="ae859-122">Commonly, the installer should only display a browse dialog box if the current user is an administrator or if the installation does not require [*elevated*](e-gly.md) privileges.</span></span> <span data-ttu-id="ae859-123">Дополнительные сведения см. в разделе [устойчивость источника](source-resiliency.md).</span><span class="sxs-lookup"><span data-stu-id="ae859-123">For details, see [Source Resiliency](source-resiliency.md).</span></span>
-   <span data-ttu-id="ae859-124">Используйте [безопасные преобразования](secured-transforms.md) для хранения преобразований в безопасной файловой системе локально на компьютере пользователя.</span><span class="sxs-lookup"><span data-stu-id="ae859-124">Use [Secured Transforms](secured-transforms.md) to store transforms in a secure file system locally on the user's computer.</span></span> <span data-ttu-id="ae859-125">Это не позволит пользователю иметь доступ на запись к преобразованию.</span><span class="sxs-lookup"><span data-stu-id="ae859-125">This prevents the user from having write access to the transform.</span></span>
-   <span data-ttu-id="ae859-126">Сведения о защите источников мультимедиа управляемых приложений см. в разделе [устойчивость источника](source-resiliency.md).</span><span class="sxs-lookup"><span data-stu-id="ae859-126">For information on how to secure media sources of managed applications, see [Source Resiliency](source-resiliency.md).</span></span>
-   <span data-ttu-id="ae859-127">Используйте свойство [**Сводка безопасности**](security-summary.md) , чтобы указать, следует ли открывать пакет только для чтения.</span><span class="sxs-lookup"><span data-stu-id="ae859-127">Use the [**Security Summary**](security-summary.md) Property to indicate whether the package should be opened as read-only.</span></span> <span data-ttu-id="ae859-128">Этому свойству следует присвоить значение "рекомендуется только для чтения" для базы данных установки и принудительно использовать только для чтения для преобразования или исправления.</span><span class="sxs-lookup"><span data-stu-id="ae859-128">This property should be set to read-only recommended for an installation database and to read-only enforced for a transform or patch.</span></span>
-   <span data-ttu-id="ae859-129">Установщик по умолчанию запускает настраиваемые действия с правами пользователя, чтобы ограничить доступ к системе настраиваемых действий.</span><span class="sxs-lookup"><span data-stu-id="ae859-129">The installer runs custom actions with user privileges by default in order to limit the access of custom actions to the system.</span></span> <span data-ttu-id="ae859-130">Установщик может выполнять пользовательские действия с [*повышенными*](e-gly.md) привилегиями при установке управляемого приложения или при указании системной политики для повышенных привилегий.</span><span class="sxs-lookup"><span data-stu-id="ae859-130">The installer may run custom actions with [*elevated*](e-gly.md) privileges if a managed application is being installed or if the system policy has been specified for elevated privileges.</span></span> <span data-ttu-id="ae859-131">Дополнительные сведения см. в разделе [Безопасность настраиваемых действий](custom-action-security.md).</span><span class="sxs-lookup"><span data-stu-id="ae859-131">For details, see [Custom Action Security](custom-action-security.md).</span></span>
-   <span data-ttu-id="ae859-132">Используйте политику [дисаблепатч](disablepatch.md) для обеспечения безопасности в средах, в которых необходимо ограничить установку исправлений.</span><span class="sxs-lookup"><span data-stu-id="ae859-132">Use the [DisablePatch](disablepatch.md) policy to provide security in environments where patching must be restricted.</span></span>
-   <span data-ttu-id="ae859-133">Используйте [таблицу AppID](appid-table.md) для регистрации общих параметров безопасности и конфигурации для объектов DCOM.</span><span class="sxs-lookup"><span data-stu-id="ae859-133">Use the [AppId table](appid-table.md) to register common security and configuration settings for DCOM objects.</span></span>
-   <span data-ttu-id="ae859-134">Связанные сведения см. в разделе [рекомендации по защите настраиваемых действий](guidelines-for-securing-custom-actions.md).</span><span class="sxs-lookup"><span data-stu-id="ae859-134">For related information, see [Guidelines for Securing Custom Actions](guidelines-for-securing-custom-actions.md).</span></span>
-   <span data-ttu-id="ae859-135">Связанные сведения см. [в разделе рекомендации по защите пакетов на заблокированных компьютерах](guidelines-for-securing-packages-on-locked-down-computers.md).</span><span class="sxs-lookup"><span data-stu-id="ae859-135">For related information, see [Guidelines for Securing Packages on Locked-Down Computers](guidelines-for-securing-packages-on-locked-down-computers.md).</span></span>
-   <span data-ttu-id="ae859-136">Начиная с установщик Windows 3,0, [исправление контроля учетных записей пользователей (UAC)](user-account-control--uac--patching.md) позволяет пользователям без прав администратора устанавливать исправления в приложениях, установленных в контексте на компьютере.</span><span class="sxs-lookup"><span data-stu-id="ae859-136">Starting with Windows Installer 3.0, [User Account Control (UAC) Patching](user-account-control--uac--patching.md) enables non-administrator users to patch applications installed in the per-machine context.</span></span> <span data-ttu-id="ae859-137">Исправление контроля учетных записей включается путем предоставления сертификата подписавшим в таблице [мсипатчцертификате](msipatchcertificate-table.md) и подписывания исправлений с помощью того же сертификата.</span><span class="sxs-lookup"><span data-stu-id="ae859-137">UAC patching is enabled by providing a signer certificate in the [MsiPatchCertificate](msipatchcertificate-table.md) table and signing patches with the same certificate.</span></span>
-   <span data-ttu-id="ae859-138">Функция установщик Windows 5,0 для установки разрешений доступа к службам, файлам, созданным папкам и записям реестра может помочь в обеспечении безопасности приложений установки.</span><span class="sxs-lookup"><span data-stu-id="ae859-138">The capability of the Windows Installer 5.0 to set access permissions on services, files, created folders, and registry entries can help make installation applications more secure.</span></span> <span data-ttu-id="ae859-139">Дополнительные сведения см. в разделе [Защита ресурсов](securing-resources-.md).</span><span class="sxs-lookup"><span data-stu-id="ae859-139">For information, see [Securing Resources](securing-resources-.md).</span></span>

 

 



