---
description: При создании 64-разрядного пакета установщик Windows следуйте приведенным ниже рекомендациям.
ms.assetid: e7dfd188-fd4d-49d6-8cf5-c17182b697ca
title: Использование 64-разрядных пакетов установщик Windows
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5b46ab8a9668d816ea99bd92c2575e9ea6367352
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105650961"
---
# <a name="using-64-bit-windows-installer-packages"></a><span data-ttu-id="64412-103">Использование 64-разрядных пакетов установщик Windows</span><span class="sxs-lookup"><span data-stu-id="64412-103">Using 64-Bit Windows Installer Packages</span></span>

<span data-ttu-id="64412-104">При создании [64-разрядных установщик Windows пакетов](64-bit-windows-installer-packages.md) или приложений, вызывающих установщик Windows для установки 64-разрядных пакетов, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="64412-104">When you create [64-bit Windows Installer Packages](64-bit-windows-installer-packages.md) or applications that call Windows Installer to install 64-bit packages, do the following:</span></span>

-   <span data-ttu-id="64412-105">Используйте установщик Windows схему базы данных 200 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="64412-105">Use a Windows Installer database schema of 200 or higher.</span></span> <span data-ttu-id="64412-106">Укажите, что версия 2,0 является минимальной версией установщика, необходимой для установки пакета, задав для свойства " [**сводное число страниц**](page-count-summary.md) " целое число 200.</span><span class="sxs-lookup"><span data-stu-id="64412-106">Specify that version 2.0 is the minimum version of the installer required to install the package by setting the [**Page Count Summary**](page-count-summary.md) property to the integer 200.</span></span> <span data-ttu-id="64412-107">Более ранние версии установщик Windows отклоняются попытки установки 64-разрядных пакетов.</span><span class="sxs-lookup"><span data-stu-id="64412-107">Earlier Windows Installer versions reject attempts to install 64-bit packages.</span></span> <span data-ttu-id="64412-108">Для 64-разрядных пакетов на платформе Arm64 схема базы данных установщик Windows должна быть 500 или выше.</span><span class="sxs-lookup"><span data-stu-id="64412-108">For 64-bit packages on the Arm64 platform, the Windows Installer database schema must be 500 or higher.</span></span>
-   <span data-ttu-id="64412-109">Укажите в свойстве [**Сводка шаблона**](template-summary.md) потока сводных данных о пакете, что это 64-разрядный пакет.</span><span class="sxs-lookup"><span data-stu-id="64412-109">Indicate in the [**Template Summary**](template-summary.md) property of the package summary information stream that this is a 64-bit package.</span></span> <span data-ttu-id="64412-110">Введите "Intel64" в поле "платформа" Свойства " **Сводка" шаблона** , если пакет должен выполняться на процессоре Intel64.</span><span class="sxs-lookup"><span data-stu-id="64412-110">Enter "Intel64" into the platform field of the **Template Summary** property if the package is to be run on an Intel64 processor.</span></span> <span data-ttu-id="64412-111">Введите "x64", если пакет должен выполняться на 64-разрядном расширенном процессоре.</span><span class="sxs-lookup"><span data-stu-id="64412-111">Enter "x64" if the package is to be run on a 64-bit extended processor.</span></span> <span data-ttu-id="64412-112">Введите "Arm64", если пакет должен быть запущен на процессоре Arm64.</span><span class="sxs-lookup"><span data-stu-id="64412-112">Enter “Arm64” if the package is to be run on an Arm64 processor.</span></span> <span data-ttu-id="64412-113">Пакет не может быть помечен как поддерживающий платформы Intel64 и x64, значение свойства **сводки шаблона** "Intel64, x64" недопустимо.</span><span class="sxs-lookup"><span data-stu-id="64412-113">A package cannot be marked as supporting both Intel64 and x64 platforms, a **Template Summary** property value of "Intel64,x64" is invalid.</span></span> <span data-ttu-id="64412-114">Пакет не может быть помечен как поддерживающий как 32-разрядную, так и 64-разрядную платформу. значения свойств "Сводка" для **шаблона** "Intel, x64" и "Intel, Intel64" являются недопустимыми.</span><span class="sxs-lookup"><span data-stu-id="64412-114">A package cannot be marked as supporting both 32-bit and 64-bit platforms, the **Template Summary** property values of "Intel,x64" or "Intel,Intel64" are invalid.</span></span>
-   <span data-ttu-id="64412-115">Определение каждого 64-разрядного компонента путем установки **msidbComponentAttributes64bit** в столбце Attributes таблицы [Component](component-table.md) .</span><span class="sxs-lookup"><span data-stu-id="64412-115">Identify every 64-bit component by setting the **msidbComponentAttributes64bit** in the Attributes column of the [Component](component-table.md) table.</span></span>
-   <span data-ttu-id="64412-116">Используйте необязательные условные операторы, которые проверяют версию 64-разрядной операционной системы, ссылаясь на свойство [**VersionNT64**](versionnt64.md) .</span><span class="sxs-lookup"><span data-stu-id="64412-116">Use optional conditional statements that check the version of the 64-bit operating system by referencing the [**VersionNT64**](versionnt64.md) property.</span></span> <span data-ttu-id="64412-117">Установщик Windows устанавливает это свойство в 64-разрядную версию Windows и оставляет VersionNT64 неопределенным, если операционная система не является 64-разрядной Windows.</span><span class="sxs-lookup"><span data-stu-id="64412-117">Windows Installer sets this property to the 64-bit Windows version and leaves VersionNT64 undefined if the operating system is not 64-bit Windows.</span></span> <span data-ttu-id="64412-118">Дополнительные сведения см. [в разделе Использование свойств в условных инструкциях](using-properties-in-conditional-statements.md).</span><span class="sxs-lookup"><span data-stu-id="64412-118">For more information, see [Using Properties in Conditional Statements](using-properties-in-conditional-statements.md).</span></span>
-   <span data-ttu-id="64412-119">Используйте необязательные условные операторы, которые проверяют числовой уровень процессора компьютера, ссылаясь на свойство [**Intel64**](intel64.md) или [**Msix64**](msix64.md) .</span><span class="sxs-lookup"><span data-stu-id="64412-119">Use optional conditional statements that check the numeric processor level of the computer by referencing the [**Intel64**](intel64.md) or [**Msix64**](msix64.md) property.</span></span> <span data-ttu-id="64412-120">Установщик Windows задает для этих свойств текущий числовой уровень процессора компьютера и оставляет свойство **Intel64** неопределенным, если это не процессор на базе процессоров Itanium.</span><span class="sxs-lookup"><span data-stu-id="64412-120">The Windows Installer  sets these properties to the current numeric processor level of the computer and leaves the **Intel64** Property undefined if this is not an Itanium-based processor.</span></span> <span data-ttu-id="64412-121">Дополнительные сведения см. [в разделе Использование свойств в условных инструкциях](using-properties-in-conditional-statements.md).</span><span class="sxs-lookup"><span data-stu-id="64412-121">For more information, see [Using Properties in Conditional Statements](using-properties-in-conditional-statements.md).</span></span>
-   <span data-ttu-id="64412-122">Используйте [таблицу аппсеарч](appsearch-table.md) и [действие аппсеарч](appsearch-action.md) , чтобы выполнить необязательный Поиск в реестре для существующих 64-разрядных компонентов.</span><span class="sxs-lookup"><span data-stu-id="64412-122">Use the [AppSearch Table](appsearch-table.md) and [AppSearch Action](appsearch-action.md) to do optional searches of the registry for existing 64-bit components.</span></span> <span data-ttu-id="64412-123">Чтобы найти существующие 64-разрядные компоненты, включите бит **msidbLocatorType64bit** в столбец Type [таблицы реглокатор](reglocator-table.md).</span><span class="sxs-lookup"><span data-stu-id="64412-123">To search for existing 64-bit components, include the **msidbLocatorType64bit** bit in the Type column of the [RegLocator Table](reglocator-table.md).</span></span> <span data-ttu-id="64412-124">Дополнительные сведения см. в разделе [Поиск существующих приложений, файлов, записей реестра или свойств записей ini-файлов.](searching-for-existing-applications-files-registry-entries-or--ini-file-entries.md)</span><span class="sxs-lookup"><span data-stu-id="64412-124">For more information, see [Searching for Existing Applications, Files, Registry Entries or .ini File Entries Property](searching-for-existing-applications-files-registry-entries-or--ini-file-entries.md)</span></span>
-   <span data-ttu-id="64412-125">Получите пути к системным папкам, ссылаясь на свойство [**System64Folder**](system64folder.md), свойство [**ProgramFiles64Folder**](programfiles64folder.md) и свойство [**CommonFiles64Folder**](commonfiles64folder.md) для 64-разрядных папок и свойство [**системфолдер**](systemfolder.md) , свойство [**ProgramFilesFolder**](programfilesfolder.md) и свойство [**коммонфилесфолдер**](commonfilesfolder.md) для 32-разрядных папок.</span><span class="sxs-lookup"><span data-stu-id="64412-125">Obtain the paths to system folders by referencing the [**System64Folder**](system64folder.md)Property, [**ProgramFiles64Folder**](programfiles64folder.md) Property, and [**CommonFiles64Folder**](commonfiles64folder.md) Property for the 64-bit folders and the [**SystemFolder**](systemfolder.md) Property, [**ProgramFilesFolder**](programfilesfolder.md) Property, and [**CommonFilesFolder**](commonfilesfolder.md) Property for the 32-bit folders.</span></span>
-   <span data-ttu-id="64412-126">Убедитесь, что приложение использует правильный идентификатор GUID при ссылке на 64-разрядный компонент.</span><span class="sxs-lookup"><span data-stu-id="64412-126">Verify that the application uses the correct GUID when referencing a 64-bit component.</span></span> <span data-ttu-id="64412-127">При наличии 32-разрядных и 64-разрядных версий определенного компонента они должны иметь разные идентификаторы GUID компонента.</span><span class="sxs-lookup"><span data-stu-id="64412-127">If there are 32-bit and 64-bit versions of a specific component, these should have different component ID GUIDs.</span></span>
-   <span data-ttu-id="64412-128">Определите, нужно ли определять новые переменные среды при установке 64-разрядных приложений.</span><span class="sxs-lookup"><span data-stu-id="64412-128">Determine whether any new environment variables need to be defined when installing 64-bit applications.</span></span>
-   <span data-ttu-id="64412-129">Если требуется установить диспетчер драйверов ODBC 64, компонент, который его несет, должен называться ODBCDriverManager64.</span><span class="sxs-lookup"><span data-stu-id="64412-129">If a 64-bit ODBC Driver Manager is to be installed, the component that carries it should be named ODBCDriverManager64.</span></span> <span data-ttu-id="64412-130">Диспетчер драйверов ODBC должен быть создан в пакете установщика, и должен быть добавлен компонент с именем ODBCDriverManager64.</span><span class="sxs-lookup"><span data-stu-id="64412-130">The ODBC Driver Manager must be authored in the installer package and a component named ODBCDriverManager64 must be included.</span></span> <span data-ttu-id="64412-131">При необходимости диспетчер будет установлен.</span><span class="sxs-lookup"><span data-stu-id="64412-131">The manager will be installed if necessary.</span></span>
-   <span data-ttu-id="64412-132">Убедитесь, что приложение вызывает только 32-разрядные службы, запускаемые в качестве исполняемых файлов.</span><span class="sxs-lookup"><span data-stu-id="64412-132">Verify that the application only calls 32-bit services that run as executables.</span></span> <span data-ttu-id="64412-133">Приложения не должны вызывать 32-разрядные службы, выполняемые в библиотеках DLL.</span><span class="sxs-lookup"><span data-stu-id="64412-133">Applications should not call 32-bit services that run in DLLs.</span></span>
-   <span data-ttu-id="64412-134">Если приложение устанавливает сосуществующую 32-разрядную и 64-разрядную версии компонента, убедитесь, что приложение имеет правильные сведения о файле shares. ini.</span><span class="sxs-lookup"><span data-stu-id="64412-134">If the application installs coexisting 32-bit and 64-bit versions of a component, verify that the application shares .ini file information correctly.</span></span>
-   <span data-ttu-id="64412-135">Убедитесь, что приложение применяет только 32-разрядные исправления для 32-разрядных двоичных файлов и 64-разрядных исправлений в 64-разрядные двоичные файлы.</span><span class="sxs-lookup"><span data-stu-id="64412-135">Verify that the application only applies 32-bit patches to 32-bit binaries and 64-bit patches to 64-bit binaries.</span></span>
-   <span data-ttu-id="64412-136">Рекомендуется использовать будущие сценарии обновления как для 32-разрядных, так и для 64-разрядных версий и поддерживать коды обновления.</span><span class="sxs-lookup"><span data-stu-id="64412-136">Consider future upgrade scenarios for both 32-bit and 64-bit versions and maintain upgrade codes.</span></span> <span data-ttu-id="64412-137">Дополнительные сведения см. в разделе [Установка исправлений и обновления](patching-and-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="64412-137">For more information, see [Patching and Upgrades](patching-and-upgrades.md).</span></span>
-   <span data-ttu-id="64412-138">При использовании приложения [начальной загрузки](bootstrapping.md) для установки [64-разрядного пакета установщик Windows](64-bit-windows-installer-packages.md)скомпилируйте приложение начальной загрузки как 64-разрядное приложение.</span><span class="sxs-lookup"><span data-stu-id="64412-138">When using a [bootstrapping](bootstrapping.md) application to install a [64-bit Windows Installer Package](64-bit-windows-installer-packages.md), compile the bootstrapping application as a 64-bit application.</span></span>
-   <span data-ttu-id="64412-139">Чтобы отключить [отражение реестра](../winprog64/registry-reflection.md) для разделов реестра, затронутых определенным компонентом, установите бит **Мсидбкомпонентаттрибутесдисаблерегистрирефлектион** в поле Attributes таблицы [Component](component-table.md) .</span><span class="sxs-lookup"><span data-stu-id="64412-139">To disable [Registry Reflection](../winprog64/registry-reflection.md) for registry keys that are affected by a particular component, set the **msidbComponentAttributesDisableRegistryReflection** bit in the Attributes field of the [Component](component-table.md) table.</span></span> <span data-ttu-id="64412-140">Это может потребоваться для 32-разрядных и 64-разрядных копий одного и того же приложения.</span><span class="sxs-lookup"><span data-stu-id="64412-140">This may be necessary to have 32-bit and 64-bit copies of the same application coexist.</span></span> <span data-ttu-id="64412-141">Если этот бит задан, установщик Windows вызывает функцию [**регдисаблерефлектионкэй**](/windows/win32/api/winreg/nf-winreg-regdisablereflectionkey) для каждого ключа, к которому обращается компонент.</span><span class="sxs-lookup"><span data-stu-id="64412-141">If this bit is set, the Windows Installer calls the [**RegDisableReflectionKey**](/windows/win32/api/winreg/nf-winreg-regdisablereflectionkey) function on each key that is being accessed by the component.</span></span> <span data-ttu-id="64412-142">Этот бит доступен в установщик Windows версии 4,0.</span><span class="sxs-lookup"><span data-stu-id="64412-142">This bit is available with Windows Installer version 4.0.</span></span> <span data-ttu-id="64412-143">Этот бит не учитывается в 32-разрядных системах.</span><span class="sxs-lookup"><span data-stu-id="64412-143">This bit is ignored on 32-bit systems.</span></span> <span data-ttu-id="64412-144">Этот бит не учитывается в 64-разрядных версиях Windows XP и Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="64412-144">This bit is ignored on the 64-bit versions of Windows XP and Windows 2000.</span></span>

> [!Note]  
> <span data-ttu-id="64412-145">Значение числового корня реестра, возвращенное параметром *лппасбуф* функции [**мсижеткомпонентпас**](/windows/desktop/api/Msi/nf-msi-msigetcomponentpatha) , различает компоненты в 32-разрядных и 64-разрядных операционных системах.</span><span class="sxs-lookup"><span data-stu-id="64412-145">The value of the numeric registry root returned by the *lpPathBuf* parameter of the [**MsiGetComponentPath**](/windows/desktop/api/Msi/nf-msi-msigetcomponentpatha) function distinguishes between components on 32-bit and 64-bit operating systems.</span></span> <span data-ttu-id="64412-146">Дополнительные сведения см. в разделе Функция **мсижеткомпонентпас** .</span><span class="sxs-lookup"><span data-stu-id="64412-146">For more information, see **MsiGetComponentPath** function.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="64412-147">См. также</span><span class="sxs-lookup"><span data-stu-id="64412-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="64412-148">64-разрядные пользовательские действия</span><span class="sxs-lookup"><span data-stu-id="64412-148">64-Bit Custom Actions</span></span>](64-bit-custom-actions.md)
</dt> </dl>

 

 
