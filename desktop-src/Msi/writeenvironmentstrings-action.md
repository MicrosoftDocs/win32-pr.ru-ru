---
description: Действие Вритинвиронментстрингс изменяет значения переменных среды.
ms.assetid: a91c1ffe-1bdd-49bb-aa6a-71667a1ed812
title: Действие Вритинвиронментстрингс
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dc3a9d64a1140fc883d94e8d3733608d29dc2d39
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104081022"
---
# <a name="writeenvironmentstrings-action"></a>Действие Вритинвиронментстрингс

Действие Вритинвиронментстрингс изменяет значения переменных среды.

Переменные среды не изменяются для выполняемой установки при выполнении действия Вритинвиронментстрингс или [ремовинвиронментстрингс](removeenvironmentstrings-action.md) . В Windows 2000, Windows Server 2003, Windows XP и Windows Vista эта информация хранится в реестре, и для уведомления системы об изменениях после завершения установки отправляется сообщение [**WM \_ сеттингчанже**](../winmsg/wm-settingchange.md) . Другой процесс может получить уведомление об изменениях, обрабатывая эти сообщения. Если перезагрузка системы находится в состоянии ожидания, сообщение не отправляется. Пакет может использовать свойство [**мсисистемребутпендинг**](msisystemrebootpending.md) , чтобы проверить, ожидается ли перезагрузка системы.

Установщик запускает действие Вритинвиронментстрингс только во время установки или переустановки компонента и запускает [действие ремовинвиронментстрингс](removeenvironmentstrings-action.md) только во время удаления компонента.

Значения записываются или удаляются в зависимости от выбора основных действий и модификаторов. Они описаны в следующем разделе Актиондата messages. Обратите внимание, что в зависимости от указанного действия Вритинвиронментстрингс может удалить переменные, и Ремовинвиронментстрингс может добавить их на основе создания [таблицы среды](environment-table.md).

## <a name="sequence-restrictions"></a>Ограничения последовательности

[Действие инсталлвалидате](installvalidate-action.md) должно быть выполнено перед действием ремовинвиронментстрингс. Поскольку действие Вритинвиронментстрингс и действие Ремовинвиронментстрингс никогда не применяются во время установки или удаления компонента, их относительная последовательность не ограничена.

## <a name="actiondata-messages"></a>Сообщения Актиондата



| Поле | Описание данных действия                                                                                                                                                                                                  |
|-------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| \[1\] | Имя изменяемой переменной среды.                                                                                                                                                                                 |
| \[2\] | Значение переменной среды.                                                                                                                                                                                             |
| \[3\] | Это поле битовых флагов, которое указывает выполняемое действие. Включайте только один бит для первичного действия. В это поле может быть включена более одного бита модификатора. См. следующие описания битовых флагов. |



 



| Битовое значение | Описание основных действий                                                                                                                                                                                      |
|-----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 0x1       | Задано. Задает значение переменной среды во всех случаях.<br/> Если этот бит сочетается с битом модификатора Append или prefix, действие добавляет значение к любому существующему значению в переменной.<br/> |
| 0x2       | Задано. Задает значение, если переменная отсутствует.<br/> Если этот бит сочетается с битом модификатора Append или prefix, действие добавляет значение к любому существующему значению в переменной.<br/>                |
| 0x4       | Удалить. Удаляет значение из переменной.<br/> Если этот бит сочетается с битом модификатора Append или prefix, значение удаляется из существующей строки, если значение существует.<br/>               |



 



| Битовое значение  | Описание модификатора                                                                                                                                                              |
|------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 0x20000000 | Если этот бит задан, действия применяются к переменным среды компьютера.<br/> Если этот бит не задан, действия применяются к переменным среды пользователя.<br/> |
| 0x40000000 | Добавить. Этот бит является необязательным. Не задавайте модификаторы Append и prefix.<br/>                                                                                            |
| 0x80000000 | Prefix. Этот бит является необязательным. Не задавайте модификаторы Append и prefix.<br/>                                                                                            |



 

 

 
