---
description: Действие Вритинвиронментстрингс изменяет значения переменных среды.
ms.assetid: a91c1ffe-1bdd-49bb-aa6a-71667a1ed812
title: Действие Вритинвиронментстрингс
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dc3a9d64a1140fc883d94e8d3733608d29dc2d39
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104081022"
---
# <a name="writeenvironmentstrings-action"></a><span data-ttu-id="85190-103">Действие Вритинвиронментстрингс</span><span class="sxs-lookup"><span data-stu-id="85190-103">WriteEnvironmentStrings Action</span></span>

<span data-ttu-id="85190-104">Действие Вритинвиронментстрингс изменяет значения переменных среды.</span><span class="sxs-lookup"><span data-stu-id="85190-104">The WriteEnvironmentStrings action modifies the values of environment variables.</span></span>

<span data-ttu-id="85190-105">Переменные среды не изменяются для выполняемой установки при выполнении действия Вритинвиронментстрингс или [ремовинвиронментстрингс](removeenvironmentstrings-action.md) .</span><span class="sxs-lookup"><span data-stu-id="85190-105">Environment variables do not change for the installation in progress when the WriteEnvironmentStrings action or [RemoveEnvironmentStrings action](removeenvironmentstrings-action.md) are run.</span></span> <span data-ttu-id="85190-106">В Windows 2000, Windows Server 2003, Windows XP и Windows Vista эта информация хранится в реестре, и для уведомления системы об изменениях после завершения установки отправляется сообщение [**WM \_ сеттингчанже**](../winmsg/wm-settingchange.md) .</span><span class="sxs-lookup"><span data-stu-id="85190-106">On Windows 2000, Windows Server 2003, Windows XP, and Windows Vista this information is stored in the registry and a [**WM\_SETTINGCHANGE**](../winmsg/wm-settingchange.md) message is sent to notify the system of the changes when the installation completes.</span></span> <span data-ttu-id="85190-107">Другой процесс может получить уведомление об изменениях, обрабатывая эти сообщения.</span><span class="sxs-lookup"><span data-stu-id="85190-107">Another process can receive notification of the changes by handling these messages.</span></span> <span data-ttu-id="85190-108">Если перезагрузка системы находится в состоянии ожидания, сообщение не отправляется.</span><span class="sxs-lookup"><span data-stu-id="85190-108">No message is sent if a restart of the system is pending.</span></span> <span data-ttu-id="85190-109">Пакет может использовать свойство [**мсисистемребутпендинг**](msisystemrebootpending.md) , чтобы проверить, ожидается ли перезагрузка системы.</span><span class="sxs-lookup"><span data-stu-id="85190-109">A package can use the [**MsiSystemRebootPending**](msisystemrebootpending.md) property to check whether a system restart is pending.</span></span>

<span data-ttu-id="85190-110">Установщик запускает действие Вритинвиронментстрингс только во время установки или переустановки компонента и запускает [действие ремовинвиронментстрингс](removeenvironmentstrings-action.md) только во время удаления компонента.</span><span class="sxs-lookup"><span data-stu-id="85190-110">The installer runs the WriteEnvironmentStrings action only during the installation or reinstallation of a component, and runs the [RemoveEnvironmentStrings action](removeenvironmentstrings-action.md) only during the removal of a component.</span></span>

<span data-ttu-id="85190-111">Значения записываются или удаляются в зависимости от выбора основных действий и модификаторов.</span><span class="sxs-lookup"><span data-stu-id="85190-111">Values are written or removed based on the selection of primary actions and modifiers.</span></span> <span data-ttu-id="85190-112">Они описаны в следующем разделе Актиондата messages.</span><span class="sxs-lookup"><span data-stu-id="85190-112">These are described in the following ActionData Messages section.</span></span> <span data-ttu-id="85190-113">Обратите внимание, что в зависимости от указанного действия Вритинвиронментстрингс может удалить переменные, и Ремовинвиронментстрингс может добавить их на основе создания [таблицы среды](environment-table.md).</span><span class="sxs-lookup"><span data-stu-id="85190-113">Note that depending on the action specified, WriteEnvironmentStrings may remove variables, and RemoveEnvironmentStrings may add them based on the authoring of the [Environment table](environment-table.md).</span></span>

## <a name="sequence-restrictions"></a><span data-ttu-id="85190-114">Ограничения последовательности</span><span class="sxs-lookup"><span data-stu-id="85190-114">Sequence Restrictions</span></span>

<span data-ttu-id="85190-115">[Действие инсталлвалидате](installvalidate-action.md) должно быть выполнено перед действием ремовинвиронментстрингс.</span><span class="sxs-lookup"><span data-stu-id="85190-115">The [InstallValidate action](installvalidate-action.md) must be executed before the RemoveEnvironmentStrings action.</span></span> <span data-ttu-id="85190-116">Поскольку действие Вритинвиронментстрингс и действие Ремовинвиронментстрингс никогда не применяются во время установки или удаления компонента, их относительная последовательность не ограничена.</span><span class="sxs-lookup"><span data-stu-id="85190-116">Because the WriteEnvironmentStrings action and RemoveEnvironmentStrings action are never both applied during an install or removal of a component, their relative sequence is not restricted.</span></span>

## <a name="actiondata-messages"></a><span data-ttu-id="85190-117">Сообщения Актиондата</span><span class="sxs-lookup"><span data-stu-id="85190-117">ActionData Messages</span></span>



| <span data-ttu-id="85190-118">Поле</span><span class="sxs-lookup"><span data-stu-id="85190-118">Field</span></span> | <span data-ttu-id="85190-119">Описание данных действия</span><span class="sxs-lookup"><span data-stu-id="85190-119">Description of action data</span></span>                                                                                                                                                                                                  |
|-------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85190-120">\[1\]</span><span class="sxs-lookup"><span data-stu-id="85190-120">\[1\]</span></span> | <span data-ttu-id="85190-121">Имя изменяемой переменной среды.</span><span class="sxs-lookup"><span data-stu-id="85190-121">Name of the environment variable to modify.</span></span>                                                                                                                                                                                 |
| <span data-ttu-id="85190-122">\[2\]</span><span class="sxs-lookup"><span data-stu-id="85190-122">\[2\]</span></span> | <span data-ttu-id="85190-123">Значение переменной среды.</span><span class="sxs-lookup"><span data-stu-id="85190-123">The environment variable value.</span></span>                                                                                                                                                                                             |
| <span data-ttu-id="85190-124">\[3\]</span><span class="sxs-lookup"><span data-stu-id="85190-124">\[3\]</span></span> | <span data-ttu-id="85190-125">Это поле битовых флагов, которое указывает выполняемое действие.</span><span class="sxs-lookup"><span data-stu-id="85190-125">This is a field of bit flags that specifies the action to be performed.</span></span> <span data-ttu-id="85190-126">Включайте только один бит для первичного действия.</span><span class="sxs-lookup"><span data-stu-id="85190-126">Include only one bit for a primary action.</span></span> <span data-ttu-id="85190-127">В это поле может быть включена более одного бита модификатора.</span><span class="sxs-lookup"><span data-stu-id="85190-127">There may be more than one modifier bit included in this field.</span></span> <span data-ttu-id="85190-128">См. следующие описания битовых флагов.</span><span class="sxs-lookup"><span data-stu-id="85190-128">See the following bit flag descriptions.</span></span> |



 



| <span data-ttu-id="85190-129">Битовое значение</span><span class="sxs-lookup"><span data-stu-id="85190-129">Bit Value</span></span> | <span data-ttu-id="85190-130">Описание основных действий</span><span class="sxs-lookup"><span data-stu-id="85190-130">Description of primary actions</span></span>                                                                                                                                                                                      |
|-----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85190-131">0x1</span><span class="sxs-lookup"><span data-stu-id="85190-131">0x1</span></span>       | <span data-ttu-id="85190-132">Задано.</span><span class="sxs-lookup"><span data-stu-id="85190-132">Set.</span></span> <span data-ttu-id="85190-133">Задает значение переменной среды во всех случаях.</span><span class="sxs-lookup"><span data-stu-id="85190-133">Sets the value of the environment variable in all cases.</span></span><br/> <span data-ttu-id="85190-134">Если этот бит сочетается с битом модификатора Append или prefix, действие добавляет значение к любому существующему значению в переменной.</span><span class="sxs-lookup"><span data-stu-id="85190-134">If this bit is combined with an Append or Prefix modifier bit, the action adds the value to any existing value in the variable.</span></span><br/> |
| <span data-ttu-id="85190-135">0x2</span><span class="sxs-lookup"><span data-stu-id="85190-135">0x2</span></span>       | <span data-ttu-id="85190-136">Задано.</span><span class="sxs-lookup"><span data-stu-id="85190-136">Set.</span></span> <span data-ttu-id="85190-137">Задает значение, если переменная отсутствует.</span><span class="sxs-lookup"><span data-stu-id="85190-137">Sets the value if the variable is absent.</span></span><br/> <span data-ttu-id="85190-138">Если этот бит сочетается с битом модификатора Append или prefix, действие добавляет значение к любому существующему значению в переменной.</span><span class="sxs-lookup"><span data-stu-id="85190-138">If this bit is combined with an Append or Prefix modifier bit, the action adds the value to any existing value in the variable.</span></span><br/>                |
| <span data-ttu-id="85190-139">0x4</span><span class="sxs-lookup"><span data-stu-id="85190-139">0x4</span></span>       | <span data-ttu-id="85190-140">Удалить.</span><span class="sxs-lookup"><span data-stu-id="85190-140">Remove.</span></span> <span data-ttu-id="85190-141">Удаляет значение из переменной.</span><span class="sxs-lookup"><span data-stu-id="85190-141">Removes the value from the variable.</span></span><br/> <span data-ttu-id="85190-142">Если этот бит сочетается с битом модификатора Append или prefix, значение удаляется из существующей строки, если значение существует.</span><span class="sxs-lookup"><span data-stu-id="85190-142">If this bit is combined with an Append or Prefix modifier bit, the value is removed from the existing string, if the value exists.</span></span><br/>               |



 



| <span data-ttu-id="85190-143">Битовое значение</span><span class="sxs-lookup"><span data-stu-id="85190-143">Bit Value</span></span>  | <span data-ttu-id="85190-144">Описание модификатора</span><span class="sxs-lookup"><span data-stu-id="85190-144">Description of modifier</span></span>                                                                                                                                                              |
|------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85190-145">0x20000000</span><span class="sxs-lookup"><span data-stu-id="85190-145">0x20000000</span></span> | <span data-ttu-id="85190-146">Если этот бит задан, действия применяются к переменным среды компьютера.</span><span class="sxs-lookup"><span data-stu-id="85190-146">If this bit is set, actions are applied to the machine environment variables.</span></span><br/> <span data-ttu-id="85190-147">Если этот бит не задан, действия применяются к переменным среды пользователя.</span><span class="sxs-lookup"><span data-stu-id="85190-147">If this bit is not set, actions are applied to the user's environment variables.</span></span><br/> |
| <span data-ttu-id="85190-148">0x40000000</span><span class="sxs-lookup"><span data-stu-id="85190-148">0x40000000</span></span> | <span data-ttu-id="85190-149">Добавить.</span><span class="sxs-lookup"><span data-stu-id="85190-149">Append.</span></span> <span data-ttu-id="85190-150">Этот бит является необязательным.</span><span class="sxs-lookup"><span data-stu-id="85190-150">This bit is optional.</span></span> <span data-ttu-id="85190-151">Не задавайте модификаторы Append и prefix.</span><span class="sxs-lookup"><span data-stu-id="85190-151">Do not set both the Append and Prefix modifiers.</span></span><br/>                                                                                            |
| <span data-ttu-id="85190-152">0x80000000</span><span class="sxs-lookup"><span data-stu-id="85190-152">0x80000000</span></span> | <span data-ttu-id="85190-153">Prefix.</span><span class="sxs-lookup"><span data-stu-id="85190-153">Prefix.</span></span> <span data-ttu-id="85190-154">Этот бит является необязательным.</span><span class="sxs-lookup"><span data-stu-id="85190-154">This bit is optional.</span></span> <span data-ttu-id="85190-155">Не задавайте модификаторы Append и prefix.</span><span class="sxs-lookup"><span data-stu-id="85190-155">Do not set both the Append and Prefix modifiers.</span></span><br/>                                                                                            |



 

 

 
