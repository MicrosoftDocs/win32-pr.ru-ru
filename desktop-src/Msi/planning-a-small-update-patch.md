---
description: Файл функции концерта исходного продукта MNP2000 содержит ошибку в Concert.txt файле.
ms.assetid: 4289bd0c-bdf3-4747-9287-94f737ce4f5c
title: Планирование небольшого исправления обновления
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f15f3667c6a18ab7a71e86997091bd76d4b15577
ms.sourcegitcommit: de72a1294df274b0a71dc0fdc42d757e5f6df0f3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2021
ms.locfileid: "103914251"
---
# <a name="planning-a-small-update-patch"></a><span data-ttu-id="c4989-103">Планирование небольшого исправления обновления</span><span class="sxs-lookup"><span data-stu-id="c4989-103">Planning a Small Update Patch</span></span>

<span data-ttu-id="c4989-104">Файл функции концерта исходного продукта MNP2000 содержит ошибку в Concert.txt файле.</span><span class="sxs-lookup"><span data-stu-id="c4989-104">The Concert feature file of the original product, MNP2000, contains an error in the Concert.txt file.</span></span> <span data-ttu-id="c4989-105">Поскольку установщик Windows использовался для установки и настройки приложения, незначительные исправления для приложения могут быть обработаны путем установки пакета исправлений небольшого обновления.</span><span class="sxs-lookup"><span data-stu-id="c4989-105">Because Windows Installer was used for the installation and setup of the application, minor fixes to the application may be handled by installing a small update patch package.</span></span> <span data-ttu-id="c4989-106">[Небольшое обновление](small-updates.md) вносит изменения в один или несколько файлов приложения, которые являются слишком незначительными для изменения кода продукта.</span><span class="sxs-lookup"><span data-stu-id="c4989-106">A [small update](small-updates.md) makes changes to one or more application files that are too minor to change the product code.</span></span> <span data-ttu-id="c4989-107">В следующем примере показано, как создать пакет исправлений установщик Windows, который может применить небольшое обновление, и предоставить быстрое исправление для продукта MNP2000.</span><span class="sxs-lookup"><span data-stu-id="c4989-107">The following example shows you how to create a Windows Installer patch package that can apply the small update and provide a quick fix to the MNP2000 product.</span></span>

<span data-ttu-id="c4989-108">Чтобы создать небольшое обновление, сначала получите полностью несжатое изображение продукта MNP2000, которое содержит ошибку в Concert.txt.</span><span class="sxs-lookup"><span data-stu-id="c4989-108">To create the small update first obtain a fully uncompressed image of the MNP2000 product that includes the error in Concert.txt.</span></span> <span data-ttu-id="c4989-109">Образ должен содержать MNP2000.msi и все исходные файлы, описанные в разделе [Планирование установки](planning-the-installation.md).</span><span class="sxs-lookup"><span data-stu-id="c4989-109">The image must include MNP2000.msi and all the source files described in [Planning the Installation](planning-the-installation.md).</span></span> <span data-ttu-id="c4989-110">В следующем обсуждении это называется целевым изображением.</span><span class="sxs-lookup"><span data-stu-id="c4989-110">In the following discussion this is called the Target image.</span></span> <span data-ttu-id="c4989-111">Целевой образ должен быть полностью распакован, поскольку процессу создания исправлений не удается создать двоичные исправления для файлов, сжатых в ящиках.</span><span class="sxs-lookup"><span data-stu-id="c4989-111">The Target image must be fully uncompressed because the patch creation process is unable to generate binary patches for files compressed in cabinets.</span></span> <span data-ttu-id="c4989-112">Вставьте MSI-файл и все исходные файлы целевого образа в папку с именем Target.</span><span class="sxs-lookup"><span data-stu-id="c4989-112">Put the .msi file and all the source files of the Target image into a folder named Target.</span></span>

<span data-ttu-id="c4989-113">Затем получите полностью несжатое изображение продукта MNP2000 с фиксированным файлом Concert.txt.</span><span class="sxs-lookup"><span data-stu-id="c4989-113">Next, obtain a fully uncompressed image of the MNP2000 product with a Concert.txt file that is fixed.</span></span> <span data-ttu-id="c4989-114">Это называется обновленным образом в следующем обсуждении.</span><span class="sxs-lookup"><span data-stu-id="c4989-114">This is called the Upgraded image in the following discussion.</span></span> <span data-ttu-id="c4989-115">Чтобы обновить MSI файл, используйте средство редактирования базы данных установки, например Orca.</span><span class="sxs-lookup"><span data-stu-id="c4989-115">Use an installation database editing tool, such as Orca, to update the .msi file.</span></span> <span data-ttu-id="c4989-116">Например, если размер исправленного Concert.txt меньше исходного, обязательно введите новый размер в поле Размер файла таблицы File обновляемого образа.</span><span class="sxs-lookup"><span data-stu-id="c4989-116">For example, if the size of the corrected Concert.txt is smaller than the original, be sure to enter the new size in the FileSize field of the File table of the upgraded image.</span></span> <span data-ttu-id="c4989-117">Обратите внимание, что поскольку пакет был изменен, необходимо назначить новый код пакета в свойстве [**сводки номера редакции**](revision-number-summary.md) .</span><span class="sxs-lookup"><span data-stu-id="c4989-117">Note that because the package has changed you must assign a new package code in the [**Revision Number Summary**](revision-number-summary.md) Property.</span></span> <span data-ttu-id="c4989-118">Вставьте MSI-файл и все исходные файлы обновленного образа в папку с именем Upgraded.</span><span class="sxs-lookup"><span data-stu-id="c4989-118">Put the .msi file and all the source files of the Upgraded image into a folder named Upgraded.</span></span>

<span data-ttu-id="c4989-119">В этом примере предполагается, что размер файла Concert.txt изменяется.</span><span class="sxs-lookup"><span data-stu-id="c4989-119">For the purposes of this example, assume that the size of the Concert.txt file changes.</span></span> <span data-ttu-id="c4989-120">Это означает, что поля Размер файла в таблицах файлов целевой и обновленной базы данных содержат разные данные.</span><span class="sxs-lookup"><span data-stu-id="c4989-120">This means that FileSize fields in the File tables of the Target and Upgraded database contain different data.</span></span>

<span data-ttu-id="c4989-121">Следующая [Файловая таблица](file-table.md) определяет запись из целевого образа.</span><span class="sxs-lookup"><span data-stu-id="c4989-121">The following [File Table](file-table.md) identifies the record from the Target Image.</span></span>



| <span data-ttu-id="c4989-122">Файл</span><span class="sxs-lookup"><span data-stu-id="c4989-122">File</span></span>        | <span data-ttu-id="c4989-123">Компонент\_</span><span class="sxs-lookup"><span data-stu-id="c4989-123">Component\_</span></span> | <span data-ttu-id="c4989-124">FileName</span><span class="sxs-lookup"><span data-stu-id="c4989-124">FileName</span></span>    | <span data-ttu-id="c4989-125">FileSize</span><span class="sxs-lookup"><span data-stu-id="c4989-125">FileSize</span></span> | <span data-ttu-id="c4989-126">Версия</span><span class="sxs-lookup"><span data-stu-id="c4989-126">Version</span></span> | <span data-ttu-id="c4989-127">Язык</span><span class="sxs-lookup"><span data-stu-id="c4989-127">Language</span></span> | <span data-ttu-id="c4989-128">Атрибуты</span><span class="sxs-lookup"><span data-stu-id="c4989-128">Attributes</span></span> | <span data-ttu-id="c4989-129">Последовательность</span><span class="sxs-lookup"><span data-stu-id="c4989-129">Sequence</span></span> |
|-------------|-------------|-------------|----------|---------|----------|------------|----------|
| <span data-ttu-id="c4989-130">Concert.txt</span><span class="sxs-lookup"><span data-stu-id="c4989-130">Concert.txt</span></span> | <span data-ttu-id="c4989-131">Концерт</span><span class="sxs-lookup"><span data-stu-id="c4989-131">Concert</span></span>     | <span data-ttu-id="c4989-132">Concert.txt</span><span class="sxs-lookup"><span data-stu-id="c4989-132">Concert.txt</span></span> | <span data-ttu-id="c4989-133">1000</span><span class="sxs-lookup"><span data-stu-id="c4989-133">1000</span></span>     |         |          | <span data-ttu-id="c4989-134">0</span><span class="sxs-lookup"><span data-stu-id="c4989-134">0</span></span>          | <span data-ttu-id="c4989-135">1</span><span class="sxs-lookup"><span data-stu-id="c4989-135">1</span></span>        |



 

<span data-ttu-id="c4989-136">Следующая файловая таблица определяет запись из обновленного образа.</span><span class="sxs-lookup"><span data-stu-id="c4989-136">The following File Table identifies the record from the Upgraded Image.</span></span>



| <span data-ttu-id="c4989-137">Файл</span><span class="sxs-lookup"><span data-stu-id="c4989-137">File</span></span>        | <span data-ttu-id="c4989-138">Компонент\_</span><span class="sxs-lookup"><span data-stu-id="c4989-138">Component\_</span></span> | <span data-ttu-id="c4989-139">FileName</span><span class="sxs-lookup"><span data-stu-id="c4989-139">FileName</span></span>    | <span data-ttu-id="c4989-140">FileSize</span><span class="sxs-lookup"><span data-stu-id="c4989-140">FileSize</span></span> | <span data-ttu-id="c4989-141">Версия</span><span class="sxs-lookup"><span data-stu-id="c4989-141">Version</span></span> | <span data-ttu-id="c4989-142">Язык</span><span class="sxs-lookup"><span data-stu-id="c4989-142">Language</span></span> | <span data-ttu-id="c4989-143">Атрибуты</span><span class="sxs-lookup"><span data-stu-id="c4989-143">Attributes</span></span> | <span data-ttu-id="c4989-144">Последовательность</span><span class="sxs-lookup"><span data-stu-id="c4989-144">Sequence</span></span> |
|-------------|-------------|-------------|----------|---------|----------|------------|----------|
| <span data-ttu-id="c4989-145">Concert.txt</span><span class="sxs-lookup"><span data-stu-id="c4989-145">Concert.txt</span></span> | <span data-ttu-id="c4989-146">Концерт</span><span class="sxs-lookup"><span data-stu-id="c4989-146">Concert</span></span>     | <span data-ttu-id="c4989-147">Concert.txt</span><span class="sxs-lookup"><span data-stu-id="c4989-147">Concert.txt</span></span> | <span data-ttu-id="c4989-148">900</span><span class="sxs-lookup"><span data-stu-id="c4989-148">900</span></span>      |         |          | <span data-ttu-id="c4989-149">0</span><span class="sxs-lookup"><span data-stu-id="c4989-149">0</span></span>          | <span data-ttu-id="c4989-150">1</span><span class="sxs-lookup"><span data-stu-id="c4989-150">1</span></span>        |



 

> [!Note]
> <span data-ttu-id="c4989-151">Файл должен иметь тот же ключ в [файловых таблицах](file-table.md) как целевого, так и обновленного образа.</span><span class="sxs-lookup"><span data-stu-id="c4989-151">The file must have the same key in the [File Tables](file-table.md) of both the target image and the updated image.</span></span> <span data-ttu-id="c4989-152">Строковые значения в столбце File обеих таблиц должны быть одинаковыми.</span><span class="sxs-lookup"><span data-stu-id="c4989-152">The string values in the File column of both tables must be identical.</span></span> <span data-ttu-id="c4989-153">Прописные и строчные буквы также должны быть идентичными.</span><span class="sxs-lookup"><span data-stu-id="c4989-153">Uppercase and lowercase must be identical also.</span></span>
> 
> <span data-ttu-id="c4989-154">Следуйте рекомендациям, описанным в разделе [Создание пакета исправлений](creating-a-patch-package.md).</span><span class="sxs-lookup"><span data-stu-id="c4989-154">Follow the guidelines described in [Creating a Patch Package](creating-a-patch-package.md).</span></span> <span data-ttu-id="c4989-155">Не создавайте пакет с ключами [таблицы File](file-table.md) , которые отличаются только регистром, поскольку [Msimsp.exe](msimsp-exe.md) и [Patchwiz.dll](patchwiz-dll.md) вызывают Makecab.exe, что не учитывает регистр, и создание исправления завершается ошибкой.</span><span class="sxs-lookup"><span data-stu-id="c4989-155">Do not author a package with [File Table](file-table.md) keys that differ only by case, because [Msimsp.exe](msimsp-exe.md) and [Patchwiz.dll](patchwiz-dll.md) call Makecab.exe, which is case-insensitive and patch generation fails.</span></span>

[<span data-ttu-id="c4989-156">Продолжить</span><span class="sxs-lookup"><span data-stu-id="c4989-156">Continue</span></span>](creating-a-patch-creation-properties-file.md)

 

 



