---
description: В этом примере показано, как можно использовать преобразование настройки для отключения компонентов и добавления новых ресурсов.
ms.assetid: 028b1d01-3b66-4640-98f9-ca33f90ca516
title: Пример преобразования настройки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 26ea655d1187b0271aba7ea56a46bacf95f5fb40
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105650747"
---
# <a name="a-customization-transform-example"></a><span data-ttu-id="2efd3-103">Пример преобразования настройки</span><span class="sxs-lookup"><span data-stu-id="2efd3-103">A Customization Transform Example</span></span>

<span data-ttu-id="2efd3-104">В этом примере показано, как можно использовать преобразование настройки для отключения компонентов и добавления новых ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2efd3-104">This example illustrates how a customization transform may be used to disable features and add new resources.</span></span>

<span data-ttu-id="2efd3-105">Администратор может навсегда отключить функцию с помощью преобразования настройки, чтобы ввести 0 в столбец Level [таблицы Feature](feature-table.md).</span><span class="sxs-lookup"><span data-stu-id="2efd3-105">An administrator can permanently disable a feature by using a customization transform to enter a 0 into the Level column of the [Feature table](feature-table.md).</span></span> <span data-ttu-id="2efd3-106">После этого приложение преобразования настройки предотвращает установку и отображение этой функции, даже если пользователь выбирает полную установку с помощью пользовательского интерфейса или если для свойства [**ADDLOCAL**](addlocal.md) задано значение ALL в командной строке.</span><span class="sxs-lookup"><span data-stu-id="2efd3-106">The application of the customization transform then prevents the installation and display of that feature even if the user selects a complete installation using the UI or by setting the [**ADDLOCAL**](addlocal.md) property to ALL on the command line.</span></span> <span data-ttu-id="2efd3-107">Описание уровня установки см. в разделе [Таблица компонентов](feature-table.md) и свойство [**инсталллевел**](installlevel.md) .</span><span class="sxs-lookup"><span data-stu-id="2efd3-107">For a discussion of installation level, see [Feature table](feature-table.md) and [**INSTALLLEVEL**](installlevel.md) property.</span></span>

<span data-ttu-id="2efd3-108">Ресурсы, необходимые для настройки приложения, можно развернуть с помощью преобразования настройки, чтобы добавить один или несколько новых компонентов.</span><span class="sxs-lookup"><span data-stu-id="2efd3-108">The resources needed to customize an application can be deployed by using a customization transform to add one or more new components.</span></span> <span data-ttu-id="2efd3-109">Преобразование должно добавить одну или несколько новых компонентов, чтобы они содержали эти новые компоненты.</span><span class="sxs-lookup"><span data-stu-id="2efd3-109">The transform must add one or more new features to contain these new components.</span></span> <span data-ttu-id="2efd3-110">Правила, которым следует следовать при развертывании ресурсов, таких как файлы, разделы реестра или ярлыки, см. в разделе [Использование преобразований для добавления ресурсов](using-transforms-to-add-resources.md).</span><span class="sxs-lookup"><span data-stu-id="2efd3-110">For the rules that should be followed when deploying resources, such as files, registry keys, or shortcuts, see [Using Transforms to Add Resources](using-transforms-to-add-resources.md).</span></span>

<span data-ttu-id="2efd3-111">В этом примере показано, как создать [Преобразование](transforms.md) для настройки установки приложения, описанного в [примере установки](an-installation-example.md).</span><span class="sxs-lookup"><span data-stu-id="2efd3-111">This example illustrates how to create a [transform](transforms.md) to customize the installation of the application described in [An Installation Example](an-installation-example.md).</span></span> <span data-ttu-id="2efd3-112">Исходный пакет установки устанавливает все компоненты примера приложения, включая шлюз компонентов, который позволяет пользователям просматривать сведения о допусках для красного конца.</span><span class="sxs-lookup"><span data-stu-id="2efd3-112">The original installation package installs all the features of the sample application, including the feature Gate, which enables users to view admissions information for the Red Park Arena.</span></span> <span data-ttu-id="2efd3-113">Некоторым группам пользователей требуются только функции приложения, которые предоставляют сведения о расписании событий и не нуждаются в функции шлюза.</span><span class="sxs-lookup"><span data-stu-id="2efd3-113">Some groups of users only need the application features that give event scheduling information, and do not need the Gate feature.</span></span> <span data-ttu-id="2efd3-114">Этим группам также необходимо получить специальный список телефонов.</span><span class="sxs-lookup"><span data-stu-id="2efd3-114">These groups also need to get a special phone list.</span></span> <span data-ttu-id="2efd3-115">Таким образом, преобразование должно выполнить две вещи: 1) настроить установку таким образом, чтобы эта группа получала только необходимые функции приложения и 2) предоставил ресурсы, необходимые для нового списка телефонов.</span><span class="sxs-lookup"><span data-stu-id="2efd3-115">The transform must therefore do two things: 1) customize the installation so that this group only receives the application features they need and 2) provide the resources needed for the new phone list.</span></span>

<span data-ttu-id="2efd3-116">Пример минимального пользовательского интерфейса для этого примера приведен в [Windows SDK компонентов для установщик Windows разработчиков](platform-sdk-components-for-windows-installer-developers.md) в качестве Uisample.msi файлов.</span><span class="sxs-lookup"><span data-stu-id="2efd3-116">An example of a minimal user interface for this sample is provided in the [Windows SDK Components for Windows Installer Developers](platform-sdk-components-for-windows-installer-developers.md) as the file Uisample.msi.</span></span> <span data-ttu-id="2efd3-117">Если у вас есть пакет SDK, у вас есть доступ ко всем средствам и данным, необходимым для воспроизведения образца установочного пакета, пользовательского интерфейса и преобразования настроек.</span><span class="sxs-lookup"><span data-stu-id="2efd3-117">If you have the SDK, you have access to all the tools and data necessary to reproduce the sample installation package, user interface, and customization transform.</span></span>

<span data-ttu-id="2efd3-118">Преобразование настройки имеет следующие характеристики:</span><span class="sxs-lookup"><span data-stu-id="2efd3-118">The customization transform has the following specifications:</span></span>

-   <span data-ttu-id="2efd3-119">Преобразование настройки внедряется в файл MNP2000.msi, чтобы гарантировать, что он всегда доступен в базе данных установки.</span><span class="sxs-lookup"><span data-stu-id="2efd3-119">The customization transform is embedded inside the MNP2000.msi file to guarantee that it is always available with the installation database.</span></span>
-   <span data-ttu-id="2efd3-120">При установке MNP2000.msi с помощью преобразования настроек не устанавливается компонент Gate, дочерние компоненты компонента шлюза или компоненты шлюза, даже если пользователь выбирает полный тип установки.</span><span class="sxs-lookup"><span data-stu-id="2efd3-120">Installing MNP2000.msi with the customization transform does not install the Gate feature, child features of the Gate feature, or any of the components of the Gate feature, even if the user selects the Complete type of installation.</span></span>
-   <span data-ttu-id="2efd3-121">Другие приложения могут совместно использовать некоторые или все компоненты компонента Gate.</span><span class="sxs-lookup"><span data-stu-id="2efd3-121">Other applications may share some or all of the components of the Gate feature.</span></span> <span data-ttu-id="2efd3-122">Пакеты установки этих приложений могут установить все свои компоненты на компьютере пользователя.</span><span class="sxs-lookup"><span data-stu-id="2efd3-122">The installation packages of these applications may install all their components on the user's computer.</span></span>
-   <span data-ttu-id="2efd3-123">Удаление MNP2000.msi с помощью преобразования настроек не приводит к удалению ни одного из компонентов шлюза, установленных другими приложениями.</span><span class="sxs-lookup"><span data-stu-id="2efd3-123">Removing MNP2000.msi with the customization transform does not remove any of the Gate components that have been installed by other applications.</span></span>
-   <span data-ttu-id="2efd3-124">При установке MNP2000.msi с помощью преобразования настроек также устанавливается новая функция верхнего уровня, \_ список телефонов и новый компонент, который требует установки ресурса, Phone.txt.</span><span class="sxs-lookup"><span data-stu-id="2efd3-124">Installing MNP2000.msi with the customization transform also installs a new top level feature, Phone\_List, and a new component, phone, which requires the installation of the resource, Phone.txt.</span></span> <span data-ttu-id="2efd3-125">Пользователь обращается к \_ функции списка телефонов с помощью ярлыка в каталоге меню.</span><span class="sxs-lookup"><span data-stu-id="2efd3-125">The user accesses the Phone\_List feature using a shortcut in the Menu directory.</span></span>

[<span data-ttu-id="2efd3-126">Продолжить</span><span class="sxs-lookup"><span data-stu-id="2efd3-126">Continue</span></span>](customizing-an-original-database.md)

 

 



