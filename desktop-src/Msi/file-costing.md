---
description: Затраты — это процесс определения общего объема дискового пространства, необходимого для установки.
ms.assetid: 53ebb532-9eb3-46b7-9dcc-f593bfd25c60
title: Стоимость файлов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 55a4e6221775c2b9ecc429bd32f136e519a2b63b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662712"
---
# <a name="file-costing"></a><span data-ttu-id="90b6e-103">Стоимость файлов</span><span class="sxs-lookup"><span data-stu-id="90b6e-103">File Costing</span></span>

<span data-ttu-id="90b6e-104">Затраты — это процесс определения общего объема дискового пространства, необходимого для установки.</span><span class="sxs-lookup"><span data-stu-id="90b6e-104">Costing is the process of determining the total disk space requirements for an installation.</span></span> <span data-ttu-id="90b6e-105">Элементы, вычисляемые в процессе учета стоимости файлов, включают объем дискового пространства, в котором устанавливаются или удаляются файлы, а также объем дискового пространства, занимаемый записями реестра, ярлыками и другими прочими файлами.</span><span class="sxs-lookup"><span data-stu-id="90b6e-105">The elements calculated in the file costing process include the amount of disk space in which files are installed or removed, as well as the amount of disk space taken up by registry entries, shortcuts, and other miscellaneous files.</span></span> <span data-ttu-id="90b6e-106">Существующие файлы, запланированные для переписывания, также рассчитываются в общей стоимости диска.</span><span class="sxs-lookup"><span data-stu-id="90b6e-106">Existing files scheduled to be overwritten are also calculated in the disk cost totals.</span></span>

<span data-ttu-id="90b6e-107">Общая стоимость накапливается отдельно для каждого[компонента](components-and-features.md) и состоит из трех отдельных частей: местных затрат, исходных затрат и затрат на удаление.</span><span class="sxs-lookup"><span data-stu-id="90b6e-107">Total costs are accumulated on a per-[component](components-and-features.md) basis and consist of three separate parts: local costs, source costs, and removal costs.</span></span> <span data-ttu-id="90b6e-108">Эти компоненты соответствуют затратам на диск, если компонент установлен локально, установлен для запуска с исходного носителя или удален.</span><span class="sxs-lookup"><span data-stu-id="90b6e-108">These parts correspond to the disk cost that is incurred if the component is installed locally, installed to run from the source media, or removed.</span></span>

<span data-ttu-id="90b6e-109">Все вычисления, затрагивающие стоимость установки файлов, зависят от тома диска, на который будет установлен или удален файл.</span><span class="sxs-lookup"><span data-stu-id="90b6e-109">All calculations involving the cost of installing files depend upon the disk volume to which the file is to be installed or removed.</span></span> <span data-ttu-id="90b6e-110">При каждом изменении каталога, связанного с компонентом, стоимость файлов установки, управляемых этим компонентом, должна быть пересчитана.</span><span class="sxs-lookup"><span data-stu-id="90b6e-110">Each time the directory associated with a component changes, the costs of the installation files controlled by that component must be recalculated.</span></span> <span data-ttu-id="90b6e-111">Например, поскольку изменение каталога может также привести к изменению тома, размер кластеризованного файла должен быть пересчитан.</span><span class="sxs-lookup"><span data-stu-id="90b6e-111">For example, because a directory change might also imply a volume change, the clustered file sizes must be recalculated.</span></span> <span data-ttu-id="90b6e-112">Кроме того, необходимо проверить новый каталог, чтобы определить, следует ли учитывать любые существующие файлы, которые могут быть перезаписаны.</span><span class="sxs-lookup"><span data-stu-id="90b6e-112">In addition, the new directory must be checked to determine whether any existing files that may be overwritten must be taken into account.</span></span>

<span data-ttu-id="90b6e-113">После вызова действия [костинитиализе](costinitialize-action.md) необходимо вызвать действие [филекост](filecost-action.md) .</span><span class="sxs-lookup"><span data-stu-id="90b6e-113">After the [CostInitialize](costinitialize-action.md) action is called, the [FileCost](filecost-action.md) action must be called.</span></span> <span data-ttu-id="90b6e-114">Действие Костинитиализе инициализирует внутренние подпрограммы установщика, которые динамически рассчитывают затраты на диск, связанные с стандартными действиями установки.</span><span class="sxs-lookup"><span data-stu-id="90b6e-114">The CostInitialize action initializes the installer's internal routines that dynamically calculate the disk costs involved with the standard installation actions.</span></span> <span data-ttu-id="90b6e-115">На этом этапе другие динамические вычисления затрат не выполняются.</span><span class="sxs-lookup"><span data-stu-id="90b6e-115">No other dynamic cost calculations are done at this point.</span></span>

<span data-ttu-id="90b6e-116">Далее необходимо вызвать действие [костфинализе](costfinalize-action.md) .</span><span class="sxs-lookup"><span data-stu-id="90b6e-116">Next, the [CostFinalize](costfinalize-action.md) action must be called.</span></span> <span data-ttu-id="90b6e-117">Это действие завершает все вычисления затрат и делает данные о затратах доступными через таблицу [Component](component-table.md) .</span><span class="sxs-lookup"><span data-stu-id="90b6e-117">This action finalizes all cost calculations and makes the costing data available through the [Component](component-table.md) table.</span></span>

<span data-ttu-id="90b6e-118">После завершения выполнения действия [костфинализе](costfinalize-action.md) таблица [Component](component-table.md) полностью инициализируется, и при необходимости можно запустить последовательность диалоговых окон пользовательского интерфейса, содержащую элемент управления [селектионтри](selectiontree-control.md) .</span><span class="sxs-lookup"><span data-stu-id="90b6e-118">After the [CostFinalize](costfinalize-action.md) action completes execution, the [Component](component-table.md) table is fully initialized and a user interface dialog box sequence containing a [SelectionTree](selectiontree-control.md) control can be initiated if needed.</span></span> <span data-ttu-id="90b6e-119">В диалоговых окнах пользовательского интерфейса может быть предложено изменить состояние выбора или каталог назначения любого компонента в таблице [компонентов](feature-table.md) для пользователя.</span><span class="sxs-lookup"><span data-stu-id="90b6e-119">The user interface dialog boxes may offer the option to change the selection state or destination directory of any feature in the [Feature](feature-table.md) table to the user.</span></span> <span data-ttu-id="90b6e-120">Процесс аналогичен изменению состояния выбора компонента. Однако в этом случае динамические затраты на измененный компонент пересчитываются.</span><span class="sxs-lookup"><span data-stu-id="90b6e-120">The process is similar when the selection state of a component changes; however, in this case, the dynamic cost of the changed component only is recalculated.</span></span>

<span data-ttu-id="90b6e-121">После того как пользователь завершит выбор функций в пользовательском интерфейсе, необходимо вызвать действие [инсталлвалидате](installvalidate-action.md) .</span><span class="sxs-lookup"><span data-stu-id="90b6e-121">Once the user has completed selecting features in the user interface, the [InstallValidate](installvalidate-action.md) action should be called.</span></span> <span data-ttu-id="90b6e-122">Это действие проверяет, достаточно ли места для всех томов, на которые произошел атрибут cost.</span><span class="sxs-lookup"><span data-stu-id="90b6e-122">This action verifies that all volumes to which cost has been attributed have sufficient space for the installation.</span></span>

 

 



