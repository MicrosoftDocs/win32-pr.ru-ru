---
description: Затраты — это процесс определения общего объема дискового пространства, необходимого для установки.
ms.assetid: 53ebb532-9eb3-46b7-9dcc-f593bfd25c60
title: Стоимость файлов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 55a4e6221775c2b9ecc429bd32f136e519a2b63b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662712"
---
# <a name="file-costing"></a>Стоимость файлов

Затраты — это процесс определения общего объема дискового пространства, необходимого для установки. Элементы, вычисляемые в процессе учета стоимости файлов, включают объем дискового пространства, в котором устанавливаются или удаляются файлы, а также объем дискового пространства, занимаемый записями реестра, ярлыками и другими прочими файлами. Существующие файлы, запланированные для переписывания, также рассчитываются в общей стоимости диска.

Общая стоимость накапливается отдельно для каждого[компонента](components-and-features.md) и состоит из трех отдельных частей: местных затрат, исходных затрат и затрат на удаление. Эти компоненты соответствуют затратам на диск, если компонент установлен локально, установлен для запуска с исходного носителя или удален.

Все вычисления, затрагивающие стоимость установки файлов, зависят от тома диска, на который будет установлен или удален файл. При каждом изменении каталога, связанного с компонентом, стоимость файлов установки, управляемых этим компонентом, должна быть пересчитана. Например, поскольку изменение каталога может также привести к изменению тома, размер кластеризованного файла должен быть пересчитан. Кроме того, необходимо проверить новый каталог, чтобы определить, следует ли учитывать любые существующие файлы, которые могут быть перезаписаны.

После вызова действия [костинитиализе](costinitialize-action.md) необходимо вызвать действие [филекост](filecost-action.md) . Действие Костинитиализе инициализирует внутренние подпрограммы установщика, которые динамически рассчитывают затраты на диск, связанные с стандартными действиями установки. На этом этапе другие динамические вычисления затрат не выполняются.

Далее необходимо вызвать действие [костфинализе](costfinalize-action.md) . Это действие завершает все вычисления затрат и делает данные о затратах доступными через таблицу [Component](component-table.md) .

После завершения выполнения действия [костфинализе](costfinalize-action.md) таблица [Component](component-table.md) полностью инициализируется, и при необходимости можно запустить последовательность диалоговых окон пользовательского интерфейса, содержащую элемент управления [селектионтри](selectiontree-control.md) . В диалоговых окнах пользовательского интерфейса может быть предложено изменить состояние выбора или каталог назначения любого компонента в таблице [компонентов](feature-table.md) для пользователя. Процесс аналогичен изменению состояния выбора компонента. Однако в этом случае динамические затраты на измененный компонент пересчитываются.

После того как пользователь завершит выбор функций в пользовательском интерфейсе, необходимо вызвать действие [инсталлвалидате](installvalidate-action.md) . Это действие проверяет, достаточно ли места для всех томов, на которые произошел атрибут cost.

 

 



