---
description: Форматированный тип данных — это текстовая строка, которая обрабатывается для разрешения имен внедренных свойств, ключей таблиц, ссылок на переменные среды и других специальных подстрок.
ms.assetid: 7a1bc160-a06c-4d57-b429-e39167893a45
title: Отформатированный
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cdd15dca46839b25dbf186d8a741b7a5c37c05f3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103998813"
---
# <a name="formatted"></a><span data-ttu-id="52a39-103">Отформатированный</span><span class="sxs-lookup"><span data-stu-id="52a39-103">Formatted</span></span>

<span data-ttu-id="52a39-104">Форматированный тип данных — это текстовая строка, которая обрабатывается для разрешения имен внедренных свойств, ключей таблиц, ссылок на переменные среды и других специальных подстрок.</span><span class="sxs-lookup"><span data-stu-id="52a39-104">The Formatted data type is a text string that is processed to resolve embedded property names, table keys, environment variable references, and other special substrings.</span></span> <span data-ttu-id="52a39-105">Для разрешения строки распознаются следующие соглашения:</span><span class="sxs-lookup"><span data-stu-id="52a39-105">The following conventions are recognized to resolve the string:</span></span>

-   <span data-ttu-id="52a39-106">В тексте остаются квадратные скобки ( \[ \] ) или фигурные скобки ({}) без совпадающей пары.</span><span class="sxs-lookup"><span data-stu-id="52a39-106">Square brackets (\[ \]) or curly braces ({ }) with no matching pair are left in the text.</span></span>
-   <span data-ttu-id="52a39-107">Если обнаружена подстрока вида \[ *PropertyName* \] , она заменяется значением свойства.</span><span class="sxs-lookup"><span data-stu-id="52a39-107">If a substring of the form \[*propertyname*\] is encountered, it is replaced by the value of the property.</span></span> <span data-ttu-id="52a39-108">Если значение *PropertyName* не является допустимым именем свойства, подстрока разрешается как пустое.</span><span class="sxs-lookup"><span data-stu-id="52a39-108">If *propertyname* is not a valid property name, then the substring resolves as blank.</span></span> <span data-ttu-id="52a39-109">Например, столбец Description [таблицы лаунчкондитион](launchcondition-table.md) принимает отформатированную строку.</span><span class="sxs-lookup"><span data-stu-id="52a39-109">For example, the Description column of the [LaunchCondition Table](launchcondition-table.md) takes a Formatted string.</span></span> <span data-ttu-id="52a39-110">Если для ЕРРОРТКСТ задано значение "обратитесь в службу поддержки".</span><span class="sxs-lookup"><span data-stu-id="52a39-110">If ERRORTXT has been set to "Please contact your support personnel."</span></span> <span data-ttu-id="52a39-111">текст, отображаемый для неудачного условия запуска, будет содержать эту строку.</span><span class="sxs-lookup"><span data-stu-id="52a39-111">then the text displayed for failing the launch condition would include this string.</span></span> <span data-ttu-id="52a39-112">Если ЕРРОРТКСТ не задан, то текст, отображаемый для неудачного выполнения условия запуска, будет просто "система не соответствует требованиям установки".</span><span class="sxs-lookup"><span data-stu-id="52a39-112">If ERRORTXT is not set then the text displayed for failing the launch condition would be just "System does not meet installation requirements."</span></span>

    

    | <span data-ttu-id="52a39-113">Условие</span><span class="sxs-lookup"><span data-stu-id="52a39-113">Condition</span></span> | <span data-ttu-id="52a39-114">Описание</span><span class="sxs-lookup"><span data-stu-id="52a39-114">Description</span></span>                                                  |
    |-----------|--------------------------------------------------------------|
    | <span data-ttu-id="52a39-115">Version9X</span><span class="sxs-lookup"><span data-stu-id="52a39-115">Version9X</span></span> | <span data-ttu-id="52a39-116">Система не соответствует требованиям к установке.</span><span class="sxs-lookup"><span data-stu-id="52a39-116">System does not meet installation requirements.</span></span> <span data-ttu-id="52a39-117">\[еррорткст\]</span><span class="sxs-lookup"><span data-stu-id="52a39-117">\[ERRORTXT\]</span></span> |

    

     

-   <span data-ttu-id="52a39-118">Можно выполнить итерацию по квадратным скобкам, а имена свойств разрешаются из внутренней области. Например, предположим, что \[ \[ \] \] в тексте присутствует свойство substring.</span><span class="sxs-lookup"><span data-stu-id="52a39-118">The square brackets may be iterated and the property names are resolved from inside out. For example, suppose the substring \[\[PropertyA\]\] appears in the text.</span></span> <span data-ttu-id="52a39-119">Во-первых, извлекается значение свойства свойства.</span><span class="sxs-lookup"><span data-stu-id="52a39-119">First, the value of property PropertyA is retrieved.</span></span> <span data-ttu-id="52a39-120">Если значение является допустимым именем свойства, например Пропертиб, то возвращается значение Пропертиб, а всем свойством подстроки a \[ \[ \] \] заменяется значение пропертиб.</span><span class="sxs-lookup"><span data-stu-id="52a39-120">If the value is a valid property name, such as PropertyB, then the value of PropertyB is retrieved, and the entire substring \[\[PropertyA\]\] is substituted with the value of PropertyB.</span></span> <span data-ttu-id="52a39-121">Если свойство a не является допустимым именем свойства или значение свойства a не является допустимым именем свойства, подстрока пуста.</span><span class="sxs-lookup"><span data-stu-id="52a39-121">If PropertyA is not a valid property name, or if the value of PropertyA is not a valid property name, then the substring is blank.</span></span>
-   <span data-ttu-id="52a39-122">Если обнаружена подстрока формы \[ % *environmentvariable* \] , значение переменной среды заменяется на подстроку.</span><span class="sxs-lookup"><span data-stu-id="52a39-122">If a substring of the form \[%*environmentvariable*\] is found, the value of the environment variable is substituted for the substring.</span></span>
-   <span data-ttu-id="52a39-123">Если найдена подстрока вида \[ \\ *x* , \] она заменяется символом *x* , где *x* — один символ, без дальнейшей обработки.</span><span class="sxs-lookup"><span data-stu-id="52a39-123">If a substring of the form \[\\*x*\] is found, it is replaced by the character *x* , where *x* is one character, without any further processing.</span></span> <span data-ttu-id="52a39-124">Сохраняется только первый символ после обратной косой черты; все остальное удаляется.</span><span class="sxs-lookup"><span data-stu-id="52a39-124">Only the first character after the backslash is kept; everything else is removed.</span></span> <span data-ttu-id="52a39-125">Например, чтобы включить в литерал левую квадратную скобку ( \[ ), используйте \[ \\ \[ \] .</span><span class="sxs-lookup"><span data-stu-id="52a39-125">For example, to include a literal left bracket (\[), use \[\\\[\].</span></span> <span data-ttu-id="52a39-126">Текст текстовой \[ \\ \[ \] скобки \[ \\ \] \] разрешается в текст в виде \[ квадратной \] скобки.</span><span class="sxs-lookup"><span data-stu-id="52a39-126">The text \[\\\[\]Bracket Text\[\\\]\] resolves to \[Bracket Text\].</span></span>
-   <span data-ttu-id="52a39-127">Если подстрока заключена в фигурные скобки ({}) и не содержит имен свойств, заключенных в квадратные скобки ( \[ \] ), подстрока остается без изменений, включая фигурные скобки.</span><span class="sxs-lookup"><span data-stu-id="52a39-127">If a substring is enclosed in curly braces ({ }), and it contains no property names enclosed in square brackets (\[ \]), the substring is left unchanged, including the curly braces.</span></span>
-   <span data-ttu-id="52a39-128">Если подстрока заключена в фигурные скобки ({}) и содержит одно или несколько имен свойств, заключенных в квадратные скобки ( \[ \] ), то, если все имена свойств являются допустимыми, текст (с разрешенными подстановками) отображается без фигурных скобок.</span><span class="sxs-lookup"><span data-stu-id="52a39-128">If a substring is enclosed in curly braces ({ }) and it contains one or more property names enclosed in square brackets (\[ \]) then, if all the property names are valid, the text (with the resolved substitutions) is displayed without the curly braces.</span></span>
-   <span data-ttu-id="52a39-129">При обнаружении подстроки формы \[ ~ \] она заменяется символом NULL.</span><span class="sxs-lookup"><span data-stu-id="52a39-129">If a substring of the form \[~\] is found, it is replaced with the null character.</span></span> <span data-ttu-id="52a39-130">Он используется для создания символьных строк **reg \_ Multi \_ SZ** в [таблице реестра](registry-table.md).</span><span class="sxs-lookup"><span data-stu-id="52a39-130">This is used to author **REG\_MULTI\_SZ** character strings in the [Registry table](registry-table.md).</span></span> <span data-ttu-id="52a39-131">Обратите внимание, что \[ ~ \] также используется для добавления или префикса значений к переменным среды с помощью [таблицы Environment](environment-table.md).</span><span class="sxs-lookup"><span data-stu-id="52a39-131">Note that \[~\] is also used to append or prefix values to environment variables using the [Environment table](environment-table.md).</span></span>
-   <span data-ttu-id="52a39-132">Если подстрока формы \[ \# *филекэй* \] найдена, она заменяется полным путем к файлу со значением *филекэй* , используемым в качестве ключа в [таблице File](file-table.md).</span><span class="sxs-lookup"><span data-stu-id="52a39-132">If a substring of the form \[\#*filekey*\] is found, it is replaced by the full path of the file, with the value *filekey* used as a key into the [File table](file-table.md).</span></span> <span data-ttu-id="52a39-133">Значение \[ \# *филекэй* \] остается пустым и не заменяется путем, пока установщик не выполнит действие [костинитиализе](costinitialize-action.md), [филекост Action](filecost-action.md)и [костфинализе](costfinalize-action.md).</span><span class="sxs-lookup"><span data-stu-id="52a39-133">The value of \[\#*filekey*\] remains blank and is not replaced by a path until the installer runs the [CostInitialize action](costinitialize-action.md), [FileCost action](filecost-action.md), and [CostFinalize action](costfinalize-action.md).</span></span> <span data-ttu-id="52a39-134">Значение \[ \# *филекэй* \] зависит от состояния установки компонента, которому принадлежит файл.</span><span class="sxs-lookup"><span data-stu-id="52a39-134">The value of \[\#*filekey*\] depends upon the installation state of the component to which the file belongs.</span></span> <span data-ttu-id="52a39-135">Если компонент запускается из источника, то значением является путь к исходному расположению файла.</span><span class="sxs-lookup"><span data-stu-id="52a39-135">If the component is run from the source, the value is the path to the source location of the file.</span></span> <span data-ttu-id="52a39-136">Если компонент запускается локально, значение представляет собой путь к целевому расположению файла после установки.</span><span class="sxs-lookup"><span data-stu-id="52a39-136">If the component is run locally, the value is the path to the target location of the file after installation.</span></span> <span data-ttu-id="52a39-137">Если в компоненте отсутствует состояние Action, установленное состояние компонента используется для определения \[ \) .</span><span class="sxs-lookup"><span data-stu-id="52a39-137">If the component has an action state of absent, the installed state of the component is used to determine the \[\).</span></span>
-   <span data-ttu-id="52a39-138">Если подстрока формы \[ $ *компоненткэй* \] найдена, она заменяется каталогом установки компонента со значением *компоненткэй* , используемым в качестве ключа в [таблице Component](component-table.md).</span><span class="sxs-lookup"><span data-stu-id="52a39-138">If a substring of the form \[$*componentkey*\] is found, it is replaced by the install directory of the component, with the value *componentkey* used as a key into the [Component table](component-table.md).</span></span> <span data-ttu-id="52a39-139">Значение \[ $ *компоненткэй* \] остается пустым и не заменяется каталогом, пока установщик не выполнит действие [костинитиализе](costinitialize-action.md), [филекост Action](filecost-action.md)и [костфинализе](costfinalize-action.md).</span><span class="sxs-lookup"><span data-stu-id="52a39-139">The value of \[$*componentkey*\] remains blank and is not replaced by a directory until the installer runs the [CostInitialize action](costinitialize-action.md), [FileCost action](filecost-action.md), and [CostFinalize action](costfinalize-action.md).</span></span> <span data-ttu-id="52a39-140">Значение \[ $ *компоненткэй* \] зависит от состояния установки компонента и места его возникновения.</span><span class="sxs-lookup"><span data-stu-id="52a39-140">The value of \[$*componentkey*\] depends upon the installation state of the component and where it occurs.</span></span> <span data-ttu-id="52a39-141">В столбце значение [таблицы реестра](registry-table.md)эта подстрока может ссылаться на состояние действия или на состояние запрошенного действия компонента.</span><span class="sxs-lookup"><span data-stu-id="52a39-141">In the Value column of the [Registry Table](registry-table.md), this substring may refer to the action state or the requested action state of the component.</span></span> <span data-ttu-id="52a39-142">Во всех остальных случаях эта подстрока относится к состоянию действия компонента.</span><span class="sxs-lookup"><span data-stu-id="52a39-142">In all other cases, this substring refers to the action state of the component.</span></span> <span data-ttu-id="52a39-143">Например, если компонент запускается из источника, значение является исходным каталогом файла.</span><span class="sxs-lookup"><span data-stu-id="52a39-143">For example, if the component is run from the source, the value is the source directory of the file.</span></span> <span data-ttu-id="52a39-144">Если компонент запускается локально, то значение является целевым каталогом после установки.</span><span class="sxs-lookup"><span data-stu-id="52a39-144">If the component is run locally, the value is the target directory after installation.</span></span> <span data-ttu-id="52a39-145">Если компонент отсутствует, значение остается пустым.</span><span class="sxs-lookup"><span data-stu-id="52a39-145">If the component is absent, the value is left blank.</span></span> <span data-ttu-id="52a39-146">Установщик Windows отслеживает действие и требуемые состояния установки компонентов.</span><span class="sxs-lookup"><span data-stu-id="52a39-146">Windows Installer tracks both the action and requested installation states of components.</span></span> <span data-ttu-id="52a39-147">Например, если компонент уже установлен, он может иметь запрошенное состояние Local и состояние действия null.</span><span class="sxs-lookup"><span data-stu-id="52a39-147">For example, if a component is already installed, it may have a requested state of local and an action state of null.</span></span> <span data-ttu-id="52a39-148">Дополнительные сведения о проверке состояния установки компонентов см. [в разделе Проверка установки компонентов, компонентов и файлов](checking-the-installation-of-features-components-files.md).</span><span class="sxs-lookup"><span data-stu-id="52a39-148">For more information about checking the installation state of components, see [Checking the Installation of Features, Components, Files](checking-the-installation-of-features-components-files.md).</span></span>
-   <span data-ttu-id="52a39-149">Обратите внимание, что если компонент уже установлен и не переустановлен, удален или перемещен во время текущей установки, то состояние действия компонента будет равно null, а строка компоненткэй будет иметь \[ $  \] значение null.</span><span class="sxs-lookup"><span data-stu-id="52a39-149">Note that if a component is already installed, and is not reinstalled, removed, or moved during the current installation, the action state of the component is null and the string \[$*componentkey*\] evaluates to Null.</span></span>
-   <span data-ttu-id="52a39-150">Если подстрока формы \[ !*филекэй* \] найден, он заменяется полным коротким путем к файлу со значением *филекэй* , используемым в качестве ключа в [таблице File](file-table.md).</span><span class="sxs-lookup"><span data-stu-id="52a39-150">If a substring of the form \[!*filekey*\] is found, it is replaced by the full short path of the file, with the value *filekey* used as a key into the [File table](file-table.md).</span></span>

    <span data-ttu-id="52a39-151">Этот синтаксис допустим только при использовании в столбце значение реестра или в таблицах Инифиле.</span><span class="sxs-lookup"><span data-stu-id="52a39-151">This syntax is valid only when used in the Value column of the Registry or the IniFile tables.</span></span> <span data-ttu-id="52a39-152">При использовании в других столбцах этот синтаксис обрабатывается так же, как \[ \# *филекэй* \] .</span><span class="sxs-lookup"><span data-stu-id="52a39-152">When used in other columns this syntax is treated the same as \[\#*filekey*\] .</span></span>

 

 



