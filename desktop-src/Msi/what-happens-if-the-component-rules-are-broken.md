---
description: В некоторых случаях авторы могут принять решение о необходимости разрушить правила создания компонентов, как описано в разделе Упорядочение приложений по компонентам и изменение кода компонента.
ms.assetid: 487b6a00-77eb-4c51-8e32-46bcd4493df8
title: Что произойдет, если правила компонентов будут разорваны?
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 78f61a0a819856c5014aa70acfaeb46be5043e58
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105673973"
---
# <a name="what-happens-if-the-component-rules-are-broken"></a><span data-ttu-id="39b1e-103">Что произойдет, если правила компонентов будут разорваны?</span><span class="sxs-lookup"><span data-stu-id="39b1e-103">What happens if the component rules are broken?</span></span>

<span data-ttu-id="39b1e-104">В некоторых случаях авторы могут принять решение о необходимости разрушить правила создания компонентов, как описано в разделе [Упорядочение приложений по компонентам](organizing-applications-into-components.md) и [изменение кода компонента](changing-the-component-code.md).</span><span class="sxs-lookup"><span data-stu-id="39b1e-104">In certain cases, authors may decide they need to break the rules for creating components as discussed in [Organizing Applications into Components](organizing-applications-into-components.md) and [Changing the Component Code](changing-the-component-code.md).</span></span> <span data-ttu-id="39b1e-105">Авторы должны знать о возможных последствиях этого, и в противном случае гарантировать, что их компоненты никогда не устанавливаются там, где они могут повредить другие приложения или компоненты в системе пользователя.</span><span class="sxs-lookup"><span data-stu-id="39b1e-105">Authors need to be aware of the possible consequences of doing this and must otherwise guarantee that their components are never installed where they can damage other applications or components on the user's system.</span></span>

<span data-ttu-id="39b1e-106">В следующем списке описаны способы, с помощью которых авторы иногда нарушают Рекомендуемые правила компонентов и возможные последствия.</span><span class="sxs-lookup"><span data-stu-id="39b1e-106">The following list describes ways that authors sometimes break the recommended component rules and the possible consequences.</span></span>

<span data-ttu-id="39b1e-107">Автор добавляет ресурсы в компонент без изменения кода компонента.</span><span class="sxs-lookup"><span data-stu-id="39b1e-107">An author adds resources to a component without the changing the component code.</span></span>

-   <span data-ttu-id="39b1e-108">Продукты, установленные с помощью старого компонента, не имеют сведений о добавленных ресурсах в своей базе данных установки.</span><span class="sxs-lookup"><span data-stu-id="39b1e-108">Products installed with the old component have no information about the added resources in their installation database.</span></span>
-   <span data-ttu-id="39b1e-109">Если как новый продукт с добавленными ресурсами, так и старый продукт устанавливаются на одном и том же компьютере, ресурсы могут остаться после удаления нового продукта.</span><span class="sxs-lookup"><span data-stu-id="39b1e-109">If both a new product that has the added resources and an old product are installed on the same computer, the resources can be left behind if the new product is uninstalled first.</span></span>
-   <span data-ttu-id="39b1e-110">Старый продукт без добавленных ресурсов не может восстановить более новую версию компонента.</span><span class="sxs-lookup"><span data-stu-id="39b1e-110">An old product without the added resources cannot repair the newer version of the component.</span></span> <span data-ttu-id="39b1e-111">Повторная установка старого продукта не приводит к восстановлению добавленных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="39b1e-111">Reinstalling the old product does not restore the added resources.</span></span>

<span data-ttu-id="39b1e-112">Автор удаляет ресурсы из компонента, не изменяя код компонента.</span><span class="sxs-lookup"><span data-stu-id="39b1e-112">An author removes resources from a component without changing the component code.</span></span>

-   <span data-ttu-id="39b1e-113">Продукты, установленные с новым компонентом, не имеют сведений об удаленных ресурсах в базе данных установки.</span><span class="sxs-lookup"><span data-stu-id="39b1e-113">Products installed with the new component have no information about the removed resources in their installation database.</span></span>
-   <span data-ttu-id="39b1e-114">Если старый продукт, наличие сведений о ресурсах и новый продукт установлены на одном и том же компьютере, ресурсы могут остаться, если сначала удаляется старый продукт.</span><span class="sxs-lookup"><span data-stu-id="39b1e-114">If both an old product, having the resource information, and a new product are installed on the same computer, the resources can be left behind if the old product is uninstalled first.</span></span>
-   <span data-ttu-id="39b1e-115">Новый продукт с удаленными ресурсами не может восстановить старую версию продукта.</span><span class="sxs-lookup"><span data-stu-id="39b1e-115">A new product with the removed resources cannot repair the older version of the product.</span></span> <span data-ttu-id="39b1e-116">Переустановка нового продукта не приводит к восстановлению удаленных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="39b1e-116">Reinstalling the new product does not restore the removed resources.</span></span>

<span data-ttu-id="39b1e-117">Автор включает файл, который несовместим с предыдущими версиями без изменения кода компонента.</span><span class="sxs-lookup"><span data-stu-id="39b1e-117">An author includes a file that is incompatible with previous versions without changing the component code.</span></span>

<span data-ttu-id="39b1e-118">Если несовместимый файл включается в компонент без изменения кода компонента, [Управление версиями файлов по умолчанию](default-file-versioning.md) приводит к тому, что установщик перезаписывает исходный файл с более новым несовместимым файлом.</span><span class="sxs-lookup"><span data-stu-id="39b1e-118">If an incompatible file is included in a component without changing the component code, [default file versioning](default-file-versioning.md) causes the installer to overwrite the original file with the more recent incompatible file.</span></span> <span data-ttu-id="39b1e-119">Это может повредить старые продукты, которым требуется исходный файл.</span><span class="sxs-lookup"><span data-stu-id="39b1e-119">This can damage old products needing the original file.</span></span> <span data-ttu-id="39b1e-120">Он также может препятствовать восстановлению старого продукта установщиком, поскольку версия файла пути к ключу компонента определяет версию компонента.</span><span class="sxs-lookup"><span data-stu-id="39b1e-120">It may also prevent the installer from repairing the old product because the version of a component's key path file determines the version of the component.</span></span> <span data-ttu-id="39b1e-121">Если уже установлена более новая версия файла пути к ключу, установщик не установит более раннюю версию компонента.</span><span class="sxs-lookup"><span data-stu-id="39b1e-121">If a newer version of the key path file is already installed, the installer does not install an older version of the component.</span></span> <span data-ttu-id="39b1e-122">Дополнительные сведения см. в разделе [правила управления версиями файлов](file-versioning-rules.md).</span><span class="sxs-lookup"><span data-stu-id="39b1e-122">For more information, see [File Versioning Rules](file-versioning-rules.md).</span></span> <span data-ttu-id="39b1e-123">В этом случае необходимо удалить новый продукт, прежде чем можно будет переустановить старый продукт.</span><span class="sxs-lookup"><span data-stu-id="39b1e-123">In this case, the new product must be removed before the old product can be reinstalled.</span></span>

-   <span data-ttu-id="39b1e-124">[Управление версиями файлов по умолчанию](default-file-versioning.md) приводит к тому, что установщик перезаписывает исходный файл с более новым несовместимым файлом.</span><span class="sxs-lookup"><span data-stu-id="39b1e-124">[Default file versioning](default-file-versioning.md) causes the installer to overwrite the original file with the more recent incompatible file.</span></span>
-   <span data-ttu-id="39b1e-125">Старые продукты, которым требуется исходный файл, повреждены.</span><span class="sxs-lookup"><span data-stu-id="39b1e-125">Old products that need the original file are damaged.</span></span>
-   <span data-ttu-id="39b1e-126">Он также может препятствовать восстановлению старого продукта установщиком, поскольку версия файла пути к ключу компонента определяет версию компонента.</span><span class="sxs-lookup"><span data-stu-id="39b1e-126">It may also prevent the installer from repairing the old product because the version of a component's key path file determines the version of the component.</span></span> <span data-ttu-id="39b1e-127">Если уже установлена более новая версия файла пути к ключу, установщик не установит более раннюю версию компонента.</span><span class="sxs-lookup"><span data-stu-id="39b1e-127">If a newer version of the key path file is already installed, the installer does not install the older version of the component.</span></span> <span data-ttu-id="39b1e-128">Дополнительные сведения см. в разделе [правила управления версиями файлов](file-versioning-rules.md).</span><span class="sxs-lookup"><span data-stu-id="39b1e-128">For more information, see [File Versioning Rules](file-versioning-rules.md).</span></span> <span data-ttu-id="39b1e-129">В этом случае необходимо удалить новый продукт, прежде чем можно будет переустановить старый продукт.</span><span class="sxs-lookup"><span data-stu-id="39b1e-129">In this case, the new product must be removed before the old product can be reinstalled.</span></span>

<span data-ttu-id="39b1e-130">Автор включает один и тот же ресурс в два разных компонента.</span><span class="sxs-lookup"><span data-stu-id="39b1e-130">An author includes the same resource in two different components.</span></span>

<span data-ttu-id="39b1e-131">Если два компонента имеют ресурс с тем же именем и расположением, и оба компонента устанавливаются в одну и ту же папку, то при удалении любого из этих компонентов удаляется общий ресурс, который повреждает оставшийся компонент.</span><span class="sxs-lookup"><span data-stu-id="39b1e-131">If two components have a resource under the same name and location and both components are installed into the same folder, then the removal of either component removes the common resource, which damages the remaining component.</span></span>

-   <span data-ttu-id="39b1e-132">Удаление любого из компонентов приводит к удалению ресурса и прерыванию другого компонента.</span><span class="sxs-lookup"><span data-stu-id="39b1e-132">Uninstalling either component removes the resource and breaks the other component.</span></span>
-   <span data-ttu-id="39b1e-133">Механизм подсчета ссылок на компоненты поврежден.</span><span class="sxs-lookup"><span data-stu-id="39b1e-133">The component reference-counting mechanism is damaged.</span></span>

 

 



