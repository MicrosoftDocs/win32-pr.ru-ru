---
description: Пакет для двойного назначения — это пакет установщик Windows 5,0, который был разработан для установки приложения в контексте установки на уровне пользователя или на компьютере.
ms.assetid: b2da9fba-8fdf-48fa-a662-6b3eee1bfe87
title: Создание отдельных пакетов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 87c22b9be930be2d2178ea4efb7ba1538320823a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105674051"
---
# <a name="single-package-authoring"></a><span data-ttu-id="35e53-103">Создание отдельных пакетов</span><span class="sxs-lookup"><span data-stu-id="35e53-103">Single Package Authoring</span></span>

<span data-ttu-id="35e53-104">Пакет для двойного назначения — это пакет установщик Windows 5,0, который был разработан для установки приложения в [контексте установки](installation-context.md)на уровне пользователя или на компьютере.</span><span class="sxs-lookup"><span data-stu-id="35e53-104">A dual-purpose package is a Windows Installer 5.0 package that has been authored to be capable of installing an application in either the per-user or per-machine [installation context](installation-context.md).</span></span> <span data-ttu-id="35e53-105">Разработчики программы установки, использующие пакет с двойным набором приложений, могут предоставить пользователям возможность выбора контекста установки во время установки и удалить запросы учетных данных контроля учетных записей из установок для отдельных пользователей в Windows 7 или Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="35e53-105">Setup developers that use a dual-purpose package for their application can provide their users with a choice of installation context at installation time and can remove UAC credential prompts from per-user installations on Windows 7 or Windows Server 2008 R2.</span></span> <span data-ttu-id="35e53-106">Разработка пакета с двойным набором установщик Windows 5,0 для установки в Windows 7 и Windows Server 2008 R2 называется созданием отдельного пакета.</span><span class="sxs-lookup"><span data-stu-id="35e53-106">The development of a dual-purpose Windows Installer 5.0 package for installation on Windows 7 and Windows Server 2008 R2 is referred to as single package authoring.</span></span>

<span data-ttu-id="35e53-107">Вы можете приступить к разработке пакетов двойного назначения для Windows 7 и Windows Server 2008 R2 с помощью установщик Windows 5,0, свойства [**мсиинсталлперусер**](msiinstallperuser.md) , свойства [**ALLUSERS**](allusers.md) и известных папок и регистраций [оболочки Windows](/previous-versions/windows/desktop/legacy/bb773177(v=vs.85))для каждого пользователя.</span><span class="sxs-lookup"><span data-stu-id="35e53-107">You can begin to develop dual-purpose packages for Windows 7 and Windows Server 2008 R2 by using Windows Installer 5.0, the [**MSIINSTALLPERUSER**](msiinstallperuser.md) property, the [**ALLUSERS**](allusers.md) property, and the per-user capable known folders and registrations of the [Windows Shell](/previous-versions/windows/desktop/legacy/bb773177(v=vs.85)).</span></span> <span data-ttu-id="35e53-108">Когда установщик Windows 5,0 устанавливает пакет двойного назначения в контексте "на пользователя" в Windows 7 или Windows Server 2008 R2, установщик направляет записи файлов и реестра в расположениях пользователей и не отображает запросы UAC для учетных данных.</span><span class="sxs-lookup"><span data-stu-id="35e53-108">When Windows Installer 5.0 installs a dual-purpose package in the per-user context on Windows 7 or Windows Server 2008 R2, the installer directs file and registry entries to per-user locations and does not display UAC prompts for credentials.</span></span> <span data-ttu-id="35e53-109">Когда установщик Windows 5,0 устанавливает пакет двойного назначения в контексте на компьютере, установщик направляет файлы и записи реестра в расположение компьютера и запрашивает учетные данные UAC, чтобы убедиться, что пользователь имеет достаточные привилегии для установки программного обеспечения для всех пользователей компьютера.</span><span class="sxs-lookup"><span data-stu-id="35e53-109">When Windows Installer 5.0 installs a dual-purpose package in the per-machine context, the installer directs files and registry entries to per-machine locations and prompts for UAC credentials to confirm that the user has sufficient privileges to install software for all users of the computer.</span></span> <span data-ttu-id="35e53-110">После того как установщик Windows 5,0 устанавливает приложение, оно использует тот же контекст установки для всех последующих обновлений, исправлений или удаления приложения.</span><span class="sxs-lookup"><span data-stu-id="35e53-110">Once Windows Installer 5.0 installs an application, it uses the same installation context for all subsequent updates, repairs, or removal of the application.</span></span>

<span data-ttu-id="35e53-111">**[Установщик Windows 4,5 или более ранних](not-supported-in-windows-installer-4-5.md)версий:** свойство [**мсиинсталлперусер**](msiinstallperuser.md) и версии папок для каждого пользователя, на которые ссылаются свойства [**ProgramFilesFolder**](programfilesfolder.md), [**коммонфилесфолдер**](commonfilesfolder.md), [**ProgramFiles64Folder**](programfiles64folder.md)и [**CommonFiles64Folder**](commonfiles64folder.md) , не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="35e53-111">**[Windows Installer 4.5 or earlier](not-supported-in-windows-installer-4-5.md):** The [**MSIINSTALLPERUSER**](msiinstallperuser.md) property and per-user versions of folders referenced by the [**ProgramFilesFolder**](programfilesfolder.md), [**CommonFilesFolder**](commonfilesfolder.md), [**ProgramFiles64Folder**](programfiles64folder.md), and [**CommonFiles64Folder**](commonfiles64folder.md) properties are not supported.</span></span> <span data-ttu-id="35e53-112">Папки **FOLDERID \_ Усерпрограмфилес** и **FOLDERID \_ усерпрограмфилескоммон** доступны начиная с Windows 7 и Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="35e53-112">The **FOLDERID\_UserProgramFiles** and **FOLDERID\_UserProgramFilesCommon** folders are available beginning with Windows 7 and Windows Server 2008 R2.</span></span> <span data-ttu-id="35e53-113">Это означает, что установки, разработанные для установщик Windows 4,5 или более ранних версий файлов и записей реестра, FOLDERID \_ ProgramFiles, FOLDERID \_ ПРОГРАМФИЛЕСКОММОН, FOLDERID \_ ProgramFilesX64 и FOLDERID \_ ProgramFilesCommonX64.</span><span class="sxs-lookup"><span data-stu-id="35e53-113">This means installations developed for Windows Installer 4.5 or earlier direct files and registry entries to FOLDERID\_ProgramFiles, FOLDERID\_ProgramFilesCommon, FOLDERID\_ProgramFilesX64, and FOLDERID\_ProgramFilesCommonX64.</span></span> <span data-ttu-id="35e53-114">Так как эти расположения доступны другим пользователям компьютера, Windows Vista и более поздние системы должны отображать запросы UAC для учетных данных.</span><span class="sxs-lookup"><span data-stu-id="35e53-114">Because these are locations accessible to other users of the computer, Windows Vista and later systems require the display of UAC prompts for credentials.</span></span>

<span data-ttu-id="35e53-115">Когда пользователь устанавливает пакет двойного назначения, разработанный для установщик Windows 5,0 с установщик Windows 4,5 или более ранней версии, установщик игнорирует свойство [**мсиинсталлперусер**](msiinstallperuser.md) .</span><span class="sxs-lookup"><span data-stu-id="35e53-115">When a user installs a dual-purpose package authored for Windows Installer 5.0 with Windows Installer 4.5 or earlier, the installer ignores the [**MSIINSTALLPERUSER**](msiinstallperuser.md) property.</span></span> <span data-ttu-id="35e53-116">В этом случае установка может направить файлы и записи реестра в расположения, доступные другим пользователям, и требует, чтобы система отображала запросы UAC для учетных данных.</span><span class="sxs-lookup"><span data-stu-id="35e53-116">In this case, the installation can direct files and registry entries to locations accessible to other users and require the system to display UAC prompts for credentials.</span></span> <span data-ttu-id="35e53-117">Установщик Windows 5,0 может установить пакет, разработанный для установщик Windows 4,5 или более ранней версии, однако установка направляет файлы и записи реестра в расположения, доступные другим пользователям, и требует, чтобы система отображала запросы UAC для учетных данных.</span><span class="sxs-lookup"><span data-stu-id="35e53-117">Windows Installer 5.0 can install a package that was developed for Windows Installer 4.5 or earlier, however, the installation directs files and registry entries to locations accessible to other users and requires the system to display UAC prompts for credentials.</span></span>

## <a name="development-guidelines"></a><span data-ttu-id="35e53-118">Рекомендации по разработке</span><span class="sxs-lookup"><span data-stu-id="35e53-118">Development Guidelines</span></span>

<span data-ttu-id="35e53-119">Придерживайтесь следующих руководств по созданию одного пакета, чтобы убедиться, что пакет можно установить в контексте "на пользователя" или "на компьютер".</span><span class="sxs-lookup"><span data-stu-id="35e53-119">Adhere to the following single-package authoring guidelines to ensure that the package can be installed in either the per-user or per-machine context.</span></span> <span data-ttu-id="35e53-120">Следуйте этим рекомендациям, чтобы предоставить пользователю возможность выбора во время установки для отдельных пользователей или компьютеров, а также для удаления запросов контроля учетных записей из установок для отдельных пользователей.</span><span class="sxs-lookup"><span data-stu-id="35e53-120">Follow these guidelines to enable the user to choose at installation time a per-user or per-machine installation and to remove UAC prompts from per-user installations.</span></span>

-   <span data-ttu-id="35e53-121">Для установки на уровне пользователя требуется установщик Windows 5,0 в Windows 7 или Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="35e53-121">Per-user installation requires Windows Installer 5.0 on Windows 7 or Windows Server 2008 R2.</span></span> <span data-ttu-id="35e53-122">Необходимо сообщить пользователю о том, что пакет поддерживает установку приложения на компьютере в более ранних версиях системы.</span><span class="sxs-lookup"><span data-stu-id="35e53-122">You should inform the user that the package supports per-machine installation of the application on earlier versions of the system.</span></span>
-   <span data-ttu-id="35e53-123">Инициализируйте значения свойств [**ALLUSERS**](allusers.md) и [**Мсиинсталлперусер**](msiinstallperuser.md) в [таблице свойств](property-table.md) пакета с двойным набором целей.</span><span class="sxs-lookup"><span data-stu-id="35e53-123">Initialize the values for the [**ALLUSERS**](allusers.md) and [**MSIINSTALLPERUSER**](msiinstallperuser.md) properties in the [Property Table](property-table.md) of your dual-purpose package.</span></span> <span data-ttu-id="35e53-124">Используйте значение **ALLUSERS** , равное 2, и значение **мсиинсталлперусер** , равное 1, в качестве начальных значений.</span><span class="sxs-lookup"><span data-stu-id="35e53-124">Use **ALLUSERS** value of 2 and a **MSIINSTALLPERUSER** value of 1 as the initial values.</span></span> <span data-ttu-id="35e53-125">Это означает установку по умолчанию для пакета с двойным назначением.</span><span class="sxs-lookup"><span data-stu-id="35e53-125">This specifies per-user installation as the default for the dual-purpose package.</span></span>
-   <span data-ttu-id="35e53-126">Рассмотрите возможность создания диалогового окна для [пользовательского интерфейса](user-interface.md) пакета с двойным набором, позволяющего пользователю выбирать контекст во время установки.</span><span class="sxs-lookup"><span data-stu-id="35e53-126">Consider authoring a dialog box for the [user interface](user-interface.md) of your dual-purpose package that enables the user to choose the context at installation time.</span></span> <span data-ttu-id="35e53-127">Создайте элементы управления в этом настраиваемом диалоговом окне, чтобы задать значения свойств [**ALLUSERS**](allusers.md) и [**мсиинсталлперусер**](msiinstallperuser.md) .</span><span class="sxs-lookup"><span data-stu-id="35e53-127">Author the controls on this custom dialog box to set the values of the [**ALLUSERS**](allusers.md) and [**MSIINSTALLPERUSER**](msiinstallperuser.md) properties.</span></span> <span data-ttu-id="35e53-128">Для параметра **ALLUSERS** , равного 2, установите значение **мсиинсталлперусер** равным 1, чтобы указать установку для отдельного пользователя, и присвойте параметру **мсиинсталлперусер** пустую строку (""), чтобы указать установку на компьютер.</span><span class="sxs-lookup"><span data-stu-id="35e53-128">For the **ALLUSERS** value of 2, set **MSIINSTALLPERUSER** to a value of 1 to specify a per-user installation and set **MSIINSTALLPERUSER** to an empty string ("") to specify a per-machine installation.</span></span> <span data-ttu-id="35e53-129">Пользователи также могут задать в командной строке **ALLUSERS** и **мсиинсталлперусер** , если они устанавливают пакет из командной строки.</span><span class="sxs-lookup"><span data-stu-id="35e53-129">Users can also set the **ALLUSERS** and **MSIINSTALLPERUSER** on the command line if they install the package from the command line.</span></span>
-   <span data-ttu-id="35e53-130">Проверить пакет, используя [внутренние средства оценки согласованности — ICEs](internal-consistency-evaluators-ices.md).</span><span class="sxs-lookup"><span data-stu-id="35e53-130">Validate the package using [Internal Consistency Evaluators - ICEs](internal-consistency-evaluators-ices.md).</span></span> <span data-ttu-id="35e53-131">Пакет должен быть способен пройти проверку с помощью [ICE105](ice-105.md) , чтобы стать допустимым пакетом с двойным набором.</span><span class="sxs-lookup"><span data-stu-id="35e53-131">The package must be able to pass validation by [ICE105](ice-105.md) to be a valid dual-purpose package.</span></span>
-   <span data-ttu-id="35e53-132">Используйте [таблицу реестра](registry-table.md) и [таблицу ремоверегистри](removeregistry-table.md) для перенаправления записей реестра в пользовательские части реестра при установке на уровне пользователя.</span><span class="sxs-lookup"><span data-stu-id="35e53-132">Use the [Registry Table](registry-table.md) and [RemoveRegistry Table](removeregistry-table.md) to redirect registry entries to the per-user parts of the registry during per-user installations.</span></span> <span data-ttu-id="35e53-133">При установке на уровне пользователя записи реестра, имеющие значение-1 в корневом столбце, перенаправляются в раздел **hKey \_ текущий \_ пользователь**, а при установке на компьютере они направляются на **\_ локальный \_ компьютер hKey**.</span><span class="sxs-lookup"><span data-stu-id="35e53-133">In a per-user installation, registry entries that have -1 in the Root column are redirected to **HKEY\_CURRENT\_USER**, and in a per-machine installation these are directed to **HKEY\_LOCAL\_MACHINE**.</span></span> <span data-ttu-id="35e53-134">При установке на уровне пользователя записи реестра, имеющие мсидбрегистрирутклассесрут (0) в корневом столбце, перенаправляются в  \\ **классы программного обеспечения** HKCU \\ , а при установке на компьютере они направляются в  \\ **классы программного обеспечения** HKLM \\ .</span><span class="sxs-lookup"><span data-stu-id="35e53-134">In a per-user installation, registry entries that have msidbRegistryRootClassesRoot (0) in the Root column are redirected to **HKCU**\\**Software**\\**Classes**, and in a per-machine installation, these are directed to **HKLM**\\**Software**\\**Classes**.</span></span>
-   <span data-ttu-id="35e53-135">Используйте свойство [**ProgramFilesFolder**](programfilesfolder.md) в [таблице каталогов](directory-table.md) [32-разрядных пакетов установщик Windows](32-bit-windows-installer-packages.md) , чтобы указать расположение каталогов, содержащих 32-разрядные компоненты, которые не являются общими для разных приложений.</span><span class="sxs-lookup"><span data-stu-id="35e53-135">Use the [**ProgramFilesFolder**](programfilesfolder.md) property in the [Directory table](directory-table.md) of [32-bit Windows Installer Packages](32-bit-windows-installer-packages.md) to specify the locations of directories containing 32-bit components not shared across applications.</span></span> <span data-ttu-id="35e53-136">Когда пользователь устанавливает пакет с двойным набором, используя контекст на компьютере, эти компоненты сохраняются в папке Program Files в 32-разрядных версиях Windows и в папке Program Files (x86) в 64-разрядных версиях системы.</span><span class="sxs-lookup"><span data-stu-id="35e53-136">When a user installs the dual-purpose package using the per-machine context, these components are saved in the Program Files folder on 32-bit versions of Windows and in the Program Files (x86) folder on 64-bit versions of the system.</span></span> <span data-ttu-id="35e53-137">К компонентам в этих каталогах могут обращаться все пользователи.</span><span class="sxs-lookup"><span data-stu-id="35e53-137">The components in these directories can be accessed by all users.</span></span> <span data-ttu-id="35e53-138">Когда пользователь устанавливает пакет двойного назначения в Windows 7 или Windows Server 2008 R2 с использованием контекста «на пользователя», эти компоненты сохраняются в папке Programs текущего пользователя (например, в% LocalAppData% \\ Programs) и доступны только этому пользователю.</span><span class="sxs-lookup"><span data-stu-id="35e53-138">When a user installs the dual-purpose package on Windows 7 or Windows Server 2008 R2 using the per-user context, these components are saved in the Programs folder of the current user (for example at %LocalAppData%\\Programs) and can be accessed only by that user.</span></span>
-   <span data-ttu-id="35e53-139">Используйте свойство [**коммонфилесфолдер**](commonfilesfolder.md) в [таблице каталогов](directory-table.md) [32-разрядных пакетов установщик Windows](32-bit-windows-installer-packages.md) , чтобы указать расположение каталогов, содержащих 32-разрядные компоненты, общие для разных приложений.</span><span class="sxs-lookup"><span data-stu-id="35e53-139">Use the [**CommonFilesFolder**](commonfilesfolder.md) property in the [Directory table](directory-table.md) of [32-bit Windows Installer Packages](32-bit-windows-installer-packages.md) to specify the locations of directories containing 32-bit components shared across applications.</span></span> <span data-ttu-id="35e53-140">Когда пользователь устанавливает пакет с двойным набором, используя контекст на компьютере, эти компоненты сохраняются в папке Common Files и могут быть доступны всем пользователям.</span><span class="sxs-lookup"><span data-stu-id="35e53-140">When a user installs the dual-purpose package using the per-machine context, these components are saved in the Common Files folder and can be accessed by all users.</span></span> <span data-ttu-id="35e53-141">Когда пользователь устанавливает пакет двойного назначения в Windows 7 или Windows Server 2008 R2 с помощью контекста для каждого пользователя, эти компоненты сохраняются в общей папке текущего пользователя (например, в% LocalAppData% \\ Programs \\ ) и могут быть доступны только этому пользователю.</span><span class="sxs-lookup"><span data-stu-id="35e53-141">When a user installs the dual-purpose package on Windows 7 or Windows Server 2008 R2 using the per-user context, these components are saved in the Common folder of the current user (for example at %LocalAppData%\\Programs\\Common) and can be accessed only by that user.</span></span>
-   <span data-ttu-id="35e53-142">Используйте свойство [**ProgramFiles64Folder**](programfiles64folder.md) в [таблице каталогов](directory-table.md) [64-разрядных пакетов установщик Windows](64-bit-windows-installer-packages.md) , чтобы указать расположение каталогов, содержащих 64-разрядные компоненты, которые не являются общими для разных приложений.</span><span class="sxs-lookup"><span data-stu-id="35e53-142">Use the [**ProgramFiles64Folder**](programfiles64folder.md) property in the [Directory table](directory-table.md) of [64-bit Windows Installer Packages](64-bit-windows-installer-packages.md) to specify the locations of directories containing 64-bit components not shared across applications.</span></span> <span data-ttu-id="35e53-143">Когда пользователь устанавливает пакет с двойным набором, используя контекст на компьютере, эти компоненты сохраняются в папке Program Files.</span><span class="sxs-lookup"><span data-stu-id="35e53-143">When a user installs the dual-purpose package using the per-machine context, these components are saved in the Program Files folder.</span></span> <span data-ttu-id="35e53-144">К компонентам в этих каталогах могут обращаться все пользователи.</span><span class="sxs-lookup"><span data-stu-id="35e53-144">The components in these directories can be accessed by all users.</span></span> <span data-ttu-id="35e53-145">Когда пользователь устанавливает пакет двойного назначения в Windows 7 или Windows Server 2008 R2 с использованием контекста «на пользователя», эти компоненты сохраняются в папке Programs текущего пользователя (например, в% LocalAppData% \\ Programs) и доступны только этому пользователю.</span><span class="sxs-lookup"><span data-stu-id="35e53-145">When a user installs the dual-purpose package on Windows 7 or Windows Server 2008 R2 using the per-user context, these components are saved in the Programs folder of the current user (for example at %LocalAppData%\\Programs) and can be accessed only by that user.</span></span> <span data-ttu-id="35e53-146">Дополнительные сведения о создании пакета для установки приложения на 64-разрядных операционных системах см. в разделе [установщик Windows на 64-разрядных операционных системах](windows-installer-on-64-bit-operating-systems.md).</span><span class="sxs-lookup"><span data-stu-id="35e53-146">For more information about authoring a package to install an application on 64-bit operating systems, see [Windows Installer on 64-bit Operating Systems](windows-installer-on-64-bit-operating-systems.md).</span></span>
-   <span data-ttu-id="35e53-147">Используйте свойство [**CommonFiles64Folder**](commonfiles64folder.md) в [таблице каталогов](directory-table.md) [64-разрядных пакетов установщик Windows](64-bit-windows-installer-packages.md) , чтобы указать расположение каталогов, содержащих 64-разрядные компоненты, общие для разных приложений.</span><span class="sxs-lookup"><span data-stu-id="35e53-147">Use the [**CommonFiles64Folder**](commonfiles64folder.md) property in the [Directory table](directory-table.md) of [64-bit Windows Installer Packages](64-bit-windows-installer-packages.md) to specify the locations of directories containing 64-bit components shared across applications.</span></span> <span data-ttu-id="35e53-148">Когда пользователь устанавливает пакет с двойным набором, используя контекст на компьютере, эти компоненты сохраняются в папке Common Files и могут быть доступны всем пользователям.</span><span class="sxs-lookup"><span data-stu-id="35e53-148">When a user installs the dual-purpose package using the per-machine context, these components are saved in the Common Files folder and can be accessed by all users.</span></span> <span data-ttu-id="35e53-149">Когда пользователь устанавливает пакет двойного назначения в Windows 7 или Windows Server 2008 R2 с помощью контекста для каждого пользователя, эти компоненты сохраняются в общей папке текущего пользователя (например, в% LocalAppData% \\ Programs \\ ) и могут быть доступны только этому пользователю.</span><span class="sxs-lookup"><span data-stu-id="35e53-149">When a user installs the dual-purpose package on Windows 7 or Windows Server 2008 R2 using the per-user context, these components are saved in the Common folder of the current user (for example at %LocalAppData%\\Programs\\Common) and can be accessed only by that user.</span></span>
-   <span data-ttu-id="35e53-150">Используйте свойства [**ProgramFilesFolder**](programfilesfolder.md) и [**Коммонфилесфолдер**](commonfilesfolder.md) в [таблице каталогов](directory-table.md) [64-разрядных пакетов установщик Windows](64-bit-windows-installer-packages.md) , чтобы указать расположение каталогов, содержащих 32-разрядные компоненты.</span><span class="sxs-lookup"><span data-stu-id="35e53-150">Use the [**ProgramFilesFolder**](programfilesfolder.md) and [**CommonFilesFolder**](commonfilesfolder.md) properties in the [Directory table](directory-table.md) of [64-bit Windows Installer Packages](64-bit-windows-installer-packages.md) to specify the location of directories containing 32-bit components.</span></span> <span data-ttu-id="35e53-151">Используйте разные имена для 32-разрядных и 64-разрядных версий всех компонентов с одинаковыми именами или сохраните версии в разных папках.</span><span class="sxs-lookup"><span data-stu-id="35e53-151">Use different names for the 32-bit and 64-bit versions of any components provided with the same name, or alternatively, save the versions in different folders.</span></span> <span data-ttu-id="35e53-152">Например, добавьте сведения в таблицу Directory, чтобы указать расположение каталога, содержащего 32-разрядную версию, в виде имени \[ ProgramFilesFolder \] \\ *ISV* имя \\ *приложения* \\ x86 и расположение каталога, содержащего 64-разрядную версию, в формате \[ Program64FilesFolder \] \\ *ISV имя* \\ *приложения* \\ x64.</span><span class="sxs-lookup"><span data-stu-id="35e53-152">For example, add information to the Directory table to specify the location of the directory containing the 32-bit version as \[ProgramFilesFolder\]\\*ISV Name*\\*Application Name*\\x86 and the location of the directory containing the 64-bit version as \[Program64FilesFolder\]\\*ISV Name*\\*Application Name*\\x64.</span></span> <span data-ttu-id="35e53-153">При установке на компьютер сохраняется 32-разрядная версия в файле Program Files (x86) \\ *имя* \\ *приложения* \\ x86 и сохраняется 64-разрядная версия в Program Files \\ *ISV* имя \\ *приложения* \\ x64.</span><span class="sxs-lookup"><span data-stu-id="35e53-153">A per-machine installation then saves the 32-bit version in Program Files(x86)\\*ISV Name*\\*Application Name*\\x86 and saves the 64-bit version in Program Files\\*ISV Name*\\*Application Name*\\x64.</span></span> <span data-ttu-id="35e53-154">Установка на уровне пользователя сохраняет 32-разрядную версию в% LocalAppData% \\ Programs \\ *ISV* имя \\ *приложения* \\ x86 и устанавливает 64-разрядную версию в% LocalAppData% \\ Programs \\ *имя* \\ *приложения*— \\ x64.</span><span class="sxs-lookup"><span data-stu-id="35e53-154">A per-user installation saves the 32-bit version in %LocalAppData%\\Programs\\*ISV Name*\\*Application Name*\\x86 and installs the 64-bit version in %LocalAppData%\\Programs\\*ISV Name*\\*Application Name*\\x64.</span></span>
-   <span data-ttu-id="35e53-155">Храните данные конфигурации для каждого пользователя для приложения в разделе \\ Пользователи \\ *имя пользователя* \\ APPDATA.</span><span class="sxs-lookup"><span data-stu-id="35e53-155">Store per-user configuration data for the application under \\Users\\*username*\\AppData.</span></span>
-   <span data-ttu-id="35e53-156">Сохраняйте шаблоны и файлы, создаваемые приложением, во вложенных папках в разделе \\ user \\ *username*.</span><span class="sxs-lookup"><span data-stu-id="35e53-156">Store templates and files generated by the application in subfolders under \\Users\\*username*.</span></span>
-   <span data-ttu-id="35e53-157">Если приложение использует расширения оболочки, следует использовать точки [расширения оболочки](https://msdn.microsoft.com/library/bb762762.aspx) , поддерживающие для пользователя, которые доступны начиная с Windows 7 или windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="35e53-157">If your application uses shell extensions, you should use the per-user-capable [shell extensibility](https://msdn.microsoft.com/library/bb762762.aspx) points that are available beginning in Windows 7 or Windows Server 2008 R2.</span></span>
-   <span data-ttu-id="35e53-158">Не используйте настраиваемые действия в пакете, для выполнения которых требуются повышенные привилегии.</span><span class="sxs-lookup"><span data-stu-id="35e53-158">Do not use custom actions in your package that require elevated privileges to run.</span></span> <span data-ttu-id="35e53-159">Таблица [CustomAction](customaction-table.md) не должна содержать настраиваемые действия, помеченные для запуска с повышенными привилегиями.</span><span class="sxs-lookup"><span data-stu-id="35e53-159">The [CustomAction](customaction-table.md) table should contain no custom actions that have been marked to run with elevated privileges.</span></span> <span data-ttu-id="35e53-160">Дополнительные сведения о настраиваемых действиях с повышенными правами см. в разделе [Безопасность настраиваемых действий](custom-action-security.md).</span><span class="sxs-lookup"><span data-stu-id="35e53-160">For more information about elevated custom actions, see [Custom Action Security](custom-action-security.md).</span></span>
-   <span data-ttu-id="35e53-161">Не записывайте никаких глобальных системных папок.</span><span class="sxs-lookup"><span data-stu-id="35e53-161">Do not write in any global system folders.</span></span> <span data-ttu-id="35e53-162">Таблица [каталогов](directory-table.md) не должна содержать ссылку на какие-либо из следующих свойств системной папки.</span><span class="sxs-lookup"><span data-stu-id="35e53-162">The [Directory](directory-table.md) table should not contain a reference to any of the following system folder properties.</span></span>

    <dl>

[<span data-ttu-id="35e53-163">**админтулсфолдер**</span><span class="sxs-lookup"><span data-stu-id="35e53-163">**AdminToolsFolder**</span></span>](admintoolsfolder.md)  
    [<span data-ttu-id="35e53-164">**коммонаппдатафолдер**</span><span class="sxs-lookup"><span data-stu-id="35e53-164">**CommonAppDataFolder**</span></span>](commonappdatafolder.md)  
    [<span data-ttu-id="35e53-165">**фонтсфолдер**</span><span class="sxs-lookup"><span data-stu-id="35e53-165">**FontsFolder**</span></span>](fontsfolder.md)  
    [<span data-ttu-id="35e53-166">**System16Folder**</span><span class="sxs-lookup"><span data-stu-id="35e53-166">**System16Folder**</span></span>](system16folder.md)  
    [<span data-ttu-id="35e53-167">**System64Folder**</span><span class="sxs-lookup"><span data-stu-id="35e53-167">**System64Folder**</span></span>](system64folder.md)  
    [<span data-ttu-id="35e53-168">**системфолдер**</span><span class="sxs-lookup"><span data-stu-id="35e53-168">**SystemFolder**</span></span>](systemfolder.md)  
    [<span data-ttu-id="35e53-169">**темпфолдер**</span><span class="sxs-lookup"><span data-stu-id="35e53-169">**TempFolder**</span></span>](tempfolder.md)  
    [<span data-ttu-id="35e53-170">**виндовсфолдер**</span><span class="sxs-lookup"><span data-stu-id="35e53-170">**WindowsFolder**</span></span>](windowsfolder.md)  
    [<span data-ttu-id="35e53-171">**виндовсволуме**</span><span class="sxs-lookup"><span data-stu-id="35e53-171">**WindowsVolume**</span></span>](windowsvolume.md)  
    </dl>

-   <span data-ttu-id="35e53-172">Не устанавливайте сборку среды CLR в глобальный кэш сборок (GAC). Дополнительные сведения об установке сборок в глобальный кэш сборок см. в разделе [Добавление сборок в пакет](adding-assemblies-to-a-package.md) и [Установка сборок среды](installation-of-common-language-runtime-assemblies.md)CLR.</span><span class="sxs-lookup"><span data-stu-id="35e53-172">Do not install a common language runtime assembly into the global assembly cache (GAC.) For more information about installing assemblies to the global assembly cache, see [Adding Assemblies to a Package](adding-assemblies-to-a-package.md) and [Installation of Common Language Runtime Assemblies](installation-of-common-language-runtime-assemblies.md).</span></span>
-   <span data-ttu-id="35e53-173">Не устанавливайте источники данных ODBC.</span><span class="sxs-lookup"><span data-stu-id="35e53-173">Do not install any ODBC data sources.</span></span> <span data-ttu-id="35e53-174">Не используйте таблицу [одбкдатасаурце](odbcdatasource-table.md) для установки источника данных.</span><span class="sxs-lookup"><span data-stu-id="35e53-174">Do not use the [ODBCDataSource](odbcdatasource-table.md) table to install a data source.</span></span>
-   <span data-ttu-id="35e53-175">Не устанавливайте какие бы то ни было службы.</span><span class="sxs-lookup"><span data-stu-id="35e53-175">Do not install any services.</span></span> <span data-ttu-id="35e53-176">Не используйте таблицу [сервицеинсталл](serviceinstall-table.md) для установки службы.</span><span class="sxs-lookup"><span data-stu-id="35e53-176">Do not use the [ServiceInstall](serviceinstall-table.md) table to install a service.</span></span>

## <a name="example"></a><span data-ttu-id="35e53-177">Пример</span><span class="sxs-lookup"><span data-stu-id="35e53-177">Example</span></span>

<span data-ttu-id="35e53-178">Пример многоцелевого пакета предоставляется в [Windows SDK компонентов для установщик Windows разработчиков](platform-sdk-components-for-windows-installer-developers.md) в качестве PUASample1.msi файлов.</span><span class="sxs-lookup"><span data-stu-id="35e53-178">An example of a dual-purpose package is provided in the [Windows SDK Components for Windows Installer Developers](platform-sdk-components-for-windows-installer-developers.md) as the file PUASample1.msi.</span></span> <span data-ttu-id="35e53-179">Если у вас есть текущий пакет SDK, у вас есть доступ ко всем средствам и данным, необходимым для воспроизведения примера установочного пакета.</span><span class="sxs-lookup"><span data-stu-id="35e53-179">If you have the current SDK, you have access to all the tools and data necessary to reproduce the sample installation package.</span></span> <span data-ttu-id="35e53-180">Дополнительные сведения об этом примере см. в разделе [Пример создания отдельного пакета](single-package-authoring-example.md).</span><span class="sxs-lookup"><span data-stu-id="35e53-180">For more information about this example, see [Single Package Authoring Example](single-package-authoring-example.md).</span></span>

 

 
