---
description: Установщик Windows соответствует контролю учетных записей (UAC) в Windows Vista.
ms.assetid: 13955ded-6b7f-475f-bb0f-6530a0b4963f
title: Использование установщик Windows с UAC
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 77a05dcd2fb33eff24fb17702af1cb306f81002d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104155114"
---
# <a name="using-windows-installer-with-uac"></a><span data-ttu-id="9ec37-103">Использование установщик Windows с UAC</span><span class="sxs-lookup"><span data-stu-id="9ec37-103">Using Windows Installer with UAC</span></span>

<span data-ttu-id="9ec37-104">Установщик Windows соответствует [*контролю учетных записей*](u-gly.md) (UAC) в Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="9ec37-104">Windows Installer complies with [*User Account Control*](u-gly.md) (UAC) in Windows Vista.</span></span> <span data-ttu-id="9ec37-105">С помощью авторизации администратора установщик Windows может устанавливать приложения или исправления от имени пользователя, который может не быть членом группы администраторов.</span><span class="sxs-lookup"><span data-stu-id="9ec37-105">With authorization from an administrator, the Windows Installer can install applications or patches on behalf of a user that may not be a member of the Administrators group.</span></span> <span data-ttu-id="9ec37-106">Это называется установкой с [*повышенными правами*](e-gly.md) , поскольку установщик Windows вносит в систему изменения от имени пользователя, которые обычно не разрешены, если пользователь внес изменения напрямую.</span><span class="sxs-lookup"><span data-stu-id="9ec37-106">This is referred to as an [*elevated*](e-gly.md) installation because the Windows Installer makes changes to the system on behalf of the user that would not normally be allowed if the user were making the changes directly.</span></span>

-   <span data-ttu-id="9ec37-107">При использовании Windows Vista в корпоративной среде приложения могут быть назначены как управляемые приложения.</span><span class="sxs-lookup"><span data-stu-id="9ec37-107">When using Windows Vista in a corporate environment, applications can be designated as managed applications.</span></span> <span data-ttu-id="9ec37-108">С помощью развертывания и [Групповая политика](/previous-versions/windows/desktop/Policy/group-policy-start-page)приложений администраторы могут блокировать каталоги, а затем назначать или публиковать управляемые приложения в этих каталогах [*обычным пользователям*](s-gly.md) для установки, восстановления или удаления.</span><span class="sxs-lookup"><span data-stu-id="9ec37-108">Using application deployment and [Group Policy](/previous-versions/windows/desktop/Policy/group-policy-start-page), administrators can lockdown directories and then assign or publish the managed applications in those directories to [*standard users*](s-gly.md) for install, repair, or removal.</span></span> <span data-ttu-id="9ec37-109">Управляемые приложения регистрируются в кусте реестра для **\_ локального \_ компьютера hKey** .</span><span class="sxs-lookup"><span data-stu-id="9ec37-109">Managed applications are registered in the **HKEY\_LOCAL\_MACHINE** registry hive.</span></span> <span data-ttu-id="9ec37-110">После регистрации приложения в качестве управляемого приложения последующие операции установки всегда выполняются с повышенными привилегиями.</span><span class="sxs-lookup"><span data-stu-id="9ec37-110">Once an application has been registered as a managed application, subsequent installation operations always run with elevated privileges.</span></span> <span data-ttu-id="9ec37-111">Если пользователь работает от имени администратора, запрос на продолжение установки не требуется.</span><span class="sxs-lookup"><span data-stu-id="9ec37-111">If the user is running as an administrator, no prompting is required to continue the installation.</span></span> <span data-ttu-id="9ec37-112">Если пользователь работает от имени обычного пользователя и приложение уже назначено или Опубликовано, установка управляемого приложения может быть продолжена без запроса.</span><span class="sxs-lookup"><span data-stu-id="9ec37-112">If the user is running as a standard user, and the application has already been assigned or published, the installation of the managed application can continue without prompting.</span></span>
-   <span data-ttu-id="9ec37-113">При использовании Windows Vista в некорпоративной среде UAC обрабатывает повышение уровня установки приложения.</span><span class="sxs-lookup"><span data-stu-id="9ec37-113">When using Windows Vista in a non-corporate environment, UAC handles the elevation of application installation.</span></span> <span data-ttu-id="9ec37-114">Установщик Windows 4,0 может вызвать [*службу Application Information Service*](a-gly.md) (AIS), чтобы запросить авторизацию администратора для повышения уровня установки.</span><span class="sxs-lookup"><span data-stu-id="9ec37-114">Windows Installer 4.0 can call to the [*Application Information Service*](a-gly.md) (AIS) to request administrator authorization to elevate an installation.</span></span> <span data-ttu-id="9ec37-115">Перед выполнением установки, обозначенной как требующая прав администратора, UAC запрашивает у пользователя разрешение на повышение уровня установки.</span><span class="sxs-lookup"><span data-stu-id="9ec37-115">Before an installation identified as requiring administrator privileges can be run, UAC prompts the user for consent to elevate the installation.</span></span> <span data-ttu-id="9ec37-116">Запрос согласия отображается по умолчанию, даже если пользователь является членом локальной группы администраторов, так как администраторы запускаются как стандартные пользователи до тех пор, пока приложению или системному компоненту, для которого требуются административные учетные данные, не требуется разрешение на запуск.</span><span class="sxs-lookup"><span data-stu-id="9ec37-116">The consent prompt is displayed by default, even if the user is a member of the local Administrators group, because administrators run as standard users until an application or system component that requires administrative credential requests permission to run.</span></span> <span data-ttu-id="9ec37-117">Этот пользовательский интерфейс называется [*режимом одобрения администратором*](a-gly.md) .</span><span class="sxs-lookup"><span data-stu-id="9ec37-117">This user experience is called [*Admin Approval Mode*](a-gly.md) (AAM).</span></span> <span data-ttu-id="9ec37-118">Если стандартный пользователь пытается установить приложение, пользователь должен получить права администратора, чтобы предоставить им учетные данные администратора, чтобы продолжить установку.</span><span class="sxs-lookup"><span data-stu-id="9ec37-118">If a standard user attempts to install the application, the user has to get a person with administrator privilege to provide them their administrator credentials to continue the installation.</span></span> <span data-ttu-id="9ec37-119">Этот пользовательский интерфейс называется запросом учетных [*данных (OTS-*](o-gly.md) ).</span><span class="sxs-lookup"><span data-stu-id="9ec37-119">This user experience is called an [*Over the Shoulder*](o-gly.md) (OTS) credential prompt.</span></span>
-   <span data-ttu-id="9ec37-120">Поскольку UAC предоставляет права на этапах установки, разработчики установщик Windowsных пакетов не должны предположить, что их установка всегда будет иметь доступ ко всем частям системы.</span><span class="sxs-lookup"><span data-stu-id="9ec37-120">Because UAC restricts privileges during the stages of an installation, developers of Windows Installer packages should not assume that their installation will always have access to all parts of the system.</span></span> <span data-ttu-id="9ec37-121">Таким образом, разработчики пакетов установщик Windows должны соблюдать рекомендации по пакетам, описанные в разделе [рекомендации для пакетов](guidelines-for-packages.md) , чтобы обеспечить работу пакета с UAC и Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="9ec37-121">Windows Installer package developers should therefore adhere to the package guidelines described in [Guidelines for Packages](guidelines-for-packages.md) to ensure their package works with UAC and Windows Vista.</span></span> <span data-ttu-id="9ec37-122">Пакет, который был создан и протестирован в соответствии с UAC, должен содержать свойство [**мсидеплойменткомплиант**](msideploymentcompliant.md) со значением 1.</span><span class="sxs-lookup"><span data-stu-id="9ec37-122">A package that has been authored and tested to comply with UAC should contain the [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) property set to 1.</span></span>
-   <span data-ttu-id="9ec37-123">Администратор также может использовать методы, описанные в разделе [Установка пакета с повышенными привилегиями для администратора без](installing-a-package-with-elevated-privileges-for-a-non-admin.md) прав администратора, чтобы пользователь без прав администратор мог установить приложение с повышенными правами доступа к системе.</span><span class="sxs-lookup"><span data-stu-id="9ec37-123">An administrator can also use the methods described in the section: [Installing a Package with Elevated Privileges for a Non-Admin](installing-a-package-with-elevated-privileges-for-a-non-admin.md) to enable a non-administrator user to install an application with elevated system privileges.</span></span>
-   <span data-ttu-id="9ec37-124">Для установки приложения в контексте, управляемом для каждого пользователя, требуются права доступа, поэтому последующие установщик Windows переустановки или восстановления приложения также выполняются установщиком с повышенными привилегиями.</span><span class="sxs-lookup"><span data-stu-id="9ec37-124">Privileges are required to install an application in the per-user-managed context, and therefore subsequent Windows Installer reinstallations or repairs of the application are also performed by the installer using elevated privileges.</span></span> <span data-ttu-id="9ec37-125">Это означает, что в приложение в состоянии, управляемом пользователем, можно применить только исправления из доверенных источников.</span><span class="sxs-lookup"><span data-stu-id="9ec37-125">This means that only patches from trusted sources can be applied to an application in the per-user-managed state.</span></span> <span data-ttu-id="9ec37-126">Начиная с установщик Windows 3,0, можно применить исправление к управляемому пользователем приложению после регистрации исправления с повышенными привилегиями.</span><span class="sxs-lookup"><span data-stu-id="9ec37-126">Beginning with Windows Installer 3.0, you can apply a patch to a per-user managed application after the patch has been registered as having elevated privileges.</span></span> <span data-ttu-id="9ec37-127">Дополнительные сведения см. в статье об [установке исправлений Per-User управляемых приложениях](patching-per-user-managed-applications.md).</span><span class="sxs-lookup"><span data-stu-id="9ec37-127">For information see [Patching Per-User Managed Applications](patching-per-user-managed-applications.md).</span></span>

> [!Note]  
> <span data-ttu-id="9ec37-128">Если для установки пакета установщик Windows не требуются повышенные привилегии, автор пакета может отключить диалоговое окно, отображаемое UAC, чтобы запрашивать у пользователей разрешение на авторизацию администратора.</span><span class="sxs-lookup"><span data-stu-id="9ec37-128">When elevated privileges are not required to install a Windows Installer package, the author of the package can suppress the dialog box that UAC displays to prompt users for administrator authorization.</span></span> <span data-ttu-id="9ec37-129">Дополнительные сведения см. [в разделе Создание пакетов без диалогового окна UAC](authoring-packages-without-the-uac-dialog-box.md).</span><span class="sxs-lookup"><span data-stu-id="9ec37-129">For more information, see [Authoring Packages without the UAC Dialog Box](authoring-packages-without-the-uac-dialog-box.md).</span></span>

 

 

 
