---
description: Чтобы установить несколько экземпляров продукта из одного пакета установщик Windows, необходимо создать базовый пакет установки для продукта и преобразование экземпляра для каждого экземпляра, который будет установлен в дополнение к базовому экземпляру.
ms.assetid: fef49dda-503f-4b13-8763-70cb2ee0df5d
title: Создание нескольких экземпляров с помощью преобразований экземпляров
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c61424efbf08ea3e726594a3073f4ce7483af57d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662936"
---
# <a name="authoring-multiple-instances-with-instance-transforms"></a><span data-ttu-id="e01e1-103">Создание нескольких экземпляров с помощью преобразований экземпляров</span><span class="sxs-lookup"><span data-stu-id="e01e1-103">Authoring Multiple Instances with Instance Transforms</span></span>

<span data-ttu-id="e01e1-104">Чтобы установить несколько экземпляров продукта из одного пакета установщик Windows, необходимо создать базовый пакет установки для продукта и преобразование экземпляра для каждого экземпляра, который будет установлен в дополнение к базовому экземпляру.</span><span class="sxs-lookup"><span data-stu-id="e01e1-104">To install multiple instances of a product from one Windows Installer package, you need to author a base installation package for the product and an instance transform for each instance to be installed in addition to the base instance.</span></span> <span data-ttu-id="e01e1-105">При создании базового пакета и преобразований следуйте приведенным ниже рекомендациям.</span><span class="sxs-lookup"><span data-stu-id="e01e1-105">Use the following guidelines when authoring your base package and transforms:</span></span>

-   <span data-ttu-id="e01e1-106">Приложение установки может проверить наличие установщика, работающего в версии Windows Vista, Windows Server 2003, Windows XP с пакетом обновления 1 (SP1) и распространяемом пакете установщик Windows 3,0.</span><span class="sxs-lookup"><span data-stu-id="e01e1-106">Your setup application can check for the presence of the installer running on a version of Windows Vista, Windows Server 2003, Windows XP with Service Pack 1 (SP1), and the Windows Installer 3.0 redistributable.</span></span> <span data-ttu-id="e01e1-107">Любая из этих версий установщика (или более поздняя версия) необходима для установки нескольких экземпляров из одного пакета с помощью кода продукта — изменение преобразования.</span><span class="sxs-lookup"><span data-stu-id="e01e1-107">Any of these installer versions (or later) are required to install multiple instances from a single package using a product code–changing transform.</span></span>
-   <span data-ttu-id="e01e1-108">Каждый экземпляр должен иметь уникальный код продукта и идентификатор экземпляра.</span><span class="sxs-lookup"><span data-stu-id="e01e1-108">Each instance must have a unique product code and instance identifier.</span></span> <span data-ttu-id="e01e1-109">Вы можете определить свойство в базовом пакете, значение которого может быть задано в качестве идентификатора экземпляра.</span><span class="sxs-lookup"><span data-stu-id="e01e1-109">You may define a property in the base package, the value of which can be set to the instance identifier.</span></span>
-   <span data-ttu-id="e01e1-110">Чтобы обеспечить изолированность файлов каждого экземпляра, базовый пакет должен устанавливать файлы в расположение каталога, зависящее от идентификатора экземпляра.</span><span class="sxs-lookup"><span data-stu-id="e01e1-110">To keep the files of each instance isolated, the base package should install files into a directory location that depends on the instance identifier.</span></span>
-   <span data-ttu-id="e01e1-111">Чтобы предотвратить изолированность нефайловых данных каждого экземпляра, базовый пакет должен сохранять нефайловые данные в Наборы компонентов для каждого экземпляра.</span><span class="sxs-lookup"><span data-stu-id="e01e1-111">To keep the nonfile data of each instance isolated, the base package should collect nonfile data into sets of components for each instance.</span></span> <span data-ttu-id="e01e1-112">Затем соответствующие компоненты должны быть установлены на основе условных инструкций, зависящих от идентификатора экземпляра.</span><span class="sxs-lookup"><span data-stu-id="e01e1-112">The appropriate components should then be installed based on conditional statements that depend on the instance identifier.</span></span>
-   <span data-ttu-id="e01e1-113">Создайте преобразование экземпляра для каждого устанавливаемого экземпляра в дополнение к базовому экземпляру.</span><span class="sxs-lookup"><span data-stu-id="e01e1-113">Author an instance transform for each instance being installed in addition to the base instance.</span></span> <span data-ttu-id="e01e1-114">Базовый пакет может установить собственный экземпляр.</span><span class="sxs-lookup"><span data-stu-id="e01e1-114">The base package may install its own instance.</span></span>
-   <span data-ttu-id="e01e1-115">Преобразование экземпляра должно изменить код продукта и идентификатор для каждого экземпляра.</span><span class="sxs-lookup"><span data-stu-id="e01e1-115">The instance transform must change the product code and identifier for each instance.</span></span>
-   <span data-ttu-id="e01e1-116">Рекомендуется, чтобы преобразование «продукт» также изменило название продукта, чтобы экземпляр был легко различен в окне Установка и удаление программ через панель управления.</span><span class="sxs-lookup"><span data-stu-id="e01e1-116">It is recommended that the product transform also change the product name so that the instance is readily distinguished in Add/Remove Programs through Control Panel.</span></span>
-   <span data-ttu-id="e01e1-117">Если при преобразовании экземпляра файлы устанавливаются, они должны быть установлены в каталоге, который зависит от идентификатора экземпляра.</span><span class="sxs-lookup"><span data-stu-id="e01e1-117">If the instance transform installs files, they should be installed in a directory that depends on the instance identifier.</span></span>
-   <span data-ttu-id="e01e1-118">Все нефайловые данные, такие как разделы реестра, должны содержать имя экземпляра в пути для предотвращения конфликтов.</span><span class="sxs-lookup"><span data-stu-id="e01e1-118">All nonfile data, such as registry keys, should include the instance name in their path to prevent collisions.</span></span> <span data-ttu-id="e01e1-119">Это можно сделать с помощью свойства, значение которого является идентификатором экземпляра в пути, как показано в следующем примере [таблицы реестра](registry-table.md).</span><span class="sxs-lookup"><span data-stu-id="e01e1-119">This can be accomplished by using the property whose value is the instance identifier in the path as shown by the following example of a [Registry Table](registry-table.md).</span></span>



| <span data-ttu-id="e01e1-120">Реестр</span><span class="sxs-lookup"><span data-stu-id="e01e1-120">Registry</span></span> | <span data-ttu-id="e01e1-121">Root</span><span class="sxs-lookup"><span data-stu-id="e01e1-121">Root</span></span> | <span data-ttu-id="e01e1-122">Клавиши</span><span class="sxs-lookup"><span data-stu-id="e01e1-122">Key</span></span>                                            | <span data-ttu-id="e01e1-123">Название</span><span class="sxs-lookup"><span data-stu-id="e01e1-123">Name</span></span>         | <span data-ttu-id="e01e1-124">Значение</span><span class="sxs-lookup"><span data-stu-id="e01e1-124">Value</span></span>           | <span data-ttu-id="e01e1-125">Компонент\_</span><span class="sxs-lookup"><span data-stu-id="e01e1-125">Component\_</span></span>      |
|----------|------|------------------------------------------------|--------------|-----------------|------------------|
| <span data-ttu-id="e01e1-126">Reg1</span><span class="sxs-lookup"><span data-stu-id="e01e1-126">Reg1</span></span>     | <span data-ttu-id="e01e1-127">1</span><span class="sxs-lookup"><span data-stu-id="e01e1-127">1</span></span>    | <span data-ttu-id="e01e1-128">Программное обеспечение \\ Microsoft \\ мипродукт \\ \[ InstanceId\]</span><span class="sxs-lookup"><span data-stu-id="e01e1-128">Software\\Microsoft\\MyProduct\\\[InstanceId\]</span></span> | <span data-ttu-id="e01e1-129">инстанцегуид</span><span class="sxs-lookup"><span data-stu-id="e01e1-129">InstanceGuid</span></span> | <span data-ttu-id="e01e1-130">\[ProductCode\]</span><span class="sxs-lookup"><span data-stu-id="e01e1-130">\[ProductCode\]</span></span> | <span data-ttu-id="e01e1-131">NonFileDataComp1</span><span class="sxs-lookup"><span data-stu-id="e01e1-131">NonFileDataComp1</span></span> |



 

<span data-ttu-id="e01e1-132">Дополнительные сведения см. в статьях [Установка нескольких экземпляров продуктов и исправлений](installing-multiple-instances-of-products-and-patches.md) и [Установка нескольких экземпляров с преобразованиями экземпляров](installing-multiple-instances-with-instance-transforms.md).</span><span class="sxs-lookup"><span data-stu-id="e01e1-132">For more information, see [Installing Multiple Instances of Products and Patches](installing-multiple-instances-of-products-and-patches.md) and [Installing Multiple Instances with Instance Transforms](installing-multiple-instances-with-instance-transforms.md).</span></span>

 

 



