---
description: Если не удается найти необходимые средства оценки согласованности для существующих настраиваемых действий ICE, перечисленных в справочнике по ICE, необходимо подготовить собственный ICE для проверки пакета.
ms.assetid: d9ff43ee-8e7a-4132-ac2f-232dc24606d8
title: Сборка ICE
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6b4b79ab8e17d53ccfb60484c0d307f668c44a7a0e530cf776b10e73a697541c
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119500773"
---
# <a name="building-an-ice"></a>Сборка ICE

Если не удается найти необходимые средства [оценки согласованности](internal-consistency-evaluators-ices.md) для существующих настраиваемых действий Ice, перечисленных в [справочнике по Ice](ice-reference.md), необходимо подготовить собственный ICE для проверки пакета.

При создании настраиваемых действий ICE необходимо выполнить следующие действия.

-   Значение ICEs основано только на пользовательских действиях типов, перечисленных в приведенной таблице.
-   Вызовите [**мсипроцессмессаже**](/windows/desktop/api/Msiquery/nf-msiquery-msiprocessmessage) и опубликуйте \_ Пользовательский тип сообщения инсталлмессаже. При создании сообщений ICE следуйте формату сообщения в [рекомендациях по сообщениям компилятора](ice-message-guidelines.md).
-   Напишите свой ICE так, чтобы он записывал все ошибки API и всегда возвращал ошибку \_ успешно. Это необходимо, чтобы обеспечить выполнение последующих настраиваемых действий после сбоя ICE.

Пользовательские действия ICE ограничены следующими типами настраиваемых действий.



| Тип настраиваемого действия                                 | Описание               |
|----------------------------------------------------|---------------------------|
| [Тип настраиваемого действия 1](custom-action-type-1.md)   | Библиотека DLL в двоичном потоке      |
| [Тип настраиваемого действия 2](custom-action-type-2.md)   | EXE в двоичном потоке      |
| [Тип настраиваемого действия 5](custom-action-type-5.md)   | JScript в двоичном потоке  |
| [Тип настраиваемого действия 6](custom-action-type-6.md)   | VBScript в двоичном потоке |
| [Тип настраиваемого действия 37](custom-action-type-37.md) | JScript кода в виде строки    |
| [Тип настраиваемого действия 38](custom-action-type-38.md) | Код VBScript в виде строки   |



 

При создании настраиваемого действия ICE не следует выполнять следующие действия.

-   Не следует считать, что обработчик модуля, получающий ICE, является экземпляром установки базы данных установщика. Если он не является экземпляром установки, некоторые свойства не определяются, исходный и целевой каталоги не разрешаются, а текущие состояния компонентов не определяются.
-   Не полагайтесь на выполнение какого-либо действия установщика, пользовательского действия или другого ICE. Поскольку в предыдущем модуле ICE могли быть созданы временные столбцы в любой таблице, авторы должны ссылаться на столбцы по имени, когда это возможно. ICEs должен очистить все временные столбцы или таблицы до завершения работы.
-   Не считайте, что авторы имеют доступ к образу исходного каталога базы данных.
-   Не следует рассчитывать, что изменения, вносимые в базу данных, не сохраняются.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Пример ICE в C++](sample-ice-in-c-.md)
</dt> <dt>

[Пример ICE в VBScript](sample-ice-in-vbscript.md)
</dt> </dl>

 

 



