---
description: Список защищенных ресурсов
ms.assetid: 70413c13-3db0-4af0-b584-259cce70f084
title: Список защищенных ресурсов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 316a9bf9233283a7c0aba11f0d5fe8a09f38f1e7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104272584"
---
# <a name="protected-resource-list"></a><span data-ttu-id="a158d-103">Список защищенных ресурсов</span><span class="sxs-lookup"><span data-stu-id="a158d-103">Protected Resource List</span></span>

<span data-ttu-id="a158d-104">Разрешение на полный доступ для изменения ресурсов, защищенных WRP, ограничено TrustedInstaller.</span><span class="sxs-lookup"><span data-stu-id="a158d-104">Permission for full access to modify WRP-protected resources is restricted to TrustedInstaller.</span></span> <span data-ttu-id="a158d-105">Ресурсы, защищенные WRP, можно изменять только с помощью [поддерживаемых механизмов замены ресурсов](supported-file-replacement-mechanisms.md) в службе установщика модулей Windows.</span><span class="sxs-lookup"><span data-stu-id="a158d-105">WRP-protected resources can be changed only using the [Supported Resource Replacement Mechanisms](supported-file-replacement-mechanisms.md) with the Windows Modules Installer service.</span></span>

<span data-ttu-id="a158d-106">WRP защищает файлы со следующими расширениями, установленными в Windows Server 2008 или Windows Vista:. dll,. exe,. ocx и. sys.</span><span class="sxs-lookup"><span data-stu-id="a158d-106">WRP protects files with the following extensions that are installed by Windows Server 2008 or Windows Vista: .dll, .exe, .ocx, and .sys.</span></span>

<span data-ttu-id="a158d-107">WRP защищает критически важные файлы, установленные Windows Server 2008 или Windows Vista, со следующими расширениями:. ACM,. ade,. ADP,. app,. ASA,. ASP,. aspx,. AX,. BAS,. bat,.,. cmd,. chm,. cnt,. КНВ,. com, CPL,. кпкс,. CRT,. КШ,. dll,. drv,. DTD,. exe,. фксп,. GRP,. H1S,. hlp,. hta,. IME,. INF,.. жсе,. lnk,. Mad,. КШ,. ,. MAM,. Man,. maq,. Mar,. Mas,.,. MAU,. МАВ,. МАВ,. MDA,. mdb,. MDE,. MDT,. mdw,. МДЗ,. msc,. msi,. MSP,. MST,. MUI,. NLS,. ocx,. Ops,. PAL,. ПКД,. pif,. PRF,. ПРГ,. pst,. reg,. SCF,. SCR,. SCT,. ШБ,. ШС,. sys,. tlb,. TSP,. URL,. vb,. VBE,. vbs,. всмакрос,. VSS,. VST,. ВСВ,. WS,. WSC,. wsf,. WSH,. xsd и. xsl.</span><span class="sxs-lookup"><span data-stu-id="a158d-107">WRP protects critical files that are installed by Windows Server 2008 or Windows Vista with the following extensions: .acm, .ade, .adp, .app, .asa, .asp, .aspx, .ax, .bas, .bat, .bin, .cer, .chm, .clb, .cmd, .cnt, .cnv, .com, .cpl, .cpx, .crt, .csh, .dll, .drv, .dtd, .exe, .fxp, .grp, .h1s, .hlp, .hta, .ime, .inf, .ins, .isp, .its, .js, .jse, .ksh, .lnk, .mad, .maf, .mag, .mam, .man, .maq, .mar, .mas, .mat, .mau, .mav, .maw, .mda, .mdb, .mde, .mdt, .mdw, .mdz, .msc, .msi, .msp, .mst, .mui, .nls, .ocx, .ops, .pal, .pcd, .pif, .prf, .prg, .pst, .reg, .scf, .scr, .sct, .shb, .shs, .sys, .tlb, .tsp, .url, .vb, .vbe, .vbs, .vsmacros, .vss, .vst, .vsw, .ws, .wsc, .wsf, .wsh, .xsd, and .xsl.</span></span>

<span data-ttu-id="a158d-108">WRP защищает критические папки.</span><span class="sxs-lookup"><span data-stu-id="a158d-108">WRP protects critical folders.</span></span> <span data-ttu-id="a158d-109">Папка, содержащая только файлы, защищенные WRP, может быть заблокирована, чтобы только доверенный установщик Windows мог создавать файлы или вложенные папки в папке.</span><span class="sxs-lookup"><span data-stu-id="a158d-109">A folder containing only WRP-protected files may be locked so that only the Windows trusted installer is able to create files or subfolders in the folder.</span></span> <span data-ttu-id="a158d-110">Папка может быть частично заблокирована, чтобы позволить администраторам создавать файлы и вложенные папки в папке.</span><span class="sxs-lookup"><span data-stu-id="a158d-110">A folder may be partially locked to enable Administrators to create files and subfolders in the folder.</span></span>

<span data-ttu-id="a158d-111">WRP защищает ключевые разделы реестра, установленные Windows Server 2008 и Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="a158d-111">WRP protects essential registry keys installed by Windows Server 2008 and Windows Vista.</span></span> <span data-ttu-id="a158d-112">Если ключ защищен WRP, все его подразделы и значения могут быть защищены.</span><span class="sxs-lookup"><span data-stu-id="a158d-112">If a key is protected by WRP, all its subkeys and values can be protected.</span></span>

<span data-ttu-id="a158d-113">WRP копирует файлы, необходимые для перезапуска Windows в *каталоге кэша* , расположенном в папке% WINDIR% \\ WinSxS \\ BACKUP.</span><span class="sxs-lookup"><span data-stu-id="a158d-113">WRP copies files that are needed to restart Windows in the *cache directory* located at %Windir%\\winsxs\\Backup.</span></span> <span data-ttu-id="a158d-114">Критические файлы, которые не требуются для перезапуска Windows, не копируются в каталог кэша.</span><span class="sxs-lookup"><span data-stu-id="a158d-114">Critical files that are not needed to restart Windows are not copied to the cache directory.</span></span> <span data-ttu-id="a158d-115">Невозможно изменить размер каталога кэша и список файлов, скопированных в кэш.</span><span class="sxs-lookup"><span data-stu-id="a158d-115">The size of the cache directory and the list of files copied to cache cannot be modified.</span></span>

<span data-ttu-id="a158d-116">\* \* Windows Server 2003 и Windows XP: \* \*</span><span class="sxs-lookup"><span data-stu-id="a158d-116">\*\*Windows Server 2003 and Windows XP:  \*\*</span></span>

<span data-ttu-id="a158d-117">Защита файлов Windows (WFP) предшествует WRP.</span><span class="sxs-lookup"><span data-stu-id="a158d-117">Windows File Protection (WFP) preceded WRP.</span></span>

<span data-ttu-id="a158d-118">WFP защищает файлы, установленные Windows, со следующими расширениями: DLL, exe, OCX и sys.</span><span class="sxs-lookup"><span data-stu-id="a158d-118">WFP protects files that are installed by Windows with the following extensions: .dll, .exe, .ocx, and .sys.</span></span> <span data-ttu-id="a158d-119">Кроме того, также защищаются шрифты TrueType Fonts. ttf, Tahoma. ttf и Тахомабд. ttf.</span><span class="sxs-lookup"><span data-stu-id="a158d-119">In addition, the TrueType fonts Micross.ttf, Tahoma.ttf, and Tahomabd.ttf are also protected.</span></span>

<span data-ttu-id="a158d-120">В конце установки Windows система WFP выполняет проверку всех защищенных файлов, чтобы убедиться, что они не были изменены приложениями, установленными с помощью автоматической установки.</span><span class="sxs-lookup"><span data-stu-id="a158d-120">At the end of the Windows installation, WFP runs a scan of all protected files to ensure they have not been modified by applications installed through unattended installation.</span></span> <span data-ttu-id="a158d-121">WFP также копирует проверенные версии этих системных файлов в каталог кэша.</span><span class="sxs-lookup"><span data-stu-id="a158d-121">WFP also copies verified versions of these system files to the cache directory.</span></span> <span data-ttu-id="a158d-122">Когда приложение пытается заменить защищенный файл, WFP может восстановить исходный файл из каталога кэша.</span><span class="sxs-lookup"><span data-stu-id="a158d-122">When an application attempts to replace a protected file, WFP can restore the original file from the cache directory.</span></span>

<span data-ttu-id="a158d-123">Значение по умолчанию —% SystemRoot% \\ system32 \\ Dllcache.</span><span class="sxs-lookup"><span data-stu-id="a158d-123">The default value is %systemroot%\\system32\\dllcache.</span></span> <span data-ttu-id="a158d-124">Чтобы указать другое расположение кэша, создайте следующее значение реестра: **hKey \_ Local \_ Machine \\ Software \\ Microsoft \\ Windows NT \\ CurrentVersion \\ Winlogon \\ сфкдллкачедир**</span><span class="sxs-lookup"><span data-stu-id="a158d-124">To specify a different location for the cache, create the following registry value: **HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\\SFCDllCacheDir**</span></span>

<span data-ttu-id="a158d-125">Это должен быть локальный путь.</span><span class="sxs-lookup"><span data-stu-id="a158d-125">This must be a local path.</span></span> <span data-ttu-id="a158d-126">При использовании сетевого пути создается один источник общей сети для файлов кэша, при условии, что все клиенты, использующие общую папку, работают с теми же пакетами обновления и исправлениями.</span><span class="sxs-lookup"><span data-stu-id="a158d-126">Using a network path creates a single shared network source for cache files, provided all clients using the share are running the same service packs and hotfixes.</span></span>

<span data-ttu-id="a158d-127">Размер кэша по умолчанию не ограничен.</span><span class="sxs-lookup"><span data-stu-id="a158d-127">The default size of the cache is unlimited.</span></span> <span data-ttu-id="a158d-128">Чтобы изменить размер кэша, используйте следующий параметр реестра: **hKey \_ Local \_ Machine \\ Software \\ Microsoft \\ Windows NT \\ CurrentVersion \\ Winlogon \\ SFCQuota**</span><span class="sxs-lookup"><span data-stu-id="a158d-128">To change the size of the cache, use the following registry setting: **HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\\SFCQuota**</span></span>

<span data-ttu-id="a158d-129">Если это значение равно \_ квоте \_ sfc \_ , все файлы будут кэшироваться в каталоге кэша.</span><span class="sxs-lookup"><span data-stu-id="a158d-129">If the value is SFC\_QUOTA\_ALL\_FILES, all system files will be cached in the cache directory.</span></span>

<span data-ttu-id="a158d-130">Из-за соображений места на диске может быть нежелательно поддерживать кэшированные версии всех системных файлов в каталоге кэша.</span><span class="sxs-lookup"><span data-stu-id="a158d-130">Due to disk space considerations, it may not be desirable to maintain cached versions of all system files in the cache directory.</span></span> <span data-ttu-id="a158d-131">В зависимости от размера кэша WFP будет хранить проверенные версии файлов в каталоге кэша на жестком диске системы.</span><span class="sxs-lookup"><span data-stu-id="a158d-131">Depending on the size of the cache, WFP will store verified file versions in the cache directory on the system hard drive.</span></span> <span data-ttu-id="a158d-132">WFP добавляет файлы в кэш до тех пор, пока размер каталога кэша не достигнет указанного предела.</span><span class="sxs-lookup"><span data-stu-id="a158d-132">WFP will add files to the cache until the size of the cache directory reaches the specified limit.</span></span>

<span data-ttu-id="a158d-133">Когда приложение пытается заменить защищенный файл, который не находится в кэше, WFP пытается восстановить исходный файл из источника установки, запрашивая пользователя при необходимости.</span><span class="sxs-lookup"><span data-stu-id="a158d-133">When an application attempts to replace a protected file that is not in the cache, WFP attempts to restore the original file from the installation source, prompting the user if necessary.</span></span>

 

 



