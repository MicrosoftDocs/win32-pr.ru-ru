---
description: Windows поддерживает как синхронные, так и асинхронные (перекрывающиеся) операции файлового ввода-вывода для последовательных ресурсов связи.
ms.assetid: cee44596-ad73-4afb-b86a-744b0b46d9d5
title: Операции чтения и записи
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a26cc53dbe8c52286fe53c81202ab3828808b1aa
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104141410"
---
# <a name="read-and-write-operations"></a><span data-ttu-id="1f3bd-103">Операции чтения и записи</span><span class="sxs-lookup"><span data-stu-id="1f3bd-103">Read and Write Operations</span></span>

<span data-ttu-id="1f3bd-104">Windows поддерживает как синхронные, так и асинхронные (перекрывающиеся) операции файлового ввода-вывода для последовательных ресурсов связи.</span><span class="sxs-lookup"><span data-stu-id="1f3bd-104">Windows supports both synchronous and asynchronous (overlapped) file I/O operations on serial communications resources.</span></span> <span data-ttu-id="1f3bd-105">Перекрывающиеся операции позволяют вызывающему потоку выполнять другие задачи во время выполнения операции в фоновом режиме.</span><span class="sxs-lookup"><span data-stu-id="1f3bd-105">Overlapped operations enable the calling thread to perform other tasks while the operation executes in the background.</span></span> <span data-ttu-id="1f3bd-106">Поток использует функцию [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) или [**реадфиликс**](/windows/desktop/api/fileapi/nf-fileapi-readfileex) для чтения из ресурса связи, а функция [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) или [**вритефиликс**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) — для записи в ресурс связи.</span><span class="sxs-lookup"><span data-stu-id="1f3bd-106">A thread uses the [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) or [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex) function to read from a communications resource, and the [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) or [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) function to write to a communications resource.</span></span> <span data-ttu-id="1f3bd-107">**ReadFile** и **WriteFile** могут выполняться синхронно или асинхронно.</span><span class="sxs-lookup"><span data-stu-id="1f3bd-107">**ReadFile** and **WriteFile** can be performed synchronously or asynchronously.</span></span> <span data-ttu-id="1f3bd-108">**Реадфиликс** и **вритефиликс** могут выполняться только асинхронно.</span><span class="sxs-lookup"><span data-stu-id="1f3bd-108">**ReadFileEx** and **WriteFileEx** can only be performed asynchronously.</span></span>

<span data-ttu-id="1f3bd-109">Поведение этих функций чтения и записи зависит от того, выполняется ли функция в качестве перекрывающейся, являются ли параметры времени ожидания связаны с данным маркером, а также от того, связаны ли параметры управления потоком с этим маркером.</span><span class="sxs-lookup"><span data-stu-id="1f3bd-109">The behavior of these read and write functions is affected by whether the function is executed as an overlapped operation, whether the time-out parameters are associated with the handle, and whether flow control parameters are associated with the handle.</span></span>

<span data-ttu-id="1f3bd-110">Поток также может записывать данные в ресурс связи с помощью функции [**трансмиткоммчар**](/windows/desktop/api/Winbase/nf-winbase-transmitcommchar) , которая передает заданный символ впереди всех ожидающих данных в выходном буфере.</span><span class="sxs-lookup"><span data-stu-id="1f3bd-110">A thread can also write to a communications resource by using the [**TransmitCommChar**](/windows/desktop/api/Winbase/nf-winbase-transmitcommchar) function, which transmits a specified character ahead of any pending data in the output buffer.</span></span> <span data-ttu-id="1f3bd-111">Эта функция полезна для передачи сигнала с высоким приоритетом в принимающую систему.</span><span class="sxs-lookup"><span data-stu-id="1f3bd-111">This function is useful for transmitting a high priority signal character to the receiving system.</span></span> <span data-ttu-id="1f3bd-112">Передача символа с высоким приоритетом по-прежнему подчиняется управлению потоком и задержке записи, а операция выполняется синхронно.</span><span class="sxs-lookup"><span data-stu-id="1f3bd-112">Transmission of the high priority character is still subject to flow control and write time-outs, and the operation is performed synchronously.</span></span>

<span data-ttu-id="1f3bd-113">Поток может использовать функцию [**пуржекомм**](/windows/desktop/api/Winbase/nf-winbase-purgecomm) для удаления всех символов в выходном или входном буфере устройства.</span><span class="sxs-lookup"><span data-stu-id="1f3bd-113">A thread can use the [**PurgeComm**](/windows/desktop/api/Winbase/nf-winbase-purgecomm) function to discard all characters in a device's output or input buffer.</span></span> <span data-ttu-id="1f3bd-114">**Пуржекомм** также может завершить незавершенные операции чтения или записи, даже если операции не были выполнены.</span><span class="sxs-lookup"><span data-stu-id="1f3bd-114">**PurgeComm** can also terminate pending read or write operations, even if the operations have not been completed.</span></span> <span data-ttu-id="1f3bd-115">Если поток использует **пуржекомм** для очистки выходного буфера, удаленные символы не передаются.</span><span class="sxs-lookup"><span data-stu-id="1f3bd-115">If a thread uses **PurgeComm** to flush an output buffer, the deleted characters are not transmitted.</span></span> <span data-ttu-id="1f3bd-116">Чтобы очистить выходной буфер и обеспечить передачу содержимого, поток может вызвать функцию [**FlushFileBuffers**](/windows/desktop/api/fileapi/nf-fileapi-flushfilebuffers) (синхронную операцию).</span><span class="sxs-lookup"><span data-stu-id="1f3bd-116">To empty the output buffer while ensuring that the contents are transmitted, a thread can call the [**FlushFileBuffers**](/windows/desktop/api/fileapi/nf-fileapi-flushfilebuffers) function (a synchronous operation).</span></span> <span data-ttu-id="1f3bd-117">Однако обратите внимание, что **FlushFileBuffers** подлежит управлению потоком, но не может записывать время ожидания и не будет возвращаться, пока не будут переданы все ожидающие операции записи.</span><span class="sxs-lookup"><span data-stu-id="1f3bd-117">Note, however, that **FlushFileBuffers** is subject to flow control but not to write time-outs, and it will not return until all pending write operations have been transmitted.</span></span>

 

 
