---
title: Привязка с шифрованием
description: Конфиденциальные данные, которыми обмениваются сети, должны быть зашифрованы.
ms.assetid: 51fe2131-5f7d-41b1-ad88-d965cbb4d630
ms.tgt_platform: multiple
keywords:
- ADSI ADSI, использование, привязка с шифрованием
- Привязка с шифрованием
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8cf19747a8356459f4ab50c0aa409f69b58eb224
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986116"
---
# <a name="binding-with-encryption"></a><span data-ttu-id="b2a56-105">Привязка с шифрованием</span><span class="sxs-lookup"><span data-stu-id="b2a56-105">Binding With Encryption</span></span>

<span data-ttu-id="b2a56-106">Конфиденциальные данные, которыми обмениваются сети, должны быть зашифрованы.</span><span class="sxs-lookup"><span data-stu-id="b2a56-106">Sensitive data exchanged over a network should be encrypted.</span></span> <span data-ttu-id="b2a56-107">Чтобы разрешить это, ADSI поддерживает два типа шифрования: Kerberos и SSL (SSL).</span><span class="sxs-lookup"><span data-stu-id="b2a56-107">To allow this, ADSI supports two types of encryption, Kerberos and Secure Sockets Layer (SSL).</span></span> <span data-ttu-id="b2a56-108">Оба типа шифрования должны использовать [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) или [**Иадсопендсобжект:: опендсобжект**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) для привязки.</span><span class="sxs-lookup"><span data-stu-id="b2a56-108">Both types of encryption require the use of [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) for binding.</span></span>

<span data-ttu-id="b2a56-109">В этом случае **GetObject** и [**адсжетобжект**](/windows/desktop/api/Adshlp/nf-adshlp-adsgetobject) не могут использоваться для привязки, поскольку эти функции вызывают LDAP-запросы, используемые ADSI, и данные, возвращаемые сервером каталогов, для передачи по сети в виде открытого текста.</span><span class="sxs-lookup"><span data-stu-id="b2a56-109">**GetObject** and [**ADsGetObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsgetobject) cannot be used for binding in this case because these functions cause the LDAP requests used by ADSI and the data returned from the directory server to transmit across the network as plaintext.</span></span> <span data-ttu-id="b2a56-110">В целях отладки рекомендуется отключить шифрование, чтобы сетевой монитор можно было использовать для просмотра запросов LDAP и данных между клиентом и сервером каталога.</span><span class="sxs-lookup"><span data-stu-id="b2a56-110">For debugging purposes, it is helpful to turn encryption off so the Network Monitor can be used to view the LDAP requests and data between the client and the directory server.</span></span>

## <a name="kerberos-based-encryption"></a><span data-ttu-id="b2a56-111">Шифрование на основе Kerberos</span><span class="sxs-lookup"><span data-stu-id="b2a56-111">Kerberos-based Encryption</span></span>

<span data-ttu-id="b2a56-112">Чтобы использовать шифрование на основе Kerberos, укажите **баннеры, \_ используя флаг \_ запечатывания** при вызове [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) или [**иадсопендсобжект:: опендсобжект**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject).</span><span class="sxs-lookup"><span data-stu-id="b2a56-112">To use Kerberos-based encryption, specify the **ADS\_USE\_SEALING** flag when calling [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject).</span></span> <span data-ttu-id="b2a56-113">Для проверки целостности данных можно также использовать флаг **\_ \_ запечатывания рекламы** , то есть убедиться, что полученные данные совпадают с отправленными данными.</span><span class="sxs-lookup"><span data-stu-id="b2a56-113">The **ADS\_USE\_SEALING** flag can also be used to verify data integrity, that is, to ensure the data received is the same as the data sent.</span></span> <span data-ttu-id="b2a56-114">Если в **рекламе \_ используется флаг \_ запечатывания** , **баннеры также \_ используют флаг \_ подписывания** .</span><span class="sxs-lookup"><span data-stu-id="b2a56-114">If the **ADS\_USE\_SEALING** flag is specified, the **ADS\_USE\_SIGNING** flag is automatically specified as well.</span></span> <span data-ttu-id="b2a56-115">Для обоих флагов требуется проверка подлинности Kerberos, которая работает только при следующих условиях.</span><span class="sxs-lookup"><span data-stu-id="b2a56-115">Both flags require Kerberos authentication, which works only under the following conditions:</span></span>

-   <span data-ttu-id="b2a56-116">Клиентский компьютер должен входить в домен Windows или в домен, являющийся доверенным для домена Windows.</span><span class="sxs-lookup"><span data-stu-id="b2a56-116">The client computer must be logged on to the Windows domain, or to a domain trusted by a Windows domain.</span></span>
-   <span data-ttu-id="b2a56-117">[**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) или [**Иадсопендсобжект:: опендсобжект**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) должны вызываться с пустыми учетными данными. то есть нельзя указать альтернативные учетные данные.</span><span class="sxs-lookup"><span data-stu-id="b2a56-117">[**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) must be called with null credentials; that is, alternate credentials cannot be specified.</span></span>

## <a name="ssl-based-encryption"></a><span data-ttu-id="b2a56-118">Шифрование на основе SSL</span><span class="sxs-lookup"><span data-stu-id="b2a56-118">SSL-based Encryption</span></span>

<span data-ttu-id="b2a56-119">Чтобы использовать шифрование на основе SSL, укажите **объявление \_ использовать флаг \_ SSL** при вызове [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) или [**иадсопендсобжект:: опендсобжект**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject).</span><span class="sxs-lookup"><span data-stu-id="b2a56-119">To use SSL-based encryption, specify the **ADS\_USE\_SSL** flag when calling [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject).</span></span> <span data-ttu-id="b2a56-120">Если задан флаг **\_ \_ SSL** только в ADS, ADSI открывает SSL-порт 636, а затем выполняет простую привязку по этому каналу SSL.</span><span class="sxs-lookup"><span data-stu-id="b2a56-120">If only the **ADS\_USE\_SSL** flag is specified, ADSI opens SSL port 636 and then performs a simple bind over that SSL channel.</span></span> <span data-ttu-id="b2a56-121">Если используются флаги **\_ \_ SSL** для **\_ безопасной \_ проверки подлинности** и ADS, то поведение привязки зависит от клиента, из которого выполняется вызов.</span><span class="sxs-lookup"><span data-stu-id="b2a56-121">If both the **ADS\_SECURE\_AUTHENTICATION** and **ADS\_USE\_SSL** flags are specified, the binding behavior depends on the client that the call is made from.</span></span> <span data-ttu-id="b2a56-122">В неподдерживаемых версиях Windows ADSI сначала открыли канал SSL и выполняет простую привязку, используя указанные имя пользователя и пароль или контекст текущего пользователя, если имя пользователя и пароль имеют значение null.</span><span class="sxs-lookup"><span data-stu-id="b2a56-122">On unsupported versions of Windows, ADSI first opened an SSL channel and performs a simple bind using the specified user name and password or the current user context if both user name and password are null.</span></span> <span data-ttu-id="b2a56-123">В поддерживаемых версиях Windows интерфейс ADSI выполняет безопасную проверку подлинности, а не простую привязку.</span><span class="sxs-lookup"><span data-stu-id="b2a56-123">On supported versions of Windows, ADSI performs a secure authentication rather than a simple bind.</span></span>

<span data-ttu-id="b2a56-124">Чтобы использовать шифрование на основе SSL при взаимодействии с Active Directory, Active Directory должна иметь включенную инфраструктуру открытых ключей (PKI).</span><span class="sxs-lookup"><span data-stu-id="b2a56-124">To use SSL-based encryption while communicating with Active Directory, Active Directory must have enabled Public Key Infrastructure (PKI).</span></span> <span data-ttu-id="b2a56-125">PKI можно включить, настроив центр сертификации предприятия на одном из серверов в Active Directory, включая один из самих серверов Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b2a56-125">PKI can be enabled by setting up an enterprise certification authority on one of the servers in Active Directory, including one of the Active Directory servers itself.</span></span> <span data-ttu-id="b2a56-126">Настройка центра сертификации предприятия приводит к тому, что сервер Active Directory получает сертификат сервера, который затем можно использовать для шифрования на основе SSL.</span><span class="sxs-lookup"><span data-stu-id="b2a56-126">Setting up an enterprise certification authority causes an Active Directory server to get a server certificate that can then be used to do SSL-based encryption.</span></span>

 

 




