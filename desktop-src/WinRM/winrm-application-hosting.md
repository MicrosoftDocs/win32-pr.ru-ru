---
title: Инфраструктура для управления размещенными службами
description: В служба удаленного управления Windows 2,0 (WinRM) введена платформа размещения. Для использования платформы записываются подключаемые модули WinRM, которые предоставляют данные управления приложением в инфраструктуре WinRM.
ms.assetid: 924dcc70-9a29-45a6-99a2-5681235e4574
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c8439aca1f36d2d0c2cebb6ed3111aeaa2e4fcee
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104332371"
---
# <a name="infrastructure-for-managing-hosted-services"></a><span data-ttu-id="7abb7-104">Инфраструктура для управления размещенными службами</span><span class="sxs-lookup"><span data-stu-id="7abb7-104">Infrastructure for Managing Hosted Services</span></span>

<span data-ttu-id="7abb7-105">В служба удаленного управления Windows 2,0 (WinRM) введена платформа размещения.</span><span class="sxs-lookup"><span data-stu-id="7abb7-105">Windows Remote Management 2.0 (WinRM) introduces a hosting framework.</span></span> <span data-ttu-id="7abb7-106">Для использования платформы записываются подключаемые модули WinRM, которые предоставляют данные управления приложением в инфраструктуре WinRM.</span><span class="sxs-lookup"><span data-stu-id="7abb7-106">To use the framework, WinRM plug-ins are written that expose management data of an application within the WinRM infrastructure.</span></span> <span data-ttu-id="7abb7-107">Поддерживаются две модели размещения.</span><span class="sxs-lookup"><span data-stu-id="7abb7-107">Two hosting models are supported.</span></span> <span data-ttu-id="7abb7-108">Одна из них — службы IIS (IIS), а другая — на основе службы.</span><span class="sxs-lookup"><span data-stu-id="7abb7-108">One is Internet Information Services (IIS)â€“based and the other is WinRMâ€“service based.</span></span> <span data-ttu-id="7abb7-109">Модель на основе WinRM использует HTTP.sys и не зависит от служб IIS.</span><span class="sxs-lookup"><span data-stu-id="7abb7-109">The WinRM-based model uses HTTP.sys and does not depend on IIS.</span></span>

<span data-ttu-id="7abb7-110">В следующих разделах описываются модели размещения.</span><span class="sxs-lookup"><span data-stu-id="7abb7-110">The following sections describe the hosting models:</span></span>

-   [<span data-ttu-id="7abb7-111">Модель размещения расширений IIS WinRM</span><span class="sxs-lookup"><span data-stu-id="7abb7-111">WinRM IIS Extension Hosting Model</span></span>](#winrm-iis-extension-hosting-model)
    -   [<span data-ttu-id="7abb7-112">Балансировка нагрузки в модели размещения расширений WinRM IIS</span><span class="sxs-lookup"><span data-stu-id="7abb7-112">Load Balancing in the WinRM IIS Extension Hosting Model</span></span>](#load-balancing-in-the-winrm-iis-extension-hosting-model)
    -   [<span data-ttu-id="7abb7-113">Перенаправление HTTP в модели размещения расширений WinRM IIS</span><span class="sxs-lookup"><span data-stu-id="7abb7-113">HTTP Redirection in the WinRM IIS Extension Hosting Model</span></span>](#http-redirection-in-the-winrm-iis-extension-hosting-model)
-   [<span data-ttu-id="7abb7-114">Модель размещения службы WinRM</span><span class="sxs-lookup"><span data-stu-id="7abb7-114">WinRM Service Hosting Model</span></span>](#winrm-service-hosting-model)

## <a name="winrm-iis-extension-hosting-model"></a><span data-ttu-id="7abb7-115">Модель размещения расширений IIS WinRM</span><span class="sxs-lookup"><span data-stu-id="7abb7-115">WinRM IIS Extension Hosting Model</span></span>

<span data-ttu-id="7abb7-116">Модуль WinRM IIS Extension — это дополнительный компонент, который устанавливается с помощью **Диспетчер сервера**.</span><span class="sxs-lookup"><span data-stu-id="7abb7-116">The WinRM IIS extension module is an optional component that is installed using the **Server Manager**.</span></span> <span data-ttu-id="7abb7-117">Модуль расширения IIS для WinRM используется для создания конечных точек Винрмâ € в службе IIS.</span><span class="sxs-lookup"><span data-stu-id="7abb7-117">The WinRM IIS extension module is used to create WinRMâ€“enabled endpoints from within the IIS service.</span></span> <span data-ttu-id="7abb7-118">Этот модуль можно включить на уровне веб-сайта или виртуального каталога.</span><span class="sxs-lookup"><span data-stu-id="7abb7-118">This module can be enabled at either the website or virtual directory level.</span></span> <span data-ttu-id="7abb7-119">Этот компонент работает, перехватывая и перенаправляя входящие запросы к связанному веб-сайту или виртуальному каталогу.</span><span class="sxs-lookup"><span data-stu-id="7abb7-119">It works by intercepting and redirecting incoming requests to the associated website or virtual directory.</span></span> <span data-ttu-id="7abb7-120">Запросы перенаправляются в модуль WinRM, который анализирует содержимое, а затем определяет, какой подключаемый модуль WinRM настроен для обработки каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="7abb7-120">The requests are redirected to a WinRM module that analyzes the content and then determines which WinRM plug-in is configured to handle each request.</span></span> <span data-ttu-id="7abb7-121">Дополнительные сведения см. [в разделе Конфигурация подключаемого модуля узла IIS](iis-host-plug-in-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="7abb7-121">For more information, see [IIS Host Plug-in Configuration](iis-host-plug-in-configuration.md).</span></span>

<span data-ttu-id="7abb7-122">Модель размещения расширений службы WinRM IIS разработана для обработки большого объема запросов.</span><span class="sxs-lookup"><span data-stu-id="7abb7-122">The WinRM IIS extension hosting model is designed to handle a large volume of requests.</span></span> <span data-ttu-id="7abb7-123">Если модель на основе IIS используется в качестве платформы размещения, доступны следующие функции.</span><span class="sxs-lookup"><span data-stu-id="7abb7-123">If the IIS-based model is used as the hosting framework, the following features are available:</span></span>

-   <span data-ttu-id="7abb7-124">Стандартные модули проверки подлинности IIS.</span><span class="sxs-lookup"><span data-stu-id="7abb7-124">The standard IIS authentication modules.</span></span>
-   <span data-ttu-id="7abb7-125">Процесс пула приложений IIS для размещения всех подключаемых модулей.</span><span class="sxs-lookup"><span data-stu-id="7abb7-125">The IIS application pool process for hosting all plug-ins.</span></span>
-   <span data-ttu-id="7abb7-126">Управление квотами для регулирования интенсивных пользователей системы.</span><span class="sxs-lookup"><span data-stu-id="7abb7-126">Quota management for throttling heavy users of the system.</span></span> <span data-ttu-id="7abb7-127">Дополнительные сведения см. в разделе [Управление квотами для удаленных оболочек](quotas.md).</span><span class="sxs-lookup"><span data-stu-id="7abb7-127">For more information, see [Quota Management for Remote Shells](quotas.md).</span></span>
-   <span data-ttu-id="7abb7-128">Модель подключаемого модуля оболочки.</span><span class="sxs-lookup"><span data-stu-id="7abb7-128">A shell plug-in model.</span></span> <span data-ttu-id="7abb7-129">См. раздел [API оболочки клиента WinRM](client-shell-api.md).</span><span class="sxs-lookup"><span data-stu-id="7abb7-129">See [WinRM Client Shell API](client-shell-api.md).</span></span>
-   <span data-ttu-id="7abb7-130">Гибкая модель авторизации.</span><span class="sxs-lookup"><span data-stu-id="7abb7-130">A flexible authorization model.</span></span> <span data-ttu-id="7abb7-131">См. раздел [API подключаемого модуля WinRM](winrm-plugin-api.md).</span><span class="sxs-lookup"><span data-stu-id="7abb7-131">See [WinRM Plugin API](winrm-plugin-api.md).</span></span>

### <a name="load-balancing-in-the-winrm-iis-extension-hosting-model"></a><span data-ttu-id="7abb7-132">Балансировка нагрузки в модели размещения расширений WinRM IIS</span><span class="sxs-lookup"><span data-stu-id="7abb7-132">Load Balancing in the WinRM IIS Extension Hosting Model</span></span>

<span data-ttu-id="7abb7-133">Большинство подсистем балансировки нагрузки (фунтов) поддерживают модель прикрепления на основе файлов cookie.</span><span class="sxs-lookup"><span data-stu-id="7abb7-133">Most load balancers (LBs) support a cookie-based stickiness model.</span></span> <span data-ttu-id="7abb7-134">Балансировка нагрузки вставляет файл cookie в ответ на первый запрос от клиента.</span><span class="sxs-lookup"><span data-stu-id="7abb7-134">The LB inserts a cookie into the response to the first request from the client.</span></span> <span data-ttu-id="7abb7-135">Для всех последующих запросов файл cookie передается в запросе, а балансировка нагрузки использует файл cookie для маршрутизации запроса на соответствующий сервер.</span><span class="sxs-lookup"><span data-stu-id="7abb7-135">For all subsequent requests, the cookie is transmitted in the request and the LB uses the cookie to route the request to the appropriate server.</span></span>

<span data-ttu-id="7abb7-136">В средах, где служба WinRM 2,0 размещается за пределами, необходимо настроить для балансировки нагрузки MS-WSMAN префикс имени файла cookie.</span><span class="sxs-lookup"><span data-stu-id="7abb7-136">In environments where WinRM 2.0 is hosted behind an LB, the LB should be configured to prefix MS-WSMAN to the name of the cookie.</span></span> <span data-ttu-id="7abb7-137">Кроме того, балансировка нагрузки должна быть настроена таким образом, чтобы время существования файла cookie было бесконечным, поскольку клиент WinRM должен управлять сроком действия файла cookie.</span><span class="sxs-lookup"><span data-stu-id="7abb7-137">In addition, the LB needs to be configured to allow the lifetime of the cookie to be infinite, because the WinRM client should control how long the cookie is valid.</span></span>

<span data-ttu-id="7abb7-138">Ниже приведен пример имени файла cookie:</span><span class="sxs-lookup"><span data-stu-id="7abb7-138">The following is an example of a cookie name:</span></span>

``` syntax
MS-WSMAN=2046820362.20480.0000; path=/
```

### <a name="http-redirection-in-the-winrm-iis-extension-hosting-model"></a><span data-ttu-id="7abb7-139">Перенаправление HTTP в модели размещения расширений WinRM IIS</span><span class="sxs-lookup"><span data-stu-id="7abb7-139">HTTP Redirection in the WinRM IIS Extension Hosting Model</span></span>

<span data-ttu-id="7abb7-140">WinRM 2,0 может поддерживать перенаправление HTTP.</span><span class="sxs-lookup"><span data-stu-id="7abb7-140">WinRM 2.0 can handle HTTP redirection.</span></span> <span data-ttu-id="7abb7-141">Рекомендуется, чтобы все перенаправления использовали SSL (SSL) и все приложения проверяли перенаправленный универсальный код ресурса (URI) перед созданием нового сеанса.</span><span class="sxs-lookup"><span data-stu-id="7abb7-141">It is recommended that all redirection use Secure Sockets Layer (SSL), and that all applications validate the redirected URI before creating a new session.</span></span>

## <a name="winrm-service-hosting-model"></a><span data-ttu-id="7abb7-142">Модель размещения службы WinRM</span><span class="sxs-lookup"><span data-stu-id="7abb7-142">WinRM Service Hosting Model</span></span>

<span data-ttu-id="7abb7-143">Модель на основе службы WinRM выполняется поверх HTTP.sys.</span><span class="sxs-lookup"><span data-stu-id="7abb7-143">The WinRM service-based model runs on top of HTTP.sys.</span></span> <span data-ttu-id="7abb7-144">Служба WinRM — это служба, подключенная к сети, которая обрабатывает запросы от клиентов WinRM.</span><span class="sxs-lookup"><span data-stu-id="7abb7-144">The WinRM service is a network facing service that handles requests from WinRM clients.</span></span> <span data-ttu-id="7abb7-145">Служба определяет, направляется ли запрос к подключаемому модулю, запущенному в основной службе или направляется через узел, на котором выполняется подключаемый модуль стороннего поставщика.</span><span class="sxs-lookup"><span data-stu-id="7abb7-145">The service determines whether the request is routed to a plug-in that runs in the main service or is routed through a host where the third-party plug-in is run.</span></span> <span data-ttu-id="7abb7-146">Эта модель предназначена для сценариев, в которых нагрузка на управляемый узел мала.</span><span class="sxs-lookup"><span data-stu-id="7abb7-146">This model is intended for scenarios where the load on the managed node is low.</span></span> <span data-ttu-id="7abb7-147">Более того, эта модель предназначена для сценариев, в которых размещение IIS не является допустимым вариантом.</span><span class="sxs-lookup"><span data-stu-id="7abb7-147">Moreover, this model is intended for scenarios where IIS hosting is not an option.</span></span> <span data-ttu-id="7abb7-148">Дополнительные сведения см. [в разделе Конфигурация подключаемого модуля службы WinRM](wsman-service-plug-in-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="7abb7-148">For more information, see [WinRM Service Plug-in Configuration](wsman-service-plug-in-configuration.md).</span></span>

 

 




