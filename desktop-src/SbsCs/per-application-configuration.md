---
description: Конфигурация для каждого приложения перенаправляет зависимость конкретного приложения от одной версии параллельной сборки к другой версии сборки.
ms.assetid: b7988385-c87e-443c-8ec3-84ab3c172eab
title: Конфигурация для каждого приложения
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7b17543c9972deefe2a2beda1f5eeba1c5ace2ba
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104272059"
---
# <a name="per-application-configuration"></a><span data-ttu-id="13988-103">Конфигурация для каждого приложения</span><span class="sxs-lookup"><span data-stu-id="13988-103">Per-application Configuration</span></span>

<span data-ttu-id="13988-104">Конфигурация для каждого приложения перенаправляет зависимость конкретного приложения от одной версии параллельной сборки к другой версии сборки.</span><span class="sxs-lookup"><span data-stu-id="13988-104">Per-application configuration redirects the dependence of a particular application from one version of a side-by-side assembly to another version of the assembly.</span></span> <span data-ttu-id="13988-105">Настройка для каждого приложения может оказаться необходимой, если для правильной работы конкретного приложения требуется версия сборки, которая отличается от версии, обычно указанной в качестве [конфигурации по умолчанию](default-configuration.md) или [конфигурации издателя](publisher-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="13988-105">A per-application configuration may become necessary if the correct operation of a particular application requires an assembly version that is different than the version normally specified as a [default configuration](default-configuration.md) or [publisher configuration](publisher-configuration.md).</span></span> <span data-ttu-id="13988-106">Например, глобальное обновление версии сборки издателем может исправить сборку, но приостановить это конкретное приложение.</span><span class="sxs-lookup"><span data-stu-id="13988-106">For example, a global update of the assembly version by the publisher might fix the assembly but break this particular application.</span></span> <span data-ttu-id="13988-107">В этом случае можно использовать конфигурацию для каждого приложения, чтобы приложение продолжало работать с предыдущей версией сборки.</span><span class="sxs-lookup"><span data-stu-id="13988-107">In this case, per-application configuration might be used to enable the application to continue to run with the previous assembly version.</span></span>

<span data-ttu-id="13988-108">Начиная с Windows Server 2003, конфигурация для каждого приложения всегда переопределяет [конфигурацию по умолчанию](default-configuration.md) для каждого приложения.</span><span class="sxs-lookup"><span data-stu-id="13988-108">Starting with Windows Server 2003, per-application configuration always overrides the [default configuration](default-configuration.md) on a per-application basis.</span></span> <span data-ttu-id="13988-109">Конфигурация на уровне приложения переопределяет [конфигурацию издателя](publisher-configuration.md) для каждого приложения, только если в [файле конфигурации приложения](application-configuration-files.md) указан параметр *Apply = «No»* в **Publisherpolicy Apply** , а в базе данных совместимости приложений присутствует соответствующая запись.</span><span class="sxs-lookup"><span data-stu-id="13988-109">Per-application configuration overrides [publisher configuration](publisher-configuration.md) on a per-application basis only if the [application configuration file](application-configuration-files.md) specifies *apply="no"* in **publisherPolicy** and there is a corresponding entry present in the Application Compatibility database.</span></span>

> [!Note]  
> <span data-ttu-id="13988-110">В Windows XP конфигурация для каждого приложения переопределяет конфигурацию [конфигурации по умолчанию](default-configuration.md) и [издателя](publisher-configuration.md) на уровне приложения.</span><span class="sxs-lookup"><span data-stu-id="13988-110">On Windows XP, per-application configuration overrides both [default configuration](default-configuration.md) and [publisher configuration](publisher-configuration.md) on a per-application basis.</span></span> <span data-ttu-id="13988-111">Дополнительные сведения см. [в статье Настройка для каждого приложения в Windows XP](per-application-configuration-on-windows-xp.md).</span><span class="sxs-lookup"><span data-stu-id="13988-111">For information, see [Per-application Configuration on Windows XP](per-application-configuration-on-windows-xp.md).</span></span>

 

<span data-ttu-id="13988-112">Начиная с Windows Server 2003, конфигурация для каждого приложения будет переопределять [конфигурацию издателя](publisher-configuration.md) , если в [файле конфигурации приложения](application-configuration-files.md) указано *apply = «yes»* в **publisherpolicy Apply** , а флаг Енаблеаппконфиг установлен для приложения в базе данных совместимости приложений.</span><span class="sxs-lookup"><span data-stu-id="13988-112">Starting with Windows Server 2003, a per-application configuration will override a [publisher configuration](publisher-configuration.md) if the [application configuration file](application-configuration-files.md) specifies *apply="yes"* in **publisherPolicy** and the EnableAppConfig flag is set for the application in the Application Compatibility database.</span></span> <span data-ttu-id="13988-113">Эта возможность переопределять конфигурацию издателя с помощью конфигурации для каждого приложения позволяет запускать приложение в безопасном режиме.</span><span class="sxs-lookup"><span data-stu-id="13988-113">This capability to override a publisher configuration using a per-application configuration enables the application to be run in Safemode.</span></span> <span data-ttu-id="13988-114">Дополнительные сведения о базе данных совместимости приложений и безопасный режим см. в разделе набор средств для обеспечения совместимости приложений Windows.</span><span class="sxs-lookup"><span data-stu-id="13988-114">For more information about the Application Compatibility database and Safemode, see the Windows Application Compatibility Toolkit.</span></span> <span data-ttu-id="13988-115">Набор средств для обеспечения совместимости приложений Windows можно получить из [https://www.microsoft.com/downloads](https://www.microsoft.com/Downloads/) .</span><span class="sxs-lookup"><span data-stu-id="13988-115">You can obtain the Windows Application Compatibility Toolkit from [https://www.microsoft.com/downloads](https://www.microsoft.com/Downloads/).</span></span>

> [!Note]  
> <span data-ttu-id="13988-116">Если вы подаете компоненты с помощью [файла конфигурации приложения](application-configuration-files.md) (config-файла), который указывает *Apply = «No»* в **publisherpolicy Apply**, это приведет к сбою при создании контекста активации.</span><span class="sxs-lookup"><span data-stu-id="13988-116">If you ship components with an [application configuration file](application-configuration-files.md) (.config file) that specifies *apply="no"* in **publisherPolicy**, this will cause the generation of the activation context to fail.</span></span> <span data-ttu-id="13988-117">Конфигурация для каждого приложения будет пропущена, если вы подаете компоненты с файлом. config с указанием *apply = «yes»* в **publisherpolicy Apply**.</span><span class="sxs-lookup"><span data-stu-id="13988-117">The per-application configuration will be ignored if you ship components with a .config file specifying *apply="yes"* in **publisherPolicy**.</span></span>

 

<span data-ttu-id="13988-118">Администраторы приложений могут реализовать конфигурацию для отдельных приложений путем создания и установки файлов конфигурации приложений и обновления базы данных совместимости приложений.</span><span class="sxs-lookup"><span data-stu-id="13988-118">Application administrators can implement a per-application configuration by authoring and installing application configuration files and updating the application compatibility database.</span></span> <span data-ttu-id="13988-119">После этого файл конфигурации приложения должен быть развернут и установлен в той же папке, что и исполняемый файл приложения.</span><span class="sxs-lookup"><span data-stu-id="13988-119">The application configuration file should then be deployed and installed into the same folder as the application's executable file.</span></span> <span data-ttu-id="13988-120">Список схем файлов см. в разделе [Схема файла конфигурации приложения](application-configuration-file-schema.md).</span><span class="sxs-lookup"><span data-stu-id="13988-120">For a listing of the file schema, see [Application Configuration File Schema](application-configuration-file-schema.md).</span></span> <span data-ttu-id="13988-121">База данных совместимости приложений должна распространяться, как описано в разделе набор средств для обеспечения совместимости приложений.</span><span class="sxs-lookup"><span data-stu-id="13988-121">The application compatibility database must be distributed as described in the Application Compatibility Toolkit.</span></span>

> [!Note]  
> <span data-ttu-id="13988-122">Если приложение выполняется в безопасном режиме, оно не будет принимать важные исправления безопасности или исправления ошибок. издатель сборки может выдаваться в виде файлов конфигурации издателя.</span><span class="sxs-lookup"><span data-stu-id="13988-122">If your application runs in Safemode, it will not receive any important security fixes or bug fixes the publisher of the assembly might issue as publisher configuration files.</span></span> <span data-ttu-id="13988-123">Таким образом, приложение, использующее конфигурацию для каждого приложения, может оставаться незащищенным или продолжать работать неправильно даже после применения новой сборки с этими исправлениями в системе.</span><span class="sxs-lookup"><span data-stu-id="13988-123">An application that uses per-application configuration may therefore remain unsecure or continue to work incorrectly even after a new assembly with these fixes are applied to the system.</span></span> <span data-ttu-id="13988-124">По этой причине разработчики приложений никогда не должны поставлять приложение с конфигурацией для каждого приложения.</span><span class="sxs-lookup"><span data-stu-id="13988-124">For this reason, application developers should never ship an application with a per-application configuration.</span></span> <span data-ttu-id="13988-125">Конфигурация для каждого приложения должна использоваться только корпоративными администраторами как временное исправление, когда приложение разбивается по конфигурации издателя.</span><span class="sxs-lookup"><span data-stu-id="13988-125">Per-application configuration should only be used by corporate administrators as a temporary fix when the application is broken by a publisher configuration.</span></span> <span data-ttu-id="13988-126">В этом случае постоянное решение заключается в том, что разработчики сборки и разработчиков приложения должны будут работать вместе, чтобы обеспечить полную обратную совместимость сборок с конфигурацией издателя.</span><span class="sxs-lookup"><span data-stu-id="13988-126">In this case, the permanent solution is that the developers of the assembly and the developers of the application will need to work together to ensure that the assemblies with publisher configuration are fully backwards compatible.</span></span>

 

<span data-ttu-id="13988-127">Ниже приведен пример файла конфигурации приложения.</span><span class="sxs-lookup"><span data-stu-id="13988-127">The following is an example of an application configuration file.</span></span> <span data-ttu-id="13988-128">Дополнительные сведения см. в разделе файлы конфигурации приложения.</span><span class="sxs-lookup"><span data-stu-id="13988-128">For more information, see Application Configuration Files.</span></span>

``` syntax
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<configuration>
 <windows>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
   <assemblyIdentity  processorArchitecture="X86" name="Microsoft.Windows.mysampleApp" type="win32" version="1.0.0.0"/>
   <publisherPolicy apply="no"/>                     
   <dependentAssembly>
    <assemblyIdentity type="win32" processorArchitecture="x86" name="Microsoft.Windows.SampleAssembly" publicKeyToken="0000000000000000"/>
    <bindingRedirect oldVersion="2.0.0.0" newVersion="2.0.1.0"/>
   </dependentAssembly>
  </assemblyBinding>
 </windows>
</configuration>
```

<span data-ttu-id="13988-129">Администратор приложения должен добавить необходимые записи в базу данных совместимости приложений.</span><span class="sxs-lookup"><span data-stu-id="13988-129">The application administrator should add the required entries to the Application Compatibility database.</span></span> <span data-ttu-id="13988-130">Скачайте и установите набор средств для обеспечения совместимости приложений Windows 2,6 из [https://www.microsoft.com/downloads](https://www.microsoft.com/Downloads/) .</span><span class="sxs-lookup"><span data-stu-id="13988-130">Download and install the Windows Application Compatibility Toolkit 2.6 from [https://www.microsoft.com/downloads](https://www.microsoft.com/Downloads/).</span></span> <span data-ttu-id="13988-131">Создайте новую пользовательскую или обновите существующую базу данных с помощью администратора совместимости, как описано в наборе средств.</span><span class="sxs-lookup"><span data-stu-id="13988-131">Create a new custom or update your existing database using the Compatibility Administrator as outlined in the toolkit.</span></span> <span data-ttu-id="13988-132">Исправление совместимости, которое вы хотите выбрать для уровня совместимости приложения, — Енаблеаппконфиг.</span><span class="sxs-lookup"><span data-stu-id="13988-132">The Compatibility Fix you want to choose for the compatibility layer for your application is EnableAppConfig.</span></span> <span data-ttu-id="13988-133">Необходимо всегда тестировать приложения перед установкой новой базы данных совместимости.</span><span class="sxs-lookup"><span data-stu-id="13988-133">You must always test applications before installing a new compatibility database.</span></span>

 

 



