---
title: Входы, потоки и выходные данные
description: Входы, потоки и выходные данные
ms.assetid: f9f979c4-a15c-4f2a-b63c-7fe776394fdd
keywords:
- Windows Media Format SDK, входные данные
- Windows Media Format SDK, потоки
- Windows Media Format SDK, выходные данные
- Расширенный формат систем (ASF), входные данные
- ASF (Расширенный системный формат), входные данные
- Расширенный системный формат (ASF), потоки
- ASF (Расширенный системный формат), потоки
- Расширенный формат систем (ASF), выходные данные
- ASF (Расширенный системный формат), выходные данные
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 84e6b6941a990b108c16b49648ec0d8d028a44d7
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "105700659"
---
# <a name="inputs-streams-and-outputs"></a><span data-ttu-id="6fa45-112">Входы, потоки и выходные данные</span><span class="sxs-lookup"><span data-stu-id="6fa45-112">Inputs, Streams, and Outputs</span></span>

<span data-ttu-id="6fa45-113">Входные данные в этой документации — это любой поток данных мультимедиа (например, аудио или видео), который приложение доставляет в объект модуля записи из источника с помощью соответствующих интерфейсов API.</span><span class="sxs-lookup"><span data-stu-id="6fa45-113">An "input" in this documentation is any digital media data stream (such as audio or video) that your application delivers to the writer object from a source by using appropriate APIs.</span></span> <span data-ttu-id="6fa45-114">Входные данные должны доставляться в поддерживаемом формате.</span><span class="sxs-lookup"><span data-stu-id="6fa45-114">Inputs must be delivered in a supported format.</span></span> <span data-ttu-id="6fa45-115">В качестве входных данных поддерживается несколько стандартных форматов RGB и YUV, а аудиокодеки поддерживают PCM.</span><span class="sxs-lookup"><span data-stu-id="6fa45-115">Several standard RGB and YUV formats are supported as input, and the audio codecs support PCM.</span></span> <span data-ttu-id="6fa45-116">Если указанный формат входных данных не поддерживается кодеком, объект модуля записи будет создавать экземпляр видеообъекта аудио или видео, который способен преобразовать разнообразные форматы в форматы, которые может принимать кодек.</span><span class="sxs-lookup"><span data-stu-id="6fa45-116">If a specified input format is not supported natively by the codec, the writer object will instantiate either an audio or video helper object that is capable of converting a wide variety of formats into formats the codec can accept.</span></span> <span data-ttu-id="6fa45-117">Для входных звуковых данных вспомогательный объект будет настраивать глубину, частоту дискретизации и количество каналов при необходимости.</span><span class="sxs-lookup"><span data-stu-id="6fa45-117">For audio inputs, the helper object will adjust the bit depth, sample rate, and number of channels as necessary.</span></span> <span data-ttu-id="6fa45-118">Для входных видео видеообъект видео будет выполнять преобразования цветового пространства и изменения размера прямоугольника.</span><span class="sxs-lookup"><span data-stu-id="6fa45-118">For video inputs, the video helper object will perform color-space conversions and rectangle-size adjustments.</span></span> <span data-ttu-id="6fa45-119">В некоторых случаях сжатые аудио и видеоданные могут передаваться во входной поток.</span><span class="sxs-lookup"><span data-stu-id="6fa45-119">In some cases, compressed audio and video data can be passed in an input stream.</span></span> <span data-ttu-id="6fa45-120">Входные данные могут относиться к другим типам мультимедиа, помимо аудио и видео, например текста, команд сценариев, изображений по-прежнему или произвольных файловых данных.</span><span class="sxs-lookup"><span data-stu-id="6fa45-120">An input may be of some other media type besides audio and video, such as text, script commands, still images, or arbitrary file data.</span></span>

<span data-ttu-id="6fa45-121">«Вывод» в этой документации ссылается на данные, которые объект DataReader передает в приложение для подготовки к просмотру.</span><span class="sxs-lookup"><span data-stu-id="6fa45-121">An "output" in this documentation refers to data that the reader object passes to an application for rendering.</span></span> <span data-ttu-id="6fa45-122">Выходное значение равно одному потоку во время воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="6fa45-122">An output equates to a single stream at the time of playback.</span></span> <span data-ttu-id="6fa45-123">При использовании взаимного исключения все взаимоисключающие потоки совместно используют один выход.</span><span class="sxs-lookup"><span data-stu-id="6fa45-123">If you are using mutual exclusion, all of the mutually exclusive streams share a single output.</span></span> <span data-ttu-id="6fa45-124">Обычно выходные данные имеют формат несжатых аудио-или видеоданных, хотя могут содержать данные любого типа.</span><span class="sxs-lookup"><span data-stu-id="6fa45-124">Typically, output data is in the form of uncompressed audio or video data, although it can contain any type of data.</span></span> <span data-ttu-id="6fa45-125">Поддерживаемые форматы вывода видео перечислены в других разделах этой документации.</span><span class="sxs-lookup"><span data-stu-id="6fa45-125">Supported video output formats are listed elsewhere in this documentation.</span></span>

<span data-ttu-id="6fa45-126">Термин "поток" в этой документации относится к данным в файле ASF, а не к (1) входным источникам данных перед их обработкой объектом модуля записи, и (2) выходные данные после распаковки объектом модуля чтения.</span><span class="sxs-lookup"><span data-stu-id="6fa45-126">The term "stream" in this documentation refers to data in an ASF file, as opposed to (1) the input source data before it is processed by the writer object, and (2) the output data after it is decompressed by the reader object.</span></span> <span data-ttu-id="6fa45-127">Поток ASF содержит данные, поступающие из одного входного объекта в объект модуля записи, хотя несколько потоков могут быть созданы из одних и тех же входных данных.</span><span class="sxs-lookup"><span data-stu-id="6fa45-127">An ASF stream contains data that comes from a single input on the writer object, although more than one stream can be created from the same input.</span></span> <span data-ttu-id="6fa45-128">Поток имеет тот же формат и параметры сжатия от начала до конца.</span><span class="sxs-lookup"><span data-stu-id="6fa45-128">A stream has the same format and compression settings from beginning to end.</span></span> <span data-ttu-id="6fa45-129">Простой ASF-файл имеет два потока: один для аудио и один для видео.</span><span class="sxs-lookup"><span data-stu-id="6fa45-129">A simple ASF file has two streams, one for audio and one for video.</span></span> <span data-ttu-id="6fa45-130">Более сложный файл может иметь два звуковых потока и несколько видеопотоков.</span><span class="sxs-lookup"><span data-stu-id="6fa45-130">A more complex file might have two audio streams and several video streams.</span></span> <span data-ttu-id="6fa45-131">Звуковые потоки могут иметь одни и те же параметры сжатия, но содержать различное содержимое, например речевое сопровождение на разных языках.</span><span class="sxs-lookup"><span data-stu-id="6fa45-131">The audio streams might have the same compression settings but contain different content, such as a narration in different languages.</span></span> <span data-ttu-id="6fa45-132">Потоки видео могут содержать одно и то же содержимое, но имеют разные параметры сжатия.</span><span class="sxs-lookup"><span data-stu-id="6fa45-132">The video streams might contain the same content, but have different compression settings.</span></span> <span data-ttu-id="6fa45-133">Параметры формата мультимедиа и сжатия, которые объект Writer будет применять к каждому потоку, указаны в профиле.</span><span class="sxs-lookup"><span data-stu-id="6fa45-133">The media format and compression settings that the writer object will apply to each stream are specified in the profile.</span></span>

<span data-ttu-id="6fa45-134">Связь между входами, потоками и выходами может составлять три основных типа.</span><span class="sxs-lookup"><span data-stu-id="6fa45-134">The relationship between inputs, streams, and outputs can be of three basic types.</span></span> <span data-ttu-id="6fa45-135">Эти связи показаны на следующих трех схемах.</span><span class="sxs-lookup"><span data-stu-id="6fa45-135">The following three diagrams illustrate the relationships.</span></span>

<span data-ttu-id="6fa45-136">В самой базовой связи, которая является профилем без взаимного исключения, каждый вход обрабатывается модулем записи и вставляется в файл ASF в виде одного потока.</span><span class="sxs-lookup"><span data-stu-id="6fa45-136">In the most basic relationship, which is a profile without any mutual exclusion, each input is processed by the writer and inserted in the ASF file as a single stream.</span></span> <span data-ttu-id="6fa45-137">При воспроизведении средство чтения считывает поток и доставляет несжатые образцы как один выход, как показано на следующей схеме.</span><span class="sxs-lookup"><span data-stu-id="6fa45-137">On playback, the reader reads the stream and delivers uncompressed samples as a single output, as shown in the following diagram.</span></span>

![Схема, демонстрирующая нормальную связь между входами, потоками и выходами.](images/formatsdk03.png)

<span data-ttu-id="6fa45-139">Более сложная связь возникает при использовании нескольких взаимоисключающих исключений с несколькими битовыми частотами.</span><span class="sxs-lookup"><span data-stu-id="6fa45-139">A more complex relationship occurs when multiple bit rate mutual exclusion is used.</span></span> <span data-ttu-id="6fa45-140">В этом случае один вход обрабатывается модулем записи и кодируется по нескольким скоростям.</span><span class="sxs-lookup"><span data-stu-id="6fa45-140">In this case, a single input is processed by the writer and encoded at several bit rates.</span></span> <span data-ttu-id="6fa45-141">Каждая кодировка данных вставляется в файл ASF в виде отдельного потока.</span><span class="sxs-lookup"><span data-stu-id="6fa45-141">Each encoding of the data is inserted in the ASF file as a separate stream.</span></span> <span data-ttu-id="6fa45-142">При воспроизведении средство чтения определяет, какой поток следует распаковать в зависимости от доступной пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="6fa45-142">On playback, the reader determines which stream to decompress based upon the available bandwidth.</span></span> <span data-ttu-id="6fa45-143">Затем средство чтения считывает выбранный поток и доставляет несжатые образцы как один выход, как показано на следующей схеме.</span><span class="sxs-lookup"><span data-stu-id="6fa45-143">The reader then reads the selected stream and delivers uncompressed samples as a single output, as shown in the following diagram.</span></span>

![Схема, показывающая связи между входами, потоками и выходами при использовании нескольких взаимных исключений многоразрядной скорости.](images/formatsdk04.png)

<span data-ttu-id="6fa45-145">Третий тип связи может возникать при использовании взаимного исключения на основе языка или пользовательского типа.</span><span class="sxs-lookup"><span data-stu-id="6fa45-145">The third type of relationship can occur when a language-based or custom mutual exclusion is used.</span></span> <span data-ttu-id="6fa45-146">В этой связи несколько входов обрабатываются модулем чтения, и каждый из них вставляется в ASF-файл как отдельный поток.</span><span class="sxs-lookup"><span data-stu-id="6fa45-146">In this relationship, multiple inputs are processed by the reader and each is inserted into the ASF file as an individual stream.</span></span> <span data-ttu-id="6fa45-147">При воспроизведении приложение вручную выбирает поток для распаковки на основе предоставленной логики.</span><span class="sxs-lookup"><span data-stu-id="6fa45-147">On playback, your application manually selects which stream to decompress based upon logic you provide.</span></span> <span data-ttu-id="6fa45-148">Затем модуль чтения считывает выбранный поток и доставляет несжатые образцы как один выход.</span><span class="sxs-lookup"><span data-stu-id="6fa45-148">The reader then reads the selected stream and delivers uncompressed samples as a single output.</span></span> <span data-ttu-id="6fa45-149">Этот процесс можно использовать для включения звуковых дорожек на нескольких языках.</span><span class="sxs-lookup"><span data-stu-id="6fa45-149">This process can be used for including soundtracks in multiple languages.</span></span> <span data-ttu-id="6fa45-150">Этот процесс представлен на схеме ниже.</span><span class="sxs-lookup"><span data-stu-id="6fa45-150">The following diagram illustrates this process.</span></span>

![Схема, показывающая связи между входами, потоками и выходами при использовании настраиваемого взаимного исключения.](images/formatsdk02.png)

<span data-ttu-id="6fa45-152">Существует несколько вариантов связей, описанных выше.</span><span class="sxs-lookup"><span data-stu-id="6fa45-152">There is some variation in the relationships described previously.</span></span> <span data-ttu-id="6fa45-153">Например, файл может содержать все три связи или один или два из них.</span><span class="sxs-lookup"><span data-stu-id="6fa45-153">For example, a file can contain all three relationships, or one or two of them.</span></span> <span data-ttu-id="6fa45-154">Также возможно сжатие некоторых входных данных. в этом случае модуль записи не выполняет дополнительное сжатие.</span><span class="sxs-lookup"><span data-stu-id="6fa45-154">It is also possible for some inputs to be compressed, in which case the writer performs no additional compression.</span></span> <span data-ttu-id="6fa45-155">Кроме того, модуль чтения может доставлять сжатые образцы.</span><span class="sxs-lookup"><span data-stu-id="6fa45-155">The reader, also, can deliver compressed samples.</span></span> <span data-ttu-id="6fa45-156">Но при этом доступ к ним должен осуществляться по номеру потока, а не по номеру выхода.</span><span class="sxs-lookup"><span data-stu-id="6fa45-156">But when it does, you must access them by stream number, not by output number.</span></span>

> [!Note]  
> <span data-ttu-id="6fa45-157">В качестве входных, потоков и выходных данных используются объекты пакета SDK Windows Media Format.</span><span class="sxs-lookup"><span data-stu-id="6fa45-157">Inputs, steams, and outputs are all assigned numbers by the objects of the Windows Media Format SDK.</span></span> <span data-ttu-id="6fa45-158">Потоки имеют номер потока, который основан на 1, который определяется в профиле.</span><span class="sxs-lookup"><span data-stu-id="6fa45-158">Streams have a stream number, which is 1-based, that you define in the profile.</span></span> <span data-ttu-id="6fa45-159">Каждому потоку также назначается индекс потока для использования при перечислении потоков в профиле.</span><span class="sxs-lookup"><span data-stu-id="6fa45-159">Each stream is also assigned a stream index for use in enumerating streams in a profile.</span></span> <span data-ttu-id="6fa45-160">Ни один из этих чисел не гарантированно согласуется друг с другом.</span><span class="sxs-lookup"><span data-stu-id="6fa45-160">None of these numbers are guaranteed to be consistent with each other.</span></span> <span data-ttu-id="6fa45-161">То есть входное число 1 может не соответствовать номеру потока 1, номер потока 1 может не соответствовать индексу потока 1 и т. д.</span><span class="sxs-lookup"><span data-stu-id="6fa45-161">That is, input number 1 may not correspond with stream number 1, stream number 1 may not correspond with stream index 1, and so on.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="6fa45-162">См. также</span><span class="sxs-lookup"><span data-stu-id="6fa45-162">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6fa45-163">**Основные понятия**</span><span class="sxs-lookup"><span data-stu-id="6fa45-163">**Concepts**</span></span>](concepts.md)
</dt> <dt>

[<span data-ttu-id="6fa45-164">**Взаимное исключение**</span><span class="sxs-lookup"><span data-stu-id="6fa45-164">**Mutual Exclusion**</span></span>](mutual-exclusion.md)
</dt> </dl>

 

 




