---
title: Доставка сжатых образцов с помощью асинхронного модуля чтения
description: Доставка сжатых образцов с помощью асинхронного модуля чтения
ms.assetid: 488baa3c-8863-4afc-89b2-fe55823e5db9
keywords:
- Расширенный формат систем (ASF), Доставка сжатых образцов
- ASF (Расширенный системный формат), Доставка сжатых образцов
- Расширенный системный формат (ASF), асинхронный читатель
- ASF (Расширенный системный формат), асинхронный читатель
- Расширенный формат систем (ASF), сжатые образцы
- ASF (Расширенный системный формат), сжатые образцы
- асинхронные модули чтения, Доставка сжатых образцов
- асинхронные модули чтения, сжатые образцы
- сжатые образцы, Доставка
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a4ce835075f5bd760014a3b1b776ba3627adb076
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/19/2020
ms.locfileid: "103788791"
---
# <a name="to-deliver-compressed-samples-with-the-asynchronous-reader"></a>Доставка сжатых образцов с помощью асинхронного модуля чтения

Асинхронный читатель может доставлять сжатые образцы из потоков в файлах ASF. Обычно приложения предоставляют сжатые образцы при копировании потока из одного файла в другой. Не рекомендуется повторно сжимать данные, которые были перестроены из сжатого потока, так как данные теряются в процессе кодирования. Цифровые носители, сжатые более одного раза, имеют заметное снижение качества.

Пакет SDK для формата Windows Media не предоставляет методы для декодирования данных после их извлечения из файла ASF. Если вы получаете сжатые примеры и в дальнейшем хотите распаковать их, вам потребуется предоставить собственный код. Одним из способов обойти это ограничение является запись сжатых образцов в новый ASF-файл и их повторное считывание в обычные, несжатые образцы.

Чтобы получить сжатые образцы с помощью асинхронного модуля чтения, выполните следующие действия.

1.  Реализуйте обратный вызов [**ивмреадеркаллбаккадванцед:: онстреамсампле**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadercallbackadvanced-onstreamsample) . Этот обратный вызов по сути идентичен функции [**ивмреадеркаллбакк:: OnSample**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadercallback-onsample) , за исключением того, что он доставляет выборки по номеру потока, а образцы по-прежнему сжимаются.
2.  Перед запуском воспроизведения получите указатель на интерфейс [**ивмреадерадванцед**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmreaderadvanced) объекта Reader, вызвав **Ивмреадер:: QueryInterface**.
3.  Настройте модуль чтения для доставки сжатых образцов для нужного потока путем вызова [**ивмреадерадванцед:: сетрецеивестреамсамплес**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced-setreceivestreamsamples).
4.  Повторите шаг 3 для каждого потока, для которого требуется сжатый пример доставки.

> [!Note]  
> Потоки изображений недопустимы для доставки сжатых потоков. При копировании потока изображений из одного файла в другой он не будет работать в новом файле. Чтобы скопировать поток изображений из файла в файл, извлеките образцы потока изображений по номеру выхода и включите их в новый файл, как если бы он включал новый поток изображений.

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Интерфейс Ивмреадеркаллбаккадванцед**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmreadercallbackadvanced)
</dt> <dt>

[**Чтение файлов с помощью асинхронного модуля чтения**](reading-files-with-the-asynchronous-reader.md)
</dt> </dl>

 

 




