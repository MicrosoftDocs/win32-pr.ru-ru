---
title: Воспроизведение файлов из сетевого источника
description: Воспроизведение файлов из сетевого источника
ms.assetid: 72f2d685-56fc-4da2-8372-3774cc65f59d
keywords:
- Windows Media Format SDK, чтение данных ASF
- Windows Media Format SDK, воспроизведение файлов из сетевых источников
- Расширенный формат систем (ASF), чтение данных
- ASF (Расширенный системный формат), чтение данных
- Расширенный формат систем (ASF), воспроизведение файлов из сетевых источников
- ASF (Расширенный системный формат), воспроизведение файлов из сетевых источников
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8f1e4e41ddf94498ddeddf90e64439c1b11b7ba8
ms.sourcegitcommit: ad672d3a10192c5ccac619ad2524407109266e93
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/25/2020
ms.locfileid: "105700830"
---
# <a name="playing-files-from-a-network-source"></a>Воспроизведение файлов из сетевого источника

Чтение из сети не имеет фундаментального отличия от чтения локального файла. Приложение передает URL-адрес методу [**ивмреадер:: Open**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreader-open) объекта Reader, и объект модуля чтения обрабатывает сведения о сетевых протоколах. Объект "читатель" использует интеллектуальное управление буферами для обеспечения максимально плавного воспроизведения. Если приложению требуется больший контроль над сетевыми параметрами объекта чтения, они доступны через интерфейсы [**ивмреадернетворкконфиг**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmreadernetworkconfig) и [**IWMReaderNetworkConfig2**](/previous-versions/windows/desktop/api/wmsdkidl/nn-wmsdkidl-iwmreadernetworkconfig2) .

Содержимое из сетевого источника попадает в одну из следующих двух категорий:

-   Потоки. Данные передаются в течение времени для воспроизведения на локальном компьютере. Серверы, на которых работают службы Windows Media, могут предоставлять потоковые данные. Если содержимое с несколькими потоками (MBR) передается потоком, клиент может запросить другую скорость передачи данных с сервера при потоковой передаче.
-   Download. Все данные передаются как можно быстрее, чтобы их можно было сохранить в виде файла на локальном компьютере. Веб-серверы предоставляют Скачанные данные. После начала загрузки обмен данными между клиентом и сервером отсутствует.

Когда объект Reader скачивает файл с веб-сервера, он использует метод, называемый прогрессивной потоковой передачей, который позволяет проигрывателю начать отрисовку содержимого до завершения загрузки. Данные помещаются в буфер, чтобы обеспечить непрерывный поток данных для проигрывателя. Такие сведения, как скорость передачи и длительность содержимого, используются для определения продолжительности буферизации данных перед их передачей проигрывателю.

Чтобы открыть файл или поток по сети, вызовите метод **ивмреадер:: Open** объекта Reader с соответствующим URL-адресом. **Open** является асинхронным вызовом, поэтому он возвращается немедленно. Когда источник готов к чтению, объект Reader отправляет ВМТ \_ открытое уведомление в метод обратного вызова [**ивмстатускаллбакк:: OnStatus**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstatuscallback-onstatus) приложения. На этом этапе приложение может запросить модуль чтения для режима доставки, вызвав [**IWMReaderAdvanced2:: жетплаймоде**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getplaymode). Для сетевого содержимого этот метод возвращает либо \_ \_ загрузку в режиме воспроизведения ВМТ \_ , которая указывает загруженное содержимое, либо \_ \_ \_ потоковую передачу в режиме воспроизведения ВМТ, указывая потоковый контент.

Чтобы начать чтение файла или потока, вызовите метод [**ивмреадер:: Start**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreader-start) . Модуль чтения отправляет \_ \_ уведомление о начале буферизации ВМТ, когда он начинает буферизацию содержимого, и \_ \_ уведомление об ошибке буферизации ВМТ при завершении буферизации. Пока средство чтения помещает содержимое в буфер (то есть между этими двумя уведомлениями), может потребоваться отобразить ход выполнения буферизации пользователю. Метод [**IWMReaderAdvanced2:: жетбуфферпрогресс**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getbufferprogress) Возвращает процент данных, которые были помещены в буфер, и предполагаемое оставшееся время. Для скачанного содержимого можно также вызвать [**IWMReaderAdvanced2:: жетдовнлоадпрогресс**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getdownloadprogress) , чтобы получить сведения о ходе загрузки. Вызывайте эти методы повторно для обновления экрана до завершения буферизации. Буферизация может произойти снова во время воспроизведения из-за таких факторов, как перегрузка сети. Если это происходит, приложение получает другое \_ \_ уведомление о начале буферизации ВМТ.

Когда объект модуля чтения начинает воспроизводить содержимое, он отправляет \_ уведомление Started ВМТ. Каждый пример декодирован и становится доступным для подготовки к просмотру, модуль чтения передает его в приложение с помощью метода обратного вызова [**ивмреадеркаллбакк:: OnSample**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadercallback-onsample) . На этом этапе процесс выполняется так же, как и для локального воспроизведения файлов. При остановке воспроизведения модуль чтения отправляет уведомление ВМТ \_ конца \_ \_ потоковой передачи.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Чтение файлов ASF**](reading-asf-files.md)
</dt> </dl>

 

 




