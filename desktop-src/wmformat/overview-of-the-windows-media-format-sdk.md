---
title: Обзор пакета SDK Windows Media Format
description: Обзор пакета SDK Windows Media Format
ms.assetid: 9e5d6254-6261-4ca8-84d6-38050c93db22
keywords:
- Windows Media Format SDK, создание и редактирование файлов ASF
- Расширенный формат систем (ASF), создание и редактирование файлов
- ASF (Расширенный системный формат), создание и редактирование файлов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: eb4f58be5d377e44fc0f68c89ad580a554902c58
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104328739"
---
# <a name="overview-of-the-windows-media-format-sdk"></a>Обзор пакета SDK Windows Media Format

Пакет SDK Windows Media Format содержит объекты для выполнения задач на трех этапах жизненного цикла файла ASF: создание, редактирование и воспроизведение. Некоторые приложения, особенно те, которые используются для редактирования видео, будут использовать широкие возможности пакета SDK Windows Media Format для чтения содержимого ASF-файлов, изменения этого содержимого и записи результатов в новый файл. Однако проще всего представить этот пакет SDK в три этапа создания, редактирования и воспроизведения файлов.

## <a name="asf-file-creation-with-the-windows-media-format-sdk"></a>Создание файлов ASF с помощью пакета SDK Windows Media Format

Процесс написания файлов ASF с помощью пакета SDK для Windows Media Format — это, на самом высоком уровне, довольно простой. Создание файла управляется объектом модуля записи. Чтобы сообщить объекту модуля записи, какой файл нужно создать, укажите объект профиля для использования. Каждый объект профиля содержит параметры для файла ASF. Некоторые профили включены в этот пакет SDK, а поддержка редактирования профилей обеспечивается рядом объектов. Если вы настроили профиль для объекта модуля записи, можно начать передачу образцов в модуль записи для обработки. В большинстве случаев пример — это фрагмент звука или видео, который не сжимается, но пример может представлять собой любой тип данных.

На внутреннем уровне модуль записи выполняет три основных задачи. Во-первых, если поток, к которому принадлежит пример, должен быть сжат, модуль записи взаимодействует с частью кодирования кодека (компрессор/декомпрессор) для сжатия образца. После того как образцы записываются в форму, указанную в профиле, модуль записи разделяет образцы на пакеты соответствующего размера для потоковой передачи по сети. Наконец, данные из различных потоков мультиплексированы или чередуются, чтобы образцы с одинаковым временем показа во всех потоках были близко друг к другу в разделе данных ASF-файла.

Объект модуля записи фактически не записывает сам файл. Он взаимодействует с одним или несколькими объектами, именуемыми приемниками, которые доставляют данные из модуля записи в место назначения. В случае с локальными файлами приемник файла управляет записью данных в файл. Кроме того, можно настроить приемники сети для доставки данных ASF по сети. Обычно используется более одного приемника. Например, приложение может передавать файл по сети и сохранять копию в виде файла на локальном диске одновременно. С помощью приемника push-уведомлений можно передавать содержимое из приложения для записи на один или несколько серверов, на которых выполняются службы Windows Media Services, которые затем распространяют содержимое пользователям.

## <a name="asf-file-editing-with-the-windows-media-format-sdk-metadata-editing"></a>Редактирование файлов ASF с помощью пакета SDK Windows Media Format (Редактирование метаданных)

Изменение содержимого раздела данных файла ASF включает в себя перезапись файла. Пакет SDK для формата Windows Media не предоставляет никаких объектов, управляющих разделом данных. Для простых изменений, таких как объединение двух файлов или вырезание содержимого из файла, можно считывать образцы без их распаковки, а затем записывать их в новый файл, используя те же данные заголовка. Более сложные изменения предполагают внесение изменений в профиль, используемый для нового файла.

Пакет SDK для формата Windows Media поддерживает редактирование частей раздела заголовка без перезаписи файла. Заголовок файла ASF содержит множество различных типов данных. Наиболее часто изменяемыми являются атрибуты метаданных, которые представляют собой пары "имя-значение", описывающие аспекты содержимого и людей, участвующих в его создании. Метаданные можно изменить с помощью объекта редактора метаданных пакета SDK Windows Media Format. Этот объект открывает ASF файл, позволяет изменить часть содержимого заголовка, записать изменения в файл и закрыть файл. Редактирование метаданных очень просто, при этом простые вызовы методов извлекают и задают значения.

## <a name="asf-file-reading-with-the-windows-media-format-sdk"></a>Чтение файлов ASF с помощью пакета SDK Windows Media Format

Пакет Windows Media Format SDK предоставляет два различных объекта для чтения файлов ASF: объект Reader и синхронный объект Reader. Объект модуля чтения доступен во всех версиях пакета SDK, в то время как для синхронного объекта чтения требуется пакет SDK серии Windows Media 9 или более поздней версии. Основное различие между ними заключается в том, что объект Reader доставляет примеры в приложение, выполняя события в метод обратного вызова, а синхронное средство чтения предоставляет отдельные примеры в ответ на вызовы методов.

Чтобы использовать объект Reader, необходимо реализовать несколько методов обратного вызова для реагирования на сообщения о состоянии и образцы сообщений из объекта Reader. Модуль чтения настраивается для доставки содержимого по своему усмотрению, запуска средства чтения и ожидания образцов сообщений. Процесс извлечения примеров из ASF-файла по сути является обратным процессом записи. Объект модуля чтения взаимодействует с кодеками, необходимыми для декодирования всех сжатых потоков и доставки несжатых данных в приложение. Можно также настроить объект модуля чтения для доставки образцов в сжатом состоянии, чтобы можно было включить ранее закодированный поток в новый файл.

Синхронный объект чтения работает во многом так же, как и объект Reader. Но вместо настройки обратных вызовов необходимо запросить каждый выбор из синхронного модуля чтения по отдельности. Использование синхронного модуля чтения требует только одного потока, в то время как для чтения требуется несколько потоков. Объект синхронного чтения имеет несколько преимуществ по сравнению с объектом модуля чтения в определенных обстоятельствах, в основном для приложений для редактирования содержимого, которым требуется быстрый доступ к различным частям файла и копирования данных между файлами. Синхронный объект Reader гораздо проще в использовании и делает поиск в конкретных местах в разделе данных простым. Однако синхронный модуль чтения не поддерживает чтение файлов по сети и не поддерживает управление цифровыми правами.

## <a name="other-operations-with-the-windows-media-format-sdk"></a>Другие операции с пакетом SDK для формата Windows Media

В дополнение к трем основным функциональным областям пакет SDK Windows Media Format содержит объекты для выполнения других операций, связанных с файлами ASF. Объект диспетчера профилей используется для создания профилей и доступа к ним, а также для их сохранения. Объект индексатора создает объекты индекса в файлах ASF, которые позволяют выполнять поиск в видеофайлах. Наконец, объект чтения и объект модуля записи поддерживают управление цифровыми правами для защиты интеллектуальной собственности авторов содержимого.

**Примечание** . Цель структуры файлов ASF и этого пакета SDK в целом состоит в том, чтобы создавать цифровые мультимедийные файлы, содержащие аудио и видео, и эта документация написана с учетом этого. Однако структура файлов ASF также будет работать и для других типов содержимого. Вы можете найти множество приложений для файлов ASF, которые не связаны с аудио и видео.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**О пакете SDK для формата Windows Media**](about-the-windows-media-format-sdk.md)
</dt> </dl>

 

 




