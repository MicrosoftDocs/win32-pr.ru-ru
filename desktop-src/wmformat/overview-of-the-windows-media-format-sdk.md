---
title: Обзор пакета SDK Windows Media Format
description: Обзор пакета SDK Windows Media Format
ms.assetid: 9e5d6254-6261-4ca8-84d6-38050c93db22
keywords:
- Windows Media Format SDK, создание и редактирование файлов ASF
- Расширенный формат систем (ASF), создание и редактирование файлов
- ASF (Расширенный системный формат), создание и редактирование файлов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: eb4f58be5d377e44fc0f68c89ad580a554902c58
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104328739"
---
# <a name="overview-of-the-windows-media-format-sdk"></a><span data-ttu-id="7df69-106">Обзор пакета SDK Windows Media Format</span><span class="sxs-lookup"><span data-stu-id="7df69-106">Overview of the Windows Media Format SDK</span></span>

<span data-ttu-id="7df69-107">Пакет SDK Windows Media Format содержит объекты для выполнения задач на трех этапах жизненного цикла файла ASF: создание, редактирование и воспроизведение.</span><span class="sxs-lookup"><span data-stu-id="7df69-107">The Windows Media Format SDK contains objects to perform tasks at three points in the life of an ASF file: creation, editing, and playback.</span></span> <span data-ttu-id="7df69-108">Некоторые приложения, особенно те, которые используются для редактирования видео, будут использовать широкие возможности пакета SDK Windows Media Format для чтения содержимого ASF-файлов, изменения этого содержимого и записи результатов в новый файл.</span><span class="sxs-lookup"><span data-stu-id="7df69-108">Some applications, notably those for video editing, will use the broad functionality of the Windows Media Format SDK to read the contents of ASF files, alter that content, and write the results to a new file.</span></span> <span data-ttu-id="7df69-109">Однако проще всего представить этот пакет SDK в три этапа создания, редактирования и воспроизведения файлов.</span><span class="sxs-lookup"><span data-stu-id="7df69-109">However, it is easiest to think of this SDK in the three stages of file creation, editing, and playback.</span></span>

## <a name="asf-file-creation-with-the-windows-media-format-sdk"></a><span data-ttu-id="7df69-110">Создание файлов ASF с помощью пакета SDK Windows Media Format</span><span class="sxs-lookup"><span data-stu-id="7df69-110">ASF File Creation with the Windows Media Format SDK</span></span>

<span data-ttu-id="7df69-111">Процесс написания файлов ASF с помощью пакета SDK для Windows Media Format — это, на самом высоком уровне, довольно простой.</span><span class="sxs-lookup"><span data-stu-id="7df69-111">The process of writing ASF files with the Windows Media Format SDK is, at a high level, fairly simple.</span></span> <span data-ttu-id="7df69-112">Создание файла управляется объектом модуля записи.</span><span class="sxs-lookup"><span data-stu-id="7df69-112">File creation is managed by a writer object.</span></span> <span data-ttu-id="7df69-113">Чтобы сообщить объекту модуля записи, какой файл нужно создать, укажите объект профиля для использования.</span><span class="sxs-lookup"><span data-stu-id="7df69-113">You tell the writer object what sort of file you want to create by specifying a profile object for it to use.</span></span> <span data-ttu-id="7df69-114">Каждый объект профиля содержит параметры для файла ASF.</span><span class="sxs-lookup"><span data-stu-id="7df69-114">Each profile object contains the settings for an ASF file.</span></span> <span data-ttu-id="7df69-115">Некоторые профили включены в этот пакет SDK, а поддержка редактирования профилей обеспечивается рядом объектов.</span><span class="sxs-lookup"><span data-stu-id="7df69-115">Some profiles are included with this SDK, and profile editing support is provided by a number of objects.</span></span> <span data-ttu-id="7df69-116">Если вы настроили профиль для объекта модуля записи, можно начать передачу образцов в модуль записи для обработки.</span><span class="sxs-lookup"><span data-stu-id="7df69-116">When you have set a profile for the writer object to use, you can begin passing samples to the writer for processing.</span></span> <span data-ttu-id="7df69-117">В большинстве случаев пример — это фрагмент звука или видео, который не сжимается, но пример может представлять собой любой тип данных.</span><span class="sxs-lookup"><span data-stu-id="7df69-117">In most cases, a sample is a piece of audio or video that is uncompressed, but a sample can be any type of data.</span></span>

<span data-ttu-id="7df69-118">На внутреннем уровне модуль записи выполняет три основных задачи.</span><span class="sxs-lookup"><span data-stu-id="7df69-118">Internally, the writer performs three major tasks.</span></span> <span data-ttu-id="7df69-119">Во-первых, если поток, к которому принадлежит пример, должен быть сжат, модуль записи взаимодействует с частью кодирования кодека (компрессор/декомпрессор) для сжатия образца.</span><span class="sxs-lookup"><span data-stu-id="7df69-119">First, if the stream that a sample belongs to is to be compressed, the writer communicates with the encoding portion of the codec (compressor/decompressor) to compress the sample.</span></span> <span data-ttu-id="7df69-120">После того как образцы записываются в форму, указанную в профиле, модуль записи разделяет образцы на пакеты соответствующего размера для потоковой передачи по сети.</span><span class="sxs-lookup"><span data-stu-id="7df69-120">Once the samples are in the form specified by the profile, the writer breaks the samples apart into packets of appropriate size to be streamed over a network.</span></span> <span data-ttu-id="7df69-121">Наконец, данные из различных потоков мультиплексированы или чередуются, чтобы образцы с одинаковым временем показа во всех потоках были близко друг к другу в разделе данных ASF-файла.</span><span class="sxs-lookup"><span data-stu-id="7df69-121">Finally, the data from the various streams is multiplexed, or interleaved so that samples with similar presentation times across all streams are close to one another in the data section of the ASF file.</span></span>

<span data-ttu-id="7df69-122">Объект модуля записи фактически не записывает сам файл.</span><span class="sxs-lookup"><span data-stu-id="7df69-122">The writer object does not actually write a file itself.</span></span> <span data-ttu-id="7df69-123">Он взаимодействует с одним или несколькими объектами, именуемыми приемниками, которые доставляют данные из модуля записи в место назначения.</span><span class="sxs-lookup"><span data-stu-id="7df69-123">It communicates with one or more objects called sinks, which deliver the data from the writer to its destination.</span></span> <span data-ttu-id="7df69-124">В случае с локальными файлами приемник файла управляет записью данных в файл.</span><span class="sxs-lookup"><span data-stu-id="7df69-124">In the case of local files, a file sink manages writing the data to the file.</span></span> <span data-ttu-id="7df69-125">Кроме того, можно настроить приемники сети для доставки данных ASF по сети.</span><span class="sxs-lookup"><span data-stu-id="7df69-125">You can also configure network sinks to deliver the ASF data across a network.</span></span> <span data-ttu-id="7df69-126">Обычно используется более одного приемника.</span><span class="sxs-lookup"><span data-stu-id="7df69-126">Commonly, more than one sink is used.</span></span> <span data-ttu-id="7df69-127">Например, приложение может передавать файл по сети и сохранять копию в виде файла на локальном диске одновременно.</span><span class="sxs-lookup"><span data-stu-id="7df69-127">For example, an application can stream a file across a network and save a copy as a file on a local disk simultaneously.</span></span> <span data-ttu-id="7df69-128">С помощью приемника push-уведомлений можно передавать содержимое из приложения для записи на один или несколько серверов, на которых выполняются службы Windows Media Services, которые затем распространяют содержимое пользователям.</span><span class="sxs-lookup"><span data-stu-id="7df69-128">By using a push sink, you can broadcast content from your writing application to one or more servers running Windows Media Services, which will then distribute the content to users.</span></span>

## <a name="asf-file-editing-with-the-windows-media-format-sdk-metadata-editing"></a><span data-ttu-id="7df69-129">Редактирование файлов ASF с помощью пакета SDK Windows Media Format (Редактирование метаданных)</span><span class="sxs-lookup"><span data-stu-id="7df69-129">ASF File Editing with the Windows Media Format SDK (Metadata Editing)</span></span>

<span data-ttu-id="7df69-130">Изменение содержимого раздела данных файла ASF включает в себя перезапись файла.</span><span class="sxs-lookup"><span data-stu-id="7df69-130">Editing the contents of the data section of an ASF file involves rewriting the file.</span></span> <span data-ttu-id="7df69-131">Пакет SDK для формата Windows Media не предоставляет никаких объектов, управляющих разделом данных.</span><span class="sxs-lookup"><span data-stu-id="7df69-131">The Windows Media Format SDK does not provide any objects that manipulate the data section in place.</span></span> <span data-ttu-id="7df69-132">Для простых изменений, таких как объединение двух файлов или вырезание содержимого из файла, можно считывать образцы без их распаковки, а затем записывать их в новый файл, используя те же данные заголовка.</span><span class="sxs-lookup"><span data-stu-id="7df69-132">For simple edits, such as concatenating two files, or cutting content from a file, you can read samples without decompressing them, and then write them to a new file using the same header information.</span></span> <span data-ttu-id="7df69-133">Более сложные изменения предполагают внесение изменений в профиль, используемый для нового файла.</span><span class="sxs-lookup"><span data-stu-id="7df69-133">More complicated edits involve making changes to the profile used for the new file.</span></span>

<span data-ttu-id="7df69-134">Пакет SDK для формата Windows Media поддерживает редактирование частей раздела заголовка без перезаписи файла.</span><span class="sxs-lookup"><span data-stu-id="7df69-134">The Windows Media Format SDK does support editing parts of the header section without rewriting the file.</span></span> <span data-ttu-id="7df69-135">Заголовок файла ASF содержит множество различных типов данных.</span><span class="sxs-lookup"><span data-stu-id="7df69-135">The header of an ASF file contains many different types of data.</span></span> <span data-ttu-id="7df69-136">Наиболее часто изменяемыми являются атрибуты метаданных, которые представляют собой пары "имя-значение", описывающие аспекты содержимого и людей, участвующих в его создании.</span><span class="sxs-lookup"><span data-stu-id="7df69-136">The most commonly edited are metadata attributes, which are name/value pairs that describe aspects of the content and the people involved in making it.</span></span> <span data-ttu-id="7df69-137">Метаданные можно изменить с помощью объекта редактора метаданных пакета SDK Windows Media Format.</span><span class="sxs-lookup"><span data-stu-id="7df69-137">You can edit metadata using the metadata editor object of the Windows Media Format SDK.</span></span> <span data-ttu-id="7df69-138">Этот объект открывает ASF файл, позволяет изменить часть содержимого заголовка, записать изменения в файл и закрыть файл.</span><span class="sxs-lookup"><span data-stu-id="7df69-138">This object will open an ASF file, enable you to change some of the contents of the header, write the changes to the file, and close the file.</span></span> <span data-ttu-id="7df69-139">Редактирование метаданных очень просто, при этом простые вызовы методов извлекают и задают значения.</span><span class="sxs-lookup"><span data-stu-id="7df69-139">Metadata editing is very straightforward, with simple method calls to retrieve and set values.</span></span>

## <a name="asf-file-reading-with-the-windows-media-format-sdk"></a><span data-ttu-id="7df69-140">Чтение файлов ASF с помощью пакета SDK Windows Media Format</span><span class="sxs-lookup"><span data-stu-id="7df69-140">ASF File Reading with the Windows Media Format SDK</span></span>

<span data-ttu-id="7df69-141">Пакет Windows Media Format SDK предоставляет два различных объекта для чтения файлов ASF: объект Reader и синхронный объект Reader.</span><span class="sxs-lookup"><span data-stu-id="7df69-141">The Windows Media Format SDK provides two distinct objects for reading ASF files: the reader object and the synchronous reader object.</span></span> <span data-ttu-id="7df69-142">Объект модуля чтения доступен во всех версиях пакета SDK, в то время как для синхронного объекта чтения требуется пакет SDK серии Windows Media 9 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="7df69-142">The reader object is available in all versions of the SDK, while the synchronous reader object requires the Windows Media Format 9 Series SDK or a later version.</span></span> <span data-ttu-id="7df69-143">Основное различие между ними заключается в том, что объект Reader доставляет примеры в приложение, выполняя события в метод обратного вызова, а синхронное средство чтения предоставляет отдельные примеры в ответ на вызовы методов.</span><span class="sxs-lookup"><span data-stu-id="7df69-143">The primary difference between the two is that the reader object delivers samples to your application by firing events to a callback method, while the synchronous reader provides individual samples in response to method calls.</span></span>

<span data-ttu-id="7df69-144">Чтобы использовать объект Reader, необходимо реализовать несколько методов обратного вызова для реагирования на сообщения о состоянии и образцы сообщений из объекта Reader.</span><span class="sxs-lookup"><span data-stu-id="7df69-144">To use the reader object, you must implement several callback methods to react to status and sample messages from the reader object.</span></span> <span data-ttu-id="7df69-145">Модуль чтения настраивается для доставки содержимого по своему усмотрению, запуска средства чтения и ожидания образцов сообщений.</span><span class="sxs-lookup"><span data-stu-id="7df69-145">You configure the reader to deliver the content as you like, start the reader, and wait for the sample messages.</span></span> <span data-ttu-id="7df69-146">Процесс извлечения примеров из ASF-файла по сути является обратным процессом записи.</span><span class="sxs-lookup"><span data-stu-id="7df69-146">The process of retrieving samples from an ASF file is basically the reverse of the writing process.</span></span> <span data-ttu-id="7df69-147">Объект модуля чтения взаимодействует с кодеками, необходимыми для декодирования всех сжатых потоков и доставки несжатых данных в приложение.</span><span class="sxs-lookup"><span data-stu-id="7df69-147">The reader object communicates with the codecs required to decode any compressed streams and delivers uncompressed data to your application.</span></span> <span data-ttu-id="7df69-148">Можно также настроить объект модуля чтения для доставки образцов в сжатом состоянии, чтобы можно было включить ранее закодированный поток в новый файл.</span><span class="sxs-lookup"><span data-stu-id="7df69-148">You can also configure the reader object to deliver samples in their compressed state, so that you can include a previously encoded stream in a new file.</span></span>

<span data-ttu-id="7df69-149">Синхронный объект чтения работает во многом так же, как и объект Reader.</span><span class="sxs-lookup"><span data-stu-id="7df69-149">The synchronous reader object works in much the same way as the reader object.</span></span> <span data-ttu-id="7df69-150">Но вместо настройки обратных вызовов необходимо запросить каждый выбор из синхронного модуля чтения по отдельности.</span><span class="sxs-lookup"><span data-stu-id="7df69-150">But instead of configuring callbacks, you must request each sample from the synchronous reader individually.</span></span> <span data-ttu-id="7df69-151">Использование синхронного модуля чтения требует только одного потока, в то время как для чтения требуется несколько потоков.</span><span class="sxs-lookup"><span data-stu-id="7df69-151">Using the synchronous reader requires only a single thread, while using the reader requires multiple threads.</span></span> <span data-ttu-id="7df69-152">Объект синхронного чтения имеет несколько преимуществ по сравнению с объектом модуля чтения в определенных обстоятельствах, в основном для приложений для редактирования содержимого, которым требуется быстрый доступ к различным частям файла и копирования данных между файлами.</span><span class="sxs-lookup"><span data-stu-id="7df69-152">The synchronous reader object has several advantages over the reader object in certain circumstances, mostly for content editing applications that need to quickly access different parts of a file and copy data between files.</span></span> <span data-ttu-id="7df69-153">Синхронный объект Reader гораздо проще в использовании и делает поиск в конкретных местах в разделе данных простым.</span><span class="sxs-lookup"><span data-stu-id="7df69-153">The synchronous reader object is much simpler to use, and makes seeking to specific places in the data section easy.</span></span> <span data-ttu-id="7df69-154">Однако синхронный модуль чтения не поддерживает чтение файлов по сети и не поддерживает управление цифровыми правами.</span><span class="sxs-lookup"><span data-stu-id="7df69-154">However, the synchronous reader does not support reading files over a network and does not support digital rights management.</span></span>

## <a name="other-operations-with-the-windows-media-format-sdk"></a><span data-ttu-id="7df69-155">Другие операции с пакетом SDK для формата Windows Media</span><span class="sxs-lookup"><span data-stu-id="7df69-155">Other Operations with the Windows Media Format SDK</span></span>

<span data-ttu-id="7df69-156">В дополнение к трем основным функциональным областям пакет SDK Windows Media Format содержит объекты для выполнения других операций, связанных с файлами ASF.</span><span class="sxs-lookup"><span data-stu-id="7df69-156">In addition to the three main functional areas just described, the Windows Media Format SDK has objects to perform other operations relating to ASF files.</span></span> <span data-ttu-id="7df69-157">Объект диспетчера профилей используется для создания профилей и доступа к ним, а также для их сохранения.</span><span class="sxs-lookup"><span data-stu-id="7df69-157">The profile manager object is used to create and access profiles and to save them.</span></span> <span data-ttu-id="7df69-158">Объект индексатора создает объекты индекса в файлах ASF, которые позволяют выполнять поиск в видеофайлах.</span><span class="sxs-lookup"><span data-stu-id="7df69-158">The indexer object creates index objects in ASF files that allow seeking in video files.</span></span> <span data-ttu-id="7df69-159">Наконец, объект чтения и объект модуля записи поддерживают управление цифровыми правами для защиты интеллектуальной собственности авторов содержимого.</span><span class="sxs-lookup"><span data-stu-id="7df69-159">Finally, the reader object and writer object support digital rights management to protect the intellectual rights of content creators.</span></span>

<span data-ttu-id="7df69-160">**Примечание** . Цель структуры файлов ASF и этого пакета SDK в целом состоит в том, чтобы создавать цифровые мультимедийные файлы, содержащие аудио и видео, и эта документация написана с учетом этого.</span><span class="sxs-lookup"><span data-stu-id="7df69-160">**Note** The intention of the ASF file structure and this SDK in general is to produce digital media files containing audio and video, and this documentation is written with that end in mind.</span></span> <span data-ttu-id="7df69-161">Однако структура файлов ASF также будет работать и для других типов содержимого.</span><span class="sxs-lookup"><span data-stu-id="7df69-161">However, the ASF file structure will work for other types of content, too.</span></span> <span data-ttu-id="7df69-162">Вы можете найти множество приложений для файлов ASF, которые не связаны с аудио и видео.</span><span class="sxs-lookup"><span data-stu-id="7df69-162">You may find many applications for ASF files that are not related to audio and video.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7df69-163">См. также</span><span class="sxs-lookup"><span data-stu-id="7df69-163">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7df69-164">**О пакете SDK для формата Windows Media**</span><span class="sxs-lookup"><span data-stu-id="7df69-164">**About the Windows Media Format SDK**</span></span>](about-the-windows-media-format-sdk.md)
</dt> </dl>

 

 




