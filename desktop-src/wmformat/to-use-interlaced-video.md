---
title: Использование чередования видео
description: Использование чередования видео
ms.assetid: cb77bac7-bea8-4f1b-8302-fee9a43d4815
keywords:
- Windows Media Format SDK, видео с чередованием
- Windows Media Format SDK, кодирование видео с чередованием
- Windows Media Format SDK, кодирование видео с чередованием
- Windows Media Format SDK, декодирование видео с чередованием
- Пакет SDK Windows Media Format, порядок полей
- Расширенный формат систем (ASF), видео с чередованием
- ASF (Расширенный системный формат), видео с чередованием
- Расширенный формат систем (ASF), кодирование видео с чередованием
- ASF (Расширенный системный формат), кодирование видео с чередованием
- Расширенный формат систем (ASF), кодирование видео с чередованием
- ASF (Расширенный системный формат), кодирование видео с чередованием
- Расширенный формат систем (ASF), декодирование видео с чередованием
- ASF (Расширенный системный формат), декодирование видео с чередованием
- Расширенный системный формат (ASF), порядок полей
- ASF (Расширенный системный формат), порядок полей
- чередование видео, сведения
- чередование видео, кодирование
- чередование видео, декодирование
- чередование видео, порядок полей
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a093ddd6d9d9487ffcd4b73e1f5c75b849cdcdc1
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/19/2020
ms.locfileid: "103890248"
---
# <a name="to-use-interlaced-video"></a>Использование чередования видео

Существует два основных типа кодирования видео: прогрессивные и чередующиеся. В прогрессивной кодировке каждый кадр представляет собой закодированное представление одного кадра видео. При шифровании с чередованием каждый кадр представляет собой закодированное представление всех четных строк пикселов в видео или всех нечетных строк. Каждый чередующийся кадр называется *полем*, поэтому существуют четные поля и даже поля. Чередующиеся экраны (например, телевизор) отображают поля по одному, чередование полей. Последовательный экран отображает все кадры одновременно.

Кодек расширенного профиля Windows Media Video 9 обеспечивает поддержку сохранения чересстрочную развертки в сжатых потоках.

## <a name="when-to-use-interlaced-video"></a>Когда следует использовать чередование видео

Кодирование видео с чередованием полезно только в том случае, если содержимое отображается на устройстве с чередованием. Содержимое, предназначенное для просмотра на телевизоре (через набор или другое устройство), может потребоваться для чередования. Содержимое, которое предназначено для просмотра исключительно на дисплее компьютера, не должно быть закодировано с чередованием.

Чтобы закодировать видео с чередованием в виде последовательного видео, необходимо настроить входные параметры. Дополнительные сведения см. в статье о [деразвертке видео](to-deinterlace-video.md).

## <a name="field-order"></a>Порядок полей

Большинство источников чередующихся видеороликов, таких как карты видеозаписи, доставляют образцы видео, включающие оба поля, которые чередуются друг с другом. Результат похож на полный кадр видео, за исключением того, что четные и четные линии немного сдвигаются по времени. Не существует универсального стандарта, по которому поле в примере с чередованием видео происходит в первый раз.

Необходимо разрешить пользователям указывать порядок полей при передаче образцов с чередованием в приложение.

## <a name="encoding-interlaced-video"></a>Кодирование видео с чередованием

Чтобы использовать чередование кодирования, выполните следующие действия.

1.  Настройте поток видео в профиле для использования расширения единиц обработки данных типа содержимого, вызвав метод [**IWMStreamConfig2:: адддатаунитекстенсион**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstreamconfig2-adddataunitextension) . Пример GUID расширения для расширения типа содержимого — WM \_ сампликстенсионсгуид \_ ContentType.
2.  Установите поток в профиле и настройте для модуля записи профиль в нормальном режиме.
3.  Прежде чем передавать образцы с чередованием в модуль записи, вызовите метод [**IWMWriterAdvanced2:: сетинпутсеттинг**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmwriteradvanced2-setinputsetting) , чтобы задать \_ для параметра g Всзинтерлацедкодинг input значение **true**.
4.  Для каждого образца с чередованием, передаваемого в модуль записи, вызовите метод [**INSSBuffer3:: SetProperty**](/previous-versions/windows/desktop/api/Wmsbuffer/nf-wmsbuffer-inssbuffer3-setproperty) , чтобы задать тип содержимого. Значения типа содержимого являются комбинациями флагов, приведенных в следующей таблице.



| Flag                         | Описание                                                                                                                                                                                                                                                                                                                                                      |
|------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| с \_ \_ чередованием WM CT           | Всегда устанавливайте этот флаг при кодировании содержимого с чередованием. Если этот флаг используется без установки флага порядка полей (первое поле WM \_ CT \_ \_ \_ First или WM \_ CT \_ Top \_ \_ ), кодек предполагает, что верхнее поле является первым. Если кодек использует неправильный порядок полей, это не должно повлиять на качество изображения, однако эффективность кодирования будет нарушена. |
| \_ \_ \_ сначала следует поле WM CT снизу \_ | В сочетании с \_ \_ флагом с чередованием WM CT этот флаг указывает на то, что нижнее поле (поле, начинающееся со второй строки в образце) сначала выполняется в первый раз.                                                                                                                                                                                          |
| \_ \_ первое поле, расположенное в верхней части WM CT \_ \_    | В сочетании с \_ \_ флагом с чередованием WM CT этот флаг указывает, что верхнее поле (поле, начинающееся с первой строки в образце) будет выполняться первым по времени.                                                                                                                                                                                              |
| \_ \_ \_ первое поле повтора в WM CT \_ | Указывает, что первое поле в образце должно повторяться при воспроизведении. Этот флаг используется для видео, созданного на основе пленки процессом чересстрочности. Если флаг порядка полей не установлен вместе с этим флагом, то верхнее поле считается первым в момент времени.<br/>                                                                             |



 

> [!Note]  
> Если флаг с \_ \_ чередованием WM CT не установлен, предполагается, что образец содержит последовательный видеокадр.

 

## <a name="decoding-interlaced-video"></a>Декодирование видео с чередованием

При декодировании с чередованием видео необходимо задать \_ для параметра g всзалловинтерлацедаутпут значение **true** с помощью метода [**IWMReaderAdvanced2:: сетаутпутсеттинг**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-setoutputsetting) . В противном случае кодек будет доставлять прогрессивные кадры.

Расширение единицы данных типа содержимого поддерживается в выходных образцах. Необходимо передать ориентацию поля на устройство отрисовки, чтобы обеспечить правильное воспроизведение.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Дополнительные разделы**](advanced-topics.md)
</dt> </dl>

 

 





