---
description: Цель распознавания файловой системы заключается в том, чтобы операционная система Windows могла использовать дополнительный параметр для допустимой, но неизвестной файловой системы, отличной от &\# 0034; Необработанный&\# 0034;.
ms.assetid: a5b1e97c-f22a-4d90-a3f4-1589ad9d1cc3
title: Распознавание файловой системы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 457d4146588ba2db2b75d06c7afac10ecb18e87c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105683180"
---
# <a name="file-system-recognition"></a><span data-ttu-id="ecfc2-103">Распознавание файловой системы</span><span class="sxs-lookup"><span data-stu-id="ecfc2-103">File System Recognition</span></span>

<span data-ttu-id="ecfc2-104">Цель распознавания файловой системы заключается в том, чтобы операционная система Windows могла использовать дополнительный параметр для допустимой, но нераспознанной файловой системы, отличной от «RAW».</span><span class="sxs-lookup"><span data-stu-id="ecfc2-104">The goal of file system recognition is to allow the Windows operating system to have an additional option for a valid but unrecognized file system other than "RAW".</span></span> <span data-ttu-id="ecfc2-105">Для этого, начиная с Windows 7 и Windows Server 2008 R2, система определяет фиксированный тип структуры данных, который может быть записан на носитель, где активна технология, которая изменяет формат файловой системы.</span><span class="sxs-lookup"><span data-stu-id="ecfc2-105">To achieve this, beginning with Windows 7 and Windows Server 2008 R2, the system defines a fixed data structure type that can be written to the media on which an enabled technology that alters the file system format is active.</span></span> <span data-ttu-id="ecfc2-106">Эта структура данных, если она есть на логическом секторе сектора диска, будет распознана операционной системой и уведомлять пользователя о том, что носитель содержит допустимую, но нераспознанную файловую систему и не является необработанным томом, если не установлены драйверы для файловой системы.</span><span class="sxs-lookup"><span data-stu-id="ecfc2-106">This data structure, if present on logical disk sector zero, would then be recognized by the operating system and notify the user that the media contains a valid but unrecognized file system and is not a RAW volume if the drivers for the file system are not installed.</span></span>

## <a name="file-system-recognition-features-and-use"></a><span data-ttu-id="ecfc2-107">Функции распознавания файловой системы и их использование</span><span class="sxs-lookup"><span data-stu-id="ecfc2-107">File System Recognition Features and Use</span></span>

<span data-ttu-id="ecfc2-108">Несколько современных технологий хранения изменили формат файловой системы на диске, так что носитель, на котором эти технологии включены, становится нераспознаваемым для более ранних версий Windows из-за наличия драйверов файловой системы, не существующих при выпуске определенной более ранней версии Windows.</span><span class="sxs-lookup"><span data-stu-id="ecfc2-108">Several recent storage technologies have altered the on-disk file system format such that the media on which these technologies are enabled become unrecognizable to earlier versions of Windows due to the file system drivers not existing when a particular earlier version of Windows was released.</span></span> <span data-ttu-id="ecfc2-109">Предыдущим поведением по умолчанию в этом сценарии было следующее.</span><span class="sxs-lookup"><span data-stu-id="ecfc2-109">The previous default behavior in this scenario was as follows.</span></span> <span data-ttu-id="ecfc2-110">Если носитель хранилища не является известной файловой системой, он определяется как RAW, а затем передается в оболочку Windows, где Автозапуск запрашивается с помощью ПОЛЬЗОВАТЕЛЬСКОГО интерфейса формата.</span><span class="sxs-lookup"><span data-stu-id="ecfc2-110">When storage media is not a known file system, it is identified as RAW, and then propagated to the Windows Shell, where Autoplay prompts with the format user interface (UI).</span></span> <span data-ttu-id="ecfc2-111">Распознавание файловой системы может решить эту проблему, если авторы новой файловой системы правильно запишут правильную [**структуру данных**](file-system-recognition-structure.md) на диск.</span><span class="sxs-lookup"><span data-stu-id="ecfc2-111">File system recognition can solve this if the authors of the new file system correctly write the proper [**data structure**](file-system-recognition-structure.md) to the disk.</span></span>

<span data-ttu-id="ecfc2-112">Для достижения целей при распознавании файловой системы используются следующие возможности и уровни в операционной системе:</span><span class="sxs-lookup"><span data-stu-id="ecfc2-112">File system recognition uses the following features and layers within the operating system to achieve its goals:</span></span>

-   <span data-ttu-id="ecfc2-113">Носитель, в котором фиксированная структура данных находится в виде последовательности байтов, размещенной внутри предопределенной структуры, которая называется структурой данных о [**\_ \_ \_ структуре распознавания файловой системы**](file-system-recognition-structure.md) .</span><span class="sxs-lookup"><span data-stu-id="ecfc2-113">Storage media, where a fixed data structure resides as a sequence of bytes arranged internally in a predefined structure called the [**FILE\_SYSTEM\_RECOGNITION\_STRUCTURE**](file-system-recognition-structure.md) data structure.</span></span> <span data-ttu-id="ecfc2-114">Разработчик файловой системы обязан правильно создать эту структуру на диске.</span><span class="sxs-lookup"><span data-stu-id="ecfc2-114">It is the responsibility of the file system developer to create this on-disk structure properly.</span></span>
-   <span data-ttu-id="ecfc2-115">Распознавание файловой системы на уровне приложения достигается за счет использования управляющего кода ввода-вывода для устройства [**фсктл \_ запроса \_ файловой \_ системы \_**](/windows/win32/api/winioctl/ni-winioctl-fsctl_query_file_system_recognition) .</span><span class="sxs-lookup"><span data-stu-id="ecfc2-115">File system recognition at the application level, achieved via the use of the [**FSCTL\_QUERY\_FILE\_SYSTEM\_RECOGNITION**](/windows/win32/api/winioctl/ni-winioctl-fsctl_query_file_system_recognition) device I/O control code.</span></span> <span data-ttu-id="ecfc2-116">Пример использования этого управляющего кода см. в разделе [Получение сведений о распознавании файловой системы](obtaining-file-system-recognition-information.md).</span><span class="sxs-lookup"><span data-stu-id="ecfc2-116">For an example of how to use this control code, see [Obtaining File System Recognition Information](obtaining-file-system-recognition-information.md).</span></span>
-   <span data-ttu-id="ecfc2-117">Код проверки контрольной суммы, сохраненный в структуре данных [**\_ \_ \_ структуры распознавания файловой системы**](file-system-recognition-structure.md) .</span><span class="sxs-lookup"><span data-stu-id="ecfc2-117">Checksum validation code, stored within the [**FILE\_SYSTEM\_RECOGNITION\_STRUCTURE**](file-system-recognition-structure.md) data structure.</span></span> <span data-ttu-id="ecfc2-118">Пример вычисления этой контрольной суммы см. в разделе [Вычисление контрольной суммы распознавания файловой системы](computing-a-file-system-recognition-checksum.md).</span><span class="sxs-lookup"><span data-stu-id="ecfc2-118">For an example of how to compute this checksum, see [Computing a File System Recognition Checksum](computing-a-file-system-recognition-checksum.md).</span></span>
-   <span data-ttu-id="ecfc2-119">Пользовательский интерфейс оболочки Windows использует приведенные выше функции для предоставления более гибкого и надежного автозапуска и соответствующей поддержки нераспознаваемых файловых систем, но может работать только в том случае, если структура данных [**\_ \_ \_ структуры распознавания файловой системы**](file-system-recognition-structure.md) существует в логическом секторе сектора диска.</span><span class="sxs-lookup"><span data-stu-id="ecfc2-119">The Windows Shell UI uses the previously listed features to provide more flexible and robust Autoplay and related support for unrecognized file systems, but it can work only if the [**FILE\_SYSTEM\_RECOGNITION\_STRUCTURE**](file-system-recognition-structure.md) data structure exists in logical disk sector zero.</span></span> <span data-ttu-id="ecfc2-120">Разработчики, реализующие новые файловые системы, должны использовать эту систему, чтобы убедиться в том, что их файловая система не имеет по ошибке значения типа "RAW".</span><span class="sxs-lookup"><span data-stu-id="ecfc2-120">Developers implementing new file systems should utilize this system to ensure that their file system is not mistakenly assumed to be of type "RAW".</span></span>

## <a name="related-topics"></a><span data-ttu-id="ecfc2-121">См. также</span><span class="sxs-lookup"><span data-stu-id="ecfc2-121">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ecfc2-122">Вычисление контрольной суммы распознавания файловой системы</span><span class="sxs-lookup"><span data-stu-id="ecfc2-122">Computing a File System Recognition Checksum</span></span>](computing-a-file-system-recognition-checksum.md)
</dt> <dt>

[<span data-ttu-id="ecfc2-123">Получение сведений о распознавании файловой системы</span><span class="sxs-lookup"><span data-stu-id="ecfc2-123">Obtaining File System Recognition Information</span></span>](obtaining-file-system-recognition-information.md)
</dt> <dt>

[<span data-ttu-id="ecfc2-124">Получение сведений о томе</span><span class="sxs-lookup"><span data-stu-id="ecfc2-124">Obtaining Volume Information</span></span>](obtaining-volume-information.md)
</dt> </dl>

 

 
