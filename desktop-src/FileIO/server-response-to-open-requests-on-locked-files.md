---
description: Вы можете уменьшить влияние приложения на другие клиенты и влияние их на приложение, предоставив максимально возможный общий доступ, запросив минимальный уровень доступа и используя наименее агрессивную оппортунистической блокировку, подходящую для вашего приложения.
ms.assetid: c28b0ae0-0d35-4b59-9f54-87c55ca72716
title: Ответ сервера на открытые запросы к заблокированным файлам
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8d397613f6b54f2b42c26a5674a787b796f5f19e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104542503"
---
# <a name="server-response-to-open-requests-on-locked-files"></a><span data-ttu-id="61266-103">Ответ сервера на открытые запросы к заблокированным файлам</span><span class="sxs-lookup"><span data-stu-id="61266-103">Server Response to Open Requests on Locked Files</span></span>

<span data-ttu-id="61266-104">Жизненный цикл уступающей блокировки включает три отдельных интервала времени.</span><span class="sxs-lookup"><span data-stu-id="61266-104">The life of an opportunistic lock includes three distinct time spans.</span></span> <span data-ttu-id="61266-105">Во время каждой стороны сервер определяет свою реакцию на запрос от клиента на открытие файла, заблокированного другим клиентом.</span><span class="sxs-lookup"><span data-stu-id="61266-105">During each, the server determines by different means its reaction to a request from a client to open a file locked by another client.</span></span> <span data-ttu-id="61266-106">Как правило, можно уменьшить влияние приложения на другие клиенты и влияние их на приложение, предоставив максимально возможный общий доступ, запросив минимальный уровень доступа и используя наименее агрессивную оппортунистической блокировку, подходящую для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="61266-106">In general, you can minimize the impact your application has on other clients and the impact they have on your application by granting as much sharing as possible, requesting the minimum access level necessary, and using the least intrusive opportunistic lock suitable for your application.</span></span>

<span data-ttu-id="61266-107">Первый — это период, после того как сервер откроет файл для клиента, но до того, как он предоставит блокировку.</span><span class="sxs-lookup"><span data-stu-id="61266-107">First is the period after the server opens a file for a client but before it grants a lock.</span></span> <span data-ttu-id="61266-108">В течение этого времени блокировка файла не существует, и сервер зависит от общего доступа, режимов доступа и типа уступающей блокировки, которую вы запрашиваете, чтобы определить реакцию на другой запрос на открытие того же файла.</span><span class="sxs-lookup"><span data-stu-id="61266-108">During this time, no lock exists on the file, and the server depends on sharing, access modes, and the type of opportunistic lock you request to determine its reaction to another request to open the same file.</span></span> <span data-ttu-id="61266-109">Например, если открыть рассматриваемый файл для записи, вы можете запретить предоставление уступающей блокировки, которые разрешают доступ к кэшированию на чтение другим клиентам.</span><span class="sxs-lookup"><span data-stu-id="61266-109">For example, if you open the file in question for write access, you may inhibit granting opportunistic locks that allow read caching access to other clients.</span></span> <span data-ttu-id="61266-110">Период времени, по истечении которого сервер предоставляет блокировку, обычно находится в диапазоне миллисекунд, но может быть длиннее.</span><span class="sxs-lookup"><span data-stu-id="61266-110">The time span before the server grants a lock is typically in the millisecond range but may be longer.</span></span>

<span data-ttu-id="61266-111">После предоставления оппортунистической блокировки сервер проверяет блокировку, чтобы определить реакцию сервера на открытый запрос к заблокированному файлу.</span><span class="sxs-lookup"><span data-stu-id="61266-111">After the opportunistic lock is granted, the server examines the lock to determine server reaction to an open request on a locked file.</span></span> <span data-ttu-id="61266-112">Опять же, как ваше приложение открыло файл и тип блокировки, он влияет на реакцию сервера.</span><span class="sxs-lookup"><span data-stu-id="61266-112">Again, how your application opened the file and the type of lock it holds affects how the server responds.</span></span> <span data-ttu-id="61266-113">Дополнительные сведения о том, как сервер отвечает в каждом случае, см. в разделе [типы уступающей блокировки](types-of-opportunistic-locks.md).</span><span class="sxs-lookup"><span data-stu-id="61266-113">For more information on how the server responds in each case, see [Types of Opportunistic Locks](types-of-opportunistic-locks.md).</span></span>

<span data-ttu-id="61266-114">И наконец, после того, как сервер определит, что блокировка должна быть нарушена (завершена), но до того, как приложение завершит свою реакцию на перерыв.</span><span class="sxs-lookup"><span data-stu-id="61266-114">Finally, there is the span after the server determines that your lock should be broken (ended) but before your application completes its reaction to the break.</span></span> <span data-ttu-id="61266-115">В зависимости от типа блокировки приложение может понизить уровень блокировки до более низкого уровня или вообще не выполнять никаких операций.</span><span class="sxs-lookup"><span data-stu-id="61266-115">Depending on the type of lock, your application can downgrade the lock to a lower level or to none at all.</span></span> <span data-ttu-id="61266-116">Приложение также может закрыть файл и блокировку.</span><span class="sxs-lookup"><span data-stu-id="61266-116">Your application can also close the file and the lock.</span></span> <span data-ttu-id="61266-117">В течение этого времени сервер хранит в абэйанце любые запросы от других клиентов, чтобы открыть ранее заблокированный файл.</span><span class="sxs-lookup"><span data-stu-id="61266-117">During this time, the server holds in abeyance any requests from other clients to open the formerly locked file.</span></span> <span data-ttu-id="61266-118">Этот интервал времени может варьироваться от миллисекунд до десятков секунд.</span><span class="sxs-lookup"><span data-stu-id="61266-118">This time span may range from milliseconds to tens of seconds.</span></span> <span data-ttu-id="61266-119">Дополнительные сведения см. в разделе [разбиение уступающей блокировки](breaking-opportunistic-locks.md).</span><span class="sxs-lookup"><span data-stu-id="61266-119">For more information, see [Breaking Opportunistic Locks](breaking-opportunistic-locks.md).</span></span>

 

 



