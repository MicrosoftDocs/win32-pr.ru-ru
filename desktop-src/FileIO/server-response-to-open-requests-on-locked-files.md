---
description: Вы можете уменьшить влияние приложения на другие клиенты и влияние их на приложение, предоставив максимально возможный общий доступ, запросив минимальный уровень доступа и используя наименее агрессивную оппортунистической блокировку, подходящую для вашего приложения.
ms.assetid: c28b0ae0-0d35-4b59-9f54-87c55ca72716
title: Ответ сервера на открытые запросы к заблокированным файлам
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8d397613f6b54f2b42c26a5674a787b796f5f19e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104542503"
---
# <a name="server-response-to-open-requests-on-locked-files"></a>Ответ сервера на открытые запросы к заблокированным файлам

Жизненный цикл уступающей блокировки включает три отдельных интервала времени. Во время каждой стороны сервер определяет свою реакцию на запрос от клиента на открытие файла, заблокированного другим клиентом. Как правило, можно уменьшить влияние приложения на другие клиенты и влияние их на приложение, предоставив максимально возможный общий доступ, запросив минимальный уровень доступа и используя наименее агрессивную оппортунистической блокировку, подходящую для вашего приложения.

Первый — это период, после того как сервер откроет файл для клиента, но до того, как он предоставит блокировку. В течение этого времени блокировка файла не существует, и сервер зависит от общего доступа, режимов доступа и типа уступающей блокировки, которую вы запрашиваете, чтобы определить реакцию на другой запрос на открытие того же файла. Например, если открыть рассматриваемый файл для записи, вы можете запретить предоставление уступающей блокировки, которые разрешают доступ к кэшированию на чтение другим клиентам. Период времени, по истечении которого сервер предоставляет блокировку, обычно находится в диапазоне миллисекунд, но может быть длиннее.

После предоставления оппортунистической блокировки сервер проверяет блокировку, чтобы определить реакцию сервера на открытый запрос к заблокированному файлу. Опять же, как ваше приложение открыло файл и тип блокировки, он влияет на реакцию сервера. Дополнительные сведения о том, как сервер отвечает в каждом случае, см. в разделе [типы уступающей блокировки](types-of-opportunistic-locks.md).

И наконец, после того, как сервер определит, что блокировка должна быть нарушена (завершена), но до того, как приложение завершит свою реакцию на перерыв. В зависимости от типа блокировки приложение может понизить уровень блокировки до более низкого уровня или вообще не выполнять никаких операций. Приложение также может закрыть файл и блокировку. В течение этого времени сервер хранит в абэйанце любые запросы от других клиентов, чтобы открыть ранее заблокированный файл. Этот интервал времени может варьироваться от миллисекунд до десятков секунд. Дополнительные сведения см. в разделе [разбиение уступающей блокировки](breaking-opportunistic-locks.md).

 

 



