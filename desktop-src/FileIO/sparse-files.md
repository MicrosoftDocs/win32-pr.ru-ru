---
description: Сжатие файлов, содержащих преимущественно нули, эффективно использует место на диске.
ms.assetid: 7326041d-f11e-4b80-ac4e-07173e418ce7
title: Разреженные файлы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 21c282ca89c9dc9e44800a2a7fc969c3f883006b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662531"
---
# <a name="sparse-files"></a>Разреженные файлы

Файл, в котором большая часть данных содержит нули, считается *разреженным набором данных*. Такие файлы обычно очень велики, например файл, содержащий данные изображения для обработки или матрицу в высокоскоростной базе данных. Проблема с файлами, содержащими разреженные наборы данных, заключается в том, что большая часть файла не содержит полезных данных и, по этой причине, это неэффективное использование дискового пространства.

Сжатие файлов в файловой системе NTFS является частичным решением проблемы. Все данные в файле, которые не были записаны явно, явно устанавливаются в ноль. Сжатие файлов сжимает эти диапазоны нулей. Однако недостаток сжатия файлов заключается в том, что время доступа может увеличиться из-за сжатия и распаковки данных.

Поддержка разреженных файлов представлена в файловой системе NTFS другим способом повышения эффективности использования дискового пространства. Если функция разреженных файлов включена, система не выделяет пространство жесткого диска для файла, за исключением регионов, в которых он содержит ненулевые данные. При попытке операции записи, когда большой объем данных в буфере равен нулю, нули не записываются в файл. Вместо этого файловая система создает внутренний список, содержащий расположения нулей в файле, и этот список вызывается во время всех операций чтения. При выполнении операции чтения в областях файла, где были обнаружены нули, файловая система возвращает соответствующее количество нулей в буфере, выделенном для операции чтения. Таким образом, Обслуживание разреженного файла прозрачно для всех процессов, обращающихся к нему, и более эффективно, чем сжатие для этого конкретного сценария.

Значение данных по умолчанию разреженного файла равно нулю. Однако для него можно задать другие значения.

Дополнительные сведения о разреженных файлах см. в следующих разделах.

## <a name="in-this-section"></a>В этом разделе



| Раздел                                                                                     | Описание                                                                                                                                                                                   |
|-------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [Операции с разреженными файлами](sparse-file-operations.md)<br/>                           | Определите, поддерживает ли файловая система разреженные файлы, вызвав функцию Жетволумеинформатион.<br/>                                                                                |
| [Получение размера разреженного файла](obtaining-the-size-of-a-sparse-file.md)<br/> | Получите выделенный размер или общий размер файла с помощью функции [**жеткомпресседфилесизе**](/windows/desktop/api/fileapi/nf-fileapi-getcompressedfilesizea) или [**GetFileSize**](/windows/desktop/api/FileAPI/nf-fileapi-getfilesize) .<br/> |
| [Разреженные файлы и дисковые квоты](sparse-files-and-disk-quota.md)<br/>                | Разреженный файл влияет на квоты пользователей по номинальному размеру файла, а не к фактическому выделенному объему дискового пространства.<br/>                                                                  |



 

 

 




