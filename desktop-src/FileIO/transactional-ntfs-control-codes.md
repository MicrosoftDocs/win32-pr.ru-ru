---
description: Управляющие коды транзакционной NTFS (TxF).
ms.assetid: b66d322a-a971-4219-bb5b-dc69b10b2581
title: Управляющие коды TxF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8ef99a111a32aa5d2a7fd5997a855ce08e595ad6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662381"
---
# <a name="txf-control-codes"></a><span data-ttu-id="449b4-103">Управляющие коды TxF</span><span class="sxs-lookup"><span data-stu-id="449b4-103">TxF Control Codes</span></span>

<span data-ttu-id="449b4-104">\[Корпорация Майкрософт настоятельно рекомендует разработчикам использовать альтернативные средства для достижения потребностей вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="449b4-104">\[Microsoft strongly recommends developers utilize alternative means to achieve your application s needs.</span></span> <span data-ttu-id="449b4-105">Многие сценарии, в которых была разработана система TxF, можно получить с помощью более простых и более быстро доступных методов.</span><span class="sxs-lookup"><span data-stu-id="449b4-105">Many scenarios that TxF was developed for can be achieved through simpler and more readily available techniques.</span></span> <span data-ttu-id="449b4-106">Кроме того, TxF может быть недоступен в будущих версиях Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="449b4-106">Furthermore, TxF may not be available in future versions of Microsoft Windows.</span></span> <span data-ttu-id="449b4-107">Дополнительные сведения и альтернативы TxF см. [в разделе альтернативы использованию транзакционной NTFS](deprecation-of-txf.md).\]</span><span class="sxs-lookup"><span data-stu-id="449b4-107">For more information, and alternatives to TxF, please see [Alternatives to using Transactional NTFS](deprecation-of-txf.md).\]</span></span>

<span data-ttu-id="449b4-108">Транзакционная NTFS (TxF) предоставляет следующие управляющие коды.</span><span class="sxs-lookup"><span data-stu-id="449b4-108">Transactional NTFS (TxF) provides the following control codes.</span></span>

## <a name="in-this-section"></a><span data-ttu-id="449b4-109">Содержание раздела</span><span class="sxs-lookup"><span data-stu-id="449b4-109">In this section</span></span>



| <span data-ttu-id="449b4-110">Контрольный код</span><span class="sxs-lookup"><span data-stu-id="449b4-110">Control Code</span></span>                                                                                                 | <span data-ttu-id="449b4-111">Описание</span><span class="sxs-lookup"><span data-stu-id="449b4-111">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                             |
|--------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="449b4-112">**ФСКТЛ \_ тксфс \_ Create ( \_ мини)**</span><span class="sxs-lookup"><span data-stu-id="449b4-112">**FSCTL\_TXFS\_CREATE\_MINIVERSION**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_create_miniversion)<br/>                         | <span data-ttu-id="449b4-113">Создает новую [мини](glossary.md) -версию для указанного файла.</span><span class="sxs-lookup"><span data-stu-id="449b4-113">Creates a new [miniversion](glossary.md) for the specified file.</span></span> <br/> <span data-ttu-id="449b4-114">Миниверсионс позволяют обращаться к моментальному снимку файла во время транзакции.</span><span class="sxs-lookup"><span data-stu-id="449b4-114">Miniversions allow you to refer to a snapshot of the file during a transaction.</span></span> <span data-ttu-id="449b4-115">Миниверсионс отбрасываются при фиксации или откате транзакции.</span><span class="sxs-lookup"><span data-stu-id="449b4-115">Miniversions are discarded when a transaction is committed or rolled back.</span></span><br/>                                                                                                                                                                      |
| [<span data-ttu-id="449b4-116">**ФСКТЛ \_ тксфс \_ получить \_ \_ сведения о метаданных**</span><span class="sxs-lookup"><span data-stu-id="449b4-116">**FSCTL\_TXFS\_GET\_METADATA\_INFO**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_get_metadata_info)<br/>                          | <span data-ttu-id="449b4-117">Извлекает метаданные транзакционной NTFS (TxF) для файла и **идентификатор GUID** транзакции, которая заблокировала указанный файл (если файл заблокирован).</span><span class="sxs-lookup"><span data-stu-id="449b4-117">Retrieves Transacted NTFS (TxF) metadata for a file and the **GUID** of the transaction that has locked the specified file (if the file is locked).</span></span> <br/>                                                                                                                                                                                                                                                                         |
| [<span data-ttu-id="449b4-118">**ФСКТЛ \_ тксфс \_ получить \_ версию транзакционной транзакции \_**</span><span class="sxs-lookup"><span data-stu-id="449b4-118">**FSCTL\_TXFS\_GET\_TRANSACTED\_VERSION**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_get_transacted_version)<br/>                | <span data-ttu-id="449b4-119">Возвращает структуру [**тксфс \_ получения \_ транзакционной \_ версии**](/windows/desktop/api/WinIoCtl/ns-winioctl-txfs_get_transacted_version) .</span><span class="sxs-lookup"><span data-stu-id="449b4-119">Returns a [**TXFS\_GET\_TRANSACTED\_VERSION**](/windows/desktop/api/WinIoCtl/ns-winioctl-txfs_get_transacted_version) structure.</span></span> <span data-ttu-id="449b4-120">Структура определяет последнюю зафиксированную версию указанного файла, номер версии маркера.</span><span class="sxs-lookup"><span data-stu-id="449b4-120">The structure identifies the most recently committed version of the specified file, the version number of the handle.</span></span> <br/>                                                                                                                                                                                                            |
| [<span data-ttu-id="449b4-121">**ФСКТЛ \_ тксфс \_ список \_ \_ заблокированных \_ файлов транзакций**</span><span class="sxs-lookup"><span data-stu-id="449b4-121">**FSCTL\_TXFS\_LIST\_TRANSACTION\_LOCKED\_FILES**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_list_transaction_locked_files)<br/> | <span data-ttu-id="449b4-122">Возвращает список всех файлов, заблокированных указанной транзакцией в данный момент.</span><span class="sxs-lookup"><span data-stu-id="449b4-122">Returns a list of all files currently locked by the specified transaction.</span></span> <span data-ttu-id="449b4-123">Если возвращаемое значение содержит **\_ больше \_ данных**, возвращается длина буфера, необходимая для хранения полного списка файлов во время этого вызова.</span><span class="sxs-lookup"><span data-stu-id="449b4-123">If the return value is **ERROR\_MORE\_DATA**, it returns the length of the buffer required to hold the complete list of files at the time of this call.</span></span><br/>                                                                                                                                                                                           |
| [<span data-ttu-id="449b4-124">**ФСКТЛ \_ тксфс \_ список \_ транзакций**</span><span class="sxs-lookup"><span data-stu-id="449b4-124">**FSCTL\_TXFS\_LIST\_TRANSACTIONS**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_list_transactions)<br/>                           | <span data-ttu-id="449b4-125">Возвращает список всех транзакций, задействованных в указанном диспетчере ресурсов.</span><span class="sxs-lookup"><span data-stu-id="449b4-125">Returns a list of all the transactions currently involved in the specified resource manager.</span></span><br/>                                                                                                                                                                                                                                                                                                                                 |
| [<span data-ttu-id="449b4-126">**ФСКТЛ \_ тксфс \_ изменить \_ RM**</span><span class="sxs-lookup"><span data-stu-id="449b4-126">**FSCTL\_TXFS\_MODIFY\_RM**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_modify_rm)<br/>                                           | <span data-ttu-id="449b4-127">Задает режим ведения журнала и сведения о параметрах журнала для дополнительного диспетчера ресурсов (RM).</span><span class="sxs-lookup"><span data-stu-id="449b4-127">Sets the log mode and log parameter information for a secondary resource manager (RM).</span></span><br/>                                                                                                                                                                                                                                                                                                                                       |
| [<span data-ttu-id="449b4-128">**ФСКТЛ \_ тксфс \_ запрос \_ \_ сведений об RM**</span><span class="sxs-lookup"><span data-stu-id="449b4-128">**FSCTL\_TXFS\_QUERY\_RM\_INFORMATION**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_query_rm_information)<br/>                    | <span data-ttu-id="449b4-129">Извлекает сведения для диспетчера ресурсов (RM).</span><span class="sxs-lookup"><span data-stu-id="449b4-129">Retrieves information for a resource manager (RM).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                           |
| [<span data-ttu-id="449b4-130">**ФСКТЛ \_ тксфс \_ Чтение \_ сведений о резервной копии \_**</span><span class="sxs-lookup"><span data-stu-id="449b4-130">**FSCTL\_TXFS\_READ\_BACKUP\_INFORMATION**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_read_backup_information)<br/>              | <span data-ttu-id="449b4-131">Возвращает сведения о транзакционной NTFS (TxF) для указанного файла.</span><span class="sxs-lookup"><span data-stu-id="449b4-131">Returns Transactional NTFS (TxF) specific information for the specified file.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="449b4-132">**\_ \_ сведения о фсктл тксфс точки сохранения \_**</span><span class="sxs-lookup"><span data-stu-id="449b4-132">**FSCTL\_TXFS\_SAVEPOINT\_INFORMATION**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_savepoint_information)<br/>                   | <span data-ttu-id="449b4-133">Контрольный код [**фсктл \_ тксфс \_ точка сохранения \_ данных**](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_savepoint_information) управляет установкой, очисткой и откатом к указанной точке сохранения.</span><span class="sxs-lookup"><span data-stu-id="449b4-133">The [**FSCTL\_TXFS\_SAVEPOINT\_INFORMATION**](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_savepoint_information) control code controls setting, clearing, and rolling back to the specified savepoint.</span></span><br/> <span data-ttu-id="449b4-134">Чтобы выполнить эту операцию, вызовите функцию [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) со следующими параметрами.</span><span class="sxs-lookup"><span data-stu-id="449b4-134">To perform this operation, call the [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) function with the following parameters.</span></span><br/>                                                                                                                 |
| [<span data-ttu-id="449b4-135">**\_ \_ активная транзакция фсктл \_ тксфс**</span><span class="sxs-lookup"><span data-stu-id="449b4-135">**FSCTL\_TXFS\_TRANSACTION\_ACTIVE**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_transaction_active)<br/>                         | <span data-ttu-id="449b4-136">Возвращает логическое значение, указывающее, были ли активные транзакции на связанном томе при создании моментального снимка.</span><span class="sxs-lookup"><span data-stu-id="449b4-136">Returns a Boolean value that indicates if there were any transactions active on the associated volume when the snapshot was taken.</span></span> <span data-ttu-id="449b4-137">Этот вызов допустим только для томов моментальных снимков только для чтения.</span><span class="sxs-lookup"><span data-stu-id="449b4-137">This call is only valid for read-only snapshot volumes.</span></span><br/>                                                                                                                                                                                                                                   |
| [<span data-ttu-id="449b4-138">**ФСКТЛ \_ тксфс \_ запись \_ сведений о резервной копии \_**</span><span class="sxs-lookup"><span data-stu-id="449b4-138">**FSCTL\_TXFS\_WRITE\_BACKUP\_INFORMATION**</span></span>](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_write_backup_information)<br/>            | <span data-ttu-id="449b4-139">Записывает сведения о транзакционной NTFS (TxF) в указанный файл.</span><span class="sxs-lookup"><span data-stu-id="449b4-139">Writes Transactional NTFS (TxF) specific information to a specified file.</span></span> <span data-ttu-id="449b4-140">Элемент **buffer** в структуре [**\_ \_ \_ сведений о резервном копировании тксфс**](/windows/desktop/api/WinIoCtl/ns-winioctl-txfs_write_backup_information) должен быть членом **buffer** из [**тксфс \_ Read \_ резервной копии \_ сведения о структуре \_ out**](/windows/desktop/api/WinIoCtl/ns-winioctl-txfs_read_backup_information_out) , возвращаемой [**фсктл \_ тксфс \_ Чтение \_ \_ данных резервной копии**](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_read_backup_information).</span><span class="sxs-lookup"><span data-stu-id="449b4-140">The **Buffer** member of the [**TXFS\_WRITE\_BACKUP\_INFORMATION**](/windows/desktop/api/WinIoCtl/ns-winioctl-txfs_write_backup_information) structure must be the **Buffer** member of the [**TXFS\_READ\_BACKUP\_INFORMATION\_OUT**](/windows/desktop/api/WinIoCtl/ns-winioctl-txfs_read_backup_information_out) structure returned by [**FSCTL\_TXFS\_READ\_BACKUP\_INFORMATION**](/windows/win32/api/winioctl/ni-winioctl-fsctl_txfs_read_backup_information).</span></span><br/> |



 

 

