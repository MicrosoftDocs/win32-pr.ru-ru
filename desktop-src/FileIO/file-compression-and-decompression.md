---
description: Файловая система NTFS использует сжатие Lempel-Ziv, которое представляет собой алгоритм сжатия без потерь.
ms.assetid: 35a9fb47-5a73-479c-8fe0-5a2b07705536
title: Сжатие и распаковка файлов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 73d1aa9d8d3540eff85413c03358fd1ba7e21300
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105684376"
---
# <a name="file-compression-and-decompression"></a><span data-ttu-id="1341b-103">Сжатие и распаковка файлов</span><span class="sxs-lookup"><span data-stu-id="1341b-103">File Compression and Decompression</span></span>

<span data-ttu-id="1341b-104">Тома файловой системы NTFS поддерживают сжатие файлов отдельно для отдельных файлов.</span><span class="sxs-lookup"><span data-stu-id="1341b-104">The NTFS file system volumes support file compression on an individual file basis.</span></span> <span data-ttu-id="1341b-105">Алгоритм сжатия файлов, используемый файловой системой NTFS, Lempel-Ziv сжатия.</span><span class="sxs-lookup"><span data-stu-id="1341b-105">The file compression algorithm used by the NTFS file system is Lempel-Ziv compression.</span></span> <span data-ttu-id="1341b-106">Это алгоритм сжатия *без потерь* , который означает, что при сжатии и распаковке файла данные не теряются, в отличие от таких алгоритмов *СЖАТИЯ,* как JPEG, при каждом потере данных при каждом сжатии и распаковке данных.</span><span class="sxs-lookup"><span data-stu-id="1341b-106">This is a *lossless* compression algorithm, which means that no data is lost when compressing and decompressing the file, as opposed to *lossy* compression algorithms such as JPEG, where some data is lost each time data compression and decompression occur.</span></span>

<span data-ttu-id="1341b-107">Сжатие данных сокращает размер файла за счет минимизации избыточных данных.</span><span class="sxs-lookup"><span data-stu-id="1341b-107">Data compression reduces the size of a file by minimizing redundant data.</span></span> <span data-ttu-id="1341b-108">В текстовом файле избыточные данные могут часто возникать в таких символах, как символ пробела или обычные гласные, например буквы e и a; Она также может часто возникать в символьных строках.</span><span class="sxs-lookup"><span data-stu-id="1341b-108">In a text file, redundant data can be frequently occurring characters, such as the space character, or common vowels, such as the letters e and a; it can also be frequently occurring character strings.</span></span> <span data-ttu-id="1341b-109">Сжатие данных создает сжатую версию файла путем минимизации избыточных данных.</span><span class="sxs-lookup"><span data-stu-id="1341b-109">Data compression creates a compressed version of a file by minimizing this redundant data.</span></span>

<span data-ttu-id="1341b-110">Каждый тип алгоритма сжатия данных уменьшает избыточные данные уникальным образом.</span><span class="sxs-lookup"><span data-stu-id="1341b-110">Each type of data-compression algorithm minimizes redundant data in a unique manner.</span></span> <span data-ttu-id="1341b-111">Например, *алгоритм шифрования Хаффмана* назначает код символам в файле в зависимости от того, как часто встречаются эти символы.</span><span class="sxs-lookup"><span data-stu-id="1341b-111">For example, the *Huffman encoding algorithm* assigns a code to characters in a file based on how frequently those characters occur.</span></span> <span data-ttu-id="1341b-112">Другой алгоритм сжатия, называемый *кодированием длины выполнения*, формирует значение из двух частей для повторяющихся символов: первая часть указывает количество повторов символа, а вторая часть определяет символ.</span><span class="sxs-lookup"><span data-stu-id="1341b-112">Another compression algorithm, called *run-length encoding*, generates a two-part value for repeated characters: the first part specifies the number of times the character is repeated, and the second part identifies the character.</span></span> <span data-ttu-id="1341b-113">Другой алгоритм сжатия, известный как *Алгоритм Лемпеля-Зив*, преобразует строки переменной длины в коды фиксированной длины, которые потребляют меньше пространства, чем исходные строки.</span><span class="sxs-lookup"><span data-stu-id="1341b-113">Another compression algorithm, known as the *Lempel-Ziv algorithm*, converts variable-length strings into fixed-length codes that consume less space than the original strings.</span></span>

## <a name="the-ntfs-file-system-file-compression"></a><span data-ttu-id="1341b-114">Сжатие файлов файловой системы NTFS</span><span class="sxs-lookup"><span data-stu-id="1341b-114">The NTFS File System File Compression</span></span>

<span data-ttu-id="1341b-115">В файловой системе NTFS сжатие выполняется прозрачно.</span><span class="sxs-lookup"><span data-stu-id="1341b-115">On the NTFS file system, compression is performed transparently.</span></span> <span data-ttu-id="1341b-116">Это означает, что его можно использовать без внесения изменений в существующие приложения.</span><span class="sxs-lookup"><span data-stu-id="1341b-116">This means it can be used without requiring changes to existing applications.</span></span> <span data-ttu-id="1341b-117">Сжатые байты файла недоступны для приложений; они видят только несжатые данные.</span><span class="sxs-lookup"><span data-stu-id="1341b-117">The compressed bytes of the file are not accessible to applications; they see only the uncompressed data.</span></span> <span data-ttu-id="1341b-118">Таким образом, приложения, которые открывают сжатый файл, могут обрабатываться так, как будто они не были сжаты.</span><span class="sxs-lookup"><span data-stu-id="1341b-118">Therefore, applications that open a compressed file can operate on it as if it were not compressed.</span></span> <span data-ttu-id="1341b-119">Однако эти файлы не могут быть скопированы в другую файловую систему.</span><span class="sxs-lookup"><span data-stu-id="1341b-119">However, these files cannot be copied to another file system.</span></span>

<span data-ttu-id="1341b-120">При сжатии файла, размер которого превышает 30 гигабайт, сжатие может не выполняться.</span><span class="sxs-lookup"><span data-stu-id="1341b-120">If you compress a file that is larger than 30 gigabytes, the compression may not succeed.</span></span>

<span data-ttu-id="1341b-121">В следующих разделах определяется сжатие файлов файловой системы NTFS.</span><span class="sxs-lookup"><span data-stu-id="1341b-121">The following topics identify the NTFS file system file compression:</span></span>

-   [<span data-ttu-id="1341b-122">Атрибут Compression</span><span class="sxs-lookup"><span data-stu-id="1341b-122">Compression Attribute</span></span>](compression-attribute.md)
-   [<span data-ttu-id="1341b-123">Состояние сжатия</span><span class="sxs-lookup"><span data-stu-id="1341b-123">Compression State</span></span>](compression-state.md)
-   [<span data-ttu-id="1341b-124">Получение размера сжатого файла</span><span class="sxs-lookup"><span data-stu-id="1341b-124">Obtaining the Size of a Compressed File</span></span>](obtaining-the-size-of-a-compressed-file.md)

## <a name="file-compression-and-decompression-libraries"></a><span data-ttu-id="1341b-125">Библиотеки сжатия и распаковки файлов</span><span class="sxs-lookup"><span data-stu-id="1341b-125">File Compression and Decompression Libraries</span></span>

<span data-ttu-id="1341b-126">Библиотеки сжатия и распаковки файлов принимают существующий файл или файлы и создают файл или файлы, которые являются сжатыми версиями исходных файлов.</span><span class="sxs-lookup"><span data-stu-id="1341b-126">The file compression and decompression libraries take an existing file or files and produce a file or files that are compressed versions of the originals.</span></span> <span data-ttu-id="1341b-127">Сжатие также осуществляется без потерь, но сжатие не прозрачно для приложений.</span><span class="sxs-lookup"><span data-stu-id="1341b-127">The compression is also lossless, but the compression is not transparent to applications.</span></span> <span data-ttu-id="1341b-128">Приложение может обрабатываться только для таких файлов с помощью библиотеки сжатия файлов.</span><span class="sxs-lookup"><span data-stu-id="1341b-128">An application can only operate on such files with the assistance of a file compression library.</span></span> <span data-ttu-id="1341b-129">Кроме того, единственные операции, которые можно выполнять с такими файлами, — это создание сжатого файла из оригинала и восстановление исходных данных из распакованной версии.</span><span class="sxs-lookup"><span data-stu-id="1341b-129">In addition, the only operations you can perform on such files are creating a compressed file from an original and recovering the original data from the decompressed version.</span></span> <span data-ttu-id="1341b-130">Редактирование обычно не поддерживается, и поиск ограничен, если он поддерживается.</span><span class="sxs-lookup"><span data-stu-id="1341b-130">Editing is typically not supported, and seeking is limited if supported at all.</span></span>

<span data-ttu-id="1341b-131">Как правило, приложение вызывает функции в Lz32.dll для распаковки данных, сжатых с помощью Compress.exe.</span><span class="sxs-lookup"><span data-stu-id="1341b-131">Typically, an application calls functions in Lz32.dll to decompress data that was compressed using Compress.exe.</span></span> <span data-ttu-id="1341b-132">Функции также могут обрабатывать файлы без попытки их распаковки.</span><span class="sxs-lookup"><span data-stu-id="1341b-132">The functions can also process files without attempting to decompress them.</span></span>

<span data-ttu-id="1341b-133">Функции в Lz32.dll можно использовать для распаковки одного или нескольких файлов.</span><span class="sxs-lookup"><span data-stu-id="1341b-133">You can use the functions in Lz32.dll to decompress single or multiple files.</span></span> <span data-ttu-id="1341b-134">Их также можно использовать для распаковки сжатых файлов в части за раз.</span><span class="sxs-lookup"><span data-stu-id="1341b-134">You can also use them to decompress compressed files a portion at a time.</span></span>

<span data-ttu-id="1341b-135">В следующих разделах определяется распаковка файлов, предоставляемых функциями в Lz32.dll:</span><span class="sxs-lookup"><span data-stu-id="1341b-135">The following topics identify the file decompression that is provided by the functions in Lz32.dll:</span></span>

-   [<span data-ttu-id="1341b-136">Распаковка одного файла</span><span class="sxs-lookup"><span data-stu-id="1341b-136">Decompressing a single file</span></span>](decompressing-a-single-file.md)
-   [<span data-ttu-id="1341b-137">Распаковка нескольких файлов</span><span class="sxs-lookup"><span data-stu-id="1341b-137">Decompressing multiple files</span></span>](decompressing-multiple-files.md)
-   [<span data-ttu-id="1341b-138">Чтение из сжатых файлов</span><span class="sxs-lookup"><span data-stu-id="1341b-138">Reading from compressed files</span></span>](reading-from-compressed-files.md)

## <a name="cabinets"></a><span data-ttu-id="1341b-139">Ящик</span><span class="sxs-lookup"><span data-stu-id="1341b-139">Cabinets</span></span>

<span data-ttu-id="1341b-140">Ящики создаются библиотекой сжатия, которая поддерживает такие функции, как объединение дисков и сжатие нескольких файлов.</span><span class="sxs-lookup"><span data-stu-id="1341b-140">Cabinets are created by a compression library that supports features such as disk spanning and multi-file compression.</span></span> <span data-ttu-id="1341b-141">Дополнительные сведения см. в пакете CAB-программного пакета SDK: [https://msdn.microsoft.com/library/dncabsdk/html/cabdl.asp](/previous-versions/ms974336(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="1341b-141">For additional information, see the Cabinet Software Development Kit: [https://msdn.microsoft.com/library/dncabsdk/html/cabdl.asp](/previous-versions/ms974336(v=msdn.10)).</span></span>

## <a name="in-this-section"></a><span data-ttu-id="1341b-142">В этом разделе</span><span class="sxs-lookup"><span data-stu-id="1341b-142">In this section</span></span>



| <span data-ttu-id="1341b-143">Раздел</span><span class="sxs-lookup"><span data-stu-id="1341b-143">Topic</span></span>                                                                                             | <span data-ttu-id="1341b-144">Описание</span><span class="sxs-lookup"><span data-stu-id="1341b-144">Description</span></span>                                                                                                                              |
|---------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="1341b-145">Атрибут Compression</span><span class="sxs-lookup"><span data-stu-id="1341b-145">Compression Attribute</span></span>](compression-attribute.md)<br/>                                     | <span data-ttu-id="1341b-146">На томе файловой системы NTFS каждый файл и каталог имеет *атрибут сжатия*.</span><span class="sxs-lookup"><span data-stu-id="1341b-146">On an NTFS file system volume, each file and directory has a *compression attribute*.</span></span><br/>                                         |
| [<span data-ttu-id="1341b-147">Состояние сжатия</span><span class="sxs-lookup"><span data-stu-id="1341b-147">Compression State</span></span>](compression-state.md)<br/>                                             | <span data-ttu-id="1341b-148">Каждый файл и каталог на томе, который поддерживает сжатие для отдельных файлов и каталогов, имеет *состояние сжатия*.</span><span class="sxs-lookup"><span data-stu-id="1341b-148">Each file and directory on a volume that supports compression for individual files and directories has a *compression state*.</span></span><br/> |
| [<span data-ttu-id="1341b-149">Получение размера сжатого файла</span><span class="sxs-lookup"><span data-stu-id="1341b-149">Obtaining the Size of a Compressed File</span></span>](obtaining-the-size-of-a-compressed-file.md)<br/> | <span data-ttu-id="1341b-150">Чтобы получить сжатый размер файла, используйте функцию Жеткомпресседфилесизе.</span><span class="sxs-lookup"><span data-stu-id="1341b-150">To obtain the compressed size of a file use the GetCompressedFileSize function.</span></span><br/>                                               |
| [<span data-ttu-id="1341b-151">Распаковка одного файла</span><span class="sxs-lookup"><span data-stu-id="1341b-151">Decompressing a Single File</span></span>](decompressing-a-single-file.md)<br/>                         | <span data-ttu-id="1341b-152">Приложение может распаковать один сжатый файл с помощью функций Лзопенфиле, Лзкопи и Лзклосе.</span><span class="sxs-lookup"><span data-stu-id="1341b-152">An application can decompress a single compressed file by using the LZOpenFile, LZCopy, and LZClose functions.</span></span><br/>                |
| [<span data-ttu-id="1341b-153">Распаковка нескольких файлов</span><span class="sxs-lookup"><span data-stu-id="1341b-153">Decompressing Multiple Files</span></span>](decompressing-multiple-files.md)<br/>                       | <span data-ttu-id="1341b-154">Приложение может распаковать несколько файлов с помощью функций Лзопенфиле, Лзкопи и Лзклосе.</span><span class="sxs-lookup"><span data-stu-id="1341b-154">An application can decompress multiple files by using the LZOpenFile, LZCopy, and LZClose functions.</span></span><br/>                          |
| [<span data-ttu-id="1341b-155">Чтение из сжатых файлов</span><span class="sxs-lookup"><span data-stu-id="1341b-155">Reading from Compressed Files</span></span>](reading-from-compressed-files.md)<br/>                     | <span data-ttu-id="1341b-156">Приложение может распаковать сжатый файл в части за раз с помощью функций Лзсик и Лзреад.</span><span class="sxs-lookup"><span data-stu-id="1341b-156">An application can decompress a compressed file a portion at a time by using the LZSeek and LZRead functions.</span></span><br/>                 |



 

 

