---
description: Имя устройства MS-DOS — это соединение, которое указывает на путь к устройству MS-DOS. Эти соединения составляют пространство имен устройств MS-DOS.
ms.assetid: 7d802e9f-dc09-4e3d-b064-e9b57af396e2
title: Определение имени устройства MS-DOS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7ed89e1d9938e320ecce3ff0b35b8ae0792fe219
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105683185"
---
# <a name="defining-an-ms-dos-device-name"></a><span data-ttu-id="6dbfa-104">Определение имени устройства MS-DOS</span><span class="sxs-lookup"><span data-stu-id="6dbfa-104">Defining an MS-DOS Device Name</span></span>

<span data-ttu-id="6dbfa-105">Имя устройства MS-DOS — это соединение, которое указывает на путь к устройству MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-105">An MS-DOS device name is a junction that points to the path of an MS-DOS device.</span></span> <span data-ttu-id="6dbfa-106">Эти соединения составляют пространство имен устройств MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-106">These junctions make up the MS-DOS device namespace.</span></span> <span data-ttu-id="6dbfa-107">Вызовите функции [**дефинедосдевице**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) и [**сетволумемаунтпоинт**](/windows/desktop/api/WinBase/nf-winbase-setvolumemountpointa) , чтобы создать и изменить эти соединения.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-107">Call the [**DefineDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) and [**SetVolumeMountPoint**](/windows/desktop/api/WinBase/nf-winbase-setvolumemountpointa) functions to create and modify these junctions.</span></span> <span data-ttu-id="6dbfa-108">[**Делетеволумемаунтпоинт**](/windows/desktop/api/FileAPI/nf-fileapi-deletevolumemountpointw) удаляет соединение, созданное **Сетволумемаунтпоинт**, а **дефинедосдевице** удаляет точки соединения, которые он создает.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-108">[**DeleteVolumeMountPoint**](/windows/desktop/api/FileAPI/nf-fileapi-deletevolumemountpointw) deletes a junction created by **SetVolumeMountPoint**, and **DefineDosDevice** deletes junctions it creates.</span></span>

<span data-ttu-id="6dbfa-109">После определения имени устройства MS-DOS оно остается видимым для всех процессов.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-109">After an MS-DOS device name is defined, it remains visible to all processes.</span></span>

-   <span data-ttu-id="6dbfa-110">Все устройства MS-DOS идентифицируются Windows по ИДЕНТИФИКАТОРу проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-110">All MS-DOS devices are identified by Windows through an authentication ID.</span></span> <span data-ttu-id="6dbfa-111">Идентификатор проверки подлинности — это LUID (локально уникальный идентификатор), связанный с каждым сеансом входа при создании.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-111">An authentication ID is the LUID (locally unique identifier) associated with each logon session when created.</span></span>
-   <span data-ttu-id="6dbfa-112">Видимость имени устройства MS-DOS классифицируется как глобальная или локальная, и она определяется в соответствии с его включением в глобальные пространства имен MS-DOS и локальных устройств MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-112">The visibility of an MS-DOS device name is categorized as either global or local, and is defined as such by its inclusion in the Global MS-DOS Device and Local MS-DOS Device namespaces.</span></span> <span data-ttu-id="6dbfa-113">Доступ к содержимому устройств MS-DOS в глобальном пространстве имен может осуществляться всеми пользователями, а содержимое устройств MS-DOS в локальном пространстве имен доступно только пользователю, маркер доступа которого содержит Аусентикатионид, связанный с локальным пространством имен MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-113">The contents of MS-DOS devices in the Global namespace can be accessed by all users, and the contents of MS-DOS devices in the Local namespace can be accessed only by the user whose access token contains the AuthenticationID associated with that Local MS-DOS device namespace.</span></span>

<span data-ttu-id="6dbfa-114">Несколько пространств имен локальных устройств MS-DOS и только одно глобальное пространство имен устройств MS-DOS могут существовать одновременно и на одном компьютере.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-114">Multiple Local MS-DOS Device namespaces and only one Global MS-DOS Device namespace may exist at one time and on one machine.</span></span>

<span data-ttu-id="6dbfa-115">Обратите внимание, что только процессы, выполняемые в контексте LocalSystem, могут вызывать [**дефинедосдевице**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) для создания устройства MS-DOS в глобальном пространстве имен MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-115">Note that only processes running in the LocalSystem context can call [**DefineDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) to create an MS-DOS device in the Global MS-DOS device namespace.</span></span> <span data-ttu-id="6dbfa-116">Кроме того, при удалении последней ссылки на этот Аусентикатионид будет удалено пространство имен локального устройства MS-DOS, соответствующее определенному Аусентикатионид.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-116">Also, the Local MS-DOS device namespace corresponding to a specific AuthenticationID is deleted when the last reference to that AuthenticationID is removed.</span></span>

<span data-ttu-id="6dbfa-117">Когда код запрашивает существующее имя устройства MS-DOS, вызывая [**куеридосдевице**](/windows/desktop/api/FileAPI/nf-fileapi-querydosdevicew), он сначала ищет локальное пространство имен MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-117">When your code queries an existing MS-DOS device name by calling [**QueryDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-querydosdevicew), it first searches the Local MS-DOS Device namespace.</span></span> <span data-ttu-id="6dbfa-118">Если он не найден, функция будет искать глобальное пространство имен устройств MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-118">If it is not found there, the function will then search the Global MS-DOS Device namespace.</span></span> <span data-ttu-id="6dbfa-119">Когда код запрашивает все существующие имена устройств MS-DOS с помощью этой функции, список возвращаемых имен зависит от того, выполняется ли он в контексте LocalSystem.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-119">When your code queries all existing MS-DOS device names through this function, the list of names that are returned is dependent on whether it is running in the LocalSystem context.</span></span> <span data-ttu-id="6dbfa-120">Если да, то будут возвращены только имена устройств MS-DOS, входящие в глобальное пространство имен устройств MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-120">If so, only the MS-DOS device names included in the Global MS-DOS Device namespace will be returned.</span></span> <span data-ttu-id="6dbfa-121">В противном случае будет возвращено объединение имен устройств в пространствах имен глобальных и локальных устройств MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-121">If not, a concatenation of the device names in the Global and Local MS-DOS Device namespaces will be returned.</span></span> <span data-ttu-id="6dbfa-122">Если имя устройства существует в обоих пространствах имен, **куеридосдевице** будет возвращать запись в локальном пространстве имен MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-122">If a device name exists in both namespaces, **QueryDosDevice** will return the entry in the Local MS-DOS Device namespace.</span></span> <span data-ttu-id="6dbfa-123">Это также относится к списку всех имен устройств MS-DOS, возвращенных [**жетлогикалдривес**](/windows/desktop/api/FileAPI/nf-fileapi-getlogicaldrives) и [**жетлогикалдривестрингс**](/windows/desktop/api/FileAPI/nf-fileapi-getlogicaldrivestringsw).</span><span class="sxs-lookup"><span data-stu-id="6dbfa-123">This also applies to the list of all MS-DOS device names returned by [**GetLogicalDrives**](/windows/desktop/api/FileAPI/nf-fileapi-getlogicaldrives) and [**GetLogicalDriveStrings**](/windows/desktop/api/FileAPI/nf-fileapi-getlogicaldrivestringsw).</span></span>

<span data-ttu-id="6dbfa-124">Обратите внимание, что может возникнуть следующий сценарий:</span><span class="sxs-lookup"><span data-stu-id="6dbfa-124">Note that the following scenario may occur:</span></span>

1.  <span data-ttu-id="6dbfa-125">Пользователь а, который не работает в контексте LocalSystem, создает имя устройства в соответствующем локальном пространстве имен MS-DOS, а имя этого устройства не существует в глобальном пространстве имен MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-125">User A, who is not running within the LocalSystem context, creates a device name in the corresponding Local MS-DOS Device namespace, and that device name does not exist in the Global MS-DOS Device namespace.</span></span>
2.  <span data-ttu-id="6dbfa-126">Пользователь б, работающий в контексте LocalSystem, создает то же имя устройства в глобальном пространстве имен MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-126">User B, who is running within the LocalSystem context, creates the same device name in the Global MS-DOS Device namespace.</span></span>

<span data-ttu-id="6dbfa-127">В этом случае пользователь A не будет иметь доступа к имени устройства в глобальном пространстве имен MS-DOS, пока он не удалит или не переименует имя устройства в свое локальное пространство имен MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-127">In this scenario, User A will not have access to the device name in the Global MS-DOS Device namespace until he or she removes or renames the device name in his or her Local MS-DOS Device namespace.</span></span> <span data-ttu-id="6dbfa-128">Чтобы уменьшить вероятность возникновения этого сценария, следует выделить буквы диска MS-DOS в глобальном пространстве имен MS-DOS, начиная с C: и заканчивая Z:.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-128">To reduce the likelihood of this scenario occurring, MS-DOS drive letters should be allocated in the Global MS-DOS Device namespace starting with C: and ending with Z:.</span></span> <span data-ttu-id="6dbfa-129">Эта последовательность должна быть отменена для выделения букв диска MS-DOS в локальном пространстве имен MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-129">This sequence should be reversed for the allocation of MS-DOS drive letters in the Local MS-DOS Device namespace.</span></span>

<span data-ttu-id="6dbfa-130">Если вы не работаете в контексте LocalSystem, [**дефинедосдевице**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) не позволит вам определить имя устройства в локальном пространстве имен MS-DOS, если такое имя устройства уже существует в локальном или глобальном пространстве имен MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-130">If you are not running within the LocalSystem context, [**DefineDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-definedosdevicew) will not allow you to define a device name in the Local MS-DOS Device namespace if that device name already exists in your Local or Global MS-DOS Device namespaces.</span></span> <span data-ttu-id="6dbfa-131">Вызовите метод [**куеридосдевице**](/windows/desktop/api/FileAPI/nf-fileapi-querydosdevicew) перед вызовом **дефинедосдевице** , чтобы определить, существует ли имя устройства, которое вы хотите определить, в пространствах имен устройства MS-DOS.</span><span class="sxs-lookup"><span data-stu-id="6dbfa-131">Call [**QueryDosDevice**](/windows/desktop/api/FileAPI/nf-fileapi-querydosdevicew) before calling **DefineDosDevice** to determine whether the device name you intend to define exists in your MS-DOS Device namespaces.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6dbfa-132">См. также</span><span class="sxs-lookup"><span data-stu-id="6dbfa-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6dbfa-133">Именование файлов, путей и пространств имен</span><span class="sxs-lookup"><span data-stu-id="6dbfa-133">Naming Files, Paths, and Namespaces</span></span>](naming-a-file.md)
</dt> </dl>

 

 



