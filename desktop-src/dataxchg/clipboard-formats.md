---
title: Форматы буфера обмена
description: Окно может поместить в буфер обмена несколько объектов, каждый из которых представляет одни и те же данные в другом формате буфера обмена. Пользователям не нужно знать форматы буфера обмена, используемые для объекта в буфере обмена.
ms.assetid: fe42baec-6b00-4816-b379-7f335da8a197
keywords:
- буфер обмена, форматы
- буфер обмена, Windows
- буфер обмена, стандартные форматы
- буфер обмена, зарегистрированные форматы
- буфер обмена, синтезированные форматы
- стандартные форматы буфера обмена
- зарегистрированные форматы буфера обмена
- форматы синтезированного буфера обмена
- форматы облачного буфера обмена
- форматы журнала буфера обмена
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 193ee4cc10c17846d974e50b17a464207026280b
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "105710343"
---
# <a name="clipboard-formats"></a><span data-ttu-id="0681f-114">Форматы буфера обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-114">Clipboard Formats</span></span>

<span data-ttu-id="0681f-115">Окно может поместить в буфер обмена несколько объектов, каждый из которых представляет одни и те же данные в другом формате буфера обмена.</span><span class="sxs-lookup"><span data-stu-id="0681f-115">A window can place more than one object on the clipboard, each representing the same information in a different clipboard format.</span></span> <span data-ttu-id="0681f-116">Пользователям не нужно знать форматы буфера обмена, используемые для объекта в буфере обмена.</span><span class="sxs-lookup"><span data-stu-id="0681f-116">Users need not be aware of the clipboard formats used for an object on the clipboard.</span></span>

<span data-ttu-id="0681f-117">В следующих разделах описываются форматы буфера обмена.</span><span class="sxs-lookup"><span data-stu-id="0681f-117">The following topics describe the clipboard formats.</span></span>

-   [<span data-ttu-id="0681f-118">Стандартные форматы буфера обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-118">Standard Clipboard Formats</span></span>](#standard-clipboard-formats)
-   [<span data-ttu-id="0681f-119">Зарегистрированные форматы буфера обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-119">Registered Clipboard Formats</span></span>](#registered-clipboard-formats)
-   [<span data-ttu-id="0681f-120">Форматы частных буферов обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-120">Private Clipboard Formats</span></span>](#private-clipboard-formats)
-   [<span data-ttu-id="0681f-121">Несколько форматов буфера обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-121">Multiple Clipboard Formats</span></span>](#multiple-clipboard-formats)
-   [<span data-ttu-id="0681f-122">Форматы синтезированного буфера обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-122">Synthesized Clipboard Formats</span></span>](#synthesized-clipboard-formats)
-   [<span data-ttu-id="0681f-123">Форматы журнала облачного буфера обмена и буфера обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-123">Cloud Clipboard and Clipboard History Formats</span></span>](#cloud-clipboard-and-clipboard-history-formats)

## <a name="standard-clipboard-formats"></a><span data-ttu-id="0681f-124">Стандартные форматы буфера обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-124">Standard Clipboard Formats</span></span>

<span data-ttu-id="0681f-125">Форматы буфера обмена, определенные системой, называются *стандартными форматами буфера обмена*.</span><span class="sxs-lookup"><span data-stu-id="0681f-125">The clipboard formats defined by the system are called *standard clipboard formats*.</span></span> <span data-ttu-id="0681f-126">Эти форматы буфера обмена описаны в [**стандартных форматах буфера обмена**](standard-clipboard-formats.md).</span><span class="sxs-lookup"><span data-stu-id="0681f-126">These clipboard formats are described in [**Standard Clipboard Formats**](standard-clipboard-formats.md).</span></span>

## <a name="registered-clipboard-formats"></a><span data-ttu-id="0681f-127">Зарегистрированные форматы буфера обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-127">Registered Clipboard Formats</span></span>

<span data-ttu-id="0681f-128">Многие приложения работают с данными, которые не могут быть преобразованы в стандартный формат буфера обмена без потери информации.</span><span class="sxs-lookup"><span data-stu-id="0681f-128">Many applications work with data that cannot be translated into a standard clipboard format without loss of information.</span></span> <span data-ttu-id="0681f-129">Эти приложения могут создавать собственные форматы буфера обмена.</span><span class="sxs-lookup"><span data-stu-id="0681f-129">These applications can create their own clipboard formats.</span></span> <span data-ttu-id="0681f-130">Формат буфера обмена, определенный приложением, называется [зарегистрированным форматом буфера обмена](#registered-clipboard-formats).</span><span class="sxs-lookup"><span data-stu-id="0681f-130">A clipboard format that is defined by an application, is called a [registered clipboard format](#registered-clipboard-formats).</span></span> <span data-ttu-id="0681f-131">Например, если приложение обработки текста скопировало форматированный текст в буфер обмена, используя стандартный текстовый формат, сведения о форматировании будут потеряны.</span><span class="sxs-lookup"><span data-stu-id="0681f-131">For example, if a word-processing application copied formatted text to the clipboard using a standard text format, the formatting information would be lost.</span></span> <span data-ttu-id="0681f-132">Решением будет зарегистрировать новый формат буфера обмена, например RTF.</span><span class="sxs-lookup"><span data-stu-id="0681f-132">The solution would be to register a new clipboard format, such as Rich Text Format (RTF).</span></span>

<span data-ttu-id="0681f-133">Чтобы зарегистрировать новый формат буфера обмена, используйте функцию [**регистерклипбоардформат**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata) .</span><span class="sxs-lookup"><span data-stu-id="0681f-133">To register a new clipboard format, use the [**RegisterClipboardFormat**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata) function.</span></span> <span data-ttu-id="0681f-134">Эта функция принимает имя формата и возвращает целочисленное значение без знака, представляющее зарегистрированный формат буфера обмена.</span><span class="sxs-lookup"><span data-stu-id="0681f-134">This function takes the name of the format and returns an unsigned integer value that represents the registered clipboard format.</span></span> <span data-ttu-id="0681f-135">Чтобы получить имя зарегистрированного формата буфера обмена, передайте в функцию [**жетклипбоардформатнаме**](/windows/desktop/api/Winuser/nf-winuser-getclipboardformatnamea) целочисленное значение без знака.</span><span class="sxs-lookup"><span data-stu-id="0681f-135">To retrieve the name of the registered clipboard format, pass the unsigned integer value to the [**GetClipboardFormatName**](/windows/desktop/api/Winuser/nf-winuser-getclipboardformatnamea) function.</span></span>

<span data-ttu-id="0681f-136">Если несколько приложений регистрируют формат буфера обмена с точно тем же именем, формат буфера обмена регистрируется только один раз.</span><span class="sxs-lookup"><span data-stu-id="0681f-136">If more than one application registers a clipboard format with exactly the same name, the clipboard format is registered only once.</span></span> <span data-ttu-id="0681f-137">Оба вызова функции [**регистерклипбоардформат**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata) возвращают одно и то же значение.</span><span class="sxs-lookup"><span data-stu-id="0681f-137">Both calls to the [**RegisterClipboardFormat**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata) function return the same value.</span></span> <span data-ttu-id="0681f-138">Таким образом, два разных приложения могут обмениваться данными с помощью зарегистрированного формата буфера обмена.</span><span class="sxs-lookup"><span data-stu-id="0681f-138">In this way, two different applications can share data by using a registered clipboard format.</span></span>

## <a name="private-clipboard-formats"></a><span data-ttu-id="0681f-139">Форматы частных буферов обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-139">Private Clipboard Formats</span></span>

<span data-ttu-id="0681f-140">Приложение может определить частный формат буфера обмена, определив значение в диапазоне от **CF \_ Приватефирст** до **CF \_ привателаст**.</span><span class="sxs-lookup"><span data-stu-id="0681f-140">An application can identify a private clipboard format by defining a value in the range **CF\_PRIVATEFIRST** through **CF\_PRIVATELAST**.</span></span> <span data-ttu-id="0681f-141">Приложение может использовать частный формат буфера обмена для определяемого приложением формата данных, который не требуется регистрировать в системе.</span><span class="sxs-lookup"><span data-stu-id="0681f-141">An application can use a private clipboard format for an application-defined data format that does not need to be registered with the system.</span></span>

<span data-ttu-id="0681f-142">Дескрипторы данных, связанные с частными форматами буфера обмена, не освобождаются автоматически системой.</span><span class="sxs-lookup"><span data-stu-id="0681f-142">Data handles associated with private clipboard formats are not automatically freed by the system.</span></span> <span data-ttu-id="0681f-143">Если в Windows используются форматы частных буферов обмена, можно использовать сообщение [**WM \_ дестройклипбоард**](wm-destroyclipboard.md) , чтобы освободить все связанные ресурсы, которые больше не нужны.</span><span class="sxs-lookup"><span data-stu-id="0681f-143">If your windows use private clipboard formats, you can use the [**WM\_DESTROYCLIPBOARD**](wm-destroyclipboard.md) message to free any related resources that are no longer needed.</span></span>

<span data-ttu-id="0681f-144">Дополнительные сведения о сообщении [**WM \_ дестройклипбоард**](wm-destroyclipboard.md) см. в разделе " [владение буфером обмена](clipboard-operations.md)".</span><span class="sxs-lookup"><span data-stu-id="0681f-144">For more information about the [**WM\_DESTROYCLIPBOARD**](wm-destroyclipboard.md) message, see [Clipboard Ownership](clipboard-operations.md).</span></span>

<span data-ttu-id="0681f-145">Приложение может поместить дескрипторы данных в буфер обмена, определив частный формат в диапазоне от **CF \_ Гдиобжфирст** до **CF \_ гдиобжласт**.</span><span class="sxs-lookup"><span data-stu-id="0681f-145">An application can place data handles on the clipboard by defining a private format in the range **CF\_GDIOBJFIRST** through **CF\_GDIOBJLAST**.</span></span> <span data-ttu-id="0681f-146">При использовании значений в этом диапазоне обработчик данных не является обработчиком для объекта Windows интерфейс графических устройств (GDI), но является маркером, выделенным функцией [**GlobalAlloc**](/windows/desktop/api/winbase/nf-winbase-globalalloc) с \_ флагом перемещаемого объекта ГМЕМ.</span><span class="sxs-lookup"><span data-stu-id="0681f-146">When using values in this range, the data handle is not a handle to a Windows Graphics Device Interface (GDI) object, but is a handle allocated by the [**GlobalAlloc**](/windows/desktop/api/winbase/nf-winbase-globalalloc) function with the GMEM\_MOVEABLE flag.</span></span> <span data-ttu-id="0681f-147">При очистке буфера обмена система автоматически удаляет объект с помощью функции [**GlobalFree**](/windows/desktop/api/winbase/nf-winbase-globalfree) .</span><span class="sxs-lookup"><span data-stu-id="0681f-147">When the clipboard is emptied the system automatically deletes the object using the [**GlobalFree**](/windows/desktop/api/winbase/nf-winbase-globalfree) function.</span></span>

## <a name="multiple-clipboard-formats"></a><span data-ttu-id="0681f-148">Несколько форматов буфера обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-148">Multiple Clipboard Formats</span></span>

<span data-ttu-id="0681f-149">Окно может поместить в буфер обмена несколько объектов Clipboard, каждый из которых представляет одни и те же данные в другом формате буфера обмена.</span><span class="sxs-lookup"><span data-stu-id="0681f-149">A window can place more than one clipboard object on the clipboard, each representing the same information in a different clipboard format.</span></span> <span data-ttu-id="0681f-150">При размещении сведений в буфере обмена окно должно предоставлять данные в максимальном количестве форматов.</span><span class="sxs-lookup"><span data-stu-id="0681f-150">When placing information on the clipboard, the window should provide data in as many formats as possible.</span></span> <span data-ttu-id="0681f-151">Чтобы узнать, сколько форматов в данный момент используется в буфере обмена, вызовите функцию [**каунтклипбоардформатс**](/windows/desktop/api/Winuser/nf-winuser-countclipboardformats) .</span><span class="sxs-lookup"><span data-stu-id="0681f-151">To find out how many formats are currently used on the clipboard, call the [**CountClipboardFormats**](/windows/desktop/api/Winuser/nf-winuser-countclipboardformats) function.</span></span>

<span data-ttu-id="0681f-152">Форматы буфера обмена, содержащие наибольшую информацию, должны размещаться в буфере обмена, за которым следуют менее описательные форматы.</span><span class="sxs-lookup"><span data-stu-id="0681f-152">Clipboard formats that contain the most information should be placed on the clipboard first, followed by less descriptive formats.</span></span> <span data-ttu-id="0681f-153">Окно, вставленное из буфера обмена, обычно получает объект буфера обмена в первом распознаваемым формате.</span><span class="sxs-lookup"><span data-stu-id="0681f-153">A window pasting information from the clipboard typically retrieves a clipboard object in the first format it recognizes.</span></span> <span data-ttu-id="0681f-154">Так как форматы буфера обмена перечисляются в том порядке, в котором они помещены в буфер обмена, первый распознаваемый формат также является наиболее описательным.</span><span class="sxs-lookup"><span data-stu-id="0681f-154">Because clipboard formats are enumerated in the order they are placed on the clipboard, the first recognized format is also the most descriptive.</span></span>

<span data-ttu-id="0681f-155">Например, предположим, что пользователь копирует стильный текст из документа, обрабатывающего текстовые документы.</span><span class="sxs-lookup"><span data-stu-id="0681f-155">For example, suppose a user copies styled text from a word-processing document.</span></span> <span data-ttu-id="0681f-156">Окно, содержащее документ, может сначала поместить данные в буфер обмена в зарегистрированном формате, например RTF.</span><span class="sxs-lookup"><span data-stu-id="0681f-156">The window containing the document might first place data on the clipboard in a registered format, such as RTF.</span></span> <span data-ttu-id="0681f-157">Впоследствии окно поместит данные в буфер обмена в менее описательном формате, например текст (**\_ текст CF**).</span><span class="sxs-lookup"><span data-stu-id="0681f-157">Subsequently, the window would place data on the clipboard in a less descriptive format, such as text (**CF\_TEXT**).</span></span>

<span data-ttu-id="0681f-158">Когда содержимое буфера обмена вставляется в другое окно, оно получает данные в наиболее описательном формате, который он распознает.</span><span class="sxs-lookup"><span data-stu-id="0681f-158">When the content of the clipboard is pasted into another window, the window retrieves data in the most descriptive format it recognizes.</span></span> <span data-ttu-id="0681f-159">Если окно распознает RTF, соответствующие данные вставляются в документ.</span><span class="sxs-lookup"><span data-stu-id="0681f-159">If the window recognizes RTF, the corresponding data is pasted into the document.</span></span> <span data-ttu-id="0681f-160">В противном случае текстовые данные вставляются в документ, и сведения о форматировании теряются.</span><span class="sxs-lookup"><span data-stu-id="0681f-160">Otherwise, the text data is pasted into the document and the formatting information is lost.</span></span>

## <a name="synthesized-clipboard-formats"></a><span data-ttu-id="0681f-161">Форматы синтезированного буфера обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-161">Synthesized Clipboard Formats</span></span>

<span data-ttu-id="0681f-162">Система неявно преобразует данные между определенными форматами буфера обмена: Если окно запрашивает данные в формате, который не находится в буфере обмена, система преобразует доступный формат в запрошенный формат.</span><span class="sxs-lookup"><span data-stu-id="0681f-162">The system implicitly converts data between certain clipboard formats: if a window requests data in a format that is not on the clipboard, the system converts an available format to the requested format.</span></span> <span data-ttu-id="0681f-163">Система может преобразовать данные, как показано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="0681f-163">The system can convert data as indicated in the following table.</span></span>



| <span data-ttu-id="0681f-164">Формат буфера обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-164">Clipboard Format</span></span>     | <span data-ttu-id="0681f-165">Формат преобразования</span><span class="sxs-lookup"><span data-stu-id="0681f-165">Conversion Format</span></span>    |
|----------------------|----------------------|
| <span data-ttu-id="0681f-166">**\_точечный рисунок CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-166">**CF\_BITMAP**</span></span>       | <span data-ttu-id="0681f-167">**CF \_ DIB**</span><span class="sxs-lookup"><span data-stu-id="0681f-167">**CF\_DIB**</span></span>          |
| <span data-ttu-id="0681f-168">**\_точечный рисунок CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-168">**CF\_BITMAP**</span></span>       | <span data-ttu-id="0681f-169">**\_DIBV5 CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-169">**CF\_DIBV5**</span></span>        |
| <span data-ttu-id="0681f-170">**CF \_ DIB**</span><span class="sxs-lookup"><span data-stu-id="0681f-170">**CF\_DIB**</span></span>          | <span data-ttu-id="0681f-171">**\_точечный рисунок CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-171">**CF\_BITMAP**</span></span>       |
| <span data-ttu-id="0681f-172">**CF \_ DIB**</span><span class="sxs-lookup"><span data-stu-id="0681f-172">**CF\_DIB**</span></span>          | <span data-ttu-id="0681f-173">**\_Палитра CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-173">**CF\_PALETTE**</span></span>      |
| <span data-ttu-id="0681f-174">**CF \_ DIB**</span><span class="sxs-lookup"><span data-stu-id="0681f-174">**CF\_DIB**</span></span>          | <span data-ttu-id="0681f-175">**\_DIBV5 CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-175">**CF\_DIBV5**</span></span>        |
| <span data-ttu-id="0681f-176">**\_DIBV5 CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-176">**CF\_DIBV5**</span></span>        | <span data-ttu-id="0681f-177">**\_точечный рисунок CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-177">**CF\_BITMAP**</span></span>       |
| <span data-ttu-id="0681f-178">**\_DIBV5 CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-178">**CF\_DIBV5**</span></span>        | <span data-ttu-id="0681f-179">**CF \_ DIB**</span><span class="sxs-lookup"><span data-stu-id="0681f-179">**CF\_DIB**</span></span>          |
| <span data-ttu-id="0681f-180">**\_DIBV5 CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-180">**CF\_DIBV5**</span></span>        | <span data-ttu-id="0681f-181">**\_Палитра CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-181">**CF\_PALETTE**</span></span>      |
| <span data-ttu-id="0681f-182">**\_ЕНХМЕТАФИЛЕ CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-182">**CF\_ENHMETAFILE**</span></span>  | <span data-ttu-id="0681f-183">**\_МЕТАФИЛЕПИКТ CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-183">**CF\_METAFILEPICT**</span></span> |
| <span data-ttu-id="0681f-184">**\_МЕТАФИЛЕПИКТ CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-184">**CF\_METAFILEPICT**</span></span> | <span data-ttu-id="0681f-185">**\_ЕНХМЕТАФИЛЕ CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-185">**CF\_ENHMETAFILE**</span></span>  |
| <span data-ttu-id="0681f-186">**\_ОЕМТЕКСТ CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-186">**CF\_OEMTEXT**</span></span>      | <span data-ttu-id="0681f-187">**\_текст CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-187">**CF\_TEXT**</span></span>         |
| <span data-ttu-id="0681f-188">**\_ОЕМТЕКСТ CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-188">**CF\_OEMTEXT**</span></span>      | <span data-ttu-id="0681f-189">**\_УНИКОДЕТЕКСТ CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-189">**CF\_UNICODETEXT**</span></span>  |
| <span data-ttu-id="0681f-190">**\_текст CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-190">**CF\_TEXT**</span></span>         | <span data-ttu-id="0681f-191">**\_ОЕМТЕКСТ CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-191">**CF\_OEMTEXT**</span></span>      |
| <span data-ttu-id="0681f-192">**\_текст CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-192">**CF\_TEXT**</span></span>         | <span data-ttu-id="0681f-193">**\_УНИКОДЕТЕКСТ CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-193">**CF\_UNICODETEXT**</span></span>  |
| <span data-ttu-id="0681f-194">**\_УНИКОДЕТЕКСТ CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-194">**CF\_UNICODETEXT**</span></span>  | <span data-ttu-id="0681f-195">**\_ОЕМТЕКСТ CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-195">**CF\_OEMTEXT**</span></span>      |
| <span data-ttu-id="0681f-196">**\_УНИКОДЕТЕКСТ CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-196">**CF\_UNICODETEXT**</span></span>  | <span data-ttu-id="0681f-197">**\_текст CF**</span><span class="sxs-lookup"><span data-stu-id="0681f-197">**CF\_TEXT**</span></span>         |



 

<span data-ttu-id="0681f-198">Если система обеспечивает автоматическое преобразование типов для конкретного формата буфера обмена, нет никаких преимуществ для размещения форматов преобразования в буфере обмена.</span><span class="sxs-lookup"><span data-stu-id="0681f-198">If the system provides an automatic type conversion for a particular clipboard format, there is no advantage to placing the conversion format(s) on the clipboard.</span></span>

<span data-ttu-id="0681f-199">Если система обеспечивает автоматическое преобразование типов для конкретного формата буфера обмена и вызывает [**енумклипбоардформатс**](/windows/desktop/api/Winuser/nf-winuser-enumclipboardformats) для перечисления форматов данных в буфере обмена, система сначала перечисляет формат буфера обмена, а затем форматы, в которых он может быть преобразован.</span><span class="sxs-lookup"><span data-stu-id="0681f-199">If the system provides an automatic type conversion for a particular clipboard format, and you call [**EnumClipboardFormats**](/windows/desktop/api/Winuser/nf-winuser-enumclipboardformats) to enumerate the clipboard data formats, the system first enumerates the format that is on the clipboard, followed by the formats to which it can be converted.</span></span>

<span data-ttu-id="0681f-200">При копировании точечных рисунков лучше размещать в буфере обмена формат **CF \_ DIB** или **CF \_ DIBV5** .</span><span class="sxs-lookup"><span data-stu-id="0681f-200">When copying bitmaps, it is best to place the **CF\_DIB** or **CF\_DIBV5** format on the clipboard.</span></span> <span data-ttu-id="0681f-201">Это связано с тем, что цвета в точечном рисунке, зависимом от устройства (**\_ точечный рисунок CF**), зависят от системной палитры, которая может измениться до вставления растрового изображения.</span><span class="sxs-lookup"><span data-stu-id="0681f-201">This is because the colors in a device-dependent bitmap (**CF\_BITMAP**) are relative to the system palette, which may change before the bitmap is pasted.</span></span> <span data-ttu-id="0681f-202">Если формат **CF \_ DIB** или **CF \_ DIBV5** находится в буфере обмена, а окно запрашивает **Формат \_ точечных рисунков CF** , система визуализирует аппаратно-независимый точечный рисунок (DIB), используя текущую палитру в это время.</span><span class="sxs-lookup"><span data-stu-id="0681f-202">If the **CF\_DIB** or **CF\_DIBV5** format is on the clipboard and a window requests the **CF\_BITMAP** format, the system renders the device-independent bitmap (DIB) using the current palette at that time.</span></span>

<span data-ttu-id="0681f-203">При помещении формата **\_ точечных рисунков CF** в буфер обмена (а не в **CF \_ DIB**) система отображает формат буфера обмена **CF \_ DIB** или **CF \_ DIBV5** , как только закрывается буфер обмена.</span><span class="sxs-lookup"><span data-stu-id="0681f-203">If you place the **CF\_BITMAP** format on the clipboard (and not **CF\_DIB**), the system renders the **CF\_DIB** or **CF\_DIBV5** clipboard format as soon as the clipboard is closed.</span></span> <span data-ttu-id="0681f-204">Это гарантирует, что для создания рисунка DIB используется правильная палитра.</span><span class="sxs-lookup"><span data-stu-id="0681f-204">This ensures that the correct palette is used to generate the DIB.</span></span> <span data-ttu-id="0681f-205">Если поместить формат **CF \_ DIBV5** с данными о цветовой области растрового изображения в буфер обмена, система преобразует битовые карты из цветового пространства растрового изображения в цветовую область sRGB при запросе **CF \_ DIB** или **CF \_ DIBV5** .</span><span class="sxs-lookup"><span data-stu-id="0681f-205">If you place the **CF\_DIBV5** format with the bitmap color space information in the clipboard, the system will convert the bitmap bits from the bitmap color space to the sRGB color space when **CF\_DIB** or **CF\_DIBV5** is requested.</span></span> <span data-ttu-id="0681f-206">Если запрос **CF \_ DIBV5** запрашивается, когда в буфере обмена нет сведений о цветовом пространстве, система возвращает сведения о цветовом пространстве sRGB в структуре [**BITMAPV5HEADER**](/windows/desktop/api/wingdi/ns-wingdi-bitmapv5header) .</span><span class="sxs-lookup"><span data-stu-id="0681f-206">If **CF\_DIBV5** is requested when there is no color space information in the clipboard, the system returns sRGB color space information in the [**BITMAPV5HEADER**](/windows/desktop/api/wingdi/ns-wingdi-bitmapv5header) structure.</span></span> <span data-ttu-id="0681f-207">Преобразования между другими форматами буфера обмена происходят по требованию.</span><span class="sxs-lookup"><span data-stu-id="0681f-207">Conversions between other clipboard formats occur upon demand.</span></span>

<span data-ttu-id="0681f-208">Если в буфере обмена содержатся данные в формате **\_ палитры CF** , приложение должно использовать функции [**селектпалетте**](/windows/desktop/api/wingdi/nf-wingdi-selectpalette) и [**реализепалетте**](/windows/desktop/api/wingdi/nf-wingdi-realizepalette) для реализации любых других данных в буфере обмена на этой логической палитре.</span><span class="sxs-lookup"><span data-stu-id="0681f-208">If the clipboard contains data in the **CF\_PALETTE** format, the application should use the [**SelectPalette**](/windows/desktop/api/wingdi/nf-wingdi-selectpalette) and [**RealizePalette**](/windows/desktop/api/wingdi/nf-wingdi-realizepalette) functions to realize any other data in the clipboard against that logical palette.</span></span>

<span data-ttu-id="0681f-209">Существует два формата буферов обмена для метафайлов: **CF \_ Енхметафиле** и **CF \_ метафилепикт**.</span><span class="sxs-lookup"><span data-stu-id="0681f-209">There are two clipboard formats for metafiles: **CF\_ENHMETAFILE** and **CF\_METAFILEPICT**.</span></span> <span data-ttu-id="0681f-210">Укажите **\_ енхметафиле CF** для расширенных метафайлов **и \_ Метафилепикт CF** для метафайлов Windows.</span><span class="sxs-lookup"><span data-stu-id="0681f-210">Specify **CF\_ENHMETAFILE** for enhanced metafiles and **CF\_METAFILEPICT** for Windows metafiles.</span></span>

## <a name="cloud-clipboard-and-clipboard-history-formats"></a><span data-ttu-id="0681f-211">Форматы журнала облачного буфера обмена и буфера обмена</span><span class="sxs-lookup"><span data-stu-id="0681f-211">Cloud Clipboard and Clipboard History Formats</span></span>

<span data-ttu-id="0681f-212">Некоторые версии Windows включают в себя [облачный буфер обмена](/windows/whats-new/whats-new-windows-10-version-1809#cloud-clipboard), который хранит историю последних элементов данных в буфере обмена и может синхронизировать их между устройствами пользователя.</span><span class="sxs-lookup"><span data-stu-id="0681f-212">Some versions of Windows include [Cloud Clipboard](/windows/whats-new/whats-new-windows-10-version-1809#cloud-clipboard), which keeps a history of recent clipboard data items and can synchronize it between the user's devices.</span></span>
<span data-ttu-id="0681f-213">Если вы не хотите, чтобы данные, размещаемые приложением в буфере обмена, включались в журнал буфера обмена или синхронизированы с другими устройствами, приложение может управлять этим поведением, помещая данные в определенные [зарегистрированные форматы буфера обмена](#registered-clipboard-formats) , имена которых известны системе Windows:</span><span class="sxs-lookup"><span data-stu-id="0681f-213">If you don't want the data your application places on the clipboard to be included in the clipboard history or synchronized with other devices, your application can control this behavior by placing data in certain [registered clipboard formats](#registered-clipboard-formats) whose names are known to the Windows system:</span></span>

- <span data-ttu-id="0681f-214">**Ексклудеклипбоардконтентфроммониторпроцессинг** : Поместите данные в буфер обмена в этом формате, чтобы предотвратить включение всех форматов буфера обмена в журнал буфера обмена или их синхронизацию с другими устройствами пользователя.</span><span class="sxs-lookup"><span data-stu-id="0681f-214">**ExcludeClipboardContentFromMonitorProcessing** : Place any data on the clipboard in this format to prevent all clipboard formats being included in the clipboard history or synchronized to the user's other devices.</span></span>
- <span data-ttu-id="0681f-215">**Канинклудеинклипбоардхистори** : Разместите сериализованное значение **[DWORD](../WinProg/windows-data-types.md)** , равное нулю, в буфере обмена в этом формате, чтобы предотвратить включение всех форматов буфера обмена в журнал буфера обмена или поместить значение одного из них вместо явного запроса, что элемент буфера обмена должен быть включен в журнал буфера обмена.</span><span class="sxs-lookup"><span data-stu-id="0681f-215">**CanIncludeInClipboardHistory** : Place a serialized **[DWORD](../WinProg/windows-data-types.md)** value of zero on the clipboard in this format to prevent all clipboard formats being included in the clipboard history, or place a value of one instead to explicitly request that the clipboard item be included in the clipboard history.</span></span> <span data-ttu-id="0681f-216">Это не влияет на синхронизацию с другими устройствами пользователя.</span><span class="sxs-lookup"><span data-stu-id="0681f-216">This does not affect synchronization to the user's other devices.</span></span>
- <span data-ttu-id="0681f-217">**Кануплоадтоклаудклипбоард** : Разместите сериализованное значение **[DWORD](../WinProg/windows-data-types.md)** , равное нулю, в буфере обмена в этом формате, чтобы предотвратить синхронизацию всех форматов буфера обмена с другими устройствами пользователя или поместить значение одного из них вместо явного запроса на синхронизацию элемента буфера обмена с другими устройствами.</span><span class="sxs-lookup"><span data-stu-id="0681f-217">**CanUploadToCloudClipboard** : Place a serialized **[DWORD](../WinProg/windows-data-types.md)** value of zero on the clipboard in this format to prevent all clipboard formats being synchronized to the user's other devices, or place a value of one instead to explicitly request that the clipboard item be synchronized to other devices.</span></span> <span data-ttu-id="0681f-218">Это не влияет на журнал буфера обмена локального устройства.</span><span class="sxs-lookup"><span data-stu-id="0681f-218">This does not affect the local device's clipboard history.</span></span>

<span data-ttu-id="0681f-219">Как и в случае с другими зарегистрированными форматами буфера обмена, необходимо использовать функцию [**регистерклипбоардформат**](
/windows/win32/api/winuser/nf-winuser-registerclipboardformata) для получения целого числа без знака, определяющего каждый из приведенных выше трех форматов.</span><span class="sxs-lookup"><span data-stu-id="0681f-219">As with other registered clipboard formats, you will need to use the [**RegisterClipboardFormat**](
/windows/win32/api/winuser/nf-winuser-registerclipboardformata) function to obtain an unsigned integer value that identifies each of the above 3 formats.</span></span>