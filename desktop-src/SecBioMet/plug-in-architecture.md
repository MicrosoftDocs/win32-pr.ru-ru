---
title: Архитектура подключаемых модулей
description: Биометрические единицы предоставляют платформе возможности устройства через стандартный интерфейс, который состоит из датчиков, подсистемы и адаптеров хранилища.
ms.assetid: d2835413-70a3-45fa-93e2-3fe78097554f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 52e43af9c0ea5a8db57cc0e0970b5625b1ba118f
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104488017"
---
# <a name="plug-in-architecture"></a><span data-ttu-id="3d8f3-103">Архитектура подключаемых модулей</span><span class="sxs-lookup"><span data-stu-id="3d8f3-103">Plug-in architecture</span></span>

<span data-ttu-id="3d8f3-104">Биометрические устройства изготовлены в широком спектре типов и конфигураций.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-104">Biometric devices are manufactured in a wide variety of types and configurations.</span></span> <span data-ttu-id="3d8f3-105">Биометрическая платформа Windows устраняет эти разнообразные возможности, предоставляя расширяемую архитектуру, позволяющую сторонним разработчикам создавать пользовательские подключаемые компоненты.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-105">The Windows Biometric Framework addresses this variety by providing an extensible architecture that enables third party developers to create custom plug-in components.</span></span> <span data-ttu-id="3d8f3-106">Основной компонент — это программный объект, называемый биометрической единицей.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-106">The primary component is a software object called a biometric unit.</span></span> <span data-ttu-id="3d8f3-107">Биометрические единицы предоставляют платформе возможности устройства через стандартный интерфейс, который состоит из датчиков, подсистемы и адаптеров хранилища.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-107">Biometric units expose the capabilities of a device to the framework through a standard interface that consists of sensor, engine, and storage adapters.</span></span> <span data-ttu-id="3d8f3-108">Биометрические единицы и их составные компоненты обсуждаются в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-108">Biometric units and their constituent components are discussed in the following topics.</span></span>

## <a name="biometric-unit"></a><span data-ttu-id="3d8f3-109">Биометрическая единица</span><span class="sxs-lookup"><span data-stu-id="3d8f3-109">Biometric unit</span></span>

<span data-ttu-id="3d8f3-110">Центральным компонентом подключаемой архитектуры биометрическая платформа Windows является биометрическая единица, программный объект, предоставляющий возможности биометрического устройства платформе через стандартный интерфейс.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-110">The central component of the Windows Biometric Framework plug-in architecture is the biometric unit, a software object that exposes the capabilities of a biometric device to the framework through a standard interface.</span></span>

<span data-ttu-id="3d8f3-111">С каждым биометрической единицей связан один физический датчик.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-111">A single physical sensor is associated with each biometric unit.</span></span> <span data-ttu-id="3d8f3-112">Датчик захватывает биометрические данные и может также в зависимости от возможностей оборудования выполнять другие биометрические операции, такие как сопоставление шаблонов и хранение.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-112">The sensor captures biometric data and may also, depending on its hardware capabilities, perform other biometric operations such as template matching and storage.</span></span> <span data-ttu-id="3d8f3-113">Датчикам, которые не поддерживают встроенное сопоставление или хранение, требуются дополнительные программные модули для выполнения этих функций.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-113">Sensors that do not support onboard matching or storage require additional software modules to perform these functions.</span></span> <span data-ttu-id="3d8f3-114">Дополнительные сведения см. в разделе [адаптеры](/previous-versions//dd401508(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="3d8f3-114">For more information, see [Adapters](/previous-versions//dd401508(v=vs.85)).</span></span>

<span data-ttu-id="3d8f3-115">На следующем рисунке показано, как данные проходят через биометрическую единицу.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-115">The following illustration shows how data flows through a biometric unit.</span></span> <span data-ttu-id="3d8f3-116">По сути, поток данных формирует тип конвейера.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-116">Essentially, the data flow forms a type of pipeline.</span></span> <span data-ttu-id="3d8f3-117">Начальными входными данными для конвейера является биометрический пример, захваченный физическим датчиком.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-117">The initial input to the pipeline is a biometric sample captured by a physical sensor.</span></span> <span data-ttu-id="3d8f3-118">Подсистема пытается сопоставить образец с шаблонами, которые уже существуют в хранилище шаблонов, или, если совпадений не найдено, создает новый шаблон на основе повторяющихся физических выборок и сохраняет шаблон в хранилище.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-118">The engine attempts to match the sample to templates that already exist in the template store or, if no match is found, builds a new template from repeated physical samples and saves the template in the store.</span></span>

![данные, передаваемые через биометрический модуль](images/biometricunit-dataflow.png)

## <a name="biometric-unit-life-cycle"></a><span data-ttu-id="3d8f3-120">Жизненный цикл биометрического модуля</span><span class="sxs-lookup"><span data-stu-id="3d8f3-120">Biometric unit life cycle</span></span>

### <a name="creation"></a><span data-ttu-id="3d8f3-121">Создание</span><span class="sxs-lookup"><span data-stu-id="3d8f3-121">Creation</span></span>

<span data-ttu-id="3d8f3-122">Когда служба биометрической службы Windows запускается или получает уведомление об оборудовании от диспетчера самонастраивающийся, оно проверяет наличие оборудования, поддерживающего хорошо известный GUID интерфейса \_ девинтерфаце \_ биометрического \_ средства чтения (E2B5183A-99EA-4cc3-AD6B-80CA8D715B80).</span><span class="sxs-lookup"><span data-stu-id="3d8f3-122">When the Windows Biometric Service starts or when it receives a hardware notification from the Plug and Play manager, it scans for any hardware that supports the well-known interface GUID\_DEVINTERFACE\_BIOMETRIC\_READER (E2B5183A-99EA-4cc3-AD6B-80CA8D715B80).</span></span> <span data-ttu-id="3d8f3-123">Для каждого обнаруженного биометрического устройства:</span><span class="sxs-lookup"><span data-stu-id="3d8f3-123">For each biometric device discovered it then:</span></span>

-   <span data-ttu-id="3d8f3-124">Открывает обработчик для устройства.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-124">Opens a handle to the device.</span></span>
-   <span data-ttu-id="3d8f3-125">Запрашивает возможности устройства с помощью интерфейса управления биометрических драйверов Windows.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-125">Queries the device capabilities by using a Windows Biometric Driver control interface.</span></span>
-   <span data-ttu-id="3d8f3-126">Открывает раздел реестра устройства и пытается нахождение сведений о связанных подключаемых модулях адаптера.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-126">Opens the device registry key and attempts to locate information about any associated adapter plug-ins.</span></span>
-   <span data-ttu-id="3d8f3-127">Открывает раздел реестра биометрической службы Windows и выполняет поиск сведений обо всех глобальных подключаемых модулях, которые должны переопределять значения, указанные на предыдущем шаге.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-127">Opens the Windows Biometric Service registry key and searches for information about any global plug-ins that should override the device specific values found in the preceding step.</span></span>
-   <span data-ttu-id="3d8f3-128">Создает биометрическую единицу для представления устройства и передает модуль поставщику биометрической службы.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-128">Builds a biometric unit to represent the device and passes the unit to a biometric service provider.</span></span>

### <a name="configuration"></a><span data-ttu-id="3d8f3-129">Конфигурация</span><span class="sxs-lookup"><span data-stu-id="3d8f3-129">Configuration</span></span>

<span data-ttu-id="3d8f3-130">После того как биометрический поставщик (BSP) принимает биометрическую единицу, он настраивает единицу и назначает ее пулу датчиков.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-130">After a biometric service provider (BSP) accepts a biometric unit, it configures the unit and assigns it to a sensor pool.</span></span> <span data-ttu-id="3d8f3-131">Дополнительные сведения см. в разделе [Пулы датчиков](sensor-pools.md).</span><span class="sxs-lookup"><span data-stu-id="3d8f3-131">For more information, see [Sensor Pools](sensor-pools.md).</span></span> <span data-ttu-id="3d8f3-132">Единица настраивается путем загрузки соответствующих адаптеров, подключения к хранилищу шаблонов и, возможно, изменения режима работы.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-132">The unit is configured by loading the appropriate adapters, connecting to a template store, and possibly changing the operating mode.</span></span> <span data-ttu-id="3d8f3-133">Биометрический модуль можно настроить для работы в одном из двух режимов:</span><span class="sxs-lookup"><span data-stu-id="3d8f3-133">A biometric unit can be configured to operate in one of two modes:</span></span>

-   <span data-ttu-id="3d8f3-134">В базовом режиме единица выступает в качестве простого устройства записи.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-134">In the basic mode, the unit acts as a simple capture device.</span></span> <span data-ttu-id="3d8f3-135">Он не использует встроенную обработку или хранение, но полностью зависит от программных адаптеров для дополнительной поддержки.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-135">It does not use onboard processing or storage but relies entirely on software adapters for additional support.</span></span> <span data-ttu-id="3d8f3-136">Он должен иметь возможность создавать образцы в стандартном формате.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-136">It should be able to generate samples in a standard format.</span></span> <span data-ttu-id="3d8f3-137">Например, средства чтения отпечатков пальцев должны создавать образцы, соответствующие стандарту ANSI ИНЦИТС 381-2004.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-137">For example, fingerprint readers should generate samples that comply with ANSI INCITS 381-2004.</span></span> <span data-ttu-id="3d8f3-138">Целью базового режима является поддержка взаимодействия между компонентами разных поставщиков.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-138">The purpose of the basic mode is to support interoperability among components from different vendors.</span></span>
-   <span data-ttu-id="3d8f3-139">В расширенном режиме биометрический единица использует функции интегрированной обработки и хранения.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-139">In the advanced mode, the biometric unit uses onboard processing and storage functions.</span></span> <span data-ttu-id="3d8f3-140">Он должен предоставлять стандартные интерфейсы, но может создавать и обрабатывать образцы в любом нужном формате.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-140">It must expose the standard interfaces but can generate and process samples in any format desired.</span></span>

<span data-ttu-id="3d8f3-141">Когда биометрическое устройство перемещается из одного пула датчиков в другой, его адаптеры выгружаются и перестраиваются для нового пула датчиков.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-141">When a biometric unit is moved from one sensor pool to another, its adapters are unloaded and it is reconfigured for the new sensor pool.</span></span> <span data-ttu-id="3d8f3-142">Удостоверение биометрического модуля остается постоянным; изменяются только аппаратная конфигурация и подключаемые модули адаптера.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-142">The identity of the biometric unit remains constant; only the hardware configuration and adapter plug-ins change.</span></span>

### <a name="shut-down"></a><span data-ttu-id="3d8f3-143">Завершение работы</span><span class="sxs-lookup"><span data-stu-id="3d8f3-143">Shut Down</span></span>

<span data-ttu-id="3d8f3-144">Когда биометрическая служба Windows завершает работу или когда диспетчер самонастраивающийся уведомляет об удалении единицы, служба удаляет все биометрические единицы.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-144">When the Windows Biometric Service shuts down or when the Plug and Play manager notifies it that a unit has been removed, the service deletes all biometric units.</span></span>

## <a name="adapters"></a><span data-ttu-id="3d8f3-145">Адаптеры</span><span class="sxs-lookup"><span data-stu-id="3d8f3-145">Adapters</span></span>

<span data-ttu-id="3d8f3-146">Программные компоненты подключаемых модулей, называемые адаптерами, подключают биометрическую единицу к базовому оборудованию и предоставляют функции, которые могут отсутствовать на оборудовании датчика.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-146">Plug-in software components called adapters connect a biometric unit to its underlying hardware and supply any functionality that may be missing from the sensor hardware.</span></span> <span data-ttu-id="3d8f3-147">Существует три типа адаптеров, которые можно создать.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-147">There are three types of adapters that you can create:</span></span>

-   <span data-ttu-id="3d8f3-148">Адаптер датчика создает оболочку для биометрического устройства и предоставляет стандартный интерфейс для настройки датчика, отслеживания образцов и управления передачей биометрических данных механизму обработки.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-148">A sensor adapter wraps a biometric device and provides a standard interface for configuring the sensor, capturing samples, and controlling the flow of biometric data to the processing engine.</span></span>
-   <span data-ttu-id="3d8f3-149">Адаптер подсистемы создает Биометрические шаблоны из захваченных примеров, сопоставляет примеры с существующими шаблонами и шаблоны индексов.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-149">An engine adapter generates biometric templates from captured samples, matches samples to existing templates, and indexes templates.</span></span>
-   <span data-ttu-id="3d8f3-150">Адаптер хранилища управляет шаблонами баз данных.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-150">A storage adapter manages template databases.</span></span>

<span data-ttu-id="3d8f3-151">Адаптеры можно загружать и выгружать во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-151">Adapters can be loaded and unloaded at runtime.</span></span> <span data-ttu-id="3d8f3-152">Это позволяет биометрической службе Windows динамически перенастроить биометрическую единицу, подключив ее к другому набору адаптеров.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-152">This enables the Windows Biometric Service to dynamically reconfigure a biometric unit by connecting it to a different set of adapters.</span></span>

<span data-ttu-id="3d8f3-153">Наконец, каждый из интерфейсов датчиков, обработчиков и адаптеров хранилища предоставляет два метода, **контролунит** и **контролунитпривилежед**, которые позволяют клиентским приложениям получать доступ к пользовательским адаптерам, определенным поставщиком.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-153">Finally, each of the sensor, engine, and storage adapter interfaces expose two methods, **ControlUnit** and **ControlUnitPrivileged**, that enable client applications to access custom adapter capabilities defined by the vendor.</span></span> <span data-ttu-id="3d8f3-154">Это позволяет поставщику определить практически неограниченный набор управляющих операций для устройства.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-154">This allows the vendor to define an almost unlimited set of control operations for a device.</span></span> <span data-ttu-id="3d8f3-155">Кроме того, при выборе функции для реализации поставщик может сделать некоторые операции управления доступными непривилегированным пользователям, одновременно запретив другим операциям привилегированных пользователей.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-155">Further, by choosing which function to implement, a vendor can choose to make some control operations available to non-privileged users while restricting other operations to privileged users.</span></span>

<span data-ttu-id="3d8f3-156">Дополнительные сведения о создании адаптеров см. в разделе [Создание подключаемых модулей адаптера](creating-adapter-plug-ins.md).</span><span class="sxs-lookup"><span data-stu-id="3d8f3-156">For more information about how to create adapters, see [Create adapter plug-ins](creating-adapter-plug-ins.md).</span></span>

## <a name="adapter-performance-requirements"></a><span data-ttu-id="3d8f3-157">Требования к производительности адаптера</span><span class="sxs-lookup"><span data-stu-id="3d8f3-157">Adapter performance requirements</span></span>

<span data-ttu-id="3d8f3-158">Так как цель — это быстрый ответ в целом, производительность адаптера не указывается с точки зрения ограничений по времени для конкретных подпрограмм.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-158">Because the objective is fast response overall, the performance of an adapter isn't specified in terms of time limits on specific routines.</span></span> <span data-ttu-id="3d8f3-159">Вместо этого для общего взаимодействия с пользователем указывается производительность в виде набора требований.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-159">Instead, performance is specified as a set of requirements for the overall user experience.</span></span>

<span data-ttu-id="3d8f3-160">Существует два требования:</span><span class="sxs-lookup"><span data-stu-id="3d8f3-160">There are two requirements:</span></span>

-   <span data-ttu-id="3d8f3-161">Взаимодействие между пользователем и операционной системой, включающей в себя биометрию, должно завершиться в течение двух секунд.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-161">Any interaction between the user and the operating system that involves biometrics must complete within two seconds.</span></span> <span data-ttu-id="3d8f3-162">Этот интервал измеряет время начала и окончания, которое пользователь воспринимает на момент касания или считывания датчика до тех пор, пока на экране устройства не появится что-то заметно.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-162">That interval measures the start-to-finish time that the user perceives from the time they touch or swipe the sensor until the time something visible happens on the device screen.</span></span> <span data-ttu-id="3d8f3-163">(Например, во время разблокировки не должно быть более двух секунд между тем, что пользователь касается датчика отпечатков пальцев и экраном блокировки, подтверждающий личность пользователя.)</span><span class="sxs-lookup"><span data-stu-id="3d8f3-163">(For example, during unlock, there must be no more than a two-second delay between the user touching or swiping the fingerprint sensor and the lock screen acknowledging the user's identity.)</span></span>
-   <span data-ttu-id="3d8f3-164">Для первоначального отображения плиток с учетными данными на экране входа или блокировки мы разрешают немного больше времени (три секунды, максимум), но мы по-прежнему предпочтительнее, а не позже.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-164">For the initial appearance of credential tiles on the sign-in or lock screen, we allow a little more time (three seconds, maximum), but we still prefer sooner rather than later.</span></span> <span data-ttu-id="3d8f3-165">В частности, плитка Bio должна быть видима на экране в течение трех секунд с внешнего вида панели блокировки или входа.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-165">Specifically, the bio tile needs to be visible on screen within three seconds of the appearance of the lock or sign-in panel.</span></span>

<span data-ttu-id="3d8f3-166">Эти числа не являются произвольными.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-166">These numbers are not arbitrary.</span></span> <span data-ttu-id="3d8f3-167">Многочисленные исследования показали, что человек, существ, получит все, что происходит в течение интервала в два секунды, как часть "Now".</span><span class="sxs-lookup"><span data-stu-id="3d8f3-167">Numerous studies have shown that human beings tend to experience everything that happens within a two-second interval as part of the "now" moment.</span></span> <span data-ttu-id="3d8f3-168">Если событие A и событие B происходят в течение двух секунд, то люди воспринимают эти события как одновременные.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-168">If event A and event B happen within two seconds of each other, people perceive those events as being simultaneous.</span></span> <span data-ttu-id="3d8f3-169">Если события разделены более чем на три секунды, пользователи думают о задержке — они считают, что что-то «занимает слишком много времени».</span><span class="sxs-lookup"><span data-stu-id="3d8f3-169">If the events are separated by more than about three seconds, people think there's a delay—they feel that something is "taking too long."</span></span> <span data-ttu-id="3d8f3-170">Так что это проблема прикован человека психологии.</span><span class="sxs-lookup"><span data-stu-id="3d8f3-170">So this is an issue of hardwired human psychology.</span></span>

 

 