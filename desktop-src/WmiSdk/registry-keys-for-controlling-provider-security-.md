---
description: для повышения безопасности wmiprvse.exe процесса узла общего поставщика инструментарий управления Windows (WMI) (WMI) были внесены изменения в Windows платформы, которые защищают хост-процесс поставщика с помощью идентификатора безопасности (SID) службы.
ms.assetid: f93ac155-512c-4efa-8168-ca2d56fe6f01
ms.tgt_platform: multiple
title: Разделы и значения реестра для управления безопасностью поставщика
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 916a5910a6ad21e9f9dfdcfc0992de10ae30da82
ms.sourcegitcommit: 61a4c522182aa1cacbf5669683d9570a3bf043b2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/26/2021
ms.locfileid: "122884357"
---
# <a name="registry-keys-and-values-for-controlling-provider-security"></a>Разделы и значения реестра для управления безопасностью поставщика

для повышения безопасности wmiprvse.exe процесса узла общего поставщика инструментарий управления Windows (WMI) (WMI) были внесены изменения в Windows платформы, которые защищают хост-процесс поставщика с помощью [*идентификатора безопасности (SID) службы*](gloss-s.md). Эти изменения посвящены следующим режимам работы для общего узла WMI: безопасный и совместимый.

В этом разделе рассматриваются следующие разделы:

-   [Безопасные и совместимые режимы](#secure-and-compatible-modes)
-   [Разделы и значения реестра](#registry-keys-and-values)
-   [Настройка поставщика для работы в безопасном или совместимом режиме](#configuring-a-provider-to-run-in-secure-or-compatible-mode)

## <a name="secure-and-compatible-modes"></a>Безопасные и совместимые режимы

начиная с Windows 7 были добавлены следующие два режима работы для процесса общего узла WMI:

<dl> <dt>

<span id="Secure_mode"></span><span id="secure_mode"></span><span id="SECURE_MODE"></span>Безопасный режим
</dt> <dd>

Ресурсы хост-процесса поставщика WMI защищены с помощью [*идентификатора безопасности службы*](gloss-s.md). Только *идентификатор безопасности службы* имеет разрешения для этих ресурсов.

</dd> <dt>

<span id="Compatible_mode"></span><span id="compatible_mode"></span><span id="COMPATIBLE_MODE"></span>Совместимый режим
</dt> <dd>

Процесс узла общего поставщика WMI не защищен с помощью [*идентификатора безопасности службы*](gloss-s.md). Ведущий процесс поставщика обеспечивает доступ к учетным записям NetworkService или LocalService в зависимости от модели размещения. Дополнительные сведения о моделях размещения см. в разделе [размещение и безопасность поставщика](provider-hosting-and-security.md).

</dd> </dl>

**Windows Vista и Windows Server 2008:** Чтобы получить доступ к разделам реестра и значениям для управления безопасными и совместимыми режимами для хостового процесса поставщика, необходимо установить обновление для системы безопасности в [KB 959454](https://support.microsoft.com/kb/959454). Дополнительные сведения см. в [бюллетене по безопасности Microsoft MS09-012](https://www.microsoft.com/technet/security/bulletin/ms09-012.mspx).

## <a name="registry-keys-and-values"></a>Разделы и значения реестра

Параметры безопасного и совместимого режимов указываются с помощью разделов реестра. Разделы реестра для WMI находятся в реестре в разделе **hKey \_ Local \_ Machine** \\ **Software** \\ **Microsoft** \\ **WBEM** \\ **CIMOM** \\ .

Для управления поведением поставщиков WMI были добавлены следующие разделы реестра и значение **DWORD** , описанные в следующем списке.

<dl> <dt>

<span id="SecuredHostProviders"></span><span id="securedhostproviders"></span><span id="SECUREDHOSTPROVIDERS"></span>**секуредхостпровидерс**
</dt> <dd>

Этот ключ управляет поведением отдельных поставщиков. Все поставщики, перечисленные в этом разделе, всегда выполняются в безопасном режиме. все поставщики входящих сообщений, поставляемые с Windows, перечислены в этом разделе и по умолчанию запускаются в безопасном режиме.

Этот ключ имеет приоритет над поставщиками, перечисленными в ключе **компатиблехостпровидерс** .

</dd> <dt>

<span id="CompatibleHostProviders"></span><span id="compatiblehostproviders"></span><span id="COMPATIBLEHOSTPROVIDERS"></span>**компатиблехостпровидерс**
</dt> <dd>

Этот ключ управляет поведением отдельных поставщиков. Все поставщики, перечисленные в этом разделе, всегда выполняются в совместимом режиме. По умолчанию этот ключ пуст.

Если поставщик указан как в разделе **секуредхостпровидерс** , так и в ключе **компатиблехостпровидерс** , то поставщик выполняется в безопасном режиме.

> [!Note]  
> Ключ **компатиблехостпровидерс** обеспечивает совместимость приложений для сторонних приложений, если для ключа **дефаултсекуредхост** задано значение 1, а поставщику известно, что он не работает в безопасном режиме.

 

</dd> <dt>

<span id="DefaultSecuredHost"></span><span id="defaultsecuredhost"></span><span id="DEFAULTSECUREDHOST"></span>**дефаултсекуредхост**
</dt> <dd>

Значение **DWORD** глобального реестра, определяющее, работают ли все поставщики, не указанные в ключах **секуредхостпровидерс** или **компатиблехостпровидерс** , в безопасном или совместимом режиме. Это значение **DWORD** позволяет администратору выбрать режим, в котором должен работать сторонний поставщик. По умолчанию это значение равно нулю, а все сторонние поставщики работают в совместимом режиме. Администраторы могут сделать свой компьютер более безопасным по умолчанию, установив значение **дефаултсекуредхост** равным 1.

> [!Note]  
> Значение **дефаултсекуредхост** не влияет на другие разделы реестра. Поставщики, перечисленные в ключе **секуредхостпровидерс** , остаются в безопасном режиме, а те, которые перечислены в ключе **компатиблехостпровидерс** , остаются в совместимом режиме.

 

Возможны следующие параметры.

<dl> <dt>

<span id="0"></span>0
</dt> <dd>

Указывает, что поставщики работают в совместимом режиме.

</dd> <dt>

<span id="1"></span>1
</dt> <dd>

Указывает, что поставщики выполняются в безопасном режиме.

</dd> </dl> </dd> </dl>

В следующем списке перечислены возможные параметры реестра и связанные режимы работы для поставщика.



| Перечислены в разделе Секуредхостпровидерс | Перечислены в разделе Компатиблехостпровидерс | Параметр Дефаултсекуредхост | Режим       |
|-----------------------------------|--------------------------------------|----------------------------|------------|
| нет                                | Нет                                   | 0                          | Совместимые |
| нет                                | Да                                  | 0                          | Совместимые |
| Да                               | Нет                                   | 0                          | Безопасность     |
| Да                               | Да                                  | 0                          | Безопасность     |
| нет                                | Нет                                   | 1                          | Безопасность     |
| Нет                                | Да                                  | 1                          | Совместимые |
| Да                               | Нет                                   | 1                          | Безопасность     |
| Да                               | Да                                  | 1                          | Безопасность     |



 

## <a name="configuring-a-provider-to-run-in-secure-or-compatible-mode"></a>Настройка поставщика для работы в безопасном или совместимом режиме

Разделы реестра можно изменить с помощью консоль управления групповыми политиками (GPMC). Дополнительные сведения см. в разделе [консоль управления групповыми политиками](/previous-versions/windows/desktop/gpmc/group-policy-management-console-portal).

В следующих процедурах показано, как управлять безопасными и совместимыми параметрами режима с помощью предпочтений групповой политики. Дополнительные сведения о предпочтениях групповой политики см. в разделе [Общие сведения](/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn581922(v=ws.11))о параметрах групповая политика.

**Добавление поставщика в безопасный или совместимый режим с помощью групповая политика**

1.  Откройте консоль управления групповыми политиками.
2.  Создайте объект групповая политика (GPO).
3.  Измените объект групповой политики.
4.  выберите предпочтения/Windows Параметры/регистри.
5.  Щелкните правой кнопкой мыши и выберите **создать... Реестр**. Это действие представляет пользовательский интерфейс, в котором можно ввести данные реестра.
6.  Выберите команду **создать** .
7.  Выберите следующий путь к разделу реестра:

    **Безопасный режим: hKey \_ \_** \\ **Программное обеспечение** локального компьютера \\ **Microsoft** \\ **WBEM** \\ **CIMOM** \\ **секуредхостпровидерс**

    **Совместимый режим: hKey \_ \_** \\ **Программное обеспечение** локального компьютера \\ **Microsoft** \\ **WBEM** \\ **CIMOM** \\ **компатиблехостпровидерс**

8.  В поле **имя** введите имя поставщика, который требуется добавить в этот ключ. Имя поставщика должно иметь следующий формат: &lt; Namespace &gt; : <\_ \_ релпас>. Например, root \\ CIMV2: \_ \_ win32provider. Name = "мипровидер".
9.  В поле **данных** введите 0.
10. Щелкните ОК.

**Удаление поставщика из безопасного или совместимого режима с помощью групповая политика**

1.  Откройте консоль управления групповыми политиками.
2.  Создайте объект групповой политики.
3.  Измените объект групповой политики.
4.  выберите предпочтения/Windows Параметры/регистри.
5.  Щелкните правой кнопкой мыши и выберите **создать... Реестр**. Это действие представляет пользовательский интерфейс, в котором можно ввести данные реестра.
6.  Выберите команду **Удалить** .
7.  Выберите следующий путь к разделу реестра:

    **Безопасный режим: hKey \_ \_** \\ **Программное обеспечение** локального компьютера \\ **Microsoft** \\ **WBEM** \\ **CIMOM** \\ **секуредхостпровидерс**

    **Совместимый режим: hKey \_ \_** \\ **Программное обеспечение** локального компьютера \\ **Microsoft** \\ **WBEM** \\ **CIMOM** \\ **компатиблехостпровидерс**

8.  В поле **имя** введите имя поставщика, который вы хотите удалить из этого ключа.
9.  В поле **данных** введите 0.
10. Щелкните ОК.

Следующая процедура предоставляет сведения о том, как изменить поведение поставщиков, не перечисленных в ключах **секуредхостпровидерс** или **компатиблехостпровидерс** .

**Изменение значения по умолчанию для ключа Дефаултсекуредхост с помощью групповая политика**

1.  Откройте консоль управления групповыми политиками.
2.  Создайте объект групповой политики.
3.  Измените объект групповой политики.
4.  выберите предпочтения/Windows Параметры/регистри.
5.  Щелкните правой кнопкой мыши и выберите **создать... Реестр**. Это действие представляет пользовательский интерфейс, в котором можно ввести данные реестра.
6.  Выберите команду **Обновить** .
7.  Выберите следующий путь к разделу реестра: **hKey \_ Local \_ Machine** \\ **Software** \\ **Microsoft** \\ **WBEM** \\ **CIMOM**.
8.  В поле **имя** введите **дефаултсекуредхост**.
9.  В поле **данные** введите 0 для совместимого режима или 1 для безопасного режима.
10. Щелкните ОК.

 

 
