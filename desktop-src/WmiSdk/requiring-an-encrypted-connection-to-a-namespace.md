---
description: Можно потребовать, чтобы клиентские скрипты и приложения установили зашифрованное подключение для проверки подлинности, добавив квалификатор Рекуиресенкриптион в MOF-файл MOF-файл (MOF), который создает пространство имен.
ms.assetid: 07b225a2-3834-4879-beae-f5b9180d112f
ms.tgt_platform: multiple
title: Требуется зашифрованное соединение с пространством имен
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e42415c0f714f99a51d6a1a0ee1a0b22f398b1b7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105693638"
---
# <a name="requiring-an-encrypted-connection-to-a-namespace"></a>Требуется зашифрованное соединение с пространством имен

Можно потребовать, чтобы клиентские скрипты и приложения установили зашифрованное подключение для проверки подлинности, добавив квалификатор **рекуиресенкриптион** в MOF-файл MOF-файл (MOF), который создает пространство имен.


Зашифрованное соединение с пространством имен WMI указывает на проверку подлинности **RPC \_ C \_ AUTHN \_ Level \_ PKT \_** (или **пктприваци** в сценарии). Квалификатор **рекуиресенкриптион** заставляет Инструментарий WMI отклонять любые входящие запросы к данным, если они явно не используют зашифрованную проверку подлинности. Дополнительные сведения см. [в разделе Задание уровня безопасности процесса по умолчанию с помощью VBScript](setting-the-default-process-security-level-using-vbscript.md) или [Настройка проверки подлинности с помощью C++](setting-authentication-using-c-.md).

Можно также изменить существующее пространство имен, добавив этот атрибут, а затем снова скомпилировать MOF-файл. **Рекуиресенкриптион** используется в [*MOF*](gloss-m.md) с помощью инструкции препроцессора [директивы pragma Namespace](pragma-namespace.md) .

Следующая процедура задает для пространства имен требование зашифрованного соединения.

**Настройка обязательного шифрования**

1.  Создайте MOF-файл (MOF-файл) или измените существующий MOF-файл, определяющий пространство имен.

    В следующем примере кода показано пространство имен, которое будет изменено, — *root \\ MyNamespace* , а файл — с именем *MyNamespace \_ Security. mof*. **Рекуиресенкриптион** имеет логический тип данных, поэтому для него должно быть задано **значение true** или **false**.

    ```mof
    #pragma namespace("\\\\.\\Root\\MyNamespace") 

    [RequiresEncryption(TRUE)] 
    instance of __systemSecurity { };
    ```

    

2.  Запустите [**mofcomp.exe**](mofcomp.md) , чтобы скомпилировать MOF-файл.

    **c: \\ mofcomp MyNamespace \_ Security. mof**

    В C++ используйте методы [**имофкомпилер**](/windows/desktop/api/Wbemcli/nn-wbemcli-imofcompiler) .

WMI отклоняет клиент, использующий уровень проверки подлинности по умолчанию, так как DCOM согласовывает безопасность с уровнем, необходимым процессу SVCHOST, в котором запущена служба WMI. Дополнительные сведения о размещении служб см. в разделе [размещение и безопасность поставщика](provider-hosting-and-security.md). Дополнительные сведения о настройке уровней проверки подлинности при подключении к пространствам имен WMI см. в статьях [Настройка уровня безопасности процесса по умолчанию с помощью c++](setting-the-default-process-security-level-using-c-.md), [Настройка проверки подлинности с помощью C++](setting-authentication-using-c-.md)или [Установка уровня безопасности процесса по умолчанию с помощью VBScript](setting-the-default-process-security-level-using-vbscript.md).

При возврате данных через асинхронное соединение обратного вызова Инструментарий WMI возвращает запрашивающему компьютеру сообщение об отказе в доступе. Кроме того, Инструментарий WMI создает запись в журнале событий NT компьютера с зашифрованным пространством имен, указывая, что для клиента невозможно установить безопасное соединение.

Начиная с Windows Vista файл Вбемкоре. log больше не существует. Можно проверить журнал событий NT на наличие записей, указывающих на отклоненные входящие запросы к данным, для пространств имен, требующих шифрования.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Настройка дескрипторов безопасности Намепаце](setting-namespace-security-descriptors.md)
</dt> <dt>

[**вбемаусентикатионлевеленум**](/windows/desktop/api/Wbemdisp/ne-wbemdisp-wbemauthenticationlevelenum)
</dt> <dt>

[Защита удаленного WMI-подключения](securing-a-remote-wmi-connection.md)
</dt> </dl>

 

 



