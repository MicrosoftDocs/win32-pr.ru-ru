---
description: 'Перед регистрацией для получения события необходимо определить типы получаемых событий: внутренний или внешний.'
ms.assetid: 46cdfcfa-42c6-4169-bc4d-725867224889
ms.tgt_platform: multiple
title: Определение типа получаемого события
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 477f3d10536e5b0622e1e64b6cec9abdf4183c7d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "103815713"
---
# <a name="determining-the-type-of-event-to-receive"></a><span data-ttu-id="29c86-103">Определение типа получаемого события</span><span class="sxs-lookup"><span data-stu-id="29c86-103">Determining the Type of Event to Receive</span></span>

<span data-ttu-id="29c86-104">Перед регистрацией для получения события необходимо определить типы получаемых событий: [внутренний](#intrinsic-events) или [внешний](#extrinsic-events).</span><span class="sxs-lookup"><span data-stu-id="29c86-104">Before you register to receive an event, you must determine the types of events to receive: [intrinsic](#intrinsic-events) or [extrinsic](#extrinsic-events).</span></span> <span data-ttu-id="29c86-105">Дополнительные сведения о получении событий см. в разделе [Получение WMI-события](receiving-a-wmi-event.md).</span><span class="sxs-lookup"><span data-stu-id="29c86-105">For more information about how to receive events, see [Receiving a WMI Event](receiving-a-wmi-event.md).</span></span> <span data-ttu-id="29c86-106">Дополнительные сведения о предоставлении событий см. в разделе [Разработка поставщика WMI](developing-a-wmi-provider.md) и [запись поставщика событий](writing-an-event-provider.md).</span><span class="sxs-lookup"><span data-stu-id="29c86-106">For more information about providing events, see [Developing a WMI Provider](developing-a-wmi-provider.md) and [Writing an Event Provider](writing-an-event-provider.md).</span></span> <span data-ttu-id="29c86-107">Дополнительные сведения о проблемах безопасности, связанных с получением и предоставлением событий, см. в разделе [Защита событий WMI.](securing-wmi-events.md)</span><span class="sxs-lookup"><span data-stu-id="29c86-107">For more information about the security concerns for receiving and providing events, see [Securing WMI Events.](securing-wmi-events.md)</span></span>

## <a name="intrinsic-events"></a><span data-ttu-id="29c86-108">Внутренние события</span><span class="sxs-lookup"><span data-stu-id="29c86-108">Intrinsic Events</span></span>

<span data-ttu-id="29c86-109">Внутреннее событие — это событие, возникающее в ответ на изменение стандартной модели данных WMI.</span><span class="sxs-lookup"><span data-stu-id="29c86-109">An intrinsic event is an event that occurs in response to a change in the standard WMI data model.</span></span> <span data-ttu-id="29c86-110">Каждый класс встроенного события представляет конкретный тип изменения и возникает, когда WMI или поставщик создает, удаляет или изменяет пространство имен, класс или экземпляр класса.</span><span class="sxs-lookup"><span data-stu-id="29c86-110">Each intrinsic event class represents a specific type of change and occurs when WMI or a provider creates, deletes, or modifies a namespace, class, or class instance.</span></span> <span data-ttu-id="29c86-111">Например, создание экземпляра [**Win32 \_ LogicalDisk**](/windows/desktop/CIMWin32Prov/win32-logicaldisk) приведет к созданию экземпляра [**\_ \_ инстанцекреатионевент**](--instancecreationevent.md) .</span><span class="sxs-lookup"><span data-stu-id="29c86-111">For example, the creation of a [**Win32\_LogicalDisk**](/windows/desktop/CIMWin32Prov/win32-logicaldisk) instance would result in an [**\_\_InstanceCreationEvent**](--instancecreationevent.md) instance.</span></span>

<span data-ttu-id="29c86-112">Инструментарий WMI создает внутренние события для объектов, хранящихся в репозитории WMI.</span><span class="sxs-lookup"><span data-stu-id="29c86-112">WMI creates intrinsic events for objects stored in the WMI repository.</span></span> <span data-ttu-id="29c86-113">Поставщик создает внутренние события для динамических классов, но WMI может создать экземпляр для динамического класса, если поставщик недоступен.</span><span class="sxs-lookup"><span data-stu-id="29c86-113">A provider generates intrinsic events for dynamic classes, but WMI can create an instance for a dynamic class if no provider is available.</span></span> <span data-ttu-id="29c86-114">Инструментарий WMI использует опрос для обнаружения изменений.</span><span class="sxs-lookup"><span data-stu-id="29c86-114">WMI uses polling to detect the changes.</span></span> <span data-ttu-id="29c86-115">В следующей таблице перечислены системные классы, которые Инструментарий WMI использует для передачи отчетов о внутренних событиях.</span><span class="sxs-lookup"><span data-stu-id="29c86-115">The following table lists the system classes that WMI uses to report intrinsic events.</span></span>



| <span data-ttu-id="29c86-116">Системный класс</span><span class="sxs-lookup"><span data-stu-id="29c86-116">System class</span></span>                                                           | <span data-ttu-id="29c86-117">Описание</span><span class="sxs-lookup"><span data-stu-id="29c86-117">Description</span></span>                                                                                                                                                                                             |
|------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="29c86-118">**\_\_класскреатионевент**</span><span class="sxs-lookup"><span data-stu-id="29c86-118">**\_\_ClassCreationEvent**</span></span>](--classcreationevent.md)                 | <span data-ttu-id="29c86-119">Уведомляет потребителя о создании класса.</span><span class="sxs-lookup"><span data-stu-id="29c86-119">Notifies a consumer when a class is created.</span></span>                                                                                                                                                            |
| [<span data-ttu-id="29c86-120">**\_\_классделетионевент**</span><span class="sxs-lookup"><span data-stu-id="29c86-120">**\_\_ClassDeletionEvent**</span></span>](--classdeletionevent.md)                 | <span data-ttu-id="29c86-121">Уведомляет потребителя об удалении класса.</span><span class="sxs-lookup"><span data-stu-id="29c86-121">Notifies a consumer when a class is deleted.</span></span>                                                                                                                                                            |
| [<span data-ttu-id="29c86-122">**\_\_классмодификатионевент**</span><span class="sxs-lookup"><span data-stu-id="29c86-122">**\_\_ClassModificationEvent**</span></span>](--classmodificationevent.md)         | <span data-ttu-id="29c86-123">Уведомляет потребителя об изменении класса.</span><span class="sxs-lookup"><span data-stu-id="29c86-123">Notifies a consumer when a class is modified.</span></span>                                                                                                                                                           |
| [<span data-ttu-id="29c86-124">**\_\_инстанцекреатионевент**</span><span class="sxs-lookup"><span data-stu-id="29c86-124">**\_\_InstanceCreationEvent**</span></span>](--instancecreationevent.md)           | <span data-ttu-id="29c86-125">Уведомляет потребителя о создании экземпляра класса.</span><span class="sxs-lookup"><span data-stu-id="29c86-125">Notifies a consumer when a class instance is created.</span></span>                                                                                                                                                   |
| [<span data-ttu-id="29c86-126">**\_\_инстанцеоператионевент**</span><span class="sxs-lookup"><span data-stu-id="29c86-126">**\_\_InstanceOperationEvent**</span></span>](--instanceoperationevent.md)         | <span data-ttu-id="29c86-127">Уведомляет потребитель, когда происходит какое-либо событие экземпляра, например создание, удаление или изменение экземпляра.</span><span class="sxs-lookup"><span data-stu-id="29c86-127">Notifies a consumer when any instance event occurs, such as creation, deletion, or modification of the instance.</span></span> <span data-ttu-id="29c86-128">Этот класс можно использовать в запросах для получения всех событий типов, связанных с экземпляром.</span><span class="sxs-lookup"><span data-stu-id="29c86-128">You can use this class in queries to get all types events associated with an instance.</span></span> |
| [<span data-ttu-id="29c86-129">**\_\_инстанцеделетионевент**</span><span class="sxs-lookup"><span data-stu-id="29c86-129">**\_\_InstanceDeletionEvent**</span></span>](--instancedeletionevent.md)           | <span data-ttu-id="29c86-130">Уведомляет потребителя об удалении экземпляра.</span><span class="sxs-lookup"><span data-stu-id="29c86-130">Notifies a consumer when an instance is deleted.</span></span>                                                                                                                                                        |
| [<span data-ttu-id="29c86-131">**\_\_инстанцемодификатионевент**</span><span class="sxs-lookup"><span data-stu-id="29c86-131">**\_\_InstanceModificationEvent**</span></span>](--instancemodificationevent.md)   | <span data-ttu-id="29c86-132">Уведомляет потребителя об изменении экземпляра.</span><span class="sxs-lookup"><span data-stu-id="29c86-132">Notifies a consumer when an instance is modified.</span></span>                                                                                                                                                       |
| [<span data-ttu-id="29c86-133">**\_\_намеспацекреатионевент**</span><span class="sxs-lookup"><span data-stu-id="29c86-133">**\_\_NamespaceCreationEvent**</span></span>](--namespacecreationevent.md)         | <span data-ttu-id="29c86-134">Уведомляет потребителя о создании пространства имен.</span><span class="sxs-lookup"><span data-stu-id="29c86-134">Notifies a consumer when a namespace is created.</span></span>                                                                                                                                                        |
| [<span data-ttu-id="29c86-135">**\_\_намеспацеделетионевент**</span><span class="sxs-lookup"><span data-stu-id="29c86-135">**\_\_NamespaceDeletionEvent**</span></span>](--namespacedeletionevent.md)         | <span data-ttu-id="29c86-136">Уведомляет потребителя об удалении пространства имен.</span><span class="sxs-lookup"><span data-stu-id="29c86-136">Notifies a consumer when a namespace is deleted.</span></span>                                                                                                                                                        |
| [<span data-ttu-id="29c86-137">**\_\_намеспацемодификатионевент**</span><span class="sxs-lookup"><span data-stu-id="29c86-137">**\_\_NamespaceModificationEvent**</span></span>](--namespacemodificationevent.md) | <span data-ttu-id="29c86-138">Уведомляет потребителя об изменении пространства имен.</span><span class="sxs-lookup"><span data-stu-id="29c86-138">Notifies a consumer when a namespace is modified.</span></span>                                                                                                                                                       |
| [<span data-ttu-id="29c86-139">**\_\_консумерфаилуривент**</span><span class="sxs-lookup"><span data-stu-id="29c86-139">**\_\_ConsumerFailureEvent**</span></span>](--consumerfailureevent.md)             | <span data-ttu-id="29c86-140">Уведомляет потребителя, когда какое-либо другое событие отбрасывается в связи с ошибкой в части потребителя события.</span><span class="sxs-lookup"><span data-stu-id="29c86-140">Notifies a consumer when some other event is dropped due to a failure on the part of an event consumer.</span></span>                                                                                                 |
| [<span data-ttu-id="29c86-141">**\_\_евентдроппедевент**</span><span class="sxs-lookup"><span data-stu-id="29c86-141">**\_\_EventDroppedEvent**</span></span>](--eventdroppedevent.md)                   | <span data-ttu-id="29c86-142">Уведомляет потребителя о том, что при отправке какого-либо другого события вместо доставки запрашивающему потребителю события происходит отброшение.</span><span class="sxs-lookup"><span data-stu-id="29c86-142">Notifies a consumer when some other event is dropped instead of being delivered to the requesting event consumer.</span></span>                                                                                       |
| [<span data-ttu-id="29c86-143">**\_\_евенткуеуеоверфловевент**</span><span class="sxs-lookup"><span data-stu-id="29c86-143">**\_\_EventQueueOverflowEvent**</span></span>](--eventqueueoverflowevent.md)       | <span data-ttu-id="29c86-144">Уведомляет потребителя о том, что событие удаляется в результате переполнения очереди доставки.</span><span class="sxs-lookup"><span data-stu-id="29c86-144">Notifies a consumer when an event is dropped as a result of a delivery queue overflow.</span></span>                                                                                                                  |
| [<span data-ttu-id="29c86-145">**\_\_месодинвокатионевент**</span><span class="sxs-lookup"><span data-stu-id="29c86-145">**\_\_MethodInvocationEvent**</span></span>](--methodinvocationevent.md)           | <span data-ttu-id="29c86-146">Уведомляет потребителя о возникновении события вызова метода.</span><span class="sxs-lookup"><span data-stu-id="29c86-146">Notifies a consumer when a method call event occurs.</span></span>                                                                                                                                                    |



 

## <a name="extrinsic-events"></a><span data-ttu-id="29c86-147">Внешние события</span><span class="sxs-lookup"><span data-stu-id="29c86-147">Extrinsic Events</span></span>

<span data-ttu-id="29c86-148">Внешнее событие — это предопределенное вхождение, которое невозможно напрямую связать с изменениями в модели данных WMI.</span><span class="sxs-lookup"><span data-stu-id="29c86-148">An extrinsic event is a predefined occurrence that cannot be linked directly to changes in the WMI data model.</span></span> <span data-ttu-id="29c86-149">Таким образом, Инструментарий WMI позволяет поставщику событий определить класс событий, описывающий событие.</span><span class="sxs-lookup"><span data-stu-id="29c86-149">Therefore, WMI enables an event provider to define an event class that describes the event.</span></span> <span data-ttu-id="29c86-150">Например, событие, описывающее переключение компьютера в режим «в режиме ожидания», — это внешнее событие.</span><span class="sxs-lookup"><span data-stu-id="29c86-150">For example, an event that describes a computer switching to stand-by mode is an extrinsic event.</span></span> <span data-ttu-id="29c86-151">Поставщик наследует внешнее событие из системного класса [**\_ \_ екстринсицевент**](--extrinsicevent.md) , который является подклассом класса системы [**\_ \_ событий**](--event.md) .</span><span class="sxs-lookup"><span data-stu-id="29c86-151">A provider derives an extrinsic event from the [**\_\_ExtrinsicEvent**](--extrinsicevent.md) system class, which is a subclass of the [**\_\_Event**](--event.md) system class.</span></span> <span data-ttu-id="29c86-152">[Системный реестр](/previous-versions/windows/desktop/regprov/system-registry-provider) и поставщики [SNMP](snmp-provider.md) определяют классы внешних событий, такие как **регистрикэйчанжеевент**, которые уведомляют потребителя при изменении раздела реестра.</span><span class="sxs-lookup"><span data-stu-id="29c86-152">The [System Registry](/previous-versions/windows/desktop/regprov/system-registry-provider) and [SNMP](snmp-provider.md) providers define extrinsic event classes, such as **RegistryKeyChangeEvent**, which notifies a consumer when a registry key is changed.</span></span> <span data-ttu-id="29c86-153">Дополнительные сведения см. в разделах [Регистрация для событий системного реестра](registering-for-system-registry-events.md) и [запись поставщика событий](writing-an-event-provider.md).</span><span class="sxs-lookup"><span data-stu-id="29c86-153">For more information, see [Registering for System Registry Events](registering-for-system-registry-events.md) and [Writing an Event Provider](writing-an-event-provider.md).</span></span>

<span data-ttu-id="29c86-154">В следующем примере поставщик событий сообщает о нарушениях безопасности в одном или нескольких зданиях.</span><span class="sxs-lookup"><span data-stu-id="29c86-154">In the following example, an event provider is reporting security violations to one or more buildings.</span></span> <span data-ttu-id="29c86-155">Следующий класс может быть определен для внешних событий, представляющих нарушение безопасности.</span><span class="sxs-lookup"><span data-stu-id="29c86-155">The following class might be defined for the extrinsic event representing a security violation.</span></span>

``` syntax
class SecurityViolationEvent : __ExtrinsicEvent
{
   string Building;           // building where violation occurred
   sint32 EntranceNumber;     // entrance where violation occurred
   datetime TimeOfDetection;  // date and time of violation
}
```

<span data-ttu-id="29c86-156">Чтобы получать уведомления о нарушениях безопасности, потребитель регистрируется для типа события Секуритивиолатионевент.</span><span class="sxs-lookup"><span data-stu-id="29c86-156">To receive the security violation notifications, a consumer registers for the SecurityViolationEvent event type.</span></span> <span data-ttu-id="29c86-157">Если не указано иное, потребитель получает уведомление обо всех нарушениях безопасности в течение всех периодов времени и во всех зданиях.</span><span class="sxs-lookup"><span data-stu-id="29c86-157">Unless otherwise specified, a consumer receives notification of all security violations during all time periods and in all buildings.</span></span> <span data-ttu-id="29c86-158">Класс событий также содержит сведения, которые потребители могут использовать для запроса более конкретных событий.</span><span class="sxs-lookup"><span data-stu-id="29c86-158">The event class also contains information that consumers can use to ask for more specific events.</span></span>

<span data-ttu-id="29c86-159">В следующем примере запрос регистрирует потребитель для событий нарушения безопасности при сборке только 24.</span><span class="sxs-lookup"><span data-stu-id="29c86-159">In the following example, the query registers the consumer for security violation events in building 24 only.</span></span>

`SELECT * FROM SecurityViolationEvent WHERE Building = 24;`

 

 
