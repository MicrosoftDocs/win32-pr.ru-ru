---
description: Можно запретить неавторизованным пользователям получать события, к которым у них нет доступа.
ms.assetid: 59788643-f57d-458f-91ab-26552218523b
ms.tgt_platform: multiple
title: Безопасное предоставление событий
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d2c92ed1de08dde4891365440f559544a0b26de5
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104265879"
---
# <a name="providing-events-securely"></a>Безопасное предоставление событий

Можно запретить неавторизованным пользователям получать события, к которым у них нет доступа. Поставщик событий может предоставлять экземпляры собственных классов событий, так же как [поставщик системного реестра](/previous-versions/windows/desktop/regprov/system-registry-provider) предоставляет такие классы, как [**регистрикэйчанжеевент**](/previous-versions/windows/desktop/regprov/registrykeychangeevent). Поставщик событий может также предоставлять внутренние события, такие как [**\_ \_ инстанцекреатионевент**](--instancecreationevent.md). Дополнительные сведения см. в разделе [запись поставщика событий](writing-an-event-provider.md).

Поставщик событий может контролировать доступ к получателям событий следующими способами.

-   Использование контроля доступа путем реализации [**ивбемевентпровидерсекурити:: AccessCheck**](/windows/desktop/api/Wbemprov/nn-wbemprov-iwbemeventprovidersecurity) является наиболее эффективным способом.

    Поставщик определяет, имеет ли потребитель права на получение запрошенного события. Если потребитель не имеет достаточных привилегий для регистрации, Инструментарий WMI возвращает ошибку отказа в доступе. Используйте этот режим, если поставщик может принять решение о том, кто может принимать события. Например, поставщик может предоставлять события, связанные с безопасностью, и может требовать, чтобы потребитель имел права администратора с включенным привилегиями **SeSecurityPrivilege** .

-   Реализация [**ивбемевентсинк:: сетсинксекурити**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-setsinksecurity) в приемнике, используемом для вызова событий, позволяет установить дескриптор безопасности (SD) в приемнике для всех событий, передаваемых через.

    Инструментарий WMI выполняет проверки доступа на основе SD. Используйте этот режим, если поставщик не может принять решение о том, кому разрешено использовать события, но может выбрать SD для определенного приемника. Например, используйте [**ивбемевентсинк:: сетсинксекурити**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-setsinksecurity) , если поставщик событий получил несколько приемников путем вызова [**Ивбемевентсинк:: жетрестриктедсинк**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventsink-getrestrictedsink) и требуется дескриптор безопасности для каждого приемника.

-   Установка свойства **\_ дескриптора безопасности** события позволяет настроить SD для каждого события.

    Используйте этот подход, если каждое событие, доставленное в приемник, может иметь разные дескрипторы безопасности. Чтобы использовать этот подход, необходимо получить все внешние классы событий, определенные поставщиком, из [**\_ \_ события**](--event.md) или [**\_ \_ екстринсицевент**](--extrinsicevent.md) , чтобы класс содержал свойство **\_ дескриптора безопасности** . Например, поставщик событий может публиковать как безопасные, так и обычные события через приемник. В этом случае используйте дескриптор безопасности учетной записи администратора для безопасных событий и **нулевой** дескриптор безопасности для обычных событий, которые могут быть получены любым пользователем.

## <a name="securing-events-by-decoupled-event-providers"></a>Защита событий по несвязанным поставщикам событий

Несвязанные поставщики событий отличаются от поставщиков неразделенных событий тем, как они регистрируются в WMI. Вызов [**ивбемевентпровидерсекурити:: AccessCheck**](/windows/desktop/api/Wbemprov/nf-wbemprov-iwbemeventprovidersecurity-accesscheck) для событий из несвязанного поставщика никогда не распространяет маркер доступа клиента. Инструментарий WMI обрабатывает управление доступом так же, как и для взаимосвязанных поставщиков событий. Дополнительные сведения о создании несвязанного поставщика см. в разделе [Включение поставщика в приложение](incorporating-a-provider-in-an-application.md).

Только администраторы с правами **полного \_** доступа на запись в **элементе управления WMI** **панели управления** могут создавать события для пространства имен. Дополнительные сведения см. [в разделе Настройка безопасности пространства имен с помощью элемента управления WMI](setting-namespace-security-with-the-wmi-control.md).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Защита событий WMI](securing-wmi-events.md)
</dt> </dl>

 

 
