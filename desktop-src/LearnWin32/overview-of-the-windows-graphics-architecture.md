---
title: Обзор архитектуры графики Windows
description: Описание API-интерфейсов графики C++/COM в Windows.
ms.assetid: 9654b18b-d615-455d-a92a-6fc2ccda469e
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4f45ba44f54b947d923b888d51080ff0335119a1
ms.sourcegitcommit: 35bb565804eaeed7ac5503595753f59d120076dd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/09/2021
ms.locfileid: "104156975"
---
# <a name="overview-of-the-windows-graphics-architecture"></a><span data-ttu-id="cb63c-103">Обзор архитектуры графики Windows</span><span class="sxs-lookup"><span data-stu-id="cb63c-103">Overview of the Windows Graphics Architecture</span></span>

<span data-ttu-id="cb63c-104">Windows предоставляет несколько API-интерфейсов C++/COM для графики.</span><span class="sxs-lookup"><span data-stu-id="cb63c-104">Windows provides several C++/COM APIs for graphics.</span></span> <span data-ttu-id="cb63c-105">Эти API показаны на следующей схеме.</span><span class="sxs-lookup"><span data-stu-id="cb63c-105">These APIs are shown in the following diagram.</span></span>

![Схема, на которой показаны API графических интерфейсов Windows.](images/graphics01.png)

-   <span data-ttu-id="cb63c-107">Интерфейс графических устройств (GDI) — это исходный графический интерфейс для Windows.</span><span class="sxs-lookup"><span data-stu-id="cb63c-107">Graphics Device Interface (GDI) is the original graphics interface for Windows.</span></span> <span data-ttu-id="cb63c-108">Интерфейс GDI впервые был написан для 16-разрядной версии Windows, а затем обновлен для 32-разрядных и 64-разрядных систем Windows.</span><span class="sxs-lookup"><span data-stu-id="cb63c-108">GDI was first written for 16-bit Windows and then updated for 32-bit and 64-bit Windows.</span></span>
-   <span data-ttu-id="cb63c-109">Интерфейс GDI+ появился в Windows XP в качестве последователей для GDI.</span><span class="sxs-lookup"><span data-stu-id="cb63c-109">GDI+ was introduced in Windows XP as a successor to GDI.</span></span> <span data-ttu-id="cb63c-110">Доступ к библиотеке GDI+ осуществляется с помощью набора классов C++, которые заключают плоские функции C.</span><span class="sxs-lookup"><span data-stu-id="cb63c-110">The GDI+ library is accessed through a set of C++ classes that wrap flat C functions.</span></span> <span data-ttu-id="cb63c-111">Платформа .NET Framework также предоставляет управляемую версию GDI+ в пространстве имен **System. Drawing** .</span><span class="sxs-lookup"><span data-stu-id="cb63c-111">The .NET Framework also provides a managed version of GDI+ in the **System.Drawing** namespace.</span></span>
-   <span data-ttu-id="cb63c-112">Direct3D поддерживает трехмерную графику.</span><span class="sxs-lookup"><span data-stu-id="cb63c-112">Direct3D supports 3-D graphics.</span></span>
-   <span data-ttu-id="cb63c-113">Direct2D — это современный API для двухмерной графики, последовательный и GDI, и GDI+.</span><span class="sxs-lookup"><span data-stu-id="cb63c-113">Direct2D is a modern API for 2-D graphics, the successor to both GDI and GDI+.</span></span>
-   <span data-ttu-id="cb63c-114">DirectWrite — это разметка текста и подсистема растрирования.</span><span class="sxs-lookup"><span data-stu-id="cb63c-114">DirectWrite is a text layout and rasterization engine.</span></span> <span data-ttu-id="cb63c-115">Для рисования растрового текста можно использовать GDI или Direct2D.</span><span class="sxs-lookup"><span data-stu-id="cb63c-115">You can use either GDI or Direct2D to draw the rasterized text.</span></span>
-   <span data-ttu-id="cb63c-116">Графическая инфраструктура DirectX (DXGI) выполняет низкоуровневые задачи, такие как показ кадров для выходных данных.</span><span class="sxs-lookup"><span data-stu-id="cb63c-116">DirectX Graphics Infrastructure (DXGI) performs low-level tasks, such as presenting frames for output.</span></span> <span data-ttu-id="cb63c-117">Большинство приложений не используют DXGI напрямую.</span><span class="sxs-lookup"><span data-stu-id="cb63c-117">Most applications do not use DXGI directly.</span></span> <span data-ttu-id="cb63c-118">Вместо этого он служит промежуточным слоем между графическим драйвером и Direct3D.</span><span class="sxs-lookup"><span data-stu-id="cb63c-118">Rather, it serves as an intermediate layer between the graphics driver and Direct3D.</span></span>

<span data-ttu-id="cb63c-119">Direct2D и DirectWrite появились в Windows 7.</span><span class="sxs-lookup"><span data-stu-id="cb63c-119">Direct2D and DirectWrite were introduced in Windows 7.</span></span> <span data-ttu-id="cb63c-120">Они также доступны для Windows Vista и Windows Server 2008 с помощью обновления платформы.</span><span class="sxs-lookup"><span data-stu-id="cb63c-120">They are also available for Windows Vista and Windows Server 2008 through a Platform Update.</span></span> <span data-ttu-id="cb63c-121">Дополнительные сведения см. в [статье обновление платформы для Windows Vista](../win7ip/platform-update-for-windows-vista-portal.md).</span><span class="sxs-lookup"><span data-stu-id="cb63c-121">For more information, see [Platform Update for Windows Vista](../win7ip/platform-update-for-windows-vista-portal.md).</span></span>

<span data-ttu-id="cb63c-122">Direct2D является фокусом этого модуля.</span><span class="sxs-lookup"><span data-stu-id="cb63c-122">Direct2D is the focus of this module.</span></span> <span data-ttu-id="cb63c-123">Хотя GDI и GDI+ продолжают поддерживаться в Windows, для новых программ рекомендуется использовать Direct2D и DirectWrite.</span><span class="sxs-lookup"><span data-stu-id="cb63c-123">While both GDI and GDI+ continue to be supported in Windows, Direct2D and DirectWrite are recommended for new programs.</span></span> <span data-ttu-id="cb63c-124">В некоторых случаях сочетание технологий может оказаться более практичным.</span><span class="sxs-lookup"><span data-stu-id="cb63c-124">In some cases, a mix of technologies might be more practical.</span></span> <span data-ttu-id="cb63c-125">В таких ситуациях Direct2D и DirectWrite предназначены для взаимодействия с GDI.</span><span class="sxs-lookup"><span data-stu-id="cb63c-125">For these situations, Direct2D and DirectWrite are designed to interoperate with GDI.</span></span>

<span data-ttu-id="cb63c-126">В следующих разделах описаны некоторые преимущества Direct2D.</span><span class="sxs-lookup"><span data-stu-id="cb63c-126">The next sections describe some of the benefits of Direct2D.</span></span>

### <a name="hardware-acceleration"></a><span data-ttu-id="cb63c-127">Аппаратное ускорение</span><span class="sxs-lookup"><span data-stu-id="cb63c-127">Hardware Acceleration</span></span>

<span data-ttu-id="cb63c-128">Термин *аппаратное ускорение* означает графические вычисления, выполняемые графическим процессором (GPU), а не ЦП.</span><span class="sxs-lookup"><span data-stu-id="cb63c-128">The term *hardware acceleration* refers to graphics computations performed by the graphics processing unit (GPU), rather than the CPU.</span></span> <span data-ttu-id="cb63c-129">Современные графические процессоры в высокой степени оптимизированы для типов вычислений, используемых при отрисовке графики.</span><span class="sxs-lookup"><span data-stu-id="cb63c-129">Modern GPUs are highly optimized for the types of computation used in rendering graphics.</span></span> <span data-ttu-id="cb63c-130">Как правило, большую часть этой работы, которая перемещается из ЦП в GPU, лучше.</span><span class="sxs-lookup"><span data-stu-id="cb63c-130">Generally, the more of this work that is moved from the CPU to the GPU, the better.</span></span>

<span data-ttu-id="cb63c-131">Хотя GDI поддерживает аппаратное ускорение для определенных операций, многие операции GDI привязаны к ЦП.</span><span class="sxs-lookup"><span data-stu-id="cb63c-131">While GDI supports hardware acceleration for certain operations, many GDI operations are bound to the CPU.</span></span> <span data-ttu-id="cb63c-132">Direct2D размещается поверх Direct3D и использует все преимущества аппаратного ускорения, обеспечиваемого GPU.</span><span class="sxs-lookup"><span data-stu-id="cb63c-132">Direct2D is layered on top of Direct3D, and takes full advantage of hardware acceleration provided by the GPU.</span></span> <span data-ttu-id="cb63c-133">Если GPU не поддерживает функции, необходимые для Direct2D, то Direct2D возвращается к визуализации программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="cb63c-133">If the GPU does not support the features needed for Direct2D, then Direct2D falls back to software rendering.</span></span> <span data-ttu-id="cb63c-134">В целом, в большинстве случаев Direct2D выполняет GDI и GDI+.</span><span class="sxs-lookup"><span data-stu-id="cb63c-134">Overall, Direct2D outperforms GDI and GDI+ in most situations.</span></span>

### <a name="transparency-and-anti-aliasing"></a><span data-ttu-id="cb63c-135">Прозрачность и сглаживание</span><span class="sxs-lookup"><span data-stu-id="cb63c-135">Transparency and Anti-aliasing</span></span>

<span data-ttu-id="cb63c-136">Direct2D поддерживает полностью альфа-смешение с аппаратным ускорением (прозрачность).</span><span class="sxs-lookup"><span data-stu-id="cb63c-136">Direct2D supports fully hardware-accelerated alpha-blending (transparency).</span></span>

<span data-ttu-id="cb63c-137">В GDI предусмотрена ограниченная поддержка альфа-смешения.</span><span class="sxs-lookup"><span data-stu-id="cb63c-137">GDI has limited support for alpha-blending.</span></span> <span data-ttu-id="cb63c-138">Большинство функций GDI не поддерживают альфа-смешение, хотя GDI поддерживает альфа-смешение во время операции BitBlt.</span><span class="sxs-lookup"><span data-stu-id="cb63c-138">Most GDI functions do not support alpha blending, although GDI does support alpha blending during a bitblt operation.</span></span> <span data-ttu-id="cb63c-139">GDI+ поддерживает прозрачность, но альфа-смешение выполняется ЦП, поэтому не имеет смысла использовать аппаратное ускорение.</span><span class="sxs-lookup"><span data-stu-id="cb63c-139">GDI+ supports transparency, but the alpha blending is performed by the CPU, so it does not benefit from hardware acceleration.</span></span>

<span data-ttu-id="cb63c-140">Альфа-смешение с аппаратным ускорением также обеспечивает сглаживание.</span><span class="sxs-lookup"><span data-stu-id="cb63c-140">Hardware-accelerated alpha-blending also enables anti-aliasing.</span></span> <span data-ttu-id="cb63c-141">*Присвоение псевдонимов* является артефактом, вызванным выборкой непрерывной функции.</span><span class="sxs-lookup"><span data-stu-id="cb63c-141">*Aliasing* is an artifact caused by sampling a continuous function.</span></span> <span data-ttu-id="cb63c-142">Например, при преобразовании кривой линии в Пиксели псевдоним может привести к неровному виду. \[ 3 \] любая методика, которая сокращает количество артефактов, вызванных псевдонимами, считается формой сглаживания.</span><span class="sxs-lookup"><span data-stu-id="cb63c-142">For example, when a curved line is converted to pixels, aliasing can cause a jagged appearance.\[3\] Any technique that reduces the artifacts caused by aliasing is considered a form of anti-aliasing.</span></span> <span data-ttu-id="cb63c-143">В графике Сглаживание выполняется путем смешения краев с фоном.</span><span class="sxs-lookup"><span data-stu-id="cb63c-143">In graphics, anti-aliasing is done by blending edges with the background.</span></span> <span data-ttu-id="cb63c-144">Например, вот круг, рисуемый GDI, и тот же круг, нарисованный Direct2D.</span><span class="sxs-lookup"><span data-stu-id="cb63c-144">For example, here is a circle drawn by GDI and the same circle drawn by Direct2D.</span></span>

![Иллюстрация приемов сглаживания в Direct2D.](images/graphics02.png)

<span data-ttu-id="cb63c-146">На следующем рисунке показаны подробные сведения о каждом кружке.</span><span class="sxs-lookup"><span data-stu-id="cb63c-146">The next image shows a detail of each circle.</span></span>

![сведения о предыдущем изображении.](images/graphics03.png)

<span data-ttu-id="cb63c-148">Круг, рисуемый GDI (слева), состоит из черных пикселов, которые представляют собой приблизительную кривую.</span><span class="sxs-lookup"><span data-stu-id="cb63c-148">The circle drawn by GDI (left) consists of black pixels that approximate a curve.</span></span> <span data-ttu-id="cb63c-149">Круг, рисуемый Direct2D (справа), использует смешивание для создания гладкой кривой.</span><span class="sxs-lookup"><span data-stu-id="cb63c-149">The circle drawn by Direct2D (right) uses blending to create a smoother curve.</span></span>

<span data-ttu-id="cb63c-150">GDI не поддерживает сглаживание при рисовании геометрических объектов (линий и кривых).</span><span class="sxs-lookup"><span data-stu-id="cb63c-150">GDI does not support anti-aliasing when it draws geometry (lines and curves).</span></span> <span data-ttu-id="cb63c-151">GDI может нарисовать сглаженный текст с помощью технологии ClearType; но в противном случае текст GDI также имеет псевдоним.</span><span class="sxs-lookup"><span data-stu-id="cb63c-151">GDI can draw anti-aliased text using ClearType; but otherwise, GDI text is aliased as well.</span></span> <span data-ttu-id="cb63c-152">Псевдонимы особенно заметны для текста, поскольку неровные линии нарушают структуру шрифта, делая текст менее удобочитаемым.</span><span class="sxs-lookup"><span data-stu-id="cb63c-152">Aliasing is particularly noticeable for text, because the jagged lines disrupt the font design, making the text less readable.</span></span> <span data-ttu-id="cb63c-153">Хотя интерфейс GDI+ поддерживает сглаживание, он применяется ЦП, поэтому производительность не настолько хороша, как Direct2D.</span><span class="sxs-lookup"><span data-stu-id="cb63c-153">Although GDI+ supports anti-aliasing, it is applied by the CPU, so the performance is not as good as Direct2D.</span></span>

### <a name="vector-graphics"></a><span data-ttu-id="cb63c-154">Векторная графика</span><span class="sxs-lookup"><span data-stu-id="cb63c-154">Vector Graphics</span></span>

<span data-ttu-id="cb63c-155">Direct2D поддерживает *векторную графику*.</span><span class="sxs-lookup"><span data-stu-id="cb63c-155">Direct2D supports *vector graphics*.</span></span> <span data-ttu-id="cb63c-156">В векторной графике математические формулы используются для представления линий и кривых.</span><span class="sxs-lookup"><span data-stu-id="cb63c-156">In vector graphics, mathematical formulas are used to represent lines and curves.</span></span> <span data-ttu-id="cb63c-157">Эти формулы не зависят от разрешения экрана, поэтому их можно масштабировать до произвольных измерений.</span><span class="sxs-lookup"><span data-stu-id="cb63c-157">These formulas are not dependent on screen resolution, so they can be scaled to arbitrary dimensions.</span></span> <span data-ttu-id="cb63c-158">Векторная графика особенно полезна, когда изображение необходимо масштабировать для поддержки различных размеров монитора или разрешений экрана.</span><span class="sxs-lookup"><span data-stu-id="cb63c-158">Vector graphics are particularly useful when an image must be scaled to support different monitor sizes or screen resolutions.</span></span>

## <a name="next"></a><span data-ttu-id="cb63c-159">Следующая</span><span class="sxs-lookup"><span data-stu-id="cb63c-159">Next</span></span>

[<span data-ttu-id="cb63c-160">диспетчер окон рабочего стола</span><span class="sxs-lookup"><span data-stu-id="cb63c-160">The Desktop Window Manager</span></span>](the-desktop-window-manager.md)

 

 
