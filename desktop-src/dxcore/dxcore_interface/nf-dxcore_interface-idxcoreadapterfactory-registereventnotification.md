---
title: IDXCoreAdapterFactory::RegisterEventNotification
description: Регистрируется для получения уведомлений о конкретных условиях из адаптера Дкскоре или из списка адаптеров.
ms.localizationpriority: low
ms.topic: reference
ms.date: 06/20/2019
ms.openlocfilehash: 3643fbb01fc955049c297a577f18d4d276e73f46
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104488084"
---
# <a name="idxcoreadapterfactoryregistereventnotification-method"></a><span data-ttu-id="e0dfb-103">Метод Идкскореадаптерфактори:: Регистеревентнотификатион</span><span class="sxs-lookup"><span data-stu-id="e0dfb-103">IDXCoreAdapterFactory::RegisterEventNotification method</span></span>

<span data-ttu-id="e0dfb-104">Регистрируется для получения уведомлений о конкретных условиях из адаптера Дкскоре или из списка адаптеров.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-104">Registers to receive notifications of specific conditions from a DXCore adapter or adapter list.</span></span> <span data-ttu-id="e0dfb-105">Инструкции по программированию и примеры кода см. [в разделе Использование дкскоре для перечисления адаптеров](../dxcore-enum-adapters.md).</span><span class="sxs-lookup"><span data-stu-id="e0dfb-105">For programming guidance, and code examples, see [Using DXCore to enumerate adapters](../dxcore-enum-adapters.md).</span></span>

## <a name="syntax"></a><span data-ttu-id="e0dfb-106">Синтаксис</span><span class="sxs-lookup"><span data-stu-id="e0dfb-106">Syntax</span></span>

```cpp
virtual HRESULT STDMETHODCALLTYPE RegisterEventNotification(
  _In_ IUnknown *dxCoreObject,
  DXCoreNotificationType notificationType,
  _In_ PFN_DXCORE_NOTIFICATION_CALLBACK callbackFunction,
  _In_opt_ void *callbackContext,
  _Out_ uint32_t *eventCookie) = 0;
```

## <a name="parameters"></a><span data-ttu-id="e0dfb-107">Параметры</span><span class="sxs-lookup"><span data-stu-id="e0dfb-107">Parameters</span></span>

### <a name="dxcoreobject-in"></a><span data-ttu-id="e0dfb-108">Дкскореобжект [in]</span><span class="sxs-lookup"><span data-stu-id="e0dfb-108">dxCoreObject [in]</span></span>

<span data-ttu-id="e0dfb-109">Тип: **[IUnknown](/windows/win32/api/unknwn/nn-unknwn-iunknown)\***</span><span class="sxs-lookup"><span data-stu-id="e0dfb-109">Type: **[IUnknown](/windows/win32/api/unknwn/nn-unknwn-iunknown)\***</span></span>

<span data-ttu-id="e0dfb-110">Объект Дкскоре ([идкскореадаптер](./nn-dxcore_interface-idxcoreadapter.md) или [идкскореадаптерлист](./nn-dxcore_interface-idxcoreadapterlist.md)), чьи уведомления подписаны на.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-110">The DXCore object ([IDXCoreAdapter](./nn-dxcore_interface-idxcoreadapter.md) or [IDXCoreAdapterList](./nn-dxcore_interface-idxcoreadapterlist.md)) whose notifications you're subscribing to.</span></span>

### <a name="notificationtype"></a><span data-ttu-id="e0dfb-111">notificationType</span><span class="sxs-lookup"><span data-stu-id="e0dfb-111">notificationType</span></span>

<span data-ttu-id="e0dfb-112">Тип: **[дкскоренотификатионтипе](./ne-dxcore_interface-dxcorenotificationtype.md)**</span><span class="sxs-lookup"><span data-stu-id="e0dfb-112">Type: **[DXCoreNotificationType](./ne-dxcore_interface-dxcorenotificationtype.md)**</span></span>

<span data-ttu-id="e0dfb-113">Тип уведомления, для которого выполняется регистрация.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-113">The type of notification that you're registering for.</span></span> <span data-ttu-id="e0dfb-114">Сведения о типах, допустимых для типов объектов, см. в таблице в [дкскоренотификатионтипе](./ne-dxcore_interface-dxcorenotificationtype.md) .</span><span class="sxs-lookup"><span data-stu-id="e0dfb-114">See the table in [DXCoreNotificationType](./ne-dxcore_interface-dxcorenotificationtype.md) for info about what types are valid with which kinds of objects.</span></span>

### <a name="callbackfunction-in"></a><span data-ttu-id="e0dfb-115">Каллбаккфунктион [in]</span><span class="sxs-lookup"><span data-stu-id="e0dfb-115">callbackFunction [in]</span></span>

<span data-ttu-id="e0dfb-116">Тип: **[PFN_DXCORE_NOTIFICATION_CALLBACK](./nc-dxcore_interface-pfn_dxcore_notification_callback.md)**</span><span class="sxs-lookup"><span data-stu-id="e0dfb-116">Type: **[PFN_DXCORE_NOTIFICATION_CALLBACK](./nc-dxcore_interface-pfn_dxcore_notification_callback.md)**</span></span>

<span data-ttu-id="e0dfb-117">Указатель на функцию обратного вызова (реализованную приложением), который вызывается объектом Дкскоре для событий уведомления.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-117">A pointer to a callback function (implemented by your application), which is called by the DXCore object for notification events.</span></span> <span data-ttu-id="e0dfb-118">Сигнатура функции см. в разделе [PFN_DXCORE_NOTIFICATION_CALLBACK](./nc-dxcore_interface-pfn_dxcore_notification_callback.md).</span><span class="sxs-lookup"><span data-stu-id="e0dfb-118">For the signature of the function, see [PFN_DXCORE_NOTIFICATION_CALLBACK](./nc-dxcore_interface-pfn_dxcore_notification_callback.md).</span></span>

### <a name="callbackcontext-in"></a><span data-ttu-id="e0dfb-119">callbackContext [in]</span><span class="sxs-lookup"><span data-stu-id="e0dfb-119">callbackContext [in]</span></span>

<span data-ttu-id="e0dfb-120">Тип: **void \***</span><span class="sxs-lookup"><span data-stu-id="e0dfb-120">Type: **void\***</span></span>

<span data-ttu-id="e0dfb-121">Необязательный указатель на объект, содержащий сведения о контексте.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-121">An optional pointer to an object containing context info.</span></span> <span data-ttu-id="e0dfb-122">Этот объект передается функции обратного вызова при возникновении уведомления.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-122">This object is passed to your callback function when the notification is raised.</span></span>

### <a name="eventcookie-out"></a><span data-ttu-id="e0dfb-123">Евенткукие [out]</span><span class="sxs-lookup"><span data-stu-id="e0dfb-123">eventCookie [out]</span></span>

<span data-ttu-id="e0dfb-124">Тип: **uint32_t \***</span><span class="sxs-lookup"><span data-stu-id="e0dfb-124">Type: **uint32_t\***</span></span>

<span data-ttu-id="e0dfb-125">Указатель на значение **uint32_t** .</span><span class="sxs-lookup"><span data-stu-id="e0dfb-125">A pointer to a **uint32_t** value.</span></span> <span data-ttu-id="e0dfb-126">В случае успеха функция отменяет ссылку на указатель и присваивает значение ненулевому значению cookie, представляющему эту регистрацию.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-126">If successful, the function dereferences the pointer and sets the value to a non-zero cookie value representing this registration.</span></span> <span data-ttu-id="e0dfb-127">Используйте это значение файла cookie для отмены регистрации в уведомлении путем вызова [идкскореадаптерфактори:: унрегистеревентнотификатион](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md).</span><span class="sxs-lookup"><span data-stu-id="e0dfb-127">Use this cookie value to unregister from the notification by calling [IDXCoreAdapterFactory::UnregisterEventNotification](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md).</span></span> <span data-ttu-id="e0dfb-128">См. **Примечания**.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-128">See **Remarks**.</span></span>

<span data-ttu-id="e0dfb-129">В случае неудачи функция отменяет ссылку на указатель и устанавливает значение равным нулю, которое представляет недопустимое значение cookie.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-129">If unsuccessful, the function dereferences the pointer and sets the value to zero, which represents an invalid cookie value.</span></span>

## <a name="returns"></a><span data-ttu-id="e0dfb-130">Возвращаемое значение</span><span class="sxs-lookup"><span data-stu-id="e0dfb-130">Returns</span></span>

<span data-ttu-id="e0dfb-131">Тип: **[HRESULT](../../com/structure-of-com-error-codes.md)**</span><span class="sxs-lookup"><span data-stu-id="e0dfb-131">Type: **[HRESULT](../../com/structure-of-com-error-codes.md)**</span></span>

<span data-ttu-id="e0dfb-132">Если функция завершается с ошибкой, она возвращает **S_OK**.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-132">If the function succeeds, it returns **S_OK**.</span></span> <span data-ttu-id="e0dfb-133">В противном случае возвращается [](../../com/structure-of-com-error-codes.md) [код ошибки](../../com/com-error-codes-10.md)HRESULT.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-133">Otherwise, it returns an [**HRESULT**](../../com/structure-of-com-error-codes.md) [error code](../../com/com-error-codes-10.md).</span></span>

|<span data-ttu-id="e0dfb-134">Возвращаемое значение</span><span class="sxs-lookup"><span data-stu-id="e0dfb-134">Return value</span></span>|<span data-ttu-id="e0dfb-135">Описание</span><span class="sxs-lookup"><span data-stu-id="e0dfb-135">Description</span></span>|
|-|-|
|<span data-ttu-id="e0dfb-136">DXGI_ERROR_INVALID_CALL</span><span class="sxs-lookup"><span data-stu-id="e0dfb-136">DXGI_ERROR_INVALID_CALL</span></span>|<span data-ttu-id="e0dfb-137">*нотификатионтипе* не поддерживается операционной системой (ОС).</span><span class="sxs-lookup"><span data-stu-id="e0dfb-137">*notificationType* is unsupported by the operating system (OS).</span></span>|
|<span data-ttu-id="e0dfb-138">E_INVALIDARG</span><span class="sxs-lookup"><span data-stu-id="e0dfb-138">E_INVALIDARG</span></span>|<span data-ttu-id="e0dfb-139">`nullptr` был предоставлен для *дкскореобжект* или если было предоставлено недопустимое сочетание *нотификатионтипе* и *дкскореобжект* .</span><span class="sxs-lookup"><span data-stu-id="e0dfb-139">`nullptr` was provided for *dxCoreObject*, or if an invalid *notificationType* and *dxCoreObject* combination was provided.</span></span>|
|<span data-ttu-id="e0dfb-140">E_POINTER</span><span class="sxs-lookup"><span data-stu-id="e0dfb-140">E_POINTER</span></span>|<span data-ttu-id="e0dfb-141">`nullptr` был предоставлен для *каллбаккфунктион* или *евенткукие*.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-141">`nullptr` was provided for either *callbackFunction* or *eventCookie*.</span></span>|

## <a name="remarks"></a><span data-ttu-id="e0dfb-142">Комментарии</span><span class="sxs-lookup"><span data-stu-id="e0dfb-142">Remarks</span></span>

<span data-ttu-id="e0dfb-143">**Регистеревентнотификатион** используется для регистрации событий, вызванных интерфейсами [идкскореадаптерлист](./nn-dxcore_interface-idxcoreadapterlist.md) и [идкскореадаптер](./nn-dxcore_interface-idxcoreadapter.md) .</span><span class="sxs-lookup"><span data-stu-id="e0dfb-143">You use **RegisterEventNotification** to register for events raised by [IDXCoreAdapterList](./nn-dxcore_interface-idxcoreadapterlist.md) and [IDXCoreAdapter](./nn-dxcore_interface-idxcoreadapter.md) interfaces.</span></span> <span data-ttu-id="e0dfb-144">Эти типы уведомлений поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-144">These notification types are supported.</span></span>

|[<span data-ttu-id="e0dfb-145">DXCoreNotificationType</span><span class="sxs-lookup"><span data-stu-id="e0dfb-145">DXCoreNotificationType</span></span>](./ne-dxcore_interface-dxcorenotificationtype.md)|<span data-ttu-id="e0dfb-146">Поддерживаемые *дкскореобжект*</span><span class="sxs-lookup"><span data-stu-id="e0dfb-146">Supported *dxCoreObject*</span></span>|<span data-ttu-id="e0dfb-147">Примечания</span><span class="sxs-lookup"><span data-stu-id="e0dfb-147">Notes</span></span>|
|-|-|-|
|<span data-ttu-id="e0dfb-148">адаптерлистстале</span><span class="sxs-lookup"><span data-stu-id="e0dfb-148">AdapterListStale</span></span>|<span data-ttu-id="e0dfb-149">**IDXCoreAdapterList**</span><span class="sxs-lookup"><span data-stu-id="e0dfb-149">**IDXCoreAdapterList**</span></span>|<span data-ttu-id="e0dfb-150">Указывает, что список адаптеров, отвечающих условиям фильтра, изменился.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-150">Indicates that the list of adapters meeting your filter criteria has changed.</span></span> <span data-ttu-id="e0dfb-151">Если список адаптеров устарел во время регистрации, метод обратного вызова вызывается немедленно.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-151">If the adapter list is stale at the time of registration, then your callback is immediately called.</span></span> <span data-ttu-id="e0dfb-152">Этот обратный вызов выполняется не чаще одного раза на регистрацию.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-152">This callback occurs at most one time per registration.</span></span>|
|<span data-ttu-id="e0dfb-153">адаптернолонжервалид</span><span class="sxs-lookup"><span data-stu-id="e0dfb-153">AdapterNoLongerValid</span></span>|<span data-ttu-id="e0dfb-154">**IDXCoreAdapter**</span><span class="sxs-lookup"><span data-stu-id="e0dfb-154">**IDXCoreAdapter**</span></span>|<span data-ttu-id="e0dfb-155">Указывает, что адаптер больше не действителен.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-155">Indicates that the adapter is no longer valid.</span></span> <span data-ttu-id="e0dfb-156">Если во время регистрации адаптер является недопустимым, то метод обратного вызова вызывается немедленно.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-156">If the adapter is invalid at registration time, then your callback is immediately called.</span></span>|
|<span data-ttu-id="e0dfb-157">адаптербуджетчанже</span><span class="sxs-lookup"><span data-stu-id="e0dfb-157">AdapterBudgetChange</span></span>|<span data-ttu-id="e0dfb-158">**IDXCoreAdapter**</span><span class="sxs-lookup"><span data-stu-id="e0dfb-158">**IDXCoreAdapter**</span></span>|<span data-ttu-id="e0dfb-159">Указывает, что произошло событие бюджетирования памяти, и необходимо вызвать [идкскореадаптер:: куеристате](./nf-dxcore_interface-idxcoreadapter-querystate.md) (WITH [Дкскореадаптерстате:: адаптермеморибуджет](./ne-dxcore_interface-dxcoreadapterstate.md)) для вычисления текущего состояния бюджета памяти.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-159">Indicates that a memory budgeting event has occurred, and that you should call [IDXCoreAdapter::QueryState](./nf-dxcore_interface-idxcoreadapter-querystate.md) (with [DXCoreAdapterState::AdapterMemoryBudget](./ne-dxcore_interface-dxcoreadapterstate.md)) to evaluate the current memory budget state.</span></span> <span data-ttu-id="e0dfb-160">После регистрации всегда будет выполняться начальный обратный вызов, позволяющий запрашивать начальное состояние.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-160">Upon registration, an initial callback will always occur to allow you to query the initial state.</span></span>|
|<span data-ttu-id="e0dfb-161">адаптерхардвареконтентпротектионтеардовн</span><span class="sxs-lookup"><span data-stu-id="e0dfb-161">AdapterHardwareContentProtectionTeardown</span></span>|<span data-ttu-id="e0dfb-162">**IDXCoreAdapter**</span><span class="sxs-lookup"><span data-stu-id="e0dfb-162">**IDXCoreAdapter**</span></span>|<span data-ttu-id="e0dfb-163">Указывает, что необходимо повторно оценить текущее состояние сеанса шифрования; Например, путем вызова [ID3D11VideoContext1:: чекккриптосессионстатус](/windows/win32/api/d3d11_1/nf-d3d11_1-id3d11videocontext1-checkcryptosessionstatus) , чтобы определить влияние аппаратного уничтожения на определенный интерфейс [ID3D11CryptoSession](/windows/win32/api/d3d11/nn-d3d11-id3d11cryptosession) .</span><span class="sxs-lookup"><span data-stu-id="e0dfb-163">Indicates that you should re-evaluate the current crypto session status; for example, by calling [ID3D11VideoContext1::CheckCryptoSessionStatus](/windows/win32/api/d3d11_1/nf-d3d11_1-id3d11videocontext1-checkcryptosessionstatus) to determine the impact of the hardware teardown for a specific [ID3D11CryptoSession](/windows/win32/api/d3d11/nn-d3d11-id3d11cryptosession) interface.</span></span> <span data-ttu-id="e0dfb-164">После регистрации всегда будет выполняться начальный обратный вызов, позволяющий запрашивать начальное состояние.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-164">Upon registration, an initial callback will always occur to allow you to query the initial state.</span></span>|

<span data-ttu-id="e0dfb-165">Вызов функции, предоставляемой в *каллбаккфунктион* , выполняется асинхронно в фоновом потоке дкскоре при возникновении обнаруженного события.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-165">A call to the function that you provide in *callbackFunction* is made asynchronously on a background thread by DXCore when the detected event occurs.</span></span> <span data-ttu-id="e0dfb-166">Нет никакой гарантии на порядок или время обратных вызовов &mdash; . несколько обратных вызовов могут выполняться в любом порядке или даже одновременно.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-166">No guarantee is made as to the ordering or timing of callbacks&mdash;multiple callbacks may occur in any order, or even simultaneously.</span></span> <span data-ttu-id="e0dfb-167">Можно даже вызвать обратный вызов до завершения **регистеревентнотификатион** .</span><span class="sxs-lookup"><span data-stu-id="e0dfb-167">It's even possible for your callback to be invoked before **RegisterEventNotification** has completed.</span></span> <span data-ttu-id="e0dfb-168">В этом случае Дкскоре гарантирует, что *евенткукие* задается перед вызовом обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-168">In that case, DXCore guarantees that your *eventCookie* is set before your callback is called.</span></span> <span data-ttu-id="e0dfb-169">Несколько обратных вызовов для определенной регистрации будут сериализованы по порядку.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-169">Multiple callbacks for a specific registration will be serialized in order.</span></span>

<span data-ttu-id="e0dfb-170">Обратные вызовы могут происходить в любое время до вызова [унрегистеревентнотификатион](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md)и завершения.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-170">Callbacks may occur at any time until you call [UnregisterEventNotification](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md), and it completes.</span></span> <span data-ttu-id="e0dfb-171">Обратные вызовы происходят в собственных потоках, и вы можете вызывать API Дкскоре в этих потоках, в том числе **унрегистеревентнотификатион**.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-171">Callbacks occur on their own threads, and you may make calls into the DXCore API on those threads, including **UnregisterEventNotification**.</span></span> <span data-ttu-id="e0dfb-172">Однако не следует освобождать последнюю ссылку на *дкскореобжект* в этом потоке.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-172">However, you must not release the last reference to the *dxCoreObject* on this thread.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e0dfb-173">Перед уничтожением объекта Дкскоре, представленного аргументом *дкскореобжект* , переданным в **регистеревентнотификатион**, необходимо использовать значение cookie для отмены регистрации этого объекта из уведомлений путем вызова [идкскореадаптерфактори:: унрегистеревентнотификатион](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md).</span><span class="sxs-lookup"><span data-stu-id="e0dfb-173">Before you destroy the DXCore object represented by the *dxCoreObject* argument passed to **RegisterEventNotification**, you must use the cookie value to unregister that object from notifications by calling [IDXCoreAdapterFactory::UnregisterEventNotification](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md).</span></span> <span data-ttu-id="e0dfb-174">Если этого не сделать, то при обнаружении ситуации будет создано неустранимое исключение.</span><span class="sxs-lookup"><span data-stu-id="e0dfb-174">If you don't do that, then a fatal exception is raised when the situation is detected.</span></span>

## <a name="see-also"></a><span data-ttu-id="e0dfb-175">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="e0dfb-175">See also</span></span>

<span data-ttu-id="e0dfb-176">[Идкскореадаптер](./nn-dxcore_interface-idxcoreadapter.md), [идкскореадаптерлист](./nn-dxcore_interface-idxcoreadapterlist.md), [идкскореадаптерфактори:: унрегистеревентнотификатион](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md), [DXCore Reference](../dxcore-reference.md), [Использование DXCore для перечисления адаптеров](../dxcore-enum-adapters.md)</span><span class="sxs-lookup"><span data-stu-id="e0dfb-176">[IDXCoreAdapter](./nn-dxcore_interface-idxcoreadapter.md), [IDXCoreAdapterList](./nn-dxcore_interface-idxcoreadapterlist.md), [IDXCoreAdapterFactory::UnregisterEventNotification](./nf-dxcore_interface-idxcoreadapterfactory-unregistereventnotification.md), [DXCore Reference](../dxcore-reference.md), [Using DXCore to enumerate adapters](../dxcore-enum-adapters.md)</span></span>