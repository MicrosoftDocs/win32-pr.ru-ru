---
description: Media Foundation преобразований (МФТС) — это эволюция модели преобразования, впервые представленной в DirectX Media Objects (дмос).
ms.assetid: 4e8c3ec9-6ffa-4858-a4ea-8ef8ccaf9253
title: Сравнение преобразований MFT и объектов DMO
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0e76e128ece1609f25e053486dbb6bcf4578161c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104072577"
---
# <a name="comparison-of-mfts-and-dmos"></a><span data-ttu-id="97fc4-103">Сравнение преобразований MFT и объектов DMO</span><span class="sxs-lookup"><span data-stu-id="97fc4-103">Comparison of MFTs and DMOs</span></span>

<span data-ttu-id="97fc4-104">Media Foundation преобразований (МФТС) — это эволюция модели преобразования, впервые представленной в DirectX Media Objects (дмос).</span><span class="sxs-lookup"><span data-stu-id="97fc4-104">Media Foundation transforms (MFTs) are an evolution of the transform model first introduced with DirectX Media Objects (DMOs).</span></span> <span data-ttu-id="97fc4-105">В этом разделе перечислены основные способы, в которых МФТС отличается от дмос.</span><span class="sxs-lookup"><span data-stu-id="97fc4-105">This topic summarizes the main ways in which MFTs differ from DMOs.</span></span> <span data-ttu-id="97fc4-106">Прочтите этот раздел, если вы уже знакомы с интерфейсами DMO или хотите преобразовать существующий объект DMO в таблицу MFT.</span><span class="sxs-lookup"><span data-stu-id="97fc4-106">Read this topic if you are already familiar with the DMO interfaces, or if you want to convert an existing DMO into an MFT.</span></span>

<span data-ttu-id="97fc4-107">В этом разделе содержатся следующие подразделы.</span><span class="sxs-lookup"><span data-stu-id="97fc4-107">This topic contains the following sections:</span></span>

-   [<span data-ttu-id="97fc4-108">Число потоков</span><span class="sxs-lookup"><span data-stu-id="97fc4-108">Number of Streams</span></span>](#number-of-streams)
-   [<span data-ttu-id="97fc4-109">Формат согласования</span><span class="sxs-lookup"><span data-stu-id="97fc4-109">Format Negotiation</span></span>](#format-negotiation)
-   [<span data-ttu-id="97fc4-110">Потоковая передача</span><span class="sxs-lookup"><span data-stu-id="97fc4-110">Streaming</span></span>](#streaming)
    -   [<span data-ttu-id="97fc4-111">Выделение ресурсов</span><span class="sxs-lookup"><span data-stu-id="97fc4-111">Allocating Resources</span></span>](#allocating-resources)
    -   [<span data-ttu-id="97fc4-112">Обработка данных</span><span class="sxs-lookup"><span data-stu-id="97fc4-112">Processing Data</span></span>](#processing-data)
    -   [<span data-ttu-id="97fc4-113">Очистки</span><span class="sxs-lookup"><span data-stu-id="97fc4-113">Flushing</span></span>](#flushing)
    -   [<span data-ttu-id="97fc4-114">Прекращение работы потока</span><span class="sxs-lookup"><span data-stu-id="97fc4-114">Stream Discontinuities</span></span>](#stream-discontinuities)
-   [<span data-ttu-id="97fc4-115">Прочие различия</span><span class="sxs-lookup"><span data-stu-id="97fc4-115">Miscellaneous Differences</span></span>](#miscellaneous-differences)
-   [<span data-ttu-id="97fc4-116">Флаги</span><span class="sxs-lookup"><span data-stu-id="97fc4-116">Flags</span></span>](#flags)
    -   [<span data-ttu-id="97fc4-117">Флаги ProcessInput</span><span class="sxs-lookup"><span data-stu-id="97fc4-117">ProcessInput Flags</span></span>](#processinput-flags)
    -   [<span data-ttu-id="97fc4-118">Флаги ProcessOutput</span><span class="sxs-lookup"><span data-stu-id="97fc4-118">ProcessOutput Flags</span></span>](#processoutput-flags)
    -   [<span data-ttu-id="97fc4-119">Флаги Жетинпутстатус</span><span class="sxs-lookup"><span data-stu-id="97fc4-119">GetInputStatus Flags</span></span>](#getinputstatus-flags)
    -   [<span data-ttu-id="97fc4-120">Флаги Жетаутпутстатус</span><span class="sxs-lookup"><span data-stu-id="97fc4-120">GetOutputStatus Flags</span></span>](#getoutputstatus-flags)
    -   [<span data-ttu-id="97fc4-121">Флаги Жетинпутстреаминфо</span><span class="sxs-lookup"><span data-stu-id="97fc4-121">GetInputStreamInfo Flags</span></span>](#getinputstreaminfo-flags)
    -   [<span data-ttu-id="97fc4-122">Флаги Жетаутпутстреаминфо</span><span class="sxs-lookup"><span data-stu-id="97fc4-122">GetOutputStreamInfo Flags</span></span>](#getoutputstreaminfo-flags)
    -   [<span data-ttu-id="97fc4-123">Флаги Сетинпуттипе и Сетаутпуттипе</span><span class="sxs-lookup"><span data-stu-id="97fc4-123">SetInputType/SetOutputType Flags</span></span>](#setinputtypesetoutputtype-flags)
-   [<span data-ttu-id="97fc4-124">Код ошибки</span><span class="sxs-lookup"><span data-stu-id="97fc4-124">Error Codes</span></span>](#error-codes)
-   [<span data-ttu-id="97fc4-125">Создание гибридных объектов DMO/MFT</span><span class="sxs-lookup"><span data-stu-id="97fc4-125">Creating Hybrid DMO/MFT Objects</span></span>](#creating-hybrid-dmomft-objects)
-   [<span data-ttu-id="97fc4-126">См. также</span><span class="sxs-lookup"><span data-stu-id="97fc4-126">Related topics</span></span>](#related-topics)

## <a name="number-of-streams"></a><span data-ttu-id="97fc4-127">Число потоков</span><span class="sxs-lookup"><span data-stu-id="97fc4-127">Number of Streams</span></span>

<span data-ttu-id="97fc4-128">Объект DMO имеет фиксированное число потоков, а Таблица MFT может поддерживать динамическое число потоков.</span><span class="sxs-lookup"><span data-stu-id="97fc4-128">A DMO has a fixed number of streams, while an MFT can support a dynamic number of streams.</span></span> <span data-ttu-id="97fc4-129">Клиент может добавлять входные потоки, и MFT может добавлять новые выходные потоки во время обработки.</span><span class="sxs-lookup"><span data-stu-id="97fc4-129">The client can add input streams, and the MFT can add new output streams during processing.</span></span> <span data-ttu-id="97fc4-130">Однако МФТС не требуются для поддержки динамических потоков.</span><span class="sxs-lookup"><span data-stu-id="97fc4-130">MFTs are not required to support dynamic streams, however.</span></span> <span data-ttu-id="97fc4-131">Таблица MFT может иметь фиксированное число потоков, как и DMO.</span><span class="sxs-lookup"><span data-stu-id="97fc4-131">An MFT can have a fixed number of streams, just like a DMO.</span></span>

<span data-ttu-id="97fc4-132">Для поддержки динамических потоков в таблице MFT используются следующие методы:</span><span class="sxs-lookup"><span data-stu-id="97fc4-132">The following methods are used to support dynamic streams on an MFT:</span></span>

-   [<span data-ttu-id="97fc4-133">**Имфтрансформ:: Аддинпутстреамс**</span><span class="sxs-lookup"><span data-stu-id="97fc4-133">**IMFTransform::AddInputStreams**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-addinputstreams)
-   [<span data-ttu-id="97fc4-134">**Имфтрансформ::D Елетеинпутстреам**</span><span class="sxs-lookup"><span data-stu-id="97fc4-134">**IMFTransform::DeleteInputStream**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-deleteinputstream)
-   [<span data-ttu-id="97fc4-135">**Имфтрансформ:: Жетстреамидс**</span><span class="sxs-lookup"><span data-stu-id="97fc4-135">**IMFTransform::GetStreamIDs**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-getstreamids)
-   [<span data-ttu-id="97fc4-136">**Имфтрансформ:: Жетстреамлимитс**</span><span class="sxs-lookup"><span data-stu-id="97fc4-136">**IMFTransform::GetStreamLimits**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-getstreamlimits)

<span data-ttu-id="97fc4-137">Кроме того, метод [**имфтрансформ::P роцессаутпут**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processoutput) определяет поведение при добавлении или удалении выходных потоков.</span><span class="sxs-lookup"><span data-stu-id="97fc4-137">In addition, the [**IMFTransform::ProcessOutput**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processoutput) method defines the behavior for adding or removing output streams.</span></span>

<span data-ttu-id="97fc4-138">Так как дмос имеют фиксированные потоки, потоки в DMO идентифицируются с помощью значений индекса, начинающегося с нуля.</span><span class="sxs-lookup"><span data-stu-id="97fc4-138">Because DMOs have fixed streams, the streams on a DMO are identified using zero-based index values.</span></span> <span data-ttu-id="97fc4-139">МФТС, с другой стороны, используют идентификаторы потоков, которые не обязательно соответствуют значениям индекса.</span><span class="sxs-lookup"><span data-stu-id="97fc4-139">MFTs, on the other hand, use stream identifiers that do not necessarily correspond to index values.</span></span> <span data-ttu-id="97fc4-140">Это связано с тем, что количество потоков в таблице MFT может измениться.</span><span class="sxs-lookup"><span data-stu-id="97fc4-140">This is because the number of streams on an MFT might change.</span></span> <span data-ttu-id="97fc4-141">Например, поток 0 может быть удален, что покидает поток 1 в качестве первого потока.</span><span class="sxs-lookup"><span data-stu-id="97fc4-141">For example, stream 0 might be removed, leaving stream 1 as the first stream.</span></span> <span data-ttu-id="97fc4-142">Однако MFT с фиксированным числом потоков должно учитывать то же соглашение, что и дмос, и использовать значения индекса для идентификаторов потоков.</span><span class="sxs-lookup"><span data-stu-id="97fc4-142">However, an MFT with a fixed number of streams should observe the same convention as DMOs and use index values for stream identifiers.</span></span>

## <a name="format-negotiation"></a><span data-ttu-id="97fc4-143">Формат согласования</span><span class="sxs-lookup"><span data-stu-id="97fc4-143">Format Negotiation</span></span>

<span data-ttu-id="97fc4-144">МФТС. Используйте интерфейс [**имфмедиатипе**](/windows/win32/api/mfobjects/nn-mfobjects-imfmediatype) для описания типов мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="97fc4-144">MFTs use the [**IMFMediaType**](/windows/win32/api/mfobjects/nn-mfobjects-imfmediatype) interface to describe media types.</span></span> <span data-ttu-id="97fc4-145">В противном случае форматирование согласования с МФТС работает с теми же основными принципами, что и в дмос.</span><span class="sxs-lookup"><span data-stu-id="97fc4-145">Otherwise, format negotiation with MFTs works on the same basic principles as with DMOs.</span></span> <span data-ttu-id="97fc4-146">В следующей таблице перечислены методы согласования формата для дмос и соответствующие методы для МФТС.</span><span class="sxs-lookup"><span data-stu-id="97fc4-146">The following table lists the format negotiation methods for DMOs and the corresponding methods for MFTs.</span></span>



| <span data-ttu-id="97fc4-147">Метод DMO</span><span class="sxs-lookup"><span data-stu-id="97fc4-147">DMO method</span></span>                                                                        | <span data-ttu-id="97fc4-148">MFT, метод</span><span class="sxs-lookup"><span data-stu-id="97fc4-148">MFT method</span></span>                                                                          |
|-----------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|
| [<span data-ttu-id="97fc4-149">**Имедиаобжект:: Жетинпуткурренттипе**</span><span class="sxs-lookup"><span data-stu-id="97fc4-149">**IMediaObject::GetInputCurrentType**</span></span>](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getinputcurrenttype)   | [<span data-ttu-id="97fc4-150">**Имфтрансформ:: Жетинпуткурренттипе**</span><span class="sxs-lookup"><span data-stu-id="97fc4-150">**IMFTransform::GetInputCurrentType**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-getinputcurrenttype)       |
| [<span data-ttu-id="97fc4-151">**Имедиаобжект:: Жетинпутмакслатенци**</span><span class="sxs-lookup"><span data-stu-id="97fc4-151">**IMediaObject::GetInputMaxLatency**</span></span>](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getinputmaxlatency)     | [<span data-ttu-id="97fc4-152">**Имфтрансформ:: Жетинпутстреаминфо**</span><span class="sxs-lookup"><span data-stu-id="97fc4-152">**IMFTransform::GetInputStreamInfo**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-getinputstreaminfo)         |
| [<span data-ttu-id="97fc4-153">**Имедиаобжект:: Жетинпутсизеинфо**</span><span class="sxs-lookup"><span data-stu-id="97fc4-153">**IMediaObject::GetInputSizeInfo**</span></span>](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getinputsizeinfo)         | [<span data-ttu-id="97fc4-154">**Имфтрансформ:: Жетинпутстреаминфо**</span><span class="sxs-lookup"><span data-stu-id="97fc4-154">**IMFTransform::GetInputStreamInfo**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-getinputstreaminfo)         |
| [<span data-ttu-id="97fc4-155">**Имедиаобжект:: Жетинпуттипе**</span><span class="sxs-lookup"><span data-stu-id="97fc4-155">**IMediaObject::GetInputType**</span></span>](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getinputtype)                 | [<span data-ttu-id="97fc4-156">**Имфтрансформ:: Жетинпутаваилаблетипе**</span><span class="sxs-lookup"><span data-stu-id="97fc4-156">**IMFTransform::GetInputAvailableType**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-getinputavailabletype)   |
| [<span data-ttu-id="97fc4-157">**Имедиаобжект:: Жетаутпуткурренттипе**</span><span class="sxs-lookup"><span data-stu-id="97fc4-157">**IMediaObject::GetOutputCurrentType**</span></span>](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getoutputcurrenttype) | [<span data-ttu-id="97fc4-158">**Имфтрансформ:: Жетаутпуткурренттипе**</span><span class="sxs-lookup"><span data-stu-id="97fc4-158">**IMFTransform::GetOutputCurrentType**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-getoutputcurrenttype)     |
| [<span data-ttu-id="97fc4-159">**Имедиаобжект:: Жетаутпутсизеинфо**</span><span class="sxs-lookup"><span data-stu-id="97fc4-159">**IMediaObject::GetOutputSizeInfo**</span></span>](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getoutputsizeinfo)       | [<span data-ttu-id="97fc4-160">**Имфтрансформ:: Жетаутпутстреаминфо**</span><span class="sxs-lookup"><span data-stu-id="97fc4-160">**IMFTransform::GetOutputStreamInfo**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-getoutputstreaminfo)       |
| [<span data-ttu-id="97fc4-161">**Имедиаобжект:: Жетаутпуттипе**</span><span class="sxs-lookup"><span data-stu-id="97fc4-161">**IMediaObject::GetOutputType**</span></span>](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-getoutputtype)               | [<span data-ttu-id="97fc4-162">**Имфтрансформ:: Жетаутпутаваилаблетипе**</span><span class="sxs-lookup"><span data-stu-id="97fc4-162">**IMFTransform::GetOutputAvailableType**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-getoutputavailabletype) |



 

## <a name="streaming"></a><span data-ttu-id="97fc4-163">Потоковая передача</span><span class="sxs-lookup"><span data-stu-id="97fc4-163">Streaming</span></span>

<span data-ttu-id="97fc4-164">Как и дмос, МФТС обрабатывать данные с помощью вызовов методов [**ProcessInput**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processinput) и [**ProcessOutput**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processoutput) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-164">Like DMOs, MFTs process data through calls to [**ProcessInput**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processinput) and [**ProcessOutput**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processoutput) methods.</span></span> <span data-ttu-id="97fc4-165">Ниже приведены основные различия между процессами DMO и MFT при потоковой передаче данных.</span><span class="sxs-lookup"><span data-stu-id="97fc4-165">Here are the major differences between DMO and MFT processes when streaming data.</span></span>

### <a name="allocating-resources"></a><span data-ttu-id="97fc4-166">Выделение ресурсов</span><span class="sxs-lookup"><span data-stu-id="97fc4-166">Allocating Resources</span></span>

<span data-ttu-id="97fc4-167">МФТС не имеют методов [**имедиаобжект:: аллокатестреамингресаурцес**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-allocatestreamingresources) и [**Имедиаобжект:: фристреамингресаурцес**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-freestreamingresources) , используемых с DMOs.</span><span class="sxs-lookup"><span data-stu-id="97fc4-167">MFTs do not have the [**IMediaObject::AllocateStreamingResources**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-allocatestreamingresources) and [**IMediaObject::FreeStreamingResources**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-freestreamingresources) methods used with DMOs.</span></span> <span data-ttu-id="97fc4-168">Чтобы эффективно обрабатывать распределение и освобождение ресурсов, MFT может отвечать на следующие сообщения в методе [**имфтрансформ::P роцессмессаже**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processmessage) :</span><span class="sxs-lookup"><span data-stu-id="97fc4-168">To handle allocation and deallocation of resources efficiently, an MFT can respond to the following messages in the [**IMFTransform::ProcessMessage**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processmessage) method:</span></span>

-   [<span data-ttu-id="97fc4-169">**\_ \_ уведомление о \_ начале \_ ПОТОКовой передачи сообщения MFT**</span><span class="sxs-lookup"><span data-stu-id="97fc4-169">**MFT\_MESSAGE\_NOTIFY\_BEGIN\_STREAMING**</span></span>](mft-message-notify-begin-streaming.md)
-   [<span data-ttu-id="97fc4-170">**\_ \_ уведомление о \_ начале \_ потока в \_ сообщении MFT**</span><span class="sxs-lookup"><span data-stu-id="97fc4-170">**MFT\_MESSAGE\_NOTIFY\_START\_OF\_STREAM**</span></span>](mft-message-notify-start-of-stream.md)

<span data-ttu-id="97fc4-171">Кроме того, клиент может сообщить начало и конец потока, вызвав [**ProcessMessage**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processmessage) со следующими сообщениями:</span><span class="sxs-lookup"><span data-stu-id="97fc4-171">In addition, the client can signal the start and end of a stream by calling [**ProcessMessage**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processmessage) with the following messages:</span></span>

-   [<span data-ttu-id="97fc4-172">**\_уведомление об \_ \_ окончании \_ \_ потока в сообщении MFT**</span><span class="sxs-lookup"><span data-stu-id="97fc4-172">**MFT\_MESSAGE\_NOTIFY\_END\_OF\_STREAM**</span></span>](mft-message-notify-end-of-stream.md)
-   [<span data-ttu-id="97fc4-173">**\_ \_ уведомление о \_ завершении \_ ПОТОКовой передачи сообщения MFT**</span><span class="sxs-lookup"><span data-stu-id="97fc4-173">**MFT\_MESSAGE\_NOTIFY\_END\_STREAMING**</span></span>](mft-message-notify-end-streaming.md)

<span data-ttu-id="97fc4-174">Эти два сообщения не имеют точной эквивалента DMO.</span><span class="sxs-lookup"><span data-stu-id="97fc4-174">These two messages have no exact DMO equivalent.</span></span>

### <a name="processing-data"></a><span data-ttu-id="97fc4-175">Обработка данных</span><span class="sxs-lookup"><span data-stu-id="97fc4-175">Processing Data</span></span>

<span data-ttu-id="97fc4-176">МФТС используют примеры носителей для хранения входных и выходных данных.</span><span class="sxs-lookup"><span data-stu-id="97fc4-176">MFTs use media samples to hold input and output data.</span></span> <span data-ttu-id="97fc4-177">Примеры носителей предоставляют интерфейс [**имфсампле**](/windows/win32/api/mfobjects/nn-mfobjects-imfsample) и содержат следующие данные:</span><span class="sxs-lookup"><span data-stu-id="97fc4-177">Media samples expose the [**IMFSample**](/windows/win32/api/mfobjects/nn-mfobjects-imfsample) interface, and contain the following data:</span></span>

-   <span data-ttu-id="97fc4-178">Метка времени и длительность.</span><span class="sxs-lookup"><span data-stu-id="97fc4-178">Time stamp and duration.</span></span>
-   <span data-ttu-id="97fc4-179">Атрибуты, содержащие сведения о каждой из образцов.</span><span class="sxs-lookup"><span data-stu-id="97fc4-179">Attributes that contain per-sample information.</span></span> <span data-ttu-id="97fc4-180">Список атрибутов см. в разделе [Sample Attributes](sample-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="97fc4-180">For a list of attributes, see [Sample Attributes](sample-attributes.md).</span></span>
-   <span data-ttu-id="97fc4-181">Ноль или более буферов мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="97fc4-181">Zero or more media buffers.</span></span> <span data-ttu-id="97fc4-182">Каждый буфер мультимедиа предоставляет интерфейс [**имфмедиабуффер**](/windows/win32/api/mfobjects/nn-mfobjects-imfmediabuffer) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-182">Each media buffer exposes the [**IMFMediaBuffer**](/windows/win32/api/mfobjects/nn-mfobjects-imfmediabuffer) interface.</span></span>

<span data-ttu-id="97fc4-183">Интерфейс [**имфмедиабуффер**](/windows/win32/api/mfobjects/nn-mfobjects-imfmediabuffer) аналогичен интерфейсу DMO **имедиабуффер** .</span><span class="sxs-lookup"><span data-stu-id="97fc4-183">The [**IMFMediaBuffer**](/windows/win32/api/mfobjects/nn-mfobjects-imfmediabuffer) interface is similar to the DMO **IMediaBuffer** interface.</span></span> <span data-ttu-id="97fc4-184">Чтобы получить доступ к базовому буферу памяти, вызовите [**имфмедиабуффер:: Lock**](/windows/win32/api/mfobjects/nf-mfobjects-imfmediabuffer-lock).</span><span class="sxs-lookup"><span data-stu-id="97fc4-184">To access the underlying memory buffer, call [**IMFMediaBuffer::Lock**](/windows/win32/api/mfobjects/nf-mfobjects-imfmediabuffer-lock).</span></span> <span data-ttu-id="97fc4-185">Этот метод примерно эквивалентен [**имедиабуффер:: жетбуфферандленгс**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediabuffer-getbufferandlength) для дмос.</span><span class="sxs-lookup"><span data-stu-id="97fc4-185">This method is roughly equivalent to [**IMediaBuffer::GetBufferAndLength**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediabuffer-getbufferandlength) for DMOs.</span></span>

<span data-ttu-id="97fc4-186">Для несжатых данных видео буфер мультимедиа может также поддерживать интерфейс [**IMF2DBuffer**](/windows/win32/api/mfobjects/nn-mfobjects-imf2dbuffer) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-186">For uncompressed video data, a media buffer might also support the [**IMF2DBuffer**](/windows/win32/api/mfobjects/nn-mfobjects-imf2dbuffer) interface.</span></span> <span data-ttu-id="97fc4-187">Файл MFT, который обрабатывает несжатое видео (как входные, так и выходные данные), должен быть подготовлен к использованию интерфейса **IMF2DBuffer** , если он предоставляет буфер.</span><span class="sxs-lookup"><span data-stu-id="97fc4-187">An MFT that processes uncompressed video (either as input or output) should be prepared to use the **IMF2DBuffer** interface if the buffer exposes it.</span></span> <span data-ttu-id="97fc4-188">Дополнительные сведения см. в разделе [несжатые Видеобуферы](uncompressed-video-buffers.md).</span><span class="sxs-lookup"><span data-stu-id="97fc4-188">For more information, see [Uncompressed Video Buffers](uncompressed-video-buffers.md).</span></span>

<span data-ttu-id="97fc4-189">Media Foundation предоставляет некоторые стандартные реализации [**имфмедиабуффер**](/windows/win32/api/mfobjects/nn-mfobjects-imfmediabuffer), поэтому обычно нет необходимости писать собственную реализацию.</span><span class="sxs-lookup"><span data-stu-id="97fc4-189">Media Foundation provides some standard implementations of [**IMFMediaBuffer**](/windows/win32/api/mfobjects/nn-mfobjects-imfmediabuffer), so it is generally not necessary to write your own implementation.</span></span> <span data-ttu-id="97fc4-190">Чтобы создать буфер DMO из буфера Media Foundation, вызовите [**мфкреателегацимедиабуфферонмфмедиабуффер**](/windows/win32/api/mfapi/nf-mfapi-mfcreatelegacymediabufferonmfmediabuffer).</span><span class="sxs-lookup"><span data-stu-id="97fc4-190">To create a DMO buffer from a Media Foundation buffer, call [**MFCreateLegacyMediaBufferOnMFMediaBuffer**](/windows/win32/api/mfapi/nf-mfapi-mfcreatelegacymediabufferonmfmediabuffer).</span></span>

### <a name="flushing"></a><span data-ttu-id="97fc4-191">Очистки</span><span class="sxs-lookup"><span data-stu-id="97fc4-191">Flushing</span></span>

<span data-ttu-id="97fc4-192">МФТС не имеют метода [**flush**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-flush) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-192">MFTs do not have a [**Flush**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-flush) method.</span></span> <span data-ttu-id="97fc4-193">Чтобы очистить MFT, вызовите [**имфтрансформ::P роцессмессаже**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processmessage) с сообщением о [**\_ \_ команде \_ очистки сообщения MFT**](mft-message-command-flush.md) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-193">To flush an MFT, call [**IMFTransform::ProcessMessage**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processmessage) with the [**MFT\_MESSAGE\_COMMAND\_FLUSH**](mft-message-command-flush.md) message.</span></span>

### <a name="stream-discontinuities"></a><span data-ttu-id="97fc4-194">Прекращение работы потока</span><span class="sxs-lookup"><span data-stu-id="97fc4-194">Stream Discontinuities</span></span>

<span data-ttu-id="97fc4-195">МФТС не имеют метода [**прекращения поддержки**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-discontinuity) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-195">MFTs do not have a [**Discontinuity**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-discontinuity) method.</span></span> <span data-ttu-id="97fc4-196">Чтобы сообщить о ненепрерывности в потоке, установите атрибут [**мфсампликстенсион для \_ небесперебойной**](mfsampleextension-discontinuity-attribute.md) работы в образце входных данных.</span><span class="sxs-lookup"><span data-stu-id="97fc4-196">To signal a discontinuity in a stream, set the [**MFSampleExtension\_Discontinuity**](mfsampleextension-discontinuity-attribute.md) attribute on the input sample.</span></span>

## <a name="miscellaneous-differences"></a><span data-ttu-id="97fc4-197">Прочие различия</span><span class="sxs-lookup"><span data-stu-id="97fc4-197">Miscellaneous Differences</span></span>

<span data-ttu-id="97fc4-198">Ниже приведены некоторые дополнительные незначительные отличия между МФТС и дмос.</span><span class="sxs-lookup"><span data-stu-id="97fc4-198">Here are some additional minor differences between MFTs and DMOs.</span></span>

-   <span data-ttu-id="97fc4-199">Для следующих методов DMO нет эквивалентов MFT:</span><span class="sxs-lookup"><span data-stu-id="97fc4-199">There are no MFT equivalents for the following DMO methods:</span></span>
    -   [<span data-ttu-id="97fc4-200">**Имедиаобжект:: Lock**</span><span class="sxs-lookup"><span data-stu-id="97fc4-200">**IMediaObject::Lock**</span></span>](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-lock)
    -   [<span data-ttu-id="97fc4-201">**Имедиаобжект:: Сетинпутмакслатенци**</span><span class="sxs-lookup"><span data-stu-id="97fc4-201">**IMediaObject::SetInputMaxLatency**</span></span>](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-setinputmaxlatency)
-   <span data-ttu-id="97fc4-202">МФТС не требуется для поддержки агрегирования.</span><span class="sxs-lookup"><span data-stu-id="97fc4-202">MFTs are not required to support aggregation.</span></span>
-   <span data-ttu-id="97fc4-203">МФТС поддерживает операцию, называемую *стоком*.</span><span class="sxs-lookup"><span data-stu-id="97fc4-203">MFTs support an operation called *draining*.</span></span> <span data-ttu-id="97fc4-204">Целью этого является обработка всех данных, остающихся в MF, без предоставления дополнительных входных данных в MFT (например, в конце потока).</span><span class="sxs-lookup"><span data-stu-id="97fc4-204">The purpose of draining is to process any data that remains in the MF, without providing any more input data to the MFT (for example, at the end of the stream).</span></span> <span data-ttu-id="97fc4-205">Чтобы очистить MFT, вызовите [**имфтрансформ::P роцессмессаже**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processmessage) с сообщением о [**\_ \_ \_ стоке команды сообщения MFT**](mft-message-command-drain.md) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-205">To drain an MFT, call [**IMFTransform::ProcessMessage**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processmessage) with the [**MFT\_MESSAGE\_COMMAND\_DRAIN**](mft-message-command-drain.md) message.</span></span> <span data-ttu-id="97fc4-206">Дополнительные сведения см. в разделе [Базовая модель обработки MFT](basic-mft-processing-model.md).</span><span class="sxs-lookup"><span data-stu-id="97fc4-206">For more information, see [Basic MFT Processing Model](basic-mft-processing-model.md).</span></span>
-   <span data-ttu-id="97fc4-207">МФТС могут иметь атрибуты, включая атрибуты для каждого потока.</span><span class="sxs-lookup"><span data-stu-id="97fc4-207">MFTs can have attributes, including per-stream attributes.</span></span> <span data-ttu-id="97fc4-208">Используйте следующие методы для получения атрибутов из MFT:</span><span class="sxs-lookup"><span data-stu-id="97fc4-208">Use the following methods to get the attributes from an MFT:</span></span>

    -   [<span data-ttu-id="97fc4-209">**Имфтрансформ:: OutAttribute**</span><span class="sxs-lookup"><span data-stu-id="97fc4-209">**IMFTransform::GetAttributes**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-getattributes)
    -   [<span data-ttu-id="97fc4-210">**Имфтрансформ:: Жетинпутстреаматтрибутес**</span><span class="sxs-lookup"><span data-stu-id="97fc4-210">**IMFTransform::GetInputStreamAttributes**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-getinputstreamattributes)
    -   [<span data-ttu-id="97fc4-211">**Имфтрансформ:: Жетаутпутстреаматтрибутес**</span><span class="sxs-lookup"><span data-stu-id="97fc4-211">**IMFTransform::GetOutputStreamAttributes**</span></span>](/windows/win32/api/mftransform/nf-mftransform-imftransform-getoutputstreamattributes)

-   <span data-ttu-id="97fc4-212">МФТС может обрабатывать события.</span><span class="sxs-lookup"><span data-stu-id="97fc4-212">MFTs can process events.</span></span> <span data-ttu-id="97fc4-213">Чтобы отправить событие в таблицу MFT, вызовите [**имфтрансформ::P роцессевент**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processevent).</span><span class="sxs-lookup"><span data-stu-id="97fc4-213">To send an event to an MFT, call [**IMFTransform::ProcessEvent**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processevent).</span></span> <span data-ttu-id="97fc4-214">MFT может отправить событие клиенту через метод [**ProcessOutput**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processoutput) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-214">An MFT can send an event to the client through the [**ProcessOutput**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processoutput) method.</span></span> <span data-ttu-id="97fc4-215">Дополнительные сведения см. в разделе [Базовая модель обработки MFT](basic-mft-processing-model.md).</span><span class="sxs-lookup"><span data-stu-id="97fc4-215">For more information, see [Basic MFT Processing Model](basic-mft-processing-model.md).</span></span>

## <a name="flags"></a><span data-ttu-id="97fc4-216">Флаги</span><span class="sxs-lookup"><span data-stu-id="97fc4-216">Flags</span></span>

<span data-ttu-id="97fc4-217">В следующих таблицах перечислены различные флаги DMO и их эквиваленты в MFT.</span><span class="sxs-lookup"><span data-stu-id="97fc4-217">The following tables list the various DMO flags and their MFT equivalents.</span></span> <span data-ttu-id="97fc4-218">Каждый раз, когда флаг DMO сопоставляется непосредственно с флагом MFT, оба флага имеют одинаковое числовое значение.</span><span class="sxs-lookup"><span data-stu-id="97fc4-218">Whenever a DMO flag maps directly to an MFT flag, both flags have the same numeric value.</span></span> <span data-ttu-id="97fc4-219">Однако некоторые флаги DMO не имеют точных эквивалентов MFT и наоборот.</span><span class="sxs-lookup"><span data-stu-id="97fc4-219">However, some DMO flags do not have exact MFT equivalents, and vice versa.</span></span>

### <a name="processinput-flags"></a><span data-ttu-id="97fc4-220">Флаги ProcessInput</span><span class="sxs-lookup"><span data-stu-id="97fc4-220">ProcessInput Flags</span></span>

<span data-ttu-id="97fc4-221">Дмос: присвоено перечисление [**\_ \_ \_ \_ \_ флагов буфера входных данных DMO**](/previous-versions/windows/embedded/aa451599(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-221">DMOs: [**\_DMO\_INPUT\_DATA\_BUFFER\_FLAGS**](/previous-versions/windows/embedded/aa451599(v=msdn.10)) enumeration.</span></span>

<span data-ttu-id="97fc4-222">МФТС: нет эквивалентного перечисления.</span><span class="sxs-lookup"><span data-stu-id="97fc4-222">MFTs: No equivalent enumeration.</span></span>



| <span data-ttu-id="97fc4-223">Флаг DMO</span><span class="sxs-lookup"><span data-stu-id="97fc4-223">DMO flag</span></span>                                  | <span data-ttu-id="97fc4-224">Флаг MFT</span><span class="sxs-lookup"><span data-stu-id="97fc4-224">MFT flag</span></span>                                                                                                                                      |
|-------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="97fc4-225">**\_входные \_ данные DMO \_ буфферф \_ точки**</span><span class="sxs-lookup"><span data-stu-id="97fc4-225">**DMO\_INPUT\_DATA\_BUFFERF\_SYNCPOINT**</span></span>  | <span data-ttu-id="97fc4-226">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-226">No equivalent flag.</span></span> <span data-ttu-id="97fc4-227">Вместо этого задайте атрибут [**мфсампликстенсион \_ клеанпоинт**](mfsampleextension-cleanpoint-attribute.md) в образце.</span><span class="sxs-lookup"><span data-stu-id="97fc4-227">Instead, set the [**MFSampleExtension\_CleanPoint**](mfsampleextension-cleanpoint-attribute.md) attribute on the sample.</span></span> |
| <span data-ttu-id="97fc4-228">**\_ \_ \_ время буфферф ВХОДных данных DMO \_**</span><span class="sxs-lookup"><span data-stu-id="97fc4-228">**DMO\_INPUT\_DATA\_BUFFERF\_TIME**</span></span>       | <span data-ttu-id="97fc4-229">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-229">No equivalent flag.</span></span> <span data-ttu-id="97fc4-230">Вместо этого вызовите [**имфсампле:: сетсамплетиме**](/windows/win32/api/mfobjects/nf-mfobjects-imfsample-setsampletime) в примере.</span><span class="sxs-lookup"><span data-stu-id="97fc4-230">Instead, call [**IMFSample::SetSampleTime**](/windows/win32/api/mfobjects/nf-mfobjects-imfsample-setsampletime) on the sample.</span></span>                                  |
| <span data-ttu-id="97fc4-231">**\_входные \_ данные DMO \_ буфферф \_ тимеленгс**</span><span class="sxs-lookup"><span data-stu-id="97fc4-231">**DMO\_INPUT\_DATA\_BUFFERF\_TIMELENGTH**</span></span> | <span data-ttu-id="97fc4-232">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-232">No equivalent flag.</span></span> <span data-ttu-id="97fc4-233">Вместо этого вызовите [**имфсампле:: сетсампледуратион**](/windows/win32/api/mfobjects/nf-mfobjects-imfsample-setsampleduration) в примере.</span><span class="sxs-lookup"><span data-stu-id="97fc4-233">Instead, call [**IMFSample::SetSampleDuration**](/windows/win32/api/mfobjects/nf-mfobjects-imfsample-setsampleduration) on the sample.</span></span>                          |



 

### <a name="processoutput-flags"></a><span data-ttu-id="97fc4-234">Флаги ProcessOutput</span><span class="sxs-lookup"><span data-stu-id="97fc4-234">ProcessOutput Flags</span></span>

<span data-ttu-id="97fc4-235">Дмос: перечисление [**\_ \_ \_ \_ флагов вывода процесса DMO**](/previous-versions/windows/desktop/api/Mediaobj/ne-mediaobj-_dmo_process_output_flags) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-235">DMOs: [**\_DMO\_PROCESS\_OUTPUT\_FLAGS**](/previous-versions/windows/desktop/api/Mediaobj/ne-mediaobj-_dmo_process_output_flags) enumeration.</span></span>

<span data-ttu-id="97fc4-236">МФТС: перечисление [**\_ \_ \_ \_ флагов вывода процесса MFT**](/windows/win32/api/mftransform/ne-mftransform-_mft_process_output_flags) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-236">MFTs: [**\_MFT\_PROCESS\_OUTPUT\_FLAGS**](/windows/win32/api/mftransform/ne-mftransform-_mft_process_output_flags) enumeration.</span></span>



| <span data-ttu-id="97fc4-237">Флаг DMO</span><span class="sxs-lookup"><span data-stu-id="97fc4-237">DMO flag</span></span>                                            | <span data-ttu-id="97fc4-238">Флаг MFT</span><span class="sxs-lookup"><span data-stu-id="97fc4-238">MFT flag</span></span>                                            |
|-----------------------------------------------------|-----------------------------------------------------|
| <span data-ttu-id="97fc4-239">**\_отбросить \_ выходные данные процесса DMO \_ \_ при \_ отсутствии \_ буфера**</span><span class="sxs-lookup"><span data-stu-id="97fc4-239">**DMO\_PROCESS\_OUTPUT\_DISCARD\_WHEN\_NO\_BUFFER**</span></span> | <span data-ttu-id="97fc4-240">**выходные данные процесса MFT отменяются \_ \_ \_ \_ при \_ отсутствии \_ буфера**</span><span class="sxs-lookup"><span data-stu-id="97fc4-240">**MFT\_PROCESS\_OUTPUT\_DISCARD\_WHEN\_NO\_BUFFER**</span></span> |



 

<span data-ttu-id="97fc4-241">Дмос: перечисление [**\_ \_ \_ \_ \_ флагов буфера выходных данных DMO**](/previous-versions/windows/desktop/api/Mediaobj/ne-mediaobj-_dmo_output_data_buffer_flags) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-241">DMOs: [**\_DMO\_OUTPUT\_DATA\_BUFFER\_FLAGS**](/previous-versions/windows/desktop/api/Mediaobj/ne-mediaobj-_dmo_output_data_buffer_flags) enumeration.</span></span>


<span data-ttu-id="97fc4-242">МФТС: перечисление [**\_ \_ \_ \_ \_ флагов буфера выходных данных MFT**](/windows/win32/api/mftransform/ne-mftransform-_mft_output_data_buffer_flags) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-242">MFTs: [**\_MFT\_OUTPUT\_DATA\_BUFFER\_FLAGS**](/windows/win32/api/mftransform/ne-mftransform-_mft_output_data_buffer_flags) enumeration.</span></span>



| <span data-ttu-id="97fc4-243">Флаг DMO</span><span class="sxs-lookup"><span data-stu-id="97fc4-243">DMO flag</span></span>                                   | <span data-ttu-id="97fc4-244">Флаг MFT</span><span class="sxs-lookup"><span data-stu-id="97fc4-244">MFT flag</span></span>                                                                                                                                            |
|--------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="97fc4-245">**\_ \_ \_ буфферф точки выходных данных \_ DMO**</span><span class="sxs-lookup"><span data-stu-id="97fc4-245">**DMO\_OUTPUT\_DATA\_BUFFERF\_SYNCPOINT**</span></span>  | <span data-ttu-id="97fc4-246">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-246">No equivalent flag.</span></span> <span data-ttu-id="97fc4-247">Вместо этого проверьте атрибут [**мфсампликстенсион \_ клеанпоинт**](mfsampleextension-cleanpoint-attribute.md) в образце.</span><span class="sxs-lookup"><span data-stu-id="97fc4-247">Instead, check for the [**MFSampleExtension\_CleanPoint**](mfsampleextension-cleanpoint-attribute.md) attribute on the sample.</span></span> |
| <span data-ttu-id="97fc4-248">**\_ \_ \_ время БУФФЕРФ выходных данных \_ DMO**</span><span class="sxs-lookup"><span data-stu-id="97fc4-248">**DMO\_OUTPUT\_DATA\_BUFFERF\_TIME**</span></span>       | <span data-ttu-id="97fc4-249">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-249">No equivalent flag.</span></span> <span data-ttu-id="97fc4-250">Вместо этого вызовите [**имфсампле:: жетсамплетиме**](/windows/win32/api/mfobjects/nf-mfobjects-imfsample-getsampletime) в примере.</span><span class="sxs-lookup"><span data-stu-id="97fc4-250">Instead, call [**IMFSample::GetSampleTime**](/windows/win32/api/mfobjects/nf-mfobjects-imfsample-getsampletime) on the sample.</span></span>                                        |
| <span data-ttu-id="97fc4-251">**\_ \_ \_ буфферф ТИМЕЛЕНГС выходных данных \_ DMO**</span><span class="sxs-lookup"><span data-stu-id="97fc4-251">**DMO\_OUTPUT\_DATA\_BUFFERF\_TIMELENGTH**</span></span> | <span data-ttu-id="97fc4-252">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-252">No equivalent flag.</span></span> <span data-ttu-id="97fc4-253">Вместо этого вызовите [**имфсампле:: жетсампледуратион**](/windows/win32/api/mfobjects/nf-mfobjects-imfsample-getsampleduration) в примере.</span><span class="sxs-lookup"><span data-stu-id="97fc4-253">Instead, call [**IMFSample::GetSampleDuration**](/windows/win32/api/mfobjects/nf-mfobjects-imfsample-getsampleduration) on the sample.</span></span>                                |
| <span data-ttu-id="97fc4-254">**\_буфферф выходных \_ данных DMO не \_ \_ завершен**</span><span class="sxs-lookup"><span data-stu-id="97fc4-254">**DMO\_OUTPUT\_DATA\_BUFFERF\_INCOMPLETE**</span></span> | <span data-ttu-id="97fc4-255">**\_Буфер выходных \_ данных \_ MFT \_ неполон**</span><span class="sxs-lookup"><span data-stu-id="97fc4-255">**MFT\_OUTPUT\_DATA\_BUFFER\_INCOMPLETE**</span></span>                                                                                                           |
| <span data-ttu-id="97fc4-256">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-256">No equivalent flag.</span></span>                        | <span data-ttu-id="97fc4-257">**\_ \_ \_ \_ изменение формата буфера выходных данных \_ MFT**</span><span class="sxs-lookup"><span data-stu-id="97fc4-257">**MFT\_OUTPUT\_DATA\_BUFFER\_FORMAT\_CHANGE**</span></span>                                                                                                       |
| <span data-ttu-id="97fc4-258">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-258">No equivalent flag.</span></span>                        | <span data-ttu-id="97fc4-259">**\_ \_ \_ \_ конечный поток буфера выходных данных \_ MFT**</span><span class="sxs-lookup"><span data-stu-id="97fc4-259">**MFT\_OUTPUT\_DATA\_BUFFER\_STREAM\_END**</span></span>                                                                                                          |
| <span data-ttu-id="97fc4-260">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-260">No equivalent flag.</span></span>                        | <span data-ttu-id="97fc4-261">**\_Буфер выходных \_ данных \_ MFT \_ без \_ примера**</span><span class="sxs-lookup"><span data-stu-id="97fc4-261">**MFT\_OUTPUT\_DATA\_BUFFER\_NO\_SAMPLE**</span></span>                                                                                                           |



 

### <a name="getinputstatus-flags"></a><span data-ttu-id="97fc4-262">Флаги Жетинпутстатус</span><span class="sxs-lookup"><span data-stu-id="97fc4-262">GetInputStatus Flags</span></span>

<span data-ttu-id="97fc4-263">Дмос: перечисление **\_ \_ \_ \_ флагов состояния ввода DMO** .</span><span class="sxs-lookup"><span data-stu-id="97fc4-263">DMOs: **\_DMO\_INPUT\_STATUS\_FLAGS** enumeration.</span></span>

<span data-ttu-id="97fc4-264">МФТС: перечисление [**\_ \_ \_ \_ флагов состояния входных файлов MFT**](/windows/win32/api/mftransform/ne-mftransform-_mft_input_status_flags) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-264">MFTs: [**\_MFT\_INPUT\_STATUS\_FLAGS**](/windows/win32/api/mftransform/ne-mftransform-_mft_input_status_flags) enumeration.</span></span>



| <span data-ttu-id="97fc4-265">Флаг DMO</span><span class="sxs-lookup"><span data-stu-id="97fc4-265">DMO flag</span></span>                              | <span data-ttu-id="97fc4-266">Флаг MFT</span><span class="sxs-lookup"><span data-stu-id="97fc4-266">MFT flag</span></span>                             |
|---------------------------------------|--------------------------------------|
| <span data-ttu-id="97fc4-267">**\_входные \_ \_ данные Accept \_ статусф для DMO**</span><span class="sxs-lookup"><span data-stu-id="97fc4-267">**DMO\_INPUT\_STATUSF\_ACCEPT\_DATA**</span></span> | <span data-ttu-id="97fc4-268">**\_входные \_ данные состояния входной \_ \_ таблицы MFT**</span><span class="sxs-lookup"><span data-stu-id="97fc4-268">**MFT\_INPUT\_STATUS\_ACCEPT\_DATA**</span></span> |



 

### <a name="getoutputstatus-flags"></a><span data-ttu-id="97fc4-269">Флаги Жетаутпутстатус</span><span class="sxs-lookup"><span data-stu-id="97fc4-269">GetOutputStatus Flags</span></span>

<span data-ttu-id="97fc4-270">Дмос: нет эквивалентного перечисления.</span><span class="sxs-lookup"><span data-stu-id="97fc4-270">DMOs: No equivalent enumeration.</span></span>

<span data-ttu-id="97fc4-271">МФТС: перечисление [**\_ \_ \_ \_ флагов состояния вывода MFT**](/windows/win32/api/mftransform/ne-mftransform-_mft_output_status_flags) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-271">MFTs: [**\_MFT\_OUTPUT\_STATUS\_FLAGS**](/windows/win32/api/mftransform/ne-mftransform-_mft_output_status_flags) enumeration.</span></span>



| <span data-ttu-id="97fc4-272">Флаг DMO</span><span class="sxs-lookup"><span data-stu-id="97fc4-272">DMO flag</span></span>            | <span data-ttu-id="97fc4-273">Флаг MFT</span><span class="sxs-lookup"><span data-stu-id="97fc4-273">MFT flag</span></span>                               |
|---------------------|----------------------------------------|
| <span data-ttu-id="97fc4-274">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-274">No equivalent flag.</span></span> | <span data-ttu-id="97fc4-275">**\_образец состояния выходных файлов MFT \_ \_ \_ готов**</span><span class="sxs-lookup"><span data-stu-id="97fc4-275">**MFT\_OUTPUT\_STATUS\_SAMPLE\_READY**</span></span> |



 

### <a name="getinputstreaminfo-flags"></a><span data-ttu-id="97fc4-276">Флаги Жетинпутстреаминфо</span><span class="sxs-lookup"><span data-stu-id="97fc4-276">GetInputStreamInfo Flags</span></span>

<span data-ttu-id="97fc4-277">Дмос: данные перечисления [**\_ \_ \_ \_ \_ flags входного потока DMO**](/previous-versions/windows/embedded/aa451600(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-277">DMOs: [**\_DMO\_INPUT\_STREAM\_INFO\_FLAGS**](/previous-versions/windows/embedded/aa451600(v=msdn.10)) enumeration.</span></span>

<span data-ttu-id="97fc4-278">МФТС: сведения о перечислении [**\_ \_ \_ \_ \_ флагов сведений о входном потоке MFT**](/windows/win32/api/mftransform/ne-mftransform-_mft_input_stream_info_flags) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-278">MFTs: [**\_MFT\_INPUT\_STREAM\_INFO\_FLAGS**](/windows/win32/api/mftransform/ne-mftransform-_mft_input_stream_info_flags) enumeration.</span></span>



| <span data-ttu-id="97fc4-279">Флаг DMO</span><span class="sxs-lookup"><span data-stu-id="97fc4-279">DMO flag</span></span>                                             | <span data-ttu-id="97fc4-280">Флаг MFT</span><span class="sxs-lookup"><span data-stu-id="97fc4-280">MFT flag</span></span>                                            |
|------------------------------------------------------|-----------------------------------------------------|
| <span data-ttu-id="97fc4-281">**\_ \_ \_ все примеры ВХОДных стреамф DMO \_**</span><span class="sxs-lookup"><span data-stu-id="97fc4-281">**DMO\_INPUT\_STREAMF\_WHOLE\_SAMPLES**</span></span>              | <span data-ttu-id="97fc4-282">**\_ \_ \_ все примеры ВХОДного потока MFT \_**</span><span class="sxs-lookup"><span data-stu-id="97fc4-282">**MFT\_INPUT\_STREAM\_WHOLE\_SAMPLES**</span></span>              |
| <span data-ttu-id="97fc4-283">**\_Вход DMO \_ стреамф \_ один \_ Выбор \_ на \_ буфер**</span><span class="sxs-lookup"><span data-stu-id="97fc4-283">**DMO\_INPUT\_STREAMF\_SINGLE\_SAMPLE\_PER\_BUFFER**</span></span> | <span data-ttu-id="97fc4-284">**\_ \_ один пример входного потока MFT \_ \_ \_ на \_ буфер**</span><span class="sxs-lookup"><span data-stu-id="97fc4-284">**MFT\_INPUT\_STREAM\_SINGLE\_SAMPLE\_PER\_BUFFER**</span></span> |
| <span data-ttu-id="97fc4-285">**\_ \_ \_ фиксированный \_ \_ Размер образца входных данных DMO стреамф**</span><span class="sxs-lookup"><span data-stu-id="97fc4-285">**DMO\_INPUT\_STREAMF\_FIXED\_SAMPLE\_SIZE**</span></span>         | <span data-ttu-id="97fc4-286">**\_ \_ \_ фиксированный \_ \_ Размер образца входного потока MFT**</span><span class="sxs-lookup"><span data-stu-id="97fc4-286">**MFT\_INPUT\_STREAM\_FIXED\_SAMPLE\_SIZE**</span></span>         |
| <span data-ttu-id="97fc4-287">**\_входные \_ стреамф DMO \_ содержат \_ буферы**</span><span class="sxs-lookup"><span data-stu-id="97fc4-287">**DMO\_INPUT\_STREAMF\_HOLDS\_BUFFERS**</span></span>              | <span data-ttu-id="97fc4-288">**\_входной \_ поток MFT \_ содержит \_ буферы**</span><span class="sxs-lookup"><span data-stu-id="97fc4-288">**MFT\_INPUT\_STREAM\_HOLDS\_BUFFERS**</span></span>              |
| <span data-ttu-id="97fc4-289">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-289">No equivalent flag.</span></span>                                  | <span data-ttu-id="97fc4-290">**\_входной \_ поток MFT \_ \_ не выполняет \_ ADDREF**</span><span class="sxs-lookup"><span data-stu-id="97fc4-290">**MFT\_INPUT\_STREAM\_DOES\_NOT\_ADDREF**</span></span>           |
| <span data-ttu-id="97fc4-291">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-291">No equivalent flag.</span></span>                                  | <span data-ttu-id="97fc4-292">**\_входной \_ поток MFT \_ съемный**</span><span class="sxs-lookup"><span data-stu-id="97fc4-292">**MFT\_INPUT\_STREAM\_REMOVABLE**</span></span>                   |
| <span data-ttu-id="97fc4-293">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-293">No equivalent flag.</span></span>                                  | <span data-ttu-id="97fc4-294">**\_входной \_ поток MFT \_ необязательный**</span><span class="sxs-lookup"><span data-stu-id="97fc4-294">**MFT\_INPUT\_STREAM\_OPTIONAL**</span></span>                    |



 

### <a name="getoutputstreaminfo-flags"></a><span data-ttu-id="97fc4-295">Флаги Жетаутпутстреаминфо</span><span class="sxs-lookup"><span data-stu-id="97fc4-295">GetOutputStreamInfo Flags</span></span>

<span data-ttu-id="97fc4-296">Дмос: перечисление [**\_ \_ \_ \_ \_ флагов сведений о выходных потоках DMO**](/previous-versions/ms806053(v=msdn.10)) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-296">DMOs: [**\_DMO\_OUTPUT\_STREAM\_INFO\_FLAGS**](/previous-versions/ms806053(v=msdn.10)) enumeration.</span></span>

<span data-ttu-id="97fc4-297">МФТС: перечисление [**\_ \_ \_ \_ \_ флагов сведений о потоках вывода MFT**](/windows/win32/api/mftransform/ne-mftransform-_mft_output_stream_info_flags) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-297">MFTs: [**\_MFT\_OUTPUT\_STREAM\_INFO\_FLAGS**](/windows/win32/api/mftransform/ne-mftransform-_mft_output_stream_info_flags) enumeration.</span></span>



| <span data-ttu-id="97fc4-298">Флаг DMO</span><span class="sxs-lookup"><span data-stu-id="97fc4-298">DMO flag</span></span>                                              | <span data-ttu-id="97fc4-299">Флаг MFT</span><span class="sxs-lookup"><span data-stu-id="97fc4-299">MFT flag</span></span>                                             |
|-------------------------------------------------------|------------------------------------------------------|
| <span data-ttu-id="97fc4-300">**\_ \_ \_ все примеры выходных данных DMO стреамф \_**</span><span class="sxs-lookup"><span data-stu-id="97fc4-300">**DMO\_OUTPUT\_STREAMF\_WHOLE\_SAMPLES**</span></span>              | <span data-ttu-id="97fc4-301">**\_ \_ \_ все примеры выходных потоков \_ MFT**</span><span class="sxs-lookup"><span data-stu-id="97fc4-301">**MFT\_OUTPUT\_STREAM\_WHOLE\_SAMPLES**</span></span>              |
| <span data-ttu-id="97fc4-302">**\_выходные данные DMO \_ стреамф \_ один \_ Выбор \_ на \_ буфер**</span><span class="sxs-lookup"><span data-stu-id="97fc4-302">**DMO\_OUTPUT\_STREAMF\_SINGLE\_SAMPLE\_PER\_BUFFER**</span></span> | <span data-ttu-id="97fc4-303">**\_ \_ один пример потока вывода MFT \_ \_ \_ на \_ буфер**</span><span class="sxs-lookup"><span data-stu-id="97fc4-303">**MFT\_OUTPUT\_STREAM\_SINGLE\_SAMPLE\_PER\_BUFFER**</span></span> |
| <span data-ttu-id="97fc4-304">**\_ \_ \_ фиксированный \_ Размер выборки выходных данных DMO стреамф \_**</span><span class="sxs-lookup"><span data-stu-id="97fc4-304">**DMO\_OUTPUT\_STREAMF\_FIXED\_SAMPLE\_SIZE**</span></span>         | <span data-ttu-id="97fc4-305">**\_ \_ \_ фиксированный \_ Размер образца потока выходных файлов MFT \_**</span><span class="sxs-lookup"><span data-stu-id="97fc4-305">**MFT\_OUTPUT\_STREAM\_FIXED\_SAMPLE\_SIZE**</span></span>         |
| <span data-ttu-id="97fc4-306">**\_выходные данные DMO \_ стреамф \_ удалены**</span><span class="sxs-lookup"><span data-stu-id="97fc4-306">**DMO\_OUTPUT\_STREAMF\_DISCARDABLE**</span></span>                 | <span data-ttu-id="97fc4-307">**\_выходной \_ поток MFT \_ удален**</span><span class="sxs-lookup"><span data-stu-id="97fc4-307">**MFT\_OUTPUT\_STREAM\_DISCARDABLE**</span></span>                 |
| <span data-ttu-id="97fc4-308">**\_стреамф выходных данных DMO \_ \_ необязательно**</span><span class="sxs-lookup"><span data-stu-id="97fc4-308">**DMO\_OUTPUT\_STREAMF\_OPTIONAL**</span></span>                    | <span data-ttu-id="97fc4-309">**\_выходной \_ поток MFT \_ необязателен**</span><span class="sxs-lookup"><span data-stu-id="97fc4-309">**MFT\_OUTPUT\_STREAM\_OPTIONAL**</span></span>                    |
| <span data-ttu-id="97fc4-310">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-310">No equivalent flag.</span></span>                                   | <span data-ttu-id="97fc4-311">**\_поток вывода \_ MFT \_ содержит \_ примеры**</span><span class="sxs-lookup"><span data-stu-id="97fc4-311">**MFT\_OUTPUT\_STREAM\_PROVIDES\_SAMPLES**</span></span>           |
| <span data-ttu-id="97fc4-312">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-312">No equivalent flag.</span></span>                                   | <span data-ttu-id="97fc4-313">**\_поток вывода \_ MFT \_ может \_ предоставлять \_ образцы**</span><span class="sxs-lookup"><span data-stu-id="97fc4-313">**MFT\_OUTPUT\_STREAM\_CAN\_PROVIDE\_SAMPLES**</span></span>       |
| <span data-ttu-id="97fc4-314">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-314">No equivalent flag.</span></span>                                   | <span data-ttu-id="97fc4-315">**\_поток вывода MFT с \_ \_ отложенным \_ чтением**</span><span class="sxs-lookup"><span data-stu-id="97fc4-315">**MFT\_OUTPUT\_STREAM\_LAZY\_READ**</span></span>                  |
| <span data-ttu-id="97fc4-316">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-316">No equivalent flag.</span></span>                                   | <span data-ttu-id="97fc4-317">**\_поток вывода MFT, \_ \_ съемный**</span><span class="sxs-lookup"><span data-stu-id="97fc4-317">**MFT\_OUTPUT\_STREAM\_REMOVABLE**</span></span>                   |



 

### <a name="setinputtypesetoutputtype-flags"></a><span data-ttu-id="97fc4-318">Флаги Сетинпуттипе и Сетаутпуттипе</span><span class="sxs-lookup"><span data-stu-id="97fc4-318">SetInputType/SetOutputType Flags</span></span>

<span data-ttu-id="97fc4-319">Дмос: перечисление [**\_ \_ \_ \_ флагов типа Set DMO**](/previous-versions/windows/desktop/api/Mediaobj/ne-mediaobj-_dmo_set_type_flags) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-319">DMOs: [**\_DMO\_SET\_TYPE\_FLAGS**](/previous-versions/windows/desktop/api/Mediaobj/ne-mediaobj-_dmo_set_type_flags) enumeration.</span></span>

<span data-ttu-id="97fc4-320">МФТС: перечисление [**\_ \_ \_ \_ флагов типов набора MFT**](/windows/win32/api/mftransform/ne-mftransform-_mft_set_type_flags) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-320">MFTs: [**\_MFT\_SET\_TYPE\_FLAGS**](/windows/win32/api/mftransform/ne-mftransform-_mft_set_type_flags) enumeration.</span></span>



| <span data-ttu-id="97fc4-321">Флаг DMO</span><span class="sxs-lookup"><span data-stu-id="97fc4-321">DMO flag</span></span>                        | <span data-ttu-id="97fc4-322">Флаг MFT</span><span class="sxs-lookup"><span data-stu-id="97fc4-322">MFT flag</span></span>                                                                             |
|---------------------------------|--------------------------------------------------------------------------------------|
| <span data-ttu-id="97fc4-323">**DMO \_ Set \_ типеф \_ \_ только тест**</span><span class="sxs-lookup"><span data-stu-id="97fc4-323">**DMO\_SET\_TYPEF\_TEST\_ONLY**</span></span> | <span data-ttu-id="97fc4-324">**\_набор MFT \_ \_ только проверка \_ типа**</span><span class="sxs-lookup"><span data-stu-id="97fc4-324">**MFT\_SET\_TYPE\_TEST\_ONLY**</span></span>                                                       |
| <span data-ttu-id="97fc4-325">**DMO \_ Set \_ типеф \_ clear**</span><span class="sxs-lookup"><span data-stu-id="97fc4-325">**DMO\_SET\_TYPEF\_CLEAR**</span></span>      | <span data-ttu-id="97fc4-326">Нет эквивалентного флага.</span><span class="sxs-lookup"><span data-stu-id="97fc4-326">No equivalent flag.</span></span> <span data-ttu-id="97fc4-327">Вместо этого задайте для типа носителя **значение NULL** , чтобы очистить тип носителя.</span><span class="sxs-lookup"><span data-stu-id="97fc4-327">Instead, set the media type to **NULL** to clear the media type.</span></span> |



 

## <a name="error-codes"></a><span data-ttu-id="97fc4-328">Коды ошибок</span><span class="sxs-lookup"><span data-stu-id="97fc4-328">Error Codes</span></span>

<span data-ttu-id="97fc4-329">В следующей таблице показано, как сопоставлять коды ошибок DMO с кодами ошибок MFT.</span><span class="sxs-lookup"><span data-stu-id="97fc4-329">The following table shows how to map DMO error codes to MFT error codes.</span></span> <span data-ttu-id="97fc4-330">Гибридный объект MFT/DMO должен возвращать коды ошибок DMO из методов [**имедиаобжект**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediaobject) и коды ошибок MFT из методов [**имфтрансформ**](/windows/win32/api/mftransform/nn-mftransform-imftransform) .</span><span class="sxs-lookup"><span data-stu-id="97fc4-330">A hybrid MFT/DMO object should return the DMO error codes from [**IMediaObject**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediaobject) methods and the MFT error codes from [**IMFTransform**](/windows/win32/api/mftransform/nn-mftransform-imftransform) methods.</span></span> <span data-ttu-id="97fc4-331">Коды ошибок DMO определены в файле заголовка Медиаерр. h.</span><span class="sxs-lookup"><span data-stu-id="97fc4-331">The DMO error codes are defined in the header file MediaErr.h.</span></span> <span data-ttu-id="97fc4-332">Коды ошибок MFT определены в файле заголовка мферрор. h.</span><span class="sxs-lookup"><span data-stu-id="97fc4-332">The MFT error codes are defined in the header file mferror.h.</span></span>



| <span data-ttu-id="97fc4-333">Код ошибки DMO</span><span class="sxs-lookup"><span data-stu-id="97fc4-333">DMO error code</span></span>                  | <span data-ttu-id="97fc4-334">Код ошибки MFT</span><span class="sxs-lookup"><span data-stu-id="97fc4-334">MFT error code</span></span>                       |
|---------------------------------|--------------------------------------|
| <span data-ttu-id="97fc4-335">**DMO \_ E \_ инвалидтипе**</span><span class="sxs-lookup"><span data-stu-id="97fc4-335">**DMO\_E\_INVALIDTYPE**</span></span>         | <span data-ttu-id="97fc4-336">**MF \_ E \_ инвалидтипе**</span><span class="sxs-lookup"><span data-stu-id="97fc4-336">**MF\_E\_INVALIDTYPE**</span></span>               |
| <span data-ttu-id="97fc4-337">**DMO \_ E \_ инвалидстреаминдекс**</span><span class="sxs-lookup"><span data-stu-id="97fc4-337">**DMO\_E\_INVALIDSTREAMINDEX**</span></span>  | <span data-ttu-id="97fc4-338">**MF \_ E \_ инвалидстреамнумбер**</span><span class="sxs-lookup"><span data-stu-id="97fc4-338">**MF\_E\_INVALIDSTREAMNUMBER**</span></span>       |
| <span data-ttu-id="97fc4-339">**DMO \_ E \_ нотакцептинг**</span><span class="sxs-lookup"><span data-stu-id="97fc4-339">**DMO\_E\_NOTACCEPTING**</span></span>        | <span data-ttu-id="97fc4-340">**MF \_ E \_ нотакцептинг**</span><span class="sxs-lookup"><span data-stu-id="97fc4-340">**MF\_E\_NOTACCEPTING**</span></span>              |
| <span data-ttu-id="97fc4-341">**DMO. больше \_ \_ \_ \_ элементов нет**</span><span class="sxs-lookup"><span data-stu-id="97fc4-341">**DMO\_E\_NO\_MORE\_ITEMS**</span></span>     | <span data-ttu-id="97fc4-342">**MF \_ E \_ больше \_ \_ типов**</span><span class="sxs-lookup"><span data-stu-id="97fc4-342">**MF\_E\_NO\_MORE\_TYPES**</span></span>           |
| <span data-ttu-id="97fc4-343">**\_тип DMO \_ E \_ не \_ принят**</span><span class="sxs-lookup"><span data-stu-id="97fc4-343">**DMO\_E\_TYPE\_NOT\_ACCEPTED**</span></span> | <span data-ttu-id="97fc4-344">**MF \_ E \_ инвалидмедиатипе**</span><span class="sxs-lookup"><span data-stu-id="97fc4-344">**MF\_E\_INVALIDMEDIATYPE**</span></span>          |
| <span data-ttu-id="97fc4-345">**\_тип DMO \_ E \_ не \_ задан**</span><span class="sxs-lookup"><span data-stu-id="97fc4-345">**DMO\_E\_TYPE\_NOT\_SET**</span></span>      | <span data-ttu-id="97fc4-346">**\_ \_ тип преобразования MF \_ E \_ не \_ задан**</span><span class="sxs-lookup"><span data-stu-id="97fc4-346">**MF\_E\_TRANSFORM\_TYPE\_NOT\_SET**</span></span> |



 

## <a name="creating-hybrid-dmomft-objects"></a><span data-ttu-id="97fc4-347">Создание гибридных объектов DMO/MFT</span><span class="sxs-lookup"><span data-stu-id="97fc4-347">Creating Hybrid DMO/MFT Objects</span></span>

<span data-ttu-id="97fc4-348">Интерфейс [**имфтрансформ**](/windows/win32/api/mftransform/nn-mftransform-imftransform) слабо основан на [**имедиаобжект**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediaobject), который является основным интерфейсом для объектов мультимедиа DirectX (дмос).</span><span class="sxs-lookup"><span data-stu-id="97fc4-348">The [**IMFTransform**](/windows/win32/api/mftransform/nn-mftransform-imftransform) interface is loosely based on [**IMediaObject**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediaobject), which is the primary interface for DirectX Media Objects (DMOs).</span></span> <span data-ttu-id="97fc4-349">Можно создавать объекты, предоставляющие оба интерфейса.</span><span class="sxs-lookup"><span data-stu-id="97fc4-349">It is possible to create objects that expose both interfaces.</span></span> <span data-ttu-id="97fc4-350">Однако это может привести к конфликтам имен, так как интерфейсы имеют некоторые методы с одинаковыми именами.</span><span class="sxs-lookup"><span data-stu-id="97fc4-350">However, this can lead to naming collisions, because the interfaces have some methods that share the same name.</span></span> <span data-ttu-id="97fc4-351">Решить эту проблему можно одним из двух способов.</span><span class="sxs-lookup"><span data-stu-id="97fc4-351">You can solve this problem in one of two ways:</span></span>

<span data-ttu-id="97fc4-352">Решение 1. Включите следующую строку в начало любого CPP файла, содержащего функции MFT:</span><span class="sxs-lookup"><span data-stu-id="97fc4-352">Solution 1: Include the following line at the top of any .cpp file that contains MFT functions:</span></span>

``` syntax
#define MFT_UNIQUE_METHOD_NAMES
```

<span data-ttu-id="97fc4-353">Это изменяет объявление интерфейса [**имфтрансформ**](/windows/win32/api/mftransform/nn-mftransform-imftransform) , чтобы большинство имен методов были префиксом MFT.</span><span class="sxs-lookup"><span data-stu-id="97fc4-353">This changes the declaration of the [**IMFTransform**](/windows/win32/api/mftransform/nn-mftransform-imftransform) interface so that most of the method names are prefixed with "MFT".</span></span> <span data-ttu-id="97fc4-354">Таким образом, [**имфтрансформ::P роцессинпут**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processinput) преобразуется в **Имфтрансформ:: Мфтпроцессинпут**, а [**имедиаобжект::P роцессинпут**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processinput) сохраняет свое исходное имя.</span><span class="sxs-lookup"><span data-stu-id="97fc4-354">Thus, [**IMFTransform::ProcessInput**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processinput) becomes **IMFTransform::MFTProcessInput**, while [**IMediaObject::ProcessInput**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processinput) keeps its original name.</span></span> <span data-ttu-id="97fc4-355">Этот метод наиболее удобен при преобразовании существующего объекта DMO в гибридные объекты DMO или MFT.</span><span class="sxs-lookup"><span data-stu-id="97fc4-355">This technique is most useful if you are converting an existing DMO to a hybrid DMO/MFT.</span></span> <span data-ttu-id="97fc4-356">Вы можете добавить новые методы MFT, не изменяя методы DMO.</span><span class="sxs-lookup"><span data-stu-id="97fc4-356">You can add the new MFT methods without changing the DMO methods.</span></span>

<span data-ttu-id="97fc4-357">Решение 2. Использование синтаксиса C++ для неоднозначности имен, унаследованных от более чем одного интерфейса.</span><span class="sxs-lookup"><span data-stu-id="97fc4-357">Solution 2: Use C++ syntax to disambiguate names that are inherited from more than one interface.</span></span> <span data-ttu-id="97fc4-358">Например, объявите версию MFT для [**ProcessInput**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processinput) следующим образом:</span><span class="sxs-lookup"><span data-stu-id="97fc4-358">For example, declare the MFT version of [**ProcessInput**](/windows/win32/api/mftransform/nf-mftransform-imftransform-processinput) as follows:</span></span>

``` syntax
CMyHybridObject::IMFTransform::ProcessInput(...)
```

<span data-ttu-id="97fc4-359">Объявите версию DMO для [**ProcessInput**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processinput) следующим образом:</span><span class="sxs-lookup"><span data-stu-id="97fc4-359">Declare the DMO version of [**ProcessInput**](/previous-versions/windows/desktop/api/mediaobj/nf-mediaobj-imediaobject-processinput) like this:</span></span>

``` syntax
CMyHybridObject::IMediaObject::ProcessInput(...)
```

<span data-ttu-id="97fc4-360">При выполнении внутреннего вызова метода в объекте можно использовать этот синтаксис, но это приведет к переопределению виртуального состояния метода.</span><span class="sxs-lookup"><span data-stu-id="97fc4-360">If you make an internal call to a method within the object, you can use this syntax, but doing so will override the virtual status of the method.</span></span> <span data-ttu-id="97fc4-361">Для вызова внутри объекта лучше всего использовать следующие объекты:</span><span class="sxs-lookup"><span data-stu-id="97fc4-361">A better way to make calls from inside the object is the following:</span></span>

``` syntax
hr = ((IMediaObject*)this)->ProcessInput(...)
```

<span data-ttu-id="97fc4-362">Таким образом, если вы наследуете от **кмихибридобжект** другой класс и переопределяете метод кмихибридобжект:: имедиаобжект::P роцессинпут, вызывается правильный виртуальный метод.</span><span class="sxs-lookup"><span data-stu-id="97fc4-362">That way, if you derive another class from **CMyHybridObject** and override the CMyHybridObject::IMediaObject::ProcessInput method, the correct virtual method is called.</span></span> <span data-ttu-id="97fc4-363">Интерфейсы DMO описаны в документации по пакету SDK для DirectShow.</span><span class="sxs-lookup"><span data-stu-id="97fc4-363">The DMO interfaces are documented in the DirectShow SDK documentation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="97fc4-364">См. также</span><span class="sxs-lookup"><span data-stu-id="97fc4-364">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="97fc4-365">Преобразования Media Foundation</span><span class="sxs-lookup"><span data-stu-id="97fc4-365">Media Foundation Transforms</span></span>](media-foundation-transforms.md)
</dt> </dl>

 

 
