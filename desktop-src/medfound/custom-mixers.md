---
description: Пользовательские Миксерс
ms.assetid: a0af318d-9ac2-43f9-8934-f28c472256a6
title: Пользовательские Миксерс
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ac7e56c578a7081de7c71ae3abaf9fc45d085827
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105710835"
---
# <a name="custom-mixers"></a><span data-ttu-id="5ea9b-103">Пользовательские Миксерс</span><span class="sxs-lookup"><span data-stu-id="5ea9b-103">Custom Mixers</span></span>

<span data-ttu-id="5ea9b-104">В этом разделе описывается написание пользовательского микшера для расширенного обработчика видео (Евр).</span><span class="sxs-lookup"><span data-stu-id="5ea9b-104">This topic describes how to write a custom mixer for the enhanced video renderer (EVR).</span></span> <span data-ttu-id="5ea9b-105">Пользовательское микшер можно использовать либо в Media Foundation приемника мультимедиа евр, либо в фильтре Евр DirectShow.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-105">You can use a custom mixer with either the Media Foundation EVR media sink, or the DirectShow EVR filter.</span></span> <span data-ttu-id="5ea9b-106">Дополнительные сведения о миксерс и выступающих см. в разделе [Улучшенный модуль подготовки видео](enhanced-video-renderer.md).</span><span class="sxs-lookup"><span data-stu-id="5ea9b-106">For more information about mixers and presenters, see [Enhanced Video Renderer](enhanced-video-renderer.md).</span></span>

<span data-ttu-id="5ea9b-107">Микшер — это Media Foundation преобразование (MFT) с одним или несколькими входными данными (потоком ссылок и подпотоками) и одним выходом.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-107">The mixer is a Media Foundation transform (MFT) with one or more inputs (the reference stream plus the substreams) and one output.</span></span> <span data-ttu-id="5ea9b-108">Входной поток получает образцы из вышестоящего потока.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-108">The input stream receives samples from upstream.</span></span> <span data-ttu-id="5ea9b-109">Поток вывода предоставляет примеры для выступающего.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-109">The output stream delivers samples to the presenter.</span></span> <span data-ttu-id="5ea9b-110">Евр отвечает за вызов [**имфтрансформ::P роцессинпут**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processinput) в микшере, и выступающий отвечает за вызов [**Имфтрансформ::P роцессаутпут**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput).</span><span class="sxs-lookup"><span data-stu-id="5ea9b-110">The EVR is responsible for calling [**IMFTransform::ProcessInput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processinput) on the mixer, and the presenter is responsible for calling [**IMFTransform::ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput).</span></span>

<span data-ttu-id="5ea9b-111">Как минимум, микшер Евр должен реализовывать следующие интерфейсы:</span><span class="sxs-lookup"><span data-stu-id="5ea9b-111">At a minimum, an EVR mixer must implement the following interfaces:</span></span>



| <span data-ttu-id="5ea9b-112">Интерфейс</span><span class="sxs-lookup"><span data-stu-id="5ea9b-112">Interface</span></span>                                                                | <span data-ttu-id="5ea9b-113">Описание</span><span class="sxs-lookup"><span data-stu-id="5ea9b-113">Description</span></span>                                                                                      |
|--------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="5ea9b-114">**имфтрансформ**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-114">**IMFTransform**</span></span>](/windows/desktop/api/mftransform/nn-mftransform-imftransform)                                     | <span data-ttu-id="5ea9b-115">Предоставляет базовые функциональные возможности MFT.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-115">Provides base MFT functionality.</span></span>                                                                 |
| [<span data-ttu-id="5ea9b-116">**имфтопологисервицелукупклиент**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-116">**IMFTopologyServiceLookupClient**</span></span>](/windows/desktop/api/evr/nn-evr-imftopologyservicelookupclient) | <span data-ttu-id="5ea9b-117">Позволяет микшеру получать интерфейсы из Евр.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-117">Enables the mixer to get interfaces from the EVR.</span></span>                                                |
| [<span data-ttu-id="5ea9b-118">**имфвидеодевицеид**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-118">**IMFVideoDeviceID**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideodeviceid)                             | <span data-ttu-id="5ea9b-119">Позволяет микшеру получать интерфейсы из Евр.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-119">Enables the mixer to get interfaces from the EVR.</span></span>                                                |
| [<span data-ttu-id="5ea9b-120">**имфаттрибутес**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-120">**IMFAttributes**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfattributes)                                   | <span data-ttu-id="5ea9b-121">Используется для предоставления Евр атрибуту [**MF \_ SA с \_ \_ поддержкой D3D**](mf-sa-d3d-aware-attribute.md) .</span><span class="sxs-lookup"><span data-stu-id="5ea9b-121">Used to expose the [**MF\_SA\_D3D\_AWARE**](mf-sa-d3d-aware-attribute.md) attribute to the EVR.</span></span> |



 

<span data-ttu-id="5ea9b-122">Кроме того, MFT может реализовывать любой из следующих интерфейсов:</span><span class="sxs-lookup"><span data-stu-id="5ea9b-122">Optionally, an MFT can implement any of the following interfaces:</span></span>



| <span data-ttu-id="5ea9b-123">Интерфейс</span><span class="sxs-lookup"><span data-stu-id="5ea9b-123">Interface</span></span>                                                | <span data-ttu-id="5ea9b-124">Описание</span><span class="sxs-lookup"><span data-stu-id="5ea9b-124">Description</span></span>                                                                                                                                          |
|----------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="5ea9b-125">**иевртрустедвидеоплугин**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-125">**IEVRTrustedVideoPlugin**</span></span>](/windows/desktop/api/evr/nn-evr-ievrtrustedvideoplugin) | <span data-ttu-id="5ea9b-126">Требуется для воспроизведения защищенного содержимого.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-126">Required to play protected content.</span></span>                                                                                                                  |
| [<span data-ttu-id="5ea9b-127">**имфжетсервице**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-127">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)                   | <span data-ttu-id="5ea9b-128">Предоставляет приложениям такие интерфейсы, как [**имфвидеомиксербитмап**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) и [**имфвидеопроцессор**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) .</span><span class="sxs-lookup"><span data-stu-id="5ea9b-128">Exposes interfaces such as [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) and [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) to the application.</span></span> |
| [<span data-ttu-id="5ea9b-129">**имфкуалитядвисе**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-129">**IMFQualityAdvise**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise)             | <span data-ttu-id="5ea9b-130">Позволяет диспетчеру качества настроить качество видео.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-130">Enables the quality manager to adjust the video quality.</span></span>                                                                                             |
| [<span data-ttu-id="5ea9b-131">**имфвидеомиксербитмап**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-131">**IMFVideoMixerBitmap**</span></span>](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap)       | <span data-ttu-id="5ea9b-132">Позволяет приложению смешивать статический точечный рисунок на видео.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-132">Enables the application to mix a static bitmap onto the video.</span></span>                                                                                       |
| [<span data-ttu-id="5ea9b-133">**имфвидеопоситионмаппер**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-133">**IMFVideoPositionMapper**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideopositionmapper) | <span data-ttu-id="5ea9b-134">Сопоставляет координаты на выходном видеокадре с координатами на входном видеокадре.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-134">Maps coordinates on the output video frame to coordinates on the input video frame.</span></span>                                                                  |
| [<span data-ttu-id="5ea9b-135">**имфвидеопроцессор**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-135">**IMFVideoProcessor**</span></span>](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor)           | <span data-ttu-id="5ea9b-136">Предоставляет приложению некоторые функции обработки видео ДКСВА.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-136">Exposes some DXVA video processing features to the application.</span></span>                                                                                      |



 

<span data-ttu-id="5ea9b-137">Форматирование согласования с микшером работает следующим образом:</span><span class="sxs-lookup"><span data-stu-id="5ea9b-137">Format negotiation with the mixer works as follows:</span></span>

1.  <span data-ttu-id="5ea9b-138">Евр задает тип носителя в ссылочном потоке.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-138">The EVR sets the media type on the reference stream.</span></span>
2.  <span data-ttu-id="5ea9b-139">Евр вызывает [**имфвидеопресентер::P роцессмессаже**](/windows/desktop/api/evr/nf-evr-imfvideopresenter-processmessage) в выступающих с сообщением **мфвп \_ Message \_ инвалидатемедиатипе** .</span><span class="sxs-lookup"><span data-stu-id="5ea9b-139">The EVR calls [**IMFVideoPresenter::ProcessMessage**](/windows/desktop/api/evr/nf-evr-imfvideopresenter-processmessage) on the presenter with the **MFVP\_MESSAGE\_INVALIDATEMEDIATYPE** message.</span></span>

3.  <span data-ttu-id="5ea9b-140">Выступающий задает тип носителя для выходного потока микшера.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-140">The presenter sets the media type on the mixer's output stream.</span></span>
4.  <span data-ttu-id="5ea9b-141">Евр задает тип носителя для подпотоков.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-141">The EVR sets the media type on the substreams.</span></span>

<span data-ttu-id="5ea9b-142">Если тип носителя в ссылочном потоке изменяется, другие типы мультимедиа для микшера больше не действительны.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-142">If the media type on the reference stream changes, the mixer's other media types are no longer valid.</span></span> <span data-ttu-id="5ea9b-143">После этого метод микшера [**имфтрансформ::P роцессаутпут**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) будет завершаться сбоем и возвращать **\_ \_ \_ \_ изменение потока преобразования MF E**.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-143">The mixer's [**IMFTransform::ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) method will then fail and return **MF\_E\_TRANSFORM\_STREAM\_CHANGE**.</span></span> <span data-ttu-id="5ea9b-144">В данный момент выступающий не должен ничего делать.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-144">The presenter should not do anything at this point.</span></span> <span data-ttu-id="5ea9b-145">Евр запустит процесс согласования формата еще раз.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-145">The EVR will initiate the format negotiation process again.</span></span>

<span data-ttu-id="5ea9b-146">Когда входной поток достигает конца потока, ЕВР вызывает [**имфтрансформ::P роцессмессаже**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processmessage) на микшере с [**\_ \_ уведомлением об \_ окончании \_ \_ потока в MFT**](mft-message-notify-end-of-stream.md).</span><span class="sxs-lookup"><span data-stu-id="5ea9b-146">When any input stream reaches the end of the stream, the EVR calls [**IMFTransform::ProcessMessage**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processmessage) on the mixer with [**MFT\_MESSAGE\_NOTIFY\_END\_OF\_STREAM**](mft-message-notify-end-of-stream.md).</span></span>

<span data-ttu-id="5ea9b-147">Микшер отправляет следующие события в Евр с помощью интерфейса [**ИМЕДИАЕВЕНТСИНК**](/windows/win32/api/strmif/nn-strmif-imediaeventsink) Евр.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-147">The mixer sends the following events to the EVR, using the EVR's [**IMediaEventSink**](/windows/win32/api/strmif/nn-strmif-imediaeventsink) interface.</span></span> <span data-ttu-id="5ea9b-148">Этот интерфейс описан в документации по пакету SDK для DirectShow.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-148">This interface is documented in the DirectShow SDK documentation.</span></span>



| <span data-ttu-id="5ea9b-149">Событие</span><span class="sxs-lookup"><span data-stu-id="5ea9b-149">Event</span></span>                                            | <span data-ttu-id="5ea9b-150">Описание</span><span class="sxs-lookup"><span data-stu-id="5ea9b-150">Description</span></span>                            |
|--------------------------------------------------|----------------------------------------|
| [<span data-ttu-id="5ea9b-151">**\_требуется образец \_ EC**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-151">**EC\_SAMPLE\_NEEDED**</span></span>](../directshow/ec-sample-needed.md) | <span data-ttu-id="5ea9b-152">Для микшера требуется новый входной пример.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-152">The mixer requires a new input sample.</span></span> |



 

<span data-ttu-id="5ea9b-153">Евр может вызвать [**ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) в микшере перед запуском потоковой передачи.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-153">The EVR might call [**ProcessOutput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processoutput) on the mixer before streaming starts.</span></span> <span data-ttu-id="5ea9b-154">Микшер не должен завершать эти вызовы.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-154">The mixer should not fail these calls.</span></span> <span data-ttu-id="5ea9b-155">Вместо этого он должен заполнить поверхность вывода черными пикселами.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-155">Instead, it should fill the output surface with black pixels.</span></span> <span data-ttu-id="5ea9b-156">Микшер должен продолжать выдавать образцы вывода цветов, пока не получит сообщение [**MFT Отправка сообщения \_ \_ о \_ начале \_ потоковой передачи**](mft-message-notify-begin-streaming.md) или вызывается метод [**ProcessInput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processinput) .</span><span class="sxs-lookup"><span data-stu-id="5ea9b-156">The mixer should continue to color-fill output samples until it receives an [**MFT\_MESSAGE\_NOTIFY\_BEGIN\_STREAMING**](mft-message-notify-begin-streaming.md) message or the [**ProcessInput**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-processinput) method is called.</span></span> <span data-ttu-id="5ea9b-157">Если микшер получает сообщение [**\_ \_ о \_ завершении \_ потоковой передачи сообщения MFT**](mft-message-notify-end-streaming.md) , он должен переключиться обратно в режим заливки цвета.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-157">If the mixer receives an [**MFT\_MESSAGE\_NOTIFY\_END\_STREAMING**](mft-message-notify-end-streaming.md) message, it should switch back to color-fill mode.</span></span>

## <a name="implementing-imfvideodeviceid"></a><span data-ttu-id="5ea9b-158">Реализация Имфвидеодевицеид</span><span class="sxs-lookup"><span data-stu-id="5ea9b-158">Implementing IMFVideoDeviceID</span></span>

<span data-ttu-id="5ea9b-159">Интерфейс [**имфвидеодевицеид**](/windows/desktop/api/evr/nn-evr-imfvideodeviceid) содержит один метод [**GetDeviceID**](/windows/desktop/api/evr/nf-evr-imfvideodeviceid-getdeviceid), который возвращает GUID устройства.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-159">The [**IMFVideoDeviceID**](/windows/desktop/api/evr/nn-evr-imfvideodeviceid) interface contains one method, [**GetDeviceID**](/windows/desktop/api/evr/nf-evr-imfvideodeviceid-getdeviceid), which returns a device GUID.</span></span> <span data-ttu-id="5ea9b-160">GUID устройства гарантирует, что выступающий и микшер используют совместимые технологии.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-160">The device GUID ensures that the presenter and the mixer use compatible technologies.</span></span> <span data-ttu-id="5ea9b-161">Если идентификаторы GUID устройства не совпадают, инициализация Евр не выполняется.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-161">If the device GUIDs do not match, the EVR fails to initialize.</span></span>

<span data-ttu-id="5ea9b-162">Стандартный микшер и настоящее устройство используют Direct3D 9 с идентификатором GUID устройства, равным IID \_ IDirect3DDevice9.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-162">The standard mixer and presenter both use Direct3D 9, with the device GUID equal to IID\_IDirect3DDevice9.</span></span> <span data-ttu-id="5ea9b-163">Если вы планируете использовать пользовательский выступающий со стандартным микшером, то GUID устройства выступающего должен быть IID \_ IDirect3DDevice9.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-163">If you intend to use your custom presenter with the standard mixer, the presenter's device GUID must be IID\_IDirect3DDevice9.</span></span> <span data-ttu-id="5ea9b-164">При замене обоих компонентов можно определить новый GUID устройства.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-164">If you replace both components, you could define a new device GUID.</span></span>

## <a name="implementing-imftopologyservicelookupclient"></a><span data-ttu-id="5ea9b-165">Реализация Имфтопологисервицелукупклиент</span><span class="sxs-lookup"><span data-stu-id="5ea9b-165">Implementing IMFTopologyServiceLookupClient</span></span>

<span data-ttu-id="5ea9b-166">Микшер должен реализовывать интерфейс [**имфтопологисервицелукупклиент**](/windows/desktop/api/evr/nn-evr-imftopologyservicelookupclient) .</span><span class="sxs-lookup"><span data-stu-id="5ea9b-166">The mixer must implement the [**IMFTopologyServiceLookupClient**](/windows/desktop/api/evr/nn-evr-imftopologyservicelookupclient) interface.</span></span> <span data-ttu-id="5ea9b-167">Перед началом потоковой передачи Евр вызывает [**имфтопологисервицелукупклиент:: инитсервицепоинтерс**](/windows/desktop/api/evr/nf-evr-imftopologyservicelookupclient-initservicepointers) и передает указатель на интерфейс [**имфтопологисервицелукуп**](/windows/desktop/api/evr/nn-evr-imftopologyservicelookup) Евр.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-167">Before streaming begins, the EVR calls [**IMFTopologyServiceLookupClient::InitServicePointers**](/windows/desktop/api/evr/nf-evr-imftopologyservicelookupclient-initservicepointers) and passes in a pointer to the EVR's [**IMFTopologyServiceLookup**](/windows/desktop/api/evr/nn-evr-imftopologyservicelookup) interface.</span></span> <span data-ttu-id="5ea9b-168">Микшер использует этот указатель для получения указателей интерфейса из Евр.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-168">The mixer uses this pointer to get interface pointers from the EVR.</span></span>

<span data-ttu-id="5ea9b-169">Как минимум, микшер должен запрашивать следующий интерфейс:</span><span class="sxs-lookup"><span data-stu-id="5ea9b-169">At a minimum, the mixer must query for the following interface:</span></span>

-   [<span data-ttu-id="5ea9b-170">**имедиаевентсинк**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-170">**IMediaEventSink**</span></span>](/windows/win32/api/strmif/nn-strmif-imediaeventsink)

<span data-ttu-id="5ea9b-171">Когда Евр вызывает [**имфтопологисервицелукупклиент:: релеасесервицепоинтерс**](/windows/desktop/api/evr/nf-evr-imftopologyservicelookupclient-releaseservicepointers), микшер должен освободить все указатели, полученные из вызова [**инитсервицепоинтерс**](/windows/desktop/api/evr/nf-evr-imftopologyservicelookupclient-initservicepointers).</span><span class="sxs-lookup"><span data-stu-id="5ea9b-171">When the EVR calls [**IMFTopologyServiceLookupClient::ReleaseServicePointers**](/windows/desktop/api/evr/nf-evr-imftopologyservicelookupclient-releaseservicepointers), the mixer must release any pointers obtained from the call to [**InitServicePointers**](/windows/desktop/api/evr/nf-evr-imftopologyservicelookupclient-initservicepointers).</span></span>

## <a name="mixer-attributes"></a><span data-ttu-id="5ea9b-172">Атрибуты микшера</span><span class="sxs-lookup"><span data-stu-id="5ea9b-172">Mixer Attributes</span></span>

<span data-ttu-id="5ea9b-173">Микшер должен поддерживать следующие атрибуты.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-173">A mixer should support the following attributes.</span></span>



| <span data-ttu-id="5ea9b-174">attribute</span><span class="sxs-lookup"><span data-stu-id="5ea9b-174">Attribute</span></span>                                                                        | <span data-ttu-id="5ea9b-175">Описание</span><span class="sxs-lookup"><span data-stu-id="5ea9b-175">Description</span></span>                                                                                                                                                                                                                                           |
|----------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="5ea9b-176">**С \_ \_ поддержкой D3D \_ SA**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-176">**MF\_SA\_D3D\_AWARE**</span></span>](mf-sa-d3d-aware-attribute.md)                          | <span data-ttu-id="5ea9b-177">Указывает, поддерживает ли микшер ускорение видео DirectX (ДКСВА).</span><span class="sxs-lookup"><span data-stu-id="5ea9b-177">Specifies whether the mixer supports DirectX Video Acceleration (DXVA).</span></span>                                                                                                                                                                               |
| [<span data-ttu-id="5ea9b-178">**\_ \_ \_ число выборок, требуемых для SA MF \_**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-178">**MF\_SA\_REQUIRED\_SAMPLE\_COUNT**</span></span>](mf-sa-required-sample-count-attribute.md) | <span data-ttu-id="5ea9b-179">Количество видеороликов, которые Евр должны выделить для каждого потока микшера.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-179">The number of video samples the EVR should allocate for each mixer stream.</span></span> <span data-ttu-id="5ea9b-180">Этот атрибут применяется к отдельным потокам; Используйте хранилище атрибутов, возвращенное [**имфтрансформ:: жетинпутстреаматтрибутес**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-getinputstreamattributes).</span><span class="sxs-lookup"><span data-stu-id="5ea9b-180">This attribute applies to individual streams; use the attribute store returned by [**IMFTransform::GetInputStreamAttributes**](/windows/desktop/api/mftransform/nf-mftransform-imftransform-getinputstreamattributes).</span></span> |



 

## <a name="setting-the-mixer-on-the-evr"></a><span data-ttu-id="5ea9b-181">Настройка микшера на Евр</span><span class="sxs-lookup"><span data-stu-id="5ea9b-181">Setting the Mixer on the EVR</span></span>

<span data-ttu-id="5ea9b-182">Чтобы задать пользовательское микшер в евр, вызовите [**имфвидеорендерер:: инитиализерендерер**](/windows/desktop/api/evr/nf-evr-imfvideorenderer-initializerenderer).</span><span class="sxs-lookup"><span data-stu-id="5ea9b-182">To set a custom mixer on the EVR, call [**IMFVideoRenderer::InitializeRenderer**](/windows/desktop/api/evr/nf-evr-imfvideorenderer-initializerenderer).</span></span> <span data-ttu-id="5ea9b-183">И фильтр Евр DirectShow, и приемник мультимедиа Евр реализуют этот метод.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-183">Both the DirectShow EVR filter and the EVR media sink implement this method.</span></span>

<span data-ttu-id="5ea9b-184">**Объект активации Евр**.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-184">**EVR Activation Object**.</span></span> <span data-ttu-id="5ea9b-185">При использовании объекта активации Евр можно предоставить пользовательский микшер, задав один из следующих атрибутов в объекте активации Евр:</span><span class="sxs-lookup"><span data-stu-id="5ea9b-185">If you are using the EVR activation object, you can provide a custom mixer by setting one of the following attributes on the EVR activation object:</span></span>



| <span data-ttu-id="5ea9b-186">attribute</span><span class="sxs-lookup"><span data-stu-id="5ea9b-186">Attribute</span></span>                                                                                                 | <span data-ttu-id="5ea9b-187">Описание</span><span class="sxs-lookup"><span data-stu-id="5ea9b-187">Description</span></span>                                                                                                                           |
|-----------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="5ea9b-188">**MF \_ Активация \_ настраиваемого \_ \_ видеомикшера \_ активировать**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-188">**MF\_ACTIVATE\_CUSTOM\_VIDEO\_MIXER\_ACTIVATE**</span></span>](mf-activate-custom-video-mixer-activate-attribute.md) | <span data-ttu-id="5ea9b-189">Указатель на объект активации для микшера.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-189">Pointer to an activation object for the mixer.</span></span> <span data-ttu-id="5ea9b-190">Объект активации должен реализовывать интерфейс [**имфактивате**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) .</span><span class="sxs-lookup"><span data-stu-id="5ea9b-190">The activation object must implement the [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) interface.</span></span> |
| [<span data-ttu-id="5ea9b-191">**MF \_ Активация \_ пользовательского \_ \_ идентификатора CLSID микшера видео \_**</span><span class="sxs-lookup"><span data-stu-id="5ea9b-191">**MF\_ACTIVATE\_CUSTOM\_VIDEO\_MIXER\_CLSID**</span></span>](mf-activate-custom-video-mixer-clsid-attribute.md)       | <span data-ttu-id="5ea9b-192">Идентификатор CLSID микшера.</span><span class="sxs-lookup"><span data-stu-id="5ea9b-192">CLSID of the mixer.</span></span>                                                                                                                   |



 

## <a name="related-topics"></a><span data-ttu-id="5ea9b-193">См. также</span><span class="sxs-lookup"><span data-stu-id="5ea9b-193">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5ea9b-194">Улучшенный модуль подготовки видео</span><span class="sxs-lookup"><span data-stu-id="5ea9b-194">Enhanced Video Renderer</span></span>](enhanced-video-renderer.md)
</dt> </dl>

 

 
