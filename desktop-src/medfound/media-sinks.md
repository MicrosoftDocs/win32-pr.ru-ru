---
description: Приемники носителей — это объекты конвейера, которые получают данные мультимедиа.
ms.assetid: a0fbce1b-0a16-4449-9eca-906fd9056a1c
title: Приемники носителей
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9394cbfd49a631d59b9296202a2b6ca7a868869
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "104351245"
---
# <a name="media-sinks"></a><span data-ttu-id="45acb-103">Приемники носителей</span><span class="sxs-lookup"><span data-stu-id="45acb-103">Media Sinks</span></span>

<span data-ttu-id="45acb-104">*Приемники носителей* — это объекты конвейера, которые получают данные мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="45acb-104">*Media sinks* are the pipeline objects that receive media data.</span></span> <span data-ttu-id="45acb-105">Приемник носителя — это назначение для одного или нескольких потоков мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="45acb-105">A media sink is the destination for one or more media streams.</span></span> <span data-ttu-id="45acb-106">Приемники мультимедиа делятся на две общие категории:</span><span class="sxs-lookup"><span data-stu-id="45acb-106">Media sinks fall into two general categories:</span></span>

-   <span data-ttu-id="45acb-107">Модуль *подготовки* отчетов — это приемник мультимедиа, который представляет данные для воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="45acb-107">A *renderer* is a media sink that presents data for playback.</span></span> <span data-ttu-id="45acb-108">Расширенный обработчик видео (Евр) отображает видеокадры, а модуль подготовки звука воспроизводит звуковые потоки через звуковую карту или другое звуковое устройство.</span><span class="sxs-lookup"><span data-stu-id="45acb-108">The enhanced video renderer (EVR) displays video frames, and the audio renderer plays audio streams through the sound card or other audio device.</span></span>

-   <span data-ttu-id="45acb-109">*Приемник архива* — это приемник мультимедиа, который записывает данные в файл или в другое хранилище.</span><span class="sxs-lookup"><span data-stu-id="45acb-109">An *archive sink* is a media sink that writes data to a file or other storage.</span></span>

<span data-ttu-id="45acb-110">Основное различие между ними заключается в том, что приемник архива не потребляет данные с фиксированным темпом воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="45acb-110">The main difference between them is that an archive sink does not consume the data at a fixed playback rate.</span></span> <span data-ttu-id="45acb-111">Вместо этого он записывает данные, которые он получает как можно быстрее.</span><span class="sxs-lookup"><span data-stu-id="45acb-111">Instead, it writes the data that it receives as quickly as possible.</span></span>

<span data-ttu-id="45acb-112">Приемники носителей предоставляют интерфейс [**имфмедиасинк**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) .</span><span class="sxs-lookup"><span data-stu-id="45acb-112">Media sinks expose the [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) interface.</span></span> <span data-ttu-id="45acb-113">Каждый приемник мультимедиа содержит один или несколько *приемников потоков*.</span><span class="sxs-lookup"><span data-stu-id="45acb-113">Each media sink contains one or more *stream sinks*.</span></span> <span data-ttu-id="45acb-114">Каждый приемник потока получает данные из одного потока.</span><span class="sxs-lookup"><span data-stu-id="45acb-114">Each stream sink receives the data from one stream.</span></span> <span data-ttu-id="45acb-115">Приемники потоков предоставляют интерфейс [**имфстреамсинк**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) .</span><span class="sxs-lookup"><span data-stu-id="45acb-115">Stream sinks expose the [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) interface.</span></span> <span data-ttu-id="45acb-116">Обычно приложение не создает приемники мультимедиа напрямую.</span><span class="sxs-lookup"><span data-stu-id="45acb-116">Typically an application does not create media sinks directly.</span></span> <span data-ttu-id="45acb-117">Вместо этого приложение создает один или несколько объектов активации, которые сеанс мультимедиа использует для создания приемника.</span><span class="sxs-lookup"><span data-stu-id="45acb-117">Instead, the application creates one or more activation objects, which the Media Session uses to create the sink.</span></span> <span data-ttu-id="45acb-118">Все остальные операции в приемнике обрабатываются сеансом мультимедиа, и приложение не вызывает никаких методов приемника носителя или любого приемника потока.</span><span class="sxs-lookup"><span data-stu-id="45acb-118">All other operations on the sink are handled by the Media Session, and the application does not call any methods on the media sink or any of the stream sinks.</span></span> <span data-ttu-id="45acb-119">Дополнительные сведения об объектах активации см. в разделе [объекты активации](activation-objects.md).</span><span class="sxs-lookup"><span data-stu-id="45acb-119">For more information about activation objects, see [Activation Objects](activation-objects.md).</span></span>

<span data-ttu-id="45acb-120">Прочтите оставшуюся часть этого раздела, если вы пишете пользовательский приемник мультимедиа или хотите использовать приемник мультимедиа напрямую без сеанса мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="45acb-120">You should read the remainder of this topic if you are writing a custom media sink, or if you want to use a media sink directly without the Media Session.</span></span>

-   [<span data-ttu-id="45acb-121">Приемники потоков</span><span class="sxs-lookup"><span data-stu-id="45acb-121">Stream Sinks</span></span>](#stream-sinks)
-   [<span data-ttu-id="45acb-122">Часы представления</span><span class="sxs-lookup"><span data-stu-id="45acb-122">Presentation Clock</span></span>](#presentation-clock)
-   [<span data-ttu-id="45acb-123">Форматы потоков</span><span class="sxs-lookup"><span data-stu-id="45acb-123">Stream Formats</span></span>](#stream-formats)
-   [<span data-ttu-id="45acb-124">Поток данных</span><span class="sxs-lookup"><span data-stu-id="45acb-124">Data Flow</span></span>](#data-flow)
-   [<span data-ttu-id="45acb-125">Метки</span><span class="sxs-lookup"><span data-stu-id="45acb-125">Markers</span></span>](#markers)
-   [<span data-ttu-id="45acb-126">Изменения состояния</span><span class="sxs-lookup"><span data-stu-id="45acb-126">State Changes</span></span>](#state-changes)
-   [<span data-ttu-id="45acb-127">Завершение</span><span class="sxs-lookup"><span data-stu-id="45acb-127">Finalizing</span></span>](#finalizing)
-   [<span data-ttu-id="45acb-128">Завершение работы</span><span class="sxs-lookup"><span data-stu-id="45acb-128">Shutting Down</span></span>](#shutting-down)
-   [<span data-ttu-id="45acb-129">Интерфейсы приемника мультимедиа</span><span class="sxs-lookup"><span data-stu-id="45acb-129">Media Sink Interfaces</span></span>](#media-sink-interfaces)
-   [<span data-ttu-id="45acb-130">Интерфейсы приемника потока</span><span class="sxs-lookup"><span data-stu-id="45acb-130">Stream Sink Interfaces</span></span>](#stream-sink-interfaces)
-   [<span data-ttu-id="45acb-131">События приемника потока</span><span class="sxs-lookup"><span data-stu-id="45acb-131">Stream Sink Events</span></span>](#stream-sink-events)
-   [<span data-ttu-id="45acb-132">См. также</span><span class="sxs-lookup"><span data-stu-id="45acb-132">Related topics</span></span>](#related-topics)

## <a name="stream-sinks"></a><span data-ttu-id="45acb-133">Приемники потоков</span><span class="sxs-lookup"><span data-stu-id="45acb-133">Stream Sinks</span></span>

<span data-ttu-id="45acb-134">Приемник мультимедиа может иметь фиксированное число приемников потоков или может поддерживать Добавление и удаление приемников потоков.</span><span class="sxs-lookup"><span data-stu-id="45acb-134">A media sink can have a fixed number of stream sinks, or it can support adding and removing stream sinks.</span></span> <span data-ttu-id="45acb-135">Если в нем имеется фиксированное число приемников потоков, метод [**имфмедиасинк::**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) -медиасинк возвращает \_ флаг фиксированных \_ потоков.</span><span class="sxs-lookup"><span data-stu-id="45acb-135">If it has a fixed number of stream sinks, the [**IMFMediaSink::GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_FIXED\_STREAMS flag.</span></span> <span data-ttu-id="45acb-136">В противном случае можно добавлять и удалять приемники потоков.</span><span class="sxs-lookup"><span data-stu-id="45acb-136">Otherwise, you can add and remove stream sinks.</span></span> <span data-ttu-id="45acb-137">Чтобы добавить новый приемник потока, вызовите метод [**имфмедиасинк:: аддстреамсинк**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-addstreamsink).</span><span class="sxs-lookup"><span data-stu-id="45acb-137">To add a new stream sink, call [**IMFMediaSink::AddStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-addstreamsink).</span></span> <span data-ttu-id="45acb-138">Чтобы удалить приемник потока, вызовите метод [**имфмедиасинк:: ремовестреамсинк**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-removestreamsink).</span><span class="sxs-lookup"><span data-stu-id="45acb-138">To remove a stream sink, call [**IMFMediaSink::RemoveStreamSink**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-removestreamsink).</span></span> <span data-ttu-id="45acb-139">\_Флаг фиксированных \_ потоков медиасинк указывает, что приемник мультимедиа не поддерживает эти два метода.</span><span class="sxs-lookup"><span data-stu-id="45acb-139">The MEDIASINK\_FIXED\_STREAMS flag indicates that the media sink does not support these two methods.</span></span> <span data-ttu-id="45acb-140">(Он может поддерживать другой способ настройки количества потоков, например путем настройки параметров инициализации при создании приемника.) Список приемников потоков упорядочен.</span><span class="sxs-lookup"><span data-stu-id="45acb-140">(It might support some other way to configure the number of streams, for example by setting initialization parameters when the sink is created.) The list of stream sinks is ordered.</span></span> <span data-ttu-id="45acb-141">Чтобы перечислить их по значению индекса, вызовите метод [**имфмедиасинк:: жетстреамсинкбиндекс**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyindex) .</span><span class="sxs-lookup"><span data-stu-id="45acb-141">To enumerate them by index value, call the [**IMFMediaSink::GetStreamSinkByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyindex) method.</span></span>

<span data-ttu-id="45acb-142">Приемники потоков также имеют идентификаторы.</span><span class="sxs-lookup"><span data-stu-id="45acb-142">Stream sinks also have identifiers.</span></span> <span data-ttu-id="45acb-143">Идентификаторы потоков уникальны в приемнике мультимедиа, но не должны быть последовательными.</span><span class="sxs-lookup"><span data-stu-id="45acb-143">Stream identifiers are unique within the media sink, but do not have to be consecutive.</span></span> <span data-ttu-id="45acb-144">В зависимости от приемника носителя идентификаторы потоков могут иметь некоторое значение, связанное с содержимым.</span><span class="sxs-lookup"><span data-stu-id="45acb-144">Depending on the media sink, the stream identifiers might have some meaning that is related to the content.</span></span> <span data-ttu-id="45acb-145">Например, приемник архива может записывать идентификаторы потоков в заголовок файла.</span><span class="sxs-lookup"><span data-stu-id="45acb-145">For example, an archive sink might write the stream identifiers into the file header.</span></span> <span data-ttu-id="45acb-146">В противном случае они являются произвольными.</span><span class="sxs-lookup"><span data-stu-id="45acb-146">Otherwise, they are arbitrary.</span></span> <span data-ttu-id="45acb-147">Чтобы получить приемник потока по его идентификатору, вызовите метод [**имфмедиасинк:: жетстреамсинкбид**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyid).</span><span class="sxs-lookup"><span data-stu-id="45acb-147">To get a stream sink by its identifier, call [**IMFMediaSink::GetStreamSinkById**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getstreamsinkbyid).</span></span>

## <a name="presentation-clock"></a><span data-ttu-id="45acb-148">Часы представления</span><span class="sxs-lookup"><span data-stu-id="45acb-148">Presentation Clock</span></span>

<span data-ttu-id="45acb-149">Скорость, с которой приемник носителей потребляет выборки, управляется [часами представления](presentation-clock.md).</span><span class="sxs-lookup"><span data-stu-id="45acb-149">The rate at which a media sink consumes samples is controlled by the [Presentation Clock](presentation-clock.md).</span></span> <span data-ttu-id="45acb-150">Сеанс мультимедиа выбирает часы презентации и задает ее в приемнике мультимедиа, вызывая метод [**имфмедиасинк:: сетпресентатионклокк**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-setpresentationclock) приемника мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="45acb-150">The Media Session selects the presentation clock and sets it on the media sink by calling the media sink's [**IMFMediaSink::SetPresentationClock**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-setpresentationclock) method.</span></span> <span data-ttu-id="45acb-151">Перед началом потоковой передачи необходимо задать часы презентации в приемнике мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="45acb-151">The presentation clock must be set on the media sink before streaming can begin.</span></span> <span data-ttu-id="45acb-152">Для выполнения каждого приемника мультимедиа требуется время показа.</span><span class="sxs-lookup"><span data-stu-id="45acb-152">Every media sink requires a presentation clock to run.</span></span> <span data-ttu-id="45acb-153">Приемник мультимедиа использует часы презентации в двух целях:</span><span class="sxs-lookup"><span data-stu-id="45acb-153">The media sink uses the presentation clock for two purposes:</span></span>

-   <span data-ttu-id="45acb-154">Для получения уведомлений при запуске или остановке потоковой передачи.</span><span class="sxs-lookup"><span data-stu-id="45acb-154">To receive notifications when streaming starts or stops.</span></span> <span data-ttu-id="45acb-155">Приемник мультимедиа получает эти уведомления через интерфейс [**имфклоккстатесинк**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) , который должен быть реализован всеми приемниками мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="45acb-155">The media sink receives these notifications through the [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) interface, which all media sinks must implement.</span></span>

-   <span data-ttu-id="45acb-156">Чтобы определить, когда он должен визуализировать образцы.</span><span class="sxs-lookup"><span data-stu-id="45acb-156">To determine when it should render samples.</span></span> <span data-ttu-id="45acb-157">Когда приемник мультимедиа получает новый пример, он получает отметку времени из примера и пытается визуализировать образец в это время презентации.</span><span class="sxs-lookup"><span data-stu-id="45acb-157">When the media sink receives a new sample, it gets the time stamp from the sample and tries to render the sample at that presentation time.</span></span>

<span data-ttu-id="45acb-158">Часы представления изменяются от другого объекта, который называется *источником времени презентации*.</span><span class="sxs-lookup"><span data-stu-id="45acb-158">The presentation clock derives its clock times from another object called the *presentation time source*.</span></span> <span data-ttu-id="45acb-159">Источники времени представления предоставляют интерфейс [**имфпресентатионтимесаурце**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) .</span><span class="sxs-lookup"><span data-stu-id="45acb-159">Presentation time sources expose the [**IMFPresentationTimeSource**](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) interface.</span></span> <span data-ttu-id="45acb-160">Некоторые приемники мультимедиа имеют доступ к точным часам, поэтому они предоставляют этот интерфейс.</span><span class="sxs-lookup"><span data-stu-id="45acb-160">Some media sinks have access to an accurate clock, so they expose this interface.</span></span> <span data-ttu-id="45acb-161">Это означает, что приемник мультимедиа может запланировать выборку в соответствии со временем, предоставленным собственными часами.</span><span class="sxs-lookup"><span data-stu-id="45acb-161">This means that a media sink might schedule samples against a time provided by its own clock.</span></span> <span data-ttu-id="45acb-162">Однако приемник мультимедиа не может предположить, что это так.</span><span class="sxs-lookup"><span data-stu-id="45acb-162">However, the media sink cannot assume this to be the case.</span></span> <span data-ttu-id="45acb-163">Он всегда должен использовать время из часов презентации, независимо от того, управляется ли он самим приемником мультимедиа или другими часами.</span><span class="sxs-lookup"><span data-stu-id="45acb-163">It must always use the time from the presentation clock, regardless of whether the presentation clock is driven by the media sink itself, or by some other clock.</span></span>

<span data-ttu-id="45acb-164">Если приемник мультимедиа не может сопоставлять скорости с часами, отличными от собственных [**, метод медиасинк**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) возвращает \_ \_ \_ флаг часов.</span><span class="sxs-lookup"><span data-stu-id="45acb-164">If a media sink cannot match rates with a clock other than its own, the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_CANNOT\_MATCH\_CLOCK flag.</span></span> <span data-ttu-id="45acb-165">Если этот флаг установлен и в качестве часов представления используется другой источник времени презентации, приемник мультимедиа, скорее всего, будет работать плохо.</span><span class="sxs-lookup"><span data-stu-id="45acb-165">If this flag is present and the presentation clock uses a different presentation time source, the media sink is likely to perform poorly.</span></span> <span data-ttu-id="45acb-166">Например, может возникнуть сбой во время воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="45acb-166">For example, it might glitch during playback.</span></span>

<span data-ttu-id="45acb-167">Приемник без учета *скорости* — это приемник мультимедиа, который игнорирует метки времени для выборок и использует данные сразу после получения каждого образца.</span><span class="sxs-lookup"><span data-stu-id="45acb-167">A *rateless* sink is a media sink that ignores the time stamps on samples and consumes data as soon as each sample arrives.</span></span> <span data-ttu-id="45acb-168">Приемник мультимедиа с нескоростью, который не имеет интенсивности, Возвращает флаг МЕДИАСИНК с учетом \_ скорости из метода "коэффициенты [**"**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) .</span><span class="sxs-lookup"><span data-stu-id="45acb-168">A rateless media sink returns the MEDIASINK\_RATELESS flag from the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method.</span></span> <span data-ttu-id="45acb-169">Обычно этот флаг применяется к приемникам архива.</span><span class="sxs-lookup"><span data-stu-id="45acb-169">Typically this flag applies to archive sinks.</span></span> <span data-ttu-id="45acb-170">Если для каждого приемника мультимедиа в конвейере не используется частота, сеанс мультимедиа использует специальные часы представления с учетом скорости.</span><span class="sxs-lookup"><span data-stu-id="45acb-170">If every media sink in the pipeline is rateless, the Media Session uses a special rateless presentation clock.</span></span> <span data-ttu-id="45acb-171">Это время выполняется так быстро, как приемники используют образцы.</span><span class="sxs-lookup"><span data-stu-id="45acb-171">This clock runs as quickly as the sinks consume samples.</span></span>

## <a name="stream-formats"></a><span data-ttu-id="45acb-172">Форматы потоков</span><span class="sxs-lookup"><span data-stu-id="45acb-172">Stream Formats</span></span>

<span data-ttu-id="45acb-173">Прежде чем приемник мультимедиа сможет получать образцы, клиент должен задать тип носителя для приемников потока.</span><span class="sxs-lookup"><span data-stu-id="45acb-173">Before the media sink can receive samples, the client must set the media type on the stream sinks.</span></span> <span data-ttu-id="45acb-174">Чтобы задать тип мультимедиа, вызовите метод [**имфстреамсинк:: жетмедиатипехандлер**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-getmediatypehandler) приемника потока.</span><span class="sxs-lookup"><span data-stu-id="45acb-174">To set the media type, call the stream sink's [**IMFStreamSink::GetMediaTypeHandler**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-getmediatypehandler) method.</span></span> <span data-ttu-id="45acb-175">Этот метод возвращает указатель на интерфейс [**имфмедиатипехандлер**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) .</span><span class="sxs-lookup"><span data-stu-id="45acb-175">This method returns a pointer to the [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) interface.</span></span> <span data-ttu-id="45acb-176">Используйте этот интерфейс для получения списка предпочтительных типов мультимедиа, получения текущего типа мультимедиа и задания типа носителя.</span><span class="sxs-lookup"><span data-stu-id="45acb-176">Use this interface to get the list of preferred media types, get the current media type, and set the media type.</span></span>

<span data-ttu-id="45acb-177">Чтобы получить список предпочтительных типов мультимедиа, вызовите метод [**имфмедиатипехандлер:: жетмедиатипебиндекс**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getmediatypebyindex).</span><span class="sxs-lookup"><span data-stu-id="45acb-177">To get the list of preferred media types, call [**IMFMediaTypeHandler::GetMediaTypeByIndex**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getmediatypebyindex).</span></span> <span data-ttu-id="45acb-178">Предпочтительные типы следует принимать в качестве подсказки для клиента.</span><span class="sxs-lookup"><span data-stu-id="45acb-178">The preferred types should be taken as a hint to the client.</span></span> <span data-ttu-id="45acb-179">Список может быть неполным или включать частичные типы носителей.</span><span class="sxs-lookup"><span data-stu-id="45acb-179">The list might be incomplete or include partial media types.</span></span> <span data-ttu-id="45acb-180">Частичный тип носителя — это тот, который не имеет всех атрибутов, необходимых для описания допустимого формата.</span><span class="sxs-lookup"><span data-stu-id="45acb-180">A partial media type is one that does not have all of the attributes needed to describe a valid format.</span></span> <span data-ttu-id="45acb-181">Например, в частичном типе видео можно указать цветовое пространство и битовую глубину, но не ширину или высоту изображения.</span><span class="sxs-lookup"><span data-stu-id="45acb-181">For example, a partial video type might specify the color space and bit depth but not the image width or height.</span></span> <span data-ttu-id="45acb-182">Частичный тип звука может указывать формат сжатия и частоту выборки, но не число каналов звука.</span><span class="sxs-lookup"><span data-stu-id="45acb-182">A partial audio type might specify the compression format and the sample rate but not the number of audio channels.</span></span>

<span data-ttu-id="45acb-183">Чтобы получить текущий тип носителя приемника потока, вызовите метод [**имфмедиатипехандлер:: жеткуррентмедиатипе**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getcurrentmediatype).</span><span class="sxs-lookup"><span data-stu-id="45acb-183">To get the stream sink's current media type, call [**IMFMediaTypeHandler::GetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-getcurrentmediatype).</span></span> <span data-ttu-id="45acb-184">При первом создании приемника потока он может иметь тип носителя по умолчанию или не иметь типа носителя, пока клиент не установит его.</span><span class="sxs-lookup"><span data-stu-id="45acb-184">When a stream sink is first created, it might have a default media type already set, or it might have no media type until the client sets one.</span></span>

<span data-ttu-id="45acb-185">Чтобы задать тип мультимедиа, вызовите [**имфмедиатипехандлер:: сеткуррентмедиатипе**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-setcurrentmediatype).</span><span class="sxs-lookup"><span data-stu-id="45acb-185">To set the media type, call [**IMFMediaTypeHandler::SetCurrentMediaType**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-setcurrentmediatype).</span></span> <span data-ttu-id="45acb-186">Некоторые приемники потоков могут не поддерживать изменение типа после установки.</span><span class="sxs-lookup"><span data-stu-id="45acb-186">Some stream sinks might not support changing the type after is has been set.</span></span> <span data-ttu-id="45acb-187">Поэтому полезно протестировать типы мультимедиа перед их настройкой.</span><span class="sxs-lookup"><span data-stu-id="45acb-187">Therefore, it useful to test media types before setting them.</span></span> <span data-ttu-id="45acb-188">Чтобы проверить, будет ли приемник мультимедиа принимать тип мультимедиа (без задания типа), вызовите [**имфмедиатипехандлер:: исмедиатипесуппортед**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-ismediatypesupported).</span><span class="sxs-lookup"><span data-stu-id="45acb-188">To test whether the media sink will accept a media type, (without setting the type), call [**IMFMediaTypeHandler::IsMediaTypeSupported**](/windows/desktop/api/mfidl/nf-mfidl-imfmediatypehandler-ismediatypesupported).</span></span>

## <a name="data-flow"></a><span data-ttu-id="45acb-189">Поток данных</span><span class="sxs-lookup"><span data-stu-id="45acb-189">Data Flow</span></span>

<span data-ttu-id="45acb-190">Приемники носителей используют *модель извлечения*, что означает, что приемники потоков запрашивают данные по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="45acb-190">Media sinks use a *pull model*, which means that the stream sinks request data as they need it.</span></span> <span data-ttu-id="45acb-191">Клиент должен своевременно реагировать на запросы, чтобы избежать сбоев.</span><span class="sxs-lookup"><span data-stu-id="45acb-191">The client should respond in a timely manner to avoid any glitching.</span></span>

<span data-ttu-id="45acb-192">Некоторые приемники мультимедиа поддерживают *предвыпуск*.</span><span class="sxs-lookup"><span data-stu-id="45acb-192">Some media sinks support *prerolling*.</span></span> <span data-ttu-id="45acb-193">Предварительная подготовка — это процесс передачи данных в приемник мультимедиа до запуска представления.</span><span class="sxs-lookup"><span data-stu-id="45acb-193">Prerolling is the process of giving data to the media sink before the presentation clock starts.</span></span> <span data-ttu-id="45acb-194">Если приемник мультимедиа поддерживает предустановку, приемник мультимедиа предоставляет интерфейс [**имфмедиасинкпреролл**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll) , а метод WebMethod ВОЗВРАЩАЕТ флаг медиасинк [**, который**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) \_ можно \_ превращение.</span><span class="sxs-lookup"><span data-stu-id="45acb-194">If a media sink supports prerolling, the media sink exposes the [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll) interface, and the [**GetCharacteristics**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-getcharacteristics) method returns the MEDIASINK\_CAN\_PREROLL flag.</span></span> <span data-ttu-id="45acb-195">Предварительная подготовка гарантирует, что приемник мультимедиа будет готов к представлению первого образца при запуске часов презентации.</span><span class="sxs-lookup"><span data-stu-id="45acb-195">Prerolling ensures that the media sink is ready to present the first sample when the presentation clock starts.</span></span> <span data-ttu-id="45acb-196">Рекомендуется всегда выполнять предустановку клиента, если он поддерживается приемником мультимедиа, так как он может предотвратить сбои или пропуски во время воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="45acb-196">It is recommended that the client always preroll if the media sink supports it, because it can prevent glitching or gaps during playback.</span></span>

<span data-ttu-id="45acb-197">Поток данных в приемнике мультимедиа работает следующим образом:</span><span class="sxs-lookup"><span data-stu-id="45acb-197">Data flow to a media sink works as follows:</span></span>

1.  <span data-ttu-id="45acb-198">Клиент задает типы носителей и часы представления.</span><span class="sxs-lookup"><span data-stu-id="45acb-198">The client sets the media types and the presentation clock.</span></span> <span data-ttu-id="45acb-199">Приемник мультимедиа регистрируется с часами представления для получения уведомлений об изменениях состояния часов.</span><span class="sxs-lookup"><span data-stu-id="45acb-199">The media sink registers itself with the presentation clock to receive notifications about clock state changes.</span></span>
2.  <span data-ttu-id="45acb-200">При необходимости клиент запрашивает [**имфмедиасинкпреролл**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll).</span><span class="sxs-lookup"><span data-stu-id="45acb-200">Optionally, the client queries for [**IMFMediaSinkPreroll**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll).</span></span> <span data-ttu-id="45acb-201">Если приемник мультимедиа предоставляет этот интерфейс, клиент вызывает [**имфмедиасинкпреролл:: нотифипреролл**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasinkpreroll-notifypreroll).</span><span class="sxs-lookup"><span data-stu-id="45acb-201">If the media sink exposes this interface, the client calls [**IMFMediaSinkPreroll::NotifyPreroll**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasinkpreroll-notifypreroll).</span></span> <span data-ttu-id="45acb-202">В противном случае клиент переходит к шагу 5.</span><span class="sxs-lookup"><span data-stu-id="45acb-202">Otherwise, the client skips to step 5.</span></span>
3.  <span data-ttu-id="45acb-203">Каждый приемник потока отправляет одно или несколько событий [местреамсинкрекуестсампле](mestreamsinkrequestsample.md) .</span><span class="sxs-lookup"><span data-stu-id="45acb-203">Each stream sink sends one or more [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) events.</span></span> <span data-ttu-id="45acb-204">В ответ на каждое из этих событий клиент получает следующий образец данных для этого потока и вызывает [**имфстреамсинк::P роцесссампле**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span><span class="sxs-lookup"><span data-stu-id="45acb-204">In response to each of these events, the client gets the next sample of data for that stream and calls [**IMFStreamSink::ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span></span>
4.  <span data-ttu-id="45acb-205">Когда каждый приемник потока получает достаточно данных о предрулонной передаче, он отправляет событие [местреамсинкпрероллед](mestreamsinkprerolled.md) .</span><span class="sxs-lookup"><span data-stu-id="45acb-205">When each stream sink receives enough preroll data, it sends an [MEStreamSinkPrerolled](mestreamsinkprerolled.md) event.</span></span>
5.  <span data-ttu-id="45acb-206">Клиент вызывает [**имфпресентатионклокк:: Start**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-start) для запуска представления часов.</span><span class="sxs-lookup"><span data-stu-id="45acb-206">The client calls [**IMFPresentationClock::Start**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-start) to start the presentation clock.</span></span>
6.  <span data-ttu-id="45acb-207">Часы презентации уведомляют приемник мультимедиа о начале часов, вызвав [**имфклоккстатесинк:: онклоккстарт**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span><span class="sxs-lookup"><span data-stu-id="45acb-207">The presentation clock notifies the media sink that the clock is starting, by calling [**IMFClockStateSink::OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span>
7.  <span data-ttu-id="45acb-208">Для получения дополнительных данных каждый приемник потока отправляет события [местреамсинкрекуестсампле](mestreamsinkrequestsample.md) .</span><span class="sxs-lookup"><span data-stu-id="45acb-208">To get more data, each stream sink sends [MEStreamSinkRequestSample](mestreamsinkrequestsample.md) events.</span></span> <span data-ttu-id="45acb-209">В ответ на каждое из этих событий клиент получает следующий пример и вызывает [**процесссампле**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span><span class="sxs-lookup"><span data-stu-id="45acb-209">In response to each of these events, the client gets the next sample and calls [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample).</span></span> <span data-ttu-id="45acb-210">Этот шаг повторяется до завершения презентации.</span><span class="sxs-lookup"><span data-stu-id="45acb-210">This step is repeated until the presentation ends.</span></span>

<span data-ttu-id="45acb-211">Большинство приемников мультимедиа обрабатывают примеры асинхронно, поэтому приемники потоков могут одновременно отправить несколько запросов на выборку.</span><span class="sxs-lookup"><span data-stu-id="45acb-211">Most media sinks process samples asynchronously, so the stream sinks can send out more than one sample request at a time.</span></span>

<span data-ttu-id="45acb-212">Во время потоковой передачи клиент может вызвать [**имфстреамсинк::P лацемаркер**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) и [**Имфстреамсинк:: Flush**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-flush) в любое время.</span><span class="sxs-lookup"><span data-stu-id="45acb-212">During streaming, the client can call [**IMFStreamSink::PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) and [**IMFStreamSink::Flush**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-flush) at any time.</span></span> <span data-ttu-id="45acb-213">Маркеры описаны в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="45acb-213">Markers are described in the next section.</span></span> <span data-ttu-id="45acb-214">Сброс приводит к тому, что приемник потока удаляет все образцы, которые он помещает в очередь, но еще не подготовлен к просмотру.</span><span class="sxs-lookup"><span data-stu-id="45acb-214">Flushing causes the stream sink to drop any samples that it has queued but not rendered yet.</span></span>

## <a name="markers"></a><span data-ttu-id="45acb-215">Метки</span><span class="sxs-lookup"><span data-stu-id="45acb-215">Markers</span></span>

<span data-ttu-id="45acb-216">Маркеры предоставляют клиенту способ указания конкретных точек в потоке.</span><span class="sxs-lookup"><span data-stu-id="45acb-216">Markers provide a way for the client to indicate specific points in the stream.</span></span> <span data-ttu-id="45acb-217">Маркер состоит из следующих сведений:</span><span class="sxs-lookup"><span data-stu-id="45acb-217">A marker consists of the following information:</span></span>

-   <span data-ttu-id="45acb-218">Тип маркера, определенный как член перечисления [**\_ \_ типа маркера мфстреамсинк**](/windows/desktop/api/mfidl/ne-mfidl-mfstreamsink_marker_type) .</span><span class="sxs-lookup"><span data-stu-id="45acb-218">The marker type, defined as a member of the [**MFSTREAMSINK\_MARKER\_TYPE**](/windows/desktop/api/mfidl/ne-mfidl-mfstreamsink_marker_type) enumeration.</span></span>
-   <span data-ttu-id="45acb-219">Данные, связанные с маркером.</span><span class="sxs-lookup"><span data-stu-id="45acb-219">Data associated with the marker.</span></span> <span data-ttu-id="45acb-220">Значение данных зависит от типа маркера.</span><span class="sxs-lookup"><span data-stu-id="45acb-220">The meaning of the data depends on the marker type.</span></span> <span data-ttu-id="45acb-221">Некоторые типы маркеров не имеют данных.</span><span class="sxs-lookup"><span data-stu-id="45acb-221">Some marker types do not have data.</span></span>
-   <span data-ttu-id="45acb-222">Необязательные данные для собственного использования клиентом.</span><span class="sxs-lookup"><span data-stu-id="45acb-222">Optional data for the client's own use.</span></span>

<span data-ttu-id="45acb-223">Чтобы поместить маркер, клиент вызывает [**имфстреамсинк::P лацемаркер**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker).</span><span class="sxs-lookup"><span data-stu-id="45acb-223">To place a marker, the client calls [**IMFStreamSink::PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker).</span></span> <span data-ttu-id="45acb-224">Приемник потока завершает обработку всех выборок, полученных перед вызовом **плацемаркер** , а затем отправляет событие [местреамсинкмаркер](mestreamsinkmarker.md) .</span><span class="sxs-lookup"><span data-stu-id="45acb-224">The stream sink finishes processing any samples that it received before the **PlaceMarker** call, and then sends an [MEStreamSinkMarker](mestreamsinkmarker.md) event.</span></span>

<span data-ttu-id="45acb-225">Большинство приемников мультимедиа сохраняют очередь ожидающих выборок, которые они обрабатывали асинхронно.</span><span class="sxs-lookup"><span data-stu-id="45acb-225">Most media sinks keep a queue of pending samples, which they process asynchronously.</span></span> <span data-ttu-id="45acb-226">События маркера должны быть сериализованы с помощью образца обработки, поэтому приемник мультимедиа должен поместить маркеры в одну очередь.</span><span class="sxs-lookup"><span data-stu-id="45acb-226">Marker events must be serialized with sample processing, so the media sink should place the markers in the same queue.</span></span> <span data-ttu-id="45acb-227">Например, предположим, что клиент выполняет следующие вызовы методов:</span><span class="sxs-lookup"><span data-stu-id="45acb-227">For example, suppose the client makes the following method calls:</span></span>

1.  <span data-ttu-id="45acb-228">[**Процесссампле**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (пример \# 1)</span><span class="sxs-lookup"><span data-stu-id="45acb-228">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#1)</span></span>
2.  <span data-ttu-id="45acb-229">[**Процесссампле**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (пример \# 2)</span><span class="sxs-lookup"><span data-stu-id="45acb-229">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#2)</span></span>
3.  <span data-ttu-id="45acb-230">[**Плацемаркер**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (маркер \# 1)</span><span class="sxs-lookup"><span data-stu-id="45acb-230">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (Marker \#1)</span></span>
4.  <span data-ttu-id="45acb-231">[**Процесссампле**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (пример \# 3)</span><span class="sxs-lookup"><span data-stu-id="45acb-231">[**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) (Sample \#3)</span></span>
5.  <span data-ttu-id="45acb-232">[**Плацемаркер**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (маркер \# 2)</span><span class="sxs-lookup"><span data-stu-id="45acb-232">[**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker) (Marker \#2)</span></span>

<span data-ttu-id="45acb-233">В этом примере приемник потока должен отправить событие [местреамсинкмаркер](mestreamsinkmarker.md) для маркера \# 1 после того, как он обрабатывает пример \# 2, и событие для маркера \# 2 после того, как он обработает пример \# 3.</span><span class="sxs-lookup"><span data-stu-id="45acb-233">In this example, the stream sink must send the [MEStreamSinkMarker](mestreamsinkmarker.md) event for marker \#1 after it processes sample \#2, and the event for marker \#2 after it processes sample \#3.</span></span>

<span data-ttu-id="45acb-234">Если клиент очищает приемник потока, приемник потока немедленно обрабатывает все маркеры, находящиеся в очереди.</span><span class="sxs-lookup"><span data-stu-id="45acb-234">If the client flushes a stream sink, the stream sink immediately processes any markers that were in the queue.</span></span> <span data-ttu-id="45acb-235">Он устанавливает для кода состояния значение E \_ Abort для этих событий.</span><span class="sxs-lookup"><span data-stu-id="45acb-235">It sets the status code to E\_ABORT on these events.</span></span>

<span data-ttu-id="45acb-236">Некоторые маркеры содержат сведения, относящиеся к приемнику мультимедиа:</span><span class="sxs-lookup"><span data-stu-id="45acb-236">Some markers contain information that is relevant to the media sink:</span></span>

-   <span data-ttu-id="45acb-237">**Мфстреамсинк \_ \_Tick маркера**: указывает, что в потоке присутствует разрыв.</span><span class="sxs-lookup"><span data-stu-id="45acb-237">**MFSTREAMSINK\_MARKER\_TICK**: Indicates there is a gap in the stream.</span></span> <span data-ttu-id="45acb-238">Следующий пример будет ненепрерывным.</span><span class="sxs-lookup"><span data-stu-id="45acb-238">The next sample will be a discontinuity.</span></span>
-   <span data-ttu-id="45acb-239">**Мфстреамсинк \_ МАРКЕР \_ ендофсегмент**: указывает конец сегмента или конец потока.</span><span class="sxs-lookup"><span data-stu-id="45acb-239">**MFSTREAMSINK\_MARKER\_ENDOFSEGMENT**: Indicates the end of a segment or the end of a stream.</span></span> <span data-ttu-id="45acb-240">Следующий пример (если таковой имеется) может быть ненепрерывным.</span><span class="sxs-lookup"><span data-stu-id="45acb-240">The next sample (if any) might be a discontinuity.</span></span>
-   <span data-ttu-id="45acb-241">**Мфстреамсинк \_ \_Событие маркера**: содержит событие.</span><span class="sxs-lookup"><span data-stu-id="45acb-241">**MFSTREAMSINK\_MARKER\_EVENT**: Contains an event.</span></span> <span data-ttu-id="45acb-242">В зависимости от типа события и реализации приемника мультимедиа приемник мультимедиа может обрабатывать событие или игнорировать его.</span><span class="sxs-lookup"><span data-stu-id="45acb-242">Depending on the event type and the implementation of the media sink, the media sink might handle the event or ignore it.</span></span>

## <a name="state-changes"></a><span data-ttu-id="45acb-243">"Изменения состояния".</span><span class="sxs-lookup"><span data-stu-id="45acb-243">State Changes</span></span>

<span data-ttu-id="45acb-244">Приемник мультимедиа уведомляет об изменениях состояния в часах представления через интерфейс [**имфклоккстатесинк**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) приемника мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="45acb-244">A media sink is notified of state changes in the presentation clock through the media sink's [**IMFClockStateSink**](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink) interface.</span></span> <span data-ttu-id="45acb-245">Когда клиент задает часы презентации, приемник мультимедиа вызывает [**имфпресентатионклокк:: аддклоккстатесинк**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-addclockstatesink) , чтобы зарегистрировать себя для уведомлений из часов.</span><span class="sxs-lookup"><span data-stu-id="45acb-245">When the client sets the presentation clock, the media sink calls [**IMFPresentationClock::AddClockStateSink**](/windows/desktop/api/mfidl/nf-mfidl-imfpresentationclock-addclockstatesink) to register itself for notifications from the clock.</span></span> <span data-ttu-id="45acb-246">В следующей таблице перечислены принципы работы приемника мультимедиа в ответ на изменения состояния часов.</span><span class="sxs-lookup"><span data-stu-id="45acb-246">The following table summarizes how a media sink behaves in response to clock state changes.</span></span>



| <span data-ttu-id="45acb-247">Изменение состояния часов</span><span class="sxs-lookup"><span data-stu-id="45acb-247">Clock state change</span></span>                                         | <span data-ttu-id="45acb-248">Пример обработки</span><span class="sxs-lookup"><span data-stu-id="45acb-248">Sample processing</span></span>                                                                                                                                                                                                                                             | <span data-ttu-id="45acb-249">Обработка маркеров</span><span class="sxs-lookup"><span data-stu-id="45acb-249">Marker processing</span></span>                                                                                                                                                                                   |
|------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="45acb-250">**онклоккстарт**</span><span class="sxs-lookup"><span data-stu-id="45acb-250">**OnClockStart**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart)     | <span data-ttu-id="45acb-251">Обработка образцов, отметок времени которых меньше или позднее времени начала часов.</span><span class="sxs-lookup"><span data-stu-id="45acb-251">Process samples whose time stamp is equal to or later than the clock start time.</span></span>                                                                                                                                                                              | <span data-ttu-id="45acb-252">Отправка события [местреамсинкмаркер](mestreamsinkmarker.md) при обработке всех примеров, полученных до маркера.</span><span class="sxs-lookup"><span data-stu-id="45acb-252">Send the [MEStreamSinkMarker](mestreamsinkmarker.md) event when all of the samples received before the marker have been processed.</span></span>                                                                 |
| [<span data-ttu-id="45acb-253">**онклоккпаусе**</span><span class="sxs-lookup"><span data-stu-id="45acb-253">**OnClockPause**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause)     | <span data-ttu-id="45acb-254">При приостановке приемник мультимедиа может завершаться сбоем [**процесссампле**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) .</span><span class="sxs-lookup"><span data-stu-id="45acb-254">The media sink can fail [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) while paused.</span></span><br/> <span data-ttu-id="45acb-255">Если приемник мультимедиа принимает выборки во время приостановки, он должен поставить их в очередь до перезапуска часов.</span><span class="sxs-lookup"><span data-stu-id="45acb-255">If the media sink accepts samples while paused, it must queue them until the clock restarts.</span></span> <span data-ttu-id="45acb-256">Не обработайте образцы в очереди во время приостановки.</span><span class="sxs-lookup"><span data-stu-id="45acb-256">Do not process any queued samples while paused.</span></span><br/> | <span data-ttu-id="45acb-257">Если имеются образцы в очереди, помещайте маркеры в одну очередь.</span><span class="sxs-lookup"><span data-stu-id="45acb-257">If there are queued samples, put markers onto the same queue.</span></span> <span data-ttu-id="45acb-258">Отправка события маркера при перезапуске часов.</span><span class="sxs-lookup"><span data-stu-id="45acb-258">Send the marker event when the clock restarts.</span></span><br/> <span data-ttu-id="45acb-259">В противном случае немедленно отправьте событие маркера.</span><span class="sxs-lookup"><span data-stu-id="45acb-259">Otherwise, send the marker event immediately.</span></span><br/>                    |
| [<span data-ttu-id="45acb-260">**онклоккрестарт**</span><span class="sxs-lookup"><span data-stu-id="45acb-260">**OnClockRestart**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart) | <span data-ttu-id="45acb-261">Обработайте все образцы, которые были поставлены в очередь во время приостановки, а затем обрабатывают то же, что и [**онклоккстарт**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span><span class="sxs-lookup"><span data-stu-id="45acb-261">Process any samples that were queued while paused, and then treat the same as [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span>                                                                                                                         | <span data-ttu-id="45acb-262">Отправка событий [местреамсинкмаркер](mestreamsinkmarker.md) для маркеров в очереди (сериализованных с помощью образца обработки), а затем обрабатывает то же, что и [**онклоккстарт**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span><span class="sxs-lookup"><span data-stu-id="45acb-262">Send [MEStreamSinkMarker](mestreamsinkmarker.md) events for queued markers (serialized with sample processing), and then treat the same as [**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart).</span></span> |
| [<span data-ttu-id="45acb-263">**онклоккстоп**</span><span class="sxs-lookup"><span data-stu-id="45acb-263">**OnClockStop**</span></span>](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop)       | <span data-ttu-id="45acb-264">Удалите все образцы в очереди.</span><span class="sxs-lookup"><span data-stu-id="45acb-264">Drop all queued samples.</span></span> <span data-ttu-id="45acb-265">Дальнейшие вызовы [**процесссампле**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) могут завершиться ошибкой.</span><span class="sxs-lookup"><span data-stu-id="45acb-265">Further calls to [**ProcessSample**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-processsample) can fail.</span></span>                                                                                                                                                      | <span data-ttu-id="45acb-266">Отправка событий маркера в очереди.</span><span class="sxs-lookup"><span data-stu-id="45acb-266">Send queued marker events.</span></span> <span data-ttu-id="45acb-267">При последующих вызовах [**плацемаркер**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker)немедленно отправьте событие маркера.</span><span class="sxs-lookup"><span data-stu-id="45acb-267">On subsequent calls to [**PlaceMarker**](/windows/desktop/api/mfidl/nf-mfidl-imfstreamsink-placemarker), send the marker event immediately.</span></span>                                                              |



 

<span data-ttu-id="45acb-268">Кроме того, приемники потоков должны отправить следующие события, когда они завершили переходы состояния:</span><span class="sxs-lookup"><span data-stu-id="45acb-268">In addition, stream sinks must send the following events when they have completed the state transitions:</span></span>

-   <span data-ttu-id="45acb-269">[**Онклоккстарт**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart), [**онклоккрестарт**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart): событие [местреамсинкстартед](mestreamsinkstarted.md)</span><span class="sxs-lookup"><span data-stu-id="45acb-269">[**OnClockStart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstart), [**OnClockRestart**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockrestart): [MEStreamSinkStarted](mestreamsinkstarted.md) event</span></span>
-   <span data-ttu-id="45acb-270">[**Онклоккпаусе**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause): событие [местреамсинкпаусед](mestreamsinkpaused.md)</span><span class="sxs-lookup"><span data-stu-id="45acb-270">[**OnClockPause**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockpause): [MEStreamSinkPaused](mestreamsinkpaused.md) event</span></span>
-   <span data-ttu-id="45acb-271">[**Онклоккстоп**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop): событие [местреамсинкстоппед](mestreamsinkstopped.md)</span><span class="sxs-lookup"><span data-stu-id="45acb-271">[**OnClockStop**](/windows/desktop/api/mfidl/nf-mfidl-imfclockstatesink-onclockstop): [MEStreamSinkStopped](mestreamsinkstopped.md) event</span></span>

## <a name="finalizing"></a><span data-ttu-id="45acb-272">Завершение</span><span class="sxs-lookup"><span data-stu-id="45acb-272">Finalizing</span></span>

<span data-ttu-id="45acb-273">Некоторые приемники мультимедиа потребовали дополнительного шага обработки после доставки последней выборки.</span><span class="sxs-lookup"><span data-stu-id="45acb-273">Some media sinks require an extra processing step after the last sample is delivered.</span></span> <span data-ttu-id="45acb-274">Обычно это требование относится к приемникам архива, которые должны записывать заголовки или индексы в файл.</span><span class="sxs-lookup"><span data-stu-id="45acb-274">Typically this requirement applies to archive sinks, which must write headers or indexes into the file.</span></span> <span data-ttu-id="45acb-275">Если приемнику мультимедиа требуется окончательная обработка, он предоставляет интерфейс [**имффинализаблемедиасинк**](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink) .</span><span class="sxs-lookup"><span data-stu-id="45acb-275">If a media sink requires any final processing, it exposes the [**IMFFinalizableMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink) interface.</span></span>

<span data-ttu-id="45acb-276">После того как клиент доставляет последнюю выборку, клиент запрашивает этот интерфейс.</span><span class="sxs-lookup"><span data-stu-id="45acb-276">After the client delivers the last sample, the client queries for this interface.</span></span> <span data-ttu-id="45acb-277">Если приемник мультимедиа поддерживает интерфейс, клиент вызывает [**имффинализаблемедиасинк:: бегинфинализе**](/windows/desktop/api/mfidl/nf-mfidl-imffinalizablemediasink-beginfinalize) для асинхронной обработки.</span><span class="sxs-lookup"><span data-stu-id="45acb-277">If the media sink supports the interface, the client calls [**IMFFinalizableMediaSink::BeginFinalize**](/windows/desktop/api/mfidl/nf-mfidl-imffinalizablemediasink-beginfinalize) to perform the final processing asynchronously.</span></span> <span data-ttu-id="45acb-278">Этот метод соответствует стандартной асинхронной модели Media Foundation, описанной в разделе [асинхронные методы обратного вызова](asynchronous-callback-methods.md).</span><span class="sxs-lookup"><span data-stu-id="45acb-278">This method follows the standard Media Foundation asynchronous model, described in [Asynchronous Callback Methods](asynchronous-callback-methods.md).</span></span> <span data-ttu-id="45acb-279">Приемник мультимедиа может предположить, что клиент будет вызывать **бегинфинализе**.</span><span class="sxs-lookup"><span data-stu-id="45acb-279">The media sink can assume that the client will call **BeginFinalize**.</span></span> <span data-ttu-id="45acb-280">Сбой вызова **бегинфинализе** может привести к созданию неправильно созданного файла.</span><span class="sxs-lookup"><span data-stu-id="45acb-280">Failure to call **BeginFinalize** can result in an incorrectly authored file.</span></span>

## <a name="shutting-down"></a><span data-ttu-id="45acb-281">Завершение работы</span><span class="sxs-lookup"><span data-stu-id="45acb-281">Shutting Down</span></span>

<span data-ttu-id="45acb-282">Когда клиент завершит работу с приемником мультимедиа, клиент вызывает [**имфмедиасинк:: Shutdown**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-shutdown).</span><span class="sxs-lookup"><span data-stu-id="45acb-282">When the client is done using the media sink, the client calls [**IMFMediaSink::Shutdown**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasink-shutdown).</span></span> <span data-ttu-id="45acb-283">Внутри этого метода приемник мультимедиа должен прерывать любые циклические счетчики ссылок.</span><span class="sxs-lookup"><span data-stu-id="45acb-283">Inside this method, the media sink should break any circular reference counts.</span></span> <span data-ttu-id="45acb-284">Как правило, между приемником мультимедиа и приемниками потоков будут существовать циклические ссылки.</span><span class="sxs-lookup"><span data-stu-id="45acb-284">Typically, there will be circular references between the media sink and the stream sinks.</span></span>

<span data-ttu-id="45acb-285">Если для реализации [**имфмедиаевентженератор**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator)используется вспомогательный объект очереди событий, вызовите [**Имфмедиаевенткуеуе:: Shutdown**](/windows/desktop/api/mfobjects/nf-mfobjects-imfmediaeventqueue-shutdown) в очереди событий.</span><span class="sxs-lookup"><span data-stu-id="45acb-285">If you are using the event queue helper object to implement [**IMFMediaEventGenerator**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator), call [**IMFMediaEventQueue::Shutdown**](/windows/desktop/api/mfobjects/nf-mfobjects-imfmediaeventqueue-shutdown) on the event queue.</span></span> <span data-ttu-id="45acb-286">Этот метод завершает работу очереди событий и сигнализирует любому вызывающему объекту, который в данный момент ожидает события.</span><span class="sxs-lookup"><span data-stu-id="45acb-286">This method shuts down the event queue and signals any caller that is currently waiting for an event.</span></span>

<span data-ttu-id="45acb-287">После завершения работы все методы в приемнике носителей возвращают MF \_ E \_ Shutdown, за исключением методов **IUnknown** .</span><span class="sxs-lookup"><span data-stu-id="45acb-287">After shutdown, all methods on the media sink return MF\_E\_SHUTDOWN, with the exception of **IUnknown** methods.</span></span>

## <a name="media-sink-interfaces"></a><span data-ttu-id="45acb-288">Интерфейсы приемника мультимедиа</span><span class="sxs-lookup"><span data-stu-id="45acb-288">Media Sink Interfaces</span></span>

<span data-ttu-id="45acb-289">В следующей таблице перечислены стандартные интерфейсы, которые приемники мультимедиа могут предоставлять через **QueryInterface**.</span><span class="sxs-lookup"><span data-stu-id="45acb-289">The following table lists the standard interfaces that media sinks can expose through **QueryInterface**.</span></span> <span data-ttu-id="45acb-290">Приемники носителей также могут предоставлять настраиваемые интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="45acb-290">Media sinks can also expose custom interfaces.</span></span>



| <span data-ttu-id="45acb-291">Интерфейс</span><span class="sxs-lookup"><span data-stu-id="45acb-291">Interface</span></span>                                                      | <span data-ttu-id="45acb-292">Описание</span><span class="sxs-lookup"><span data-stu-id="45acb-292">Description</span></span>                                                                                   |
|----------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
| [<span data-ttu-id="45acb-293">**имфмедиасинк**</span><span class="sxs-lookup"><span data-stu-id="45acb-293">**IMFMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink)                           | <span data-ttu-id="45acb-294">Основной интерфейс для приемников мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="45acb-294">The primary interface for media sinks.</span></span> <span data-ttu-id="45acb-295">(Обязательно).</span><span class="sxs-lookup"><span data-stu-id="45acb-295">(Required.)</span></span>                                            |
| [<span data-ttu-id="45acb-296">**имфклоккстатесинк**</span><span class="sxs-lookup"><span data-stu-id="45acb-296">**IMFClockStateSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink)                 | <span data-ttu-id="45acb-297">Используется для уведомления приемника мультимедиа при изменении состояния часов представления.</span><span class="sxs-lookup"><span data-stu-id="45acb-297">Used to notify the media sink when presentation clock changes state.</span></span> <span data-ttu-id="45acb-298">(Обязательно).</span><span class="sxs-lookup"><span data-stu-id="45acb-298">(Required.)</span></span>              |
| [<span data-ttu-id="45acb-299">**имффинализаблемедиасинк**</span><span class="sxs-lookup"><span data-stu-id="45acb-299">**IMFFinalizableMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink)     | <span data-ttu-id="45acb-300">Реализуйте, если приемник мультимедиа должен выполнить окончательный этап обработки.</span><span class="sxs-lookup"><span data-stu-id="45acb-300">Implement if the media sink must perform a final processing step.</span></span> <span data-ttu-id="45acb-301">(Необязательно.)</span><span class="sxs-lookup"><span data-stu-id="45acb-301">(Optional.)</span></span>                 |
| [<span data-ttu-id="45acb-302">**имфжетсервице**</span><span class="sxs-lookup"><span data-stu-id="45acb-302">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)                         | <span data-ttu-id="45acb-303">Реализуйте, если приемник мультимедиа предоставляет какие бы то ни было интерфейсы службы.</span><span class="sxs-lookup"><span data-stu-id="45acb-303">Implement if the media sink exposes any service interfaces.</span></span> <span data-ttu-id="45acb-304">(Необязательно.)</span><span class="sxs-lookup"><span data-stu-id="45acb-304">(Optional.)</span></span>                       |
| [<span data-ttu-id="45acb-305">**имфмедиаевентженератор**</span><span class="sxs-lookup"><span data-stu-id="45acb-305">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator)       | <span data-ttu-id="45acb-306">Реализуйте, если приемник мультимедиа отправляет любые события.</span><span class="sxs-lookup"><span data-stu-id="45acb-306">Implement if the media sink sends any events.</span></span> <span data-ttu-id="45acb-307">(Необязательно.)</span><span class="sxs-lookup"><span data-stu-id="45acb-307">(Optional.)</span></span>                                     |
| [<span data-ttu-id="45acb-308">**имфмедиасинкпреролл**</span><span class="sxs-lookup"><span data-stu-id="45acb-308">**IMFMediaSinkPreroll**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasinkpreroll)             | <span data-ttu-id="45acb-309">Реализуйте, если приемник мультимедиа поддерживает предустановку.</span><span class="sxs-lookup"><span data-stu-id="45acb-309">Implement if the media sink supports preroll.</span></span> <span data-ttu-id="45acb-310">(Необязательно.)</span><span class="sxs-lookup"><span data-stu-id="45acb-310">(Optional.)</span></span>                                     |
| [<span data-ttu-id="45acb-311">**имфпресентатионтимесаурце**</span><span class="sxs-lookup"><span data-stu-id="45acb-311">**IMFPresentationTimeSource**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfpresentationtimesource) | <span data-ttu-id="45acb-312">Реализуйте, если приемник мультимедиа может предоставить источник времени для часов представления.</span><span class="sxs-lookup"><span data-stu-id="45acb-312">Implement if the media sink can provide a time source for the presentation clock.</span></span> <span data-ttu-id="45acb-313">(Необязательно.)</span><span class="sxs-lookup"><span data-stu-id="45acb-313">(Optional.)</span></span> |
| [<span data-ttu-id="45acb-314">**имфкуалитядвисе**</span><span class="sxs-lookup"><span data-stu-id="45acb-314">**IMFQualityAdvise**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise)                   | <span data-ttu-id="45acb-315">Реализуйте, если приемник мультимедиа может настроить качество воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="45acb-315">Implement if the media sink can adjust playback quality.</span></span> <span data-ttu-id="45acb-316">(Необязательно.)</span><span class="sxs-lookup"><span data-stu-id="45acb-316">(Optional.)</span></span>                          |



 

<span data-ttu-id="45acb-317">Кроме того, приемник мультимедиа может реализовать в качестве службы следующий интерфейс.</span><span class="sxs-lookup"><span data-stu-id="45acb-317">Optionally, a media sink can implement the following interface as a service.</span></span>



| <span data-ttu-id="45acb-318">Интерфейс службы</span><span class="sxs-lookup"><span data-stu-id="45acb-318">Service interface</span></span>                        | <span data-ttu-id="45acb-319">Описание</span><span class="sxs-lookup"><span data-stu-id="45acb-319">Description</span></span>                                    |
|------------------------------------------|------------------------------------------------|
| [<span data-ttu-id="45acb-320">**имфратесуппорт**</span><span class="sxs-lookup"><span data-stu-id="45acb-320">**IMFRateSupport**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport) | <span data-ttu-id="45acb-321">Сообщает диапазон поддерживаемых ставок воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="45acb-321">Reports the range of supported playback rates.</span></span> |



 

<span data-ttu-id="45acb-322">Дополнительные сведения об интерфейсах служб и [**имфжетсервице**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)см. в разделе [интерфейсы служб](service-interfaces.md).</span><span class="sxs-lookup"><span data-stu-id="45acb-322">For more information about service interfaces and [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice), see [Service Interfaces](service-interfaces.md).</span></span>

## <a name="stream-sink-interfaces"></a><span data-ttu-id="45acb-323">Интерфейсы приемника потока</span><span class="sxs-lookup"><span data-stu-id="45acb-323">Stream Sink Interfaces</span></span>

<span data-ttu-id="45acb-324">Приемники потоков должны предоставлять следующие интерфейсы через **QueryInterface**.</span><span class="sxs-lookup"><span data-stu-id="45acb-324">Stream sinks must expose the following interfaces through **QueryInterface**.</span></span>



| <span data-ttu-id="45acb-325">Интерфейс</span><span class="sxs-lookup"><span data-stu-id="45acb-325">Interface</span></span>                                                | <span data-ttu-id="45acb-326">Описание</span><span class="sxs-lookup"><span data-stu-id="45acb-326">Description</span></span>                                                                                              |
|----------------------------------------------------------|----------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="45acb-327">**имфстреамсинк**</span><span class="sxs-lookup"><span data-stu-id="45acb-327">**IMFStreamSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink)                   | <span data-ttu-id="45acb-328">Основной интерфейс для приемников потоков.</span><span class="sxs-lookup"><span data-stu-id="45acb-328">The primary interface for stream sinks.</span></span> <span data-ttu-id="45acb-329">(Обязательно).</span><span class="sxs-lookup"><span data-stu-id="45acb-329">(Required.)</span></span>                                                      |
| [<span data-ttu-id="45acb-330">**имфмедиаевентженератор**</span><span class="sxs-lookup"><span data-stu-id="45acb-330">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator) | <span data-ttu-id="45acb-331">Помещает события в очередь.</span><span class="sxs-lookup"><span data-stu-id="45acb-331">Queues events.</span></span> <span data-ttu-id="45acb-332">Интерфейс [**имфстреамсинк**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) наследует этот интерфейс.</span><span class="sxs-lookup"><span data-stu-id="45acb-332">The [**IMFStreamSink**](/windows/desktop/api/mfidl/nn-mfidl-imfstreamsink) interface inherits this interface.</span></span> <span data-ttu-id="45acb-333">(Обязательно).</span><span class="sxs-lookup"><span data-stu-id="45acb-333">(Required.)</span></span> |



 

<span data-ttu-id="45acb-334">В настоящее время для приемников потоков не определены интерфейсы службы.</span><span class="sxs-lookup"><span data-stu-id="45acb-334">Currently no service interfaces are defined for stream sinks.</span></span>

## <a name="stream-sink-events"></a><span data-ttu-id="45acb-335">События приемника потока</span><span class="sxs-lookup"><span data-stu-id="45acb-335">Stream Sink Events</span></span>

<span data-ttu-id="45acb-336">В следующей таблице перечислены события, определенные для универсальных приемников потока.</span><span class="sxs-lookup"><span data-stu-id="45acb-336">The following table lists the events that are defined for generic stream sinks.</span></span> <span data-ttu-id="45acb-337">Приемники потоков также могут передавать пользовательские события, не указанные здесь.</span><span class="sxs-lookup"><span data-stu-id="45acb-337">Stream sinks can also send custom events not listed here.</span></span>



| <span data-ttu-id="45acb-338">Событие</span><span class="sxs-lookup"><span data-stu-id="45acb-338">Event</span></span>                                                                  | <span data-ttu-id="45acb-339">Описание</span><span class="sxs-lookup"><span data-stu-id="45acb-339">Description</span></span>                                                  |
|------------------------------------------------------------------------|--------------------------------------------------------------|
| [<span data-ttu-id="45acb-340">местреамсинкформатчанжед</span><span class="sxs-lookup"><span data-stu-id="45acb-340">MEStreamSinkFormatChanged</span></span>](mestreamsinkformatchanged.md)             | <span data-ttu-id="45acb-341">Тип носителя приемника потока больше не действителен.</span><span class="sxs-lookup"><span data-stu-id="45acb-341">The stream sink's media type is no longer valid.</span></span> <span data-ttu-id="45acb-342">(Необязательно.)</span><span class="sxs-lookup"><span data-stu-id="45acb-342">(Optional.)</span></span> |
| [<span data-ttu-id="45acb-343">местреамсинкмаркер</span><span class="sxs-lookup"><span data-stu-id="45acb-343">MEStreamSinkMarker</span></span>](mestreamsinkmarker.md)                           | <span data-ttu-id="45acb-344">Маркер обработан.</span><span class="sxs-lookup"><span data-stu-id="45acb-344">A marker was processed.</span></span> <span data-ttu-id="45acb-345">(Обязательно).</span><span class="sxs-lookup"><span data-stu-id="45acb-345">(Required.)</span></span>                          |
| [<span data-ttu-id="45acb-346">местреамсинкпаусед</span><span class="sxs-lookup"><span data-stu-id="45acb-346">MEStreamSinkPaused</span></span>](mestreamsinkpaused.md)                           | <span data-ttu-id="45acb-347">Работа приемника потока приостановлена.</span><span class="sxs-lookup"><span data-stu-id="45acb-347">The stream sink has paused.</span></span> <span data-ttu-id="45acb-348">(Обязательно).</span><span class="sxs-lookup"><span data-stu-id="45acb-348">(Required.)</span></span>                      |
| [<span data-ttu-id="45acb-349">местреамсинкпрероллед</span><span class="sxs-lookup"><span data-stu-id="45acb-349">MEStreamSinkPrerolled</span></span>](mestreamsinkprerolled.md)                     | <span data-ttu-id="45acb-350">Предвосстановление завершено.</span><span class="sxs-lookup"><span data-stu-id="45acb-350">Preroll is complete.</span></span> <span data-ttu-id="45acb-351">(Необязательно.)</span><span class="sxs-lookup"><span data-stu-id="45acb-351">(Optional.)</span></span>                             |
| [<span data-ttu-id="45acb-352">местреамсинкратечанжед</span><span class="sxs-lookup"><span data-stu-id="45acb-352">MEStreamSinkRateChanged</span></span>](mestreamsinkratechanged.md)                 | <span data-ttu-id="45acb-353">Приемник потока изменил скорость воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="45acb-353">The stream sink has changed playback rate.</span></span> <span data-ttu-id="45acb-354">(Необязательно.)</span><span class="sxs-lookup"><span data-stu-id="45acb-354">(Optional.)</span></span>       |
| [<span data-ttu-id="45acb-355">местреамсинкрекуестсампле</span><span class="sxs-lookup"><span data-stu-id="45acb-355">MEStreamSinkRequestSample</span></span>](mestreamsinkrequestsample.md)             | <span data-ttu-id="45acb-356">Запрашивается новый пример.</span><span class="sxs-lookup"><span data-stu-id="45acb-356">A new sample is requested.</span></span> <span data-ttu-id="45acb-357">(Обязательно).</span><span class="sxs-lookup"><span data-stu-id="45acb-357">(Required.)</span></span>                       |
| [<span data-ttu-id="45acb-358">местреамсинкскрубсамплекомплете</span><span class="sxs-lookup"><span data-stu-id="45acb-358">MEStreamSinkScrubSampleComplete</span></span>](mestreamsinkscrubsamplecomplete.md) | <span data-ttu-id="45acb-359">Запрос на очистку завершен.</span><span class="sxs-lookup"><span data-stu-id="45acb-359">A scrub request was completed.</span></span> <span data-ttu-id="45acb-360">(Необязательно.)</span><span class="sxs-lookup"><span data-stu-id="45acb-360">(Optional.)</span></span>                   |
| [<span data-ttu-id="45acb-361">местреамсинкстартед</span><span class="sxs-lookup"><span data-stu-id="45acb-361">MEStreamSinkStarted</span></span>](mestreamsinkstarted.md)                         | <span data-ttu-id="45acb-362">Запущен приемник потока.</span><span class="sxs-lookup"><span data-stu-id="45acb-362">The stream sink has started.</span></span> <span data-ttu-id="45acb-363">(Обязательно).</span><span class="sxs-lookup"><span data-stu-id="45acb-363">(Required.)</span></span>                     |
| [<span data-ttu-id="45acb-364">местреамсинкстоппед</span><span class="sxs-lookup"><span data-stu-id="45acb-364">MEStreamSinkStopped</span></span>](mestreamsinkstopped.md)                         | <span data-ttu-id="45acb-365">Приемник потока остановлен.</span><span class="sxs-lookup"><span data-stu-id="45acb-365">The stream sink has stopped.</span></span> <span data-ttu-id="45acb-366">(Обязательно).</span><span class="sxs-lookup"><span data-stu-id="45acb-366">(Required.)</span></span>                     |



 

<span data-ttu-id="45acb-367">Сейчас для приемников мультимедиа не определены события общего назначения.</span><span class="sxs-lookup"><span data-stu-id="45acb-367">Currently no general-purpose events are defined for media sinks.</span></span> <span data-ttu-id="45acb-368">Некоторые приемники мультимедиа могут отправить пользовательские события.</span><span class="sxs-lookup"><span data-stu-id="45acb-368">Some media sinks might send custom events.</span></span>

## <a name="related-topics"></a><span data-ttu-id="45acb-369">См. также</span><span class="sxs-lookup"><span data-stu-id="45acb-369">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="45acb-370">Конвейер Media Foundation</span><span class="sxs-lookup"><span data-stu-id="45acb-370">Media Foundation Pipeline</span></span>](media-foundation-pipeline.md)
</dt> <dt>

[<span data-ttu-id="45acb-371">Архитектура Media Foundation</span><span class="sxs-lookup"><span data-stu-id="45acb-371">Media Foundation Architecture</span></span>](media-foundation-architecture.md)
</dt> </dl>

 

 




