---
description: Реализация кодека.
ms.assetid: 5ec23f95-cc7d-4c16-979a-f1d2cc485bb0
title: Реализация кодеков
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 201c0cb46fc61f117c9b45d059b102560986d5b7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103896593"
---
# <a name="codec-implementation"></a><span data-ttu-id="46b4a-103">Реализация кодеков</span><span class="sxs-lookup"><span data-stu-id="46b4a-103">Codec implementation</span></span>

<span data-ttu-id="46b4a-104">Видеокодеки Windows Media Audio и Video реализуются как COM-объекты.</span><span class="sxs-lookup"><span data-stu-id="46b4a-104">The Windows Media Audio and Video codecs are implemented as COM objects.</span></span> <span data-ttu-id="46b4a-105">Как правило, кодек реализуется как пара COM-объектов: один для кодировщика и один для декодера.</span><span class="sxs-lookup"><span data-stu-id="46b4a-105">Typically, a codec is implemented as a pair of COM objects: one for the encoder and one for the decoder.</span></span> <span data-ttu-id="46b4a-106">Кодировщик имеет идентификатор класса (CLSID), а декодер имеет другой CLSID.</span><span class="sxs-lookup"><span data-stu-id="46b4a-106">The encoder has a class identifier (CLSID) and the decoder has a different CLSID.</span></span> <span data-ttu-id="46b4a-107">Например, часть кодировщика в кодека Windows Media Audio 9 имеет идентификатор CLSID, представленный константой **CLSID \_ квмаенкмедиаобжект**, а часть декодера этого же кодека имеет идентификатор CLSID, представленный константой **CLSID \_ квмадекмедиаобжект**.</span><span class="sxs-lookup"><span data-stu-id="46b4a-107">For example, the encoder portion of the Windows Media Audio 9 codec has a CLSID represented by the constant **CLSID\_CWMAEncMediaObject**, and the decoder portion of that same codec has a CLSID represented by the constant **CLSID\_CWMADecMediaObject**.</span></span>

<span data-ttu-id="46b4a-108">В некоторых случаях в один COM-объект включено более одного кодировщика.</span><span class="sxs-lookup"><span data-stu-id="46b4a-108">In some cases, more than one encoder is included in a single COM object.</span></span> <span data-ttu-id="46b4a-109">Например, кодировщик Windows Media Video 9 и кодировщик Windows Media Video 9,1 являются частью одного и того же COM-объекта.</span><span class="sxs-lookup"><span data-stu-id="46b4a-109">For example, the Windows Media Video 9 encoder and the Windows Media Video 9.1 encoder are both part of the same COM object.</span></span> <span data-ttu-id="46b4a-110">Следовательно, у них одинаковый идентификатор CLSID, представленный константой **CLSID \_ CWMV9EncMediaObject**.</span><span class="sxs-lookup"><span data-stu-id="46b4a-110">Consequently, they both have the same CLSID, which is represented by the constant **CLSID\_CWMV9EncMediaObject**.</span></span> <span data-ttu-id="46b4a-111">Аналогичным образом некоторые COM-объекты включают несколько декодеров.</span><span class="sxs-lookup"><span data-stu-id="46b4a-111">Similarly, some COM objects include more than one decoder.</span></span>

<span data-ttu-id="46b4a-112">Каждый объект кодировщика или декодера предоставляет интерфейс [**имедиаобжект**](/previous-versions/ms785953%28v%3dvs.85%29) , чтобы объект можно было использовать как объект мультимедиа DirectX (DMO) и интерфейс [**имфтрансформ**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) , чтобы объект можно было использовать в качестве Media Foundation преобразования (MFT).</span><span class="sxs-lookup"><span data-stu-id="46b4a-112">Each encoder or decoder object exposes the [**IMediaObject**](/previous-versions/ms785953%28v%3dvs.85%29) interface so that the object can be used as a DirectX Media Object (DMO) and the [**IMFTransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) interface so that the object can be used as a Media Foundation Transform (MFT).</span></span>

<span data-ttu-id="46b4a-113">Для большинства кодировщиков независимо от того, используется ли кодировщик в качестве DMO или MFT, для создания экземпляра кодировщика используется один и тот же идентификатор CLSID.</span><span class="sxs-lookup"><span data-stu-id="46b4a-113">For most encoders, regardless of whether you use the encoder as a DMO or an MFT, you use the same CLSID to create an instance of the encoder.</span></span> <span data-ttu-id="46b4a-114">Например, чтобы создать экземпляр кодировщика Windows Media Video 9, используйте **CLSID \_ CWMV9EncMediaObject**, независимо от того, планируется ли использовать КОДИРОВЩИК в качестве DMO или MFT.</span><span class="sxs-lookup"><span data-stu-id="46b4a-114">For example, to create an instance of the Windows Media Video 9 encoder, you use **CLSID\_CWMV9EncMediaObject**, regardless of whether you intend to use the encoder as a DMO or an MFT.</span></span> <span data-ttu-id="46b4a-115">Аналогичным образом для большинства декодеров каждый декодер имеет один CLSID независимо от того, используется ли декодер в качестве DMO или MFT.</span><span class="sxs-lookup"><span data-stu-id="46b4a-115">Similarly, for most decoders, each decoder has a single CLSID regardless of whether you use the decoder as a DMO or an MFT.</span></span>

> [!Note]  
> <span data-ttu-id="46b4a-116">Существует несколько исключений предыдущего оператора об использовании одного идентификатора CLSID для объектов DMO и MFT.</span><span class="sxs-lookup"><span data-stu-id="46b4a-116">There are some exceptions to the preceding statement about using a single CLSID for both the DMO and the MFT.</span></span> <span data-ttu-id="46b4a-117">Например, декодер MPEG-4 Part 2 имеет один CLSID, когда он выступает в роли DMO, и другой CLSID, когда он выступает в качестве MFT.</span><span class="sxs-lookup"><span data-stu-id="46b4a-117">For example, the MPEG-4 Part 2 decoder has one CLSID when it is acting as a DMO and a different CLSID when it is acting as an MFT.</span></span>

 

<span data-ttu-id="46b4a-118">Помимо основных интерфейсов, каждый объект кодировщика или декодера реализует два похожих интерфейса для работы с свойствами кодеков, **ипропертибаг** и **ипропертисторе**.</span><span class="sxs-lookup"><span data-stu-id="46b4a-118">In addition to the core interfaces, each encoder or decoder object implements two similar interfaces for working with codec properties, **IPropertyBag** and **IPropertyStore**.</span></span> <span data-ttu-id="46b4a-119">Более старые версии кодировщика и объектов декодера использовали **ипропертибаг**, который определяет каждое свойство по строковому значению, содержащему имя свойства.</span><span class="sxs-lookup"><span data-stu-id="46b4a-119">Older versions of the encoder and decoder objects used **IPropertyBag**, which identifies each property by a string value containing a property name.</span></span> <span data-ttu-id="46b4a-120">**Ипропертисторе** — это новый интерфейс, идентифицирующий свойства с уникальным значением ключа свойства.</span><span class="sxs-lookup"><span data-stu-id="46b4a-120">**IPropertyStore** is a newer interface that identifies properties with a unique property key value.</span></span> <span data-ttu-id="46b4a-121">Добавлена поддержка **ипропертисторе** для обеспечения поддержки МФТС.</span><span class="sxs-lookup"><span data-stu-id="46b4a-121">Support for **IPropertyStore** was added to provide support for MFTs.</span></span> <span data-ttu-id="46b4a-122">Большинство строк имен свойств **ипропертибаг** имеют соответствующий GUID ключа свойства **ипропертисторе** , а большинство идентификаторов GUID имеют соответствующую строку имени **ипропертибаг** с некоторыми исключениями.</span><span class="sxs-lookup"><span data-stu-id="46b4a-122">Most **IPropertyBag** property name strings have a corresponding **IPropertyStore** property key GUID and most of the GUIDs have a corresponding **IPropertyBag** name string, with a few exceptions.</span></span>

<span data-ttu-id="46b4a-123">В этой документации перечислены свойства по константе ключа свойства, но каждая запись включает в себя строковую константу имени свойства для использования с **ипропертибаг** , если это уместно.</span><span class="sxs-lookup"><span data-stu-id="46b4a-123">This documentation lists the properties by property key constant, but each entry includes the property-name string constant for use with **IPropertyBag** when appropriate.</span></span>

## <a name="related-topics"></a><span data-ttu-id="46b4a-124">См. также</span><span class="sxs-lookup"><span data-stu-id="46b4a-124">Related topics</span></span>

[<span data-ttu-id="46b4a-125">Кодеки Windows Media</span><span class="sxs-lookup"><span data-stu-id="46b4a-125">Windows Media Codecs</span></span>](windows-media-codecs.md)
