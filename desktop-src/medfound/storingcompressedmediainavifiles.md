---
description: Описывает, как хранить данные Windows Media в файле AVI.
ms.assetid: f2a9d9ff-4876-4f24-b96a-5d89e42fa3d5
title: Хранение сжатых файлов мультимедиа в AVI-файлах (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 080524a47b4295517d50705f6aeb125d085a8346
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "104351495"
---
# <a name="storing-compressed-media-in-avi-files-microsoft-media-foundation"></a><span data-ttu-id="91a79-103">Хранение сжатых файлов мультимедиа в AVI-файлах (Microsoft Media Foundation)</span><span class="sxs-lookup"><span data-stu-id="91a79-103">Storing Compressed Media in AVI Files (Microsoft Media Foundation)</span></span>

<span data-ttu-id="91a79-104">Любое содержимое, сжатое с помощью кодеков аудио и видео Windows Media, должно быть размещено в определенном формате контейнера.</span><span class="sxs-lookup"><span data-stu-id="91a79-104">Any of the content that you compress using the Windows Media Audio and Video codecs must be put in some container format.</span></span> <span data-ttu-id="91a79-105">Одним из наиболее популярных форматов является аудио чередование видео или AVI.</span><span class="sxs-lookup"><span data-stu-id="91a79-105">One of the most popular formats is Audio Video Interleave, or AVI.</span></span> <span data-ttu-id="91a79-106">Для создания AVI-файлов можно использовать Microsoft Video для Windows (VfW) или Microsoft DirectShow.</span><span class="sxs-lookup"><span data-stu-id="91a79-106">You can use Microsoft Video for Windows (VfW) or Microsoft DirectShow to create AVI files.</span></span> <span data-ttu-id="91a79-107">Дополнительные сведения об использовании видео для Windows или DirectShow см. в документации по продукту на сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="91a79-107">For more information about using Video for Windows or DirectShow, refer to the product documentation on MSDN.</span></span>

<span data-ttu-id="91a79-108">Видеокодеки Windows Media Audio и Video разработаны для использования свойств расширенного системного формата (ASF), который является контейнером, используемым Windows Media.</span><span class="sxs-lookup"><span data-stu-id="91a79-108">The Windows Media Audio and Video codecs have been developed to use the properties of the Advanced Systems Format (ASF), which is the container used by Windows Media.</span></span> <span data-ttu-id="91a79-109">Так как в AVI и ASF содержимое хранится по-разному, при хранении содержимого, сжатого с помощью аудиокодеков Windows Media и видеокодеков в AVI-файле, возникают некоторые трудности.</span><span class="sxs-lookup"><span data-stu-id="91a79-109">Because AVI and ASF store content differently, some difficulties arise when storing content compressed with the Windows Media Audio and Video codecs in an AVI file.</span></span>

<span data-ttu-id="91a79-110">Аудиокодеки Windows Media сжимают аудио содержимое таким образом, что его невозможно правильно распаковать без отметки времени для отдельных выборок.</span><span class="sxs-lookup"><span data-stu-id="91a79-110">The Windows Media Audio codecs compress audio content in such a way that it cannot be properly decompressed without time stamps for the individual samples.</span></span> <span data-ttu-id="91a79-111">Это позволяет выполнить некоторую оптимизацию на сжатом носителе.</span><span class="sxs-lookup"><span data-stu-id="91a79-111">This enables some optimization in the compressed media.</span></span> <span data-ttu-id="91a79-112">Так как контейнер ASF сохраняет отметки времени во всех примерах, эта характеристика алгоритмов аудио всегда работала нормально.</span><span class="sxs-lookup"><span data-stu-id="91a79-112">Because the ASF container keeps time stamps with all samples, this characteristic of the audio algorithms has always worked well.</span></span>

<span data-ttu-id="91a79-113">Однако файлы AVI не сохраняют метки времени с примерами.</span><span class="sxs-lookup"><span data-stu-id="91a79-113">AVI files, however, do not keep time stamps with samples.</span></span> <span data-ttu-id="91a79-114">Это означает, что звуковые данные Windows Media не могут быть распакованы должным образом при сохранении в файле AVI.</span><span class="sxs-lookup"><span data-stu-id="91a79-114">This means that Windows Media Audio content cannot be decompressed properly when stored in an AVI file.</span></span> <span data-ttu-id="91a79-115">В видеоматериале Windows Media нет этого ограничения, и его можно добавить в файлы AVI.</span><span class="sxs-lookup"><span data-stu-id="91a79-115">Windows Media Video content does not have this limitation, and can be included in AVI files.</span></span> <span data-ttu-id="91a79-116">Для кодирования содержимого видео Windows Media в файл AVI с синхронизированным звуком необходимо использовать другой аудиокодек.</span><span class="sxs-lookup"><span data-stu-id="91a79-116">To encode Windows Media Video content to an AVI file with synchronized sound, you must use another audio codec.</span></span>

<span data-ttu-id="91a79-117">Другая ошибка использования файла AVI в качестве контейнера для Windows Media — это видео с низкой скоростью.</span><span class="sxs-lookup"><span data-stu-id="91a79-117">The other issue with using an AVI file as a container for Windows Media concerns low-bit-rate video.</span></span> <span data-ttu-id="91a79-118">Один из способов, которым видеокодеки видео Windows Media создает видеоматериалы для низкой скорости, заключается в удалении повторяющихся кадров.</span><span class="sxs-lookup"><span data-stu-id="91a79-118">One of the ways in which the Windows Media Video codecs produce video content for low bit rates is by dropping duplicate frames.</span></span> <span data-ttu-id="91a79-119">Если вы хотите разместить видео-содержимое Windows Media в ASF-файле, необходимо настроить кодировщик для доставки фиктивных кадров для повторяющихся кадров (установите [мфпкэй \_ продуцедуммифрамес](mfpkey-producedummyframesproperty.md) в значение Variant \_ true), чтобы каждый кадр представлялся в файле.</span><span class="sxs-lookup"><span data-stu-id="91a79-119">If you want to put Windows Media Video content in an ASF file, you need to set the encoder to deliver dummy frames for duplicate frames (set [MFPKEY\_PRODUCEDUMMYFRAMES](mfpkey-producedummyframesproperty.md) to VARIANT\_TRUE) so that every frame is represented in the file.</span></span> <span data-ttu-id="91a79-120">Фиктивные кадры, создаваемые кодеком, имеют размер 8 байт.</span><span class="sxs-lookup"><span data-stu-id="91a79-120">The dummy frames produced by the codec are 8 bytes in size.</span></span> <span data-ttu-id="91a79-121">Тем не менее, кадр, записываемый в файл с помощью AVI мультиплексора, может быть больше сотен байтов и заполнен случайными данными.</span><span class="sxs-lookup"><span data-stu-id="91a79-121">However, the frame written to file by the AVI multiplexer can be hundreds of bytes larger, and filled with random data.</span></span> <span data-ttu-id="91a79-122">Файл AVI, сделанный таким образом, по-прежнему будет воспроизводиться, но он будет гораздо больше, чем ожидалось.</span><span class="sxs-lookup"><span data-stu-id="91a79-122">An AVI file made in this way will still be playable, but it will be much larger than expected.</span></span> <span data-ttu-id="91a79-123">Эту проблему можно избежать, используя более высокие скорости передачи данных при кодировании видео для хранения в файлах AVI.</span><span class="sxs-lookup"><span data-stu-id="91a79-123">You can avoid this problem by using higher bit rates when encoding video for storage in AVI files.</span></span>

## <a name="related-topics"></a><span data-ttu-id="91a79-124">См. также</span><span class="sxs-lookup"><span data-stu-id="91a79-124">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="91a79-125">Кодеки Windows Media</span><span class="sxs-lookup"><span data-stu-id="91a79-125">Windows Media Codecs</span></span>](windows-media-codecs.md)
</dt> </dl>

 

 



