---
description: Свойства кодировки
ms.assetid: 6845c3fb-38a8-4b0d-aea2-e10f7e518653
title: Свойства кодировки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 093b72dc37501ca88882c6e3b530cda0eed1baa2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104143210"
---
# <a name="encoding-properties"></a><span data-ttu-id="e855e-103">Свойства кодировки</span><span class="sxs-lookup"><span data-stu-id="e855e-103">Encoding Properties</span></span>

<span data-ttu-id="e855e-104">Кодировщики видео Windows Media Audio и Windows Media поддерживают различные режимы кодирования.</span><span class="sxs-lookup"><span data-stu-id="e855e-104">The Windows Media Audio and Windows Media Video encoders support a variety of encoding modes.</span></span> <span data-ttu-id="e855e-105">Эти режимы обычно настраиваются путем задания свойств в кодировщике [Media Foundation преобразования](media-foundation-transforms.md) (MFT).</span><span class="sxs-lookup"><span data-stu-id="e855e-105">These modes are generally configured by setting properties on the encoder [Media Foundation transform](media-foundation-transforms.md) (MFT).</span></span> <span data-ttu-id="e855e-106">Чтобы выполнить кодирование файлов, будь то использование компонентов уровня Вмконтаинер или создание частичной топологии, необходимо соответствующим образом настроить кодировщик, задав свойства в зависимости от режима кодирования и типа носителя потока.</span><span class="sxs-lookup"><span data-stu-id="e855e-106">To perform file encoding, whether using WMContainer-level components or by building a partial topology, you must configure the encoder appropriately by setting properties depending on the mode of encoding and the media type of the stream.</span></span> <span data-ttu-id="e855e-107">Один и тот же набор свойств должен быть задан для кодировщика и объекта (приемника ASF-файлов или мультиплексора ASF), который используется для записи файла ASF.</span><span class="sxs-lookup"><span data-stu-id="e855e-107">The same set of properties must be set both on the encoder and the object (ASF file sink or ASF multiplexer) you are using to write the ASF file.</span></span>

<span data-ttu-id="e855e-108">Свойства кодировщика определяются в вмкодекдсп. h.</span><span class="sxs-lookup"><span data-stu-id="e855e-108">The encoder properties are defined in wmcodecdsp.h.</span></span> <span data-ttu-id="e855e-109">Конкретные свойства, используемые для настройки кодировщика, задаются с помощью методов интерфейса [**ипропертисторе**](/windows/win32/api/propsys/nn-propsys-ipropertystore) .</span><span class="sxs-lookup"><span data-stu-id="e855e-109">The specific properties that are used to configure the encoder are set by using the methods of the [**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore) interface.</span></span>

-   [<span data-ttu-id="e855e-110">Свойства аудиопотока</span><span class="sxs-lookup"><span data-stu-id="e855e-110">Audio Stream Properties</span></span>](#audio-stream-properties)
-   [<span data-ttu-id="e855e-111">Свойства потока видео</span><span class="sxs-lookup"><span data-stu-id="e855e-111">Video Stream Properties</span></span>](#video-stream-properties)
-   [<span data-ttu-id="e855e-112">Настройка хранилища свойств кодировщика</span><span class="sxs-lookup"><span data-stu-id="e855e-112">Configuring the Encoder's Property Store</span></span>](#configuring-the-encoders-property-store)

### <a name="audio-stream-properties"></a><span data-ttu-id="e855e-113">Свойства аудиопотока</span><span class="sxs-lookup"><span data-stu-id="e855e-113">Audio Stream Properties</span></span>

<span data-ttu-id="e855e-114">В следующей таблице показаны конфигурации кодировщика для аудиопотока.</span><span class="sxs-lookup"><span data-stu-id="e855e-114">The following table shows the encoder configurations for an audio stream.</span></span>



| <span data-ttu-id="e855e-115">Тип кодировки</span><span class="sxs-lookup"><span data-stu-id="e855e-115">Encoding type</span></span>                                                                                        | <span data-ttu-id="e855e-116">Имя свойства — значение</span><span class="sxs-lookup"><span data-stu-id="e855e-116">Property name - Value</span></span>                                                                                                                                                                               |
|------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="e855e-117">Кодирование постоянной скорости потока</span><span class="sxs-lookup"><span data-stu-id="e855e-117">Constant Bit Rate Encoding</span></span>](constant-bit-rate-encoding.md)                                         | <span data-ttu-id="e855e-118">МФПКЭЙ \_ вбренаблед — **false** (необязательный) по умолчанию \_ для Мфпкэй вбренаблед устанавливается значение **false**.</span><span class="sxs-lookup"><span data-stu-id="e855e-118">MFPKEY\_VBRENABLED - **FALSE** (Optional)By default, MFPKEY\_VBRENABLED is set to **FALSE**.</span></span><br/>                                                                                             |
| [<span data-ttu-id="e855e-119">Кодирование скорости переменной с учетом качества</span><span class="sxs-lookup"><span data-stu-id="e855e-119">Quality-Based Variable Bit Rate Encoding</span></span>](quality-based-variable-bit-rate--vbr--encoding.md)       | <span data-ttu-id="e855e-120">МФПКЭЙ \_ вбренаблед — **true**</span><span class="sxs-lookup"><span data-stu-id="e855e-120">MFPKEY\_VBRENABLED - **TRUE**</span></span><br/> <span data-ttu-id="e855e-121">МФПКЭЙ \_ пассесусед-1 (необязательно)</span><span class="sxs-lookup"><span data-stu-id="e855e-121">MFPKEY\_PASSESUSED - 1 (Optional)</span></span><br/> <span data-ttu-id="e855e-122">По умолчанию МФПКЭЙ \_ пассесусед имеет значение 1.</span><span class="sxs-lookup"><span data-stu-id="e855e-122">By default, MFPKEY\_PASSESUSED is set to 1.</span></span><br/> <span data-ttu-id="e855e-123">МФПКЭЙ \_ желаемый \_ Вбркуалити — от 0 до 100</span><span class="sxs-lookup"><span data-stu-id="e855e-123">MFPKEY\_DESIRED\_VBRQUALITY - From 0 to 100</span></span><br/> |
| [<span data-ttu-id="e855e-124">Кодирование переменной скорости с неограниченным битом</span><span class="sxs-lookup"><span data-stu-id="e855e-124">Unconstrained Variable Bit Rate Encoding</span></span>](unconstrained-variable-bit-rate--vbr--encoding.md)       | <span data-ttu-id="e855e-125">МФПКЭЙ \_ вбренаблед — **true**</span><span class="sxs-lookup"><span data-stu-id="e855e-125">MFPKEY\_VBRENABLED - **TRUE**</span></span><br/> <span data-ttu-id="e855e-126">МФПКЭЙ \_ пассесусед-2</span><span class="sxs-lookup"><span data-stu-id="e855e-126">MFPKEY\_PASSESUSED - 2</span></span><br/>                                                                                                                          |
| [<span data-ttu-id="e855e-127">Пиковое кодирование с переменным ограничением скорости</span><span class="sxs-lookup"><span data-stu-id="e855e-127">Peak-Constrained Variable Bit Rate Encoding</span></span>](peak-constrained-variable-bit-rate--vbr--encoding.md) | <span data-ttu-id="e855e-128">МФПКЭЙ \_ вбренаблед — **true**</span><span class="sxs-lookup"><span data-stu-id="e855e-128">MFPKEY\_VBRENABLED - **TRUE**</span></span><br/> <span data-ttu-id="e855e-129">МФПКЭЙ \_ пассесусед-2</span><span class="sxs-lookup"><span data-stu-id="e855e-129">MFPKEY\_PASSESUSED - 2</span></span><br/> <span data-ttu-id="e855e-130">МФПКЭЙ \_ рмакс — максимальная скорость потока</span><span class="sxs-lookup"><span data-stu-id="e855e-130">MFPKEY\_RMAX - Maximum bit rate</span></span><br/> <span data-ttu-id="e855e-131">МФПКЭЙ \_ бмакс — Максимальное окно буфера</span><span class="sxs-lookup"><span data-stu-id="e855e-131">MFPKEY\_BMAX - Maximum buffer window</span></span><br/>                               |



 

### <a name="video-stream-properties"></a><span data-ttu-id="e855e-132">Свойства потока видео</span><span class="sxs-lookup"><span data-stu-id="e855e-132">Video Stream Properties</span></span>

<span data-ttu-id="e855e-133">В следующей таблице показаны конфигурации кодировщика для видеопотока.</span><span class="sxs-lookup"><span data-stu-id="e855e-133">The following table shows the encoder configurations for a video stream.</span></span>



| <span data-ttu-id="e855e-134">Тип кодировки</span><span class="sxs-lookup"><span data-stu-id="e855e-134">Encoding type</span></span>                                                                                        | <span data-ttu-id="e855e-135">Имя свойства</span><span class="sxs-lookup"><span data-stu-id="e855e-135">Property name</span></span>                                                                                                                                                                                       |
|------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="e855e-136">Кодирование постоянной скорости потока</span><span class="sxs-lookup"><span data-stu-id="e855e-136">Constant Bit Rate Encoding</span></span>](constant-bit-rate-encoding.md)                                         | <span data-ttu-id="e855e-137">МФПКЭЙ \_ вбренаблед — **false** (необязательно)</span><span class="sxs-lookup"><span data-stu-id="e855e-137">MFPKEY\_VBRENABLED - **FALSE** (Optional)</span></span><br/> <span data-ttu-id="e855e-138">По умолчанию МФПКЭЙ \_ вбренаблед имеет значение **false**.</span><span class="sxs-lookup"><span data-stu-id="e855e-138">By default, MFPKEY\_VBRENABLED is set to **FALSE**.</span></span><br/> <span data-ttu-id="e855e-139">МФПКЭЙ \_ видеовиндов — окно буфера</span><span class="sxs-lookup"><span data-stu-id="e855e-139">MFPKEY\_VIDEOWINDOW - Buffer window</span></span><br/>                                  |
| [<span data-ttu-id="e855e-140">Кодирование скорости переменной с учетом качества</span><span class="sxs-lookup"><span data-stu-id="e855e-140">Quality-Based Variable Bit Rate Encoding</span></span>](quality-based-variable-bit-rate--vbr--encoding.md)       | <span data-ttu-id="e855e-141">МФПКЭЙ \_ вбренаблед — **true**</span><span class="sxs-lookup"><span data-stu-id="e855e-141">MFPKEY\_VBRENABLED - **TRUE**</span></span><br/> <span data-ttu-id="e855e-142">МФПКЭЙ \_ пассесусед-1 (необязательно)</span><span class="sxs-lookup"><span data-stu-id="e855e-142">MFPKEY\_PASSESUSED - 1 (Optional)</span></span><br/> <span data-ttu-id="e855e-143">По умолчанию МФПКЭЙ \_ пассесусед имеет значение 1.</span><span class="sxs-lookup"><span data-stu-id="e855e-143">By default, MFPKEY\_PASSESUSED is set to 1.</span></span><br/> <span data-ttu-id="e855e-144">МФПКЭЙ \_ желаемый \_ Вбркуалити — от 0 до 100</span><span class="sxs-lookup"><span data-stu-id="e855e-144">MFPKEY\_DESIRED\_VBRQUALITY - From 0 to 100</span></span><br/> |
| [<span data-ttu-id="e855e-145">Кодирование переменной скорости с неограниченным битом</span><span class="sxs-lookup"><span data-stu-id="e855e-145">Unconstrained Variable Bit Rate Encoding</span></span>](unconstrained-variable-bit-rate--vbr--encoding.md)       | <span data-ttu-id="e855e-146">МФПКЭЙ \_ вбренаблед — **true**</span><span class="sxs-lookup"><span data-stu-id="e855e-146">MFPKEY\_VBRENABLED - **TRUE**</span></span><br/> <span data-ttu-id="e855e-147">МФПКЭЙ \_ пассесусед-2</span><span class="sxs-lookup"><span data-stu-id="e855e-147">MFPKEY\_PASSESUSED - 2</span></span><br/>                                                                                                                          |
| [<span data-ttu-id="e855e-148">Пиковое кодирование с переменным ограничением скорости</span><span class="sxs-lookup"><span data-stu-id="e855e-148">Peak-Constrained Variable Bit Rate Encoding</span></span>](peak-constrained-variable-bit-rate--vbr--encoding.md) | <span data-ttu-id="e855e-149">МФПКЭЙ \_ вбренаблед — **true**</span><span class="sxs-lookup"><span data-stu-id="e855e-149">MFPKEY\_VBRENABLED - **TRUE**</span></span><br/> <span data-ttu-id="e855e-150">МФПКЭЙ \_ пассесусед-2</span><span class="sxs-lookup"><span data-stu-id="e855e-150">MFPKEY\_PASSESUSED - 2</span></span><br/> <span data-ttu-id="e855e-151">МФПКЭЙ \_ рмакс — максимальная скорость потока</span><span class="sxs-lookup"><span data-stu-id="e855e-151">MFPKEY\_RMAX - Maximum bit rate</span></span><br/> <span data-ttu-id="e855e-152">МФПКЭЙ \_ бмакс — Максимальное окно буфера</span><span class="sxs-lookup"><span data-stu-id="e855e-152">MFPKEY\_BMAX - Maximum buffer window</span></span><br/>                               |



 

### <a name="configuring-the-encoders-property-store"></a><span data-ttu-id="e855e-153">Настройка хранилища свойств кодировщика</span><span class="sxs-lookup"><span data-stu-id="e855e-153">Configuring the Encoder's Property Store</span></span>

<span data-ttu-id="e855e-154">Необходимо настроить кодировщик, указав тип кодировки и различные параметры, зависящие от конкретного потока, перед сеансом кодирования.</span><span class="sxs-lookup"><span data-stu-id="e855e-154">You must configure an encoder by specifying the type of encoding and the various stream-specific settings before the encoding session.</span></span> <span data-ttu-id="e855e-155">Кроме того, необходимо задать свойства кодировщика в хранилище свойств [объекта Контентинфо ASF](asf-contentinfo-object.md) , представляющего объект заголовка ASF выходного файла.</span><span class="sxs-lookup"><span data-stu-id="e855e-155">You must also set the encoder properties in the property store of an [ASF ContentInfo Object](asf-contentinfo-object.md) that represents the ASF Header Object of the output file.</span></span>

<span data-ttu-id="e855e-156">При использовании MFT кодировщика:</span><span class="sxs-lookup"><span data-stu-id="e855e-156">If you are using an encoder MFT:</span></span>

1.  <span data-ttu-id="e855e-157">Получите ссылку на интерфейс [**имфтрансформ**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) интерфейса MFT кодировщика, как описано в разделе [Использование интерфейса имфтрансформ кодировщика](using-an-encoder-s-imftransform--interface.md).</span><span class="sxs-lookup"><span data-stu-id="e855e-157">Get a reference to the encoder MFT's [**IMFTransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) interface as described in [Using an Encoder's IMFTransform Interface](using-an-encoder-s-imftransform--interface.md).</span></span>
2.  <span data-ttu-id="e855e-158">Запрос к MFT для интерфейса **ипропертисторе** .</span><span class="sxs-lookup"><span data-stu-id="e855e-158">Querying the encoder MFT for the **IPropertyStore** interface.</span></span>
3.  <span data-ttu-id="e855e-159">Установка обязательных свойств путем вызова **ипропертисторе:: SetValue**.</span><span class="sxs-lookup"><span data-stu-id="e855e-159">Setting the required properties by calling **IPropertyStore::SetValue**.</span></span>

<span data-ttu-id="e855e-160">Если вы используете встроенные объекты активации кодировщика и уже создали настроенный приемник файлов ASF, можно передать хранилище свойств приемника мультимедиа ASF в [**мфкреатевмаенкодерактивате**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) или [**мфкреатевмвенкодерактивате**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate).</span><span class="sxs-lookup"><span data-stu-id="e855e-160">If you are using the built-in encoder activation objects and have already created an configured the ASF file sink, you can pass the ASF media sink's property store to [**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) or [**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate).</span></span> <span data-ttu-id="e855e-161">Кодировщик настраивается автоматически на основе параметров, заданных приложением.</span><span class="sxs-lookup"><span data-stu-id="e855e-161">The encoder is configured automatically based on the settings specified by the application.</span></span> <span data-ttu-id="e855e-162">Дополнительные сведения см. в процедуре, описанной в разделе [использование объектов активации кодировщика](using-an-encoder-s-activation-objects.md).</span><span class="sxs-lookup"><span data-stu-id="e855e-162">For more information, see the procedure described in [Using an Encoder's Activation Objects](using-an-encoder-s-activation-objects.md).</span></span>

<span data-ttu-id="e855e-163">Дополнительные сведения о создании объектов Media Foundation с помощью объектов активации см. в разделе [объекты активации](activation-objects.md).</span><span class="sxs-lookup"><span data-stu-id="e855e-163">For more information about creating Media Foundation objects by using activation objects, see [Activation Objects](activation-objects.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="e855e-164">См. также</span><span class="sxs-lookup"><span data-stu-id="e855e-164">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e855e-165">Создание экземпляра MFT для кодировщика</span><span class="sxs-lookup"><span data-stu-id="e855e-165">Instantiating an Encoder MFT</span></span>](instantiating-the-encoder-mft.md)
</dt> <dt>

[<span data-ttu-id="e855e-166">Кодировщики Windows Media</span><span class="sxs-lookup"><span data-stu-id="e855e-166">Windows Media Encoders</span></span>](windows-media-encoders.md)
</dt> </dl>

 

 
