---
description: Media Foundation предоставляет источник мультимедиа ASF, который приложение может использовать для представления файла ASF на уровне конвейера архитектуры.
ms.assetid: a2d2b382-d666-4a37-a6a9-0b839fbfbec3
title: Источник носителя ASF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 75dc682d48339ce4ff707e7859a6962b9f5cfd92
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "105703476"
---
# <a name="asf-media-source"></a><span data-ttu-id="0122e-103">Источник носителя ASF</span><span class="sxs-lookup"><span data-stu-id="0122e-103">ASF Media Source</span></span>

<span data-ttu-id="0122e-104">Media Foundation предоставляет источник мультимедиа ASF, который приложение может использовать для представления файла ASF на уровне конвейера архитектуры.</span><span class="sxs-lookup"><span data-stu-id="0122e-104">Media Foundation provides the ASF media source that an application can use to represent an ASF file in the pipeline layer of the architecture.</span></span>

<span data-ttu-id="0122e-105">Чтобы воспроизвести файл ASF, приложение может использовать источник мультимедиа ASF для передачи данных в конвейер воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="0122e-105">In order to play an ASF file, an application can use the ASF media source to feed data into a playback pipeline.</span></span> <span data-ttu-id="0122e-106">В сценарии кодирования приложение может использовать источник мультимедиа ASF в качестве источника для преобразования в другой формат или для преобразования файла с более высоким значением битовой скорости в файл меньшей скорости без изменения формата.</span><span class="sxs-lookup"><span data-stu-id="0122e-106">In an encoding scenario, application can use the ASF media source as the source to convert into another format or for converting a higher bit-rate file to a lower bit-rate file without changing formats.</span></span> <span data-ttu-id="0122e-107">На уровне конвейера должен использоваться источник носителя ASF, то есть приложение должно использовать сеанс мультимедиа для управления операцией.</span><span class="sxs-lookup"><span data-stu-id="0122e-107">The ASF media source must be used in the pipeline layer, that is, an application must use the Media Session to control the operation.</span></span> <span data-ttu-id="0122e-108">Этот уровень доступа позволяет приложениям получать события во время выполнения сеанса мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="0122e-108">This level of access allows the applications to get events while the Media Session is in progress.</span></span> <span data-ttu-id="0122e-109">Чтобы получить доступ к содержимому ASF на более низком уровне, приложение должно использовать компоненты ASF уровня Вмконтаинер.</span><span class="sxs-lookup"><span data-stu-id="0122e-109">To get lower-level access to the ASF content, an application must use the WMContainer Layer ASF components.</span></span>

<span data-ttu-id="0122e-110">Источник мультимедиа ASF реализует интерфейс [**имфмедиасаурце**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) , который является универсальным интерфейсом для источников мультимедиа в Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="0122e-110">The ASF media source implements the [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) interface, which is the generic interface for media sources in Media Foundation.</span></span> <span data-ttu-id="0122e-111">Как и любой другой источник мультимедиа, источник мультимедиа ASF предоставляет дескриптор представления, в основном описывающий объект заголовка ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-111">Like any other media source, the ASF media source provides a presentation descriptor that primarily describes the ASF Header Object.</span></span> <span data-ttu-id="0122e-112">Кроме того, источник мультимедиа ASF предоставляет дескрипторы потоков, представляющие каждый поток в мультимедийном содержимом.</span><span class="sxs-lookup"><span data-stu-id="0122e-112">In addition, the ASF media source provides stream descriptors that represent each stream in the media content.</span></span> <span data-ttu-id="0122e-113">Дополнительные сведения см. в разделе [Структура файлов ASF](asf-file-structure.md).</span><span class="sxs-lookup"><span data-stu-id="0122e-113">For more information, see [ASF File Structure](asf-file-structure.md).</span></span>

-   [<span data-ttu-id="0122e-114">Создание источника мультимедиа ASF</span><span class="sxs-lookup"><span data-stu-id="0122e-114">Creating the ASF Media Source</span></span>](#creating-the-asf-media-source)
-   [<span data-ttu-id="0122e-115">Параметры конфигурации для источника мультимедиа ASF</span><span class="sxs-lookup"><span data-stu-id="0122e-115">Configuration Settings for the ASF Media Source</span></span>](#configuration-settings-for-the-asf-media-source)
-   [<span data-ttu-id="0122e-116">Модель объекта источника ASF Media</span><span class="sxs-lookup"><span data-stu-id="0122e-116">ASF Media Source Object Model</span></span>](#asf-media-source-object-model)
-   [<span data-ttu-id="0122e-117">Службы источников ASF Media</span><span class="sxs-lookup"><span data-stu-id="0122e-117">ASF Media Source Services</span></span>](#asf-media-source-services)
    -   [<span data-ttu-id="0122e-118">Преобразование времени и времени</span><span class="sxs-lookup"><span data-stu-id="0122e-118">Timecode Translation</span></span>](#timecode-translation)
-   [<span data-ttu-id="0122e-119">См. также</span><span class="sxs-lookup"><span data-stu-id="0122e-119">Related topics</span></span>](#related-topics)

## <a name="creating-the-asf-media-source"></a><span data-ttu-id="0122e-120">Создание источника мультимедиа ASF</span><span class="sxs-lookup"><span data-stu-id="0122e-120">Creating the ASF Media Source</span></span>

<span data-ttu-id="0122e-121">Чтобы создать источник мультимедиа ASF, приложение должно использовать [сопоставитель источника](source-resolver.md).</span><span class="sxs-lookup"><span data-stu-id="0122e-121">To create the ASF media source, the application must use the [Source Resolver](source-resolver.md).</span></span> <span data-ttu-id="0122e-122">Чтобы создать источник мультимедиа ASF, приложение должно предоставить источник, для которого сопоставитель источника создает источник мультимедиа ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-122">In order to create the ASF media source, the application must provide the source for which the source resolver creates the ASF media source.</span></span> <span data-ttu-id="0122e-123">Сведения об источнике должны быть предоставлены либо указанием URL-адреса исходного файла, либо потока байтов, содержащего носитель.</span><span class="sxs-lookup"><span data-stu-id="0122e-123">The source information must be provided by either specifying the URL of the source file or the byte stream that contains the media.</span></span> <span data-ttu-id="0122e-124">Если приложение выбирает создание источника мультимедиа ASF путем указания URL-адреса, оно должно вызывать либо [**имфсаурцересолвер:: креатеобжектфромурл**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) для синхронной операции, либо **Имфсаурцересолвер:: Begin... Ендкреатеобжектфромурл** для асинхронной операции.</span><span class="sxs-lookup"><span data-stu-id="0122e-124">If the application chooses to create the ASF media source by specifying the URL, it must call either [**IMFSourceResolver::CreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) for synchronous operation or **IMFSourceResolver::Begin…EndCreateObjectFromURL** for asynchronous operation.</span></span> <span data-ttu-id="0122e-125">Процесс создания источника мультимедиа из потока байтов аналогичен.</span><span class="sxs-lookup"><span data-stu-id="0122e-125">The process for creating the media source from a byte stream is similar.</span></span> <span data-ttu-id="0122e-126">Приложение должно вызывать либо [**имфсаурцересолвер:: креатеобжектфромбитестреам**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfrombytestream) для синхронной операции, либо **Имфсаурцересолвер:: Begin... Ендкреатеобжектфромбитестреам** для асинхронной операции.</span><span class="sxs-lookup"><span data-stu-id="0122e-126">The application must call either [**IMFSourceResolver::CreateObjectFromByteStream**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfrombytestream) for synchronous operation or **IMFSourceResolver::Begin…EndCreateObjectFromBytestream** for asynchronous operation.</span></span> <span data-ttu-id="0122e-127">Эти вызовы должны указать MF \_ Resolution \_ медиасаурце в параметре *dwFlags* .</span><span class="sxs-lookup"><span data-stu-id="0122e-127">These calls must specify MF\_RESOLUTION\_MEDIASOURCE in *dwFlags* parameter.</span></span> <span data-ttu-id="0122e-128">Дополнительные сведения об использовании этого флага см. в разделе Использование сопоставителя источников.</span><span class="sxs-lookup"><span data-stu-id="0122e-128">For more information about using this flag, see Using the Source Resolver.</span></span>

<span data-ttu-id="0122e-129">Если в приложении указан URL-адрес для локального файла, строка URL-адреса может содержать путь к файлу мультимедиа или префикс "file:".</span><span class="sxs-lookup"><span data-stu-id="0122e-129">If the application specifies a URL, for a local file, the URL string can contain the path of the media file or can be prefixed with the “file: “scheme.</span></span> <span data-ttu-id="0122e-130">Расширение имени файла должно быть ". ASF", ". WM", "L". WMA "или". wmv ".</span><span class="sxs-lookup"><span data-stu-id="0122e-130">The file name extension must be ".asf", ".wm", L".wma", or ".wmv".</span></span> <span data-ttu-id="0122e-131">Для файла ASF в сети сопоставитель источников создает [сетевой источник](network-source-features.md), использующий источник мультимедиа ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-131">For an ASF file on the network, the source resolver creates the [Network Source](network-source-features.md), which uses the ASF media source.</span></span>

<span data-ttu-id="0122e-132">Во время создания объекта сопоставитель источника ищет список обработчиков схем и обработчиков байтов в системном реестре и загружает ближайший обработчик, который может анализировать содержимое мультимедиа, а также создавать объект источника мультимедиа, расположенный под.</span><span class="sxs-lookup"><span data-stu-id="0122e-132">During the object creation process, the source resolver looks up the list of scheme handlers and the byte stream handlers in the system registry and loads the closest matching handler that can parse the media content and also create the media source object underneath.</span></span> <span data-ttu-id="0122e-133">Независимо от метода, используемого для создания источника мультимедиа (URL-адрес и поток байтов), сопоставитель источников создает поток байтов и считывает содержимое исходного носителя в поток байтов.</span><span class="sxs-lookup"><span data-stu-id="0122e-133">Irrespective of the method used to create the media source (URL and byte stream), the source resolver creates a byte stream and reads the contents of source media into the byte stream.</span></span> <span data-ttu-id="0122e-134">Дополнительные сведения см. в разделе [обработчики схем и обработчики Byte-Stream](scheme-handlers-and-byte-stream-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="0122e-134">For more information, see [Scheme Handlers and Byte-Stream Handlers](scheme-handlers-and-byte-stream-handlers.md).</span></span>

<span data-ttu-id="0122e-135">Пример кода для создания источника мультимедиа см. [в разделе Использование сопоставителя источников](using-the-source-resolver.md).</span><span class="sxs-lookup"><span data-stu-id="0122e-135">For code example about how to create a media source, see [Using the Source Resolver](using-the-source-resolver.md).</span></span>

## <a name="configuration-settings-for-the-asf-media-source"></a><span data-ttu-id="0122e-136">Параметры конфигурации для источника мультимедиа ASF</span><span class="sxs-lookup"><span data-stu-id="0122e-136">Configuration Settings for the ASF Media Source</span></span>

<span data-ttu-id="0122e-137">Сопоставитель источников запрашивает возможности базового потока байтов и определяет операции, разрешенные для вновь созданного источника носителя.</span><span class="sxs-lookup"><span data-stu-id="0122e-137">The source resolver queries for the capabilities of the underlying byte stream and determines the operations are allowed on the newly created media source.</span></span> <span data-ttu-id="0122e-138">Одна из таких возможностей — Поиск.</span><span class="sxs-lookup"><span data-stu-id="0122e-138">One of such capabilities is seeking.</span></span> <span data-ttu-id="0122e-139">Если операция поиска разрешена, приложение может указать режим поиска, используемый источником мультимедиа при поиске в определенной точке презентации.</span><span class="sxs-lookup"><span data-stu-id="0122e-139">If a seek operation is allowed, the application can specify the seeking mode that the media source uses while seeking to a particular point in the presentation.</span></span>

<span data-ttu-id="0122e-140">Приложение может задать режим поиска, используемый источником мультимедиа во время создания объекта.</span><span class="sxs-lookup"><span data-stu-id="0122e-140">An application can set the seek mode, for the media source to use, during object creation.</span></span> <span data-ttu-id="0122e-141">После создания источника ASF Media с указанным режимом поиска его нельзя изменить в источнике мультимедиа или динамически изменить во время презентации.</span><span class="sxs-lookup"><span data-stu-id="0122e-141">After the ASF media source is created with the specified seek mode, it cannot be modified on the media source or dynamically changed during a presentation.</span></span> <span data-ttu-id="0122e-142">Параметры поиска указываются как свойства в вызове приложения к соответствующим методам сопоставителя источника, которые используются для создания источника мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="0122e-142">Seeking preferences are specified as properties in the application’s call to the relevant source resolver methods that are used to create the media source.</span></span> <span data-ttu-id="0122e-143">Этот набор свойств задается в хранилище свойств и передается в параметр *ппропс* .</span><span class="sxs-lookup"><span data-stu-id="0122e-143">These set of properties are set in a property store and passed to the *pProps* parameter.</span></span> <span data-ttu-id="0122e-144">Если эти свойства не передаются, источник мультимедиа будет работать с параметрами по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="0122e-144">If these properties are not passed, the media source functions with the default settings.</span></span> <span data-ttu-id="0122e-145">Дополнительные сведения об установке этих свойств см. [в разделе Настройка источника мультимедиа](configuring-a-media-source.md).</span><span class="sxs-lookup"><span data-stu-id="0122e-145">For more information about setting these properties, see [Configuring a Media Source](configuring-a-media-source.md).</span></span>

<span data-ttu-id="0122e-146">Если поиск разрешен, источник мультимедиа ASF поддерживает следующие режимы поиска:</span><span class="sxs-lookup"><span data-stu-id="0122e-146">If seeking is allowed, the ASF media source supports the following seek modes:</span></span>

-   <span data-ttu-id="0122e-147">Точное Поиск: в этом режиме источник мультимедиа ASF использует объект индекса ASF файла ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-147">Exact seeking: In this mode, the ASF media source relies on the ASF Index Object of the ASF file.</span></span> <span data-ttu-id="0122e-148">Если файл не содержит объект index, то поиск отключается, а другой режим используется в зависимости от свойств, заданных приложением, заданных в источнике мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="0122e-148">If the file does not have the Index Object, exact seeking is disabled and one of the other modes are used depending on the application-specified properties that are set on the media source.</span></span>
-   <span data-ttu-id="0122e-149">Приближенное Поиск: этот режим запрашивается приложением путем передачи [**мфпкэй \_ асфмедиасаурце \_ аппрокссик**](mfpkey-asfmediasource-approxseek-property.md) в хранилище свойств в соответствующие методы сопоставителя источника.</span><span class="sxs-lookup"><span data-stu-id="0122e-149">Approximate seeking: This mode is requested by the application by passing [**MFPKEY\_ASFMediaSource\_ApproxSeek**](mfpkey-asfmediasource-approxseek-property.md) in the property store to the relevant source resolver methods.</span></span> <span data-ttu-id="0122e-150">Однако приближенное Поиск используется только в том случае, если поток байтов не поддерживает поиск на основе времени.</span><span class="sxs-lookup"><span data-stu-id="0122e-150">However, approximate seeking is only used if the byte stream does not support time-based seeking.</span></span> <span data-ttu-id="0122e-151">В этом режиме источник мультимедиа определяет время начала, относительное времени поиска.</span><span class="sxs-lookup"><span data-stu-id="0122e-151">In this mode, the media source determine a start time that is relatively closer to the seek time.</span></span> <span data-ttu-id="0122e-152">Если файл ASF содержит объект индекса ASF, он используется для вычисления времени начала.</span><span class="sxs-lookup"><span data-stu-id="0122e-152">If the ASF file contains an ASF Index Object, it is used to calculate the start time.</span></span> <span data-ttu-id="0122e-153">Приблизительное Поиск менее точен, но быстрее, чем точное Поиск, поскольку время, затрачиваемое на подготовку первой выборки в предопределенном времени начала, выполняется быстрее.</span><span class="sxs-lookup"><span data-stu-id="0122e-153">Approximate seeking is less accurate but faster than exact seeking because the time taken render the first sample at the predetermined start time is faster.</span></span>
-   <span data-ttu-id="0122e-154">Итеративное Поиск: чтобы установить этот режим, приложение должно установить свойство [мфпкэй \_ асфмедиасаурце \_ итеративесикифноиндекс](mfpkey-asfmediasource-iterativeseekifnoindex.md) .</span><span class="sxs-lookup"><span data-stu-id="0122e-154">Iterative seeking: To set this mode, the application must set the [MFPKEY\_ASFMediaSource\_IterativeSeekIfNoIndex](mfpkey-asfmediasource-iterativeseekifnoindex.md) property.</span></span> <span data-ttu-id="0122e-155">Итеративное Поиск — это алгоритм поиска позиции в ASF-файле, который не содержит объект индекса ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-155">Iterative seeking is an algorithm to find a position in an ASF file that contains no ASF Index Object.</span></span> <span data-ttu-id="0122e-156">В этом режиме источник мультимедиа обоценивает приблизительную оценку точки поиска, считывая смещение байтового потока.</span><span class="sxs-lookup"><span data-stu-id="0122e-156">In this mode, the media source determins a rough estimate of the seek point by reading the byte stream offset.</span></span> <span data-ttu-id="0122e-157">Он использует ряд приближений, основанный на средней скорости, чтобы постепенно ближе к целевому времени поиска.</span><span class="sxs-lookup"><span data-stu-id="0122e-157">It uses a series of approximations, based on the average bit rate, to get progressively closer to the target seek time.</span></span> <span data-ttu-id="0122e-158">(Алгоритм аналогичен двоичному поиску.) Итеративное Поиск может занять больше времени, чем поиск с помощью объекта index, поэтому по умолчанию он отключен.</span><span class="sxs-lookup"><span data-stu-id="0122e-158">(The algorithm is similar to a binary search.) Iterative seeking can take longer than seeking by using the Index Object, so it is disabled by default.</span></span> <span data-ttu-id="0122e-159">Если задать это свойство, используйте следующие свойства, чтобы задать параметры поиска: [мфпкэй \_ асфмедиасаурце \_ итеративесик \_ Max \_ Count](mfpkey-asfmediasource-iterativeseek-max-count.md)[мфпкэй \_ асфмедиасаурце \_ итеративесик \_ \_ в \_ миллисекундах](mfpkey-asfmediasource-iterativeseek-tolerance-in-millisecond.md).</span><span class="sxs-lookup"><span data-stu-id="0122e-159">If you set this property, use the following properties to set the search parameters: [MFPKEY\_ASFMediaSource\_IterativeSeek\_Max\_Count](mfpkey-asfmediasource-iterativeseek-max-count.md)[MFPKEY\_ASFMediaSource\_IterativeSeek\_Tolerance\_In\_MilliSecond](mfpkey-asfmediasource-iterativeseek-tolerance-in-millisecond.md).</span></span> <span data-ttu-id="0122e-160">Эти свойства устанавливают максимальное число итераций и допуск соответственно.</span><span class="sxs-lookup"><span data-stu-id="0122e-160">These properties set the maximum number of iterations and the tolerance, respectively.</span></span> <span data-ttu-id="0122e-161">Алгоритм останавливается при достижении максимального числа итераций или при обнаружении пакета, расстояние от которого до времени поиска находится в пределах указанного значения.</span><span class="sxs-lookup"><span data-stu-id="0122e-161">The algorithm halts when it reaches the maximum number of iterations, or when it finds a packet whose distance from the seek time is within the specified tolerance.</span></span>

<span data-ttu-id="0122e-162">В двух словах, приложение имеет возможность выбрать приближенное или итеративное Поиск, если ASF-файл не содержит объект индекса ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-162">In a nutshell, the application has the option of choosing approximate or iterative seeking when the ASF file does not contain an ASF Index Object.</span></span>

## <a name="asf-media-source-object-model"></a><span data-ttu-id="0122e-163">Модель объекта источника ASF Media</span><span class="sxs-lookup"><span data-stu-id="0122e-163">ASF Media Source Object Model</span></span>

<span data-ttu-id="0122e-164">Источник мультимедиа ASF реализует интерфейс [**имфмедиасаурце**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) и предоставляет следующие интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="0122e-164">The ASF media source implements the [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) interface and exposes the following interfaces.</span></span> <span data-ttu-id="0122e-165">Приложение может получить ссылку на эти интерфейсы, вызвав **имфмедиасаурце:: QueryInterface** в источнике медиа ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-165">An application can get a reference to these interfaces by calling **IMFMediaSource::QueryInterface** on the ASF media source.</span></span>



| <span data-ttu-id="0122e-166">Интерфейс</span><span class="sxs-lookup"><span data-stu-id="0122e-166">Interface</span></span>                                                | <span data-ttu-id="0122e-167">Описание</span><span class="sxs-lookup"><span data-stu-id="0122e-167">Description</span></span>                                                                                                                                        |
|----------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="0122e-168">**имфмедиасаурце**</span><span class="sxs-lookup"><span data-stu-id="0122e-168">**IMFMediaSource**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource)                 | <span data-ttu-id="0122e-169">Требуется для всех источников мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="0122e-169">Required for all media sources.</span></span>                                                                                                                    |
| [<span data-ttu-id="0122e-170">**имфмедиаевентженератор**</span><span class="sxs-lookup"><span data-stu-id="0122e-170">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator) | <span data-ttu-id="0122e-171">Требуется для всех источников мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="0122e-171">Required for all media sources.</span></span> <span data-ttu-id="0122e-172">Позволяет приложениям получать события из источника мультимедиа через сеанс мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="0122e-172">Allows applications to get events from the media source through the Media Session.</span></span>                                 |
| [<span data-ttu-id="0122e-173">**имфжетсервице**</span><span class="sxs-lookup"><span data-stu-id="0122e-173">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)                   | <span data-ttu-id="0122e-174">Запрашивает источник мультимедиа для указанного интерфейса службы.</span><span class="sxs-lookup"><span data-stu-id="0122e-174">Queries the media source for the specified service interface.</span></span>                                                                                      |
| [<span data-ttu-id="0122e-175">**ипропертисторе**</span><span class="sxs-lookup"><span data-stu-id="0122e-175">**IPropertyStore**</span></span>](/windows/win32/api/propsys/nn-propsys-ipropertystore)               | <span data-ttu-id="0122e-176">Возвращает и задает свойства источника мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="0122e-176">Sets and gets properties on the media source.</span></span> <span data-ttu-id="0122e-177">Каждое свойство содержит описательное имя и значение.</span><span class="sxs-lookup"><span data-stu-id="0122e-177">Each property contains a descriptive name and a value.</span></span>                                               |
| [<span data-ttu-id="0122e-178">**имфметадата**</span><span class="sxs-lookup"><span data-stu-id="0122e-178">**IMFMetadata**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmetadata)                       | <span data-ttu-id="0122e-179">Описание метаданных для файла ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-179">Describes the metadata for the ASF file.</span></span>                                                                                                           |
| [<span data-ttu-id="0122e-180">**имфметадатапровидер**</span><span class="sxs-lookup"><span data-stu-id="0122e-180">**IMFMetadataProvider**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmetadataprovider)       | <span data-ttu-id="0122e-181">Извлекает коллекцию метаданных либо для всей презентации, либо для одного потока в презентации.</span><span class="sxs-lookup"><span data-stu-id="0122e-181">Retrieves a collection of metadata, either for an entire presentation, or for one stream in the presentation.</span></span>                                      |
| [<span data-ttu-id="0122e-182">**имфратесуппорт**</span><span class="sxs-lookup"><span data-stu-id="0122e-182">**IMFRateSupport**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport)                 | <span data-ttu-id="0122e-183">Запрашивает поддерживаемый диапазон поддерживаемых частот воспроизведения, включая обратную воспроизведение.</span><span class="sxs-lookup"><span data-stu-id="0122e-183">Queries the range of playback rates that are supported, including reverse playback.</span></span>                                                                |
| [<span data-ttu-id="0122e-184">**имфратеконтрол**</span><span class="sxs-lookup"><span data-stu-id="0122e-184">**IMFRateControl**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol)                 | <span data-ttu-id="0122e-185">Возвращает или задает скорость воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="0122e-185">Gets or sets the playback rate.</span></span>                                                                                                                    |
| [<span data-ttu-id="0122e-186">**имфтрустединпут**</span><span class="sxs-lookup"><span data-stu-id="0122e-186">**IMFTrustedInput**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imftrustedinput)               | <span data-ttu-id="0122e-187">Получает значение ITA для каждого из потоков ASF, содержащихся в источнике.</span><span class="sxs-lookup"><span data-stu-id="0122e-187">Gets the ITA for each of the ASF streams contained in the source.</span></span>                                                                                  |
| [<span data-ttu-id="0122e-188">**имфпмпклиент**</span><span class="sxs-lookup"><span data-stu-id="0122e-188">**IMFPMPClient**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfpmpclient)                     | <span data-ttu-id="0122e-189">Позволяет источнику мультимедиа получить указатель на интерфейс [**имфпмфост**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) , который используется для создания объектов в процессе PMP.</span><span class="sxs-lookup"><span data-stu-id="0122e-189">Enables a media source to receive a pointer to the [**IMFPMPHost**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) interface, which is used to create objects in the PMP process.</span></span> |
| [<span data-ttu-id="0122e-190">**имфтимекодетранслате**</span><span class="sxs-lookup"><span data-stu-id="0122e-190">**IMFTimecodeTranslate**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate)     | <span data-ttu-id="0122e-191">Выполняет преобразование кода времени между обществом изображений движения и телевизионными инженерами (SMPTE) и единицами времени 100 нс.</span><span class="sxs-lookup"><span data-stu-id="0122e-191">Converts between Society of Motion Picture and Television Engineers (SMPTE) time codes and 100-nanosecond time units.</span></span>                              |



 

## <a name="asf-media-source-services"></a><span data-ttu-id="0122e-192">Службы источников ASF Media</span><span class="sxs-lookup"><span data-stu-id="0122e-192">ASF Media Source Services</span></span>

<span data-ttu-id="0122e-193">Источник мультимедиа ASF предоставляет различные службы, областью действия которых является файл ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-193">The ASF media source provides various services that are scoped for ASF file.</span></span> <span data-ttu-id="0122e-194">Чтобы получить указатель на определенную службу, приложение должно использовать один из следующих идентификаторов службы в вызове [**мфжетсервице**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice).</span><span class="sxs-lookup"><span data-stu-id="0122e-194">To get a pointer to a particular service, the application must use one of the following service identifiers in its call to [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice).</span></span> <span data-ttu-id="0122e-195">Дополнительные сведения см. в разделе [интерфейсы служб](service-interfaces.md).</span><span class="sxs-lookup"><span data-stu-id="0122e-195">For information, see [Service Interfaces](service-interfaces.md).</span></span>



| <span data-ttu-id="0122e-196">Идентификатор службы</span><span class="sxs-lookup"><span data-stu-id="0122e-196">Service Identifier</span></span>               | <span data-ttu-id="0122e-197">Описание</span><span class="sxs-lookup"><span data-stu-id="0122e-197">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="0122e-198">\_ \_ Служба управления скоростью \_ MF</span><span class="sxs-lookup"><span data-stu-id="0122e-198">MF\_RATE\_CONTROL\_SERVICE</span></span>       | <span data-ttu-id="0122e-199">Используя этот идентификатор, приложение может получить указатель на интерфейсы [**имфратесуппорт**](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport) или [**имфратеконтрол**](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol) .</span><span class="sxs-lookup"><span data-stu-id="0122e-199">By using this identifier, an application can get a pointer to either [**IMFRateSupport**](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport) or [**IMFRateControl**](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol) interfaces.</span></span> <span data-ttu-id="0122e-200">Используя объект Rate support, реализованный источником мультимедиа, приложение может проверить, поддерживается ли определенная частота в базовом медиа-файле ASF, также получить самую быструю и самую низкую скорость.</span><span class="sxs-lookup"><span data-stu-id="0122e-200">By using the rate support object implemented by the media source, the application can check if a particular rate is supported by the underlying ASF media file also get the fastest and the slowest rate.</span></span> <span data-ttu-id="0122e-201">С помощью управляющего объекта Rate приложение может получить и задать скорость воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="0122e-201">By using the rate control object the application can get and set the playback rate.</span></span> <span data-ttu-id="0122e-202">Если в приложении указана скорость воспроизведения, источник медиа ASF сначала проверяет, находится ли запрошенная скорость в пределах пределов скорости (определяется быстрыми и медленными), а затем устанавливает скорость.</span><span class="sxs-lookup"><span data-stu-id="0122e-202">If the application specifies a particular rate for playback, the ASF media source first checks if the requested rate is within the rate limits (determined by fasted and slowest rates) and then sets the rate.</span></span> <span data-ttu-id="0122e-203">Это не проверяет переменные условия, так как скорость может измениться в зависимости от пропускной способности сети.</span><span class="sxs-lookup"><span data-stu-id="0122e-203">This does not check for variable conditions as the bitrate might change any moment depending on the network bandwidth.</span></span> <span data-ttu-id="0122e-204">Дополнительные сведения см. в этой [контрольной частоте](rate-control.md).</span><span class="sxs-lookup"><span data-stu-id="0122e-204">For more information, [Rate Control](rate-control.md).</span></span> |
| <span data-ttu-id="0122e-205">\_ \_ служба поставщика метаданных \_ MF</span><span class="sxs-lookup"><span data-stu-id="0122e-205">MF\_METADATA\_PROVIDER\_SERVICE</span></span>  | <span data-ttu-id="0122e-206">Используя этот идентификатор, приложение может получить указатель на интерфейс [**имфметадатапровидер**](/windows/desktop/api/mfidl/nn-mfidl-imfmetadataprovider) источника ASF Media.</span><span class="sxs-lookup"><span data-stu-id="0122e-206">By using this identifier, the application can get a pointer to the [**IMFMetadataProvider**](/windows/desktop/api/mfidl/nn-mfidl-imfmetadataprovider) interface of the ASF media source.</span></span> <span data-ttu-id="0122e-207">Этот интерфейс предоставляет доступ к сведениям о файле ASF, в частности, к объектам заголовка ASF и потокам, содержащимся в содержимом носителя.</span><span class="sxs-lookup"><span data-stu-id="0122e-207">This interface provides access to information about ASF file specifically the ASF Header Objects and the streams contained within the media content.</span></span> <span data-ttu-id="0122e-208">Сведения о заголовке предоставляются через атрибуты дескриптора представления, а сведения о потоке — через атрибуты дескриптора потока.</span><span class="sxs-lookup"><span data-stu-id="0122e-208">Header information is exposes through presentation descriptor attributes and stream information is provided through stream descriptor attributes.</span></span> <span data-ttu-id="0122e-209">Дополнительные сведения об этих атрибутах см. в разделе [атрибуты Media Foundation для объектов заголовка ASF](media-foundation-attributes-for-asf-header-objects.md).</span><span class="sxs-lookup"><span data-stu-id="0122e-209">For more information about these attributes, see [Media Foundation Attributes for ASF Header Objects](media-foundation-attributes-for-asf-header-objects.md).</span></span> <span data-ttu-id="0122e-210">Помимо информации, предоставляемой с помощью атрибутов, также существуют описательные метаданные, которые устанавливаются в качестве свойств.</span><span class="sxs-lookup"><span data-stu-id="0122e-210">In addition to information that is exposed through attributes, there also exists descriptive metadata, which are set as properties.</span></span>                                                                                                 |
| <span data-ttu-id="0122e-211">\_ \_ Служба обработчика свойств MF \_</span><span class="sxs-lookup"><span data-stu-id="0122e-211">MF\_PROPERTY\_HANDLER\_SERVICE</span></span>   | <span data-ttu-id="0122e-212">Используя этот идентификатор, приложение может получить указатель на интерфейс [**ипропертисторе**](/windows/win32/api/propsys/nn-propsys-ipropertystore) источника ASF Media.</span><span class="sxs-lookup"><span data-stu-id="0122e-212">By using this identifier, the application can get a pointer to the [**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore) interface of the ASF media source.</span></span> <span data-ttu-id="0122e-213">Хранилище свойств содержит все метаданные, связанные с файлом ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-213">The property store contains all the metadata related to the ASF file.</span></span> <span data-ttu-id="0122e-214">Этот идентификатор является новым в Windows 7 и заменяет \_ \_ службу поставщика метаданных MF \_ для получения свойств метаданных.</span><span class="sxs-lookup"><span data-stu-id="0122e-214">This identifier is new in Windows 7 and replaces MF\_METADATA\_PROVIDER\_SERVICE for getting metadata properties.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="0122e-215">\_Служба статистики \_ мфнетсаурце</span><span class="sxs-lookup"><span data-stu-id="0122e-215">MFNETSOURCE\_STATISTICS\_SERVICE</span></span> | <span data-ttu-id="0122e-216">Дополнительные сведения см. в разделе Получение статистики сети в [журнале клиента](client-logging.md).</span><span class="sxs-lookup"><span data-stu-id="0122e-216">For more information, see Retrieving Network Statistics in [Client Logging](client-logging.md).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="0122e-217">Служба времени код MF \_ \_</span><span class="sxs-lookup"><span data-stu-id="0122e-217">MF\_TIMECODE\_SERVICE</span></span>            | <span data-ttu-id="0122e-218">Используя этот идентификатор, приложение может получить указатель на интерфейс [**имфтимекодетранслате**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) источника мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="0122e-218">By using this identifier, the application can get a pointer to the media source’s [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) interface.</span></span> <span data-ttu-id="0122e-219">Эта реализация может использоваться для выполнения переводов кода времени, таких как преобразование кода времени SMPTE в 100-Nano Second Units and Back.</span><span class="sxs-lookup"><span data-stu-id="0122e-219">This implementation can be used to perform time code translations such as converting SMPTE time code to 100-nano second units and back.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

### <a name="timecode-translation"></a><span data-ttu-id="0122e-220">Преобразование времени и времени</span><span class="sxs-lookup"><span data-stu-id="0122e-220">Timecode Translation</span></span>

<span data-ttu-id="0122e-221">Источник мультимедиа ASF предоставляет службу преобразования кода времени, которая позволяет приложению преобразовывать код времени SMPTE в ближайшее время презентации (в единицах 100 нс).</span><span class="sxs-lookup"><span data-stu-id="0122e-221">The ASF media source provides a time code translation service that allows your application to convert SMPTE time code to the closest presentation time (in 100-nanosecond unit).</span></span> <span data-ttu-id="0122e-222">И наоборот, приложение также может получить код времени для запрошенного времени презентации.</span><span class="sxs-lookup"><span data-stu-id="0122e-222">Conversely, the application can also get the time code for a requested presentation time.</span></span> <span data-ttu-id="0122e-223">Служба доступна через интерфейс [**имфтимекодетранслате**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) , который реализуется источником медиа ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-223">The service is available through the [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) interface, which the ASF media source implements.</span></span> <span data-ttu-id="0122e-224">Вызов метода для этого указателя интерфейса является асинхронным, который может выполняться из основного потока приложения без блокировки пользовательского интерфейса приложения.</span><span class="sxs-lookup"><span data-stu-id="0122e-224">The method calls on this interface pointer are asynchronous that can run from your main application thread without blocking the user interface of your application.</span></span>

<span data-ttu-id="0122e-225">Ниже описана процедура преобразования кода времени.</span><span class="sxs-lookup"><span data-stu-id="0122e-225">The following steps summarize the procedure for time code translation:</span></span>

1.  <span data-ttu-id="0122e-226">Получите указатель на интерфейс [**имфтимекодетранслате**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) источника ASF Media, вызвав [**мфжетсервице**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice) и указав идентификатор **\_ \_ службы** времени в формате MF.</span><span class="sxs-lookup"><span data-stu-id="0122e-226">Get pointer to the [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) interface of the ASF media source by calling [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice) and specifying the **MF\_TIMECODE\_SERVICE** identifier.</span></span>
2.  <span data-ttu-id="0122e-227">Вызовите [**имфтимекодетранслате:: бегинконверттимекодетохнс**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverttimecodetohns) или [**Имфтимекодетранслате:: бегинконверснстотимекоде**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverthnstotimecode) и укажите время, которое должно быть переведено.</span><span class="sxs-lookup"><span data-stu-id="0122e-227">Call [**IMFTimecodeTranslate::BeginConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverttimecodetohns) or [**IMFTimecodeTranslate::BeginConvertHNSToTimecode**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverthnstotimecode) and specify the time that is to be translated..</span></span> <span data-ttu-id="0122e-228">Для **бегинконверттимекодетохнс** код времени должен быть указан в виде переменной [**пропвариант**](/windows/win32/api/propidl/ns-propidl-propvariant) с типом данных **VT \_ i8** .</span><span class="sxs-lookup"><span data-stu-id="0122e-228">For **BeginConvertTimecodeToHNS** the time code must be specified as a [**PROPVARIANT**](/windows/win32/api/propidl/ns-propidl-propvariant) variable with **VT\_I8** data type.</span></span> <span data-ttu-id="0122e-229">Для метода **бегинконверснстотимекоде** требуется время в 100-наносекундных единицах в качестве типа [**мфтиме**](mftime.md) .</span><span class="sxs-lookup"><span data-stu-id="0122e-229">The **BeginConvertHNSToTimecode** method requires the time in 100-nanosecond units as the [**MFTIME**](mftime.md) type.</span></span>
3.  <span data-ttu-id="0122e-230">Завершите асинхронную операцию, вызвав [**имфтимекодетранслате:: ендконверттимекодетохнс**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-endconverttimecodetohns) или **Имфтимекодетранслате:: ендконверттимекодетохнс** соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="0122e-230">Complete the asynchronous operation by calling [**IMFTimecodeTranslate::EndConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-endconverttimecodetohns) or **IMFTimecodeTranslate::EndConvertTimecodeToHNS** appropriately.</span></span>

<span data-ttu-id="0122e-231">Во время создания источника мультимедиа сопоставитель источника создает байтовый поток для файла, из которого источник мультимедиа считывает содержимое ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-231">During the creation of the media source, the source resolver creates a byte stream for the file from which the media source reads the ASF content.</span></span> <span data-ttu-id="0122e-232">Чтобы преобразования времени были успешными, поток байтов, связанный с файлом ASF, должен иметь возможность поиска. в противном случае приложение получает \_ ошибку MF E \_ BYTESTREAM \_ без \_ поиска из вызова **Begin...** .</span><span class="sxs-lookup"><span data-stu-id="0122e-232">In order for the time conversions to be successful, the byte stream associated with the ASF file must have seeking capabilities; otherwise, the application gets the MF\_E\_BYTESTREAM\_NOT\_SEEKABLE error from the **Begin...** call.</span></span> <span data-ttu-id="0122e-233">Еще одно требование к преобразованию времени заключается в том, что ASF-файл, представленный источником носителя ASF, должен иметь объекты-индексы ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-233">Another requirement for time conversions is that the ASF file, represented by the ASF media source, must have ASF Index Objects.</span></span> <span data-ttu-id="0122e-234">Время презентации и коды времени извлекаются из объектов ASF index, которые поддерживают все индексы и соответствующие точки поиска для ASF-файла.</span><span class="sxs-lookup"><span data-stu-id="0122e-234">The presentation times and the time codes are extracted from the ASF Index Objects that maintain all the indexes and the corresponding seek- points for the ASF file.</span></span> <span data-ttu-id="0122e-235">Для преобразования кода во время презентации ASF-файл должен содержать простой объект index. для перевода времени во время представления кода ASF-файл должен иметь объект index.</span><span class="sxs-lookup"><span data-stu-id="0122e-235">For presentation time-to-time code translation, the ASF file must contain a Simple Index Object; for time code-to-presentation time translation, the ASF file must have an Index Object.</span></span> <span data-ttu-id="0122e-236">Операции преобразования зависят от базового *индексатора* (компонента вмконтаинер) для анализа и чтения объекта индекса, связанного с файлом ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-236">The conversion operations rely on the underlying *indexer* (WMContainer component) to parse and read the Index Object associated with the ASF file.</span></span> <span data-ttu-id="0122e-237">Если файл не содержит объект index, приложение асинхронно получает \_ \_ код ошибки MF E No \_ индекса.</span><span class="sxs-lookup"><span data-stu-id="0122e-237">If the file does not contain an Index Object, the application asynchronously receives the MF\_E\_NO\_INDEX error code.</span></span>

<span data-ttu-id="0122e-238">Чтобы перевести время, запрошенное приложением, источник мультимедиа перечисляет потоки в файле и находит поток, содержащий соответствующий объект индекса ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-238">To translate the time requested by the application, the media source enumerates the streams within the file and finds the stream that contains the appropriate ASF Index Object.</span></span> <span data-ttu-id="0122e-239">Если такой поток найден, источник мультимедиа анализирует пакеты ASF потока до тех пор, пока не будет достигнут правильный код времени.</span><span class="sxs-lookup"><span data-stu-id="0122e-239">If such a stream is found, the media source parses the stream’s ASF packets are parsed until the correct time code is reached.</span></span> <span data-ttu-id="0122e-240">После нахождения правильного примера он извлекает соответствующее время презентации или код времени из примера и возвращает его вызывающему объекту.</span><span class="sxs-lookup"><span data-stu-id="0122e-240">After it finds the correct sample it retrieves the corresponding presentation time or the time code from the sample, and returns it to the caller.</span></span>

### <a name="script-command-support"></a><span data-ttu-id="0122e-241">Поддержка команды сценария</span><span class="sxs-lookup"><span data-stu-id="0122e-241">Script Command Support</span></span>

<span data-ttu-id="0122e-242">При создании топологии ASF, содержащей поток скрипта, в топологию добавляется узел потока скрипта.</span><span class="sxs-lookup"><span data-stu-id="0122e-242">When you build an ASF topology that contains a script stream a Script Stream node is added to the topology.</span></span> <span data-ttu-id="0122e-243">Этот узел будет отсылать Имфсамплес в соответствующее время.</span><span class="sxs-lookup"><span data-stu-id="0122e-243">This node will send IMFSamples at the appropriate time.</span></span> <span data-ttu-id="0122e-244">Имфсампле, предоставляемый исходным узлом скрипта, хранит данные в Имфмедиабуффер, связанном с примером.</span><span class="sxs-lookup"><span data-stu-id="0122e-244">The IMFSample provided by the script source node stores the data in the IMFMediaBuffer associated with the sample.</span></span> <span data-ttu-id="0122e-245">Вы можете вызвать Копитобуффер в примере, чтобы получить Имфмедиабуффер, а затем вызвать блокировку буфера для получения данных.</span><span class="sxs-lookup"><span data-stu-id="0122e-245">You can call CopyToBuffer on the sample to get an IMFMediaBuffer and then call Lock on the buffer to get the data.</span></span> 

<span data-ttu-id="0122e-246">Полезные данные потока сценария упаковываются в буфер в виде строки типа, за которой следует значение NULL, за которым следует Командная строка, за которой следует значение NULL.</span><span class="sxs-lookup"><span data-stu-id="0122e-246">Script stream payloads are packed into the buffer as a type string, followed by NULL, followed by the command string, followed by NULL.</span></span> <span data-ttu-id="0122e-247">Строки имеют формат Юникод в формате ASF.</span><span class="sxs-lookup"><span data-stu-id="0122e-247">Strings are Unicode in the ASF format.</span></span>

<span data-ttu-id="0122e-248">Например, полезная нагрузка может выглядеть следующим образом (где \ 0 означает нуль-символ):</span><span class="sxs-lookup"><span data-stu-id="0122e-248">For example, a payload might look like the following (where \0 indicates a NULL character):</span></span>

<span data-ttu-id="0122e-249">*URL\0http://contoso.com\0*</span><span class="sxs-lookup"><span data-stu-id="0122e-249">*URL\0http://contoso.com\0*</span></span>

<span data-ttu-id="0122e-250">*Text\0This — это caption\0*</span><span class="sxs-lookup"><span data-stu-id="0122e-250">*Text\0This is a caption\0*</span></span>



## <a name="related-topics"></a><span data-ttu-id="0122e-251">См. также</span><span class="sxs-lookup"><span data-stu-id="0122e-251">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0122e-252">Компоненты ASF уровня конвейера</span><span class="sxs-lookup"><span data-stu-id="0122e-252">Pipeline Layer ASF Components</span></span>](pipeline-layer-asf-components.md)
</dt> <dt>

[<span data-ttu-id="0122e-253">Поддержка ASF в Media Foundation</span><span class="sxs-lookup"><span data-stu-id="0122e-253">ASF Support in Media Foundation</span></span>](asf-support-in-media-foundation.md)
</dt> </dl>

 

 
