---
description: При создании файла ASF объекту Контентинфо необходимо получить сведения о характеристиках содержимого мультимедиа, чтобы различные объекты заголовков были заполнены правильными значениями.
ms.assetid: 30e3c10b-1310-4194-8b83-221dfe73b03c
title: Задание свойств в объекте Контентинфо
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e386d5eb33dd1893b195a870425b2336ab9c316f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104155319"
---
# <a name="setting-properties-in-the-contentinfo-object"></a><span data-ttu-id="01884-103">Задание свойств в объекте Контентинфо</span><span class="sxs-lookup"><span data-stu-id="01884-103">Setting Properties in the ContentInfo Object</span></span>

<span data-ttu-id="01884-104">При создании файла ASF объекту Контентинфо необходимо получить сведения о характеристиках содержимого мультимедиа, чтобы различные объекты заголовков были заполнены правильными значениями.</span><span class="sxs-lookup"><span data-stu-id="01884-104">While creating an ASF file, the ContentInfo object needs to know the characteristics of the media content so that the various header objects are populated with the correct values.</span></span>

-   [<span data-ttu-id="01884-105">Параметры, связанные с содержимым, в объекте Контентинфо</span><span class="sxs-lookup"><span data-stu-id="01884-105">Content-Related Settings in the ContentInfo Object</span></span>](#content-related-settings-in-the-contentinfo-object)
-   [<span data-ttu-id="01884-106">Настройка объекта Контентинфо с помощью параметров кодировщика</span><span class="sxs-lookup"><span data-stu-id="01884-106">Configuring the ContentInfo Object with Encoder Settings</span></span>](#configuring-the-contentinfo-object-with-encoder-settings)
-   [<span data-ttu-id="01884-107">См. также</span><span class="sxs-lookup"><span data-stu-id="01884-107">Related topics</span></span>](#related-topics)

## <a name="content-related-settings-in-the-contentinfo-object"></a><span data-ttu-id="01884-108">Параметры, связанные с содержимым, в объекте Контентинфо</span><span class="sxs-lookup"><span data-stu-id="01884-108">Content-Related Settings in the ContentInfo Object</span></span>

<span data-ttu-id="01884-109">Параметры конфигурации содержимого — это параметры потока, которые содержатся в профиле и указывают идентификатор потока, тип носителя и параметры контейнера с утечкой данных для приемника мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="01884-109">Content configuration settings are stream settings, which are contained within the profile and specify the stream identifier, the media type, and the leaky bucket parameters for the media sink.</span></span> <span data-ttu-id="01884-110">После настройки профиля для объекта Контентинфо путем вызова [**имфасфконтентинфо:: сетпрофиле**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile)эти значения отражаются в созданном ОБЪЕКТЕ заголовка ASF.</span><span class="sxs-lookup"><span data-stu-id="01884-110">After the profile is set on the ContentInfo object by calling [**IMFASFContentInfo::SetProfile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile), these values are reflected in the ASF Header Object that was generated.</span></span> <span data-ttu-id="01884-111">Дополнительные сведения об этих параметрах см. в разделе [Создание и настройка потоков ASF](creating-and-configuring-asf-streams.md).</span><span class="sxs-lookup"><span data-stu-id="01884-111">For information about these settings, see [Creating and Configuring ASF Streams](creating-and-configuring-asf-streams.md).</span></span>

## <a name="configuring-the-contentinfo-object-with-encoder-settings"></a><span data-ttu-id="01884-112">Настройка объекта Контентинфо с помощью параметров кодировщика</span><span class="sxs-lookup"><span data-stu-id="01884-112">Configuring the ContentInfo Object with Encoder Settings</span></span>

<span data-ttu-id="01884-113">Мультимедийные аудио-и видеоданные являются сложными и занимают большой объем памяти.</span><span class="sxs-lookup"><span data-stu-id="01884-113">Digital media audio or video data is complex and takes up large amounts of memory.</span></span> <span data-ttu-id="01884-114">В большинстве случаев звук и видео сжимаются с помощью кодировщиков перед добавлением в файл ASF.</span><span class="sxs-lookup"><span data-stu-id="01884-114">Under most circumstances, both audio and video are compressed by using encoders before being added to an ASF file.</span></span> <span data-ttu-id="01884-115">В Media Foundation кодировщики реализуются как [Media Foundation преобразования](media-foundation-transforms.md) (МФТС) с одним входом и одним выходом.</span><span class="sxs-lookup"><span data-stu-id="01884-115">In Media Foundation, encoders are implemented as [Media Foundation Transforms](media-foundation-transforms.md) (MFTs) with one input and one output.</span></span> <span data-ttu-id="01884-116">Необходимо выбрать тип выходного носителя в зависимости от типа носителя входного потока и типа кодировки, выбранного для сжатия потока.</span><span class="sxs-lookup"><span data-stu-id="01884-116">You must select the output media type depending on the media type of the input stream and the encoding type you choose for compressing the stream.</span></span>

<span data-ttu-id="01884-117">Перед сеансом кодирования кодировщик необходимо настроить, задав соответствующие свойства в зависимости от типа кодировки.</span><span class="sxs-lookup"><span data-stu-id="01884-117">Before the encoding session, the encoder must be configured by setting the relevant properties depending on the type of encoding.</span></span>

<span data-ttu-id="01884-118">После настройки кодировщика необходимо настроить объект Контентинфо со значениями кодировщика, так как [мультиплексор ASF](asf-multiplexer.md) и приемник мультимедиа ASF, которые инициализируются с помощью заполненного объекта контентинфо, используют такие параметры, как значения сегмента утечки, для создания пакетов данных ASF.</span><span class="sxs-lookup"><span data-stu-id="01884-118">After configuring the encoder, you must configure the ContentInfo object with the encoder values because the [ASF Multiplexer](asf-multiplexer.md) and the ASF Media Sink, which are initialized with the populated ContentInfo object, use settings such as the leaky bucket values, to generate ASF data packets.</span></span> <span data-ttu-id="01884-119">Значения не сохраняются в окончательном объекте заголовка ASF.</span><span class="sxs-lookup"><span data-stu-id="01884-119">The values are not saved in the final ASF Header Object.</span></span> <span data-ttu-id="01884-120">Параметры кодировки предоставляются в виде свойств.</span><span class="sxs-lookup"><span data-stu-id="01884-120">The encoding settings are exposed as properties.</span></span> <span data-ttu-id="01884-121">Чтобы настроить объект Контентинфо с помощью свойств кодировщика, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="01884-121">To configure the ContentInfo object with the encoder properties, do the following:</span></span>

1.  <span data-ttu-id="01884-122">Получите указатель на хранилище свойств кодировщика, выполнив запрос к кодировщику (интерфейс [**имфтрансформ**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) ) непосредственно для интерфейса **ипропертисторе** .</span><span class="sxs-lookup"><span data-stu-id="01884-122">Get a pointer to the encoder's property store by querying the encoder ([**IMFTransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) interface) directly for the **IPropertyStore** interface.</span></span>
2.  <span data-ttu-id="01884-123">Вызовите [**имфасфконтентинфо:: жетенкодингконфигуратионпропертисторе**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore).</span><span class="sxs-lookup"><span data-stu-id="01884-123">Call [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore).</span></span> <span data-ttu-id="01884-124">Чтобы задать свойства для конкретного потока, укажите идентификатор потока в параметре *встреамнумбер* . для свойств на уровне файла передайте 0.</span><span class="sxs-lookup"><span data-stu-id="01884-124">To set stream-specific properties, specify the stream identifier in the *wStreamNumber* parameter; for file-level properties, pass 0.</span></span> <span data-ttu-id="01884-125">Параметр *пписторе* получает указатель на интерфейс **ипропертисторе** .</span><span class="sxs-lookup"><span data-stu-id="01884-125">The *ppIStore* parameter receives a pointer to the **IPropertyStore** interface.</span></span> <span data-ttu-id="01884-126">Полученное хранилище свойств пусто.</span><span class="sxs-lookup"><span data-stu-id="01884-126">The received property store is empty.</span></span>
3.  <span data-ttu-id="01884-127">Вызовите метод **ипропертисторе:: GetValue** в кодировщике и получите значение свойства, указав константы ключа свойства.</span><span class="sxs-lookup"><span data-stu-id="01884-127">Call **IPropertyStore::GetValue** on the encoder and get the property value by specifying the property key constants.</span></span> <span data-ttu-id="01884-128">Полный список свойств кодировки см. в [справочнике по программированию кодека](/previous-versions//aa384554(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="01884-128">For a complete list of encoding properties, see the [Codec Programming Reference](/previous-versions//aa384554(v=vs.85)).</span></span>
4.  <span data-ttu-id="01884-129">Вызовите метод **ипропертисторе:: SetValue** для объекта контентинфо, чтобы задать требуемое свойство в хранилище свойств.</span><span class="sxs-lookup"><span data-stu-id="01884-129">Call **IPropertyStore::SetValue** on the ContentInfo object to set the required property in the property store.</span></span>
5.  <span data-ttu-id="01884-130">Повторите шаги 3 и 4 для каждого свойства, которое необходимо задать.</span><span class="sxs-lookup"><span data-stu-id="01884-130">Repeat steps 3 and 4 for each property that you want to set.</span></span>

<span data-ttu-id="01884-131">Приемник мультимедиа ASF можно создать с помощью объекта активации, вызвав [**мфкреатеасфмедиасинкактивате**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate).</span><span class="sxs-lookup"><span data-stu-id="01884-131">The ASF media sink can be created by using an activation object by calling [**MFCreateASFMediaSinkActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate).</span></span> <span data-ttu-id="01884-132">Новый объект приемника мультимедиа настраивается на основе параметров, относящихся к приемнику мультимедиа, которые можно задать в хранилище свойств объекта Контентинфо.</span><span class="sxs-lookup"><span data-stu-id="01884-132">The new media sink object is configured based on media sink-specific settings that can be set in the ContentInfo object's property store.</span></span> <span data-ttu-id="01884-133">В следующей таблице показаны константы свойств приемника мультимедиа ASF.</span><span class="sxs-lookup"><span data-stu-id="01884-133">The following table shows the ASF media sink property constants.</span></span>



| <span data-ttu-id="01884-134">Свойство</span><span class="sxs-lookup"><span data-stu-id="01884-134">Property</span></span>                                                                                                     | <span data-ttu-id="01884-135">Описание</span><span class="sxs-lookup"><span data-stu-id="01884-135">Description</span></span>                                                                                                                                                                                                                                                                                           |
|--------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="01884-136">**МФПКЭЙ \_ асфмедиасинк \_ Base \_ сендтиме**</span><span class="sxs-lookup"><span data-stu-id="01884-136">**MFPKEY\_ASFMEDIASINK\_BASE\_SENDTIME**</span></span>](mfpkey-asfmediasink-base-sendtime-property.md)                   | <span data-ttu-id="01884-137">Время отправки указывает, когда будут освобождены полезные данные внутри сегмента утечки.</span><span class="sxs-lookup"><span data-stu-id="01884-137">The send time indicates when the payload inside the leaky bucket will be released.</span></span> <span data-ttu-id="01884-138">Это значение свойства указывает первое время отправки.</span><span class="sxs-lookup"><span data-stu-id="01884-138">This property value indicates the first send time.</span></span> <span data-ttu-id="01884-139">Мультиплексор использует это значение для вычисления последующего времени отправки для созданных пакетов и гарантирует, что данные непрерывно проходят через сегмент утечки.</span><span class="sxs-lookup"><span data-stu-id="01884-139">The multiplexer uses this value to calculate the subsequent send times for the generated packets and ensures that data flows steadily through the leaky bucket.</span></span> |
| [<span data-ttu-id="01884-140">**МФПКЭЙ \_ асфмедиасинк \_ АВТОнастройка скорости \_**</span><span class="sxs-lookup"><span data-stu-id="01884-140">**MFPKEY\_ASFMEDIASINK\_AUTOADJUST\_BITRATE**</span></span>](mfpkey-asfmediasink-autoadjust-bitrate-property.md)         | <span data-ttu-id="01884-141">Это **логическое** значение указывает, нужно ли мультиплексору автоматически настраивать скорость потока, чтобы гарантировать, что данные не будут переполнены контейнером утечки.</span><span class="sxs-lookup"><span data-stu-id="01884-141">This **BOOL** value indicates whether the multiplexer needs to adjust the bit rate automatically to ensure that data does not overflow the leaky bucket.</span></span>                                                                                                                                              |
| [<span data-ttu-id="01884-142">**МФПКЭЙ \_ асфмедиасинк \_ дрмактион**</span><span class="sxs-lookup"><span data-stu-id="01884-142">**MFPKEY\_ASFMEDIASINK\_DRMACTION**</span></span>](mfpkey-asfmediasink-drmaction-property.md)                            | <span data-ttu-id="01884-143">Указывает действие DRM для приемника мультимедиа ASF при создании файла.</span><span class="sxs-lookup"><span data-stu-id="01884-143">This indicates the ASF media sink DRM action for file generation.</span></span> <span data-ttu-id="01884-144">В этом выпуске поддерживается только перекодировать DRM.</span><span class="sxs-lookup"><span data-stu-id="01884-144">In this release, only DRM transcode is supported.</span></span>                                                                                                                                                                                   |
| [<span data-ttu-id="01884-145">**МФПКЭЙ \_ асфстреамсинк \_ исправлен \_ леакибуккет**</span><span class="sxs-lookup"><span data-stu-id="01884-145">**MFPKEY\_ASFSTREAMSINK\_CORRECTED\_LEAKYBUCKET**</span></span>](mfpkey-asfstreamsink-corrected-leakybucket-property.md) | <span data-ttu-id="01884-146">Это свойство должно быть задано, когда кодировщик решает, какое окно буфера и скорость использовать.</span><span class="sxs-lookup"><span data-stu-id="01884-146">This property must be set when the encoder decides which buffer window and bit rate to use.</span></span> <span data-ttu-id="01884-147">Чтобы задать эти значения, используйте интерфейс [**ивмкодеклеакибуккет**](/windows/desktop/api/wmcodecdsp/nn-wmcodecdsp-iwmcodecleakybucket) .</span><span class="sxs-lookup"><span data-stu-id="01884-147">To set these values, use the [**IWMCodecLeakyBucket**](/windows/desktop/api/wmcodecdsp/nn-wmcodecdsp-iwmcodecleakybucket) interface.</span></span> <span data-ttu-id="01884-148">Этот параметр должен быть задан для каждого потока в файле ASF.</span><span class="sxs-lookup"><span data-stu-id="01884-148">This must be set for each stream in the ASF file.</span></span>                                                     |



 

## <a name="related-topics"></a><span data-ttu-id="01884-149">См. также</span><span class="sxs-lookup"><span data-stu-id="01884-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="01884-150">Запись объекта заголовка ASF для нового файла</span><span class="sxs-lookup"><span data-stu-id="01884-150">Writing an ASF Header Object for a New File</span></span>](writing-an-asf-header-object-for-a-new-file.md)
</dt> </dl>

 

 
