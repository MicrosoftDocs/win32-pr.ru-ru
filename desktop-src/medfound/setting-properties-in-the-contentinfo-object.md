---
description: При создании файла ASF объекту Контентинфо необходимо получить сведения о характеристиках содержимого мультимедиа, чтобы различные объекты заголовков были заполнены правильными значениями.
ms.assetid: 30e3c10b-1310-4194-8b83-221dfe73b03c
title: Задание свойств в объекте Контентинфо
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e386d5eb33dd1893b195a870425b2336ab9c316f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104155319"
---
# <a name="setting-properties-in-the-contentinfo-object"></a>Задание свойств в объекте Контентинфо

При создании файла ASF объекту Контентинфо необходимо получить сведения о характеристиках содержимого мультимедиа, чтобы различные объекты заголовков были заполнены правильными значениями.

-   [Параметры, связанные с содержимым, в объекте Контентинфо](#content-related-settings-in-the-contentinfo-object)
-   [Настройка объекта Контентинфо с помощью параметров кодировщика](#configuring-the-contentinfo-object-with-encoder-settings)
-   [См. также](#related-topics)

## <a name="content-related-settings-in-the-contentinfo-object"></a>Параметры, связанные с содержимым, в объекте Контентинфо

Параметры конфигурации содержимого — это параметры потока, которые содержатся в профиле и указывают идентификатор потока, тип носителя и параметры контейнера с утечкой данных для приемника мультимедиа. После настройки профиля для объекта Контентинфо путем вызова [**имфасфконтентинфо:: сетпрофиле**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile)эти значения отражаются в созданном ОБЪЕКТЕ заголовка ASF. Дополнительные сведения об этих параметрах см. в разделе [Создание и настройка потоков ASF](creating-and-configuring-asf-streams.md).

## <a name="configuring-the-contentinfo-object-with-encoder-settings"></a>Настройка объекта Контентинфо с помощью параметров кодировщика

Мультимедийные аудио-и видеоданные являются сложными и занимают большой объем памяти. В большинстве случаев звук и видео сжимаются с помощью кодировщиков перед добавлением в файл ASF. В Media Foundation кодировщики реализуются как [Media Foundation преобразования](media-foundation-transforms.md) (МФТС) с одним входом и одним выходом. Необходимо выбрать тип выходного носителя в зависимости от типа носителя входного потока и типа кодировки, выбранного для сжатия потока.

Перед сеансом кодирования кодировщик необходимо настроить, задав соответствующие свойства в зависимости от типа кодировки.

После настройки кодировщика необходимо настроить объект Контентинфо со значениями кодировщика, так как [мультиплексор ASF](asf-multiplexer.md) и приемник мультимедиа ASF, которые инициализируются с помощью заполненного объекта контентинфо, используют такие параметры, как значения сегмента утечки, для создания пакетов данных ASF. Значения не сохраняются в окончательном объекте заголовка ASF. Параметры кодировки предоставляются в виде свойств. Чтобы настроить объект Контентинфо с помощью свойств кодировщика, выполните следующие действия.

1.  Получите указатель на хранилище свойств кодировщика, выполнив запрос к кодировщику (интерфейс [**имфтрансформ**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) ) непосредственно для интерфейса **ипропертисторе** .
2.  Вызовите [**имфасфконтентинфо:: жетенкодингконфигуратионпропертисторе**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore). Чтобы задать свойства для конкретного потока, укажите идентификатор потока в параметре *встреамнумбер* . для свойств на уровне файла передайте 0. Параметр *пписторе* получает указатель на интерфейс **ипропертисторе** . Полученное хранилище свойств пусто.
3.  Вызовите метод **ипропертисторе:: GetValue** в кодировщике и получите значение свойства, указав константы ключа свойства. Полный список свойств кодировки см. в [справочнике по программированию кодека](/previous-versions//aa384554(v=vs.85)).
4.  Вызовите метод **ипропертисторе:: SetValue** для объекта контентинфо, чтобы задать требуемое свойство в хранилище свойств.
5.  Повторите шаги 3 и 4 для каждого свойства, которое необходимо задать.

Приемник мультимедиа ASF можно создать с помощью объекта активации, вызвав [**мфкреатеасфмедиасинкактивате**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfmediasinkactivate). Новый объект приемника мультимедиа настраивается на основе параметров, относящихся к приемнику мультимедиа, которые можно задать в хранилище свойств объекта Контентинфо. В следующей таблице показаны константы свойств приемника мультимедиа ASF.



| Свойство                                                                                                     | Описание                                                                                                                                                                                                                                                                                           |
|--------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**МФПКЭЙ \_ асфмедиасинк \_ Base \_ сендтиме**](mfpkey-asfmediasink-base-sendtime-property.md)                   | Время отправки указывает, когда будут освобождены полезные данные внутри сегмента утечки. Это значение свойства указывает первое время отправки. Мультиплексор использует это значение для вычисления последующего времени отправки для созданных пакетов и гарантирует, что данные непрерывно проходят через сегмент утечки. |
| [**МФПКЭЙ \_ асфмедиасинк \_ АВТОнастройка скорости \_**](mfpkey-asfmediasink-autoadjust-bitrate-property.md)         | Это **логическое** значение указывает, нужно ли мультиплексору автоматически настраивать скорость потока, чтобы гарантировать, что данные не будут переполнены контейнером утечки.                                                                                                                                              |
| [**МФПКЭЙ \_ асфмедиасинк \_ дрмактион**](mfpkey-asfmediasink-drmaction-property.md)                            | Указывает действие DRM для приемника мультимедиа ASF при создании файла. В этом выпуске поддерживается только перекодировать DRM.                                                                                                                                                                                   |
| [**МФПКЭЙ \_ асфстреамсинк \_ исправлен \_ леакибуккет**](mfpkey-asfstreamsink-corrected-leakybucket-property.md) | Это свойство должно быть задано, когда кодировщик решает, какое окно буфера и скорость использовать. Чтобы задать эти значения, используйте интерфейс [**ивмкодеклеакибуккет**](/windows/desktop/api/wmcodecdsp/nn-wmcodecdsp-iwmcodecleakybucket) . Этот параметр должен быть задан для каждого потока в файле ASF.                                                     |



 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Запись объекта заголовка ASF для нового файла](writing-an-asf-header-object-for-a-new-file.md)
</dt> </dl>

 

 
