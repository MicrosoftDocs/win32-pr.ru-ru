---
description: Файл MFT видео стабилизации — это Microsoft Media Foundation преобразование (MFT), которое выполняет стабилизации Image в потоке видео.
ms.assetid: BBC42190-08E4-4C3B-972A-FD30621A6CC1
title: Стабилизация видео MFT (Камерауиконтрол. h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 65eb64b05e41842b1f7b3ad2e49a6c064be08f0f
ms.sourcegitcommit: c8ec1ded1ffffc364d3c4f560bb2171da0dc5040
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "105669277"
---
# <a name="video-stabilization-mft"></a>Стабилизация видео MFT

Файл MFT видео стабилизации — это Microsoft Media Foundation преобразование (MFT), которое выполняет стабилизации Image в потоке видео.

## <a name="clsid"></a>CLSID

\_КМСВИДЕОДСПМФТ CLSID

## <a name="interfaces"></a>Интерфейсы

-   [**имфтрансформ**](/windows/desktop/api/mftransform/nn-mftransform-imftransform)
-   [**имфаттрибутес**](/windows/desktop/api/mfobjects/nn-mfobjects-imfattributes)
-   [**имфкуалитядвисе**](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise)
-   [**IMFQualityAdvise2**](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise2)
-   [**имедиаекстенсион**](/uwp/api/Windows.Media.IMediaExtension?view=winrt-19041)

## <a name="input-formats"></a>Форматы входных данных

Следующие комбинации типа входного носителя и подтипа, принимаемые в файле MFT видео стабилизации для несжатого видео:

-   **\_видео MEDIATYPE**
-   **МЕДИАСУБТИПЕ \_ NV12**
-   **МЕДИАСУБТИПЕ \_ YUY2**

## <a name="output-formats"></a>Форматы выходных данных

Ниже приведены сочетания типа выходных данных и подтипов, принимаемые файлом MFT видео стабилизации.

-   **\_видео MEDIATYPE**
-   **МЕДИАСУБТИПЕ \_ NV12**

Входной тип носителя должен быть задан перед выходным типом носителя. В большинстве случаев поддержка ограниченного формата не является проблемой, так как конвейер автоматически вставляет необходимые преобразования цветов.

Компонент Video стабилизации MFT поддерживает динамическое изменение формата при вводе изменений. При изменении размера входного рисунка или изменении подтипа он вызывает динамическое изменение формата для выходного потока.

Файл MFT Video стабилизации будет выполнять преобразование цветов в следующих случаях:

-   Если входной формат — **медиасубтипе \_ YUY2**.
-   При использовании режима совместимости Microsoft DirectX 9,0.

### <a name="attributes"></a>Атрибуты

Следующие атрибуты поддерживаются видео стабилизации MFT через интерфейс [**имфаттрибутес**](/windows/desktop/api/mfobjects/nn-mfobjects-imfattributes) .

-   Атрибут [MF \_ видеодсп \_ mode](mf-videodsp-mode.md) помещает файл MFT видео стабилизации в режим стабилизации или сквозной режим. Приложение должно вызывать [**имфаттрибутес:: SetUINT32**](/windows/desktop/api/mfobjects/nf-mfobjects-imfattributes-setuint32) для **типа GUID MF \_ видеодсп \_** с целочисленным значением, соответствующим одному из следующих допустимых значений: **мфвидеодспмоде \_ стабилизации** = 4, **мфвидеодспмоде \_ passthrough** = 1. \_Режим ВИДЕОДСП MF \_ можно изменить в любое время во время воспроизведения. Это приводит к изменению динамического режима. После изменения атрибута выходные данные будут переключаться на "стабилизация" или "передать" после 16 или 2 кадров (в зависимости от режима задержки).
-   Атрибут [MF \_ Low \_ Задержка](mf-low-latency.md) помещает файл MFT видео стабилизации в режим с низкой задержкой или режим высокого качества. Приложение должно вызвать [**имфаттрибутес:: SetUINT32**](/windows/desktop/api/mfobjects/nf-mfobjects-imfattributes-setuint32) для идентификатора GUID **MF с \_ небольшой \_ задержкой** и целым числом, соответствующим одному из следующих допустимых значений: низкая задержка = 1 высокое качество = 0
-   В конвейере используется атрибут [MF \_ SA \_ D3D11 \_ биндфлагс](mf-sa-d3d11-bindflags.md) для указания флагов привязки D3D11 для создания выходных образцов. Любое сочетание значений из перечисления [**\_ \_ флагов привязки D3D11**](/windows/win32/api/d3d11/ne-d3d11-d3d11_bind_flag) является допустимым.
-   Для указания минимального числа выборок, которые компонент должен поддерживать в выходных данных, в конвейере используется атрибут с **\_ \_ минимальным количеством \_ выходных данных \_ \_ SA MF** .
-   Атрибут [мфсампликстенсион \_ видеодспмоде](mfsampleextension-videodspmode.md) устанавливается в каждом примере, созданном с помощью стабилизации, чтобы указать [действующий \_ \_ режим видеодсп MF](mf-videodsp-mode.md) , примененный к этому примеру (независимо от того, был ли этот пример изменен). При определенных условиях выборка может быть невозможна (из-за высокой загрузки системы или запросов пользователя). Этот атрибут имеет те же значения, что и \_ \_ атрибут режима MF видеодсп Mode (**Мфвидеодспмоде \_ стабилизации** and **мфвидеодспмоде \_ passthrough**). Чтобы получить значение этого атрибута, приложения должны вызывать [**имфаттрибутес:: SetUINT32**](/windows/desktop/api/mfobjects/nf-mfobjects-imfattributes-setuint32) для GUID **мфсампликстенсион \_ видеодспмоде**.

## <a name="remarks"></a>Комментарии

Экземпляр поставщика схемы стабилизации видео можно создать одним из следующих способов:

-   Путем вызова [**мфтенумекс**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex). DSP видео стабилизации регистрируется в категории " **\_ \_ \_ видеовоздействие категории MFT** ".
-   Вызывая **функцию com** , мы передаем ей CLSID CLSID **\_ кмсвидеодспмфт**. Чтобы использовать этот метод, необходимо включить вмкодекдсп. h и связать с вмкодекдспууид. lib.

Кроме того, стабилизации для видео DSP поддерживает создание экземпляров с помощью среда выполнения Windows в качестве расширения Windows Media. Он определен в [**Windows. Media. видеоеффектс**](/uwp/api/Windows.Media.VideoEffects?view=winrt-19041), а его полное имя — "Windows. Media. Видеоеффектс. видеостабилизатион".

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------|----------------------------------------------------------------------------------------------|
| Header<br/> | <dl> <dt>Камерауиконтрол. h</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Обработчики цифровых сигналов](windowsmediadigitalsignalprocessors.md)
</dt> <dt>

[**Windows.Media.VideoEffects**](/uwp/api/Windows.Media.VideoEffects?view=winrt-19041)
</dt> </dl>

 

 
