---
description: Работа с буферами и примерами мультимедиа MFT
ms.assetid: dda4048e-bc4c-40ac-a6bd-34984f3717e0
title: Работа с буферами и примерами мультимедиа MFT
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6373f6d75b4122409b54649eed6f90e95c2f50c7
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "104351335"
---
# <a name="working-with-mft-media-buffers-and-samples"></a>Работа с буферами и примерами мультимедиа MFT

Кодек МФТС передает мультимедийные данные назад и вперед с помощью буферов мультимедиа и примеров.

Буфер мультимедиа — это COM-объект, который управляет блоком памяти, обычно для хранения данных мультимедиа. Когда данные передаются в таблицу MFT или из нее, они всегда передаются в виде буфера мультимедиа.

Все буферы мультимедиа предоставляют интерфейс **имфмедиабуффер** . Этот интерфейс предназначен для любого типа данных. Буферы, содержащие данные видео, часто также предоставляют **IMF2DBuffer**.

Максимальный размер буфера мультимедиа — это объем памяти, выделенной для буфера. Чтобы найти максимальный размер, вызовите **имфмедиабуффер:: @ MaxLength**. В любой момент времени буфер мультимедиа также имеет текущую длину, которая представляет собой объем допустимых данных в буфере, в диапазоне от нуля до максимального размера. Чтобы получить текущую длину, вызовите метод **имфмедиабуффер:: жеткуррентленгс**. При создании буфера Текущая длина равна нулю. При записи данных в буфер вызовите **имфмедиабуффер:: сеткуррентленгс** , чтобы обновить текущую длину.

Чтобы получить доступ к памяти в буфере, вызовите **имфмедиабуффер:: Lock**. Этот метод возвращает указатель на начало блока памяти. По завершении использования указателя вызовите **имфмедиабуффер:: Unlock**. Метод **Lock** не является механизмом синхронизации потоков; Это не гарантирует, что другие потоки не смогут получить доступ к буферу. Метод **Lock** используется, чтобы гарантировать, что память, к которой осуществлялся доступ, останется действительной до тех пор, пока не будет вызван метод **Unlock** .

Пример объекта мультимедиа (в контексте Media Foundation пакета SDK) — это объект, содержащий упорядоченный список из нуля или более буферов. Примеры носителей предоставляют интерфейс **имфсампле** .

Чтобы создать новый пример, вызовите функцию **мфкреатесампле** . Изначально список буферов примера пуст. Чтобы добавить буфер в конец списка, вызовите метод **имфсампле:: аддбуффер**.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Работа с кодеками дмос](workingwithcodecdmos.md)
</dt> <dt>

[Работа с кодеками МФТС](workingwithcodecmfts.md)
</dt> </dl>

 

 



