---
description: События источника Sequencer
ms.assetid: 28654bae-9ce2-467b-b769-63279d69b173
title: События источника Sequencer
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fdf97cc5ff25c8a5fc40fa4990bf38c652f94e63
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105673459"
---
# <a name="sequencer-source-events"></a><span data-ttu-id="d1962-103">События источника Sequencer</span><span class="sxs-lookup"><span data-stu-id="d1962-103">Sequencer Source Events</span></span>

<span data-ttu-id="d1962-104">Когда [источник Sequencer](sequencer-source.md) воспроизводит последовательность файлов, сеанс мультимедиа обычно отправляет все те же события, которые отправляются во время обычного воспроизведения, а список [событий сеанса мультимедиа](media-session-events.md).</span><span class="sxs-lookup"><span data-stu-id="d1962-104">When the [Sequencer Source](sequencer-source.md) plays a sequence of files, the Media Session generally sends all of the same events that are sent during normal playback, and which are listed in [Media Session Events](media-session-events.md).</span></span> <span data-ttu-id="d1962-105">Приложение получает эти события с помощью интерфейса [**Имфмедиаевентженератор**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator) сеанса мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="d1962-105">The application gets these events using the Media Session's [**IMFMediaEventGenerator**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator) interface.</span></span>

<span data-ttu-id="d1962-106">Кроме того, существуют некоторые события, относящиеся к сегментам списка воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="d1962-106">In addition, there are some events which are specific to playlist segments.</span></span>



| <span data-ttu-id="d1962-107">Событие</span><span class="sxs-lookup"><span data-stu-id="d1962-107">Event</span></span>                                                                                                   | <span data-ttu-id="d1962-108">Описание</span><span class="sxs-lookup"><span data-stu-id="d1962-108">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|---------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="d1962-109">меневпресентатион</span><span class="sxs-lookup"><span data-stu-id="d1962-109">MENewPresentation</span></span>](menewpresentation.md)                                                              | <span data-ttu-id="d1962-110">Сообщает приложению о необходимости выполнить предследующую топологию.</span><span class="sxs-lookup"><span data-stu-id="d1962-110">Signals the application to preroll the next topology.</span></span><br/> <span data-ttu-id="d1962-111">Чтобы обеспечить простой переход между двумя последовательными презентациями, источник Sequencer заранее загружает следующую топологию.</span><span class="sxs-lookup"><span data-stu-id="d1962-111">To provide a seamless transition between two consecutive presentations, the sequencer source loads the next topology in advance.</span></span> <span data-ttu-id="d1962-112">Пока активная топология все еще воспроизводится, источник Sequencer отправляет это событие для следующей топологии, если в источнике имеется последующая топология.</span><span class="sxs-lookup"><span data-stu-id="d1962-112">While the active topology is still playing, the sequencer source sends this event for the next topology, as long as there is a subsequent topology available in the source.</span></span><br/> <span data-ttu-id="d1962-113">Данные этого события для этого события являются дескриптором представления для следующей топологии.</span><span class="sxs-lookup"><span data-stu-id="d1962-113">This event data for this event is the presentation descriptor for the next topology.</span></span> <span data-ttu-id="d1962-114">Приложение отвечает за установку соответствующей топологии в сеансе мультимедиа, как описано в разделе [Использование источника Sequencer](using-the-sequencer-source.md).</span><span class="sxs-lookup"><span data-stu-id="d1962-114">The application is responsible for setting the corresponding topology on the Media Session, as described in [Using the Sequencer Source](using-the-sequencer-source.md).</span></span><br/> |
| [<span data-ttu-id="d1962-115">миндофпресентатионсегмент</span><span class="sxs-lookup"><span data-stu-id="d1962-115">MEEndOfPresentationSegment</span></span>](meendofpresentationsegment.md)                                            | <span data-ttu-id="d1962-116">Источник Sequencer вызывает это событие, когда сеанс мультимедиа завершил воспроизведение текущего сегмента, если за этим сегментом следует другой сегмент.</span><span class="sxs-lookup"><span data-stu-id="d1962-116">The sequencer source raises this event when the Media Session has completed playing the current segment, if that segment is followed by another segment.</span></span> <span data-ttu-id="d1962-117">(Если текущий сегмент является последним, источник Sequencer создает событие [миндофпресентатион](meendofpresentation.md) .)</span><span class="sxs-lookup"><span data-stu-id="d1962-117">(If the current segment is the last one, the sequencer source raises the [MEEndOfPresentation](meendofpresentation.md) event instead.)</span></span><br/> <span data-ttu-id="d1962-118">Сеанс мультимедиа перенаправляет это событие в приложение.</span><span class="sxs-lookup"><span data-stu-id="d1962-118">The Media Session forwards this event to the application.</span></span> <span data-ttu-id="d1962-119">Как правило, приложение получает [миндофпресентатионсегмент](meendofpresentationsegment.md) после того, как сеанс мультимедиа начнет обработку следующего сегмента, но в то время как приемники мультимедиа по-прежнему предоставляют образцы для предыдущего сегмента.</span><span class="sxs-lookup"><span data-stu-id="d1962-119">Typically, the application receives [MEEndOfPresentationSegment](meendofpresentationsegment.md) after the Media Session has started processing the next segment, but while the media sinks are still delivering the samples for the previous segment.</span></span><br/>                            |
| <span data-ttu-id="d1962-120">[Месессионтопологистатус](mesessiontopologystatus.md)с состоянием **MF \_ топостатус \_ SINK \_**.</span><span class="sxs-lookup"><span data-stu-id="d1962-120">[MESessionTopologyStatus](mesessiontopologystatus.md), with status **MF\_TOPOSTATUS\_SINK\_SWITCHED**.</span></span> | <span data-ttu-id="d1962-121">Сеанс мультимедиа вызывает это событие при переходе к следующей топологии в источнике Sequencer, и приемники носителей завершили Воспроизведение предыдущей топологии.</span><span class="sxs-lookup"><span data-stu-id="d1962-121">The Media Session raises this event when it makes a transition to the next topology in the sequencer source and media sinks have completed playing the previous topology.</span></span> <span data-ttu-id="d1962-122">Это событие содержит указатель на следующую топологию.</span><span class="sxs-lookup"><span data-stu-id="d1962-122">This event contains a pointer to the next topology.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                      |



 

## <a name="example-1-playback-without-skipping"></a><span data-ttu-id="d1962-123">Пример 1. воспроизведение без пропуска</span><span class="sxs-lookup"><span data-stu-id="d1962-123">Example 1: Playback without Skipping</span></span>

<span data-ttu-id="d1962-124">Если используется источник Sequencer, то количество событий, получаемых из сеанса мультимедиа, может быть запутанным, особенно потому, что события, связанные с одним сегментом, часто чередуются с событиями для следующего сегмента.</span><span class="sxs-lookup"><span data-stu-id="d1962-124">When the sequencer source is involved, the number of events that you get from the Media Session can be confusing, especially because events associated with one segment are often interleaved with events for the next segment.</span></span>

<span data-ttu-id="d1962-125">В первом примере приложение помещает в очередь три сегмента: S1, S2 и S3.</span><span class="sxs-lookup"><span data-stu-id="d1962-125">In the first example, the application queues three segments, S1, S2, and S3.</span></span> <span data-ttu-id="d1962-126">Третий сегмент имеет флаг **секуенцертопологифлагс \_ Last** , который сигнализирует, что это последний сегмент последовательности.</span><span class="sxs-lookup"><span data-stu-id="d1962-126">The third segment has the **SequencerTopologyFlags\_Last** flag, to signal it is the last segment in the sequence.</span></span> <span data-ttu-id="d1962-127">Сегмент, которому соответствует каждое событие, задается в круглых скобках.</span><span class="sxs-lookup"><span data-stu-id="d1962-127">The segment to which each event corresponds is given in parentheses.</span></span> <span data-ttu-id="d1962-128">Также перечислены вызовы [**сеттопологи**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) приложения, чтобы сделать порядок операций более четким.</span><span class="sxs-lookup"><span data-stu-id="d1962-128">The application's [**SetTopology**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) calls are also listed, to make the order of operations clearer.</span></span>

-   <span data-ttu-id="d1962-129">Приложение вызывает [**имфмедиасессион:: сеттопологи**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) (S1)</span><span class="sxs-lookup"><span data-stu-id="d1962-129">Application calls [**IMFMediaSession::SetTopology**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) (S1)</span></span>
-   <span data-ttu-id="d1962-130">[Месессионтопологисет](mesessiontopologyset.md) (S1)</span><span class="sxs-lookup"><span data-stu-id="d1962-130">[MESessionTopologySet](mesessiontopologyset.md) (S1)</span></span>
-   <span data-ttu-id="d1962-131">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ Ready** (S1)</span><span class="sxs-lookup"><span data-stu-id="d1962-131">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_READY** (S1)</span></span>
-   <span data-ttu-id="d1962-132">[Меневпресентатион](menewpresentation.md) (предвыпуск S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-132">[MENewPresentation](menewpresentation.md) (S2 preroll)</span></span>
-   <span data-ttu-id="d1962-133">Приложение вызывает [**имфмедиасессион:: сеттопологи**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) (S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-133">Application calls [**IMFMediaSession::SetTopology**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) (S2)</span></span>
-   <span data-ttu-id="d1962-134">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ Started \_ Source** (начало S1)</span><span class="sxs-lookup"><span data-stu-id="d1962-134">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_STARTED\_SOURCE** (start of S1)</span></span>
-   <span data-ttu-id="d1962-135">[Месессионтопологисет](mesessiontopologyset.md) (S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-135">[MESessionTopologySet](mesessiontopologyset.md) (S2)</span></span>
-   <span data-ttu-id="d1962-136">[Миндофпресентатионсегмент](meendofpresentationsegment.md) (конец S1)</span><span class="sxs-lookup"><span data-stu-id="d1962-136">[MEEndOfPresentationSegment](meendofpresentationsegment.md) (end of S1)</span></span>
-   <span data-ttu-id="d1962-137">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ завершен** (S1)</span><span class="sxs-lookup"><span data-stu-id="d1962-137">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_ENDED** (S1)</span></span>
-   <span data-ttu-id="d1962-138">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ SINK \_ переключилось** (переход на S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-138">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_SINK\_SWITCHED** (transition to S2)</span></span>
-   <span data-ttu-id="d1962-139">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ Ready** (S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-139">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_READY** (S2)</span></span>
-   <span data-ttu-id="d1962-140">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ Started \_ Source** (начало S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-140">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_STARTED\_SOURCE** (start of S2)</span></span>
-   <span data-ttu-id="d1962-141">[Меневпресентатион](menewpresentation.md) (предвыпуск S3)</span><span class="sxs-lookup"><span data-stu-id="d1962-141">[MENewPresentation](menewpresentation.md) (S3 preroll)</span></span>
-   <span data-ttu-id="d1962-142">Приложение вызывает [**имфмедиасессион:: сеттопологи**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) (S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-142">Application calls [**IMFMediaSession::SetTopology**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) (S2)</span></span>
-   <span data-ttu-id="d1962-143">[Месессионтопологисет](mesessiontopologyset.md) (S3)</span><span class="sxs-lookup"><span data-stu-id="d1962-143">[MESessionTopologySet](mesessiontopologyset.md) (S3)</span></span>
-   <span data-ttu-id="d1962-144">[Миндофпресентатионсегмент](meendofpresentationsegment.md) (окончание S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-144">[MEEndOfPresentationSegment](meendofpresentationsegment.md) (end of S2)</span></span>
-   <span data-ttu-id="d1962-145">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ завершен** (S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-145">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_ENDED** (S2)</span></span>
-   <span data-ttu-id="d1962-146">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ SINK \_ переключилось** (переход на S3)</span><span class="sxs-lookup"><span data-stu-id="d1962-146">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_SINK\_SWITCHED** (transition to S3)</span></span>
-   <span data-ttu-id="d1962-147">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ Ready** (S3)</span><span class="sxs-lookup"><span data-stu-id="d1962-147">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_READY** (S3)</span></span>
-   <span data-ttu-id="d1962-148">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ Started \_ Source** (начало S3)</span><span class="sxs-lookup"><span data-stu-id="d1962-148">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_STARTED\_SOURCE** (start of S3)</span></span>
-   <span data-ttu-id="d1962-149">[Миндофпресентатион](meendofpresentation.md) (окончание S3; последний сегмент)</span><span class="sxs-lookup"><span data-stu-id="d1962-149">[MEEndOfPresentation](meendofpresentation.md) (end of S3; last segment)</span></span>
-   <span data-ttu-id="d1962-150">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ завершен**</span><span class="sxs-lookup"><span data-stu-id="d1962-150">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_ENDED**</span></span>
-   [<span data-ttu-id="d1962-151">месессионендед</span><span class="sxs-lookup"><span data-stu-id="d1962-151">MESessionEnded</span></span>](mesessionended.md)

<span data-ttu-id="d1962-152">В этот список не входят все события, которые могут быть получены.</span><span class="sxs-lookup"><span data-stu-id="d1962-152">This list does not include every event that you might receive.</span></span> <span data-ttu-id="d1962-153">(Например, в нем пропущено событие [месессионкапабилитиесчанжед](mesessioncapabilitieschanged.md) , которое отправляется при изменении возможностей сеанса.</span><span class="sxs-lookup"><span data-stu-id="d1962-153">(For example, it omits the [MESessionCapabilitiesChanged](mesessioncapabilitieschanged.md) event, which is sent whenever the session capabilities change.</span></span> <span data-ttu-id="d1962-154">Приложение обычно получает несколько событий Месессионкапабилитиесчанжед во всей презентации.) Ниже перечислены события, которые показывают переход от одного сегмента к другому.</span><span class="sxs-lookup"><span data-stu-id="d1962-154">An application typically receives multiple MESessionCapabilitiesChanged events throughout a presentation.) The events listed here are the ones that show the transition from one segment to the next.</span></span> <span data-ttu-id="d1962-155">Наиболее важными событиями являются [меневпресентатион](menewpresentation.md), которые сообщают приложению о предопределенной следующей топологии, и [миндофпресентатионсегмент](meendofpresentationsegment.md), который сигнализирует об окончании сегмента (за исключением последнего сегмента).</span><span class="sxs-lookup"><span data-stu-id="d1962-155">The most important events are [MENewPresentation](menewpresentation.md), which signals the application to preroll the next topology, and [MEEndOfPresentationSegment](meendofpresentationsegment.md), which signals the end of a segment (except for the last segment).</span></span>

<span data-ttu-id="d1962-156">Так как события в Media Foundation являются асинхронными и не сериализуются с помощью вызовов методов, точный порядок может отличаться.</span><span class="sxs-lookup"><span data-stu-id="d1962-156">Because events in Media Foundation are asynchronous, and are not serialized with method calls, the exact order could vary.</span></span> <span data-ttu-id="d1962-157">Например, можно получить **MF \_ топостатус \_ Started \_ Source** для S1, прежде чем приложение вызовет [**сеттопологи**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) для S2.</span><span class="sxs-lookup"><span data-stu-id="d1962-157">For example, you could receive **MF\_TOPOSTATUS\_STARTED\_SOURCE** for S1 before the application calls [**SetTopology**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) for S2.</span></span>

<span data-ttu-id="d1962-158">Кроме того, вы можете не получить каждое событие, указанное здесь.</span><span class="sxs-lookup"><span data-stu-id="d1962-158">Also, you might not get every event listed here.</span></span> <span data-ttu-id="d1962-159">Например, события [миндофпресентатион](meendofpresentation.md) и [месессионендед](mesessionended.md) не отправляются, если только последний сегмент не имеет **\_ последнего** флага секуенцертопологифлагс.</span><span class="sxs-lookup"><span data-stu-id="d1962-159">The [MEEndOfPresentation](meendofpresentation.md) and [MESessionEnded](mesessionended.md) events, for example, are not sent unless the last segment has the **SequencerTopologyFlags\_Last** flag.</span></span>

<span data-ttu-id="d1962-160">Наконец, этот список не указывает на время.</span><span class="sxs-lookup"><span data-stu-id="d1962-160">Finally, this list does not indicate the passage of time.</span></span> <span data-ttu-id="d1962-161">Время "с начала S1" до "конец S1" — это полная продолжительность S1, которая может составлять несколько секунд или несколько часов, в зависимости от источника.</span><span class="sxs-lookup"><span data-stu-id="d1962-161">The time from "start of S1" to "end of S1" is the entire duration of S1, which could be a few seconds or many hours, depending on the source.</span></span>

## <a name="example-2-playback-with-segment-skipping"></a><span data-ttu-id="d1962-162">Пример 2. Воспроизведение с помощью пропущенного сегмента</span><span class="sxs-lookup"><span data-stu-id="d1962-162">Example 2: Playback with Segment Skipping</span></span>

<span data-ttu-id="d1962-163">В этом примере приложение помещает в очередь одни и те же сегменты, но переходит к сегменту 3 во время воспроизведения сегмента 1.</span><span class="sxs-lookup"><span data-stu-id="d1962-163">In this example, the application queues the same segments, but skips to segment 3 while segment 1 is playing.</span></span> <span data-ttu-id="d1962-164">В этом случае отправляются следующие события:</span><span class="sxs-lookup"><span data-stu-id="d1962-164">In this case, the following events are sent:</span></span>

-   <span data-ttu-id="d1962-165">Приложение вызывает [**имфмедиасессион:: сеттопологи**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) (S1)</span><span class="sxs-lookup"><span data-stu-id="d1962-165">Application calls [**IMFMediaSession::SetTopology**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) (S1)</span></span>
-   <span data-ttu-id="d1962-166">[Месессионтопологисет](mesessiontopologyset.md) (S1)</span><span class="sxs-lookup"><span data-stu-id="d1962-166">[MESessionTopologySet](mesessiontopologyset.md) (S1)</span></span>
-   <span data-ttu-id="d1962-167">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ Ready** (S1)</span><span class="sxs-lookup"><span data-stu-id="d1962-167">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_READY** (S1)</span></span>
-   <span data-ttu-id="d1962-168">[Меневпресентатион](menewpresentation.md) (предвыпуск S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-168">[MENewPresentation](menewpresentation.md) (S2 preroll)</span></span>
-   <span data-ttu-id="d1962-169">Приложение вызывает [**имфмедиасессион:: сеттопологи**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) (S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-169">Application calls [**IMFMediaSession::SetTopology**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) (S2)</span></span>
-   <span data-ttu-id="d1962-170">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ Started \_ Source** (начало S1)</span><span class="sxs-lookup"><span data-stu-id="d1962-170">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_STARTED\_SOURCE** (start of S1)</span></span>
-   <span data-ttu-id="d1962-171">[Месессионтопологисет](mesessiontopologyset.md) (S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-171">[MESessionTopologySet](mesessiontopologyset.md) (S2)</span></span>
-   <span data-ttu-id="d1962-172">Приложение вызывает [**имфмедиасессион:: Start**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-start) (переход к S3)</span><span class="sxs-lookup"><span data-stu-id="d1962-172">Application calls [**IMFMediaSession::Start**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-start) (skip to S3)</span></span>
-   <span data-ttu-id="d1962-173">[Меневпресентатион](menewpresentation.md) (предвыпуск S3)</span><span class="sxs-lookup"><span data-stu-id="d1962-173">[MENewPresentation](menewpresentation.md) (S3 preroll)</span></span>
-   <span data-ttu-id="d1962-174">Приложение вызывает [**имфмедиасессион:: сеттопологи**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) (S3)</span><span class="sxs-lookup"><span data-stu-id="d1962-174">Application calls [**IMFMediaSession::SetTopology**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-settopology) (S3)</span></span>
-   [<span data-ttu-id="d1962-175">месессионстартед</span><span class="sxs-lookup"><span data-stu-id="d1962-175">MESessionStarted</span></span>](mesessionstarted.md)
-   <span data-ttu-id="d1962-176">[Миндофпресентатионсегмент](meendofpresentationsegment.md) (S1 отменено)</span><span class="sxs-lookup"><span data-stu-id="d1962-176">[MEEndOfPresentationSegment](meendofpresentationsegment.md) (S1 canceled)</span></span>
-   <span data-ttu-id="d1962-177">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ завершен** (S1)</span><span class="sxs-lookup"><span data-stu-id="d1962-177">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_ENDED** (S1)</span></span>
-   <span data-ttu-id="d1962-178">[Месессионтопологисет](mesessiontopologyset.md) (S3)</span><span class="sxs-lookup"><span data-stu-id="d1962-178">[MESessionTopologySet](mesessiontopologyset.md) (S3)</span></span>
-   <span data-ttu-id="d1962-179">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ SINK \_ переключилось** (переход на S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-179">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_SINK\_SWITCHED** (transition to S2)</span></span>
-   <span data-ttu-id="d1962-180">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ Ready** (S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-180">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_READY** (S2)</span></span>
-   <span data-ttu-id="d1962-181">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ Started \_ Source** (S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-181">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_STARTED\_SOURCE** (S2)</span></span>
-   <span data-ttu-id="d1962-182">[Миндофпресентатионсегмент](meendofpresentationsegment.md) (S2 отменен)</span><span class="sxs-lookup"><span data-stu-id="d1962-182">[MEEndOfPresentationSegment](meendofpresentationsegment.md) (S2 canceled)</span></span>
-   <span data-ttu-id="d1962-183">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ завершен** (S2)</span><span class="sxs-lookup"><span data-stu-id="d1962-183">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_ENDED** (S2)</span></span>
-   <span data-ttu-id="d1962-184">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ SINK \_ переключилось** (переход на S3)</span><span class="sxs-lookup"><span data-stu-id="d1962-184">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_SINK\_SWITCHED** (transition to S3)</span></span>
-   <span data-ttu-id="d1962-185">[Месессионтопологистатус](mesessiontopologystatus.md): **топостатус \_ Ready** (S3)</span><span class="sxs-lookup"><span data-stu-id="d1962-185">[MESessionTopologyStatus](mesessiontopologystatus.md): **TOPOSTATUS\_READY** (S3)</span></span>
-   <span data-ttu-id="d1962-186">[Месессионтопологистатус](mesessiontopologystatus.md): **MF \_ топостатус \_ Started \_ Source** (S3)</span><span class="sxs-lookup"><span data-stu-id="d1962-186">[MESessionTopologyStatus](mesessiontopologystatus.md): **MF\_TOPOSTATUS\_STARTED\_SOURCE** (S3)</span></span>

<span data-ttu-id="d1962-187">Когда приложение вызывает [**Запуск**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-start) для перехода к сегменту 3, источник Sequencer отменяет сегмент 1, который по-прежнему воспроизводится.</span><span class="sxs-lookup"><span data-stu-id="d1962-187">When the application calls [**Start**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasession-start) to skip to segment 3, the sequencer source cancels segment 1, which is still playing.</span></span> <span data-ttu-id="d1962-188">Событие [миндофпресентатионсегмент](meendofpresentationsegment.md) для этого сегмента содержит атрибут " [**% \_ событий \_ \_ топологии источника \_ события MF**](mf-event-source-topology-canceled-attribute.md) ", указывающий, что сегмент завершился, так как он был отменен.</span><span class="sxs-lookup"><span data-stu-id="d1962-188">The [MEEndOfPresentationSegment](meendofpresentationsegment.md) event for this segment contains the [**MF\_EVENT\_SOURCE\_TOPOLOGY\_CANCELED**](mf-event-source-topology-canceled-attribute.md) attribute, indicating that the segment ended because it was canceled.</span></span> <span data-ttu-id="d1962-189">Затем, поскольку сегмент 2 уже предварительно выполнил откат, этот сегмент запускается, но затем немедленно отменяется.</span><span class="sxs-lookup"><span data-stu-id="d1962-189">Then, because segment 2 is already pre-rolled, that segment is started but then immediately canceled.</span></span> <span data-ttu-id="d1962-190">Событие Миндофпресентатионсегмент для сегмента 2 также содержит атрибут "% событий", **\_ \_ \_ \_ отмененный топологией источника события MF** .</span><span class="sxs-lookup"><span data-stu-id="d1962-190">The MEEndOfPresentationSegment event for segment 2 also contains the **MF\_EVENT\_SOURCE\_TOPOLOGY\_CANCELED** attribute.</span></span> <span data-ttu-id="d1962-191">Затем сеанс может переключиться на сегмент 3 и воспроизводить его в обычном режиме.</span><span class="sxs-lookup"><span data-stu-id="d1962-191">The session can then switch to segment 3 and play it normally.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d1962-192">См. также</span><span class="sxs-lookup"><span data-stu-id="d1962-192">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d1962-193">Сведения о источнике Sequencer</span><span class="sxs-lookup"><span data-stu-id="d1962-193">About the Sequencer Source</span></span>](about-the-sequencer-source.md)
</dt> <dt>

[<span data-ttu-id="d1962-194">Источник Sequencer</span><span class="sxs-lookup"><span data-stu-id="d1962-194">Sequencer Source</span></span>](sequencer-source.md)
</dt> </dl>

 

 




