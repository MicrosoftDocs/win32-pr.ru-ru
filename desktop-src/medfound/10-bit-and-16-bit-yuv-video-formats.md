---
description: В этом разделе описываются 10-и 16-разрядные форматы YUV, Рекомендуемые для записи, обработки и отображения видео в операционной системе Microsoft Windows.
ms.assetid: fcaaaa6f-f886-4f6e-9c3c-e513ccc90d37
title: 10-битные и 16-битные видеоформаты YUV
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6bbc357653848cd51ce6f56ebd8a1da3e5f60403
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104145616"
---
# <a name="10-bit-and-16-bit-yuv-video-formats"></a>10-битные и 16-битные видеоформаты YUV

В этом разделе описываются 10-и 16-разрядные форматы YUV, Рекомендуемые для записи, обработки и отображения видео в операционной системе Microsoft Windows.

В этом разделе содержатся следующие подразделы.

-   [Обзор](#overview)
-   [Коды FOURCC для 10-и 16-разрядных YUV](#fourcc-codes-for-10-bit-and-16-bit-yuv)
-   [Определения Surface](#surface-definitions)
    -   [форматы 4:2:0](#420-formats)
    -   [форматы 4:2:2](#422-formats)
    -   [форматы 4:4:4](#444-formats)
-   [Предпочтительные форматы YUV](#preferred-yuv-formats)
-   [См. также](#related-topics)

## <a name="overview"></a>Обзор

В этих форматах используется представление с фиксированной запятой как для канала яркости, так и для каналов чрома (К'б и К'р). Примерами значений являются масштабируемые 8-разрядные значения с коэффициентом масштабирования 2 ^ (n − 8), где n — 10 или 16, в соответствии с разделами 7.7-7,8 и 7.11-7.12 SMPTE 274M. Преобразование точности можно выполнить с помощью простых сдвигов битов. Например, если белая точка 8-разрядного формата — 235, соответствующий 10-разрядный формат имеет белую точку в 940 (235 × 4).

В 16-разрядных представлениях, описанных здесь, используются значения **слов** с прямым порядком байтов для каждого канала. 10-битные форматы также используют 16 бит для каждого канала, при этом младшие 6 бит устанавливаются в ноль, как показано на следующей схеме.

![Схема, показывающая 10-разрядное представление](images/ee3aae23-4f0a-47d0-a46c-f3d7d94205e6.gif)

Поскольку 10-разрядные и 16-разрядные представления одного и того же формата YUV имеют одинаковый макет памяти, можно привести к преобразованию 10-разрядного представления в 16-представление без потери точности. Можно также привести 16-разрядное представление к 10-разрядному представлению. (Форматы Y416 и Y410 являются исключением из этого общего правила, так как они не имеют общего макета памяти.)

Когда графическое оборудование считывает поверхность, содержащую 10-битное представление, она должна игнорировать 6 младших битов каждого канала. Однако если поверхность содержит допустимые 16-разрядные данные, ее необходимо определить как 16-разрядную поверхность.

В форматах, содержащих альфа-канал, полностью прозрачная точка имеет альфа-значение 0, а полностью непрозрачный пиксель имеет значение альфа (2 ^ n) – 1, где n — число альфа-битов. Предполагается, что альфа-канал является линейным значением, которое применяется к каждому компоненту после того, как компонент был преобразован в нормализованную линейную форму.

Для изображений в видеопамяти драйвер графики выбирает выравнивание памяти для поверхности. Поверхность должна быть совмещена с **параметром DWORD** . Это значит, что отдельные строки внутри поверхности гарантированно начинаются с 32-разрядной границы, хотя выравнивание может быть больше 32 бит. Источник (0, 0) всегда находится в левом верхнем углу поверхности.

В рамках этой документации термин *U* эквивалентен *CB*, а термин *V* эквивалентен *CR*.

## <a name="fourcc-codes-for-10-bit-and-16-bit-yuv"></a>Коды FOURCC для 10-и 16-разрядных YUV

Коды FOURCC для форматов, описанных здесь, используют следующее соглашение:

-   Если используется формат "плоский", первым символом в коде FOURCC будет "P". Если формат упакован, первый символ — Y.
-   Второй символ в коде FOURCC определяется выборкой чрома, как показано в следующей таблице.

    

    | Выборка чрома | Буква кода FOURCC |
    |-----------------|--------------------|
    | 4:4:4           | четырех                |
    | 4:2:2           | открыт                |
    | 4:2:1           | 1                |
    | 4:2:0           | "0"                |

    

     

-   Последние два символа в FOURCC указывают количество бит на канал, либо "16" для 16 бит, либо "10" для 10 бит.

При использовании этой схемы были определены следующие коды FOURCC. В настоящее время не определены форматы 4:2:1 для 10-разрядных или 16-разрядных YUV.



| FOURCC | Описание            |
|--------|------------------------|
| P016   | Плоская, 4:2:0, 16-разрядная. |
| P010   | Плоская, 4:2:0, 10-разрядная. |
| P216   | Плоская, 4:2:2, 16-разрядная. |
| P210   | Плоская, 4:2:2, 10-разрядная. |
| Y216   | Упакованный, 4:2:2, 16-разрядный. |
| Y210   | Упакованный, 4:2:2, 10-разрядный. |
| Y416   | Упакованный, 4:4:4, 16-разрядный  |
| Y410   | Упакованный, 4:4:4, 10-разрядный. |



 

Идентификаторы GUID подтипа также определены из этих Фаурккс; см. раздел [GUID подтипа видео](video-subtype-guids.md).

## <a name="surface-definitions"></a>Определения Surface

В этом разделе описывается структура памяти для каждого формата. В приведенных ниже описаниях термин **слово** ссылается на 16-битное значение с прямым порядком байтов, а термин **DWORD** — на 32-разрядное значение с прямым порядком байтов.

### <a name="420-formats"></a>форматы 4:2:0

Определены два формата 4:2:0 с кодами FOURCC P016 и P010. Они используют один и тот же макет памяти, но P016 использует 16 бит на канал, а P010 использует 10 бит на канал.

### <a name="p016-and-p010"></a>P016 и P010

В этих двух форматах все примеры Y отображаются первыми в памяти как массив **слов** s с четным числом строк. Шаг поверхности может быть больше, чем ширина плоскости Y. За этим массивом следует сразу массив **слов** s, содержащий чередующиеся примеры и V, как показано на следующей схеме.

![Схема, демонстрирующая макет p016 и P010 пикселей](images/1e1c4d66-6172-4d3a-bd25-4b5caa67edcd.gif)

Если комбинированный массив U-V адресован как массив **DWORD**, наименее важное слово (ЛСВ) содержит значение U, а наиболее значимое слово (МСВ) содержит значение V. Шаг комбинированной плоскости U-V равен значению шага плоскости Y. Плоскость U-V имеет половину столько линий, сколько в плоскости Y.

Эти два формата являются предпочтительными 4:2:0 форматами плоских пикселей для представлений YUV с более высокой точностью. Они должны быть промежуточным требованием для ускорителей DirectX Video Acceleration (ДКСВА), поддерживающих 10-разрядное или 16-разрядное видео 4:2:0.

### <a name="422-formats"></a>форматы 4:2:2

Определены четыре формата 4:2:2, два плоских и двух упакованных. У них есть следующие коды FOURCC:

-   P216
-   P210
-   Y216
-   Y210

### <a name="p216-and-p210"></a>P216 и P210

В этих двух плоских форматах все примеры Y отображаются первыми в памяти как массив **слов** s с четным числом строк. Шаг поверхности может быть больше, чем ширина плоскости Y. За этим массивом следует сразу массив **слов** s, содержащий чередующиеся примеры и V, как показано на следующей схеме.

![Схема, демонстрирующая макет p216 и P210 пикселей](images/ff672fef-218f-4722-b806-d06c77fe8cfa.gif)

Если объединенный массив U-V адресован как массив **DWORD**, ЛСВ содержит значение U, а МСВ содержит значение V. Шаг комбинированной плоскости U-V равен значению шага плоскости Y. Плоскость U-V имеет то же количество линий, что и плоскость Y.

Эти два формата являются предпочтительными 4:2:2 форматами плоских пикселей для представлений YUV с более высокой точностью. Они должны быть промежуточным требованием для ускорителей DirectX Video Acceleration (ДКСВА), поддерживающих 10-разрядное или 16-разрядное видео 4:2:2.

### <a name="y216-and-y210"></a>Y216 и Y210

В этих двух упакованных форматах каждая пара пикселей хранится в виде массива из четырех **слов** s, как показано на следующем рисунке.

![Схема, показывающая макет пикселей y216 и Y210.](images/6f68aeeb-18ca-48ee-82c4-5b79d5510e9f.gif)

Первое **слово** в массиве содержит первый пример y в паре, второе **слово** содержит пример U, третье **слово** содержит второй пример y, а четвертое **слово** содержит образец V.

Y210 идентичен Y216, за исключением того, что каждый пример содержит только 10 бит значимых данных. Минимальное количество значащих 6 бит равно нулю, как описано выше.

### <a name="444-formats"></a>форматы 4:4:4

Определены два формата 4:4:4 с кодами FOURCC Y410 и Y416. Оба являются упакованными форматами.

### <a name="y410"></a>Y410

Этот формат представляет собой упакованное 10-разрядное представление, включающее 2 бита альфа-канала. Каждый пиксель кодируется как одиночный **DWORD** с макетом памяти, показанным на следующей схеме.

![Диаграмма, демонстрирующая макет y410 пикселей.](images/f8a71437-e3f1-4331-be30-f766c028d648.gif)

Биты 0-9 содержат пример U, биты 10-19 содержат пример Y, биты 20-29 содержат пример V, а BITS 30-31 содержат альфа-значение. Чтобы указать, что пиксель полностью непрозрачен, приложение должно установить два альфа-бита равными 0x03.

### <a name="y416"></a>Y416

Этот формат представляет собой упакованное 16-разрядное представление, включающее 16 бит альфа-канала. Каждый пиксель кодируется в виде пары **DWORD** s, как показано на следующем рисунке.

![Диаграмма, демонстрирующая макет y416 пикселей.](images/c928523a-25d3-4712-9aec-5b492b51435f.gif)

Биты 0-15 содержат пример U, биты 16-31 содержат пример Y, биты 32-47 содержат пример V, а BITS 48-63 содержат альфа-значение.

Чтобы указать, что пиксель полностью непрозрачен, приложение должно установить два альфа-бита равными 0xFFFF. Этот формат предназначен главным образом в качестве промежуточного формата во время обработки образа во избежание накопления ошибок.

## <a name="preferred-yuv-formats"></a>Предпочтительные форматы YUV

В следующей таблице перечислены Предпочтительные форматы YUV, включая 8-разрядные форматы.



| Формат | Выборка чрома | Упакованная или плоская | Бит на канал |
|--------|-----------------|------------------|------------------|
| айув   | 4:4:4           | Распаковывается           | 8                |
| Y410   | 4:4:4           | Распаковывается           | 10               |
| Y416   | 4:4:4           | Распаковывается           | 16               |
| AI44   | 4:4:4           | Распаковывается           | палеттизед       |
| YUY2   | 4:2:2           | Распаковывается           | 8                |
| Y210   | 4:2:2           | Распаковывается           | 10               |
| Y216   | 4:2:2           | Распаковывается           | 16               |
| P210   | 4:2:2           | Планарные           | 10               |
| P216   | 4:2:2           | Планарные           | 16               |
| NV12   | 4:2:0           | Планарные           | 8                |
| P010   | 4:2:0           | Планарные           | 10               |
| P016   | 4:2:0           | Планарные           | 16               |
| NV11   | 4:1:1           | Планарные           | 8                |



 

Если объект поддерживает определенную глубину битов и чрома схему выборки, рекомендуется, чтобы он поддерживал соответствующие форматы YUV, перечисленные в этой таблице. (Объекты могут поддерживать дополнительные форматы, не указанные здесь.)

## <a name="related-topics"></a>См. также

<dl> <dt>

[Рекомендуемые 8-разрядные форматы YUV для отрисовки видео](recommended-8-bit-yuv-formats-for-video-rendering.md)
</dt> <dt>

[Идентификаторы GUID для подтипов видео](video-subtype-guids.md)
</dt> <dt>

[Типы видеоклипов](video-media-types.md)
</dt> </dl>

 

 



