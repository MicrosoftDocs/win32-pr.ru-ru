---
description: Расширенные сведения о цвете
ms.assetid: 05ca73c6-d105-47bc-96bc-b784f669febe
title: Расширенные сведения о цвете
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 29ba43180a0f1e5253540088c1638f59d52380c9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103808081"
---
# <a name="extended-color-information"></a><span data-ttu-id="7a2fa-103">Расширенные сведения о цвете</span><span class="sxs-lookup"><span data-stu-id="7a2fa-103">Extended Color Information</span></span>

<span data-ttu-id="7a2fa-104">Если вы ничего не знакомы с цветом RGB, то вам известно, что (255, 255, 255) — это 8-битное Triplet RGB для *белого* цвета.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-104">If you know anything about RGB color, you know that (255, 255, 255) is the 8-bit RGB triplet for the color *white*.</span></span> <span data-ttu-id="7a2fa-105">Но каков фактический *Цвет* , определяемый этим Triplet?</span><span class="sxs-lookup"><span data-stu-id="7a2fa-105">But what is the actual *color* defined by this triplet?</span></span>

<span data-ttu-id="7a2fa-106">Ответ может быть удивительно: без какой бы то ни было дополнительной информации, Triplet не определяет какой – то какой цвет.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-106">The answer may be surprising: Without some additional information, this triplet does not define any particular color!</span></span> <span data-ttu-id="7a2fa-107">Значение любого значения RGB зависит от *цветового пространства*.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-107">The meaning of any RGB value depends on the *color space*.</span></span> <span data-ttu-id="7a2fa-108">Если цветовое пространство неизвестно, то строго говоря, этот цвет не известен.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-108">If we don't know the color space, then strictly speaking we don't know the color.</span></span>

<span data-ttu-id="7a2fa-109">Цветовое пространство определяет, как числовое представление данного значения цвета должно быть воспроизведено как физическое освещение.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-109">A color space defines how the numeric representation of a given color value should be reproduced as physical light.</span></span> <span data-ttu-id="7a2fa-110">Если видео кодируется в одном цветовом пространстве, но отображается в другом, это приводит к искаженным цветам, если видео не будет исправлено цветом.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-110">When video is encoded in one color space but is displayed in another, it results in distorted colors, unless the video is color-corrected.</span></span> <span data-ttu-id="7a2fa-111">Чтобы обеспечить точную точность цвета, важно понять цветовое пространство исходного видео.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-111">To achieve accurate color fidelity, therefore, it is crucial to know the color space of the source video.</span></span> <span data-ttu-id="7a2fa-112">Ранее конвейер видео в Windows не содержал сведений о предполагаемом цветовом пространстве.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-112">Previously, the video pipeline in Windows did not carry information about the intended color space.</span></span> <span data-ttu-id="7a2fa-113">Начиная с Windows Vista, DirectShow и Media Foundation поддерживают расширенные сведения о цвете в типе мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-113">Starting in Windows Vista, both DirectShow and Media Foundation support extended color information in the media type.</span></span> <span data-ttu-id="7a2fa-114">Эти сведения также доступны для ускорения DirectX Video (ДКСВА).</span><span class="sxs-lookup"><span data-stu-id="7a2fa-114">This information is also available for DirectX Video Acceleration (DXVA).</span></span>

<span data-ttu-id="7a2fa-115">Стандартным способом описания цветового пространства является использование пространства цвета ЦИЕ XYZ, определенного Международной комиссией по освещения (ЦИЕ).</span><span class="sxs-lookup"><span data-stu-id="7a2fa-115">The standard way to describe a color space mathematically is to use the CIE XYZ color space, defined by the International Commission on Illumination (CIE).</span></span> <span data-ttu-id="7a2fa-116">Нецелесообразно использовать значения ЦИЕ XYZ непосредственно в видео, но при преобразовании между цветовыми пространствами можно использовать цветовое пространство ЦИЕ XYZ в качестве промежуточного представления.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-116">It is not practical to use CIE XYZ values directly in video, but the CIE XYZ color space can be used as an intermediate representation when converting between color spaces.</span></span>

<span data-ttu-id="7a2fa-117">Чтобы правильно воспроизвести цвета, необходимы следующие сведения:</span><span class="sxs-lookup"><span data-stu-id="7a2fa-117">To reproduce colors accurately, the following information is needed:</span></span>

-   <span data-ttu-id="7a2fa-118">Первичные цвета.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-118">Color primaries.</span></span> <span data-ttu-id="7a2fa-119">Первичные цвета определяют, как значения ЦИЕ XYZ тристимулус представлены как компоненты RGB.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-119">The color primaries define how CIE XYZ tristimulus values are represented as RGB components.</span></span> <span data-ttu-id="7a2fa-120">Фактически цветовые первичные цвета определяют «значение» заданного значения RGB.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-120">In effect, the color primaries define the "meaning" of a given RGB value.</span></span>
-   <span data-ttu-id="7a2fa-121">Функция перемещения.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-121">Transfer function.</span></span> <span data-ttu-id="7a2fa-122">Функция перемещения — это функция, которая преобразует линейные значения RGB в значения нелинейной Р'Г'Би.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-122">The transfer function is a function that converts linear RGB values to non-linear R'G'B' values.</span></span> <span data-ttu-id="7a2fa-123">Эта функция также называется *гамма-коррекцией*.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-123">This function is also called *gamma correction*.</span></span>
-   <span data-ttu-id="7a2fa-124">Матрица перемещения.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-124">Transfer matrix.</span></span> <span data-ttu-id="7a2fa-125">Матрица перемещения определяет, как Р'Г'Б "преобразуется в И'пбпр.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-125">The transfer matrix defines how R'G'B' is converted to Y'PbPr.</span></span>
-   <span data-ttu-id="7a2fa-126">Выборка чрома.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-126">Chroma sampling.</span></span> <span data-ttu-id="7a2fa-127">Большинство видеороликов YUV передается с меньшим разрешением в компонентах чрома, чем яркости.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-127">Most YUV video is transmitted with less resolution in the chroma components than the luma.</span></span> <span data-ttu-id="7a2fa-128">Выборка чрома обозначается объектом FOURCC формата видео.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-128">Chroma sampling is indicated by the FOURCC of the video format.</span></span> <span data-ttu-id="7a2fa-129">Например, YUY2 имеет формат 4:2:2, что означает, что выборки чрома вычисляются горизонтально с коэффициентом 2.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-129">For example, YUY2 is a 4:2:2 format, meaning the chroma samples are sampled horizontally by a factor of 2.</span></span>
-   <span data-ttu-id="7a2fa-130">Чрома заблокировано.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-130">Chroma siting.</span></span> <span data-ttu-id="7a2fa-131">После выборки чрома расположение примеров чрома, относящихся к примерам яркости, определяет способ интерполяции отсутствующих примеров.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-131">When the chroma is sampled, the position of the chroma samples relative to the luma samples determines how the missing samples should be interpolated.</span></span>
-   <span data-ttu-id="7a2fa-132">Номинальный диапазон.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-132">Nominal range.</span></span> <span data-ttu-id="7a2fa-133">Номинальный диапазон определяет способ масштабирования значений И'пбпр до И'кбкр.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-133">The nominal range defines how Y'PbPr values are scaled to Y'CbCr.</span></span>

## <a name="color-space-in-media-types"></a><span data-ttu-id="7a2fa-134">Цветовое пространство в типах носителей</span><span class="sxs-lookup"><span data-stu-id="7a2fa-134">Color Space in Media Types</span></span>

<span data-ttu-id="7a2fa-135">DirectShow, Media Foundation и DirectX Video Acceleration (ДКСВА) имеют разные способы представления видеоформатов.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-135">DirectShow, Media Foundation, and DirectX Video Acceleration (DXVA) all have different ways to represent video formats.</span></span> <span data-ttu-id="7a2fa-136">К счастью, можно легко преобразовать сведения о цветовых пространствах из одного в другой, так как соответствующие перечисления одинаковы.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-136">Fortunately, it is easy to translate the color-space information from one to another, because the relevant enumerations are the same.</span></span>

-   <span data-ttu-id="7a2fa-137">ДКСВА 1,0: сведения о пространстве цветов задаются в структуре [**дксва \_ екстендедформат**](/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_extendedformat) .</span><span class="sxs-lookup"><span data-stu-id="7a2fa-137">DXVA 1.0: Color-space information is given in the [**DXVA\_ExtendedFormat**](/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_extendedformat) structure.</span></span>
-   <span data-ttu-id="7a2fa-138">ДКСВА 2,0: сведения о пространстве цветов задаются в структуре структуры [**DXVA2 \_ екстендедформат**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_extendedformat) .</span><span class="sxs-lookup"><span data-stu-id="7a2fa-138">DXVA 2.0: Color-space information is given in the [**DXVA2\_ExtendedFormat**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_extendedformat) structure structure.</span></span> <span data-ttu-id="7a2fa-139">Эта структура идентична структуре ДКСВА 1,0, и значение полей одинаково.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-139">This structure is identical to the DXVA 1.0 structure, and the meaning of the fields is the same.</span></span>
-   <span data-ttu-id="7a2fa-140">DirectShow: сведения о пространстве цветов задаются в структуре [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) .</span><span class="sxs-lookup"><span data-stu-id="7a2fa-140">DirectShow: Color-space information is given in the [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) structure.</span></span> <span data-ttu-id="7a2fa-141">Информация хранится в верхних 24 битах поля **двконтролфлагс** .</span><span class="sxs-lookup"><span data-stu-id="7a2fa-141">The information is stored in the upper 24 bits of the **dwControlFlags** field.</span></span> <span data-ttu-id="7a2fa-142">Если имеются сведения о цветном пространстве, установите флаг **амконтрол \_ колоринфо \_ Present** в **двконтролфлагс**.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-142">If color-space information is present, set the **AMCONTROL\_COLORINFO\_PRESENT** flag in **dwControlFlags**.</span></span> <span data-ttu-id="7a2fa-143">Если этот флаг установлен, поле **двконтролфлагс** должно интерпретироваться как структура [**дксва \_ екстендедформат**](/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_extendedformat) , за исключением того, что младшие 8 разрядов структуры зарезервированы для флагов **амконтрол \_ xxx** .</span><span class="sxs-lookup"><span data-stu-id="7a2fa-143">When this flag is set, the **dwControlFlags** field should be interpreted as a [**DXVA\_ExtendedFormat**](/windows-hardware/drivers/ddi/dxva/ns-dxva-_dxva_extendedformat) structure, except that the lower 8 bits of the structure are reserved for **AMCONTROL\_xxx** flags.</span></span>
-   <span data-ttu-id="7a2fa-144">Драйверы видеозаписи. сведения о цветовых пространствах задаются в структуре [**KS \_ VIDEOINFOHEADER2**](/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-tagks_videoinfoheader2) .</span><span class="sxs-lookup"><span data-stu-id="7a2fa-144">Video capture drivers: Color-space information is given in the [**KS\_VIDEOINFOHEADER2**](/windows-hardware/drivers/ddi/ksmedia/ns-ksmedia-tagks_videoinfoheader2) structure.</span></span> <span data-ttu-id="7a2fa-145">Эта структура идентична структуре [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) , а значение полей одинаково.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-145">This structure is identical to the [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) structure, and the meaning of the fields is the same.</span></span>
-   <span data-ttu-id="7a2fa-146">Media Foundation: сведения о цветовых пространствах хранятся в виде атрибутов в типе мультимедиа:</span><span class="sxs-lookup"><span data-stu-id="7a2fa-146">Media Foundation: Color-space information is stored as attributes in the media type:</span></span>

    

    | <span data-ttu-id="7a2fa-147">Сведения о цвете</span><span class="sxs-lookup"><span data-stu-id="7a2fa-147">Color information</span></span>  | <span data-ttu-id="7a2fa-148">attribute</span><span class="sxs-lookup"><span data-stu-id="7a2fa-148">Attribute</span></span>                                                                                                                                                   |
    |--------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
    | <span data-ttu-id="7a2fa-149">Первичные цвета</span><span class="sxs-lookup"><span data-stu-id="7a2fa-149">Color primaries</span></span>    | [<span data-ttu-id="7a2fa-150">**\_ \_ \_ первичные цвета видео MF MT**</span><span class="sxs-lookup"><span data-stu-id="7a2fa-150">**MF\_MT\_VIDEO\_PRIMARIES**</span></span>](mf-mt-video-primaries-attribute.md)                                                                                         |
    | <span data-ttu-id="7a2fa-151">Функция перемещения</span><span class="sxs-lookup"><span data-stu-id="7a2fa-151">Transfer function</span></span>  | [<span data-ttu-id="7a2fa-152">**\_ \_ функция перемещения MF \_ MT**</span><span class="sxs-lookup"><span data-stu-id="7a2fa-152">**MF\_MT\_TRANSFER\_FUNCTION**</span></span>](mf-mt-transfer-function-attribute.md)                                                                                     |
    | <span data-ttu-id="7a2fa-153">Матрица перемещения</span><span class="sxs-lookup"><span data-stu-id="7a2fa-153">Transfer matrix</span></span>    | [<span data-ttu-id="7a2fa-154">**\_ \_ Матрица MF MT YUV \_**</span><span class="sxs-lookup"><span data-stu-id="7a2fa-154">**MF\_MT\_YUV\_MATRIX**</span></span>](mf-mt-yuv-matrix-attribute.md)                                                                                                   |
    | <span data-ttu-id="7a2fa-155">Подвыборка чрома</span><span class="sxs-lookup"><span data-stu-id="7a2fa-155">Chroma subsampling</span></span> | [<span data-ttu-id="7a2fa-156">**подтип MF \_ MT \_**</span><span class="sxs-lookup"><span data-stu-id="7a2fa-156">**MF\_MT\_SUBTYPE**</span></span>](mf-mt-subtype-attribute.md)<br/> <span data-ttu-id="7a2fa-157">(Задается объектом FOURCC, который хранится в первом **DWORD** подтипа GUID.)</span><span class="sxs-lookup"><span data-stu-id="7a2fa-157">(Given by the FOURCC, which is stored in the first **DWORD** of the subtype GUID.)</span></span><br/> |
    | <span data-ttu-id="7a2fa-158">Чрома заблокировано</span><span class="sxs-lookup"><span data-stu-id="7a2fa-158">Chroma siting</span></span>      | [<span data-ttu-id="7a2fa-159">**MF \_ Book \_ \_ чрома \_ заблокировано**</span><span class="sxs-lookup"><span data-stu-id="7a2fa-159">**MF\_MT\_VIDEO\_CHROMA\_SITING**</span></span>](mf-mt-video-chroma-siting-attribute.md)                                                                                |
    | <span data-ttu-id="7a2fa-160">Номинальный диапазон</span><span class="sxs-lookup"><span data-stu-id="7a2fa-160">Nominal range</span></span>      | [<span data-ttu-id="7a2fa-161">**\_ \_ \_ Номинальный диапазон видео MF MT \_**</span><span class="sxs-lookup"><span data-stu-id="7a2fa-161">**MF\_MT\_VIDEO\_NOMINAL\_RANGE**</span></span>](mf-mt-video-nominal-range-attribute.md)                                                                                |

    

     

## <a name="color-space-conversion"></a><span data-ttu-id="7a2fa-162">Преобразование цветового пространства</span><span class="sxs-lookup"><span data-stu-id="7a2fa-162">Color Space Conversion</span></span>

<span data-ttu-id="7a2fa-163">Преобразование из одного И'кбкр пространства в другое требует выполнения следующих шагов.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-163">Conversion from one Y'CbCr space to another requires the following steps.</span></span>

1.  <span data-ttu-id="7a2fa-164">Обратная дискретизация: преобразование представления И'кбкр в представление И'пбпр с использованием исходного номинального диапазона.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-164">Inverse quantization: Convert the Y'CbCr representation to a Y'PbPr representation, using the source nominal range.</span></span>
2.  <span data-ttu-id="7a2fa-165">Ресамплинг. Преобразуйте значения чрома 4:4:4 в значениях чрома, выполнив интерполяцию значений, равных.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-165">Upsampling: Convert the sampled chroma values to 4:4:4 by interpolating chroma values.</span></span>
3.  <span data-ttu-id="7a2fa-166">Преобразование YUV в RGB: преобразование из И'пбпр в нелинейный Р'Г'Б с использованием матрицы перемещения источника.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-166">YUV to RGB conversion: Convert from Y'PbPr to non-linear R'G'B', using the source transfer matrix.</span></span>
4.  <span data-ttu-id="7a2fa-167">Обратная функция перемещения: преобразование нелинейного Р'Г'Б в линейное значение RGB с использованием обратной функции перемещения.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-167">Inverse transfer function: Convert non-linear R'G'B' to linear RGB, using the inverse of the transfer function.</span></span>
5.  <span data-ttu-id="7a2fa-168">Преобразование цветового пространства RGB: используйте первичные цвета для преобразования исходного пространства RGB в целевое пространство RGB.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-168">RGB color space conversion: Use the color primaries to convert from the source RGB space to the target RGB space.</span></span>
6.  <span data-ttu-id="7a2fa-169">Функция перемещения: преобразование линейного RGB в нелинейный Р'Г'Б с помощью целевой функции перемещения.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-169">Transfer function: Convert linear RGB to non-linear R'G'B, using the target transfer function.</span></span>

7.  <span data-ttu-id="7a2fa-170">Преобразование RGB в YUV: преобразование Р'Г'Б в И'пбпр с использованием целевой матрицы перемещения.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-170">RGB to YUV conversion: Convert R'G'B' to Y'PbPr, using the target transfer matrix.</span></span>
8.  <span data-ttu-id="7a2fa-171">Понижение разрешения: преобразование 4:4:4 в 4:2:2, 4:2:0 или 4:1:1 путем фильтрации значений чрома.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-171">Downsampling: Convert 4:4:4 to 4:2:2, 4:2:0, or 4:1:1 by filtering the chroma values.</span></span>
9.  <span data-ttu-id="7a2fa-172">Дискретизация: Convert И'пбпр to И'кбкр, используя номинальный целевой диапазон.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-172">Quantization: Convert Y'PbPr to Y'CbCr, using the target nominal range.</span></span>

<span data-ttu-id="7a2fa-173">Шаги 1 – 4 происходят в исходном цветовом пространстве, и шаги 6 – 9 происходят в целевом пространстве.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-173">Steps 1–4 occur in the source color space, and steps 6–9 occur in the target color space.</span></span> <span data-ttu-id="7a2fa-174">В реальной реализации промежуточные шаги могут быть приблизительными, а смежные шаги можно объединять.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-174">In the actual implementation, intermediate steps can be approximated and adjacent steps can be combined.</span></span> <span data-ttu-id="7a2fa-175">Обычно существует компромисс между точностью и вычислительной ценой.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-175">There is generally a trade-off between accuracy and computational cost.</span></span>

<span data-ttu-id="7a2fa-176">Например, для преобразования из RT. 601 в RT. 709 необходимо выполнить следующие этапы.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-176">For example, to convert from RT.601 to RT.709 requires the following stages:</span></span>

-   <span data-ttu-id="7a2fa-177">Обратный дискретизация: И'кбкр (601) в И'пбпр (601)</span><span class="sxs-lookup"><span data-stu-id="7a2fa-177">Inverse quantization: Y'CbCr(601) to Y'PbPr(601)</span></span>
-   <span data-ttu-id="7a2fa-178">Ресамплинг: И'пбпр (601)</span><span class="sxs-lookup"><span data-stu-id="7a2fa-178">Upsampling: Y'PbPr(601)</span></span>
-   <span data-ttu-id="7a2fa-179">YUV в RGB: И'пбпр (601) в Р'Г'Б "(601)</span><span class="sxs-lookup"><span data-stu-id="7a2fa-179">YUV to RGB: Y'PbPr(601) to R'G'B'(601)</span></span>
-   <span data-ttu-id="7a2fa-180">Обратная функция перемещения: Р'Г'Б (601) в RGB (601)</span><span class="sxs-lookup"><span data-stu-id="7a2fa-180">Inverse transfer function: R'G'B'(601) to RGB(601)</span></span>
-   <span data-ttu-id="7a2fa-181">Преобразование цветового пространства RGB: RGB (601) в RGB (709)</span><span class="sxs-lookup"><span data-stu-id="7a2fa-181">RGB color space conversion: RGB(601) to RGB(709)</span></span>
-   <span data-ttu-id="7a2fa-182">Функция перемещения: RGB (709) в Р'Г'Б "(709)</span><span class="sxs-lookup"><span data-stu-id="7a2fa-182">Transfer function: RGB(709) to R'G'B'(709)</span></span>
-   <span data-ttu-id="7a2fa-183">RGB в YUV: Р'Г'Б "(709) в И'пбпр (709)</span><span class="sxs-lookup"><span data-stu-id="7a2fa-183">RGB to YUV: R'G'B'(709) to Y'PbPr(709)</span></span>
-   <span data-ttu-id="7a2fa-184">Понижение разрешения: И'пбпр (709)</span><span class="sxs-lookup"><span data-stu-id="7a2fa-184">Downsampling: Y'PbPr(709)</span></span>

-   <span data-ttu-id="7a2fa-185">Дискретизация: И'пбпр (709) в И'кбкр (709)</span><span class="sxs-lookup"><span data-stu-id="7a2fa-185">Quantization: Y'PbPr(709) to Y'CbCr(709)</span></span>

## <a name="using-extended-color-information"></a><span data-ttu-id="7a2fa-186">Использование расширенных сведений о цвете</span><span class="sxs-lookup"><span data-stu-id="7a2fa-186">Using Extended Color Information</span></span>

<span data-ttu-id="7a2fa-187">Чтобы сохранить цветовую точность в конвейере, сведения о цветовом пространстве должны быть представлены в источнике или декодере и передавались по конвейеру в приемник.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-187">To preserve color fidelity throughout the pipeline, color-space information must be introduced at the source or the decoder and conveyed all the way through the pipeline to the sink.</span></span>

### <a name="video-capture-devices"></a><span data-ttu-id="7a2fa-188">Устройства видеозаписи</span><span class="sxs-lookup"><span data-stu-id="7a2fa-188">Video Capture Devices</span></span>

<span data-ttu-id="7a2fa-189">При записи видео в большинстве аналоговых устройств записи используется четко определенное цветовое пространство.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-189">Most analog capture devices use a well-defined color space when capturing video.</span></span> <span data-ttu-id="7a2fa-190">Драйверы записи должны иметь формат с блоком формата **KS \_ VIDEOINFOHEADER2** , который содержит сведения о цвете.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-190">Capture drivers should offer a format with a **KS\_VIDEOINFOHEADER2** format block that contains the color information.</span></span> <span data-ttu-id="7a2fa-191">Для обеспечения обратной совместимости драйвер должен принимать форматы, которые не содержат сведений о цвете.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-191">For backward compatibility, the driver should accept formats that do not contain the color information.</span></span> <span data-ttu-id="7a2fa-192">Это позволит драйверу работать с компонентами, которые не принимают расширенные сведения о цвете.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-192">This will enable the driver to work with components that do not accept the extended color information.</span></span>

### <a name="file-based-sources"></a><span data-ttu-id="7a2fa-193">Файловые источники</span><span class="sxs-lookup"><span data-stu-id="7a2fa-193">File-based Sources</span></span>

<span data-ttu-id="7a2fa-194">При анализе видеофайла источник мультимедиа (или фильтр синтаксического анализатора в DirectShow) может предоставить некоторую информацию о цвете.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-194">When parsing a video file, the media source (or parser filter, in DirectShow) might be able to provide some of the color information.</span></span> <span data-ttu-id="7a2fa-195">Например, Навигатор DVD может определить цветовое пространство на основе содержимого DVD-диска.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-195">For example, the DVD Navigator can determine the color space based on the DVD content.</span></span> <span data-ttu-id="7a2fa-196">Другие сведения о цвете могут быть доступны для декодера.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-196">Other color information might be available to the decoder.</span></span> <span data-ttu-id="7a2fa-197">Например, простейший видеопоток MPEG-2 предоставляет сведения о цвете в \_ \_ поле расширения представления последовательности.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-197">For example, an MPEG-2 elementary video stream gives the color information in the sequence\_display\_extension field.</span></span> <span data-ttu-id="7a2fa-198">Если сведения о цвете не описаны явно в источнике, они могут быть неявно определены типом содержимого.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-198">If the color information is not explicitly described in the source, it might be defined implicitly by the type of content.</span></span> <span data-ttu-id="7a2fa-199">Например, изображения NTSC и PAL видеороликов используют разные цветовые пространства.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-199">For example, the NTSC and PAL varieties of DV video each use different color spaces.</span></span> <span data-ttu-id="7a2fa-200">Наконец, декодер может использовать любые сведения о цвете, которые он получает от типа носителя источника.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-200">Finally, the decoder can use whatever color information it gets from the source's media type.</span></span>

### <a name="other-components"></a><span data-ttu-id="7a2fa-201">Другие компоненты</span><span class="sxs-lookup"><span data-stu-id="7a2fa-201">Other Components</span></span>

<span data-ttu-id="7a2fa-202">Другим компонентам может потребоваться использовать сведения о цветовых пространствах в типе мультимедиа:</span><span class="sxs-lookup"><span data-stu-id="7a2fa-202">Other components might need to use the color-space information in a media type:</span></span>

-   <span data-ttu-id="7a2fa-203">Для использования преобразователей цветового пространства программного обеспечения следует использовать сведения о цветовом пространстве при выборе алгоритма преобразования.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-203">Software color-space converters should use color-space information when selecting a conversion algorithm.</span></span>
-   <span data-ttu-id="7a2fa-204">Видео миксерс, например микшер расширенного модуля подготовки видео (Евр), должны использовать сведения о цвете при смешении видеопотоков из различных типов содержимого.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-204">Video mixers, such as the enhanced video renderer (EVR) mixer, should use the color information when mixing video streams from different types of content.</span></span>
-   <span data-ttu-id="7a2fa-205">API-интерфейсы обработки видео ДКСВА и ДДИС позволяют вызывающей стороне указывать сведения о цветовых пространствах.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-205">The DXVA video processing APIs and DDIs enable the caller to specify color-space information information.</span></span> <span data-ttu-id="7a2fa-206">GPU должен использовать эти сведения при выполнении хардвардного смешения видео.</span><span class="sxs-lookup"><span data-stu-id="7a2fa-206">The GPU should use this information when it performs hardward video mixing.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7a2fa-207">См. также</span><span class="sxs-lookup"><span data-stu-id="7a2fa-207">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7a2fa-208">Типы видеоклипов</span><span class="sxs-lookup"><span data-stu-id="7a2fa-208">Video Media Types</span></span>](video-media-types.md)
</dt> <dt>

[<span data-ttu-id="7a2fa-209">Ускорение видео DirectX 2,0</span><span class="sxs-lookup"><span data-stu-id="7a2fa-209">DirectX Video Acceleration 2.0</span></span>](directx-video-acceleration-2-0.md)
</dt> </dl>

 

 
