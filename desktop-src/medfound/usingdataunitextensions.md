---
description: Описывает, как добавить расширения модулей данных при использовании кодировщиков Windows Media.
ms.assetid: fdadcb85-c564-4d05-a4d7-af53a0107455
title: Использование расширений модулей данных (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 21c16053ee078f5adcd48767f53d9e6e1c0eeb02
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105662683"
---
# <a name="using-data-unit-extensions-microsoft-media-foundation"></a><span data-ttu-id="2f4f3-103">Использование расширений модулей данных (Microsoft Media Foundation)</span><span class="sxs-lookup"><span data-stu-id="2f4f3-103">Using Data Unit Extensions (Microsoft Media Foundation)</span></span>

<span data-ttu-id="2f4f3-104">Аудиокодеки и видеокодеки Windows Media предназначены для работы с контейнером ASF.</span><span class="sxs-lookup"><span data-stu-id="2f4f3-104">The Windows Media Audio and Video codecs are designed to work well with the Advanced Systems Format (ASF) container.</span></span> <span data-ttu-id="2f4f3-105">ASF — это структурированный формат, используемый для файлов Windows Media Audio (WMA) и файлов Windows Media Video (WMV).</span><span class="sxs-lookup"><span data-stu-id="2f4f3-105">ASF is the structured format used for Windows Media Audio (WMA) files and Windows Media Video (WMV) files.</span></span> <span data-ttu-id="2f4f3-106">Это расширяемый формат, предназначенный для потоковой передачи данных.</span><span class="sxs-lookup"><span data-stu-id="2f4f3-106">It is an extensible format designed for streaming data.</span></span> <span data-ttu-id="2f4f3-107">Одной из необычных характеристик структуры ASF является возможность присоединения метаданных к отдельным образцам и встраивание этих данных с помощью примеров в потоке битов.</span><span class="sxs-lookup"><span data-stu-id="2f4f3-107">One of the unusual characteristics of the ASF structure is the ability to attach metadata to individual samples, and to embed that data with the samples in the bit stream.</span></span> <span data-ttu-id="2f4f3-108">Элемент метаданных, хранимых таким образом, называется *расширением единицы* данных или *примером расширения*.</span><span class="sxs-lookup"><span data-stu-id="2f4f3-108">An item of metadata stored in this way is called a data *unit extension*, or *sample extension*.</span></span>

<span data-ttu-id="2f4f3-109">Расширение единицы данных может содержать сведения, необходимые кодировщику, декодеру или приложению проигрывателя.</span><span class="sxs-lookup"><span data-stu-id="2f4f3-109">A data unit extension can contain information that is required by the encoder, the decoder, or the player application.</span></span> <span data-ttu-id="2f4f3-110">Большинство типов модулей обработки данных, реализованных в серии кодеков Windows Media 9, содержат данные, предназначенные для приложения, которое декодирует и готовит к просмотру мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="2f4f3-110">Most of the data-unit-extension types that are implemented in the Windows Media 9 Series of codecs contain data intended for the application that decodes and renders the media.</span></span> <span data-ttu-id="2f4f3-111">Например, можно сохранить коды времени SMPTE из исходных данных, добавив их в качестве расширений модулей данных.</span><span class="sxs-lookup"><span data-stu-id="2f4f3-111">For example, you can maintain SMPTE time codes from source data by adding them as data unit extensions.</span></span> <span data-ttu-id="2f4f3-112">Однако для следующих функций кодека требуется расширение модулей данных:</span><span class="sxs-lookup"><span data-stu-id="2f4f3-112">However, the following codec features require data unit extensions:</span></span>

-   [<span data-ttu-id="2f4f3-113">Принудительная вставка ключевых кадров</span><span class="sxs-lookup"><span data-stu-id="2f4f3-113">Forced Key Frame Insertion</span></span>](forcedkeyframeinsertion.md)
-   [<span data-ttu-id="2f4f3-114">Кодирование видео с чередованием</span><span class="sxs-lookup"><span data-stu-id="2f4f3-114">Interlaced Video Encoding</span></span>](interlacedvideoencoding.md)
-   <span data-ttu-id="2f4f3-115">Сложность использования расширений модулей данных при доступе к кодека напрямую — это механизм, с помощью которого объект получает данные расширения.</span><span class="sxs-lookup"><span data-stu-id="2f4f3-115">The difficulty in using data unit extensions when accessing the codec directly is the mechanism by which the object receives the extension data.</span></span> <span data-ttu-id="2f4f3-116">Это достигается объектами пакета SDK формата Windows Media с помощью объектов буфера, предназначенных для поддержки этой функции.</span><span class="sxs-lookup"><span data-stu-id="2f4f3-116">This is achieved by the objects of the Windows Media Format SDK by using buffer objects designed to support this feature.</span></span> <span data-ttu-id="2f4f3-117">Для активации функций кодека, требующих расширения модулей обработки данных, рекомендуется использовать пакет SDK Windows Media Format. Однако эти функции можно настроить для работы с автономными объектами кодека.</span><span class="sxs-lookup"><span data-stu-id="2f4f3-117">It is recommended that you use the Windows Media Format SDK to activate the codec features that require data unit extensions, but you can make these features work with the standalone codec objects.</span></span>

## <a name="passing-extended-samples-to-the-codec-objects"></a><span data-ttu-id="2f4f3-118">Передача расширенных образцов объектам кодека</span><span class="sxs-lookup"><span data-stu-id="2f4f3-118">Passing Extended Samples to the Codec Objects</span></span>

<span data-ttu-id="2f4f3-119">Пакет SDK для формата Windows Media использует объекты буфера, которые предоставляют интерфейсы [**инссбуффер**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer) .</span><span class="sxs-lookup"><span data-stu-id="2f4f3-119">The Windows Media Format SDK uses buffer objects that expose [**INSSBuffer**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer) interfaces.</span></span> <span data-ttu-id="2f4f3-120">Последний интерфейс — [**INSSBuffer4**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer4).</span><span class="sxs-lookup"><span data-stu-id="2f4f3-120">The latest interface is [**INSSBuffer4**](/previous-versions/windows/desktop/api/wmsbuffer/nn-wmsbuffer-inssbuffer4).</span></span> <span data-ttu-id="2f4f3-121">Чтобы передать примеры объекту кодека с расширениями модулей данных, необходимо использовать объект buffer, реализующий интерфейс [**имедиабуффер**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediabuffer) или [**Имфмедиабуффер**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediabuffer) и интерфейс **инссбуффер** .</span><span class="sxs-lookup"><span data-stu-id="2f4f3-121">To pass samples to a codec object with data unit extensions, you must use a buffer object that implements the [**IMediaBuffer**](/previous-versions/windows/desktop/api/mediaobj/nn-mediaobj-imediabuffer) or [**IMFMediaBuffer**](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediabuffer) interface and the **INSSBuffer** interface.</span></span> <span data-ttu-id="2f4f3-122">Для этого можно использовать объекты буфера, созданные с помощью пакета SDK Windows Media Format или Microsoft Media Foundation. также можно создать собственный класс буфера, соответствующий требованиям.</span><span class="sxs-lookup"><span data-stu-id="2f4f3-122">You can use buffer objects created by the Windows Media Format SDK or Microsoft Media Foundation to accomplish this, or you can make your own buffer class that meets the requirements.</span></span> <span data-ttu-id="2f4f3-123">Чтобы создать собственный класс буфера, необходимо согласовать прототипы методов для интерфейсов **инссбуффер** .</span><span class="sxs-lookup"><span data-stu-id="2f4f3-123">To create your own buffer class, you must conform to the method prototypes for the **INSSBuffer** interfaces.</span></span> <span data-ttu-id="2f4f3-124">Эти определения интерфейсов можно найти в файле заголовка вмсбуффер. h, который устанавливается вместе с пакетом SDK для формата Windows Media.</span><span class="sxs-lookup"><span data-stu-id="2f4f3-124">These interface definitions can be found in the wmsbuffer.h header file that is installed with the Windows Media Format SDK.</span></span>

## <a name="related-topics"></a><span data-ttu-id="2f4f3-125">См. также</span><span class="sxs-lookup"><span data-stu-id="2f4f3-125">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="2f4f3-126">Кодеки Windows Media</span><span class="sxs-lookup"><span data-stu-id="2f4f3-126">Windows Media Codecs</span></span>](windows-media-codecs.md)
</dt> </dl>

 

 
