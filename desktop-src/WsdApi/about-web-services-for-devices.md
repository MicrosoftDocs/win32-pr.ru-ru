---
description: API веб-службы на устройствах (WSDAPI) — это реализация профиля устройств для веб-служб (DPWS) для Windows Vista и Windows Server 2008.
ms.assetid: 8eaeacb3-43db-4a57-8548-e5b81213269c
title: О веб-службах на устройствах
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dca7f7dc97dabd3dde7af12f3cece992b4f0ef6d
ms.sourcegitcommit: 5b98bf8c68922f8f03c14f793fbe17504900559c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/12/2021
ms.locfileid: "103914019"
---
# <a name="about-web-services-on-devices"></a><span data-ttu-id="8ba53-103">О веб-службах на устройствах</span><span class="sxs-lookup"><span data-stu-id="8ba53-103">About Web Services on Devices</span></span>

<span data-ttu-id="8ba53-104">API веб-службы на устройствах (WSDAPI) — это реализация [профиля устройств для веб-служб](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) для Windows Vista и windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="8ba53-104">Web Service on Devices API (WSDAPI) is an implementation of the [Devices Profile for Web Services](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) for Windows Vista and Windows Server 2008.</span></span> <span data-ttu-id="8ba53-105">DPWS ограничивает спецификации веб-служб, чтобы клиенты могли легко обнаруживать устройства.</span><span class="sxs-lookup"><span data-stu-id="8ba53-105">The DPWS constrains Web Services specifications so clients can easily discover devices.</span></span> <span data-ttu-id="8ba53-106">После обнаружения устройства клиент может получить описание служб, размещенных на этом устройстве, и использовать эти службы.</span><span class="sxs-lookup"><span data-stu-id="8ba53-106">Once a device is discovered, a client can retrieve a description of services hosted on that device and use those services.</span></span>

## <a name="devices-and-services"></a><span data-ttu-id="8ba53-107">Устройства и службы</span><span class="sxs-lookup"><span data-stu-id="8ba53-107">Devices and Services</span></span>

<span data-ttu-id="8ba53-108">*Устройства* — это компоненты (обычно оборудование), подключенные к сети.</span><span class="sxs-lookup"><span data-stu-id="8ba53-108">*Devices* are components, usually hardware, which are attached to the network.</span></span> <span data-ttu-id="8ba53-109">К примерам относятся принтеры, веб-камеры и видеосистемы.</span><span class="sxs-lookup"><span data-stu-id="8ba53-109">Examples include printers, Web cameras, and video systems.</span></span>

<span data-ttu-id="8ba53-110">Устройства могут содержать ноль или более *служб*.</span><span class="sxs-lookup"><span data-stu-id="8ba53-110">Devices may include zero or more *services*.</span></span> <span data-ttu-id="8ba53-111">Например, видеоустройство может включать службы, поддерживающие включение и отключение питания, Управление воспроизведением, извлечение носителей и потоковую передачу видео.</span><span class="sxs-lookup"><span data-stu-id="8ba53-111">For example, a video device may include services that support power on and off, play control, media ejection, and video streaming.</span></span> <span data-ttu-id="8ba53-112">Элемент управления воспроизведением может поддерживать такие действия, как воспроизведение, пауза, перемотка назад и быстрая переадресация.</span><span class="sxs-lookup"><span data-stu-id="8ba53-112">Play control may support actions such as play, pause, rewind, and fast forward.</span></span>

## <a name="discovering-and-manipulating-a-device"></a><span data-ttu-id="8ba53-113">Обнаружение устройства и управление им</span><span class="sxs-lookup"><span data-stu-id="8ba53-113">Discovering and Manipulating a Device</span></span>

<span data-ttu-id="8ba53-114">WSDAPI расширяет локальную модель самонастраивающийся, позволяя клиенту обнаруживать и получать доступ к удаленному устройству и связанным с ним службам по сети.</span><span class="sxs-lookup"><span data-stu-id="8ba53-114">WSDAPI extends the local Plug and Play model by allowing a client to discover and access a remote device and its associated services across a network.</span></span> <span data-ttu-id="8ba53-115">Он поддерживает обнаружение, односторонний и двусторонний контроль обмена сообщениями, а также события.</span><span class="sxs-lookup"><span data-stu-id="8ba53-115">It supports discovery, one-way and two-way control messaging, and eventing.</span></span>

![Схема, показывающая, как WSDAPI позволяет клиенту обнаруживать и получать доступ к удаленному устройству.](images/overview01.png)

<span data-ttu-id="8ba53-117">Устройства DPWS объявляют свое присутствие и предоставляют службы (если они есть), используя уникальный адрес и стандартизированный набор сообщений XML.</span><span class="sxs-lookup"><span data-stu-id="8ba53-117">DPWS devices announce their presence and expose services (if any) using a unique address and a standardized set of XML messages.</span></span> <span data-ttu-id="8ba53-118">Клиенты DPWS могут использовать процесс обнаружения для поиска устройства, перечисления его служб и подключения к этим службам для выполнения определенных действий.</span><span class="sxs-lookup"><span data-stu-id="8ba53-118">DPWS clients can use the discovery process to find the device, enumerate its services, and connect to those services to perform specific actions.</span></span>

<span data-ttu-id="8ba53-119">Клиент WSDAPI сначала запрашивает у устройства полные описания его служб, включая типы служб (например, тип службы принтера или тип службы сканера).</span><span class="sxs-lookup"><span data-stu-id="8ba53-119">A WSDAPI client first queries the device for complete descriptions of its services, including the service types (such as a printer service type or a scanner service type).</span></span> <span data-ttu-id="8ba53-120">Затем клиент управляет устройством, вызывая команды, определенные типом службы (например, путем вызова **креатепринтжоб** на устройстве с типом службы принтера).</span><span class="sxs-lookup"><span data-stu-id="8ba53-120">The client then controls the device by calling commands defined by a service type (for example, by calling **CreatePrintJob** on a device with a printer service type).</span></span> <span data-ttu-id="8ba53-121">При необходимости клиент также может отслеживать изменения состояния в каждой службе, подписавшись на события, происходящие во время выполнения команды.</span><span class="sxs-lookup"><span data-stu-id="8ba53-121">Optionally, the client can also monitor state changes in each service by subscribing to events that occur during command execution.</span></span>

![Схема, показывающая, как клиент WSDAPI запрашивает и взаимодействует с устройством.](images/netdevice01.png)

<span data-ttu-id="8ba53-123">Дополнительные сведения о шаблонах обмена сообщениями с устройствами см. в статье [шаблоны сообщений обнаружения и обмена метаданными](discovery-and-metadata-exchange-message-patterns.md).</span><span class="sxs-lookup"><span data-stu-id="8ba53-123">For more information about device messaging patterns, see [Discovery and Metadata Exchange Message Patterns](discovery-and-metadata-exchange-message-patterns.md).</span></span>

## <a name="logical-and-physical-addressing"></a><span data-ttu-id="8ba53-124">Логическая и физическая адресация</span><span class="sxs-lookup"><span data-stu-id="8ba53-124">Logical and Physical Addressing</span></span>

<span data-ttu-id="8ba53-125">Логическая адресация используется для уникальной идентификации устройств независимо от их физических адресов.</span><span class="sxs-lookup"><span data-stu-id="8ba53-125">Logical addressing is used to uniquely identify devices independent of their physical addresses.</span></span> <span data-ttu-id="8ba53-126">WS-Discovery предоставляет механизм для разрешения логических адресов в физические адреса, позволяющий выполнять обмен сообщениями между клиентом и устройством.</span><span class="sxs-lookup"><span data-stu-id="8ba53-126">WS-Discovery provides a mechanism to resolve logical addresses into physical addresses, allowing client-to-device messaging to take place.</span></span> <span data-ttu-id="8ba53-127">Например, это подключенное к сети хранилище (NAS).</span><span class="sxs-lookup"><span data-stu-id="8ba53-127">An example is network attached storage (NAS) that you carry with you.</span></span> <span data-ttu-id="8ba53-128">Если у вас есть ноутбук и NAS, ваш портативный компьютер должен иметь возможность распознать, что это одно и то же устройство, независимо от физического адреса (IP-адреса), который NAS получает при перемещении между подсетями.</span><span class="sxs-lookup"><span data-stu-id="8ba53-128">If you have a laptop and a NAS, your laptop should be able to recognize that it is the same device, regardless of the physical address (IP address) that the NAS obtains as you move between subnets.</span></span> <span data-ttu-id="8ba53-129">Для этого устройство должно иметь удостоверение, которое не зависит от получаемого им IP-адреса. так как традиционные механизмы, такие как DNS, недоступны в обычном сценарии роуминга, WS-Addressing и WS-Discovery обеспечивают логическую адресацию и разрешение в виде произвольной альтернативы.</span><span class="sxs-lookup"><span data-stu-id="8ba53-129">Accomplishing this requires the device have identity that is independent of the IP address it obtains; since traditional mechanisms like DNS are not available in a normal roaming scenario, WS-Addressing and WS-Discovery provide logical addressing and resolution as an ad-hoc alternative.</span></span>

<span data-ttu-id="8ba53-130">При производстве устройства ему присваивается глобальный уникальный идентификатор, представленный в виде универсального кода ресурса (URI) UUID.</span><span class="sxs-lookup"><span data-stu-id="8ba53-130">When a device is manufactured, it is given a globally unique identifier, represented as a UUID URI.</span></span> <span data-ttu-id="8ba53-131">Этот идентификатор никогда не изменится для устройства.</span><span class="sxs-lookup"><span data-stu-id="8ba53-131">This identifier will never change for the device.</span></span> <span data-ttu-id="8ba53-132">Когда устройство включено, оно всегда объявляет свой логический адрес через сообщение WS-Discovery [Hello](hello-message.md) и принимает запросы на преобразование его в физический адрес (обычно HTTP) с помощью WS-Discovery [разрешения](resolve-message.md) или [пробных](probe-message.md) сообщений.</span><span class="sxs-lookup"><span data-stu-id="8ba53-132">When the device is powered on, it will always announce its logical address via a WS-Discovery [Hello](hello-message.md) message, and will accept requests to convert that to a physical address (typically HTTP) via WS-Discovery [Resolve](resolve-message.md) or [Probe](probe-message.md) messages.</span></span> <span data-ttu-id="8ba53-133">После получения допустимого физического адреса (IP-адреса) весь обмен сообщениями происходит по этому адресу, а WS-Discovery используется только в том случае, если адрес изменяется, устройство изменяет состояние, а клиенты должны получать уведомления, или устройство переходит в автономный режим.</span><span class="sxs-lookup"><span data-stu-id="8ba53-133">Once a valid physical address (IP address) is obtained, all messaging happens over that address, and WS-Discovery is used only if the address changes, the device changes state and the clients need to be notified, or the device goes offline.</span></span>

## <a name="building-applications"></a><span data-ttu-id="8ba53-134">Создание приложений</span><span class="sxs-lookup"><span data-stu-id="8ba53-134">Building Applications</span></span>

<span data-ttu-id="8ba53-135">WSDAPI предоставляет универсальный стек DPWS SOAP для использования клиентскими и приложениями-службами.</span><span class="sxs-lookup"><span data-stu-id="8ba53-135">WSDAPI provides a generic DPWS SOAP stack for use by client and service applications.</span></span> <span data-ttu-id="8ba53-136">[Генератор кода для веб-служб на устройствах](web-services-for-devices-code-generator.md) (WsdCodeGen.exe) можно использовать для преобразования описания службы (WSDL) в код прокси и заглушки, которые приложения могут вызывать напрямую.</span><span class="sxs-lookup"><span data-stu-id="8ba53-136">The [Web Services on Devices Code Generator](web-services-for-devices-code-generator.md) (WsdCodeGen.exe) can be used to convert a service description (WSDL) into proxy and stub code that applications can call directly.</span></span> <span data-ttu-id="8ba53-137">Этот сформированный код автоматически преобразует вызовы функций и параметры в сообщения SOAP и поля XML, а затем вызывает в WSDAPI, чтобы выдать запросы удаленному устройству или клиенту.</span><span class="sxs-lookup"><span data-stu-id="8ba53-137">This generated code automatically transforms function calls and parameters into SOAP messages and XML fields, and then calls into WSDAPI to issue to requests to the remote device or client.</span></span>

<span data-ttu-id="8ba53-138">Обнаружение функций можно использовать при создании приложений WSDAPI для создания и активации экземпляров функций, возвращаемых PnP.</span><span class="sxs-lookup"><span data-stu-id="8ba53-138">Function Discovery can be used when building WSDAPI applications to create and activate function instances returned by PnP.</span></span> <span data-ttu-id="8ba53-139">Эти экземпляры функций содержат данные, которые можно использовать для получения дополнительных сведений через API-интерфейсы PnP, если требуется не просто простое обнаружение.</span><span class="sxs-lookup"><span data-stu-id="8ba53-139">These function instances contain data that can be used to obtain more information through the PnP APIs when more than just simple discovery is required.</span></span> <span data-ttu-id="8ba53-140">Дополнительные сведения см. в разделе [обнаружение функций](/previous-versions/windows/desktop/fundisc/fd-portal) и [PnP-X](/previous-versions/windows/desktop/fundisc/pnp-x).</span><span class="sxs-lookup"><span data-stu-id="8ba53-140">For more information, see [Function Discovery](/previous-versions/windows/desktop/fundisc/fd-portal) and [PnP-X](/previous-versions/windows/desktop/fundisc/pnp-x).</span></span>

## <a name="related-topics"></a><span data-ttu-id="8ba53-141">См. также</span><span class="sxs-lookup"><span data-stu-id="8ba53-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8ba53-142">Шаблоны сообщений обнаружения и обмена метаданными</span><span class="sxs-lookup"><span data-stu-id="8ba53-142">Discovery and Metadata Exchange Message Patterns</span></span>](discovery-and-metadata-exchange-message-patterns.md)
</dt> <dt>

[<span data-ttu-id="8ba53-143">Соответствие спецификации WSDAPI</span><span class="sxs-lookup"><span data-stu-id="8ba53-143">WSDAPI Specification Compliance</span></span>](wsdapi-specification-compliance.md)
</dt> <dt>

[<span data-ttu-id="8ba53-144">Общие сведения о интерфейсах WSDAPI</span><span class="sxs-lookup"><span data-stu-id="8ba53-144">Overview of the WSDAPI Interfaces</span></span>](overview-of-the-wsdapi-interfaces.md)
</dt> </dl>

 

 
