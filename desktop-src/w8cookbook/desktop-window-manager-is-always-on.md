---
title: диспетчер окон рабочего стола всегда включено
description: диспетчер окон рабочего стола всегда включено
ms.assetid: 36E2DD1B-E480-47A9-850B-3057119641C0
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f855635615dee734b9a719d4e51d3ead663d144e
ms.sourcegitcommit: ea4baf9953a78d2d6bd530b680601e39f3884541
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/01/2020
ms.locfileid: "104339417"
---
# <a name="desktop-window-manager-is-always-on"></a><span data-ttu-id="236c9-103">диспетчер окон рабочего стола всегда включено</span><span class="sxs-lookup"><span data-stu-id="236c9-103">Desktop Window Manager is always on</span></span>

## <a name="platforms"></a><span data-ttu-id="236c9-104">Платформы</span><span class="sxs-lookup"><span data-stu-id="236c9-104">Platforms</span></span>

<span data-ttu-id="236c9-105">**Клиенты** — Windows 8</span><span class="sxs-lookup"><span data-stu-id="236c9-105">**Clients** – Windows 8</span></span>  
<span data-ttu-id="236c9-106">**Серверы** — Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="236c9-106">**Servers** – Windows Server 2012</span></span>  


## <a name="description"></a><span data-ttu-id="236c9-107">Описание</span><span class="sxs-lookup"><span data-stu-id="236c9-107">Description</span></span>

<span data-ttu-id="236c9-108">В Windows 8 диспетчер окон рабочего стола (DWM) всегда включен и не может быть отключен конечными пользователями и приложениями.</span><span class="sxs-lookup"><span data-stu-id="236c9-108">In Windows 8, Desktop Window Manager (DWM) is always ON and cannot be disabled by end users and apps.</span></span> <span data-ttu-id="236c9-109">Как и в Windows 7, DWM используется для создания рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="236c9-109">As in Windows 7, DWM is used to compose the desktop.</span></span> <span data-ttu-id="236c9-110">В дополнение к опыту, включенному в Windows 7, теперь компонент DWM Desktop композиция обеспечивает композицию рабочего стола для всех тем, поддержку Стереоскопик 3D, а также управление, разделение и защиту приложений Магазина Windows.</span><span class="sxs-lookup"><span data-stu-id="236c9-110">In addition to experiences enabled in Windows 7, now DWM desktop composition enables desktop composition for all themes, support for Stereoscopic 3D, and management, separation, and protection of the experience with Windows Store apps.</span></span>

<span data-ttu-id="236c9-111">**Композиция рабочего стола для всех тем**</span><span class="sxs-lookup"><span data-stu-id="236c9-111">**Desktop composition for all themes**</span></span>

<span data-ttu-id="236c9-112">В Windows Vista и Windows 7 Композиция рабочего стола включена только с помощью темы AERO Glass.</span><span class="sxs-lookup"><span data-stu-id="236c9-112">In Windows Vista and Windows 7, desktop composition is enabled only with the AERO Glass Theme.</span></span> <span data-ttu-id="236c9-113">Следовательно, пользователи классических и высококонтрастных тем Windows не могут использовать возможности, предоставляемые композицией рабочего стола, такие как перелистывание Windows, автоматическое масштабирование для масштабирования с высоким разрешением (DPI), предварительный просмотр эскизов и полноэкранная экранная лупа.</span><span class="sxs-lookup"><span data-stu-id="236c9-113">Hence users of Windows Classic and high contrast themes cannot use experiences enabled by desktop composition such as Windows Flip, automatic scaling for high resolution (DPI) scaling, thumbnail Preview and full screen magnifier.</span></span> <span data-ttu-id="236c9-114">Кроме того, в этих более ранних версиях Windows разработчикам приложений необходимо писать и поддерживать несколько ветвей кода — один там, где включена композиция настольных систем, а другой — с отключенной компоновкой рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="236c9-114">In addition, in these earlier versions of Windows, app developers must write and maintain multiple code paths – one where desktop composition is enabled and another where desktop composition is disabled.</span></span>

<span data-ttu-id="236c9-115">В Windows 8 для всех тем включена Композиция рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="236c9-115">With Windows 8, desktop composition is enabled for all themes.</span></span> <span data-ttu-id="236c9-116">Пользователи классических и высококонтрастных тем Windows могут использовать возможности, включенные в составе рабочего стола, такие как эргономичное перелистывание Windows, автоматическое масштабирование для масштабирования с высоким разрешением (DPI), предварительный просмотр эскизов и полноэкранная экранная лупа.</span><span class="sxs-lookup"><span data-stu-id="236c9-116">Users of Windows Classic and high contrast themes can use the experiences enabled by desktop composition such as Windows Flip, automatic scaling for high resolution (DPI) scaling, thumbnail previews, and full screen magnifier.</span></span> <span data-ttu-id="236c9-117">Кроме того, разработчикам не нужно писать и поддерживать несколько путей кода, что упрощает разработку.</span><span class="sxs-lookup"><span data-stu-id="236c9-117">In addition, developers don’t need to write and maintain multiple code paths, thereby simplifying development.</span></span>

<span data-ttu-id="236c9-118">**Поддержка стереоскопик 3D**</span><span class="sxs-lookup"><span data-stu-id="236c9-118">**Support for stereoscopic 3D**</span></span>

<span data-ttu-id="236c9-119">Визуализация рабочего стола DWM поддерживает отрисовку и представление содержимого стереоскопик трехмерного приложения в оконном и полноэкранном режиме.</span><span class="sxs-lookup"><span data-stu-id="236c9-119">DWM desktop composition supports rendering and presentation of windowed and full-screen stereoscopic 3D app content.</span></span>

<span data-ttu-id="236c9-120">**Управление, разделение и защита работы с приложениями Магазина Windows**</span><span class="sxs-lookup"><span data-stu-id="236c9-120">**Management, separation and protection of the experience with Windows Store apps**</span></span>

<span data-ttu-id="236c9-121">При компоновке рабочего стола DWM обеспечивает разделение и защиту окон настольных приложений из новых окон приложений Магазина Windows путем управления и отделения окон классических приложений от окон приложений Магазина Windows.</span><span class="sxs-lookup"><span data-stu-id="236c9-121">DWM desktop composition enables separation and protection of desktop app windows from the new Windows Store app windows by managing and separating the desktop app windows from the Windows Store app windows.</span></span> <span data-ttu-id="236c9-122">Так как композиция настольных систем отвечает за управление всеми окнами приложений, отключение композиции рабочего стола может привести к непредвиденному поведению.</span><span class="sxs-lookup"><span data-stu-id="236c9-122">Since desktop composition is responsible for managing all app windows, disabling desktop composition can result in unexpected behavior.</span></span> <span data-ttu-id="236c9-123">Кроме того, вы несете ответственность за составление нового меню "Пуск", а также дополнительных анимаций окон, которые формируют основные индивидуальные сведения о новой операционной системе Windows.</span><span class="sxs-lookup"><span data-stu-id="236c9-123">In addition desktop composition is responsible for composing the new Start menu as well as additional window animations that form the core personality of the new Windows operating system.</span></span>

## <a name="controlling-desktop-composition"></a><span data-ttu-id="236c9-124">Управление композицией рабочего стола</span><span class="sxs-lookup"><span data-stu-id="236c9-124">Controlling desktop composition</span></span>

<span data-ttu-id="236c9-125">В Windows Vista и Windows 7 Композиция рабочего стола отключена в ряде сценариев.</span><span class="sxs-lookup"><span data-stu-id="236c9-125">In Windows Vista and Windows 7, desktop composition is disabled in a number of scenarios.</span></span> <span data-ttu-id="236c9-126">В Windows 8 Рабочий стол DWM является основным компонентом операционной системы и не может быть отключен.</span><span class="sxs-lookup"><span data-stu-id="236c9-126">In Windows 8, DWM desktop composition is a core operating system component and cannot be disabled.</span></span> <span data-ttu-id="236c9-127">За некоторыми исключениями, композиция рабочего стола всегда включена; он запускается перед входом пользователя и остается активным в течение сеанса.</span><span class="sxs-lookup"><span data-stu-id="236c9-127">With a few exceptions, desktop composition is always on; it’s started before the user logon and remains active for the duration of a session.</span></span> <span data-ttu-id="236c9-128">В этом разделе описывается, как Windows 8 обрабатывает сценарии в Windows 7, когда композиция рабочего стола отключена.</span><span class="sxs-lookup"><span data-stu-id="236c9-128">This section describes how Windows 8 treats the scenarios in Windows 7 where desktop composition is disabled.</span></span>

<span data-ttu-id="236c9-129">**SKU сервера и определенные номера SKU клиентов**</span><span class="sxs-lookup"><span data-stu-id="236c9-129">**Server SKU and certain client SKUs**</span></span>

<span data-ttu-id="236c9-130">В Windows 8 для всех номеров SKU сервера и клиента включена Композиция рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="236c9-130">In Windows 8, all server and client SKUs have desktop composition enabled.</span></span> <span data-ttu-id="236c9-131">Это гарантирует, что администраторы сервера и пользователи смогут воспользоваться преимуществами функций, включенных в композицию рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="236c9-131">This ensures that server admins and users can benefit from the experiences enabled by desktop composition.</span></span>

<span data-ttu-id="236c9-132">**Фундаментальные требования к компоновке рабочего стола**</span><span class="sxs-lookup"><span data-stu-id="236c9-132">**Fundamental requirements for desktop composition**</span></span>

<span data-ttu-id="236c9-133">Windows 8 обеспечивает выполнение требований к графическому адаптеру и глубине цвета системы с помощью поддержки драйвера WDDM и глубины системного цвета.</span><span class="sxs-lookup"><span data-stu-id="236c9-133">Windows 8 ensures that graphics adapter and system color depth requirements are met through WDDM driver support and system color depth.</span></span>

<span data-ttu-id="236c9-134">**Поддержка драйвера WDDM**</span><span class="sxs-lookup"><span data-stu-id="236c9-134">**WDDM driver support**</span></span>

<span data-ttu-id="236c9-135">Если в системе нет драйвера графики, совместимого с WDDM, в Windows 8 в качестве адаптера по умолчанию используется видеоадаптер Microsoft Basic.</span><span class="sxs-lookup"><span data-stu-id="236c9-135">If a system does not have a WDDM-compliant graphics driver, Windows 8 uses Microsoft Basic Display Adapter as the default adapter.</span></span> <span data-ttu-id="236c9-136">Так как DWM всегда выполняется на адаптере по умолчанию, он выбирает видеоадаптер Microsoft Basic для создания настольных систем, когда драйвер графики, соответствующий WDDM, недоступен (независимо от того, установлен или отключен) в системе.</span><span class="sxs-lookup"><span data-stu-id="236c9-136">Since DWM always runs on the default adapter, it will choose Microsoft Basic Display Adapter to compose the desktop when a WDDM-compliant graphics driver is not available (whether not installed or disabled) on the system.</span></span>

<span data-ttu-id="236c9-137">Базовый видеоадаптер (Майкрософт) — это программное средство для прорисовки, использующее процессор, а не GPU для выполнения всех рисунков.</span><span class="sxs-lookup"><span data-stu-id="236c9-137">Microsoft Basic Display Adapter is a software rasterizer that uses the CPU rather than the GPU to perform all the drawing.</span></span> <span data-ttu-id="236c9-138">Обратите внимание, что производительность композиции рабочего стола на базовом видеоадаптере Майкрософт (особенно анимация) может быть не столь гладкой, как при выполнении композиции рабочего стола на GPU.</span><span class="sxs-lookup"><span data-stu-id="236c9-138">Note that the performance of desktop composition on Microsoft Basic Display Adapter (especially animations) may not be as smooth as when running desktop composition on a GPU.</span></span>

<span data-ttu-id="236c9-139">**Глубина цвета системы**</span><span class="sxs-lookup"><span data-stu-id="236c9-139">**System color depth**</span></span>

<span data-ttu-id="236c9-140">Компоновка рабочего стола не может быть выполнена, если для параметра Глубина цвета не задано значение 32 бит на пиксель.</span><span class="sxs-lookup"><span data-stu-id="236c9-140">Desktop Composition cannot run unless the color depth is set to 32 bits per pixel.</span></span> <span data-ttu-id="236c9-141">В Windows 7 глубина цвета системы может быть изменена в следующих сценариях:</span><span class="sxs-lookup"><span data-stu-id="236c9-141">In Windows 7 the color depth of the system can be changed in these scenarios:</span></span>

-   <span data-ttu-id="236c9-142">Для изменения системного цвета конечный пользователь использует панель управления Windows (экран) или третью панель управления.</span><span class="sxs-lookup"><span data-stu-id="236c9-142">An end user uses the Windows Display control panel or a 3rd party control panel to change the system color</span></span>
-   <span data-ttu-id="236c9-143">Конечный пользователь запускает приложение, которое изменяет глубину цвета системы с помощью общедоступного API.</span><span class="sxs-lookup"><span data-stu-id="236c9-143">An end user runs an app that changes the color depth of the system through a public API</span></span>

<span data-ttu-id="236c9-144">В отличие от Windows 7, Windows 8 не поддерживает глубину цвета, отличную от 32 бит на пиксель.</span><span class="sxs-lookup"><span data-stu-id="236c9-144">Unlike Windows 7, Windows 8 does not support color depth other than 32 bits per pixel.</span></span> <span data-ttu-id="236c9-145">Пользователь больше не может изменять глубину цвета системы с помощью панели управления.</span><span class="sxs-lookup"><span data-stu-id="236c9-145">The user can no longer change the color depth of the system by using the control panel.</span></span>

<span data-ttu-id="236c9-146">Кроме того, разработчики приложений не могут использовать интерфейсы API для изменения глубины цвета системы.</span><span class="sxs-lookup"><span data-stu-id="236c9-146">In addition, app developers cannot use APIs to change the color depth of the system.</span></span> <span data-ttu-id="236c9-147">Windows 8 обнаружит приложения, которые пытаются изменить глубину цвета системы на менее 32 бит на пиксель, и уведомить пользователя о том, что для запуска приложений необходимо применить оболочку совместимости приложения.</span><span class="sxs-lookup"><span data-stu-id="236c9-147">Windows 8 will detect apps that try to change the color depth of the system to less than 32 bits per pixel, and inform the user that an app compatibility shim must be applied to run the apps.</span></span> <span data-ttu-id="236c9-148">После подтверждения от пользователя применяется оболочка совместимости приложений, и оболочка режима виртуализации применяет режим низкого цвета к приложению, при этом система работает в 32 битах на пиксель.</span><span class="sxs-lookup"><span data-stu-id="236c9-148">After confirmation from the user, the app compatibility shim is applied and the shim virtualizes the low color mode to the app while keeping the system running at 32 bits per pixel.</span></span>

<span data-ttu-id="236c9-149">**WinSAT**</span><span class="sxs-lookup"><span data-stu-id="236c9-149">**WinSAT**</span></span>

<span data-ttu-id="236c9-150">В Windows 8 компоновка рабочего стола не зависит от оценок WinSAT.</span><span class="sxs-lookup"><span data-stu-id="236c9-150">In Windows 8, desktop composition does not depend on WinSAT scores.</span></span> <span data-ttu-id="236c9-151">Более того, WinSAT больше не включает оценку DWM.</span><span class="sxs-lookup"><span data-stu-id="236c9-151">Moreover, WinSAT no longer includes DWM assessment.</span></span>

<span data-ttu-id="236c9-152">**Совместимость приложений и действие пользователя**</span><span class="sxs-lookup"><span data-stu-id="236c9-152">**App compatibility and user action**</span></span>

<span data-ttu-id="236c9-153">В Windows 8:</span><span class="sxs-lookup"><span data-stu-id="236c9-153">In Windows 8:</span></span>

-   <span data-ttu-id="236c9-154">Все параметры отключения композиции рабочего стола, существующие в Windows 7, удаляются</span><span class="sxs-lookup"><span data-stu-id="236c9-154">All of the options for disabling desktop composition that exist in Window 7 are removed</span></span>
-   <span data-ttu-id="236c9-155">Композиция рабочего стола отвечает за составление всех тем</span><span class="sxs-lookup"><span data-stu-id="236c9-155">Desktop composition is responsible for composing all themes</span></span>
-   <span data-ttu-id="236c9-156">Приложения не могут использовать Двменаблекомпоситион для отключения композиции рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="236c9-156">Apps cannot use DwmEnableComposition to disable desktop composition.</span></span> <span data-ttu-id="236c9-157">Чтобы обеспечить обратную совместимость, вызов этого API вернет значение Success; Однако компоновка рабочего стола не отключена</span><span class="sxs-lookup"><span data-stu-id="236c9-157">In order to maintain backward compatibility, a call to this API will return success; however, desktop composition is not disabled</span></span>
-   <span data-ttu-id="236c9-158">Оболочка совместимости "Отключить композицию рабочего стола" удалена</span><span class="sxs-lookup"><span data-stu-id="236c9-158">The "Disable desktop composition" shim is removed</span></span>
-   <span data-ttu-id="236c9-159">Параметр "Отключить композицию рабочего стола" на вкладке "совместимость" диалогового окна свойств приложения удаляется</span><span class="sxs-lookup"><span data-stu-id="236c9-159">The option to "Disable desktop composition" from the compatibility tab of the Application Properties dialogue box is removed</span></span>

<span data-ttu-id="236c9-160">**Приложение использует драйвер зеркального отображения для удаленного взаимодействия**</span><span class="sxs-lookup"><span data-stu-id="236c9-160">**An app uses a mirroring driver for remoting**</span></span>

<span data-ttu-id="236c9-161">В Windows 8:</span><span class="sxs-lookup"><span data-stu-id="236c9-161">In Windows 8:</span></span>

-   <span data-ttu-id="236c9-162">Не поддерживает зеркальные драйверы для сценариев удаленного взаимодействия. Хотя большая часть существующих приложений, использующих зеркальные драйверы, должна продолжать работать из-за изменения инфраструктуры, необходимого для поддержки существующих зеркальных драйверов в Windows 8 с помощью DWM, некоторые функции или приложения, использующие зеркальные драйверы, могут не работать.</span><span class="sxs-lookup"><span data-stu-id="236c9-162">Does not support mirror drivers for remoting scenarios; while most of the existing apps that use mirror drivers should continue to work, due to the infrastructural change required to support existing mirror drivers in Windows 8 with DWM ON, some features or apps that use mirror drivers may not work</span></span>
-   <span data-ttu-id="236c9-163">Поддерживает API дублирования рабочего стола для разработчиков приложений, использующих зеркальные драйверы для сценариев удаленного взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="236c9-163">Does support Desktop Duplication APIs for app developers who use mirror drivers for remoting scenarios.</span></span>
-   <span data-ttu-id="236c9-164">Не поддерживает существующие зеркальные драйверы специальных возможностей</span><span class="sxs-lookup"><span data-stu-id="236c9-164">Does not support existing Accessibility Mirror Drivers</span></span>
-   <span data-ttu-id="236c9-165">Существующие зеркальные драйверы должны быть обновлены, чтобы обеспечить их совместимость с Windows 8.</span><span class="sxs-lookup"><span data-stu-id="236c9-165">Existing Mirror Drivers must be updated to ensure that they are compatible with Windows 8</span></span>

<span data-ttu-id="236c9-166">**Подключение к удаленному рабочему столу**</span><span class="sxs-lookup"><span data-stu-id="236c9-166">**Remote desktop connection**</span></span>

<span data-ttu-id="236c9-167">В Windows 8 для подключения к удаленному рабочему столу всегда включено Композиция рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="236c9-167">In Windows 8, desktop composition is always enabled for a remote desktop connection.</span></span> <span data-ttu-id="236c9-168">Клиентский компьютер, подключающийся к удаленному компьютеру под управлением Windows 8, всегда будет иметь включенную композицию рабочего стола для сеанса удаленного рабочего стола независимо от версии клиента Windows.</span><span class="sxs-lookup"><span data-stu-id="236c9-168">A client computer connecting to a Windows 8 remote computer will always get desktop composition enabled for the remote desktop session irrespective of the Windows client version.</span></span> <span data-ttu-id="236c9-169">Композиция рабочего стола поддерживается для нескольких мониторов на клиентском компьютере, а также для сеанса удаленного приложения.</span><span class="sxs-lookup"><span data-stu-id="236c9-169">Desktop composition is supported for multiple monitors on the client machine as well as for the remote app session.</span></span>

<span data-ttu-id="236c9-170">Кроме того, при подключении к удаленному компьютеру Windows 8 эти параметры в клиенте подключение к удаленному рабочему столу не вступают в силу:</span><span class="sxs-lookup"><span data-stu-id="236c9-170">In addition, when connecting to a Windows 8 remote computer, these settings in the Remote Desktop Connection client do not take effect:</span></span>

-   <span data-ttu-id="236c9-171">Глубина цвета</span><span class="sxs-lookup"><span data-stu-id="236c9-171">Color depth</span></span>
-   <span data-ttu-id="236c9-172">Флажок "включить композицию"</span><span class="sxs-lookup"><span data-stu-id="236c9-172">"Enable composition” checkbox</span></span>

<span data-ttu-id="236c9-173">Глубина цвета соединения всегда равна 32 бит на пиксель, а компоновка рабочего стола всегда включена.</span><span class="sxs-lookup"><span data-stu-id="236c9-173">The color depth of the connection is always set to 32 bits per pixel and desktop composition is always enabled.</span></span>

 

 




