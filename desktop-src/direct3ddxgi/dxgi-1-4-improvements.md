---
description: Следующие функции были добавлены или изменены в графической инфраструктуре Microsoft DirectX (DXGI) 1,4, в основном, для поддержки Direct3D 12.
ms.assetid: DEA901EA-B0F9-41D9-802C-ED1D6A7888E0
title: Усовершенствования DXGI 1,4
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 24e9a8a48dd026248afac7c1a7df23a99176adef
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104072179"
---
# <a name="dxgi-14-improvements"></a><span data-ttu-id="71449-103">Усовершенствования DXGI 1,4</span><span class="sxs-lookup"><span data-stu-id="71449-103">DXGI 1.4 Improvements</span></span>

<span data-ttu-id="71449-104">Следующие функции были добавлены или изменены в графической инфраструктуре Microsoft DirectX (DXGI) 1,4, в основном, для поддержки Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="71449-104">The following functionality has been added or changed in Microsoft DirectX Graphics Infrastructure (DXGI) 1.4, largely to support Direct3D 12.</span></span>

## <a name="cheaper-adapter-enumeration"></a><span data-ttu-id="71449-105">Более дешевое перечисление адаптеров</span><span class="sxs-lookup"><span data-stu-id="71449-105">Cheaper adapter enumeration</span></span>

<span data-ttu-id="71449-106">Для Direct3D 12 больше невозможно вернуться с устройства в [**идксгиадаптер**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter) , который использовался для его создания.</span><span class="sxs-lookup"><span data-stu-id="71449-106">For Direct3D 12, it’s no longer possible to backtrack from a device to the [**IDXGIAdapter**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter) that was used to create it.</span></span> <span data-ttu-id="71449-107">Кроме того, больше невозможно предоставить подпрограмму \_ типа драйвера D3D \_ \_ в [**D3D12CreateDevice**](/windows/win32/api/d3d12/nf-d3d12-d3d12createdevice).</span><span class="sxs-lookup"><span data-stu-id="71449-107">It’s also no longer possible to provide D3D\_DRIVER\_TYPE\_WARP into [**D3D12CreateDevice**](/windows/win32/api/d3d12/nf-d3d12-d3d12createdevice).</span></span> <span data-ttu-id="71449-108">Чтобы упростить разработку, можно использовать [**IDXGIFactory4**](/windows/win32/api/DXGI1_4/nn-dxgi1_4-idxgifactory4) для решения этих проблем.</span><span class="sxs-lookup"><span data-stu-id="71449-108">To make development easier, you can use [**IDXGIFactory4**](/windows/win32/api/DXGI1_4/nn-dxgi1_4-idxgifactory4) to deal with both of these.</span></span> <span data-ttu-id="71449-109">[**IDXGIFactory4:: енумадаптербилуид**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgifactory4-enumadapterbyluid) (разработанный для связывания с [**ID3D12Device:: жетадаптерлуид**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-getadapterluid)) позволяет приложению получать сведения о адаптере, в котором было создано устройство Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="71449-109">[**IDXGIFactory4::EnumAdapterByLuid**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgifactory4-enumadapterbyluid) (designed to be paired with [**ID3D12Device::GetAdapterLuid**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-getadapterluid)) enables an app to retrieve information about the adapter where a Direct3D 12 device was created.</span></span> <span data-ttu-id="71449-110">[**IDXGIFactory4:: енумварпадаптер**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgifactory4-enumwarpadapter) предоставляет адаптер, который можно предоставить **D3D12CreateDevice** для использования модуля подготовки отчетов.</span><span class="sxs-lookup"><span data-stu-id="71449-110">[**IDXGIFactory4::EnumWarpAdapter**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgifactory4-enumwarpadapter) provides an adapter which can be provided to **D3D12CreateDevice** to use the WARP renderer.</span></span>

## <a name="video-memory-budget-tracking"></a><span data-ttu-id="71449-111">Отслеживание бюджета видеопамяти</span><span class="sxs-lookup"><span data-stu-id="71449-111">Video memory budget tracking</span></span>

<span data-ttu-id="71449-112">Разработчикам приложений рекомендуется использовать систему резервирования видеопамяти, чтобы информировать ОС о объеме физической видеопамяти, который приложение не может переключиться.</span><span class="sxs-lookup"><span data-stu-id="71449-112">Application developers are encouraged to use a video memory reservation system, to inform the OS of the amount of physical video memory the app cannot go without.</span></span>

<span data-ttu-id="71449-113">Объем физической памяти, доступной для процесса, называется "бюджет видеопамяти".</span><span class="sxs-lookup"><span data-stu-id="71449-113">The amount of physical memory available for a process is known as the "video memory budget".</span></span> <span data-ttu-id="71449-114">Бюджет может заметно изменяться в фоновом режиме и выходом из спящего режима; и при переключении пользователя на другое приложение оно будет заметно меняться.</span><span class="sxs-lookup"><span data-stu-id="71449-114">The budget can fluctuate noticeably as background processes wake-up and sleep; and fluctuate dramatically when the user switches away to another application.</span></span> <span data-ttu-id="71449-115">Приложение может получать уведомления при изменении бюджета и опрашивать как текущий, так и потребляемый в данный момент объем памяти.</span><span class="sxs-lookup"><span data-stu-id="71449-115">The application can be notified when the budget changes and poll both the current budget and the currently consumed amount of memory.</span></span> <span data-ttu-id="71449-116">Если приложение не остается в пределах своего бюджета, процесс будет периодически заморожен, чтобы другие приложения выполнялись и (или) API-интерфейсы создания возвращали ошибку.</span><span class="sxs-lookup"><span data-stu-id="71449-116">If an application doesn’t stay within its budget, the process will be intermittently frozen to allow other applications to run and/or the creation APIs will return failure.</span></span> <span data-ttu-id="71449-117">Интерфейс [**IDXGIAdapter3**](/windows/win32/api/dxgi1_4/nn-dxgi1_4-idxgiadapter3) предоставляет методы, относящиеся к этой функции, в частности [**куеривидеомеморинфо**](/windows/win32/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-queryvideomemoryinfo) и [**регистервидеомеморибуджетчанженотификатионевент**](/windows/win32/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-registervideomemorybudgetchangenotificationevent).</span><span class="sxs-lookup"><span data-stu-id="71449-117">The [**IDXGIAdapter3**](/windows/win32/api/dxgi1_4/nn-dxgi1_4-idxgiadapter3) interface provides the methods pertaining to this functionality, in particular [**QueryVideoMemoryInfo**](/windows/win32/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-queryvideomemoryinfo) and [**RegisterVideoMemoryBudgetChangeNotificationEvent**](/windows/win32/api/dxgi1_4/nf-dxgi1_4-idxgiadapter3-registervideomemorybudgetchangenotificationevent).</span></span>

<span data-ttu-id="71449-118">Дополнительные сведения см. в разделе по Direct3D 12 в [местонахождение](../direct3d12/residency.md).</span><span class="sxs-lookup"><span data-stu-id="71449-118">For more information, refer to the Direct3D 12 topic on [Residency](../direct3d12/residency.md).</span></span>

## <a name="direct3d-12-swapchain-changes"></a><span data-ttu-id="71449-119">Изменения имеющуюся цепочку буферов Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="71449-119">Direct3D 12 Swapchain Changes</span></span>

<span data-ttu-id="71449-120">Некоторые из существующих функций Direct3D 11 имеющуюся цепочку буферов были признаны устаревшими для достижения снижения нагрузки на производительность в Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="71449-120">Some of the existing Direct3D 11 swapchain functionality was deprecated to achieve the overhead reductions in Direct3D 12.</span></span> <span data-ttu-id="71449-121">В то время как другие изменения были сделаны в соответствии с концепциями Direct3D 12 или обеспечивают лучшую поддержку функций Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="71449-121">While other changes were made to either align to Direct3D 12 concepts or provide better support for Direct3D 12 features.</span></span>

<span data-ttu-id="71449-122">**Идентификатор инвариантного буфера обмена**</span><span class="sxs-lookup"><span data-stu-id="71449-122">**Invariant Backbuffer Identity**</span></span>

<span data-ttu-id="71449-123">В Direct3D 11 приложения могут вызывать метод «вызывали [**буфер**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-getbuffer)» (0,...</span><span class="sxs-lookup"><span data-stu-id="71449-123">In Direct3D 11, applications could call [**GetBuffer**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-getbuffer)( 0, …</span></span> <span data-ttu-id="71449-124">) только один раз.</span><span class="sxs-lookup"><span data-stu-id="71449-124">) only once.</span></span> <span data-ttu-id="71449-125">Каждый вызов [**предоставляет**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-present) неявно измененный идентификатор ресурса возвращенного интерфейса.</span><span class="sxs-lookup"><span data-stu-id="71449-125">Every call to [**Present**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-present) implicitly changed the resource identity of the returned interface.</span></span> <span data-ttu-id="71449-126">Direct3D 12 больше не поддерживает неявное изменение удостоверения ресурса из-за ненужных ресурсов ЦП и структуры гибкого дескриптора ресурса.</span><span class="sxs-lookup"><span data-stu-id="71449-126">Direct3D 12 no longer supports that implicit resource identity change, due to the CPU overhead required and the flexible resource descriptor design.</span></span> <span data-ttu-id="71449-127">В результате приложение должно вручную вызвать метод «@ **buffer** » для каждого буфера, созданного с помощью имеющуюся цепочку буферов.</span><span class="sxs-lookup"><span data-stu-id="71449-127">As a result, the application must manually call **GetBuffer** for every each buffer created with the swapchain.</span></span> <span data-ttu-id="71449-128">Приложение должно вручную подготовиться к следующему буферу в последовательности после вызова метода **Present**.</span><span class="sxs-lookup"><span data-stu-id="71449-128">The application must manually render to the next buffer in the sequence after calling **Present**.</span></span> <span data-ttu-id="71449-129">Приложениям рекомендуется создавать кэш дескрипторов **для каждого буфера**, вместо того чтобы повторно создавать множество объектов.</span><span class="sxs-lookup"><span data-stu-id="71449-129">Applications are encouraged to create a cache of descriptors for each buffer, instead of re-creating many objects each **Present**.</span></span>

<span data-ttu-id="71449-130">**Поддержка нескольких адаптеров**</span><span class="sxs-lookup"><span data-stu-id="71449-130">**Multi-Adapter Support**</span></span>

<span data-ttu-id="71449-131">При создании имеющуюся цепочку буферов на адаптере с несколькими GPU эти буферы создаются на узле 1, и поддерживается только одна очередь команд.</span><span class="sxs-lookup"><span data-stu-id="71449-131">When a swapchain is created on a multi-GPU adapter, the backbuffers are all created on node 1 and only a single command queue is supported.</span></span> <span data-ttu-id="71449-132">[**ResizeBuffers1**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgiswapchain3-resizebuffers1) позволяет приложениям создавать буферы на разных узлах, позволяя использовать разные очереди команд для каждой из них.</span><span class="sxs-lookup"><span data-stu-id="71449-132">[**ResizeBuffers1**](/windows/win32/api/DXGI1_4/nf-dxgi1_4-idxgiswapchain3-resizebuffers1) enables applications to create backbuffers on different nodes, allowing a different command queue to be used with each.</span></span> <span data-ttu-id="71449-133">Эти возможности позволяют использовать альтернативные методы отрисовки кадров (АФР) с имеющуюся цепочку буферов.</span><span class="sxs-lookup"><span data-stu-id="71449-133">These capabilities enable Alternate Frame Rendering (AFR) techniques to be used with the swapchain.</span></span> <span data-ttu-id="71449-134">Ознакомьтесь с [системами с несколькими адаптерами](../direct3d12/multi-engine.md).</span><span class="sxs-lookup"><span data-stu-id="71449-134">Refer to [Multi-adapter systems](../direct3d12/multi-engine.md).</span></span>

<span data-ttu-id="71449-135">**Прочее**</span><span class="sxs-lookup"><span data-stu-id="71449-135">**Miscellaneous**</span></span>

-   <span data-ttu-id="71449-136">Объект очереди команд должен быть передан методам [**креатесвапчаин**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-createswapchain) вместо объекта устройства Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="71449-136">A command queue object must be passed to [**CreateSwapChain**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-createswapchain) methods instead of the Direct3D 12 device object.</span></span>
-   <span data-ttu-id="71449-137">Поддерживаются только следующие два эффекта перестановки перелистывания моделей:</span><span class="sxs-lookup"><span data-stu-id="71449-137">Only the following two flip model swap effects are supported:</span></span> <dl> <span data-ttu-id="71449-138">Отразить отправку при отработке \_ \_ \_ \_ отказа DXGI должно быть предпочтительнее, когда приложения полностью визуализируются по буферу обмена перед представлением или заинтересованы в поддержке сценариев с несколькими адаптерами.</span><span class="sxs-lookup"><span data-stu-id="71449-138">DXGI\_SWAP\_EFFECT\_FLIP\_DISCARD should be preferred when applications fully render over the backbuffer before presenting it or are interested in supporting multi-adapter scenarios easily.</span></span>  
    <span data-ttu-id="71449-139">\_ \_ \_ Последовательный экран с отражением эффектов подкачки \_ должен использоваться приложениями, которые полагаются на оптимизацию частичной презентации или регулярно читаются из ранее представленных задних буферов.</span><span class="sxs-lookup"><span data-stu-id="71449-139">DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL should be used by applications that rely on partial presentation optimizations or regularly read from previously presented backbuffers.</span></span>  
    </dl>
-   [**SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate) no longer exclusively owns the display, so user-initiated operating system elements can seamlessly appear in front of application output. Volume settings is an example of this.

## <a name="related-topics"></a><span data-ttu-id="71449-140">См. также</span><span class="sxs-lookup"><span data-stu-id="71449-140">Related topics</span></span>

[<span data-ttu-id="71449-141">Уровни функций оборудования Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="71449-141">Direct3D 12 Hardware Feature Levels</span></span>](../direct3d12/hardware-feature-levels.md)

[<span data-ttu-id="71449-142">Руководством по программированию для DXGI</span><span class="sxs-lookup"><span data-stu-id="71449-142">Programming Guide for DXGI</span></span>](dx-graphics-dxgi-overviews.md)
