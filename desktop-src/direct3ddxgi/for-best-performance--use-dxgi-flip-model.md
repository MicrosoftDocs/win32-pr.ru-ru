---
description: В этом разделе содержатся рекомендации для разработчиков по повышению производительности и эффективности в стеке презентации на современных версиях Windows.
ms.assetid: B6B92F4F-B1D0-40B9-987D-F0C0F2CC7AD1
title: Для достижения оптимальной производительности используйте модель перелистывания DXGI
ms.topic: article
ms.date: 05/31/2018
ms.custom: RS5
ms.openlocfilehash: 2a1e671c03f468fd62b0b5bad0f008f84e62ca3c
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "105701105"
---
# <a name="for-best-performance-use-dxgi-flip-model"></a><span data-ttu-id="f180f-103">Для достижения оптимальной производительности используйте модель перелистывания DXGI</span><span class="sxs-lookup"><span data-stu-id="f180f-103">For best performance, use DXGI flip model</span></span>

<span data-ttu-id="f180f-104">В этом разделе содержатся рекомендации для разработчиков по повышению производительности и эффективности в стеке презентации на современных версиях Windows.</span><span class="sxs-lookup"><span data-stu-id="f180f-104">This topic provides developer guidance on how to maximize performance and efficiency in the presentation stack on modern versions of Windows.</span></span> <span data-ttu-id="f180f-105">Он выбирает, где [перелистывание DXGI](dxgi-flip-model.md), [DirectX 12: режимы представления в Windows 10 (видео)](https://www.youtube.com/watch?v=E3wTajGZOsA)и [улучшения презентации в Windows 10: ранний взгляд (видео)](https://www.youtube.com/watch?v=nUZVV_mssWQ) остался слева.</span><span class="sxs-lookup"><span data-stu-id="f180f-105">It picks up where [DXGI flip model](dxgi-flip-model.md), [DirectX 12: Presentation Modes In Windows 10 (video)](https://www.youtube.com/watch?v=E3wTajGZOsA), and [Presentation Enhancements in Windows 10: An Early Look (video)](https://www.youtube.com/watch?v=nUZVV_mssWQ) left off.</span></span>

## <a name="call-to-action"></a><span data-ttu-id="f180f-106">Призыв к действию</span><span class="sxs-lookup"><span data-stu-id="f180f-106">Call to action</span></span>

<span data-ttu-id="f180f-107">Если вы по-прежнему **используете \_ отменяемый \_ результат \_ действия подкачки** или **\_ \_ \_ последовательное переключение DXGI** (</span><span class="sxs-lookup"><span data-stu-id="f180f-107">If you are still using **DXGI\_SWAP\_EFFECT\_DISCARD** or **DXGI\_SWAP\_EFFECT\_SEQUENTIAL** (a.k.a.</span></span> <span data-ttu-id="f180f-108">"БЛТ" модель представления), пора приостанавливаться!</span><span class="sxs-lookup"><span data-stu-id="f180f-108">the "blt" present model), it's time to stop!</span></span>

<span data-ttu-id="f180f-109">Переключение на **\_ \_ \_ \_ последовательную отразить эффекты подкачки** или **\_ \_ \_ отразить \_ отменяемый результат переключения DXGI**</span><span class="sxs-lookup"><span data-stu-id="f180f-109">Switching to **DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL** or **DXGI\_SWAP\_EFFECT\_FLIP\_DISCARD** (a.k.a.</span></span> <span data-ttu-id="f180f-110">модель перелистывания) обеспечивает лучшую производительность, низкое энергопотребление и предоставляет более широкий набор функций.</span><span class="sxs-lookup"><span data-stu-id="f180f-110">the flip model) will give better performance, lower power usage, and provide a richer set of features.</span></span> <span data-ttu-id="f180f-111">(Дополнительные сведения об этих значениях см. в разделе [ \_ \_ перечисление эффектов подкачки DXGI](/windows/desktop/api/DXGI/ne-dxgi-dxgi_swap_effect) .)</span><span class="sxs-lookup"><span data-stu-id="f180f-111">(See [DXGI\_SWAP\_EFFECT enumeration](/windows/desktop/api/DXGI/ne-dxgi-dxgi_swap_effect) for more information about these values.)</span></span>

<span data-ttu-id="f180f-112">Модель зеркального отражения — это то, что делает оконный режим фактически эквивалентным или лучшим по сравнению с классическим режимом «полноэкранный монопольный».</span><span class="sxs-lookup"><span data-stu-id="f180f-112">Flip model presents go as far as making windowed mode effectively equivalent or better when compared to the classic "fullscreen exclusive" mode.</span></span> <span data-ttu-id="f180f-113">На самом деле может потребоваться повторное рассмотрение того, действительно ли ваше приложение нуждается в полноэкранном режиме, так как преимущества перевернутого окна без границы модели включают более быстрый Alt-Tab переключения и лучшей интеграции с современными функциями отображения.</span><span class="sxs-lookup"><span data-stu-id="f180f-113">In fact, you may want to reconsider whether your application actually needs a fullscreen exclusive mode, since the benefits of a flip model borderless window include faster Alt-Tab switching and better integration with modern display features.</span></span>

<span data-ttu-id="f180f-114">Почему их нужно использовать сегодня?</span><span class="sxs-lookup"><span data-stu-id="f180f-114">Why now?</span></span> <span data-ttu-id="f180f-115">До обновления за Апрель 2018 БЛТ модель может привести к видимому разрыву при использовании гибридных конфигураций GPU, часто находящихся в высоких ноутбуках (см. [статью KB 3158621](https://support.microsoft.com/help/3158621/hybrid-graphics-and-vsync-results-in-graphic-tearing-in-some-games-and)).</span><span class="sxs-lookup"><span data-stu-id="f180f-115">Prior to the April 2018 Update, blt model presents could result in visible tearing when used on hybrid GPU configurations, often found in high-end laptops (see [KB 3158621](https://support.microsoft.com/help/3158621/hybrid-graphics-and-vsync-results-in-graphic-tearing-in-some-games-and)).</span></span> <span data-ttu-id="f180f-116">В обновлении за Апрель 2018 это уничтожение было исправлено за счет дополнительной работы.</span><span class="sxs-lookup"><span data-stu-id="f180f-116">In the April 2018 Update, this tearing has been fixed, at the cost of some additional work.</span></span> <span data-ttu-id="f180f-117">Если вы выполняете БЛТ на высоком уровне фрамератес в гибридных графических процессорах, особенно при высоком разрешении, например 4 КБ, эта дополнительная работа может повлиять на общую производительность.</span><span class="sxs-lookup"><span data-stu-id="f180f-117">If you are doing blt presents at high framerates across hybrid GPUs, especially at high resolutions such as 4K, this additional work may affect overall performance.</span></span> <span data-ttu-id="f180f-118">Чтобы обеспечить оптимальную производительность этих систем, переключитесь с БЛТ на модель зеркального отображения.</span><span class="sxs-lookup"><span data-stu-id="f180f-118">To maintain best performance on these systems, switch from the blt to the flip present model.</span></span> <span data-ttu-id="f180f-119">Кроме того, рассмотрите возможность уменьшения разрешения имеющуюся цепочку буферов, особенно в том случае, если это не основная точка взаимодействия с пользователем (как это часто случается с предварительной версией ОС).</span><span class="sxs-lookup"><span data-stu-id="f180f-119">Additionally, consider reducing the resolution of your swapchain, especially if it isn’t the primary point of user interaction (as is often the case with VR preview windows).</span></span>

## <a name="a-brief-history"></a><span data-ttu-id="f180f-120">Краткий журнал</span><span class="sxs-lookup"><span data-stu-id="f180f-120">A brief history</span></span>

<span data-ttu-id="f180f-121">Что такое модель перелистывания?</span><span class="sxs-lookup"><span data-stu-id="f180f-121">What is the flip model?</span></span> <span data-ttu-id="f180f-122">Каков альтернативный вариант?</span><span class="sxs-lookup"><span data-stu-id="f180f-122">What is the alternative?</span></span>

<span data-ttu-id="f180f-123">До Windows 7 единственным способом представления содержимого из D3D было «БЛТ» или скопировать его в область, которая принадлежит окну или экрану.</span><span class="sxs-lookup"><span data-stu-id="f180f-123">Prior to Windows 7, the only way to present content from D3D was to "blt" or copy it into a surface which was owned by the window or screen.</span></span> <span data-ttu-id="f180f-124">Начиная с D3D9's ФЛИПЕКС swap и поступающих на DXGI через \_ последовательное переключение в Windows 8, мы разработали более эффективный способ размещения содержимого на экране путем совместного использования его непосредственно с компоновщиком настольных систем с минимальными копиями.</span><span class="sxs-lookup"><span data-stu-id="f180f-124">Beginning with D3D9’s FLIPEX swap effect, and coming to DXGI through the FLIP\_SEQUENTIAL swap effect in Windows 8, we’ve developed a more efficient way to put content on screen by sharing it directly with the desktop compositor, with minimal copies.</span></span> <span data-ttu-id="f180f-125">Общие сведения о технологии см. в разделе [модель перелистывания DXGI](dxgi-flip-model.md) .</span><span class="sxs-lookup"><span data-stu-id="f180f-125">See [DXGI flip model](dxgi-flip-model.md) for a high level overview of the technology.</span></span>

<span data-ttu-id="f180f-126">Такая оптимизация возможна благодаря DWM (диспетчер окон рабочего стола), который является компоновщиком, который управляет рабочим столом Windows.</span><span class="sxs-lookup"><span data-stu-id="f180f-126">This optimization is possible thanks to the DWM (Desktop Window Manager), which is the compositor that drives the Windows desktop.</span></span>

## <a name="when-should-i-use-the-blt-model"></a><span data-ttu-id="f180f-127">Когда следует использовать модель БЛТ?</span><span class="sxs-lookup"><span data-stu-id="f180f-127">When should I use the blt model?</span></span>

<span data-ttu-id="f180f-128">Существует одна часть функциональности, которую не предоставляет модель перелистывания: возможность иметь несколько различных интерфейсов API, которые создают содержимое, которое все объединено в один и тот же **HWND**, на основе представления.</span><span class="sxs-lookup"><span data-stu-id="f180f-128">There is one piece of functionality that the flip model does not provide: the ability to have multiple different APIs producing content, which all layer together into the same **HWND**, on a present-by-present basis.</span></span> <span data-ttu-id="f180f-129">В качестве примера можно использовать D3D для рисования фона окна, а затем [Windows GDI](/windows/desktop/gdi/windows-gdi) для нарисовать что-либо поверх или использовать два разных графических API или два цепочек переключений из одного API для создания чередующихся кадров.</span><span class="sxs-lookup"><span data-stu-id="f180f-129">An example of this would be using D3D to draw a window background, and then [Windows GDI](/windows/desktop/gdi/windows-gdi) to draw something on top, or using two different graphics APIs, or two swapchains from the same API, to produce alternating frames.</span></span> <span data-ttu-id="f180f-130">Если взаимодействие на уровне **HWND** не требуется для компонентов графики, то модель БЛТ не требуется.</span><span class="sxs-lookup"><span data-stu-id="f180f-130">If you don’t require **HWND**-level interop between graphics components, then you don’t need blt model.</span></span>

<span data-ttu-id="f180f-131">Существует вторая часть функциональных возможностей, которые не были предоставлены в исходной модели эргономичного перелистывания, но доступны сейчас, что является возможностью присутствия в нерегулируемой частоте кадров.</span><span class="sxs-lookup"><span data-stu-id="f180f-131">There is a second piece of functionality that was not provided in the original flip model design, but is available now, which is the ability to present at an unthrottled framerate.</span></span> <span data-ttu-id="f180f-132">Для приложения, использующего интервал синхронизации 0, не рекомендуется переключаться на функцию перелистывания модели, если только API [IDXGIFactory5:: чеккфеатуресуппорт](/windows/desktop/api/DXGI1_5/nf-dxgi1_5-idxgifactory5-checkfeaturesupport) недоступен, а отчеты, поддерживающие **функцию DXGI, \_ \_ \_ допускают \_ разрывы**.</span><span class="sxs-lookup"><span data-stu-id="f180f-132">For an application using sync interval 0, we do not recommend switching to flip model unless the [IDXGIFactory5::CheckFeatureSupport](/windows/desktop/api/DXGI1_5/nf-dxgi1_5-idxgifactory5-checkfeaturesupport) API is available, and reports support for **DXGI\_FEATURE\_PRESENT\_ALLOW\_TEARING**.</span></span> <span data-ttu-id="f180f-133">Эта функция практически повсеместна в последних версиях Windows 10 и современного оборудования.</span><span class="sxs-lookup"><span data-stu-id="f180f-133">This feature is nearly ubiquitous on recent versions of Windows 10 and on modern hardware.</span></span>

## <a name="directflip"></a><span data-ttu-id="f180f-134">директфлип</span><span class="sxs-lookup"><span data-stu-id="f180f-134">DirectFlip</span></span>

<span data-ttu-id="f180f-135">Если вы Просмотрели [DirectX 12: режимы представления в Windows 10](https://www.youtube.com/watch?v=E3wTajGZOsA), вы увидите разговор о "Direct Redirection" и "независимый переворот".</span><span class="sxs-lookup"><span data-stu-id="f180f-135">If you’ve watched [DirectX 12: Presentation Modes In Windows 10](https://www.youtube.com/watch?v=E3wTajGZOsA), you’ll see talk about "Direct Flip" and "Independent Flip."</span></span> <span data-ttu-id="f180f-136">Это оптимизации, которые включены для приложений, использующих перелистывание Model цепочек переключений.</span><span class="sxs-lookup"><span data-stu-id="f180f-136">These are optimizations that are enabled for applications using flip model swapchains.</span></span> <span data-ttu-id="f180f-137">В зависимости от конфигурации окна и буфера можно обходить композицию рабочего стола полностью и напрямую отсылать на экран фреймы приложения, так же как и в монопольном полноэкранном режиме.</span><span class="sxs-lookup"><span data-stu-id="f180f-137">Depending on window and buffer configuration, it is possible to bypass desktop composition entirely and directly send application frames to the screen, in the same way that exclusive fullscreen does.</span></span>

<span data-ttu-id="f180f-138">В эти дни оптимизация может действовать в одном из трех сценариев, в порядке возрастания функциональных возможностей:</span><span class="sxs-lookup"><span data-stu-id="f180f-138">These days, these optimizations can engage in one of 3 scenarios, in order of increasing functionality:</span></span>

1.  <span data-ttu-id="f180f-139">**Директфлип**: буферы имеющуюся цепочку буферов соответствуют размерам экрана, а область клиента окна охватывает экран.</span><span class="sxs-lookup"><span data-stu-id="f180f-139">**DirectFlip**: Your swapchain buffers match the screen dimensions, and your window client region covers the screen.</span></span> <span data-ttu-id="f180f-140">Вместо использования DWM имеющуюся цепочку буферов для отображения на экране используется приложение имеющуюся цепочку буферов.</span><span class="sxs-lookup"><span data-stu-id="f180f-140">Instead of using the DWM swapchain to display on the screen, the application swapchain is used.</span></span>
2.  <span data-ttu-id="f180f-141">**Директфлип с панелью фиттерс**: область клиента окна охватывает экран, а буферы имеющуюся цепочку буферов находятся в пределах определенного аппаратного фактора масштабирования (например, от 0,25 x до 4X) экрана.</span><span class="sxs-lookup"><span data-stu-id="f180f-141">**DirectFlip with panel fitters**: Your window client region covers the screen, and your swapchain buffers are within some hardware-dependent scaling factor (for example, 0.25x to 4x) of the screen.</span></span> <span data-ttu-id="f180f-142">Оборудование для сканирования GPU используется для масштабирования буфера при его отправке на экран.</span><span class="sxs-lookup"><span data-stu-id="f180f-142">The GPU scanout hardware is used to scale your buffer while sending it to the display.</span></span>
3.  <span data-ttu-id="f180f-143">**Директфлип с наложением нескольких плоскостей (MPO)**. буферы имеющуюся цепочку буферов находятся в пределах аппаратно-зависимого коэффициента масштабирования размеров окна.</span><span class="sxs-lookup"><span data-stu-id="f180f-143">**DirectFlip with multi-plane overlay (MPO)**: Your swapchain buffers are within some hardware-dependent scaling factor of your window dimensions.</span></span> <span data-ttu-id="f180f-144">DWM может зарезервировать выделенную аппаратную плоскость сканирования для приложения, которая затем сканируется и может растягиваться в подобласти с альфа-смешением экрана.</span><span class="sxs-lookup"><span data-stu-id="f180f-144">The DWM is able to reserve a dedicated hardware scanout plane for your application, which is then scanned out and potentially stretched to an alpha-blended sub-region of the screen.</span></span>

<span data-ttu-id="f180f-145">При использовании модели перелистывания с окнами приложение может запросить поддержку оборудования для различных сценариев Директфлип и реализовать различные типы динамического масштабирования с помощью [IDXGIOutput6:: чеккхардварекомпоситионсуппорт](/windows/desktop/api/DXGI1_6/nf-dxgi1_6-idxgioutput6-checkhardwarecompositionsupport).</span><span class="sxs-lookup"><span data-stu-id="f180f-145">With the windowed flip model, the application can query hardware support for different DirectFlip scenarios and implement different types of dynamic scaling via the use of [IDXGIOutput6::CheckHardwareCompositionSupport](/windows/desktop/api/DXGI1_6/nf-dxgi1_6-idxgioutput6-checkhardwarecompositionsupport).</span></span> <span data-ttu-id="f180f-146">Необходимо помнить, что, если используются панели фиттерс, курсор может пострадать от побочных эффектов, которые указываются с помощью **\_ \_ флага поддержки компоновки оборудования DXGI, \_ \_ \_ \_ растянутого курсором**.</span><span class="sxs-lookup"><span data-stu-id="f180f-146">One caveat to keep in mind is that if panel fitters are utilized, it’s possible for the cursor to suffer stretching side effects, which is indicated via **DXGI\_HARDWARE\_COMPOSITION\_SUPPORT\_FLAG\_CURSOR\_STRETCHED**.</span></span>

<span data-ttu-id="f180f-147">После того как имеющуюся цепочку буферов был "Директфлиппед", DWM может вернуться в спящий режим и вывести его только при изменении вне приложения.</span><span class="sxs-lookup"><span data-stu-id="f180f-147">Once your swapchain has been "DirectFlipped," then the DWM can go to sleep, and only wake up when something changes outside of your application.</span></span> <span data-ttu-id="f180f-148">Кадры приложения отправляются непосредственно на экран независимо друг от друга с той же эффективностью, что и в полноэкранном режиме.</span><span class="sxs-lookup"><span data-stu-id="f180f-148">Your application frames are sent directly to the screen, independently, with the same efficiency as fullscreen exclusive.</span></span> <span data-ttu-id="f180f-149">Это "независимый" перелистывание и может действовать во всех приведенных выше сценариях.</span><span class="sxs-lookup"><span data-stu-id="f180f-149">This is "Independent Flip," and can engage in all of the above scenarios.</span></span> <span data-ttu-id="f180f-150">Если другое содержимое рабочего стола поверх остальных окон, DWM может легко перейти обратно в составной режим, эффективно «обратное создание» содержимого поверх приложения перед его отражением или использовать MPO для поддержания независимого режима отражения.</span><span class="sxs-lookup"><span data-stu-id="f180f-150">If other desktop contents come on top, the DWM can either seamlessly transition back to composed mode, efficiently "reverse compose" the contents on top of the application before flipping it, or leverage MPO to maintain the independent flip mode.</span></span>

<span data-ttu-id="f180f-151">Ознакомьтесь с инструментом [пресентмон](https://github.com/GameTechDev/PresentMon) , чтобы получить представление о том, какой из вышеперечисленных использован.</span><span class="sxs-lookup"><span data-stu-id="f180f-151">Check out the [PresentMon](https://github.com/GameTechDev/PresentMon) tool to get insight into which of the above was used.</span></span>

## <a name="what-else-is-new-in-the-flip-model"></a><span data-ttu-id="f180f-152">Что еще нового в модели перелистывания?</span><span class="sxs-lookup"><span data-stu-id="f180f-152">What else is new in the flip model?</span></span>

<span data-ttu-id="f180f-153">Помимо описанных выше усовершенствований, которые применяются к стандартным цепочек переключений без каких-либо специальных возможностей, существует несколько функций, доступных для перелистывания приложений модели для использования:</span><span class="sxs-lookup"><span data-stu-id="f180f-153">In addition to the above improvements, which apply to standard swapchains without anything special, there are several features available for flip model applications to use:</span></span>

-   <span data-ttu-id="f180f-154">Уменьшение задержки с помощью **\_ \_ \_ \_ \_ \_ ожидающего \_ объекта блокировки цепочки ожидания в кадре**.</span><span class="sxs-lookup"><span data-stu-id="f180f-154">Decreasing latency using **DXGI\_SWAP\_CHAIN\_FLAG\_FRAME\_LATENCY\_WAITABLE\_OBJECT**.</span></span> <span data-ttu-id="f180f-155">При переходе в независимый режим перелистывания можно получить до 1 кадра задержки в последних версиях Windows с возможностью корректного перехода на минимально возможный объем при составлении.</span><span class="sxs-lookup"><span data-stu-id="f180f-155">When in Independent Flip mode, you can get down to 1 frame of latency on recent versions of Windows, with graceful fallback to the minimum possible when composed.</span></span>
    -   <span data-ttu-id="f180f-156">Предостережение. возникла ошибка, которая подавала как минимум два кадра задержки в юбилейном обновлении Windows 10 и более ранних версиях.</span><span class="sxs-lookup"><span data-stu-id="f180f-156">Caveat: there was an issue that gave a minimum of two frames of latency in the Windows 10 Anniversary Update and earlier.</span></span> <span data-ttu-id="f180f-157">Дополнительные сведения см. в [этом разделе форума](https://www.gamedev.net/forums/topic/686507-windows-10-dx12-low-latency-tearing-free-rendering/) .</span><span class="sxs-lookup"><span data-stu-id="f180f-157">See [this forum topic](https://www.gamedev.net/forums/topic/686507-windows-10-dx12-low-latency-tearing-free-rendering/) for more information.</span></span> <span data-ttu-id="f180f-158">Это исправлено в обновлении создателя отправителя.</span><span class="sxs-lookup"><span data-stu-id="f180f-158">This is fixed in the Fall Creator’s Update.</span></span>
-   <span data-ttu-id="f180f-159">**DXGI \_ Отменять \_ \_ перелистывание эффектов перелистывания \_** включает режим обратной композиции прямого отражения, что приводит к меньшей общей работе при отображении рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="f180f-159">**DXGI\_SWAP\_EFFECT\_FLIP\_DISCARD** enables a "reverse composition" mode of direct flip, which results in less overall work to display the desktop.</span></span> <span data-ttu-id="f180f-160">DWM может порисован на буферах приложений и отправить их на экран, а не выполнять полную копию в своих собственных цепочек переключений.</span><span class="sxs-lookup"><span data-stu-id="f180f-160">The DWM can scribble on the application buffers and send those to the screen, instead of performing a full copy into their own swapchains.</span></span>
-   <span data-ttu-id="f180f-161">**DXGI \_ \_Флаг цепочки ПОДкачки \_ \_ допускает \_ разрывы** , что может привести к более низкой задержке, чем у ожидающего объекта, даже в окне в системах с поддержкой наложения нескольких плоскостей.</span><span class="sxs-lookup"><span data-stu-id="f180f-161">**DXGI\_SWAP\_CHAIN\_FLAG\_ALLOW\_TEARING** can enable even lower latency than the waitable object, even in a window on systems with multi-plane overlay support.</span></span>
-   <span data-ttu-id="f180f-162">Приложения имеют контроль над масштабированием содержимого, которое происходит во время изменения размера окна с использованием свойства [ \_ масштабирования DXGI](/windows/desktop/api/DXGI1_2/ne-dxgi1_2-dxgi_scaling) , заданного во время создания имеющуюся цепочку буферов.</span><span class="sxs-lookup"><span data-stu-id="f180f-162">Applications have control over content scaling that happens during window resize, using the [DXGI\_SCALING](/windows/desktop/api/DXGI1_2/ne-dxgi1_2-dxgi_scaling) property set during swapchain creation.</span></span>
-   <span data-ttu-id="f180f-163">Содержимое в форматах HDR (R10G10B10A2 \_ UNORM или R16G16B16A16 \_ float) не будет открепляться, если оно не состоялось на рабочем столе SDR.</span><span class="sxs-lookup"><span data-stu-id="f180f-163">Content in HDR formats (R10G10B10A2\_UNORM or R16G16B16A16\_FLOAT) isn’t clamped unless it’s composed to an SDR desktop.</span></span>
-   <span data-ttu-id="f180f-164">Представление статистики доступно в оконном режиме.</span><span class="sxs-lookup"><span data-stu-id="f180f-164">Present statistics are available in windowed mode.</span></span>
-   <span data-ttu-id="f180f-165">Существует большая совместимость с моделью приложения UWP (универсальная платформа Windows) и DX12, так как они совместимы только с моделью перелистывания.</span><span class="sxs-lookup"><span data-stu-id="f180f-165">There is greater compatibility with the UWP (Universal Windows Platform) application model and DX12 since these are only compatible with the flip model.</span></span>

## <a name="what-do-i-have-to-do-to-use-the-flip-model"></a><span data-ttu-id="f180f-166">Что нужно сделать для использования модели перелистывания?</span><span class="sxs-lookup"><span data-stu-id="f180f-166">What do I have to do to use the flip model?</span></span>

<span data-ttu-id="f180f-167">Отражение модели цепочек переключений имеет несколько дополнительных требований поверх БЛТ цепочек переключений:</span><span class="sxs-lookup"><span data-stu-id="f180f-167">Flip model swapchains have a few additional requirements on top of blt swapchains:</span></span>

1.  <span data-ttu-id="f180f-168">Число буферов должно быть не меньше 2.</span><span class="sxs-lookup"><span data-stu-id="f180f-168">The buffer count must be at least 2.</span></span>
2.  <span data-ttu-id="f180f-169">После [выполнения вызовов](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-present) задний буфер должен быть явно привязан к непосредственному КОНТЕКСТу D3D11, прежде чем его можно будет снова использовать.</span><span class="sxs-lookup"><span data-stu-id="f180f-169">After [Present](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-present) calls, the back buffer needs to explicitly be re-bound to the D3D11 immediate context before it can be used again.</span></span>
3.  <span data-ttu-id="f180f-170">После вызова [сетфуллскринстате](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate)приложение должно вызвать [Ресизебуфферс](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) перед его **присутствием**.</span><span class="sxs-lookup"><span data-stu-id="f180f-170">After calling [SetFullscreenState](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate), the application must call [ResizeBuffers](/windows/desktop/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) before **Present**.</span></span>
4.  <span data-ttu-id="f180f-171">MSAA (многовыборочное сглаживание) цепочек переключений не поддерживается напрямую в модели перелистывания, поэтому приложению потребуется выполнить решение MSAA, прежде чем выдать **представление**.</span><span class="sxs-lookup"><span data-stu-id="f180f-171">MSAA (multisample anti-aliasing) swapchains are not directly supported in the flip model, so the application will need to do an MSAA resolve before issuing the **Present**.</span></span>

## <a name="how-to-choose-the-right-rendering-and-presentation-resolutions"></a><span data-ttu-id="f180f-172">Как выбрать правильные разрешения отрисовки и представления</span><span class="sxs-lookup"><span data-stu-id="f180f-172">How to choose the right rendering and presentation resolutions</span></span>

<span data-ttu-id="f180f-173">Традиционным шаблоном для приложений в прошлом было предоставление пользователю списка разрешений на выбор, когда пользователь выбирает эксклюзивный полноэкранный режим.</span><span class="sxs-lookup"><span data-stu-id="f180f-173">The traditional pattern for applications in the past has been to provide the user with a list of resolutions to choose from when the user selects exclusive fullscreen mode.</span></span> <span data-ttu-id="f180f-174">Благодаря способности современных экранов легко начать масштабирование содержимого, рассмотрите возможность предоставления пользователям возможности выбора разрешения отрисовки для масштабирования производительности, независимо от разрешения вывода и даже в оконном режиме.</span><span class="sxs-lookup"><span data-stu-id="f180f-174">With the ability of modern displays to seamlessly begin scaling content, consider providing users with the ability to choose a rendering resolution for performance scaling, independent from an output resolution, and even in windowed mode.</span></span> <span data-ttu-id="f180f-175">Более того, приложения должны использовать **IDXGIOutput6:: чеккхардварекомпоситионсуппорт** , чтобы определить, нужно ли масштабировать содержимое перед его представлением или они должны позволить оборудованию выполнять масштабирование.</span><span class="sxs-lookup"><span data-stu-id="f180f-175">Furthermore, applications should leverage **IDXGIOutput6::CheckHardwareCompositionSupport** to determine if they need to scale the content before presenting it, or if they should let the hardware do the scaling for them.</span></span>

<span data-ttu-id="f180f-176">Может потребоваться миграция содержимого с одного GPU на другой в ходе текущей операции или композиции.</span><span class="sxs-lookup"><span data-stu-id="f180f-176">Your content may need to be migrated from one GPU to another as part of the present or composition operation.</span></span> <span data-ttu-id="f180f-177">Это часто справедливо для ноутбуков с несколькими GPU или систем с внешними GPU, подключенными к.</span><span class="sxs-lookup"><span data-stu-id="f180f-177">This is often true on multi-GPU laptops, or systems with external GPUs plugged in.</span></span> <span data-ttu-id="f180f-178">Так как эти конфигурации становятся более распространенными, и как отображение с высоким разрешением становится более распространенным, стоимость предоставления полного разрешения имеющуюся цепочку буферов возрастает.</span><span class="sxs-lookup"><span data-stu-id="f180f-178">As these configurations get more common, and as high-resolution displays become more common, the cost of presenting a full resolution swapchain increases.</span></span> <span data-ttu-id="f180f-179">Если целевой объект имеющуюся цепочку буферов не является основным моментом взаимодействия с пользователем, как это часто случается с названиями VR, которые представляют собой двухмерную предварительную версию сцены VR, в дополнительное окно, рассмотрите возможность использования более низкого разрешения имеющуюся цепочку буферов, чтобы уменьшить объем пропускной способности, которую необходимо передать на разных GPU.</span><span class="sxs-lookup"><span data-stu-id="f180f-179">If the target of your swapchain isn’t the primary point of user interaction, as is often the case with VR titles that present a 2D preview of the VR scene into a secondary window, consider using a lower resolution swapchain to minimize the amount of bandwidth that needs to be transferred across different GPUs.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="f180f-180">Другие замечания</span><span class="sxs-lookup"><span data-stu-id="f180f-180">Other considerations</span></span>

<span data-ttu-id="f180f-181">В первый раз, когда GPU запрашивает запись в задний буфер имеющуюся цепочку буферов, это время, в течение которого GPU будет ожидать освобождения буфера.</span><span class="sxs-lookup"><span data-stu-id="f180f-181">The first time you ask the GPU to write to the swapchain back buffer is the time that the GPU will stall waiting for the buffer to become available.</span></span> <span data-ttu-id="f180f-182">По возможности откладывайте этот момент к кадру, как можно раньше.</span><span class="sxs-lookup"><span data-stu-id="f180f-182">When possible, delay this point as far into the frame as possible.</span></span>

 

 
