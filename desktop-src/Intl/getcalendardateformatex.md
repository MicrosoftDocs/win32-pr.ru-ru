---
description: Не рекомендуется.
ms.assetid: eb2622bc-a98d-42bd-ab59-7a849000d79d
title: Функция Жеткалендардатеформатекс
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- GetCalendarDateFormatEx
api_type:
- DllExport
api_location:
- Kernel32.dll
- API-MS-Win-Core-calendar-l1-1-0.dll
- kernel32legacy.dll
ms.openlocfilehash: db6bf4fc20c24e91a0af29dc8ee81f7a77ef5cb1c0f0e0f6c5a0a792e52eb903
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119068224"
---
# <a name="getcalendardateformatex-function"></a>Функция Жеткалендардатеформатекс

Не рекомендуется. Извлекает правильно отформатированную строку даты для указанного языкового стандарта, используя указанные дату и календарь. Пользователь может указать краткий формат даты, длинный формат даты, год в формате месяца или шаблон пользовательского формата.

> [!Note]  
> Эта функция может извлекать данные, которые изменяются между выпусками, например из-за пользовательского языкового стандарта. Если приложение должно сохранять или передавать данные, см. раздел [использование постоянных данных языкового стандарта](using-persistent-locale-data.md).

 

## <a name="syntax"></a>Синтаксис


```C++
BOOL GetCalendarDateFormatEx(
  _In_        LPCWSTR       lpszLocale,
  _In_        DWORD         dwFlags,
  _In_  const LPCALDATETIME lpCalDateTime,
  _In_        LPCWSTR       lpFormat,
  _Out_       LPWSTR        lpDateStr,
  _In_        int           cchDate
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*лпсзлокале* \[ окне\]
</dt> <dd>

Указатель на имя языкового стандарта или одно из следующих предопределенных значений.

-   [\_инвариантное имя локали \_](locale-name-constants.md)
-   [имя языкового стандарта \_ \_ \_ по умолчанию](locale-name-constants.md)
-   [имя языкового стандарта \_ \_ \_ по умолчанию](locale-name-constants.md)

</dd> <dt>

*dwFlags* \[ окне\]
</dt> <dd>

Флаги, задающие параметры формата даты. Если *лпформат* не имеет значение **null**, этот параметр должен иметь значение 0. Если *лпформат* имеет значение **null**, приложение может указать сочетание следующих значений и [ \_ наусероверриде локали](locale-nouseroverride.md).



| Значение                                                                                                                                                               | Значение                                                                                                                       |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| <span id="DATE_SHORTDATE"></span><span id="date_shortdate"></span><dl> <dt>**Дата \_ шортдате**</dt> </dl>    | Используйте краткий формат даты. Это значение по умолчанию. Это значение нельзя использовать с DATE \_ лонгдате или Date \_ еармонс. <br/> |
| <span id="DATE_LONGDATE"></span><span id="date_longdate"></span><dl> <dt>**Дата \_ лонгдате**</dt> </dl>       | Используйте длинный формат даты. Это значение нельзя использовать с DATE \_ шортдате или Date \_ еармонс. <br/>                      |
| <span id="DATE_YEARMONTH"></span><span id="date_yearmonth"></span><dl> <dt>**Дата \_ еармонс**</dt> </dl>    | Используйте формат "год/месяц". Это значение нельзя использовать с DATE \_ шортдате или Date \_ лонгдате.<br/>                       |
| <span id="DATE_LTRREADING"></span><span id="date_ltrreading"></span><dl> <dt>**Дата \_ лтрреадинг**</dt> </dl> | Добавьте метки для макета чтения слева направо. Это значение нельзя использовать с параметром DATE \_ RTLREADING.<br/>                       |
| <span id="DATE_RTLREADING"></span><span id="date_rtlreading"></span><dl> <dt>**Дата \_ RTLREADING**</dt> </dl> | Добавьте метки для макета чтения справа налево. Это значение нельзя использовать с DATE \_ лтрреадинг<br/>                        |



 

</dd> <dt>

*лпкалдатетиме* \[ окне\]
</dt> <dd>

Указатель на структуру [**калдатетиме**](caldatetime.md) , которая содержит дату и сведения календаря для форматирования.

</dd> <dt>

*лпформат* \[ окне\]
</dt> <dd>

Указатель на строку формата Picture, используемую для формирования строки даты. Возможные значения для строки формата изображения определены в формате " [день", "месяц", "год" и "формат эры](day--month--year--and-era-format-pictures.md)".

Строка формата рисунка должна завершаться нулем. Функция использует языковой стандарт только для сведений, не указанных в строке формата Picture, например названия дня и месяца для языкового стандарта. Приложение задает для этого параметра **значение NULL** , если функция должна использовать формат даты указанного языкового стандарта.

</dd> <dt>

*лпдатестр* \[ заполняет\]
</dt> <dd>

Указатель на буфер, в котором эта функция получает форматированную строку даты.

</dd> <dt>

*кчдате* \[ окне\]
</dt> <dd>

Размер (в символах) буфера *лпдатестр* . Кроме того, приложение может установить этот параметр в значение 0. В этом случае функция возвращает количество символов, необходимых для хранения форматированной строки даты, а параметр *лпдатестр* не используется.

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Возвращает число символов, записанных в буфер *лпдатестр* в случае успеха. Если параметр *кчдате* имеет значение 0, функция возвращает количество символов, необходимых для хранения форматированной строки даты, включая завершающий нуль-символ.

Эта функция возвращает 0, если она не выполнена. Чтобы получить расширенные сведения об ошибке, приложение может вызвать [**GetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror), которая может возвращать один из следующих кодов ошибок:

-   \_Дата ошибки \_ за пределами \_ \_ диапазона. Указанная дата находится за пределами диапазона.
-   Ошибка \_ : недостаточный \_ Размер буфера. Указанный размер буфера не достаточен или имеет неправильное значение **null**.
-   Ошибка \_ : недопустимые \_ флаги. Указаны недопустимые значения флагов.
-   Ошибка \_ : недопустимый \_ параметр. Любое из значений параметров было недопустимым.

## <a name="remarks"></a>Remarks

Самая ранняя дата, поддерживаемая этой функцией, — 1 января 1601 г.

Эта функция не имеет связанного файла заголовка или файла библиотеки. Приложение может вызвать [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) с именем DLL (Kernel32.dll) для получения маркера модуля. Затем он может вызвать [**GetProcAddress**](/windows/win32/api/libloaderapi/nf-libloaderapi-getprocaddress) с этим обработчиком модуля и именем этой функции, чтобы получить адрес функции.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|-----------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows \[Только классические приложения Vista\]<br/>                                          |
| Минимальная версия сервера<br/> | Windows Только для \[ настольных приложений сервера 2008\]<br/>                                    |
| DLL<br/>                      | <dl> <dt>Kernel32.dll</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[Поддержка национальных языков](national-language-support.md)
</dt> <dt>

[Функции поддержки национальных языков](national-language-support-functions.md)
</dt> <dt>

[Изображения дня, месяца, года и эры](day--month--year--and-era-format-pictures.md)
</dt> <dt>

[NLS: пример API-интерфейсов на основе имен](nls--name-based-apis-sample.md)
</dt> <dt>

[**енумдатеформатсексекс**](/windows/desktop/api/Winnls/nf-winnls-enumdateformatsexex)
</dt> <dt>

[**жетдатеформат**](/windows/desktop/api/datetimeapi/nf-datetimeapi-getdateformata)
</dt> <dt>

[**жетдатеформатекс**](/windows/desktop/api/datetimeapi/nf-datetimeapi-getdateformatex)
</dt> <dt>

[**калдатетиме**](caldatetime.md)
</dt> </dl>

 

 
