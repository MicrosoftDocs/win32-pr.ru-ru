---
description: Подготовка файла конфигурации ресурса
ms.assetid: 292b57ea-1c7e-49b6-876c-4ad307a2ec43
title: Подготовка файла конфигурации ресурса
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7b862f48f15997300f079a39de0eb385c535758d9392dc452e1d338d86c8d59e
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119147107"
---
# <a name="preparing-a-resource-configuration-file"></a>Подготовка файла конфигурации ресурса

Служебные программы компилятора МУИРКТ и RC, описанные в разделе [Служебные программы](resource-utilities.md) , предоставляют параметр командной строки, который позволяет указать файл конфигурации ресурса для базовых ресурсов языка. Использование этого общедоступного, удобочитаемый XML-файл позволяет больше контролировать разделение ресурсов, чем можно получить с помощью обычных параметров командной строки программ. Однако даже если вы не предложит файл конфигурации ресурсов в качестве входных данных, то файлы ресурсов LN и Language будут содержать данные конфигурации ресурсов.

Все файлы конфигурации ресурсов для приложений Win32 начинаются и заканчиваются одинаково:


```C++
<?xml version="1.0" encoding="utf-8"?> 
<localization>

<resources>
        
        <!-- a single win32Resources element goes here -->

</resources>
</localization>
```



в этом разделе рассматриваются аспекты схемы XML, которые полезны при создании неуправляемого кода в Windows Vista и более поздних версиях. В частности, это касается только поведения элемента win32Resources.

## <a name="win32resources-element"></a>win32Resources, элемент

Элемент win32Resources содержит атрибуты, описанные в следующей таблице.



| Имя атрибута           | Обязательный | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|--------------------------|-----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| fileType                 | Нет        | Тип файла. Всегда должно быть "Application".                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| контрольная сумма                 | Нет        | Значение контрольной суммы отображается в данных конфигурации ресурсов для файлов ресурсов LN и Language. Например, этот атрибут позволяет скопировать контрольную сумму из одного файла ресурсов, зависящего от языка, с помощью соглашения для английского (США) и разместив контрольную сумму в другом файле ресурсов, относящемся к конкретному языку. Контрольную сумму можно указать в виде шестнадцатеричной числовой строки длиной не более 32 символов. Числовое значение должно быть содержаться в 128-разрядном числе. |
| Язык                 | Нет        | язык, указанный в формате имени, совместимом с RFC 4646 (Windows Vista и более поздних версий), например en-US для английского языка (США).                                                                                                                                                                                                                                                                                                                                                                             |
| ултиматефаллбакклангуаже | Нет        | Язык для вставки данных конфигурации ресурсов для LN-файла, представляющий конечный язык, который будет использоваться в поиске соответствующего файла ресурсов для конкретного языка. Если загрузчику ресурсов не удается загрузить запрошенный файл ресурсов из предпочтительных языков пользовательского интерфейса потока, в качестве последней попытки используется конечный язык. язык указывается с использованием формата имени, совместимого с RFC 4646 (Windows Vista и более поздних версий), например en-US для английского языка (США).       |
| ултиматефаллбакклокатион | Нет        | Резервное расположение. Укажите "internal", если окончательные резервные ресурсы компилируются в LN File. Укажите "External" (по умолчанию), если LN-файл ссылается на файл ресурсов, зависящий от языка, для своих окончательных резервных ресурсов.                                                                                                                                                                                                                                                                                |



 

В файле конфигурации ресурса элемент win32Resources содержит вложенные элементы, описанные в следующей таблице.



| Имя элемента       | Описание                                                                                                                              |
|--------------------|------------------------------------------------------------------------------------------------------------------------------------------|
| localizedResources | Ресурсы, инкапсулирующие сведения о типах ресурсов и отдельных ресурсах, содержащихся в файле ресурсов конкретного языка. |
| неутралресаурцес   | Ресурсы, инкапсулирующие сведения о типах ресурсов, содержащихся в LN файле.                                                 |



 

## <a name="localizedresources-element"></a>localizedResources, элемент

Локализованный элемент Resources. По умолчанию этот элемент не имеет атрибутов и только одного типа вложенного элемента. Это просто контейнер для элементов resourceType.



| Имя атрибута | Описание                                                                    |
|----------------|--------------------------------------------------------------------------------|
| тип_ресурса   | Тип отдельного ресурса, содержащегося в файле ресурсов, зависящем от языка. |



 

## <a name="neutralresources-element"></a>Неутралресаурцес, элемент

Нейтральный элемент Resources. Этот элемент является просто контейнером для элементов resourceType.



| Имя атрибута | Описание                                        |
|----------------|----------------------------------------------------|
| тип_ресурса   | Тип одного ресурса, содержащегося в LN-файле. |



 

## <a name="resourcetype-element"></a>resourceType, элемент

Элемент resourceType инкапсулирует сведения об отдельном типе ресурса или отдельном ресурсе. Он имеет перечисленные ниже атрибуты.

> [!Caution]  
> Некоторые дефекты конфигурации ресурсов перехватываются только компилятором RC или МУИРКТ, в зависимости от файла входного ресурса или содержимого двоичного файла. Ошибки типа ресурса в файле конфигурации ресурсов, которые не существуют во входном файле, не перехватываются, что приводит к непредвиденному поведению. Пользователи могут использовать поврежденный файл конфигурации ресурсов и не знакомы с тем, чтобы они предприняли двоичные файлы, которые используют поврежденные части файла конфигурации ресурсов, что создает внешний вид, который прерывается из текущих двоичных файлов.

 



| Имя атрибута | Обязательный | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|----------------|-----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| типенамеид     | Да       | Имя типа или идентификатор ресурса. Укажите строковое имя или число. Если используется число, добавьте в начало строки знак " \# ", чтобы указать, что он представляет число. Каждый элемент resourceType должен иметь только один атрибут *типенамеид* .                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| itemName       | Нет        | Строка имени элемента для ресурса, помещаемого в файл ресурсов, зависящий от языка. Можно указать несколько имен, разделенных пробелами, например "HTML МОФДАТА".                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| itemId         | Нет        | Идентификатор отдельного элемента ресурса, помещаемого в файл ресурсов, зависящий от языка. Элемент можно указать в виде диапазона (например, "1-12") или отдельных идентификаторов, разделенных пробелами (например, "1 3 4").                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| stringId       | Нет        | Идентификатор строки для отдельного элемента ресурса, помещаемый в файл ресурсов, зависящий от языка. Строку можно указать в виде диапазона (например, "1-12") или отдельных идентификаторов, разделенных пробелами (например, "1 3 4"). Этот атрибут позволяет указывать как локализуемые, так и нелокализуемые записи в таблице строк. Его необходимо использовать в сочетании со значением *типенамеид* , равное "6", обозначая тип ресурса записи в таблице строк.<br/> Строки хранятся в блоках 16 в таблице строк. Например, строки от 0 до 15 хранятся в одном блоке элементов ресурсов, и на них можно ссылаться в файле конфигурации ресурсов как *ItemId* 1 или как *stringId* "0-15". Например, если имеется пять локализуемых строк и три нелокализуемые строки, необходимо назначить строковые идентификаторы 0-4 для локализуемых строк и идентификаторы строк 16-18 для нелокализуемых строк. Если не организовать строки таким образом, затронутые блоки строк помещаются как в LN-файл, так и в файл ресурсов, зависящий от языка.<br/> |



 

Если указать атрибуты *ItemName*, *ItemId* и/или *stringId* для определенного типа ресурса в элементе локализедресаурце, то только указанные элементы или строки для указанного типа ресурса помещаются в файл ресурсов, зависящий от языка. Если элемент resourceType указан без явного имени элемента, идентификатора элемента или идентификатора строки, все элементы указанного типа ресурса помещаются в файл ресурсов, зависящий от языка. Элементы или типы, не перечисленные ни в одном из элементов Локализедресаурце, помещаются в LN File.

Ниже приведены стандартные типы ресурсов и их числовые идентификаторы.

-   CURSOR (1)
-   ТОЧЕЧНЫЙ РИСУНОК (2)
-   ЗНАЧОК (3)
-   МЕНЮ (4)
-   ДИАЛОГОВОЕ ОКНО (5)
-   СТРОКА (6)
-   ФОНТДИР (7)
-   ШРИФТ (8)
-   УСКОРИТЕЛИ (9)
-   RCDATA (10)
-   МЕССАЖЕТАБЛЕ (11)
-   ГРУППИРОВАНие \_ курсора (12)
-   \_Значок группы (14)
-   ВЕРСИЯ (16)
-   HTML (23)

## <a name="example"></a>Пример


```C++
<?xml version="1.0" encoding="utf-8"?> 
<localization>
  <resources>
    <win32Resources fileType="Application">
      <neutralResources>
        <resourceType
           typeNameId="#16"
        />
      </neutralResources>
      <localizedResources> 
         <resourceType
                typeNameId="#2"
                itemId="5 6 7 8 9 10 11 12"
                itemName="HTML PRI"
         />
         <resourceType
                typeNameId="#4"
         />
         <resourceType
                typeNameId="#5"
         />
         <resourceType
                typeNameId="#6"
         />
         <resourceType
                typeNameId="#9"
         />
         <resourceType
                typeNameId="#11"
         />
         <resourceType
                typeNameId="#16"
         />
         <resourceType
                typeNameId="HTML"
         />
         <resourceType
                typeNameId="#23"
         />
         <resourceType
                typeNameId="#240"
         />
         <resourceType
                typeNameId="#1024"
         />
         <resourceType
                typeNameId="MY_TYPE"
         />
      </localizedResources> 
    </win32Resources>
  </resources>
</localization>
```



## <a name="remarks"></a>Remarks

Если включить в элемент Неутралресаурцес любой тип ресурса ICON (3), DIALOG (5), STRING (6) или VERSION (16), необходимо дублировать эту запись в элементе localizedResources. Это показано в приведенном выше примере, где тип ресурса 16 отображается в разделах как нейтральные, так и локализованные ресурсы.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Подготовка ресурсов](preparing-resources.md)
</dt> </dl>

 

 




