---
description: Двухбайтовая кодировка (DBCS), также известная как &\# 0034; расширяемая 8-разрядная кодировка&\# 0034;, является расширенной однобайтовой кодировкой (SBCS), реализованной в виде кодовой страницы.
ms.assetid: df049d22-02e2-48b2-8b74-52f71c00c549
title: Двухбайтовые кодировки
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 431b762b19f5531644e4bbaace548f34245c9d5c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105684253"
---
# <a name="double-byte-character-sets"></a><span data-ttu-id="a9ac2-103">Двухбайтовые кодировки</span><span class="sxs-lookup"><span data-stu-id="a9ac2-103">Double-byte Character Sets</span></span>

<span data-ttu-id="a9ac2-104">Двухбайтовая кодировка (DBCS), также известная как «расширенная 8-разрядная кодировка», представляет собой расширенную [однобайтовую](single-byte-character-sets.md) кодировку (SBCS), реализованную в виде кодовой страницы.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-104">A double-byte character set (DBCS), also known as an "expanded 8-bit character set", is an extended [single-byte character set](single-byte-character-sets.md) (SBCS), implemented as a code page.</span></span> <span data-ttu-id="a9ac2-105">Кодировки DBCS изначально разрабатывались для расширения SBCS-архитектуры, что позволяет работать с такими языками, как японский и китайский.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-105">DBCSs were originally developed to extend the SBCS design to handle languages such as Japanese and Chinese.</span></span> <span data-ttu-id="a9ac2-106">Некоторые символы в двухбайтовой кодировке (DBCS), включая цифры и буквы, используемые для написания английского языка, имеют однобайтовые значения кода.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-106">Some characters in a DBCS, including the digits and letters used for writing English, have single-byte code values.</span></span> <span data-ttu-id="a9ac2-107">Другие символы, например китайские иероглифы или японские иероглифы, имеют двухбайтовые значения кода.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-107">Other characters, such as Chinese ideographs or Japanese kanji, have double-byte code values.</span></span> <span data-ttu-id="a9ac2-108">DBCS может соответствовать кодовой странице Windows или кодовой странице OEM.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-108">A DBCS can correspond either to a Windows code page or an OEM code page.</span></span> <span data-ttu-id="a9ac2-109">Кодовая страница DBCS также может включать немашинную кодовую страницу, например кодовую страницу EBCDIC.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-109">A DBCS code page can also include a non-native code page, for example, an EBCDIC code page.</span></span> <span data-ttu-id="a9ac2-110">Определения этих кодовых страниц см. в разделе [кодовые страницы](code-pages.md).</span><span class="sxs-lookup"><span data-stu-id="a9ac2-110">For definitions of these code pages, see [Code Pages](code-pages.md).</span></span>

> [!Note]  
> <span data-ttu-id="a9ac2-111">Новые приложения Windows должны использовать [Юникод](unicode.md) , чтобы избежать несоответствий между различными кодовыми страницами и простотой локализации.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-111">New Windows applications should use [Unicode](unicode.md) to avoid the inconsistencies of varied code pages and for ease of localization.</span></span> <span data-ttu-id="a9ac2-112">Однако для некоторых устаревших протоколов может потребоваться использовать кодовые страницы DBCS.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-112">However, some legacy protocols might require the use of DBCS code pages.</span></span> <span data-ttu-id="a9ac2-113">Каждая кодовая страница DBCS поддерживает разные символы, но ни одна страница не поддерживает полный набор символов, предоставляемых в Юникоде.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-113">Each DBCS code page supports different characters, but no page supports the full breadth of characters provided by Unicode.</span></span> <span data-ttu-id="a9ac2-114">Каждая кодовая страница DBCS поддерживает разные подмножества, которые кодируются по-разному.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-114">Each DBCS code page supports a different subset, differently encoded.</span></span> <span data-ttu-id="a9ac2-115">Данные, преобразованные из одной кодовой страницы DBCS в другую, подвергаются повреждению, так как одно и то же значение данных на разных кодовых страницах может кодировать другой символ.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-115">Data converted from one DBCS code page to another is subject to corruption because the same data value on different code pages can encode a different character.</span></span> <span data-ttu-id="a9ac2-116">Данные, преобразованные из Юникода в DBCS, подвергаются утере данных, поскольку данная кодовая страница может не представлять каждый символ, используемый в этих данных в Юникоде.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-116">Data converted from Unicode to DBCS is subject to data loss, because a given code page might not be able to represent every character used in that particular Unicode data.</span></span>

 

<span data-ttu-id="a9ac2-117">Для интерпретации строки DBCS приложение должно начинаться с начала строки и выполнять проверку вперед.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-117">To interpret a DBCS string, an application must start at the beginning of the string and scan forward.</span></span> <span data-ttu-id="a9ac2-118">Он отслеживает, когда обнаруживает старший байт в строке, и обрабатывает следующий байт в качестве завершающей части того же символа.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-118">It keeps track when it encounters a lead byte in the string, and treats the next byte as the trailing part of the same character.</span></span> <span data-ttu-id="a9ac2-119">Если приложение просто сканирует строку по одному байту и встречает байт, который является значением кода, представляющим обратную косую черту (" \\ "), этот байт может просто быть младшим байтом из двух байт.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-119">If the application simply scans the string one byte at a time and encounters a byte that appears to be the code value representing a backslash ("\\"), that byte might simply be the trail byte of a two-byte character.</span></span> <span data-ttu-id="a9ac2-120">Приложение не может просто создать резервную копию одного байта, чтобы определить, является ли предыдущий байт старшим байтом, так как это значение может использоваться как старший и младший байт.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-120">The application cannot just back up one byte to see if the preceding byte is a lead byte, as that byte value might be eligible to be used as both a lead byte and a trail byte.</span></span> <span data-ttu-id="a9ac2-121">Таким образом, приложение имеет по сути такую же проблему, как и с возможной обратной косой чертой.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-121">Thus the application has essentially the same problem with it as with the possible backslash.</span></span> <span data-ttu-id="a9ac2-122">Иными словами, поиск по подстрокам гораздо сложнее с двухбайтовой кодировкой, чем с помощью SBCS или Unicode.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-122">In other words, substring searches are much more complicated with a DBCS than with either SBCSs or Unicode.</span></span> <span data-ttu-id="a9ac2-123">Соответственно, приложения, поддерживающие DBCS, должны использовать специальные функции, такие как [ \_ мбсстр](/cpp/c-runtime-library/reference/strstr-wcsstr-mbsstr-mbsstr-l), вместо функции [**стрстр**](https://msdn.microsoft.com/library/z9da80kz(v=VS.71).aspx) .</span><span class="sxs-lookup"><span data-stu-id="a9ac2-123">Accordingly, applications that support a DBCS must use special functions, such as [\_mbsstr](/cpp/c-runtime-library/reference/strstr-wcsstr-mbsstr-mbsstr-l), instead of the [**StrStr**](https://msdn.microsoft.com/library/z9da80kz(v=VS.71).aspx) function.</span></span>

<span data-ttu-id="a9ac2-124">Приложения используют кодовые страницы Windows DBCS с версиями функций Windows "A".</span><span class="sxs-lookup"><span data-stu-id="a9ac2-124">Your applications use DBCS Windows code pages with the "A" versions of Windows functions.</span></span> <span data-ttu-id="a9ac2-125">См. раздел [соглашения для прототипов функций](conventions-for-function-prototypes.md) и [кодовых страниц](code-pages.md).</span><span class="sxs-lookup"><span data-stu-id="a9ac2-125">See [Conventions for Function Prototypes](conventions-for-function-prototypes.md) and [Code Pages](code-pages.md).</span></span> <span data-ttu-id="a9ac2-126">Для облегчения распознавания кодовой страницы DBCS приложение может использовать функцию [**жеткпинфо**](/windows/desktop/api/Winnls/nf-winnls-getcpinfo) или [**жеткпинфоекс**](/windows/desktop/api/Winnls/nf-winnls-getcpinfoexa) .</span><span class="sxs-lookup"><span data-stu-id="a9ac2-126">To help identify a DBCS code page, an application can use the [**GetCPInfo**](/windows/desktop/api/Winnls/nf-winnls-getcpinfo) or [**GetCPInfoEx**](/windows/desktop/api/Winnls/nf-winnls-getcpinfoexa) function.</span></span> <span data-ttu-id="a9ac2-127">Приложение может использовать функцию [**исдбкслеадбите**](/windows/desktop/api/Winnls/nf-winnls-isdbcsleadbyte) , чтобы определить, можно ли использовать данное значение в качестве старших байтов из 2-байтового символа.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-127">An application can use the [**IsDBCSLeadByte**](/windows/desktop/api/Winnls/nf-winnls-isdbcsleadbyte) function to determine if a given value can be used as the lead byte of a 2-byte character.</span></span> <span data-ttu-id="a9ac2-128">Кроме того, приложение может использовать функции [**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) и [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) для сопоставления между строками Юникода и DBCS.</span><span class="sxs-lookup"><span data-stu-id="a9ac2-128">In addition, an application can use the [**MultiByteToWideChar**](/windows/desktop/api/Stringapiset/nf-stringapiset-multibytetowidechar) and [**WideCharToMultiByte**](/windows/desktop/api/Stringapiset/nf-stringapiset-widechartomultibyte) functions to map between Unicode and DBCS strings.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a9ac2-129">См. также</span><span class="sxs-lookup"><span data-stu-id="a9ac2-129">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a9ac2-130">Кодировки</span><span class="sxs-lookup"><span data-stu-id="a9ac2-130">Character Sets</span></span>](character-sets.md)
</dt> <dt>

[<span data-ttu-id="a9ac2-131">Однобайтовые кодировки</span><span class="sxs-lookup"><span data-stu-id="a9ac2-131">Single-byte Character Sets</span></span>](single-byte-character-sets.md)
</dt> </dl>

 

 
