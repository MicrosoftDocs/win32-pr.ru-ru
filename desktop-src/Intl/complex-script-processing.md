---
description: 'Ниже приведены параметры отображения и связанной обработки текста для поддержки тонких типографских эффектов или сложных наборов символов: Text Функтионседит Контролсрич Edit Контролсунискрибе'
ms.assetid: 337bc798-e75d-4389-8fea-577eb82a0ed5
title: Обработка сложных наборов символов
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 33e4be6295bff949c8e29036ef3af496c673575e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105683529"
---
# <a name="complex-script-processing"></a><span data-ttu-id="fdc16-103">Обработка сложных наборов символов</span><span class="sxs-lookup"><span data-stu-id="fdc16-103">Complex Script Processing</span></span>

<span data-ttu-id="fdc16-104">Ниже приведены параметры отображения и связанной обработки текста для поддержки типографских эффектов или сложных наборов символов.</span><span class="sxs-lookup"><span data-stu-id="fdc16-104">The following are options for display and related processing of text to support fine typography effects or complex scripts:</span></span>

-   <span data-ttu-id="fdc16-105">Текстовые функции</span><span class="sxs-lookup"><span data-stu-id="fdc16-105">Text functions</span></span>
-   <span data-ttu-id="fdc16-106">Изменить элементы управления</span><span class="sxs-lookup"><span data-stu-id="fdc16-106">Edit controls</span></span>
-   <span data-ttu-id="fdc16-107">Элементы управления Rich Edit</span><span class="sxs-lookup"><span data-stu-id="fdc16-107">Rich edit controls</span></span>
-   <span data-ttu-id="fdc16-108">Uniscribe</span><span class="sxs-lookup"><span data-stu-id="fdc16-108">Uniscribe</span></span>

<span data-ttu-id="fdc16-109">Выбор параметров зависит от следующих факторов.</span><span class="sxs-lookup"><span data-stu-id="fdc16-109">The options you choose depend on the following factors:</span></span>

-   <span data-ttu-id="fdc16-110">Тип текста или сценариев.</span><span class="sxs-lookup"><span data-stu-id="fdc16-110">The type of text or scripts.</span></span>
-   <span data-ttu-id="fdc16-111">Модель реализации, например, макет текста и обработка разрыва строк приложением.</span><span class="sxs-lookup"><span data-stu-id="fdc16-111">The implementation model, for example, the text layout and handling of line breaking by the application.</span></span>
-   <span data-ttu-id="fdc16-112">Обновление существующего приложения и создание нового приложения.</span><span class="sxs-lookup"><span data-stu-id="fdc16-112">Update of an existing application versus creation of a new application.</span></span>

<span data-ttu-id="fdc16-113">Как правило, приложение, выполняющее сравнительно простую обработку скриптов, может выбрать любой вариант обработки сложных наборов символов.</span><span class="sxs-lookup"><span data-stu-id="fdc16-113">In general, an application that does relatively simple script processing can choose any option for processing complex scripts.</span></span> <span data-ttu-id="fdc16-114">Однако для наиболее полного контроля над сложной обработкой скриптов рекомендуется использовать Uniscribe.</span><span class="sxs-lookup"><span data-stu-id="fdc16-114">However, for the most complete control of complex script processing, Uniscribe is recommended.</span></span>

## <a name="complex-script-processing-using-text-functions"></a><span data-ttu-id="fdc16-115">Обработка сложных наборов символов с помощью текстовых функций</span><span class="sxs-lookup"><span data-stu-id="fdc16-115">Complex Script Processing Using Text Functions</span></span>

<span data-ttu-id="fdc16-116">В приложениях, использующих обычный текст, то есть текст, использующий ту же гарнитуру, вес, цвет и т. д., традиционно написал текст и измеряет длину строк с помощью стандартных текстовых функций, таких как [**текстовые**](/windows/win32/api/wingdi/nf-wingdi-textouta) [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta), [**таббедтекстаут**](/windows/win32/api/winuser/nf-winuser-tabbedtextouta), [**DrawText**](/windows/win32/api/winuser/nf-winuser-drawtext)и [**жеттекстекстентекспоинт**](/windows/win32/api/wingdi/nf-wingdi-gettextextentexpointa).</span><span class="sxs-lookup"><span data-stu-id="fdc16-116">Applications that use mostly plain text, that is, text that uses the same typeface, weight, color, and so on, have traditionally written text and measured line lengths using standard text functions, such as [**TextOut**](/windows/win32/api/wingdi/nf-wingdi-textouta), [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta), [**TabbedTextOut**](/windows/win32/api/winuser/nf-winuser-tabbedtextouta), [**DrawText**](/windows/win32/api/winuser/nf-winuser-drawtext), and [**GetTextExtentExPoint**](/windows/win32/api/wingdi/nf-wingdi-gettextextentexpointa).</span></span> <span data-ttu-id="fdc16-117">Эти функции поддерживают обработку сложных наборов символов и тонких типографских эффектов.</span><span class="sxs-lookup"><span data-stu-id="fdc16-117">These functions support processing for complex scripts and fine typography effects.</span></span> <span data-ttu-id="fdc16-118">Дополнительные сведения см. в разделе [шрифты и текст](../gdi/fonts-and-text.md).</span><span class="sxs-lookup"><span data-stu-id="fdc16-118">For more information, see [Fonts and Text](../gdi/fonts-and-text.md).</span></span>

<span data-ttu-id="fdc16-119">Как правило, стандартная поддержка текста прозрачна для приложений, обрабатывающих сложные сценарии.</span><span class="sxs-lookup"><span data-stu-id="fdc16-119">In general, the standard text support is transparent to applications processing complex scripts.</span></span> <span data-ttu-id="fdc16-120">Однако при написании приложений, поддерживающих качественное оформление и обработку сложных наборов символов, следует учитывать некоторые конкретные правила.</span><span class="sxs-lookup"><span data-stu-id="fdc16-120">However, you should be aware of some specific rules to follow in writing applications that support fine typography and process complex scripts:</span></span>

-   <span data-ttu-id="fdc16-121">Приложение должно сохранять символы в буфере и отображать целую строку текста за один раз, а не, например, вызывая [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) для каждого символа, вводимого пользователем.</span><span class="sxs-lookup"><span data-stu-id="fdc16-121">Your application should save characters in a buffer and display a whole line of text at one time instead of, for example, calling [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) on each character as it is typed in by the user.</span></span> <span data-ttu-id="fdc16-122">Этот механизм позволяет модулям расширенного формирования текста использовать контекст для правильного упорядочения и создания [глифов](uniscribe-glossary.md) .</span><span class="sxs-lookup"><span data-stu-id="fdc16-122">This mechanism allows the advanced text shaping modules to use context to reorder and generate [glyphs](uniscribe-glossary.md) correctly.</span></span>
-   <span data-ttu-id="fdc16-123">Приложение должно использовать [**жеттекстекстентекспоинт**](/windows/win32/api/wingdi/nf-wingdi-gettextextentexpointa) для определения длины строки вместо вычисления длины строк из ширины кэшированных символов, так как ширина глифа может зависеть от контекста.</span><span class="sxs-lookup"><span data-stu-id="fdc16-123">The application should use [**GetTextExtentExPoint**](/windows/win32/api/wingdi/nf-wingdi-gettextextentexpointa) to determine line length, instead of computing line lengths from cached character widths, since the width of a glyph can vary by context.</span></span>
-   <span data-ttu-id="fdc16-124">Приложение должно дополнительно добавить поддержку порядка чтения справа налево и выравнивание по правому краю.</span><span class="sxs-lookup"><span data-stu-id="fdc16-124">The application should optionally add support for right-to-left reading order and right alignment.</span></span>
-   <span data-ttu-id="fdc16-125">Переупорядочение и контекстная обработка, необходимая для сложных наборов символов или тонкого оформления, требует значительного увеличения объема обработки обычного текста для простых сценариев.</span><span class="sxs-lookup"><span data-stu-id="fdc16-125">The reordering and contextual processing required for complex scripts or fine typography requires a significant increase in processing over basic text display for simple scripts.</span></span> <span data-ttu-id="fdc16-126">Поэтому во избежание проблем с производительностью приложение не должно обрабатывать большие объемы текста перед отображением результатов и возвратом управления пользователю.</span><span class="sxs-lookup"><span data-stu-id="fdc16-126">Therefore, to avoid performance issues, your application should not process large amounts of text before displaying results and returning control to the user.</span></span>

## <a name="complex-script-processing-using-edit-controls"></a><span data-ttu-id="fdc16-127">Обработка сложных скриптов с помощью элементов управления "Изменить"</span><span class="sxs-lookup"><span data-stu-id="fdc16-127">Complex Script Processing Using Edit Controls</span></span>

<span data-ttu-id="fdc16-128">Стандартные элементы управления Windows Edit были расширены для поддержки многоязычного текста и сложных наборов символов.</span><span class="sxs-lookup"><span data-stu-id="fdc16-128">The standard Windows edit controls have been extended to support multilingual text and complex scripts.</span></span> <span data-ttu-id="fdc16-129">Расширенная поддержка включает в себя ввод и отображение, а также правильное перемещение курсора по символьным кластерам, например в скриптах тайского и деванагари.</span><span class="sxs-lookup"><span data-stu-id="fdc16-129">The extended support includes input and display, as well as correct cursor movement over character clusters, for example, in Thai and Devanagari scripts.</span></span> <span data-ttu-id="fdc16-130">Дополнительные сведения см. в разделе [Edit Controls](../controls/edit-controls.md).</span><span class="sxs-lookup"><span data-stu-id="fdc16-130">For more information, see [Edit Controls](../controls/edit-controls.md).</span></span>

## <a name="complex-script-processing-using-rich-edit-controls"></a><span data-ttu-id="fdc16-131">Обработка сложных скриптов с помощью элементов управления Rich Edit</span><span class="sxs-lookup"><span data-stu-id="fdc16-131">Complex Script Processing Using Rich Edit Controls</span></span>

<span data-ttu-id="fdc16-132">Расширенное редактирование 3,0 — это коллекция интерфейсов более высокого уровня, использующая Uniscribe для изоляции приложений макета текста от сложностей определенных сценариев.</span><span class="sxs-lookup"><span data-stu-id="fdc16-132">Rich Edit 3.0 is a higher-level collection of interfaces that takes advantage of Uniscribe to insulate text layout applications from the complexities of certain scripts.</span></span> <span data-ttu-id="fdc16-133">Расширенное редактирование — это самый простой способ отобразить сложные сценарии, даже если их первичная цель не обязательно является макетом текста.</span><span class="sxs-lookup"><span data-stu-id="fdc16-133">Rich Edit is the simplest way for applications to display complex scripts even though their primary purpose is not necessarily text layout.</span></span> <span data-ttu-id="fdc16-134">Расширенное редактирование обеспечивает быстрое и гибкое редактирование многоязыкового многоязычного текста в Юникоде и простого обычного текста.</span><span class="sxs-lookup"><span data-stu-id="fdc16-134">Rich Edit provides fast, versatile editing of rich Unicode multilingual text and simple plain text.</span></span> <span data-ttu-id="fdc16-135">Он включает обширные интерфейсы сообщений и COM, редактирование текста, форматирование, разбиение на строки, простой макет таблицы, вертикальный макет текста, макет двунаправленного текста, поддержку Индийского и тайского языков, внешний пользовательский интерфейс, аналогичный интерфейсу Microsoft Word, и интерфейсы модели текстовых объектов.</span><span class="sxs-lookup"><span data-stu-id="fdc16-135">It includes extensive message and COM interfaces, text editing, formatting, line breaking, simple table layout, vertical text layout, bidirectional text layout, Indic and Thai support, an editing user interface much like Microsoft Word, and Text Object Model interfaces.</span></span>

<span data-ttu-id="fdc16-136">Наряду с интерфейсами расширенного редактирования приложения могут использовать функцию расширенного редактирования [**текста**](/windows/win32/api/wingdi/nf-wingdi-textouta) для автоматического анализа, формирования, размещения и разбивки строк.</span><span class="sxs-lookup"><span data-stu-id="fdc16-136">Along with the Rich Edit interfaces, applications can use the Rich Edit [**TextOut**](/windows/win32/api/wingdi/nf-wingdi-textouta) function to automatically parse, shape, position, and break lines.</span></span> <span data-ttu-id="fdc16-137">Дополнительные сведения см. в разделе [элементы управления Rich Edit](../controls/rich-edit-controls.md).</span><span class="sxs-lookup"><span data-stu-id="fdc16-137">For more information, see [Rich Edit Controls](../controls/rich-edit-controls.md).</span></span>

## <a name="complex-script-processing-using-uniscribe"></a><span data-ttu-id="fdc16-138">Обработка сложных наборов символов с помощью Uniscribe</span><span class="sxs-lookup"><span data-stu-id="fdc16-138">Complex Script Processing Using Uniscribe</span></span>

<span data-ttu-id="fdc16-139">[Uniscribe](uniscribe.md) обеспечивает наиболее обширную поддержку обработки текста, включающего большие типографские эффекты и сложные наборы символов.</span><span class="sxs-lookup"><span data-stu-id="fdc16-139">[Uniscribe](uniscribe.md) provides the most extensive support for processing of text involving fine typography effects and complex scripts.</span></span> <span data-ttu-id="fdc16-140">Он поддерживает сложные правила, найденные в таких сценариях, как арабский, деванагари и тайский.</span><span class="sxs-lookup"><span data-stu-id="fdc16-140">It supports the complex rules found in scripts such as Arabic, Devanagari, and Thai.</span></span> <span data-ttu-id="fdc16-141">Он обрабатывает сценарии, написанные справа налево, такие как арабский и иврит, и поддерживает смешивание сценариев.</span><span class="sxs-lookup"><span data-stu-id="fdc16-141">It handles scripts written from right to left, such as Arabic and Hebrew, and supports the mixing of scripts.</span></span> <span data-ttu-id="fdc16-142">Uniscribe также предоставляет возможности шрифтов [OpenType](opentype-font-format.md) , которые могут использоваться приложениями для управления типографскими эффектами.</span><span class="sxs-lookup"><span data-stu-id="fdc16-142">Uniscribe also exposes [OpenType](opentype-font-format.md) font features that can be used by applications to control fine typography effects.</span></span> <span data-ttu-id="fdc16-143">Дополнительные сведения см. в разделе [обработка сложных наборов символов](processing-complex-scripts.md).</span><span class="sxs-lookup"><span data-stu-id="fdc16-143">For more information, see [Processing Complex Scripts](processing-complex-scripts.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="fdc16-144">См. также</span><span class="sxs-lookup"><span data-stu-id="fdc16-144">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="fdc16-145">О Uniscribe</span><span class="sxs-lookup"><span data-stu-id="fdc16-145">About Uniscribe</span></span>](about-uniscribe.md)
</dt> <dt>

[<span data-ttu-id="fdc16-146">Обработка сложных наборов символов</span><span class="sxs-lookup"><span data-stu-id="fdc16-146">Processing Complex Scripts</span></span>](processing-complex-scripts.md)
</dt> </dl>

 

 
