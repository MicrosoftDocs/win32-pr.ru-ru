---
title: Отключение безопасности активации
description: Отключение безопасности активации
ms.assetid: 3474f8ad-f041-4886-ad39-ff0603c5c69e
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7da3ebd7cc03d79fc38fbafe3bc652efc3499437
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "104413821"
---
# <a name="turning-off-activation-security"></a><span data-ttu-id="4bf97-103">Отключение безопасности активации</span><span class="sxs-lookup"><span data-stu-id="4bf97-103">Turning Off Activation Security</span></span>

<span data-ttu-id="4bf97-104">Как правило, активация использует параметры безопасности по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="4bf97-104">Normally, activation uses default security settings.</span></span> <span data-ttu-id="4bf97-105">Тем не менее можно управлять безопасностью активации, указав структуру [**коаусинфо**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) , которая является членом структуры [**косерверинфо**](/windows/win32/api/objidlbase/ns-objidlbase-coserverinfo) , которая передается в функции активации.</span><span class="sxs-lookup"><span data-stu-id="4bf97-105">However, you can control activation security by specifying a [**COAUTHINFO**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) structure, which is a member of the [**COSERVERINFO**](/windows/win32/api/objidlbase/ns-objidlbase-coserverinfo) structure that is passed to the activation functions.</span></span> <span data-ttu-id="4bf97-106">Если клиент указывает уровень проверки подлинности RPC \_ C \_ AUTHN \_ уровня \_ None в структуре **коаусинфо** , проверка подлинности не выполняется.</span><span class="sxs-lookup"><span data-stu-id="4bf97-106">If the client specifies an authentication level of RPC\_C\_AUTHN\_LEVEL\_NONE in the **COAUTHINFO** structure, authentication is not attempted.</span></span> <span data-ttu-id="4bf97-107">В противном случае будет предпринята попытка безопасной активации, и в случае сбоя проверки подлинности активация завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="4bf97-107">Otherwise, secure activation is attempted, and if authentication fails, activation fails.</span></span>

<span data-ttu-id="4bf97-108">Если клиент не указал явную структуру [**коаусинфо**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) и вместо этого устанавливает указатель на **null**, com попытается проверить подлинность клиента.</span><span class="sxs-lookup"><span data-stu-id="4bf97-108">If the client does not specify an explicit [**COAUTHINFO**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) structure and instead sets the pointer to **NULL**, COM will attempt to authenticate the client.</span></span> <span data-ttu-id="4bf97-109">Если не удается проверить подлинность клиента, COM проверяет дескриптор безопасности разрешений на запуск, чтобы узнать, есть ли **пустой** список DACL или ACL, позволяющий получить доступ ко всем.</span><span class="sxs-lookup"><span data-stu-id="4bf97-109">If it cannot authenticate the client, COM checks the launch permission security descriptor to see whether there is a **NULL** DACL or an ACL that allows access to Everyone.</span></span> <span data-ttu-id="4bf97-110">Если проверка будет выполнена, сервер будет запущен.</span><span class="sxs-lookup"><span data-stu-id="4bf97-110">If this check succeeds, the server is launched.</span></span> <span data-ttu-id="4bf97-111">Таким образом, даже если клиент не указал структуру **коаусинфо**, небезопасная Активация может быть выполнена, когда сервер допускает ее.</span><span class="sxs-lookup"><span data-stu-id="4bf97-111">Therefore, even if the client does not specify a **COAUTHINFO** structure, unsecure activation may take place when the server allows it.</span></span>

> [!Note]  
> <span data-ttu-id="4bf97-112">Чтобы разрешить пользователям сети, не прошедшим проверку подлинности, запускать приложение COM, роли приложения должны включать анонимного пользователя.</span><span class="sxs-lookup"><span data-stu-id="4bf97-112">To allow unauthenticated network users to run a COM application, the application roles must include the Anonymous user.</span></span> <span data-ttu-id="4bf97-113">Начиная с Windows Server 2003, анонимный пользователь по умолчанию не включен в группу «все».</span><span class="sxs-lookup"><span data-stu-id="4bf97-113">Starting with Windows Server 2003, by default, the Anonymous user is not included in the Everyone group.</span></span>

 

<span data-ttu-id="4bf97-114">Почему клиент должен отключить безопасность активации явным образом, даже несмотря на то, что при незащищенной активации в конечном итоге произойдет?</span><span class="sxs-lookup"><span data-stu-id="4bf97-114">Why would a client want to turn off activation security explicitly even though unsecure activation will eventually take place if the server allows it?</span></span> <span data-ttu-id="4bf97-115">Поскольку явное отключение безопасности активации повышает производительность, когда клиенту не нужны или не требуются проверки безопасности.</span><span class="sxs-lookup"><span data-stu-id="4bf97-115">Because explicitly turning off activation security increases performance when the client does not want or need security checks.</span></span>

<span data-ttu-id="4bf97-116">Чтобы явно отключить безопасность активации, необходимо выполнить следующие действия.</span><span class="sxs-lookup"><span data-stu-id="4bf97-116">The following things must be done to explicitly turn off activation security:</span></span>

-   <span data-ttu-id="4bf97-117">Клиент должен указать уровень проверки подлинности RPC \_ C \_ AUTHN \_ уровня \_ None в структуре [**коаусинфо**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) , которая является членом структуры [**косерверинфо**](/windows/win32/api/objidlbase/ns-objidlbase-coserverinfo) , предоставляемой функции активации.</span><span class="sxs-lookup"><span data-stu-id="4bf97-117">The client must specify an authentication level of RPC\_C\_AUTHN\_LEVEL\_NONE in the [**COAUTHINFO**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) structure that is a member of the [**COSERVERINFO**](/windows/win32/api/objidlbase/ns-objidlbase-coserverinfo) structure supplied to the activation function.</span></span>
-   <span data-ttu-id="4bf97-118">Клиент должен указать уровень олицетворения \_ \_ \_ \_ в структуре [**коаусинфо**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) , которая является членом структуры [**косерверинфо**](/windows/win32/api/objidlbase/ns-objidlbase-coserverinfo) , предоставляемой функции активации.</span><span class="sxs-lookup"><span data-stu-id="4bf97-118">The client must specify an impersonation level of RPC\_C\_IMP\_LEVEL\_IMPERSONATE in the [**COAUTHINFO**](/windows/desktop/api/wtypesbase/ns-wtypesbase-coauthinfo) structure that is a member of the [**COSERVERINFO**](/windows/win32/api/objidlbase/ns-objidlbase-coserverinfo) structure supplied to the activation function.</span></span> <span data-ttu-id="4bf97-119">Если это значение не передано, сервер RPC S будет \_ \_ \_ недоступен.</span><span class="sxs-lookup"><span data-stu-id="4bf97-119">If this value is not passed, you will get RPC\_S\_SERVER\_UNAVAILABLE.</span></span>
-   <span data-ttu-id="4bf97-120">Сервер должен указать **Everyone** для **разрешений на запуск по умолчанию**.</span><span class="sxs-lookup"><span data-stu-id="4bf97-120">The server must specify **Everyone** for **Default Launch Permissions**.</span></span> <span data-ttu-id="4bf97-121">Для выполнения этой задачи рекомендуется использовать Dcomcnfg.exe следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4bf97-121">The recommended way to perform this task is to use Dcomcnfg.exe as follows:</span></span>
    1.  <span data-ttu-id="4bf97-122">Запустите файл Dcomcnfg.exe.</span><span class="sxs-lookup"><span data-stu-id="4bf97-122">Run Dcomcnfg.exe.</span></span>
    2.  <span data-ttu-id="4bf97-123">На странице **приложения** выберите приложение, представляющее сервер.</span><span class="sxs-lookup"><span data-stu-id="4bf97-123">On the **Applications** page, select the application that represents the server.</span></span> <span data-ttu-id="4bf97-124">Нажмите кнопку **Свойства** (или дважды щелкните выбранное приложение).</span><span class="sxs-lookup"><span data-stu-id="4bf97-124">Click the **Properties** button (or double-click the selected application).</span></span>
    3.  <span data-ttu-id="4bf97-125">На странице свойств **Безопасность** нажмите кнопку **использовать пользовательские разрешения на запуск** .</span><span class="sxs-lookup"><span data-stu-id="4bf97-125">On the **Security** property page, click the **Use Custom Launch Permissions** button.</span></span>
    4.  <span data-ttu-id="4bf97-126">Нажмите кнопку **изменить** в области **разрешения на запуск** .</span><span class="sxs-lookup"><span data-stu-id="4bf97-126">Click the **Edit** button in the **Launch Permissions** area.</span></span>
    5.  <span data-ttu-id="4bf97-127">В диалоговом окне **разрешения для значения реестра** нажмите кнопку **Добавить** .</span><span class="sxs-lookup"><span data-stu-id="4bf97-127">In the **Registry Value Permissions** dialog box, click the **Add** button.</span></span>
    6.  <span data-ttu-id="4bf97-128">Выберите запись для **всех** в списке.</span><span class="sxs-lookup"><span data-stu-id="4bf97-128">Select the entry for **Everyone** in the list box.</span></span>
    7.  <span data-ttu-id="4bf97-129">В поле **тип списка доступа** выберите **Разрешить запуск**.</span><span class="sxs-lookup"><span data-stu-id="4bf97-129">In the **Type of Access** list box, choose **Allow Launch**.</span></span>
    8.  <span data-ttu-id="4bf97-130">Нажмите кнопку **ОК** .</span><span class="sxs-lookup"><span data-stu-id="4bf97-130">Click the **OK** button.</span></span>

> [!Note]  
> <span data-ttu-id="4bf97-131">В Windows Server 2003 функция проверки подлинности для системного приложения COM+ включает значение ЕОАК \_ disable \_ AAA.</span><span class="sxs-lookup"><span data-stu-id="4bf97-131">In Windows Server 2003, the authentication capability for the COM+ system application includes the value EOAC\_DISABLE\_AAA.</span></span> <span data-ttu-id="4bf97-132">Это значение, которое отключает активацию активации на основе активатора (AAA), используется в вызове [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) при запуске системного приложения.</span><span class="sxs-lookup"><span data-stu-id="4bf97-132">This value, which disables activate-as-activator (AAA) activations, is used in the [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) call when launching the system application.</span></span> <span data-ttu-id="4bf97-133">Установка функции проверки подлинности в ЕОАК \_ disable \_ AAA позволяет приложению, работающему под привилегированной учетной записью (например, LocalSystem), предотвратить использование удостоверения для запуска ненадежных компонентов.</span><span class="sxs-lookup"><span data-stu-id="4bf97-133">Setting the authentication capability to EOAC\_DISABLE\_AAA allows an application that runs under a privileged account (such as LocalSystem) to help prevent its identity from being used to launch untrusted components.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="4bf97-134">См. также</span><span class="sxs-lookup"><span data-stu-id="4bf97-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4bf97-135">Отключение безопасности вызовов</span><span class="sxs-lookup"><span data-stu-id="4bf97-135">Turning Off Call Security</span></span>](turning-off-call-security.md)
</dt> </dl>

 

 