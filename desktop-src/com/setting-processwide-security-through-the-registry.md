---
title: Настройка безопасности Process-Wide в реестре
description: Если вы хотите настроить безопасность для всего процесса, одно из решений заключается в установке требуемых уровней безопасности в реестре.
ms.assetid: 87f0a64f-f3ec-4ee2-8d65-4f82e8971f0b
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d303f184229cb20aef1cbf71733956a3b6ce6618
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "103987919"
---
# <a name="setting-process-wide-security-through-the-registry"></a><span data-ttu-id="6368f-103">Настройка безопасности Process-Wide в реестре</span><span class="sxs-lookup"><span data-stu-id="6368f-103">Setting Process-Wide Security Through the Registry</span></span>

<span data-ttu-id="6368f-104">Если вы хотите настроить безопасность для всего процесса, одно из решений заключается в установке требуемых уровней безопасности в реестре.</span><span class="sxs-lookup"><span data-stu-id="6368f-104">If you want to set security for an entire process, one solution is to set the security levels you want in the registry.</span></span> <span data-ttu-id="6368f-105">Если приложение не может вызвать [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) или вы предпочитаете не использовать программную безопасность, это может быть хорошим вариантом.</span><span class="sxs-lookup"><span data-stu-id="6368f-105">If your application cannot call [**CoInitializeSecurity**](/windows/desktop/api/combaseapi/nf-combaseapi-coinitializesecurity) or if you prefer not to use programmatic security, this might be a good option.</span></span> <span data-ttu-id="6368f-106">Если вы решили установить безопасность на уровне процесса с помощью реестра, следует иметь в виду, что при вызове **CoInitializeSecurity** в рамках программы com будет использовать значения в **CoInitializeSecurity** и игнорировать значения реестра.</span><span class="sxs-lookup"><span data-stu-id="6368f-106">If you decide to set process-wide security using the registry, you should be aware that if you call **CoInitializeSecurity** within your program COM will use the values in **CoInitializeSecurity** and ignore the registry values.</span></span>

<span data-ttu-id="6368f-107">Существует два способа настройки параметров безопасности в реестре для приложения.</span><span class="sxs-lookup"><span data-stu-id="6368f-107">There are two ways to set security in the registry for your application:</span></span>

-   <span data-ttu-id="6368f-108">Можно использовать Dcomcnfg.exe, который предоставляет простой пользовательский интерфейс для изменения значений безопасности.</span><span class="sxs-lookup"><span data-stu-id="6368f-108">You can use Dcomcnfg.exe, which provides a simple user interface for modifying security values.</span></span> <span data-ttu-id="6368f-109">Все серверы COM можно настроить с помощью Dcomcnfg.exe.</span><span class="sxs-lookup"><span data-stu-id="6368f-109">All COM servers can be configured using Dcomcnfg.exe.</span></span> <span data-ttu-id="6368f-110">Дополнительные сведения см. в разделе [Настройка безопасности Process-Wide с помощью DCOMCNFG](setting-processwide-security-using-dcomcnfg.md).</span><span class="sxs-lookup"><span data-stu-id="6368f-110">For more information, see [Setting Process-Wide Security Using DCOMCNFG](setting-processwide-security-using-dcomcnfg.md).</span></span> <span data-ttu-id="6368f-111">Однако клиентские приложения обычно не отображаются в Dcomcnfg.exe, если только клиент не создает идентификатор GUID и не вводит его в реестр.</span><span class="sxs-lookup"><span data-stu-id="6368f-111">However, client applications do not normally appear in Dcomcnfg.exe unless the client creates a GUID and enters it in the registry.</span></span>
-   <span data-ttu-id="6368f-112">Вы можете задать значения безопасности в разделе [AppID](appid-key.md) для приложения.</span><span class="sxs-lookup"><span data-stu-id="6368f-112">You can set security values under the [AppID](appid-key.md) key for the application.</span></span> <span data-ttu-id="6368f-113">В оставшейся части этого раздела объясняется, как задать параметры безопасности в реестре с помощью ключа **AppID** .</span><span class="sxs-lookup"><span data-stu-id="6368f-113">The rest of this topic explains how to set security in the registry using the **AppID** key.</span></span>

<span data-ttu-id="6368f-114">AppID — это идентификатор GUID, представляющий серверный процесс для одного или нескольких классов.</span><span class="sxs-lookup"><span data-stu-id="6368f-114">An AppID is a GUID that represents a server process for one or more classes.</span></span> <span data-ttu-id="6368f-115">Каждый класс связан ровно с одним AppID, а идентификаторы AppID могут быть назначены только исполняемым файлам.</span><span class="sxs-lookup"><span data-stu-id="6368f-115">Each class is associated with exactly one AppID, and AppIDs can be assigned only to EXEs.</span></span> <span data-ttu-id="6368f-116">Библиотеки DLL не получают AppID, если они не выполняются в суррогате, а затем являются суррогатным процессом, имеющим AppID.</span><span class="sxs-lookup"><span data-stu-id="6368f-116">DLLs do not get AppIDs unless they are running in a surrogate, and then it is the surrogate process that has the AppID.</span></span> <span data-ttu-id="6368f-117">Если в суррогат загружается несколько библиотек DLL, каждый суррогат имеет только один AppID.</span><span class="sxs-lookup"><span data-stu-id="6368f-117">If multiple DLLs are loaded into a surrogate, each surrogate has only one AppID.</span></span>

<span data-ttu-id="6368f-118">Для некоторых COM-серверов код регистрации создает AppID и помещает в реестр записи, которые сопоставляют AppID с именем исполняемого файла.</span><span class="sxs-lookup"><span data-stu-id="6368f-118">For some COM servers, the registration code generates an AppID and places entries in the registry that map the AppID to the name of the executable.</span></span> <span data-ttu-id="6368f-119">Но некоторые COM-серверы не предоставляют эту функцию.</span><span class="sxs-lookup"><span data-stu-id="6368f-119">But some COM servers do not provide this functionality.</span></span> <span data-ttu-id="6368f-120">Однако если код регистрации сервера добавляет запись для элемента реестра HKCR \\ CLSID {серверклсид} \\ [](localserver32.md) при запуске dcomcnfg.exe, автоматически добавляет AppID для идентификатора CLSID.</span><span class="sxs-lookup"><span data-stu-id="6368f-120">However, if the server's registration code adds an entry for HKCR\\CLSID{ServerCLSID}\\[LocalServer32](localserver32.md) when dcomcnfg.exe is run, it will automatically add an AppID for the CLSID.</span></span>

<span data-ttu-id="6368f-121">Для COM-клиента, который не является сервером, это сопоставление не создается, так как клиент никогда не зарегистрирован.</span><span class="sxs-lookup"><span data-stu-id="6368f-121">For a COM client that is not a server, this mapping is not created because the client is never registered.</span></span> <span data-ttu-id="6368f-122">Таким образом, чтобы настроить безопасность с помощью ключа **AppID** , клиент должен создать необходимые записи реестра, как программно с помощью [функций реестра](/windows/desktop/SysInfo/registry-functions) , так и с помощью программы Regedit.</span><span class="sxs-lookup"><span data-stu-id="6368f-122">Therefore, to set security using the **AppID** key, the client must create the necessary registry entries, either programmatically by using the [registry functions](/windows/desktop/SysInfo/registry-functions) or by using regedit.</span></span>

<span data-ttu-id="6368f-123">Если вы решили установить безопасность на уровне процесса в реестре в разделе **AppID** , имейте в виду, что в ключе **AppID** есть два именованных значения, которые можно установить без разрешения администратора.</span><span class="sxs-lookup"><span data-stu-id="6368f-123">If you decide to set process-wide security in the registry under the **AppID** key, be aware that there are two named values under the **AppID** key that you can set without having administrator permissions:</span></span>

-   [<span data-ttu-id="6368f-124">акцесспермиссион</span><span class="sxs-lookup"><span data-stu-id="6368f-124">AccessPermission</span></span>](accesspermission.md)
-   [<span data-ttu-id="6368f-125">аусентикатионлевел</span><span class="sxs-lookup"><span data-stu-id="6368f-125">AuthenticationLevel</span></span>](authenticationlevel.md)

<span data-ttu-id="6368f-126">Значения **аусентикатионлевел** и **акцесспермиссион** задаются независимо друг от друга и имеют отдельные значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="6368f-126">The **AuthenticationLevel** and **AccessPermission** values are set independently and have separate default values.</span></span> <span data-ttu-id="6368f-127">Если значение **аусентикатионлевел** отсутствует, в качестве значения по умолчанию используется значение [легациаусентикатионлевел](legacyauthenticationlevel.md) .</span><span class="sxs-lookup"><span data-stu-id="6368f-127">If the **AuthenticationLevel** value is not present, the [LegacyAuthenticationLevel](legacyauthenticationlevel.md) value is used as the default.</span></span> <span data-ttu-id="6368f-128">Аналогично, если значение **акцесспермиссион** отсутствует, в качестве значения по умолчанию используется значение [дефаултакцесспермиссион](defaultaccesspermission.md) .</span><span class="sxs-lookup"><span data-stu-id="6368f-128">Similarly, if the **AccessPermission** value is not present, the [DefaultAccessPermission](defaultaccesspermission.md) value is used as the default.</span></span> <span data-ttu-id="6368f-129">Однако значения **аусентикатионлевел** и **акцесспермиссион** взаимосвязаны следующими способами.</span><span class="sxs-lookup"><span data-stu-id="6368f-129">However, the **AuthenticationLevel** and the **AccessPermission** values are interrelated in the following ways:</span></span>

-   <span data-ttu-id="6368f-130">Если **аусентикатионлевел** имеет значение None, то значения **акцесспермиссион** и **дефаултакцесспермиссион** для этого приложения игнорируются.</span><span class="sxs-lookup"><span data-stu-id="6368f-130">If the **AuthenticationLevel** is none, the **AccessPermission** and **DefaultAccessPermission** values are ignored for that application.</span></span>
-   <span data-ttu-id="6368f-131">Если **аусентикатионлевел** отсутствует и **легациаусентикатионлевел** имеет значение None, то значения **акцесспермиссион** и **дефаултакцесспермиссион** для этого приложения игнорируются.</span><span class="sxs-lookup"><span data-stu-id="6368f-131">If the **AuthenticationLevel** is not present and the **LegacyAuthenticationLevel** is none, the **AccessPermission** and **DefaultAccessPermission** values are ignored for that application.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6368f-132">См. также</span><span class="sxs-lookup"><span data-stu-id="6368f-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6368f-133">Настройка безопасности Process-Wide</span><span class="sxs-lookup"><span data-stu-id="6368f-133">Setting Process-Wide Security</span></span>](setting-processwide-security.md)
</dt> </dl>

 

 