---
title: Настройка безопасности на уровне прокси-сервера интерфейса
description: Иногда клиент нуждается в детализированном управлении безопасностью при вызовах определенных интерфейсов.
ms.assetid: 72925ca2-78c9-47d9-8760-63f6379326d2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b38fe83e8ce8841cc9029808a6947ec67d4eaf4
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/21/2020
ms.locfileid: "105700943"
---
# <a name="setting-security-at-the-interface-proxy-level"></a><span data-ttu-id="af6c3-103">Настройка безопасности на уровне прокси-сервера интерфейса</span><span class="sxs-lookup"><span data-stu-id="af6c3-103">Setting Security at the Interface Proxy Level</span></span>

<span data-ttu-id="af6c3-104">Иногда клиент нуждается в детализированном управлении безопасностью при вызовах определенных интерфейсов.</span><span class="sxs-lookup"><span data-stu-id="af6c3-104">Sometimes the client needs fine-grained control over the security on calls to particular interfaces.</span></span> <span data-ttu-id="af6c3-105">Например, безопасность может быть установлена на низком уровне для процесса, но для вызова определенного интерфейса может потребоваться более высокий уровень проверки подлинности, например шифрование.</span><span class="sxs-lookup"><span data-stu-id="af6c3-105">For example, security might be set at a low level for the process but calls to a particular interface might require a higher authentication level, such as encryption.</span></span> <span data-ttu-id="af6c3-106">Методы интерфейса [**иклиентсекурити**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) позволяют клиенту изменять параметры безопасности, связанные с вызовами определенного интерфейса, контролируя параметры безопасности на уровне интерфейса-посредника.</span><span class="sxs-lookup"><span data-stu-id="af6c3-106">The methods of the [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) interface allow the client to change the security settings associated with calls to a particular interface by controlling the security settings at the interface-proxy level.</span></span>

<span data-ttu-id="af6c3-107">Клиент может запросить существующий объект для [**иклиентсекурити**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) , а затем вызвать метод [**Иклиентсекурити:: куерибланкет**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-queryblanket) , чтобы узнать, Каковы текущие параметры безопасности для конкретного прокси-сервера интерфейса.</span><span class="sxs-lookup"><span data-stu-id="af6c3-107">The client can query an existing object for [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) and then call the [**IClientSecurity::QueryBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-queryblanket) method to find out what the current security settings are for a particular interface proxy.</span></span> <span data-ttu-id="af6c3-108">Метод [**иклиентсекурити:: сетбланкет**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket) можно использовать для изменения параметров безопасности для отдельного прокси-сервера интерфейса в объекте перед вызовом одного из методов интерфейса.</span><span class="sxs-lookup"><span data-stu-id="af6c3-108">The [**IClientSecurity::SetBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket) method can be used to modify the security settings for an individual interface proxy on the object before calling one of the interface's methods.</span></span> <span data-ttu-id="af6c3-109">Новые параметры применяются ко всем будущим вызывающим объектам этого конкретного интерфейса.</span><span class="sxs-lookup"><span data-stu-id="af6c3-109">The new settings apply to any future callers of this particular interface.</span></span> <span data-ttu-id="af6c3-110">Метод [**иклиентсекурити:: копипрокси**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-copyproxy) предоставляет клиенту способ копирования прокси интерфейса, чтобы последующие вызовы **сетбланкет** в копии не влияли на вызывающие объекты исходного прокси-сервера.</span><span class="sxs-lookup"><span data-stu-id="af6c3-110">The [**IClientSecurity::CopyProxy**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-copyproxy) method provides a way for the client to copy an interface proxy so that subsequent calls to **SetBlanket** on the copy do not affect callers of the original proxy.</span></span>

<span data-ttu-id="af6c3-111">[**Сетбланкет**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket) обычно используется для повышения уровня проверки подлинности для конкретного прокси-сервера интерфейса до более высокого уровня защиты системы безопасности.</span><span class="sxs-lookup"><span data-stu-id="af6c3-111">[**SetBlanket**](/windows/win32/api/objidl/nf-objidl-iclientsecurity-setblanket) is commonly used to raise the authentication level for a particular interface proxy to a higher level of security protection.</span></span> <span data-ttu-id="af6c3-112">Однако в некоторых ситуациях также может быть полезно уменьшить уровень проверки подлинности для определенного прокси интерфейса.</span><span class="sxs-lookup"><span data-stu-id="af6c3-112">However, in some situations, it might also be helpful to lower the authentication level for a particular interface proxy.</span></span> <span data-ttu-id="af6c3-113">Например, предположим, что для процесса используется уровень проверки подлинности по умолчанию, отличный от \_ уровня RPC C \_ AUTHN \_ None, \_ а клиент и сервер находятся в разных доменах, которые не являются доверенными.</span><span class="sxs-lookup"><span data-stu-id="af6c3-113">For instance, suppose the default authentication level for the process is some value other than RPC\_C\_AUTHN\_LEVEL\_NONE and the client and server are in separate domains that do not trust each other.</span></span> <span data-ttu-id="af6c3-114">В этом случае вызовы к серверу завершатся ошибкой, если клиент не вызовет **сетбланкет** для понижения уровня проверки подлинности до \_ уровня RPC C \_ AUTHN \_ \_ None.</span><span class="sxs-lookup"><span data-stu-id="af6c3-114">In this case, calls to the server will fail unless the client calls **SetBlanket** to lower the authentication level to RPC\_C\_AUTHN\_LEVEL\_NONE.</span></span>

<span data-ttu-id="af6c3-115">Клиенты, использующие реализацию по умолчанию [**иклиентсекурити**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) , предоставляемую диспетчером прокси-сервера, могут вызывать вспомогательные функции [**кокуерипроксибланкет**](/windows/desktop/api/combaseapi/nf-combaseapi-coqueryproxyblanket), [**CoSetProxyBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-cosetproxyblanket)и [**кокопипрокси**](/windows/desktop/api/combaseapi/nf-combaseapi-cocopyproxy) вместо непосредственного вызова методов **иклиентсекурити** .</span><span class="sxs-lookup"><span data-stu-id="af6c3-115">Clients using the default implementation of [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) provided by the proxy manager can call the [**CoQueryProxyBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-coqueryproxyblanket), [**CoSetProxyBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-cosetproxyblanket), and [**CoCopyProxy**](/windows/desktop/api/combaseapi/nf-combaseapi-cocopyproxy) helper functions instead of calling **IClientSecurity** methods directly.</span></span> <span data-ttu-id="af6c3-116">Вспомогательные функции упрощают код, но немного менее эффективны, чем вызов соответствующих методов **иклиентсекурити** напрямую.</span><span class="sxs-lookup"><span data-stu-id="af6c3-116">The helper functions simplify the code but are slightly less efficient than calling the corresponding **IClientSecurity** methods directly.</span></span>

<span data-ttu-id="af6c3-117">Интерфейс [**иклиентсекурити**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) реализуется локально для клиента с помощью диспетчера прокси-сервера.</span><span class="sxs-lookup"><span data-stu-id="af6c3-117">The [**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) interface is implemented locally for the client by the proxy manager.</span></span> <span data-ttu-id="af6c3-118">Некоторые пользовательские упакованные объекты могут не поддерживать **иклиентсекурити**.</span><span class="sxs-lookup"><span data-stu-id="af6c3-118">Some custom marshaled objects might not support **IClientSecurity**.</span></span>

<span data-ttu-id="af6c3-119">[**Иклиентсекурити**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) работает со всеми поддерживаемыми службами проверки подлинности (в настоящее время NTLMSSP, SChannel и протоколом Kerberos V5).</span><span class="sxs-lookup"><span data-stu-id="af6c3-119">[**IClientSecurity**](/windows/desktop/api/ObjIdl/nn-objidl-iclientsecurity) works with all supported authentication services (currently NTLMSSP, Schannel, and the Kerberos v5 protocol).</span></span>

## <a name="related-topics"></a><span data-ttu-id="af6c3-120">См. также</span><span class="sxs-lookup"><span data-stu-id="af6c3-120">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="af6c3-121">Настройка безопасности для приложений COM</span><span class="sxs-lookup"><span data-stu-id="af6c3-121">Setting Security for COM Applications</span></span>](setting-security-for-com-applications.md)
</dt> </dl>

 

 