---
title: Работа с палитрами
description: Работа с палитрами
ms.assetid: 0ad0d78b-4c2c-499c-ad5e-8324b59e89fc
keywords:
- Сообщение WM_CAP_PAL_PASTE
- макрос Каппалеттепасте
- Сообщение WM_CAP_PAL_OPEN
- макрос Каппалеттеопен
- Сообщение WM_CAP_PAL_AUTOCREATE
- макрос Каппалеттеауто
- Сообщение WM_CAP_PAL_MANUALCREATE
- макрос Каппалеттемануал
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f09cbbe3ffc8ea21d1ecf8545f036f5ba6dfb927
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "105650264"
---
# <a name="working-with-palettes"></a><span data-ttu-id="1cec8-111">Работа с палитрами</span><span class="sxs-lookup"><span data-stu-id="1cec8-111">Working with Palettes</span></span>

<span data-ttu-id="1cec8-112">Изначально, если для формата видеозаписи требуется палитра, окно Capture (захват) использует палитру, предоставляемую драйвером записи.</span><span class="sxs-lookup"><span data-stu-id="1cec8-112">Initially, if the video capture format requires a palette, the capture window uses the palette supplied by the capture driver.</span></span> <span data-ttu-id="1cec8-113">Эта палитра может состоять из серых значений для воспроизведения черно-белого цвета или для широкого выбора цветовых значений.</span><span class="sxs-lookup"><span data-stu-id="1cec8-113">This palette might consist of gray-scale values for black-and-white reproduction, or a broad selection of color values.</span></span> <span data-ttu-id="1cec8-114">Можно получить существующую палитру для замены палитры по умолчанию с помощью [**команды WM \_ Cap \_ PAL \_ Вставить**](wm-cap-pal-paste.md) или [**WM \_ Cap \_ PAL \_ Open**](wm-cap-pal-open.md) сообщение (или макроса [**каппалеттепасте**](/windows/desktop/api/Vfw/nf-vfw-cappalettepaste) или [**каппалеттеопен**](/windows/desktop/api/Vfw/nf-vfw-cappaletteopen) ).</span><span class="sxs-lookup"><span data-stu-id="1cec8-114">You can retrieve an existing palette to replace the default palette by using the [**WM\_CAP\_PAL\_PASTE**](wm-cap-pal-paste.md) or [**WM\_CAP\_PAL\_OPEN**](wm-cap-pal-open.md) message (or the [**capPalettePaste**](/windows/desktop/api/Vfw/nf-vfw-cappalettepaste) or [**capPaletteOpen**](/windows/desktop/api/Vfw/nf-vfw-cappaletteopen) macro).</span></span> <span data-ttu-id="1cec8-115">Кроме того, можно создать пользовательскую палитру для замены палитры по умолчанию с помощью сообщения " [**WM \_ Cap \_ PAL \_ автосоздания**](wm-cap-pal-autocreate.md) или [**WM \_ Cap \_ PAL \_ мануалкреате**](wm-cap-pal-manualcreate.md) " (или макроса [**каппалеттеауто**](/windows/desktop/api/Vfw/nf-vfw-cappaletteauto) или [**каппалеттемануал**](/windows/desktop/api/Vfw/nf-vfw-cappalettemanual) ).</span><span class="sxs-lookup"><span data-stu-id="1cec8-115">Alternatively, you can create a custom palette to replace the default palette by using the [**WM\_CAP\_PAL\_AUTOCREATE**](wm-cap-pal-autocreate.md) or [**WM\_CAP\_PAL\_MANUALCREATE**](wm-cap-pal-manualcreate.md) message (or the [**capPaletteAuto**](/windows/desktop/api/Vfw/nf-vfw-cappaletteauto) or [**capPaletteManual**](/windows/desktop/api/Vfw/nf-vfw-cappalettemanual) macro).</span></span> <span data-ttu-id="1cec8-116">После замены палитры по умолчанию окно записи и драйвер используют палитру замены, пока не будет создана или открыта другая палитра.</span><span class="sxs-lookup"><span data-stu-id="1cec8-116">After you replace the default palette, the capture window and driver use the replacement palette until you create or open another palette.</span></span>

<span data-ttu-id="1cec8-117">Сообщение WM \_ Cap \_ PAL \_ автоcreate или WM \_ Cap \_ PAL \_ мануалкреате создает оптимизированную палитру на основе текущего ввода видео.</span><span class="sxs-lookup"><span data-stu-id="1cec8-117">The WM\_CAP\_PAL\_AUTOCREATE or WM\_CAP\_PAL\_MANUALCREATE message creates an optimized palette based on the current video input.</span></span> <span data-ttu-id="1cec8-118">Эта пользовательская палитра обеспечивает наилучшую точность цвета, так как она основана на цветах, существующих в последовательности.</span><span class="sxs-lookup"><span data-stu-id="1cec8-118">This custom palette gives a video sequence the best color fidelity because it is based on colors that exist in the sequence.</span></span> <span data-ttu-id="1cec8-119">Окно Capture (захват) создает трехмерную гистограмму образцов цветов.</span><span class="sxs-lookup"><span data-stu-id="1cec8-119">The capture window creates a three-dimensional histogram of the colors it samples.</span></span> <span data-ttu-id="1cec8-120">Он сокращает количество цветов, анализируя абсолютную ошибку между смежными цветами и объединяя их с наименьшим значением ошибки.</span><span class="sxs-lookup"><span data-stu-id="1cec8-120">It reduces the number of colors by examining the absolute error between adjacent colors and consolidating those with the smallest error value.</span></span>

<span data-ttu-id="1cec8-121">При отправке \_ \_ \_ автосоздания в WM Cap PAL необходимо указать число кадров для авикап в Sample и указать размер цветовой палитры.</span><span class="sxs-lookup"><span data-stu-id="1cec8-121">When sending WM\_CAP\_PAL\_AUTOCREATE, you must specify the number of frames for AVICap to sample, and specify the size of the color palette.</span></span> <span data-ttu-id="1cec8-122">При указании числа кадров включите достаточно кадров, чтобы убедиться, что все цвета в последовательности выборке.</span><span class="sxs-lookup"><span data-stu-id="1cec8-122">When specifying the number of frames, include enough frames to ensure that all colors in the sequence are sampled.</span></span>

<span data-ttu-id="1cec8-123">Вы можете выполнить выборку текущего кадра с помощью WM \_ Cap \_ PAL \_ мануалкреате.</span><span class="sxs-lookup"><span data-stu-id="1cec8-123">You can sample the current frame by using WM\_CAP\_PAL\_MANUALCREATE.</span></span> <span data-ttu-id="1cec8-124">Используя это сообщение в нескольких выбранных вручную кадрах, можно создать палитру, содержащую цвета, которые должны отображаться в палитре.</span><span class="sxs-lookup"><span data-stu-id="1cec8-124">By using this message with several manually selected frames, you can create a palette that contains the colors you want to appear in the palette.</span></span>

<span data-ttu-id="1cec8-125">Палитра может содержать до 256 цветов.</span><span class="sxs-lookup"><span data-stu-id="1cec8-125">A palette can contain up to 256 colors.</span></span> <span data-ttu-id="1cec8-126">Если вы объединяете палитры или видеопоследовательность отображается одновременно с другими видео или изображениями, следует использовать выделение цвета меньшего размера, чтобы цвета каждого изображения или видеоклипа могли сосуществовать.</span><span class="sxs-lookup"><span data-stu-id="1cec8-126">If you merge palettes or if the video sequence is to be displayed simultaneously with other video or images, you should use a smaller color selection so that colors from each image or video clip can coexist.</span></span>

<span data-ttu-id="1cec8-127">Вы сохраняете новую палитру с помощью сообщения о [**\_ \_ \_ сохранении WM Cap PAL**](wm-cap-pal-save.md) (или макроса [**каппалеттесаве**](/windows/desktop/api/Vfw/nf-vfw-cappalettesave) ) и последующего извлечения его с помощью сообщения [**\_ \_ \_ Open крышка PAL**](wm-cap-pal-open.md) .</span><span class="sxs-lookup"><span data-stu-id="1cec8-127">You save a new palette by using the [**WM\_CAP\_PAL\_SAVE**](wm-cap-pal-save.md) message (or the [**capPaletteSave**](/windows/desktop/api/Vfw/nf-vfw-cappalettesave) macro) and later retrieve it by using the [**WM\_CAP\_PAL\_OPEN**](wm-cap-pal-open.md) message.</span></span> <span data-ttu-id="1cec8-128">Палитру можно сохранить для последующей обработки палитры или для использования в другом приложении.</span><span class="sxs-lookup"><span data-stu-id="1cec8-128">You can save a palette for post-processing of the palette or for use in another application.</span></span>

<span data-ttu-id="1cec8-129">Вы можете вставить палитру из буфера обмена в окно Capture, используя сообщение [**\_ вставки крепления WM \_ PAL \_**](wm-cap-pal-paste.md) .</span><span class="sxs-lookup"><span data-stu-id="1cec8-129">You can paste a palette from the clipboard into the capture window by using the [**WM\_CAP\_PAL\_PASTE**](wm-cap-pal-paste.md) message.</span></span> <span data-ttu-id="1cec8-130">Окно Capture передает палитру драйверу записи.</span><span class="sxs-lookup"><span data-stu-id="1cec8-130">The capture window passes the palette to the capture driver.</span></span> <span data-ttu-id="1cec8-131">Другие приложения могут копировать палитры в буфер обмена.</span><span class="sxs-lookup"><span data-stu-id="1cec8-131">Other applications can copy palettes to the clipboard.</span></span> <span data-ttu-id="1cec8-132">Также можно скопировать палитру в буфер обмена с помощью сообщения об изменении (или макроса [**капедиткопи**](/windows/desktop/api/Vfw/nf-vfw-capeditcopy) ) с [**\_ закреплениями \_ \_ WM**](wm-cap-edit-copy.md) .</span><span class="sxs-lookup"><span data-stu-id="1cec8-132">You can also copy a palette to the clipboard by using the [**WM\_CAP\_EDIT\_COPY**](wm-cap-edit-copy.md) message (or the [**capEditCopy**](/windows/desktop/api/Vfw/nf-vfw-capeditcopy) macro).</span></span> <span data-ttu-id="1cec8-133">Это сообщение копирует буфер кадров видео, включая палитру, в буфер обмена.</span><span class="sxs-lookup"><span data-stu-id="1cec8-133">This message copies the video frame buffer, including the palette, onto the clipboard.</span></span>

 

 




