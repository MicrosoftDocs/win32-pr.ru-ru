---
title: Работа с палитрами
description: Работа с палитрами
ms.assetid: 0ad0d78b-4c2c-499c-ad5e-8324b59e89fc
keywords:
- Сообщение WM_CAP_PAL_PASTE
- макрос Каппалеттепасте
- Сообщение WM_CAP_PAL_OPEN
- макрос Каппалеттеопен
- Сообщение WM_CAP_PAL_AUTOCREATE
- макрос Каппалеттеауто
- Сообщение WM_CAP_PAL_MANUALCREATE
- макрос Каппалеттемануал
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f09cbbe3ffc8ea21d1ecf8545f036f5ba6dfb927
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "105650264"
---
# <a name="working-with-palettes"></a>Работа с палитрами

Изначально, если для формата видеозаписи требуется палитра, окно Capture (захват) использует палитру, предоставляемую драйвером записи. Эта палитра может состоять из серых значений для воспроизведения черно-белого цвета или для широкого выбора цветовых значений. Можно получить существующую палитру для замены палитры по умолчанию с помощью [**команды WM \_ Cap \_ PAL \_ Вставить**](wm-cap-pal-paste.md) или [**WM \_ Cap \_ PAL \_ Open**](wm-cap-pal-open.md) сообщение (или макроса [**каппалеттепасте**](/windows/desktop/api/Vfw/nf-vfw-cappalettepaste) или [**каппалеттеопен**](/windows/desktop/api/Vfw/nf-vfw-cappaletteopen) ). Кроме того, можно создать пользовательскую палитру для замены палитры по умолчанию с помощью сообщения " [**WM \_ Cap \_ PAL \_ автосоздания**](wm-cap-pal-autocreate.md) или [**WM \_ Cap \_ PAL \_ мануалкреате**](wm-cap-pal-manualcreate.md) " (или макроса [**каппалеттеауто**](/windows/desktop/api/Vfw/nf-vfw-cappaletteauto) или [**каппалеттемануал**](/windows/desktop/api/Vfw/nf-vfw-cappalettemanual) ). После замены палитры по умолчанию окно записи и драйвер используют палитру замены, пока не будет создана или открыта другая палитра.

Сообщение WM \_ Cap \_ PAL \_ автоcreate или WM \_ Cap \_ PAL \_ мануалкреате создает оптимизированную палитру на основе текущего ввода видео. Эта пользовательская палитра обеспечивает наилучшую точность цвета, так как она основана на цветах, существующих в последовательности. Окно Capture (захват) создает трехмерную гистограмму образцов цветов. Он сокращает количество цветов, анализируя абсолютную ошибку между смежными цветами и объединяя их с наименьшим значением ошибки.

При отправке \_ \_ \_ автосоздания в WM Cap PAL необходимо указать число кадров для авикап в Sample и указать размер цветовой палитры. При указании числа кадров включите достаточно кадров, чтобы убедиться, что все цвета в последовательности выборке.

Вы можете выполнить выборку текущего кадра с помощью WM \_ Cap \_ PAL \_ мануалкреате. Используя это сообщение в нескольких выбранных вручную кадрах, можно создать палитру, содержащую цвета, которые должны отображаться в палитре.

Палитра может содержать до 256 цветов. Если вы объединяете палитры или видеопоследовательность отображается одновременно с другими видео или изображениями, следует использовать выделение цвета меньшего размера, чтобы цвета каждого изображения или видеоклипа могли сосуществовать.

Вы сохраняете новую палитру с помощью сообщения о [**\_ \_ \_ сохранении WM Cap PAL**](wm-cap-pal-save.md) (или макроса [**каппалеттесаве**](/windows/desktop/api/Vfw/nf-vfw-cappalettesave) ) и последующего извлечения его с помощью сообщения [**\_ \_ \_ Open крышка PAL**](wm-cap-pal-open.md) . Палитру можно сохранить для последующей обработки палитры или для использования в другом приложении.

Вы можете вставить палитру из буфера обмена в окно Capture, используя сообщение [**\_ вставки крепления WM \_ PAL \_**](wm-cap-pal-paste.md) . Окно Capture передает палитру драйверу записи. Другие приложения могут копировать палитры в буфер обмена. Также можно скопировать палитру в буфер обмена с помощью сообщения об изменении (или макроса [**капедиткопи**](/windows/desktop/api/Vfw/nf-vfw-capeditcopy) ) с [**\_ закреплениями \_ \_ WM**](wm-cap-edit-copy.md) . Это сообщение копирует буфер кадров видео, включая палитру, в буфер обмена.

 

 




