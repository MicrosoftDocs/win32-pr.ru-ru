---
title: Предоставление элементов управления для обрезки и растяжения изображений
description: Предоставление элементов управления для обрезки и растяжения изображений
ms.assetid: cc62d70d-3f5f-477c-bc09-ab8ab0a9dce3
keywords:
- Макрос МЦивнджетсаурце
- Макрос МЦивндпутсаурце
- Макрос МЦивнджетдест
- Макрос МЦивндпутдест
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9cd0889b40204e7c99ec782e454dba2cdeebfe79
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "103789757"
---
# <a name="providing-controls-for-cropping-and-stretching-images"></a><span data-ttu-id="138f1-107">Предоставление элементов управления для обрезки и растяжения изображений</span><span class="sxs-lookup"><span data-stu-id="138f1-107">Providing Controls for Cropping and Stretching Images</span></span>

<span data-ttu-id="138f1-108">МЦивнд позволяет обрезать и растянуть изображения видеоклипа.</span><span class="sxs-lookup"><span data-stu-id="138f1-108">MCIWnd allows you to crop and stretch images of a video clip.</span></span> <span data-ttu-id="138f1-109">Чтобы понять эти возможности, необходимо понимать связи между *размером кадра*, *прямоугольником источника*, *прямоугольником назначения* и *областью воспроизведения*.</span><span class="sxs-lookup"><span data-stu-id="138f1-109">To understand these features, you need to understand the relationships between *frame size*, *source rectangle*, *destination rectangle*, and *playback area*.</span></span>

<span data-ttu-id="138f1-110">Видеоролик состоит из нескольких кадров, каждый из которых содержит одно изображение.</span><span class="sxs-lookup"><span data-stu-id="138f1-110">A video clip consists of several frames, each containing one image.</span></span> <span data-ttu-id="138f1-111">Размер кадра видеоклипа — это размер изображения в текущем кадре.</span><span class="sxs-lookup"><span data-stu-id="138f1-111">The frame size of a video clip is the size of the image in the current frame.</span></span> <span data-ttu-id="138f1-112">Как правило, видеоролик имеет один размер кадра, так как все изображения в картинке имеют одинаковый размер.</span><span class="sxs-lookup"><span data-stu-id="138f1-112">Typically, a video clip has one frame size because all the images in the clip are the same size.</span></span>

<span data-ttu-id="138f1-113">Исходный прямоугольник — это прямоугольная область, которая накладывается на кадры видеоклипа.</span><span class="sxs-lookup"><span data-stu-id="138f1-113">The source rectangle is a rectangular area that overlays the frames of a video clip.</span></span> <span data-ttu-id="138f1-114">Исходный прямоугольник определяет часть каждого кадра, отображаемого во время воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="138f1-114">The source rectangle defines the portion of each frame that is displayed during playback.</span></span> <span data-ttu-id="138f1-115">Когда видеоролик загружается с помощью МЦивнд, исходный прямоугольник инициализируется с теми же размерами и положением, что и первоначальный кадр видеоклипа.</span><span class="sxs-lookup"><span data-stu-id="138f1-115">When a video clip is loaded with MCIWnd, the source rectangle is initialized with the same dimensions and position as the initial frame of the video clip.</span></span>

<span data-ttu-id="138f1-116">Прямоугольник назначения — это прямоугольная область, определяющая виртуальное окно воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="138f1-116">The destination rectangle is a rectangular area that defines a virtual playback window.</span></span> <span data-ttu-id="138f1-117">Прямоугольник назначения получает данные изображения из исходного прямоугольника для каждого кадра видеоклипа.</span><span class="sxs-lookup"><span data-stu-id="138f1-117">The destination rectangle receives the image data from the source rectangle for each frame of the video clip.</span></span> <span data-ttu-id="138f1-118">Если размеры исходного и целевого прямоугольников различаются, МЦивнд корректирует данные изображения по горизонтали и вертикали по мере необходимости для заполнения прямоугольника назначения.</span><span class="sxs-lookup"><span data-stu-id="138f1-118">When the source and destination rectangle dimensions are different, MCIWnd adjusts the image data horizontally and vertically as needed to fill the destination rectangle.</span></span> <span data-ttu-id="138f1-119">Когда видеоролик загружается с помощью МЦивнд, прямоугольник назначения инициализируется с теми же размерами и положением, что и исходный кадр видеоклипа.</span><span class="sxs-lookup"><span data-stu-id="138f1-119">When a video clip is loaded with MCIWnd, the destination rectangle is initialized with the same dimensions and position as the initial frame of the video clip.</span></span>

<span data-ttu-id="138f1-120">Область воспроизведения — это часть окна МЦивнд, используемая приложением для показа видеоклипа.</span><span class="sxs-lookup"><span data-stu-id="138f1-120">The playback area is the portion of an MCIWnd window an application uses to display the video clip.</span></span> <span data-ttu-id="138f1-121">Область воспроизведения — это клиентская область окна МЦивнд или часть клиентской области, которая исключает панель инструментов МЦивнд.</span><span class="sxs-lookup"><span data-stu-id="138f1-121">The playback area is the client area of an MCIWnd window or the portion of the client area that excludes the MCIWnd toolbar.</span></span> <span data-ttu-id="138f1-122">Когда видеоролик загружается с помощью МЦивнд, область воспроизведения инициализируется с теми же размерами и положением, что и у первоначального кадра видеоклипа.</span><span class="sxs-lookup"><span data-stu-id="138f1-122">When a video clip is loaded with MCIWnd, the playback area is initialized with the same dimensions and position as the initial frame of the video clip.</span></span>

<span data-ttu-id="138f1-123">Вы можете обрезать видеоролик с помощью макросов [**мЦивнджетсаурце**](/windows/desktop/api/Vfw/nf-vfw-mciwndgetsource) и [**мЦивндпутсаурце**](/windows/desktop/api/Vfw/nf-vfw-mciwndputsource) , чтобы изменить исходный прямоугольник.</span><span class="sxs-lookup"><span data-stu-id="138f1-123">You can crop a video clip by using the [**MCIWndGetSource**](/windows/desktop/api/Vfw/nf-vfw-mciwndgetsource) and [**MCIWndPutSource**](/windows/desktop/api/Vfw/nf-vfw-mciwndputsource) macros to alter the source rectangle.</span></span> <span data-ttu-id="138f1-124">Обрезка изображения определяет, какая часть фреймов отображается во время воспроизведения. Он не изменяет содержимое файла, который воспроизводится.</span><span class="sxs-lookup"><span data-stu-id="138f1-124">Cropping an image determines only which portion of the frames are displayed during playback; it does not alter the content of the file being played.</span></span> <span data-ttu-id="138f1-125">Прежде чем обрезать изображение, можно получить текущий размер исходного прямоугольника с помощью **мЦивнджетсаурце**.</span><span class="sxs-lookup"><span data-stu-id="138f1-125">Before you crop an image, you can retrieve the current size of the source rectangle by using **MCIWndGetSource**.</span></span> <span data-ttu-id="138f1-126">После вычисления нового размера и расположения исходного прямоугольника можно задать границы кадрирования исходного прямоугольника с помощью **мЦивндпутсаурце**.</span><span class="sxs-lookup"><span data-stu-id="138f1-126">After the new size and location of the source rectangle are calculated, you can set the cropping boundaries of the source rectangle by using **MCIWndPutSource**.</span></span>

<span data-ttu-id="138f1-127">Для изменения прямоугольника назначения можно растянуть видеоролик с помощью макросов [**мЦивнджетдест**](/windows/desktop/api/Vfw/nf-vfw-mciwndgetdest) и [**мЦивндпутдест**](/windows/desktop/api/Vfw/nf-vfw-mciwndputdest) .</span><span class="sxs-lookup"><span data-stu-id="138f1-127">You can stretch a video clip by using the [**MCIWndGetDest**](/windows/desktop/api/Vfw/nf-vfw-mciwndgetdest) and [**MCIWndPutDest**](/windows/desktop/api/Vfw/nf-vfw-mciwndputdest) macros to alter the destination rectangle.</span></span> <span data-ttu-id="138f1-128">При растяжении видеоклипа размер кадра видеоклипа увеличивается или уменьшается вертикально, горизонтально или в обоих направлениях.</span><span class="sxs-lookup"><span data-stu-id="138f1-128">When you stretch a video clip, you lengthen or shorten the frame size of a video clip vertically, horizontally, or in both directions.</span></span> <span data-ttu-id="138f1-129">Перед растяжением изображения можно получить текущий размер и расположение прямоугольника назначения с помощью **мЦивнджетдест**.</span><span class="sxs-lookup"><span data-stu-id="138f1-129">Before you stretch an image, you can retrieve the current size and location of the destination rectangle by using **MCIWndGetDest**.</span></span> <span data-ttu-id="138f1-130">Макрос **мЦивндпутдест** позволяет переопределить конечный прямоугольник.</span><span class="sxs-lookup"><span data-stu-id="138f1-130">The **MCIWndPutDest** macro allows you to redefine the destination rectangle.</span></span> <span data-ttu-id="138f1-131">Растяжение может искажать изображение во время воспроизведения, но не изменяет содержимое файла, который воспроизводится.</span><span class="sxs-lookup"><span data-stu-id="138f1-131">Stretching can distort the image during playback, but it does not alter the content of the file being played.</span></span>

<span data-ttu-id="138f1-132">Если размер прямоугольника назначения становится больше области воспроизведения, можно указать, какая часть области воспроизведения будет отображать видеоклип с помощью **мЦивндпутдест**.</span><span class="sxs-lookup"><span data-stu-id="138f1-132">If the size of the destination rectangle becomes larger than the playback area, you can specify which portion of the playback area will display the video clip by using **MCIWndPutDest**.</span></span>

> [!Note]  
> <span data-ttu-id="138f1-133">Макрос [**мЦивндпутдест**](/windows/desktop/api/Vfw/nf-vfw-mciwndputdest) не изменяет размер области воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="138f1-133">The [**MCIWndPutDest**](/windows/desktop/api/Vfw/nf-vfw-mciwndputdest) macro does not change the size of the playback area.</span></span> <span data-ttu-id="138f1-134">Чтобы растянуть окно МЦивнд вместе с прямоугольником назначения, необходимо знать текущий размер окна МЦивнд и выдать новые размеры окон на основе прямоугольника назначения.</span><span class="sxs-lookup"><span data-stu-id="138f1-134">To stretch the MCIWnd window along with the destination rectangle, you need to know the current size of the MCIWnd window and issue new window dimensions based on the destination rectangle.</span></span> <span data-ttu-id="138f1-135">Вы можете получить размеры окна МЦивнд с помощью функции [жетвиндоврект](/windows/win32/api/winuser/nf-winuser-getwindowrect) и изменить размер окна мЦивнд с помощью функции [SetWindowPos](/windows/win32/api/winuser/nf-winuser-setwindowpos) .</span><span class="sxs-lookup"><span data-stu-id="138f1-135">You can retrieve the MCIWnd window dimensions by using the [GetWindowRect](/windows/win32/api/winuser/nf-winuser-getwindowrect) function and resize the MCIWnd window by using the [SetWindowPos](/windows/win32/api/winuser/nf-winuser-setwindowpos) function.</span></span>

 

 

 