---
title: Команда MCI_RESERVE (Ммсистем. h)
description: Команда " \_ резервировать" MCI выделяет непрерывное место на диске для рабочей области экземпляра драйвера устройства для использования с последующей записью. Устройство Digital-Video распознает эту команду.
ms.assetid: 01f0a377-0179-4b05-a642-af152a7a12ae
keywords:
- команда MCI_RESERVE Windows мультимедиа
topic_type:
- apiref
api_name:
- MCI_RESERVE
api_location:
- Mmsystem.h
api_type:
- HeaderDef
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 0f21570d37fba9bc0c9595715715a9291aedd30650081edfa5d50f7264cf16c7
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117803465"
---
# <a name="mci_reserve-command"></a>Команда "резервировать" MCI \_

Команда " \_ резервировать" MCI выделяет непрерывное место на диске для рабочей области экземпляра драйвера устройства для использования с последующей записью. Устройство Digital-Video распознает эту команду.

Чтобы отправить эту команду, вызовите функцию [**мЦисендкомманд**](/previous-versions//dd757160(v=vs.85)) со следующими параметрами.


```C++
MCIERROR mciSendCommand(
  MCIDEVICEID wDeviceID, 
  MCI_RESERVE, 
  DWORD dwFlags, 
  (DWORD) (LPMCI_DGV_RESERVE_PARMS) lpReserve
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

<span id="wDeviceID"></span><span id="wdeviceid"></span><span id="WDEVICEID"></span>*вдевицеид*
</dt> <dd>

Идентификатор устройства MCI, который должен получить командное сообщение.

</dd> <dt>

<span id="dwFlags"></span><span id="dwflags"></span><span id="DWFLAGS"></span>*dwFlags*
</dt> <dd>

\_Уведомление MCI, \_ Ожидание MCI или \_ тест MCI. Дополнительные сведения об этих флагах см. [в разделе Флаги ожидания, уведомления и проверки](the-wait-notify-and-test-flags.md).

</dd> <dt>

<span id="lpReserve"></span><span id="lpreserve"></span><span id="LPRESERVE"></span>*лпресерве*
</dt> <dd>

Указатель на структуру [**\_ \_ \_ пармс ДГВ MCI**](/windows/desktop/api/Digitalv/ns-digitalv-mci_dgv_reserve_parmsa) .

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Возвращает нуль в случае успеха или ошибку в противном случае.

## <a name="remarks"></a>Remarks

Если Рабочая область содержит несохраненные данные, эти данные теряются. Если место на диске не резервируется перед записью, команда [MCI \_ Record](mci-record.md) выполняет неявное резервирование с параметрами по умолчанию для конкретных устройств. В некоторых реализациях резервирование не требуется и может игнорироваться драйвером устройства. Явное резервирование пространства позволяет лучше контролировать время задержки выделения места на диске, объем выделяемого пространства и место, где выделяется место на диске. Объем и расположение места на диске, уже зарезервированные для этого экземпляра устройства, можно изменить, выполнив \_ повторный ввод MCI. Все выделенные и по-прежнему неиспользуемые места на диске не освобождаются до тех пор, пока не будут сохранены все записанные данные или не будет закрыт экземпляр драйвера устройства.

Если видео отключено с \_ флагом MCI Off команды [MCI \_ сетвидео](mci-setvideo.md) , зарезервированное пространство не включает видео. Если звук выключен с \_ флагом MCI Off команды [MCI \_ сетаудио](mci-setaudio.md) , зарезервированное пространство не включает звук. Если звук и видео отключены или если запрошенный размер равен нулю, пространство не резервируется и освобождается все существующие зарезервированные пространства.

Следующие дополнительные флаги применяются к устройствам цифрового видео:

<dl> <dt>

<span id="MCI_DGV_RESERVE_IN"></span><span id="mci_dgv_reserve_in"></span>\_резерв ДГВ \_ MCI \_ в
</dt> <dd>

Элемент **лпстрпас** структуры, идентифицируемой *лпресерве* , содержит адрес буфера, содержащего расположение временного файла. Буфер содержит только диск и путь к каталогу файла, который используется для хранения записанных данных. имя файла указывается драйвером устройства. Этот временный файл удаляется при закрытии экземпляра устройства, если он не сохранен явным образом. Если этот флаг опущен, драйвер устройства указывает, где выделяется место на диске.

</dd> <dt>

<span id="MCI_DGV_RESERVE_SIZE"></span><span id="mci_dgv_reserve_size"></span>\_ \_ резервный размер MCI ДГВ \_
</dt> <dd>

Элемент **двсизе** структуры, идентифицируемой *лпресерве* , указывает приблизительный объем дискового пространства, резервируемого в рабочей области для записи. Значение указывается в текущем формате времени. Оценка объема дискового пространства определяется по запрошенному времени и от формата файла, используемого алгоритма видео и звука и значений качества. Если этот флаг опущен, драйвер устройства может использовать значение по умолчанию, которое он определяет.

</dd> </dl>

## <a name="requirements"></a>Requirements (Требования)



| Требование | Значение |
|-------------------------------------|-----------------------------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/>                                                |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                                                      |
| Заголовок<br/>                   | <dl> <dt>ммсистем. h (включает Windows. h)</dt> </dl> |



## <a name="see-also"></a>См. также

<dl> <dt>

[MCI](mci.md)
</dt> <dt>

[Команды MCI](mci-commands.md)
</dt> </dl>

 

