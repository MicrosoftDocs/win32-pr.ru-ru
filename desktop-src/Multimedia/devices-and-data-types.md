---
title: Устройства и типы данных
description: Устройства и типы данных
ms.assetid: 46247983-19c3-4c7a-a615-ba6cd8bd3289
keywords:
- звуковая волна, открытие выходных устройств
- аудио-интерфейс, открытие выходных устройств
- Открытие звуковых устройств аудио
- звуковая волна, запросы к выходным устройствам
- аудио-интерфейс, запрос устройств вывода
- запрос звуковых устройств аудио
- звуковая волна, дескрипторы устройств
- аудио-интерфейс, дескрипторы устройств
- звуковая волна, идентификаторы устройств
- волна-Audio Interface, идентификаторы устройств
- звуковая волна, типы выходных данных
- волна — аудио-интерфейс, типы выходных данных
- звуковая волна, форматы данных
- волна — аудио-интерфейс, форматы данных
- запись аудио-данных
- звуковая волна, запись данных
- волна — аудио-интерфейс, запись данных
- Волны PCM, звуковые данные
- звуковая волна, данные PCM
- аудио-интерфейс, данные PCM
- звуковая волна, закрытие выходных устройств
- аудио-интерфейс, закрытие выходных устройств
- Закрытие звуковых устройств аудио
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 29561a74695fb8bde950e2e75a430803a1a0351b
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "105650346"
---
# <a name="devices-and-data-types"></a><span data-ttu-id="699b4-126">Устройства и типы данных</span><span class="sxs-lookup"><span data-stu-id="699b4-126">Devices and Data Types</span></span>

<span data-ttu-id="699b4-127">В этом разделе описывается работа с устройствами аудио-аудиосигнала, а также сведения о том, как открывать, закрывать и запрашивать их возможности.</span><span class="sxs-lookup"><span data-stu-id="699b4-127">This section describes working with waveform-audio devices, and includes information on how to open, close and query them for their capabilities.</span></span> <span data-ttu-id="699b4-128">В нем также описывается отслеживание устройств в системе с помощью дескрипторов устройств и идентификаторов устройств.</span><span class="sxs-lookup"><span data-stu-id="699b4-128">It also describes how to keep track of the devices in a system by using device handles and device identifiers.</span></span>

## <a name="opening-waveform-audio-output-devices"></a><span data-ttu-id="699b4-129">Открытие Waveform-Audio выходных устройств</span><span class="sxs-lookup"><span data-stu-id="699b4-129">Opening Waveform-Audio Output Devices</span></span>

<span data-ttu-id="699b4-130">Используйте функцию [**вавеаутопен**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) , чтобы открыть выходное устройство звуковой волны для воспроизведения.</span><span class="sxs-lookup"><span data-stu-id="699b4-130">Use the [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) function to open a waveform-audio output device for playback.</span></span> <span data-ttu-id="699b4-131">Эта функция открывает устройство, связанное с указанным идентификатором устройства, и возвращает маркер открытого устройства путем записи маркера указанного расположения в памяти.</span><span class="sxs-lookup"><span data-stu-id="699b4-131">This function opens the device associated with the specified device identifier and returns a handle of the open device by writing the handle of a specified memory location.</span></span>

<span data-ttu-id="699b4-132">Некоторые мультимедийные компьютеры имеют несколько выходных устройств аудио-звука.</span><span class="sxs-lookup"><span data-stu-id="699b4-132">Some multimedia computers have multiple waveform-audio output devices.</span></span> <span data-ttu-id="699b4-133">Если вы не хотите открывать конкретное устройство вывода аудио-звука в системе, при \_ открытии устройства следует использовать флаг СОПОСТАВИТЕЛЯ Wave для идентификатора устройства.</span><span class="sxs-lookup"><span data-stu-id="699b4-133">Unless you want to open a specific waveform-audio output device in a system, you should use the WAVE\_MAPPER flag for the device identifier when you open a device.</span></span> <span data-ttu-id="699b4-134">Функция **вавеаутопен** выбирает устройство в системе, которое лучше воспроизводить указанный формат данных.</span><span class="sxs-lookup"><span data-stu-id="699b4-134">The **waveOutOpen** function chooses the device in the system that is best able to play the specified data format.</span></span>

## <a name="querying-audio-devices"></a><span data-ttu-id="699b4-135">Запросы к звуковым устройствам</span><span class="sxs-lookup"><span data-stu-id="699b4-135">Querying Audio Devices</span></span>

<span data-ttu-id="699b4-136">Windows предоставляет следующие функции для определения того, сколько устройств определенного типа доступно в системе.</span><span class="sxs-lookup"><span data-stu-id="699b4-136">Windows provides the following functions to determine how many devices of a certain type are available in a system.</span></span>



| <span data-ttu-id="699b4-137">Функция</span><span class="sxs-lookup"><span data-stu-id="699b4-137">Function</span></span>                                       | <span data-ttu-id="699b4-138">Описание</span><span class="sxs-lookup"><span data-stu-id="699b4-138">Description</span></span>                                                                  |
|------------------------------------------------|------------------------------------------------------------------------------|
| [<span data-ttu-id="699b4-139">**ауксжетнумдевс**</span><span class="sxs-lookup"><span data-stu-id="699b4-139">**auxGetNumDevs**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-auxgetnumdevs)         | <span data-ttu-id="699b4-140">Возвращает количество дополнительных выходных устройств, имеющихся в системе.</span><span class="sxs-lookup"><span data-stu-id="699b4-140">Retrieves the number of auxiliary output devices present in the system.</span></span>      |
| [<span data-ttu-id="699b4-141">**вавеинжетнумдевс**</span><span class="sxs-lookup"><span data-stu-id="699b4-141">**waveInGetNumDevs**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveingetnumdevs)   | <span data-ttu-id="699b4-142">Возвращает число устройств ввода аудио-аудиосигнала, имеющихся в системе.</span><span class="sxs-lookup"><span data-stu-id="699b4-142">Retrieves the number of waveform-audio input devices present in the system.</span></span>  |
| [<span data-ttu-id="699b4-143">**вавеаутжетнумдевс**</span><span class="sxs-lookup"><span data-stu-id="699b4-143">**waveOutGetNumDevs**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetnumdevs) | <span data-ttu-id="699b4-144">Возвращает число устройств вывода аудио-звука, имеющихся в системе.</span><span class="sxs-lookup"><span data-stu-id="699b4-144">Retrieves the number of waveform-audio output devices present in the system.</span></span> |



 

<span data-ttu-id="699b4-145">Звуковые устройства идентифицируются по идентификатору устройства.</span><span class="sxs-lookup"><span data-stu-id="699b4-145">Audio devices are identified by a device identifier.</span></span> <span data-ttu-id="699b4-146">Идентификатор устройства определяется неявно на основе числа устройств, имеющихся в системе.</span><span class="sxs-lookup"><span data-stu-id="699b4-146">The device identifier is determined implicitly from the number of devices present in a system.</span></span> <span data-ttu-id="699b4-147">Идентификаторы устройств находятся в диапазоне от 0 до меньшего числа имеющихся устройств.</span><span class="sxs-lookup"><span data-stu-id="699b4-147">Device identifiers range from zero to one less than the number of devices present.</span></span> <span data-ttu-id="699b4-148">Например, если в системе есть два выходных устройства аудио-звука, допустимые идентификаторы устройств: 0 и 1.</span><span class="sxs-lookup"><span data-stu-id="699b4-148">For example, if there are two waveform-audio output devices in a system, valid device identifiers are 0 and 1.</span></span>

<span data-ttu-id="699b4-149">После определения количества устройств определенного типа в системе можно использовать одну из следующих функций для запроса возможностей каждого устройства.</span><span class="sxs-lookup"><span data-stu-id="699b4-149">After you determine how many devices of a certain type are present in a system, you can use one of the following functions to query the capabilities of each device.</span></span>



| <span data-ttu-id="699b4-150">Функция</span><span class="sxs-lookup"><span data-stu-id="699b4-150">Function</span></span>                                       | <span data-ttu-id="699b4-151">Описание</span><span class="sxs-lookup"><span data-stu-id="699b4-151">Description</span></span>                                                             |
|------------------------------------------------|-------------------------------------------------------------------------|
| [<span data-ttu-id="699b4-152">**ауксжетдевкапс**</span><span class="sxs-lookup"><span data-stu-id="699b4-152">**auxGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-auxgetdevcaps)         | <span data-ttu-id="699b4-153">Получает возможности указанного вспомогательного устройства вывода.</span><span class="sxs-lookup"><span data-stu-id="699b4-153">Retrieves the capabilities of a specified auxiliary output device.</span></span>      |
| [<span data-ttu-id="699b4-154">**вавеинжетдевкапс**</span><span class="sxs-lookup"><span data-stu-id="699b4-154">**waveInGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveingetdevcaps)   | <span data-ttu-id="699b4-155">Получает возможности указанного устройства ввода аудио-сигнала.</span><span class="sxs-lookup"><span data-stu-id="699b4-155">Retrieves the capabilities of a specified waveform-audio input device.</span></span>  |
| [<span data-ttu-id="699b4-156">**вавеаутжетдевкапс**</span><span class="sxs-lookup"><span data-stu-id="699b4-156">**waveOutGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetdevcaps) | <span data-ttu-id="699b4-157">Получает возможности указанного устройства вывода аудио-звука.</span><span class="sxs-lookup"><span data-stu-id="699b4-157">Retrieves the capabilities of a specified waveform-audio output device.</span></span> |



 

<span data-ttu-id="699b4-158">Каждая из этих функций заполняет структуру данными о возможностях указанного устройства.</span><span class="sxs-lookup"><span data-stu-id="699b4-158">Each of these functions fills a structure with information about the capabilities of a specified device.</span></span> <span data-ttu-id="699b4-159">В следующей таблице перечислены структуры, соответствующие каждой из этих функций.</span><span class="sxs-lookup"><span data-stu-id="699b4-159">The following table lists the structures that correspond to each of these functions.</span></span>



|                                                |                                    |
|------------------------------------------------|------------------------------------|
| <span data-ttu-id="699b4-160">Функция</span><span class="sxs-lookup"><span data-stu-id="699b4-160">Function</span></span>                                       | <span data-ttu-id="699b4-161">Структура</span><span class="sxs-lookup"><span data-stu-id="699b4-161">Structure</span></span>                          |
| [<span data-ttu-id="699b4-162">**ауксжетдевкапс**</span><span class="sxs-lookup"><span data-stu-id="699b4-162">**auxGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-auxgetdevcaps)         | [<span data-ttu-id="699b4-163">**аукскапс**</span><span class="sxs-lookup"><span data-stu-id="699b4-163">**AUXCAPS**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-auxcaps)         |
| [<span data-ttu-id="699b4-164">**вавеинжетдевкапс**</span><span class="sxs-lookup"><span data-stu-id="699b4-164">**waveInGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveingetdevcaps)   | [<span data-ttu-id="699b4-165">**вавеинкапс**</span><span class="sxs-lookup"><span data-stu-id="699b4-165">**WAVEINCAPS**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-waveincaps)   |
| [<span data-ttu-id="699b4-166">**вавеаутжетдевкапс**</span><span class="sxs-lookup"><span data-stu-id="699b4-166">**waveOutGetDevCaps**</span></span>](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetdevcaps) | [<span data-ttu-id="699b4-167">**вавеауткапс**</span><span class="sxs-lookup"><span data-stu-id="699b4-167">**WAVEOUTCAPS**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-waveoutcaps) |



 

<span data-ttu-id="699b4-168">Стандартные форматы перечислены в элементе **двформатс** структуры **вавеауткапс** .</span><span class="sxs-lookup"><span data-stu-id="699b4-168">Standard formats are listed in the **dwFormats** member of the **WAVEOUTCAPS** structure.</span></span> <span data-ttu-id="699b4-169">Аудио-устройства могут поддерживать нестандартные форматы.</span><span class="sxs-lookup"><span data-stu-id="699b4-169">Waveform-audio devices can support nonstandard formats.</span></span> <span data-ttu-id="699b4-170">Чтобы определить, поддерживается ли устройством определенный формат (стандартный или нестандартный), можно вызвать функцию [**вавеаутопен**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) с \_ \_ флагом запроса Wave Format.</span><span class="sxs-lookup"><span data-stu-id="699b4-170">To determine whether a particular format (standard or nonstandard) is supported by a device, you can call the [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) function with the WAVE\_FORMAT\_QUERY flag.</span></span> <span data-ttu-id="699b4-171">Этот флаг не открывает устройство.</span><span class="sxs-lookup"><span data-stu-id="699b4-171">This flag does not open the device.</span></span> <span data-ttu-id="699b4-172">Вы указываете нужный формат в структуре [**вавеформатекс**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) , на которую указывает параметр *пвфкс* , передаваемый в **вавеаутопен**.</span><span class="sxs-lookup"><span data-stu-id="699b4-172">You specify the format in question in the [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) structure pointed to by the *pwfx* parameter passed to **waveOutOpen**.</span></span>

<span data-ttu-id="699b4-173">Устройства вывода аудио-файлов имеют различные возможности.</span><span class="sxs-lookup"><span data-stu-id="699b4-173">Waveform-audio output devices vary in the capabilities they support.</span></span> <span data-ttu-id="699b4-174">Элемент **двсуппорт** структуры [**вавеауткапс**](/windows/win32/api/mmeapi/ns-mmeapi-waveoutcaps) указывает, поддерживает ли устройство такие возможности, как изменения громкости и шага.</span><span class="sxs-lookup"><span data-stu-id="699b4-174">The **dwSupport** member of the [**WAVEOUTCAPS**](/windows/win32/api/mmeapi/ns-mmeapi-waveoutcaps) structure indicates whether a device supports such capabilities as volume and pitch changes.</span></span>

## <a name="device-handles-and-device-identifiers"></a><span data-ttu-id="699b4-175">Дескрипторы устройств и идентификаторы устройств</span><span class="sxs-lookup"><span data-stu-id="699b4-175">Device Handles and Device Identifiers</span></span>

<span data-ttu-id="699b4-176">Каждая функция, открывающая звуковое устройство, указывает идентификатор устройства, указатель на расположение в памяти и некоторые параметры, уникальные для каждого типа устройства.</span><span class="sxs-lookup"><span data-stu-id="699b4-176">Each function that opens an audio device specifies a device identifier, a pointer to a memory location, and some parameters that are unique to each type of device.</span></span> <span data-ttu-id="699b4-177">Область памяти заполняется с помощью маркера устройства.</span><span class="sxs-lookup"><span data-stu-id="699b4-177">The memory location is filled with a device handle.</span></span> <span data-ttu-id="699b4-178">Используйте этот маркер устройства для обнаружения открытого звукового устройства при вызове других звуковых функций.</span><span class="sxs-lookup"><span data-stu-id="699b4-178">Use this device handle to identify the open audio device when calling other audio functions.</span></span>

<span data-ttu-id="699b4-179">Различие между идентификаторами и дескрипторами для звуковых устройств является неочевидным, но важным:</span><span class="sxs-lookup"><span data-stu-id="699b4-179">The difference between identifiers and handles for audio devices is subtle but important:</span></span>

-   <span data-ttu-id="699b4-180">Идентификаторы устройств определяются неявно на количестве устройств, имеющихся в системе.</span><span class="sxs-lookup"><span data-stu-id="699b4-180">Device identifiers are determined implicitly from the number of devices present in a system.</span></span> <span data-ttu-id="699b4-181">Это число получается с помощью функции [**ауксжетнумдевс**](/windows/win32/api/mmeapi/nf-mmeapi-auxgetnumdevs), [**вавеинжетнумдевс**](/windows/win32/api/mmeapi/nf-mmeapi-waveingetnumdevs)или [**вавеаутжетнумдевс**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetnumdevs) .</span><span class="sxs-lookup"><span data-stu-id="699b4-181">This number is obtained by using the [**auxGetNumDevs**](/windows/win32/api/mmeapi/nf-mmeapi-auxgetnumdevs), [**waveInGetNumDevs**](/windows/win32/api/mmeapi/nf-mmeapi-waveingetnumdevs), or [**waveOutGetNumDevs**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetnumdevs) function.</span></span>
-   <span data-ttu-id="699b4-182">Дескрипторы устройств возвращаются при открытии драйверов устройств с помощью функции [**вавеинопен**](/windows/win32/api/mmeapi/nf-mmeapi-waveinopen) или [**вавеаутопен**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) .</span><span class="sxs-lookup"><span data-stu-id="699b4-182">Device handles are returned when device drivers are opened by using the [**waveInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveinopen) or [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) function.</span></span>

<span data-ttu-id="699b4-183">Нет функций, которые открывают или закрывают вспомогательные звуковые устройства.</span><span class="sxs-lookup"><span data-stu-id="699b4-183">There are no functions that open or close auxiliary audio devices.</span></span> <span data-ttu-id="699b4-184">Вспомогательные звуковые устройства не должны открываться и закрываться как устройства аудио-аудио, так как с ними не связана непрерывная отправка данных.</span><span class="sxs-lookup"><span data-stu-id="699b4-184">Auxiliary audio devices need not be opened and closed like waveform-audio devices because there is no continuous data transfer associated with them.</span></span> <span data-ttu-id="699b4-185">Все вспомогательные функции аудио используют идентификаторы устройств для идентификации устройств.</span><span class="sxs-lookup"><span data-stu-id="699b4-185">All auxiliary audio functions use device identifiers to identify devices.</span></span>

## <a name="waveform-audio-output-data-types"></a><span data-ttu-id="699b4-186">Типы выходных данных Waveform-Audio</span><span class="sxs-lookup"><span data-stu-id="699b4-186">Waveform-Audio Output Data Types</span></span>

<span data-ttu-id="699b4-187">Для выходных функций аудио-звука определены следующие типы данных.</span><span class="sxs-lookup"><span data-stu-id="699b4-187">The following data types are defined for waveform-audio output functions.</span></span>



| <span data-ttu-id="699b4-188">Тип</span><span class="sxs-lookup"><span data-stu-id="699b4-188">Type</span></span>                                 | <span data-ttu-id="699b4-189">Описание</span><span class="sxs-lookup"><span data-stu-id="699b4-189">Description</span></span>                                                                                                                                                   |
|--------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="699b4-190">**хвавеаут**</span><span class="sxs-lookup"><span data-stu-id="699b4-190">**HWAVEOUT**</span></span>                         | <span data-ttu-id="699b4-191">Обработчик для устройства вывода с открытым аудио-данным.</span><span class="sxs-lookup"><span data-stu-id="699b4-191">Handle to an open waveform-audio output device.</span></span>                                                                                                               |
| [<span data-ttu-id="699b4-192">**вавеформатекс**</span><span class="sxs-lookup"><span data-stu-id="699b4-192">**WAVEFORMATEX**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) | <span data-ttu-id="699b4-193">Структура, указывающая форматы данных, поддерживаемые устройством ввода аудио-сигнала.</span><span class="sxs-lookup"><span data-stu-id="699b4-193">Structure that specifies the data formats supported by a particular waveform-audio input device.</span></span> <span data-ttu-id="699b4-194">Эта структура также уседфор звуковые устройства ввода аудио.</span><span class="sxs-lookup"><span data-stu-id="699b4-194">This structure is also usedfor waveform-audio input devices.</span></span> |
| [<span data-ttu-id="699b4-195">**вавехдр**</span><span class="sxs-lookup"><span data-stu-id="699b4-195">**WAVEHDR**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr)           | <span data-ttu-id="699b4-196">Структура, используемая в качестве заголовка для блока входных данных аудио-сигнала.</span><span class="sxs-lookup"><span data-stu-id="699b4-196">Structure used as a header for a block of waveform-audio input data.</span></span> <span data-ttu-id="699b4-197">Эта структура также используется для устройств ввода аудиосигнала.</span><span class="sxs-lookup"><span data-stu-id="699b4-197">This structure is also used for waveform-audio input devices.</span></span>                            |
| [<span data-ttu-id="699b4-198">**вавеауткапс**</span><span class="sxs-lookup"><span data-stu-id="699b4-198">**WAVEOUTCAPS**</span></span>](/windows/win32/api/mmeapi/ns-mmeapi-waveoutcaps)   | <span data-ttu-id="699b4-199">Структура, используемая для запроса возможностей определенного устройства вывода аудио-звука.</span><span class="sxs-lookup"><span data-stu-id="699b4-199">Structure used to query the capabilities of a particular waveform-audio output device.</span></span>                                                                        |



 

## <a name="specifying-waveform-audio-data-formats"></a><span data-ttu-id="699b4-200">Указание Waveform-Audio форматов данных</span><span class="sxs-lookup"><span data-stu-id="699b4-200">Specifying Waveform-Audio Data Formats</span></span>

<span data-ttu-id="699b4-201">При вызове функции [**вавеаутопен**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) для открытия драйвера устройства для воспроизведения или запроса того, поддерживает ли драйвер определенный формат данных, используйте параметр *пвфкс* , чтобы указать указатель на структуру [**вавеформатекс**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) , содержащую запрошенный формат данных аудио-звука.</span><span class="sxs-lookup"><span data-stu-id="699b4-201">When you call the [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen) function to open a device driver for playback or to query whether the driver supports a particular data format, use the *pwfx* parameter to specify a pointer to a [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) structure containing the requested waveform-audio data format.</span></span> <span data-ttu-id="699b4-202">**Вавеформатекс** заменяет структуры [**вавеформат**](/windows/win32/api/mmreg/ns-mmreg-waveformat) и [**пкмвавеформат**](/windows/win32/api/mmreg/ns-mmreg-pcmwaveformat) .</span><span class="sxs-lookup"><span data-stu-id="699b4-202">**WAVEFORMATEX** supersedes the [**WAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-waveformat) and [**PCMWAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-pcmwaveformat) structures.</span></span>

<span data-ttu-id="699b4-203">Для звуковых данных, разделенных на более двух каналов или имеющих размер выборки, не кратный 8, следует использовать [**вавеформатекстенсибле**](/windows/win32/api/mmreg/ns-mmreg-waveformatextensible).</span><span class="sxs-lookup"><span data-stu-id="699b4-203">For audio data that is separated into more than two channels or has a sample size that is not a multiple of 8, you should use [**WAVEFORMATEXTENSIBLE**](/windows/win32/api/mmreg/ns-mmreg-waveformatextensible).</span></span> <span data-ttu-id="699b4-204">Эта структура просто настраивает дополнительные байты, на которые указывает член **кбсизе** в **вавеформатекс** , чтобы предоставить дополнительные сведения о формате.</span><span class="sxs-lookup"><span data-stu-id="699b4-204">This structure simply configures the extra bytes pointed to by the **cbSize** member of **WAVEFORMATEX** to give extra information about the format.</span></span> <span data-ttu-id="699b4-205">**Вавеформатекстенсибле** можно привести как **вавеформатекс**.</span><span class="sxs-lookup"><span data-stu-id="699b4-205">**WAVEFORMATEXTENSIBLE** can be cast as **WAVEFORMATEX**.</span></span>

<span data-ttu-id="699b4-206">Есть также два формата буфера обмена, которые можно использовать для представления звуковых данных: CF \_ Wave и CF \_ Metallica.</span><span class="sxs-lookup"><span data-stu-id="699b4-206">There are also two clipboard formats you can use to represent audio data: CF\_WAVE and CF\_RIFF.</span></span> <span data-ttu-id="699b4-207">Используйте формат CF, \_ чтобы представить данные в одном из стандартных форматов, например в формате PCM 11 кГц или 22 кГц.</span><span class="sxs-lookup"><span data-stu-id="699b4-207">Use the CF\_WAVE format to represent data in one of the standard formats, such as 11 kHz or 22 kHz PCM.</span></span> <span data-ttu-id="699b4-208">Используйте формат CF \_ Metallica для представления более сложных форматов данных, которые не могут быть представлены как стандартные аудио-файлы.</span><span class="sxs-lookup"><span data-stu-id="699b4-208">Use the CF\_RIFF format to represent more complex data formats that cannot be represented as standard waveform-audio files.</span></span>

## <a name="writing-waveform-audio-data"></a><span data-ttu-id="699b4-209">Запись Waveform-Audio данных</span><span class="sxs-lookup"><span data-stu-id="699b4-209">Writing Waveform-Audio Data</span></span>

<span data-ttu-id="699b4-210">После успешного открытия драйвера устройства вывода аудио-аудио можно начать воспроизведение звука.</span><span class="sxs-lookup"><span data-stu-id="699b4-210">After successfully opening a waveform-audio output device driver, you can begin playing a sound.</span></span> <span data-ttu-id="699b4-211">Windows предоставляет функцию [**вавеаутврите**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutwrite) для отправки блоков данных в устройства вывода аудио-сигнала.</span><span class="sxs-lookup"><span data-stu-id="699b4-211">Windows provides the [**waveOutWrite**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutwrite) function for sending data blocks to waveform-audio output devices.</span></span>

<span data-ttu-id="699b4-212">Используйте структуру [**вавехдр**](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr) , чтобы указать блок данных звуковой волны, отправляемый с помощью **вавеаутврите**.</span><span class="sxs-lookup"><span data-stu-id="699b4-212">Use the [**WAVEHDR**](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr) structure to specify the waveform-audio data block you are sending using **waveOutWrite**.</span></span> <span data-ttu-id="699b4-213">Эта структура содержит указатель на блок заблокированных данных, длину блока данных и некоторые флаги.</span><span class="sxs-lookup"><span data-stu-id="699b4-213">This structure contains a pointer to a locked data block, the length of the data block, and some flags.</span></span> <span data-ttu-id="699b4-214">Этот блок данных должен быть подготовлен перед использованием. Дополнительные сведения о подготовке блока данных см. в разделе [Звуковые блоки данных](audio-data-blocks.md).</span><span class="sxs-lookup"><span data-stu-id="699b4-214">This data block must be prepared before you use it; for information about preparing a data block, see [Audio Data Blocks](audio-data-blocks.md).</span></span>

<span data-ttu-id="699b4-215">После отправки блока данных на выходное устройство с помощью **вавеаутврите** необходимо дождаться завершения работы драйвера устройства с блоком данных перед его освобождением.</span><span class="sxs-lookup"><span data-stu-id="699b4-215">After you send a data block to an output device by using **waveOutWrite**, you must wait until the device driver is finished with the data block before freeing it.</span></span> <span data-ttu-id="699b4-216">При отправке нескольких блоков данных необходимо отслеживать завершение блоков данных, чтобы выяснить, когда отправлять дополнительные блоки.</span><span class="sxs-lookup"><span data-stu-id="699b4-216">If you are sending multiple data blocks, you must monitor the completion of data blocks to know when to send additional blocks.</span></span> <span data-ttu-id="699b4-217">Дополнительные сведения о блоках данных см. в разделе [Звуковые блоки данных](audio-data-blocks.md).</span><span class="sxs-lookup"><span data-stu-id="699b4-217">For more information about data blocks, see [Audio Data Blocks](audio-data-blocks.md).</span></span>

## <a name="pcm-waveform-audio-data-format"></a><span data-ttu-id="699b4-218">Формат данных PCM Waveform-Audio</span><span class="sxs-lookup"><span data-stu-id="699b4-218">PCM Waveform-Audio Data Format</span></span>

<span data-ttu-id="699b4-219">Элемент **лпдата** структуры [**вавехдр**](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr) поинтсеттс к образцам данных аудио-Audio.</span><span class="sxs-lookup"><span data-stu-id="699b4-219">The **lpData** member of the [**WAVEHDR**](/windows/win32/api/mmeapi/ns-mmeapi-wavehdr) structure pointsetts to the waveform-audio data samples.</span></span> <span data-ttu-id="699b4-220">Для 8-разрядных данных PCM каждый пример представлен одним неподписанным байтом данных.</span><span class="sxs-lookup"><span data-stu-id="699b4-220">For 8-bit PCM data, each sample is represented by a single unsigned data byte.</span></span> <span data-ttu-id="699b4-221">Для 16-разрядных данных PCM каждый пример представлен 16-битным значением со знаком.</span><span class="sxs-lookup"><span data-stu-id="699b4-221">For 16-bit PCM data, each sample is represented by a 16-bit signed value.</span></span> <span data-ttu-id="699b4-222">В следующей таблице перечислены максимальные, минимальные и средние значения для звуковых данных PCM (волны).</span><span class="sxs-lookup"><span data-stu-id="699b4-222">The following table summarizes the maximum, minimum, and midpoint values for PCM waveform-audio data.</span></span>



|             |                 |                  |                |
|-------------|-----------------|------------------|----------------|
| <span data-ttu-id="699b4-223">Формат данных</span><span class="sxs-lookup"><span data-stu-id="699b4-223">Data format</span></span> | <span data-ttu-id="699b4-224">Максимальное значение</span><span class="sxs-lookup"><span data-stu-id="699b4-224">Maximum value</span></span>   | <span data-ttu-id="699b4-225">Минимальное значение</span><span class="sxs-lookup"><span data-stu-id="699b4-225">Minimum value</span></span>    | <span data-ttu-id="699b4-226">Среднее значение</span><span class="sxs-lookup"><span data-stu-id="699b4-226">Midpoint value</span></span> |
| <span data-ttu-id="699b4-227">8-разрядный PCM</span><span class="sxs-lookup"><span data-stu-id="699b4-227">8-bit PCM</span></span>   | <span data-ttu-id="699b4-228">255 (0xFF)</span><span class="sxs-lookup"><span data-stu-id="699b4-228">255 (0xFF)</span></span>      | <span data-ttu-id="699b4-229">0</span><span class="sxs-lookup"><span data-stu-id="699b4-229">0</span></span>                | <span data-ttu-id="699b4-230">128 (0x80)</span><span class="sxs-lookup"><span data-stu-id="699b4-230">128 (0x80)</span></span>     |
| <span data-ttu-id="699b4-231">16-разрядный PCM</span><span class="sxs-lookup"><span data-stu-id="699b4-231">16-bit PCM</span></span>  | <span data-ttu-id="699b4-232">32 767 (0x7FFF)</span><span class="sxs-lookup"><span data-stu-id="699b4-232">32,767 (0x7FFF)</span></span> | <span data-ttu-id="699b4-233">– 32 768 (0x8000)</span><span class="sxs-lookup"><span data-stu-id="699b4-233">–32,768 (0x8000)</span></span> | <span data-ttu-id="699b4-234">0</span><span class="sxs-lookup"><span data-stu-id="699b4-234">0</span></span>              |



 

## <a name="pcm-data-packing"></a><span data-ttu-id="699b4-235">Упаковка данных PCM</span><span class="sxs-lookup"><span data-stu-id="699b4-235">PCM Data Packing</span></span>

<span data-ttu-id="699b4-236">Порядок байтов данных зависит от 8-разрядных и 16-разрядных форматов, а также от форматов Mono и стерео.</span><span class="sxs-lookup"><span data-stu-id="699b4-236">The order of the data bytes varies between 8-bit and 16-bit formats and between mono and stereo formats.</span></span> <span data-ttu-id="699b4-237">В следующем списке описывается упаковка данных для различных форматов данных волновой волны PCM.</span><span class="sxs-lookup"><span data-stu-id="699b4-237">The following list describes data packing for the different PCM waveform-audio data formats.</span></span>



| <span data-ttu-id="699b4-238">Волновая волна PCM-аудио формат</span><span class="sxs-lookup"><span data-stu-id="699b4-238">PCM waveform-audio format</span></span> | <span data-ttu-id="699b4-239">Описание</span><span class="sxs-lookup"><span data-stu-id="699b4-239">Description</span></span>                                                                                                                                                                                                                                                                                                                                     |
|---------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="699b4-240">8-разрядный моно</span><span class="sxs-lookup"><span data-stu-id="699b4-240">8-bit mono</span></span>                | <span data-ttu-id="699b4-241">Каждый пример имеет один байт, соответствующий одному каналу звука.</span><span class="sxs-lookup"><span data-stu-id="699b4-241">Each sample is 1 byte that corresponds to a single audio channel.</span></span> <span data-ttu-id="699b4-242">После примера 1 следуют примеры 2, 3, 4 и т. д.</span><span class="sxs-lookup"><span data-stu-id="699b4-242">Sample 1 is followed by samples 2, 3, 4, and so on.</span></span>                                                                                                                                                                                                                           |
| <span data-ttu-id="699b4-243">8-разрядный стерео</span><span class="sxs-lookup"><span data-stu-id="699b4-243">8-bit stereo</span></span>              | <span data-ttu-id="699b4-244">Каждый пример имеет размер 2 байта.</span><span class="sxs-lookup"><span data-stu-id="699b4-244">Each sample is 2 bytes.</span></span> <span data-ttu-id="699b4-245">После примера 1 следуют примеры 2, 3, 4 и т. д.</span><span class="sxs-lookup"><span data-stu-id="699b4-245">Sample 1 is followed by samples 2, 3, 4, and so on.</span></span> <span data-ttu-id="699b4-246">Для каждого примера первым байтом является канал 0 (левый канал), а второй — канал 1 (правый канал).</span><span class="sxs-lookup"><span data-stu-id="699b4-246">For each sample, the first byte is channel 0 (the left channel) and the second byte is channel 1 (the right channel).</span></span>                                                                                                                                               |
| <span data-ttu-id="699b4-247">16-разрядный моно</span><span class="sxs-lookup"><span data-stu-id="699b4-247">16-bit mono</span></span>               | <span data-ttu-id="699b4-248">Каждый пример имеет размер 2 байта.</span><span class="sxs-lookup"><span data-stu-id="699b4-248">Each sample is 2 bytes.</span></span> <span data-ttu-id="699b4-249">После примера 1 следуют примеры 2, 3, 4 и т. д.</span><span class="sxs-lookup"><span data-stu-id="699b4-249">Sample 1 is followed by samples 2, 3, 4, and so on.</span></span> <span data-ttu-id="699b4-250">Для каждого примера первый байт является младшим байтом канала 0, а второй — старшим байтом канала 0.</span><span class="sxs-lookup"><span data-stu-id="699b4-250">For each sample, the first byte is the low-order byte of channel 0 and the second byte is the high-order byte of channel 0.</span></span>                                                                                                                                         |
| <span data-ttu-id="699b4-251">16-разрядный стерео</span><span class="sxs-lookup"><span data-stu-id="699b4-251">16-bit stereo</span></span>             | <span data-ttu-id="699b4-252">Каждый пример имеет 4 байта.</span><span class="sxs-lookup"><span data-stu-id="699b4-252">Each sample is 4 bytes.</span></span> <span data-ttu-id="699b4-253">После примера 1 следуют примеры 2, 3, 4 и т. д.</span><span class="sxs-lookup"><span data-stu-id="699b4-253">Sample 1 is followed by samples 2, 3, 4, and so on.</span></span> <span data-ttu-id="699b4-254">Для каждого примера первый байт является младшим байтом канала 0 (левый канал); второй байт — старший байт канала 0; третий байт — это младший байт канала 1 (правый канал); четвертый байт — старший байт канала 1.</span><span class="sxs-lookup"><span data-stu-id="699b4-254">For each sample, the first byte is the low-order byte of channel 0 (left channel); the second byte is the high-order byte of channel 0; the third byte is the low-order byte of channel 1 (right channel); and the fourth byte is the high-order byte of channel 1.</span></span> |
| <span data-ttu-id="699b4-255">Другие</span><span class="sxs-lookup"><span data-stu-id="699b4-255">Others</span></span>                    | <span data-ttu-id="699b4-256">Каждый пример содержится в блоке, который имеет кратное 4 байта, но примеры могут быть не выходящими по байтам.</span><span class="sxs-lookup"><span data-stu-id="699b4-256">Each sample is contained in a block that is a multiple of 4 bytes, but the samples may be non-byte-aligned.</span></span> <span data-ttu-id="699b4-257">Расположение каналов задается маской.</span><span class="sxs-lookup"><span data-stu-id="699b4-257">The arrangement of channels is specified by a mask.</span></span> <span data-ttu-id="699b4-258">Дополнительные сведения см. в разделе [**вавеформатекстенсибле**](/windows/win32/api/mmreg/ns-mmreg-waveformatextensible).</span><span class="sxs-lookup"><span data-stu-id="699b4-258">For more information, see [**WAVEFORMATEXTENSIBLE**](/windows/win32/api/mmreg/ns-mmreg-waveformatextensible).</span></span>                                                                                                 |



 

## <a name="closing-waveform-audio-output-devices"></a><span data-ttu-id="699b4-259">Закрытие Waveform-Audio выходных устройств</span><span class="sxs-lookup"><span data-stu-id="699b4-259">Closing Waveform-Audio Output Devices</span></span>

<span data-ttu-id="699b4-260">После завершения воспроизведения аудио-сигнала вызовите [**вавеаутклосе**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutclose) , чтобы закрыть выходное устройство.</span><span class="sxs-lookup"><span data-stu-id="699b4-260">After waveform-audio playback is complete, call [**waveOutClose**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutclose) to close the output device.</span></span> <span data-ttu-id="699b4-261">Если **вавеаутклосе** вызывается во время воспроизведения звукового файла, операция закрытия завершается ошибкой и функция возвращает код ошибки, указывающий, что устройство не было закрыто.</span><span class="sxs-lookup"><span data-stu-id="699b4-261">If **waveOutClose** is called while a waveform-audio file is playing, the close operation fails and the function returns an error code indicating that the device was not closed.</span></span> <span data-ttu-id="699b4-262">Если вы не хотите ждать окончания воспроизведения перед закрытием устройства, вызовите функцию [**вавеаутресет**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutreset) перед закрытием.</span><span class="sxs-lookup"><span data-stu-id="699b4-262">If you do not want to wait for playback to end before closing the device, call the [**waveOutReset**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutreset) function before closing.</span></span> <span data-ttu-id="699b4-263">Это завершает воспроизведение и позволяет закрыть устройство.</span><span class="sxs-lookup"><span data-stu-id="699b4-263">This ends playback and allows the device to be closed.</span></span> <span data-ttu-id="699b4-264">Не забудьте использовать функцию [**вавеаутунпрепарехеадер**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutunprepareheader) для очистки подготовки ко всем блокам данных перед закрытием устройства.</span><span class="sxs-lookup"><span data-stu-id="699b4-264">Be sure to use the [**waveOutUnprepareHeader**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutunprepareheader) function to clean up the preparation on all data blocks before closing the device.</span></span>

 

 