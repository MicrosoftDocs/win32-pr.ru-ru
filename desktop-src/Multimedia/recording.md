---
title: Запись
description: Запись
ms.assetid: 0026eb1d-5be1-4090-801b-f1c65c179f42
keywords:
- Команда MCI_RECORD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 27033dde148a6f99a1168eea4d6c0a97aea82881638ccb6d6f5535632e897148
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119805514"
---
# <a name="recording"></a>Запись

Общая спецификация MCI поддерживает запись с помощью цифрового видео, секвенсора MIDI, устройства записи видео-кассет (ВИДЕОМАГНИТОФОН) и устройств аудио-воспроизведения. Однако в настоящее время возможности записи реализуются только в устройствах аудио и ВИДЕОМАГНИТОФОНА. Можно вставить или перезаписать записанные данные в существующий файл или запись в новый файл. Чтобы записать существующий файл, откройте устройство аудио аудио и файл, как обычно. Для записи в новый файл при открытии устройства укажите в качестве имени устройства "New", если используется интерфейс командной строки. Если используется интерфейс командной строки, укажите имя файла нулевой длины.

Когда MCI создает новый файл для записи, формат данных устанавливается в формат по умолчанию, заданный драйвером устройства. Чтобы использовать формат, отличный от формата по умолчанию, можно использовать команду [**Set**](set.md) ([**MCI \_ Set**](mci-set.md)).

Чтобы начать запись, используйте команду [**Record**](record.md) (или [**\_ запись MCI**](mci-record.md) , а также [**структуру \_ \_ пармс записи MCI**](mci-record-parms.md) ).

При записи в режиме вставки в существующий файл можно использовать флаги "от" (MCI \_ из) и "to" (MCI \_ to) для команды **записи** , чтобы указать начальную и конечную позиции для записи. Например, если вы записываете файл в течение 20 секунд и начнете запись в течение 5 секунд и заканчивается запись в течение 10 секунд, полученный файл будет иметь длину 25 секунд. В этом файле будет записан 5-секундный сегмент, в который в первоначальную запись вставлено 5 минут.

При записи в существующий файл с помощью режима перезаписи можно использовать флаги "от" и "до" для указания начального и конечного расположения раздела, который перезаписывается. Например, если Вы записываетесь в файл длиной 20 секунд и начнете запись в течение 5 секунд и прекратите запись в течение 10 секунд, у вас по-прежнему будет записано 20 секунд, но раздел, начинающийся с 5 секунд и заканчивающийся на 10 секунд, заменяется.

Если конечное расположение не указано, запись продолжится, пока не будет отправлена команда [**Остановка**](stop.md) ([**MCI \_ Остановка**](mci-stop.md)) или пока не освободится свободное место на диске. При записи в новый файл можно опустить флаг "от" или установить его равным нулю, чтобы начать запись в начале нового файла. Можно указать конечное расположение для завершения записи при записи в новый файл.

Иногда команда [**записи**](record.md) имеет точную точность в пределах 1 секунды начального расположения, например устройств видеомагнитофона. Для более точной записи следует использовать команду [**Cue**](cue.md) (элемент [**MCI \_ Cue**](mci-cue.md)). Эта команда распознается цифровыми видеороликами, видеомагнитофонами и аудио-устройствами. Дополнительные сведения о записи с помощью устройств ВИДЕОМАГНИТОФОНА см. в статье о [службах видеомагнитофона](vcr-services.md).

## <a name="saving-a-recorded-file"></a>Сохранение записанного файла

После завершения записи используйте команду [**сохранить**](save.md) (или структуру [**MCI \_**](mci-save.md) Save и [**\_ \_ пармс Save**](mci-save-parms.md) ), чтобы сохранить запись перед закрытием устройства.

> [!Note]  
> При закрытии устройства без сохранения записанные данные теряются.

 

## <a name="checking-input-levels-pcm-only"></a>Проверка уровней ввода (только PCM)

Чтобы получить уровень входного сигнала перед записью на устройство ввода звука (модуляция импульсного кода), используйте команду [**состояние**](status.md) ([**\_ состояние MCI**](mci-status.md)). Укажите флаг уровня (или \_ \_ флаг элемента состояния MCI и установите для элемента **двитем** в [**\_ \_ пармс**](mci-status-parms.md) структуры состояние MCI на \_ \_ уровень Status Wave \_ ). Возвращается средний уровень входного сигнала. Значение левого канала находится в слове с высоким порядком, а значение правого или моного — в слове нижнего порядка.

Входной уровень представлен как значение без знака. Для 8-разрядных выборок это значение находится в диапазоне от 0 до 127 (0x7F). Для 16-разрядных выборок он находится в диапазоне от 0 до 32 767 (0x7FFF).

 

 




