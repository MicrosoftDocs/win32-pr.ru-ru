---
title: Запись
description: Запись
ms.assetid: 0026eb1d-5be1-4090-801b-f1c65c179f42
keywords:
- Команда MCI_RECORD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4248b2d4bbdd984ad23a772f0adca04581afca1d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "105661495"
---
# <a name="recording"></a><span data-ttu-id="e8acc-104">Запись</span><span class="sxs-lookup"><span data-stu-id="e8acc-104">Recording</span></span>

<span data-ttu-id="e8acc-105">Общая спецификация MCI поддерживает запись с помощью цифрового видео, секвенсора MIDI, устройства записи видео-кассет (ВИДЕОМАГНИТОФОН) и устройств аудио-воспроизведения. Однако в настоящее время возможности записи реализуются только в устройствах аудио и ВИДЕОМАГНИТОФОНА.</span><span class="sxs-lookup"><span data-stu-id="e8acc-105">The general MCI specification supports recording with digital-video, MIDI sequencer, video-cassette recorder (VCR), and waveform-audio devices; however, only waveform-audio and VCR devices currently implement recording capabilities.</span></span> <span data-ttu-id="e8acc-106">Можно вставить или перезаписать записанные данные в существующий файл или запись в новый файл.</span><span class="sxs-lookup"><span data-stu-id="e8acc-106">You can insert or overwrite recorded information into an existing file or record into a new file.</span></span> <span data-ttu-id="e8acc-107">Чтобы записать существующий файл, откройте устройство аудио аудио и файл, как обычно.</span><span class="sxs-lookup"><span data-stu-id="e8acc-107">To record to an existing file, open a waveform-audio device and file as you would normally.</span></span> <span data-ttu-id="e8acc-108">Для записи в новый файл при открытии устройства укажите в качестве имени устройства "New", если используется интерфейс командной строки.</span><span class="sxs-lookup"><span data-stu-id="e8acc-108">To record into a new file, when you open the device specify "new" as the device name if you are using the command-string interface.</span></span> <span data-ttu-id="e8acc-109">Если используется интерфейс командной строки, укажите имя файла нулевой длины.</span><span class="sxs-lookup"><span data-stu-id="e8acc-109">If you are using the command-message interface, specify a zero-length filename.</span></span>

<span data-ttu-id="e8acc-110">Когда MCI создает новый файл для записи, формат данных устанавливается в формат по умолчанию, заданный драйвером устройства.</span><span class="sxs-lookup"><span data-stu-id="e8acc-110">When MCI creates a new file for recording, the data format is set to a default format specified by the device driver.</span></span> <span data-ttu-id="e8acc-111">Чтобы использовать формат, отличный от формата по умолчанию, можно использовать команду [**Set**](set.md) ([**MCI \_ Set**](mci-set.md)).</span><span class="sxs-lookup"><span data-stu-id="e8acc-111">To use a format other than the default format, you can use the [**set**](set.md) ([**MCI\_SET**](mci-set.md)) command.</span></span>

<span data-ttu-id="e8acc-112">Чтобы начать запись, используйте команду [**Record**](record.md) (или [**\_ запись MCI**](mci-record.md) , а также [**структуру \_ \_ пармс записи MCI**](mci-record-parms.md) ).</span><span class="sxs-lookup"><span data-stu-id="e8acc-112">To begin recording, use the [**record**](record.md) command (or [**MCI\_RECORD**](mci-record.md) and the [**MCI\_RECORD\_PARMS**](mci-record-parms.md) structure).</span></span>

<span data-ttu-id="e8acc-113">При записи в режиме вставки в существующий файл можно использовать флаги "от" (MCI \_ из) и "to" (MCI \_ to) для команды **записи** , чтобы указать начальную и конечную позиции для записи.</span><span class="sxs-lookup"><span data-stu-id="e8acc-113">If you record in insert mode to an existing file, you can use the "from" (MCI\_FROM) and "to" (MCI\_TO) flags of the **record** command to specify starting and ending positions for recording.</span></span> <span data-ttu-id="e8acc-114">Например, если вы записываете файл в течение 20 секунд и начнете запись в течение 5 секунд и заканчивается запись в течение 10 секунд, полученный файл будет иметь длину 25 секунд.</span><span class="sxs-lookup"><span data-stu-id="e8acc-114">For example, if you record to a file that is 20 seconds long, and you begin recording at 5 seconds and end recording at 10 seconds, the resulting file will be 25 seconds long.</span></span> <span data-ttu-id="e8acc-115">В этом файле будет записан 5-секундный сегмент, в который в первоначальную запись вставлено 5 минут.</span><span class="sxs-lookup"><span data-stu-id="e8acc-115">The file will have a 5-second segment inserted 5 seconds into the original recording.</span></span>

<span data-ttu-id="e8acc-116">При записи в существующий файл с помощью режима перезаписи можно использовать флаги "от" и "до" для указания начального и конечного расположения раздела, который перезаписывается.</span><span class="sxs-lookup"><span data-stu-id="e8acc-116">If you record with overwrite mode to an existing file, you can use the "from" and "to" flags to specify starting and ending locations of the section that is overwritten.</span></span> <span data-ttu-id="e8acc-117">Например, если Вы записываетесь в файл длиной 20 секунд и начнете запись в течение 5 секунд и прекратите запись в течение 10 секунд, у вас по-прежнему будет записано 20 секунд, но раздел, начинающийся с 5 секунд и заканчивающийся на 10 секунд, заменяется.</span><span class="sxs-lookup"><span data-stu-id="e8acc-117">For example, if you record to a file that is 20 seconds long, and you begin recording at 5 seconds and end recording at 10 seconds, you still have a recording 20 seconds long, but the section beginning at 5 seconds and ending at 10 seconds will have been replaced.</span></span>

<span data-ttu-id="e8acc-118">Если конечное расположение не указано, запись продолжится, пока не будет отправлена команда [**Остановка**](stop.md) ([**MCI \_ Остановка**](mci-stop.md)) или пока не освободится свободное место на диске.</span><span class="sxs-lookup"><span data-stu-id="e8acc-118">If you do not specify an ending location, recording continues until you send a [**stop**](stop.md) ([**MCI\_STOP**](mci-stop.md)) command, or until the driver runs out of free disk space.</span></span> <span data-ttu-id="e8acc-119">При записи в новый файл можно опустить флаг "от" или установить его равным нулю, чтобы начать запись в начале нового файла.</span><span class="sxs-lookup"><span data-stu-id="e8acc-119">If you record to a new file, you can omit the "from" flag or set it to zero to start recording at the beginning of a new file.</span></span> <span data-ttu-id="e8acc-120">Можно указать конечное расположение для завершения записи при записи в новый файл.</span><span class="sxs-lookup"><span data-stu-id="e8acc-120">You can specify an ending location to terminate recording when recording to a new file.</span></span>

<span data-ttu-id="e8acc-121">Иногда команда [**записи**](record.md) имеет точную точность в пределах 1 секунды начального расположения, например устройств видеомагнитофона.</span><span class="sxs-lookup"><span data-stu-id="e8acc-121">The [**record**](record.md) command is sometimes accurate to within only 1 second of the starting location, such as with VCR devices.</span></span> <span data-ttu-id="e8acc-122">Для более точной записи следует использовать команду [**Cue**](cue.md) (элемент [**MCI \_ Cue**](mci-cue.md)).</span><span class="sxs-lookup"><span data-stu-id="e8acc-122">To record more accurately, you should use the [**cue**](cue.md) ([**MCI\_CUE**](mci-cue.md)) command.</span></span> <span data-ttu-id="e8acc-123">Эта команда распознается цифровыми видеороликами, видеомагнитофонами и аудио-устройствами.</span><span class="sxs-lookup"><span data-stu-id="e8acc-123">This command is recognized by digital-video, VCR, and waveform-audio devices.</span></span> <span data-ttu-id="e8acc-124">Дополнительные сведения о записи с помощью устройств ВИДЕОМАГНИТОФОНА см. в статье о [службах видеомагнитофона](vcr-services.md).</span><span class="sxs-lookup"><span data-stu-id="e8acc-124">For more information about recording with VCR devices, see [VCR Services](vcr-services.md).</span></span>

## <a name="saving-a-recorded-file"></a><span data-ttu-id="e8acc-125">Сохранение записанного файла</span><span class="sxs-lookup"><span data-stu-id="e8acc-125">Saving a Recorded File</span></span>

<span data-ttu-id="e8acc-126">После завершения записи используйте команду [**сохранить**](save.md) (или структуру [**MCI \_**](mci-save.md) Save и [**\_ \_ пармс Save**](mci-save-parms.md) ), чтобы сохранить запись перед закрытием устройства.</span><span class="sxs-lookup"><span data-stu-id="e8acc-126">When recording is complete, use the [**save**](save.md) command (or [**MCI\_SAVE**](mci-save.md) and the [**MCI\_SAVE\_PARMS**](mci-save-parms.md) structure) to save the recording before closing the device.</span></span>

> [!Note]  
> <span data-ttu-id="e8acc-127">При закрытии устройства без сохранения записанные данные теряются.</span><span class="sxs-lookup"><span data-stu-id="e8acc-127">If you close the device without saving, the recorded data is lost.</span></span>

 

## <a name="checking-input-levels-pcm-only"></a><span data-ttu-id="e8acc-128">Проверка уровней ввода (только PCM)</span><span class="sxs-lookup"><span data-stu-id="e8acc-128">Checking Input Levels (PCM Only)</span></span>

<span data-ttu-id="e8acc-129">Чтобы получить уровень входного сигнала перед записью на устройство ввода звука (модуляция импульсного кода), используйте команду [**состояние**](status.md) ([**\_ состояние MCI**](mci-status.md)).</span><span class="sxs-lookup"><span data-stu-id="e8acc-129">To get the level of the input signal before recording on a PCM (Pulse Code Modulation) waveform-audio input device, use the [**status**](status.md) ([**MCI\_STATUS**](mci-status.md)) command.</span></span> <span data-ttu-id="e8acc-130">Укажите флаг уровня (или \_ \_ флаг элемента состояния MCI и установите для элемента **двитем** в [**\_ \_ пармс**](mci-status-parms.md) структуры состояние MCI на \_ \_ уровень Status Wave \_ ).</span><span class="sxs-lookup"><span data-stu-id="e8acc-130">Specify the "level" flag (or the MCI\_STATUS\_ITEM flag and set the **dwItem** member of the [**MCI\_STATUS\_PARMS**](mci-status-parms.md) structure to MCI\_WAVE\_STATUS\_LEVEL).</span></span> <span data-ttu-id="e8acc-131">Возвращается средний уровень входного сигнала.</span><span class="sxs-lookup"><span data-stu-id="e8acc-131">The average input signal level is returned.</span></span> <span data-ttu-id="e8acc-132">Значение левого канала находится в слове с высоким порядком, а значение правого или моного — в слове нижнего порядка.</span><span class="sxs-lookup"><span data-stu-id="e8acc-132">The left-channel value is in the high-order word and the right- or mono-channel value is in the low-order word.</span></span>

<span data-ttu-id="e8acc-133">Входной уровень представлен как значение без знака.</span><span class="sxs-lookup"><span data-stu-id="e8acc-133">The input level is represented as an unsigned value.</span></span> <span data-ttu-id="e8acc-134">Для 8-разрядных выборок это значение находится в диапазоне от 0 до 127 (0x7F).</span><span class="sxs-lookup"><span data-stu-id="e8acc-134">For 8-bit samples, this value is in the range 0 through 127 (0x7F).</span></span> <span data-ttu-id="e8acc-135">Для 16-разрядных выборок он находится в диапазоне от 0 до 32 767 (0x7FFF).</span><span class="sxs-lookup"><span data-stu-id="e8acc-135">For 16-bit samples, it is in the range 0 through 32,767 (0x7FFF).</span></span>

 

 




