---
title: Создание файла из существующих потоков
description: Создание файла из существующих потоков
ms.assetid: 5149a766-7809-42b7-8e5c-b67b847b9218
keywords:
- Функция Ависаве
- Функция Ависавев
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2bc422d2170ccd49b8a9746666db7ebbcd7dff14
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103986397"
---
# <a name="creating-a-file-from-existing-streams"></a>Создание файла из существующих потоков

Один из способов создания файла, содержащего потоки данных, заключается в объединении существующих потоков в новый файл. Потоки, предоставляющие данные для нового файла, могут находиться в памяти или в одном или нескольких файлах.

Вы можете создать файл из нескольких потоков с помощью функции [**ависаве**](/windows/desktop/api/Vfw/nf-vfw-avisavea) . Эта функция создает файл и записывает потоки данных, указанные в его вызывающей последовательности, в файл. Вызывающая последовательность для **ависаве** использует переменное число аргументов, которые включают в себя интерфейсы для потоков, Объединенных в новый файл.

Кроме того, потоки данных можно объединять в новый файл с помощью функции [**ависавев**](/windows/desktop/api/Vfw/nf-vfw-avisaveva) . Эта функция предоставляет те же функциональные возможности, что и **ависаве**, но при использовании **ависавев** приложение указывает потоки данных в виде массива, а не переменное число аргументов.

Можно создать диалоговое окно, в котором пользователь может выбрать параметры сжатия для нового файла с помощью функции [**ависавеоптионс**](/windows/desktop/api/Vfw/nf-vfw-avisaveoptions) . Диалоговое окно отображает текущие параметры сжатия и позволяет пользователю изменять их. Изменения параметров сжатия хранятся в структуре [**авикомпрессоптионс**](/windows/desktop/api/Vfw/ns-vfw-avicompressoptions) .

Можно также включить функцию обратного вызова с [**ависаве**](/windows/desktop/api/Vfw/nf-vfw-avisavea) и [**ависавев**](/windows/desktop/api/Vfw/nf-vfw-avisaveva) , которую приложение может использовать для просмотра хода выполнения записи файла и при необходимости позволить пользователю отменить операцию сохранения. Можно включить адрес функции обратного вызова в вызывающей последовательности **ависаве** или **ависавев**.

Можно позволить пользователю выбрать имя файла для нового файла с помощью функции [**жетсавефиленамепревиев**](/windows/desktop/api/Vfw/nf-vfw-getsavefilenamepreviewa) . Эта функция отображает диалоговое окно Сохранить как, в котором пользователь может просматривать первый поток (обычно это видеопоток) AVI-файла.

Можно создать указатель на файловый интерфейс (и виртуальный файл) для группы потоков с помощью функции [**авимакефилефромстреамс**](/windows/desktop/api/Vfw/nf-vfw-avimakefilefromstreams) . Другие функции Авифиле могут использовать указатель на файловый интерфейс, возвращаемый этой функцией, для доступа к потокам в виртуальном файле. После завершения использования виртуального файла удалите указатель на файловый интерфейс с помощью функции [**авифилерелеасе**](/windows/desktop/api/Vfw/nf-vfw-avifilerelease) .

> [!Note]  
> Чтобы уменьшить качество изображения и звука, старайтесь не сжимать файл AVI более одного раза. Объедините несжатые фрагменты видео в систему редактирования, а затем выполните сжатие окончательного продукта. Дополнительные сведения о параметрах сжатия см. в разделе [Диспетчер сжатия видео](video-compression-manager.md).

 

 

 




