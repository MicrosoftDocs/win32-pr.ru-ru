---
title: Преобразование данных из одного формата в другой
description: Преобразование данных из одного формата в другой
ms.assetid: df995b7d-ac45-4964-a1b0-efd079c0c010
keywords:
- Диспетчер аудиосжатия (ACM), преобразование данных
- ACM (диспетчер аудиосжатия), преобразование данных
- Примеры ACM, преобразование данных
- преобразование данных
- Функция Акмстреамопен
- Функция Акмстреамсизе
- Функция Акмстреампрепарехеадер
- Функция Акмстреамконверт
- Функция Акмстреамунпрепарехеадер
- Функция Акмстреамклосе
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9645342aa9f19b2c31de77dc9d1031122ed0b2ac
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104329755"
---
# <a name="converting-data-from-one-format-to-another"></a>Преобразование данных из одного формата в другой

ACM использует функции потока для поддержки преобразования формата данных. Преобразователи в ACM изменяют формат, но не тип данных. Например, модуль преобразователя может заменить 16-битные данные 44 кГц на 44-кГц, 8-разрядные данные.

Следующие функции ACM поддерживают преобразование формата данных. Они перечислены в том порядке, в котором они обычно используются.

-   Функция [**акмстреамопен**](/windows/desktop/api/Msacm/nf-msacm-acmstreamopen) открывает поток преобразования.
-   Функция [**акмстреамсизе**](/windows/desktop/api/Msacm/nf-msacm-acmstreamsize) вычисляет соответствующий размер исходного или целевого буфера.
-   Функция [**акмстреампрепарехеадер**](/windows/desktop/api/Msacm/nf-msacm-acmstreamprepareheader) готовит буферы источника и назначения для использования при преобразовании.
-   Функция [**акмстреамконверт**](/windows/desktop/api/Msacm/nf-msacm-acmstreamconvert) преобразует данные из исходного буфера в формат назначения, записывая преобразованные данные в целевой буфер.
-   Функция [**акмстреамунпрепарехеадер**](/windows/desktop/api/Msacm/nf-msacm-acmstreamunprepareheader) очищает исходный и целевой буферы, подготовленные **акмстреампрепарехеадер**. Необходимо вызвать эту функцию перед освобождением исходного и целевого буферов.
-   Функция [**акмстреамклосе**](/windows/desktop/api/Msacm/nf-msacm-acmstreamclose) закрывает поток преобразования.

При преобразовании данных сначала укажите формат источника, а затем выберите формат назначения. Проще всего это сделать с помощью функции [**акмформатчусе**](/windows/desktop/api/Msacm/nf-msacm-acmformatchoose) , которая отображает диалоговое окно выбора формата и возвращает выбор формата пользователя.

Если вы узнаете форматы источника и назначения, можно использовать [**акмстреамопен**](/windows/desktop/api/Msacm/nf-msacm-acmstreamopen) для открытия потока преобразования. Затем можно использовать функцию [**акмстреамсизе**](/windows/desktop/api/Msacm/nf-msacm-acmstreamsize) , чтобы определить соответствующие размеры буфера.

Следующим шагом является подготовка буферов для использования в преобразовании с помощью [**акмстреампрепарехеадер**](/windows/desktop/api/Msacm/nf-msacm-acmstreamprepareheader).

Чтобы выполнить преобразование, используйте [**акмстреамконверт**](/windows/desktop/api/Msacm/nf-msacm-acmstreamconvert) , пока не будут обработаны все буферы. По завершении преобразования используйте [**акмстреамунпрепарехеадер**](/windows/desktop/api/Msacm/nf-msacm-acmstreamunprepareheader) для очистки буферов, а затем используйте [**акмстреамклосе**](/windows/desktop/api/Msacm/nf-msacm-acmstreamclose) для закрытия потока преобразования.

 

 




