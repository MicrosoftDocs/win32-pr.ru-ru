---
title: События Windows
description: События обычно используются для устранения неполадок по для приложений и драйверов. До Windows Vista для записи событий в журнал следует использовать трассировку событий Windows (ETW) или ведение журнала событий. В Windows Vista появилась новая модель событий, которая унифицирована для API трассировки событий Windows (ETW) и журнала событий Windows. В Windows 10 введены Трацелоггинг, которые основаны на трассировке событий Windows и предоставляют упрощенный способ инструментирования кода для разработчиков на машинном коде, .NET и WinRT.
ms.assetid: c10baa8d-50b9-4fda-89d0-d00b1d9f5404
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2c3d22580c38e45d06f5362e99626642eebdfe20
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "104069953"
---
# <a name="windows-events"></a><span data-ttu-id="3d6c5-103">События Windows</span><span class="sxs-lookup"><span data-stu-id="3d6c5-103">Windows Events</span></span>

<span data-ttu-id="3d6c5-104">События обычно используются для устранения неполадок по для приложений и драйверов.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-104">Events are typically used for troubleshooting application and driver software.</span></span>

-   <span data-ttu-id="3d6c5-105">До Windows Vista для записи событий в журнал следует использовать [трассировку событий Windows](/windows/desktop/ETW/event-tracing-portal) (ETW) или [ведение журнала событий](/windows/desktop/EventLog/event-logging) .</span><span class="sxs-lookup"><span data-stu-id="3d6c5-105">Prior to Windows Vista, you would use either [Event Tracing for Windows](/windows/desktop/ETW/event-tracing-portal) (ETW) or [Event Logging](/windows/desktop/EventLog/event-logging) to log events.</span></span>
-   <span data-ttu-id="3d6c5-106">В Windows Vista появилась новая модель событий, которая унифицирована [для API трассировки событий Windows](/windows/desktop/ETW/event-tracing-portal) (ETW) и [журнала событий Windows](/windows/desktop/WES/windows-event-log) .</span><span class="sxs-lookup"><span data-stu-id="3d6c5-106">Windows Vista introduced a new event model that unified both the [Event Tracing for Windows](/windows/desktop/ETW/event-tracing-portal) (ETW) and [Windows Event Log](/windows/desktop/WES/windows-event-log) API.</span></span>
-   <span data-ttu-id="3d6c5-107">В Windows 10 введены [трацелоггинг](/windows/desktop/tracelogging/trace-logging-portal) , которые основаны на ТРАССИРОВКЕ событий Windows и предоставляют упрощенный способ инструментирования кода для разработчиков на машинном коде, .NET и WinRT.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-107">Windows 10 introduces [TraceLogging](/windows/desktop/tracelogging/trace-logging-portal) which builds on ETW and provides a simplified way to instrument code for native, .NET and WinRT developers.</span></span>

<span data-ttu-id="3d6c5-108">Новая модель [трацелоггинг](/windows/desktop/tracelogging/trace-logging-portal) позволяет включать структурированные данные с событиями, сопоставлять события и не требует отдельного XML-файла манифеста инструментирования.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-108">The new [TraceLogging](/windows/desktop/tracelogging/trace-logging-portal) model allows you to include structured data with events, correlate events, and does not require a separate instrumentation manifest XML file.</span></span>

<span data-ttu-id="3d6c5-109">Модель Windows Vista использует XML-манифест для определения событий, которые необходимо опубликовать.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-109">The Windows Vista model uses an XML manifest to define the events that you want to publish.</span></span> <span data-ttu-id="3d6c5-110">События могут быть опубликованы в канале или сеансе ETW.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-110">Events can be published to a channel or an ETW session.</span></span> <span data-ttu-id="3d6c5-111">События можно опубликовать в следующих типах каналов: администратор, Рабочий, аналитический и отладочный.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-111">You can publish the events to the following types of channels: Admin, Operational, Analytic and Debug.</span></span> <span data-ttu-id="3d6c5-112">Если для включения издателя используются только ETW, в манифесте не нужно указывать каналы.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-112">If you use only ETW to enable the publisher, you do not need to specify channels in your manifest.</span></span> <span data-ttu-id="3d6c5-113">Подробные сведения о создании манифеста см. в статьях [Создание манифеста инструментирования](/windows/desktop/WES/writing-an-instrumentation-manifest), а сведения о каналах см. в разделе [Определение каналов](/windows/desktop/WES/defining-channels).</span><span class="sxs-lookup"><span data-stu-id="3d6c5-113">For complete details on writing a manifest, see [Writing an Instrumentation Manifest](/windows/desktop/WES/writing-an-instrumentation-manifest), and for information on channels, see [Defining Channels](/windows/desktop/WES/defining-channels).</span></span>

<span data-ttu-id="3d6c5-114">Чтобы зарегистрировать издатель событий и опубликовать события, используйте API ETW.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-114">To register your event publisher and to publish events, you use the ETW API.</span></span> <span data-ttu-id="3d6c5-115">Дополнительные сведения см. в разделе [предоставление событий](/windows/desktop/ETW/providing-events) и [Разработка поставщика](/windows/desktop/WES/developing-a-provider).</span><span class="sxs-lookup"><span data-stu-id="3d6c5-115">For details, see [Providing Events](/windows/desktop/ETW/providing-events) and [Developing a Provider](/windows/desktop/WES/developing-a-provider).</span></span> <span data-ttu-id="3d6c5-116">Издатель события будет автоматически записывать события в каналы, указанные в манифесте, если они включены.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-116">The event publisher will automatically write the events to the channels specified in the manifest if they are enabled.</span></span>

<span data-ttu-id="3d6c5-117">Если требуется управлять событиями, публикуемыми издателем событий на более тонком уровне гранулярности, используйте API ETW.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-117">If you want to control the events that an event publisher publishes at a finer level of granularity, use the ETW API.</span></span> <span data-ttu-id="3d6c5-118">Например, если манифест определяет события записи и чтения, можно включить только события записи.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-118">For example, if the manifest defines both write and read events, you can enable only the write events.</span></span> <span data-ttu-id="3d6c5-119">Событие может также задавать значение уровня, например "предупреждение" или "ошибка", чтобы можно было ограничить записываемые события теми, которые задают уровень ошибки.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-119">An event can also specify a level value such as warning or error, so you can limit the events that are written to those that specify the error level.</span></span> <span data-ttu-id="3d6c5-120">Дополнительные сведения см. в разделе [Управление сеансами трассировки событий](/windows/desktop/ETW/controlling-event-tracing-sessions).</span><span class="sxs-lookup"><span data-stu-id="3d6c5-120">For details, see [Controlling Event Tracing Sessions](/windows/desktop/ETW/controlling-event-tracing-sessions).</span></span> <span data-ttu-id="3d6c5-121">События записываются в файл журнала сеанса.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-121">The events are written to the session's log file.</span></span>

<span data-ttu-id="3d6c5-122">Использование событий включает извлечение событий из канала событий, файла журнала событий (. evtx или. evt-файлов), файла трассировки (ETL-файлов) или сеанса ETW в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-122">Consuming events involves retrieving the events from an event channel, an event log file (.evtx or .evt files), a trace file (.etl files), or a real-time ETW session.</span></span> <span data-ttu-id="3d6c5-123">Чтобы использовать события из файла трассировки событий Windows или сеанса ETW в режиме реального времени, используйте функции трассировки Data Helper (TDH) в ETW для использования событий.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-123">To consume events from an ETW trace file or a real-time ETW session, use the trace data helper (TDH) functions in ETW to consume the events.</span></span> <span data-ttu-id="3d6c5-124">Для чтения метаданных события также можно использовать TDH.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-124">You can also use TDH to read the event metadata.</span></span> <span data-ttu-id="3d6c5-125">Дополнительные сведения см. в разделе [Использование событий](/windows/desktop/ETW/consuming-events).</span><span class="sxs-lookup"><span data-stu-id="3d6c5-125">For details, see [Consuming Events](/windows/desktop/ETW/consuming-events).</span></span> <span data-ttu-id="3d6c5-126">Для использования событий из канала событий или файла журнала событий используйте функции журнала событий Windows для запроса событий или подписки на них.</span><span class="sxs-lookup"><span data-stu-id="3d6c5-126">To consume events from an event channel or an event log file, use the Windows Event Log functions to query or subscribe to events.</span></span> <span data-ttu-id="3d6c5-127">Дополнительные сведения см. в разделе [запросы событий](/windows/desktop/WES/querying-for-events) или [Подписка на события](/windows/desktop/WES/subscribing-to-events).</span><span class="sxs-lookup"><span data-stu-id="3d6c5-127">For more information, see [Querying for Events](/windows/desktop/WES/querying-for-events) or [Subscribing to Events](/windows/desktop/WES/subscribing-to-events).</span></span>

<span data-ttu-id="3d6c5-128">До Windows Vista для публикации и использования событий необходимо использовать [трассировку событий Windows](/windows/desktop/ETW/event-tracing-portal) или [ведения журнала событий](/windows/desktop/EventLog/event-logging) .</span><span class="sxs-lookup"><span data-stu-id="3d6c5-128">Prior to Windows Vista, you must use [Event Tracing for Windows](/windows/desktop/ETW/event-tracing-portal) or [Event Logging](/windows/desktop/EventLog/event-logging) to publish and consume events.</span></span>

 

 