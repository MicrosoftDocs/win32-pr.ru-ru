---
description: Сведения о настраиваемых пользователем ключевых словах в схеме печати для управления цветом, например Пажеколорманажемент и Пажеблаккженератионпроцессинг.
ms.assetid: 296255b8-fe5c-46dd-b717-487aaae0db80
title: Управление цветом и схема печати
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9258d9dcc59ab24f9cfca8e170bf3f3f62841b21
ms.sourcegitcommit: 5d4e99f4c8f42f5f543e52cb9beb9fb13ec56c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/19/2021
ms.locfileid: "112409677"
---
# <a name="color-management-and-the-print-schema"></a>Управление цветом и схема печати

Этот раздел не является актуальным. Самые актуальные сведения см. в [спецификации печати схемы](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip).

Настраиваемые пользователем ключевые слова элемента могут быть специальными или не зависящими от XPS. В случае, когда они не относятся к XPS, для устаревшей печати на основе GDI можно использовать ключевое слово. Если приложение принимает решение установить эти ключевые слова в PrintTicket, то для определения правильного действия и поведения, выполняемого на основе определений, представленных в схеме печати, требуется драйвер. Любое из этих ключевых слов можно использовать в контексте ICM. Дополнительные сведения см. в пакете SDK для Windows Vista.



| Заданное пользователем ключевое слово схемы печати       | Эквивалент DEVMODE     | Специфика XPS   |
|----------------------------------------------|------------------------|----------------|
| пажеколорманажемент<br/>               | дмикммесод<br/> | Нет<br/>  |
| пажеблаккженератионпроцессинг<br/>     | Нет<br/>        | Да<br/> |
| пажеблендколорспаце<br/>               | Нет<br/>        | Да<br/> |
| пажесаурцеколорпрофиле<br/>            | Нет<br/>        | Нет<br/>  |
| пажедестинатионколорпрофиле<br/>       | Нет<br/>        | Нет<br/>  |
| пажеикмрендерингинтент<br/>            | дмикминтент<br/> | Нет<br/>  |
| жобоптималдестинатионколорпрофиле<br/> | Нет<br/>        | Нет<br/>  |
| пажедевицеколорспацеусаже<br/>         | Нет<br/>        | Да<br/> |



 

## <a name="pagecolormanagement-system-handling"></a>Пажеколорманажемент обработка системы

Для Пажеколорманажемент система обеспечивает автоматическую обработку PrintTicket для DEVMODE или DEVMODE в отношении преобразования PrintTicket, если это необходимо. Это зависит от конкретного пути печати между приложением (Win32 или WPF) и драйвером (на основе GDI или XPSDrv). В случае печати из Windows Presentation Foundationного приложения в драйвер печати Microsoft XPSDrv не следует объявлять Пажеколорманажемент общедоступный вариант системы в документе PrintTicket или PrintCapabilities. в этом случае система не может автоматически обрабатывать управление цветом. Печать из приложения Win32 в драйвер печати Microsoft XPSDrv может привести к управлению цветом между приложением и GDI, однако после преобразования в формат XPS отсутствует автоматическая обработка системы управления цветом между документом XPS и драйвером и (или) устройством, так как в формате XPS каждый элемент содержит полные сведения о цвете, а также драйвер или устройство для обработки этой информации.



| Общедоступные варианты Пажеколорманажемент | Значение DEVMODE                  |
|------------------------------------|--------------------------------|
| Нет<br/>                    | ДМИКММЕСОД \_ None<br/>   |
| Устройство<br/>                  | \_устройство дмикммесод<br/> |
| Драйвер<br/>                  | \_драйвер дмикммесод<br/> |
| Система<br/>                  | ДМИКММЕСОД \_ система<br/> |



 

## <a name="pageicmrenderingintent-system-handling"></a>Пажеикмрендерингинтент обработка системы

Для Пажеикмрендерингинтент система обеспечивает автоматическую обработку PrintTicket для DEVMODE или DEVMODE в отношении преобразования PrintTicket, если это необходимо. Это зависит от конкретного пути печати между приложением (Win32 или Windows Presentation Foundation) и драйвером (на основе GDI или XPSDrv).



| Общедоступные варианты Пажеикмрендерингинтент | Значение DEVMODE                       |
|---------------------------------------|-------------------------------------|
| абсолутеколориметрик<br/>       | ДМИКМ \_ ABS \_<br/> |
| релативеколориметрик<br/>       | ДМИКМ \_<br/>      |
| Фотографий<br/>                | \_контрастность дмикм<br/>          |
| бусинессграфикс<br/>           | ДМИКМ \_ насыщенность<br/>          |



 

Все другие ключевые слова, связанные с управлением цветом (помимо Пажеколорманажемент или Пажеикмрендерингинтент), не имеют такой автоматической обработки.

## <a name="joboptimaldestinationcolorprofile-and-pagedestinationcolorprofile-usage"></a>Использование Жобоптималдестинатионколорпрофиле и Пажедестинатионколорпрофиле

Приложение может запросить документ PrintCapabilities для Жобоптималдестинатионколорпрофиле. Это может дать приложению оптимальный цветовой профиль, заданный в соответствии с текущими настройками устройства, как определено в документе PrintCapabilities. Если приложение решает, что драйверу требуется выполнять управление цветом для цветового профиля назначения, заданного параметром Жобоптималдестинатионколорпрофиле, то для Пажеколорманажемент и Пажедестинатионколорпрофиле будет установлено значение Driver и DriverConfiguration в PrintTicket соответственно. Если приложение не хочет использовать Жобоптионалдестинатионколорпрофиле и выбирает его самостоятельно, ему следует присвоить параметру Пажеколорманажемент значение None, а также задать для Пажедестинатионколорпрофиле значение Application в PrintTicket, чтобы передать, что приложение уже выполнило управление цветом для указанного целевого цветового профиля. Другой сценарий может возникнуть, когда приложение выбирает использование оптимального цветового профиля назначения, возвращенного драйверами PrintCapabilities, но решает, что Управление цветом осуществляется самостоятельно. В этом случае для Пажеколорманажемент будет установлено значение None, а для свойства Пажедестинатионколорпрофиле — значение Application.

## <a name="pagesourcecolorprofile-usage"></a>Использование Пажесаурцеколорпрофиле

Для Пажесаурцеколорпрофиле приложение может указать исходный цветовой профиль для каждой страницы PrintTicket, независимо от параметра, выбранного для Пажеколорманажемент. Независимо от того, присутствует она или нет, драйвер может решить поведение для каждого варианта на основе определений, представленных в схеме печати. Например, приложение может установить для Пажеколорманажемент значение None, а затем не задавать Пажесаурцеколорпрофиле в PrintTicket. Кроме того, приложение может установить для Пажеколорманажемент значение Driver, а затем задать Пажесаурцеколорпрофиле в PrintTicket. в этом случае драйвер отвечает за определение поведения в рамках правил Принтсчема.

## <a name="pagedevicecolorspaceusage"></a>пажедевицеколорспацеусаже

Пажедевицеколорспацеусаже — это определяемый пользователем настраиваемый элемент XPS, который задается приложением. Он предоставляет инструкции для устройства, устанавливая соответствующий параметр в PrintTicket для обработки профиля цветового пространства, связанного в документе XPS. Приложение и (или) существующий PrintTicket может указать это ключевое слово в PrintTicket, отправляемом на устройство. Независимо от того, присутствует она или нет, драйвер может решить поведение каждого случая на основе определений, представленных в схеме печати.

## <a name="print-schema-color-management-example-flow"></a>Пример потока для управления цветом схемы печати

На следующей схеме показан поток для наиболее вероятных сценариев использования управления цветом и схемы печати. Для простоты и удобочитаемости использовались только следующие пользовательские ключевые слова схемы печати для демонстрации их использования: Пажеколорманажемент, Жобоптималдестинаионколорпрофиле, Пажесаурцеколорпрофиле и Пажедестинатионколорпрофиле. Сплошная линия представляет собой действие, которое должно быть выполнено, а пунктирная линия представляет действие, которое может быть выполнено. Следующий сценарий не является гарантированным взаимодействием, которое будет выдаваться между приложением, драйвером и системой, однако оно представляет наиболее распространенный вариант использования.

![Диаграмма, показывающая, как обрабатываются параметры управления цветом](images/local-1992284846-colormanagementtest3.png)

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Печать спецификации схемы](https://download.microsoft.com/download/D/E/C/DECA6E6B-3E81-48E7-B7EF-6D92A547D03C/print-schema-spec-2-0.zip)
</dt> </dl>

 

 




