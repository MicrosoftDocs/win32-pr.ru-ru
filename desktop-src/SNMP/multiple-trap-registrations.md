---
title: Множественные регистрации ловушек
description: При регистрации WinSNMP сеанса для ловушек или уведомлений в приложении WinSNMP доступны несколько параметров.
ms.assetid: 76a4095f-ab5c-4f7a-9b60-a383a632fd65
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 81aebf94d60ca26f39bcd53b26cb1f794f43af0d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "104331355"
---
# <a name="multiple-trap-registrations"></a><span data-ttu-id="05006-103">Множественные регистрации ловушек</span><span class="sxs-lookup"><span data-stu-id="05006-103">Multiple Trap Registrations</span></span>

<span data-ttu-id="05006-104">При регистрации WinSNMP сеанса для ловушек или уведомлений в приложении WinSNMP доступны несколько параметров.</span><span class="sxs-lookup"><span data-stu-id="05006-104">Several options are available when a WinSNMP application registers a WinSNMP session for traps or notifications.</span></span> <span data-ttu-id="05006-105">Из-за этого приложение может вызывать функцию [**снмпрегистер**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpregister) несколько раз, в силу чего определяет настраиваемый фильтр для приема ловушек и уведомлений.</span><span class="sxs-lookup"><span data-stu-id="05006-105">Because of this, an application can call the [**SnmpRegister**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpregister) function multiple times, in effect defining a custom filter for the reception of traps and notifications.</span></span> <span data-ttu-id="05006-106">Например, можно зарегистрироваться для получения одного типа ловушек или уведомлений, а также для всех ловушек и уведомлений в зависимости от значения параметра *уведомления* .</span><span class="sxs-lookup"><span data-stu-id="05006-106">For example, you can register for one type of trap or notification, or for all traps and notifications, depending on the value of the *notification* parameter.</span></span> <span data-ttu-id="05006-107">Кроме того, приложение может указать значения в других параметрах функции **снмпрегистер** , чтобы дополнительно определить ловушки и уведомления, которые должны достигать приложения.</span><span class="sxs-lookup"><span data-stu-id="05006-107">Additionally, the application can specify values in other parameters to the **SnmpRegister** function to further define the traps and notifications that should reach an application.</span></span> <span data-ttu-id="05006-108">Дополнительные сведения см. в разделе [Управление ловушками и уведомлениями](managing-traps-and-notifications.md).</span><span class="sxs-lookup"><span data-stu-id="05006-108">For more information, see [Managing Traps and Notifications](managing-traps-and-notifications.md).</span></span>

<span data-ttu-id="05006-109">Ниже приведены экземпляры, в которых несколько вызовов **снмпрегистер** являются избыточными.</span><span class="sxs-lookup"><span data-stu-id="05006-109">Following are instances in which multiple calls to **SnmpRegister** are redundant.</span></span> <span data-ttu-id="05006-110">В этих экземплярах **снмпрегистер** возвращает снмпапи \_ Success, если функция успешно завершается, но избыточная регистрация неэффективна.</span><span class="sxs-lookup"><span data-stu-id="05006-110">In these instances **SnmpRegister** returns SNMPAPI\_SUCCESS if the function completes successfully, but the redundant registration is ineffective.</span></span>

1.  <span data-ttu-id="05006-111">Вызов функции [**снмпрегистер**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpregister) , запрашивающей фильтрованную доставку ловушек и уведомлений в сеанс, после предыдущего вызова **снмпрегистер** , запрашивающего доставку всех ловушек и уведомлений (нефильтрованная доставка).</span><span class="sxs-lookup"><span data-stu-id="05006-111">A call to the [**SnmpRegister**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpregister) function requesting filtered delivery of traps and notifications to the session, after a previous call to **SnmpRegister** requesting delivery of all traps and notifications (unfiltered delivery).</span></span> <span data-ttu-id="05006-112">Этот вызов является избыточным, так как сеанс уже получает все ловушки и уведомления, включая один тип, определенный фильтром.</span><span class="sxs-lookup"><span data-stu-id="05006-112">This call is redundant because the session is already receiving all traps and notifications, including the single type defined by the filter.</span></span>
2.  <span data-ttu-id="05006-113">Повторный вызов **снмпрегистер** или один, в котором список параметров идентичен списку параметров в предыдущем вызове **снмпрегистер** для сеанса.</span><span class="sxs-lookup"><span data-stu-id="05006-113">A duplicate call to **SnmpRegister**, or one in which the parameter list is identical to the parameter list in a previous call to **SnmpRegister** for the session.</span></span>
3.  <span data-ttu-id="05006-114">Вызов функции [**снмпрегистер**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpregister) , запрашивающей фильтрованную доставку ловушек и уведомлений на основе идентификатора объекта (OID), чей префикс является ИДЕНТИФИКАТОРом OID, указанным в предыдущем вызове метода **снмпрегистер**.</span><span class="sxs-lookup"><span data-stu-id="05006-114">A call to the [**SnmpRegister**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpregister) function requesting filtered delivery of traps and notifications based on an object identifier (OID) whose prefix is an OID specified in a previous call to **SnmpRegister**.</span></span> <span data-ttu-id="05006-115">Например, можно указать "1.3.6.1.4.1.311" в параметре *уведомления* для получения уведомлений, исходящих от любой сущности агента Microsoft SNMP.</span><span class="sxs-lookup"><span data-stu-id="05006-115">For example, you can specify "1.3.6.1.4.1.311" in the *notification* parameter to receive notifications originating from any Microsoft SNMP agent entity.</span></span> <span data-ttu-id="05006-116">Если вызвать **снмпрегистер** еще раз и указать "1.3.6.1.4.1.311.1", второй вызов будет избыточным, так как сеанс уже получает все ловушки и уведомления, содержащие префикс OID "1.3.6.1.4.1.311".</span><span class="sxs-lookup"><span data-stu-id="05006-116">If you call **SnmpRegister** again and specify "1.3.6.1.4.1.311.1", the second call is redundant because the session is already receiving all traps and notifications that contain the OID prefix "1.3.6.1.4.1.311".</span></span>

<span data-ttu-id="05006-117">Чтобы отменить регистрацию сеанса, необходимо сопоставить каждый уникальный вызов регистрации функции [**снмпрегистер**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpregister) .</span><span class="sxs-lookup"><span data-stu-id="05006-117">To unregister the session, you must match each unique registration call to the [**SnmpRegister**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpregister) function.</span></span> <span data-ttu-id="05006-118">Вызовите **снмпрегистер** , чтобы отменить регистрацию сеанса, и убедитесь, что первые пять параметров для **снмпрегистер** идентичны параметрам в первоначальном вызове регистрации.</span><span class="sxs-lookup"><span data-stu-id="05006-118">Call **SnmpRegister** to unregister the session, and ensure that the first five parameters to **SnmpRegister** are identical to those in the initial registration call.</span></span> <span data-ttu-id="05006-119">Единственное различие между начальным вызовом и отменой регистрации заключается в том, что при регистрации необходимо указать значение СНМПАПИ \_ On в параметре *Status* , а при вызове функции для отмены регистрации необходимо указать снмпапи \_ Off.</span><span class="sxs-lookup"><span data-stu-id="05006-119">The only difference between the initial call and the unregistering call is that when registering you must specify the value SNMPAPI\_ON in the *status* parameter, and when you call the function to unregister, you must specify SNMPAPI\_OFF.</span></span> <span data-ttu-id="05006-120">Не нужно сопоставлять избыточные вызовы регистрации функции **снмпрегистер** .</span><span class="sxs-lookup"><span data-stu-id="05006-120">You do not need to match redundant registration calls to the **SnmpRegister** function.</span></span> <span data-ttu-id="05006-121">Необходимо совпадение только с первым уникальным вызовом регистрации.</span><span class="sxs-lookup"><span data-stu-id="05006-121">You need only match the first unique registration call.</span></span>

<span data-ttu-id="05006-122">Для изменения условий фильтрации может потребоваться, чтобы приложение могло сначала отменить регистрацию и отключение доставки определенных ловушек или уведомлений.</span><span class="sxs-lookup"><span data-stu-id="05006-122">To change filtering criteria, it may be necessary for an application to first unregister and disable delivery of certain traps or notifications.</span></span> <span data-ttu-id="05006-123">Затем приложение может создать новый фильтр, вызвав [**снмпрегистер**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpregister), передав соответствующие значения.</span><span class="sxs-lookup"><span data-stu-id="05006-123">Then the application can create a new filter by calling [**SnmpRegister**](/windows/desktop/api/Winsnmp/nf-winsnmp-snmpregister), passing appropriate values.</span></span>

 

 




