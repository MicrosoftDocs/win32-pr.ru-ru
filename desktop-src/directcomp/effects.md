---
title: Эффекты (DirectComposition)
description: В этом разделе обсуждаются основы Microsoft DirectComposition Effects и описываются типы эффектов, поддерживаемых DirectComposition.
ms.assetid: 805B17D2-2F6B-4C25-8C6D-41FFA5DFC774
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4cfd1ca154dcbc7e55ca65cc34d04cfa7d73ccee
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "104413140"
---
# <a name="effects-directcomposition"></a><span data-ttu-id="a9ae8-103">Эффекты (DirectComposition)</span><span class="sxs-lookup"><span data-stu-id="a9ae8-103">Effects (DirectComposition)</span></span>

> [!NOTE]
> <span data-ttu-id="a9ae8-104">Для приложений в Windows 10 рекомендуется использовать интерфейсы API Windows. UI. компоновки вместо DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="a9ae8-105">Дополнительные сведения см. в разделе [модернизировать The классическое приложение с использованием визуального слоя](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="a9ae8-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="a9ae8-106">В этом разделе обсуждаются основы Microsoft DirectComposition Effects и описываются типы эффектов, поддерживаемых DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-106">This topic discusses the basics of Microsoft DirectComposition effects, and describes the types of effects that DirectComposition supports.</span></span>

<span data-ttu-id="a9ae8-107">В этом разделе содержатся следующие подразделы.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-107">This topic contains the following sections:</span></span>

-   [<span data-ttu-id="a9ae8-108">Что такое DirectCompositionный результат?</span><span class="sxs-lookup"><span data-stu-id="a9ae8-108">What is a DirectComposition effect?</span></span>](#what-is-a-directcomposition-effect)
-   [<span data-ttu-id="a9ae8-109">Непрозрачность</span><span class="sxs-lookup"><span data-stu-id="a9ae8-109">Opacity</span></span>](#opacity)
-   [<span data-ttu-id="a9ae8-110">эффекты преобразования трехмерной перспективы</span><span class="sxs-lookup"><span data-stu-id="a9ae8-110">3D perspective transform effects</span></span>](#3d-perspective-transform-effects)
    -   [<span data-ttu-id="a9ae8-111">Трехмерное пространство координат DirectComposition</span><span class="sxs-lookup"><span data-stu-id="a9ae8-111">The DirectComposition 3D coordinate space</span></span>](#the-directcomposition-3d-coordinate-space)
    -   [<span data-ttu-id="a9ae8-112">эффект преобразования трехмерного вращения</span><span class="sxs-lookup"><span data-stu-id="a9ae8-112">3D rotation transform effect</span></span>](#3d-rotation-transform-effect)
    -   [<span data-ttu-id="a9ae8-113">эффект преобразования трехмерного масштабирования</span><span class="sxs-lookup"><span data-stu-id="a9ae8-113">3D scaling transform effect</span></span>](#3d-scaling-transform-effect)
    -   [<span data-ttu-id="a9ae8-114">эффект преобразования 3D-преобразования</span><span class="sxs-lookup"><span data-stu-id="a9ae8-114">3D translation transform effect</span></span>](#3d-translation-transform-effect)
    -   [<span data-ttu-id="a9ae8-115">эффект трехмерного преобразования матрицы</span><span class="sxs-lookup"><span data-stu-id="a9ae8-115">3D matrix transform effect</span></span>](#3d-matrix-transform-effect)
    -   [<span data-ttu-id="a9ae8-116">Группа эффектов трехмерного преобразования</span><span class="sxs-lookup"><span data-stu-id="a9ae8-116">3D transform effect group</span></span>](#3d-transform-effect-group)
-   [<span data-ttu-id="a9ae8-117">Объекты эффектов</span><span class="sxs-lookup"><span data-stu-id="a9ae8-117">Effect objects</span></span>](#effect-objects)
-   [<span data-ttu-id="a9ae8-118">См. также</span><span class="sxs-lookup"><span data-stu-id="a9ae8-118">Related topics</span></span>](#related-topics)

## <a name="what-is-a-directcomposition-effect"></a><span data-ttu-id="a9ae8-119">Что такое DirectCompositionный результат?</span><span class="sxs-lookup"><span data-stu-id="a9ae8-119">What is a DirectComposition effect?</span></span>

<span data-ttu-id="a9ae8-120">DirectCompositionный *результат* — это операция точечного рисунка, которая применяется во время растрирования визуального элемента, чтобы изменить внешний вид визуального элемента каким-либо образом.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-120">A DirectComposition *effect* is a bitmap operation that is applied during the rasterization of a visual to change the appearance of the visual in some way.</span></span>

<span data-ttu-id="a9ae8-121">DirectComposition создает действие, создавая визуальное поддерево и выполнив его в одно растровое изображение перед применением этого действия.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-121">DirectComposition creates an effect by taking a visual subtree and rendering it into a single bitmap before applying the effect.</span></span> <span data-ttu-id="a9ae8-122">Например, чтобы создать эффект трехмерного преобразования перспективы, DirectComposition создает изображение визуального поддерева, а затем текстуры изображения на трехмерную плоскость, которая преобразуется в соответствии с результирующей матрицей трехмерного преобразования.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-122">For example, to create a 3D perspective transform effect, DirectComposition produces an image of a visual sub-tree and then textures the image onto a 3D plane that is transformed according to the 3D transform effect’s resulting matrix.</span></span>

<span data-ttu-id="a9ae8-123">DirectComposition поддерживает следующие типы эффектов.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-123">DirectComposition supports the following types of effects.</span></span>



| <span data-ttu-id="a9ae8-124">Тип результата</span><span class="sxs-lookup"><span data-stu-id="a9ae8-124">Effect type</span></span>                                                   | <span data-ttu-id="a9ae8-125">Описание</span><span class="sxs-lookup"><span data-stu-id="a9ae8-125">Description</span></span>                                                                |
|---------------------------------------------------------------|----------------------------------------------------------------------------|
| [<span data-ttu-id="a9ae8-126">Непрозрачность</span><span class="sxs-lookup"><span data-stu-id="a9ae8-126">Opacity</span></span>](#opacity)                                           | <span data-ttu-id="a9ae8-127">Задает прозрачность для всего визуального элемента.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-127">Sets the opacity of an entire visual.</span></span>                                      |
| [<span data-ttu-id="a9ae8-128">Трехмерное преобразование перспективы</span><span class="sxs-lookup"><span data-stu-id="a9ae8-128">3D perspective transform</span></span>](#3d-perspective-transform-effects) | <span data-ttu-id="a9ae8-129">Применяет трехмерный (трехмерный) эффект преобразования перспективы к визуальному элементу.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-129">Applies a three-dimensional (3D) perspective transform effect to a visual.</span></span> |



 

> [!Note]  
> <span data-ttu-id="a9ae8-130">DirectComposition не выполняет специальной обработки при применении эффектов к трехмерному стерео содержимому.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-130">DirectComposition does no special processing when applying effects to 3D stereo content.</span></span> <span data-ttu-id="a9ae8-131">Это означает, что при применении к нему эффектов трехмерное содержимое может искажаться.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-131">This means the 3D content might appear distorted when an effect is applied to it.</span></span>

 

## <a name="opacity"></a><span data-ttu-id="a9ae8-132">Непрозрачность</span><span class="sxs-lookup"><span data-stu-id="a9ae8-132">Opacity</span></span>

<span data-ttu-id="a9ae8-133">Эффекты непрозрачности позволяют задать коэффициент непрозрачности, применяемый ко всему визуальному элементу при визуализации визуального элемента.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-133">The opacity effect lets you set the opacity factor that is applied to an entire visual when the visual is rendered.</span></span> <span data-ttu-id="a9ae8-134">Он отличается от альфа-маски тем, что тот же коэффициент непрозрачности применяется ко всем пикселям в визуальном элементе.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-134">It differs from an alpha mask in that the same opacity factor is applied to all pixels in the visual.</span></span> <span data-ttu-id="a9ae8-135">Непрозрачность указывается как значение в диапазоне от 0 (полностью прозрачное) до 1 (полностью непрозрачный).</span><span class="sxs-lookup"><span data-stu-id="a9ae8-135">Opacity is specified as a value ranging from 0 (completely transparent) to 1 (completely opaque).</span></span>

<span data-ttu-id="a9ae8-136">Коэффициент непрозрачности применяется от родительского к дочерним визуальным элементам, но видимые эффекты вложенных параметров непрозрачности не указываются в значении свойства отдельных дочерних визуальных элементов.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-136">The opacity factor is applied from parent to child visuals, but the visible effects of the nested opacity settings are not indicated in the property value of individual child visuals.</span></span> <span data-ttu-id="a9ae8-137">Например, если у корневого визуального элемента есть непрозрачность 50% (0,5) и один из его дочерних элементов имеет уровень непрозрачности 20% (0,2), то непрозрачность для этого дочернего элемента отображается как 10% (0,1), но значение свойства Opacity дочернего элемента по-прежнему будет равно 0,2.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-137">For instance, if a root visual has a 50% (0.5) opacity and one of its children has a 20% (0.2) opacity, the net opacity for that child is rendered as 10% (0.1), but the value of the child’s Opacity property would still be 0.2.</span></span>

## <a name="3d-perspective-transform-effects"></a><span data-ttu-id="a9ae8-138">эффекты преобразования трехмерной перспективы</span><span class="sxs-lookup"><span data-stu-id="a9ae8-138">3D perspective transform effects</span></span>

<span data-ttu-id="a9ae8-139">В этом разделе описывается пространство координат, используемое DirectComposition для выполнения эффектов преобразования трехмерной перспективы.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-139">This section describes the coordinate space that DirectComposition uses for performing 3D perspective transform effects.</span></span> <span data-ttu-id="a9ae8-140">Здесь также описываются типы эффектов преобразования трехмерной перспективы, которые поддерживает DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-140">It also describes the types of 3D perspective transform effects that DirectComposition supports.</span></span>

-   [<span data-ttu-id="a9ae8-141">Трехмерное пространство координат DirectComposition</span><span class="sxs-lookup"><span data-stu-id="a9ae8-141">The DirectComposition 3D coordinate space</span></span>](#the-directcomposition-3d-coordinate-space)
-   [<span data-ttu-id="a9ae8-142">эффект преобразования трехмерного вращения</span><span class="sxs-lookup"><span data-stu-id="a9ae8-142">3D rotation transform effect</span></span>](#3d-rotation-transform-effect)
-   [<span data-ttu-id="a9ae8-143">эффект преобразования трехмерного масштабирования</span><span class="sxs-lookup"><span data-stu-id="a9ae8-143">3D scaling transform effect</span></span>](#3d-scaling-transform-effect)
-   [<span data-ttu-id="a9ae8-144">эффект преобразования 3D-преобразования</span><span class="sxs-lookup"><span data-stu-id="a9ae8-144">3D translation transform effect</span></span>](#3d-translation-transform-effect)
-   [<span data-ttu-id="a9ae8-145">эффект трехмерного преобразования матрицы</span><span class="sxs-lookup"><span data-stu-id="a9ae8-145">3D matrix transform effect</span></span>](#3d-matrix-transform-effect)
-   [<span data-ttu-id="a9ae8-146">Группа эффектов трехмерного преобразования</span><span class="sxs-lookup"><span data-stu-id="a9ae8-146">3D transform effect group</span></span>](#3d-transform-effect-group)

> [!Note]  
> <span data-ttu-id="a9ae8-147">В DirectComposition Применение объемных эффектов к нескольким уровням в визуальном дереве не работает так же, как и с полнофункциональным трехмерным механизмом, таким как Microsoft Direct3D.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-147">In DirectComposition, applying 3D effects to multiple levels in the visual tree does not work in the same way as it does with a full 3D engine such as Microsoft Direct3D.</span></span> <span data-ttu-id="a9ae8-148">Например, рассмотрим родительский визуальный элемент с одним дочерним визуальным элементом.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-148">For example, consider a parent visual that has a single child visual.</span></span> <span data-ttu-id="a9ae8-149">Если дочерний визуальный элемент поворачивается вперед в z-направлении (вокруг оси y) на 90 градусов, то граница дочернего визуального элемента получит средство просмотра, поэтому мы ожидаем, что визуальный элемент не будет виден (поскольку точечный рисунок не имеет реальной глубины).</span><span class="sxs-lookup"><span data-stu-id="a9ae8-149">If the child visual is rotated forward in the z direction (around the y-axis) by 90 degrees, the edge of the child visual edge would face the viewer, and so we’d expect the visual to not be visible (because a bitmap has no real depth).</span></span> <span data-ttu-id="a9ae8-150">Если родительский визуальный элемент затем поворачивается назад в отрицательном z-направлении (вокруг оси y) на 90 градусов, мы можем ожидать, что дочерний визуальный элемент станет полностью видимым (так как преобразования будут инвертировать друг друга).</span><span class="sxs-lookup"><span data-stu-id="a9ae8-150">If the parent visual is then rotated backward in the negative z direction (around the y-axis) by 90 degrees, we might expect the child visual to become fully visibly (since the transformations negate each other).</span></span> <span data-ttu-id="a9ae8-151">Однако в DirectComposition это не так.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-151">However, in DirectComposition this is not the case.</span></span> <span data-ttu-id="a9ae8-152">Дочерний визуальный элемент не будет виден, так как он был выровнен в родительском точечном рисунке.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-152">The child visual will not be visible because it was "flattened into" the parent bitmap.</span></span>

 

### <a name="the-directcomposition-3d-coordinate-space"></a><span data-ttu-id="a9ae8-153">Трехмерное пространство координат DirectComposition</span><span class="sxs-lookup"><span data-stu-id="a9ae8-153">The DirectComposition 3D coordinate space</span></span>

<span data-ttu-id="a9ae8-154">Пространство координат DirectComposition для эффектов трехмерного преобразования находит источник (0, 0, 0) в левом верхнем углу поверхности точечного рисунка, а положительные значения оси x — вправо, положительные значения оси y — сверху вниз, а положительные значения оси z — от источника к средству просмотра.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-154">The DirectComposition coordinate space for 3D transform effects locates the origin (0,0,0) at the upper-left corner of the bitmap surface, with positive x-axis values proceeding to the right, positive y-axis values proceeding downward, and positive z-axis values proceeding outward from the origin, toward the viewer.</span></span> <span data-ttu-id="a9ae8-155">На этом рисунке показано DirectComposition трехмерное пространство координат.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-155">This illustration shows the DirectComposition 3D coordinate space.</span></span>

![трехмерное пространство координат директкомпостион](images/3d-coordinate-space.png)

### <a name="3d-rotation-transform-effect"></a><span data-ttu-id="a9ae8-157">эффект преобразования трехмерного вращения</span><span class="sxs-lookup"><span data-stu-id="a9ae8-157">3D rotation transform effect</span></span>

<span data-ttu-id="a9ae8-158">Эффект преобразования 3D-вращения поворачивает визуальный элемент в трех измерениях на указанный угол вокруг вектора оси вращения \[ x, y, z, \] расположенного в указанной центральной точке (x, y, z).</span><span class="sxs-lookup"><span data-stu-id="a9ae8-158">A 3D rotation transform effect rotates a visual in three dimensions by the specified angle about a rotation axis vector \[x,y,z\] located at the specified center point (x,y,z).</span></span> <span data-ttu-id="a9ae8-159">Угол указывается в градусах.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-159">The angle is specified in degrees.</span></span> <span data-ttu-id="a9ae8-160">Вектором оси вращения по умолчанию является \[ 0, 0,-1 \] , а центральная точка по умолчанию — (0, 0, 0).</span><span class="sxs-lookup"><span data-stu-id="a9ae8-160">The default rotation axis vector is \[0,0,-1\], and the default center point is (0,0,0).</span></span>

<span data-ttu-id="a9ae8-161">Используйте метод [**идкомпоситиондевице:: CreateRotateTransform3D**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrotatetransform3d) для создания объекта преобразования 3D-вращения.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-161">Use the [**IDCompositionDevice::CreateRotateTransform3D**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrotatetransform3d) method to create a 3D rotation transform object.</span></span> <span data-ttu-id="a9ae8-162">Метод получает интерфейс [**IDCompositionRotateTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositionrotatetransform3d) , который можно использовать для задания свойств объекта.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-162">The method retrieves an [**IDCompositionRotateTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositionrotatetransform3d) interface that you can use to set the properties of the object.</span></span>

### <a name="3d-scaling-transform-effect"></a><span data-ttu-id="a9ae8-163">эффект преобразования трехмерного масштабирования</span><span class="sxs-lookup"><span data-stu-id="a9ae8-163">3D scaling transform effect</span></span>

<span data-ttu-id="a9ae8-164">Эффект трехмерного преобразования масштабирования делает визуальный элемент больше или меньше.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-164">A 3D scaling transform effect makes a visual larger or smaller.</span></span> <span data-ttu-id="a9ae8-165">Он масштабирует визуальный элемент в \[ направлении x, y, z \] относительно центральной точки (x, y, z).</span><span class="sxs-lookup"><span data-stu-id="a9ae8-165">It scales a visual in the \[x,y,z\] direction about the center point (x,y,z).</span></span> <span data-ttu-id="a9ae8-166">Центральная точка по умолчанию — (0, 0, 0).</span><span class="sxs-lookup"><span data-stu-id="a9ae8-166">The default center point is (0,0,0).</span></span>

<span data-ttu-id="a9ae8-167">Используйте метод [**идкомпоситиондевице:: CreateScaleTransform3D**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createscaletransform3d) для создания объекта преобразования трехмерного масштабирования.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-167">Use the [**IDCompositionDevice::CreateScaleTransform3D**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createscaletransform3d) method to create a 3D scaling transform object.</span></span> <span data-ttu-id="a9ae8-168">Метод получает интерфейс [**IDCompositionScaleTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositionscaletransform3d) , который можно использовать для задания свойств объекта.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-168">The method retrieves an [**IDCompositionScaleTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositionscaletransform3d) interface that you can use to set the properties of the object.</span></span>

### <a name="3d-translation-transform-effect"></a><span data-ttu-id="a9ae8-169">эффект преобразования 3D-преобразования</span><span class="sxs-lookup"><span data-stu-id="a9ae8-169">3D translation transform effect</span></span>

<span data-ttu-id="a9ae8-170">Эффект преобразования 3D-преобразования изменяет расположение визуального элемента в \[ направлении x, y, z \] .</span><span class="sxs-lookup"><span data-stu-id="a9ae8-170">A 3D translation transform effect changes the position of a visual in the \[x,y,z\] direction.</span></span>

<span data-ttu-id="a9ae8-171">Используйте метод [**идкомпоситиондевице:: CreateTranslateTransform3D**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtranslatetransform3d) для создания объекта преобразования 3D-преобразования.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-171">Use the [**IDCompositionDevice::CreateTranslateTransform3D**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtranslatetransform3d) method to create a 3D translation transform object.</span></span> <span data-ttu-id="a9ae8-172">Метод получает интерфейс [**IDCompositionTranslateTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositiontranslatetransform3d) , который можно использовать для задания свойств объекта.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-172">The method retrieves an [**IDCompositionTranslateTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositiontranslatetransform3d) interface that you can use to set the properties of the object.</span></span>

### <a name="3d-matrix-transform-effect"></a><span data-ttu-id="a9ae8-173">эффект трехмерного преобразования матрицы</span><span class="sxs-lookup"><span data-stu-id="a9ae8-173">3D matrix transform effect</span></span>

<span data-ttu-id="a9ae8-174">Интерфейс [**IDCompositionMatrixTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositionmatrixtransform) позволяет определить собственную матрицу преобразования 4 на 4 и применить ее к визуальному элементу.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-174">The [**IDCompositionMatrixTransform3D**](/windows/win32/api/dcomp/nn-dcomp-idcompositionmatrixtransform) interface enables you to define your own 4-by-4 transformation matrix and apply it to a visual.</span></span> <span data-ttu-id="a9ae8-175">Этот интерфейс полезен, если необходимо применить эффект преобразования трехмерной перспективы, который недоступен через другие интерфейсы эффектов трехмерного преобразования DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-175">This interface is useful if you need to apply a type of 3D perspective transform effect that is not available through the other DirectComposition 3D transform effect interfaces.</span></span> <span data-ttu-id="a9ae8-176">Вы определяете матрицу, заполняя структуру [**D3DMATRIX**](/windows/desktop/direct3d10/d3d10-d3dmatrix) и передавая ее в метод [**IDCompositionMatrixTransform3D:: сетматрикс**](/windows/win32/api/dcomp/nf-dcomp-idcompositionmatrixtransform-setmatrix) .</span><span class="sxs-lookup"><span data-stu-id="a9ae8-176">You define the matrix by filling a [**D3DMATRIX**](/windows/desktop/direct3d10/d3d10-d3dmatrix) structure and passing it to the [**IDCompositionMatrixTransform3D::SetMatrix**](/windows/win32/api/dcomp/nf-dcomp-idcompositionmatrixtransform-setmatrix) method.</span></span> <span data-ttu-id="a9ae8-177">Кроме того, каждый элемент матрицы можно задать с помощью метода [**IDCompositionMatrixTransform3D:: сетматрикселемент**](/previous-versions/windows/desktop/legacy/hh437429(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a9ae8-177">Alternatively, you can set each element of the matrix by using the [**IDCompositionMatrixTransform3D::SetMatrixElement**](/previous-versions/windows/desktop/legacy/hh437429(v=vs.85)) method.</span></span>

### <a name="3d-transform-effect-group"></a><span data-ttu-id="a9ae8-178">Группа эффектов трехмерного преобразования</span><span class="sxs-lookup"><span data-stu-id="a9ae8-178">3D transform effect group</span></span>

<span data-ttu-id="a9ae8-179">[**Идкомпоситиондевице:: CreateTransform3DGroup**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtransform3dgroup) создает коллекцию эффектов трехмерного преобразования, которые можно применить к визуальному элементу как к группе.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-179">The [**IDCompositionDevice::CreateTransform3DGroup**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtransform3dgroup) creates a collection of 3D transform effects that you can apply to a visual as a group.</span></span> <span data-ttu-id="a9ae8-180">Массив может включать любое количество объектов Transform и может включать преобразования матрицы, вращения, масштабирования и преобразования.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-180">The array can include any number of transform objects, and can include matrix, rotate, scale, and translate transforms.</span></span> <span data-ttu-id="a9ae8-181">Коллекция объектов трехмерного преобразования приводит к преобразованию, значение которого является умножением матрицы отдельных матриц преобразования в коллекции.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-181">The collection of 3D transform objects results in a transform whose value is the matrix multiplication of the individual transform matrices in the collection.</span></span>

<span data-ttu-id="a9ae8-182">Порядок отдельных преобразований в группе важен.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-182">The order of individual transforms in the group is important.</span></span> <span data-ttu-id="a9ae8-183">Например, если сначала повернуть, затем масштабировать, а затем преобразовать, вы получите другой результат, чем при первом переводе, при повороте, а затем при масштабировании.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-183">For example, if you first rotate, then scale, then translate, you get a different result than if you first translate, then rotate, then scale.</span></span> <span data-ttu-id="a9ae8-184">DirectComposition учитывает порядок, в котором вы указываете трехмерные преобразования в трехмерной группе преобразования так же, как и для двумерных преобразований.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-184">DirectComposition respects the order in which you specify 3D transforms within a transform 3D group the same way it does for 2D transforms.</span></span> <span data-ttu-id="a9ae8-185">Кроме того, преобразования «Трехмерная перспектива» приводят к преобразованию визуального дерева после применения всех трехмерных преобразований в текущем визуальном элементе.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-185">Additionally, 3D perspective transforms result in flattening of the visual tree after all 3D transforms in the current visual have been applied.</span></span> <span data-ttu-id="a9ae8-186">Это делается для того, чтобы сцена выглядела как можно более близкая к объемной.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-186">This is done to ensure that the scene looks as close to 3D as possible.</span></span>

## <a name="effect-objects"></a><span data-ttu-id="a9ae8-187">Объекты эффектов</span><span class="sxs-lookup"><span data-stu-id="a9ae8-187">Effect objects</span></span>

<span data-ttu-id="a9ae8-188">Чтобы применить эффекты к визуальному элементу, сначала необходимо создать и задать свойства объекта Effect, представляющего тип результата, который требуется создать на визуальном элементе.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-188">To apply an effect to a visual, you first need to create and set the properties of an effect object that represents the type of effect that you want to produce on the visual.</span></span> <span data-ttu-id="a9ae8-189">Затем необходимо применить объект Effect к свойству Effect визуального элемента.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-189">Then, you need to apply the effect object to the visual's Effect property.</span></span>

<span data-ttu-id="a9ae8-190">Чтобы создать объект Effect, используйте один из следующих методов интерфейса [**идкомпоситиондевице**](/windows/win32/api/dcomp/nn-dcomp-idcompositiondevice) , чтобы создать объект Effect для требуемого типа результата.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-190">To create an effect object, use one of the following [**IDCompositionDevice**](/windows/win32/api/dcomp/nn-dcomp-idcompositiondevice) interface methods to create an effect object for the type of effect that you want.</span></span> <span data-ttu-id="a9ae8-191">Следующие методы создают объекты эффектов:</span><span class="sxs-lookup"><span data-stu-id="a9ae8-191">The following methods create effect objects:</span></span>

-   [<span data-ttu-id="a9ae8-192">**CreateMatrixTransform3D**</span><span class="sxs-lookup"><span data-stu-id="a9ae8-192">**CreateMatrixTransform3D**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-creatematrixtransform3d)
-   [<span data-ttu-id="a9ae8-193">**CreateRotateTransform3D**</span><span class="sxs-lookup"><span data-stu-id="a9ae8-193">**CreateRotateTransform3D**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrotatetransform3d)
-   [<span data-ttu-id="a9ae8-194">**CreateScaleTransform3D**</span><span class="sxs-lookup"><span data-stu-id="a9ae8-194">**CreateScaleTransform3D**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createscaletransform3d)
-   [<span data-ttu-id="a9ae8-195">**CreateTranslateTransform3D**</span><span class="sxs-lookup"><span data-stu-id="a9ae8-195">**CreateTranslateTransform3D**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtranslatetransform3d)

<span data-ttu-id="a9ae8-196">Каждый из вышеперечисленных методов Извлекает интерфейс, который можно использовать для задания свойств созданного объекта Effect.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-196">Each of the preceding methods retrieves an interface that you can use to set the properties of the newly created effect object.</span></span> <span data-ttu-id="a9ae8-197">Используйте методы интерфейса, чтобы задать свойства нужным образом, чтобы получить нужный визуальный результат.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-197">Use the interface methods to set the properties as necessary to produce the visual effect that you want.</span></span>

<span data-ttu-id="a9ae8-198">Большинство свойств объекта Effect можно анимировать.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-198">Most properties of an effect object can be animated.</span></span> <span data-ttu-id="a9ae8-199">Чтобы анимировать определенное свойство, создайте объект анимации и примените его к свойству, которое необходимо анимировать. в противном случае задайте для свойства статическое значение, которое дает нужный результат.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-199">To animate a particular property, create an animation object and apply it to the property that you want to animate; otherwise, set the property to a static value that produces the effect that you want.</span></span> <span data-ttu-id="a9ae8-200">Дополнительные сведения о свойствах анимации см. в разделе [анимация](animation.md).</span><span class="sxs-lookup"><span data-stu-id="a9ae8-200">For more information about animating properties, see [Animation](animation.md).</span></span>

<span data-ttu-id="a9ae8-201">Чтобы применить объект Effect к визуальному элементу, вызовите метод [**идкомпоситионвисуал:: сетеффект**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-seteffect) .</span><span class="sxs-lookup"><span data-stu-id="a9ae8-201">To apply an effect object to visual, call the [**IDCompositionVisual::SetEffect**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-seteffect) method.</span></span> <span data-ttu-id="a9ae8-202">При применении к визуальному элементу результат применяется ко всему визуальному поддереву, корню которого является этот визуальный элемент.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-202">When you apply an effect to a visual, the effect is applied to the entire visual subtree rooted at that visual.</span></span> <span data-ttu-id="a9ae8-203">Например, если установить непрозрачность визуального элемента на 50 процентов, прозрачность всех дочерних визуальных элементов в визуальном поддереве будет уменьшена на 50 процентов.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-203">So, for example, if you set the opacity of a visual to 50 percent, the opacity of all child visuals in the visual subtree will be reduced by 50 percent.</span></span> <span data-ttu-id="a9ae8-204">Один и тот же объект Effect можно применить к одному или нескольким визуальным объектам.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-204">You can apply the same effect object to one or more visuals.</span></span> <span data-ttu-id="a9ae8-205">Если изменить свойства объекта Effect после применения его к визуальным объектам, все визуальные элементы будут внесены заново для отражения изменений.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-205">If you modify the properties of an effect object after applying it to visuals, all of the visuals are re-composed to reflect the change.</span></span>

<span data-ttu-id="a9ae8-206">С помощью объекта группы эффектов можно одновременно применить несколько эффектов к визуальному элементу.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-206">By using an effect group object, you can simultaneously apply multiple effects to a visual.</span></span> <span data-ttu-id="a9ae8-207">Сначала вызовите [**идкомпоситиондевице:: креатиффектграуп**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createeffectgroup) , чтобы создать объект группы эффектов, а затем добавьте эффекты в группу с помощью интерфейса [**идкомпоситионеффектграуп**](/windows/win32/api/dcomp/nn-dcomp-idcompositioneffectgroup) объекта.</span><span class="sxs-lookup"><span data-stu-id="a9ae8-207">First call [**IDCompositionDevice::CreateEffectGroup**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createeffectgroup) to create the effect group object, and then add effects to the group by using the object's [**IDCompositionEffectGroup**](/windows/win32/api/dcomp/nn-dcomp-idcompositioneffectgroup) interface.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a9ae8-208">См. также</span><span class="sxs-lookup"><span data-stu-id="a9ae8-208">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a9ae8-209">Основные понятия DirectComposition</span><span class="sxs-lookup"><span data-stu-id="a9ae8-209">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 