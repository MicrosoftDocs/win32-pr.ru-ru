---
title: Расширения устройств для создания отчетов о приобретенном содержимом
description: Расширения устройств для создания отчетов о приобретенном содержимом
ms.assetid: 597d872e-9105-4edb-afa3-9f4407de0f73
keywords:
- Проигрыватель Windows Media, расширения устройств
- Проигрыватель Windows Media, расширения
- Проигрыватель Windows Media, отчет о приобретенном содержимом
- расширения устройств, составление отчетов о приобретенном содержимом
- расширения, составление отчетов о приобретенном содержимом
- сообщение о приобретенном содержимом
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 831312457427cc9fe4ceed004772f3b174f77989
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "105691306"
---
# <a name="device-extensions-for-reporting-acquired-content"></a>Расширения устройств для создания отчетов о приобретенном содержимом

В проигрывателе Windows Media 11 появились новые функции, позволяющие портативным устройствам уведомлять проигрывателя о содержимом, добавленном на устройство с момента последней синхронизации. Проигрыватель Windows Media 11 может использовать эти сведения для копирования недавно полученного содержимого с устройства на компьютер пользователя. Производители устройств должны учитывать следующие требования для поддержки этой функции:

-   Эта функция поддерживается только для устройств с поддержкой MTP.
-   Эта функция работает только с устройствами, которые имеют связь с проигрывателем Windows Media.
-   Устройства должны передавать только содержимое, которое было создано или загружено устройством. Сюда входят фотографии, созданные устройством; голосовые записи, созданные устройством; записи голосовой почты; скачивается с карты памяти; и скачивается из Интернета. Не следует сообщать о содержимом, которое было сохранено на устройстве в результате синхронизации с другим устройством или другим партнерством.

Файл заголовка с именем вмпдевицес. h, который устанавливается как часть пакета SDK проигрывателя Windows Media, определяет структуры и константы, необходимые для поддержки расширений устройств проигрывателя Windows Media.

Чтобы устройство было распознано как поддерживающее отчеты о приобретенном содержимом с помощью набора расширений MTP устройства Windows Media Player, оно должно включать в набор данных DeviceInfo следующие сведения. (Дополнительные сведения об этом наборе данных см. в разделе 4.6.1 спецификации MTP.)



| Поле набора данных          | Порядок полей | Тип данных  | Значение                       |
|------------------------|-------------|------------|-----------------------------|
| вендорекстенсионид      | 2           | **UINT32** | 0x00000006                  |
| вендорекстенсионверсион | 3           | **UINT16** | 0x0064 (100)                |
| вендорекстенсиондеск    | 4           | **String** | "microsoft.com/WMPPD: 11,0" |



 

В следующей таблице приведены сведения об операции MTP для составления отчетов о приобретенном содержимом.



| Элемент                  | Описание                                                                                                                                                                                                                     |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Код операции        | 0x9202                                                                                                                                                                                                                          |
| Параметр операции 1 | Идентификатор транзакции, предоставленный устройством во время предыдущего сеанса. Для первого сеанса это значение равно нулю.                                                                                                                |
| Параметр операции 2 | Начальный индекс. Это значение всегда равно нулю при первом вызове сеанса. При последующих вызовах в рамках одного сеанса синхронизации это значение увеличивается по количеству элементов, возвращенных из предыдущих данных ответа. |
| Параметр операции 3 | 0x10000. Эта константа, определенная в вмпдевицес. h, является максимальным числом Пуоидс, которое может быть возвращено в ответе. Обратите внимание, что значение этой константы может быть пересмотрено в будущих выпусках этого файла заголовка.              |
| Параметр операции 4 | 0                                                                                                                                                                                                                               |
| Параметр операции 5 | 0                                                                                                                                                                                                                               |
| Данные                  | Устройство возвращает массив MTP, содержащий Пуоидс, которые были получены. Массив начинается с значения **DWORD** , показывающего количество элементов в массиве, за которым следует массив элементов.                               |
| Направление данных        | R->I                                                                                                                                                                                                                         |
| Параметры кода ответа | **MTP \_ ОТВЕТ \_ OK** (0x2001) или допустимый код ответа ошибки.                                                                                                                                                                    |
| Параметр ответа 1  | ИДЕНТИФИКАТОР текущей транзакции.                                                                                                                                                                                                     |
| Параметр ответа 2  | Число Пуоидс, которые остаются для получения в будущих запросах.                                                                                                                                                            |
| Параметр ответа 3  | **DWORD** , содержащий сведения о состоянии. Состояние указывается в побитовой последовательности. Дополнительные сведения об используемых флагах см. в разделе Примечания.                                                                                              |
| Параметр ответа 4  | 0                                                                                                                                                                                                                               |
| Параметр ответа 5  | 0                                                                                                                                                                                                                               |



 

## <a name="remarks"></a>Комментарии

Состояние указывается в ответном параметре 3 в побитовом режиме с помощью следующего флага.



| Флаг                                              | Значение | Описание                                                                                                                                                                                                                             |
|---------------------------------------------------|-------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **WMP \_ мдрт \_ Флаги \_ \_ \_ неотправленных приобретенных элементов** | 0x1   | Устройство содержит некоторые приобретенные элементы, которые невозможно вернуть в списке ПУОИДС. Обратите внимание, что этот флаг не является избыточным для параметра ответа 2. Установите этот флаг только в том случае, если запрошенные элементы не могут быть возвращены устройством. |



 

Биты с 1 по 31 зарезервированы для будущего использования. Эти биты должны иметь значение 0.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Проигрыватель Windows Media**](windows-media-player.md)
</dt> </dl>

 

 




