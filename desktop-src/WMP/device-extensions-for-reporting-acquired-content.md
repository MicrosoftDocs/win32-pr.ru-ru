---
title: Расширения устройств для создания отчетов о приобретенном содержимом
description: Расширения устройств для создания отчетов о приобретенном содержимом
ms.assetid: 597d872e-9105-4edb-afa3-9f4407de0f73
keywords:
- Проигрыватель Windows Media, расширения устройств
- Проигрыватель Windows Media, расширения
- Проигрыватель Windows Media, отчет о приобретенном содержимом
- расширения устройств, составление отчетов о приобретенном содержимом
- расширения, составление отчетов о приобретенном содержимом
- сообщение о приобретенном содержимом
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 831312457427cc9fe4ceed004772f3b174f77989
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "105691306"
---
# <a name="device-extensions-for-reporting-acquired-content"></a><span data-ttu-id="35735-109">Расширения устройств для создания отчетов о приобретенном содержимом</span><span class="sxs-lookup"><span data-stu-id="35735-109">Device Extensions for Reporting Acquired Content</span></span>

<span data-ttu-id="35735-110">В проигрывателе Windows Media 11 появились новые функции, позволяющие портативным устройствам уведомлять проигрывателя о содержимом, добавленном на устройство с момента последней синхронизации.</span><span class="sxs-lookup"><span data-stu-id="35735-110">Windows Media Player 11 introduces new functionality that enables portable devices to notify the Player about content added to the device since the last synchronization.</span></span> <span data-ttu-id="35735-111">Проигрыватель Windows Media 11 может использовать эти сведения для копирования недавно полученного содержимого с устройства на компьютер пользователя.</span><span class="sxs-lookup"><span data-stu-id="35735-111">Windows Media Player 11 can use this information to copy newly acquired content from the device to the user's computer.</span></span> <span data-ttu-id="35735-112">Производители устройств должны учитывать следующие требования для поддержки этой функции:</span><span class="sxs-lookup"><span data-stu-id="35735-112">Device manufacturers should note the following requirements for supporting this functionality:</span></span>

-   <span data-ttu-id="35735-113">Эта функция поддерживается только для устройств с поддержкой MTP.</span><span class="sxs-lookup"><span data-stu-id="35735-113">This feature is supported only for MTP-enabled devices.</span></span>
-   <span data-ttu-id="35735-114">Эта функция работает только с устройствами, которые имеют связь с проигрывателем Windows Media.</span><span class="sxs-lookup"><span data-stu-id="35735-114">This feature works only with devices that have a partnership with Windows Media Player.</span></span>
-   <span data-ttu-id="35735-115">Устройства должны передавать только содержимое, которое было создано или загружено устройством.</span><span class="sxs-lookup"><span data-stu-id="35735-115">Devices must report only content that the device authored or downloaded.</span></span> <span data-ttu-id="35735-116">Сюда входят фотографии, созданные устройством; голосовые записи, созданные устройством; записи голосовой почты; скачивается с карты памяти; и скачивается из Интернета.</span><span class="sxs-lookup"><span data-stu-id="35735-116">This includes photos taken by the device; voice recordings created by the device; voicemail recordings; downloads from a storage card; and downloads from the Internet.</span></span> <span data-ttu-id="35735-117">Не следует сообщать о содержимом, которое было сохранено на устройстве в результате синхронизации с другим устройством или другим партнерством.</span><span class="sxs-lookup"><span data-stu-id="35735-117">Content that was stored on the device as a result of synchronization with another device or a different partnership must not be reported.</span></span>

<span data-ttu-id="35735-118">Файл заголовка с именем вмпдевицес. h, который устанавливается как часть пакета SDK проигрывателя Windows Media, определяет структуры и константы, необходимые для поддержки расширений устройств проигрывателя Windows Media.</span><span class="sxs-lookup"><span data-stu-id="35735-118">The header file named wmpdevices.h, which is installed as part of the Windows Media Player SDK, defines the structures and constants needed to support Windows Media Player device extensions.</span></span>

<span data-ttu-id="35735-119">Чтобы устройство было распознано как поддерживающее отчеты о приобретенном содержимом с помощью набора расширений MTP устройства Windows Media Player, оно должно включать в набор данных DeviceInfo следующие сведения.</span><span class="sxs-lookup"><span data-stu-id="35735-119">For a device to be recognized as supporting the reporting of acquired content through the Windows Media Player MTP device extension set, it must include the following information in the DeviceInfo dataset.</span></span> <span data-ttu-id="35735-120">(Дополнительные сведения об этом наборе данных см. в разделе 4.6.1 спецификации MTP.)</span><span class="sxs-lookup"><span data-stu-id="35735-120">(For more information about this dataset, see section 4.6.1 of the MTP specification.)</span></span>



| <span data-ttu-id="35735-121">Поле набора данных</span><span class="sxs-lookup"><span data-stu-id="35735-121">Dataset field</span></span>          | <span data-ttu-id="35735-122">Порядок полей</span><span class="sxs-lookup"><span data-stu-id="35735-122">Field order</span></span> | <span data-ttu-id="35735-123">Тип данных</span><span class="sxs-lookup"><span data-stu-id="35735-123">Data type</span></span>  | <span data-ttu-id="35735-124">Значение</span><span class="sxs-lookup"><span data-stu-id="35735-124">Value</span></span>                       |
|------------------------|-------------|------------|-----------------------------|
| <span data-ttu-id="35735-125">вендорекстенсионид</span><span class="sxs-lookup"><span data-stu-id="35735-125">VendorExtensionID</span></span>      | <span data-ttu-id="35735-126">2</span><span class="sxs-lookup"><span data-stu-id="35735-126">2</span></span>           | <span data-ttu-id="35735-127">**UINT32**</span><span class="sxs-lookup"><span data-stu-id="35735-127">**UINT32**</span></span> | <span data-ttu-id="35735-128">0x00000006</span><span class="sxs-lookup"><span data-stu-id="35735-128">0x00000006</span></span>                  |
| <span data-ttu-id="35735-129">вендорекстенсионверсион</span><span class="sxs-lookup"><span data-stu-id="35735-129">VendorExtensionVersion</span></span> | <span data-ttu-id="35735-130">3</span><span class="sxs-lookup"><span data-stu-id="35735-130">3</span></span>           | <span data-ttu-id="35735-131">**UINT16**</span><span class="sxs-lookup"><span data-stu-id="35735-131">**UINT16**</span></span> | <span data-ttu-id="35735-132">0x0064 (100)</span><span class="sxs-lookup"><span data-stu-id="35735-132">0x0064 (100)</span></span>                |
| <span data-ttu-id="35735-133">вендорекстенсиондеск</span><span class="sxs-lookup"><span data-stu-id="35735-133">VendorExtensionDesc</span></span>    | <span data-ttu-id="35735-134">4</span><span class="sxs-lookup"><span data-stu-id="35735-134">4</span></span>           | <span data-ttu-id="35735-135">**String**</span><span class="sxs-lookup"><span data-stu-id="35735-135">**String**</span></span> | <span data-ttu-id="35735-136">"microsoft.com/WMPPD: 11,0"</span><span class="sxs-lookup"><span data-stu-id="35735-136">"microsoft.com/WMPPD: 11.0"</span></span> |



 

<span data-ttu-id="35735-137">В следующей таблице приведены сведения об операции MTP для составления отчетов о приобретенном содержимом.</span><span class="sxs-lookup"><span data-stu-id="35735-137">The following table provides details about the MTP operation for reporting acquired content.</span></span>



| <span data-ttu-id="35735-138">Элемент</span><span class="sxs-lookup"><span data-stu-id="35735-138">Item</span></span>                  | <span data-ttu-id="35735-139">Описание</span><span class="sxs-lookup"><span data-stu-id="35735-139">Description</span></span>                                                                                                                                                                                                                     |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="35735-140">Код операции</span><span class="sxs-lookup"><span data-stu-id="35735-140">Operation Code</span></span>        | <span data-ttu-id="35735-141">0x9202</span><span class="sxs-lookup"><span data-stu-id="35735-141">0x9202</span></span>                                                                                                                                                                                                                          |
| <span data-ttu-id="35735-142">Параметр операции 1</span><span class="sxs-lookup"><span data-stu-id="35735-142">Operation Parameter 1</span></span> | <span data-ttu-id="35735-143">Идентификатор транзакции, предоставленный устройством во время предыдущего сеанса.</span><span class="sxs-lookup"><span data-stu-id="35735-143">The transaction ID supplied by the device during the previous session.</span></span> <span data-ttu-id="35735-144">Для первого сеанса это значение равно нулю.</span><span class="sxs-lookup"><span data-stu-id="35735-144">This value is zero for the first session.</span></span>                                                                                                                |
| <span data-ttu-id="35735-145">Параметр операции 2</span><span class="sxs-lookup"><span data-stu-id="35735-145">Operation Parameter 2</span></span> | <span data-ttu-id="35735-146">Начальный индекс.</span><span class="sxs-lookup"><span data-stu-id="35735-146">Starting index.</span></span> <span data-ttu-id="35735-147">Это значение всегда равно нулю при первом вызове сеанса.</span><span class="sxs-lookup"><span data-stu-id="35735-147">This value is always zero on the first call of a session.</span></span> <span data-ttu-id="35735-148">При последующих вызовах в рамках одного сеанса синхронизации это значение увеличивается по количеству элементов, возвращенных из предыдущих данных ответа.</span><span class="sxs-lookup"><span data-stu-id="35735-148">On subsequent calls within the same synchronization session, this value increases by the count of the items returned from the previous response data.</span></span> |
| <span data-ttu-id="35735-149">Параметр операции 3</span><span class="sxs-lookup"><span data-stu-id="35735-149">Operation Parameter 3</span></span> | <span data-ttu-id="35735-150">0x10000.</span><span class="sxs-lookup"><span data-stu-id="35735-150">0x10000.</span></span> <span data-ttu-id="35735-151">Эта константа, определенная в вмпдевицес. h, является максимальным числом Пуоидс, которое может быть возвращено в ответе.</span><span class="sxs-lookup"><span data-stu-id="35735-151">This constant, defined in wmpdevices.h, is the maximum number of PUOIDs that can be returned in the response.</span></span> <span data-ttu-id="35735-152">Обратите внимание, что значение этой константы может быть пересмотрено в будущих выпусках этого файла заголовка.</span><span class="sxs-lookup"><span data-stu-id="35735-152">Note that the value of this constant may be revised in future releases of this header file.</span></span>              |
| <span data-ttu-id="35735-153">Параметр операции 4</span><span class="sxs-lookup"><span data-stu-id="35735-153">Operation Parameter 4</span></span> | <span data-ttu-id="35735-154">0</span><span class="sxs-lookup"><span data-stu-id="35735-154">0</span></span>                                                                                                                                                                                                                               |
| <span data-ttu-id="35735-155">Параметр операции 5</span><span class="sxs-lookup"><span data-stu-id="35735-155">Operation Parameter 5</span></span> | <span data-ttu-id="35735-156">0</span><span class="sxs-lookup"><span data-stu-id="35735-156">0</span></span>                                                                                                                                                                                                                               |
| <span data-ttu-id="35735-157">Данные</span><span class="sxs-lookup"><span data-stu-id="35735-157">Data</span></span>                  | <span data-ttu-id="35735-158">Устройство возвращает массив MTP, содержащий Пуоидс, которые были получены.</span><span class="sxs-lookup"><span data-stu-id="35735-158">The device returns an MTP array containing PUOIDs that have been acquired.</span></span> <span data-ttu-id="35735-159">Массив начинается с значения **DWORD** , показывающего количество элементов в массиве, за которым следует массив элементов.</span><span class="sxs-lookup"><span data-stu-id="35735-159">The array begins with a **DWORD** value indicating the count of items in the array, followed by the array of elements.</span></span>                               |
| <span data-ttu-id="35735-160">Направление данных</span><span class="sxs-lookup"><span data-stu-id="35735-160">Data Direction</span></span>        | <span data-ttu-id="35735-161">R->I</span><span class="sxs-lookup"><span data-stu-id="35735-161">R->I</span></span>                                                                                                                                                                                                                         |
| <span data-ttu-id="35735-162">Параметры кода ответа</span><span class="sxs-lookup"><span data-stu-id="35735-162">Response Code Options</span></span> | <span data-ttu-id="35735-163">**MTP \_ ОТВЕТ \_ OK** (0x2001) или допустимый код ответа ошибки.</span><span class="sxs-lookup"><span data-stu-id="35735-163">**MTP\_RESPONSE\_OK** (0x2001) or valid error response code.</span></span>                                                                                                                                                                    |
| <span data-ttu-id="35735-164">Параметр ответа 1</span><span class="sxs-lookup"><span data-stu-id="35735-164">Response Parameter 1</span></span>  | <span data-ttu-id="35735-165">ИДЕНТИФИКАТОР текущей транзакции.</span><span class="sxs-lookup"><span data-stu-id="35735-165">The current transaction ID.</span></span>                                                                                                                                                                                                     |
| <span data-ttu-id="35735-166">Параметр ответа 2</span><span class="sxs-lookup"><span data-stu-id="35735-166">Response Parameter 2</span></span>  | <span data-ttu-id="35735-167">Число Пуоидс, которые остаются для получения в будущих запросах.</span><span class="sxs-lookup"><span data-stu-id="35735-167">The number of PUOIDs that remain to be retrieved by future requests.</span></span>                                                                                                                                                            |
| <span data-ttu-id="35735-168">Параметр ответа 3</span><span class="sxs-lookup"><span data-stu-id="35735-168">Response Parameter 3</span></span>  | <span data-ttu-id="35735-169">**DWORD** , содержащий сведения о состоянии.</span><span class="sxs-lookup"><span data-stu-id="35735-169">**DWORD** containing status information.</span></span> <span data-ttu-id="35735-170">Состояние указывается в побитовой последовательности.</span><span class="sxs-lookup"><span data-stu-id="35735-170">Status is indicated in a bitwise fashion.</span></span> <span data-ttu-id="35735-171">Дополнительные сведения об используемых флагах см. в разделе Примечания.</span><span class="sxs-lookup"><span data-stu-id="35735-171">See Remarks for information about flags to use.</span></span>                                                                                              |
| <span data-ttu-id="35735-172">Параметр ответа 4</span><span class="sxs-lookup"><span data-stu-id="35735-172">Response Parameter 4</span></span>  | <span data-ttu-id="35735-173">0</span><span class="sxs-lookup"><span data-stu-id="35735-173">0</span></span>                                                                                                                                                                                                                               |
| <span data-ttu-id="35735-174">Параметр ответа 5</span><span class="sxs-lookup"><span data-stu-id="35735-174">Response Parameter 5</span></span>  | <span data-ttu-id="35735-175">0</span><span class="sxs-lookup"><span data-stu-id="35735-175">0</span></span>                                                                                                                                                                                                                               |



 

## <a name="remarks"></a><span data-ttu-id="35735-176">Комментарии</span><span class="sxs-lookup"><span data-stu-id="35735-176">Remarks</span></span>

<span data-ttu-id="35735-177">Состояние указывается в ответном параметре 3 в побитовом режиме с помощью следующего флага.</span><span class="sxs-lookup"><span data-stu-id="35735-177">Status is indicated through Response Parameter 3 in a bitwise fashion by using the following flag.</span></span>



| <span data-ttu-id="35735-178">Флаг</span><span class="sxs-lookup"><span data-stu-id="35735-178">Flag</span></span>                                              | <span data-ttu-id="35735-179">Значение</span><span class="sxs-lookup"><span data-stu-id="35735-179">Value</span></span> | <span data-ttu-id="35735-180">Описание</span><span class="sxs-lookup"><span data-stu-id="35735-180">Description</span></span>                                                                                                                                                                                                                             |
|---------------------------------------------------|-------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="35735-181">**WMP \_ мдрт \_ Флаги \_ \_ \_ неотправленных приобретенных элементов**</span><span class="sxs-lookup"><span data-stu-id="35735-181">**WMP\_MDRT\_FLAGS\_UNREPORTED\_ACQUIRED\_ITEMS**</span></span> | <span data-ttu-id="35735-182">0x1</span><span class="sxs-lookup"><span data-stu-id="35735-182">0x1</span></span>   | <span data-ttu-id="35735-183">Устройство содержит некоторые приобретенные элементы, которые невозможно вернуть в списке ПУОИДС.</span><span class="sxs-lookup"><span data-stu-id="35735-183">The device contains some acquired items that cannot be returned in the list of PUOIDS.</span></span> <span data-ttu-id="35735-184">Обратите внимание, что этот флаг не является избыточным для параметра ответа 2.</span><span class="sxs-lookup"><span data-stu-id="35735-184">Note that this flag is not redundant with Response Parameter 2.</span></span> <span data-ttu-id="35735-185">Установите этот флаг только в том случае, если запрошенные элементы не могут быть возвращены устройством.</span><span class="sxs-lookup"><span data-stu-id="35735-185">Set this flag only when there are requested items that the device cannot return.</span></span> |



 

<span data-ttu-id="35735-186">Биты с 1 по 31 зарезервированы для будущего использования.</span><span class="sxs-lookup"><span data-stu-id="35735-186">Bits 1 through 31 are reserved for future use.</span></span> <span data-ttu-id="35735-187">Эти биты должны иметь значение 0.</span><span class="sxs-lookup"><span data-stu-id="35735-187">These bits should be set to zero.</span></span>

## <a name="related-topics"></a><span data-ttu-id="35735-188">См. также</span><span class="sxs-lookup"><span data-stu-id="35735-188">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="35735-189">**Проигрыватель Windows Media**</span><span class="sxs-lookup"><span data-stu-id="35735-189">**Windows Media Player**</span></span>](windows-media-player.md)
</dt> </dl>

 

 




