---
title: Получение сведений о состоянии
description: Получение сведений о состоянии
ms.assetid: 61561520-705a-4d06-a72c-c1cc6315f54e
keywords:
- Интернет-магазины проигрывателя Windows Media, диспетчер загрузки
- Интернет-магазины, диспетчер загрузки
- Тип 2 Интернет-магазинов, диспетчер загрузки
- Интернет-магазины проигрывателя Windows Media, получение состояния
- Интернет-магазины, получение состояния
- Тип 2 Интернет-магазинов, получение состояния
- Проигрыватель Windows Media, диспетчер загрузки
- Диспетчер загрузки проигрывателя Windows Media
- Диспетчер загрузки
- получение состояния
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 155d1c9d949306ae5cda3ffff6a7a55fd3bae23c
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/16/2019
ms.locfileid: "103778257"
---
# <a name="retrieving-status-information"></a>Получение сведений о состоянии

Сведения о состоянии обновляются с помощью таймера, созданного в функции **init** . Все состояния обновляются с помощью одного и того же таймера. Имя функции для события таймера — **OnTime**.

**OnTime** определяет отображаемые сведения на основе выбора пользователя, который хранится в глобальной переменной с именем g \_ окуррентдлитем. Сначала функция проверяет допустимость значений размера или хода выполнения и создает строку для каждого варианта.


```C++
var Size = g_oCurrentDLItem.size <=0 ? "Waiting..." : g_oCurrentDLItem.size + " bytes";
var Progress = g_oCurrentDLItem.progress <=0 ? "Waiting..." : g_oCurrentDLItem.progress + " bytes";

```



Если значение допустимо, строка представляет число байтов. Если значение недопустимо, например-1, строка предоставляет сообщение, сообщающее пользователю о том, что информация еще недоступна.

Затем блок **переключателя** определяет, завершено ли скачивание для выбранного элемента или отменено. Если оба варианта имеют значение true, значения переменных размера или хода выполнения обновляются соответствующим образом.


```C++
switch(g_oCurrentDLItem.downloadState)
{
    case 3:            
        Size = "Completed";
        Progress = "Completed";
        break;
        
    case 4:
        Size = "Canceled";
        Progress = "Canceled";
        break;
        
    default:
        break;                
}

```



Наконец, сведения о состоянии отображаются в элементе DIV с именем длстате.

## <a name="related-topics"></a>См. также

<dl> <dt>

[**Использование диспетчера загрузки**](using-the-download-manager.md)
</dt> </dl>

 

 




