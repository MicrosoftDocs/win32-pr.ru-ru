---
description: Технология энергозависимой памяти (PM Memory) обеспечивает доступ на уровне байт к энергонезависимым носителям, одновременно уменьшая задержку в хранении или получении данных.
ms.assetid: 68BF6074-09CB-4D6E-8BFD-FBA297391286
title: программирование энергонезависимой памяти в интеграции с Windows нвмл
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 750a05f28ca4698091f79b1004bbbb00ff69752e0ff45f2153cc4f0b7fe20a26
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119951054"
---
# <a name="persistent-memory-programming-in-windows---nvml-integration"></a>программирование энергонезависимой памяти в интеграции с Windows нвмл

Технология энергозависимой памяти (PM Memory) обеспечивает доступ на уровне байт к энергонезависимым носителям, одновременно уменьшая задержку в хранении или получении данных. Он создает новый уровень между системной памятью и традиционным хранилищем. Любая программа, зависящая от или масштабируется с помощью быстрой записи на постоянный носитель, может выиграть от PM.

в этой статье показано, как можно интегрировать невременную библиотеку памяти (нвмл) в проект Visual Studio для простоты использования.

> [!Note]  
> постоянная память иногда также называется памятью служба хранилища класса (SCM).

 

## <a name="pm-and-nvml"></a>PM и НВМЛ

первая поддержка энергонезависимой памяти была введена в Windows Server 2016 и Windows 10 годовщина (1607). Чтобы получить краткий обзор, ознакомьтесь с этими двумя видео Channel9:

-   [использование энергонезависимой памяти (NVDIMM-N) как блочного служба хранилища в Windows Server 2016](https://channel9.msdn.com/Events/Build/2016/P466)
-   [использование энергонезависимой памяти (NVDIMM-N) в качестве Byte-Addressable служба хранилища в Windows Server 2016](https://channel9.msdn.com/Events/Build/2016/P470)

Чтобы помочь разработчикам воспользоваться преимуществами постоянных объемов памяти, корпорация Майкрософт также предоставила усилия по обеспечению Windowsной библиотеки памяти. Эта библиотека предоставляет различные средства для создания постоянных приложений с учетом памяти. Например, он содержит код, позволяющий легко создавать хранилище ключей с поддержкой PM для очень быстрого поиска и хранения. Дополнительные сведения о НВМЛ, включая примеры, можно найти в [библиотеке НВМ](https://pmem.io/nvml/).

## <a name="integrating-nvml-into-a-visual-studio-project"></a>интеграция нвмл в Project Visual Studio

1. Скачивание файлов и заголовков библиотеки НВМЛ

-   НВМЛ поддерживается на GitHub. Вы можете либо скомпилировать источник самостоятельно, либо просто загрузить скомпилированные двоичные файлы непосредственно отсюда: [Нвмл версии 1,2-Windows Technical Preview](https://github.com/pmem/pmdk/releases/tag/1.2%2Bwtp1).

2. Поместите файлы библиотеки и заголовки в каталог по своему выбору, например "C: \\ нвмл \\ lib" и "c: \\ нвмл \\ Inc" соответственно.

3. Настройте проект следующим образом.

-   Откройте проект Visual Studio и в окне "обозреватель решений" щелкните правой кнопкой мыши имя проекта.
-   Откройте область параметров проекта в нижней части результирующего всплывающего окна.
-   Перейдите к разделу "Свойства конфигурации-> C/C++" и добавьте папку, в которую был сохранен заголовок (C: \\ нвмл \\ Inc), в поле "Дополнительные каталоги включаемых папок".
-   Затем перейдите к разделу "Свойства конфигурации-> компоновщик" и добавьте папку, в которой была сохранена библиотека (C: \\ нвмл \\ lib), в поле "Дополнительные каталоги библиотеки".

4. затем убедитесь, что проект предназначен для Windows Server 2016 или Windows 10 годовщина:

-   Перейдите в раздел "Свойства конфигурации-> Общие" и задайте в поле "версия целевой платформы" значение "10.0.14393.0" и
-   Перейдите к разделу "Свойства конфигурации-> C/C++" и добавьте "НТДДИ \_ Version = нтдди \_ WIN10 \_ RS1;" в поле "препроцессор".

5. Включение заголовков в код и ссылки на необходимые библиотеки

-   На этом этапе можно просто включить файлы заголовков, которые вы хотите использовать в коде, как и любые другие файлы заголовков. Например, для использования либпмем:
    -   Добавьте " \# include <либпмем. h>" и
    -   Добавьте "либпмем. lib" в "Свойства конфигурации-> компоновщик — > ввод-> дополнительные зависимости"

На этом этапе вы готовы вызывать функции библиотеки непосредственно в коде и использовать их преимущества.

 

 



