---
description: Сведения о беспроводной размещенной сети
ms.assetid: a6990759-9b84-4644-8f82-75aa63e8197b
title: Сведения о беспроводной размещенной сети
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 15be48bb5ef10754b11a0b3d4bb7d8e31ace9752
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104265032"
---
# <a name="about-the-wireless-hosted-network"></a>Сведения о беспроводной размещенной сети

Беспроводная размещенная сеть — это новая функция WLAN, поддерживаемая в Windows 7 и Windows Server 2008 R2 с установленной службой беспроводной локальной сети. Эта функция реализует две основные функции:

-   Виртуализация физического беспроводного адаптера на более чем один виртуальный беспроводной адаптер иногда называется виртуальным Wi-Fi.
-   Программная точка беспроводного доступа (AP) иногда называется Софтап, которая использует назначенный виртуальный беспроводной адаптер.

Эти две функции совместно взаимодействуют в системе Windows. Включение или отключение беспроводной размещенной сети включает или отключает виртуальные Wi-Fi и Софтап. Невозможно включить или отключить эти две функции отдельно в Windows.

С помощью этой функции компьютер Windows может использовать один физический беспроводной адаптер для подключения в качестве клиента к точке доступа к оборудованию (AP), в то же время действуя как программный AP, позволяющий подключать к нему другие устройства с поддержкой беспроводной связи. Для этой функции требуется, чтобы на локальном компьютере был установлен адаптер беспроводной сети с поддержкой размещенных сетей. Драйвер беспроводного адаптера должен реализовывать модель драйвера беспроводных устройств беспроводной сети, определенную корпорацией Майкрософт для использования в Windows 7. Чтобы получить логотип Windows 7, драйвер беспроводной сети должен реализовать функцию беспроводной сетевой хостинга.

В любой момент на локальном компьютере включено не более одной беспроводной сети, и беспроводная сеть будет использовать только один беспроводной адаптер. При наличии нескольких беспроводных адаптеров с поддержкой размещенной сети Windows выберет один адаптер для использования с беспроводной сетью. Когда используются API размещенной сети, адаптер беспроводной сети с поддержкой размещенных сетей виртуализован до трех логических адаптеров:

-   Адаптер (STA) для использования клиентскими или нерегламентированными приложениями беспроводной связи. Адаптер STA наследует все параметры исходного физического адаптера беспроводной сети и выполняет те же поведения, что и физический адаптер. По сути, один из них может просматривать адаптер STA так же, как и физический адаптер после виртуализации. Адаптер STA всегда находится в системе при условии, что имеется соответствующий беспроводной физический адаптер.
-   Адаптер AP, который используется беспроводной размещенной сетью для размещения Софтап. Адаптер AP находится в системе Windows только после первого вызова беспроводной размещенной сети (при первом вызове функции [**вланхостеднетворкстартусинг**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing), [**вланхостеднетворкфорцестарт**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart)или [**вланхостеднетворкинитсеттингс**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings) ). После создания адаптер AP останется в системе до тех пор, пока не будет отключена беспроводная размещенная сеть. Если беспроводная размещенная сеть включена позже, адаптер AP снова отобразится в системе.
-   Виртуальный адаптер (VSTA), используемый поставщиками оборудования для расширения возможностей беспроводной размещенной сети в Windows. Адаптер VSTA является необязательным и может быть создан в системе только соответствующей службой IHV. В отличие от адаптера AP, адаптер VSTA существует в системе Windows только с момента, когда служба IHV инициализирует адаптер до тех пор, пока служба IHV не освободит адаптер.

Виртуальная Wi-Fi сопоставляет логические адаптеры с портами NDIS. Привязка адаптеров STA, AP и VSTA к конкретным портам NDIS зависит от Windows. Адаптер STA всегда привязан к порту 0. Адаптер AP привязан к следующему доступному порту NDIS при запуске виртуализации, и привязка остается прежней до тех пор, пока не завершится виртуализация, когда будет отключена беспроводная размещенная сеть. Адаптер VSTA привязан к следующему доступному порту NDIS, когда он инициализируется соответствующей службой IHV, и привязка остается прежней, пока она не будет освобождена службой IHV.

Адаптер VSTA можно создать для использования независимыми поставщиками оборудования, не создавая адаптер Софтап.

Для физического адаптера с виртуализацией допустимы следующие сочетания:

-   Адаптер STA.
-   Адаптеры STA и AP.
-   Адаптеры STA и VSTA.
-   Адаптеры STA, AP и VSTA.

За исключением случая адаптера STA, все остальные сочетания допустимы только при включенной беспроводной сети. Как и в случае с одним адаптером STA, это физический адаптер, если беспроводная размещенная сеть отключена. Если беспроводная размещенная сеть включена, это адаптер STA, когда беспроводная размещенная сеть никогда не была вызвана в системе.

Мост уровня 2 запрещен между адаптером AP и другими адаптерами в системе. Это же ограничение применяется к адаптеру VSTA, если он имеется в системе.

Функция беспроводной размещенной сети в Windows реализует Софтап. Однако это Софтап не предназначено для замены аппаратных устройств AP беспроводного доступа. В частности, если беспроводная размещенная сеть работает при переходе компьютера в спящий режим (ждущий режим), режим гибернации или перед перезагрузкой компьютера, то сеть, размещенная в беспроводной сети, будет остановлена. Беспроводная размещенная сеть не будет автоматически перезагружаться после выхода компьютера из спящего режима, гибернации или перезапуска. Кроме того, Софтап не предоставляет разрешение DNS. Если внешний DNS-сервер не предоставляется через общий доступ к подключению к Интернету (см. обсуждение ниже), разрешение полного доменного имени (FQDN) между любыми двумя компьютерами или устройствами, подключенными к Софтап, включая компьютер, на котором размещена Софтап, будет работать только в том случае, если обе сущности отмечают тип сети Софтап Network как частный (HOME или работает во всплывающем списке Категория сети). Так как компьютер, на котором размещается Софтап, всегда помечает тип сети Софтап как частный, только компьютеры или устройства, подключенные к Софтап, должны пометить тип сети Софтап как частный, чтобы разрешение FQDN работало.

Софтап и нерегламентированные сети являются взаимоисключающими на одном физическом адаптере. Если Софтап работает на адаптере AP и пользователь или приложение запускает сеть ad hoc на адаптере STA, Софтап будет закрыто. В адаптере STA выполняется IIf ad hoc, попытка запуска Софтап на адаптере AP завершится ошибкой.

Чтобы обеспечить защиту беспроводных подключений между компьютером, на котором размещается Софтап, и устройствами, подключающимся к Софтап, в беспроводной сети необходимо, чтобы все подключенные устройства использовали набор шифров WPA2-PSK/AES. Общий ключ — это значение 63 символов, создаваемое Windows при первом вызове беспроводной размещенной сети (при первом вызове функции [**вланхостеднетворкстартусинг**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing), [**вланхостеднетворкфорцестарт**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart)или [**вланхостеднетворкинитсеттингс**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings) ). Пользователь или приложение не может изменить значение этого общего ключа, но приложение может запросить повторное создание нового ключа в операционной системе, вызвав функцию [**вланхостеднетворкрефрешсекуритисеттингс**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkrefreshsecuritysettings) , или пользователь может запросить повторное создание нового ключа с помощью команд **Netsh WLAN** . Этот общий ключ называется первичным или системным ключом беспроводной сети, а также сохраняется в процессе запуска и остановки беспроводной сети. Этот первичный ключ называется "ключ безопасности системы" в командах **Netsh WLAN** .

Чтобы обеспечить простоту использования, беспроводная размещенная сеть также поддерживает концепцию вторичного или пользовательского ключа безопасности, которая более понятна, но может быть менее безопасной. Этот вторичный ключ называется "ключ безопасности пользователя" в командах **Netsh WLAN** . Вторичный ключ не создается Windows. Пользователь должен указать значение для этого ключа. Пользователь или приложение могут задать или изменить значение ключа, вызвав функцию [**вланхостеднетворксетсекондарикэй**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworksetsecondarykey) или используя команды **Netsh WLAN** . Вторичный ключ можно сделать постоянным или временным. Для временного ключа, если сеть, размещенная в беспроводной сети, уже запущена, вторичный ключ будет действителен до тех пор, пока беспроводная сеть не прекратит работу. Для временного ключа, если беспроводная сеть не запущена, она будет действительна только между следующим запуском и остановкой беспроводной сети.

Существует только один первичный ключ и не более одного вторичного ключа для беспроводных Хетворк, размещенных на любом компьютере. Все устройства, подготовленные с помощью Wi-Fi Protected Setup (WPS), получат первичный ключ. Другие устройства, настроенные вручную, могут использовать любой из ключей. При каждом изменении ключа любое устройство со старым значением ключа не сможет подключиться к беспроводной сети без повторной подготовки с помощью нового ключа. Однако устройства с другим неизменным ключом по прежнему могут подключаться к беспроводной сети.

Приложение может регистрироваться для сетевых уведомлений, размещенных в беспроводной сети, поэтому при изменении свойств в беспроводной сети в обратном вызове приложения будет отправляться уведомление WLAN. Приложение регистрируется для сетевых уведомлений, размещенных в беспроводной сети, вызывая [**вланрегистернотификатион**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanregisternotification) с параметром *двнотифсаурце* , который включает \_ источник уведомлений WLAN \_ \_ хнвк bit.

Windows предоставляет администраторам ИТ два способа управления функцией беспроводной размещенной сети. Для компьютеров, входящих в домен, администраторы могут использовать групповую политику, чтобы запретить размещенную в беспроводной сети сеть. С помощью команд **Netsh WLAN** администратор может включить или отключить локальную сеть, размещенную в локальной сети, на компьютере.

## <a name="supported-scenarios-for-wireless-hosted-network"></a>Поддерживаемые сценарии для беспроводной размещенной сети

Беспроводная сеть, размещенная в беспроводной сети, включает два основных сценария для компьютеров Windows:

• Возможность предоставить беспроводную личную сеть (PAN) для использования с различными устройствами беспроводной связи.

• Общий доступ к сетевым подключениям для использования другими компьютерами и устройствами.

Беспроводная личная сеть — это основной сценарий, который включается в себе самостоятельно. После запуска беспроводной сети на компьютере любое устройство с поддержкой беспроводного подключения, поддерживающее WPA2-PSK/AES, сможет подключаться к Софтап так же, как если бы оно подключается к обычному аппаратному точке доступа. Устройства, подключенные к беспроводной сети, формируют беспроводное PAN, где они могут обмениваться информацией с компьютером Windows, на котором размещается Софтап, а также между ними.

Общий доступ к сетевым подключениям для использования другими компьютерами и устройствами требует использования общего доступа к подключению к Интернету (ICS). В этом сценарии общедоступный интерфейс ICS является общим подключением, а частный интерфейс — виртуальным адаптером, на котором размещается Софтап. Общее подключение может быть подключением Ethernet, беспроводной локальной сети или беспроводной глобальной сети. В случае беспроводного подключения к локальной сети общедоступный интерфейс ICS может быть либо другим адаптером беспроводной локальной сети, либо виртуальным адаптером станции на том же физическом беспроводном адаптере, на котором размещается Софтап. Чаще всего для общего доступа к сети используется подключение к Интернету, в котором сеть общего интерфейса ICS имеет доступ к Интернету.

Беспроводная размещенная сеть взаимодействует с Wi-Fi защищенной настройкой (WPS), еще одним важным новым компонентом в Windows 7 и Windows Server 2008 R2 с установленной службой беспроводной локальной сети. Беспроводная размещенная сеть и WPS поддерживают сценарий, который подготавливает устройство с поддержкой WPS для аппаратного AP, не поддерживающего WPS. В этом случае Софтап, размещенный в Windows, вызывается в фоновом режиме, чтобы передать профиль AP оборудования на устройство с поддержкой WPS.

## <a name="user-and-application-access-to-wireless-hosted-network"></a>Доступ пользователей и приложений к беспроводной размещенной сети

Конечные пользователи взаимодействуют с функцией беспроводной размещенной сети в Windows, используя сторонние приложения или команды **netsh** . В настоящее время нет собственного пользовательского интерфейса для настройки или управления беспроводной размещенной сетью в Windows 7 или Windows Server 2008 R2 с установленной службой беспроводной локальной сети.

Сторонние приложения и команды **netsh** основаны на использовании общедоступных сетевых функций, размещенных в беспроводной сети. Этот набор функций предоставляет полный набор возможностей для управления беспроводной размещенной сетью в Windows 7 и Windows Server 2008 R2 с установленной службой беспроводной локальной сети.

Ниже приведен список функций беспроводной сети, а также общие действия с точки зрения конечного пользователя, которые будут использоваться для:



| Используемые функции                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Описание                                                                                                                                                   |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="WlanHostedNetworkForceStart_____WlanHostedNetworkStartUsing"></span><span id="wlanhostednetworkforcestart_____wlanhostednetworkstartusing"></span><span id="WLANHOSTEDNETWORKFORCESTART_____WLANHOSTEDNETWORKSTARTUSING"></span>[**Вланхостеднетворкфорцестарт**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart), [ **вланхостеднетворкстартусинг**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)<br/>                                                                                                                                                                                                                                                       | Запустите сеть, размещенную в беспроводной сети.<br/>                                                                                                                 |
| <span id="WlanHostedNetworkForceStop__WlanHostedNetworkStopUsing"></span><span id="wlanhostednetworkforcestop__wlanhostednetworkstopusing"></span><span id="WLANHOSTEDNETWORKFORCESTOP__WLANHOSTEDNETWORKSTOPUSING"></span>[**Вланхостеднетворкфорцестоп**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop), [ **вланхостеднетворкстопусинг**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing)<br/>                                                                                                                                                                                                                                                                          | Останавливает сеть, размещенную в беспроводной сети.<br/>                                                                                                                  |
| <span id="WlanHostedNetworkInitSettings__WlanHostedNetworkSetSecondaryKey__WlanHostedNetworkRefreshSecuritySettings"></span><span id="wlanhostednetworkinitsettings__wlanhostednetworksetsecondarykey__wlanhostednetworkrefreshsecuritysettings"></span><span id="WLANHOSTEDNETWORKINITSETTINGS__WLANHOSTEDNETWORKSETSECONDARYKEY__WLANHOSTEDNETWORKREFRESHSECURITYSETTINGS"></span>[**Вланхостеднетворкинитсеттингс**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings), [**вланхостеднетворксетсекондарикэй**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworksetsecondarykey), [**вланхостеднетворкрефрешсекуритисеттингс**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkrefreshsecuritysettings)<br/> | Настройте параметры сетевой размещенной сети (измените идентификатор SSID, измените вторичный ключ или запросите повторное создание первичного ключа).<br/>            |
| <span id="WlanHostedNetworkQueryStatus__WlanHostedNetworkQuerySecondaryKey__WlanHostedNetworkQueryProperty"></span><span id="wlanhostednetworkquerystatus__wlanhostednetworkquerysecondarykey__wlanhostednetworkqueryproperty"></span><span id="WLANHOSTEDNETWORKQUERYSTATUS__WLANHOSTEDNETWORKQUERYSECONDARYKEY__WLANHOSTEDNETWORKQUERYPROPERTY"></span>[**Вланхостеднетворккуеристатус**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus), [**вланхостеднетворккуерисекондарикэй**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerysecondarykey), [**вланхостеднетворккуерипроперти**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty)<br/>                                              | Запросите параметры и сведения о беспроводном размещенной сети (состояние, SSID, вторичный ключ, первичный ключ или список устройств, подключенных в настоящее время).<br/> |



 

Команды **netsh** предназначены для использования опытными пользователями или администраторами.

*Netsh.exe* имеет множество подкоманд для беспроводной локальной сети. Полный список параметров для **netsh** и Wireless LAN можно получить из командной строки, введя следующую команду:

**Netsh WLAN/?**

Документация по всем командам Netsh для беспроводной локальной сети также доступна в сети TechNet. Дополнительные сведения см. в разделе [команды Netsh для беспроводной локальной сети (WLAN)](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc755301(v=ws.10)).

Ниже приведено несколько команд **netsh** , которые обычно используются для беспроводной локальной сети и беспроводной сетевой поддержки, хотя поддерживаются и другие сочетания команд:



| Get-Help                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Описание                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
| <span id="netsh_wlan_start_hostednetwork"></span><span id="NETSH_WLAN_START_HOSTEDNETWORK"></span>**Netsh WLAN Start хостеднетворк**<br/>                                                                                                                                                                                                                                                                                                                                     | Запустите сеть, размещенную в беспроводной сети.<br/>              |
| <span id="netsh_wlan_stop_hostednetwork"></span><span id="NETSH_WLAN_STOP_HOSTEDNETWORK"></span>**Netsh WLAN останавливает хостеднетворк**<br/>                                                                                                                                                                                                                                                                                                                                        | Останавливает сеть, размещенную в беспроводной сети.<br/>               |
| <span id="netsh_wlan_set_hostednetwork__mode__allow_disallow"></span><span id="NETSH_WLAN_SET_HOSTEDNETWORK__MODE__ALLOW_DISALLOW"></span>**Netsh WLAN Set хостеднетворк \[ Mode = \] allow \| запрет**<br/>                                                                                                                                                                                                                                                                      | Включение или отключение беспроводной размещенной сети.<br/>  |
| <span id="netsh_wlan_set_hostednetwork__ssid___ssid___key___passphrase___keyUsage__persistent_temporary_"></span><span id="netsh_wlan_set_hostednetwork__ssid___ssid___key___passphrase___keyusage__persistent_temporary_"></span><span id="NETSH_WLAN_SET_HOSTEDNETWORK__SSID___SSID___KEY___PASSPHRASE___KEYUSAGE__PERSISTENT_TEMPORARY_"></span>**Netsh WLAN Set хостеднетворк \[ SSID = \] <ssid> \[ ключ = \] <passphrase> \[ кэйусаже = \] Постоянный \| временный** <br/> | Настройте параметры беспроводной сети.<br/> |
| <span id="netsh_wlan_refresh_hostednetwork___data___key"></span><span id="NETSH_WLAN_REFRESH_HOSTEDNETWORK___DATA___KEY"></span>**Netsh WLAN Refresh хостеднетворк \[ Data = \] ключ**<br/>                                                                                                                                                                                                                                                                                       | Обновите ключ беспроводной размещенной сети.<br/>        |
| <span id="netsh_wlan_show_hostednetwork___setting__security_"></span><span id="NETSH_WLAN_SHOW_HOSTEDNETWORK___SETTING__SECURITY_"></span>**Netsh WLAN отобразить \[ \[ параметр хостеднетворк = \] безопасность\]**<br/>                                                                                                                                                                                                                                                                     | Отображение сведений о беспроводной размещенной сети.<br/>    |
| <span id="netsh_wlan_show_settings"></span><span id="NETSH_WLAN_SHOW_SETTINGS"></span>**команда Netsh WLAN показывать параметры**<br/>                                                                                                                                                                                                                                                                                                                                                       | Отображение глобальных параметров беспроводной локальной сети.<br/>           |



 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Использование беспроводной размещенной сети и общего доступа к подключению к Интернету](using-hosted-network-and-internet-connection-sharing.md)
</dt> <dt>

[Пример беспроводной размещенной сети](wireless-hosted-network-sample.md)
</dt> <dt>

[**вланхостеднетворкфорцестарт**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart)
</dt> <dt>

[**вланхостеднетворкинитсеттингс**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings)
</dt> <dt>

[**вланхостеднетворккуерипроперти**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty)
</dt> <dt>

[**вланхостеднетворккуерисекондарикэй**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerysecondarykey)
</dt> <dt>

[**вланхостеднетворккуеристатус**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus)
</dt> <dt>

[**вланхостеднетворкрефрешсекуритисеттингс**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkrefreshsecuritysettings)
</dt> <dt>

[**вланхостеднетворксетпроперти**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworksetproperty)
</dt> <dt>

[**вланхостеднетворксетсекондарикэй**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworksetsecondarykey)
</dt> <dt>

[**вланхостеднетворкстартусинг**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)
</dt> <dt>

[**вланхостеднетворкстопусинг**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing)
</dt> <dt>

[**вланрегистервиртуалстатионнотификатион**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanregistervirtualstationnotification)
</dt> </dl>

 

 
