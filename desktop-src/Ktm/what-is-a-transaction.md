---
description: 'Транзакция — это группа операций со следующими свойствами: атомарная, последовательная, изолированная и устойчивая (ACID).'
ms.assetid: b3da52a3-1c52-4577-a997-7e72ebc03fa8
title: Что такое транзакция?
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f0c459462d3aee3d7eef556ce0951ede537e8109
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103909183"
---
# <a name="what-is-a-transaction"></a><span data-ttu-id="1c15f-103">Что такое транзакция?</span><span class="sxs-lookup"><span data-stu-id="1c15f-103">What is a Transaction?</span></span>

<span data-ttu-id="1c15f-104">Транзакция — это группа операций со следующими свойствами: атомарная, последовательная, изолированная и устойчивая (ACID).</span><span class="sxs-lookup"><span data-stu-id="1c15f-104">A transaction is a group of operations that have the following properties: atomic, consistent, isolated, and durable (ACID).</span></span> <span data-ttu-id="1c15f-105">Поддержка транзакций позволяет разрабатывать новые типы приложений, одновременно упрощая процесс разработки и повышая надежность приложения.</span><span class="sxs-lookup"><span data-stu-id="1c15f-105">The support of transactions enables new types of applications to be developed, while simplifying the development process and making the application more robust.</span></span> <span data-ttu-id="1c15f-106">Оставшаяся часть этого раздела содержит сценарии, демонстрирующие потребность в этих свойствах, а затем таблицу, определяющую каждое свойство.</span><span class="sxs-lookup"><span data-stu-id="1c15f-106">The remainder of this topic provides scenarios that demonstrate the need for these properties, then a table that defines each property.</span></span>

<span data-ttu-id="1c15f-107">В *атомарной* группе операций каждая операция в группе должна быть выполнена или все их последствия должны быть отменены (также называют *откатом*).</span><span class="sxs-lookup"><span data-stu-id="1c15f-107">In an *atomic* group of operations, either every operation in the group must succeed, or the effects of all of them must be undone (also known as *rolling back*).</span></span> <span data-ttu-id="1c15f-108">Например, перевод банка должен быть атомарным набором из двух операций: дебет из одной учетной записи и кредит в другую учетную запись.</span><span class="sxs-lookup"><span data-stu-id="1c15f-108">For example, a bank transfer must be an atomic set of two operations: a debit from one account and a credit to another account.</span></span> <span data-ttu-id="1c15f-109">Дебет и кредит должны быть реализованы как атомарная группа.</span><span class="sxs-lookup"><span data-stu-id="1c15f-109">The debit and credit must be implemented as an atomic group.</span></span> <span data-ttu-id="1c15f-110">Если эти две операции не выполняются, то перемещение будет неудовлетворительным в пользу банка или держателя учетной записи.</span><span class="sxs-lookup"><span data-stu-id="1c15f-110">If those two operations do not both succeed, then the transfer is either unfairly in favor of the bank or the account holder.</span></span>

<span data-ttu-id="1c15f-111">Требование *согласованности* означает, что данные будут согласованы после транзакции (при условии, что мы начали с согласованной системой до транзакции).</span><span class="sxs-lookup"><span data-stu-id="1c15f-111">The requirement of *consistency* means that the data is consistent after the transaction (assuming that we started with a consistent system before the transaction).</span></span> <span data-ttu-id="1c15f-112">Для примера перемещения в банке можно определить согласованность, так как суммарный баланс учетной записи двух счетов должен быть константой.</span><span class="sxs-lookup"><span data-stu-id="1c15f-112">For the bank transfer example, consistency may be defined as having the combined account balance of the two accounts be a constant.</span></span> <span data-ttu-id="1c15f-113">Чтобы реализовать согласованность в примере перемещения в банке, операции по дебету и кредиту просто должны быть для того же объема денег.</span><span class="sxs-lookup"><span data-stu-id="1c15f-113">To implement consistency in the bank transfer example, the debit and credit operations simply need to be for the same amount of money.</span></span>

<span data-ttu-id="1c15f-114">Еще один пример транзакции — обновление веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="1c15f-114">Another example of a transaction is an update to a website.</span></span> <span data-ttu-id="1c15f-115">Для веб-сайта электронной коммерции требуется, чтобы новая страница навигации по категории продуктов отображалась в точно то же время, что и страницы сведений о продукте, описывающие новые продукты.</span><span class="sxs-lookup"><span data-stu-id="1c15f-115">An electronic commerce site requires that a new product category navigation page to appear at exactly the same time as the product detail pages that describe the new products.</span></span> <span data-ttu-id="1c15f-116">В этом случае необходимо обновить и добавить несколько записей каталога под управлением транзакции.</span><span class="sxs-lookup"><span data-stu-id="1c15f-116">In this case, there is a need to update and add multiple directory entries under the control of a transaction.</span></span> <span data-ttu-id="1c15f-117">Не только необходимо, чтобы обновления были атомарными, но также необходимо, чтобы клиент, который в настоящее время применяет покупку, не просматривает выполняющиеся обновления.</span><span class="sxs-lookup"><span data-stu-id="1c15f-117">Not only is it necessary to have the updates be atomic, but it is also necessary that a customer who is currently shopping must not see the updates in progress.</span></span> <span data-ttu-id="1c15f-118">Это пример свойства *изоляции* транзакций.</span><span class="sxs-lookup"><span data-stu-id="1c15f-118">This is an example of the *isolation* property of transactions.</span></span>

<span data-ttu-id="1c15f-119">Свойство *устойчивости* требует, чтобы после завершения обновления его последствия сохранились даже при зависании системы.</span><span class="sxs-lookup"><span data-stu-id="1c15f-119">The property of *durability* requires that after an update is finished, its effects persist even if the system stops responding.</span></span> <span data-ttu-id="1c15f-120">В предыдущем примере устойчивость может предоставляться просто путем обеспечения адекватного восстановления данных, чтобы все новые записи файловой системы, представляющие Добавление нового продукта на сайт, отображались после того, как система перестанет отвечать на запросы.</span><span class="sxs-lookup"><span data-stu-id="1c15f-120">In the previous example, durability can be provided simply by ensuring adequate data recovery so that all new file system entries that represent the addition of a new product to the site appear after a system stops responding.</span></span> <span data-ttu-id="1c15f-121">Для этого требуется система с механизмами резервного копирования, восстановления и высокой доступности данных.</span><span class="sxs-lookup"><span data-stu-id="1c15f-121">This requires a system with data backup, recovery, and high availability mechanisms.</span></span>

<span data-ttu-id="1c15f-122">Гарантия атомарности транзакции, а также других свойств, имеется в любом количестве сбоев, включая сбои, происходящие на этапе восстановления предыдущей ошибки.</span><span class="sxs-lookup"><span data-stu-id="1c15f-122">The guarantee of the atomicity of a transaction, as well as the other properties, is present in the face of any number of failures, including failures that occur during the recovery phase of a prior failure.</span></span> <span data-ttu-id="1c15f-123">В итоге система будет находиться в одном из двух состояний: все операции применены или ни одна из операций не была применена.</span><span class="sxs-lookup"><span data-stu-id="1c15f-123">Eventually the system will reach either one of two states: all operations have been applied or none of the operations have been applied.</span></span>

<span data-ttu-id="1c15f-124">Свойства транзакции приведены в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="1c15f-124">The properties of a transaction are summarized in the following table.</span></span>



| <span data-ttu-id="1c15f-125">Термин</span><span class="sxs-lookup"><span data-stu-id="1c15f-125">Term</span></span>                                                                                                         | <span data-ttu-id="1c15f-126">Описание</span><span class="sxs-lookup"><span data-stu-id="1c15f-126">Description</span></span>                                                                                                                       |
|--------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="1c15f-127"><span id="Atomic"></span><span id="atomic"></span><span id="ATOMIC"></span>At</span><span class="sxs-lookup"><span data-stu-id="1c15f-127"><span id="Atomic"></span><span id="atomic"></span><span id="ATOMIC"></span>Atomic</span></span><br/>                 | <span data-ttu-id="1c15f-128">Либо все операции в транзакции выполнены, либо ни одна из операций не сохраняется.</span><span class="sxs-lookup"><span data-stu-id="1c15f-128">Either all of the operations in the transaction succeed or none of the operations persist.</span></span><br/>                             |
| <span data-ttu-id="1c15f-129"><span id="Consistent"></span><span id="consistent"></span><span id="CONSISTENT"></span>Стабильны</span><span class="sxs-lookup"><span data-stu-id="1c15f-129"><span id="Consistent"></span><span id="consistent"></span><span id="CONSISTENT"></span>Consistent</span></span><br/> | <span data-ttu-id="1c15f-130">Если данные согласуются до начала транзакции, они будут согласовываться после завершения транзакции.</span><span class="sxs-lookup"><span data-stu-id="1c15f-130">If the data are consistent before the transaction begins, then they will be consistent after the transaction finishes.</span></span><br/> |
| <span data-ttu-id="1c15f-131"><span id="Isolated_"></span><span id="isolated_"></span><span id="ISOLATED_"></span>Изолирован</span><span class="sxs-lookup"><span data-stu-id="1c15f-131"><span id="Isolated_"></span><span id="isolated_"></span><span id="ISOLATED_"></span>Isolated</span></span> <br/>     | <span data-ttu-id="1c15f-132">Эффекты выполняемой транзакции скрыты от всех остальных транзакций.</span><span class="sxs-lookup"><span data-stu-id="1c15f-132">The effects of a transaction that is in progress are hidden from all other transactions.</span></span><br/>                               |
| <span data-ttu-id="1c15f-133"><span id="Durable"></span><span id="durable"></span><span id="DURABLE"></span>Надежно</span><span class="sxs-lookup"><span data-stu-id="1c15f-133"><span id="Durable"></span><span id="durable"></span><span id="DURABLE"></span>Durable</span></span><br/>             | <span data-ttu-id="1c15f-134">Когда транзакция завершается, ее результаты сохраняются в постоянном виде и остаются в результате сбоя системы.</span><span class="sxs-lookup"><span data-stu-id="1c15f-134">When a transaction finishes, its results are persistent and will survive a system crash.</span></span><br/>                               |



 

<span data-ttu-id="1c15f-135">Эти свойства гарантируют, что программное обеспечение может справляться с непредвиденными ошибками, так как оно может просто прервать транзакцию, когда непредвиденная ситуация предотвращает успешное завершение.</span><span class="sxs-lookup"><span data-stu-id="1c15f-135">These properties ensure that software can handle unexpected errors, because it can simply abort a transaction when an unexpected situation prevents a successful completion.</span></span> <span data-ttu-id="1c15f-136">Инфраструктура транзакций гарантирует откат всех эффектов прерванной транзакции, возвращая данные в целостное состояние.</span><span class="sxs-lookup"><span data-stu-id="1c15f-136">The transaction infrastructure ensures that all the effects of the aborted transaction are rolled back, returning the data to a consistent state.</span></span> <span data-ttu-id="1c15f-137">Таким образом, транзакционная система обеспечивает корректное восстановление после сбоев системы.</span><span class="sxs-lookup"><span data-stu-id="1c15f-137">Therefore, a transactional system enables a graceful recovery from system failures.</span></span>

<span data-ttu-id="1c15f-138">Для обеспечения свойств ACID система, которая поддерживает транзакции, должна иметь надежную возможность ведения журнала, которая может использоваться для фиксации или отката транзакций по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="1c15f-138">To guarantee the ACID properties, a system that supports transactions must have a robust logging capability that can be used to commit or roll back transactions as necessary.</span></span> <span data-ttu-id="1c15f-139">Дополнительные сведения см. в разделе [Файловая система CLFS](/previous-versions/windows/desktop/clfs/common-log-file-system-portal).</span><span class="sxs-lookup"><span data-stu-id="1c15f-139">For more information, see [Common Log File System](/previous-versions/windows/desktop/clfs/common-log-file-system-portal).</span></span>

 

