---
description: В этом разделе обсуждаются сообщения Windows и очереди сообщений.
ms.assetid: 21a4d40b-52da-49e4-a374-afc4927e96e8
title: Сведения о сообщениях и очередях сообщений
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7f0bcf68dbacaae868de3aea1fdc4a5d11290821
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "105664612"
---
# <a name="about-messages-and-message-queues"></a><span data-ttu-id="81342-103">Сведения о сообщениях и очередях сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-103">About Messages and Message Queues</span></span>

<span data-ttu-id="81342-104">В отличие от приложений на основе MS-DOS, приложения на основе Windows являются управляемыми событиями.</span><span class="sxs-lookup"><span data-stu-id="81342-104">Unlike MS-DOS-based applications, Windows-based applications are event-driven.</span></span> <span data-ttu-id="81342-105">Они не выполняют явных вызовов функций (например, вызовов библиотеки времени выполнения C) для получения входных данных.</span><span class="sxs-lookup"><span data-stu-id="81342-105">They do not make explicit function calls (such as C run-time library calls) to obtain input.</span></span> <span data-ttu-id="81342-106">Вместо этого они ожидают передачи входных данных системой.</span><span class="sxs-lookup"><span data-stu-id="81342-106">Instead, they wait for the system to pass input to them.</span></span>

<span data-ttu-id="81342-107">Система передает все входные данные для приложения различным окнам в приложении.</span><span class="sxs-lookup"><span data-stu-id="81342-107">The system passes all input for an application to the various windows in the application.</span></span> <span data-ttu-id="81342-108">Каждое окно имеет функцию, называемую процедурой окна, которую система вызывает всякий раз, когда она имеет входные данные для окна.</span><span class="sxs-lookup"><span data-stu-id="81342-108">Each window has a function, called a window procedure, that the system calls whenever it has input for the window.</span></span> <span data-ttu-id="81342-109">Процедура окна обрабатывает входные данные и возвращает управление системе.</span><span class="sxs-lookup"><span data-stu-id="81342-109">The window procedure processes the input and returns control to the system.</span></span> <span data-ttu-id="81342-110">Дополнительные сведения о процедурах окна см. в разделе [процедуры окна](window-procedures.md).</span><span class="sxs-lookup"><span data-stu-id="81342-110">For more information about window procedures, see [Window Procedures](window-procedures.md).</span></span>

<span data-ttu-id="81342-111">Если окно верхнего уровня перестает отвечать на сообщения более чем через несколько секунд, система считает, что окно не отвечает.</span><span class="sxs-lookup"><span data-stu-id="81342-111">If a top-level window stops responding to messages for more than several seconds, the system considers the window to be not responding.</span></span> <span data-ttu-id="81342-112">В этом случае система скрывает окно и заменяет его окном фантома с тем же Z-порядком, расположением, размером и визуальными атрибутами.</span><span class="sxs-lookup"><span data-stu-id="81342-112">In this case, the system hides the window and replaces it with a ghost window that has the same Z order, location, size, and visual attributes.</span></span> <span data-ttu-id="81342-113">Это позволяет пользователю перемещать его, изменять его размер или даже закрывать приложение.</span><span class="sxs-lookup"><span data-stu-id="81342-113">This allows the user to move it, resize it, or even close the application.</span></span> <span data-ttu-id="81342-114">Однако это единственные доступные действия, так как приложение на самом деле не отвечает.</span><span class="sxs-lookup"><span data-stu-id="81342-114">However, these are the only actions available because the application is actually not responding.</span></span> <span data-ttu-id="81342-115">В режиме отладчика система не создает Несинхронизированное окно.</span><span class="sxs-lookup"><span data-stu-id="81342-115">When in the debugger mode, the system does not generate a ghost window.</span></span>

<span data-ttu-id="81342-116">В этом разделе рассматриваются следующие темы:</span><span class="sxs-lookup"><span data-stu-id="81342-116">This section discusses the following topics:</span></span>

-   [<span data-ttu-id="81342-117">Сообщения Windows</span><span class="sxs-lookup"><span data-stu-id="81342-117">Windows Messages</span></span>](#windows-messages)
-   [<span data-ttu-id="81342-118">Типы сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-118">Message Types</span></span>](#message-types)
    -   [<span data-ttu-id="81342-119">Системные сообщения</span><span class="sxs-lookup"><span data-stu-id="81342-119">System-Defined Messages</span></span>](#system-defined-messages)
    -   [<span data-ttu-id="81342-120">Сообщения, определяемые приложением</span><span class="sxs-lookup"><span data-stu-id="81342-120">Application-Defined Messages</span></span>](#application-defined-messages)
-   [<span data-ttu-id="81342-121">Маршрутизация сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-121">Message Routing</span></span>](#message-routing)
    -   [<span data-ttu-id="81342-122">Сообщения в очереди</span><span class="sxs-lookup"><span data-stu-id="81342-122">Queued Messages</span></span>](#queued-messages)
    -   [<span data-ttu-id="81342-123">Сообщения, не помещенные в очередь</span><span class="sxs-lookup"><span data-stu-id="81342-123">Nonqueued Messages</span></span>](#nonqueued-messages)
-   [<span data-ttu-id="81342-124">Обработка сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-124">Message Handling</span></span>](#message-handling)
    -   [<span data-ttu-id="81342-125">Цикл обработки сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-125">Message Loop</span></span>](#message-loop)
    -   [<span data-ttu-id="81342-126">Процедура окна</span><span class="sxs-lookup"><span data-stu-id="81342-126">Window Procedure</span></span>](#window-procedure)
-   [<span data-ttu-id="81342-127">Фильтрация сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-127">Message Filtering</span></span>](#message-filtering)
-   [<span data-ttu-id="81342-128">Публикация и отправка сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-128">Posting and Sending Messages</span></span>](#posting-and-sending-messages)
    -   [<span data-ttu-id="81342-129">Отправка сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-129">Posting Messages</span></span>](#posting-messages)
    -   [<span data-ttu-id="81342-130">Отправка сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-130">Sending Messages</span></span>](#sending-messages)
-   [<span data-ttu-id="81342-131">Взаимоблокировки сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-131">Message Deadlocks</span></span>](#message-deadlocks)
-   [<span data-ttu-id="81342-132">Широковещательная рассылка сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-132">Broadcasting Messages</span></span>](#broadcasting-messages)
-   [<span data-ttu-id="81342-133">Сообщения запроса</span><span class="sxs-lookup"><span data-stu-id="81342-133">Query Messages</span></span>](#query-messages)

## <a name="windows-messages"></a><span data-ttu-id="81342-134">Сообщения Windows</span><span class="sxs-lookup"><span data-stu-id="81342-134">Windows Messages</span></span>

<span data-ttu-id="81342-135">Система передает входные данные в процедуру окна в виде *сообщения*.</span><span class="sxs-lookup"><span data-stu-id="81342-135">The system passes input to a window procedure in the form of a *message*.</span></span> <span data-ttu-id="81342-136">Сообщения создаются как системой, так и приложениями.</span><span class="sxs-lookup"><span data-stu-id="81342-136">Messages are generated by both the system and applications.</span></span> <span data-ttu-id="81342-137">Система создает сообщение для каждого входного события, например, когда пользователь вводит, перемещает мышь или щелкает элемент управления, например полосу прокрутки.</span><span class="sxs-lookup"><span data-stu-id="81342-137">The system generates a message at each input event—for example, when the user types, moves the mouse, or clicks a control such as a scroll bar.</span></span> <span data-ttu-id="81342-138">Система также создает сообщения в ответ на изменения в системе, внесенные приложением, например, когда приложение изменяет пул ресурсов системных шрифтов или изменяет размер одного из окон.</span><span class="sxs-lookup"><span data-stu-id="81342-138">The system also generates messages in response to changes in the system brought about by an application, such as when an application changes the pool of system font resources or resizes one of its windows.</span></span> <span data-ttu-id="81342-139">Приложение может создавать сообщения, чтобы направлять собственные окна для выполнения задач или взаимодействия с Windows в других приложениях.</span><span class="sxs-lookup"><span data-stu-id="81342-139">An application can generate messages to direct its own windows to perform tasks or to communicate with windows in other applications.</span></span>

<span data-ttu-id="81342-140">Система отправляет сообщение в процедуру окна с набором четырех параметров: маркером окна, идентификатором сообщения и двумя значениями, которые называются *параметрами сообщения*.</span><span class="sxs-lookup"><span data-stu-id="81342-140">The system sends a message to a window procedure with a set of four parameters: a window handle, a message identifier, and two values called *message parameters*.</span></span> <span data-ttu-id="81342-141">*Обработчик окна* определяет окно, для которого предназначено сообщение.</span><span class="sxs-lookup"><span data-stu-id="81342-141">The *window handle* identifies the window for which the message is intended.</span></span> <span data-ttu-id="81342-142">Система использует ее для определения того, какая процедура окна должна получить сообщение.</span><span class="sxs-lookup"><span data-stu-id="81342-142">The system uses it to determine which window procedure should receive the message.</span></span>

<span data-ttu-id="81342-143">*Идентификатор сообщения* — это именованная константа, которая определяет назначение сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-143">A *message identifier* is a named constant that identifies the purpose of a message.</span></span> <span data-ttu-id="81342-144">Когда процедура окна получает сообщение, она использует идентификатор сообщения для определения способа обработки сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-144">When a window procedure receives a message, it uses a message identifier to determine how to process the message.</span></span> <span data-ttu-id="81342-145">Например, идентификатор сообщения [**WM \_ Paint**](/windows/desktop/gdi/wm-paint) сообщает процедуре окна, что клиентская область окна изменилась и должна быть перерисована.</span><span class="sxs-lookup"><span data-stu-id="81342-145">For example, the message identifier [**WM\_PAINT**](/windows/desktop/gdi/wm-paint) tells the window procedure that the window's client area has changed and must be repainted.</span></span>

<span data-ttu-id="81342-146">Параметры сообщения указывают данные или расположение данных, используемых процедурой окна при обработке сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-146">Message parameters specify data or the location of data used by a window procedure when processing a message.</span></span> <span data-ttu-id="81342-147">Значение и значения параметров сообщения зависят от сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-147">The meaning and value of the message parameters depend on the message.</span></span> <span data-ttu-id="81342-148">Параметр сообщения может содержать целочисленный, упакованный битовый флаг, указатель на структуру, содержащую дополнительные данные, и т. д.</span><span class="sxs-lookup"><span data-stu-id="81342-148">A message parameter can contain an integer, packed bit flags, a pointer to a structure containing additional data, and so on.</span></span> <span data-ttu-id="81342-149">Если сообщение не использует параметры сообщения, обычно ему присваивается **значение NULL**.</span><span class="sxs-lookup"><span data-stu-id="81342-149">When a message does not use message parameters, they are typically set to **NULL**.</span></span> <span data-ttu-id="81342-150">Процедура окна должна проверять идентификатор сообщения, чтобы определить способ интерпретации параметров сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-150">A window procedure must check the message identifier to determine how to interpret the message parameters.</span></span>

## <a name="message-types"></a><span data-ttu-id="81342-151">Типы сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-151">Message Types</span></span>

<span data-ttu-id="81342-152">В этом разделе описываются два типа сообщений:</span><span class="sxs-lookup"><span data-stu-id="81342-152">This section describes the two types of messages:</span></span>

-   [<span data-ttu-id="81342-153">Системные сообщения</span><span class="sxs-lookup"><span data-stu-id="81342-153">System-Defined Messages</span></span>](#system-defined-messages)
-   [<span data-ttu-id="81342-154">Сообщения, определяемые приложением</span><span class="sxs-lookup"><span data-stu-id="81342-154">Application-Defined Messages</span></span>](#application-defined-messages)

### <a name="system-defined-messages"></a><span data-ttu-id="81342-155">Сообщения System-Defined</span><span class="sxs-lookup"><span data-stu-id="81342-155">System-Defined Messages</span></span>

<span data-ttu-id="81342-156">Система отправляет или отправляет сообщение, *определяемое системой* , при взаимодействии с приложением.</span><span class="sxs-lookup"><span data-stu-id="81342-156">The system sends or posts a *system-defined message* when it communicates with an application.</span></span> <span data-ttu-id="81342-157">Эти сообщения используются для управления операциями приложений и предоставления входных данных и других сведений для обработки приложениями.</span><span class="sxs-lookup"><span data-stu-id="81342-157">It uses these messages to control the operations of applications and to provide input and other information for applications to process.</span></span> <span data-ttu-id="81342-158">Приложение может также отправлять или публиковать сообщения, определенные системой.</span><span class="sxs-lookup"><span data-stu-id="81342-158">An application can also send or post system-defined messages.</span></span> <span data-ttu-id="81342-159">Приложения обычно используют эти сообщения для управления работой окон управления, созданных с помощью предварительно зарегистрированных оконных классов.</span><span class="sxs-lookup"><span data-stu-id="81342-159">Applications generally use these messages to control the operation of control windows created by using preregistered window classes.</span></span>

<span data-ttu-id="81342-160">Каждое определяемое системой сообщение имеет уникальный идентификатор сообщения и соответствующую символьную константу (определенную в файлах заголовков пакета средств разработки программного обеспечения (SDK)), которая указывает назначение сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-160">Each system-defined message has a unique message identifier and a corresponding symbolic constant (defined in the software development kit (SDK) header files) that states the purpose of the message.</span></span> <span data-ttu-id="81342-161">Например, константа [**WM \_ Paint**](/windows/desktop/gdi/wm-paint) запрашивает, что окно зарисовывает свое содержимое.</span><span class="sxs-lookup"><span data-stu-id="81342-161">For example, the [**WM\_PAINT**](/windows/desktop/gdi/wm-paint) constant requests that a window paint its contents.</span></span>

<span data-ttu-id="81342-162">Символьные константы укажите категорию, которой принадлежат системные сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-162">Symbolic constants specify the category to which system-defined messages belong.</span></span> <span data-ttu-id="81342-163">Префикс константы определяет тип окна, которое может интерпретировать и обрабатывать сообщение.</span><span class="sxs-lookup"><span data-stu-id="81342-163">The prefix of the constant identifies the type of window that can interpret and process the message.</span></span> <span data-ttu-id="81342-164">Ниже приведены префиксы и связанные с ними категории сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-164">Following are the prefixes and their related message categories.</span></span>



| <span data-ttu-id="81342-165">Prefix</span><span class="sxs-lookup"><span data-stu-id="81342-165">Prefix</span></span>                               | <span data-ttu-id="81342-166">Категория сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-166">Message category</span></span>             | <span data-ttu-id="81342-167">Документация</span><span class="sxs-lookup"><span data-stu-id="81342-167">Documentation</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|--------------------------------------|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="81342-168">**АБМ** и **АБН**</span><span class="sxs-lookup"><span data-stu-id="81342-168">**ABM** and **ABN**</span></span>                  | <span data-ttu-id="81342-169">Панель инструментов рабочего стола приложения</span><span class="sxs-lookup"><span data-stu-id="81342-169">Application desktop toolbar</span></span>  | [<span data-ttu-id="81342-170">Сообщения и уведомления оболочки</span><span class="sxs-lookup"><span data-stu-id="81342-170">Shell Messages and Notifications</span></span>](/windows/desktop/shell/control-panel-applications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="81342-171">**ACM** и **АКН**</span><span class="sxs-lookup"><span data-stu-id="81342-171">**ACM** and **ACN**</span></span>                  | <span data-ttu-id="81342-172">Элемент управления "Анимация"</span><span class="sxs-lookup"><span data-stu-id="81342-172">Animation control</span></span>            | <span data-ttu-id="81342-173">[Управляющие сообщения](/windows/desktop/Controls/bumper-animation-control-reference-messages) и [уведомления элемента управления анимацией](/windows/desktop/Controls/bumper-animation-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-173">[Animation Control Messages](/windows/desktop/Controls/bumper-animation-control-reference-messages) and [Animation Control Notifications](/windows/desktop/Controls/bumper-animation-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="81342-174">**BCM**, **BCN**, **BM** и **млрд долл**</span><span class="sxs-lookup"><span data-stu-id="81342-174">**BCM**, **BCN**, **BM**, and **BN**</span></span> | <span data-ttu-id="81342-175">Button - элемент управления</span><span class="sxs-lookup"><span data-stu-id="81342-175">Button control</span></span>               | <span data-ttu-id="81342-176">[Сообщения управления кнопками](/windows/desktop/Controls/bumper-button-control-reference-messages) и [уведомления об управлении кнопками](/windows/desktop/Controls/bumper-button-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-176">[Button Control Messages](/windows/desktop/Controls/bumper-button-control-reference-messages) and [Button Control Notifications](/windows/desktop/Controls/bumper-button-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="81342-177">**CB** и **КБН**</span><span class="sxs-lookup"><span data-stu-id="81342-177">**CB** and **CBN**</span></span>                   | <span data-ttu-id="81342-178">ComboBox - элемент управления</span><span class="sxs-lookup"><span data-stu-id="81342-178">ComboBox control</span></span>             | <span data-ttu-id="81342-179">[Сообщения элемента управления ComboBox](/windows/desktop/Controls/bumper-combobox-control-reference-messages) и [уведомления элемента управления ComboBox](/windows/desktop/Controls/bumper-combobox-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-179">[ComboBox Control Messages](/windows/desktop/Controls/bumper-combobox-control-reference-messages) and [ComboBox Control Notifications](/windows/desktop/Controls/bumper-combobox-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="81342-180">**Кбем** и **кбен**</span><span class="sxs-lookup"><span data-stu-id="81342-180">**CBEM** and **CBEN**</span></span>                | <span data-ttu-id="81342-181">Элемент управления ComboBoxEx</span><span class="sxs-lookup"><span data-stu-id="81342-181">ComboBoxEx control</span></span>           | <span data-ttu-id="81342-182">[ComboBoxEx сообщения](/windows/desktop/Controls/bumper-comboboxex-control-reference-messages) и [ComboBoxEx уведомления](/windows/desktop/Controls/bumper-comboboxex-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-182">[ComboBoxEx Messages](/windows/desktop/Controls/bumper-comboboxex-control-reference-messages) and [ComboBoxEx Notifications](/windows/desktop/Controls/bumper-comboboxex-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="81342-183">**CCM**</span><span class="sxs-lookup"><span data-stu-id="81342-183">**CCM**</span></span>                              | <span data-ttu-id="81342-184">Общий элемент управления</span><span class="sxs-lookup"><span data-stu-id="81342-184">General control</span></span>              | [<span data-ttu-id="81342-185">Управляющие сообщения</span><span class="sxs-lookup"><span data-stu-id="81342-185">Control Messages</span></span>](/windows/desktop/Controls/bumper-general-control-reference-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="81342-186">**CDM**</span><span class="sxs-lookup"><span data-stu-id="81342-186">**CDM**</span></span>                              | <span data-ttu-id="81342-187">Общее диалоговое окно</span><span class="sxs-lookup"><span data-stu-id="81342-187">Common dialog box</span></span>            | [<span data-ttu-id="81342-188">Сообщения общего диалогового окна</span><span class="sxs-lookup"><span data-stu-id="81342-188">Common Dialog Box Messages</span></span>](/windows/desktop/dlgbox/common-dialog-box-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="81342-189">**DFM**</span><span class="sxs-lookup"><span data-stu-id="81342-189">**DFM**</span></span>                              | <span data-ttu-id="81342-190">Контекстное меню по умолчанию</span><span class="sxs-lookup"><span data-stu-id="81342-190">Default context menu</span></span>         | [<span data-ttu-id="81342-191">Сообщения и уведомления оболочки</span><span class="sxs-lookup"><span data-stu-id="81342-191">Shell Messages and Notifications</span></span>](/windows/desktop/shell/control-panel-applications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="81342-192">**DL**</span><span class="sxs-lookup"><span data-stu-id="81342-192">**DL**</span></span>                               | <span data-ttu-id="81342-193">Перетащить поле списка</span><span class="sxs-lookup"><span data-stu-id="81342-193">Drag list box</span></span>                | <span data-ttu-id="81342-194">[Перетаскивать уведомления из списка](/previous-versions//ff485914(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="81342-194">[Drag List Box Notifications](/previous-versions//ff485914(v=vs.85))</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="81342-195">**DM**</span><span class="sxs-lookup"><span data-stu-id="81342-195">**DM**</span></span>                               | <span data-ttu-id="81342-196">Элемент управления "Кнопка" по умолчанию</span><span class="sxs-lookup"><span data-stu-id="81342-196">Default push button control</span></span>  | [<span data-ttu-id="81342-197">Сообщения диалогового окна</span><span class="sxs-lookup"><span data-stu-id="81342-197">Dialog Box Messages</span></span>](/windows/desktop/dlgbox/dialog-box-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="81342-198">**DTM** и **ДТН**</span><span class="sxs-lookup"><span data-stu-id="81342-198">**DTM** and **DTN**</span></span>                  | <span data-ttu-id="81342-199">Элемент выбора даты и времени</span><span class="sxs-lookup"><span data-stu-id="81342-199">Date and time picker control</span></span> | <span data-ttu-id="81342-200">[Сообщения выбора даты и времени](/windows/desktop/Controls/bumper-date-and-time-picker-control-reference-messages) и [уведомления средства выбора даты и времени](/windows/desktop/Controls/bumper-date-and-time-picker-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-200">[Date and Time Picker Messages](/windows/desktop/Controls/bumper-date-and-time-picker-control-reference-messages) and [Date and Time Picker Notifications](/windows/desktop/Controls/bumper-date-and-time-picker-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="81342-201">**EM** и **EN**</span><span class="sxs-lookup"><span data-stu-id="81342-201">**EM** and **EN**</span></span>                    | <span data-ttu-id="81342-202">Элемент управления "Поле ввода"</span><span class="sxs-lookup"><span data-stu-id="81342-202">Edit control</span></span>                 | <span data-ttu-id="81342-203">[Изменение управляющих сообщений](/windows/desktop/Controls/bumper-edit-control-reference-messages), [уведомлений об изменении элементов управления](/windows/desktop/Controls/bumper-edit-control-reference-notifications), [сообщений с богатыми возможностями редактирования](/windows/desktop/Controls/bumper-rich-edit-control-reference-messages)и [уведомлений с расширенными возможностями редактирования](/windows/desktop/Controls/bumper-rich-edit-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-203">[Edit Control Messages](/windows/desktop/Controls/bumper-edit-control-reference-messages), [Edit Control Notifications](/windows/desktop/Controls/bumper-edit-control-reference-notifications), [Rich Edit Messages](/windows/desktop/Controls/bumper-rich-edit-control-reference-messages), and [Rich Edit Notifications](/windows/desktop/Controls/bumper-rich-edit-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="81342-204">**HDM** и **ХДН**</span><span class="sxs-lookup"><span data-stu-id="81342-204">**HDM** and **HDN**</span></span>                  | <span data-ttu-id="81342-205">Элемент управления "заголовок"</span><span class="sxs-lookup"><span data-stu-id="81342-205">Header control</span></span>               | <span data-ttu-id="81342-206">[Сообщения элемента управления заголовков](/windows/desktop/Controls/bumper-header-control-reference-messages) и [уведомления элемента управления заголовка](/windows/desktop/Controls/bumper-header-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-206">[Header Control Messages](/windows/desktop/Controls/bumper-header-control-reference-messages) and [Header Control Notifications](/windows/desktop/Controls/bumper-header-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="81342-207">**хкм**</span><span class="sxs-lookup"><span data-stu-id="81342-207">**HKM**</span></span>                              | <span data-ttu-id="81342-208">Элемент управления горячими ключами</span><span class="sxs-lookup"><span data-stu-id="81342-208">Hot key control</span></span>              | [<span data-ttu-id="81342-209">Управляющие сообщения горячих ключей</span><span class="sxs-lookup"><span data-stu-id="81342-209">Hot Key Control Messages</span></span>](/windows/desktop/Controls/bumper-hot-key-control-reference-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="81342-210">**IPM** и **ИПН**</span><span class="sxs-lookup"><span data-stu-id="81342-210">**IPM** and **IPN**</span></span>                  | <span data-ttu-id="81342-211">контроль IP-адресов</span><span class="sxs-lookup"><span data-stu-id="81342-211">IP address control</span></span>           | <span data-ttu-id="81342-212">[Сообщения IP-адреса](/windows/desktop/Controls/bumper-ip-address-control-reference-messages) и [уведомления об IP-адресах](/windows/desktop/Controls/bumper-ip-address-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-212">[IP Address Messages](/windows/desktop/Controls/bumper-ip-address-control-reference-messages) and [IP Address Notifications](/windows/desktop/Controls/bumper-ip-address-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="81342-213">**Балансировка нагрузки** и **ЛБН**</span><span class="sxs-lookup"><span data-stu-id="81342-213">**LB** and **LBN**</span></span>                   | <span data-ttu-id="81342-214">Элемент управления "Список"</span><span class="sxs-lookup"><span data-stu-id="81342-214">List box control</span></span>             | <span data-ttu-id="81342-215">[Сообщения списка](/windows/desktop/Controls/bumper-list-box-control-reference-messages) и уведомления в виде [списка](/windows/desktop/Controls/bumper-list-box-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-215">[List Box Messages](/windows/desktop/Controls/bumper-list-box-control-reference-messages) and [List Box Notifications](/windows/desktop/Controls/bumper-list-box-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="81342-216">**ХЕШ**</span><span class="sxs-lookup"><span data-stu-id="81342-216">**LM**</span></span>                               | <span data-ttu-id="81342-217">Элемент управления SysLink</span><span class="sxs-lookup"><span data-stu-id="81342-217">SysLink control</span></span>              | [<span data-ttu-id="81342-218">Управляющие сообщения SysLink</span><span class="sxs-lookup"><span data-stu-id="81342-218">SysLink Control Messages</span></span>](/windows/desktop/Controls/bumper-syslink-control-reference-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="81342-219">**LVM** и **ЛВН**</span><span class="sxs-lookup"><span data-stu-id="81342-219">**LVM** and **LVN**</span></span>                  | <span data-ttu-id="81342-220">Элемент управления представления списка</span><span class="sxs-lookup"><span data-stu-id="81342-220">List view control</span></span>            | <span data-ttu-id="81342-221">[Просмотр сообщений](/windows/desktop/Controls/bumper-list-view-control-reference-messages) и [уведомлений в виде списка](/windows/desktop/Controls/bumper-list-view-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-221">[List View Messages](/windows/desktop/Controls/bumper-list-view-control-reference-messages) and [List View Notifications](/windows/desktop/Controls/bumper-list-view-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="81342-222">**MCM** и **МКН**</span><span class="sxs-lookup"><span data-stu-id="81342-222">**MCM** and **MCN**</span></span>                  | <span data-ttu-id="81342-223">Элемент управления "Календарь на месяц"</span><span class="sxs-lookup"><span data-stu-id="81342-223">Month calendar control</span></span>       | <span data-ttu-id="81342-224">[Месячные сообщения календаря](/windows/desktop/Controls/bumper-month-calendar-control-reference-messages) и [уведомления календаря месяца](/windows/desktop/Controls/bumper-month-calendar-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-224">[Month Calendar Messages](/windows/desktop/Controls/bumper-month-calendar-control-reference-messages) and [Month Calendar Notifications](/windows/desktop/Controls/bumper-month-calendar-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="81342-225">**Управление на основе политик (PBM)**</span><span class="sxs-lookup"><span data-stu-id="81342-225">**PBM**</span></span>                              | <span data-ttu-id="81342-226">Индикатор выполнения</span><span class="sxs-lookup"><span data-stu-id="81342-226">Progress bar</span></span>                 | [<span data-ttu-id="81342-227">Сообщения на индикаторе выполнения</span><span class="sxs-lookup"><span data-stu-id="81342-227">Progress Bar Messages</span></span>](/windows/desktop/Controls/bumper-progress-bar-control-reference-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="81342-228">**PGM** и **ПГН**</span><span class="sxs-lookup"><span data-stu-id="81342-228">**PGM** and **PGN**</span></span>                  | <span data-ttu-id="81342-229">Элемент управления страничного навигатора</span><span class="sxs-lookup"><span data-stu-id="81342-229">Pager control</span></span>                | <span data-ttu-id="81342-230">[Сообщения управления страничного навигатора](/windows/desktop/Controls/bumper-pager-control-reference-messages) и [уведомления элемента управления страничного навигатора](/windows/desktop/Controls/bumper-pager-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-230">[Pager Control Messages](/windows/desktop/Controls/bumper-pager-control-reference-messages) and [Pager Control Notifications](/windows/desktop/Controls/bumper-pager-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="81342-231">**ПСМ** и **PSN**</span><span class="sxs-lookup"><span data-stu-id="81342-231">**PSM** and **PSN**</span></span>                  | <span data-ttu-id="81342-232">Страница свойств.</span><span class="sxs-lookup"><span data-stu-id="81342-232">Property sheet</span></span>               | <span data-ttu-id="81342-233">[Сообщения на странице свойств](/windows/desktop/Controls/bumper-property-sheets-reference-messages) и [уведомления на странице свойств](/windows/desktop/Controls/bumper-property-sheets-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-233">[Property Sheet Messages](/windows/desktop/Controls/bumper-property-sheets-reference-messages) and [Property Sheet Notifications](/windows/desktop/Controls/bumper-property-sheets-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="81342-234">**RB** и **РБН**</span><span class="sxs-lookup"><span data-stu-id="81342-234">**RB** and **RBN**</span></span>                   | <span data-ttu-id="81342-235">Элемент управления главной панели</span><span class="sxs-lookup"><span data-stu-id="81342-235">Rebar control</span></span>                | <span data-ttu-id="81342-236">[Управляющие сообщения главной панели](/windows/desktop/Controls/bumper-rebar-control-reference-messages) и [уведомления элемента управления главной панели](/windows/desktop/Controls/bumper-rebar-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-236">[Rebar Control Messages](/windows/desktop/Controls/bumper-rebar-control-reference-messages) and [Rebar Control Notifications](/windows/desktop/Controls/bumper-rebar-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="81342-237">**SB** и **СБН**</span><span class="sxs-lookup"><span data-stu-id="81342-237">**SB** and **SBN**</span></span>                   | <span data-ttu-id="81342-238">Окно строки состояния</span><span class="sxs-lookup"><span data-stu-id="81342-238">Status bar window</span></span>            | <span data-ttu-id="81342-239">[Сообщения в строке состояния](/windows/desktop/Controls/bumper-status-bars-reference-messages) и [уведомления в строке состояния](/windows/desktop/Controls/bumper-status-bars-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-239">[Status Bar Messages](/windows/desktop/Controls/bumper-status-bars-reference-messages) and [Status Bar Notifications](/windows/desktop/Controls/bumper-status-bars-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="81342-240">**сбм**</span><span class="sxs-lookup"><span data-stu-id="81342-240">**SBM**</span></span>                              | <span data-ttu-id="81342-241">Элемент управления "Полоса прокрутки"</span><span class="sxs-lookup"><span data-stu-id="81342-241">Scroll bar control</span></span>           | [<span data-ttu-id="81342-242">Прокрутка сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-242">Scroll Bar Messages</span></span>](/windows/desktop/Controls/bumper-scroll-bars-reference-messages)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="81342-243">**АДАПТЕР**</span><span class="sxs-lookup"><span data-stu-id="81342-243">**SMC**</span></span>                              | <span data-ttu-id="81342-244">Меню оболочки</span><span class="sxs-lookup"><span data-stu-id="81342-244">Shell menu</span></span>                   | [<span data-ttu-id="81342-245">Сообщения и уведомления оболочки</span><span class="sxs-lookup"><span data-stu-id="81342-245">Shell Messages and Notifications</span></span>](/windows/desktop/shell/control-panel-applications)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="81342-246">**STM** и **СТН**</span><span class="sxs-lookup"><span data-stu-id="81342-246">**STM** and **STN**</span></span>                  | <span data-ttu-id="81342-247">Статический элемент управления</span><span class="sxs-lookup"><span data-stu-id="81342-247">Static control</span></span>               | <span data-ttu-id="81342-248">[Статические управляющие сообщения](/windows/desktop/Controls/bumper-static-control-reference-messages) и [уведомления статического элемента управления](/windows/desktop/Controls/bumper-static-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-248">[Static Control Messages](/windows/desktop/Controls/bumper-static-control-reference-messages) and [Static Control Notifications](/windows/desktop/Controls/bumper-static-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="81342-249">**ТБ** и **ТБН**</span><span class="sxs-lookup"><span data-stu-id="81342-249">**TB** and **TBN**</span></span>                   | <span data-ttu-id="81342-250">Панель инструментов</span><span class="sxs-lookup"><span data-stu-id="81342-250">Toolbar</span></span>                      | <span data-ttu-id="81342-251">[Сообщения элемента управления панели инструментов](/windows/desktop/Controls/bumper-toolbar-control-reference-messages) и [уведомления элемента управления панели инструментов](/windows/desktop/Controls/bumper-toolbar-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-251">[Toolbar Control Messages](/windows/desktop/Controls/bumper-toolbar-control-reference-messages) and [Toolbar Control Notifications](/windows/desktop/Controls/bumper-toolbar-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="81342-252">**ТБМ** и **трбн**</span><span class="sxs-lookup"><span data-stu-id="81342-252">**TBM** and **TRBN**</span></span>                 | <span data-ttu-id="81342-253">Элемент управления TrackBar</span><span class="sxs-lookup"><span data-stu-id="81342-253">Trackbar control</span></span>             | <span data-ttu-id="81342-254">[Контрольные сообщения](/windows/desktop/Controls/bumper-trackbar-control-reference-messages) и [уведомления](/windows/desktop/Controls/bumper-trackbar-control-reference-notifications) элемента управления TrackBar</span><span class="sxs-lookup"><span data-stu-id="81342-254">[Trackbar Control Messages](/windows/desktop/Controls/bumper-trackbar-control-reference-messages) and [Trackbar Control Notifications](/windows/desktop/Controls/bumper-trackbar-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="81342-255">**TCM** и **ТКН**</span><span class="sxs-lookup"><span data-stu-id="81342-255">**TCM** and **TCN**</span></span>                  | <span data-ttu-id="81342-256">Элемент управления табуляции</span><span class="sxs-lookup"><span data-stu-id="81342-256">Tab control</span></span>                  | <span data-ttu-id="81342-257">[Управляющие сообщения вкладки](/windows/desktop/Controls/bumper-tab-control-reference-messages) и [уведомления элемента управления Tab](/windows/desktop/Controls/bumper-tab-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-257">[Tab Control Messages](/windows/desktop/Controls/bumper-tab-control-reference-messages) and [Tab Control Notifications](/windows/desktop/Controls/bumper-tab-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="81342-258">**TDM** и **ТДН**</span><span class="sxs-lookup"><span data-stu-id="81342-258">**TDM** and **TDN**</span></span>                  | <span data-ttu-id="81342-259">Диалоговое окно задачи</span><span class="sxs-lookup"><span data-stu-id="81342-259">Task dialog</span></span>                  | <span data-ttu-id="81342-260">[Сообщения диалогового окна задачи](/windows/desktop/Controls/bumper-task-dialogs-reference-messages) и [Уведомления диалогового окна задачи](/windows/desktop/Controls/bumper-task-dialogs-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-260">[Task Dialog Messages](/windows/desktop/Controls/bumper-task-dialogs-reference-messages) and [Task Dialog Notifications](/windows/desktop/Controls/bumper-task-dialogs-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="81342-261">**ТТМ** и **ТТН**</span><span class="sxs-lookup"><span data-stu-id="81342-261">**TTM** and **TTN**</span></span>                  | <span data-ttu-id="81342-262">Элемент управления ToolTip</span><span class="sxs-lookup"><span data-stu-id="81342-262">Tooltip control</span></span>              | <span data-ttu-id="81342-263">Уведомления [управляющих сообщений](/windows/desktop/Controls/bumper-tooltip-control-reference-messages) и [всплывающих](/windows/desktop/Controls/bumper-tooltip-control-reference-notifications) подсказок</span><span class="sxs-lookup"><span data-stu-id="81342-263">[Tooltip Control Messages](/windows/desktop/Controls/bumper-tooltip-control-reference-messages) and [Tooltip Control Notifications](/windows/desktop/Controls/bumper-tooltip-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="81342-264">**TVM** и **ТВН**</span><span class="sxs-lookup"><span data-stu-id="81342-264">**TVM** and **TVN**</span></span>                  | <span data-ttu-id="81342-265">Элемент управления представления в виде дерева</span><span class="sxs-lookup"><span data-stu-id="81342-265">Tree-view control</span></span>            | <span data-ttu-id="81342-266">[Сообщения в представлении в виде дерева](/windows/desktop/Controls/bumper-tree-view-control-reference-messages) и уведомления в виде [дерева](/windows/desktop/Controls/bumper-tree-view-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-266">[Tree View Messages](/windows/desktop/Controls/bumper-tree-view-control-reference-messages) and [Tree View Notifications](/windows/desktop/Controls/bumper-tree-view-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="81342-267">**UDM** и **УДН**</span><span class="sxs-lookup"><span data-stu-id="81342-267">**UDM** and **UDN**</span></span>                  | <span data-ttu-id="81342-268">Элемент управления "вверх/вниз"</span><span class="sxs-lookup"><span data-stu-id="81342-268">Up-down control</span></span>              | <span data-ttu-id="81342-269">[Сообщения](/windows/desktop/Controls/bumper-up-down-control-reference-messages) со стрелками вверх [и вниз](/windows/desktop/Controls/bumper-up-down-control-reference-notifications)</span><span class="sxs-lookup"><span data-stu-id="81342-269">[Up-Down Messages](/windows/desktop/Controls/bumper-up-down-control-reference-messages) and [Up-Down Notifications](/windows/desktop/Controls/bumper-up-down-control-reference-notifications)</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="81342-270">**WM**</span><span class="sxs-lookup"><span data-stu-id="81342-270">**WM**</span></span>                               | <span data-ttu-id="81342-271">Общие сведения</span><span class="sxs-lookup"><span data-stu-id="81342-271">General</span></span>                      | <dl> <span data-ttu-id="81342-272"><dt>[Сообщения](/windows/desktop/dataxchg/clipboard-messages)</dt> в буфере <dt>[обмена уведомления об](/windows/desktop/dataxchg/clipboard-notifications)</dt> <dt>[общих диалоговых окнах](/windows/desktop/dlgbox/common-dialog-box-notifications)</dt> уведомления <dt>[курсора](/windows/desktop/menurc/cursor-notifications)</dt> <dt>[Копировать сообщение](/windows/desktop/dataxchg/wm-copydata)</dt> <dt>[Диспетчер окон рабочего стола сообщения](/windows/desktop/dwm/dwm-messages)</dt> об <dt>[](/windows/desktop/Controls/bumper-scroll-bars-reference-notifications)</dt> <dt>[](timer-notifications.md)</dt> <dt>[](window-messages.md)</dt> <dt>[](window-notifications.md)</dt> <dt>[управлении устройствами](/windows/desktop/DevIO/device-management-messages)</dt> уведомления <dt>[Платформа динамических данных сообщения Exchange](/windows/desktop/dataxchg/dynamic-data-exchange-messages)</dt> <dt>[Платформа динамических данных](/windows/desktop/dataxchg/dynamic-data-exchange-notifications)</dt> уведомления <dt>[](multiple-document-interface-messages.md)</dt> <dt>[](/windows/desktop/inputdev/raw-input-notifications)</dt> <dt>[обработчика](hook-notifications.md)</dt> уведомлений <dt>[о](/windows/desktop/menurc/keyboard-accelerator-messages)</dt> сообщениях в <dt>[диалоговом окне](/windows/desktop/dlgbox/dialog-box-notifications)</dt> <dt>[сообщения об](/windows/desktop/menurc/menu-notifications)</dt> ошибках <dt>[с помощью](/windows/desktop/inputdev/keyboard-input-notifications)</dt> <dt>[клавиатуры уведомления о](/windows/desktop/menurc/keyboard-accelerator-notifications)</dt> <dt>[вводе](/windows/desktop/inputdev/mouse-input-notifications)</dt> <dt>[. сообщения](/windows/desktop/inputdev/keyboard-input-messages)</dt></span><span class="sxs-lookup"><span data-stu-id="81342-272"><dt>[Clipboard Messages](/windows/desktop/dataxchg/clipboard-messages)</dt> <dt>[Clipboard Notifications](/windows/desktop/dataxchg/clipboard-notifications)</dt> <dt>[Common Dialog Box Notifications](/windows/desktop/dlgbox/common-dialog-box-notifications)</dt> <dt>[Cursor Notifications](/windows/desktop/menurc/cursor-notifications)</dt> <dt>[Data Copy Message](/windows/desktop/dataxchg/wm-copydata)</dt> <dt>[Desktop Window Manager Messages](/windows/desktop/dwm/dwm-messages)</dt> <dt>[Device Management Messages](/windows/desktop/DevIO/device-management-messages)</dt> <dt>[Dialog Box Notifications](/windows/desktop/dlgbox/dialog-box-notifications)</dt> <dt>[Dynamic Data Exchange Messages](/windows/desktop/dataxchg/dynamic-data-exchange-messages)</dt> <dt>[Dynamic Data Exchange Notifications](/windows/desktop/dataxchg/dynamic-data-exchange-notifications)</dt> <dt>[Hook Notifications](hook-notifications.md)</dt> <dt>[Keyboard Accelerator Messages](/windows/desktop/menurc/keyboard-accelerator-messages)</dt> <dt>[Keyboard Accelerator Notifications](/windows/desktop/menurc/keyboard-accelerator-notifications)</dt> <dt>[Keyboard Input Messages](/windows/desktop/inputdev/keyboard-input-messages)</dt> <dt>[Keyboard Input Notifications](/windows/desktop/inputdev/keyboard-input-notifications)</dt> <dt>[Menu Notifications](/windows/desktop/menurc/menu-notifications)</dt> <dt>[Mouse Input Notifications](/windows/desktop/inputdev/mouse-input-notifications)</dt> <dt>[Multiple Document Interface Messages](multiple-document-interface-messages.md)</dt> <dt>[Raw Input Notifications](/windows/desktop/inputdev/raw-input-notifications)</dt> <dt>[Scroll Bar Notifications](/windows/desktop/Controls/bumper-scroll-bars-reference-notifications)</dt> <dt>[Timer Notifications](timer-notifications.md)</dt> <dt>[Window Messages](window-messages.md)</dt> <dt>[Window Notifications](window-notifications.md)</dt></span></span> </dl> |



 

<span data-ttu-id="81342-273">Общие сообщения окна охватывают широкий спектр информации и запросов, в том числе сообщения для ввода с клавиатуры, входа в меню и диалоговых окон, создания окон и управления ими, а также платформа динамических данных Exchange (DDE).</span><span class="sxs-lookup"><span data-stu-id="81342-273">General window messages cover a wide range of information and requests, including messages for mouse and keyboard input, menu and dialog box input, window creation and management, and Dynamic Data Exchange (DDE).</span></span>

### <a name="application-defined-messages"></a><span data-ttu-id="81342-274">Сообщения Application-Defined</span><span class="sxs-lookup"><span data-stu-id="81342-274">Application-Defined Messages</span></span>

<span data-ttu-id="81342-275">Приложение может создавать сообщения для использования в собственных окнах или для взаимодействия с Windows в других процессах.</span><span class="sxs-lookup"><span data-stu-id="81342-275">An application can create messages to be used by its own windows or to communicate with windows in other processes.</span></span> <span data-ttu-id="81342-276">Если приложение создает собственные сообщения, процедура окна, принимающая их, должна интерпретировать сообщения и обеспечить соответствующую обработку.</span><span class="sxs-lookup"><span data-stu-id="81342-276">If an application creates its own messages, the window procedure that receives them must interpret the messages and provide appropriate processing.</span></span>

<span data-ttu-id="81342-277">Значения идентификаторов сообщений используются следующим образом.</span><span class="sxs-lookup"><span data-stu-id="81342-277">Message-identifier values are used as follows:</span></span>

-   <span data-ttu-id="81342-278">Система резервирует значения идентификаторов сообщений в диапазоне от Символ 0x0000 до 0x03FF (значение [**WM \_ User**](wm-user.md)  – 1) для системных сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-278">The system reserves message-identifier values in the range 0x0000 through 0x03FF (the value of [**WM\_USER**](wm-user.md)  – 1) for system-defined messages.</span></span> <span data-ttu-id="81342-279">Приложения не могут использовать эти значения для частных сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-279">Applications cannot use these values for private messages.</span></span>
-   <span data-ttu-id="81342-280">Значения в диапазоне 0x0400 (значение [**\_ пользователя WM**](wm-user.md)) через 0x7FFF доступны для идентификаторов сообщений для классов частных окон.</span><span class="sxs-lookup"><span data-stu-id="81342-280">Values in the range 0x0400 (the value of [**WM\_USER**](wm-user.md)) through 0x7FFF are available for message identifiers for private window classes.</span></span>
-   <span data-ttu-id="81342-281">Если приложение помечено как версия 4,0, можно использовать значения идентификаторов сообщений в диапазоне от 0x8000 ([**\_ приложение WM**](wm-app.md)) до 0xBFFF для частных сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-281">If your application is marked version 4.0, you can use message-identifier values in the range 0x8000 ([**WM\_APP**](wm-app.md)) through 0xBFFF for private messages.</span></span>
-   <span data-ttu-id="81342-282">Система возвращает идентификатор сообщения в диапазоне от 0xC000 до 0xFFFF, когда приложение вызывает функцию [**регистервиндовмессаже**](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea) для регистрации сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-282">The system returns a message identifier in the range 0xC000 through 0xFFFF when an application calls the [**RegisterWindowMessage**](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea) function to register a message.</span></span> <span data-ttu-id="81342-283">Идентификатор сообщения, возвращаемый этой функцией, гарантированно уникален в пределах всей системы.</span><span class="sxs-lookup"><span data-stu-id="81342-283">The message identifier returned by this function is guaranteed to be unique throughout the system.</span></span> <span data-ttu-id="81342-284">Использование этой функции предотвращает конфликты, которые могут возникать, если другие приложения используют один и тот же идентификатор сообщения для разных целей.</span><span class="sxs-lookup"><span data-stu-id="81342-284">Use of this function prevents conflicts that can arise if other applications use the same message identifier for different purposes.</span></span>

## <a name="message-routing"></a><span data-ttu-id="81342-285">Маршрутизация сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-285">Message Routing</span></span>

<span data-ttu-id="81342-286">Система использует два метода для маршрутизации сообщений в оконную процедуру: отправка сообщений в очередь *сообщений*"первым помещается", системный объект памяти, который временно хранит сообщения и отправляет сообщения непосредственно в процедуру окна.</span><span class="sxs-lookup"><span data-stu-id="81342-286">The system uses two methods to route messages to a window procedure: posting messages to a first-in, first-out queue called a *message queue*, a system-defined memory object that temporarily stores messages, and sending messages directly to a window procedure.</span></span>

<span data-ttu-id="81342-287">Сообщения, отправляемые в очередь сообщений, называются *сообщениями в очереди*.</span><span class="sxs-lookup"><span data-stu-id="81342-287">A messages that is posted to a message queue is called a *queued message*.</span></span> <span data-ttu-id="81342-288">В первую очередь это результат ввода данных пользователем, введенный с помощью мыши или клавиатуры, [**например \_ WM MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove), [**WM \_ Лбуттондовн**](/windows/desktop/inputdev/wm-lbuttondown), [**WM \_ KeyDown**](/windows/desktop/inputdev/wm-keydown)и [**WM \_ char**](/windows/desktop/inputdev/wm-char) .</span><span class="sxs-lookup"><span data-stu-id="81342-288">These are primarily the result of user input entered through the mouse or keyboard, such as [**WM\_MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove), [**WM\_LBUTTONDOWN**](/windows/desktop/inputdev/wm-lbuttondown), [**WM\_KEYDOWN**](/windows/desktop/inputdev/wm-keydown), and [**WM\_CHAR**](/windows/desktop/inputdev/wm-char) messages.</span></span> <span data-ttu-id="81342-289">Другие сообщения в очереди включают в себя таймер, Paint и сообщение о выходе [**: \_ таймер WM**](wm-timer.md), [**WM \_ Paint**](/windows/desktop/gdi/wm-paint)и [**WM \_ Quit**](wm-quit.md).</span><span class="sxs-lookup"><span data-stu-id="81342-289">Other queued messages include the timer, paint, and quit messages: [**WM\_TIMER**](wm-timer.md), [**WM\_PAINT**](/windows/desktop/gdi/wm-paint), and [**WM\_QUIT**](wm-quit.md).</span></span> <span data-ttu-id="81342-290">Большинство других сообщений, которые отправляются непосредственно в процедуру окна, называются *сообщениями, не помещенными в очередь*.</span><span class="sxs-lookup"><span data-stu-id="81342-290">Most other messages, which are sent directly to a window procedure, are called *nonqueued messages*.</span></span>

-   [<span data-ttu-id="81342-291">Сообщения в очереди</span><span class="sxs-lookup"><span data-stu-id="81342-291">Queued Messages</span></span>](#queued-messages)
-   [<span data-ttu-id="81342-292">Сообщения, не помещенные в очередь</span><span class="sxs-lookup"><span data-stu-id="81342-292">Nonqueued Messages</span></span>](#nonqueued-messages)

### <a name="queued-messages"></a><span data-ttu-id="81342-293">Сообщения в очереди</span><span class="sxs-lookup"><span data-stu-id="81342-293">Queued Messages</span></span>

<span data-ttu-id="81342-294">Система может отображать любое количество окон за раз.</span><span class="sxs-lookup"><span data-stu-id="81342-294">The system can display any number of windows at a time.</span></span> <span data-ttu-id="81342-295">Чтобы направить ввод с клавиатуры и мыши в соответствующее окно, система использует очереди сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-295">To route mouse and keyboard input to the appropriate window, the system uses message queues.</span></span>

<span data-ttu-id="81342-296">Система поддерживает одну очередь системных сообщений и одну очередь сообщений конкретного потока для каждого потока графического пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="81342-296">The system maintains a single system message queue and one thread-specific message queue for each GUI thread.</span></span> <span data-ttu-id="81342-297">Чтобы избежать издержек, связанных с созданием очереди сообщений для потоков, отличных от графического пользовательского интерфейса, все потоки изначально создаются без очереди сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-297">To avoid the overhead of creating a message queue for non–GUI threads, all threads are created initially without a message queue.</span></span> <span data-ttu-id="81342-298">Система создает очередь сообщений, специфичную для конкретного потока, только когда поток выполняет первый вызов одной из конкретных пользовательских функций. вызовы функций графического пользовательского интерфейса не вызывают создание очереди сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-298">The system creates a thread-specific message queue only when the thread makes its first call to one of the specific user functions; no GUI function calls result in the creation of a message queue.</span></span>

<span data-ttu-id="81342-299">Когда пользователь перемещает мышь, нажимает кнопки мыши или типы на клавиатуре, драйвер устройства для мыши или клавиатуры преобразует входные данные в сообщения и помещает их в очередь системных сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-299">Whenever the user moves the mouse, clicks the mouse buttons, or types on the keyboard, the device driver for the mouse or keyboard converts the input into messages and places them in the system message queue.</span></span> <span data-ttu-id="81342-300">Система удаляет сообщения по одному за раз из очереди системных сообщений, анализирует их, чтобы определить окно назначения, а затем отправляет их в очередь сообщений потока, создавшего окно назначения.</span><span class="sxs-lookup"><span data-stu-id="81342-300">The system removes the messages, one at a time, from the system message queue, examines them to determine the destination window, and then posts them to the message queue of the thread that created the destination window.</span></span> <span data-ttu-id="81342-301">Очередь сообщений потока получает все сообщения мыши и клавиатуры для окон, созданных потоком.</span><span class="sxs-lookup"><span data-stu-id="81342-301">A thread's message queue receives all mouse and keyboard messages for the windows created by the thread.</span></span> <span data-ttu-id="81342-302">Поток удаляет сообщения из своей очереди и направляет систему на отправку в соответствующую оконную процедуру для обработки.</span><span class="sxs-lookup"><span data-stu-id="81342-302">The thread removes messages from its queue and directs the system to send them to the appropriate window procedure for processing.</span></span>

<span data-ttu-id="81342-303">За исключением сообщения [**WM \_ Paint**](/windows/desktop/gdi/wm-paint) , сообщения [**\_ таймера WM**](wm-timer.md) и сообщения [**WM \_ Quit**](wm-quit.md) , система всегда отправляет сообщения в конце очереди сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-303">With the exception of the [**WM\_PAINT**](/windows/desktop/gdi/wm-paint) message, the [**WM\_TIMER**](wm-timer.md) message, and the [**WM\_QUIT**](wm-quit.md) message, the system always posts messages at the end of a message queue.</span></span> <span data-ttu-id="81342-304">Это гарантирует, что окно получит свои входные сообщения в соответствующей последовательности (FIFO).</span><span class="sxs-lookup"><span data-stu-id="81342-304">This ensures that a window receives its input messages in the proper first in, first out (FIFO) sequence.</span></span> <span data-ttu-id="81342-305">Однако сообщение **WM \_ Paint** , сообщение **\_ таймера WM** и сообщение **WM \_ Quit** хранятся в очереди и передаются в процедуру окна только в том случае, если очередь не содержит других сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-305">The **WM\_PAINT** message, the **WM\_TIMER** message, and the **WM\_QUIT** message, however, are kept in the queue and are forwarded to the window procedure only when the queue contains no other messages.</span></span> <span data-ttu-id="81342-306">Кроме того, несколько сообщений **WM \_ Paint** для одного и того же окна объединяются в одно сообщение **WM \_ Paint** , объединяя все недопустимые части клиентской области в одну область.</span><span class="sxs-lookup"><span data-stu-id="81342-306">In addition, multiple **WM\_PAINT** messages for the same window are combined into a single **WM\_PAINT** message, consolidating all invalid parts of the client area into a single area.</span></span> <span data-ttu-id="81342-307">Сочетание сообщений **WM \_ Paint** сокращает число попыток, которым окно должно перерисовывать содержимое клиентской области.</span><span class="sxs-lookup"><span data-stu-id="81342-307">Combining **WM\_PAINT** messages reduces the number of times a window must redraw the contents of its client area.</span></span>

<span data-ttu-id="81342-308">Система отправляет сообщение в очередь сообщений потока, заполняя структуру [**MSG**](/windows/win32/api/winuser/ns-winuser-msg) и затем копируя ее в очередь сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-308">The system posts a message to a thread's message queue by filling an [**MSG**](/windows/win32/api/winuser/ns-winuser-msg) structure and then copying it to the message queue.</span></span> <span data-ttu-id="81342-309">Информация в **MSG** включает: маркер окна, для которого предназначено сообщение, идентификатор сообщения, два параметра сообщения, время отправки сообщения и позицию курсора мыши.</span><span class="sxs-lookup"><span data-stu-id="81342-309">Information in **MSG** includes: the handle of the window for which the message is intended, the message identifier, the two message parameters, the time the message was posted, and the mouse cursor position.</span></span> <span data-ttu-id="81342-310">Поток может поместить сообщение в собственную очередь сообщений или в очередь другого потока с помощью функции [**onmessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) или [**постсреадмессаже**](/windows/win32/api/winuser/nf-winuser-postthreadmessagea) .</span><span class="sxs-lookup"><span data-stu-id="81342-310">A thread can post a message to its own message queue or to the queue of another thread by using the [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) or [**PostThreadMessage**](/windows/win32/api/winuser/nf-winuser-postthreadmessagea) function.</span></span>

<span data-ttu-id="81342-311">Приложение может удалить сообщение из очереди с помощью функции- [**сообщения**](/windows/win32/api/winuser/nf-winuser-getmessage) .</span><span class="sxs-lookup"><span data-stu-id="81342-311">An application can remove a message from its queue by using the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) function.</span></span> <span data-ttu-id="81342-312">Чтобы проверить сообщение, не удаляя его из очереди, приложение может использовать функцию [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) .</span><span class="sxs-lookup"><span data-stu-id="81342-312">To examine a message without removing it from its queue, an application can use the [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="81342-313">Эта [**функция заполняет сообщения**](/windows/win32/api/winuser/ns-winuser-msg) информацией о сообщении.</span><span class="sxs-lookup"><span data-stu-id="81342-313">This function fills [**MSG**](/windows/win32/api/winuser/ns-winuser-msg) with information about the message.</span></span>

<span data-ttu-id="81342-314">После удаления сообщения из очереди приложение может использовать функцию [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) , чтобы направить систему на отправку сообщения в процедуру окна для обработки.</span><span class="sxs-lookup"><span data-stu-id="81342-314">After removing a message from its queue, an application can use the [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) function to direct the system to send the message to a window procedure for processing.</span></span> <span data-ttu-id="81342-315">**DispatchMessage** принимает указатель на [**сообщение**](/windows/win32/api/winuser/ns-winuser-msg) , заполненное предыдущим вызовом функции [**MSG или**](/windows/win32/api/winuser/nf-winuser-getmessage) [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) .</span><span class="sxs-lookup"><span data-stu-id="81342-315">**DispatchMessage** takes a pointer to [**MSG**](/windows/win32/api/winuser/ns-winuser-msg) that was filled by a previous call to the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="81342-316">**DispatchMessage** передает обработчик окна, идентификатор сообщения и два параметра сообщения в процедуру окна, но не передает время отправки сообщения или положения курсора мыши.</span><span class="sxs-lookup"><span data-stu-id="81342-316">**DispatchMessage** passes the window handle, the message identifier, and the two message parameters to the window procedure, but it does not pass the time the message was posted or mouse cursor position.</span></span> <span data-ttu-id="81342-317">Приложение может получить эти сведения, вызвав функции [**жетмессажетиме**](/windows/win32/api/winuser/nf-winuser-getmessagetime) и [**жетмессажепос**](/windows/win32/api/winuser/nf-winuser-getmessagepos) при обработке сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-317">An application can retrieve this information by calling the [**GetMessageTime**](/windows/win32/api/winuser/nf-winuser-getmessagetime) and [**GetMessagePos**](/windows/win32/api/winuser/nf-winuser-getmessagepos) functions while processing a message.</span></span>

<span data-ttu-id="81342-318">Поток может использовать функцию [**ваитмессаже**](/windows/win32/api/winuser/nf-winuser-waitmessage) для передачи управления другим потокам, если в очереди сообщений нет сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-318">A thread can use the [**WaitMessage**](/windows/win32/api/winuser/nf-winuser-waitmessage) function to yield control to other threads when it has no messages in its message queue.</span></span> <span data-ttu-id="81342-319">Функция приостанавливает поток и не возвращает значение, пока в очередь сообщений потока не помещается новое сообщение.</span><span class="sxs-lookup"><span data-stu-id="81342-319">The function suspends the thread and does not return until a new message is placed in the thread's message queue.</span></span>

<span data-ttu-id="81342-320">Чтобы связать значение с очередью сообщений текущего потока, можно вызвать функцию [**сетмессажеекстраинфо**](/windows/win32/api/winuser/nf-winuser-setmessageextrainfo) .</span><span class="sxs-lookup"><span data-stu-id="81342-320">You can call the [**SetMessageExtraInfo**](/windows/win32/api/winuser/nf-winuser-setmessageextrainfo) function to associate a value with the current thread's message queue.</span></span> <span data-ttu-id="81342-321">Затем вызовите функцию [**жетмессажеекстраинфо**](/windows/win32/api/winuser/nf-winuser-getmessageextrainfo) , чтобы получить значение, связанное с последним сообщением, полученным функцией [**пересообщения**](/windows/win32/api/winuser/nf-winuser-getmessage) или функции [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) .</span><span class="sxs-lookup"><span data-stu-id="81342-321">Then call the [**GetMessageExtraInfo**](/windows/win32/api/winuser/nf-winuser-getmessageextrainfo) function to get the value associated with the last message retrieved by the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span>

### <a name="nonqueued-messages"></a><span data-ttu-id="81342-322">Сообщения, не помещенные в очередь</span><span class="sxs-lookup"><span data-stu-id="81342-322">Nonqueued Messages</span></span>

<span data-ttu-id="81342-323">Сообщения, не помещенные в очередь, немедленно отправляются в конечную процедуру окна назначения, минуя очередь системных сообщений и очередь сообщений потока.</span><span class="sxs-lookup"><span data-stu-id="81342-323">Nonqueued messages are sent immediately to the destination window procedure, bypassing the system message queue and thread message queue.</span></span> <span data-ttu-id="81342-324">Система обычно отправляет сообщения, не помещенные в очередь, чтобы уведомить окно событий, влияющих на него.</span><span class="sxs-lookup"><span data-stu-id="81342-324">The system typically sends nonqueued messages to notify a window of events that affect it.</span></span> <span data-ttu-id="81342-325">Например, когда пользователь активирует новое окно приложения, система отправляет окну ряд сообщений, включая [**WM \_ Activate**](/windows/desktop/inputdev/wm-activate), [**WM \_ SETFOCUS**](/windows/desktop/inputdev/wm-setfocus)и [**WM \_ сеткурсор**](/windows/desktop/menurc/wm-setcursor).</span><span class="sxs-lookup"><span data-stu-id="81342-325">For example, when the user activates a new application window, the system sends the window a series of messages, including [**WM\_ACTIVATE**](/windows/desktop/inputdev/wm-activate), [**WM\_SETFOCUS**](/windows/desktop/inputdev/wm-setfocus), and [**WM\_SETCURSOR**](/windows/desktop/menurc/wm-setcursor).</span></span> <span data-ttu-id="81342-326">Эти сообщения уведомляют окно о том, что оно было активировано, что ввод с клавиатуры направляется в окно, а курсор мыши переместился в границы окна.</span><span class="sxs-lookup"><span data-stu-id="81342-326">These messages notify the window that it has been activated, that keyboard input is being directed to the window, and that the mouse cursor has been moved within the borders of the window.</span></span> <span data-ttu-id="81342-327">Непоставленные в очередь сообщения также могут быть вызваны тем, что приложение вызывает определенные системные функции.</span><span class="sxs-lookup"><span data-stu-id="81342-327">Nonqueued messages can also result when an application calls certain system functions.</span></span> <span data-ttu-id="81342-328">Например, система отправляет сообщение [**WM \_ виндовпосчанжед**](wm-windowposchanged.md) после того, как приложение использует функцию [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos) для перемещения окна.</span><span class="sxs-lookup"><span data-stu-id="81342-328">For example, the system sends the [**WM\_WINDOWPOSCHANGED**](wm-windowposchanged.md) message after an application uses the [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos) function to move a window.</span></span>

<span data-ttu-id="81342-329">Некоторые функции, отправляющие сообщения, не помещенные в очередь, — это [**броадкастсистеммессаже**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage), [**броадкастсистеммессажеекс**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessageexa), [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage), [**функции sendmessagetimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta)и [**сенднотифимессаже**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea).</span><span class="sxs-lookup"><span data-stu-id="81342-329">Some functions that send nonqueued messages are [**BroadcastSystemMessage**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage), [**BroadcastSystemMessageEx**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessageexa), [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage), [**SendMessageTimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta), and [**SendNotifyMessage**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea).</span></span>

## <a name="message-handling"></a><span data-ttu-id="81342-330">Обработка сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-330">Message Handling</span></span>

<span data-ttu-id="81342-331">Приложение должно удалять и обрабатывать сообщения, размещенные в очередях сообщений своих потоков.</span><span class="sxs-lookup"><span data-stu-id="81342-331">An application must remove and process messages posted to the message queues of its threads.</span></span> <span data-ttu-id="81342-332">Однопотоковое приложение обычно использует *цикл обработки сообщений* в функции [**WinMain**](/windows/win32/api/winbase/nf-winbase-winmain) , чтобы удалять и отсылать сообщения в соответствующие процедуры окна при обработке.</span><span class="sxs-lookup"><span data-stu-id="81342-332">A single-threaded application usually uses a *message loop* in its [**WinMain**](/windows/win32/api/winbase/nf-winbase-winmain) function to remove and send messages to the appropriate window procedures for processing.</span></span> <span data-ttu-id="81342-333">Приложения с несколькими потоками могут включать цикл обработки сообщений в каждом потоке, который создает окно.</span><span class="sxs-lookup"><span data-stu-id="81342-333">Applications with multiple threads can include a message loop in each thread that creates a window.</span></span> <span data-ttu-id="81342-334">В следующих разделах описывается работа цикла сообщений и объясняется роль процедуры окна:</span><span class="sxs-lookup"><span data-stu-id="81342-334">The following sections describe how a message loop works and explain the role of a window procedure:</span></span>

-   [<span data-ttu-id="81342-335">Цикл обработки сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-335">Message Loop</span></span>](#message-loop)
-   [<span data-ttu-id="81342-336">Процедура окна</span><span class="sxs-lookup"><span data-stu-id="81342-336">Window Procedure</span></span>](#window-procedure)

### <a name="message-loop"></a><span data-ttu-id="81342-337">Цикл обработки сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-337">Message Loop</span></span>

<span data-ttu-id="81342-338">Простой цикл обработки сообщений состоит из одного вызова функции в каждую из этих трех [**функций: TranslateMessage,**](/windows/win32/api/winuser/nf-winuser-getmessage) [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage). [](/windows/win32/api/winuser/nf-winuser-translatemessage)</span><span class="sxs-lookup"><span data-stu-id="81342-338">A simple message loop consists of one function call to each of these three functions: [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage), [**TranslateMessage**](/windows/win32/api/winuser/nf-winuser-translatemessage), and [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage).</span></span> <span data-ttu-id="81342-339">Обратите внимание, что при возникновении ошибки функция **onmessage** возвращает значение – 1, поэтому требуется специальное тестирование.</span><span class="sxs-lookup"><span data-stu-id="81342-339">Note that if there is an error, **GetMessage** returns –1, thus the need for the special testing.</span></span>


```
MSG msg;
BOOL bRet;

while( (bRet = GetMessage( &msg, NULL, 0, 0 )) != 0)
{ 
    if (bRet == -1)
    {
        // handle the error and possibly exit
    }
    else
    {
        TranslateMessage(&msg); 
        DispatchMessage(&msg); 
    }
}
```



<span data-ttu-id="81342-340">Функция [**MSG**](/windows/win32/api/winuser/nf-winuser-getmessage) получает сообщение из очереди и копирует его в структуру типа [**MSG**](/windows/win32/api/winuser/ns-winuser-msg).</span><span class="sxs-lookup"><span data-stu-id="81342-340">The [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) function retrieves a message from the queue and copies it to a structure of type [**MSG**](/windows/win32/api/winuser/ns-winuser-msg).</span></span> <span data-ttu-id="81342-341">Он возвращает ненулевое значение, если не обнаруживает сообщение [**WM \_ Quit**](wm-quit.md) , в этом случае возвращается **значение false** и завершается цикл.</span><span class="sxs-lookup"><span data-stu-id="81342-341">It returns a nonzero value, unless it encounters the [**WM\_QUIT**](wm-quit.md) message, in which case it returns **FALSE** and ends the loop.</span></span> <span data-ttu-id="81342-342">В многопоточном приложении завершение цикла обработки сообщений часто является первым шагом при закрытии приложения.</span><span class="sxs-lookup"><span data-stu-id="81342-342">In a single-threaded application, ending the message loop is often the first step in closing the application.</span></span> <span data-ttu-id="81342-343">Приложение может завершить собственный цикл с помощью функции [**посткуитмессаже**](/windows/win32/api/winuser/nf-winuser-postquitmessage) , как правило, в ответ на сообщение [**WM \_ destroy**](wm-destroy.md) в оконной процедуре главного окна приложения.</span><span class="sxs-lookup"><span data-stu-id="81342-343">An application can end its own loop by using the [**PostQuitMessage**](/windows/win32/api/winuser/nf-winuser-postquitmessage) function, typically in response to the [**WM\_DESTROY**](wm-destroy.md) message in the window procedure of the application's main window.</span></span>

<span data-ttu-id="81342-344">Если указать в качестве второго [**параметра аргумента Window, то**](/windows/win32/api/winuser/nf-winuser-getmessage)из очереди будут извлекаться только сообщения для указанного окна.</span><span class="sxs-lookup"><span data-stu-id="81342-344">If you specify a window handle as the second parameter of [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage), only messages for the specified window are retrieved from the queue.</span></span> <span data-ttu-id="81342-345">Кроме того, в **сообщении** можно фильтровать сообщения в очереди, получая только те сообщения, которые попадают в указанный диапазон.</span><span class="sxs-lookup"><span data-stu-id="81342-345">**GetMessage** can also filter messages in the queue, retrieving only those messages that fall within a specified range.</span></span> <span data-ttu-id="81342-346">Дополнительные сведения о фильтрации сообщений см. в разделе [Фильтрация сообщений](#message-filtering).</span><span class="sxs-lookup"><span data-stu-id="81342-346">For more information about filtering messages, see [Message Filtering](#message-filtering).</span></span>

<span data-ttu-id="81342-347">Цикл обработки сообщений потока должен включать [**TranslateMessage**](/windows/win32/api/winuser/nf-winuser-translatemessage) , если поток может принимать символьные данные с клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="81342-347">A thread's message loop must include [**TranslateMessage**](/windows/win32/api/winuser/nf-winuser-translatemessage) if the thread is to receive character input from the keyboard.</span></span> <span data-ttu-id="81342-348">Система создает сообщения виртуального ключа ([**WM \_ KeyDown**](/windows/desktop/inputdev/wm-keydown) и [**WM \_ KEYUP**](/windows/desktop/inputdev/wm-keyup)) каждый раз, когда пользователь нажимает клавишу.</span><span class="sxs-lookup"><span data-stu-id="81342-348">The system generates virtual-key messages ([**WM\_KEYDOWN**](/windows/desktop/inputdev/wm-keydown) and [**WM\_KEYUP**](/windows/desktop/inputdev/wm-keyup)) each time the user presses a key.</span></span> <span data-ttu-id="81342-349">Сообщение виртуального ключа содержит код виртуального ключа, который определяет, какой ключ был нажат, но не его значение.</span><span class="sxs-lookup"><span data-stu-id="81342-349">A virtual-key message contains a virtual-key code that identifies which key was pressed, but not its character value.</span></span> <span data-ttu-id="81342-350">Чтобы получить это значение, цикл обработки сообщений должен содержать **TranslateMessage**, который преобразует сообщение виртуального ключа в символьное сообщение ([**WM \_ char**](/windows/desktop/inputdev/wm-char)) и помещает его обратно в очередь сообщений приложения.</span><span class="sxs-lookup"><span data-stu-id="81342-350">To retrieve this value, the message loop must contain **TranslateMessage**, which translates the virtual-key message into a character message ([**WM\_CHAR**](/windows/desktop/inputdev/wm-char)) and places it back into the application message queue.</span></span> <span data-ttu-id="81342-351">Символьное сообщение может быть удалено при последующей итерации цикла обработки сообщений и отправлено в процедуру окна.</span><span class="sxs-lookup"><span data-stu-id="81342-351">The character message can then be removed upon a subsequent iteration of the message loop and dispatched to a window procedure.</span></span>

<span data-ttu-id="81342-352">Функция [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) отправляет сообщение в процедуру окна, связанную с маркером окна, указанным в структуре [**MSG**](/windows/win32/api/winuser/ns-winuser-msg) .</span><span class="sxs-lookup"><span data-stu-id="81342-352">The [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) function sends a message to the window procedure associated with the window handle specified in the [**MSG**](/windows/win32/api/winuser/ns-winuser-msg) structure.</span></span> <span data-ttu-id="81342-353">Если дескриптор окна находится на **\_ самом верхнем уровне HWND**, **DispatchMessage** отправляет сообщение в процедуры окна всех окон верхнего уровня в системе.</span><span class="sxs-lookup"><span data-stu-id="81342-353">If the window handle is **HWND\_TOPMOST**, **DispatchMessage** sends the message to the window procedures of all top-level windows in the system.</span></span> <span data-ttu-id="81342-354">Если указатель окна имеет **значение NULL**, **DispatchMessage** не выполняет никаких действий с сообщением.</span><span class="sxs-lookup"><span data-stu-id="81342-354">If the window handle is **NULL**, **DispatchMessage** does nothing with the message.</span></span>

<span data-ttu-id="81342-355">Главный поток приложения запускает цикл обработки сообщений после инициализации приложения и создания хотя бы одного окна.</span><span class="sxs-lookup"><span data-stu-id="81342-355">An application's main thread starts its message loop after initializing the application and creating at least one window.</span></span> <span data-ttu-id="81342-356">После запуска цикл обработки сообщений продолжит получать сообщения из очереди сообщений потока и отправлять их в соответствующие окна.</span><span class="sxs-lookup"><span data-stu-id="81342-356">After it is started, the message loop continues to retrieve messages from the thread's message queue and to dispatch them to the appropriate windows.</span></span> <span data-ttu-id="81342-357">Цикл обработки сообщений завершается, когда функция [**onmessage**](/windows/win32/api/winuser/nf-winuser-getmessage) удаляет сообщение [**WM \_ Quit**](wm-quit.md) из очереди сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-357">The message loop ends when the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) function removes the [**WM\_QUIT**](wm-quit.md) message from the message queue.</span></span>

<span data-ttu-id="81342-358">Для очереди сообщений требуется только один цикл обработки сообщений, даже если приложение содержит много окон.</span><span class="sxs-lookup"><span data-stu-id="81342-358">Only one message loop is needed for a message queue, even if an application contains many windows.</span></span> <span data-ttu-id="81342-359">[**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) всегда отправляет сообщение в соответствующее окно; Это связано с тем, что каждое сообщение в очереди [**является структурой**](/windows/win32/api/winuser/ns-winuser-msg) сообщений, содержащей маркер окна, которому принадлежит сообщение.</span><span class="sxs-lookup"><span data-stu-id="81342-359">[**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) always dispatches the message to the proper window; this is because each message in the queue is an [**MSG**](/windows/win32/api/winuser/ns-winuser-msg) structure that contains the handle of the window to which the message belongs.</span></span>

<span data-ttu-id="81342-360">Можно изменить цикл обработки сообщений различными способами.</span><span class="sxs-lookup"><span data-stu-id="81342-360">You can modify a message loop in a variety of ways.</span></span> <span data-ttu-id="81342-361">Например, можно извлечь сообщения из очереди без их отправки в окно.</span><span class="sxs-lookup"><span data-stu-id="81342-361">For example, you can retrieve messages from the queue without dispatching them to a window.</span></span> <span data-ttu-id="81342-362">Это полезно для приложений, которые передают сообщения, не указывающие окно.</span><span class="sxs-lookup"><span data-stu-id="81342-362">This is useful for applications that post messages not specifying a window.</span></span> <span data-ttu-id="81342-363">Кроме того, можно направить [**сообщение**](/windows/win32/api/winuser/nf-winuser-getmessage) в поиск конкретных сообщений, открывая другие сообщения в очереди.</span><span class="sxs-lookup"><span data-stu-id="81342-363">You can also direct [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) to search for specific messages, leaving other messages in the queue.</span></span> <span data-ttu-id="81342-364">Это полезно, если необходимо временно обойти обычный порядок FIFO очереди сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-364">This is useful if you must temporarily bypass the usual FIFO order of the message queue.</span></span>

<span data-ttu-id="81342-365">Приложение, использующее сочетания клавиш, должно иметь возможность преобразования сообщений клавиатуры в командные сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-365">An application that uses accelerator keys must be able to translate keyboard messages into command messages.</span></span> <span data-ttu-id="81342-366">Для этого цикл обработки сообщений приложения должен включать вызов функции [**TranslateAccelerator**](/windows/desktop/api/winuser/nf-winuser-translateacceleratora) .</span><span class="sxs-lookup"><span data-stu-id="81342-366">To do this, the application's message loop must include a call to the [**TranslateAccelerator**](/windows/desktop/api/winuser/nf-winuser-translateacceleratora) function.</span></span> <span data-ttu-id="81342-367">Дополнительные сведения о сочетаниях клавиш см. в разделе [сочетания](/windows/desktop/menurc/keyboard-accelerators)клавиш.</span><span class="sxs-lookup"><span data-stu-id="81342-367">For more information about accelerator keys, see [Keyboard Accelerators](/windows/desktop/menurc/keyboard-accelerators).</span></span>

<span data-ttu-id="81342-368">Если поток использует немодальное диалоговое окно, то цикл обработки сообщений должен включать функцию [**исдиалогмессаже**](/windows/desktop/api/winuser/nf-winuser-isdialogmessagea) , чтобы диалоговое окно могла получить ввод с клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="81342-368">If a thread uses a modeless dialog box, the message loop must include the [**IsDialogMessage**](/windows/desktop/api/winuser/nf-winuser-isdialogmessagea) function so that the dialog box can receive keyboard input.</span></span>

### <a name="window-procedure"></a><span data-ttu-id="81342-369">Процедура окна</span><span class="sxs-lookup"><span data-stu-id="81342-369">Window Procedure</span></span>

<span data-ttu-id="81342-370">Оконная процедура — это функция, которая получает и обрабатывает все сообщения, отправленные в окно.</span><span class="sxs-lookup"><span data-stu-id="81342-370">A window procedure is a function that receives and processes all messages sent to the window.</span></span> <span data-ttu-id="81342-371">Каждый класс окна содержит процедуру окна, и каждое окно, созданное с помощью этого класса, использует эту же оконную процедуру для реагирования на сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-371">Every window class has a window procedure, and every window created with that class uses that same window procedure to respond to messages.</span></span>

<span data-ttu-id="81342-372">Система отправляет сообщение в процедуру окна, передавая данные сообщения в качестве аргументов в процедуру.</span><span class="sxs-lookup"><span data-stu-id="81342-372">The system sends a message to a window procedure by passing the message data as arguments to the procedure.</span></span> <span data-ttu-id="81342-373">Затем процедура окна выполняет соответствующее действие для сообщения. Он проверяет идентификатор сообщения и при обработке сообщения использует сведения, указанные в параметрах сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-373">The window procedure then performs an appropriate action for the message; it checks the message identifier and, while processing the message, uses the information specified by the message parameters.</span></span>

<span data-ttu-id="81342-374">Процедура окна обычно не игнорирует сообщение.</span><span class="sxs-lookup"><span data-stu-id="81342-374">A window procedure does not usually ignore a message.</span></span> <span data-ttu-id="81342-375">Если сообщение не обрабатывается, оно должно отправить сообщение обратно в систему для обработки по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="81342-375">If it does not process a message, it must send the message back to the system for default processing.</span></span> <span data-ttu-id="81342-376">Оконная процедура делает это путем вызова функции [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) , которая выполняет действие по умолчанию и возвращает результат сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-376">The window procedure does this by calling the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function, which performs a default action and returns a message result.</span></span> <span data-ttu-id="81342-377">Затем процедура Window должна вернуть это значение в виде собственного результата сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-377">The window procedure must then return this value as its own message result.</span></span> <span data-ttu-id="81342-378">Большинство процедур обработки окон обрабатывают всего несколько сообщений и передают все остальные в систему, вызывая **дефвиндовпрок**.</span><span class="sxs-lookup"><span data-stu-id="81342-378">Most window procedures process just a few messages and pass the others on to the system by calling **DefWindowProc**.</span></span>

<span data-ttu-id="81342-379">Так как процедура окна совместно используется всеми окнами, принадлежащими одному и тому же классу, она может обрабатывать сообщения для нескольких различных окон.</span><span class="sxs-lookup"><span data-stu-id="81342-379">Because a window procedure is shared by all windows belonging to the same class, it can process messages for several different windows.</span></span> <span data-ttu-id="81342-380">Чтобы определить конкретное окно, затронутое сообщением, процедура окна может проверить маркер окна, переданный в сообщении.</span><span class="sxs-lookup"><span data-stu-id="81342-380">To identify the specific window affected by the message, a window procedure can examine the window handle passed with a message.</span></span> <span data-ttu-id="81342-381">Дополнительные сведения о процедурах окна см. в разделе [процедуры окна](window-procedures.md).</span><span class="sxs-lookup"><span data-stu-id="81342-381">For more information about window procedures, see [Window Procedures](window-procedures.md).</span></span>

## <a name="message-filtering"></a><span data-ttu-id="81342-382">Фильтрация сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-382">Message Filtering</span></span>

<span data-ttu-id="81342-383">Приложение может выбирать определенные сообщения для извлечения из очереди сообщений (при пропуске других сообщений) с помощью функции [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) или метода with [**Message**](/windows/win32/api/winuser/nf-winuser-getmessage) для указания фильтра сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-383">An application can choose specific messages to retrieve from the message queue (while ignoring other messages) by using the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function to specify a message filter.</span></span> <span data-ttu-id="81342-384">Фильтр — это диапазон идентификаторов сообщений (определяемый первым и последним идентификатором), обработчиком окна или и то, и другое.</span><span class="sxs-lookup"><span data-stu-id="81342-384">The filter is a range of message identifiers (specified by a first and last identifier), a window handle, or both.</span></span> <span data-ttu-id="81342-385">Для выбора **сообщений, которые** необходимо извлечь из очереди, используется фильтр сообщений и **PeekMessage** .</span><span class="sxs-lookup"><span data-stu-id="81342-385">**GetMessage** and **PeekMessage** use a message filter to select which messages to retrieve from the queue.</span></span> <span data-ttu-id="81342-386">Фильтрация сообщений полезна, если приложение должно искать в очереди сообщений сообщения, которые были получены позже в очереди.</span><span class="sxs-lookup"><span data-stu-id="81342-386">Message filtering is useful if an application must search the message queue for messages that have arrived later in the queue.</span></span> <span data-ttu-id="81342-387">Он также полезен, если приложение должно обрабатывать входные сообщения (оборудование) перед обработкой отправленных сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-387">It is also useful if an application must process input (hardware) messages before processing posted messages.</span></span>

<span data-ttu-id="81342-388">Константы **WM \_ Кэйфирст** и **WM \_ кэйласт** могут использоваться в качестве значений фильтров для получения всех сообщений клавиатуры; константы **WM \_ маусефирст** и **WM \_ мауселаст** можно использовать для получения всех сообщений мыши.</span><span class="sxs-lookup"><span data-stu-id="81342-388">The **WM\_KEYFIRST** and **WM\_KEYLAST** constants can be used as filter values to retrieve all keyboard messages; the **WM\_MOUSEFIRST** and **WM\_MOUSELAST** constants can be used to retrieve all mouse messages.</span></span>

<span data-ttu-id="81342-389">Любое приложение, фильтрующее сообщения, должно гарантировать, что может быть отправлено сообщение, удовлетворяющее условиям фильтра сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-389">Any application that filters messages must ensure that a message satisfying the message filter can be posted.</span></span> <span data-ttu-id="81342-390">Например, если приложение фильтрует сообщение [**WM \_ char**](/windows/desktop/inputdev/wm-char) в окне, которое не получает ввод с клавиатуры [**, функция GetChars**](/windows/win32/api/winuser/nf-winuser-getmessage) не возвращает значение.</span><span class="sxs-lookup"><span data-stu-id="81342-390">For example, if an application filters for a [**WM\_CHAR**](/windows/desktop/inputdev/wm-char) message in a window that does not receive keyboard input, the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) function does not return.</span></span> <span data-ttu-id="81342-391">Это фактически «зависает» приложение.</span><span class="sxs-lookup"><span data-stu-id="81342-391">This effectively "hangs" the application.</span></span>

## <a name="posting-and-sending-messages"></a><span data-ttu-id="81342-392">Публикация и отправка сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-392">Posting and Sending Messages</span></span>

<span data-ttu-id="81342-393">Любое приложение может публиковать и отправлять сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-393">Any application can post and send messages.</span></span> <span data-ttu-id="81342-394">Как и система, приложение отправляет сообщение, копируя его в очередь сообщений, и отправляет сообщение, передавая данные сообщения в качестве аргументов в процедуру окна.</span><span class="sxs-lookup"><span data-stu-id="81342-394">Like the system, an application posts a message by copying it to a message queue and sends a message by passing the message data as arguments to a window procedure.</span></span> <span data-ttu-id="81342-395">Для публикации сообщений приложение использует функцию [**сообщений**](/windows/win32/api/winuser/nf-winuser-postmessagea) .</span><span class="sxs-lookup"><span data-stu-id="81342-395">To post messages, an application uses the [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) function.</span></span> <span data-ttu-id="81342-396">Приложение может отправить сообщение, вызвав функцию [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage), [**броадкастсистеммессаже**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage), [**сендмессажекаллбакк**](/windows/win32/api/winuser/nf-winuser-sendmessagecallbacka), [**функции sendmessagetimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta), [**сенднотифимессаже**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea)или [**сенддлгитеммессаже**](/windows/desktop/api/winuser/nf-winuser-senddlgitemmessagea) .</span><span class="sxs-lookup"><span data-stu-id="81342-396">An application can send a message by calling the [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage), [**BroadcastSystemMessage**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage), [**SendMessageCallback**](/windows/win32/api/winuser/nf-winuser-sendmessagecallbacka), [**SendMessageTimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta), [**SendNotifyMessage**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea), or [**SendDlgItemMessage**](/windows/desktop/api/winuser/nf-winuser-senddlgitemmessagea) function.</span></span>

### <a name="posting-messages"></a><span data-ttu-id="81342-397">Отправка сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-397">Posting Messages</span></span>

<span data-ttu-id="81342-398">Приложение обычно отправляет сообщение для уведомления определенного окна о выполнении задачи.</span><span class="sxs-lookup"><span data-stu-id="81342-398">An application typically posts a message to notify a specific window to perform a task.</span></span> <span data-ttu-id="81342-399">Параметр i [**Message**](/windows/win32/api/winuser/nf-winuser-postmessagea) создает [**структуру сообщений**](/windows/win32/api/winuser/ns-winuser-msg) для сообщения и копирует сообщение в очередь сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-399">[**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) creates an [**MSG**](/windows/win32/api/winuser/ns-winuser-msg) structure for the message and copies the message to the message queue.</span></span> <span data-ttu-id="81342-400">Цикл обработки сообщений приложения в конечном итоге извлекает сообщение и отправляет его в соответствующую процедуру окна.</span><span class="sxs-lookup"><span data-stu-id="81342-400">The application's message loop eventually retrieves the message and dispatches it to the appropriate window procedure.</span></span>

<span data-ttu-id="81342-401">Приложение может публиковать сообщение без указания окна.</span><span class="sxs-lookup"><span data-stu-id="81342-401">An application can post a message without specifying a window.</span></span> <span data-ttu-id="81342-402">Если приложение предоставляет **нулевой** маркер окна при вызове [**сообщения**](/windows/win32/api/winuser/nf-winuser-postmessagea), сообщение отправляется в очередь, связанную с текущим потоком.</span><span class="sxs-lookup"><span data-stu-id="81342-402">If the application supplies a **NULL** window handle when calling [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea), the message is posted to the queue associated with the current thread.</span></span> <span data-ttu-id="81342-403">Поскольку маркер окна не указан, приложение должно обработать сообщение в цикле обработки сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-403">Because no window handle is specified, the application must process the message in the message loop.</span></span> <span data-ttu-id="81342-404">Это один из способов создания сообщения, которое применяется ко всему приложению, а не к конкретному окну.</span><span class="sxs-lookup"><span data-stu-id="81342-404">This is one way to create a message that applies to the entire application, instead of to a specific window.</span></span>

<span data-ttu-id="81342-405">Иногда может потребоваться опубликовать сообщение во всех окнах верхнего уровня в системе.</span><span class="sxs-lookup"><span data-stu-id="81342-405">Occasionally, you may want to post a message to all top-level windows in the system.</span></span> <span data-ttu-id="81342-406">Приложение может опубликовать сообщение во всех окнах верхнего уровня, вызвав [**сообщение**](/windows/win32/api/winuser/nf-winuser-postmessagea) и указав HWND Top **\_** в параметре *HWND* .</span><span class="sxs-lookup"><span data-stu-id="81342-406">An application can post a message to all top-level windows by calling [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) and specifying **HWND\_TOPMOST** in the *hwnd* parameter.</span></span>

<span data-ttu-id="81342-407">Распространенная ошибка программирования заключается в том, что функция отправки [**сообщений**](/windows/win32/api/winuser/nf-winuser-postmessagea) всегда отправляет сообщение.</span><span class="sxs-lookup"><span data-stu-id="81342-407">A common programming error is to assume that the [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) function always posts a message.</span></span> <span data-ttu-id="81342-408">Это не имеет значения, если очередь сообщений заполнена.</span><span class="sxs-lookup"><span data-stu-id="81342-408">This is not true when the message queue is full.</span></span> <span data-ttu-id="81342-409">Приложение должно проверить возвращаемое значение функции почтовых **сообщений** , чтобы определить, было ли сообщение отправлено, и, если оно не было, перенесите его.</span><span class="sxs-lookup"><span data-stu-id="81342-409">An application should check the return value of the **PostMessage** function to determine whether the message has been posted and, if it has not been, repost it.</span></span>

### <a name="sending-messages"></a><span data-ttu-id="81342-410">отправка сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-410">Sending Messages</span></span>

<span data-ttu-id="81342-411">Приложение обычно отправляет сообщение, чтобы уведомить процедуру окна о необходимости немедленного выполнения задачи.</span><span class="sxs-lookup"><span data-stu-id="81342-411">An application typically sends a message to notify a window procedure to perform a task immediately.</span></span> <span data-ttu-id="81342-412">Функция [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) отправляет сообщение в процедуру окна, соответствующую заданному окну.</span><span class="sxs-lookup"><span data-stu-id="81342-412">The [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) function sends the message to the window procedure corresponding to the given window.</span></span> <span data-ttu-id="81342-413">Функция ожидает, пока процедура окна не завершит обработку, а затем вернет результат сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-413">The function waits until the window procedure completes processing and then returns the message result.</span></span> <span data-ttu-id="81342-414">Родительские и дочерние окна часто взаимодействуют, отправляя сообщения друг другу.</span><span class="sxs-lookup"><span data-stu-id="81342-414">Parent and child windows often communicate by sending messages to each other.</span></span> <span data-ttu-id="81342-415">Например, родительское окно, имеющее элемент управления "поле ввода" в качестве дочернего окна, может задать текст элемента управления, отправив ему сообщение.</span><span class="sxs-lookup"><span data-stu-id="81342-415">For example, a parent window that has an edit control as its child window can set the text of the control by sending a message to it.</span></span> <span data-ttu-id="81342-416">Элемент управления может уведомлять родительское окно об изменениях текста, которые выполняются пользователем, отправляя сообщения обратно в родительский объект.</span><span class="sxs-lookup"><span data-stu-id="81342-416">The control can notify the parent window of changes to the text that are carried out by the user by sending messages back to the parent.</span></span>

<span data-ttu-id="81342-417">Функция [**сендмессажекаллбакк**](/windows/win32/api/winuser/nf-winuser-sendmessagecallbacka) также отправляет сообщение в процедуру окна, соответствующую заданному окну.</span><span class="sxs-lookup"><span data-stu-id="81342-417">The [**SendMessageCallback**](/windows/win32/api/winuser/nf-winuser-sendmessagecallbacka) function also sends a message to the window procedure corresponding to the given window.</span></span> <span data-ttu-id="81342-418">Однако эта функция возвращает значение немедленно.</span><span class="sxs-lookup"><span data-stu-id="81342-418">However, this function returns immediately.</span></span> <span data-ttu-id="81342-419">После того, как процедура окна обработает сообщение, система вызывает указанную функцию обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="81342-419">After the window procedure processes the message, the system calls the specified callback function.</span></span> <span data-ttu-id="81342-420">Дополнительные сведения о функции обратного вызова см. в описании функции [**сендасинкпрок**](/windows/win32/api/winuser/nc-winuser-sendasyncproc) .</span><span class="sxs-lookup"><span data-stu-id="81342-420">For more information about the callback function, see the [**SendAsyncProc**](/windows/win32/api/winuser/nc-winuser-sendasyncproc) function.</span></span>

<span data-ttu-id="81342-421">Иногда может потребоваться отправить сообщение всем окнам верхнего уровня в системе.</span><span class="sxs-lookup"><span data-stu-id="81342-421">Occasionally, you may want to send a message to all top-level windows in the system.</span></span> <span data-ttu-id="81342-422">Например, если приложение изменяет системное время, оно должно уведомлять все окна верхнего уровня об изменении, отправляя сообщение [**WM \_ тимечанже**](../sysinfo/wm-timechange.md) .</span><span class="sxs-lookup"><span data-stu-id="81342-422">For example, if the application changes the system time, it must notify all top-level windows about the change by sending a [**WM\_TIMECHANGE**](../sysinfo/wm-timechange.md) message.</span></span> <span data-ttu-id="81342-423">Приложение может отправить сообщение всем окнам верхнего уровня, вызвав [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) и указав HWND Top **\_** в параметре *HWND* .</span><span class="sxs-lookup"><span data-stu-id="81342-423">An application can send a message to all top-level windows by calling [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) and specifying **HWND\_TOPMOST** in the *hwnd* parameter.</span></span> <span data-ttu-id="81342-424">Вы также можете транслировать сообщение во все приложения, вызвав функцию [**броадкастсистеммессаже**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage) и указав **\_ приложения BSM** в параметре *лпдвреЦипиентс* .</span><span class="sxs-lookup"><span data-stu-id="81342-424">You can also broadcast a message to all applications by calling the [**BroadcastSystemMessage**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage) function and specifying **BSM\_APPLICATIONS** in the *lpdwRecipients* parameter.</span></span>

<span data-ttu-id="81342-425">С помощью функций [**SendMessage**](/windows/win32/api/winuser/nf-winuser-insendmessage) или [**инсендмессажеекс**](/windows/win32/api/winuser/nf-winuser-insendmessageex) процедура окна может определить, обрабатывается ли сообщение, отправленное другим потоком.</span><span class="sxs-lookup"><span data-stu-id="81342-425">By using the [**InSendMessage**](/windows/win32/api/winuser/nf-winuser-insendmessage) or [**InSendMessageEx**](/windows/win32/api/winuser/nf-winuser-insendmessageex) function, a window procedure can determine whether it is processing a message sent by another thread.</span></span> <span data-ttu-id="81342-426">Эта возможность полезна, если обработка сообщений зависит от происхождения сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-426">This capability is useful when message processing depends on the origin of the message.</span></span>

## <a name="message-deadlocks"></a><span data-ttu-id="81342-427">Взаимоблокировки сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-427">Message Deadlocks</span></span>

<span data-ttu-id="81342-428">Поток, который вызывает функцию [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) для отправки сообщения в другой поток, не может продолжить выполнение до тех пор, пока не будет возвращена процедура окна, получающая сообщение.</span><span class="sxs-lookup"><span data-stu-id="81342-428">A thread that calls the [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) function to send a message to another thread cannot continue executing until the window procedure that receives the message returns.</span></span> <span data-ttu-id="81342-429">Если принимающий поток получает управление при обработке сообщения, то поток отправки не может продолжать выполнение, так как он ожидает возврата **SendMessage** .</span><span class="sxs-lookup"><span data-stu-id="81342-429">If the receiving thread yields control while processing the message, the sending thread cannot continue executing, because it is waiting for **SendMessage** to return.</span></span> <span data-ttu-id="81342-430">Если принимающий поток присоединен к той же очереди, что и отправитель, это может привести к взаимоблокировке приложения.</span><span class="sxs-lookup"><span data-stu-id="81342-430">If the receiving thread is attached to the same queue as the sender, it can cause an application deadlock to occur.</span></span> <span data-ttu-id="81342-431">(Обратите внимание, что обработчики журнала присоединяют потоки к одной очереди.)</span><span class="sxs-lookup"><span data-stu-id="81342-431">(Note that journal hooks attach threads to the same queue.)</span></span>

<span data-ttu-id="81342-432">Обратите внимание, что принимающему потоку не требуется явно управлять yield; вызов любой из следующих функций может привести к неявному получению потоком управления.</span><span class="sxs-lookup"><span data-stu-id="81342-432">Note that the receiving thread need not yield control explicitly; calling any of the following functions can cause a thread to yield control implicitly.</span></span>

-   [<span data-ttu-id="81342-433">**диалогбокс**</span><span class="sxs-lookup"><span data-stu-id="81342-433">**DialogBox**</span></span>](/windows/desktop/api/winuser/nf-winuser-dialogboxa)
-   [<span data-ttu-id="81342-434">**диалогбоксиндирект**</span><span class="sxs-lookup"><span data-stu-id="81342-434">**DialogBoxIndirect**</span></span>](/windows/desktop/api/winuser/nf-winuser-dialogboxindirecta)
-   [<span data-ttu-id="81342-435">**диалогбоксиндиректпарам**</span><span class="sxs-lookup"><span data-stu-id="81342-435">**DialogBoxIndirectParam**</span></span>](/windows/desktop/api/winuser/nf-winuser-dialogboxindirectparama)
-   [<span data-ttu-id="81342-436">**диалогбокспарам**</span><span class="sxs-lookup"><span data-stu-id="81342-436">**DialogBoxParam**</span></span>](/windows/desktop/api/winuser/nf-winuser-dialogboxparama)
-   [<span data-ttu-id="81342-437">**GetMessage**</span><span class="sxs-lookup"><span data-stu-id="81342-437">**GetMessage**</span></span>](/windows/win32/api/winuser/nf-winuser-getmessage)
-   [<span data-ttu-id="81342-438">**MessageBox**</span><span class="sxs-lookup"><span data-stu-id="81342-438">**MessageBox**</span></span>](/windows/desktop/api/winuser/nf-winuser-messagebox)
-   [<span data-ttu-id="81342-439">**PeekMessage**</span><span class="sxs-lookup"><span data-stu-id="81342-439">**PeekMessage**</span></span>](/windows/win32/api/winuser/nf-winuser-peekmessagea)
-   [<span data-ttu-id="81342-440">**SendMessage**</span><span class="sxs-lookup"><span data-stu-id="81342-440">**SendMessage**</span></span>](/windows/win32/api/winuser/nf-winuser-sendmessage)

<span data-ttu-id="81342-441">Чтобы избежать потенциальных взаимоблокировок в приложении, рассмотрите возможность использования функций [**сенднотифимессаже**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea) или [**функции sendmessagetimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta) .</span><span class="sxs-lookup"><span data-stu-id="81342-441">To avoid potential deadlocks in your application, consider using the [**SendNotifyMessage**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea) or [**SendMessageTimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta) functions.</span></span> <span data-ttu-id="81342-442">В противном случае процедура окна может определить, было ли полученное сообщение отправлено другим потоком путем вызова функции [**SendMessage**](/windows/win32/api/winuser/nf-winuser-insendmessage) или [**инсендмессажеекс**](/windows/win32/api/winuser/nf-winuser-insendmessageex) .</span><span class="sxs-lookup"><span data-stu-id="81342-442">Otherwise, a window procedure can determine whether a message it has received was sent by another thread by calling the [**InSendMessage**](/windows/win32/api/winuser/nf-winuser-insendmessage) or [**InSendMessageEx**](/windows/win32/api/winuser/nf-winuser-insendmessageex) function.</span></span> <span data-ttu-id="81342-443">Перед вызовом любой из функций из предыдущего списка при обработке сообщения процедура окна должна сначала вызвать **SendMessage** или **инсендмессажеекс**.</span><span class="sxs-lookup"><span data-stu-id="81342-443">Before calling any of the functions in the preceding list while processing a message, the window procedure should first call **InSendMessage** or **InSendMessageEx**.</span></span> <span data-ttu-id="81342-444">Если эта функция возвращает **значение true**, то процедура Window должна вызывать функцию [**реплимессаже**](/windows/win32/api/winuser/nf-winuser-replymessage) перед любой функцией, которая приводит к получению управления потоком.</span><span class="sxs-lookup"><span data-stu-id="81342-444">If this function returns **TRUE**, the window procedure must call the [**ReplyMessage**](/windows/win32/api/winuser/nf-winuser-replymessage) function before any function that causes the thread to yield control.</span></span>

## <a name="broadcasting-messages"></a><span data-ttu-id="81342-445">Широковещательная рассылка сообщений</span><span class="sxs-lookup"><span data-stu-id="81342-445">Broadcasting Messages</span></span>

<span data-ttu-id="81342-446">Каждое сообщение состоит из идентификатора сообщения и двух параметров: *wParam* и *lParam*.</span><span class="sxs-lookup"><span data-stu-id="81342-446">Each message consists of a message identifier and two parameters, *wParam* and *lParam*.</span></span> <span data-ttu-id="81342-447">Идентификатор сообщения — это уникальное значение, указывающее назначение сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-447">The message identifier is a unique value that specifies the message purpose.</span></span> <span data-ttu-id="81342-448">Параметры предоставляют дополнительные сведения, относящиеся к конкретному сообщению, но параметр *wParam* обычно представляет собой значение типа, которое предоставляет дополнительные сведения о сообщении.</span><span class="sxs-lookup"><span data-stu-id="81342-448">The parameters provide additional information that is message-specific, but the *wParam* parameter is generally a type value that provides more information about the message.</span></span>

<span data-ttu-id="81342-449">*Вещание сообщения* — это просто отправка сообщения нескольким получателям в системе.</span><span class="sxs-lookup"><span data-stu-id="81342-449">A *message broadcast* is simply the sending of a message to multiple recipients in the system.</span></span> <span data-ttu-id="81342-450">Чтобы выполнить широковещательную рассылку сообщения из приложения, используйте функцию [**броадкастсистеммессаже**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage) , указав получателей сообщения.</span><span class="sxs-lookup"><span data-stu-id="81342-450">To broadcast a message from an application, use the [**BroadcastSystemMessage**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage) function, specifying the recipients of the message.</span></span> <span data-ttu-id="81342-451">Вместо того чтобы указывать отдельных получателей, необходимо указать одного или нескольких типов получателей.</span><span class="sxs-lookup"><span data-stu-id="81342-451">Rather than specify individual recipients, you must specify one or more types of recipients.</span></span> <span data-ttu-id="81342-452">Эти типы являются приложениями, устанавливаемыми драйверами, сетевыми драйверами и драйверами устройств на уровне системы.</span><span class="sxs-lookup"><span data-stu-id="81342-452">These types are applications, installable drivers, network drivers, and system-level device drivers.</span></span> <span data-ttu-id="81342-453">Система отправляет широковещательные сообщения всем членам каждого указанного типа.</span><span class="sxs-lookup"><span data-stu-id="81342-453">The system sends broadcast messages to all members of each specified type.</span></span>

<span data-ttu-id="81342-454">Обычно система передает сообщения в ответ на изменения, которые выполняются в драйверах устройств на уровне системы или связанных компонентах.</span><span class="sxs-lookup"><span data-stu-id="81342-454">The system typically broadcasts messages in response to changes that take place within system-level device drivers or related components.</span></span> <span data-ttu-id="81342-455">Драйвер или связанный компонент передает сообщение в приложения и другие компоненты, чтобы уведомить их об изменении.</span><span class="sxs-lookup"><span data-stu-id="81342-455">The driver or related component broadcasts the message to applications and other components to notify them of the change.</span></span> <span data-ttu-id="81342-456">Например, компонент, ответственный за диски, передает сообщение, когда драйвер устройства для дисковода гибких дисков обнаруживает смену носителя, например, когда пользователь вставляет диск в дисковод.</span><span class="sxs-lookup"><span data-stu-id="81342-456">For example, the component responsible for disk drives broadcasts a message whenever the device driver for the floppy disk drive detects a change of media such as when the user inserts a disk in the drive.</span></span>

<span data-ttu-id="81342-457">Система передает сообщения получателям в следующем порядке: драйверы устройств на уровне системы, сетевые драйверы, устанавливаемые драйверы и приложения.</span><span class="sxs-lookup"><span data-stu-id="81342-457">The system broadcasts messages to recipients in this order: system-level device drivers, network drivers, installable drivers, and applications.</span></span> <span data-ttu-id="81342-458">Это означает, что драйверы устройств системного уровня, если они выбраны в качестве получателей, всегда получат первую возможность ответить на сообщение.</span><span class="sxs-lookup"><span data-stu-id="81342-458">This means that system-level device drivers, if chosen as recipients, always get the first opportunity to respond to a message.</span></span> <span data-ttu-id="81342-459">В пределах заданного типа получателя драйвер не гарантированно получает данное сообщение перед любым другим драйвером.</span><span class="sxs-lookup"><span data-stu-id="81342-459">Within a given recipient type, no driver is guaranteed to receive a given message before any other driver.</span></span> <span data-ttu-id="81342-460">Это означает, что сообщение, предназначенное для конкретного драйвера, должно иметь глобальный уникальный идентификатор сообщения, чтобы другой драйвер не мог его непреднамеренно обрабатывать.</span><span class="sxs-lookup"><span data-stu-id="81342-460">This means that a message intended for a specific driver must have a globally-unique message identifier so that no other driver unintentionally processes it.</span></span>

<span data-ttu-id="81342-461">Кроме того, сообщения можно рассылать во все окна верхнего уровня, **задав \_ широковещательное сообщение HWND** в функции [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage), [**сендмессажекаллбакк**](/windows/win32/api/winuser/nf-winuser-sendmessagecallbacka), [**функции sendmessagetimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta)или [**сенднотифимессаже**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea) .</span><span class="sxs-lookup"><span data-stu-id="81342-461">You can also broadcast messages to all top-level windows by specifying **HWND\_BROADCAST** in the [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage), [**SendMessageCallback**](/windows/win32/api/winuser/nf-winuser-sendmessagecallbacka), [**SendMessageTimeout**](/windows/win32/api/winuser/nf-winuser-sendmessagetimeouta), or [**SendNotifyMessage**](/windows/win32/api/winuser/nf-winuser-sendnotifymessagea) function.</span></span>

<span data-ttu-id="81342-462">Приложения получают сообщения через процедуру окна своих окон верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="81342-462">Applications receive messages through the window procedure of their top-level windows.</span></span> <span data-ttu-id="81342-463">Сообщения не отправляются в дочерние окна.</span><span class="sxs-lookup"><span data-stu-id="81342-463">Messages are not sent to child windows.</span></span> <span data-ttu-id="81342-464">Службы могут принимать сообщения с помощью процедуры окна или их обработчиков управления службами.</span><span class="sxs-lookup"><span data-stu-id="81342-464">Services can receive messages through a window procedure or their service control handlers.</span></span>

> [!Note]  
> <span data-ttu-id="81342-465">Драйверы устройств на уровне системы используют связанную функцию на уровне системы для вещания системных сообщений.</span><span class="sxs-lookup"><span data-stu-id="81342-465">System-level device drivers use a related, system-level function to broadcast system messages.</span></span>

 

## <a name="query-messages"></a><span data-ttu-id="81342-466">Сообщения запроса</span><span class="sxs-lookup"><span data-stu-id="81342-466">Query Messages</span></span>

<span data-ttu-id="81342-467">Вы можете создавать собственные пользовательские сообщения и использовать их для координации действий между приложениями и другими компонентами системы.</span><span class="sxs-lookup"><span data-stu-id="81342-467">You can create your own custom messages and use them to coordinate activities between your applications and other components in the system.</span></span> <span data-ttu-id="81342-468">Это особенно полезно, если вы создали собственные устанавливаемые драйверы или драйверы устройств на уровне системы.</span><span class="sxs-lookup"><span data-stu-id="81342-468">This is especially useful if you have created your own installable drivers or system-level device drivers.</span></span> <span data-ttu-id="81342-469">Пользовательские сообщения могут содержать сведения о драйвере и приложениях, использующих этот драйвер, и из него.</span><span class="sxs-lookup"><span data-stu-id="81342-469">Your custom messages can carry information to and from your driver and the applications that use the driver.</span></span>

<span data-ttu-id="81342-470">Чтобы опросить получателей для разрешения на выполнение заданного действия, используйте *сообщение запроса*.</span><span class="sxs-lookup"><span data-stu-id="81342-470">To poll recipients for permission to carry out a given action, use a *query message*.</span></span> <span data-ttu-id="81342-471">Вы можете создавать собственные сообщения запроса, задав значение **\_ запроса БСФ** в параметре *DwFlags* при вызове [**броадкастсистеммессаже**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage).</span><span class="sxs-lookup"><span data-stu-id="81342-471">You can generate your own query messages by setting the **BSF\_QUERY** value in the *dwFlags* parameter when calling [**BroadcastSystemMessage**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage).</span></span> <span data-ttu-id="81342-472">Каждый получатель сообщения запроса должен возвращать **значение true** , чтобы функция отправляла сообщение следующему получателю.</span><span class="sxs-lookup"><span data-stu-id="81342-472">Each recipient of the query message must return **TRUE** for the function to send the message to the next recipient.</span></span> <span data-ttu-id="81342-473">Если какой-либо получатель возвращает **\_ запрос на \_ отклонение широковещательного запроса**, вещание немедленно завершается, а функция возвращает ноль.</span><span class="sxs-lookup"><span data-stu-id="81342-473">If any recipient returns **BROADCAST\_QUERY\_DENY**, the broadcast ends immediately and the function returns a zero.</span></span>

 

 
