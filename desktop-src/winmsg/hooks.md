---
description: В этом разделе обсуждаются обработчики. Обработчик — это точка в механизме обработки системных сообщений, в которой приложение может установить подпрограммы для мониторинга трафика сообщений.
ms.assetid: vs|winui|~\winui\windowsuserinterface\windowing\hooks.htm
title: Обработчики
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 74057d25e3152c8782c2be364688bb971b08ddf5
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104272084"
---
# <a name="hooks"></a><span data-ttu-id="0f741-104">Обработчики</span><span class="sxs-lookup"><span data-stu-id="0f741-104">Hooks</span></span>

<span data-ttu-id="0f741-105">Обработчик — это точка в механизме обработки сообщений системы, где приложение может установить подпрограммы для отслеживания трафика сообщений в системе и обработать определенные типы сообщений до того, как они достигли целевой процедуры окна.</span><span class="sxs-lookup"><span data-stu-id="0f741-105">A hook is a point in the system message-handling mechanism where an application can install a subroutine to monitor the message traffic in the system and process certain types of messages before they reach the target window procedure.</span></span>

### <a name="in-this-section"></a><span data-ttu-id="0f741-106">в этом разделе</span><span class="sxs-lookup"><span data-stu-id="0f741-106">In This Section</span></span>



| <span data-ttu-id="0f741-107">Имя</span><span class="sxs-lookup"><span data-stu-id="0f741-107">Name</span></span>                                 | <span data-ttu-id="0f741-108">Описание</span><span class="sxs-lookup"><span data-stu-id="0f741-108">Description</span></span>                                                         |
|--------------------------------------|---------------------------------------------------------------------|
| [<span data-ttu-id="0f741-109">Общие сведения о обработчике</span><span class="sxs-lookup"><span data-stu-id="0f741-109">Hook Overview</span></span>](about-hooks.md)     | <span data-ttu-id="0f741-110">Описывает, как использовать перехватчики.</span><span class="sxs-lookup"><span data-stu-id="0f741-110">Discusses how hooks should be used.</span></span><br/>                      |
| [<span data-ttu-id="0f741-111">Использование перехватчиков</span><span class="sxs-lookup"><span data-stu-id="0f741-111">Using Hooks</span></span>](using-hooks.md)       | <span data-ttu-id="0f741-112">Демонстрирует выполнение задач, связанных с обработчиками.</span><span class="sxs-lookup"><span data-stu-id="0f741-112">Demonstrates how to perform tasks associated with hooks.</span></span><br/> |
| [<span data-ttu-id="0f741-113">Ссылка на обработчик</span><span class="sxs-lookup"><span data-stu-id="0f741-113">Hook Reference</span></span>](hook-reference.md) | <span data-ttu-id="0f741-114">Содержит справочник по API.</span><span class="sxs-lookup"><span data-stu-id="0f741-114">Contains the API reference.</span></span><br/>                              |



 

### <a name="hook-functions"></a><span data-ttu-id="0f741-115">Функции-ловушки</span><span class="sxs-lookup"><span data-stu-id="0f741-115">Hook Functions</span></span>



| <span data-ttu-id="0f741-116">Имя</span><span class="sxs-lookup"><span data-stu-id="0f741-116">Name</span></span>                                               | <span data-ttu-id="0f741-117">Описание</span><span class="sxs-lookup"><span data-stu-id="0f741-117">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|----------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="0f741-118">**каллмсгфилтер**</span><span class="sxs-lookup"><span data-stu-id="0f741-118">**CallMsgFilter**</span></span>](/windows/win32/api/winuser/nf-winuser-callmsgfiltera)             | <span data-ttu-id="0f741-119">Передает указанное сообщение и код обработчика процедурам-обработчикам, связанным с [**\_ сисмсгфилтер**](about-hooks.md) и **\_ предмсгфилтерными** процедурами-обработчиками.</span><span class="sxs-lookup"><span data-stu-id="0f741-119">Passes the specified message and hook code to the hook procedures associated with the [**WH\_SYSMSGFILTER**](about-hooks.md) and **WH\_MSGFILTER** hook procedures.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| [<span data-ttu-id="0f741-120">**каллнекссукекс**</span><span class="sxs-lookup"><span data-stu-id="0f741-120">**CallNextHookEx**</span></span>](/windows/win32/api/winuser/nf-winuser-callnexthookex)           | <span data-ttu-id="0f741-121">Передает сведения о обработчике в следующую процедуру-обработчик в текущей цепочке прерываний.</span><span class="sxs-lookup"><span data-stu-id="0f741-121">Passes the hook information to the next hook procedure in the current hook chain.</span></span> <span data-ttu-id="0f741-122">Процедура-обработчик может вызвать эту функцию до или после обработки сведений о обработчике.</span><span class="sxs-lookup"><span data-stu-id="0f741-122">A hook procedure can call this function either before or after processing the hook information.</span></span> <br/>                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="0f741-123">[*каллвндпрок*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-123">[*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85))</span></span>                   | <span data-ttu-id="0f741-124">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-124">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-125">Система вызывает эту функцию перед вызовом окна процедуры для обработки сообщения, отправленного в поток.</span><span class="sxs-lookup"><span data-stu-id="0f741-125">The system calls this function before calling the window procedure to process a message sent to the thread.</span></span><br/>                                                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="0f741-126">*каллвндретпрок*</span><span class="sxs-lookup"><span data-stu-id="0f741-126">*CallWndRetProc*</span></span>](/windows/win32/api/winuser/nc-winuser-hookproc)             | <span data-ttu-id="0f741-127">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-127">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-128">Система вызывает эту функцию после вызова функции [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) .</span><span class="sxs-lookup"><span data-stu-id="0f741-128">The system calls this function after the [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) function is called.</span></span> <span data-ttu-id="0f741-129">Процедура-обработчик может проверить сообщение; Он не может изменить его.</span><span class="sxs-lookup"><span data-stu-id="0f741-129">The hook procedure can examine the message; it cannot modify it.</span></span> <br/>                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="0f741-130">[*кбтпрок*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-130">[*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85))</span></span>                           | <span data-ttu-id="0f741-131">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-131">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-132">Система вызывает эту функцию перед активацией, созданием, уничтожением, свертыванием, разворачиванием, перемещением или изменением размера окна. перед завершением системной команды; перед удалением события мыши или клавиатуры из очереди системных сообщений; Перед настройкой фокуса клавиатуры; или перед синхронизацией с системной очередью сообщений.</span><span class="sxs-lookup"><span data-stu-id="0f741-132">The system calls this function before activating, creating, destroying, minimizing, maximizing, moving, or sizing a window; before completing a system command; before removing a mouse or keyboard event from the system message queue; before setting the keyboard focus; or before synchronizing with the system message queue.</span></span> <span data-ttu-id="0f741-133">Приложение для обучения на основе компьютеров (CBT) использует эту процедуру-обработчик для получения полезных уведомлений от системы.</span><span class="sxs-lookup"><span data-stu-id="0f741-133">A computer-based training (CBT) application uses this hook procedure to receive useful notifications from the system.</span></span> <br/> |
| <span data-ttu-id="0f741-134">[*дебугпрок*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-134">[*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85))</span></span>                       | <span data-ttu-id="0f741-135">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-135">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-136">Система вызывает эту функцию перед вызовом процедур-обработчиков, связанных с обработчиком любого типа.</span><span class="sxs-lookup"><span data-stu-id="0f741-136">The system calls this function before calling the hook procedures associated with any type of hook.</span></span> <span data-ttu-id="0f741-137">Система передает сведения о обработчике, вызываемом в процедуру обработчика [*дебугпрок*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) , которая проверяет сведения и определяет, следует ли разрешить вызов обработчика.</span><span class="sxs-lookup"><span data-stu-id="0f741-137">The system passes information about the hook to be called to the [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) hook procedure, which examines the information and determines whether to allow the hook to be called.</span></span> <br/>                                                                                                                                                  |
| <span data-ttu-id="0f741-138">[*фореграундидлепрок*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-138">[*ForegroundIdleProc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85))</span></span>     | <span data-ttu-id="0f741-139">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-139">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-140">Система вызывает эту функцию всякий раз, когда основной поток собирается стать бездействующим.</span><span class="sxs-lookup"><span data-stu-id="0f741-140">The system calls this function whenever the foreground thread is about to become idle.</span></span> <br/>                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="0f741-141">[*жетмсгпрок*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-141">[*GetMsgProc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85))</span></span>                     | <span data-ttu-id="0f741-142">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-142">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-143">Система вызывает эту функцию при извлечении сообщения из очереди сообщений приложения функцией [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) или функции WITH [**Message**](/windows/win32/api/winuser/nf-winuser-getmessage) .</span><span class="sxs-lookup"><span data-stu-id="0f741-143">The system calls this function whenever the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function has retrieved a message from an application message queue.</span></span> <span data-ttu-id="0f741-144">Перед возвратом полученного сообщения вызывающему объекту система передает сообщение в процедуру-обработчик.</span><span class="sxs-lookup"><span data-stu-id="0f741-144">Before returning the retrieved message to the caller, the system passes the message to the hook procedure.</span></span> <br/>                                                                                                                                                        |
| <span data-ttu-id="0f741-145">[*жаурналплайбаккпрок*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-145">[*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85))</span></span>   | <span data-ttu-id="0f741-146">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-146">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-147">Как правило, приложение использует эту функцию для воспроизведения ряда сообщений мыши и клавиатуры, записанных ранее с помощью процедуры-обработчика [*жаурналрекордпрок*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="0f741-147">Typically, an application uses this function to play back a series of mouse and keyboard messages recorded previously by the [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) hook procedure.</span></span> <span data-ttu-id="0f741-148">При условии, что процедура обработчика [*жаурналплайбаккпрок*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) установлена, обычная мышь и ввод с клавиатуры отключаются.</span><span class="sxs-lookup"><span data-stu-id="0f741-148">As long as a [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) hook procedure is installed, regular mouse and keyboard input is disabled.</span></span> <br/>                                                                                                                       |
| <span data-ttu-id="0f741-149">[*жаурналрекордпрок*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-149">[*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85))</span></span>       | <span data-ttu-id="0f741-150">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-150">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-151">Функция записывает сообщения, которые система удаляет из очереди системных сообщений.</span><span class="sxs-lookup"><span data-stu-id="0f741-151">The function records messages the system removes from the system message queue.</span></span> <span data-ttu-id="0f741-152">Позже приложение может использовать процедуру-обработчик [*жаурналплайбаккпрок*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) для воспроизведения сообщений.</span><span class="sxs-lookup"><span data-stu-id="0f741-152">Later, an application can use a [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) hook procedure to play back the messages.</span></span> <br/>                                                                                                                                                                                                                                               |
| <span data-ttu-id="0f741-153">[*кэйбоардпрок*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-153">[*KeyboardProc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85))</span></span>                 | <span data-ttu-id="0f741-154">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-154">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-155">Система вызывает эту функцию всякий [**раз, когда**](/windows/win32/api/winuser/nf-winuser-getmessage) приложение вызывает функцию [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) и для обработки используется сообщение клавиатуры ([**WM \_ KEYUP**](/windows/desktop/inputdev/wm-keyup) или [**WM \_ KeyDown**](/windows/desktop/inputdev/wm-keydown)).</span><span class="sxs-lookup"><span data-stu-id="0f741-155">The system calls this function whenever an application calls the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function and there is a keyboard message ([**WM\_KEYUP**](/windows/desktop/inputdev/wm-keyup) or [**WM\_KEYDOWN**](/windows/desktop/inputdev/wm-keydown)) to be processed.</span></span> <br/>                                                                                                                                                                         |
| <span data-ttu-id="0f741-156">[*ловлевелкэйбоардпрок*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-156">[*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85))</span></span> | <span data-ttu-id="0f741-157">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-157">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-158">Система вызывает эту функцию каждый раз, когда будет отправлено новое событие ввода с клавиатуры в очередь входных потоков.</span><span class="sxs-lookup"><span data-stu-id="0f741-158">The system calls this function every time a new keyboard input event is about to be posted into a thread input queue.</span></span><br/>                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="0f741-159">[*ловлевелмаусепрок*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-159">[*LowLevelMouseProc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85))</span></span>       | <span data-ttu-id="0f741-160">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-160">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-161">Система вызывает эту функцию каждый раз, когда будет отправлено новое событие ввода-вывода мыши в очередь входных потоков.</span><span class="sxs-lookup"><span data-stu-id="0f741-161">The system calls this function every time a new mouse input event is about to be posted into a thread input queue.</span></span><br/>                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="0f741-162">[*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-162">[*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85))</span></span>                   | <span data-ttu-id="0f741-163">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-163">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-164">Система вызывает эту функцию после возникновения события ввода в диалоговом окне, окне сообщения, меню или полосе прокрутки, но до обработки сообщения, созданного событием ввода.</span><span class="sxs-lookup"><span data-stu-id="0f741-164">The system calls this function after an input event occurs in a dialog box, message box, menu, or scroll bar, but before the message generated by the input event is processed.</span></span> <span data-ttu-id="0f741-165">Процедура-обработчик может отслеживать сообщения для диалогового окна, окна сообщения, меню или полосы прокрутки, созданной определенным приложением или всеми приложениями.</span><span class="sxs-lookup"><span data-stu-id="0f741-165">The hook procedure can monitor messages for a dialog box, message box, menu, or scroll bar created by a particular application or all applications.</span></span><br/>                                                                                                                       |
| <span data-ttu-id="0f741-166">[*маусепрок*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-166">[*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85))</span></span>                       | <span data-ttu-id="0f741-167">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-167">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-168">Система вызывает эту функцию всякий [**раз, когда**](/windows/win32/api/winuser/nf-winuser-getmessage) приложение вызывает функцию [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) и для обработки сообщений мыши.</span><span class="sxs-lookup"><span data-stu-id="0f741-168">The system calls this function whenever an application calls the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function and there is a mouse message to be processed.</span></span> <br/>                                                                                                                                                                                                                                                           |
| [<span data-ttu-id="0f741-169">**сетвиндовшукекс**</span><span class="sxs-lookup"><span data-stu-id="0f741-169">**SetWindowsHookEx**</span></span>](/windows/win32/api/winuser/nf-winuser-setwindowshookexa)       | <span data-ttu-id="0f741-170">Устанавливает определяемую приложением процедуру-обработчик в цепочку обработчиков.</span><span class="sxs-lookup"><span data-stu-id="0f741-170">Installs an application-defined hook procedure into a hook chain.</span></span> <span data-ttu-id="0f741-171">Необходимо установить процедуру-обработчик для мониторинга системы для определенных типов событий.</span><span class="sxs-lookup"><span data-stu-id="0f741-171">You would install a hook procedure to monitor the system for certain types of events.</span></span> <span data-ttu-id="0f741-172">Эти события связаны либо с конкретным потоком, либо со всеми потоками, настольными в том же рабочем столе, что и вызывающий поток.</span><span class="sxs-lookup"><span data-stu-id="0f741-172">These events are associated either with a specific thread or with all threads in the same desktop as the calling thread.</span></span><br/>                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="0f741-173">[*шеллпрок*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-173">[*ShellProc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85))</span></span>                       | <span data-ttu-id="0f741-174">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-174">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-175">Функция получает уведомления о событиях оболочки от системы.</span><span class="sxs-lookup"><span data-stu-id="0f741-175">The function receives notifications of Shell events from the system.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="0f741-176">[*сисмсгпрок*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="0f741-176">[*SysMsgProc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85))</span></span>                     | <span data-ttu-id="0f741-177">Определяемая приложением или библиотекой функция обратного вызова, используемая с функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-177">An application-defined or library-defined callback function used with the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <span data-ttu-id="0f741-178">Система вызывает эту функцию после возникновения события ввода в диалоговом окне, окне сообщения, меню или полосе прокрутки, но до обработки сообщения, созданного событием ввода.</span><span class="sxs-lookup"><span data-stu-id="0f741-178">The system calls this function after an input event occurs in a dialog box, message box, menu, or scroll bar, but before the message generated by the input event is processed.</span></span> <span data-ttu-id="0f741-179">Функция может отслеживать сообщения для любого диалогового окна, окна сообщения, меню или полосы прокрутки в системе.</span><span class="sxs-lookup"><span data-stu-id="0f741-179">The function can monitor messages for any dialog box, message box, menu, or scroll bar in the system.</span></span> <br/>                                                                                                                                                                    |
| [<span data-ttu-id="0f741-180">**унхуквиндовшукекс**</span><span class="sxs-lookup"><span data-stu-id="0f741-180">**UnhookWindowsHookEx**</span></span>](/windows/win32/api/winuser/nf-winuser-unhookwindowshookex) | <span data-ttu-id="0f741-181">Удаляет процедуру-обработчик, установленную в цепочке перехватчиков функцией [**сетвиндовшукекс**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) .</span><span class="sxs-lookup"><span data-stu-id="0f741-181">Removes a hook procedure installed in a hook chain by the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function.</span></span> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

### <a name="hook-notifications"></a><span data-ttu-id="0f741-182">Уведомления о ловушках</span><span class="sxs-lookup"><span data-stu-id="0f741-182">Hook Notifications</span></span>



| <span data-ttu-id="0f741-183">Имя</span><span class="sxs-lookup"><span data-stu-id="0f741-183">Name</span></span>                                          | <span data-ttu-id="0f741-184">Описание</span><span class="sxs-lookup"><span data-stu-id="0f741-184">Description</span></span>                                                                                                                                                                         |
|-----------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="0f741-185">**WM \_ канцелжаурнал**</span><span class="sxs-lookup"><span data-stu-id="0f741-185">**WM\_CANCELJOURNAL**</span></span>](wm-canceljournal.md) | <span data-ttu-id="0f741-186">Публикуется в приложении, когда пользователь отменяет действия по записи в журнал.</span><span class="sxs-lookup"><span data-stu-id="0f741-186">Posted to an application when a user cancels the application's journaling activities.</span></span> <span data-ttu-id="0f741-187">Сообщение публикуется с **нулевым** маркером окна.</span><span class="sxs-lookup"><span data-stu-id="0f741-187">The message is posted with a **NULL** window handle.</span></span> <br/>                              |
| [<span data-ttu-id="0f741-188">**WM \_ куеуесинк**</span><span class="sxs-lookup"><span data-stu-id="0f741-188">**WM\_QUEUESYNC**</span></span>](wm-queuesync.md)         | <span data-ttu-id="0f741-189">Отправляется приложением CBT для разделения сообщений, вводимых пользователем, от других сообщений, отправленных с помощью процедуры [**\_ жаурналплайбакк**](about-hooks.md) .</span><span class="sxs-lookup"><span data-stu-id="0f741-189">Sent by a CBT application to separate user-input messages from other messages sent through the [**WH\_JOURNALPLAYBACK**](about-hooks.md) procedure.</span></span> <br/> |



 

### <a name="hook-structures"></a><span data-ttu-id="0f741-190">Структуры обработчиков</span><span class="sxs-lookup"><span data-stu-id="0f741-190">Hook Structures</span></span>



| <span data-ttu-id="0f741-191">Имя</span><span class="sxs-lookup"><span data-stu-id="0f741-191">Name</span></span>                                           | <span data-ttu-id="0f741-192">Описание</span><span class="sxs-lookup"><span data-stu-id="0f741-192">Description</span></span>                                                                                                                                                                                                                 |
|------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="0f741-193">**CBT \_ креатевнд**</span><span class="sxs-lookup"><span data-stu-id="0f741-193">**CBT\_CREATEWND**</span></span>](/windows/win32/api/winuser/ns-winuser-cbt_createwnda)        | <span data-ttu-id="0f741-194">Содержит сведения, передаваемые в процедуру **\_ CBT** -обработчика [*кбтпрок*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85))перед созданием окна.</span><span class="sxs-lookup"><span data-stu-id="0f741-194">Contains information passed to a **WH\_CBT** hook procedure, [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)), before a window is created.</span></span><br/>                                                                                               |
| [<span data-ttu-id="0f741-195">**кбтактиватеструкт**</span><span class="sxs-lookup"><span data-stu-id="0f741-195">**CBTACTIVATESTRUCT**</span></span>](/windows/win32/api/winuser/ns-winuser-cbtactivatestruct) | <span data-ttu-id="0f741-196">Содержит сведения, передаваемые в процедуру **\_ CBT** -обработчика, [*кбтпрок*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85))перед активацией окна.</span><span class="sxs-lookup"><span data-stu-id="0f741-196">Contains information passed to a **WH\_CBT** hook procedure, [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)), before a window is activated.</span></span> <br/>                                                                                            |
| [<span data-ttu-id="0f741-197">**квпретструкт**</span><span class="sxs-lookup"><span data-stu-id="0f741-197">**CWPRETSTRUCT**</span></span>](/windows/win32/api/winuser/ns-winuser-cwpretstruct)           | <span data-ttu-id="0f741-198">Определяет параметры сообщения, передаваемые в **процедуру \_ каллвндпрокрет** -обработчика, [*каллвндретпрок*](/windows/win32/api/winuser/nc-winuser-hookproc).</span><span class="sxs-lookup"><span data-stu-id="0f741-198">Defines the message parameters passed to a **WH\_CALLWNDPROCRET** hook procedure, [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc).</span></span> <br/>                                                                                       |
| [<span data-ttu-id="0f741-199">**квпструкт**</span><span class="sxs-lookup"><span data-stu-id="0f741-199">**CWPSTRUCT**</span></span>](/windows/win32/api/winuser/ns-winuser-cwpstruct)                 | <span data-ttu-id="0f741-200">Определяет параметры сообщения, передаваемые в **процедуру \_ каллвндпрок** -обработчика, [*каллвндпрок*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="0f741-200">Defines the message parameters passed to a **WH\_CALLWNDPROC** hook procedure, [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)).</span></span> <br/>                                                                                                |
| [<span data-ttu-id="0f741-201">**дебугхукинфо**</span><span class="sxs-lookup"><span data-stu-id="0f741-201">**DEBUGHOOKINFO**</span></span>](/windows/win32/api/winuser/ns-winuser-debughookinfo)         | <span data-ttu-id="0f741-202">Содержит отладочную информацию, переданную в процедуру-ловушку **\_ отладки** [*дебугпрок*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="0f741-202">Contains debugging information passed to a **WH\_DEBUG** hook procedure, [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)).</span></span> <br/>                                                                                                          |
| [<span data-ttu-id="0f741-203">**евентмсг**</span><span class="sxs-lookup"><span data-stu-id="0f741-203">**EVENTMSG**</span></span>](/windows/win32/api/winuser/ns-winuser-eventmsg)                   | <span data-ttu-id="0f741-204">Содержит сведения об аппаратном сообщении, отправленном в очередь системных сообщений.</span><span class="sxs-lookup"><span data-stu-id="0f741-204">Contains information about a hardware message sent to the system message queue.</span></span> <span data-ttu-id="0f741-205">Эта структура используется для хранения сведений о сообщении для функции обратного вызова [*жаурналплайбаккпрок*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="0f741-205">This structure is used to store message information for the [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) callback function.</span></span> <br/> |
| [<span data-ttu-id="0f741-206">**кбдллхукструкт**</span><span class="sxs-lookup"><span data-stu-id="0f741-206">**KBDLLHOOKSTRUCT**</span></span>](/windows/win32/api/winuser/ns-winuser-kbdllhookstruct)     | <span data-ttu-id="0f741-207">Содержит сведения о событии ввода с помощью клавиатуры низкого уровня.</span><span class="sxs-lookup"><span data-stu-id="0f741-207">Contains information about a low-level keyboard input event.</span></span> <br/>                                                                                                                                                    |
| [<span data-ttu-id="0f741-208">**маусехукструкт**</span><span class="sxs-lookup"><span data-stu-id="0f741-208">**MOUSEHOOKSTRUCT**</span></span>](/windows/win32/api/winuser/ns-winuser-mousehookstruct)     | <span data-ttu-id="0f741-209">Содержит сведения о событии мыши, переданном в какую-либо процедуру обработчика **\_ мыши** , [*маусепрок*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="0f741-209">Contains information about a mouse event passed to a **WH\_MOUSE** hook procedure, [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)).</span></span> <br/>                                                                                                |
| [<span data-ttu-id="0f741-210">**маусехукструктекс**</span><span class="sxs-lookup"><span data-stu-id="0f741-210">**MOUSEHOOKSTRUCTEX**</span></span>](/windows/win32/api/winuser/ns-winuser-mousehookstructex) | <span data-ttu-id="0f741-211">Содержит сведения о событии мыши, переданном в какую-либо процедуру обработчика **\_ мыши** , [*маусепрок*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="0f741-211">Contains information about a mouse event passed to a **WH\_MOUSE** hook procedure, [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)).</span></span> <br/>                                                                                                |
| [<span data-ttu-id="0f741-212">**мсллхукструкт**</span><span class="sxs-lookup"><span data-stu-id="0f741-212">**MSLLHOOKSTRUCT**</span></span>](/windows/win32/api/winuser/ns-winuser-msllhookstruct)       | <span data-ttu-id="0f741-213">Содержит сведения о событии ввода мыши низкого уровня.</span><span class="sxs-lookup"><span data-stu-id="0f741-213">Contains information about a low-level mouse input event.</span></span> <br/>                                                                                                                                                       |



 

## <a name="related-topics"></a><span data-ttu-id="0f741-214">См. также</span><span class="sxs-lookup"><span data-stu-id="0f741-214">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0f741-215">**сетвиневенсук**</span><span class="sxs-lookup"><span data-stu-id="0f741-215">**SetWinEventHook**</span></span>](/windows/desktop/api/winuser/nf-winuser-setwineventhook)
</dt> </dl>

 

