---
description: В этом обзоре обсуждаются функции Windows, такие как типы окон, состояния, размер и расположение.
ms.assetid: 8318c22f-85a2-490e-8233-ee1e234890d9
title: Характеристики окон
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 228c6b4ab59102cae38a248935fbbad32198f2e0
ms.sourcegitcommit: 8755905962e156f29203705d09d6df8b7d0e2fca
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/25/2021
ms.locfileid: "105658140"
---
# <a name="window-features"></a><span data-ttu-id="863c3-103">Характеристики окон</span><span class="sxs-lookup"><span data-stu-id="863c3-103">Window Features</span></span>

<span data-ttu-id="863c3-104">В этом обзоре обсуждаются функции Windows, такие как типы окон, состояния, размер и расположение.</span><span class="sxs-lookup"><span data-stu-id="863c3-104">This overview discusses features of windows such as window types, states, size, and position.</span></span>

-   [<span data-ttu-id="863c3-105">Типы окон</span><span class="sxs-lookup"><span data-stu-id="863c3-105">Window Types</span></span>](#window-types)
    -   [<span data-ttu-id="863c3-106">Перекрывающиеся окна</span><span class="sxs-lookup"><span data-stu-id="863c3-106">Overlapped Windows</span></span>](#overlapped-windows)
    -   [<span data-ttu-id="863c3-107">Всплывающие окна</span><span class="sxs-lookup"><span data-stu-id="863c3-107">Pop-up Windows</span></span>](#pop-up-windows)
    -   [<span data-ttu-id="863c3-108">Дочерние окна</span><span class="sxs-lookup"><span data-stu-id="863c3-108">Child Windows</span></span>](#child-windows)
        -   [<span data-ttu-id="863c3-109">Направляющ</span><span class="sxs-lookup"><span data-stu-id="863c3-109">Positioning</span></span>](#positioning)
        -   [<span data-ttu-id="863c3-110">Вырезая</span><span class="sxs-lookup"><span data-stu-id="863c3-110">Clipping</span></span>](#clipping)
        -   [<span data-ttu-id="863c3-111">Связь с родительским окном</span><span class="sxs-lookup"><span data-stu-id="863c3-111">Relationship to Parent Window</span></span>](#relationship-to-parent-window)
        -   [<span data-ttu-id="863c3-112">Сообщения</span><span class="sxs-lookup"><span data-stu-id="863c3-112">Messages</span></span>](#size-and-position-messages)
    -   [<span data-ttu-id="863c3-113">Многослойные окна</span><span class="sxs-lookup"><span data-stu-id="863c3-113">Layered Windows</span></span>](#layered-windows)
    -   [<span data-ttu-id="863c3-114">Окна только для сообщений</span><span class="sxs-lookup"><span data-stu-id="863c3-114">Message-Only Windows</span></span>](#message-only-windows)
-   [<span data-ttu-id="863c3-115">Связи окон</span><span class="sxs-lookup"><span data-stu-id="863c3-115">Window Relationships</span></span>](#window-relationships)
    -   [<span data-ttu-id="863c3-116">Передний и фоновый окна</span><span class="sxs-lookup"><span data-stu-id="863c3-116">Foreground and Background Windows</span></span>](#foreground-and-background-windows)
    -   [<span data-ttu-id="863c3-117">Собственные окна</span><span class="sxs-lookup"><span data-stu-id="863c3-117">Owned Windows</span></span>](#owned-windows)
    -   [<span data-ttu-id="863c3-118">Z-порядок</span><span class="sxs-lookup"><span data-stu-id="863c3-118">Z-Order</span></span>](#z-order)
-   [<span data-ttu-id="863c3-119">Отображение состояния окна</span><span class="sxs-lookup"><span data-stu-id="863c3-119">Window Show State</span></span>](#window-show-state)
    -   [<span data-ttu-id="863c3-120">Активное окно</span><span class="sxs-lookup"><span data-stu-id="863c3-120">Active Window</span></span>](#active-window)
    -   [<span data-ttu-id="863c3-121">Отключенные окна</span><span class="sxs-lookup"><span data-stu-id="863c3-121">Disabled Windows</span></span>](#disabled-windows)
    -   [<span data-ttu-id="863c3-122">Видимость окна</span><span class="sxs-lookup"><span data-stu-id="863c3-122">Window Visibility</span></span>](#window-visibility)
    -   [<span data-ttu-id="863c3-123">Сведенные, развернутые и восстановленные окна</span><span class="sxs-lookup"><span data-stu-id="863c3-123">Minimized, Maximized, and Restored Windows</span></span>](#minimized-maximized-and-restored-windows)
-   [<span data-ttu-id="863c3-124">Размер и расположение окна</span><span class="sxs-lookup"><span data-stu-id="863c3-124">Window Size and Position</span></span>](#window-size-and-position)
    -   [<span data-ttu-id="863c3-125">Размер и расположение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="863c3-125">Default Size and Position</span></span>](#default-size-and-position)
    -   [<span data-ttu-id="863c3-126">Размер отслеживания</span><span class="sxs-lookup"><span data-stu-id="863c3-126">Tracking Size</span></span>](#tracking-size)
    -   [<span data-ttu-id="863c3-127">Системные команды</span><span class="sxs-lookup"><span data-stu-id="863c3-127">System Commands</span></span>](#system-commands)
    -   [<span data-ttu-id="863c3-128">Функции размера и позиционирования</span><span class="sxs-lookup"><span data-stu-id="863c3-128">Size and Position Functions</span></span>](#size-and-position-functions)
    -   [<span data-ttu-id="863c3-129">Размер и расположение сообщений</span><span class="sxs-lookup"><span data-stu-id="863c3-129">Size and Position Messages</span></span>](#size-and-position-messages)
-   [<span data-ttu-id="863c3-130">Анимация окна</span><span class="sxs-lookup"><span data-stu-id="863c3-130">Window Animation</span></span>](#window-animation)
-   [<span data-ttu-id="863c3-131">Макет окна и зеркальное отображение</span><span class="sxs-lookup"><span data-stu-id="863c3-131">Window Layout and Mirroring</span></span>](#window-layout-and-mirroring)
    -   [<span data-ttu-id="863c3-132">Диалоговое окно зеркального отображения и окна сообщений</span><span class="sxs-lookup"><span data-stu-id="863c3-132">Mirroring Dialog Boxes and Message Boxes</span></span>](#mirroring-dialog-boxes-and-message-boxes)
    -   [<span data-ttu-id="863c3-133">Контексты устройств зеркального отображения, не связанные с окном</span><span class="sxs-lookup"><span data-stu-id="863c3-133">Mirroring Device Contexts Not Associated with a Window</span></span>](#mirroring-device-contexts-not-associated-with-a-window)
-   [<span data-ttu-id="863c3-134">Уничтожение окна</span><span class="sxs-lookup"><span data-stu-id="863c3-134">Window Destruction</span></span>](#window-destruction)

## <a name="window-types"></a><span data-ttu-id="863c3-135">Типы окон</span><span class="sxs-lookup"><span data-stu-id="863c3-135">Window Types</span></span>

<span data-ttu-id="863c3-136">Этот раздел содержит следующие разделы, описывающие типы окон.</span><span class="sxs-lookup"><span data-stu-id="863c3-136">This section contains the following topics that describe window types.</span></span>

-   [<span data-ttu-id="863c3-137">Перекрывающиеся окна</span><span class="sxs-lookup"><span data-stu-id="863c3-137">Overlapped Windows</span></span>](#overlapped-windows)
-   [<span data-ttu-id="863c3-138">Всплывающие окна</span><span class="sxs-lookup"><span data-stu-id="863c3-138">Pop-up Windows</span></span>](#pop-up-windows)
-   [<span data-ttu-id="863c3-139">Дочерние окна</span><span class="sxs-lookup"><span data-stu-id="863c3-139">Child Windows</span></span>](#child-windows)
-   [<span data-ttu-id="863c3-140">Многослойные окна</span><span class="sxs-lookup"><span data-stu-id="863c3-140">Layered Windows</span></span>](#layered-windows)
-   [<span data-ttu-id="863c3-141">Окна только для сообщений</span><span class="sxs-lookup"><span data-stu-id="863c3-141">Message-Only Windows</span></span>](#message-only-windows)

### <a name="overlapped-windows"></a><span data-ttu-id="863c3-142">Перекрывающиеся окна</span><span class="sxs-lookup"><span data-stu-id="863c3-142">Overlapped Windows</span></span>

<span data-ttu-id="863c3-143">*Перекрытое окно* — это окно верхнего уровня (не дочернее окно) с заголовком, границей и клиентской областью. Он предназначен для использования в качестве главного окна приложения.</span><span class="sxs-lookup"><span data-stu-id="863c3-143">An *overlapped window* is a top-level window (non-child window) that has a title bar, border, and client area; it is meant to serve as an application's main window.</span></span> <span data-ttu-id="863c3-144">У него также может быть меню окна, кнопки сворачивания и развертывания, полосы прокрутки.</span><span class="sxs-lookup"><span data-stu-id="863c3-144">It can also have a window menu, minimize and maximize buttons, and scroll bars.</span></span> <span data-ttu-id="863c3-145">Перекрытое окно, используемое в качестве главного окна, обычно включает все эти компоненты.</span><span class="sxs-lookup"><span data-stu-id="863c3-145">An overlapped window used as a main window typically includes all of these components.</span></span>

<span data-ttu-id="863c3-146">При указании стиля [**WS \_ OVERLAPPED**](window-styles.md) или **WS \_ оверлаппедвиндов** в функции [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) приложение создает окно с перекрытием.</span><span class="sxs-lookup"><span data-stu-id="863c3-146">By specifying the [**WS\_OVERLAPPED**](window-styles.md) or **WS\_OVERLAPPEDWINDOW** style in the [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) function, an application creates an overlapped window.</span></span> <span data-ttu-id="863c3-147">Если используется стиль **WS \_ OVERLAPPED** , окно имеет строку заголовка и границу.</span><span class="sxs-lookup"><span data-stu-id="863c3-147">If you use the **WS\_OVERLAPPED** style, the window has a title bar and border.</span></span> <span data-ttu-id="863c3-148">Если используется стиль **WS \_ оверлаппедвиндов** , окно имеет заголовок окна, границы размера, меню окна, а также кнопки сворачивания и развернуть.</span><span class="sxs-lookup"><span data-stu-id="863c3-148">If you use the **WS\_OVERLAPPEDWINDOW** style, the window has a title bar, sizing border, window menu, and minimize and maximize buttons.</span></span>

### <a name="pop-up-windows"></a><span data-ttu-id="863c3-149">Всплывающие окна</span><span class="sxs-lookup"><span data-stu-id="863c3-149">Pop-up Windows</span></span>

<span data-ttu-id="863c3-150">*Всплывающее окно* — это специальный тип окна с перекрытием, которое используется для диалоговых окон, окон сообщений и других временных окон, отображаемых за пределами главного окна приложения.</span><span class="sxs-lookup"><span data-stu-id="863c3-150">A *pop-up window* is a special type of overlapped window used for dialog boxes, message boxes, and other temporary windows that appear outside an application's main window.</span></span> <span data-ttu-id="863c3-151">Строки заголовка необязательны для всплывающих окон; в противном случае всплывающие окна будут такими же, как перекрывающиеся окна стиля [**WS- \_ OVERLAPPED**](window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="863c3-151">Title bars are optional for pop-up windows; otherwise, pop-up windows are the same as overlapped windows of the [**WS\_OVERLAPPED**](window-styles.md) style.</span></span>

<span data-ttu-id="863c3-152">Всплывающее окно создается путем указания стиля [**\_ всплывающего окна WS**](window-styles.md) в [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa).</span><span class="sxs-lookup"><span data-stu-id="863c3-152">You create a pop-up window by specifying the [**WS\_POPUP**](window-styles.md) style in [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa).</span></span> <span data-ttu-id="863c3-153">Чтобы включить заголовок, укажите стиль **\_ заголовка WS** .</span><span class="sxs-lookup"><span data-stu-id="863c3-153">To include a title bar, specify the **WS\_CAPTION** style.</span></span> <span data-ttu-id="863c3-154">Используйте стиль **WS \_ POPUPWINDOW** , чтобы создать всплывающее окно с границей и меню окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-154">Use the **WS\_POPUPWINDOW** style to create a pop-up window that has a border and a window menu.</span></span> <span data-ttu-id="863c3-155">Стиль **\_ заголовка WS** должен быть объединен с стилем **WS \_ POPUPWINDOW** , чтобы сделать меню окна видимым.</span><span class="sxs-lookup"><span data-stu-id="863c3-155">The **WS\_CAPTION** style must be combined with the **WS\_POPUPWINDOW** style to make the window menu visible.</span></span>

### <a name="child-windows"></a><span data-ttu-id="863c3-156">Дочерние окна</span><span class="sxs-lookup"><span data-stu-id="863c3-156">Child Windows</span></span>

<span data-ttu-id="863c3-157">*Дочернее окно* имеет [**стиль \_ дочернего элемента WS**](window-styles.md) и ограничивается клиентской областью родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-157">A *child window* has the [**WS\_CHILD**](window-styles.md) style and is confined to the client area of its parent window.</span></span> <span data-ttu-id="863c3-158">Приложение обычно использует дочерние окна, чтобы разделить клиентскую область родительского окна на функциональные области.</span><span class="sxs-lookup"><span data-stu-id="863c3-158">An application typically uses child windows to divide the client area of a parent window into functional areas.</span></span> <span data-ttu-id="863c3-159">Дочернее окно создается путем указания стиля **\_ дочернего элемента WS** в функции [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) .</span><span class="sxs-lookup"><span data-stu-id="863c3-159">You create a child window by specifying the **WS\_CHILD** style in the [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) function.</span></span>

<span data-ttu-id="863c3-160">Дочернее окно должно иметь родительское окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-160">A child window must have a parent window.</span></span> <span data-ttu-id="863c3-161">Родительским окном может быть окно с перекрытием, всплывающее окно или даже другое дочернее окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-161">The parent window can be an overlapped window, a pop-up window, or even another child window.</span></span> <span data-ttu-id="863c3-162">Вы указываете родительское окно при вызове [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa).</span><span class="sxs-lookup"><span data-stu-id="863c3-162">You specify the parent window when you call [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa).</span></span> <span data-ttu-id="863c3-163">Если указать в **CreateWindowEx** стиль [**\_ дочернего элемента WS**](window-styles.md) , но не указать родительское окно, система не создаст окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-163">If you specify the [**WS\_CHILD**](window-styles.md) style in **CreateWindowEx** but do not specify a parent window, the system does not create the window.</span></span>

<span data-ttu-id="863c3-164">Дочернее окно имеет клиентскую область, но не имеет других функций, если они не запрашиваются явным образом.</span><span class="sxs-lookup"><span data-stu-id="863c3-164">A child window has a client area but no other features, unless they are explicitly requested.</span></span> <span data-ttu-id="863c3-165">Приложение может запрашивать строку заголовка, меню окна, кнопки сворачивания и развернуть, границу и полосы прокрутки для дочернего окна, но дочернее окно не может иметь меню.</span><span class="sxs-lookup"><span data-stu-id="863c3-165">An application can request a title bar, a window menu, minimize and maximize buttons, a border, and scroll bars for a child window, but a child window cannot have a menu.</span></span> <span data-ttu-id="863c3-166">Если приложение задает маркер меню при регистрации класса дочернего окна или при создании дочернего окна, то маркер меню игнорируется.</span><span class="sxs-lookup"><span data-stu-id="863c3-166">If the application specifies a menu handle, either when it registers the child's window class or creates the child window, the menu handle is ignored.</span></span> <span data-ttu-id="863c3-167">Если стиль границы не указан, система создает безграницуное окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-167">If no border style is specified, the system creates a borderless window.</span></span> <span data-ttu-id="863c3-168">Приложение может использовать дочерние окна без границ для разделения клиентской области родительского окна, сохраняя при этом невидимые для пользователя подразделения.</span><span class="sxs-lookup"><span data-stu-id="863c3-168">An application can use borderless child windows to divide a parent window's client area while keeping the divisions invisible to the user.</span></span>

<span data-ttu-id="863c3-169">В этом разделе обсуждаются следующие аспекты дочерних окон:</span><span class="sxs-lookup"><span data-stu-id="863c3-169">This section discusses the following aspects of child windows:</span></span>

-   [<span data-ttu-id="863c3-170">Направляющ</span><span class="sxs-lookup"><span data-stu-id="863c3-170">Positioning</span></span>](#positioning)
-   [<span data-ttu-id="863c3-171">Вырезая</span><span class="sxs-lookup"><span data-stu-id="863c3-171">Clipping</span></span>](#clipping)
-   [<span data-ttu-id="863c3-172">Связь с родительским окном</span><span class="sxs-lookup"><span data-stu-id="863c3-172">Relationship to Parent Window</span></span>](#relationship-to-parent-window)
-   [<span data-ttu-id="863c3-173">Сообщения</span><span class="sxs-lookup"><span data-stu-id="863c3-173">Messages</span></span>](#size-and-position-messages)

#### <a name="positioning"></a><span data-ttu-id="863c3-174">Направляющ</span><span class="sxs-lookup"><span data-stu-id="863c3-174">Positioning</span></span>

<span data-ttu-id="863c3-175">Система всегда позиционирует дочернее окно относительно левого верхнего угла клиентской области родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-175">The system always positions a child window relative to the upper left corner of its parent window's client area.</span></span> <span data-ttu-id="863c3-176">Ни одна часть дочернего окна не отображается вне границ родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-176">No part of a child window ever appears outside the borders of its parent window.</span></span> <span data-ttu-id="863c3-177">Если приложение создает дочернее окно, размер которого больше родительского окна или размещает дочернее окно, чтобы часть или все дочернее окно выходили за границы родительского элемента, система обрезает дочернее окно. Это значит, что часть за пределами клиентской области родительского окна не отображается.</span><span class="sxs-lookup"><span data-stu-id="863c3-177">If an application creates a child window that is larger than the parent window or positions a child window so that some or all of the child window extends beyond the borders of the parent, the system clips the child window; that is, the portion outside the parent window's client area is not displayed.</span></span> <span data-ttu-id="863c3-178">Действия, влияющие на родительское окно, также могут повлиять на дочернее окно, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="863c3-178">Actions that affect the parent window can also affect the child window, as follows.</span></span>



| <span data-ttu-id="863c3-179">Родительское окно</span><span class="sxs-lookup"><span data-stu-id="863c3-179">Parent Window</span></span> | <span data-ttu-id="863c3-180">Дочернее окно</span><span class="sxs-lookup"><span data-stu-id="863c3-180">Child Window</span></span>                                                                                                             |
|---------------|--------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="863c3-181">Уничтожаются</span><span class="sxs-lookup"><span data-stu-id="863c3-181">Destroyed</span></span>     | <span data-ttu-id="863c3-182">Уничтожено до уничтожения родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-182">Destroyed before the parent window is destroyed.</span></span>                                                                         |
| <span data-ttu-id="863c3-183">Скрытый</span><span class="sxs-lookup"><span data-stu-id="863c3-183">Hidden</span></span>        | <span data-ttu-id="863c3-184">Скрывается перед тем, как родительское окно скрыто.</span><span class="sxs-lookup"><span data-stu-id="863c3-184">Hidden before the parent window is hidden.</span></span> <span data-ttu-id="863c3-185">Дочернее окно отображается только в том случае, если родительское окно является видимым.</span><span class="sxs-lookup"><span data-stu-id="863c3-185">A child window is visible only when the parent window is visible.</span></span>             |
| <span data-ttu-id="863c3-186">Перенести</span><span class="sxs-lookup"><span data-stu-id="863c3-186">Moved</span></span>         | <span data-ttu-id="863c3-187">Перемещено с клиентской областью родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-187">Moved with the parent window's client area.</span></span> <span data-ttu-id="863c3-188">Дочернее окно отвечает за рисование области клиента после перемещения.</span><span class="sxs-lookup"><span data-stu-id="863c3-188">The child window is responsible for painting its client area after the move.</span></span> |
| <span data-ttu-id="863c3-189">Указанного</span><span class="sxs-lookup"><span data-stu-id="863c3-189">Shown</span></span>         | <span data-ttu-id="863c3-190">Отображается после отображения родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-190">Shown after the parent window is shown.</span></span>                                                                                  |



 

#### <a name="clipping"></a><span data-ttu-id="863c3-191">Усечение</span><span class="sxs-lookup"><span data-stu-id="863c3-191">Clipping</span></span>

<span data-ttu-id="863c3-192">Система не выполняет автоматическое обрезку дочернего окна из клиентской области родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-192">The system does not automatically clip a child window from the parent window's client area.</span></span> <span data-ttu-id="863c3-193">Это означает, что родительское окно рисуется поверх дочернего окна, если оно выполняет все прорисовки в том же расположении, что и дочернее окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-193">This means the parent window draws over the child window if it carries out any drawing in the same location as the child window.</span></span> <span data-ttu-id="863c3-194">Однако система выполняет обрезку дочернего окна из клиентской области родительского окна, если родительское окно имеет стиль [**WS \_ клипчилдрен**](window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="863c3-194">However, the system does clip the child window from the parent window's client area if the parent window has the [**WS\_CLIPCHILDREN**](window-styles.md) style.</span></span> <span data-ttu-id="863c3-195">Если дочернее окно обрезано, оно не может нарисоваться в родительском окне.</span><span class="sxs-lookup"><span data-stu-id="863c3-195">If the child window is clipped, the parent window cannot draw over it.</span></span>

<span data-ttu-id="863c3-196">Дочернее окно может перекрывать другие дочерние окна в той же клиентской области.</span><span class="sxs-lookup"><span data-stu-id="863c3-196">A child window can overlap other child windows in the same client area.</span></span> <span data-ttu-id="863c3-197">Дочернее окно, которое использует то же родительское окно, что и одно или несколько дочерних окон, называется *родственным окном*.</span><span class="sxs-lookup"><span data-stu-id="863c3-197">A child window that shares the same parent window as one or more other child windows is called a *sibling window*.</span></span> <span data-ttu-id="863c3-198">Одноуровневые окна могут рисовать в клиентской области друг друга, если только у одного из дочерних окон не установлен стиль [**WS \_ клипсиблингс**](window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="863c3-198">Sibling windows can draw in each other's client area, unless one of the child windows has the [**WS\_CLIPSIBLINGS**](window-styles.md) style.</span></span> <span data-ttu-id="863c3-199">Если дочернее окно имеет этот стиль, любая часть его родственного окна, которая находится внутри дочернего окна, обрезается.</span><span class="sxs-lookup"><span data-stu-id="863c3-199">If a child window does have this style, any portion of its sibling window that lies within the child window is clipped.</span></span>

<span data-ttu-id="863c3-200">Если окно имеет стиль [**WS \_ Клипчилдрен**](window-styles.md) или **WS \_ клипсиблингс** , возникает небольшая утрата производительности.</span><span class="sxs-lookup"><span data-stu-id="863c3-200">If a window has either the [**WS\_CLIPCHILDREN**](window-styles.md) or **WS\_CLIPSIBLINGS** style, a slight loss in performance occurs.</span></span> <span data-ttu-id="863c3-201">Каждое окно занимает системные ресурсы, поэтому приложение не должно использовать дочерние окна неразличенно.</span><span class="sxs-lookup"><span data-stu-id="863c3-201">Each window takes up system resources, so an application should not use child windows indiscriminately.</span></span> <span data-ttu-id="863c3-202">Для лучшей производительности приложение, которому необходимо логически разделить главное окно, должно сделать это в процедуре окна главного окна, а не с помощью дочерних окон.</span><span class="sxs-lookup"><span data-stu-id="863c3-202">For best performance, an application that needs to logically divide its main window should do so in the window procedure of the main window rather than by using child windows.</span></span>

#### <a name="relationship-to-parent-window"></a><span data-ttu-id="863c3-203">Связь с родительским окном</span><span class="sxs-lookup"><span data-stu-id="863c3-203">Relationship to Parent Window</span></span>

<span data-ttu-id="863c3-204">Приложение может изменить родительское окно существующего дочернего окна, вызвав функцию [**сетпарент**](/windows/win32/api/winuser/nf-winuser-setparent) .</span><span class="sxs-lookup"><span data-stu-id="863c3-204">An application can change the parent window of an existing child window by calling the [**SetParent**](/windows/win32/api/winuser/nf-winuser-setparent) function.</span></span> <span data-ttu-id="863c3-205">В этом случае система удаляет дочернее окно из клиентской области старого родительского окна и перемещает его в клиентскую область нового родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-205">In this case, the system removes the child window from the client area of the old parent window and moves it to the client area of the new parent window.</span></span> <span data-ttu-id="863c3-206">Если **сетпарент** задает маркер **null** , окно рабочего стола станет новым родительским окном.</span><span class="sxs-lookup"><span data-stu-id="863c3-206">If **SetParent** specifies a **NULL** handle, the desktop window becomes the new parent window.</span></span> <span data-ttu-id="863c3-207">В этом случае дочернее окно отображается на рабочем столе вне границ любого другого окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-207">In this case, the child window is drawn on the desktop, outside the borders of any other window.</span></span> <span data-ttu-id="863c3-208">Функция- [**родитель**](/windows/win32/api/winuser/nf-winuser-getparent) получает маркер родительского окна дочернего окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-208">The [**GetParent**](/windows/win32/api/winuser/nf-winuser-getparent) function retrieves a handle to a child window's parent window.</span></span>

<span data-ttu-id="863c3-209">Родительское окно освобождает часть своей клиентской области дочернему окну, а дочернее окно получает все входные данные из этой области.</span><span class="sxs-lookup"><span data-stu-id="863c3-209">The parent window relinquishes a portion of its client area to a child window, and the child window receives all input from this area.</span></span> <span data-ttu-id="863c3-210">Класс Window не обязательно должен быть одинаковым для всех дочерних окон родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-210">The window class need not be the same for each of the child windows of the parent window.</span></span> <span data-ttu-id="863c3-211">Это означает, что приложение может заполнить родительское окно дочерними окнами, которые выглядят иначе и выполнять различные задачи.</span><span class="sxs-lookup"><span data-stu-id="863c3-211">This means that an application can fill a parent window with child windows that look different and carry out different tasks.</span></span> <span data-ttu-id="863c3-212">Например, диалоговое окно может содержать несколько типов элементов управления, каждое из которых дочернее окно принимает различные типы данных от пользователя.</span><span class="sxs-lookup"><span data-stu-id="863c3-212">For example, a dialog box can contain many types of controls, each one a child window that accepts different types of data from the user.</span></span>

<span data-ttu-id="863c3-213">Дочернее окно имеет только одно родительское окно, но у родительского окна может быть любое количество дочерних окон.</span><span class="sxs-lookup"><span data-stu-id="863c3-213">A child window has only one parent window, but a parent can have any number of child windows.</span></span> <span data-ttu-id="863c3-214">Каждое дочернее окно, в свою очередь, может иметь дочерние окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-214">Each child window, in turn, can have child windows.</span></span> <span data-ttu-id="863c3-215">В этой цепочке окон каждое дочернее окно называется вложенным окном исходного родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-215">In this chain of windows, each child window is called a descendant window of the original parent window.</span></span> <span data-ttu-id="863c3-216">Приложение использует функцию [**Child**](/windows/win32/api/winuser/nf-winuser-ischild) для определения того, является ли данное окно дочерним окном или вложенным окном данного родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-216">An application uses the [**IsChild**](/windows/win32/api/winuser/nf-winuser-ischild) function to discover whether a given window is a child window or a descendant window of a given parent window.</span></span>

<span data-ttu-id="863c3-217">Функция [**енумчилдвиндовс**](/windows/win32/api/winuser/nf-winuser-enumchildwindows) перечисляет дочерние окна родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-217">The [**EnumChildWindows**](/windows/win32/api/winuser/nf-winuser-enumchildwindows) function enumerates the child windows of a parent window.</span></span> <span data-ttu-id="863c3-218">Затем **енумчилдвиндовс** передает этот обработчик в каждое дочернее окно в функцию обратного вызова, определенную приложением.</span><span class="sxs-lookup"><span data-stu-id="863c3-218">Then, **EnumChildWindows** passes the handle to each child window to an application-defined callback function.</span></span> <span data-ttu-id="863c3-219">Также перечисляются дочерние окна данного родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-219">Descendant windows of the given parent window are also enumerated.</span></span>

#### <a name="messages"></a><span data-ttu-id="863c3-220">Сообщения</span><span class="sxs-lookup"><span data-stu-id="863c3-220">Messages</span></span>

<span data-ttu-id="863c3-221">Система передает входные сообщения дочернего окна непосредственно в дочернее окно; сообщения не передаются через родительское окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-221">The system passes a child window's input messages directly to the child window; the messages are not passed through the parent window.</span></span> <span data-ttu-id="863c3-222">Единственное исключение — только в том случае, если дочернее окно было отключено функцией [**енаблевиндов**](/windows/win32/api/winuser/nf-winuser-enablewindow) .</span><span class="sxs-lookup"><span data-stu-id="863c3-222">The only exception is if the child window has been disabled by the [**EnableWindow**](/windows/win32/api/winuser/nf-winuser-enablewindow) function.</span></span> <span data-ttu-id="863c3-223">В этом случае система передает все входные сообщения, которые были бы потеряны в дочернем окне, в родительском окне.</span><span class="sxs-lookup"><span data-stu-id="863c3-223">In this case, the system passes any input messages that would have gone to the child window to the parent window instead.</span></span> <span data-ttu-id="863c3-224">Это позволяет родительскому окну проверять входные сообщения и при необходимости включать дочернее окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-224">This permits the parent window to examine the input messages and enable the child window, if necessary.</span></span>

<span data-ttu-id="863c3-225">Дочернее окно может иметь уникальный целочисленный идентификатор.</span><span class="sxs-lookup"><span data-stu-id="863c3-225">A child window can have a unique integer identifier.</span></span> <span data-ttu-id="863c3-226">При работе с окнами управления важны идентификаторы дочерних окон.</span><span class="sxs-lookup"><span data-stu-id="863c3-226">Child window identifiers are important when working with control windows.</span></span> <span data-ttu-id="863c3-227">Приложение направляет действие элемента управления, отправляя его сообщения.</span><span class="sxs-lookup"><span data-stu-id="863c3-227">An application directs a control's activity by sending it messages.</span></span> <span data-ttu-id="863c3-228">Приложение использует идентификатор дочернего окна элемента управления для направления сообщений в элемент управления.</span><span class="sxs-lookup"><span data-stu-id="863c3-228">The application uses the control's child window identifier to direct the messages to the control.</span></span> <span data-ttu-id="863c3-229">Кроме того, элемент управления отправляет сообщения уведомления родительскому окну.</span><span class="sxs-lookup"><span data-stu-id="863c3-229">In addition, a control sends notification messages to its parent window.</span></span> <span data-ttu-id="863c3-230">Сообщение уведомления содержит идентификатор дочернего окна элемента управления, который используется родительским элементом для указания того, какой элемент управления отправил сообщение.</span><span class="sxs-lookup"><span data-stu-id="863c3-230">A notification message includes the control's child window identifier, which the parent uses to identify which control sent the message.</span></span> <span data-ttu-id="863c3-231">Приложение указывает идентификатор дочернего окна для других типов дочерних окон, присвоив параметру *HMENU* функции [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) значение, а не маркер меню.</span><span class="sxs-lookup"><span data-stu-id="863c3-231">An application specifies the child-window identifier for other types of child windows by setting the *hMenu* parameter of the [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) function to a value rather than a menu handle.</span></span>

### <a name="layered-windows"></a><span data-ttu-id="863c3-232">Многослойные окна</span><span class="sxs-lookup"><span data-stu-id="863c3-232">Layered Windows</span></span>

<span data-ttu-id="863c3-233">Использование многоуровневого окна может значительно повысить производительность и визуальные эффекты для окна с сложной фигурой, анимировать ее фигуру или использовать альфа-эффекты смешения.</span><span class="sxs-lookup"><span data-stu-id="863c3-233">Using a layered window can significantly improve performance and visual effects for a window that has a complex shape, animates its shape, or wishes to use alpha blending effects.</span></span> <span data-ttu-id="863c3-234">Система автоматически создает и перерисовывает многослойные окна и окна базовых приложений.</span><span class="sxs-lookup"><span data-stu-id="863c3-234">The system automatically composes and repaints layered windows and the windows of underlying applications.</span></span> <span data-ttu-id="863c3-235">В результате этого многослойные окна отображаются плавно, без мерцания типов сложных окон.</span><span class="sxs-lookup"><span data-stu-id="863c3-235">As a result, layered windows are rendered smoothly, without the flickering typical of complex window regions.</span></span> <span data-ttu-id="863c3-236">Кроме того, многоуровневые окна могут быть частично прозрачными, то есть с альфа-смешением.</span><span class="sxs-lookup"><span data-stu-id="863c3-236">In addition, layered windows can be partially translucent, that is, alpha-blended.</span></span>

<span data-ttu-id="863c3-237">Чтобы создать многоуровневый окно, укажите многоуровневый расширенный стиль окна **WS \_ ex \_** при вызове функции [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) или вызовите функцию [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) , чтобы установить **WS \_ ex \_** после создания окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-237">To create a layered window, specify the **WS\_EX\_LAYERED** extended window style when calling the [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) function, or call the [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) function to set **WS\_EX\_LAYERED** after the window has been created.</span></span> <span data-ttu-id="863c3-238">После вызова **CreateWindowEx** многоуровневое окно не станет видимым, пока для этого окна не будет вызвана функция [**SetLayeredWindowAttributes**](/windows/win32/api/winuser/nf-winuser-setlayeredwindowattributes) или [**упдателайередвиндов**](/windows/win32/api/winuser/nf-winuser-updatelayeredwindow) .</span><span class="sxs-lookup"><span data-stu-id="863c3-238">After the **CreateWindowEx** call, the layered window will not become visible until the [**SetLayeredWindowAttributes**](/windows/win32/api/winuser/nf-winuser-setlayeredwindowattributes) or [**UpdateLayeredWindow**](/windows/win32/api/winuser/nf-winuser-updatelayeredwindow) function has been called for this window.</span></span>

> [!Note]  
> <span data-ttu-id="863c3-239">Начиная с Windows 8, **WS \_ ex \_** можно использовать с дочерними окнами и окнами верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="863c3-239">Beginning with Windows 8, **WS\_EX\_LAYERED** can be used with child windows and top-level windows.</span></span> <span data-ttu-id="863c3-240">Предыдущие версии Windows поддерживают **WS \_ ex \_** только для окон верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="863c3-240">Previous Windows versions support **WS\_EX\_LAYERED** only for top-level windows.</span></span>

 

<span data-ttu-id="863c3-241">Чтобы задать уровень непрозрачности или ключ цвета прозрачности для данного многоуровневого окна, вызовите [**SetLayeredWindowAttributes**](/windows/win32/api/winuser/nf-winuser-setlayeredwindowattributes).</span><span class="sxs-lookup"><span data-stu-id="863c3-241">To set the opacity level or the transparency color key for a given layered window, call [**SetLayeredWindowAttributes**](/windows/win32/api/winuser/nf-winuser-setlayeredwindowattributes).</span></span> <span data-ttu-id="863c3-242">После вызова система по-прежнему может запрашивать прорисовку окна при отображении окна или изменении его размера.</span><span class="sxs-lookup"><span data-stu-id="863c3-242">After the call, the system may still ask the window to paint when the window is shown or resized.</span></span> <span data-ttu-id="863c3-243">Однако, поскольку система сохраняет изображение многоуровневого окна, система не запрашивает у окна прорисовку, если ее части выводятся в результате относительных перемещений окна на рабочем столе.</span><span class="sxs-lookup"><span data-stu-id="863c3-243">However, because the system stores the image of a layered window, the system will not ask the window to paint if parts of it are revealed as a result of relative window moves on the desktop.</span></span> <span data-ttu-id="863c3-244">Устаревшие приложения не нуждаются в реструктуризации кода рисования, если требуется добавить полупрозрачность или эффекты прозрачности для окна, поскольку система перенаправляет Рисование окон, именуемых **SetLayeredWindowAttributes** , в память за пределами экрана и перерисовывает ее для достижения желаемого эффекта.</span><span class="sxs-lookup"><span data-stu-id="863c3-244">Legacy applications do not need to restructure their painting code if they want to add translucency or transparency effects for a window, because the system redirects the painting of windows that called **SetLayeredWindowAttributes** into off-screen memory and recomposes it to achieve the desired effect.</span></span>

<span data-ttu-id="863c3-245">Для ускорения и более эффективной анимации или при необходимости для альфа-составляющей необходимо вызвать [**упдателайередвиндов**](/windows/win32/api/winuser/nf-winuser-updatelayeredwindow).</span><span class="sxs-lookup"><span data-stu-id="863c3-245">For faster and more efficient animation or if per-pixel alpha is needed, call [**UpdateLayeredWindow**](/windows/win32/api/winuser/nf-winuser-updatelayeredwindow).</span></span> <span data-ttu-id="863c3-246">**Упдателайередвиндов** следует использовать в основном, когда приложение должно напрямую предоставлять форму и содержимое многоуровневого окна без использования механизма перенаправления, предоставляемого системой через [**SetLayeredWindowAttributes**](/windows/win32/api/winuser/nf-winuser-setlayeredwindowattributes).</span><span class="sxs-lookup"><span data-stu-id="863c3-246">**UpdateLayeredWindow** should be used primarily when the application must directly supply the shape and content of a layered window, without using the redirection mechanism the system provides through [**SetLayeredWindowAttributes**](/windows/win32/api/winuser/nf-winuser-setlayeredwindowattributes).</span></span> <span data-ttu-id="863c3-247">Кроме того, использование **упдателайередвиндов** напрямую использует память более эффективно, поскольку системе не требуется дополнительная память, необходимая для хранения образа перенаправленного окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-247">In addition, using **UpdateLayeredWindow** directly uses memory more efficiently, because the system does not need the additional memory required for storing the image of the redirected window.</span></span> <span data-ttu-id="863c3-248">Чтобы обеспечить максимальную эффективность анимации окон, вызовите **упдателайередвиндов** , чтобы изменить расположение и размер многоуровневого окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-248">For maximum efficiency in animating windows, call **UpdateLayeredWindow** to change the position and the size of a layered window.</span></span> <span data-ttu-id="863c3-249">Обратите внимание, что после вызова **SetLayeredWindowAttributes** последующие вызовы **упдателайередвиндов** завершатся ошибкой до тех пор, пока не будет сброшен бит стиля слоя и не установится снова.</span><span class="sxs-lookup"><span data-stu-id="863c3-249">Please note that after **SetLayeredWindowAttributes** has been called, subsequent **UpdateLayeredWindow** calls will fail until the layering style bit is cleared and set again.</span></span>

<span data-ttu-id="863c3-250">Проверка нажатия многоуровневого окна основана на фигуре и прозрачности окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-250">Hit testing of a layered window is based on the shape and transparency of the window.</span></span> <span data-ttu-id="863c3-251">Это означает, что области окна, имеющие цветовой ключ или альфа-значение которого равно нулю, позволяют передавать сообщения с помощью мыши.</span><span class="sxs-lookup"><span data-stu-id="863c3-251">This means that the areas of the window that are color-keyed or whose alpha value is zero will let the mouse messages through.</span></span> <span data-ttu-id="863c3-252">Однако если в многоуровневом окне имеется прозрачный расширенный стиль **окна \_ WS \_ ex** , то форма многоуровневого окна будет проигнорирована, а события мыши передаются в другие окна под слоеным окном.</span><span class="sxs-lookup"><span data-stu-id="863c3-252">However, if the layered window has the **WS\_EX\_TRANSPARENT** extended window style, the shape of the layered window will be ignored and the mouse events will be passed to other windows underneath the layered window.</span></span>

### <a name="message-only-windows"></a><span data-ttu-id="863c3-253">Message-Only Windows</span><span class="sxs-lookup"><span data-stu-id="863c3-253">Message-Only Windows</span></span>

<span data-ttu-id="863c3-254">Окно, предназначенное *только для сообщений* , позволяет отправлять и получать сообщения.</span><span class="sxs-lookup"><span data-stu-id="863c3-254">A *message-only window* enables you to send and receive messages.</span></span> <span data-ttu-id="863c3-255">Он не отображается, не имеет z-порядка, не может быть перечислен и не получает широковещательные сообщения.</span><span class="sxs-lookup"><span data-stu-id="863c3-255">It is not visible, has no z-order, cannot be enumerated, and does not receive broadcast messages.</span></span> <span data-ttu-id="863c3-256">Окно просто отправляет сообщения.</span><span class="sxs-lookup"><span data-stu-id="863c3-256">The window simply dispatches messages.</span></span>

<span data-ttu-id="863c3-257">Чтобы создать окно только с сообщением, укажите константу [ \_ сообщения HWND](#message-only-windows) или дескриптор существующего окна только для сообщений в параметре *хвндпарент* функции [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) .</span><span class="sxs-lookup"><span data-stu-id="863c3-257">To create a message-only window, specify the [HWND\_MESSAGE](#message-only-windows) constant or a handle to an existing message-only window in the *hWndParent* parameter of the [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) function.</span></span> <span data-ttu-id="863c3-258">Можно также изменить существующее окно на окно только сообщения, указав \_ сообщение HWND в параметре *Хвндневпарент* функции [**сетпарент**](/windows/win32/api/winuser/nf-winuser-setparent) .</span><span class="sxs-lookup"><span data-stu-id="863c3-258">You can also change an existing window to a message-only window by specifying HWND\_MESSAGE in the *hWndNewParent* parameter of the [**SetParent**](/windows/win32/api/winuser/nf-winuser-setparent) function.</span></span>

<span data-ttu-id="863c3-259">Чтобы найти окна только для сообщений, укажите [ \_ сообщение HWND](#message-only-windows) в параметре *хвндпарент* функции [**FindWindowEx**](/windows/win32/api/winuser/nf-winuser-findwindowexa) .</span><span class="sxs-lookup"><span data-stu-id="863c3-259">To find message-only windows, specify [HWND\_MESSAGE](#message-only-windows) in the *hwndParent* parameter of the [**FindWindowEx**](/windows/win32/api/winuser/nf-winuser-findwindowexa) function.</span></span> <span data-ttu-id="863c3-260">Кроме того, **FindWindowEx** выполняет поиск окон только для сообщений, а также окон верхнего уровня, если оба параметра *хвндпарент* и *хвндчилдафтер* имеют **значение NULL**.</span><span class="sxs-lookup"><span data-stu-id="863c3-260">In addition, **FindWindowEx** searches message-only windows as well as top-level windows if both the *hwndParent* and *hwndChildAfter* parameters are **NULL**.</span></span>

## <a name="window-relationships"></a><span data-ttu-id="863c3-261">Связи окон</span><span class="sxs-lookup"><span data-stu-id="863c3-261">Window Relationships</span></span>

<span data-ttu-id="863c3-262">Существует множество способов связи окна с пользователем или с другим окном.</span><span class="sxs-lookup"><span data-stu-id="863c3-262">There are many ways that a window can relate to the user or another window.</span></span> <span data-ttu-id="863c3-263">Окно может быть владельцем окна, передним окном или фоновым окном.</span><span class="sxs-lookup"><span data-stu-id="863c3-263">A window may be an owned window, foreground window, or background window.</span></span> <span data-ttu-id="863c3-264">Окно также имеет z-порядок относительно других окон.</span><span class="sxs-lookup"><span data-stu-id="863c3-264">A window also has a z-order relative to other windows.</span></span> <span data-ttu-id="863c3-265">Дополнительные сведения см. в следующих разделах:</span><span class="sxs-lookup"><span data-stu-id="863c3-265">For more information, see the following topics:</span></span>

-   [<span data-ttu-id="863c3-266">Передний и фоновый окна</span><span class="sxs-lookup"><span data-stu-id="863c3-266">Foreground and Background Windows</span></span>](#foreground-and-background-windows)
-   [<span data-ttu-id="863c3-267">Собственные окна</span><span class="sxs-lookup"><span data-stu-id="863c3-267">Owned Windows</span></span>](#owned-windows)
-   [<span data-ttu-id="863c3-268">Z-порядок</span><span class="sxs-lookup"><span data-stu-id="863c3-268">Z-Order</span></span>](#z-order)

### <a name="foreground-and-background-windows"></a><span data-ttu-id="863c3-269">Передний и фоновый окна</span><span class="sxs-lookup"><span data-stu-id="863c3-269">Foreground and Background Windows</span></span>

<span data-ttu-id="863c3-270">Каждый процесс может иметь несколько потоков выполнения, и каждый поток может создавать окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-270">Each process can have multiple threads of execution, and each thread can create windows.</span></span> <span data-ttu-id="863c3-271">Поток, создавший окно, с помощью которого в данный момент работает пользователь, называется основным потоком, а окно называется *передним планом*.</span><span class="sxs-lookup"><span data-stu-id="863c3-271">The thread that created the window with which the user is currently working is called the foreground thread, and the window is called the *foreground window*.</span></span> <span data-ttu-id="863c3-272">Все остальные потоки являются фоновыми потоками, а окна, созданные фоновыми потоками, называются *фоновыми окнами*.</span><span class="sxs-lookup"><span data-stu-id="863c3-272">All other threads are background threads, and the windows created by background threads are called *background windows*.</span></span>

<span data-ttu-id="863c3-273">Каждый поток имеет уровень приоритета, определяющий количество времени ЦП, получаемого потоком.</span><span class="sxs-lookup"><span data-stu-id="863c3-273">Each thread has a priority level that determines the amount of CPU time the thread receives.</span></span> <span data-ttu-id="863c3-274">Хотя приложение может устанавливать уровень приоритета своих потоков, обычно поток переднего плана имеет немного более высокий уровень приоритета, чем фоновые потоки.</span><span class="sxs-lookup"><span data-stu-id="863c3-274">Although an application can set the priority level of its threads, normally the foreground thread has a slightly higher priority level than the background threads.</span></span> <span data-ttu-id="863c3-275">Так как он имеет более высокий приоритет, поток переднего плана получает больше времени ЦП, чем в фоновых потоках.</span><span class="sxs-lookup"><span data-stu-id="863c3-275">Because it has a higher priority, the foreground thread receives more CPU time than the background threads.</span></span> <span data-ttu-id="863c3-276">Поток переднего плана имеет нормальный базовый приоритет 9; фоновый поток имеет нормальный базовый приоритет 7.</span><span class="sxs-lookup"><span data-stu-id="863c3-276">The foreground thread has a normal base priority of 9; a background thread has a normal base priority of 7.</span></span>

<span data-ttu-id="863c3-277">Пользователь задает окно переднего плана, щелкая окно или используя сочетание клавиш ALT + TAB или ALT + ESC.</span><span class="sxs-lookup"><span data-stu-id="863c3-277">The user sets the foreground window by clicking a window, or by using the ALT+TAB or ALT+ESC key combination.</span></span> <span data-ttu-id="863c3-278">Чтобы получить маркер для окна переднего плана, используйте функцию [**жетфореграундвиндов**](/windows/win32/api/winuser/nf-winuser-getforegroundwindow) .</span><span class="sxs-lookup"><span data-stu-id="863c3-278">To retrieve a handle to the foreground window, use the [**GetForegroundWindow**](/windows/win32/api/winuser/nf-winuser-getforegroundwindow) function.</span></span> <span data-ttu-id="863c3-279">Чтобы проверить, является ли окно приложения передним, Сравните маркер, возвращенный **жетфореграундвиндов** , с этим окном приложения.</span><span class="sxs-lookup"><span data-stu-id="863c3-279">To check if your application window is the foreground window, compare the handle returned by **GetForegroundWindow** to that of your application window.</span></span>

<span data-ttu-id="863c3-280">Приложение задает окно переднего плана с помощью функции [**сетфореграундвиндов**](/windows/win32/api/winuser/nf-winuser-setforegroundwindow) .</span><span class="sxs-lookup"><span data-stu-id="863c3-280">An application sets the foreground window by using the [**SetForegroundWindow**](/windows/win32/api/winuser/nf-winuser-setforegroundwindow) function.</span></span>

<span data-ttu-id="863c3-281">Система позволяет определить, какие процессы могут устанавливать окно переднего плана.</span><span class="sxs-lookup"><span data-stu-id="863c3-281">The system restricts which processes can set the foreground window.</span></span> <span data-ttu-id="863c3-282">Процесс может задать окно переднего плана только в том случае, если:</span><span class="sxs-lookup"><span data-stu-id="863c3-282">A process can set the foreground window only if:</span></span>

- <span data-ttu-id="863c3-283">Справедливы все следующие условия.</span><span class="sxs-lookup"><span data-stu-id="863c3-283">All of the following conditions are true:</span></span>
  - <span data-ttu-id="863c3-284">Процесс, вызывающий **сетфореграундвиндов** , относится к классу настольных приложений, а не к приложению UWP или приложению Магазина Windows, разработанному для Windows 8 или 8,1.</span><span class="sxs-lookup"><span data-stu-id="863c3-284">The process calling **SetForegroundWindow** belongs to a desktop application, not a UWP app or a Windows Store app designed for Windows 8 or 8.1.</span></span>
  - <span data-ttu-id="863c3-285">В процессе переднего плана не отключены вызовы **сетфореграундвиндов** по предыдущему вызову функции [**локксетфореграундвиндов**](/windows/win32/api/winuser/nf-winuser-locksetforegroundwindow) .</span><span class="sxs-lookup"><span data-stu-id="863c3-285">The foreground process has not disabled calls to **SetForegroundWindow** by a previous call to the [**LockSetForegroundWindow**](/windows/win32/api/winuser/nf-winuser-locksetforegroundwindow) function.</span></span>
  - <span data-ttu-id="863c3-286">Истекло время ожидания блокировки переднего плана (см. [ **SPI_GETFOREGROUNDLOCKTIMEOUT** в **системпараметерсинфо**](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa#SPI_GETFOREGROUNDLOCKTIMEOUT)).</span><span class="sxs-lookup"><span data-stu-id="863c3-286">The foreground lock time-out has expired (see [**SPI_GETFOREGROUNDLOCKTIMEOUT** in **SystemParametersInfo**](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa#SPI_GETFOREGROUNDLOCKTIMEOUT)).</span></span>
  - <span data-ttu-id="863c3-287">Нет активных меню.</span><span class="sxs-lookup"><span data-stu-id="863c3-287">No menus are active.</span></span>
- <span data-ttu-id="863c3-288">Кроме того, выполняется по крайней мере одно из следующих условий.</span><span class="sxs-lookup"><span data-stu-id="863c3-288">Additionally, at least one of the following conditions is true:</span></span>
  - <span data-ttu-id="863c3-289">Вызывающий процесс является основным процессом.</span><span class="sxs-lookup"><span data-stu-id="863c3-289">The calling process is the foreground process.</span></span>
  - <span data-ttu-id="863c3-290">Вызывающий процесс был запущен процессом переднего плана.</span><span class="sxs-lookup"><span data-stu-id="863c3-290">The calling process was started by the foreground process.</span></span>
  - <span data-ttu-id="863c3-291">В настоящее время нет окна переднего плана, и поэтому фоновый процесс отсутствует.</span><span class="sxs-lookup"><span data-stu-id="863c3-291">There is currently no foreground window, and thus no foreground process.</span></span>
  - <span data-ttu-id="863c3-292">Вызывающий процесс получил Последнее событие ввода.</span><span class="sxs-lookup"><span data-stu-id="863c3-292">The calling process received the last input event.</span></span>
  - <span data-ttu-id="863c3-293">Выполняется отладка либо процесса переднего плана, либо вызывающего процесса.</span><span class="sxs-lookup"><span data-stu-id="863c3-293">Either the foreground process or the calling process is being debugged.</span></span>

<span data-ttu-id="863c3-294">Процессу может быть запрещено устанавливать окно переднего плана, даже если оно соответствует этим условиям.</span><span class="sxs-lookup"><span data-stu-id="863c3-294">It is possible for a process to be denied the right to set the foreground window even if it meets these conditions.</span></span>

<span data-ttu-id="863c3-295">Процесс, который может задать передний план, может позволить другому процессу установить окно переднего плана путем вызова функции [**алловсетфореграундвиндов**](/windows/win32/api/winuser/nf-winuser-allowsetforegroundwindow) или путем вызова функции [**броадкастсистеммессаже**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage) с флагом **БСФ \_ алловсфв** .</span><span class="sxs-lookup"><span data-stu-id="863c3-295">A process that can set the foreground window can enable another process to set the foreground window by calling the [**AllowSetForegroundWindow**](/windows/win32/api/winuser/nf-winuser-allowsetforegroundwindow) function, or by calling the [**BroadcastSystemMessage**](/windows/win32/api/winuser/nf-winuser-broadcastsystemmessage) function with the **BSF\_ALLOWSFW** flag.</span></span> <span data-ttu-id="863c3-296">Процесс переднего плана может отключить вызовы [**сетфореграундвиндов**](/windows/win32/api/winuser/nf-winuser-setforegroundwindow) , вызвав функцию [**локксетфореграундвиндов**](/windows/win32/api/winuser/nf-winuser-locksetforegroundwindow) .</span><span class="sxs-lookup"><span data-stu-id="863c3-296">The foreground process can disable calls to [**SetForegroundWindow**](/windows/win32/api/winuser/nf-winuser-setforegroundwindow) by calling the [**LockSetForegroundWindow**](/windows/win32/api/winuser/nf-winuser-locksetforegroundwindow) function.</span></span>

### <a name="owned-windows"></a><span data-ttu-id="863c3-297">Собственные окна</span><span class="sxs-lookup"><span data-stu-id="863c3-297">Owned Windows</span></span>

<span data-ttu-id="863c3-298">Перекрытие или всплывающее окно может принадлежать другому перекрытому или всплывающему окну.</span><span class="sxs-lookup"><span data-stu-id="863c3-298">An overlapped or pop-up window can be owned by another overlapped or pop-up window.</span></span> <span data-ttu-id="863c3-299">В качестве владельца накладывается несколько ограничений на окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-299">Being owned places several constraints on a window.</span></span>

-   <span data-ttu-id="863c3-300">Собственное окно всегда находится над его владельцем в z-порядке.</span><span class="sxs-lookup"><span data-stu-id="863c3-300">An owned window is always above its owner in the z-order.</span></span>
-   <span data-ttu-id="863c3-301">Система автоматически удаляет собственное окно, когда его владелец уничтожается.</span><span class="sxs-lookup"><span data-stu-id="863c3-301">The system automatically destroys an owned window when its owner is destroyed.</span></span>
-   <span data-ttu-id="863c3-302">Принадлежащее окно скрыто, когда его владелец сведен к минимальному.</span><span class="sxs-lookup"><span data-stu-id="863c3-302">An owned window is hidden when its owner is minimized.</span></span>

<span data-ttu-id="863c3-303">Только перекрывающиеся или всплывающие окна могут быть окном-владельцем; дочернее окно не может быть окном-владельцем.</span><span class="sxs-lookup"><span data-stu-id="863c3-303">Only an overlapped or pop-up window can be an owner window; a child window cannot be an owner window.</span></span> <span data-ttu-id="863c3-304">Приложение создает собственное окно, указывая маркер окна владельца в качестве параметра *хвндпарент* объекта [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) при создании окна с стилем **\_ меню** [**WS \_ OVERLAPPED**](window-styles.md) или WS.</span><span class="sxs-lookup"><span data-stu-id="863c3-304">An application creates an owned window by specifying the owner's window handle as the *hwndParent* parameter of [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) when it creates a window with the [**WS\_OVERLAPPED**](window-styles.md) or **WS\_POPUP** style.</span></span> <span data-ttu-id="863c3-305">Параметр *хвндпарент* должен обозначать перекрывающиеся или всплывающие окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-305">The *hwndParent* parameter must identify an overlapped or pop-up window.</span></span> <span data-ttu-id="863c3-306">Если *хвндпарент* определяет дочернее окно, система назначает владение родительским окном верхнего уровня дочернего окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-306">If *hwndParent* identifies a child window, the system assigns ownership to the top-level parent window of the child window.</span></span> <span data-ttu-id="863c3-307">После создания собственного окна приложение не может передать владение окном другому окну.</span><span class="sxs-lookup"><span data-stu-id="863c3-307">After creating an owned window, an application cannot transfer ownership of the window to another window.</span></span>

<span data-ttu-id="863c3-308">Диалоговые окна и окна сообщений являются собственными окнами по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="863c3-308">Dialog boxes and message boxes are owned windows by default.</span></span> <span data-ttu-id="863c3-309">Приложение задает окно-владельца при вызове функции, которая создает диалоговое окно или поле сообщения.</span><span class="sxs-lookup"><span data-stu-id="863c3-309">An application specifies the owner window when calling a function that creates a dialog box or message box.</span></span>

<span data-ttu-id="863c3-310">Приложение может [**использовать функцию getHandler**](/windows/win32/api/winuser/nf-winuser-getwindow) с флагом **\_ владельца GW** для получения маркера для владельца окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-310">An application can use the [**GetWindow**](/windows/win32/api/winuser/nf-winuser-getwindow) function with the **GW\_OWNER** flag to retrieve a handle to a window's owner.</span></span>

### <a name="z-order"></a><span data-ttu-id="863c3-311">Z-порядок</span><span class="sxs-lookup"><span data-stu-id="863c3-311">Z-Order</span></span>

<span data-ttu-id="863c3-312">*Z-порядок* окна указывает на расположение окна в стеке перекрывающихся окон.</span><span class="sxs-lookup"><span data-stu-id="863c3-312">The *z-order* of a window indicates the window's position in a stack of overlapping windows.</span></span> <span data-ttu-id="863c3-313">Этот стек окна ориентирован на мнимую ось, ось z и расширяет наружу с экрана.</span><span class="sxs-lookup"><span data-stu-id="863c3-313">This window stack is oriented along an imaginary axis, the z-axis, extending outward from the screen.</span></span> <span data-ttu-id="863c3-314">Окно, расположенное в верхней части z-порядка, перекрывает все остальные окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-314">The window at the top of the z-order overlaps all other windows.</span></span> <span data-ttu-id="863c3-315">Окно в нижней части z-порядка перекрывается всеми остальными окнами.</span><span class="sxs-lookup"><span data-stu-id="863c3-315">The window at the bottom of the z-order is overlapped by all other windows.</span></span>

<span data-ttu-id="863c3-316">В одном списке система сохраняет z-порядок.</span><span class="sxs-lookup"><span data-stu-id="863c3-316">The system maintains the z-order in a single list.</span></span> <span data-ttu-id="863c3-317">Он добавляет Windows в z-порядок в зависимости от того, являются ли они верхними окнами, окнами верхнего уровня или дочерними окнами.</span><span class="sxs-lookup"><span data-stu-id="863c3-317">It adds windows to the z-order based on whether they are topmost windows, top-level windows, or child windows.</span></span> <span data-ttu-id="863c3-318">*Верхнее окно* перекрывает все остальные окна, не являющиеся самым верхним, независимо от того, является ли это окно активным или передним.</span><span class="sxs-lookup"><span data-stu-id="863c3-318">A *topmost window* overlaps all other non-topmost windows, regardless of whether it is the active or foreground window.</span></span> <span data-ttu-id="863c3-319">Самое верхнее окно имеет **стиль \_ WS \_ ex** .</span><span class="sxs-lookup"><span data-stu-id="863c3-319">A topmost window has the **WS\_EX\_TOPMOST** style.</span></span> <span data-ttu-id="863c3-320">Все самые верхние окна отображаются в z-порядке до всех окон, не являющихся самым верхними.</span><span class="sxs-lookup"><span data-stu-id="863c3-320">All topmost windows appear in the z-order before any non-topmost windows.</span></span> <span data-ttu-id="863c3-321">Дочернее окно группируются с его родителем в z-порядке.</span><span class="sxs-lookup"><span data-stu-id="863c3-321">A child window is grouped with its parent in z-order.</span></span>

<span data-ttu-id="863c3-322">Когда приложение создает окно, система помещает его в верхнюю часть z-порядка для Windows того же типа.</span><span class="sxs-lookup"><span data-stu-id="863c3-322">When an application creates a window, the system puts it at the top of the z-order for windows of the same type.</span></span> <span data-ttu-id="863c3-323">Функцию [**брингвиндовтотоп**](/windows/win32/api/winuser/nf-winuser-bringwindowtotop) можно использовать для перевода окна в начало z-порядка для Windows того же типа.</span><span class="sxs-lookup"><span data-stu-id="863c3-323">You can use the [**BringWindowToTop**](/windows/win32/api/winuser/nf-winuser-bringwindowtotop) function to bring a window to the top of the z-order for windows of the same type.</span></span> <span data-ttu-id="863c3-324">Можно изменить z-порядок с помощью функций [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos) и [**дефервиндовпос**](/windows/win32/api/winuser/nf-winuser-deferwindowpos) .</span><span class="sxs-lookup"><span data-stu-id="863c3-324">You can rearrange the z-order by using the [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos) and [**DeferWindowPos**](/windows/win32/api/winuser/nf-winuser-deferwindowpos) functions.</span></span>

<span data-ttu-id="863c3-325">Пользователь изменяет z-порядок, активируя другое окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-325">The user changes the z-order by activating a different window.</span></span> <span data-ttu-id="863c3-326">Система позиционирует активное окно в верхней части z-порядка для Windows того же типа.</span><span class="sxs-lookup"><span data-stu-id="863c3-326">The system positions the active window at the top of the z-order for windows of the same type.</span></span> <span data-ttu-id="863c3-327">Когда окно поступает в начало z-порядка, дочерние окна должны быть.</span><span class="sxs-lookup"><span data-stu-id="863c3-327">When a window comes to the top of z-order, so do its child windows.</span></span> <span data-ttu-id="863c3-328">Функцию [**жеттопвиндов**](/windows/win32/api/winuser/nf-winuser-gettopwindow) можно использовать для поиска всех дочерних окон родительского окна и возврата маркера в дочернее окно, которое имеет наибольшее значение в z-порядке.</span><span class="sxs-lookup"><span data-stu-id="863c3-328">You can use the [**GetTopWindow**](/windows/win32/api/winuser/nf-winuser-gettopwindow) function to search all child windows of a parent window and return a handle to the child window that is highest in z-order.</span></span> <span data-ttu-id="863c3-329">Функция [**жетнекствиндов**](/windows/win32/api/winuser/nf-winuser-getnextwindow) Извлекает маркер в следующее или предыдущее окно в z-порядке.</span><span class="sxs-lookup"><span data-stu-id="863c3-329">The [**GetNextWindow**](/windows/win32/api/winuser/nf-winuser-getnextwindow) function retrieves a handle to the next or previous window in z-order.</span></span>

## <a name="window-show-state"></a><span data-ttu-id="863c3-330">Отображение состояния окна</span><span class="sxs-lookup"><span data-stu-id="863c3-330">Window Show State</span></span>

<span data-ttu-id="863c3-331">В любой момент времени окно может быть активным или неактивным; скрытый или видимый; и сведены, развернутые или восстановленные.</span><span class="sxs-lookup"><span data-stu-id="863c3-331">At any one given time, a window may be active or inactive; hidden or visible; and minimized, maximized, or restored.</span></span> <span data-ttu-id="863c3-332">Эти качества называются совместно по мере *отображения состояния окна*.</span><span class="sxs-lookup"><span data-stu-id="863c3-332">These qualities are referred to collectively as the *window show state*.</span></span> <span data-ttu-id="863c3-333">В следующих разделах описывается отображение состояния окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-333">The following topics discuss the window show state:</span></span>

-   [<span data-ttu-id="863c3-334">Активное окно</span><span class="sxs-lookup"><span data-stu-id="863c3-334">Active Window</span></span>](#active-window)
-   [<span data-ttu-id="863c3-335">Отключенные окна</span><span class="sxs-lookup"><span data-stu-id="863c3-335">Disabled Windows</span></span>](#disabled-windows)
-   [<span data-ttu-id="863c3-336">Видимость окна</span><span class="sxs-lookup"><span data-stu-id="863c3-336">Window Visibility</span></span>](#window-visibility)
-   [<span data-ttu-id="863c3-337">Сведенные, развернутые и восстановленные окна</span><span class="sxs-lookup"><span data-stu-id="863c3-337">Minimized, Maximized, and Restored Windows</span></span>](#minimized-maximized-and-restored-windows)

### <a name="active-window"></a><span data-ttu-id="863c3-338">Активное окно</span><span class="sxs-lookup"><span data-stu-id="863c3-338">Active Window</span></span>

<span data-ttu-id="863c3-339">*Активное окно* — это окно верхнего уровня приложения, с которым пользователь работает в данный момент.</span><span class="sxs-lookup"><span data-stu-id="863c3-339">An *active window* is the top-level window of the application with which the user is currently working.</span></span> <span data-ttu-id="863c3-340">Чтобы позволить пользователю легко определить активное окно, система размещает его в верхней части z-порядка и изменяет цвет заголовка и границы окна на определенные системой цвета в активном окне.</span><span class="sxs-lookup"><span data-stu-id="863c3-340">To allow the user to easily identify the active window, the system places it at the top of the z-order and changes the color of its title bar and border to the system-defined active window colors.</span></span> <span data-ttu-id="863c3-341">Только окно верхнего уровня может быть активным окном.</span><span class="sxs-lookup"><span data-stu-id="863c3-341">Only a top-level window can be an active window.</span></span> <span data-ttu-id="863c3-342">Когда пользователь работает с дочерним окном, система активирует родительское окно верхнего уровня, связанное с дочерним окном.</span><span class="sxs-lookup"><span data-stu-id="863c3-342">When the user is working with a child window, the system activates the top-level parent window associated with the child window.</span></span>

<span data-ttu-id="863c3-343">Только одно окно верхнего уровня в системе активно за раз.</span><span class="sxs-lookup"><span data-stu-id="863c3-343">Only one top-level window in the system is active at a time.</span></span> <span data-ttu-id="863c3-344">Пользователь активирует окно верхнего уровня, щелкая его (или одно из его дочерних окон) или используя сочетание клавиш ALT + ESC или ALT + TAB.</span><span class="sxs-lookup"><span data-stu-id="863c3-344">The user activates a top-level window by clicking it (or one of its child windows), or by using the ALT+ESC or ALT+TAB key combination.</span></span> <span data-ttu-id="863c3-345">Приложение активирует окно верхнего уровня, вызывая функцию [**сетактивевиндов**](/windows/win32/api/winuser/nf-winuser-setactivewindow) .</span><span class="sxs-lookup"><span data-stu-id="863c3-345">An application activates a top-level window by calling the [**SetActiveWindow**](/windows/win32/api/winuser/nf-winuser-setactivewindow) function.</span></span> <span data-ttu-id="863c3-346">Другие функции могут вызвать активацию в системе другого окна верхнего уровня, включая [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos), [**дефервиндовпос**](/windows/win32/api/winuser/nf-winuser-deferwindowpos), [**сетвиндовплацемент**](/windows/win32/api/winuser/nf-winuser-setwindowplacement)и [**дестройвиндов**](/windows/win32/api/winuser/nf-winuser-destroywindow).</span><span class="sxs-lookup"><span data-stu-id="863c3-346">Other functions can cause the system to activate a different top-level window, including [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos), [**DeferWindowPos**](/windows/win32/api/winuser/nf-winuser-deferwindowpos), [**SetWindowPlacement**](/windows/win32/api/winuser/nf-winuser-setwindowplacement), and [**DestroyWindow**](/windows/win32/api/winuser/nf-winuser-destroywindow).</span></span> <span data-ttu-id="863c3-347">Хотя приложение может активировать другое окно верхнего уровня в любое время, чтобы не путать пользователя, оно должно делать это только в ответ на действие пользователя.</span><span class="sxs-lookup"><span data-stu-id="863c3-347">Although an application can activate a different top-level window at any time, to avoid confusing the user, it should do so only in response to a user action.</span></span> <span data-ttu-id="863c3-348">Приложение использует функцию [**жетактивевиндов**](/windows/win32/api/winuser/nf-winuser-getactivewindow) для получения маркера активного окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-348">An application uses the [**GetActiveWindow**](/windows/win32/api/winuser/nf-winuser-getactivewindow) function to retrieve a handle to the active window.</span></span>

<span data-ttu-id="863c3-349">Когда активация меняется от окна верхнего уровня одного приложения к окну верхнего уровня другого, система отправляет сообщение [**WM \_ активатеапп**](wm-activateapp.md) в оба приложения, уведомляя их об изменении.</span><span class="sxs-lookup"><span data-stu-id="863c3-349">When the activation changes from a top-level window of one application to the top-level window of another, the system sends a [**WM\_ACTIVATEAPP**](wm-activateapp.md) message to both applications, notifying them of the change.</span></span> <span data-ttu-id="863c3-350">Когда активация меняется на другое окно верхнего уровня в том же приложении, система отправляет как Windows, так и сообщение [**\_ активации WM**](../inputdev/wm-activate.md) .</span><span class="sxs-lookup"><span data-stu-id="863c3-350">When the activation changes to a different top-level window in the same application, the system sends both windows a [**WM\_ACTIVATE**](../inputdev/wm-activate.md) message.</span></span>

### <a name="disabled-windows"></a><span data-ttu-id="863c3-351">Отключенные окна</span><span class="sxs-lookup"><span data-stu-id="863c3-351">Disabled Windows</span></span>

<span data-ttu-id="863c3-352">Окно можно отключить.</span><span class="sxs-lookup"><span data-stu-id="863c3-352">A window can be disabled.</span></span> <span data-ttu-id="863c3-353">*Отключенное окно* не получает от пользователя ввод с клавиатуры или с помощью мыши, но может получать сообщения от других окон, из других приложений и из системы.</span><span class="sxs-lookup"><span data-stu-id="863c3-353">A *disabled window* receives no keyboard or mouse input from the user, but it can receive messages from other windows, from other applications, and from the system.</span></span> <span data-ttu-id="863c3-354">Приложение обычно отключает окно, чтобы пользователь не использовал окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-354">An application typically disables a window to prevent the user from using the window.</span></span> <span data-ttu-id="863c3-355">Например, приложение может отключить кнопку отправки в диалоговом окне, чтобы пользователь не мог его выбрать.</span><span class="sxs-lookup"><span data-stu-id="863c3-355">For example, an application may disable a push button in a dialog box to prevent the user from choosing it.</span></span> <span data-ttu-id="863c3-356">Приложение может включить отключенное окно в любое время; При включении окна восстанавливаются нормальные входные данные.</span><span class="sxs-lookup"><span data-stu-id="863c3-356">An application can enable a disabled window at any time; enabling a window restores normal input.</span></span>

<span data-ttu-id="863c3-357">По умолчанию окно активируется при создании.</span><span class="sxs-lookup"><span data-stu-id="863c3-357">By default, a window is enabled when created.</span></span> <span data-ttu-id="863c3-358">Однако приложение может задать стиль [**WS \_ disabled**](window-styles.md) , но для отключения нового окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-358">An application can specify the [**WS\_DISABLED**](window-styles.md) style, however, to disable a new window.</span></span> <span data-ttu-id="863c3-359">Приложение включает или отключает существующее окно с помощью функции [**енаблевиндов**](/windows/win32/api/winuser/nf-winuser-enablewindow) .</span><span class="sxs-lookup"><span data-stu-id="863c3-359">An application enables or disables an existing window by using the [**EnableWindow**](/windows/win32/api/winuser/nf-winuser-enablewindow) function.</span></span> <span data-ttu-id="863c3-360">Система отправляет сообщение о [**\_ включении WM**](wm-enable.md) в окно, когда его включенное состояние будет изменено.</span><span class="sxs-lookup"><span data-stu-id="863c3-360">The system sends a [**WM\_ENABLE**](wm-enable.md) message to a window when its enabled state is about to change.</span></span> <span data-ttu-id="863c3-361">Приложение может определить, включено ли окно с помощью функции [**исвиндовенаблед**](/windows/win32/api/winuser/nf-winuser-iswindowenabled) .</span><span class="sxs-lookup"><span data-stu-id="863c3-361">An application can determine whether a window is enabled by using the [**IsWindowEnabled**](/windows/win32/api/winuser/nf-winuser-iswindowenabled) function.</span></span>

<span data-ttu-id="863c3-362">Если дочернее окно отключено, система передает входные сообщения дочернего элемента мыши родительскому окну.</span><span class="sxs-lookup"><span data-stu-id="863c3-362">When a child window is disabled, the system passes the child's mouse input messages to the parent window.</span></span> <span data-ttu-id="863c3-363">Для определения того, следует ли включить дочернее окно, в родительском окне используются сообщения.</span><span class="sxs-lookup"><span data-stu-id="863c3-363">The parent uses the messages to determine whether to enable the child window.</span></span> <span data-ttu-id="863c3-364">Дополнительные сведения см. в разделе Ввод с помощью [мыши](../inputdev/mouse-input.md).</span><span class="sxs-lookup"><span data-stu-id="863c3-364">For more information, see [Mouse Input](../inputdev/mouse-input.md).</span></span>

<span data-ttu-id="863c3-365">Только одно окно может принимать ввод с клавиатуры; говорят, что это окно имеет фокус клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="863c3-365">Only one window at a time can receive keyboard input; that window is said to have the keyboard focus.</span></span> <span data-ttu-id="863c3-366">Если приложение использует функцию [**енаблевиндов**](/windows/win32/api/winuser/nf-winuser-enablewindow) для отключения окна фокуса клавиатуры, окно теряет фокус клавиатуры, а также отключает его.</span><span class="sxs-lookup"><span data-stu-id="863c3-366">If an application uses the [**EnableWindow**](/windows/win32/api/winuser/nf-winuser-enablewindow) function to disable a keyboard-focus window, the window loses the keyboard focus in addition to being disabled.</span></span> <span data-ttu-id="863c3-367">Затем **енаблевиндов** устанавливает фокус клавиатуры на **значение NULL**, означающее, что окно не имеет фокуса.</span><span class="sxs-lookup"><span data-stu-id="863c3-367">**EnableWindow** then sets the keyboard focus to **NULL**, meaning no window has the focus.</span></span> <span data-ttu-id="863c3-368">Если в дочернем окне или другом подчиненном окне есть фокус клавиатуры, то при отключении родительского окна фокус теряется.</span><span class="sxs-lookup"><span data-stu-id="863c3-368">If a child window, or other descendant window, has the keyboard focus, the descendant window loses the focus when the parent window is disabled.</span></span> <span data-ttu-id="863c3-369">Дополнительные сведения см. в разделе [Ввод с клавиатуры](../inputdev/keyboard-input.md).</span><span class="sxs-lookup"><span data-stu-id="863c3-369">For more information, see [Keyboard Input](../inputdev/keyboard-input.md).</span></span>

### <a name="window-visibility"></a><span data-ttu-id="863c3-370">Видимость окна</span><span class="sxs-lookup"><span data-stu-id="863c3-370">Window Visibility</span></span>

<span data-ttu-id="863c3-371">Окно может быть видимым или скрытым.</span><span class="sxs-lookup"><span data-stu-id="863c3-371">A window can be either visible or hidden.</span></span> <span data-ttu-id="863c3-372">Система отображает *видимое окно* на экране.</span><span class="sxs-lookup"><span data-stu-id="863c3-372">The system displays a *visible window* on the screen.</span></span> <span data-ttu-id="863c3-373">Он скрывает *скрытое окно* , не рисуя его.</span><span class="sxs-lookup"><span data-stu-id="863c3-373">It hides a *hidden window* by not drawing it.</span></span> <span data-ttu-id="863c3-374">Если окно видимое, пользователь может производить ввод в окно и видеть вывод окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-374">If a window is visible, the user can supply input to the window and view the window's output.</span></span> <span data-ttu-id="863c3-375">Если окно скрыто, оно эффективно отключено.</span><span class="sxs-lookup"><span data-stu-id="863c3-375">If a window is hidden, it is effectively disabled.</span></span> <span data-ttu-id="863c3-376">Скрытое окно может обрабатывать сообщения от системы или от других окон, но не может обрабатывать ввод от пользователя или отображать вывод.</span><span class="sxs-lookup"><span data-stu-id="863c3-376">A hidden window can process messages from the system or from other windows, but it cannot process input from the user or display output.</span></span> <span data-ttu-id="863c3-377">Приложение задает состояние видимости окна при создании окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-377">An application sets a window's visibility state when creating the window.</span></span> <span data-ttu-id="863c3-378">Позже приложение может изменить состояние видимости.</span><span class="sxs-lookup"><span data-stu-id="863c3-378">Later, the application can change the visibility state.</span></span>

<span data-ttu-id="863c3-379">Окно отображается, если для окна установлен стиль « [**WS \_ Visible**](window-styles.md) ».</span><span class="sxs-lookup"><span data-stu-id="863c3-379">A window is visible when the [**WS\_VISIBLE**](window-styles.md) style is set for the window.</span></span> <span data-ttu-id="863c3-380">По умолчанию функция [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) создает скрытое окно, если в приложении не указан стиль, **\_ видимый для WS** .</span><span class="sxs-lookup"><span data-stu-id="863c3-380">By default, the [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) function creates a hidden window unless the application specifies the **WS\_VISIBLE** style.</span></span> <span data-ttu-id="863c3-381">Как правило, приложение задает стиль **\_ отображения WS** после создания окна для сохранения сведений о процессе создания, скрытых от пользователя.</span><span class="sxs-lookup"><span data-stu-id="863c3-381">Typically, an application sets the **WS\_VISIBLE** style after it has created a window to keep details of the creation process hidden from the user.</span></span> <span data-ttu-id="863c3-382">Например, приложение может скрывать новое окно, пока оно настраивает внешний вид окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-382">For example, an application may keep a new window hidden while it customizes the window's appearance.</span></span> <span data-ttu-id="863c3-383">Если в **CreateWindowEx** указан стиль **WS \_ Visible** , система отправляет сообщение [**WM \_ SHOWWINDOW**](wm-showwindow.md) в окно после создания окна, но перед его отображением.</span><span class="sxs-lookup"><span data-stu-id="863c3-383">If the **WS\_VISIBLE** style is specified in **CreateWindowEx**, the system sends the [**WM\_SHOWWINDOW**](wm-showwindow.md) message to the window after creating the window, but before displaying it.</span></span>

<span data-ttu-id="863c3-384">Приложение может определить, является ли окно видимым с помощью функции [**исвиндоввисибле**](/windows/win32/api/winuser/nf-winuser-iswindowvisible) .</span><span class="sxs-lookup"><span data-stu-id="863c3-384">An application can determine whether a window is visible by using the [**IsWindowVisible**](/windows/win32/api/winuser/nf-winuser-iswindowvisible) function.</span></span> <span data-ttu-id="863c3-385">Приложение может показать (сделать видимым) или скрыть окно с помощью функции [**ShowWindow**](/windows/win32/api/winuser/nf-winuser-showwindow), [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos), [**дефервиндовпос**](/windows/win32/api/winuser/nf-winuser-deferwindowpos)или [**сетвиндовплацемент**](/windows/win32/api/winuser/nf-winuser-setwindowplacement) или [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) .</span><span class="sxs-lookup"><span data-stu-id="863c3-385">An application can show (make visible) or hide a window by using the [**ShowWindow**](/windows/win32/api/winuser/nf-winuser-showwindow), [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos), [**DeferWindowPos**](/windows/win32/api/winuser/nf-winuser-deferwindowpos), or [**SetWindowPlacement**](/windows/win32/api/winuser/nf-winuser-setwindowplacement) or [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) function.</span></span> <span data-ttu-id="863c3-386">Эти функции отображают или скрывают окно, устанавливая или удаляя для окна стиль " [**WS \_ Visible**](window-styles.md) ".</span><span class="sxs-lookup"><span data-stu-id="863c3-386">These functions show or hide a window by setting or removing the [**WS\_VISIBLE**](window-styles.md) style for the window.</span></span> <span data-ttu-id="863c3-387">Они также перед отображением или скрытием сообщения [**WM \_ SHOWWINDOW**](wm-showwindow.md) отправляются в окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-387">They also send the [**WM\_SHOWWINDOW**](wm-showwindow.md) message to the window before showing or hiding it.</span></span>

<span data-ttu-id="863c3-388">Когда окно-владелец свернется, система автоматически скрывает связанные с ней собственные окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-388">When an owner window is minimized, the system automatically hides the associated owned windows.</span></span> <span data-ttu-id="863c3-389">Аналогично, при восстановлении окна владельца система автоматически отображает связанные с ней окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-389">Similarly, when an owner window is restored, the system automatically shows the associated owned windows.</span></span> <span data-ttu-id="863c3-390">В обоих случаях система отправляет сообщение [**WM \_ SHOWWINDOW**](wm-showwindow.md) в собственные окна, прежде чем скрывать или отображать их.</span><span class="sxs-lookup"><span data-stu-id="863c3-390">In both cases, the system sends the [**WM\_SHOWWINDOW**](wm-showwindow.md) message to the owned windows before hiding or showing them.</span></span> <span data-ttu-id="863c3-391">Иногда приложению может потребоваться скрыть собственные окна без необходимости сворачивания или скрытия владельца.</span><span class="sxs-lookup"><span data-stu-id="863c3-391">Occasionally, an application may need to hide the owned windows without having to minimize or hide the owner.</span></span> <span data-ttu-id="863c3-392">В этом случае приложение использует функцию [**шововнедпопупс**](/windows/win32/api/winuser/nf-winuser-showownedpopups) .</span><span class="sxs-lookup"><span data-stu-id="863c3-392">In this case, the application uses the [**ShowOwnedPopups**](/windows/win32/api/winuser/nf-winuser-showownedpopups) function.</span></span> <span data-ttu-id="863c3-393">Эта функция задает или удаляет стиль [**\_ отображения WS**](window-styles.md) для всех собственных окон и отправляет сообщение **WM \_ SHOWWINDOW** в собственные окна перед скрытием или отображением.</span><span class="sxs-lookup"><span data-stu-id="863c3-393">This function sets or removes the [**WS\_VISIBLE**](window-styles.md) style for all owned windows and sends the **WM\_SHOWWINDOW** message to the owned windows before hiding or showing them.</span></span> <span data-ttu-id="863c3-394">Скрытие окна владельца не влияет на состояние видимости принадлежащих окон.</span><span class="sxs-lookup"><span data-stu-id="863c3-394">Hiding an owner window has no effect on the visibility state of the owned windows.</span></span>

<span data-ttu-id="863c3-395">Если родительское окно является видимым, также отображаются его связанные дочерние окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-395">When a parent window is visible, its associated child windows are also visible.</span></span> <span data-ttu-id="863c3-396">Аналогично, когда родительское окно скрыто, его дочерние окна также скрываются.</span><span class="sxs-lookup"><span data-stu-id="863c3-396">Similarly, when the parent window is hidden, its child windows are also hidden.</span></span> <span data-ttu-id="863c3-397">Минимизация родительского окна не влияет на состояние видимости дочерних окон. Это значит, что дочерние окна сворачиваются вместе с родительским, но стиль [**, \_ видимый WS**](window-styles.md) , не изменяется.</span><span class="sxs-lookup"><span data-stu-id="863c3-397">Minimizing the parent window has no effect on the visibility state of the child windows; that is, the child windows are minimized along with the parent, but the [**WS\_VISIBLE**](window-styles.md) style is not changed.</span></span>

<span data-ttu-id="863c3-398">Даже если окно имеет стиль « [**WS \_ Visible**](window-styles.md) », пользователь может не видеть окно на экране; другие окна могут полностью перекрывать его или быть перемещены за границы экрана.</span><span class="sxs-lookup"><span data-stu-id="863c3-398">Even if a window has the [**WS\_VISIBLE**](window-styles.md) style, the user may not be able to see the window on the screen; other windows may completely overlap it or it may have been moved beyond the edge of the screen.</span></span> <span data-ttu-id="863c3-399">Кроме того, видимое дочернее окно подчиняется правилам обрезки, установленным его связью «родители-потомки».</span><span class="sxs-lookup"><span data-stu-id="863c3-399">Also, a visible child window is subject to the clipping rules established by its parent-child relationship.</span></span> <span data-ttu-id="863c3-400">Если родительское окно окна не отображается, оно также не будет отображаться.</span><span class="sxs-lookup"><span data-stu-id="863c3-400">If the window's parent window is not visible, it will also not be visible.</span></span> <span data-ttu-id="863c3-401">Если родительское окно перемещается за пределы экрана, дочернее окно также перемещается, так как дочернее окно отображается относительно левого верхнего левого угла.</span><span class="sxs-lookup"><span data-stu-id="863c3-401">If the parent window moves beyond the edge of the screen, the child window also moves because a child window is drawn relative to the parent's upper left corner.</span></span> <span data-ttu-id="863c3-402">Например, пользователь может переместить родительское окно, содержащее дочернее окно, достаточного края экрана, что пользователь может не видеть дочернее окно, даже если его дочернее окно и его родительское окно имеют стиль **WS \_ Visible** .</span><span class="sxs-lookup"><span data-stu-id="863c3-402">For example, a user may move the parent window containing the child window far enough off the edge of the screen that the user may not be able to see the child window, even though the child window and its parent window both have the **WS\_VISIBLE** style.</span></span>

### <a name="minimized-maximized-and-restored-windows"></a><span data-ttu-id="863c3-403">Сведенные, развернутые и восстановленные окна</span><span class="sxs-lookup"><span data-stu-id="863c3-403">Minimized, Maximized, and Restored Windows</span></span>

<span data-ttu-id="863c3-404">*Развернутое окно* — это окно с стилем [**WS- \_ Maximize**](window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="863c3-404">A *maximized window* is a window that has the [**WS\_MAXIMIZE**](window-styles.md) style.</span></span> <span data-ttu-id="863c3-405">По умолчанию система расширяет полноэкранное окно, и оно занимает весь экран или, если это дочернее окно, клиентскую область родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-405">By default, the system enlarges a maximized window so that it fills the screen or, in the case of a child window, the parent window's client area.</span></span> <span data-ttu-id="863c3-406">Хотя размер окна можно задать таким же размером, что и развернутое окно, развернутое окно немного отличается.</span><span class="sxs-lookup"><span data-stu-id="863c3-406">Although a window's size can be set to the same size of a maximized window, a maximized window is slightly different.</span></span> <span data-ttu-id="863c3-407">Система автоматически перемещает строку заголовка окна в верхнюю часть экрана или в верхнюю часть клиентской области родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-407">The system automatically moves the window's title bar to the top of the screen or to the top of the parent window's client area.</span></span> <span data-ttu-id="863c3-408">Кроме того, система отключает границу размера окна и возможность позиционирования окна в строке заголовка (чтобы пользователь не смог переместить окно, перетащив строку заголовка).</span><span class="sxs-lookup"><span data-stu-id="863c3-408">Also, the system disables the window's sizing border and the window-positioning capability of the title bar (so that the user cannot move the window by dragging the title bar).</span></span>

<span data-ttu-id="863c3-409">*Уменьшенное окно* — это окно с стилем [**WS- \_ сворачивания**](window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="863c3-409">A *minimized window* is a window that has the [**WS\_MINIMIZE**](window-styles.md) style.</span></span> <span data-ttu-id="863c3-410">По умолчанию система уменьшает минимизированное окно до размеров кнопки панели задач и перемещает его на панель задач.</span><span class="sxs-lookup"><span data-stu-id="863c3-410">By default, the system reduces a minimized window to the size of its taskbar button and moves the minimized window to the taskbar.</span></span> <span data-ttu-id="863c3-411">*Восстановленное окно* — это окно, которое было возвращено к предыдущему размеру и положению, то есть к размеру, до которого он был уменьшен или развернут.</span><span class="sxs-lookup"><span data-stu-id="863c3-411">A *restored window* is a window that has been returned to its previous size and position, that is, the size it was before it was minimized or maximized.</span></span>

<span data-ttu-id="863c3-412">Если приложение задает в функции [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) стиль **\_ сворачивания** WS или WS, то окно изначально разворачивается или уменьшается. [**\_**](window-styles.md)</span><span class="sxs-lookup"><span data-stu-id="863c3-412">If an application specifies the [**WS\_MAXIMIZE**](window-styles.md) or **WS\_MINIMIZE** style in the [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) function, the window is initially maximized or minimized.</span></span> <span data-ttu-id="863c3-413">После создания окна приложение может использовать функцию [**клосевиндов**](/windows/win32/api/winuser/nf-winuser-closewindow) для сворачивания окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-413">After creating a window, an application can use the [**CloseWindow**](/windows/win32/api/winuser/nf-winuser-closewindow) function to minimize the window.</span></span> <span data-ttu-id="863c3-414">Функция [**арранжеикониквиндовс**](/windows/win32/api/winuser/nf-winuser-arrangeiconicwindows) упорядочивает значки на рабочем столе или упорядочивает в родительском окне окна с минимальными дочерними окнами родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-414">The [**ArrangeIconicWindows**](/windows/win32/api/winuser/nf-winuser-arrangeiconicwindows) function arranges the icons on the desktop, or it arranges a parent window's minimized child windows in the parent window.</span></span> <span data-ttu-id="863c3-415">Функция [**опеникон**](/windows/win32/api/winuser/nf-winuser-openicon) восстанавливает окно до предыдущего размера и расположения.</span><span class="sxs-lookup"><span data-stu-id="863c3-415">The [**OpenIcon**](/windows/win32/api/winuser/nf-winuser-openicon) function restores a minimized window to its previous size and position.</span></span>

<span data-ttu-id="863c3-416">Функция [**ShowWindow**](/windows/win32/api/winuser/nf-winuser-showwindow) позволяет максимально увеличить, развернуть или восстановить окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-416">The [**ShowWindow**](/windows/win32/api/winuser/nf-winuser-showwindow) function can minimize, maximize, or restore a window.</span></span> <span data-ttu-id="863c3-417">Он также может задавать состояние видимости и активации окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-417">It can also set the window's visibility and activation states.</span></span> <span data-ttu-id="863c3-418">Функция [**сетвиндовплацемент**](/windows/win32/api/winuser/nf-winuser-setwindowplacement) включает те же функции, что и **ShowWindow**, но может переопределять положение окна по умолчанию: сведенные, развернутые и восстановленные позиции.</span><span class="sxs-lookup"><span data-stu-id="863c3-418">The [**SetWindowPlacement**](/windows/win32/api/winuser/nf-winuser-setwindowplacement) function includes the same functionality as **ShowWindow**, but it can override the window's default minimized, maximized, and restored positions.</span></span>

<span data-ttu-id="863c3-419">Функции [**Zoom**](/windows/win32/api/winuser/nf-winuser-iszoomed) и [**Icon**](/windows/win32/api/winuser/nf-winuser-isiconic) определяют, является ли данное окно развернутым или минимальным соответственно.</span><span class="sxs-lookup"><span data-stu-id="863c3-419">The [**IsZoomed**](/windows/win32/api/winuser/nf-winuser-iszoomed) and [**IsIconic**](/windows/win32/api/winuser/nf-winuser-isiconic) functions determine whether a given window is maximized or minimized, respectively.</span></span> <span data-ttu-id="863c3-420">Функция [**жетвиндовплацемент**](/windows/win32/api/winuser/nf-winuser-getwindowplacement) извлекает уменьшенные, развернутые и восстановленные позиции для окна, а также определяет состояние отображения окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-420">The [**GetWindowPlacement**](/windows/win32/api/winuser/nf-winuser-getwindowplacement) function retrieves the minimized, maximized, and restored positions for the window, and also determines the window's show state.</span></span>

<span data-ttu-id="863c3-421">Когда система получает команду для развертывания или восстановления окна в режиме сворачивания, оно отправляет сообщение [**WM \_ куерйопен**](wm-queryopen.md) .</span><span class="sxs-lookup"><span data-stu-id="863c3-421">When the system receives a command to maximize or restore a minimized window, it sends the window a [**WM\_QUERYOPEN**](wm-queryopen.md) message.</span></span> <span data-ttu-id="863c3-422">Если процедура окна возвращает **значение false**, система игнорирует команду Развернуть или восстановить.</span><span class="sxs-lookup"><span data-stu-id="863c3-422">If the window procedure returns **FALSE**, the system ignores the maximize or restore command.</span></span>

<span data-ttu-id="863c3-423">Система автоматически устанавливает размер и расположение развернутого окна в заданные системой значения по умолчанию для развернутого окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-423">The system automatically sets the size and position of a maximized window to the system-defined defaults for a maximized window.</span></span> <span data-ttu-id="863c3-424">Чтобы переопределить эти значения по умолчанию, приложение может либо вызвать функцию [**сетвиндовплацемент**](/windows/win32/api/winuser/nf-winuser-setwindowplacement) , либо обработать сообщение [**WM \_ жетминмаксинфо**](wm-getminmaxinfo.md) , полученное окном, когда система собирается развернуть окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-424">To override these defaults, an application can either call the [**SetWindowPlacement**](/windows/win32/api/winuser/nf-winuser-setwindowplacement) function or process the [**WM\_GETMINMAXINFO**](wm-getminmaxinfo.md) message that is received by a window when the system is about to maximize the window.</span></span> <span data-ttu-id="863c3-425">**WM \_ ЖЕТМИНМАКСИНФО** содержит указатель на структуру [**минмаксинфо**](/windows/win32/api/winuser/ns-winuser-minmaxinfo) , содержащую значения, которые система использует для установки максимального размера и позиции.</span><span class="sxs-lookup"><span data-stu-id="863c3-425">**WM\_GETMINMAXINFO** includes a pointer to a [**MINMAXINFO**](/windows/win32/api/winuser/ns-winuser-minmaxinfo) structure containing values the system uses to set the maximized size and position.</span></span> <span data-ttu-id="863c3-426">Замена этих значений переопределяет значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="863c3-426">Replacing these values overrides the defaults.</span></span>

## <a name="window-size-and-position"></a><span data-ttu-id="863c3-427">Размер и расположение окна</span><span class="sxs-lookup"><span data-stu-id="863c3-427">Window Size and Position</span></span>

<span data-ttu-id="863c3-428">Размер и расположение окна выражаются в виде ограничивающего прямоугольника, заданного в координатах относительно экрана или родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-428">A window's size and position are expressed as a bounding rectangle, given in coordinates relative to the screen or the parent window.</span></span> <span data-ttu-id="863c3-429">Координаты окна верхнего уровня задаются относительно левого верхнего угла экрана; координаты дочернего окна задаются относительно левого верхнего угла родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-429">The coordinates of a top-level window are relative to the upper left corner of the screen; the coordinates of a child window are relative to the upper left corner of the parent window.</span></span> <span data-ttu-id="863c3-430">Приложение задает начальный размер и расположение окна при создании окна, но может изменить размер и расположение окна в любое время.</span><span class="sxs-lookup"><span data-stu-id="863c3-430">An application specifies a window's initial size and position when it creates the window, but it can change the window's size and position at any time.</span></span> <span data-ttu-id="863c3-431">Дополнительные сведения см. в разделе [заполненные фигуры](../gdi/filled-shapes.md).</span><span class="sxs-lookup"><span data-stu-id="863c3-431">For more information, see [Filled Shapes](../gdi/filled-shapes.md).</span></span>

<span data-ttu-id="863c3-432">В этом разделе рассматриваются следующие вопросы.</span><span class="sxs-lookup"><span data-stu-id="863c3-432">This section contains the following topics:</span></span>

-   [<span data-ttu-id="863c3-433">Размер и расположение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="863c3-433">Default Size and Position</span></span>](#default-size-and-position)
-   [<span data-ttu-id="863c3-434">Размер отслеживания</span><span class="sxs-lookup"><span data-stu-id="863c3-434">Tracking Size</span></span>](#tracking-size)
-   [<span data-ttu-id="863c3-435">Системные команды</span><span class="sxs-lookup"><span data-stu-id="863c3-435">System Commands</span></span>](#system-commands)
-   [<span data-ttu-id="863c3-436">Функции размера и позиционирования</span><span class="sxs-lookup"><span data-stu-id="863c3-436">Size and Position Functions</span></span>](#size-and-position-functions)
-   [<span data-ttu-id="863c3-437">Размер и расположение сообщений</span><span class="sxs-lookup"><span data-stu-id="863c3-437">Size and Position Messages</span></span>](#size-and-position-messages)

### <a name="default-size-and-position"></a><span data-ttu-id="863c3-438">Размер и расположение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="863c3-438">Default Size and Position</span></span>

<span data-ttu-id="863c3-439">Приложение может позволить системе вычислить исходный размер или расположение окна верхнего уровня, указав \_ УСЕДЕФАУЛТ во [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa).</span><span class="sxs-lookup"><span data-stu-id="863c3-439">An application can allow the system to calculate the initial size or position of a top-level window by specifying CW\_USEDEFAULT in [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa).</span></span> <span data-ttu-id="863c3-440">Если приложение устанавливает координаты окна во Вт \_ . уседефаулт и не создает никаких других окон верхнего уровня, система устанавливает расположение нового окна относительно левого верхнего угла экрана; в противном случае задается расположение относительно положения окна верхнего уровня, которое приложение создало последним.</span><span class="sxs-lookup"><span data-stu-id="863c3-440">If the application sets the window's coordinates to CW\_USEDEFAULT and has created no other top-level windows, the system sets the new window's position relative to the upper left corner of the screen; otherwise, it sets the position relative to the position of the top-level window that the application created most recently.</span></span> <span data-ttu-id="863c3-441">Если для параметров Width и Height задано значение уседефаулт во Вт \_ ., система вычисляет размер нового окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-441">If the width and height parameters are set to CW\_USEDEFAULT, the system calculates the size of the new window.</span></span> <span data-ttu-id="863c3-442">Если приложение создало другие окна верхнего уровня, система применяет размер нового окна к размеру самого последнего окна верхнего уровня, созданного приложением.</span><span class="sxs-lookup"><span data-stu-id="863c3-442">If the application has created other top-level windows, the system bases the size of the new window on the size of the application's most recently created top-level window.</span></span> <span data-ttu-id="863c3-443">Указание уседефаулт во Вт \_ . при создании дочернего или всплывающего окна система устанавливает размер окна по умолчанию как минимальный размер окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-443">Specifying CW\_USEDEFAULT when creating a child or pop-up window causes the system to set the window's size to the default minimum window size.</span></span>

### <a name="tracking-size"></a><span data-ttu-id="863c3-444">Размер отслеживания</span><span class="sxs-lookup"><span data-stu-id="863c3-444">Tracking Size</span></span>

<span data-ttu-id="863c3-445">Система поддерживает минимальный и максимальный размер отслеживания для окна стиля [**WS \_ сиккфраме**](window-styles.md) ; окно с этим стилем имеет границу изменения размера.</span><span class="sxs-lookup"><span data-stu-id="863c3-445">The system maintains a minimum and maximum tracking size for a window of the [**WS\_THICKFRAME**](window-styles.md) style; a window with this style has a sizing border.</span></span> <span data-ttu-id="863c3-446">*Минимальный размер для отслеживания* — минимальный размер окна, который можно создать путем перетаскивания границы размера окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-446">The *minimum tracking size* is the smallest window size you can produce by dragging the window's sizing border.</span></span> <span data-ttu-id="863c3-447">Точно так же *максимальный размер отслеживания* — это самый крупный размер окна, который можно создать, перетащив границу изменения размера.</span><span class="sxs-lookup"><span data-stu-id="863c3-447">Similarly, the *maximum tracking size* is the largest window size you can produce by dragging the sizing border.</span></span>

<span data-ttu-id="863c3-448">Минимальный и максимальный размеры окна устанавливаются в определенные системой значения по умолчанию при создании окна системой.</span><span class="sxs-lookup"><span data-stu-id="863c3-448">A window's minimum and maximum tracking sizes are set to system-defined default values when the system creates the window.</span></span> <span data-ttu-id="863c3-449">Приложение может обнаружить значения по умолчанию и переопределить их, обрабатывая сообщение [**WM \_ жетминмаксинфо**](wm-getminmaxinfo.md) .</span><span class="sxs-lookup"><span data-stu-id="863c3-449">An application can discover the defaults and override them by processing the [**WM\_GETMINMAXINFO**](wm-getminmaxinfo.md) message.</span></span> <span data-ttu-id="863c3-450">Дополнительные сведения см. в разделе [сообщения о размере и позиционировании](#size-and-position-messages).</span><span class="sxs-lookup"><span data-stu-id="863c3-450">For more information, see [Size and Position Messages](#size-and-position-messages).</span></span>

### <a name="system-commands"></a><span data-ttu-id="863c3-451">Системные команды</span><span class="sxs-lookup"><span data-stu-id="863c3-451">System Commands</span></span>

<span data-ttu-id="863c3-452">Приложение с меню окна может изменить размер и расположение этого окна, отправив системные команды.</span><span class="sxs-lookup"><span data-stu-id="863c3-452">An application that has a window menu can change the size and position of that window by sending system commands.</span></span> <span data-ttu-id="863c3-453">Системные команды создаются, когда пользователь выбирает команды в меню окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-453">System commands are generated when the user chooses commands from the window menu.</span></span> <span data-ttu-id="863c3-454">Приложение может эмулировать действие пользователя, отправляя сообщение [**WM \_ сискомманд**](../menurc/wm-syscommand.md) в окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-454">An application can emulate the user action by sending a [**WM\_SYSCOMMAND**](../menurc/wm-syscommand.md) message to the window.</span></span> <span data-ttu-id="863c3-455">Следующие системные команды влияют на размер и расположение окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-455">The following system commands affect the size and position of a window.</span></span>



| <span data-ttu-id="863c3-456">Get-Help</span><span class="sxs-lookup"><span data-stu-id="863c3-456">Command</span></span>      | <span data-ttu-id="863c3-457">Описание</span><span class="sxs-lookup"><span data-stu-id="863c3-457">Description</span></span>                                                                                                                                                          |
|--------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="863c3-458">SC \_ Close</span><span class="sxs-lookup"><span data-stu-id="863c3-458">SC\_CLOSE</span></span>    | <span data-ttu-id="863c3-459">Закрывает окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-459">Closes the window.</span></span> <span data-ttu-id="863c3-460">Эта команда отправляет сообщение [**о \_ закрытии WM**](wm-close.md) в окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-460">This command sends a [**WM\_CLOSE**](wm-close.md) message to the window.</span></span> <span data-ttu-id="863c3-461">Окно выполняет все действия, необходимые для очистки и уничтожения.</span><span class="sxs-lookup"><span data-stu-id="863c3-461">The window carries out any steps needed to clean up and destroy itself.</span></span> |
| <span data-ttu-id="863c3-462">\_развернуть SC</span><span class="sxs-lookup"><span data-stu-id="863c3-462">SC\_MAXIMIZE</span></span> | <span data-ttu-id="863c3-463">Разворачивает окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-463">Maximizes the window.</span></span>                                                                                                                                                |
| <span data-ttu-id="863c3-464">SC — \_ Minimize</span><span class="sxs-lookup"><span data-stu-id="863c3-464">SC\_MINIMIZE</span></span> | <span data-ttu-id="863c3-465">Сворачивает окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-465">Minimizes the window.</span></span>                                                                                                                                                |
| <span data-ttu-id="863c3-466">SC \_ Move</span><span class="sxs-lookup"><span data-stu-id="863c3-466">SC\_MOVE</span></span>     | <span data-ttu-id="863c3-467">Перемещает окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-467">Moves the window.</span></span>                                                                                                                                                    |
| <span data-ttu-id="863c3-468">SC \_ RESTORE</span><span class="sxs-lookup"><span data-stu-id="863c3-468">SC\_RESTORE</span></span>  | <span data-ttu-id="863c3-469">Восстанавливает уменьшенное или развернутое окно до его предыдущего размера и расположения.</span><span class="sxs-lookup"><span data-stu-id="863c3-469">Restores a minimized or maximized window to its previous size and position.</span></span>                                                                                          |
| <span data-ttu-id="863c3-470">\_Размер SC</span><span class="sxs-lookup"><span data-stu-id="863c3-470">SC\_SIZE</span></span>     | <span data-ttu-id="863c3-471">Запускает команду размера.</span><span class="sxs-lookup"><span data-stu-id="863c3-471">Starts a size command.</span></span> <span data-ttu-id="863c3-472">Чтобы изменить размер окна, используйте мышь или клавиатуру.</span><span class="sxs-lookup"><span data-stu-id="863c3-472">To change the size of the window, use the mouse or keyboard.</span></span>                                                                                  |



 

### <a name="size-and-position-functions"></a><span data-ttu-id="863c3-473">Функции размера и позиционирования</span><span class="sxs-lookup"><span data-stu-id="863c3-473">Size and Position Functions</span></span>

<span data-ttu-id="863c3-474">После создания окна приложение может задать размер или расположение окна, вызвав одну из нескольких различных функций, включая [**сетвиндовплацемент**](/windows/win32/api/winuser/nf-winuser-setwindowplacement), [**мовевиндов**](/windows/win32/api/winuser/nf-winuser-movewindow), [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos)и [**дефервиндовпос**](/windows/win32/api/winuser/nf-winuser-deferwindowpos).</span><span class="sxs-lookup"><span data-stu-id="863c3-474">After creating a window, an application can set the window's size or position by calling one of several different functions, including [**SetWindowPlacement**](/windows/win32/api/winuser/nf-winuser-setwindowplacement), [**MoveWindow**](/windows/win32/api/winuser/nf-winuser-movewindow), [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos), and [**DeferWindowPos**](/windows/win32/api/winuser/nf-winuser-deferwindowpos).</span></span> <span data-ttu-id="863c3-475">**Сетвиндовплацемент** задает режим сворачивания окна, его развернутую точку, размер и расположение, а затем показывает состояние.</span><span class="sxs-lookup"><span data-stu-id="863c3-475">**SetWindowPlacement** sets a window's minimized position, maximized position, restored size and position, and show state.</span></span> <span data-ttu-id="863c3-476">Функции **мовевиндов** и **SetWindowPos** похожи; Установите размер или расположение одного окна приложения.</span><span class="sxs-lookup"><span data-stu-id="863c3-476">The **MoveWindow** and **SetWindowPos** functions are similar; both set the size or position of a single application window.</span></span> <span data-ttu-id="863c3-477">Функция **SetWindowPos** включает набор флагов, влияющих на состояние отображения окна. **Мовевиндов** не включает эти флаги.</span><span class="sxs-lookup"><span data-stu-id="863c3-477">The **SetWindowPos** function includes a set of flags that affect the window's show state; **MoveWindow** does not include these flags.</span></span> <span data-ttu-id="863c3-478">Используйте функции [**бегиндефервиндовпос**](/windows/win32/api/winuser/nf-winuser-begindeferwindowpos), **дефервиндовпос** и [**енддефервиндовпос**](/windows/win32/api/winuser/nf-winuser-enddeferwindowpos) для одновременного задания расположения ряда окон, включая размер, расположение, расположение в z-порядке и отображение состояния.</span><span class="sxs-lookup"><span data-stu-id="863c3-478">Use the [**BeginDeferWindowPos**](/windows/win32/api/winuser/nf-winuser-begindeferwindowpos), **DeferWindowPos**, and [**EndDeferWindowPos**](/windows/win32/api/winuser/nf-winuser-enddeferwindowpos) functions to simultaneously set the position of a number of windows, including the size, position, position in the z-order, and show state.</span></span>

<span data-ttu-id="863c3-479">Приложение может извлекать координаты ограничивающего прямоугольника окна с помощью функции [**жетвиндоврект**](/windows/win32/api/winuser/nf-winuser-getwindowrect) .</span><span class="sxs-lookup"><span data-stu-id="863c3-479">An application can retrieve the coordinates of a window's bounding rectangle by using the [**GetWindowRect**](/windows/win32/api/winuser/nf-winuser-getwindowrect) function.</span></span> <span data-ttu-id="863c3-480">**Жетвиндоврект** заполняет структуру [**Rect**](/previous-versions//dd162897(v=vs.85)) координатами верхнего левого и нижнего правого угла окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-480">**GetWindowRect** fills a [**RECT**](/previous-versions//dd162897(v=vs.85)) structure with the coordinates of the window's upper left and lower right corners.</span></span> <span data-ttu-id="863c3-481">Координаты задаются относительно левого верхнего угла экрана, даже для дочернего окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-481">The coordinates are relative to the upper left corner of the screen, even for a child window.</span></span> <span data-ttu-id="863c3-482">Функция [**скринтоклиент**](/windows/win32/api/winuser/nf-winuser-screentoclient) или [**мапвиндовпоинтс**](/windows/win32/api/winuser/nf-winuser-mapwindowpoints) сопоставляет экранные координаты ограничивающего прямоугольника дочернего окна с координатами относительно клиентской области родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-482">The [**ScreenToClient**](/windows/win32/api/winuser/nf-winuser-screentoclient) or [**MapWindowPoints**](/windows/win32/api/winuser/nf-winuser-mapwindowpoints) function maps the screen coordinates of a child window's bounding rectangle to coordinates relative to the parent window's client area.</span></span>

<span data-ttu-id="863c3-483">Функция [**жетклиентрект**](/windows/win32/api/winuser/nf-winuser-getclientrect) извлекает координаты клиентской области окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-483">The [**GetClientRect**](/windows/win32/api/winuser/nf-winuser-getclientrect) function retrieves the coordinates of a window's client area.</span></span> <span data-ttu-id="863c3-484">**Жетклиентрект** заполняет структуру [**Rect**](/previous-versions//dd162897(v=vs.85)) координатами верхнего левого и нижнего правого угла клиентской области, но координаты отсчитываются от самой клиентской области.</span><span class="sxs-lookup"><span data-stu-id="863c3-484">**GetClientRect** fills a [**RECT**](/previous-versions//dd162897(v=vs.85)) structure with the coordinates of the upper left and lower right corners of the client area, but the coordinates are relative to the client area itself.</span></span> <span data-ttu-id="863c3-485">Это означает, что координаты верхнего левого угла клиентской области всегда равны (0, 0), а координаты нижнего правого угла имеют ширину и высоту клиентской области.</span><span class="sxs-lookup"><span data-stu-id="863c3-485">This means the coordinates of a client area's upper left corner are always (0,0), and the coordinates of the lower right corner are the width and height of the client area.</span></span>

<span data-ttu-id="863c3-486">Функция [**каскадевиндовс**](/windows/win32/api/winuser/nf-winuser-cascadewindows) размещает окна на рабочем столе или раскрывают дочерние окна указанного родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-486">The [**CascadeWindows**](/windows/win32/api/winuser/nf-winuser-cascadewindows) function cascades the windows on the desktop or cascades the child windows of the specified parent window.</span></span> <span data-ttu-id="863c3-487">Функция [**тилевиндовс**](/windows/win32/api/winuser/nf-winuser-tilewindows) накладывает окна на Рабочий стол или плитки дочерних окон указанного родительского окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-487">The [**TileWindows**](/windows/win32/api/winuser/nf-winuser-tilewindows) function tiles the windows on the desktop or tiles the child windows of the specified parent window.</span></span>

### <a name="size-and-position-messages"></a><span data-ttu-id="863c3-488">Размер и расположение сообщений</span><span class="sxs-lookup"><span data-stu-id="863c3-488">Size and Position Messages</span></span>

<span data-ttu-id="863c3-489">Система отправляет сообщение [**WM \_ жетминмаксинфо**](wm-getminmaxinfo.md) в окно, размер или расположение которого собирается измениться.</span><span class="sxs-lookup"><span data-stu-id="863c3-489">The system sends the [**WM\_GETMINMAXINFO**](wm-getminmaxinfo.md) message to a window whose size or position is about to change.</span></span> <span data-ttu-id="863c3-490">Например, сообщение отправляется, когда пользователь нажимает кнопку " **переместить** " или " **Размер** " в меню "окно" или щелкает границу изменения размера или строку заголовка. сообщение также отправляется, когда приложение вызывает [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos) для перемещения или изменения размера окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-490">For example, the message is sent when the user clicks **Move** or **Size** from the window menu or clicks the sizing border or title bar; the message is also sent when an application calls [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos) to move or size the window.</span></span> <span data-ttu-id="863c3-491">**WM \_ ЖЕТМИНМАКСИНФО** содержит указатель на структуру [**минмаксинфо**](/windows/win32/api/winuser/ns-winuser-minmaxinfo) , содержащую развернутый по умолчанию размер и расположение окна, а также минимальный и максимальный размер отслеживания по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="863c3-491">**WM\_GETMINMAXINFO** includes a pointer to a [**MINMAXINFO**](/windows/win32/api/winuser/ns-winuser-minmaxinfo) structure containing the default maximized size and position for the window, as well as the default minimum and maximum tracking sizes.</span></span> <span data-ttu-id="863c3-492">Приложение может переопределить значения по умолчанию, обрабатывая **WM \_ жетминмаксинфо** и установив соответствующие члены **минмаксинфо**.</span><span class="sxs-lookup"><span data-stu-id="863c3-492">An application can override the defaults by processing **WM\_GETMINMAXINFO** and setting the appropriate members of **MINMAXINFO**.</span></span> <span data-ttu-id="863c3-493">Для получения **\_ жетминмаксинфо WM** окно должно иметь стиль **\_ заголовка** [**WS \_ сиккфраме**](window-styles.md) или WS.</span><span class="sxs-lookup"><span data-stu-id="863c3-493">A window must have the [**WS\_THICKFRAME**](window-styles.md) or **WS\_CAPTION** style to receive **WM\_GETMINMAXINFO**.</span></span> <span data-ttu-id="863c3-494">Окно с стилем **WS \_ сиккфраме** получает это сообщение в процессе создания окна, а также при перемещении или изменении размера.</span><span class="sxs-lookup"><span data-stu-id="863c3-494">A window with the **WS\_THICKFRAME** style receives this message during the window-creation process, as well as when it is being moved or sized.</span></span>

<span data-ttu-id="863c3-495">Система отправляет сообщение [**WM \_ виндовпосчангинг**](wm-windowposchanging.md) в окно, размер, расположение, расположение в z-порядке или состояние отображения которого собирается измениться.</span><span class="sxs-lookup"><span data-stu-id="863c3-495">The system sends the [**WM\_WINDOWPOSCHANGING**](wm-windowposchanging.md) message to a window whose size, position, position in the z-order, or show state is about to change.</span></span> <span data-ttu-id="863c3-496">Это сообщение содержит указатель на структуру [**WINDOWPOS**](/windows/win32/api/winuser/ns-winuser-windowpos) , указывающую новый размер, расположение и расположение окна в z-порядке, а также состояние отображения.</span><span class="sxs-lookup"><span data-stu-id="863c3-496">This message includes a pointer to a [**WINDOWPOS**](/windows/win32/api/winuser/ns-winuser-windowpos) structure that specifies the window's new size, position, position in the z-order, and show state.</span></span> <span data-ttu-id="863c3-497">Устанавливая элементы **WINDOWPOS**, приложение может повлиять на новый размер, расположение и внешний вид окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-497">By setting the members of **WINDOWPOS**, an application can affect the window's new size, position, and appearance.</span></span>

<span data-ttu-id="863c3-498">После изменения размера окна, расположения, расположения в z-порядке или отображения состояния система отправляет сообщение [**WM \_ виндовпосчанжед**](wm-windowposchanged.md) в окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-498">After changing a window's size, position, position in the z-order, or show state, the system sends the [**WM\_WINDOWPOSCHANGED**](wm-windowposchanged.md) message to the window.</span></span> <span data-ttu-id="863c3-499">Это сообщение содержит указатель на [**WINDOWPOS**](/windows/win32/api/winuser/ns-winuser-windowpos) , который информирует окно о новом размере, положении, положении в z-порядке и показывает состояние.</span><span class="sxs-lookup"><span data-stu-id="863c3-499">This message includes a pointer to [**WINDOWPOS**](/windows/win32/api/winuser/ns-winuser-windowpos) that informs the window of its new size, position, position in the z-order, and show state.</span></span> <span data-ttu-id="863c3-500">Установка элементов структуры **WINDOWPOS** , которая передается с помощью **WM \_ виндовпосчанжед** , не влияет на окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-500">Setting the members of the **WINDOWPOS** structure that is passed with **WM\_WINDOWPOSCHANGED** has no effect on the window.</span></span> <span data-ttu-id="863c3-501">Окно, которое должно обрабатывать сообщения [**WM \_ size**](wm-size.md) и [**WM \_ Move**](wm-move.md) , должно **передавать WM \_ виндовпосчанжед** функции [**Дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) . в противном случае система не отправляет **\_ Размер WM** и **WM \_ перемещает** сообщения в окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-501">A window that must process [**WM\_SIZE**](wm-size.md) and [**WM\_MOVE**](wm-move.md) messages must pass **WM\_WINDOWPOSCHANGED** to the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function; otherwise, the system does not send **WM\_SIZE** and **WM\_MOVE** messages to the window.</span></span>

<span data-ttu-id="863c3-502">Система отправляет сообщение [**WM \_ нккалксизе**](wm-nccalcsize.md) в окно при создании или изменении размера окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-502">The system sends the [**WM\_NCCALCSIZE**](wm-nccalcsize.md) message to a window when the window is created or sized.</span></span> <span data-ttu-id="863c3-503">Система использует сообщение для вычисления размера клиентской области окна и положения клиентской области относительно левого верхнего угла окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-503">The system uses the message to calculate the size of a window's client area and the position of the client area relative to the upper left corner of the window.</span></span> <span data-ttu-id="863c3-504">Окно обычно передает это сообщение в процедуру окна по умолчанию; Однако это сообщение может быть полезно в приложениях, которые настраивают неклиентскую область окна или сохраняют части клиентской области при изменении размера окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-504">A window typically passes this message to the default window procedure; however, this message can be useful in applications that customize a window's nonclient area or preserve portions of the client area when the window is sized.</span></span> <span data-ttu-id="863c3-505">Дополнительные сведения см. в разделе [Рисование и рисование](../gdi/painting-and-drawing.md).</span><span class="sxs-lookup"><span data-stu-id="863c3-505">For more information, see [Painting and Drawing](../gdi/painting-and-drawing.md).</span></span>

## <a name="window-animation"></a><span data-ttu-id="863c3-506">Анимация окна</span><span class="sxs-lookup"><span data-stu-id="863c3-506">Window Animation</span></span>

<span data-ttu-id="863c3-507">При отображении или скрытии окон с помощью функции [**аниматевиндов**](/windows/win32/api/winuser/nf-winuser-animatewindow) можно создавать специальные эффекты.</span><span class="sxs-lookup"><span data-stu-id="863c3-507">You can produce special effects when showing or hiding windows by using the [**AnimateWindow**](/windows/win32/api/winuser/nf-winuser-animatewindow) function.</span></span> <span data-ttu-id="863c3-508">Когда окно анимировано таким образом, система будет либо рулонировать, либо скольжением, либо исчезать окно в зависимости от флагов, указанных при вызове **аниматевиндов**.</span><span class="sxs-lookup"><span data-stu-id="863c3-508">When the window is animated in this manner, the system will either roll, slide, or fade the window, depending on the flags you specify in a call to **AnimateWindow**.</span></span>

<span data-ttu-id="863c3-509">По умолчанию система использует *анимацию рулона*.</span><span class="sxs-lookup"><span data-stu-id="863c3-509">By default, the system uses *roll animation*.</span></span> <span data-ttu-id="863c3-510">При таком результате окно открывается как «рулон» (с отображением окна) или «рулон» (скрытие окна).</span><span class="sxs-lookup"><span data-stu-id="863c3-510">With this effect, the window appears to roll open (showing the window) or roll closed (hiding the window).</span></span> <span data-ttu-id="863c3-511">Можно использовать параметр *dwFlags* , чтобы указать, будет ли окно горизонтально, вертикально или по диагонали.</span><span class="sxs-lookup"><span data-stu-id="863c3-511">You can use the *dwFlags* parameter to specify whether the window rolls horizontally, vertically, or diagonally.</span></span>

<span data-ttu-id="863c3-512">При указании флага **\_ слайда AW** система использует *анимацию слайдов*.</span><span class="sxs-lookup"><span data-stu-id="863c3-512">When you specify the **AW\_SLIDE** flag, the system uses *slide animation*.</span></span> <span data-ttu-id="863c3-513">При таком результате окно отображается для просмотра (с отображением окна) или за пределами представления (скрытие окна).</span><span class="sxs-lookup"><span data-stu-id="863c3-513">With this effect, the window appears to slide into view (showing the window) or slide out of view (hiding the window).</span></span> <span data-ttu-id="863c3-514">Можно использовать параметр *dwFlags* , чтобы указать, как окно слайдов будет горизонтально, вертикально или по диагонали.</span><span class="sxs-lookup"><span data-stu-id="863c3-514">You can use the *dwFlags* parameter to specify whether the window slides horizontally, vertically, or diagonally.</span></span>

<span data-ttu-id="863c3-515">При указании флага **AW \_ Blend** система использует *Выцветание с альфа-смешением*.</span><span class="sxs-lookup"><span data-stu-id="863c3-515">When you specify the **AW\_BLEND** flag, the system uses an *alpha-blended fade*.</span></span>

<span data-ttu-id="863c3-516">Можно также использовать флаг **\_ центра AW** , чтобы сделать окно свернутым или развернутым по внешнему.</span><span class="sxs-lookup"><span data-stu-id="863c3-516">You can also use the **AW\_CENTER** flag to make a window appear to collapse inward or expand outward.</span></span>

## <a name="window-layout-and-mirroring"></a><span data-ttu-id="863c3-517">Макет окна и зеркальное отображение</span><span class="sxs-lookup"><span data-stu-id="863c3-517">Window Layout and Mirroring</span></span>

<span data-ttu-id="863c3-518">Макет окна определяет, как текст и объекты Windows интерфейс графических устройств (GDI) размещаются в окне или в контексте устройства (DC).</span><span class="sxs-lookup"><span data-stu-id="863c3-518">The window layout defines how text and Windows Graphics Device Interface (GDI) objects are laid out in a window or device context (DC).</span></span> <span data-ttu-id="863c3-519">Для некоторых языков, таких как английский, французский и немецкий, требуется макет слева направо (LTR).</span><span class="sxs-lookup"><span data-stu-id="863c3-519">Some languages, such as English, French, and German, require a left-to-right (LTR) layout.</span></span> <span data-ttu-id="863c3-520">Для других языков, таких как арабский и иврит, требуется макет с направлением письма справа налево.</span><span class="sxs-lookup"><span data-stu-id="863c3-520">Other languages, such as Arabic and Hebrew, require right-to-left (RTL) layout.</span></span> <span data-ttu-id="863c3-521">Макет окна применяется к тексту, но также влияет на другие элементы GDI окна, включая растровые изображения, значки, расположение источника, кнопки, каскадные элементы управления "дерево" и способ увеличения горизонтальной координаты при переходе влево или вправо.</span><span class="sxs-lookup"><span data-stu-id="863c3-521">The window layout applies to text but also affects the other GDI elements of the window, including bitmaps, icons, the location of the origin, buttons, cascading tree controls, and whether the horizontal coordinate increases as you go left or right.</span></span> <span data-ttu-id="863c3-522">Например, после того, как приложение настроило макет RTL, начало координат располагается на правой границе окна или устройства, а число, представляющее горизонтальную координату, увеличивается по мере перемещения влево.</span><span class="sxs-lookup"><span data-stu-id="863c3-522">For example, after an application has set RTL layout, the origin is positioned at the right edge of the window or device, and the number representing the horizontal coordinate increases as you move left.</span></span> <span data-ttu-id="863c3-523">Однако макет окна влияет не на все объекты.</span><span class="sxs-lookup"><span data-stu-id="863c3-523">However, not all objects are affected by the layout of a window.</span></span> <span data-ttu-id="863c3-524">Например, макет для диалоговых окон, окон сообщений и контекстов устройств, которые не связаны с окном, например метафайлы и контроллеры домена печати, необходимо обрабатывать отдельно.</span><span class="sxs-lookup"><span data-stu-id="863c3-524">For example, the layout for dialog boxes, message boxes, and device contexts that are not associated with a window, such as metafile and printer DCs, must be handled separately.</span></span> <span data-ttu-id="863c3-525">Конкретные особенности для них приведены далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="863c3-525">Specifics for these are mentioned later in this topic.</span></span>

<span data-ttu-id="863c3-526">Функции окон позволяют задавать или изменять макет окна в версиях Windows для арабского и иврита.</span><span class="sxs-lookup"><span data-stu-id="863c3-526">The window functions allow you to specify or change the window layout in Arabic and Hebrew versions of Windows.</span></span> <span data-ttu-id="863c3-527">Обратите внимание, что переход на макет с письмом справа налево (также называемый зеркальным отображением) не поддерживается для Windows, имеющих стиль [CS \_ овндк](about-window-classes.md) или для контроллера домена с \_ расширенным графическим режимом GM.</span><span class="sxs-lookup"><span data-stu-id="863c3-527">Note that changing to a RTL layout (also known as mirroring) is not supported for windows that have the style [CS\_OWNDC](about-window-classes.md) or for a DC with the GM\_ADVANCED graphic mode.</span></span>

<span data-ttu-id="863c3-528">По умолчанию макет окна размещается слева направо (LTR).</span><span class="sxs-lookup"><span data-stu-id="863c3-528">By default, the window layout is left-to-right (LTR).</span></span> <span data-ttu-id="863c3-529">Чтобы задать макет окна справа налево, вызовите [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) с помощью стиля **WS \_ ex \_ лайаутртл**.</span><span class="sxs-lookup"><span data-stu-id="863c3-529">To set the RTL window layout, call [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) with the style **WS\_EX\_LAYOUTRTL**.</span></span> <span data-ttu-id="863c3-530">Кроме того, по умолчанию дочернее окно (то есть созданное с помощью стиля [**\_ дочернего элемента WS**](window-styles.md) и допустимый родительский параметр *HWND* в вызове [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) или **CreateWindowEx**) имеет тот же макет, что и его родительский элемент.</span><span class="sxs-lookup"><span data-stu-id="863c3-530">Also by default, a child window (that is, one created with the [**WS\_CHILD**](window-styles.md) style and with a valid parent *hWnd* parameter in the call to [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) or **CreateWindowEx**) has the same layout as its parent.</span></span> <span data-ttu-id="863c3-531">Чтобы отключить наследование зеркального отображения для всех дочерних окон, укажите **WS \_ ex \_ NOINHERITLAYOUT** в вызове **CreateWindowEx**.</span><span class="sxs-lookup"><span data-stu-id="863c3-531">To disable inheritance of mirroring to all child windows, specify **WS\_EX\_NOINHERITLAYOUT** in the call to **CreateWindowEx**.</span></span> <span data-ttu-id="863c3-532">Обратите внимание, что зеркальное отображение не наследуется собственными окнами (созданными без стиля **\_ дочернего элемента WS** ) или созданными с помощью родительского параметра *HWND* в **CreateWindowEx** , для которого установлено **значение NULL**.</span><span class="sxs-lookup"><span data-stu-id="863c3-532">Note, mirroring is not inherited by owned windows (those created without the **WS\_CHILD** style) or those created with the parent *hWnd* parameter in **CreateWindowEx** set to **NULL**.</span></span> <span data-ttu-id="863c3-533">Чтобы отключить наследование зеркального отображения для отдельного окна, обработайте сообщение [**WM \_ Нккреате**](wm-nccreate.md) с [**жетвиндовлонг**](/windows/win32/api/winuser/nf-winuser-getwindowlonga) и [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) , чтобы отключить флаг **WS \_ ex \_ лайаутртл** .</span><span class="sxs-lookup"><span data-stu-id="863c3-533">To disable inheritance of mirroring for an individual window, process the [**WM\_NCCREATE**](wm-nccreate.md) message with [**GetWindowLong**](/windows/win32/api/winuser/nf-winuser-getwindowlonga) and [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) to turn off the **WS\_EX\_LAYOUTRTL** flag.</span></span> <span data-ttu-id="863c3-534">Эта обработка является дополнением к любой другой обработке.</span><span class="sxs-lookup"><span data-stu-id="863c3-534">This processing is in addition to whatever other processing is needed.</span></span> <span data-ttu-id="863c3-535">В следующем фрагменте кода показано, как это сделать.</span><span class="sxs-lookup"><span data-stu-id="863c3-535">The following code fragment shows how this is done.</span></span>


```
SetWindowLong (hWnd, 
               GWL_EXSTYLE, 
               GetWindowLong(hWnd,GWL_EXSTYLE) & ~WS_EX_LAYOUTRTL))
```



<span data-ttu-id="863c3-536">Можно задать макет по умолчанию RTL, вызвав [**сетпроцессдефаултлайаут**](/windows/win32/api/winuser/nf-winuser-setprocessdefaultlayout)(макет \_ RTL).</span><span class="sxs-lookup"><span data-stu-id="863c3-536">You can set the default layout to RTL by calling [**SetProcessDefaultLayout**](/windows/win32/api/winuser/nf-winuser-setprocessdefaultlayout)(LAYOUT\_RTL).</span></span> <span data-ttu-id="863c3-537">Все окна, созданные после вызова, будут отражены, но существующие окна не затрагиваются.</span><span class="sxs-lookup"><span data-stu-id="863c3-537">All windows created after the call will be mirrored, but existing windows are not affected.</span></span> <span data-ttu-id="863c3-538">Чтобы отключить зеркальное отображение по умолчанию, вызовите **сетпроцессдефаултлайаут**(0).</span><span class="sxs-lookup"><span data-stu-id="863c3-538">To turn off default mirroring, call **SetProcessDefaultLayout**(0).</span></span>

<span data-ttu-id="863c3-539">Обратите внимание, что [**сетпроцессдефаултлайаут**](/windows/win32/api/winuser/nf-winuser-setprocessdefaultlayout) отражает только контроллеры домена с зеркальными окнами.</span><span class="sxs-lookup"><span data-stu-id="863c3-539">Note, [**SetProcessDefaultLayout**](/windows/win32/api/winuser/nf-winuser-setprocessdefaultlayout) mirrors the DCs only of mirrored windows.</span></span> <span data-ttu-id="863c3-540">Для зеркального отображения любого контроллера домена вызовите [**сетлайаут**](/windows/win32/api/wingdi/nf-wingdi-setlayout)(HDC, Layout \_ RTL).</span><span class="sxs-lookup"><span data-stu-id="863c3-540">To mirror any DC, call [**SetLayout**](/windows/win32/api/wingdi/nf-wingdi-setlayout)(hdc, LAYOUT\_RTL).</span></span> <span data-ttu-id="863c3-541">Дополнительные сведения см. в разделе обсуждение контекстов устройств зеркального отображения, не связанных с Windows, которые описаны далее в этой статье.</span><span class="sxs-lookup"><span data-stu-id="863c3-541">For more information, see the discussion on mirroring device contexts not associated with windows, which comes later in this topic.</span></span>

<span data-ttu-id="863c3-542">Растровые изображения и значки в зеркальном окне также отражаются по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="863c3-542">Bitmaps and icons in a mirrored window are also mirrored by default.</span></span> <span data-ttu-id="863c3-543">Однако не все из них должны быть отражены.</span><span class="sxs-lookup"><span data-stu-id="863c3-543">However, not all of these should be mirrored.</span></span> <span data-ttu-id="863c3-544">Например, не следует создавать зеркальное отображение текста, эмблемы компании или аналоговых часов.</span><span class="sxs-lookup"><span data-stu-id="863c3-544">For example, those with text, a business logo, or an analog clock should not be mirrored.</span></span> <span data-ttu-id="863c3-545">Чтобы отключить зеркальное отображение точечных рисунков, вызовите [**сетлайаут**](/windows/win32/api/wingdi/nf-wingdi-setlayout) с разметкой \_ битмапориентатионпресервед bit, установленным в *двлайаут*.</span><span class="sxs-lookup"><span data-stu-id="863c3-545">To disable mirroring of bitmaps, call [**SetLayout**](/windows/win32/api/wingdi/nf-wingdi-setlayout) with the LAYOUT\_BITMAPORIENTATIONPRESERVED bit set in *dwLayout*.</span></span> <span data-ttu-id="863c3-546">Чтобы отключить зеркальное отображение в контроллере домена, вызовите **сетлайаут**(HDC, 0).</span><span class="sxs-lookup"><span data-stu-id="863c3-546">To disable mirroring in a DC, call **SetLayout**(hdc, 0).</span></span>

<span data-ttu-id="863c3-547">Чтобы запросить текущий макет по умолчанию, вызовите [**жетпроцессдефаултлайаут**](/windows/win32/api/winuser/nf-winuser-getprocessdefaultlayout).</span><span class="sxs-lookup"><span data-stu-id="863c3-547">To query the current default layout, call [**GetProcessDefaultLayout**](/windows/win32/api/winuser/nf-winuser-getprocessdefaultlayout).</span></span> <span data-ttu-id="863c3-548">После успешного возврата *пдвдефаултлайаут* содержит макет \_ RTL или 0.</span><span class="sxs-lookup"><span data-stu-id="863c3-548">Upon a successful return, *pdwDefaultLayout* contains LAYOUT\_RTL or 0.</span></span> <span data-ttu-id="863c3-549">Чтобы запросить параметры макета контекста устройства, вызовите метод [**компоновки**](/windows/win32/api/wingdi/nf-wingdi-getlayout).</span><span class="sxs-lookup"><span data-stu-id="863c3-549">To query the layout settings of the device context, call [**GetLayout**](/windows/win32/api/wingdi/nf-wingdi-getlayout).</span></span> <span data-ttu-id="863c3-550">При успешном возврате метод- **Layout** возвращает **DWORD** , который указывает параметры макета по параметрам макета \_ RTL и \_ битмапориентатионпресервед бит.</span><span class="sxs-lookup"><span data-stu-id="863c3-550">Upon a successful return, **GetLayout** returns a **DWORD** that indicates the layout settings by the settings of the LAYOUT\_RTL and the LAYOUT\_BITMAPORIENTATIONPRESERVED bits.</span></span>

<span data-ttu-id="863c3-551">После создания окна измените макет с помощью функции [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) .</span><span class="sxs-lookup"><span data-stu-id="863c3-551">After a window has been created, you change the layout using the [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) function.</span></span> <span data-ttu-id="863c3-552">Например, это необходимо, когда пользователь изменяет язык пользовательского интерфейса существующего окна с арабского языка или иврита на немецкий.</span><span class="sxs-lookup"><span data-stu-id="863c3-552">For example, this is necessary when the user changes the user interface language of an existing window from Arabic or Hebrew to German.</span></span> <span data-ttu-id="863c3-553">Однако при изменении макета существующего окна необходимо сделать недействительным и обновить окно, чтобы содержимое окна нарисовано на одном и том же макете.</span><span class="sxs-lookup"><span data-stu-id="863c3-553">However, when changing the layout of an existing window, you must invalidate and update the window to ensure that the contents of the window are all drawn on the same layout.</span></span> <span data-ttu-id="863c3-554">В следующем примере кода показан пример кода, который изменяет макет окна по мере необходимости:</span><span class="sxs-lookup"><span data-stu-id="863c3-554">The following code example is from sample code that changes the window layout as needed:</span></span>


```
// Using ANSI versions of GetWindowLong and SetWindowLong because Unicode
// is not needed for these calls

lExStyles = GetWindowLongA(hWnd, GWL_EXSTYLE);

// Check whether new layout is opposite the current layout
if (!!(pLState -> IsRTLLayout) != !!(lExStyles & WS_EX_LAYOUTRTL))
{
    // the following lines will update the window layout

    lExStyles ^= WS_EX_LAYOUTRTL;        // toggle layout
    SetWindowLongA(hWnd, GWL_EXSTYLE, lExStyles);
    InvalidateRect(hWnd, NULL, TRUE);    // to update layout in the client area
}
```



<span data-ttu-id="863c3-555">При зеркальном отображении следует придуматься к терминам «NEAR» и «Far» вместо «Left» и «right».</span><span class="sxs-lookup"><span data-stu-id="863c3-555">In mirroring, you should think in terms of "near" and "far" instead of "left" and "right".</span></span> <span data-ttu-id="863c3-556">В противном случае могут возникнуть проблемы.</span><span class="sxs-lookup"><span data-stu-id="863c3-556">Failure to do so can cause problems.</span></span> <span data-ttu-id="863c3-557">Одна из распространенных методик создания кода, вызывающая проблемы в зеркальном окне, возникает при сопоставлении координат экрана и клиентских координат.</span><span class="sxs-lookup"><span data-stu-id="863c3-557">One common coding practice that causes problems in a mirrored window occurs when mapping between screen coordinates and client coordinates.</span></span> <span data-ttu-id="863c3-558">Например, приложения часто используют код, аналогичный приведенному ниже, для размещения элемента управления в окне:</span><span class="sxs-lookup"><span data-stu-id="863c3-558">For example, applications often use code similar to the following to position a control in a window:</span></span>


```
// DO NOT USE THIS IF APPLICATION MIRRORS THE WINDOW

// get coordinates of the window in screen coordinates
GetWindowRect(hControl, (LPRECT) &rControlRect);  

// map screen coordinates to client coordinates in dialog
ScreenToClient(hDialog, (LPPOINT) &rControlRect.left); 
ScreenToClient(hDialog, (LPPOINT) &rControlRect.right);
```



<span data-ttu-id="863c3-559">Это вызывает проблемы при зеркальном отображении, поскольку левый конец прямоугольника станет правым ребром в зеркальном окне и наоборот.</span><span class="sxs-lookup"><span data-stu-id="863c3-559">This causes problems in mirroring because the left edge of the rectangle becomes the right edge in a mirrored window, and vice versa.</span></span> <span data-ttu-id="863c3-560">Чтобы избежать этой проблемы, замените вызовы [**скринтоклиент**](/windows/win32/api/winuser/nf-winuser-screentoclient) вызовом [**мапвиндовпоинтс**](/windows/win32/api/winuser/nf-winuser-mapwindowpoints) следующим образом:</span><span class="sxs-lookup"><span data-stu-id="863c3-560">To avoid this problem, replace the [**ScreenToClient**](/windows/win32/api/winuser/nf-winuser-screentoclient) calls with a call to [**MapWindowPoints**](/windows/win32/api/winuser/nf-winuser-mapwindowpoints) as follows:</span></span>


```
// USE THIS FOR MIRRORING

GetWindowRect(hControl, (LPRECT) &rControlRect);
MapWindowPoints(NULL, hDialog, (LPPOINT) &rControlRect, 2)
```



<span data-ttu-id="863c3-561">Этот код работает потому, что на платформах, поддерживающих зеркальное отображение, [**мапвиндовпоинтс**](/windows/win32/api/winuser/nf-winuser-mapwindowpoints) изменяется для переключения левой и правой точек при зеркальном отображении окна клиента.</span><span class="sxs-lookup"><span data-stu-id="863c3-561">This code works because, on platforms that support mirroring, [**MapWindowPoints**](/windows/win32/api/winuser/nf-winuser-mapwindowpoints) is modified to swap the left and right point coordinates when the client window is mirrored.</span></span> <span data-ttu-id="863c3-562">Дополнительные сведения см. в подразделе "Примечания" раздела **мапвиндовпоинтс**.</span><span class="sxs-lookup"><span data-stu-id="863c3-562">For more information, see the Remarks section of **MapWindowPoints**.</span></span>

<span data-ttu-id="863c3-563">Другой распространенный подход, который может вызвать проблемы в зеркальных окнах, — размещение объектов в клиентском окне с использованием смещений в экранных координатах вместо клиентских координат.</span><span class="sxs-lookup"><span data-stu-id="863c3-563">Another common practice that can cause problems in mirrored windows is positioning objects in a client window using offsets in screen coordinates instead of client coordinates.</span></span> <span data-ttu-id="863c3-564">Например, в следующем коде используется разница в координатах экрана в качестве положения x в координатах клиента для размещения элемента управления в диалоговом окне.</span><span class="sxs-lookup"><span data-stu-id="863c3-564">For example, the following code uses the difference in screen coordinates as the x position in client coordinates to position a control in a dialog box.</span></span>


```
// OK if LTR layout and mapping mode of client is MM_TEXT,
// but WRONG for a mirrored dialog 

RECT rdDialog;
RECT rcControl;

HWND hControl = GetDlgItem(hDlg, IDD_CONTROL);
GetWindowRect(hDlg, &rcDialog);             // gets rect in screen coordinates
GetWindowRect(hControl, &rcControl);
MoveWindow(hControl,
           rcControl.left - rcDialog.left,  // uses x position in client coords
           rcControl.top - rcDialog.top,
           nWidth,
           nHeight,
           FALSE);
```



<span data-ttu-id="863c3-565">Этот код подходит, когда окно диалогового окна имеет макет слева направо (LTR), а режим сопоставления клиента — это \_ текст в формате mm, так как Новая координата x в клиентской части соответствует разнице в левых границах элемента управления и диалоговом окне в координатах экрана.</span><span class="sxs-lookup"><span data-stu-id="863c3-565">This code is fine when the dialog window has left-to-right (LTR) layout and the mapping mode of the client is MM\_TEXT, because the new x position in client coordinates corresponds to the difference in left edges of the control and the dialog in screen coordinates.</span></span> <span data-ttu-id="863c3-566">Однако в зеркальном диалоговом окне левый и правый Обратны, поэтому следует использовать [**мапвиндовпоинтс**](/windows/win32/api/winuser/nf-winuser-mapwindowpoints) следующим образом:</span><span class="sxs-lookup"><span data-stu-id="863c3-566">However, in a mirrored dialog, left and right are reversed, so instead you should use [**MapWindowPoints**](/windows/win32/api/winuser/nf-winuser-mapwindowpoints) as follows:</span></span>


```
RECT rcDialog;
RECT rcControl;

HWND hControl - GetDlgItem(hDlg, IDD_CONTROL);
GetWindowRect(hControl, &rcControl);

// MapWindowPoints works correctly in both mirrored and non-mirrored windows.
MapWindowPoints(NULL, hDlg, (LPPOINT) &rcControl, 2);

// Now rcControl is in client coordinates.
MoveWindow(hControl, rcControl.left, rcControl.top, nWidth, nHeight, FALSE)
```



### <a name="mirroring-dialog-boxes-and-message-boxes"></a><span data-ttu-id="863c3-567">Диалоговое окно зеркального отображения и окна сообщений</span><span class="sxs-lookup"><span data-stu-id="863c3-567">Mirroring Dialog Boxes and Message Boxes</span></span>

<span data-ttu-id="863c3-568">Диалоговые окна и окна сообщений не наследуют макет, поэтому необходимо явно задать макет.</span><span class="sxs-lookup"><span data-stu-id="863c3-568">Dialog boxes and message boxes do not inherit layout, so you must set the layout explicitly.</span></span> <span data-ttu-id="863c3-569">Чтобы отобразить окно сообщения, вызовите [**MessageBox**](/windows/win32/api/winuser/nf-winuser-messagebox) или [**мессажебоксекс**](/windows/win32/api/winuser/nf-winuser-messageboxexa) с параметром **\_ RTLREADING МБ** .</span><span class="sxs-lookup"><span data-stu-id="863c3-569">To mirror a message box, call [**MessageBox**](/windows/win32/api/winuser/nf-winuser-messagebox) or [**MessageBoxEx**](/windows/win32/api/winuser/nf-winuser-messageboxexa) with the **MB\_RTLREADING** option.</span></span> <span data-ttu-id="863c3-570">Для разметки диалогового окна справа налево используйте расширенный стиль WS \_ ex \_ лайаутртл в структуре шаблона диалогового окна [**длгтемплатикс**](../dlgbox/dlgtemplateex.md).</span><span class="sxs-lookup"><span data-stu-id="863c3-570">To layout a dialog box right-to-left, use the extended style WS\_EX\_LAYOUTRTL in the dialog template structure [**DLGTEMPLATEEX**](../dlgbox/dlgtemplateex.md).</span></span> <span data-ttu-id="863c3-571">Страницы свойств являются особым случаем диалоговых окон.</span><span class="sxs-lookup"><span data-stu-id="863c3-571">Property sheets are a special case of dialog boxes.</span></span> <span data-ttu-id="863c3-572">Каждая вкладка рассматривается как отдельное диалоговое окно, поэтому необходимо включить \_ стиль WS ex \_ лайаутртл на каждой вкладке, которую нужно зеркально отобразить.</span><span class="sxs-lookup"><span data-stu-id="863c3-572">Each tab is treated as a separate dialog box, so you need to include the WS\_EX\_LAYOUTRTL style in every tab that you want mirrored.</span></span>

### <a name="mirroring-device-contexts-not-associated-with-a-window"></a><span data-ttu-id="863c3-573">Контексты устройств зеркального отображения, не связанные с окном</span><span class="sxs-lookup"><span data-stu-id="863c3-573">Mirroring Device Contexts Not Associated with a Window</span></span>

<span data-ttu-id="863c3-574">Контроллеры домена, не связанные с окном, например метафайлы или контроллеры домена, не наследуют макет, поэтому необходимо явно задать макет.</span><span class="sxs-lookup"><span data-stu-id="863c3-574">DCs that are not associated with a window, such as metafile or printer DCs, do not inherit layout, so you must set the layout explicitly.</span></span> <span data-ttu-id="863c3-575">Чтобы изменить макет контекста устройства, используйте функцию [**сетлайаут**](/windows/win32/api/wingdi/nf-wingdi-setlayout) .</span><span class="sxs-lookup"><span data-stu-id="863c3-575">To change the device context layout, use the [**SetLayout**](/windows/win32/api/wingdi/nf-wingdi-setlayout) function.</span></span>

<span data-ttu-id="863c3-576">Функция [**сетлайаут**](/windows/win32/api/wingdi/nf-wingdi-setlayout) редко используется в Windows.</span><span class="sxs-lookup"><span data-stu-id="863c3-576">The [**SetLayout**](/windows/win32/api/wingdi/nf-wingdi-setlayout) function is rarely used with windows.</span></span> <span data-ttu-id="863c3-577">Как правило, Windows получает связанный контроллер домена только при обработке сообщения [**WM \_ Paint**](../gdi/wm-paint.md) .</span><span class="sxs-lookup"><span data-stu-id="863c3-577">Typically, windows receive an associated DC only in processing a [**WM\_PAINT**](../gdi/wm-paint.md) message.</span></span> <span data-ttu-id="863c3-578">Иногда программа создает контроллер домена для окна, вызывая [**GetDC**](/windows/win32/api/winuser/nf-winuser-getdc).</span><span class="sxs-lookup"><span data-stu-id="863c3-578">Occasionally, a program creates a DC for a window by calling [**GetDC**](/windows/win32/api/winuser/nf-winuser-getdc).</span></span> <span data-ttu-id="863c3-579">В любом случае начальный макет контроллера домена задается параметром [**бегинпаинт**](/windows/win32/api/winuser/nf-winuser-beginpaint) или **GetDC** в соответствии с \_ флагом окна WS \_ ex лайаутртл.</span><span class="sxs-lookup"><span data-stu-id="863c3-579">Either way, the initial layout for the DC is set by [**BeginPaint**](/windows/win32/api/winuser/nf-winuser-beginpaint) or **GetDC** according to the window's WS\_EX\_LAYOUTRTL flag.</span></span>

<span data-ttu-id="863c3-580">На значения, возвращаемые [**жетвиндоворжекс**](/windows/win32/api/wingdi/nf-wingdi-getwindoworgex), [**жетвиндовекстекс**](/windows/win32/api/wingdi/nf-wingdi-getwindowextex), [**жетвиевпорторжекс**](/windows/win32/api/wingdi/nf-wingdi-getviewportorgex) и [**жетвиевпортекстекс**](/windows/win32/api/wingdi/nf-wingdi-getviewportextex) , не влияет вызов [**сетлайаут**](/windows/win32/api/wingdi/nf-wingdi-setlayout).</span><span class="sxs-lookup"><span data-stu-id="863c3-580">The values returned by [**GetWindowOrgEx**](/windows/win32/api/wingdi/nf-wingdi-getwindoworgex), [**GetWindowExtEx**](/windows/win32/api/wingdi/nf-wingdi-getwindowextex), [**GetViewportOrgEx**](/windows/win32/api/wingdi/nf-wingdi-getviewportorgex) and [**GetViewportExtEx**](/windows/win32/api/wingdi/nf-wingdi-getviewportextex) are not affected by calling [**SetLayout**](/windows/win32/api/wingdi/nf-wingdi-setlayout).</span></span>

<span data-ttu-id="863c3-581">Если макет имеет вид RTL, [**жетмапмоде**](/windows/win32/api/wingdi/nf-wingdi-getmapmode) будет возвращать мм \_ анизотропную длину вместо mm \_ Text.</span><span class="sxs-lookup"><span data-stu-id="863c3-581">When the layout is RTL, [**GetMapMode**](/windows/win32/api/wingdi/nf-wingdi-getmapmode) will return MM\_ANISOTROPIC instead of MM\_TEXT.</span></span> <span data-ttu-id="863c3-582">Вызов [**сетмапмоде**](/windows/win32/api/wingdi/nf-wingdi-setmapmode) с \_ текстом mm будет работать правильно, только возвращаемое значение из **жетмапмоде** затронуто.</span><span class="sxs-lookup"><span data-stu-id="863c3-582">Calling [**SetMapMode**](/windows/win32/api/wingdi/nf-wingdi-setmapmode) with MM\_TEXT will function correctly; only the return value from **GetMapMode** is affected.</span></span> <span data-ttu-id="863c3-583">Аналогично, вызов [**сетлайаут**](/windows/win32/api/wingdi/nf-wingdi-setlayout)(HDC, Layout \_ RTL), если режим СОПОСТАВЛЕНИЯ — текст mm, приводит к \_ изменению режима сопоставления на « \_ анизотропная».</span><span class="sxs-lookup"><span data-stu-id="863c3-583">Similarly, calling [**SetLayout**](/windows/win32/api/wingdi/nf-wingdi-setlayout)(hdc, LAYOUT\_RTL) when the mapping mode is MM\_TEXT causes the reported mapping mode to change to MM\_ANISOTROPIC.</span></span>

## <a name="window-destruction"></a><span data-ttu-id="863c3-584">Уничтожение окна</span><span class="sxs-lookup"><span data-stu-id="863c3-584">Window Destruction</span></span>

<span data-ttu-id="863c3-585">Как правило, приложение должно уничтожить все создаваемые им окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-585">In general, an application must destroy all the windows it creates.</span></span> <span data-ttu-id="863c3-586">Для этого используется функция [**дестройвиндов**](/windows/win32/api/winuser/nf-winuser-destroywindow) .</span><span class="sxs-lookup"><span data-stu-id="863c3-586">It does this by using the [**DestroyWindow**](/windows/win32/api/winuser/nf-winuser-destroywindow) function.</span></span> <span data-ttu-id="863c3-587">При уничтожении окна система скрывает окно, если оно видимо, а затем удаляет все внутренние данные, связанные с окном.</span><span class="sxs-lookup"><span data-stu-id="863c3-587">When a window is destroyed, the system hides the window, if it is visible, and then removes any internal data associated with the window.</span></span> <span data-ttu-id="863c3-588">Это сделает недействительным маркер окна, который больше не может использоваться приложением.</span><span class="sxs-lookup"><span data-stu-id="863c3-588">This invalidates the window handle, which can no longer be used by the application.</span></span>

<span data-ttu-id="863c3-589">Приложение уничтожает многие окна, создаваемые в ближайшее время после создания.</span><span class="sxs-lookup"><span data-stu-id="863c3-589">An application destroys many of the windows it creates soon after creating them.</span></span> <span data-ttu-id="863c3-590">Например, приложение обычно уничтожает окно диалогового окна, как только приложение будет иметь входные данные, необходимые пользователю для продолжения задачи.</span><span class="sxs-lookup"><span data-stu-id="863c3-590">For example, an application usually destroys a dialog box window as soon as the application has sufficient input from the user to continue its task.</span></span> <span data-ttu-id="863c3-591">Приложение в конечном итоге уничтожает главное окно приложения (перед завершением работы).</span><span class="sxs-lookup"><span data-stu-id="863c3-591">An application eventually destroys the main window of the application (before terminating).</span></span>

<span data-ttu-id="863c3-592">Перед уничтожением окна приложение должно сохранить или удалить все данные, связанные с окном, и освободить все системные ресурсы, выделенные для окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-592">Before destroying a window, an application should save or remove any data associated with the window, and it should release any system resources allocated for the window.</span></span> <span data-ttu-id="863c3-593">Если приложение не освобождает ресурсы, система освобождает все ресурсы, не освобожденные приложением.</span><span class="sxs-lookup"><span data-stu-id="863c3-593">If the application does not release the resources, the system will free any resources not freed by the application.</span></span>

<span data-ttu-id="863c3-594">Уничтожение окна не влияет на класс окна, из которого создается окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-594">Destroying a window does not affect the window class from which the window is created.</span></span> <span data-ttu-id="863c3-595">Новые окна можно по-прежнему создавать с помощью этого класса, а все существующие окна этого класса продолжают работать.</span><span class="sxs-lookup"><span data-stu-id="863c3-595">New windows can still be created using that class, and any existing windows of that class continue to operate.</span></span> <span data-ttu-id="863c3-596">При уничтожении окна также уничтожаются его дочерние окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-596">Destroying a window also destroys the window's descendant windows.</span></span> <span data-ttu-id="863c3-597">Функция [**дестройвиндов**](/windows/win32/api/winuser/nf-winuser-destroywindow) отправляет сообщение [**WM \_ destroy**](wm-destroy.md) сначала в окно, а затем в его дочерние окна и подчиненные окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-597">The [**DestroyWindow**](/windows/win32/api/winuser/nf-winuser-destroywindow) function sends a [**WM\_DESTROY**](wm-destroy.md) message first to the window, then to its child windows and descendant windows.</span></span> <span data-ttu-id="863c3-598">Таким образом все дочерние окна, которые уничтожаются, также уничтожаются.</span><span class="sxs-lookup"><span data-stu-id="863c3-598">In this way, all descendant windows of the window being destroyed are also destroyed.</span></span>

<span data-ttu-id="863c3-599">Окно с меню окна получает сообщение о [**\_ закрытии WM**](wm-close.md) , когда пользователь нажимает кнопку **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="863c3-599">A window with a window menu receives a [**WM\_CLOSE**](wm-close.md) message when the user clicks **Close**.</span></span> <span data-ttu-id="863c3-600">Обрабатывая это сообщение, приложение может запросить у пользователя подтверждение перед уничтожением окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-600">By processing this message, an application can prompt the user for confirmation before destroying the window.</span></span> <span data-ttu-id="863c3-601">Если пользователь подтверждает, что окно должно быть уничтожено, приложение может вызвать функцию [**дестройвиндов**](/windows/win32/api/winuser/nf-winuser-destroywindow) для уничтожения окна.</span><span class="sxs-lookup"><span data-stu-id="863c3-601">If the user confirms that the window should be destroyed, the application can call the [**DestroyWindow**](/windows/win32/api/winuser/nf-winuser-destroywindow) function to destroy the window.</span></span>

<span data-ttu-id="863c3-602">Если окно, которое уничтожается, является активным окном, состояния активного и фокуса передаются в другое окно.</span><span class="sxs-lookup"><span data-stu-id="863c3-602">If the window being destroyed is the active window, both the active and focus states are transferred to another window.</span></span> <span data-ttu-id="863c3-603">Окно, которое становится активным окном, является следующим окном, как определено сочетанием клавиш ALT + ESC.</span><span class="sxs-lookup"><span data-stu-id="863c3-603">The window that becomes the active window is the next window, as determined by the ALT+ESC key combination.</span></span> <span data-ttu-id="863c3-604">Новое активное окно определяет, какое окно получает фокус клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="863c3-604">The new active window then determines which window receives the keyboard focus.</span></span>

 

 
