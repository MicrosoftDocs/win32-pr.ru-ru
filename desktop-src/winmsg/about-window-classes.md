---
description: Каждый класс окна имеет связанную процедуру окна, совместно используемую всеми окнами того же класса. Процедура окна обрабатывает сообщения для всех окон этого класса и, следовательно, управляет их поведением и внешним видом.
ms.assetid: db79fd4b-6a15-4bf9-a0d9-5f6415f6c75f
title: О классах окон
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b683176c3fd7904cf3f89b385ce0fa393b89e9f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104272087"
---
# <a name="about-window-classes"></a><span data-ttu-id="b9f51-104">О классах окон</span><span class="sxs-lookup"><span data-stu-id="b9f51-104">About Window Classes</span></span>

<span data-ttu-id="b9f51-105">Каждый класс окна имеет связанную процедуру окна, совместно используемую всеми окнами того же класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-105">Each window class has an associated window procedure shared by all windows of the same class.</span></span> <span data-ttu-id="b9f51-106">Процедура окна обрабатывает сообщения для всех окон этого класса и, следовательно, управляет их поведением и внешним видом.</span><span class="sxs-lookup"><span data-stu-id="b9f51-106">The window procedure processes messages for all windows of that class and therefore controls their behavior and appearance.</span></span> <span data-ttu-id="b9f51-107">Дополнительные сведения см. в разделе [Процедуры окна](window-procedures.md).</span><span class="sxs-lookup"><span data-stu-id="b9f51-107">For more information, see [Window Procedures](window-procedures.md).</span></span>

<span data-ttu-id="b9f51-108">Процесс должен зарегистрировать класс окна, прежде чем он сможет создать окно этого класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-108">A process must register a window class before it can create a window of that class.</span></span> <span data-ttu-id="b9f51-109">Регистрация класса окна связывает процедуру окна, стили классов и другие атрибуты класса с именем класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-109">Registering a window class associates a window procedure, class styles, and other class attributes with a class name.</span></span> <span data-ttu-id="b9f51-110">Когда процесс задает имя класса в функции [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) или [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) , система создает окно с процедурой окна, стилями и другими атрибутами, связанными с именем этого класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-110">When a process specifies a class name in the [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) or [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) function, the system creates a window with the window procedure, styles, and other attributes associated with that class name.</span></span>

<span data-ttu-id="b9f51-111">В этом разделе рассматриваются следующие темы.</span><span class="sxs-lookup"><span data-stu-id="b9f51-111">This section discusses the following topics.</span></span>

-   [<span data-ttu-id="b9f51-112">Типы классов окон</span><span class="sxs-lookup"><span data-stu-id="b9f51-112">Types of Window Classes</span></span>](#types-of-window-classes)
    -   [<span data-ttu-id="b9f51-113">Системные классы</span><span class="sxs-lookup"><span data-stu-id="b9f51-113">System Classes</span></span>](#system-classes)
    -   [<span data-ttu-id="b9f51-114">Глобальные классы приложений</span><span class="sxs-lookup"><span data-stu-id="b9f51-114">Application Global Classes</span></span>](#application-global-classes)
    -   [<span data-ttu-id="b9f51-115">Локальные классы приложения</span><span class="sxs-lookup"><span data-stu-id="b9f51-115">Application Local Classes</span></span>](#application-local-classes)
-   [<span data-ttu-id="b9f51-116">Как система находит класс окна</span><span class="sxs-lookup"><span data-stu-id="b9f51-116">How the System Locates a Window Class</span></span>](#how-the-system-locates-a-window-class)
-   [<span data-ttu-id="b9f51-117">Регистрация класса окна</span><span class="sxs-lookup"><span data-stu-id="b9f51-117">Registering a Window Class</span></span>](#registering-a-window-class)
-   [<span data-ttu-id="b9f51-118">Элементы класса Window</span><span class="sxs-lookup"><span data-stu-id="b9f51-118">Elements of a Window Class</span></span>](#elements-of-a-window-class)
    -   [<span data-ttu-id="b9f51-119">Имя класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-119">Class Name</span></span>](#class-name)
    -   [<span data-ttu-id="b9f51-120">Адрес процедуры окна</span><span class="sxs-lookup"><span data-stu-id="b9f51-120">Window Procedure Address</span></span>](#window-procedure-address)
    -   [<span data-ttu-id="b9f51-121">Маркер экземпляра</span><span class="sxs-lookup"><span data-stu-id="b9f51-121">Instance Handle</span></span>](#instance-handle)
    -   [<span data-ttu-id="b9f51-122">Курсор класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-122">Class Cursor</span></span>](#class-cursor)
    -   [<span data-ttu-id="b9f51-123">Значки классов</span><span class="sxs-lookup"><span data-stu-id="b9f51-123">Class Icons</span></span>](#class-icons)
    -   [<span data-ttu-id="b9f51-124">Кисть фона класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-124">Class Background Brush</span></span>](#class-background-brush)
    -   [<span data-ttu-id="b9f51-125">Меню класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-125">Class Menu</span></span>](#class-menu)
    -   [<span data-ttu-id="b9f51-126">Стили класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-126">Class Styles</span></span>](#class-styles)
    -   [<span data-ttu-id="b9f51-127">Память дополнительного класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-127">Extra Class Memory</span></span>](#extra-class-memory)
    -   [<span data-ttu-id="b9f51-128">Размер дополнительной памяти окна</span><span class="sxs-lookup"><span data-stu-id="b9f51-128">Extra Window Memory</span></span>](#extra-window-memory)

## <a name="types-of-window-classes"></a><span data-ttu-id="b9f51-129">Типы классов окон</span><span class="sxs-lookup"><span data-stu-id="b9f51-129">Types of Window Classes</span></span>

<span data-ttu-id="b9f51-130">Существует три типа классов окон:</span><span class="sxs-lookup"><span data-stu-id="b9f51-130">There are three types of window classes:</span></span>

-   [<span data-ttu-id="b9f51-131">Системные классы</span><span class="sxs-lookup"><span data-stu-id="b9f51-131">System Classes</span></span>](#system-classes)
-   [<span data-ttu-id="b9f51-132">Глобальные классы приложений</span><span class="sxs-lookup"><span data-stu-id="b9f51-132">Application Global Classes</span></span>](#application-global-classes)
-   [<span data-ttu-id="b9f51-133">Локальные классы приложения</span><span class="sxs-lookup"><span data-stu-id="b9f51-133">Application Local Classes</span></span>](#application-local-classes)

<span data-ttu-id="b9f51-134">Эти типы различаются в области и в случаях, когда и как они регистрируются и уничтожаются.</span><span class="sxs-lookup"><span data-stu-id="b9f51-134">These types differ in scope and in when and how they are registered and destroyed.</span></span>

### <a name="system-classes"></a><span data-ttu-id="b9f51-135">Системные классы</span><span class="sxs-lookup"><span data-stu-id="b9f51-135">System Classes</span></span>

<span data-ttu-id="b9f51-136">Системный класс — это класс окна, зарегистрированный системой.</span><span class="sxs-lookup"><span data-stu-id="b9f51-136">A system class is a window class registered by the system.</span></span> <span data-ttu-id="b9f51-137">Многие системные классы доступны для использования всеми процессами, а другие используются только внутри системы.</span><span class="sxs-lookup"><span data-stu-id="b9f51-137">Many system classes are available for all processes to use, while others are used only internally by the system.</span></span> <span data-ttu-id="b9f51-138">Поскольку система регистрирует эти классы, процесс не может уничтожить их.</span><span class="sxs-lookup"><span data-stu-id="b9f51-138">Because the system registers these classes, a process cannot destroy them.</span></span>

<span data-ttu-id="b9f51-139">Система регистрирует системные классы для процесса в первый раз, когда один из его потоков вызывает функцию пользователя или Windows интерфейс графических устройств (GDI).</span><span class="sxs-lookup"><span data-stu-id="b9f51-139">The system registers the system classes for a process the first time one of its threads calls a User or a Windows Graphics Device Interface (GDI) function.</span></span>

<span data-ttu-id="b9f51-140">Каждое приложение получает собственную копию системных классов.</span><span class="sxs-lookup"><span data-stu-id="b9f51-140">Each application receives its own copy of the system classes.</span></span> <span data-ttu-id="b9f51-141">Все 16-разрядные приложения на базе Windows в одном и том же классе общей системы VDM, как и в 16-разрядных Windows.</span><span class="sxs-lookup"><span data-stu-id="b9f51-141">All 16-bit Windows-based applications in the same VDM share system classes, just as they do on 16-bit Windows.</span></span>

<span data-ttu-id="b9f51-142">В следующей таблице описаны системные классы, доступные для использования всеми процессами.</span><span class="sxs-lookup"><span data-stu-id="b9f51-142">The following table describes the system classes that are available for use by all processes.</span></span>



| <span data-ttu-id="b9f51-143">Класс</span><span class="sxs-lookup"><span data-stu-id="b9f51-143">Class</span></span>     | <span data-ttu-id="b9f51-144">Описание</span><span class="sxs-lookup"><span data-stu-id="b9f51-144">Description</span></span>                         |
|-----------|-------------------------------------|
| <span data-ttu-id="b9f51-145">Кнопка</span><span class="sxs-lookup"><span data-stu-id="b9f51-145">Button</span></span>    | <span data-ttu-id="b9f51-146">Класс для кнопки.</span><span class="sxs-lookup"><span data-stu-id="b9f51-146">The class for a button.</span></span>             |
| <span data-ttu-id="b9f51-147">ComboBox</span><span class="sxs-lookup"><span data-stu-id="b9f51-147">ComboBox</span></span>  | <span data-ttu-id="b9f51-148">Класс для поля со списком.</span><span class="sxs-lookup"><span data-stu-id="b9f51-148">The class for a combo box.</span></span>          |
| <span data-ttu-id="b9f51-149">Изменить</span><span class="sxs-lookup"><span data-stu-id="b9f51-149">Edit</span></span>      | <span data-ttu-id="b9f51-150">Класс для элемента управления "поле ввода".</span><span class="sxs-lookup"><span data-stu-id="b9f51-150">The class for an edit control.</span></span>      |
| <span data-ttu-id="b9f51-151">ListBox</span><span class="sxs-lookup"><span data-stu-id="b9f51-151">ListBox</span></span>   | <span data-ttu-id="b9f51-152">Класс для поля со списком.</span><span class="sxs-lookup"><span data-stu-id="b9f51-152">The class for a list box.</span></span>           |
| <span data-ttu-id="b9f51-153">мдиклиент</span><span class="sxs-lookup"><span data-stu-id="b9f51-153">MDIClient</span></span> | <span data-ttu-id="b9f51-154">Класс для клиентского окна MDI.</span><span class="sxs-lookup"><span data-stu-id="b9f51-154">The class for an MDI client window.</span></span> |
| <span data-ttu-id="b9f51-155">ScrollBar</span><span class="sxs-lookup"><span data-stu-id="b9f51-155">ScrollBar</span></span> | <span data-ttu-id="b9f51-156">Класс для полосы прокрутки.</span><span class="sxs-lookup"><span data-stu-id="b9f51-156">The class for a scroll bar.</span></span>         |
| <span data-ttu-id="b9f51-157">Статические</span><span class="sxs-lookup"><span data-stu-id="b9f51-157">Static</span></span>    | <span data-ttu-id="b9f51-158">Класс для статического элемента управления.</span><span class="sxs-lookup"><span data-stu-id="b9f51-158">The class for a static control.</span></span>     |



 

<span data-ttu-id="b9f51-159">В следующей таблице описаны системные классы, доступные только для использования системой.</span><span class="sxs-lookup"><span data-stu-id="b9f51-159">The following table describes the system classes that are available only for use by the system.</span></span> <span data-ttu-id="b9f51-160">Они перечислены здесь для полноты.</span><span class="sxs-lookup"><span data-stu-id="b9f51-160">They are listed here for completeness sake.</span></span>



| <span data-ttu-id="b9f51-161">Класс</span><span class="sxs-lookup"><span data-stu-id="b9f51-161">Class</span></span>      | <span data-ttu-id="b9f51-162">Описание</span><span class="sxs-lookup"><span data-stu-id="b9f51-162">Description</span></span>                                                            |
|------------|------------------------------------------------------------------------|
| <span data-ttu-id="b9f51-163">комболбокс</span><span class="sxs-lookup"><span data-stu-id="b9f51-163">ComboLBox</span></span>  | <span data-ttu-id="b9f51-164">Класс для списка, содержащийся в поле со списком.</span><span class="sxs-lookup"><span data-stu-id="b9f51-164">The class for the list box contained in a combo box.</span></span>                   |
| <span data-ttu-id="b9f51-165">ддемлевент</span><span class="sxs-lookup"><span data-stu-id="b9f51-165">DDEMLEvent</span></span> | <span data-ttu-id="b9f51-166">Класс для платформа динамических данных событий библиотеки управления Exchange (ДДЕМЛ).</span><span class="sxs-lookup"><span data-stu-id="b9f51-166">The class for Dynamic Data Exchange Management Library (DDEML) events.</span></span> |
| <span data-ttu-id="b9f51-167">Сообщение</span><span class="sxs-lookup"><span data-stu-id="b9f51-167">Message</span></span>    | <span data-ttu-id="b9f51-168">Класс для окна, в котором только сообщения.</span><span class="sxs-lookup"><span data-stu-id="b9f51-168">The class for a message-only window.</span></span>                                   |
| <span data-ttu-id="b9f51-169">\#32768</span><span class="sxs-lookup"><span data-stu-id="b9f51-169">\#32768</span></span>    | <span data-ttu-id="b9f51-170">Класс для меню.</span><span class="sxs-lookup"><span data-stu-id="b9f51-170">The class for a menu.</span></span>                                                  |
| <span data-ttu-id="b9f51-171">\#32769</span><span class="sxs-lookup"><span data-stu-id="b9f51-171">\#32769</span></span>    | <span data-ttu-id="b9f51-172">Класс для окна рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="b9f51-172">The class for the desktop window.</span></span>                                      |
| <span data-ttu-id="b9f51-173">\#32770</span><span class="sxs-lookup"><span data-stu-id="b9f51-173">\#32770</span></span>    | <span data-ttu-id="b9f51-174">Класс для диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-174">The class for a dialog box.</span></span>                                            |
| <span data-ttu-id="b9f51-175">\#32771</span><span class="sxs-lookup"><span data-stu-id="b9f51-175">\#32771</span></span>    | <span data-ttu-id="b9f51-176">Класс для окна переключения задач.</span><span class="sxs-lookup"><span data-stu-id="b9f51-176">The class for the task switch window.</span></span>                                  |
| <span data-ttu-id="b9f51-177">\#32772</span><span class="sxs-lookup"><span data-stu-id="b9f51-177">\#32772</span></span>    | <span data-ttu-id="b9f51-178">Класс для заголовков значков.</span><span class="sxs-lookup"><span data-stu-id="b9f51-178">The class for icon titles.</span></span>                                             |



 

### <a name="application-global-classes"></a><span data-ttu-id="b9f51-179">Глобальные классы приложений</span><span class="sxs-lookup"><span data-stu-id="b9f51-179">Application Global Classes</span></span>

<span data-ttu-id="b9f51-180">[Глобальный класс приложения](#application-global-classes) — это класс окна, зарегистрированный исполняемым ФАЙЛОМ или библиотекой DLL, который доступен всем остальным модулям в процессе.</span><span class="sxs-lookup"><span data-stu-id="b9f51-180">An [application global class](#application-global-classes) is a window class registered by an executable or DLL that is available to all other modules in the process.</span></span> <span data-ttu-id="b9f51-181">Например, Библиотека DLL может вызвать функцию [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) для регистрации класса окна, определяющего пользовательский элемент управления в качестве глобального класса приложения, чтобы процесс, загружающий DLL-файл, мог создавать экземпляры пользовательского элемента управления.</span><span class="sxs-lookup"><span data-stu-id="b9f51-181">For example, your .dll can call the [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) function to register a window class that defines a custom control as an application global class so that a process that loads the .dll can create instances of the custom control.</span></span>

<span data-ttu-id="b9f51-182">Чтобы создать класс, который можно использовать в каждом процессе, создайте класс Window в DLL и загрузите DLL-файл в каждый процесс.</span><span class="sxs-lookup"><span data-stu-id="b9f51-182">To create a class that can be used in every process, create the window class in a .dll and load the .dll in every process.</span></span> <span data-ttu-id="b9f51-183">Чтобы загрузить DLL-файл в каждый процесс, добавьте его имя в значение **библиотеки \_ DLL** в следующем разделе реестра:</span><span class="sxs-lookup"><span data-stu-id="b9f51-183">To load the .dll in every process, add its name to the **AppInit\_DLLs** value in following registry key:</span></span>

<span data-ttu-id="b9f51-184">**HKey \_ \_** \\ **Программное обеспечение** локального компьютера \\ **Microsoft** \\ **Windows NT** \\ **CurrentVersion** \\ **Windows**</span><span class="sxs-lookup"><span data-stu-id="b9f51-184">**HKEY\_LOCAL\_MACHINE**\\**Software**\\**Microsoft**\\**Windows NT**\\**CurrentVersion**\\**Windows**</span></span>

<span data-ttu-id="b9f51-185">При каждом запуске процесса система загружает указанную DLL-файл в контексте вновь запущенного процесса перед вызовом функции точки входа.</span><span class="sxs-lookup"><span data-stu-id="b9f51-185">Whenever a process starts, the system loads the specified .dll in the context of the newly started process before calling its entry-point function.</span></span> <span data-ttu-id="b9f51-186">DLL-файл должен зарегистрировать класс во время инициализации, и необходимо указать стиль **CS \_ глобалкласс** .</span><span class="sxs-lookup"><span data-stu-id="b9f51-186">The .dll must register the class during its initialization procedure and must specify the **CS\_GLOBALCLASS** style.</span></span> <span data-ttu-id="b9f51-187">Дополнительные сведения см. в разделе [стили классов](#class-styles).</span><span class="sxs-lookup"><span data-stu-id="b9f51-187">For more information, see [Class Styles](#class-styles).</span></span>

<span data-ttu-id="b9f51-188">Чтобы удалить глобальный класс приложения и освободить связанное с ним хранилище, используйте функцию [**унрегистеркласс**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-188">To remove an application global class and free the storage associated with it, use the [**UnregisterClass**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) function.</span></span>

### <a name="application-local-classes"></a><span data-ttu-id="b9f51-189">Локальные классы приложения</span><span class="sxs-lookup"><span data-stu-id="b9f51-189">Application Local Classes</span></span>

<span data-ttu-id="b9f51-190">[Локальный класс приложения](#application-local-classes) — это любой класс окна, который регистрируется исполняемым файлом или библиотекой DLL для монопольного использования.</span><span class="sxs-lookup"><span data-stu-id="b9f51-190">An [application local class](#application-local-classes) is any window class that an executable or .dll registers for its exclusive use.</span></span> <span data-ttu-id="b9f51-191">Хотя можно зарегистрировать любое количество локальных классов, обычно регистрируется только один.</span><span class="sxs-lookup"><span data-stu-id="b9f51-191">Although you can register any number of local classes, it is typical to register only one.</span></span> <span data-ttu-id="b9f51-192">Этот класс окон поддерживает процедуру окна главного окна приложения.</span><span class="sxs-lookup"><span data-stu-id="b9f51-192">This window class supports the window procedure of the application's main window.</span></span>

<span data-ttu-id="b9f51-193">Система уничтожает локальный класс, когда модуль, который зарегистрировал его, закрывается.</span><span class="sxs-lookup"><span data-stu-id="b9f51-193">The system destroys a local class when the module that registered it closes.</span></span> <span data-ttu-id="b9f51-194">Приложение также может использовать функцию [**унрегистеркласс**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) для удаления локального класса и освобождения связанного с ним хранилища.</span><span class="sxs-lookup"><span data-stu-id="b9f51-194">An application can also use the [**UnregisterClass**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) function to remove a local class and free the storage associated with it.</span></span>

## <a name="how-the-system-locates-a-window-class"></a><span data-ttu-id="b9f51-195">Как система находит класс окна</span><span class="sxs-lookup"><span data-stu-id="b9f51-195">How the System Locates a Window Class</span></span>

<span data-ttu-id="b9f51-196">Система содержит список структур для каждого из трех типов классов окон.</span><span class="sxs-lookup"><span data-stu-id="b9f51-196">The system maintains a list of structures for each of the three types of window classes.</span></span> <span data-ttu-id="b9f51-197">Когда приложение вызывает функцию [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) или [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) для создания окна с указанным классом, система использует следующую процедуру для нахождение класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-197">When an application calls the [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) or [**CreateWindowEx**](/windows/win32/api/winuser/nf-winuser-createwindowexa) function to create a window with a specified class, the system uses the following procedure to locate the class.</span></span>

1.  <span data-ttu-id="b9f51-198">Выполните поиск в списке локальных классов приложения для класса с указанным именем, чей экземпляр соответствует обработчику экземпляра модуля.</span><span class="sxs-lookup"><span data-stu-id="b9f51-198">Search the list of application local classes for a class with the specified name whose instance handle matches the module's instance handle.</span></span> <span data-ttu-id="b9f51-199">(Несколько модулей могут использовать одно и то же имя для регистрации локальных классов в одном процессе.)</span><span class="sxs-lookup"><span data-stu-id="b9f51-199">(Several modules can use the same name to register local classes in the same process.)</span></span>
2.  <span data-ttu-id="b9f51-200">Если имя отсутствует в списке локальных классов приложения, выполните поиск в списке глобальных классов приложения.</span><span class="sxs-lookup"><span data-stu-id="b9f51-200">If the name is not in the application local class list, search the list of application global classes.</span></span>
3.  <span data-ttu-id="b9f51-201">Если имя отсутствует в списке глобальных классов приложения, выполните поиск по списку классов системы.</span><span class="sxs-lookup"><span data-stu-id="b9f51-201">If the name is not in the application global class list, search the list of system classes.</span></span>

<span data-ttu-id="b9f51-202">Все окна, созданные приложением, используют эту процедуру, включая Windows, созданную системой от имени приложения, например диалоговые окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-202">All windows created by the application use this procedure, including windows created by the system on the application's behalf, such as dialog boxes.</span></span> <span data-ttu-id="b9f51-203">Можно переопределить системные классы, не затрагивая другие приложения.</span><span class="sxs-lookup"><span data-stu-id="b9f51-203">It is possible to override system classes without affecting other applications.</span></span> <span data-ttu-id="b9f51-204">Это значит, что приложение может зарегистрировать локальный класс приложения с тем же именем, что и системный класс.</span><span class="sxs-lookup"><span data-stu-id="b9f51-204">That is, an application can register an application local class having the same name as a system class.</span></span> <span data-ttu-id="b9f51-205">Этот класс System заменяется в контексте приложения, но не мешает другим приложениям использовать класс System.</span><span class="sxs-lookup"><span data-stu-id="b9f51-205">This replaces the system class in the context of the application but does not prevent other applications from using the system class.</span></span>

## <a name="registering-a-window-class"></a><span data-ttu-id="b9f51-206">Регистрация класса окна</span><span class="sxs-lookup"><span data-stu-id="b9f51-206">Registering a Window Class</span></span>

<span data-ttu-id="b9f51-207">Класс окна определяет атрибуты окна, например его стиль, значок, курсор, меню и процедуру окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-207">A window class defines the attributes of a window, such as its style, icon, cursor, menu, and window procedure.</span></span> <span data-ttu-id="b9f51-208">Первым шагом при регистрации класса окна является заполнение структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) данными класса Window.</span><span class="sxs-lookup"><span data-stu-id="b9f51-208">The first step in registering a window class is to fill in a [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure with the window class information.</span></span> <span data-ttu-id="b9f51-209">Дополнительные сведения см. в разделе [элементы класса Window](#elements-of-a-window-class).</span><span class="sxs-lookup"><span data-stu-id="b9f51-209">For more information, see [Elements of a Window Class](#elements-of-a-window-class).</span></span> <span data-ttu-id="b9f51-210">Затем передайте структуру в функцию [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-210">Next, pass the structure to the [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) function.</span></span> <span data-ttu-id="b9f51-211">Дополнительные сведения см. [в разделе using Window classes](using-window-classes.md).</span><span class="sxs-lookup"><span data-stu-id="b9f51-211">For more information, see [Using Window Classes](using-window-classes.md).</span></span>

<span data-ttu-id="b9f51-212">Чтобы зарегистрировать глобальный класс приложения, укажите \_ стиль CS глобалкласс в элементе **Style** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-212">To register an application global class, specify the CS\_GLOBALCLASS style in the **style** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span> <span data-ttu-id="b9f51-213">При регистрации локального класса приложения не указывайте стиль **CS \_ глобалкласс** .</span><span class="sxs-lookup"><span data-stu-id="b9f51-213">When registering an application local class, do not specify the **CS\_GLOBALCLASS** style.</span></span>

<span data-ttu-id="b9f51-214">Если вы регистрируете класс Window, используя версию ANSI [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa), **регистерклассекса**, приложение запрашивает передачу текстовых параметров сообщений в окна созданного класса, используя кодировку ANSI. Если вы регистрируете класс с помощью версии Юникода **RegisterClassEx**, **регистерклассексв**, приложение запрашивает передачу текстовых параметров сообщений в окна созданного класса, используя кодировку Юникода.</span><span class="sxs-lookup"><span data-stu-id="b9f51-214">If you register the window class using the ANSI version of [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa), **RegisterClassExA**, the application requests that the system pass text parameters of messages to the windows of the created class using the ANSI character set; if you register the class using the Unicode version of **RegisterClassEx**, **RegisterClassExW**, the application requests that the system pass text parameters of messages to the windows of the created class using the Unicode character set.</span></span> <span data-ttu-id="b9f51-215">Функция [**исвиндовуникоде**](/windows/win32/api/winuser/nf-winuser-iswindowunicode) позволяет приложениям запрашивать характер каждого окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-215">The [**IsWindowUnicode**](/windows/win32/api/winuser/nf-winuser-iswindowunicode) function enables applications to query the nature of each window.</span></span> <span data-ttu-id="b9f51-216">Дополнительные сведения о функциях ANSI и Unicode см. в разделе [соглашения для прототипов функций](/windows/desktop/Intl/conventions-for-function-prototypes).</span><span class="sxs-lookup"><span data-stu-id="b9f51-216">For more information on ANSI and Unicode functions, see [Conventions for Function Prototypes](/windows/desktop/Intl/conventions-for-function-prototypes).</span></span>

<span data-ttu-id="b9f51-217">Исполняемый файл или библиотека DLL, которая зарегистрировала класс, является владельцем класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-217">The executable or DLL that registered the class is the owner of the class.</span></span> <span data-ttu-id="b9f51-218">Система определяет владение классом из элемента **HINSTANCE** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) , передаваемого в функцию [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) при регистрации класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-218">The system determines class ownership from the **hInstance** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure passed to the [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) function when the class is registered.</span></span> <span data-ttu-id="b9f51-219">Для библиотек DLL элемент **HINSTANCE** должен быть обработчиком экземпляра. dll.</span><span class="sxs-lookup"><span data-stu-id="b9f51-219">For DLLs, the **hInstance** member must be the handle to the .dll instance.</span></span>

<span data-ttu-id="b9f51-220">Класс не уничтожается, когда DLL-файл, которому он принадлежит, выгружается.</span><span class="sxs-lookup"><span data-stu-id="b9f51-220">The class is not destroyed when the .dll that owns it is unloaded.</span></span> <span data-ttu-id="b9f51-221">Таким образом, если система вызывает процедуру окна для окна этого класса, это вызовет нарушение прав доступа, так как DLL-файл, содержащий процедуру окна, больше не находится в памяти.</span><span class="sxs-lookup"><span data-stu-id="b9f51-221">Therefore, if the system calls the window procedure for a window of that class, it will cause an access violation, because the .dll containing the window procedure is no longer in memory.</span></span> <span data-ttu-id="b9f51-222">Процесс должен уничтожить все окна с помощью класса перед выгрузкой. dll и вызвать функцию [**унрегистеркласс**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-222">The process must destroy all windows using the class before the .dll is unloaded and call the [**UnregisterClass**](/windows/win32/api/winuser/nf-winuser-unregisterclassa) function.</span></span>

## <a name="elements-of-a-window-class"></a><span data-ttu-id="b9f51-223">Элементы класса Window</span><span class="sxs-lookup"><span data-stu-id="b9f51-223">Elements of a Window Class</span></span>

<span data-ttu-id="b9f51-224">Элементы класса Window определяют поведение Windows по умолчанию, принадлежащее классу.</span><span class="sxs-lookup"><span data-stu-id="b9f51-224">The elements of a window class define the default behavior of windows belonging to the class.</span></span> <span data-ttu-id="b9f51-225">Приложение, которое регистрирует класс окна, назначает элементы классу путем установки соответствующих элементов в структуре [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) и передачи структуры в функцию [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-225">The application that registers a window class assigns elements to the class by setting appropriate members in a [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure and passing the structure to the [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) function.</span></span> <span data-ttu-id="b9f51-226">Функции [**жетклассинфоекс**](/windows/win32/api/winuser/nf-winuser-getclassinfoexa) и [**жеткласслонг**](/windows/win32/api/winuser/nf-winuser-getclasslonga) извлекают сведения о данном классе окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-226">The [**GetClassInfoEx**](/windows/win32/api/winuser/nf-winuser-getclassinfoexa) and [**GetClassLong**](/windows/win32/api/winuser/nf-winuser-getclasslonga) functions retrieve information about a given window class.</span></span> <span data-ttu-id="b9f51-227">Функция [**сеткласслонг**](/windows/win32/api/winuser/nf-winuser-setclasslonga) изменяет элементы локального или глобального класса, которые приложение уже зарегистрировало.</span><span class="sxs-lookup"><span data-stu-id="b9f51-227">The [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) function changes elements of a local or global class that the application has already registered.</span></span>

<span data-ttu-id="b9f51-228">Хотя полный класс окна состоит из множества элементов, система требует, чтобы приложение предпредоставил только имя класса, адрес процедуры окна и экземпляр.</span><span class="sxs-lookup"><span data-stu-id="b9f51-228">Although a complete window class consists of many elements, the system requires only that an application supply a class name, the window-procedure address, and an instance handle.</span></span> <span data-ttu-id="b9f51-229">Используйте другие элементы для определения атрибутов по умолчанию для окон класса, например формы курсора и содержимого меню для окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-229">Use the other elements to define default attributes for windows of the class, such as the shape of the cursor and the content of the menu for the window.</span></span> <span data-ttu-id="b9f51-230">Все неиспользуемые члены структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) необходимо инициализировать равными нулю или **null**.</span><span class="sxs-lookup"><span data-stu-id="b9f51-230">You must initialize any unused members of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure to zero or **NULL**.</span></span> <span data-ttu-id="b9f51-231">В следующей таблице приведены элементы класса Window.</span><span class="sxs-lookup"><span data-stu-id="b9f51-231">The window class elements are as shown in the following table.</span></span>



| <span data-ttu-id="b9f51-232">Элемент</span><span class="sxs-lookup"><span data-stu-id="b9f51-232">Element</span></span>                                               | <span data-ttu-id="b9f51-233">Назначение</span><span class="sxs-lookup"><span data-stu-id="b9f51-233">Purpose</span></span>                                                                                                                                                                                                                                       |
|-------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="b9f51-234">Имя класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-234">Class Name</span></span>](#class-name)                             | <span data-ttu-id="b9f51-235">Отличает класс от других зарегистрированных классов.</span><span class="sxs-lookup"><span data-stu-id="b9f51-235">Distinguishes the class from other registered classes.</span></span>                                                                                                                                                                                        |
| [<span data-ttu-id="b9f51-236">Адрес процедуры окна</span><span class="sxs-lookup"><span data-stu-id="b9f51-236">Window Procedure Address</span></span>](#window-procedure-address) | <span data-ttu-id="b9f51-237">Указатель на функцию, которая обрабатывает все сообщения, отправленные в Windows в классе, и определяет поведение окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-237">Pointer to the function that processes all messages sent to windows in the class and defines the behavior of the window.</span></span>                                                                                                                      |
| [<span data-ttu-id="b9f51-238">Маркер экземпляра</span><span class="sxs-lookup"><span data-stu-id="b9f51-238">Instance Handle</span></span>](#instance-handle)                   | <span data-ttu-id="b9f51-239">Определяет приложение или библиотеку DLL, которые регистрировали класс.</span><span class="sxs-lookup"><span data-stu-id="b9f51-239">Identifies the application or .dll that registered the class.</span></span>                                                                                                                                                                                 |
| [<span data-ttu-id="b9f51-240">Курсор класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-240">Class Cursor</span></span>](#class-cursor)                         | <span data-ttu-id="b9f51-241">Определяет курсор мыши, отображаемый системой для окна класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-241">Defines the mouse cursor that the system displays for a window of the class.</span></span>                                                                                                                                                                  |
| [<span data-ttu-id="b9f51-242">Значки классов</span><span class="sxs-lookup"><span data-stu-id="b9f51-242">Class Icons</span></span>](#class-icons)                           | <span data-ttu-id="b9f51-243">Определяет крупный значок и маленький значок.</span><span class="sxs-lookup"><span data-stu-id="b9f51-243">Defines the large icon and the small icon.</span></span>                                                                                                                                                                                                    |
| [<span data-ttu-id="b9f51-244">Кисть фона класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-244">Class Background Brush</span></span>](#class-background-brush)     | <span data-ttu-id="b9f51-245">Определяет цвет и шаблон, которые заполняют клиентскую область при открытии или закраске окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-245">Defines the color and pattern that fill the client area when the window is opened or painted.</span></span>                                                                                                                                                 |
| [<span data-ttu-id="b9f51-246">Меню класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-246">Class Menu</span></span>](#class-menu)                             | <span data-ttu-id="b9f51-247">Задает меню по умолчанию для окон, в котором не определено явно меню.</span><span class="sxs-lookup"><span data-stu-id="b9f51-247">Specifies the default menu for windows that do not explicitly define a menu.</span></span>                                                                                                                                                                  |
| [<span data-ttu-id="b9f51-248">Стили класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-248">Class Styles</span></span>](#class-styles)                         | <span data-ttu-id="b9f51-249">Определяет способ обновления окна после его перемещения или изменения его размера, обработки двойных щелчков мыши, выделения пространства для контекста устройства и других аспектов окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-249">Defines how to update the window after moving or resizing it, how to process double-clicks of the mouse, how to allocate space for the device context, and other aspects of the window.</span></span>                                                       |
| [<span data-ttu-id="b9f51-250">Память дополнительного класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-250">Extra Class Memory</span></span>](#extra-class-memory)             | <span data-ttu-id="b9f51-251">Указывает объем дополнительной памяти в байтах, резервируемый системой для класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-251">Specifies the amount of extra memory, in bytes, that the system should reserve for the class.</span></span> <span data-ttu-id="b9f51-252">Все окна в классе имеют доступ к дополнительной памяти и могут использовать ее для любых целей, определяемых приложением.</span><span class="sxs-lookup"><span data-stu-id="b9f51-252">All windows in the class share the extra memory and can use it for any application-defined purpose.</span></span> <span data-ttu-id="b9f51-253">Система инициализирует эту память как нулевую.</span><span class="sxs-lookup"><span data-stu-id="b9f51-253">The system initializes this memory to zero.</span></span> |
| [<span data-ttu-id="b9f51-254">Размер дополнительной памяти окна</span><span class="sxs-lookup"><span data-stu-id="b9f51-254">Extra Window Memory</span></span>](#extra-window-memory)           | <span data-ttu-id="b9f51-255">Указывает объем дополнительной памяти в байтах, резервируемый системой для каждого окна, принадлежащего классу.</span><span class="sxs-lookup"><span data-stu-id="b9f51-255">Specifies the amount of extra memory, in bytes, that the system should reserve for each window belonging to the class.</span></span> <span data-ttu-id="b9f51-256">Дополнительную память можно использовать для любых целей, определяемых приложением.</span><span class="sxs-lookup"><span data-stu-id="b9f51-256">The extra memory can be used for any application-defined purpose.</span></span> <span data-ttu-id="b9f51-257">Система инициализирует эту память как нулевую.</span><span class="sxs-lookup"><span data-stu-id="b9f51-257">The system initializes this memory to zero.</span></span>          |



 

### <a name="class-name"></a><span data-ttu-id="b9f51-258">Имя класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-258">Class Name</span></span>

<span data-ttu-id="b9f51-259">Каждому классу окна требуется [имя класса](#class-name) , чтобы отличать один класс от другого.</span><span class="sxs-lookup"><span data-stu-id="b9f51-259">Every window class needs a [Class Name](#class-name) to distinguish one class from another.</span></span> <span data-ttu-id="b9f51-260">Назначьте имя класса, задав для элемента **лпсзкласснаме** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) адрес строки, завершающейся нулем, которая указывает имя.</span><span class="sxs-lookup"><span data-stu-id="b9f51-260">Assign a class name by setting the **lpszClassName** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure to the address of a null-terminated string that specifies the name.</span></span> <span data-ttu-id="b9f51-261">Поскольку классы окон зависят от процесса, имена классов окон должны быть уникальными только в пределах одного процесса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-261">Because window classes are process specific, window class names need to be unique only within the same process.</span></span> <span data-ttu-id="b9f51-262">Кроме того, поскольку имена классов занимают пространство в частной таблице Atom системы, следует как можно более короткие строки имен классов.</span><span class="sxs-lookup"><span data-stu-id="b9f51-262">Also, because class names occupy space in the system's private atom table, you should keep class name strings as short a possible.</span></span>

<span data-ttu-id="b9f51-263">Функция [**className**](/windows/win32/api/winuser/nf-winuser-getclassname) возвращает имя класса, которому принадлежит заданное окно.</span><span class="sxs-lookup"><span data-stu-id="b9f51-263">The [**GetClassName**](/windows/win32/api/winuser/nf-winuser-getclassname) function retrieves the name of the class to which a given window belongs.</span></span>

### <a name="window-procedure-address"></a><span data-ttu-id="b9f51-264">Адрес процедуры окна</span><span class="sxs-lookup"><span data-stu-id="b9f51-264">Window Procedure Address</span></span>

<span data-ttu-id="b9f51-265">Каждому классу требуется адрес процедуры окна, чтобы определить точку входа для процедуры окна, используемой для обработки всех сообщений для окон в классе.</span><span class="sxs-lookup"><span data-stu-id="b9f51-265">Every class needs a window-procedure address to define the entry point of the window procedure used to process all messages for windows in the class.</span></span> <span data-ttu-id="b9f51-266">Система передает сообщения в процедуру, когда ей требуется окно для выполнения задач, таких как прорисовка клиентской области или реагирование на ввод пользователя.</span><span class="sxs-lookup"><span data-stu-id="b9f51-266">The system passes messages to the procedure when it requires the window to carry out tasks, such as painting its client area or responding to input from the user.</span></span> <span data-ttu-id="b9f51-267">Процесс присваивает процедуре окна классу путем копирования его адреса в элемент **лпфнвндпрок** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-267">A process assigns a window procedure to a class by copying its address to the **lpfnWndProc** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span> <span data-ttu-id="b9f51-268">Дополнительные сведения см. в разделе [Процедуры окна](window-procedures.md).</span><span class="sxs-lookup"><span data-stu-id="b9f51-268">For more information, see [Window Procedures](window-procedures.md).</span></span>

### <a name="instance-handle"></a><span data-ttu-id="b9f51-269">Маркер экземпляра</span><span class="sxs-lookup"><span data-stu-id="b9f51-269">Instance Handle</span></span>

<span data-ttu-id="b9f51-270">Каждый класс окна требует наличия обработчика экземпляра для указания приложения или библиотеки DLL, которая зарегистрировала класс.</span><span class="sxs-lookup"><span data-stu-id="b9f51-270">Every window class requires an instance handle to identify the application or .dll that registered the class.</span></span> <span data-ttu-id="b9f51-271">Система требует наличия дескрипторов экземпляров для наблюдения за всеми модулями.</span><span class="sxs-lookup"><span data-stu-id="b9f51-271">The system requires instance handles to keep track of all of modules.</span></span> <span data-ttu-id="b9f51-272">Система назначает маркер каждой копии выполняемого исполняемого файла или библиотеки DLL.</span><span class="sxs-lookup"><span data-stu-id="b9f51-272">The system assigns a handle to each copy of a running executable or .dll.</span></span>

<span data-ttu-id="b9f51-273">Система передает экземпляр в функцию точки входа каждого исполняемого файла (см. статью [**WinMain**](/windows/win32/api/winbase/nf-winbase-winmain)) и. dll (см. [**DllMain**](/windows/desktop/Dlls/dllmain)).</span><span class="sxs-lookup"><span data-stu-id="b9f51-273">The system passes an instance handle to the entry-point function of each executable (see [**WinMain**](/windows/win32/api/winbase/nf-winbase-winmain)) and .dll (see [**DllMain**](/windows/desktop/Dlls/dllmain)).</span></span> <span data-ttu-id="b9f51-274">Исполняемый файл или библиотека DLL назначает этот обработчик экземпляра классу, копируя его в элемент **HINSTANCE** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-274">The executable or .dll assigns this instance handle to the class by copying it to the **hInstance** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span>

### <a name="class-cursor"></a><span data-ttu-id="b9f51-275">Курсор класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-275">Class Cursor</span></span>

<span data-ttu-id="b9f51-276">*Курсор класса* определяет форму курсора, когда он находится в клиентской области окна в классе.</span><span class="sxs-lookup"><span data-stu-id="b9f51-276">The *class cursor* defines the shape of the cursor when it is in the client area of a window in the class.</span></span> <span data-ttu-id="b9f51-277">Система автоматически устанавливает курсор на заданную фигуру, когда курсор попадает в клиентскую область окна, и гарантирует, что эта фигура останется в клиентской области.</span><span class="sxs-lookup"><span data-stu-id="b9f51-277">The system automatically sets the cursor to the given shape when the cursor enters the window's client area and ensures it keeps that shape while it remains in the client area.</span></span> <span data-ttu-id="b9f51-278">Чтобы назначить форму курсора классу окна, загрузите стандартную фигуру курсора с помощью функции [**лоадкурсор**](/windows/desktop/api/winuser/nf-winuser-loadcursora) , а затем назначьте возвращенный маркер курсора элементу **хкурсор** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-278">To assign a cursor shape to a window class, load a predefined cursor shape by using the [**LoadCursor**](/windows/desktop/api/winuser/nf-winuser-loadcursora) function and then assign the returned cursor handle to the **hCursor** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span> <span data-ttu-id="b9f51-279">Кроме того, можно предоставить настраиваемый ресурс курсора и использовать функцию **лоадкурсор** для ее загрузки из ресурсов приложения.</span><span class="sxs-lookup"><span data-stu-id="b9f51-279">Alternatively, provide a custom cursor resource and use the **LoadCursor** function to load it from the application's resources.</span></span>

<span data-ttu-id="b9f51-280">В системе не требуется курсор класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-280">The system does not require a class cursor.</span></span> <span data-ttu-id="b9f51-281">Если приложение устанавливает для элемента **хкурсор** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) **значение NULL**, курсор класса не определяется.</span><span class="sxs-lookup"><span data-stu-id="b9f51-281">If an application sets the **hCursor** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure to **NULL**, no class cursor is defined.</span></span> <span data-ttu-id="b9f51-282">Система предполагает, что окно устанавливает форму курсора при каждом перемещении курсора в окно.</span><span class="sxs-lookup"><span data-stu-id="b9f51-282">The system assumes the window sets the cursor shape each time the cursor moves into the window.</span></span> <span data-ttu-id="b9f51-283">Окно может установить форму курсора путем вызова функции [**сеткурсор**](/windows/desktop/api/winuser/nf-winuser-setcursor) всякий раз, когда окно получает сообщение [**WM \_ MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-283">A window can set the cursor shape by calling the [**SetCursor**](/windows/desktop/api/winuser/nf-winuser-setcursor) function whenever the window receives the [**WM\_MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove) message.</span></span> <span data-ttu-id="b9f51-284">Дополнительные сведения о курсорах см. в разделе [курсоры](/windows/desktop/menurc/cursors).</span><span class="sxs-lookup"><span data-stu-id="b9f51-284">For more information about cursors, see [Cursors](/windows/desktop/menurc/cursors).</span></span>

### <a name="class-icons"></a><span data-ttu-id="b9f51-285">Значки классов</span><span class="sxs-lookup"><span data-stu-id="b9f51-285">Class Icons</span></span>

<span data-ttu-id="b9f51-286">*Значок класса* — это изображение, используемое системой для представления окна определенного класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-286">A *class icon* is a picture that the system uses to represent a window of a particular class.</span></span> <span data-ttu-id="b9f51-287">Приложение может иметь два значка класса — один крупный и один маленький.</span><span class="sxs-lookup"><span data-stu-id="b9f51-287">An application can have two class icons—one large and one small.</span></span> <span data-ttu-id="b9f51-288">Система отображает *значок крупного класса* окна в окне переключения задач, которое появляется, когда пользователь нажимает ALT + TAB и в представлениях крупных значков панели задач и обозревателя.</span><span class="sxs-lookup"><span data-stu-id="b9f51-288">The system displays a window's *large class icon* in the task-switch window that appears when the user presses ALT+TAB, and in the large icon views of the task bar and explorer.</span></span> <span data-ttu-id="b9f51-289">*Значок небольшого класса* появляется в строке заголовка окна и в представлениях мелких значков панели задач и обозревателя.</span><span class="sxs-lookup"><span data-stu-id="b9f51-289">The *small class icon* appears in a window's title bar and in the small icon views of the task bar and explorer.</span></span>

<span data-ttu-id="b9f51-290">Чтобы назначить большой и маленький значок классу окна, укажите дескрипторы значков в элементах **Хикон** и **хиконсм** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-290">To assign a large and small icon to a window class, specify the handles of the icons in the **hIcon** and **hIconSm** members of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span> <span data-ttu-id="b9f51-291">Размеры значков должны соответствовать обязательным измерениям для крупных и мелких значков классов.</span><span class="sxs-lookup"><span data-stu-id="b9f51-291">The icon dimensions must conform to required dimensions for large and small class icons.</span></span> <span data-ttu-id="b9f51-292">Для значка крупного класса можно определить необходимые измерения, указав значения **SM \_ Кксикон** и **SM \_ Циикон** в вызове функции [**жетсистемметрикс**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-292">For a large class icon, you can determine the required dimensions by specifying the **SM\_CXICON** and **SM\_CYICON** values in a call to the [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) function.</span></span> <span data-ttu-id="b9f51-293">Для значка небольшого класса укажите значения **SM \_ Ккссмикон** и **SM \_ цисмикон** .</span><span class="sxs-lookup"><span data-stu-id="b9f51-293">For a small class icon, specify the **SM\_CXSMICON** and **SM\_CYSMICON** values.</span></span> <span data-ttu-id="b9f51-294">Дополнительные сведения см. в разделе [значки](/windows/desktop/menurc/icons).</span><span class="sxs-lookup"><span data-stu-id="b9f51-294">For information, see [Icons](/windows/desktop/menurc/icons).</span></span>

<span data-ttu-id="b9f51-295">Если приложение устанавливает для элементов **Хикон** и **Хиконсм** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) **значение NULL**, система использует значок приложения по умолчанию в качестве крупных и мелких значков классов для класса Window.</span><span class="sxs-lookup"><span data-stu-id="b9f51-295">If an application sets the **hIcon** and **hIconSm** members of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure to **NULL**, the system uses the default application icon as the large and small class icons for the window class.</span></span> <span data-ttu-id="b9f51-296">Если указать значок крупного класса, но не маленький, система создает маленький значок класса, основанный на большом размере.</span><span class="sxs-lookup"><span data-stu-id="b9f51-296">If you specify a large class icon but not a small one, the system creates a small class icon based on the large one.</span></span> <span data-ttu-id="b9f51-297">Однако если указать маленький значок класса, но не большой, система будет использовать значок приложения по умолчанию в качестве значка крупного класса и указанный значок в качестве значка небольшого класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-297">However, if you specify a small class icon but not a large one, the system uses the default application icon as the large class icon and the specified icon as the small class icon.</span></span>

<span data-ttu-id="b9f51-298">Можно переопределить крупный или маленький значок класса для конкретного окна с помощью сообщения [**WM \_ сетикон**](wm-seticon.md) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-298">You can override the large or small class icon for a particular window by using the [**WM\_SETICON**](wm-seticon.md) message.</span></span> <span data-ttu-id="b9f51-299">Вы можете получить значок текущего крупного или мелкого класса с помощью [**сообщения \_ WM**](wm-geticon.md) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-299">You can retrieve the current large or small class icon by using the [**WM\_GETICON**](wm-geticon.md) message.</span></span>

### <a name="class-background-brush"></a><span data-ttu-id="b9f51-300">Кисть фона класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-300">Class Background Brush</span></span>

<span data-ttu-id="b9f51-301">*Кисть фона класса* подготавливает клиентскую область окна для последующего рисования приложением.</span><span class="sxs-lookup"><span data-stu-id="b9f51-301">A *class background brush* prepares the client area of a window for subsequent drawing by the application.</span></span> <span data-ttu-id="b9f51-302">Система использует кисть для заполнения клиентской области сплошным цветом или узором, тем самым удаляя все предыдущие изображения из этого расположения независимо от того, принадлежат ли они к окну или нет.</span><span class="sxs-lookup"><span data-stu-id="b9f51-302">The system uses the brush to fill the client area with a solid color or pattern, thereby removing all previous images from that location whether they belong to the window or not.</span></span> <span data-ttu-id="b9f51-303">Система уведомляет окно о том, что его фон следует отрисовывать, отправив сообщение [**WM \_ ерасебкгнд**](wm-erasebkgnd.md) в окно.</span><span class="sxs-lookup"><span data-stu-id="b9f51-303">The system notifies a window that its background should be painted by sending the [**WM\_ERASEBKGND**](wm-erasebkgnd.md) message to the window.</span></span> <span data-ttu-id="b9f51-304">Дополнительные сведения см. в разделе [кисти](/windows/desktop/gdi/brushes).</span><span class="sxs-lookup"><span data-stu-id="b9f51-304">For more information, see [Brushes](/windows/desktop/gdi/brushes).</span></span>

<span data-ttu-id="b9f51-305">Чтобы назначить фоновую кисть для класса, создайте кисть с помощью соответствующих функций GDI и назначьте возвращенный дескриптор кисти элементу **хбрбаккграунд** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-305">To assign a background brush to a class, create a brush by using the appropriate GDI functions and assign the returned brush handle to the **hbrBackground** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span>

<span data-ttu-id="b9f51-306">Вместо создания кисти приложение может задать для элемента **хбрбаккграунд** одно из стандартных значений системного цвета.</span><span class="sxs-lookup"><span data-stu-id="b9f51-306">Instead of creating a brush, an application can set the **hbrBackground** member to one of the standard system color values.</span></span> <span data-ttu-id="b9f51-307">Список стандартных значений системного цвета см. в разделе [**сетсисколорс**](/windows/desktop/api/winuser/nf-winuser-setsyscolors).</span><span class="sxs-lookup"><span data-stu-id="b9f51-307">For a list of the standard system color values, see [**SetSysColors**](/windows/desktop/api/winuser/nf-winuser-setsyscolors).</span></span>

<span data-ttu-id="b9f51-308">Чтобы использовать стандартный системный цвет, приложение должно увеличить значение цвета фона на единицу.</span><span class="sxs-lookup"><span data-stu-id="b9f51-308">To use a standard system color, the application must increase the background-color value by one.</span></span> <span data-ttu-id="b9f51-309">Например, цвет фона ( **\_ фон** ) + 1 является системным цветом фона.</span><span class="sxs-lookup"><span data-stu-id="b9f51-309">For example, **COLOR\_BACKGROUND** + 1 is the system background color.</span></span> <span data-ttu-id="b9f51-310">Кроме того, можно использовать функцию [**жетсисколорбруш**](/windows/desktop/api/winuser/nf-winuser-getsyscolorbrush) для получения дескриптора кисти, соответствующей стандартному системному цвету, а затем указать дескриптор в элементе **хбрбаккграунд** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-310">Alternatively, you can use the [**GetSysColorBrush**](/windows/desktop/api/winuser/nf-winuser-getsyscolorbrush) function to retrieve a handle to a brush that corresponds to a standard system color, and then specify the handle in the **hbrBackground** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span>

<span data-ttu-id="b9f51-311">В системе не требуется, чтобы класс окна имел кисть для фона класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-311">The system does not require that a window class have a class background brush.</span></span> <span data-ttu-id="b9f51-312">Если этот параметр имеет значение **null**, то при получении сообщения [**WM \_ ерасебкгнд**](wm-erasebkgnd.md) окно должно рисовать собственный фон.</span><span class="sxs-lookup"><span data-stu-id="b9f51-312">If this parameter is set to **NULL**, the window must paint its own background whenever it receives the [**WM\_ERASEBKGND**](wm-erasebkgnd.md) message.</span></span>

### <a name="class-menu"></a><span data-ttu-id="b9f51-313">Меню класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-313">Class Menu</span></span>

<span data-ttu-id="b9f51-314">*Меню класса* определяет меню по умолчанию, используемое окнами в классе, если при создании окон не задано явное меню.</span><span class="sxs-lookup"><span data-stu-id="b9f51-314">A *class menu* defines the default menu to be used by the windows in the class if no explicit menu is given when the windows are created.</span></span> <span data-ttu-id="b9f51-315">Меню — это список команд, из которых пользователь может выбрать действия для выполнения приложения.</span><span class="sxs-lookup"><span data-stu-id="b9f51-315">A menu is a list of commands from which a user can choose actions for the application to carry out.</span></span>

<span data-ttu-id="b9f51-316">Можно назначить меню классу, задав для элемента **лпсзменунаме** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) адрес строки, завершающейся нулем, которая указывает имя ресурса меню.</span><span class="sxs-lookup"><span data-stu-id="b9f51-316">You can assign a menu to a class by setting the **lpszMenuName** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure to the address of a null-terminated string that specifies the resource name of the menu.</span></span> <span data-ttu-id="b9f51-317">Предполагается, что меню является ресурсом в данном приложении.</span><span class="sxs-lookup"><span data-stu-id="b9f51-317">The menu is assumed to be a resource in the given application.</span></span> <span data-ttu-id="b9f51-318">Система автоматически загружает меню при необходимости.</span><span class="sxs-lookup"><span data-stu-id="b9f51-318">The system automatically loads the menu when it is needed.</span></span> <span data-ttu-id="b9f51-319">Если ресурс меню идентифицируется целым числом, а не именем, то приложение может задать для элемента **лпсзменунаме** это целое число, применив макрос [**макеинтресаурце**](/windows/desktop/api/winuser/nf-winuser-makeintresourcea) перед присвоением значения.</span><span class="sxs-lookup"><span data-stu-id="b9f51-319">If the menu resource is identified by an integer and not by a name, the application can set the **lpszMenuName** member to that integer by applying the [**MAKEINTRESOURCE**](/windows/desktop/api/winuser/nf-winuser-makeintresourcea) macro before assigning the value.</span></span>

<span data-ttu-id="b9f51-320">В системе не требуется меню класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-320">The system does not require a class menu.</span></span> <span data-ttu-id="b9f51-321">Если приложение устанавливает для элемента **лпсзменунаме** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) **значение NULL**, в Windows в классе нет строк меню.</span><span class="sxs-lookup"><span data-stu-id="b9f51-321">If an application sets the **lpszMenuName** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure to **NULL**, windows in the class have no menu bars.</span></span> <span data-ttu-id="b9f51-322">Даже если меню класс не задано, приложение по-прежнему может определить строку меню для окна при создании окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-322">Even if no class menu is given, an application can still define a menu bar for a window when it creates the window.</span></span>

<span data-ttu-id="b9f51-323">Если для класса задано меню и создано дочернее окно этого класса, меню игнорируется.</span><span class="sxs-lookup"><span data-stu-id="b9f51-323">If a menu is given for a class and a child window of that class is created, the menu is ignored.</span></span> <span data-ttu-id="b9f51-324">Дополнительные сведения см. в разделе [меню](/windows/desktop/menurc/menus).</span><span class="sxs-lookup"><span data-stu-id="b9f51-324">For more information, see [Menus](/windows/desktop/menurc/menus).</span></span>

### <a name="class-styles"></a><span data-ttu-id="b9f51-325">Стили класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-325">Class Styles</span></span>

<span data-ttu-id="b9f51-326">Стили классов определяют дополнительные элементы класса Window.</span><span class="sxs-lookup"><span data-stu-id="b9f51-326">The class styles define additional elements of the window class.</span></span> <span data-ttu-id="b9f51-327">Два или более стиля можно объединить с помощью побитового оператора OR ( \| ).</span><span class="sxs-lookup"><span data-stu-id="b9f51-327">Two or more styles can be combined by using the bitwise OR (\|) operator.</span></span> <span data-ttu-id="b9f51-328">Чтобы назначить стиль классу окна, назначьте стиль элементу **Style** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-328">To assign a style to a window class, assign the style to the **style** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure.</span></span> <span data-ttu-id="b9f51-329">Список стилей классов см. в разделе [**стили классов окон**](window-class-styles.md).</span><span class="sxs-lookup"><span data-stu-id="b9f51-329">For a list of class styles, see [**Window Class Styles**](window-class-styles.md).</span></span>

### <a name="classes-and-device-contexts"></a><span data-ttu-id="b9f51-330">Классы и контексты устройств</span><span class="sxs-lookup"><span data-stu-id="b9f51-330">Classes and Device Contexts</span></span>

<span data-ttu-id="b9f51-331">*Контекст устройства* — это специальный набор значений, которые используются приложениями для рисования в клиентской области окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-331">A *device context* is a special set of values that applications use for drawing in the client area of their windows.</span></span> <span data-ttu-id="b9f51-332">Система требует наличия контекста устройства для каждого окна на экране, но обеспечивает некоторую гибкость в том, как система хранит и обрабатывает контекст устройства.</span><span class="sxs-lookup"><span data-stu-id="b9f51-332">The system requires a device context for each window on the display but allows some flexibility in how the system stores and treats that device context.</span></span>

<span data-ttu-id="b9f51-333">Если явно не задан стиль контекста устройства, система предполагает, что в каждом окне используется контекст устройства, полученный из пула контекстов, поддерживаемых системой.</span><span class="sxs-lookup"><span data-stu-id="b9f51-333">If no device-context style is explicitly given, the system assumes each window uses a device context retrieved from a pool of contexts maintained by the system.</span></span> <span data-ttu-id="b9f51-334">В таких случаях каждое окно должно извлекать и инициализировать контекст устройства перед рисованием и освобождать его после рисования.</span><span class="sxs-lookup"><span data-stu-id="b9f51-334">In such cases, each window must retrieve and initialize the device context before painting and free it after painting.</span></span>

<span data-ttu-id="b9f51-335">Чтобы избежать извлечения контекста устройства каждый раз, когда ему требуется закрашивать внутри окна, приложение может указать стиль **\_ овндк CS** для класса Window.</span><span class="sxs-lookup"><span data-stu-id="b9f51-335">To avoid retrieving a device context each time it needs to paint inside a window, an application can specify the **CS\_OWNDC** style for the window class.</span></span> <span data-ttu-id="b9f51-336">Этот стиль класса направляет систему для создания частного контекста устройства, то есть для выделения уникального контекста устройства для каждого окна в классе.</span><span class="sxs-lookup"><span data-stu-id="b9f51-336">This class style directs the system to create a private device context—that is, to allocate a unique device context for each window in the class.</span></span> <span data-ttu-id="b9f51-337">Приложению требуется только получить контекст, а затем использовать его для всех последующего рисования.</span><span class="sxs-lookup"><span data-stu-id="b9f51-337">The application need only retrieve the context once and then use it for all subsequent painting.</span></span>

### <a name="extra-class-memory"></a><span data-ttu-id="b9f51-338">Память дополнительного класса</span><span class="sxs-lookup"><span data-stu-id="b9f51-338">Extra Class Memory</span></span>

<span data-ttu-id="b9f51-339">Система поддерживает внутреннюю структуру [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) для каждого класса окон в системе.</span><span class="sxs-lookup"><span data-stu-id="b9f51-339">The system maintains a [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure internally for each window class in the system.</span></span> <span data-ttu-id="b9f51-340">Когда приложение регистрирует класс окна, оно может направить систему на выделение и добавление в конец структуры **вндклассекс** нескольких дополнительных байтов памяти.</span><span class="sxs-lookup"><span data-stu-id="b9f51-340">When an application registers a window class, it can direct the system to allocate and append a number of additional bytes of memory to the end of the **WNDCLASSEX** structure.</span></span> <span data-ttu-id="b9f51-341">Эта память называется *дополнительной памятью класса* и является общей для всех окон, принадлежащих классу.</span><span class="sxs-lookup"><span data-stu-id="b9f51-341">This memory is called *extra class memory* and is shared by all windows belonging to the class.</span></span> <span data-ttu-id="b9f51-342">Используйте память дополнительного класса для хранения любой информации, относящейся к классу.</span><span class="sxs-lookup"><span data-stu-id="b9f51-342">Use the extra class memory to store any information pertaining to the class.</span></span>

<span data-ttu-id="b9f51-343">Поскольку дополнительный объем памяти выделяется из локальной кучи системы, приложение должно использовать память дополнительного класса с осторожностью.</span><span class="sxs-lookup"><span data-stu-id="b9f51-343">Because extra memory is allocated from the system's local heap, an application should use extra class memory sparingly.</span></span> <span data-ttu-id="b9f51-344">Функция [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) завершается ошибкой, если объем запрашиваемой памяти дополнительного класса превышает 40 байт.</span><span class="sxs-lookup"><span data-stu-id="b9f51-344">The [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) function fails if the amount of extra class memory requested is greater than 40 bytes.</span></span> <span data-ttu-id="b9f51-345">Если приложению требуется более 40 байт, он должен выделить собственную память и сохранить указатель на память в дополнительной памяти класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-345">If an application requires more than 40 bytes, it should allocate its own memory and store a pointer to the memory in the extra class memory.</span></span>

<span data-ttu-id="b9f51-346">Функции [**сетклассворд**](/windows/win32/api/winuser/nf-winuser-setclassword) и [**сеткласслонг**](/windows/win32/api/winuser/nf-winuser-setclasslonga) копируют значение в память дополнительного класса.</span><span class="sxs-lookup"><span data-stu-id="b9f51-346">The [**SetClassWord**](/windows/win32/api/winuser/nf-winuser-setclassword) and [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) functions copy a value to the extra class memory.</span></span> <span data-ttu-id="b9f51-347">Чтобы получить значение из памяти дополнительного класса, используйте функции [**жетклассворд**](/windows/win32/api/winuser/nf-winuser-getclassword) и [**жеткласслонг**](/windows/win32/api/winuser/nf-winuser-getclasslonga) .</span><span class="sxs-lookup"><span data-stu-id="b9f51-347">To retrieve a value from the extra class memory, use the [**GetClassWord**](/windows/win32/api/winuser/nf-winuser-getclassword) and [**GetClassLong**](/windows/win32/api/winuser/nf-winuser-getclasslonga) functions.</span></span> <span data-ttu-id="b9f51-348">Элемент **кбклсекстра** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) указывает объем дополнительной памяти класса для выделения.</span><span class="sxs-lookup"><span data-stu-id="b9f51-348">The **cbClsExtra** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure specifies the amount of extra class memory to allocate.</span></span> <span data-ttu-id="b9f51-349">Приложение, которое не использует память дополнительного класса, должно инициализировать элемент **кбклсекстра** в ноль.</span><span class="sxs-lookup"><span data-stu-id="b9f51-349">An application that does not use extra class memory must initialize the **cbClsExtra** member to zero.</span></span>

### <a name="extra-window-memory"></a><span data-ttu-id="b9f51-350">Размер дополнительной памяти окна</span><span class="sxs-lookup"><span data-stu-id="b9f51-350">Extra Window Memory</span></span>

<span data-ttu-id="b9f51-351">Система поддерживает внутреннюю структуру данных для каждого окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-351">The system maintains an internal data structure for each window.</span></span> <span data-ttu-id="b9f51-352">При регистрации класса окна приложение может указать ряд дополнительных байтов памяти, называемых *дополнительной памятью окна*.</span><span class="sxs-lookup"><span data-stu-id="b9f51-352">When registering a window class, an application can specify a number of additional bytes of memory, called *extra window memory*.</span></span> <span data-ttu-id="b9f51-353">При создании окна класса система выделяет и добавляет заданный объем дополнительной памяти окна в конец структуры окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-353">When creating a window of the class, the system allocates and appends the specified amount of extra window memory to the end of the window's structure.</span></span> <span data-ttu-id="b9f51-354">Приложение может использовать эту память для хранения данных, относящихся к окну.</span><span class="sxs-lookup"><span data-stu-id="b9f51-354">An application can use this memory to store window-specific data.</span></span>

<span data-ttu-id="b9f51-355">Поскольку дополнительный объем памяти выделяется из локальной кучи системы, приложение должно использовать лишние окна памяти с осторожностью.</span><span class="sxs-lookup"><span data-stu-id="b9f51-355">Because extra memory is allocated from the system's local heap, an application should use extra window memory sparingly.</span></span> <span data-ttu-id="b9f51-356">Функция [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) завершается ошибкой, если объем требуемой дополнительной памяти превышает 40 байт.</span><span class="sxs-lookup"><span data-stu-id="b9f51-356">The [**RegisterClassEx**](/windows/win32/api/winuser/nf-winuser-registerclassexa) function fails if the amount of extra window memory requested is greater than 40 bytes.</span></span> <span data-ttu-id="b9f51-357">Если приложению требуется более 40 байт, он должен выделить собственную память и сохранить указатель на память в дополнительной памяти окна.</span><span class="sxs-lookup"><span data-stu-id="b9f51-357">If an application requires more than 40 bytes, it should allocate its own memory and store a pointer to the memory in the extra window memory.</span></span>

<span data-ttu-id="b9f51-358">Функция [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) копирует значение в лишнюю память.</span><span class="sxs-lookup"><span data-stu-id="b9f51-358">The [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) function copies a value to the extra memory.</span></span> <span data-ttu-id="b9f51-359">Функция [**жетвиндовлонг**](/windows/win32/api/winuser/nf-winuser-getwindowlonga) извлекает значение из дополнительной памяти.</span><span class="sxs-lookup"><span data-stu-id="b9f51-359">The [**GetWindowLong**](/windows/win32/api/winuser/nf-winuser-getwindowlonga) function retrieves a value from the extra memory.</span></span> <span data-ttu-id="b9f51-360">Элемент **кбвндекстра** структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) указывает объем дополнительной памяти окна, выделяемой для выделения.</span><span class="sxs-lookup"><span data-stu-id="b9f51-360">The **cbWndExtra** member of the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure specifies the amount of extra window memory to allocate.</span></span> <span data-ttu-id="b9f51-361">Приложение, которое не использует память, должно инициализировать **кбвндекстра** до нуля.</span><span class="sxs-lookup"><span data-stu-id="b9f51-361">An application that does not use the memory must initialize **cbWndExtra** to zero.</span></span>

 

 
