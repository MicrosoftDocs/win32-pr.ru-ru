---
description: Посылается, когда необходимо вычислить размер и расположение клиентской области окна. Обрабатывая это сообщение, приложение может управлять содержимым клиентской области окна при изменении размера или расположения окна.
ms.assetid: d2d5825e-02a5-44b8-8615-55b7259d24ba
title: Сообщение WM_NCCALCSIZE (Winuser. h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 4b7d63fea3ad0a80bba686d8d86aa5354f0bb45b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105711950"
---
# <a name="wm_nccalcsize-message"></a><span data-ttu-id="3ab86-104">\_Сообщение НККАЛКСИЗЕ WM</span><span class="sxs-lookup"><span data-stu-id="3ab86-104">WM\_NCCALCSIZE message</span></span>

<span data-ttu-id="3ab86-105">Посылается, когда необходимо вычислить размер и расположение клиентской области окна.</span><span class="sxs-lookup"><span data-stu-id="3ab86-105">Sent when the size and position of a window's client area must be calculated.</span></span> <span data-ttu-id="3ab86-106">Обрабатывая это сообщение, приложение может управлять содержимым клиентской области окна при изменении размера или расположения окна.</span><span class="sxs-lookup"><span data-stu-id="3ab86-106">By processing this message, an application can control the content of the window's client area when the size or position of the window changes.</span></span>

<span data-ttu-id="3ab86-107">Окно получает это сообщение через функцию [**WindowProc**](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="3ab86-107">A window receives this message through its [**WindowProc**](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)) function.</span></span>


```C++
#define WM_NCCALCSIZE                   0x0083
```



## <a name="parameters"></a><span data-ttu-id="3ab86-108">Параметры</span><span class="sxs-lookup"><span data-stu-id="3ab86-108">Parameters</span></span>

<dl> <dt>

<span data-ttu-id="3ab86-109">*wParam*</span><span class="sxs-lookup"><span data-stu-id="3ab86-109">*wParam*</span></span> 
</dt> <dd>

<span data-ttu-id="3ab86-110">Если параметр *wParam* имеет **значение true**, приложение должно указывать, какая часть клиентской области содержит действительные сведения.</span><span class="sxs-lookup"><span data-stu-id="3ab86-110">If *wParam* is **TRUE**, it specifies that the application should indicate which part of the client area contains valid information.</span></span> <span data-ttu-id="3ab86-111">Система скопирует действительные данные в указанную область в новой клиентской области.</span><span class="sxs-lookup"><span data-stu-id="3ab86-111">The system copies the valid information to the specified area within the new client area.</span></span>

<span data-ttu-id="3ab86-112">Если параметр *wParam* имеет **значение false**, то приложению не нужно указывать действительную часть клиентской области.</span><span class="sxs-lookup"><span data-stu-id="3ab86-112">If *wParam* is **FALSE**, the application does not need to indicate the valid part of the client area.</span></span>

</dd> <dt>

<span data-ttu-id="3ab86-113">*lParam*</span><span class="sxs-lookup"><span data-stu-id="3ab86-113">*lParam*</span></span> 
</dt> <dd>

<span data-ttu-id="3ab86-114">Если параметр *wParam* имеет **значение true**, *lParam* указывает на структуру [**\_ params нккалксизе**](/windows/win32/api/winuser/ns-winuser-nccalcsize_params) , содержащую сведения, которые приложение может использовать для вычисления нового размера и позиции клиентского прямоугольника.</span><span class="sxs-lookup"><span data-stu-id="3ab86-114">If *wParam* is **TRUE**, *lParam* points to an [**NCCALCSIZE\_PARAMS**](/windows/win32/api/winuser/ns-winuser-nccalcsize_params) structure that contains information an application can use to calculate the new size and position of the client rectangle.</span></span>

<span data-ttu-id="3ab86-115">Если аргумент *wParam* имеет **значение false**, то *lParam* указывает на структуру [**Rect**](/previous-versions//dd162897(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="3ab86-115">If *wParam* is **FALSE**, *lParam* points to a [**RECT**](/previous-versions//dd162897(v=vs.85)) structure.</span></span> <span data-ttu-id="3ab86-116">При вводе структура содержит предполагаемый прямоугольник окна для окна.</span><span class="sxs-lookup"><span data-stu-id="3ab86-116">On entry, the structure contains the proposed window rectangle for the window.</span></span> <span data-ttu-id="3ab86-117">При выходе структура должна содержать экранные координаты соответствующей клиентской области окна.</span><span class="sxs-lookup"><span data-stu-id="3ab86-117">On exit, the structure should contain the screen coordinates of the corresponding window client area.</span></span>

</dd> </dl>

## <a name="return-value"></a><span data-ttu-id="3ab86-118">Возвращаемое значение</span><span class="sxs-lookup"><span data-stu-id="3ab86-118">Return value</span></span>

<span data-ttu-id="3ab86-119">Тип: **lResult**</span><span class="sxs-lookup"><span data-stu-id="3ab86-119">Type: **LRESULT**</span></span>

<span data-ttu-id="3ab86-120">Если параметр *wParam* имеет **значение false**, приложение должно вернуть ноль.</span><span class="sxs-lookup"><span data-stu-id="3ab86-120">If the *wParam* parameter is **FALSE**, the application should return zero.</span></span>

<span data-ttu-id="3ab86-121">Если параметр *wParam* имеет **значение true**, приложение должно вернуть ноль или сочетание следующих значений.</span><span class="sxs-lookup"><span data-stu-id="3ab86-121">If *wParam* is **TRUE**, the application should return zero or a combination of the following values.</span></span>

<span data-ttu-id="3ab86-122">Если параметр *wParam* имеет **значение true** и приложение возвращает ноль, старая клиентская область сохраняется и выводится в левом верхнем углу новой клиентской области.</span><span class="sxs-lookup"><span data-stu-id="3ab86-122">If *wParam* is **TRUE** and an application returns zero, the old client area is preserved and is aligned with the upper-left corner of the new client area.</span></span>



| <span data-ttu-id="3ab86-123">Возвращаемый код и значение</span><span class="sxs-lookup"><span data-stu-id="3ab86-123">Return code/value</span></span>                                                                                                                                           | <span data-ttu-id="3ab86-124">Описание</span><span class="sxs-lookup"><span data-stu-id="3ab86-124">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <dl> <span data-ttu-id="3ab86-125"><dt>**ВВР \_ АЛИГНТОП**</dt> <dt>0x0010</dt></span><span class="sxs-lookup"><span data-stu-id="3ab86-125"><dt>**WVR\_ALIGNTOP**</dt> <dt>0x0010</dt></span></span> </dl>    | <span data-ttu-id="3ab86-126">Указывает, что клиентская область окна должна сохраняться и быть согласована с верхней частью новой позицией окна.</span><span class="sxs-lookup"><span data-stu-id="3ab86-126">Specifies that the client area of the window is to be preserved and aligned with the top of the new position of the window.</span></span> <span data-ttu-id="3ab86-127">Например, чтобы выстроить клиентскую область в левом верхнем углу, возвратите \_ значения ВВР алигнтоп и **ВВР \_ алигнлефт** .</span><span class="sxs-lookup"><span data-stu-id="3ab86-127">For example, to align the client area to the upper-left corner, return the WVR\_ALIGNTOP and **WVR\_ALIGNLEFT** values.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <dl> <span data-ttu-id="3ab86-128"><dt>**ВВР \_ АЛИГНРИГХТ**</dt> <dt>0x0080</dt></span><span class="sxs-lookup"><span data-stu-id="3ab86-128"><dt>**WVR\_ALIGNRIGHT**</dt> <dt>0x0080</dt></span></span> </dl>  | <span data-ttu-id="3ab86-129">Указывает, что клиентская область окна должна сохраняться и быть согласована с правой стороны новой позицией окна.</span><span class="sxs-lookup"><span data-stu-id="3ab86-129">Specifies that the client area of the window is to be preserved and aligned with the right side of the new position of the window.</span></span> <span data-ttu-id="3ab86-130">Например, чтобы выстроить клиентскую область в правом нижнем углу, возвратите значения **ВВР \_ АЛИГНРИГХТ** и ВВР \_ алигнботтом.</span><span class="sxs-lookup"><span data-stu-id="3ab86-130">For example, to align the client area to the lower-right corner, return the **WVR\_ALIGNRIGHT** and WVR\_ALIGNBOTTOM values.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <dl> <span data-ttu-id="3ab86-131"><dt>**ВВР \_ АЛИГНЛЕФТ**</dt> <dt>0x0020</dt></span><span class="sxs-lookup"><span data-stu-id="3ab86-131"><dt>**WVR\_ALIGNLEFT**</dt> <dt>0x0020</dt></span></span> </dl>   | <span data-ttu-id="3ab86-132">Указывает, что клиентская область окна должна сохраняться и соответствовать левой части нового расположения окна.</span><span class="sxs-lookup"><span data-stu-id="3ab86-132">Specifies that the client area of the window is to be preserved and aligned with the left side of the new position of the window.</span></span> <span data-ttu-id="3ab86-133">Например, чтобы выстроить клиентскую область в левом нижнем углу, возвратите значения **ВВР \_ Алигнлефт** и **ВВР \_ алигнботтом** .</span><span class="sxs-lookup"><span data-stu-id="3ab86-133">For example, to align the client area to the lower-left corner, return the **WVR\_ALIGNLEFT** and **WVR\_ALIGNBOTTOM** values.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <dl> <span data-ttu-id="3ab86-134"><dt>**ВВР \_ АЛИГНБОТТОМ**</dt> <dt>0x0040</dt></span><span class="sxs-lookup"><span data-stu-id="3ab86-134"><dt>**WVR\_ALIGNBOTTOM**</dt> <dt>0x0040</dt></span></span> </dl> | <span data-ttu-id="3ab86-135">Указывает, что клиентская область окна должна сохраняться и выдаваться по нижнему краю нового расположения окна.</span><span class="sxs-lookup"><span data-stu-id="3ab86-135">Specifies that the client area of the window is to be preserved and aligned with the bottom of the new position of the window.</span></span> <span data-ttu-id="3ab86-136">Например, чтобы выстроить клиентскую область в левом верхнем углу, возвратите \_ значения ВВР алигнтоп и **ВВР \_ алигнлефт** .</span><span class="sxs-lookup"><span data-stu-id="3ab86-136">For example, to align the client area to the top-left corner, return the WVR\_ALIGNTOP and **WVR\_ALIGNLEFT** values.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <dl> <span data-ttu-id="3ab86-137"><dt>**ВВР \_ ХРЕДРАВ**</dt> <dt>0x0100</dt></span><span class="sxs-lookup"><span data-stu-id="3ab86-137"><dt>**WVR\_HREDRAW**</dt> <dt>0x0100</dt></span></span> </dl>     | <span data-ttu-id="3ab86-138">В сочетании с любыми другими значениями, за исключением **ВВР \_ валидректс**, приводит к полной перерисовке окна, если размер прямоугольника клиента меняется по горизонтали.</span><span class="sxs-lookup"><span data-stu-id="3ab86-138">Used in combination with any other values, except **WVR\_VALIDRECTS**, causes the window to be completely redrawn if the client rectangle changes size horizontally.</span></span> <span data-ttu-id="3ab86-139">Это значение аналогично стилю класса [CS \_ хредрав](about-window-classes.md)</span><span class="sxs-lookup"><span data-stu-id="3ab86-139">This value is similar to [CS\_HREDRAW](about-window-classes.md) class style</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <dl> <span data-ttu-id="3ab86-140"><dt>**ВВР \_ ВРЕДРАВ**</dt> <dt>0x0200</dt></span><span class="sxs-lookup"><span data-stu-id="3ab86-140"><dt>**WVR\_VREDRAW**</dt> <dt>0x0200</dt></span></span> </dl>     | <span data-ttu-id="3ab86-141">В сочетании с любыми другими значениями, за исключением **ВВР \_ валидректс**, приводит к полной перерисовке окна, если размер прямоугольника клиента меняется по вертикали.</span><span class="sxs-lookup"><span data-stu-id="3ab86-141">Used in combination with any other values, except **WVR\_VALIDRECTS**, causes the window to be completely redrawn if the client rectangle changes size vertically.</span></span> <span data-ttu-id="3ab86-142">Это значение аналогично стилю класса [CS \_ вредрав](about-window-classes.md)</span><span class="sxs-lookup"><span data-stu-id="3ab86-142">This value is similar to [CS\_VREDRAW](about-window-classes.md) class style</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <dl> <span data-ttu-id="3ab86-143"><dt>**ВВР \_ Перерисовка**</dt> <dt>0x0300</dt></span><span class="sxs-lookup"><span data-stu-id="3ab86-143"><dt>**WVR\_REDRAW**</dt> <dt>0x0300</dt></span></span> </dl>      | <span data-ttu-id="3ab86-144">Это значение приводит к перерисовке всего окна.</span><span class="sxs-lookup"><span data-stu-id="3ab86-144">This value causes the entire window to be redrawn.</span></span> <span data-ttu-id="3ab86-145">Это сочетание значений **ВВР \_ Хредрав** и **ВВР \_ вредрав** .</span><span class="sxs-lookup"><span data-stu-id="3ab86-145">It is a combination of **WVR\_HREDRAW** and **WVR\_VREDRAW** values.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <dl> <span data-ttu-id="3ab86-146"><dt>**ВВР \_ ВАЛИДРЕКТС**</dt> <dt>0x0400</dt></span><span class="sxs-lookup"><span data-stu-id="3ab86-146"><dt>**WVR\_VALIDRECTS**</dt> <dt>0x0400</dt></span></span> </dl>  | <span data-ttu-id="3ab86-147">Это значение указывает, что при возврате из [**WM \_ нккалксизе**](wm-nccalcsize.md)прямоугольники, заданные элементами **РГРК** \[ 1 \] и **РГРК** \[ 2 \] в структуре [**\_ params нккалксизе**](/windows/win32/api/winuser/ns-winuser-nccalcsize_params) , содержат допустимые прямоугольники назначения и исходной области соответственно.</span><span class="sxs-lookup"><span data-stu-id="3ab86-147">This value indicates that, upon return from [**WM\_NCCALCSIZE**](wm-nccalcsize.md), the rectangles specified by the **rgrc**\[1\] and **rgrc**\[2\] members of the [**NCCALCSIZE\_PARAMS**](/windows/win32/api/winuser/ns-winuser-nccalcsize_params) structure contain valid destination and source area rectangles, respectively.</span></span> <span data-ttu-id="3ab86-148">Система объединяет эти прямоугольники, чтобы вычислить область окна для сохранения.</span><span class="sxs-lookup"><span data-stu-id="3ab86-148">The system combines these rectangles to calculate the area of the window to be preserved.</span></span> <span data-ttu-id="3ab86-149">Система копирует любую часть изображения окна, расположенную в исходном прямоугольнике, и вырезает изображение в прямоугольник назначения.</span><span class="sxs-lookup"><span data-stu-id="3ab86-149">The system copies any part of the window image that is within the source rectangle and clips the image to the destination rectangle.</span></span> <span data-ttu-id="3ab86-150">Оба прямоугольника находятся в координатах, относительных для родителя или на экране.</span><span class="sxs-lookup"><span data-stu-id="3ab86-150">Both rectangles are in parent-relative or screen-relative coordinates.</span></span> <span data-ttu-id="3ab86-151">Этот флаг нельзя сочетать с другими флагами.</span><span class="sxs-lookup"><span data-stu-id="3ab86-151">This flag cannot be combined with any other flags.</span></span> <br/> <span data-ttu-id="3ab86-152">Это возвращаемое значение позволяет приложению реализовать более детализированные стратегии сохранения клиентских областей, такие как центрирование или сохранение подмножества клиентской области.</span><span class="sxs-lookup"><span data-stu-id="3ab86-152">This return value allows an application to implement more elaborate client-area preservation strategies, such as centering or preserving a subset of the client area.</span></span><br/> |



 

## <a name="remarks"></a><span data-ttu-id="3ab86-153">Комментарии</span><span class="sxs-lookup"><span data-stu-id="3ab86-153">Remarks</span></span>

<span data-ttu-id="3ab86-154">Окно может быть перерисовано в зависимости от того, задан ли стиль класса [CS \_ ХРЕДРАВ](about-window-classes.md) или CS \_ вредрав.</span><span class="sxs-lookup"><span data-stu-id="3ab86-154">The window may be redrawn, depending on whether the [CS\_HREDRAW](about-window-classes.md) or CS\_VREDRAW class style is specified.</span></span> <span data-ttu-id="3ab86-155">Это обратно совместимая по умолчанию обработка этого сообщения с помощью функции [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) (в дополнение к обычным вычислениям клиентского прямоугольника, описанным в предыдущей таблице).</span><span class="sxs-lookup"><span data-stu-id="3ab86-155">This is the default, backward-compatible processing of this message by the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function (in addition to the usual client rectangle calculation described in the preceding table).</span></span>

<span data-ttu-id="3ab86-156">Если параметр *wParam* имеет **значение true**, то возвращение 0 без обработки прямоугольников [**\_ params нккалксизе**](/windows/win32/api/winuser/ns-winuser-nccalcsize_params) приведет к тому, что клиентская область изменится на размер окна, включая фрейм окна.</span><span class="sxs-lookup"><span data-stu-id="3ab86-156">When *wParam* is **TRUE**, simply returning 0 without processing the [**NCCALCSIZE\_PARAMS**](/windows/win32/api/winuser/ns-winuser-nccalcsize_params) rectangles will cause the client area to resize to the size of the window, including the window frame.</span></span> <span data-ttu-id="3ab86-157">Это приведет к удалению рамки окна и элементов заголовков из окна, в результате чего отображается только область клиента.</span><span class="sxs-lookup"><span data-stu-id="3ab86-157">This will remove the window frame and caption items from your window, leaving only the client area displayed.</span></span>

<span data-ttu-id="3ab86-158">Начиная с Windows Vista, удаление стандартного кадра путем простого возврата значения 0, если параметр *wParam* имеет **значение true** , не влияет на кадры, которые расширены в клиентскую область с помощью функции [**DwmExtendFrameIntoClientArea**](/windows/win32/api/dwmapi/nf-dwmapi-dwmextendframeintoclientarea) .</span><span class="sxs-lookup"><span data-stu-id="3ab86-158">Starting with Windows Vista, removing the standard frame by simply returning 0 when the *wParam* is **TRUE** does not affect frames that are extended into the client area using the [**DwmExtendFrameIntoClientArea**](/windows/win32/api/dwmapi/nf-dwmapi-dwmextendframeintoclientarea) function.</span></span> <span data-ttu-id="3ab86-159">Будет удален только стандартный фрейм.</span><span class="sxs-lookup"><span data-stu-id="3ab86-159">Only the standard frame will be removed.</span></span>

## <a name="requirements"></a><span data-ttu-id="3ab86-160">Требования</span><span class="sxs-lookup"><span data-stu-id="3ab86-160">Requirements</span></span>



| <span data-ttu-id="3ab86-161">Требование</span><span class="sxs-lookup"><span data-stu-id="3ab86-161">Requirement</span></span> | <span data-ttu-id="3ab86-162">Значение</span><span class="sxs-lookup"><span data-stu-id="3ab86-162">Value</span></span> |
|-------------------------------------|----------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3ab86-163">Минимальная версия клиента</span><span class="sxs-lookup"><span data-stu-id="3ab86-163">Minimum supported client</span></span><br/> | <span data-ttu-id="3ab86-164">Windows 2000 Professional \[только классические приложения\]</span><span class="sxs-lookup"><span data-stu-id="3ab86-164">Windows 2000 Professional \[desktop apps only\]</span></span><br/>                                               |
| <span data-ttu-id="3ab86-165">Минимальная версия сервера</span><span class="sxs-lookup"><span data-stu-id="3ab86-165">Minimum supported server</span></span><br/> | <span data-ttu-id="3ab86-166">Windows 2000 Server \[только классические приложения\]</span><span class="sxs-lookup"><span data-stu-id="3ab86-166">Windows 2000 Server \[desktop apps only\]</span></span><br/>                                                     |
| <span data-ttu-id="3ab86-167">Заголовок</span><span class="sxs-lookup"><span data-stu-id="3ab86-167">Header</span></span><br/>                   | <dl> <span data-ttu-id="3ab86-168"><dt>Winuser. h (включение Windows. h)</dt></span><span class="sxs-lookup"><span data-stu-id="3ab86-168"><dt>Winuser.h (include Windows.h)</dt></span></span> </dl> |



## <a name="see-also"></a><span data-ttu-id="3ab86-169">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="3ab86-169">See also</span></span>

<dl> <dt>

<span data-ttu-id="3ab86-170">**Ссылки**</span><span class="sxs-lookup"><span data-stu-id="3ab86-170">**Reference**</span></span>
</dt> <dt>

[<span data-ttu-id="3ab86-171">**дефвиндовпрок**</span><span class="sxs-lookup"><span data-stu-id="3ab86-171">**DefWindowProc**</span></span>](/windows/desktop/api/winuser/nf-winuser-defwindowproca)
</dt> <dt>

[<span data-ttu-id="3ab86-172">**мовевиндов**</span><span class="sxs-lookup"><span data-stu-id="3ab86-172">**MoveWindow**</span></span>](/windows/win32/api/winuser/nf-winuser-movewindow)
</dt> <dt>

[<span data-ttu-id="3ab86-173">**SetWindowPos**</span><span class="sxs-lookup"><span data-stu-id="3ab86-173">**SetWindowPos**</span></span>](/windows/win32/api/winuser/nf-winuser-setwindowpos)
</dt> <dt>

[<span data-ttu-id="3ab86-174">**\_Параметры нккалксизе**</span><span class="sxs-lookup"><span data-stu-id="3ab86-174">**NCCALCSIZE\_PARAMS**</span></span>](/windows/win32/api/winuser/ns-winuser-nccalcsize_params)
</dt> <dt>

<span data-ttu-id="3ab86-175">**Зрения**</span><span class="sxs-lookup"><span data-stu-id="3ab86-175">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="3ab86-176">Windows</span><span class="sxs-lookup"><span data-stu-id="3ab86-176">Windows</span></span>](windows.md)
</dt> <dt>

<span data-ttu-id="3ab86-177">**Другие ресурсы**</span><span class="sxs-lookup"><span data-stu-id="3ab86-177">**Other Resources**</span></span>
</dt> <dt>

<span data-ttu-id="3ab86-178">[**ПЕРЕТАСКИВАЕМЫЕ**](/previous-versions//dd162897(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="3ab86-178">[**RECT**](/previous-versions//dd162897(v=vs.85))</span></span>
</dt> </dl>

 

 
