---
title: Общие сведения о ресурсах
description: Описание ресурсов Direct2D и их совместного использования.
ms.assetid: afd308a7-9524-4436-9a0e-8575383d96fa
keywords:
- Direct2D, ресурсы
ms.topic: article
ms.date: 05/31/2018
ms.custom: seodec18
ms.openlocfilehash: bf4eb807a25b592e32a2d83436532af17462d70c
ms.sourcegitcommit: 7d0cc7eb398fee8f5be55cd654a12d29937d643c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "104351002"
---
# <a name="resources-overview"></a><span data-ttu-id="ba882-104">Общие сведения о ресурсах</span><span class="sxs-lookup"><span data-stu-id="ba882-104">Resources Overview</span></span>

<span data-ttu-id="ba882-105">Ресурс Direct2D — это объект, который используется для рисования и представлен интерфейсом Direct2D, например [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) или [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget).</span><span class="sxs-lookup"><span data-stu-id="ba882-105">A Direct2D resource is an object that is used for drawing and is represented by a Direct2D interface, such as [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) or [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget).</span></span> <span data-ttu-id="ba882-106">В этом разделе описываются виды ресурсов Direct2D и способы их совместного использования.</span><span class="sxs-lookup"><span data-stu-id="ba882-106">This topic describes the kinds of Direct2D resources and how they can be shared.</span></span>

<span data-ttu-id="ba882-107">В этом разделе содержатся следующие подразделы.</span><span class="sxs-lookup"><span data-stu-id="ba882-107">This topic contains the following sections:</span></span>

-   [<span data-ttu-id="ba882-108">О ресурсах Direct2D</span><span class="sxs-lookup"><span data-stu-id="ba882-108">About Direct2D Resources</span></span>](#about-direct2d-resources)
-   [<span data-ttu-id="ba882-109">Ресурсы, независимые от устройства</span><span class="sxs-lookup"><span data-stu-id="ba882-109">Device-Independent Resources</span></span>](#device-independent-resources)
-   [<span data-ttu-id="ba882-110">Ресурсы, зависящие от устройства</span><span class="sxs-lookup"><span data-stu-id="ba882-110">Device-Dependent Resources</span></span>](#device-dependent-resources)
-   [<span data-ttu-id="ba882-111">Совместное использование ресурсов фабрики</span><span class="sxs-lookup"><span data-stu-id="ba882-111">Sharing Factory Resources</span></span>](#sharing-factory-resources)
-   [<span data-ttu-id="ba882-112">Общий доступ к целевым ресурсам рендеринга</span><span class="sxs-lookup"><span data-stu-id="ba882-112">Sharing Render Target Resources</span></span>](#sharing-render-target-resources)
    -   [<span data-ttu-id="ba882-113">Целевые объекты рендеринга оборудования</span><span class="sxs-lookup"><span data-stu-id="ba882-113">Hardware Render Targets</span></span>](#hardware-render-targets)
    -   [<span data-ttu-id="ba882-114">Целевые объекты прорисовки поверхности DXGI</span><span class="sxs-lookup"><span data-stu-id="ba882-114">DXGI Surface Render Targets</span></span>](#dxgi-surface-render-targets)
    -   [<span data-ttu-id="ba882-115">Совместимые целевые объекты рендеринга и общие точечные рисунки</span><span class="sxs-lookup"><span data-stu-id="ba882-115">Compatible Render Targets and Shared Bitmaps</span></span>](#compatible-render-targets-and-shared-bitmaps)

## <a name="about-direct2d-resources"></a><span data-ttu-id="ba882-116">О ресурсах Direct2D</span><span class="sxs-lookup"><span data-stu-id="ba882-116">About Direct2D Resources</span></span>

<span data-ttu-id="ba882-117">Многие двумерные API с аппаратным ускорением разрабатываются на основе модели ресурсов, ориентированной на ЦП, и набора операций рендеринга, которые хорошо работают на процессорах. затем часть API работает с аппаратным ускорением.</span><span class="sxs-lookup"><span data-stu-id="ba882-117">Many hardware-accelerated 2D APIs are designed around a CPU-focused resource model and a set of rendering operations that work well on CPUs.Then, some part of the API is hardware-accelerated.</span></span> <span data-ttu-id="ba882-118">Для реализации этих API требуется диспетчер ресурсов для сопоставления ресурсов ЦП с ресурсами в GPU.</span><span class="sxs-lookup"><span data-stu-id="ba882-118">Implementing these APIs requires a resource manager for mapping CPU resources to resources on the GPU.</span></span> <span data-ttu-id="ba882-119">Из-за ограничений GPU некоторые операции не могут быть ускорены в каждом случае.</span><span class="sxs-lookup"><span data-stu-id="ba882-119">Because of GPU limitations, some operations might be unable to be accelerated in every circumstance.</span></span> <span data-ttu-id="ba882-120">В таких случаях диспетчер ресурсов должен обмениваться данными между ЦП и GPU (что дорого), чтобы он мог переходить на визуализацию ЦП.</span><span class="sxs-lookup"><span data-stu-id="ba882-120">In these cases, the resource manager must communicate back and forth between the CPU and GPU (which is expensive) so that it can transition to CPU rendering.</span></span> <span data-ttu-id="ba882-121">В некоторых случаях это может привести к непредсказуемому принудительному выполнению подготовки к просмотру процессора.</span><span class="sxs-lookup"><span data-stu-id="ba882-121">In some cases, it might unpredictably force rendering to fall back completely to the CPU.</span></span> <span data-ttu-id="ba882-122">Кроме того, операции отрисовки, которые отображаются простыми, могут потребовать временных промежуточных этапов отрисовки, которые не представлены в API и для которых требуются дополнительные ресурсы GPU.</span><span class="sxs-lookup"><span data-stu-id="ba882-122">In addition, rendering operations that appear simple might require temporary intermediate rendering steps that are not exposed in the API and that require additional GPU resources.</span></span>

<span data-ttu-id="ba882-123">Direct2D обеспечивает более прямое сопоставление для полного использования GPU.</span><span class="sxs-lookup"><span data-stu-id="ba882-123">Direct2D provides a more direct mapping to making full use of the GPU.</span></span> <span data-ttu-id="ba882-124">Он предоставляет две категории ресурсов: независимые от устройства и устройства.</span><span class="sxs-lookup"><span data-stu-id="ba882-124">It provides two categories of resources: device-independent and device-dependent.</span></span>

-   <span data-ttu-id="ba882-125">Ресурсы, независимые от устройства, такие как [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry), ХРАНЯТСЯ на ЦП.</span><span class="sxs-lookup"><span data-stu-id="ba882-125">Device-independent resources, such as [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry), are kept on the CPU.</span></span>
-   <span data-ttu-id="ba882-126">Ресурсы, зависящие от устройства, такие как [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) и [**ID2D1LinearGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1lineargradientbrush), напрямую сопоставляются с ресурсами на GPU (если доступно аппаратное ускорение).</span><span class="sxs-lookup"><span data-stu-id="ba882-126">Device-dependent resources, such as [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) and [**ID2D1LinearGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1lineargradientbrush), directly map to resources on the GPU (when hardware acceleration is available).</span></span> <span data-ttu-id="ba882-127">Вызовы отрисовки выполняются путем объединения сведений о вершинах и покрытии из геометрии со сведениями о текстурировании, созданными ресурсами, зависящими от устройства.</span><span class="sxs-lookup"><span data-stu-id="ba882-127">Rendering calls are performed by combining vertex and coverage information from a geometry with texturing information produced by the device-dependent resources.</span></span>

<span data-ttu-id="ba882-128">При создании ресурсов, зависящих от устройства, системные ресурсы (GPU, если они доступны или ЦП) распределяются при создании устройства и не меняются с одной операции отрисовки на другую.</span><span class="sxs-lookup"><span data-stu-id="ba882-128">When you create device-dependent resources, system resources (the GPU, if available, or the CPU) are allocated when the device is created and do not change from one rendering operation to another.</span></span> <span data-ttu-id="ba882-129">Это исключает необходимость в диспетчере ресурсов.</span><span class="sxs-lookup"><span data-stu-id="ba882-129">This situation eliminates the need for a resource manager.</span></span> <span data-ttu-id="ba882-130">В дополнение к общим улучшениям производительности, обеспечиваемым при отключении диспетчера ресурсов, эта модель позволяет напрямую управлять любой промежуточной отрисовкой.</span><span class="sxs-lookup"><span data-stu-id="ba882-130">In addition to the general performance improvements that are provided by the elimination of a resource manager, this model enables you to directly control any intermediate rendering.</span></span>

<span data-ttu-id="ba882-131">Так как Direct2D обеспечивает настолько большой контроль над ресурсами, необходимо понимать различные типы ресурсов и, когда их можно использовать вместе.</span><span class="sxs-lookup"><span data-stu-id="ba882-131">Because Direct2D provides so much control over resources, you must understand the different kinds of resources and when they can be used together.</span></span>

## <a name="device-independent-resources"></a><span data-ttu-id="ba882-132">Ресурсы Device-Independent</span><span class="sxs-lookup"><span data-stu-id="ba882-132">Device-Independent Resources</span></span>

<span data-ttu-id="ba882-133">Как описано в предыдущем разделе, ресурсы, независимые от устройства, всегда находятся в ЦП и никогда не связаны с устройством отрисовки оборудования.</span><span class="sxs-lookup"><span data-stu-id="ba882-133">As described in the previous section, device-independent resources always reside on the CPU and are never associated with a hardware rendering device.</span></span> <span data-ttu-id="ba882-134">Ниже перечислены ресурсы, независимые от устройства.</span><span class="sxs-lookup"><span data-stu-id="ba882-134">The following are device-independent resources:</span></span>

-   [<span data-ttu-id="ba882-135">**ID2D1DrawingStateBlock**</span><span class="sxs-lookup"><span data-stu-id="ba882-135">**ID2D1DrawingStateBlock**</span></span>](/windows/win32/api/d2d1/nn-d2d1-id2d1drawingstateblock)
-   [<span data-ttu-id="ba882-136">**ID2D1Factory**</span><span class="sxs-lookup"><span data-stu-id="ba882-136">**ID2D1Factory**</span></span>](/windows/win32/api/d2d1/nn-d2d1-id2d1factory)
-   <span data-ttu-id="ba882-137">[**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) и интерфейсы, наследующие от него.</span><span class="sxs-lookup"><span data-stu-id="ba882-137">[**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) and the interfaces that inherit from it.</span></span>
-   <span data-ttu-id="ba882-138">[**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink) и [ **ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink)</span><span class="sxs-lookup"><span data-stu-id="ba882-138">[**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink) and [**ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink)</span></span>
-   [<span data-ttu-id="ba882-139">**ID2D1StrokeStyle**</span><span class="sxs-lookup"><span data-stu-id="ba882-139">**ID2D1StrokeStyle**</span></span>](/windows/win32/api/d2d1/nn-d2d1-id2d1strokestyle)

<span data-ttu-id="ba882-140">Для создания ресурсов, независимых от устройства, используйте [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory), который сам по себе является аппаратно-независимым ресурсом.</span><span class="sxs-lookup"><span data-stu-id="ba882-140">Use an [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory), itself a device-independent resource, to create device-independent resources.</span></span> <span data-ttu-id="ba882-141">(Чтобы создать фабрику, используйте функцию [**CreateFactory**](/windows/desktop/api/d2d1/nf-d2d1-d2d1createfactory) .)</span><span class="sxs-lookup"><span data-stu-id="ba882-141">(To create a factory, use the [**CreateFactory**](/windows/desktop/api/d2d1/nf-d2d1-d2d1createfactory) function.)</span></span>

<span data-ttu-id="ba882-142">За исключением целевых объектов прорисовки, все ресурсы, созданные фабрикой, не зависят от устройства.</span><span class="sxs-lookup"><span data-stu-id="ba882-142">Except for render targets, all the resources created by a factory are device-independent.</span></span> <span data-ttu-id="ba882-143">Целевой объект прорисовки — это ресурс, зависящий от устройства.</span><span class="sxs-lookup"><span data-stu-id="ba882-143">A render target is a device-dependent resource.</span></span>

## <a name="device-dependent-resources"></a><span data-ttu-id="ba882-144">Ресурсы Device-Dependent</span><span class="sxs-lookup"><span data-stu-id="ba882-144">Device-Dependent Resources</span></span>

<span data-ttu-id="ba882-145">Любой ресурс, не имеющий имени в предыдущем списке, является ресурсом, зависимым от устройства.</span><span class="sxs-lookup"><span data-stu-id="ba882-145">Any resource that is not named in the previous list is a device-dependent resource.</span></span> <span data-ttu-id="ba882-146">Ресурсы, зависящие от устройства, связаны с конкретным устройством отрисовки.</span><span class="sxs-lookup"><span data-stu-id="ba882-146">Device-dependent resources are associated with a particular rendering device.</span></span> <span data-ttu-id="ba882-147">Если доступно аппаратное ускорение, это устройство является GPU.</span><span class="sxs-lookup"><span data-stu-id="ba882-147">When hardware acceleration is available, that device is the GPU.</span></span> <span data-ttu-id="ba882-148">В других случаях это ЦП.</span><span class="sxs-lookup"><span data-stu-id="ba882-148">In other cases, it is the CPU.</span></span>

<span data-ttu-id="ba882-149">Для создания большинства ресурсов, зависящих от устройства, используйте целевой объект рендеринга.</span><span class="sxs-lookup"><span data-stu-id="ba882-149">To create most device-dependent resources, use a render target.</span></span> <span data-ttu-id="ba882-150">В большинстве случаев для создания целевого объекта рендеринга используется фабрика.</span><span class="sxs-lookup"><span data-stu-id="ba882-150">In most cases, use a factory to create a render target.</span></span>

<span data-ttu-id="ba882-151">Ниже приведены примеры ресурсов, зависящих от устройства.</span><span class="sxs-lookup"><span data-stu-id="ba882-151">The following are examples of device-dependent resources:</span></span>

-   <span data-ttu-id="ba882-152">[**ID2D1Brush**](/windows/win32/api/d2d1/nn-d2d1-id2d1brush) и интерфейсы, наследующие от него.</span><span class="sxs-lookup"><span data-stu-id="ba882-152">[**ID2D1Brush**](/windows/win32/api/d2d1/nn-d2d1-id2d1brush) and the interfaces that inherit from it.</span></span> <span data-ttu-id="ba882-153">Используйте целевой объект прорисовки для создания кистей.</span><span class="sxs-lookup"><span data-stu-id="ba882-153">Use a render target to create brushes.</span></span>
-   <span data-ttu-id="ba882-154">[**ID2D1Layer**](/windows/win32/api/d2d1/nn-d2d1-id2d1layer).</span><span class="sxs-lookup"><span data-stu-id="ba882-154">[**ID2D1Layer**](/windows/win32/api/d2d1/nn-d2d1-id2d1layer).</span></span> <span data-ttu-id="ba882-155">Используйте целевой объект отрисовки для создания слоев.</span><span class="sxs-lookup"><span data-stu-id="ba882-155">Use a render target to create layers.</span></span>
-   <span data-ttu-id="ba882-156">[**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) и интерфейсы, наследующие от него.</span><span class="sxs-lookup"><span data-stu-id="ba882-156">[**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) and the interfaces that inherit from it.</span></span> <span data-ttu-id="ba882-157">Чтобы создать целевой объект рендеринга, используйте фабрику или другой целевой объект рендеринга.</span><span class="sxs-lookup"><span data-stu-id="ba882-157">To create a render target, use a factory or another render target.</span></span>

> [!Note]  
> <span data-ttu-id="ba882-158">Начиная с Windows 8, существуют новые интерфейсы, которые создают ресурсы, зависящие от устройства.</span><span class="sxs-lookup"><span data-stu-id="ba882-158">Starting with Windows 8, there are new interfaces that create device dependent resources.</span></span> <span data-ttu-id="ba882-159">[**ID2D1Device**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1device) и [**ID2D1DeviceContext**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1devicecontext) могут совместно использовать ресурс, если контекст устройства и ресурс создаются из одного и того же **ID2D1Device**.</span><span class="sxs-lookup"><span data-stu-id="ba882-159">An [**ID2D1Device**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1device) and a [**ID2D1DeviceContext**](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1devicecontext) can share a resource if the device context and the resource are created from the same **ID2D1Device**.</span></span>

 

<span data-ttu-id="ba882-160">Ресурсы, зависящие от устройства, становятся непригодными для использования, если связанные устройства отрисовки становятся недоступными.</span><span class="sxs-lookup"><span data-stu-id="ba882-160">Device-dependent resources become unusable when the associated rendering devices become unavailable.</span></span> <span data-ttu-id="ba882-161">Это означает, что при получении целевой ошибки повторного создания D2DERR для целевого объекта прорисовки необходимо заново создать целевой объект рендеринга и все его ресурсы. [**\_ \_**](direct2d-error-codes.md)</span><span class="sxs-lookup"><span data-stu-id="ba882-161">This means that when you receive the [**D2DERR\_RECREATE\_TARGET**](direct2d-error-codes.md) error for a render target, you must re-create the render target and all its resources.</span></span>

## <a name="sharing-factory-resources"></a><span data-ttu-id="ba882-162">Совместное использование ресурсов фабрики</span><span class="sxs-lookup"><span data-stu-id="ba882-162">Sharing Factory Resources</span></span>

<span data-ttu-id="ba882-163">Вы можете поделиться всеми аппаратно-независимыми ресурсами, созданными фабрикой, с другими ресурсами (не зависящими от устройства или устройствами), созданными той же фабрикой.</span><span class="sxs-lookup"><span data-stu-id="ba882-163">You can share all device-independent resources created by a factory with all other resources (device-independent or device-dependent) created by the same factory.</span></span> <span data-ttu-id="ba882-164">Например, можно использовать два объекта [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) для рисования одного и того же [**ID2D1RectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1rectanglegeometry) , если оба этих объекта **ID2D1RenderTarget** были созданы одной фабрикой.</span><span class="sxs-lookup"><span data-stu-id="ba882-164">For example, you can use two [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) objects to draw the same [**ID2D1RectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1rectanglegeometry) if both of those **ID2D1RenderTarget** objects were created by the same factory.</span></span>

<span data-ttu-id="ba882-165">Интерфейсы приемника ([**ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink), [**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink)и [**ID2D1TessellationSink**](/windows/win32/api/d2d1/nn-d2d1-id2d1tessellationsink)) могут использоваться совместно с ресурсами, созданными любой фабрикой.</span><span class="sxs-lookup"><span data-stu-id="ba882-165">The sink interfaces ([**ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink), [**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink), and [**ID2D1TessellationSink**](/windows/win32/api/d2d1/nn-d2d1-id2d1tessellationsink)) may be shared with resources created by any factory.</span></span> <span data-ttu-id="ba882-166">В отличие от других интерфейсов в Direct2D, можно использовать любую реализацию интерфейса приемника.</span><span class="sxs-lookup"><span data-stu-id="ba882-166">Unlike other interfaces in Direct2D, any implementation of a sink interface can be used.</span></span> <span data-ttu-id="ba882-167">Например, можно использовать собственную реализацию **ID2D1SimplifiedGeometrySink**.</span><span class="sxs-lookup"><span data-stu-id="ba882-167">For example, you could use your own implementation of **ID2D1SimplifiedGeometrySink**.</span></span>

## <a name="sharing-render-target-resources"></a><span data-ttu-id="ba882-168">Общий доступ к целевым ресурсам рендеринга</span><span class="sxs-lookup"><span data-stu-id="ba882-168">Sharing Render Target Resources</span></span>

<span data-ttu-id="ba882-169">Возможность совместного использования ресурсов, созданных целевым объектом рендеринга, зависит от типа целевого объекта рендеринга.</span><span class="sxs-lookup"><span data-stu-id="ba882-169">Your ability to share resources created by a render target depends on the kind of render target.</span></span> <span data-ttu-id="ba882-170">При создании целевого объекта отрисовки типа [**D2D1 \_ рендеринга \_ \_ \_ по умолчанию**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_type)ресурсы, созданные этим целевым объектом отрисовки, могут использоваться только этим целевым объектом отрисовки (если целевой объект прорисовки не соответствует ни одной из категорий, описанных в следующих разделах).</span><span class="sxs-lookup"><span data-stu-id="ba882-170">When you create a render target of type [**D2D1\_RENDER\_TARGET\_TYPE\_DEFAULT**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_type), the resources created by that render target can only be used by that render target (unless the render target fits into one of the categories described in the following sections).</span></span> <span data-ttu-id="ba882-171">Это происходит из-за того, что неизвестно, какое устройство будет использовать целевой объект рендеринга — это может привести к отрисовке на локальном оборудовании, программном обеспечении или на оборудовании удаленного клиента.</span><span class="sxs-lookup"><span data-stu-id="ba882-171">This occurs because you do not know what device the render target will end up using—it could end up rendering to local hardware, software, or to a remote client's hardware.</span></span> <span data-ttu-id="ba882-172">Например, можно написать программу, которая перестает работать при удаленном отображении или при увеличении размера целевого объекта отрисовки сверх максимального размера, поддерживаемого оборудованием визуализации.</span><span class="sxs-lookup"><span data-stu-id="ba882-172">For example, you could write a program that stops working when it is displayed remotely or when the render target is increased in size beyond the maximum size supported by the rendering hardware.</span></span>

<span data-ttu-id="ba882-173">В следующих разделах описываются обстоятельства, при которых ресурс, созданный одним целевым объектом прорисовки, может совместно использоваться с другим целевым объектом рендеринга.</span><span class="sxs-lookup"><span data-stu-id="ba882-173">The following sections describe the circumstances under which a resource created by one render target can be shared with another render target.</span></span>

### <a name="hardware-render-targets"></a><span data-ttu-id="ba882-174">Целевые объекты рендеринга оборудования</span><span class="sxs-lookup"><span data-stu-id="ba882-174">Hardware Render Targets</span></span>

<span data-ttu-id="ba882-175">Можно совместно использовать ресурсы любого целевого объекта рендеринга, который явно использует оборудование, при условии, что режим удаленного взаимодействия совместим.</span><span class="sxs-lookup"><span data-stu-id="ba882-175">You can share resources between any render target that explicitly uses hardware, as long as the remoting mode is compatible.</span></span> <span data-ttu-id="ba882-176">Режим удаленного взаимодействия гарантированно совместим только в том случае, если оба целевого объекта прорисовки используют [**D2D1ный \_ целевой объект рендеринга для \_ \_ \_ \_ \_ удаленного взаимодействия**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_usage) или D2D1 для целевого объекта прорисовки, **\_ \_ \_ \_ \_ совместимый с GDI** , или если ни один из флагов не указан.</span><span class="sxs-lookup"><span data-stu-id="ba882-176">The remoting mode is only guaranteed to be compatible when both render targets use the [**D2D1\_RENDER\_TARGET\_USAGE\_FORCE\_BITMAP\_REMOTING**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_usage) or **D2D1\_RENDER\_TARGET\_USAGE\_GDI\_COMPATIBLE** usage flag, or if neither flag is specified.</span></span> <span data-ttu-id="ba882-177">Эти параметры гарантируют, что ресурсы будут всегда находиться на одном и том же компьютере.</span><span class="sxs-lookup"><span data-stu-id="ba882-177">These settings guarantee that the resources will always be located on the same computer.</span></span> <span data-ttu-id="ba882-178">Чтобы указать режим использования, задайте поле **Usage** в структуре [**\_ \_ \_ свойств целевого объекта отрисовки D2D1**](/windows/desktop/api/d2d1/ns-d2d1-d2d1_render_target_properties) , которая использовалась для создания целевого объекта отрисовки с одним или несколькими флагами **\_ \_ \_ использования целевого объекта прорисовки D2D1** .</span><span class="sxs-lookup"><span data-stu-id="ba882-178">To specify a usage mode, set the **usage** field of the [**D2D1\_RENDER\_TARGET\_PROPERTIES**](/windows/desktop/api/d2d1/ns-d2d1-d2d1_render_target_properties) structure that you used to create the render target with one or more **D2D1\_RENDER\_TARGET\_USAGE** flags.</span></span>

<span data-ttu-id="ba882-179">Чтобы создать целевой объект отрисовки, который в явном виде использует аппаратную отрисовку, задайте поле **тип** в структуре [**\_ \_ \_ свойств целевого объекта отрисовки D2D1**](/windows/desktop/api/d2d1/ns-d2d1-d2d1_render_target_properties) , которая использовалась для создания целевого объекта отрисовки для [**D2D1 \_ \_ целевого \_ типа \_ визуализации**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_type).</span><span class="sxs-lookup"><span data-stu-id="ba882-179">To create a render target that explicitly uses hardware rendering, set the **type** field of the [**D2D1\_RENDER\_TARGET\_PROPERTIES**](/windows/desktop/api/d2d1/ns-d2d1-d2d1_render_target_properties) structure that you used to create the render target to [**D2D1\_RENDER\_TARGET\_TYPE\_HARDWARE**](/windows/desktop/api/d2d1/ne-d2d1-d2d1_render_target_type).</span></span>

### <a name="dxgi-surface-render-targets"></a><span data-ttu-id="ba882-180">Целевые объекты прорисовки поверхности DXGI</span><span class="sxs-lookup"><span data-stu-id="ba882-180">DXGI Surface Render Targets</span></span>

<span data-ttu-id="ba882-181">Ресурсы, созданные на поверхности DXGI, можно совместно использовать с любым другим целевым объектом отрисовки поверхности DXGI, использующим то же базовое устройство Direct3D.</span><span class="sxs-lookup"><span data-stu-id="ba882-181">You can share resources created by a DXGI surface render target with any other DXGI surface render target that is using the same underlying Direct3D device.</span></span>

### <a name="compatible-render-targets-and-shared-bitmaps"></a><span data-ttu-id="ba882-182">Совместимые целевые объекты рендеринга и общие точечные рисунки</span><span class="sxs-lookup"><span data-stu-id="ba882-182">Compatible Render Targets and Shared Bitmaps</span></span>

<span data-ttu-id="ba882-183">Можно совместно использовать ресурсы между целевым объектом рендеринга и совместимыми целевыми объектами рендеринга, созданными этим целевым объектом рендеринга.</span><span class="sxs-lookup"><span data-stu-id="ba882-183">You can share resources between a render target and compatible render targets that are created by that render target.</span></span> <span data-ttu-id="ba882-184">Чтобы создать совместимый целевой объект рендеринга, используйте метод [**ID2D1RenderTarget:: креатекомпатиблерендертаржет**](/windows/desktop/api/d2d1/nf-d2d1-id2d1rendertarget-createcompatiblerendertarget(id2d1bitmaprendertarget)) .</span><span class="sxs-lookup"><span data-stu-id="ba882-184">To create a compatible render target, use the [**ID2D1RenderTarget::CreateCompatibleRenderTarget**](/windows/desktop/api/d2d1/nf-d2d1-id2d1rendertarget-createcompatiblerendertarget(id2d1bitmaprendertarget)) method.</span></span>

<span data-ttu-id="ba882-185">Метод [**ID2D1RenderTarget:: креатешаредбитмап**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createsharedbitmap) можно использовать для создания [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) , который может совместно использоваться двумя целевыми объектами отрисовки, указанными в вызове метода, если метод выполняется.</span><span class="sxs-lookup"><span data-stu-id="ba882-185">You can use the [**ID2D1RenderTarget::CreateSharedBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createsharedbitmap) method to create an [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) that can be shared between the two render targets that are specified in the method call, if the method succeeds.</span></span> <span data-ttu-id="ba882-186">Этот метод будет выполнен, если два целевого объекта отрисовки используют для отрисовки одно и то же базовое устройство.</span><span class="sxs-lookup"><span data-stu-id="ba882-186">This method will succeed as long as the two render targets use the same underlying device for rendering.</span></span>

 

 
