---
title: Исходный растровый результат
description: Используйте эффекты источника точечного рисунка для создания ID2D1Image из IWICBitmapSource для использования в качестве входных данных в графе эффектов.
ms.assetid: 86646111-208A-4E6D-A28C-7B23A1742D24
keywords:
- исходный растровый результат
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a439c94f0f520b318b3cb3511775dbec58b6e139
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "103892593"
---
# <a name="bitmap-source-effect"></a><span data-ttu-id="9f0e7-104">Исходный растровый результат</span><span class="sxs-lookup"><span data-stu-id="9f0e7-104">Bitmap source effect</span></span>

<span data-ttu-id="9f0e7-105">Используйте эффекты источника точечного рисунка для создания [**ID2D1Image**](/windows/win32/api/d2d1/nn-d2d1-id2d1image) из [**IWICBitmapSource**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapsource) для использования в качестве входных данных в графе эффектов.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-105">Use the bitmap source effect to generate an [**ID2D1Image**](/windows/win32/api/d2d1/nn-d2d1-id2d1image) from a [**IWICBitmapSource**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapsource) for use as an input in an effect graph.</span></span> <span data-ttu-id="9f0e7-106">Этот результат выполняет масштабирование и вращение на ЦП.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-106">This effect performs scaling and rotation on the CPU.</span></span> <span data-ttu-id="9f0e7-107">Кроме того, при необходимости можно создать mipmap системной памяти, что может быть оптимизацией производительности для активного масштабирования очень больших изображений при различных уменьшенных разрешениях.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-107">It can also optionally generate a system memory mipmap, which can be a performance optimization for actively scaling very large images at various reduced resolutions.</span></span>

> [!Note]  
> <span data-ttu-id="9f0e7-108">Результат источника точечного рисунка принимает свои входные данные как свойство, а не как вход изображения.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-108">The bitmap source effect takes its input as a property, not as an image input.</span></span> <span data-ttu-id="9f0e7-109">Необходимо использовать метод [**SetValue**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1properties-setvalue(uint32_constbyte_uint32)) , а не метод [**сетинпут**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1effect-setinput) .</span><span class="sxs-lookup"><span data-stu-id="9f0e7-109">You must use the [**SetValue**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1properties-setvalue(uint32_constbyte_uint32)) method, not the [**SetInput**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1effect-setinput) method.</span></span> <span data-ttu-id="9f0e7-110">В свойстве *викбитмапсаурце* указываются входные данные изображения.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-110">The *WicBitmapSource* property is where you specify the image input data.</span></span>

 

<span data-ttu-id="9f0e7-111">Идентификатором CLSID для этого действия является CLSID \_ D2D1BitmapSource.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-111">The CLSID for this effect is CLSID\_D2D1BitmapSource.</span></span>

-   [<span data-ttu-id="9f0e7-112">Свойства эффектов</span><span class="sxs-lookup"><span data-stu-id="9f0e7-112">Effect properties</span></span>](#effect-properties)
-   [<span data-ttu-id="9f0e7-113">Режимы интерполяции</span><span class="sxs-lookup"><span data-stu-id="9f0e7-113">Interpolation modes</span></span>](#interpolation-modes)
-   [<span data-ttu-id="9f0e7-114">Ориентация</span><span class="sxs-lookup"><span data-stu-id="9f0e7-114">Orientation</span></span>](#orientation)
-   [<span data-ttu-id="9f0e7-115">Режимы альфа</span><span class="sxs-lookup"><span data-stu-id="9f0e7-115">Alpha modes</span></span>](#alpha-modes)
-   [<span data-ttu-id="9f0e7-116">Замечания</span><span class="sxs-lookup"><span data-stu-id="9f0e7-116">Remarks</span></span>](#remarks)
-   [<span data-ttu-id="9f0e7-117">Требования</span><span class="sxs-lookup"><span data-stu-id="9f0e7-117">Requirements</span></span>](#requirements)
-   [<span data-ttu-id="9f0e7-118">См. также</span><span class="sxs-lookup"><span data-stu-id="9f0e7-118">Related topics</span></span>](#related-topics)

## <a name="effect-properties"></a><span data-ttu-id="9f0e7-119">Свойства эффектов</span><span class="sxs-lookup"><span data-stu-id="9f0e7-119">Effect properties</span></span>



| <span data-ttu-id="9f0e7-120">Отображаемое имя и перечисление индекса</span><span class="sxs-lookup"><span data-stu-id="9f0e7-120">Display name and index enumeration</span></span>                                                          | <span data-ttu-id="9f0e7-121">Описание</span><span class="sxs-lookup"><span data-stu-id="9f0e7-121">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                |
|---------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="9f0e7-122">викбитмапсаурце</span><span class="sxs-lookup"><span data-stu-id="9f0e7-122">WicBitmapSource</span></span><br/> <span data-ttu-id="9f0e7-123">\_ \_ \_ \_ Источник точечного рисунка WIC \_ для D2D1</span><span class="sxs-lookup"><span data-stu-id="9f0e7-123">D2D1\_BITMAPSOURCE\_PROP\_WIC\_BITMAP\_SOURCE</span></span><br/>         | <span data-ttu-id="9f0e7-124">[IWICBitmapSource](/windows/desktop/wic/-wic-imp-iwicbitmapsource) , содержащий данные изображения для загрузки.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-124">The [IWICBitmapSource](/windows/desktop/wic/-wic-imp-iwicbitmapsource) containing the image data to be loaded.</span></span><br/> <span data-ttu-id="9f0e7-125">Тип — [IWICBitmapSource](/windows/desktop/wic/-wic-imp-iwicbitmapsource).</span><span class="sxs-lookup"><span data-stu-id="9f0e7-125">The type is [IWICBitmapSource](/windows/desktop/wic/-wic-imp-iwicbitmapsource).</span></span><br/> <span data-ttu-id="9f0e7-126">Значение по умолчанию — NULL.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-126">The default value is NULL.</span></span><br/>                                                                                                                                                                                                                   |
| <span data-ttu-id="9f0e7-127">Масштабирование</span><span class="sxs-lookup"><span data-stu-id="9f0e7-127">Scale</span></span><br/> <span data-ttu-id="9f0e7-128">\_ \_ \_ МАСШТАБИРОВАНие Prop D2D1</span><span class="sxs-lookup"><span data-stu-id="9f0e7-128">D2D1\_BITMAPSOURCE\_PROP\_SCALE</span></span><br/>                                 | <span data-ttu-id="9f0e7-129">Размер шкалы в направлении X и Y.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-129">The scale amount in the X and Y direction.</span></span> <span data-ttu-id="9f0e7-130">Результат умножает ширину на значение X и высоту по значению Y.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-130">The effect multiplies the width by the X value and the height by the Y value.</span></span> <span data-ttu-id="9f0e7-131">Это свойство является D2D1 \_ вектором \_ 2F, определенным как: (масштаб X, Масштаб Y).</span><span class="sxs-lookup"><span data-stu-id="9f0e7-131">This property is a D2D1\_VECTOR\_2F defined as: (X scale, Y scale).</span></span> <span data-ttu-id="9f0e7-132">Значения масштаба FLOAT, без единицы и должны быть положительными или равными 0.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-132">The scale amounts are FLOAT, unitless, and must be positive or 0.</span></span><br/> <span data-ttu-id="9f0e7-133">Тип — D2D1 \_ vector \_ 2F.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-133">The type is D2D1\_VECTOR\_2F.</span></span><br/> <span data-ttu-id="9f0e7-134">Значение по умолчанию — {1.0 f, 1.0 f}.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-134">The default value is {1.0f, 1.0f}.</span></span><br/>                                                                           |
| <span data-ttu-id="9f0e7-135">Интерполатионмоде.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-135">InterpolationMode.</span></span><br/> <span data-ttu-id="9f0e7-136">\_ \_ \_ Режим ИНТЕРПОЛЯЦИи Prop D2D1 \_</span><span class="sxs-lookup"><span data-stu-id="9f0e7-136">D2D1\_BITMAPSOURCE\_PROP\_INTERPOLATION\_MODE</span></span><br/>      | <span data-ttu-id="9f0e7-137">Режим интерполяции, используемый для масштабирования изображения.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-137">The interpolation mode used to scale the image.</span></span> <span data-ttu-id="9f0e7-138">Дополнительные сведения см. в разделе [режимы интерполяции](#interpolation-modes) .</span><span class="sxs-lookup"><span data-stu-id="9f0e7-138">See [Interpolation modes](#interpolation-modes) for more info.</span></span><br/> <span data-ttu-id="9f0e7-139">Если в режиме отключается mipmap, Битмапсауце будет кэшировать изображение с разрешением, определенным свойствами Scale и Енабледпикорректион.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-139">If the mode disables the mipmap, then BitmapSouce will cache the image at the resolution determined by the Scale and EnableDPICorrection properties.</span></span><br/> <span data-ttu-id="9f0e7-140">Тип — D2D1, \_ \_ Режим интерполяции \_ .</span><span class="sxs-lookup"><span data-stu-id="9f0e7-140">The type is D2D1\_BITMAPSOURCE\_INTERPOLATION\_MODE.</span></span><br/> <span data-ttu-id="9f0e7-141">Значение по умолчанию — D2D1 — \_ \_ \_ линейный режим интерполяции \_ .</span><span class="sxs-lookup"><span data-stu-id="9f0e7-141">The default value is D2D1\_BITMAPSOURCE\_INTERPOLATION\_MODE\_LINEAR.</span></span><br/> |
| <span data-ttu-id="9f0e7-142">енабледпикорректион</span><span class="sxs-lookup"><span data-stu-id="9f0e7-142">EnableDPICorrection</span></span><br/> <span data-ttu-id="9f0e7-143">D2D1ое \_ \_ разрешение Prop — \_ \_ \_ исправление dpi</span><span class="sxs-lookup"><span data-stu-id="9f0e7-143">D2D1\_BITMAPSOURCE\_PROP\_ENABLE\_DPI\_CORRECTION</span></span><br/> | <span data-ttu-id="9f0e7-144">Если задать для этого свойства значение TRUE, то будет масштабировать входной образ для преобразования DPI, сообщаемого [**IWICBitmapSource**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapsource) , на значение dpi контекста устройства.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-144">If you set this to TRUE, the effect will scale the input image to convert the DPI reported by [**IWICBitmapSource**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapsource) to the DPI of the device context.</span></span> <span data-ttu-id="9f0e7-145">В результате используется режим интерполяции, заданный с помощью свойства Интерполатионмоде.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-145">The effect uses the interpolation mode you set with the InterpolationMode property.</span></span> <span data-ttu-id="9f0e7-146">Если присвоить этому параметру значение FALSE, то в результате для выходного изображения будет использоваться значение DPI 96,0.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-146">If you set this to FALSE, the effect uses a DPI of 96.0 for the output image.</span></span><br/> <span data-ttu-id="9f0e7-147">Тип — BOOL.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-147">The type is BOOL.</span></span><br/> <span data-ttu-id="9f0e7-148">Значение по умолчанию — FALSE.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-148">The default value is FALSE.</span></span><br/>   |
| <span data-ttu-id="9f0e7-149">алфамоде</span><span class="sxs-lookup"><span data-stu-id="9f0e7-149">AlphaMode</span></span><br/> <span data-ttu-id="9f0e7-150">D2D1 \_ - \_ режим "Альфа- \_ канал \_ "</span><span class="sxs-lookup"><span data-stu-id="9f0e7-150">D2D1\_BITMAPSOURCE\_PROP\_ALPHA\_MODE</span></span><br/>                       | <span data-ttu-id="9f0e7-151">Режим альфа для выходных данных.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-151">The alpha mode of the output.</span></span> <span data-ttu-id="9f0e7-152">Это может быть либо предварительное умножение, либо прямое.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-152">This can be either premultiplied or straight.</span></span> <span data-ttu-id="9f0e7-153">Дополнительные сведения см. в разделе [режимы альфа-канала](#alpha-modes) .</span><span class="sxs-lookup"><span data-stu-id="9f0e7-153">See [Alpha modes](#alpha-modes) for more info.</span></span><br/> <span data-ttu-id="9f0e7-154">Тип — D2D1овый \_ \_ режим альфа-канала \_ .</span><span class="sxs-lookup"><span data-stu-id="9f0e7-154">The type is D2D1\_BITMAPSOURCE\_ALPHA\_MODE.</span></span><br/> <span data-ttu-id="9f0e7-155">Значение по умолчанию — D2D1о — альфа-канал с предварительным \_ \_ \_ \_ умножением.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-155">The default value is D2D1\_BITMAPSOURCE\_ALPHA\_MODE\_PREMULTIPLIED.</span></span><br/>                                                                                                                                                              |
| <span data-ttu-id="9f0e7-156">Orientation</span><span class="sxs-lookup"><span data-stu-id="9f0e7-156">Orientation</span></span><br/> <span data-ttu-id="9f0e7-157">Ориентация свойства "D2D1" \_ \_ \_</span><span class="sxs-lookup"><span data-stu-id="9f0e7-157">D2D1\_BITMAPSOURCE\_PROP\_ORIENTATION</span></span><br/>                     | <span data-ttu-id="9f0e7-158">Операция отражения или вращения, выполняемая над изображением.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-158">A flip and/or rotation operation to be performed on the image.</span></span> <span data-ttu-id="9f0e7-159">Дополнительные сведения см. в разделе [ориентация](#orientation) .</span><span class="sxs-lookup"><span data-stu-id="9f0e7-159">See [Orientation](#orientation) for more info.</span></span><br/> <span data-ttu-id="9f0e7-160">Тип — D2D1ая \_ \_ ориентация.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-160">The type is D2D1\_BITMAPSOURCE\_ORIENTATION.</span></span><br/> <span data-ttu-id="9f0e7-161">По умолчанию используется значение по умолчанию D2D1 для \_ \_ ориентации \_ .</span><span class="sxs-lookup"><span data-stu-id="9f0e7-161">The default value is D2D1\_BITMAPSOURCE\_ORIENTATION\_DEFAULT.</span></span><br/>                                                                                                                                                                                 |



 

## <a name="interpolation-modes"></a><span data-ttu-id="9f0e7-162">Режимы интерполяции</span><span class="sxs-lookup"><span data-stu-id="9f0e7-162">Interpolation modes</span></span>

<span data-ttu-id="9f0e7-163">Этот режим выполняет интерполяцию с использованием этого режима при масштабировании изображения или при исправлении DPI.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-163">The effect interpolates using this mode when it scales an image or when it corrects the DPI.</span></span> <span data-ttu-id="9f0e7-164">Режимы интерполяции, используемые этим действием, рассчитываются ЦП, а не GPU.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-164">The interpolation modes this effect uses are calculated by the CPU, not the GPU.</span></span>



| <span data-ttu-id="9f0e7-165">Имя</span><span class="sxs-lookup"><span data-stu-id="9f0e7-165">Name</span></span>                                                       | <span data-ttu-id="9f0e7-166">Описание</span><span class="sxs-lookup"><span data-stu-id="9f0e7-166">Description</span></span>                                                                                                                                                                                                                          |
|------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="9f0e7-167">\_ \_ \_ \_ Ближайший сосед в режиме интерполяции \_ D2D1</span><span class="sxs-lookup"><span data-stu-id="9f0e7-167">D2D1\_BITMAPSOURCE\_INTERPOLATION\_MODE\_NEAREST\_NEIGHBOR</span></span> | <span data-ttu-id="9f0e7-168">Выбирает ближайшую одиночную точку и использует ее.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-168">Samples the nearest single point and uses that.</span></span> <span data-ttu-id="9f0e7-169">Не создает mipmap.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-169">Doesn't generate a mipmap.</span></span>                                                                                                                                                           |
| <span data-ttu-id="9f0e7-170">\_ \_ \_ Линейный режим интерполяции \_ D2D1</span><span class="sxs-lookup"><span data-stu-id="9f0e7-170">D2D1\_BITMAPSOURCE\_INTERPOLATION\_MODE\_LINEAR</span></span>            | <span data-ttu-id="9f0e7-171">Использует выборку с четырьмя точками и линейную интерполяцию.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-171">Uses a four point sample and linear interpolation.</span></span> <span data-ttu-id="9f0e7-172">Не создает mipmap.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-172">Doesn't generate a mipmap.</span></span>                                                                                                                                                        |
| <span data-ttu-id="9f0e7-173">D2D1ный \_ \_ Режим интерполяции, \_ \_ кубический</span><span class="sxs-lookup"><span data-stu-id="9f0e7-173">D2D1\_BITMAPSOURCE\_INTERPOLATION\_MODE\_CUBIC</span></span>             | <span data-ttu-id="9f0e7-174">Использует 16-примерный ядро кубических для интерполяции.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-174">Uses a 16 sample cubic kernel for interpolation.</span></span> <span data-ttu-id="9f0e7-175">Не создает mipmap.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-175">Doesn't generate a mipmap.</span></span>                                                                                                                                                          |
| <span data-ttu-id="9f0e7-176">\_ \_ Фант режим ИНТЕРПОЛЯЦИи \_ D2D1 \_</span><span class="sxs-lookup"><span data-stu-id="9f0e7-176">D2D1\_BITMAPSOURCE\_INTERPOLATION\_MODE\_FANT</span></span>              | <span data-ttu-id="9f0e7-177">Использует фант интерполяцию WIC, то же, что и интерфейс [**ивикбитмапскалер**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapscaler) .</span><span class="sxs-lookup"><span data-stu-id="9f0e7-177">Uses the WIC fant interpolation, the same as the [**IWICBitmapScaler**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapscaler) interface.</span></span> <span data-ttu-id="9f0e7-178">Не создает mipmap.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-178">Doesn't generate a mipmap.</span></span>                                                                                       |
| <span data-ttu-id="9f0e7-179">D2D1 \_ \_ \_ переMIPMAP режим интерполяции, \_ \_ линейный</span><span class="sxs-lookup"><span data-stu-id="9f0e7-179">D2D1\_BITMAPSOURCE\_INTERPOLATION\_MODE\_MIPMAP\_LINEAR</span></span>    | <span data-ttu-id="9f0e7-180">Создает цепочку mipmap в системной памяти с помощью интерполяции билинейной.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-180">Generates mipmap chain in system memory using bilinear interpolation.</span></span> <span data-ttu-id="9f0e7-181">Для каждого mipmap результат масштабируется до ближайшего числа, кратного 0,5 с помощью интерполяции билинейной, а затем масштабирует оставшуюся сумму с помощью линейной интерполяции.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-181">For each mipmap the effect scales to the nearest multiple of 0.5 using bilinear interpolation and then scales the remaining amount using linear interpolation.</span></span> |



 

## <a name="orientation"></a><span data-ttu-id="9f0e7-182">Orientation</span><span class="sxs-lookup"><span data-stu-id="9f0e7-182">Orientation</span></span>

<span data-ttu-id="9f0e7-183">Свойство Orientation можно использовать для применения флага ориентации EXIF, внедренного в изображение.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-183">The Orientation property can be used to apply an EXIF orientation flag that is embedded within an image.</span></span>



| <span data-ttu-id="9f0e7-184">Имя</span><span class="sxs-lookup"><span data-stu-id="9f0e7-184">Name</span></span>                                                                    | <span data-ttu-id="9f0e7-185">Описание</span><span class="sxs-lookup"><span data-stu-id="9f0e7-185">Description</span></span>                                                        |
|-------------------------------------------------------------------------|--------------------------------------------------------------------|
| <span data-ttu-id="9f0e7-186">Ориентация D2D1ного \_ \_ перенаправления \_ по умолчанию</span><span class="sxs-lookup"><span data-stu-id="9f0e7-186">D2D1\_BITMAPSOURCE\_ORIENTATION\_DEFAULT</span></span>                                | <span data-ttu-id="9f0e7-187">По умолчанию.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-187">Default.</span></span> <span data-ttu-id="9f0e7-188">Этот результат не изменяет ориентацию входных данных.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-188">The effect doesn't change the orientation of the input.</span></span>   |
| <span data-ttu-id="9f0e7-189">\_Отразить \_ \_ \_ по горизонтали ориентацию D2D1</span><span class="sxs-lookup"><span data-stu-id="9f0e7-189">D2D1\_BITMAPSOURCE\_ORIENTATION\_FLIP\_HORIZONTAL</span></span>                       | <span data-ttu-id="9f0e7-190">Переворачивает изображение по горизонтали.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-190">Flips the image horizontally.</span></span>                                      |
| <span data-ttu-id="9f0e7-191">D2D1а, \_ \_ ориентация, \_ поворот \_ CLOCKWISE180</span><span class="sxs-lookup"><span data-stu-id="9f0e7-191">D2D1\_BITMAPSOURCE\_ORIENTATION\_ROTATE\_CLOCKWISE180</span></span>                   | <span data-ttu-id="9f0e7-192">Поворот изображения на 180 градусов по часовой стрелке.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-192">Rotates the image clockwise 180 degrees.</span></span>                           |
| <span data-ttu-id="9f0e7-193">D2D1а, \_ \_ ориентация, \_ поворот \_ CLOCKWISE180 \_ перелистывание \_ по горизонтали</span><span class="sxs-lookup"><span data-stu-id="9f0e7-193">D2D1\_BITMAPSOURCE\_ORIENTATION\_ROTATE\_CLOCKWISE180\_FLIP\_HORIZONTAL</span></span> | <span data-ttu-id="9f0e7-194">Поворот изображения на 180 градусов по часовой стрелке и отражение его по горизонтали.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-194">Rotates the image clockwise 180 degrees and flips it horizontally.</span></span> |
| <span data-ttu-id="9f0e7-195">D2D1а, \_ \_ ориентация, \_ поворот \_ CLOCKWISE270 \_ перелистывание \_ по горизонтали</span><span class="sxs-lookup"><span data-stu-id="9f0e7-195">D2D1\_BITMAPSOURCE\_ORIENTATION\_ROTATE\_CLOCKWISE270\_FLIP\_HORIZONTAL</span></span> | <span data-ttu-id="9f0e7-196">Поворот изображения на 270 градусов по часовой стрелке и отражение его по горизонтали.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-196">Rotates the image clockwise 270 degrees and flips it horizontally.</span></span> |
| <span data-ttu-id="9f0e7-197">D2D1а, \_ \_ ориентация, \_ поворот \_ CLOCKWISE90</span><span class="sxs-lookup"><span data-stu-id="9f0e7-197">D2D1\_BITMAPSOURCE\_ORIENTATION\_ROTATE\_CLOCKWISE90</span></span>                    | <span data-ttu-id="9f0e7-198">Поворот изображения на 90 градусов по часовой стрелке.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-198">Rotates the image clockwise 90 degrees.</span></span>                            |
| <span data-ttu-id="9f0e7-199">D2D1а, \_ \_ ориентация, \_ поворот \_ CLOCKWISE90 \_ перелистывание \_ по горизонтали</span><span class="sxs-lookup"><span data-stu-id="9f0e7-199">D2D1\_BITMAPSOURCE\_ORIENTATION\_ROTATE\_CLOCKWISE90\_FLIP\_HORIZONTAL</span></span>  | <span data-ttu-id="9f0e7-200">Поворот изображения на 90 градусов по часовой стрелке и отражение его по горизонтали.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-200">Rotates the image clockwise 90 degrees and flips it horizontally.</span></span>  |
| <span data-ttu-id="9f0e7-201">D2D1а, \_ \_ ориентация, \_ поворот \_ CLOCKWISE270</span><span class="sxs-lookup"><span data-stu-id="9f0e7-201">D2D1\_BITMAPSOURCE\_ORIENTATION\_ROTATE\_CLOCKWISE270</span></span>                   | <span data-ttu-id="9f0e7-202">Поворот изображения на 270 градусов по часовой стрелке.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-202">Rotates the image clockwise 270 degrees.</span></span>                           |



 

<span data-ttu-id="9f0e7-203">В этом фрагменте кода показано, как преобразовать значения ориентации EXIF (определенные в PKEY. h) в значения D2D1ного \_ \_ расположения.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-203">This code snippet demonstrates how to convert from EXIF orientation values (defined in propkey.h) to D2D1\_BITMAPSOURCE\_ORIENTATION values.</span></span>


```C++
#include <propkey.h>
#include <d2d1effects.h>

D2D1_BITMAPSOURCE_ORIENTATION GetBitmapSourceOrientation(unsigned short PhotoOrientation)
{
       switch (PhotoOrientation)
       {
       case PHOTO_ORIENTATION_NORMAL:
              return D2D1_BITMAPSOURCE_ORIENTATION_DEFAULT;
       case PHOTO_ORIENTATION_FLIPHORIZONTAL:
              return D2D1_BITMAPSOURCE_ORIENTATION_FLIP_HORIZONTAL;
       case PHOTO_ORIENTATION_ROTATE180:
              return D2D1_BITMAPSOURCE_ORIENTATION_ROTATE_CLOCKWISE180;
       case PHOTO_ORIENTATION_FLIPVERTICAL:
              return D2D1_BITMAPSOURCE_ORIENTATION_ROTATE_CLOCKWISE180_FLIP_HORIZONTAL;
       case PHOTO_ORIENTATION_TRANSPOSE: 
              return D2D1_BITMAPSOURCE_ORIENTATION_ROTATE_CLOCKWISE90_FLIP_HORIZONTAL;
       case PHOTO_ORIENTATION_ROTATE270:
              return D2D1_BITMAPSOURCE_ORIENTATION_ROTATE_CLOCKWISE90;
       case PHOTO_ORIENTATION_TRANSVERSE:
              return D2D1_BITMAPSOURCE_ORIENTATION_ROTATE_CLOCKWISE270_FLIP_HORIZONTAL;
       case PHOTO_ORIENTATION_ROTATE90:
              return D2D1_BITMAPSOURCE_ORIENTATION_ROTATE_CLOCKWISE270;
       default:
              return D2D1_BITMAPSOURCE_ORIENTATION_DEFAULT;
       }
}
```



## <a name="alpha-modes"></a><span data-ttu-id="9f0e7-204">Режимы альфа</span><span class="sxs-lookup"><span data-stu-id="9f0e7-204">Alpha modes</span></span>



| <span data-ttu-id="9f0e7-205">Имя</span><span class="sxs-lookup"><span data-stu-id="9f0e7-205">Name</span></span>                                           | <span data-ttu-id="9f0e7-206">Описание</span><span class="sxs-lookup"><span data-stu-id="9f0e7-206">Description</span></span>                                            |
|------------------------------------------------|--------------------------------------------------------|
| <span data-ttu-id="9f0e7-207">Предварительное \_ \_ \_ умножение режима альфа-канала D2D1 \_</span><span class="sxs-lookup"><span data-stu-id="9f0e7-207">D2D1\_BITMAPSOURCE\_ALPHA\_MODE\_PREMULTIPLIED</span></span> | <span data-ttu-id="9f0e7-208">В выходных данных эффектов используется предварительно умноженное альфа-значение.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-208">The effect output uses premultiplied alpha.</span></span><br/> |
| <span data-ttu-id="9f0e7-209">D2D1ный \_ \_ режим альфа-канала \_ \_</span><span class="sxs-lookup"><span data-stu-id="9f0e7-209">D2D1\_BITMAPSOURCE\_ALPHA\_MODE\_STRAIGHT</span></span>      | <span data-ttu-id="9f0e7-210">В выходных данных эффектов используется прямая альфа-составляющая.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-210">The effect output uses straight alpha.</span></span><br/>      |



 

## <a name="remarks"></a><span data-ttu-id="9f0e7-211">Комментарии</span><span class="sxs-lookup"><span data-stu-id="9f0e7-211">Remarks</span></span>

<span data-ttu-id="9f0e7-212">Чтобы оптимизировать производительность при совместном использовании WIC и [Direct2D](./direct2d-portal.md) , следует использовать [**ивикформатконвертер**](/windows/desktop/api/wincodec/nn-wincodec-iwicformatconverter) для преобразования в соответствующий формат пикселей на основе сценария приложения и собственной точности образа.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-212">To optimize performance when using WIC and [Direct2D](./direct2d-portal.md) together, you should use [**IWICFormatConverter**](/windows/desktop/api/wincodec/nn-wincodec-iwicformatconverter) to convert to an appropriate pixel format based your app s scenario and the image s native precision.</span></span>

<span data-ttu-id="9f0e7-213">В большинстве случаев конвейер [Direct2D](./direct2d-portal.md) приложений требует только 8 бит на канал (бит/с) точности, либо образ обеспечивает только 8-битную точность, поэтому необходимо преобразовать в GUID \_ WICPixelFormat32bppPBGRA.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-213">In most cases, either your app s [Direct2D](./direct2d-portal.md) pipeline only requires 8 bits per channel (bpc) of precision, or the image only provides 8 bpc precision, and therefore you should convert to GUID\_WICPixelFormat32bppPBGRA.</span></span> <span data-ttu-id="9f0e7-214">Однако если вы хотите воспользоваться преимуществами дополнительной точности изображения (например, JPEG-XR или TIFF с более 8 битами на канал), следует использовать формат пикселей на основе RGBA.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-214">However, if you want to take advantage of extra precision provided by an image (for example, a JPEG-XR or TIFF stored with greater than 8 bpc precision), you should use an RGBA-based pixel format.</span></span> <span data-ttu-id="9f0e7-215">В таблице ниже приведены дополнительные сведения.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-215">The below table provides more details.</span></span>



| <span data-ttu-id="9f0e7-216">Требуемая точность</span><span class="sxs-lookup"><span data-stu-id="9f0e7-216">Desired precision</span></span>   | <span data-ttu-id="9f0e7-217">Собственная точность изображения</span><span class="sxs-lookup"><span data-stu-id="9f0e7-217">Native precision of the image</span></span> | <span data-ttu-id="9f0e7-218">Рекомендуемый формат пикселей</span><span class="sxs-lookup"><span data-stu-id="9f0e7-218">Recommended pixel format</span></span>                |
|---------------------|-------------------------------|-----------------------------------------|
| <span data-ttu-id="9f0e7-219">8 бит на канал</span><span class="sxs-lookup"><span data-stu-id="9f0e7-219">8 bits per channel</span></span>  | <span data-ttu-id="9f0e7-220"><= 8 бит на канал</span><span class="sxs-lookup"><span data-stu-id="9f0e7-220"><= 8 bits per channel</span></span>      | <span data-ttu-id="9f0e7-221">GUID \_ WICPixelFormat32bppPBGRA</span><span class="sxs-lookup"><span data-stu-id="9f0e7-221">GUID\_WICPixelFormat32bppPBGRA</span></span>          |
| <span data-ttu-id="9f0e7-222">Как можно выше</span><span class="sxs-lookup"><span data-stu-id="9f0e7-222">As high as possible</span></span> | <span data-ttu-id="9f0e7-223"><= 8 бит на канал</span><span class="sxs-lookup"><span data-stu-id="9f0e7-223"><= 8 bits per channel</span></span>      | <span data-ttu-id="9f0e7-224">GUID \_ WICPixelFormat32bppPBGRA</span><span class="sxs-lookup"><span data-stu-id="9f0e7-224">GUID\_WICPixelFormat32bppPBGRA</span></span>          |
| <span data-ttu-id="9f0e7-225">Как можно выше</span><span class="sxs-lookup"><span data-stu-id="9f0e7-225">As high as possible</span></span> | <span data-ttu-id="9f0e7-226">> 8 бит на канал</span><span class="sxs-lookup"><span data-stu-id="9f0e7-226">> 8 bits per channel</span></span>       | <span data-ttu-id="9f0e7-227">Порядок каналов RGBA, предварительно умноженный альфа-канал</span><span class="sxs-lookup"><span data-stu-id="9f0e7-227">RGBA channel order, premultiplied alpha</span></span> |



 

<span data-ttu-id="9f0e7-228">Так как многие форматы изображений поддерживают несколько уровней точности, следует использовать [**IWICBitmapSource:: жетпикселформат**](/windows/desktop/wic/-wic-codec-iwicbitmapsource-getpixelformat-proxy) для получения собственного формата пикселей Image s, а затем использовать [**ивикпикселформатинфо**](/windows/desktop/api/wincodec/nn-wincodec-iwicpixelformatinfo) , чтобы определить, сколько бит на канал точности для этого формата доступно.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-228">Because many image formats support multiple levels of precision, you should use [**IWICBitmapSource::GetPixelFormat**](/windows/desktop/wic/-wic-codec-iwicbitmapsource-getpixelformat-proxy) to obtain the image s native pixel format, and then use [**IWICPixelFormatInfo**](/windows/desktop/api/wincodec/nn-wincodec-iwicpixelformatinfo) to determine how many bits per channel of precision are available for that format.</span></span> <span data-ttu-id="9f0e7-229">Кроме того, обратите внимание, что не все оборудование поддерживает форматы пикселей высокой точности.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-229">Also, note that not all hardware supports high precision pixel formats.</span></span> <span data-ttu-id="9f0e7-230">В таких случаях приложению может потребоваться вернуться на устройство деформации, чтобы обеспечить высокую точность.</span><span class="sxs-lookup"><span data-stu-id="9f0e7-230">In those cases your app may need to fall back to the WARP device to support high precision.</span></span>

## <a name="requirements"></a><span data-ttu-id="9f0e7-231">Требования</span><span class="sxs-lookup"><span data-stu-id="9f0e7-231">Requirements</span></span>



| <span data-ttu-id="9f0e7-232">Требование</span><span class="sxs-lookup"><span data-stu-id="9f0e7-232">Requirement</span></span> | <span data-ttu-id="9f0e7-233">Значение</span><span class="sxs-lookup"><span data-stu-id="9f0e7-233">Value</span></span> |
|--------------------------|------------------------------------------------------------------------------------|
| <span data-ttu-id="9f0e7-234">Минимальная версия клиента</span><span class="sxs-lookup"><span data-stu-id="9f0e7-234">Minimum supported client</span></span> | <span data-ttu-id="9f0e7-235">Windows 8 и обновление платформы для \[ классических приложений Windows 7 \| приложения для Магазина Windows\]</span><span class="sxs-lookup"><span data-stu-id="9f0e7-235">Windows 8 and Platform Update for Windows 7 \[desktop apps \| Windows Store apps\]</span></span> |
| <span data-ttu-id="9f0e7-236">Минимальная версия сервера</span><span class="sxs-lookup"><span data-stu-id="9f0e7-236">Minimum supported server</span></span> | <span data-ttu-id="9f0e7-237">Windows 8 и обновление платформы для \[ классических приложений Windows 7 \| приложения для Магазина Windows\]</span><span class="sxs-lookup"><span data-stu-id="9f0e7-237">Windows 8 and Platform Update for Windows 7 \[desktop apps \| Windows Store apps\]</span></span> |
| <span data-ttu-id="9f0e7-238">Header</span><span class="sxs-lookup"><span data-stu-id="9f0e7-238">Header</span></span>                   | <span data-ttu-id="9f0e7-239">d2d1effects. h</span><span class="sxs-lookup"><span data-stu-id="9f0e7-239">d2d1effects.h</span></span>                                                                      |
| <span data-ttu-id="9f0e7-240">Библиотека</span><span class="sxs-lookup"><span data-stu-id="9f0e7-240">Library</span></span>                  | <span data-ttu-id="9f0e7-241">D2D1. lib, дксгуид. lib</span><span class="sxs-lookup"><span data-stu-id="9f0e7-241">d2d1.lib, dxguid.lib</span></span>                                                               |



 

## <a name="related-topics"></a><span data-ttu-id="9f0e7-242">См. также</span><span class="sxs-lookup"><span data-stu-id="9f0e7-242">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="9f0e7-243">**ID2D1Effect**</span><span class="sxs-lookup"><span data-stu-id="9f0e7-243">**ID2D1Effect**</span></span>](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1effect)
</dt> </dl>

 

