---
title: Обзор API Direct2D
description: Содержит общие сведения об объектной модели Direct2D.
ms.assetid: b1362ef6-40fc-4fa5-ba5b-22c622c39f04
keywords:
- Direct2D, о программе
- Direct2D, файлы заголовков
- Direct2D, объектная модель
- Direct2D, интерфейсы
- Интерфейс ID2D1Factory
- Direct2D, целевые объекты отрисовки
- целевые объекты рендеринга, сведения
- Direct2D, команды рисования
- цели рендеринга, команды рисования
- Direct2D, обработка ошибок
- целевые объекты рендеринга, обработка ошибок
- обработку ошибок
- кисти
- целевые объекты рендеринга, кисти
- geometries
- Direct2D, геометрические объекты
- точечные рисунки для Direct2D
- Direct2D, точечные рисунки
- Primitives
- Direct2D, примитивы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 858d03f626fe337b174f074d7725dcb1a636b463
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "105681652"
---
# <a name="direct2d-api-overview"></a><span data-ttu-id="30490-123">Обзор API Direct2D</span><span class="sxs-lookup"><span data-stu-id="30490-123">Direct2D API Overview</span></span>

<span data-ttu-id="30490-124">Direct2D предоставляет API, аналогичный Direct3D, для использования с C или C++.</span><span class="sxs-lookup"><span data-stu-id="30490-124">Direct2D provides an API, similar to Direct3D, for use with C or C++.</span></span> <span data-ttu-id="30490-125">API предоставляет разнообразные функции, связанные с рисованием:</span><span class="sxs-lookup"><span data-stu-id="30490-125">The API exposes a variety of drawing-related functionality:</span></span>

-   <span data-ttu-id="30490-126">Целевые объекты отрисовки для отображения и вывода на экран с помощью Direct2D, Direct3D или GDI.</span><span class="sxs-lookup"><span data-stu-id="30490-126">Render targets for display and off-screen rendering using Direct2D, Direct3D, or GDI.</span></span>
-   <span data-ttu-id="30490-127">Объекты для управления состоянием рисования, такие как преобразования координатного пространства и режимы сглаживания.</span><span class="sxs-lookup"><span data-stu-id="30490-127">Objects for managing drawing state such as coordinate space transforms and antialiasing modes.</span></span>
-   <span data-ttu-id="30490-128">Представления геометрических данных и функции для обработки геометрии.</span><span class="sxs-lookup"><span data-stu-id="30490-128">Representations for geometric data, and functions for geometry processing.</span></span>
-   <span data-ttu-id="30490-129">Функции отрисовки для точечных рисунков, геометрических объектов и текста.</span><span class="sxs-lookup"><span data-stu-id="30490-129">Rendering functionality for bitmaps, geometries, and text.</span></span>
-   <span data-ttu-id="30490-130">Подготавливается к использованию графического содержимого, созданного с помощью GDI или Direct3D.</span><span class="sxs-lookup"><span data-stu-id="30490-130">Provisions for using graphical content created using GDI or Direct3D.</span></span>

<span data-ttu-id="30490-131">В этом разделе содержится обзор объектов, составляющих API Direct2D.</span><span class="sxs-lookup"><span data-stu-id="30490-131">This topic provides an overview of the objects that make up the Direct2D API.</span></span> <span data-ttu-id="30490-132">Он содержит следующие подразделы:</span><span class="sxs-lookup"><span data-stu-id="30490-132">It contains the following sections:</span></span>

-   [<span data-ttu-id="30490-133">Файлы заголовков Direct2D</span><span class="sxs-lookup"><span data-stu-id="30490-133">Direct2D Header Files</span></span>](#direct2d-header-files)
-   [<span data-ttu-id="30490-134">Интерфейсы Direct2D</span><span class="sxs-lookup"><span data-stu-id="30490-134">Direct2D Interfaces</span></span>](#direct2d-interfaces)
-   [<span data-ttu-id="30490-135">Интерфейс ID2D1Factory</span><span class="sxs-lookup"><span data-stu-id="30490-135">The ID2D1Factory Interface</span></span>](#the-id2d1factory-interface)
-   [<span data-ttu-id="30490-136">Целевые объекты рендеринга</span><span class="sxs-lookup"><span data-stu-id="30490-136">Render Targets</span></span>](#render-targets)
    -   [<span data-ttu-id="30490-137">Функции целевого объекта прорисовки</span><span class="sxs-lookup"><span data-stu-id="30490-137">Render Target Features</span></span>](#render-target-features)
    -   [<span data-ttu-id="30490-138">Целевые ресурсы рендеринга</span><span class="sxs-lookup"><span data-stu-id="30490-138">Render Target Resources</span></span>](#render-target-resources)
    -   [<span data-ttu-id="30490-139">Команды рисования</span><span class="sxs-lookup"><span data-stu-id="30490-139">Drawing Commands</span></span>](#drawing-commands)
    -   [<span data-ttu-id="30490-140">Обработка ошибок</span><span class="sxs-lookup"><span data-stu-id="30490-140">Error Handling</span></span>](#error-handling)
-   [<span data-ttu-id="30490-141">Рисование ресурсов</span><span class="sxs-lookup"><span data-stu-id="30490-141">Drawing Resources</span></span>](#drawing-resources)
    -   [<span data-ttu-id="30490-142">Кисти</span><span class="sxs-lookup"><span data-stu-id="30490-142">Brushes</span></span>](#brushes)
    -   [<span data-ttu-id="30490-143">Геометрические объекты</span><span class="sxs-lookup"><span data-stu-id="30490-143">Geometries</span></span>](#geometries)
    -   [<span data-ttu-id="30490-144">Растровые изображения</span><span class="sxs-lookup"><span data-stu-id="30490-144">Bitmaps</span></span>](#bitmaps)
-   [<span data-ttu-id="30490-145">Рисование текста</span><span class="sxs-lookup"><span data-stu-id="30490-145">Drawing Text</span></span>](#drawing-text)
-   [<span data-ttu-id="30490-146">Примитивы Direct2D</span><span class="sxs-lookup"><span data-stu-id="30490-146">Direct2D Primitives</span></span>](#direct2d-primitives)
-   [<span data-ttu-id="30490-147">См. также</span><span class="sxs-lookup"><span data-stu-id="30490-147">Related topics</span></span>](#related-topics)

## <a name="direct2d-header-files"></a><span data-ttu-id="30490-148">Файлы заголовков Direct2D</span><span class="sxs-lookup"><span data-stu-id="30490-148">Direct2D Header Files</span></span>

<span data-ttu-id="30490-149">API Direct2D определяется следующими файлами заголовков.</span><span class="sxs-lookup"><span data-stu-id="30490-149">The Direct2D API is defined by the following header files.</span></span>

| <span data-ttu-id="30490-150">Файл заголовка</span><span class="sxs-lookup"><span data-stu-id="30490-150">Header file</span></span>         | <span data-ttu-id="30490-151">Описание</span><span class="sxs-lookup"><span data-stu-id="30490-151">Description</span></span>                                                                                                                  |
|---------------------|------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="30490-152">D2D1. h</span><span class="sxs-lookup"><span data-stu-id="30490-152">d2d1.h</span></span>              | <span data-ttu-id="30490-153">Определяет версии первичного API Direct2D для C и C++.</span><span class="sxs-lookup"><span data-stu-id="30490-153">Defines C and C++ versions of the primary Direct2D API.</span></span>                                                                      |
| <span data-ttu-id="30490-154">d2d1helper. h</span><span class="sxs-lookup"><span data-stu-id="30490-154">d2d1helper.h</span></span>        | <span data-ttu-id="30490-155">Определяет вспомогательные функции, классы и структуры C++.</span><span class="sxs-lookup"><span data-stu-id="30490-155">Defines C++ helper functions, classes, and structures.</span></span>                                                                       |
| <span data-ttu-id="30490-156">d2dbasetypes. h</span><span class="sxs-lookup"><span data-stu-id="30490-156">d2dbasetypes.h</span></span>      | <span data-ttu-id="30490-157">Определяет примитивы рисования для Direct2D, такие как точки и прямоугольники.</span><span class="sxs-lookup"><span data-stu-id="30490-157">Defines drawing primitives for Direct2D, such as points and rectangles.</span></span> <span data-ttu-id="30490-158">Этот заголовок включен в D2D1. h.</span><span class="sxs-lookup"><span data-stu-id="30490-158">This header is included with d2d1.h.</span></span>                 |
| <span data-ttu-id="30490-159">d2derr. h</span><span class="sxs-lookup"><span data-stu-id="30490-159">d2derr.h</span></span>            | <span data-ttu-id="30490-160">Определяет коды ошибок для Direct2D.</span><span class="sxs-lookup"><span data-stu-id="30490-160">Defines the error codes for Direct2D.</span></span> <span data-ttu-id="30490-161">Этот заголовок включен в D2D1. h.</span><span class="sxs-lookup"><span data-stu-id="30490-161">This header is included with d2d1.h.</span></span>                                                   |
| <span data-ttu-id="30490-162">D2D1 \_ 1. h</span><span class="sxs-lookup"><span data-stu-id="30490-162">d2d1\_1.h</span></span>           | <span data-ttu-id="30490-163">Определяет версии языка C и C++ основного API Direct2D для Windows 8 и более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="30490-163">Defines C and C++ versions of the primary Direct2D API for Windows 8 and later.</span></span>                                              |
| <span data-ttu-id="30490-164">D2D1 \_ 1helper. h</span><span class="sxs-lookup"><span data-stu-id="30490-164">d2d1\_1helper.h</span></span>     | <span data-ttu-id="30490-165">Определяет вспомогательные функции, классы и структуры C++ для Windows 8 и более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="30490-165">Defines C++ helper functions, classes, and structures for Windows 8 and later.</span></span>                                               |
| <span data-ttu-id="30490-166">d2d1effects. h</span><span class="sxs-lookup"><span data-stu-id="30490-166">d2d1effects.h</span></span>       | <span data-ttu-id="30490-167">Определяет версии эффектов образа в C и C++ части API Direct2D для Windows 8 и более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="30490-167">Defines C and C++ versions of the image effects part of the Direct2D API for Windows 8 and later.</span></span>                            |
| <span data-ttu-id="30490-168">d2d1effecthelpers. h</span><span class="sxs-lookup"><span data-stu-id="30490-168">d2d1effecthelpers.h</span></span> | <span data-ttu-id="30490-169">Определяет вспомогательные функции C++, классы и структуры для эффектов изображения части API Direct2D для Windows 8 и более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="30490-169">Defines C++ helper functions, classes, and structures of the image effects part of the Direct2D API for Windows 8 and later.</span></span> |



 

<span data-ttu-id="30490-170">Чтобы использовать Direct2D, приложение должно включать заголовочный файл D2D1. h.</span><span class="sxs-lookup"><span data-stu-id="30490-170">To use Direct2D, your application should include the d2d1.h header file.</span></span>

<span data-ttu-id="30490-171">Чтобы скомпилировать приложение Direct2D, добавьте D2D1. lib в список библиотек.</span><span class="sxs-lookup"><span data-stu-id="30490-171">To compile a Direct2D application, add d2d1.lib to the list of libraries.</span></span> <span data-ttu-id="30490-172">В [пакете средств разработки программного обеспечения (SDK) для Windows 7](https://msdn.microsoft.com/windows/bb980924.aspx)можно найти D2D1. h и D2D1. lib.</span><span class="sxs-lookup"><span data-stu-id="30490-172">You can find d2d1.h and d2d1.lib in [Windows Software Development Kit (SDK) for Windows 7](https://msdn.microsoft.com/windows/bb980924.aspx).</span></span>

<span data-ttu-id="30490-173">В следующих разделах описываются некоторые из распространенных интерфейсов, предоставляемых API Direct2D.</span><span class="sxs-lookup"><span data-stu-id="30490-173">The following sections describe some of the common interfaces provided by the Direct2D API.</span></span>

## <a name="direct2d-interfaces"></a><span data-ttu-id="30490-174">Интерфейсы Direct2D</span><span class="sxs-lookup"><span data-stu-id="30490-174">Direct2D Interfaces</span></span>

<span data-ttu-id="30490-175">В корне API Direct2D находятся интерфейсы [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory) и [**ID2D1Resource**](/windows/win32/api/d2d1/nn-d2d1-id2d1resource) .</span><span class="sxs-lookup"><span data-stu-id="30490-175">At the root of the Direct2D API are the [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory) and [**ID2D1Resource**](/windows/win32/api/d2d1/nn-d2d1-id2d1resource) interfaces.</span></span> <span data-ttu-id="30490-176">Объект **ID2D1Factory** создает объекты **ID2D1Resource** и служит отправной точкой для использования Direct2D.</span><span class="sxs-lookup"><span data-stu-id="30490-176">An **ID2D1Factory** object creates **ID2D1Resource** objects and serves as the starting point for using Direct2D.</span></span> <span data-ttu-id="30490-177">Все остальные объекты Direct2D наследуются от интерфейса **ID2D1Resource** .</span><span class="sxs-lookup"><span data-stu-id="30490-177">All other Direct2D objects inherit from the **ID2D1Resource** interface.</span></span> <span data-ttu-id="30490-178">Существует два типа ресурсов Direct2D: независимые от устройства ресурсы и ресурсы, зависящие от устройства.</span><span class="sxs-lookup"><span data-stu-id="30490-178">There are two types of Direct2D resources: device-independent resources and device-dependent resources.</span></span>

-   <span data-ttu-id="30490-179">Ресурсы, независимые от устройства, не связаны с конкретным устройством отрисовки и могут сохраняться в течение всего времени существования приложения.</span><span class="sxs-lookup"><span data-stu-id="30490-179">Device-independent resources are not associated with a particular rendering device and can persist for the life of an application.</span></span>
-   <span data-ttu-id="30490-180">Ресурсы, зависящие от устройства, связаны с конкретным устройством отрисовки и перестают функционировать, если это устройство будет удалено.</span><span class="sxs-lookup"><span data-stu-id="30490-180">Device-dependent resources are associated with a particular rendering device and cease to function if that device is removed.</span></span>

<span data-ttu-id="30490-181">(Дополнительные сведения о ресурсах и общем доступе к ресурсам см. в разделе [Общие сведения](resources-and-resource-domains.md)о ресурсах.)</span><span class="sxs-lookup"><span data-stu-id="30490-181">(For more information about resources and resource sharing, see the [Resources Overview](resources-and-resource-domains.md).)</span></span>

## <a name="the-id2d1factory-interface"></a><span data-ttu-id="30490-182">Интерфейс ID2D1Factory</span><span class="sxs-lookup"><span data-stu-id="30490-182">The ID2D1Factory Interface</span></span>

<span data-ttu-id="30490-183">Интерфейс [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory) является отправной точкой для использования Direct2D.</span><span class="sxs-lookup"><span data-stu-id="30490-183">The [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory) interface is the starting point for using Direct2D.</span></span> <span data-ttu-id="30490-184">Для создания экземпляров ресурсов Direct2D используется **ID2D1Factory** .</span><span class="sxs-lookup"><span data-stu-id="30490-184">You use an **ID2D1Factory** to instantiate Direct2D resources.</span></span> <span data-ttu-id="30490-185">Чтобы создать ID2D1Factory, используйте один из методов [**CreateFactory**](/windows/win32/api/d2d1/nf-d2d1-d2d1createfactory) .</span><span class="sxs-lookup"><span data-stu-id="30490-185">To create an ID2D1Factory, you use one of the [**CreateFactory**](/windows/win32/api/d2d1/nf-d2d1-d2d1createfactory) methods.</span></span>

<span data-ttu-id="30490-186">Фабрика определяет набор методов создания *ресурсов* , которые могут создавать следующие ресурсы для рисования:</span><span class="sxs-lookup"><span data-stu-id="30490-186">A factory defines a set of Create *Resource* methods that can produce the following drawing resources:</span></span>

-   <span data-ttu-id="30490-187">Целевые объекты отрисовки — это объекты, которые визуализируют команды рисования.</span><span class="sxs-lookup"><span data-stu-id="30490-187">Render targets are objects that render drawing commands.</span></span>
-   <span data-ttu-id="30490-188">Блоки состояния рисования — это объекты, хранящие сведения о состоянии прорисовки, такие как текущее преобразование и режим сглаживания.</span><span class="sxs-lookup"><span data-stu-id="30490-188">Drawing state blocks are objects that store drawing state information, such as the current transformation and antialiasing mode.</span></span>
-   <span data-ttu-id="30490-189">Геометрические объекты представляют простые и потенциально сложные фигуры.</span><span class="sxs-lookup"><span data-stu-id="30490-189">Geometries are objects that represent simple and potentially complex shapes.</span></span>

<span data-ttu-id="30490-190">Одним из наиболее полезных объектов, которые может создать фабрика, является [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget), описанный в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="30490-190">One of the most useful objects a factory can create is the [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget), described in the following section.</span></span>

## <a name="render-targets"></a><span data-ttu-id="30490-191">Целевые объекты рендеринга</span><span class="sxs-lookup"><span data-stu-id="30490-191">Render Targets</span></span>

<span data-ttu-id="30490-192">Целевой объект отрисовки — это ресурс, который наследует от интерфейса [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) .</span><span class="sxs-lookup"><span data-stu-id="30490-192">A render target is a resource that inherits from the [**ID2D1RenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget) interface.</span></span> <span data-ttu-id="30490-193">Целевой объект прорисовки создает ресурсы для рисования и выполнения операций рисования.</span><span class="sxs-lookup"><span data-stu-id="30490-193">A render target creates resources for drawing and performs drawing operations.</span></span> <span data-ttu-id="30490-194">Существует несколько видов целевых объектов отрисовки, которые можно использовать для визуализации графики следующими способами.</span><span class="sxs-lookup"><span data-stu-id="30490-194">There are several kinds of render targets that can be used to render graphics in the following ways:</span></span>

-   <span data-ttu-id="30490-195">Объекты [**ID2D1HwndRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1hwndrendertarget) отображают содержимое в окне.</span><span class="sxs-lookup"><span data-stu-id="30490-195">[**ID2D1HwndRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1hwndrendertarget) objects render content to a window.</span></span>
-   <span data-ttu-id="30490-196">Объекты [**ID2D1DCRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1dcrendertarget) отрисовывается в контексте устройства GDI.</span><span class="sxs-lookup"><span data-stu-id="30490-196">[**ID2D1DCRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1dcrendertarget) objects render to a GDI device context.</span></span>
-   <span data-ttu-id="30490-197">Целевые объекты прорисовки растрового изображения отображают содержимое на экран, расположенный на экране.</span><span class="sxs-lookup"><span data-stu-id="30490-197">Bitmap render target objects render content to an off-screen bitmap.</span></span>
-   <span data-ttu-id="30490-198">Объекты для визуализации объекта DXGI визуализируются на поверхности DXGI для использования с Direct3D.</span><span class="sxs-lookup"><span data-stu-id="30490-198">DXGI render target objects render to a DXGI surface for use with Direct3D.</span></span>

<span data-ttu-id="30490-199">Так как целевой объект прорисовки связан с конкретным устройством отрисовки, это ресурс, зависящий от устройства, и прекращает работу при удалении устройства.</span><span class="sxs-lookup"><span data-stu-id="30490-199">Because a render target is associated with a particular rendering device, it is a device-dependent resource and ceases to function if the device is removed.</span></span>

### <a name="render-target-features"></a><span data-ttu-id="30490-200">Функции целевого объекта прорисовки</span><span class="sxs-lookup"><span data-stu-id="30490-200">Render Target Features</span></span>

<span data-ttu-id="30490-201">Можно указать, должен ли целевой объект прорисовки использовать аппаратное ускорение и должна ли отображаться удаленное отображение на локальном или удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="30490-201">You can specify whether a render target should use hardware acceleration and whether remote display should be rendered by the local or remote computer.</span></span> <span data-ttu-id="30490-202">Целевые объекты отрисовки могут быть настроены для отрисовки с псевдонимами или сглаженными.</span><span class="sxs-lookup"><span data-stu-id="30490-202">Render targets can be set up for aliased or antialiased rendering.</span></span> <span data-ttu-id="30490-203">Для визуализации сцен с большим количеством примитивов разработчик может также визуализировать плоскую графику в режиме с псевдонимами и использовать многовыборочную раскрывающий сглаживание для достижения большей масштабируемости.</span><span class="sxs-lookup"><span data-stu-id="30490-203">For rendering scenes with a large number of primitives, a developer can also render 2-D graphics in aliased mode and use D3D multisample antialiasing to achieve greater scalability.</span></span>

<span data-ttu-id="30490-204">Целевые объекты рендеринга также могут группировать операции рисования в слои, представленные интерфейсом [**ID2D1Layer**](/windows/win32/api/d2d1/nn-d2d1-id2d1layer) .</span><span class="sxs-lookup"><span data-stu-id="30490-204">Render targets can also group drawing operations into layers that are represented by the [**ID2D1Layer**](/windows/win32/api/d2d1/nn-d2d1-id2d1layer) interface.</span></span> <span data-ttu-id="30490-205">Слои удобно использовать для сбора операций рисования, объединяемых вместе при отрисовке кадра.</span><span class="sxs-lookup"><span data-stu-id="30490-205">Layers are useful for collecting drawing operations to be composited together when rendering a frame.</span></span> <span data-ttu-id="30490-206">В некоторых сценариях это может быть полезной альтернативой для подготовки к просмотру целевого объекта прорисовки изображения, а затем повторного использования содержимого растрового изображения, так как затраты на распределение для уровней ниже, чем для [**ID2D1BitmapRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmaprendertarget).</span><span class="sxs-lookup"><span data-stu-id="30490-206">For some scenarios, this can be a useful alternative to rendering to a bitmap render target, and then reusing the bitmap contents, as allocation costs for layering are lower than for an [**ID2D1BitmapRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmaprendertarget).</span></span>

<span data-ttu-id="30490-207">Целевые объекты рендеринга могут создавать новые объекты рендеринга, совместимые с самими, что полезно для промежуточного отображения на экране, сохраняя различные свойства целевого объекта рендеринга, установленные в исходном объекте.</span><span class="sxs-lookup"><span data-stu-id="30490-207">Render targets can create new render targets that are compatible with themselves, which is useful for intermediate off-screen rendering while retaining the various render-target properties that were set on the original.</span></span>

<span data-ttu-id="30490-208">Также можно выполнить отрисовку с помощью GDI для целевого объекта отрисовки Direct2D, вызвав [**QueryInterface**](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)) в целевом объекте прорисовки для [**ID2D1GdiInteropRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1gdiinteroprendertarget), который содержит методы [**GetDC**](/windows/win32/api/d2d1/nf-d2d1-id2d1gdiinteroprendertarget-getdc) и [**релеаседк**](/windows/win32/api/d2d1/nf-d2d1-id2d1gdiinteroprendertarget-releasedc) , которые можно использовать для получения контекста устройства GDI.</span><span class="sxs-lookup"><span data-stu-id="30490-208">It is also possible to render using GDI on a Direct2D render target by calling [**QueryInterface**](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)) on a render target for [**ID2D1GdiInteropRenderTarget**](/windows/win32/api/d2d1/nn-d2d1-id2d1gdiinteroprendertarget), which has [**GetDC**](/windows/win32/api/d2d1/nf-d2d1-id2d1gdiinteroprendertarget-getdc) and [**ReleaseDC**](/windows/win32/api/d2d1/nf-d2d1-id2d1gdiinteroprendertarget-releasedc) methods on it that can be used to retrieve a GDI device context.</span></span> <span data-ttu-id="30490-209">Отрисовка через GDI возможна только в том случае, если целевой объект прорисовки был создан с установленным флагом [**D2D1 \_ рендеринга, \_ \_ \_ \_ совместимым с GDI**](/windows/win32/api/d2d1/ne-d2d1-d2d1_render_target_usage) .</span><span class="sxs-lookup"><span data-stu-id="30490-209">Rendering via GDI is possible only if the render target was created with the [**D2D1\_RENDER\_TARGET\_USAGE\_GDI\_COMPATIBLE**](/windows/win32/api/d2d1/ne-d2d1-d2d1_render_target_usage) flag set.</span></span> <span data-ttu-id="30490-210">Это полезно для приложений, которые в основном отображаются с помощью Direct2D, но имеют модель расширяемости или другое устаревшее содержимое, которое требует возможности отображения с помощью GDI.</span><span class="sxs-lookup"><span data-stu-id="30490-210">This is useful for applications that primarily render with Direct2D but have an extensibility model or other legacy content that requires the ability to render with GDI.</span></span> <span data-ttu-id="30490-211">Дополнительные сведения см. в статье [Общие сведения о взаимодействии Direct2D и GDI](direct2d-and-gdi-interoperation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="30490-211">For more information, see the [Direct2D and GDI Interoperability Overview](direct2d-and-gdi-interoperation-overview.md).</span></span>

### <a name="render-target-resources"></a><span data-ttu-id="30490-212">Целевые ресурсы рендеринга</span><span class="sxs-lookup"><span data-stu-id="30490-212">Render Target Resources</span></span>

<span data-ttu-id="30490-213">Как и в случае с фабрикой, целевой объект отрисовки может создавать ресурсы рисования.</span><span class="sxs-lookup"><span data-stu-id="30490-213">Like a factory, a render target can create drawing resources.</span></span> <span data-ttu-id="30490-214">Все ресурсы, созданные целевым объектом рендеринга, — это ресурсы, зависящие от устройства (как и в целевом объекте прорисовки).</span><span class="sxs-lookup"><span data-stu-id="30490-214">Any resources created by a render target are device-dependent resources (just like the render target).</span></span> <span data-ttu-id="30490-215">Целевой объект прорисовки может создавать ресурсы следующих типов:</span><span class="sxs-lookup"><span data-stu-id="30490-215">A render target can create the following types of resources:</span></span>

-   <span data-ttu-id="30490-216">Растровые изображения</span><span class="sxs-lookup"><span data-stu-id="30490-216">Bitmaps</span></span>
-   <span data-ttu-id="30490-217">Кисти</span><span class="sxs-lookup"><span data-stu-id="30490-217">Brushes</span></span>
-   <span data-ttu-id="30490-218">Слои</span><span class="sxs-lookup"><span data-stu-id="30490-218">Layers</span></span>
-   <span data-ttu-id="30490-219">Сетки</span><span class="sxs-lookup"><span data-stu-id="30490-219">Meshes</span></span>

### <a name="drawing-commands"></a><span data-ttu-id="30490-220">Команды рисования</span><span class="sxs-lookup"><span data-stu-id="30490-220">Drawing Commands</span></span>

<span data-ttu-id="30490-221">Для отображения содержимого используются методы рисования целевого объекта рендеринга.</span><span class="sxs-lookup"><span data-stu-id="30490-221">To render content, you use the render target drawing methods.</span></span> <span data-ttu-id="30490-222">Перед началом рисования вызовите метод [**ID2D1RenderTarget:: бегиндрав**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-begindraw) .</span><span class="sxs-lookup"><span data-stu-id="30490-222">Before you begin drawing, you call the [**ID2D1RenderTarget::BeginDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-begindraw) method.</span></span> <span data-ttu-id="30490-223">После завершения рисования вызовите метод [**ID2D1RenderTarget:: EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw) .</span><span class="sxs-lookup"><span data-stu-id="30490-223">After you finished drawing, you call the [**ID2D1RenderTarget::EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw) method.</span></span> <span data-ttu-id="30490-224">Между этими вызовами используются методы рисования и заливки для отрисовки ресурсов рисования.</span><span class="sxs-lookup"><span data-stu-id="30490-224">In between these calls, you use Draw and Fill methods to render drawing resources.</span></span> <span data-ttu-id="30490-225">Большинство методов рисования и заливки принимают фигуру (либо примитив, либо геометрию) и кисть для заполнения или структурирования фигуры.</span><span class="sxs-lookup"><span data-stu-id="30490-225">Most Draw and Fill methods take a shape (either a primitive or a geometry) and a brush for filling or outlining the shape.</span></span>

<span data-ttu-id="30490-226">Целевые объекты рендеринга также предоставляют методы для обрезки, применения масок непрозрачности и преобразования пространства координат.</span><span class="sxs-lookup"><span data-stu-id="30490-226">Render targets also provide methods for clipping, applying opacity masks, and transforming the coordinate space.</span></span>

<span data-ttu-id="30490-227">Direct2D использует левую систему координат: положительные значения оси x откладываются вправо, а положительные значения оси y — сверху вниз.</span><span class="sxs-lookup"><span data-stu-id="30490-227">Direct2D uses a left-handed coordinate system: positive x-axis values proceed to the right and positive y-axis values proceed downward.</span></span>

### <a name="error-handling"></a><span data-ttu-id="30490-228">Обработка ошибок</span><span class="sxs-lookup"><span data-stu-id="30490-228">Error Handling</span></span>

<span data-ttu-id="30490-229">Команды прорисовки целевого объекта не указывают, была ли запрошенная операция успешной.</span><span class="sxs-lookup"><span data-stu-id="30490-229">Render target drawing commands do not indicate whether the requested operation was successful.</span></span> <span data-ttu-id="30490-230">Чтобы определить, возникали ли ошибки при прорисовке, вызовите метод [**flush**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-flush) целевого объекта Render или метод [**EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw) для получения **значения HRESULT**.</span><span class="sxs-lookup"><span data-stu-id="30490-230">To find out whether there were drawing errors, call the render target [**Flush**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-flush) method or [**EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw) method to obtain an **HRESULT**.</span></span>

## <a name="drawing-resources"></a><span data-ttu-id="30490-231">Рисование ресурсов</span><span class="sxs-lookup"><span data-stu-id="30490-231">Drawing Resources</span></span>

<span data-ttu-id="30490-232">В следующих разделах описываются некоторые ресурсы, которые можно создать с помощью целевого объекта рендеринга и интерфейсов фабрики.</span><span class="sxs-lookup"><span data-stu-id="30490-232">The following sections describe some of the resources that can be created by the render target and factory interfaces.</span></span>

### <a name="brushes"></a><span data-ttu-id="30490-233">Кисти</span><span class="sxs-lookup"><span data-stu-id="30490-233">Brushes</span></span>

<span data-ttu-id="30490-234">Кисть, представленная интерфейсом [**ID2D1Brush**](/windows/win32/api/d2d1/nn-d2d1-id2d1brush) , является ресурсом, зависимым от устройства, созданным целевым объектом отрисовки, который закрашивает область с выходными данными.</span><span class="sxs-lookup"><span data-stu-id="30490-234">A brush, represented by the [**ID2D1Brush**](/windows/win32/api/d2d1/nn-d2d1-id2d1brush) interface, is a device-dependent resource, created by a render target, that paints an area with its output.</span></span> <span data-ttu-id="30490-235">Разные кисти имеют различные типы выводимых данных.</span><span class="sxs-lookup"><span data-stu-id="30490-235">Different brushes have different types of output.</span></span> <span data-ttu-id="30490-236">Некоторые кисти закрашивать область сплошным цветом, другими — градиентом или изображением.</span><span class="sxs-lookup"><span data-stu-id="30490-236">Some brushes paint an area with a solid color, others with a gradient or an image.</span></span> <span data-ttu-id="30490-237">Direct2D предоставляет четыре типа кистей:</span><span class="sxs-lookup"><span data-stu-id="30490-237">Direct2D provides four types of brushes:</span></span>

-   <span data-ttu-id="30490-238">[**ID2D1SolidColorBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1solidcolorbrush) закрашивает область сплошным цветом.</span><span class="sxs-lookup"><span data-stu-id="30490-238">[**ID2D1SolidColorBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1solidcolorbrush) paints an area with a solid color.</span></span>
-   <span data-ttu-id="30490-239">[**ID2D1LinearGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1lineargradientbrush) заполняет область линейным градиентом, который смешивает два или более цвета в линии, оси градиента.</span><span class="sxs-lookup"><span data-stu-id="30490-239">[**ID2D1LinearGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1lineargradientbrush) paints an area with a linear gradient that blends two or more colors across a line, the gradient axis.</span></span>
-   <span data-ttu-id="30490-240">[**ID2D1RadialGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1radialgradientbrush) закрашивает область с радиальным градиентом, который смешивает два или более цветов вокруг эллипса.</span><span class="sxs-lookup"><span data-stu-id="30490-240">[**ID2D1RadialGradientBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1radialgradientbrush) paints an area with a radial gradient that blends two or more colors around an ellipse.</span></span>
-   <span data-ttu-id="30490-241">[**ID2D1BitmapBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmapbrush) закрашивает область с растровым изображением.</span><span class="sxs-lookup"><span data-stu-id="30490-241">[**ID2D1BitmapBrush**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmapbrush) paints an area with a bitmap.</span></span>

<span data-ttu-id="30490-242">Чтобы создать кисть, используйте один из методов [**ID2D1RenderTarget::**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget)Create *<Type>* Brush, например [**креатерадиалградиентбруш**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createradialgradientbrush(constd2d1_radial_gradient_brush_properties__constd2d1_brush_properties__id2d1gradientstopcollection_id2d1radialgradientbrush)).</span><span class="sxs-lookup"><span data-stu-id="30490-242">To create a brush, you use one of the [**ID2D1RenderTarget::**](/windows/win32/api/d2d1/nn-d2d1-id2d1rendertarget)Create *<Type>* Brush methods, such as [**CreateRadialGradientBrush**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createradialgradientbrush(constd2d1_radial_gradient_brush_properties__constd2d1_brush_properties__id2d1gradientstopcollection_id2d1radialgradientbrush)).</span></span> <span data-ttu-id="30490-243">Кисти можно использовать с целевыми методами прорисовки и заливки, чтобы закрасить штрих или контур фигуры либо как маску непрозрачности.</span><span class="sxs-lookup"><span data-stu-id="30490-243">Brushes can be used with a render target Draw and Fill methods, either to paint a shape stroke or outline, or as an opacity mask.</span></span>

<span data-ttu-id="30490-244">Дополнительные сведения о кистях см. в разделе [Общие сведения о кистях](direct2d-brushes-overview.md).</span><span class="sxs-lookup"><span data-stu-id="30490-244">For more information about brushes, see the [Brushes Overview](direct2d-brushes-overview.md).</span></span>

### <a name="geometries"></a><span data-ttu-id="30490-245">Геометрия</span><span class="sxs-lookup"><span data-stu-id="30490-245">Geometries</span></span>

<span data-ttu-id="30490-246">В дополнение к основным примитивам рисования, таким как точки, прямоугольники и эллипсы, Direct2D предоставляет интерфейс [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) для описания простых и сложных фигур.</span><span class="sxs-lookup"><span data-stu-id="30490-246">In addition to basic drawing primitives such as points, rectangles, and ellipses, Direct2D provides the [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) interface for describing simple and complex shapes.</span></span> <span data-ttu-id="30490-247">Интерфейсы, наследующие от **ID2D1Geometry** , определяют различные типы фигур, например [**ID2D1RectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1rectanglegeometry) для представления прямоугольников, [**ID2D1RoundedRectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1roundedrectanglegeometry) для представления скругленных прямоугольников и [**ID2D1EllipseGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1ellipsegeometry) для представления эллипсов.</span><span class="sxs-lookup"><span data-stu-id="30490-247">Interfaces that inherit from **ID2D1Geometry** define different types of shapes, such as [**ID2D1RectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1rectanglegeometry) for representing rectangles, [**ID2D1RoundedRectangleGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1roundedrectanglegeometry) for representing rounded rectangles, and [**ID2D1EllipseGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1ellipsegeometry) for representing ellipses.</span></span>

<span data-ttu-id="30490-248">Более сложные фигуры можно создавать с помощью интерфейса [**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink) , чтобы указать ряд фигур, состоящих из линий, кривых и дуг.</span><span class="sxs-lookup"><span data-stu-id="30490-248">More complex shapes can be created by using the [**ID2D1GeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometrysink) interface to specify a series of figures composed of lines, curves, and arcs.</span></span> <span data-ttu-id="30490-249">**ID2D1GeometrySink** передается методу Open объекта [**ID2D1PathGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1pathgeometry) для создания сложной геометрии.</span><span class="sxs-lookup"><span data-stu-id="30490-249">The **ID2D1GeometrySink** is passed to the Open method of an [**ID2D1PathGeometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1pathgeometry) to generate a complex geometry.</span></span> <span data-ttu-id="30490-250">[**ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink) также можно использовать с API DirectWrite для извлечения контуров форматированного текста для художественной отрисовки.</span><span class="sxs-lookup"><span data-stu-id="30490-250">[**ID2D1SimplifiedGeometrySink**](/windows/win32/api/d2d1/nn-d2d1-id2d1simplifiedgeometrysink) can also be used with the DirectWrite API to extract path outlines of formatted text for artistic rendering.</span></span>

<span data-ttu-id="30490-251">Геометрические интерфейсы предоставляют методы для управления фигурами путем расширения или упрощения существующих геометрических объектов или путем создания пересечения или объединения нескольких геометрических объектов.</span><span class="sxs-lookup"><span data-stu-id="30490-251">The geometry interfaces provide methods for manipulating shapes by widening or simplifying existing geometries, or by generating the intersection or union of multiple geometries.</span></span> <span data-ttu-id="30490-252">Они также предоставляют методы для определения того, пересекаются геометрические или перекрывающиеся, извлекаются сведения о границах, выполняется вычисление области или длины геометрии и интерполяция расположений вдоль геометрии.</span><span class="sxs-lookup"><span data-stu-id="30490-252">They also provide methods for determining whether geometries are intersecting or overlapping, retrieving bounds information, computing the area or length of a geometry, and interpolating locations along a geometry.</span></span> <span data-ttu-id="30490-253">Direct2D также предоставляет возможность создания сетки треугольников, тесселяции из геометрии.</span><span class="sxs-lookup"><span data-stu-id="30490-253">Direct2D also provides the ability to create a mesh of triangles that is tessellated from a geometry.</span></span>

<span data-ttu-id="30490-254">Чтобы создать геометрию, используйте один из методов [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory):: Create *<Type>* Geometry, например [**креатепасжеометри**](/windows/win32/api/d2d1/nf-d2d1-id2d1factory-createpathgeometry).</span><span class="sxs-lookup"><span data-stu-id="30490-254">To create a geometry, you use one of the [**ID2D1Factory**](/windows/win32/api/d2d1/nn-d2d1-id2d1factory)::Create *<Type>* Geometry methods, such as [**CreatePathGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1factory-createpathgeometry).</span></span> <span data-ttu-id="30490-255">Геометрия является аппаратно-независимым ресурсом.</span><span class="sxs-lookup"><span data-stu-id="30490-255">A geometry is a device-independent resource.</span></span>

<span data-ttu-id="30490-256">Для визуализации геометрии используются методы [**DrawGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawgeometry) и [**филлжеометри**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-fillgeometry) целевого объекта прорисовки.</span><span class="sxs-lookup"><span data-stu-id="30490-256">To render a geometry, you use the [**DrawGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawgeometry) and [**FillGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-fillgeometry) methods of a render target.</span></span>

<span data-ttu-id="30490-257">Дополнительные сведения о геометрических элементах см. в [обзоре геометрических объектов](direct2d-geometries-overview.md).</span><span class="sxs-lookup"><span data-stu-id="30490-257">For more information about geometries, see the [Geometries Overview](direct2d-geometries-overview.md).</span></span>

### <a name="bitmaps"></a><span data-ttu-id="30490-258">Растровые изображения</span><span class="sxs-lookup"><span data-stu-id="30490-258">Bitmaps</span></span>

<span data-ttu-id="30490-259">Direct2D не предоставляет методы для загрузки или хранения растровых изображений. Вместо этого он позволяет создавать растровые изображения с помощью [компонента Windows Imaging Component (WIC)](../wic/-wic-about-windows-imaging-codec.md).</span><span class="sxs-lookup"><span data-stu-id="30490-259">Direct2D does not provide methods for loading or storing bitmaps; rather, it enables you to create bitmaps using the [Windows Imaging Component (WIC)](../wic/-wic-about-windows-imaging-codec.md).</span></span> <span data-ttu-id="30490-260">Ресурсы растрового изображения можно загрузить с помощью WIC, а затем использовать для создания [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) с помощью метода [**ID2D1RenderTarget:: креатебитмапфромвикбитмап**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createbitmapfromwicbitmap(iwicbitmapsource_constd2d1_bitmap_properties_id2d1bitmap)) .</span><span class="sxs-lookup"><span data-stu-id="30490-260">Bitmap resources can be loaded using WIC and then used to create an [**ID2D1Bitmap**](/windows/win32/api/d2d1/nn-d2d1-id2d1bitmap) through the [**ID2D1RenderTarget::CreateBitmapFromWicBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createbitmapfromwicbitmap(iwicbitmapsource_constd2d1_bitmap_properties_id2d1bitmap)) method.</span></span>

<span data-ttu-id="30490-261">Точечные рисунки можно также создавать из данных в памяти, которые были настроены с помощью других средств.</span><span class="sxs-lookup"><span data-stu-id="30490-261">Bitmaps can also be created from in-memory data that was set up through other means.</span></span> <span data-ttu-id="30490-262">После создания растрового изображения его можно изобразить с помощью метода [**дравбитмап**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawbitmap(id2d1bitmap_constd2d1_rect_f__float_d2d1_bitmap_interpolation_mode_constd2d1_rect_f_)) целевого объекта прорисовки или с помощью растровой кисти.</span><span class="sxs-lookup"><span data-stu-id="30490-262">After a bitmap has been created, it can be drawn by the render target [**DrawBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawbitmap(id2d1bitmap_constd2d1_rect_f__float_d2d1_bitmap_interpolation_mode_constd2d1_rect_f_)) method or with a bitmap brush.</span></span>

<span data-ttu-id="30490-263">Поскольку создание ресурсов точечного рисунка на аппаратных целевых объектах отрисовки часто является дорогостоящей операцией, Direct2D может обновить содержимое растрового изображения (или его части) с помощью методов [**копифромбитмап**](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrombitmap), [**копифромрендертаржет**](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfromrendertarget)и [**копифроммемори**](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrommemory) .</span><span class="sxs-lookup"><span data-stu-id="30490-263">Because creating bitmap resources on hardware render targets is often an expensive operation, Direct2D can update the contents of a bitmap (or portion of the bitmap) by using the [**CopyFromBitmap**](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrombitmap), [**CopyFromRenderTarget**](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfromrendertarget), and [**CopyFromMemory**](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrommemory) methods.</span></span> <span data-ttu-id="30490-264">Использование этих методов может привести к экономии затрат, связанных с выделением дополнительных текстур GPU.</span><span class="sxs-lookup"><span data-stu-id="30490-264">Using these methods can potentially save the costs associated with additional GPU texture allocations.</span></span>

## <a name="drawing-text"></a><span data-ttu-id="30490-265">Рисование текста</span><span class="sxs-lookup"><span data-stu-id="30490-265">Drawing Text</span></span>

<span data-ttu-id="30490-266">Direct2D был разработан для работы с текстовыми операциями нового API текста, DirectWrite.</span><span class="sxs-lookup"><span data-stu-id="30490-266">Direct2D was designed to work with the text operations of the new text API, DirectWrite.</span></span> <span data-ttu-id="30490-267">Чтобы упростить использование API DirectWrite, цели рендеринга предоставляют три метода для отрисовки DirectWrite текстовых ресурсов: [**DrawText**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtext(constwchar_uint32_idwritetextformat_constd2d1_rect_f__id2d1brush_d2d1_draw_text_options_dwrite_measuring_mode)), [**дравтекстлайаут**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout)и [**DrawGlyphRun**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawglyphrun).</span><span class="sxs-lookup"><span data-stu-id="30490-267">To make using the DirectWrite API simpler, render targets provide three methods for rendering DirectWrite text resources: [**DrawText**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtext(constwchar_uint32_idwritetextformat_constd2d1_rect_f__id2d1brush_d2d1_draw_text_options_dwrite_measuring_mode)), [**DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout), and [**DrawGlyphRun**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawglyphrun).</span></span> <span data-ttu-id="30490-268">Так как Direct2D использует GPU для процесса отрисовки текста ClearType, Direct2D обеспечивает более низкое использование ЦП, чем GDI для текстовых операций и улучшает масштабируемость, так как доступно больше вычислительных ресурсов GPU.</span><span class="sxs-lookup"><span data-stu-id="30490-268">Because Direct2D uses the GPU for the ClearType text rendering process, Direct2D provides lower CPU usage than GDI for text operations and better scalability as more GPU processing power is available.</span></span>

<span data-ttu-id="30490-269">[**ID2D1RenderTarget::D равтекст**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtext(constwchar_uint32_idwritetextformat_constd2d1_rect_f__id2d1brush_d2d1_draw_text_options_dwrite_measuring_mode)) предназначен для простейших сценариев, включающих визуализацию строки текста в Юникоде с минимальным форматированием.</span><span class="sxs-lookup"><span data-stu-id="30490-269">The [**ID2D1RenderTarget::DrawText**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtext(constwchar_uint32_idwritetextformat_constd2d1_rect_f__id2d1brush_d2d1_draw_text_options_dwrite_measuring_mode)) is designed for the simplest scenarios involving rendering a string of Unicode text with minimal formatting.</span></span> <span data-ttu-id="30490-270">Более сложная структура и типографская гибкость обеспечиваются с помощью метода [**ID2D1RenderTarget::D равтекстлайаут**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) , который использует объект [**идвритетекстлайаут**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) для указания содержимого и форматирования для подготовки к просмотру.</span><span class="sxs-lookup"><span data-stu-id="30490-270">More complex layout and typographic flexibility is provided through the [**ID2D1RenderTarget::DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) method, which uses an [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) object to specify the content and formatting to be rendered.</span></span> <span data-ttu-id="30490-271">**Идвритетекстлайаут** позволяет задать индивидуальное форматирование для подстрок текста и других расширенных типографских параметров.</span><span class="sxs-lookup"><span data-stu-id="30490-271">**IDWriteTextLayout** enables you to specify individual formatting for substrings of text and other advanced typography options.</span></span>

<span data-ttu-id="30490-272">Для сценариев, в которых требуется точный контроль макета на уровне глифов, метод [**ID2D1RenderTarget::D равглифрун**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawglyphrun) можно использовать в сочетании с возможностями измерения, предоставляемыми [DirectWrite](../directwrite/direct-write-portal.md).</span><span class="sxs-lookup"><span data-stu-id="30490-272">For scenarios where precise control of glyph-level layout is required, the [**ID2D1RenderTarget::DrawGlyphRun**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawglyphrun) method can be used in conjunction with the measurement facilities provided by [DirectWrite](../directwrite/direct-write-portal.md).</span></span>

<span data-ttu-id="30490-273">Чтобы использовать API DirectWrite, включите заголовок дврите. h.</span><span class="sxs-lookup"><span data-stu-id="30490-273">To use the DirectWrite API, include the dwrite.h header.</span></span> <span data-ttu-id="30490-274">Как и Direct2D, DirectWrite использует фабрику, [**идвритефактори**](/windows/win32/api/dwrite/nn-dwrite-idwritefactory) для создания текстовых объектов.</span><span class="sxs-lookup"><span data-stu-id="30490-274">Like Direct2D, DirectWrite uses a factory, [**IDWriteFactory**](/windows/win32/api/dwrite/nn-dwrite-idwritefactory) to create text objects.</span></span> <span data-ttu-id="30490-275">Используйте функцию [**двритекреатефактори**](/windows/win32/api/dwrite/nf-dwrite-dwritecreatefactory) для создания фабрики, а затем используйте ее методы Create для создания ресурсов DirectWrite (например, [**идвритетекстформат**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtext(constwchar_uint32_idwritetextformat_constd2d1_rect_f__id2d1brush_d2d1_draw_text_options_dwrite_measuring_mode))).</span><span class="sxs-lookup"><span data-stu-id="30490-275">Use the [**DWriteCreateFactory**](/windows/win32/api/dwrite/nf-dwrite-dwritecreatefactory) function to create a factory, and then use its Create methods to create DirectWrite resources (such as [**IDWriteTextFormat**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtext(constwchar_uint32_idwritetextformat_constd2d1_rect_f__id2d1brush_d2d1_draw_text_options_dwrite_measuring_mode))).</span></span>

<span data-ttu-id="30490-276">Дополнительные сведения о DirectWrite см. в разделе [Введение в DirectWrite](../directwrite/introducing-directwrite.md) .</span><span class="sxs-lookup"><span data-stu-id="30490-276">For more information about DirectWrite, see the [Introducing DirectWrite](../directwrite/introducing-directwrite.md) topic.</span></span>

## <a name="direct2d-primitives"></a><span data-ttu-id="30490-277">Примитивы Direct2D</span><span class="sxs-lookup"><span data-stu-id="30490-277">Direct2D Primitives</span></span>

<span data-ttu-id="30490-278">Direct2D определяет набор примитивов, похожих на те, которые предоставляются другими API-интерфейсами рисования.</span><span class="sxs-lookup"><span data-stu-id="30490-278">Direct2D defines a set of primitives that are similar to those provided by other drawing APIs.</span></span> <span data-ttu-id="30490-279">Он предоставляет цветовую структуру, матрицу для выполнения преобразований, а также версии точек, прямоугольников, эллипсов и структур с плавающей запятой и целыми числами.</span><span class="sxs-lookup"><span data-stu-id="30490-279">It provides a color structure, a matrix structure for performing transformations, and floating-point and integer versions of points, rectangles, ellipses, and size structures.</span></span> <span data-ttu-id="30490-280">Обычно используются версии этих структур с плавающей запятой.</span><span class="sxs-lookup"><span data-stu-id="30490-280">Usually, you use the floating-point versions of these structures.</span></span>

<span data-ttu-id="30490-281">Вы не используете фабрику или целевой объект прорисовки для создания экземпляров примитивов Direct2D.</span><span class="sxs-lookup"><span data-stu-id="30490-281">You do not use a factory or a render target to instantiate Direct2D primitives.</span></span> <span data-ttu-id="30490-282">Вы можете создать их напрямую или использовать вспомогательные методы, определенные в d2d1helper. h, для их создания.</span><span class="sxs-lookup"><span data-stu-id="30490-282">You can create them directly, or use the helper methods defined in d2d1helper.h to create them.</span></span>

## <a name="related-topics"></a><span data-ttu-id="30490-283">См. также</span><span class="sxs-lookup"><span data-stu-id="30490-283">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="30490-284">Справочник по Direct2D</span><span class="sxs-lookup"><span data-stu-id="30490-284">Direct2D Reference</span></span>](reference.md)
</dt> <dt>

[<span data-ttu-id="30490-285">Пример Hello World DirectWrite</span><span class="sxs-lookup"><span data-stu-id="30490-285">DirectWrite Hello World Sample</span></span>](/samples/browse/?redirectedfrom=MSDN-samples)
</dt> <dt>

[<span data-ttu-id="30490-286">Знакомство с DirectWrite</span><span class="sxs-lookup"><span data-stu-id="30490-286">Introducing DirectWrite</span></span>](../directwrite/introducing-directwrite.md)
</dt> <dt>

[<span data-ttu-id="30490-287">Общие сведения о ресурсах</span><span class="sxs-lookup"><span data-stu-id="30490-287">Resources Overview</span></span>](resources-and-resource-domains.md)
</dt> <dt>

[<span data-ttu-id="30490-288">Компонент обработки изображений Windows (WIC)</span><span class="sxs-lookup"><span data-stu-id="30490-288">Windows Imaging Component (WIC)</span></span>](../wic/-wic-about-windows-imaging-codec.md)
</dt> </dl>

 

 