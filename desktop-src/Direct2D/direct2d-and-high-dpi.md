---
title: Direct2D и высокое разрешение
description: Описывает, как Direct2D поддерживает дисплеи с высоким разрешением.
ms.assetid: 1809ab0e-853f-4dac-be97-563c92b9caee
keywords:
- Direct2D, высокое разрешение DPI
- высокое разрешение DPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6548849416268f31b8b0c4a4261347c818ffa24c
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103987829"
---
# <a name="direct2d-and-high-dpi"></a>Direct2D и высокое разрешение

Написание приложения с поддержкой DPI является ключом к единообразному отображению пользовательского интерфейса в различных параметрах отображения с высоким разрешением. Приложение, которое не учитывает DPI, но работает на параметрах отображения с высоким разрешением, может пострадать от многих визуальных компонентов, включая неправильное масштабирование элементов пользовательского интерфейса, обрезанный текст и размытые изображения. Благодаря добавлению поддержки в приложении для разрешения DPI представление пользовательского интерфейса приложения становится более предсказуемым, что делает его более наглядным и удобочитаемым для пользователей. К счастью, Direct2D упрощает написание приложений, которые хорошо работают в высоком уровне DPI. В этом разделе содержатся следующие подразделы.

-   [Поддержка высокого разрешения в Direct2D](#high-dpi-support-in-direct2d)
-   [Windows 8 и высокое разрешение DPI](#windows-8-and-high-dpi)
-   [Что такое DIP?](#what-is-a-dip)
-   [См. также](#related-topics)

## <a name="high-dpi-support-in-direct2d"></a>Поддержка высокого разрешения в Direct2D

Direct2D предоставляет следующие возможности для работы с сценариями с высоким разрешением.

-   Он автоматически учитывает DPI системы при создании оконного целевого объекта отрисовки, если манифест приложения указывает, что приложение правильно обрабатывает DPI. (Сведения о том, как объявить, что приложение учитывает DPI, см. в разделе [как обеспечить правильное отображение приложения на дисплеях с высоким разрешением](how-to--size-a-window-properly-for-high-dpi-displays.md).)
-   Он выражает координаты в DIP (аппаратно-независимые пиксели), что позволяет приложению масштабироваться автоматически при изменении параметра DPI.
-   Он позволяет точечным рисункам иметь разрешение DPI и правильно масштабировать их, принимая во внимание DPI. Эта функция также может использоваться для сохранения значков с разными разрешениями.
-   Он выражает большинство ресурсов в DIP, что делает ресурсы автоматически независимыми от разрешения.
-   Он использует координатное пространство с плавающей запятой и сглаживание, поэтому любое содержимое может масштабироваться до любых произвольных точек на дюйм.

Графический конвейер Direct2D поддерживает масштабирование от 96 DPI до 1200DPI.

## <a name="windows-8-and-high-dpi"></a>Windows 8 и высокое разрешение DPI

Начиная с Windows 8, существуют дополнительные функции поддержки высокого DPI.

Если значение DPI контекста устройства достаточно велико, Direct2D изменяет пороговое значение, которое используется для включения вертикального сглаживания текста. Это приводит к ускоренной отрисовке текста на дисплеях с высоким разрешением. Кроме того, можно переключить режим единицы измерения на Пиксели вместо DIP с помощью метода [**ID2D1DeviceContext:: сетунитмоде**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-setunitmode) . Если установить режим единицы измерения в пикселях и в контекстном задании устройства dpi на экране, то оптимизация по-прежнему будет включена.

## <a name="what-is-a-dip"></a>Что такое DIP?

Аппаратно-независимый пиксель (DIP) — это логический пиксель, сопоставляемый с пикселами физического устройства с помощью скаляра, DPI. DPI соответствует точкам на дюйм, где точка обозначает физическую точку устройства. (Номенклатура поступает из печати, где точки — это наименьшая пунктирная точка, которую может создать процесс печати). Так как стандартный монитор используется для 96 точек на дюйм, DPI 96 означало, что аппаратно-независимый пиксель (или DIP) сопоставлено 1:1 с физическим пикселем. Например, если значение DPI \* равно 96 2 = 192, то один DIP будет охватывать два физических пикселя.

Существует множество причин, по которым приложения не обязательно правильно обрабатывают такое масштабирование. одной из простейших причин является то, что для обнаружения и использования этого скалярного значения при подготовке к просмотру требуется дополнительный объем работы. В Direct2D масштабирование применяется по умолчанию. Из-за этого сопоставления пикселы физического устройства могут оказаться в дробных координатах DIP, что является одной из причин того, почему Direct2D использует координатное пространство с плавающей запятой.

<dl> физический пиксель = (DIP x DPI)/96  
</dl>

Чтобы преобразовать физическую точку в DIP, используйте следующую формулу:

<dl> DIP = (физический пиксель × 96)/DPI  
</dl>

> [!Note]
>
> Начиная с Windows 8, можно переключить режим единицы измерения на Пиксели вместо DIP с помощью метода [**ID2D1DeviceContext:: сетунитмоде**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-setunitmode) .

 

## <a name="related-topics"></a>См. также

<dl> <dt>

[Как обеспечить правильное отображение приложения на дисплеях с высоким разрешением](how-to--size-a-window-properly-for-high-dpi-displays.md)
</dt> </dl>

 

 