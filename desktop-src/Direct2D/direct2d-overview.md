---
title: О Direct2D
description: Представляет Direct2D, API, который предоставляет разработчикам Win32 возможность выполнять двумерные задачи отрисовки графики с высокой производительностью и визуальным качеством.
ms.assetid: 05cc230e-6fec-4a15-8e28-c68397392fc5
keywords:
- Direct2D, о программе
- Direct2D, взаимодействие
- Direct2D, производительность
- Direct2D, доступность
- Direct2D, приложения
- взаимодействие, Direct2D
- производительность Direct2D
- доступность для Direct2D
- приложения для Direct2D
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 486c83b7a83ef82983e189977f9f99254b0a1977
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103987713"
---
# <a name="about-direct2d"></a><span data-ttu-id="b55a2-112">О Direct2D</span><span class="sxs-lookup"><span data-stu-id="b55a2-112">About Direct2D</span></span>

<span data-ttu-id="b55a2-113">В этом разделе описывается Direct2D, API, который предоставляет разработчикам Win32 возможность выполнять двумерные задачи отрисовки графики с высокой производительностью и визуальным качеством.</span><span class="sxs-lookup"><span data-stu-id="b55a2-113">This topic introduces Direct2D, an API that provides Win32 developers with the ability to perform 2-D graphics rendering tasks with superior performance and visual quality.</span></span>

## <a name="what-is-direct2d"></a><span data-ttu-id="b55a2-114">Что такое Direct2D?</span><span class="sxs-lookup"><span data-stu-id="b55a2-114">What is Direct2D?</span></span>

<span data-ttu-id="b55a2-115">Direct2D — это высокопроизводительный высококачественный графический API, обеспечивающий высокую производительность и высокое качество отрисовки для двухмерной геометрии, точечных рисунков и текста.</span><span class="sxs-lookup"><span data-stu-id="b55a2-115">Direct2D is a hardware-accelerated, immediate-mode 2-D graphics API that provides high performance and high-quality rendering for 2-D geometry, bitmaps, and text.</span></span> <span data-ttu-id="b55a2-116">API Direct2D предназначен для взаимодействия с существующим кодом, использующим GDI, GDI+ или Direct3D.</span><span class="sxs-lookup"><span data-stu-id="b55a2-116">The Direct2D API is designed to interoperate with existing code that uses GDI, GDI+, or Direct3D.</span></span>

<span data-ttu-id="b55a2-117">Direct2D предназначен главным образом для использования следующими классами разработчиков:</span><span class="sxs-lookup"><span data-stu-id="b55a2-117">Direct2D is designed primarily for use by the following classes of developers:</span></span>

-   <span data-ttu-id="b55a2-118">Разработчики крупных корпоративных приложений с корпоративным масштабированием.</span><span class="sxs-lookup"><span data-stu-id="b55a2-118">Developers of large, enterprise-scale, native applications.</span></span>
-   <span data-ttu-id="b55a2-119">Разработчики, создающие наборы средств управления и библиотеки для использования подчиненными разработчиками.</span><span class="sxs-lookup"><span data-stu-id="b55a2-119">Developers who create control toolkits and libraries for consumption by downstream developers.</span></span>
-   <span data-ttu-id="b55a2-120">Разработчики, которым требуется отрисовка двухмерной графики на стороне сервера.</span><span class="sxs-lookup"><span data-stu-id="b55a2-120">Developers who require server-side rendering of 2-D graphics.</span></span>
-   <span data-ttu-id="b55a2-121">Разработчики, использующие графическое изображение Direct3D и требующие простой, высокопроизводительную визуализацию и отрисовку текста для меню, элементов ПОЛЬЗОВАТЕЛЬСКОГО интерфейса и приголовков (Худс).</span><span class="sxs-lookup"><span data-stu-id="b55a2-121">Developers who use Direct3D graphics and need simple, high-performance 2-D and text rendering for menus, user interface (UI) elements, and Heads-up Displays (HUDs).</span></span>

## <a name="why-direct2d"></a><span data-ttu-id="b55a2-122">Зачем Direct2D?</span><span class="sxs-lookup"><span data-stu-id="b55a2-122">Why Direct2D?</span></span>

<span data-ttu-id="b55a2-123">Ниже перечислены основные причины создания нового API-интерфейса двухмерной графики в Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="b55a2-123">The primary motivations for creating a new 2-D graphics API in Microsoft Windows include the following:</span></span>

-   <span data-ttu-id="b55a2-124">Чтобы обеспечить более широкие возможности визуального отображения пользователей Windows.</span><span class="sxs-lookup"><span data-stu-id="b55a2-124">To keep pace with the increasing level of visual richness that Windows users are accustomed to.</span></span>
-   <span data-ttu-id="b55a2-125">Чтобы позволить разработчикам писать код двухмерной отрисовки, который масштабируется непосредственно с помощью графического оборудования компьютера, на котором он работает.</span><span class="sxs-lookup"><span data-stu-id="b55a2-125">To enable developers to write 2-D rendering code that scales directly with the graphics processing hardware of the PC it is running on.</span></span>
-   <span data-ttu-id="b55a2-126">Чтобы позволить разработчикам писать код для отрисовки двухмерной графики, которая может выполняться в контексте службы.</span><span class="sxs-lookup"><span data-stu-id="b55a2-126">To enable developers to write code for rendering 2-D graphics that can run in the context of a service.</span></span>

<span data-ttu-id="b55a2-127">В последние годы конечные пользователи приступили к более высокой визуальной точности в цифровых впечатлениях.</span><span class="sxs-lookup"><span data-stu-id="b55a2-127">In recent years, end users have begun to expect greater visual fidelity in digital experiences.</span></span> <span data-ttu-id="b55a2-128">Эта тенденция отражена в бытовой электроники.</span><span class="sxs-lookup"><span data-stu-id="b55a2-128">This trend is reflected in consumer electronics.</span></span> <span data-ttu-id="b55a2-129">Устройства GPS, устройства воспроизведения мультимедиа, мобильные телефоны и Цифровые камеры обеспечивают единообразный опыт работы в течение года.</span><span class="sxs-lookup"><span data-stu-id="b55a2-129">GPS devices, media playback devices, mobile phones, and digital cameras deliver consistently richer experiences year after year.</span></span> <span data-ttu-id="b55a2-130">Эта тенденция также может быть видна в разнообразии графического содержимого на пленке, телевидении, видеоиграх и в Интернете.</span><span class="sxs-lookup"><span data-stu-id="b55a2-130">This trend can also be seen in the diversity of graphical content in film, television, video games, and on the Web.</span></span> <span data-ttu-id="b55a2-131">Чтобы сократить эти изменения, разработчикам постоянно предлагается взять существующие приложения Windows на новый уровень визуальности.</span><span class="sxs-lookup"><span data-stu-id="b55a2-131">To keep pace with these changes, developers are consistently asked to take their existing Windows applications to the next level of visual richness.</span></span>

<span data-ttu-id="b55a2-132">Графические процессоры в современных ПК с Windows также постоянно развивались, благодаря усовершенствованиям графической видеоигры и частям возможностей Windows, таким как Windows Media Center и Aero.</span><span class="sxs-lookup"><span data-stu-id="b55a2-132">Graphics processors in modern Windows PCs have also been evolving steadily, driven by advances in video game graphics and parts of the Windows experience like Windows Media Center and Aero.</span></span> <span data-ttu-id="b55a2-133">Некоторые приложения Windows могут использовать современные графические процессоры с помощью Microsoft Direct3D и Windows Presentation Foundation (WPF).</span><span class="sxs-lookup"><span data-stu-id="b55a2-133">Some Windows applications can take advantage of modern GPUs by using Microsoft Direct3D and Windows Presentation Foundation (WPF).</span></span> <span data-ttu-id="b55a2-134">Несмотря на то, что Direct3D обслуживает высокопроизводительные трехмерные графические приложения и WPF решает потребности разработчиков .NET, существуют пробелы для разработчиков, имеющих большие версии кода отрисовки на основе GDI и GDI+ или желающих внедрить высококачественную двухмерной графику в свои приложения на основе Direct3D.</span><span class="sxs-lookup"><span data-stu-id="b55a2-134">While Direct3D serves high-end 3-D graphics applications and WPF addresses the needs of .NET developers, there are gaps for developers who have large existing codebases of rendering code based on GDI and GDI+ or who want to incorporate high-quality 2-D graphics in their Direct3D-based applications.</span></span>

<span data-ttu-id="b55a2-135">Наконец, потребность в API графики, которую можно использовать в службе, стала новым требованием для разработчиков, работающих в сценариях корпоративного и веб-разработки.</span><span class="sxs-lookup"><span data-stu-id="b55a2-135">Finally, the need for a graphics API that can be used in a service has become an emerging requirement for developers working in enterprise and Web-development scenarios.</span></span> <span data-ttu-id="b55a2-136">Существующие API-интерфейсы рендеринга сосредоточены на отрисовке на стороне клиента в одном сеансе пользователя.</span><span class="sxs-lookup"><span data-stu-id="b55a2-136">Existing rendering APIs focus on client-side rendering in a single user session.</span></span> <span data-ttu-id="b55a2-137">Таким образом, они могут быть короткими в области надежности и масштабируемости при использовании в контексте службы.</span><span class="sxs-lookup"><span data-stu-id="b55a2-137">As such, they can fall short in areas of robustness and scalability when used in a service context.</span></span> <span data-ttu-id="b55a2-138">Для решения этой этой функции необходим новый API.</span><span class="sxs-lookup"><span data-stu-id="b55a2-138">A new API is required to address this.</span></span>

## <a name="high-performance-with-maximum-availability"></a><span data-ttu-id="b55a2-139">Высокая производительность с максимальной доступностью</span><span class="sxs-lookup"><span data-stu-id="b55a2-139">High Performance with Maximum Availability</span></span>

<span data-ttu-id="b55a2-140">Direct2D — это библиотека пользовательского режима, созданная с помощью API Direct3D 10,1.</span><span class="sxs-lookup"><span data-stu-id="b55a2-140">Direct2D is a user-mode library that is built using the Direct3D 10.1 API.</span></span> <span data-ttu-id="b55a2-141">Это означает, что Direct2D приложения получают преимущества от аппаратно-ускоренной отрисовки современных GPU.</span><span class="sxs-lookup"><span data-stu-id="b55a2-141">This means that Direct2D applications benefit from hardware-accelerated rendering on modern mainstream GPUs.</span></span> <span data-ttu-id="b55a2-142">Аппаратное ускорение также достигается на более раннем оборудовании Direct3D 9 с помощью визуализации Direct3D 10-Level-9.</span><span class="sxs-lookup"><span data-stu-id="b55a2-142">Hardware acceleration is also achieved on earlier Direct3D 9 hardware by using Direct3D 10-level-9 rendering.</span></span> <span data-ttu-id="b55a2-143">Это сочетание обеспечивает высокую производительность графического оборудования на существующих компьютерах с Windows.</span><span class="sxs-lookup"><span data-stu-id="b55a2-143">This combination provides excellent performance on graphics hardware on existing Windows PCs.</span></span>

> [!Note]  
> <span data-ttu-id="b55a2-144">Начиная с Windows 8, Direct2D строится с помощью API Direct3D 11,1.</span><span class="sxs-lookup"><span data-stu-id="b55a2-144">Starting with Windows 8, Direct2D is built using the Direct3D 11.1 API.</span></span>

 

<span data-ttu-id="b55a2-145">На следующей схеме показана многоуровневая архитектура Direct2D.</span><span class="sxs-lookup"><span data-stu-id="b55a2-145">The following diagram shows the layered architecture of Direct2D.</span></span>

![Схема многоуровневой архитектуры Direct2D](images/direct2d-architectual-layering.png)

<span data-ttu-id="b55a2-147">В сценариях, где использование аппаратного ускорения нецелесообразно, Direct2D включает средство программной прорисовки с высокой производительностью.</span><span class="sxs-lookup"><span data-stu-id="b55a2-147">For scenarios where the use of hardware acceleration is not feasible, Direct2D includes a high-performance software rasterizer.</span></span> <span data-ttu-id="b55a2-148">При подготовке к просмотру в программном обеспечении приложения, использующие Direct2D, значительно улучшают производительность отрисовки, чем при использовании GDI+ и аналогичного визуального качества.</span><span class="sxs-lookup"><span data-stu-id="b55a2-148">When rendering in software, applications that use Direct2D experience substantially better rendering performance than with GDI+ and with similar visual quality.</span></span> <span data-ttu-id="b55a2-149">Средство программной прорисовки также предназначено для использования в контексте службы.</span><span class="sxs-lookup"><span data-stu-id="b55a2-149">The software rasterizer is also designed for use in a service context.</span></span>

<span data-ttu-id="b55a2-150">Содержимое, отображаемое с помощью Direct2D, также может отображаться удаленно с помощью инфраструктуры протокол удаленного рабочего стола (RDP) в операционной системе Windows 7.</span><span class="sxs-lookup"><span data-stu-id="b55a2-150">Content that is rendered by using Direct2D can also be displayed remotely by using the Remote Desktop Protocol (RDP) infrastructure in the Windows 7 operating system.</span></span> <span data-ttu-id="b55a2-151">Разработчики могут выбрать, обрабатывается ли графический процессор графически на дисплее или отрисовывается локально и передается как точечные рисунки.</span><span class="sxs-lookup"><span data-stu-id="b55a2-151">Developers can select whether rendering is handled by the GPU on the display computer or rendered locally and transmitted as bitmaps.</span></span> <span data-ttu-id="b55a2-152">Этот вариант можно выполнить на основе требуемой ставки заполнения и количества отображаемых графических примитивов.</span><span class="sxs-lookup"><span data-stu-id="b55a2-152">This choice can be made based on the required fill-rate and the quantity of graphics primitives that are rendered.</span></span> <span data-ttu-id="b55a2-153">Если компьютер-дисплей работает под управлением операционной системы более ранней версии, чем Windows 7, отрисовка внешнего экрана выполняется путем передачи точечных рисунков по сети.</span><span class="sxs-lookup"><span data-stu-id="b55a2-153">When the display computer is running an operating system earlier than Windows 7, remote display rendering is performed by transmitting bitmaps over the network.</span></span>

<span data-ttu-id="b55a2-154">Предоставляя единый интерфейс API, который сочетает производительность Direct3D и высокий уровень доступности, предоставляя средства отката программного обеспечения, удаленного рабочего стола и службы, Direct2D позволяет разработчикам использовать единую реализацию для высокопроизводительной отрисовки во многих разных сценариях.</span><span class="sxs-lookup"><span data-stu-id="b55a2-154">By providing a single API that combines the performance of Direct3D and high availability by providing software fallback, remote desktop, and service rendering, Direct2D enables developers to have a single implementation for high-performance rendering in many different scenarios.</span></span>

## <a name="visual-quality"></a><span data-ttu-id="b55a2-155">Визуальное качество</span><span class="sxs-lookup"><span data-stu-id="b55a2-155">Visual Quality</span></span>

<span data-ttu-id="b55a2-156">Приложения, использующие Direct2D для графики, могут обеспечить более высокое качество визуального элемента, чем можно достичь с помощью GDI.</span><span class="sxs-lookup"><span data-stu-id="b55a2-156">Applications that use Direct2D for graphics can deliver higher visual quality than what can be achieved using GDI.</span></span> <span data-ttu-id="b55a2-157">Direct2D использует сглаживание по примитивам для предоставления более гладких кривых и линий в отображаемом содержимом.</span><span class="sxs-lookup"><span data-stu-id="b55a2-157">Direct2D uses per-primitive antialiasing to deliver smoother looking curves and lines in rendered content.</span></span> <span data-ttu-id="b55a2-158">Кроме того, существует полная поддержка прозрачности и альфа-смешения при отрисовке двумерных примитивов.</span><span class="sxs-lookup"><span data-stu-id="b55a2-158">There is also full support for transparency and alpha blending when rendering 2-D primitives.</span></span> <span data-ttu-id="b55a2-159">Следующие изображения сравнивают содержимое с псевдонимом, отображаемое с помощью GDI (слева), с сглаженным содержимым, отображаемым Direct2D (справа).</span><span class="sxs-lookup"><span data-stu-id="b55a2-159">The following images compare aliased content rendered by using GDI (on the left) with antialiased content rendered by Direct2D (on the right).</span></span>

![Иллюстрация кривых и линий, отображаемых в GDI и в Direct2D](images/rendering-curves-and-lines.png)

<span data-ttu-id="b55a2-161">Разработчики могут указывать отрисовку векторной графики с псевдонимами.</span><span class="sxs-lookup"><span data-stu-id="b55a2-161">Developers can specify aliased rendering of vector graphics.</span></span> <span data-ttu-id="b55a2-162">Это используется в сценариях, где требуется привязка к границам с жесткими пикселями, например элементы пользовательского интерфейса, такие как указатели или линейки, если необходимо сопоставить стиль GDI или если сглаживание будет выполняться в процессе отрисовки через многовыборочное сглаживание или какой-либо другой механизм.</span><span class="sxs-lookup"><span data-stu-id="b55a2-162">This is used in scenarios where snapping to hard pixel boundaries is required, such as UI elements like pointers or rulers, if the GDI style of output must be matched, or if antialiasing will be performed downstream in the rendering process via Multisample Antialiasing or some other mechanism.</span></span>

## <a name="interoperability"></a><span data-ttu-id="b55a2-163">Совместимость</span><span class="sxs-lookup"><span data-stu-id="b55a2-163">Interoperability</span></span>

<span data-ttu-id="b55a2-164">Интеграция отрисовки на основе Direct2D упрощается для разработчиков посредством взаимодействия на уровне поверхности с GDI и Direct3D.</span><span class="sxs-lookup"><span data-stu-id="b55a2-164">Integrating Direct2D-based rendering is made easier for developers through surface-level interoperability with GDI and Direct3D.</span></span> <span data-ttu-id="b55a2-165">Приложения, которые визуализируют содержимое в основном с GDI, GDI+ или Direct3D, могут начать с использования Direct2D для визуализации конкретных областей своего приложения и со временем перейти к модели, где отрисовка выполняется в основном через Direct2D, с использованием GDI в основном для подключаемых модулей или расширения прежних версий.</span><span class="sxs-lookup"><span data-stu-id="b55a2-165">Applications that render content primarily with GDI, GDI+, or Direct3D, can begin by using Direct2D to render specific areas of their application, and over time move to a model where rendering is performed primarily via Direct2D, using GDI primarily for plug-ins or legacy extensibility.</span></span>

<span data-ttu-id="b55a2-166">Direct2D также упрощает использование [DirectWrite](/windows/desktop/DirectWrite/direct-write-portal) для высококачественного текста и расширенных возможностей работы с образами [компонента Microsoft Windows Imaging Component (WIC)](https://msdn.microsoft.com/library/ms737408.aspx).</span><span class="sxs-lookup"><span data-stu-id="b55a2-166">Direct2D also makes it easy to use [DirectWrite](/windows/desktop/DirectWrite/direct-write-portal) for high quality text and the advanced imaging features of the [Microsoft Windows Imaging Component (WIC)](https://msdn.microsoft.com/library/ms737408.aspx).</span></span>

<span data-ttu-id="b55a2-167">Дополнительные сведения о взаимодействии Direct2D см [. в разделе взаимодействие пакета SDK Direct2D.](interoperability.md)</span><span class="sxs-lookup"><span data-stu-id="b55a2-167">For more information about Direct2D interoperability, see the [Interoperability section of the Direct2D SDK.](interoperability.md)</span></span>

## <a name="summary"></a><span data-ttu-id="b55a2-168">Сводка</span><span class="sxs-lookup"><span data-stu-id="b55a2-168">Summary</span></span>

<span data-ttu-id="b55a2-169">Microsoft Direct2D позволяет разработчикам создавать функции двухмерной графики в своих приложениях, обеспечивая улучшенное качество визуального элемента по сравнению с GDI, а также характеристики производительности, масштабируемые с помощью современных графических процессоров.</span><span class="sxs-lookup"><span data-stu-id="b55a2-169">Microsoft Direct2D enables developers to build 2-D graphics features in their applications that deliver improved visual quality over GDI, and performance characteristics that scale with modern GPUs.</span></span> <span data-ttu-id="b55a2-170">Модель взаимодействия Direct2D позволяет разработчикам выборочно переносить приложения за один раз вместе с GDI, GDI+ или визуализацией на основе Direct3D.</span><span class="sxs-lookup"><span data-stu-id="b55a2-170">The Direct2D interoperability model enables developers to selectively migrate portions of their application at a time alongside GDI, GDI+, or Direct3D-based rendering.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b55a2-171">См. также</span><span class="sxs-lookup"><span data-stu-id="b55a2-171">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b55a2-172">Краткое руководство по Direct2D для Windows 8</span><span class="sxs-lookup"><span data-stu-id="b55a2-172">Direct2D Quickstart for Windows 8</span></span>](direct2d-quickstart-with-device-context.md)
</dt> <dt>

[<span data-ttu-id="b55a2-173">Обзор API Direct2D</span><span class="sxs-lookup"><span data-stu-id="b55a2-173">Direct2D API Overview</span></span>](the-direct2d-api.md)
</dt> </dl>

 

 