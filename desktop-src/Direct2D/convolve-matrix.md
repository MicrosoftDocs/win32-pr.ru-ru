---
title: Эффект свертки матрицы
description: Используйте эффекты матрицы, чтобы применить произвольный 2D-ядро к изображению. Этот эффект можно использовать для размытия, обнаружения краев, приподнятости или повышения резкости изображения.
ms.assetid: D9C23AC4-0090-4F16-AC59-B952FB616FA9
keywords:
- вращение матрицы
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 27951f5b9145dc46188e6b3112892d1a61856236
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "104559672"
---
# <a name="convolve-matrix-effect"></a><span data-ttu-id="500d3-105">Эффект свертки матрицы</span><span class="sxs-lookup"><span data-stu-id="500d3-105">Convolve matrix effect</span></span>

<span data-ttu-id="500d3-106">Используйте эффекты матрицы, чтобы применить произвольный 2D-ядро к изображению.</span><span class="sxs-lookup"><span data-stu-id="500d3-106">Use the convolve matrix effect to apply an arbitrary 2D kernel to an image.</span></span> <span data-ttu-id="500d3-107">Этот эффект можно использовать для размытия, обнаружения краев, приподнятости или повышения резкости изображения.</span><span class="sxs-lookup"><span data-stu-id="500d3-107">You can use this effect to blur, detect edges, emboss, or sharpen an image.</span></span>

<span data-ttu-id="500d3-108">Идентификатором CLSID для этого действия является CLSID \_ D2D1ConvolveMatrix.</span><span class="sxs-lookup"><span data-stu-id="500d3-108">The CLSID for this effect is CLSID\_D2D1ConvolveMatrix.</span></span>

-   [<span data-ttu-id="500d3-109">Пример изображения</span><span class="sxs-lookup"><span data-stu-id="500d3-109">Example image</span></span>](#example-image)
-   [<span data-ttu-id="500d3-110">Свойства эффектов</span><span class="sxs-lookup"><span data-stu-id="500d3-110">Effect properties</span></span>](#effect-properties)
-   [<span data-ttu-id="500d3-111">Режимы масштабирования</span><span class="sxs-lookup"><span data-stu-id="500d3-111">Scale modes</span></span>](#scale-modes)
-   [<span data-ttu-id="500d3-112">Режимы границ</span><span class="sxs-lookup"><span data-stu-id="500d3-112">Border modes</span></span>](#border-modes)
-   [<span data-ttu-id="500d3-113">Битовая карта вывода</span><span class="sxs-lookup"><span data-stu-id="500d3-113">Output bitmap</span></span>](#output-bitmap)
-   [<span data-ttu-id="500d3-114">Требования</span><span class="sxs-lookup"><span data-stu-id="500d3-114">Requirements</span></span>](#requirements)
-   [<span data-ttu-id="500d3-115">См. также</span><span class="sxs-lookup"><span data-stu-id="500d3-115">Related topics</span></span>](#related-topics)

## <a name="example-image"></a><span data-ttu-id="500d3-116">Пример изображения</span><span class="sxs-lookup"><span data-stu-id="500d3-116">Example image</span></span>

<span data-ttu-id="500d3-117">В этом примере показаны входные и выходные данные влияния матрицы вращения на ядро 3 x 3.</span><span class="sxs-lookup"><span data-stu-id="500d3-117">The example here shows the input and output of the convolve matrix effect with a 3 x 3 kernel.</span></span>



| <span data-ttu-id="500d3-118">До</span><span class="sxs-lookup"><span data-stu-id="500d3-118">Before</span></span>                                                         |
|----------------------------------------------------------------|
| ![изображение перед результатом.](images/default-before.jpg)     |
| <span data-ttu-id="500d3-120">После</span><span class="sxs-lookup"><span data-stu-id="500d3-120">After</span></span>                                                          |
| ![изображение после преобразования.](images/6-convolvematrix.png) |



 


```C++
ComPtr<ID2D1Effect> convolveMatrixEffect;
m_d2dContext->CreateEffect(CLSID_D2D1ConvolveMatrix, &convolveMatrixEffect);

convolveMatrixEffect->SetInput(0, bitmap);
float matrix[9] = {-1, -1, -1, -1, 9, -1, -1, -1, -1};
convolveMatrixEffect->SetValue(D2D1_CONVOLVEMATRIX_PROP_KERNEL_MATRIX, matrix);

m_d2dContext->BeginDraw();
m_d2dContext->DrawImage(convolveMatrixEffect.Get());
m_d2dContext->EndDraw();
```



## <a name="effect-properties"></a><span data-ttu-id="500d3-122">Свойства эффектов</span><span class="sxs-lookup"><span data-stu-id="500d3-122">Effect properties</span></span>



| <span data-ttu-id="500d3-123">Отображаемое имя и перечисление индекса</span><span class="sxs-lookup"><span data-stu-id="500d3-123">Display name and index enumeration</span></span>                                                      | <span data-ttu-id="500d3-124">Описание</span><span class="sxs-lookup"><span data-stu-id="500d3-124">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|-----------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="500d3-125">кернелунитленгс</span><span class="sxs-lookup"><span data-stu-id="500d3-125">KernelUnitLength</span></span><br/> <span data-ttu-id="500d3-126">\_ \_ \_ \_ Длина единицы ядра D2D1 конволвематрикс \_</span><span class="sxs-lookup"><span data-stu-id="500d3-126">D2D1\_CONVOLVEMATRIX\_PROP\_KERNEL\_UNIT\_LENGTH</span></span><br/> | <span data-ttu-id="500d3-127">Размер одной единицы в ядре.</span><span class="sxs-lookup"><span data-stu-id="500d3-127">The size of one unit in the kernel.</span></span> <span data-ttu-id="500d3-128">Единицы измерения находятся в (DIP/единица ядра), где единица ядра — это размер элемента в ядре свертки.</span><span class="sxs-lookup"><span data-stu-id="500d3-128">The units are in (DIPs/kernel unit), where a kernel unit is the size of the element in the convolution kernel.</span></span> <span data-ttu-id="500d3-129">Значение 1 (DIP/единица ядра) соответствует одному пикселю в изображении с 96 DPI.</span><span class="sxs-lookup"><span data-stu-id="500d3-129">A value of 1 (DIP/kernel unit) corresponds to one pixel in a image at 96 DPI.</span></span><br/> <span data-ttu-id="500d3-130">Тип — FLOAT.</span><span class="sxs-lookup"><span data-stu-id="500d3-130">The type is FLOAT.</span></span><br/> <span data-ttu-id="500d3-131">Значение по умолчанию — 1,0 f.</span><span class="sxs-lookup"><span data-stu-id="500d3-131">The default value is 1.0f.</span></span><br/>                                                                                                                                                                                                                   |
| <span data-ttu-id="500d3-132">ScaleMode</span><span class="sxs-lookup"><span data-stu-id="500d3-132">ScaleMode</span></span><br/> <span data-ttu-id="500d3-133">\_ \_ \_ Режим масштабирования D2D1 конволвематрикс \_</span><span class="sxs-lookup"><span data-stu-id="500d3-133">D2D1\_CONVOLVEMATRIX\_PROP\_SCALE\_MODE</span></span><br/>                 | <span data-ttu-id="500d3-134">Режим интерполяции, который применяется для масштабирования изображения до соответствующей длины единицы ядра.</span><span class="sxs-lookup"><span data-stu-id="500d3-134">The interpolation mode the effect uses to scale the image to the corresponding kernel unit length.</span></span> <span data-ttu-id="500d3-135">Существует шесть режимов масштабирования, имеющих высокое качество и скорость.</span><span class="sxs-lookup"><span data-stu-id="500d3-135">There are six scale modes that range in quality and speed.</span></span><br/> <span data-ttu-id="500d3-136">Тип — D2D1 \_ конволвематрикс ( \_ масштабируемый \_ режим).</span><span class="sxs-lookup"><span data-stu-id="500d3-136">The type is D2D1\_CONVOLVEMATRIX\_SCALE\_MODE.</span></span><br/> <span data-ttu-id="500d3-137">Значение по умолчанию — \_ D2D1 \_ конволвематрикс \_ \_ линейный режим масштабирования.</span><span class="sxs-lookup"><span data-stu-id="500d3-137">The default value is D2D1\_CONVOLVEMATRIX\_SCALE\_MODE\_LINEAR.</span></span><br/>                                                                                                                                                                                                                     |
| <span data-ttu-id="500d3-138">кернелсизекс</span><span class="sxs-lookup"><span data-stu-id="500d3-138">KernelSizeX</span></span><br/> <span data-ttu-id="500d3-139">D2D1 \_ конволвематрикс \_ , \_ \_ размер ядра \_ X</span><span class="sxs-lookup"><span data-stu-id="500d3-139">D2D1\_CONVOLVEMATRIX\_PROP\_KERNEL\_SIZE\_X</span></span><br/>           | <span data-ttu-id="500d3-140">Ширина матрицы ядра.</span><span class="sxs-lookup"><span data-stu-id="500d3-140">The width of the kernel matrix.</span></span> <span data-ttu-id="500d3-141">Единицы измерения указываются в единицах ядра.</span><span class="sxs-lookup"><span data-stu-id="500d3-141">The units are specified in kernel units.</span></span> <span data-ttu-id="500d3-142">Тип — UINT32.</span><span class="sxs-lookup"><span data-stu-id="500d3-142">The type is UINT32.</span></span><br/> <span data-ttu-id="500d3-143">Значение по умолчанию равно 3.</span><span class="sxs-lookup"><span data-stu-id="500d3-143">The default value is 3.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="500d3-144">кернелсизэй</span><span class="sxs-lookup"><span data-stu-id="500d3-144">KernelSizeY</span></span><br/> <span data-ttu-id="500d3-145">D2D1 \_ конволвематрикс \_ prop \_ \_ размер ядра \_ Y</span><span class="sxs-lookup"><span data-stu-id="500d3-145">D2D1\_CONVOLVEMATRIX\_PROP\_KERNEL\_SIZE\_Y</span></span><br/>           | <span data-ttu-id="500d3-146">Высота матрицы ядра.</span><span class="sxs-lookup"><span data-stu-id="500d3-146">The height of the kernel matrix.</span></span> <span data-ttu-id="500d3-147">Единицы измерения указываются в единицах ядра.</span><span class="sxs-lookup"><span data-stu-id="500d3-147">The units are specified in kernel units.</span></span> <span data-ttu-id="500d3-148">Тип — UINT32.</span><span class="sxs-lookup"><span data-stu-id="500d3-148">The type is UINT32.</span></span><br/> <span data-ttu-id="500d3-149">Значение по умолчанию равно 3.</span><span class="sxs-lookup"><span data-stu-id="500d3-149">The default value is 3.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="500d3-150">кернелматрикс</span><span class="sxs-lookup"><span data-stu-id="500d3-150">KernelMatrix</span></span><br/> <span data-ttu-id="500d3-151">\_ \_ \_ Матрица ядра D2D1 \_ конволвематрикс</span><span class="sxs-lookup"><span data-stu-id="500d3-151">D2D1\_CONVOLVEMATRIX\_PROP\_KERNEL\_MATRIX</span></span><br/>           | <span data-ttu-id="500d3-152">Матрица ядра, применяемая к образу.</span><span class="sxs-lookup"><span data-stu-id="500d3-152">The kernel matrix to be applied to the image.</span></span> <span data-ttu-id="500d3-153">Элементы ядра не связаны и задаются как плавающие.</span><span class="sxs-lookup"><span data-stu-id="500d3-153">The kernel elements aren't bounded and are specified as floats.</span></span><br/> <span data-ttu-id="500d3-154">Первый набор чисел *кернелсизекс* в элементе float \[ \] соответствует первой строке в ядре.</span><span class="sxs-lookup"><span data-stu-id="500d3-154">The first set of *KernelSizeX* numbers in the FLOAT\[\] corresponds to the first row in the kernel.</span></span> <span data-ttu-id="500d3-155">Второй набор *кернелсизекс* чисел соответствует второй строке и так далее до *кернелсизэй* строк.</span><span class="sxs-lookup"><span data-stu-id="500d3-155">The second set of *KernelSizeX* numbers correspond to the second row, and so on up to *KernelSizeY* rows.</span></span><br/> <span data-ttu-id="500d3-156">Тип — FLOAT \[ \] .</span><span class="sxs-lookup"><span data-stu-id="500d3-156">The type is FLOAT\[\].</span></span><br/> <span data-ttu-id="500d3-157">Значением по умолчанию является {0,0 f, 0,0 f, 0,0 f, 0,0 f, 1,0 f, 0,0 f, 0,0 f, 0,0 f, 0,0 f}.</span><span class="sxs-lookup"><span data-stu-id="500d3-157">The default value is {0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 0.0f, 0.0f}.</span></span><br/>                                                       |
| <span data-ttu-id="500d3-158">Делитель</span><span class="sxs-lookup"><span data-stu-id="500d3-158">Divisor</span></span><br/> <span data-ttu-id="500d3-159">D2D1 \_ конволвематрикс \_ prop \_ делитель</span><span class="sxs-lookup"><span data-stu-id="500d3-159">D2D1\_CONVOLVEMATRIX\_PROP\_DIVISOR</span></span><br/>                       | <span data-ttu-id="500d3-160">Матрица ядра применяется к пикселю, а затем результат делится на это значение.</span><span class="sxs-lookup"><span data-stu-id="500d3-160">The kernel matrix is applied to a pixel and then the result is divided by this value.</span></span> <br/> <span data-ttu-id="500d3-161">0 ведет себя как значение float Эпсилон.</span><span class="sxs-lookup"><span data-stu-id="500d3-161">0 behaves as a value of float epsilon.</span></span><br/> <span data-ttu-id="500d3-162">Тип — FLOAT.</span><span class="sxs-lookup"><span data-stu-id="500d3-162">The type is FLOAT.</span></span><br/> <span data-ttu-id="500d3-163">Значение по умолчанию — 1,0 f.</span><span class="sxs-lookup"><span data-stu-id="500d3-163">The default value is 1.0f.</span></span><br/>                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="500d3-164">Смещение</span><span class="sxs-lookup"><span data-stu-id="500d3-164">Bias</span></span><br/> <span data-ttu-id="500d3-165">D2D1 \_ конволвематрикс \_ prop, \_ смещение</span><span class="sxs-lookup"><span data-stu-id="500d3-165">D2D1\_CONVOLVEMATRIX\_PROP\_BIAS</span></span><br/>                             | <span data-ttu-id="500d3-166">Этот результат применяет матрицу ядра, делитель, а затем добавляет сдвиг к результату.</span><span class="sxs-lookup"><span data-stu-id="500d3-166">The effect applies the kernel matrix, the divisor, and then the bias is added to the result.</span></span> <span data-ttu-id="500d3-167">Смещение не ограничено и не имеет единицы.</span><span class="sxs-lookup"><span data-stu-id="500d3-167">The bias is unbounded and unitless.</span></span> <span data-ttu-id="500d3-168">Тип — FLOAT.</span><span class="sxs-lookup"><span data-stu-id="500d3-168">The type is FLOAT.</span></span><br/> <span data-ttu-id="500d3-169">Значение по умолчанию — 0,0 f.</span><span class="sxs-lookup"><span data-stu-id="500d3-169">The default value is 0.0f.</span></span><br/>                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="500d3-170">кернелоффсет</span><span class="sxs-lookup"><span data-stu-id="500d3-170">KernelOffset</span></span><br/> <span data-ttu-id="500d3-171">\_ \_ \_ Смещение ядра D2D1 конволвематрикс \_ prop</span><span class="sxs-lookup"><span data-stu-id="500d3-171">D2D1\_CONVOLVEMATRIX\_PROP\_KERNEL\_OFFSET</span></span><br/>           | <span data-ttu-id="500d3-172">Сдвигает ядро свертки от центрированной точки выходных данных к заданному расположению влево/вправо и вверх/вниз.</span><span class="sxs-lookup"><span data-stu-id="500d3-172">Shifts the convolution kernel from a centered position on the output pixel to a position you specify left/right and up/down.</span></span> <span data-ttu-id="500d3-173">Смещение определяется в единицах ядра.</span><span class="sxs-lookup"><span data-stu-id="500d3-173">The offset is defined in kernel units.</span></span><br/> <span data-ttu-id="500d3-174">С некоторыми смещениями и размерами ядра, примеры свертки ядра не будут направляться в центр изображений в пикселях.</span><span class="sxs-lookup"><span data-stu-id="500d3-174">With some offsets and kernel sizes, the convolution kernel s samples won't land on a pixel image center.</span></span> <span data-ttu-id="500d3-175">Значения пикселей для образца ядра вычисляются с помощью билинейной интерполяции.</span><span class="sxs-lookup"><span data-stu-id="500d3-175">The pixel values for the kernel sample are computed by bilinear interpolation.</span></span><br/> <span data-ttu-id="500d3-176">Тип — D2D1 \_ vector \_ 2F.</span><span class="sxs-lookup"><span data-stu-id="500d3-176">The type is D2D1\_VECTOR\_2F.</span></span><br/> <span data-ttu-id="500d3-177">Значение по умолчанию — {0.0 f, 0,0 f}.</span><span class="sxs-lookup"><span data-stu-id="500d3-177">The default value is {0.0f, 0.0f}.</span></span><br/>                                                          |
| <span data-ttu-id="500d3-178">пресервеалфа</span><span class="sxs-lookup"><span data-stu-id="500d3-178">PreserveAlpha</span></span><br/> <span data-ttu-id="500d3-179">D2D1 \_ конволвематрикс \_ prop, \_ Сохранение \_ альфа-канала</span><span class="sxs-lookup"><span data-stu-id="500d3-179">D2D1\_CONVOLVEMATRIX\_PROP\_PRESERVE\_ALPHA</span></span><br/>         | <span data-ttu-id="500d3-180">Указывает, применяется ли ядро свертки к альфа-каналу или только к цветовым каналам.</span><span class="sxs-lookup"><span data-stu-id="500d3-180">Specifies whether the convolution kernel is applied to the alpha channel or only the color channels.</span></span><br/> <span data-ttu-id="500d3-181">Если задано **значение true** , ядро свертки применяется только к цветным каналам.</span><span class="sxs-lookup"><span data-stu-id="500d3-181">If you set this to **TRUE** the convolution kernel is applied only to the color channels.</span></span><br/> <span data-ttu-id="500d3-182">Если задано **значение false** , ядро свертки применяется ко всем каналам.</span><span class="sxs-lookup"><span data-stu-id="500d3-182">If you set this to **FALSE** the convolution kernel is applied to all channels.</span></span><br/> <span data-ttu-id="500d3-183">Тип — BOOL.</span><span class="sxs-lookup"><span data-stu-id="500d3-183">The type is BOOL.</span></span><br/> <span data-ttu-id="500d3-184">Значение по умолчанию — FALSE.</span><span class="sxs-lookup"><span data-stu-id="500d3-184">The default value is FALSE.</span></span><br/>                                                                                                                                               |
| <span data-ttu-id="500d3-185">бордермоде</span><span class="sxs-lookup"><span data-stu-id="500d3-185">BorderMode</span></span><br/> <span data-ttu-id="500d3-186">\_Режим границы D2D1 конволвематрикс " \_ prop" \_ \_</span><span class="sxs-lookup"><span data-stu-id="500d3-186">D2D1\_CONVOLVEMATRIX\_PROP\_BORDER\_MODE</span></span><br/>               | <span data-ttu-id="500d3-187">Режим, используемый для вычисления границы изображения: Soft или Hard.</span><span class="sxs-lookup"><span data-stu-id="500d3-187">The mode used to calculate the border of the image, soft or hard.</span></span> <span data-ttu-id="500d3-188">Дополнительные сведения см. в разделе [режимы границ](https://www.bing.com/search?q=Border+modes) .</span><span class="sxs-lookup"><span data-stu-id="500d3-188">See [Border modes](https://www.bing.com/search?q=Border+modes) for more info.</span></span><br/> <span data-ttu-id="500d3-189">Тип — D2D1 \_ границы \_ .</span><span class="sxs-lookup"><span data-stu-id="500d3-189">The type is D2D1\_BORDER\_MODE.</span></span><br/> <span data-ttu-id="500d3-190">Значение по умолчанию — D2D1 \_ границы \_ режима \_ Soft.</span><span class="sxs-lookup"><span data-stu-id="500d3-190">The default value is D2D1\_BORDER\_MODE\_SOFT.</span></span><br/>                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="500d3-191">клампаутпут</span><span class="sxs-lookup"><span data-stu-id="500d3-191">ClampOutput</span></span><br/> <span data-ttu-id="500d3-192">\_ \_ \_ Выходные данные среза D2D1 конволвематрикс \_</span><span class="sxs-lookup"><span data-stu-id="500d3-192">D2D1\_CONVOLVEMATRIX\_PROP\_CLAMP\_OUTPUT</span></span><br/>             | <span data-ttu-id="500d3-193">Будет ли результат заменять цветовые значения в диапазоне от 0 до 1 перед тем, как результат передаст значения следующему результату в графе.</span><span class="sxs-lookup"><span data-stu-id="500d3-193">Whether the effect clamps color values to between 0 and 1 before the effect passes the values to the next effect in the graph.</span></span> <span data-ttu-id="500d3-194">Этот результат выполняет фиксацию значений перед тем, как он умножает альфа-канал.</span><span class="sxs-lookup"><span data-stu-id="500d3-194">The effect clamps the values before it premultiplies the alpha .</span></span><br/> <span data-ttu-id="500d3-195">Если присвоить этому параметру значение TRUE, то действие будет выполнять фиксацию значений.</span><span class="sxs-lookup"><span data-stu-id="500d3-195">If you set this to TRUE the effect will clamp the values.</span></span> <span data-ttu-id="500d3-196">Если присвоить этому параметру значение FALSE, то эффект не будет выполнять фиксацию цветовых значений, но другие эффекты и поверхность вывода могут попытаться отразить значения, если они не имеют достаточно высокой точности.</span><span class="sxs-lookup"><span data-stu-id="500d3-196">If you set this to FALSE, the effect will not clamp the color values, but other effects and the output surface may clamp the values if they are not of high enough precision.</span></span><br/> <span data-ttu-id="500d3-197">Тип — BOOL.</span><span class="sxs-lookup"><span data-stu-id="500d3-197">The type is BOOL.</span></span><br/> <span data-ttu-id="500d3-198">Значение по умолчанию — FALSE.</span><span class="sxs-lookup"><span data-stu-id="500d3-198">The default value is FALSE.</span></span><br/> |



 

## <a name="scale-modes"></a><span data-ttu-id="500d3-199">Режимы масштабирования</span><span class="sxs-lookup"><span data-stu-id="500d3-199">Scale modes</span></span>



| <span data-ttu-id="500d3-200">Перечисление</span><span class="sxs-lookup"><span data-stu-id="500d3-200">Enumeration</span></span>                                              | <span data-ttu-id="500d3-201">Описание</span><span class="sxs-lookup"><span data-stu-id="500d3-201">Description</span></span>                                                                                                                                                                                          |
|----------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="500d3-202">\_ \_ \_ \_ Ближайший соседний D2D1 конволвематрикс режим масштабирования \_</span><span class="sxs-lookup"><span data-stu-id="500d3-202">D2D1\_CONVOLVEMATRIX\_SCALE\_MODE\_NEAREST\_NEIGHBOR</span></span>     | <span data-ttu-id="500d3-203">Выбирает ближайшую одиночную точку и использует ее.</span><span class="sxs-lookup"><span data-stu-id="500d3-203">Samples the nearest single point and uses that.</span></span> <span data-ttu-id="500d3-204">В этом режиме используется меньше времени на обработку, но выводится изображение самого низкого качества.</span><span class="sxs-lookup"><span data-stu-id="500d3-204">This mode uses less processing time, but outputs the lowest quality image.</span></span>                                                                           |
| <span data-ttu-id="500d3-205">\_ \_ \_ Линейный режим масштабирования D2D1 конволвематрикс \_</span><span class="sxs-lookup"><span data-stu-id="500d3-205">D2D1\_CONVOLVEMATRIX\_SCALE\_MODE\_LINEAR</span></span>                | <span data-ttu-id="500d3-206">Использует выборку с четырьмя точками и линейную интерполяцию.</span><span class="sxs-lookup"><span data-stu-id="500d3-206">Uses a four point sample and linear interpolation.</span></span> <span data-ttu-id="500d3-207">В этом режиме выводится изображение с более высоким качеством, чем в ближайшем соседнем режиме.</span><span class="sxs-lookup"><span data-stu-id="500d3-207">This mode outputs a higher quality image than nearest neighbor mode.</span></span>                                                                              |
| <span data-ttu-id="500d3-208">D2D1 \_ конволвематрикс \_ Scale \_ , \_ кубический режим</span><span class="sxs-lookup"><span data-stu-id="500d3-208">D2D1\_CONVOLVEMATRIX\_SCALE\_MODE\_CUBIC</span></span>                 | <span data-ttu-id="500d3-209">Использует 16-примерный ядро кубических для интерполяции.</span><span class="sxs-lookup"><span data-stu-id="500d3-209">Uses a 16 sample cubic kernel for interpolation.</span></span> <span data-ttu-id="500d3-210">Этот режим использует наибольшее время обработки, но выводит изображение с более высоким качеством.</span><span class="sxs-lookup"><span data-stu-id="500d3-210">This mode uses the most processing time, but outputs a higher quality image.</span></span>                                                                        |
| <span data-ttu-id="500d3-211">D2D1 \_ конволвематрикс \_ режим масштабирования с \_ \_ несколькими \_ образцами \_</span><span class="sxs-lookup"><span data-stu-id="500d3-211">D2D1\_CONVOLVEMATRIX\_SCALE\_MODE\_MULTI\_SAMPLE\_LINEAR</span></span> | <span data-ttu-id="500d3-212">Использует 4 линейных образца в пределах одного пикселя для удобного сглаживания.</span><span class="sxs-lookup"><span data-stu-id="500d3-212">Uses 4 linear samples within a single pixel for good edge anti-aliasing.</span></span> <span data-ttu-id="500d3-213">Этот режим хорошо подходит для уменьшения масштаба по небольшим объемам на изображениях с небольшими пикселями.</span><span class="sxs-lookup"><span data-stu-id="500d3-213">This mode is good for scaling down by small amounts on images with few pixels.</span></span>                                              |
| <span data-ttu-id="500d3-214">D2D1 \_ конволвематрикс \_ режим масштабирования — \_ \_ анизотропная</span><span class="sxs-lookup"><span data-stu-id="500d3-214">D2D1\_CONVOLVEMATRIX\_SCALE\_MODE\_ANISOTROPIC</span></span>           | <span data-ttu-id="500d3-215">Использует анизотропную фильтрацию для выборки шаблона в соответствии с преобразованной формой точечного рисунка.</span><span class="sxs-lookup"><span data-stu-id="500d3-215">Uses anisotropic filtering to sample a pattern according to the transformed shape of the bitmap.</span></span>                                                                                                     |
| <span data-ttu-id="500d3-216">\_ \_ \_ \_ \_ Высококачественное \_ кубический режим масштабирования D2D1 конволвематрикс</span><span class="sxs-lookup"><span data-stu-id="500d3-216">D2D1\_CONVOLVEMATRIX\_SCALE\_MODE\_HIGH\_QUALITY\_CUBIC</span></span>  | <span data-ttu-id="500d3-217">Использует высококачественное ядро кубического размера для выполнения предварительно довнскале образа, если довнскалинг участвует в матрице преобразования.</span><span class="sxs-lookup"><span data-stu-id="500d3-217">Uses a variable size high quality cubic kernel to perform a pre-downscale the image if downscaling is involved in the transform matrix.</span></span> <span data-ttu-id="500d3-218">Затем использует режим интерполяции кубических для окончательного вывода.</span><span class="sxs-lookup"><span data-stu-id="500d3-218">Then uses the cubic interpolation mode for the final output.</span></span> |



 

> [!Note]  
> <span data-ttu-id="500d3-219">Если не выбрать режим, то по умолчанию применяется \_ режим МАСШТАБИРОВАНИЯ D2D1 конволвематрикс \_ \_ \_ линейный.</span><span class="sxs-lookup"><span data-stu-id="500d3-219">If you don't select a mode, the effect defaults to D2D1\_CONVOLVEMATRIX\_SCALE\_MODE\_LINEAR.</span></span>

 

## <a name="border-modes"></a><span data-ttu-id="500d3-220">Режимы границ</span><span class="sxs-lookup"><span data-stu-id="500d3-220">Border modes</span></span>



| <span data-ttu-id="500d3-221">Имя</span><span class="sxs-lookup"><span data-stu-id="500d3-221">Name</span></span>                     | <span data-ttu-id="500d3-222">Описание</span><span class="sxs-lookup"><span data-stu-id="500d3-222">Description</span></span>                                                                                                                                                                                                                                                              |
|--------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="500d3-223">\_ \_ Мягкий режим границы \_ D2D1</span><span class="sxs-lookup"><span data-stu-id="500d3-223">D2D1\_BORDER\_MODE\_SOFT</span></span> | <span data-ttu-id="500d3-224">При применении ядра свертки к входному изображению применяются прозрачные черные пиксели для выборки за пределами входных данных.</span><span class="sxs-lookup"><span data-stu-id="500d3-224">The effect pads the input image with transparent black pixels for samples outside of the input bounds when it applies the convolution kernel.</span></span> <span data-ttu-id="500d3-225">При этом создается мягкая сторона для изображения, а в процессе разворачивается точечный рисунок с размером ядра.</span><span class="sxs-lookup"><span data-stu-id="500d3-225">This creates a soft edge for the image, and in the process expands the output bitmap by the size of the kernel.</span></span><br/> |
| <span data-ttu-id="500d3-226">Жесткое D2D1 в \_ \_ режиме границы \_</span><span class="sxs-lookup"><span data-stu-id="500d3-226">D2D1\_BORDER\_MODE\_HARD</span></span> | <span data-ttu-id="500d3-227">Этот результат расширяет входной образ с помощью преобразования границы зеркального типа для выборок за пределами входных данных.</span><span class="sxs-lookup"><span data-stu-id="500d3-227">The effect extends the input image with a mirror-type border transform for samples outside of the input bounds.</span></span> <span data-ttu-id="500d3-228">Размер выходного растрового изображения равен размеру входного точечного рисунка.</span><span class="sxs-lookup"><span data-stu-id="500d3-228">The size of the output bitmap is equal to the size of the input bitmap.</span></span><br/>                                                                       |



 

## <a name="output-bitmap"></a><span data-ttu-id="500d3-229">Битовая карта вывода</span><span class="sxs-lookup"><span data-stu-id="500d3-229">Output bitmap</span></span>

<span data-ttu-id="500d3-230">Размер выходных данных результата зависит от размера ядра свертки, смещения ядра, длины блока ядра и параметра режима границы.</span><span class="sxs-lookup"><span data-stu-id="500d3-230">The size of the effect's output depends on the size of the convolution kernel, the kernel offset, the kernel unit length, and the border mode setting.</span></span>

## <a name="requirements"></a><span data-ttu-id="500d3-231">Требования</span><span class="sxs-lookup"><span data-stu-id="500d3-231">Requirements</span></span>



| <span data-ttu-id="500d3-232">Требование</span><span class="sxs-lookup"><span data-stu-id="500d3-232">Requirement</span></span> | <span data-ttu-id="500d3-233">Значение</span><span class="sxs-lookup"><span data-stu-id="500d3-233">Value</span></span> |
|--------------------------|------------------------------------------------------------------------------------|
| <span data-ttu-id="500d3-234">Минимальная версия клиента</span><span class="sxs-lookup"><span data-stu-id="500d3-234">Minimum supported client</span></span> | <span data-ttu-id="500d3-235">Windows 8 и обновление платформы для \[ классических приложений Windows 7 \| приложения для Магазина Windows\]</span><span class="sxs-lookup"><span data-stu-id="500d3-235">Windows 8 and Platform Update for Windows 7 \[desktop apps \| Windows Store apps\]</span></span> |
| <span data-ttu-id="500d3-236">Минимальная версия сервера</span><span class="sxs-lookup"><span data-stu-id="500d3-236">Minimum supported server</span></span> | <span data-ttu-id="500d3-237">Windows 8 и обновление платформы для \[ классических приложений Windows 7 \| приложения для Магазина Windows\]</span><span class="sxs-lookup"><span data-stu-id="500d3-237">Windows 8 and Platform Update for Windows 7 \[desktop apps \| Windows Store apps\]</span></span> |
| <span data-ttu-id="500d3-238">Header</span><span class="sxs-lookup"><span data-stu-id="500d3-238">Header</span></span>                   | <span data-ttu-id="500d3-239">d2d1effects. h</span><span class="sxs-lookup"><span data-stu-id="500d3-239">d2d1effects.h</span></span>                                                                      |
| <span data-ttu-id="500d3-240">Библиотека</span><span class="sxs-lookup"><span data-stu-id="500d3-240">Library</span></span>                  | <span data-ttu-id="500d3-241">D2D1. lib, дксгуид. lib</span><span class="sxs-lookup"><span data-stu-id="500d3-241">d2d1.lib, dxguid.lib</span></span>                                                               |



 

## <a name="related-topics"></a><span data-ttu-id="500d3-242">См. также</span><span class="sxs-lookup"><span data-stu-id="500d3-242">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="500d3-243">**ID2D1Effect**</span><span class="sxs-lookup"><span data-stu-id="500d3-243">**ID2D1Effect**</span></span>](/windows/win32/api/d2d1_1/nn-d2d1_1-id2d1effect)
</dt> </dl>

 

