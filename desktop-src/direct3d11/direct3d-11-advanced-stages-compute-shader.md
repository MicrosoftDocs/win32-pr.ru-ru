---
title: Общие сведения о вычислении шейдера
description: Шейдер вычислений — это программируемый этап шейдера, который расширяет возможности Microsoft Direct3D 11 после программирования графики. Технология вычислений с шейдером также называется технологией DirectCompute.
ms.assetid: 02c1f98e-fdd6-49b0-b8b2-efbd472ab599
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 485e83ab965f14342d235a07810f210e18aadc53
ms.sourcegitcommit: 556bf3a984f2fc4d18e370329c3043bf3329c93f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/09/2021
ms.locfileid: "107222872"
---
# <a name="compute-shader-overview"></a><span data-ttu-id="203f4-104">Общие сведения о вычислении шейдера</span><span class="sxs-lookup"><span data-stu-id="203f4-104">Compute Shader Overview</span></span>

<span data-ttu-id="203f4-105">Шейдер вычислений — это программируемый этап шейдера, который расширяет возможности Microsoft Direct3D 11 после программирования графики.</span><span class="sxs-lookup"><span data-stu-id="203f4-105">A compute shader is a programmable shader stage that expands Microsoft Direct3D 11 beyond graphics programming.</span></span> <span data-ttu-id="203f4-106">Технология вычислений с шейдером также называется технологией DirectCompute.</span><span class="sxs-lookup"><span data-stu-id="203f4-106">The compute shader technology is also known as the DirectCompute technology.</span></span>

<span data-ttu-id="203f4-107">Как и другие программируемые шейдеры (например, шейдеры вершин и Geometry), шейдер вычислений разрабатывается и реализуется с помощью [HLSL](/windows/desktop/direct3dhlsl/dx-graphics-hlsl) , но именно там, где заканчивается сходство.</span><span class="sxs-lookup"><span data-stu-id="203f4-107">Like other programmable shaders (vertex and geometry shaders for example), a compute shader is designed and implemented with [HLSL](/windows/desktop/direct3dhlsl/dx-graphics-hlsl) but that is just about where the similarity ends.</span></span> <span data-ttu-id="203f4-108">Шейдер вычислений позволяет выполнять высокоскоростные универсальные вычисления и использует большое количество параллельных процессоров в графическом процессоре.</span><span class="sxs-lookup"><span data-stu-id="203f4-108">A compute shader provides high-speed general purpose computing and takes advantage of the large numbers of parallel processors on the graphics processing unit (GPU).</span></span> <span data-ttu-id="203f4-109">Шейдер вычислений предоставляет функции совместного использования памяти и синхронизации потоков, чтобы разрешить использование более эффективных методов параллельного программирования.</span><span class="sxs-lookup"><span data-stu-id="203f4-109">The compute shader provides memory sharing and thread synchronization features to allow more effective parallel programming methods.</span></span> <span data-ttu-id="203f4-110">Вызов метода [**ссылку ID3D11DeviceContext::D Patch**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dispatch) или [**ссылку ID3D11DeviceContext::D испатчиндирект**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dispatchindirect) для выполнения команд в шейдере вычислений.</span><span class="sxs-lookup"><span data-stu-id="203f4-110">You call the [**ID3D11DeviceContext::Dispatch**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dispatch) or [**ID3D11DeviceContext::DispatchIndirect**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dispatchindirect) method to execute commands in a compute shader.</span></span> <span data-ttu-id="203f4-111">Шейдер вычислений может выполняться параллельно во многих потоках.</span><span class="sxs-lookup"><span data-stu-id="203f4-111">A compute shader can run on many threads in parallel.</span></span>

## <a name="using-compute-shader-on-direct3d-10x-hardware"></a><span data-ttu-id="203f4-112">Использование COMPUTE Shader на оборудовании Direct3D 10. x</span><span class="sxs-lookup"><span data-stu-id="203f4-112">Using Compute Shader on Direct3D 10.x Hardware</span></span>

<span data-ttu-id="203f4-113">Вычисление шейдера в Microsoft Direct3D 10 также известно как DirectCompute 4. x.</span><span class="sxs-lookup"><span data-stu-id="203f4-113">A compute shader on Microsoft Direct3D 10 is also known as DirectCompute 4.x.</span></span>

<span data-ttu-id="203f4-114">Если вы используете API Direct3D 11 и обновленные драйверы, то аппаратный [уровень компонентов](overviews-direct3d-11-devices-downlevel-intro.md) 10 и 10,1 Direct3D может дополнительно поддерживать ограниченную форму DirectCompute, использующую \_ Профили CS 4 \_ 0 и \_ CS \_ 4 [](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-models)1.</span><span class="sxs-lookup"><span data-stu-id="203f4-114">If you use the Direct3D 11 API and updated drivers, [feature level](overviews-direct3d-11-devices-downlevel-intro.md) 10 and 10.1 Direct3D hardware can optionally support a limited form of DirectCompute that uses the cs\_4\_0 and cs\_4\_1 [profiles](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-models).</span></span> <span data-ttu-id="203f4-115">При использовании DirectCompute на этом оборудовании учитывайте следующие ограничения.</span><span class="sxs-lookup"><span data-stu-id="203f4-115">When you use DirectCompute on this hardware, keep the following limitations in mind:</span></span>

-   <span data-ttu-id="203f4-116">Максимальное число потоков ограничено размером в \_ \_ группу потоков D3D11 CS 4 \_ X MAX threads \_ \_ \_ \_ \_ на \_ группу (768) на группу.</span><span class="sxs-lookup"><span data-stu-id="203f4-116">The maximum number of threads is limited to D3D11\_CS\_4\_X\_THREAD\_GROUP\_MAX\_THREADS\_PER\_GROUP (768) per group.</span></span>
-   <span data-ttu-id="203f4-117">Размерность X и Y **numthreads** ограничена D3D11 \_ CS \_ 4 \_ x \_ \_ группа потоков \_ Max \_ x (768) и D3D11 \_ CS \_ 4 \_ x \_ Thread \_ Group \_ Max \_ Y (768).</span><span class="sxs-lookup"><span data-stu-id="203f4-117">The X and Y dimension of **numthreads** is limited to D3D11\_CS\_4\_X\_THREAD\_GROUP\_MAX\_X (768) and D3D11\_CS\_4\_X\_THREAD\_GROUP\_MAX\_Y (768).</span></span>
-   <span data-ttu-id="203f4-118">Размер Z-измерения **numthreads** ограничен 1.</span><span class="sxs-lookup"><span data-stu-id="203f4-118">The Z dimension of **numthreads** is limited to 1.</span></span>
-   <span data-ttu-id="203f4-119">Размерность Z для диспетчеризации ограничена D3D11 \_ CS \_ 4 \_ X \_ Dispatch максимальное количество \_ \_ групп потоков \_ \_ в \_ Z \_ -измерении (1).</span><span class="sxs-lookup"><span data-stu-id="203f4-119">The Z dimension of dispatch is limited to D3D11\_CS\_4\_X\_DISPATCH\_MAX\_THREAD\_GROUPS\_IN\_Z\_DIMENSION (1).</span></span>
-   <span data-ttu-id="203f4-120">Только одно неупорядоченное представление доступа можно привязать к шейдеру (D3D11 \_ CS \_ 4 \_ X \_ UAV \_ registers \_ Count равен 1).</span><span class="sxs-lookup"><span data-stu-id="203f4-120">Only one unordered-access view can be bound to the shader (D3D11\_CS\_4\_X\_UAV\_REGISTER\_COUNT is 1).</span></span>
-   <span data-ttu-id="203f4-121">В качестве неупорядоченных представлений доступа доступны только [рвструктуредбуффер](/windows/desktop/direct3dhlsl/sm5-object-rwstructuredbuffer)s и [рвбитеаддрессбуффер](/windows/desktop/direct3dhlsl/sm5-object-rwbyteaddressbuffer).</span><span class="sxs-lookup"><span data-stu-id="203f4-121">Only [RWStructuredBuffer](/windows/desktop/direct3dhlsl/sm5-object-rwstructuredbuffer)s and [RWByteAddressBuffer](/windows/desktop/direct3dhlsl/sm5-object-rwbyteaddressbuffer)s are available as unordered-access views.</span></span>
-   <span data-ttu-id="203f4-122">Поток может получить доступ к собственному региону в памяти граупшаред для записи, хотя он может считывать из любого расположения.</span><span class="sxs-lookup"><span data-stu-id="203f4-122">A thread can only access its own region in groupshared memory for writing, though it can read from any location.</span></span>
-   <span data-ttu-id="203f4-123">[ОКП \_](/previous-versions/windows/desktop/legacy/ff471569(v=vs.85))При доступе к памяти **граупшаред** для записи необходимо использовать граупиндекс или [SV \_ граупсреадид](/windows/desktop/direct3dhlsl/sv-groupthreadid) .</span><span class="sxs-lookup"><span data-stu-id="203f4-123">[SV\_GroupIndex](/previous-versions/windows/desktop/legacy/ff471569(v=vs.85)) or [SV\_GroupThreadID](/windows/desktop/direct3dhlsl/sv-groupthreadid) must be used when accessing **groupshared** memory for writing.</span></span>
-   <span data-ttu-id="203f4-124">Память **граупшаред** ограничена 16 КБ на группу.</span><span class="sxs-lookup"><span data-stu-id="203f4-124">**Groupshared** memory is limited to 16KB per group.</span></span>
-   <span data-ttu-id="203f4-125">Один поток ограничен размером 256 байт **граупшаред** памяти для записи.</span><span class="sxs-lookup"><span data-stu-id="203f4-125">A single thread is limited to a 256 byte region of **groupshared** memory for writing.</span></span>
-   <span data-ttu-id="203f4-126">Атомарные инструкции недоступны.</span><span class="sxs-lookup"><span data-stu-id="203f4-126">No atomic instructions are available.</span></span>
-   <span data-ttu-id="203f4-127">Значения двойной точности недоступны.</span><span class="sxs-lookup"><span data-stu-id="203f4-127">No double-precision values are available.</span></span>

## <a name="using-compute-shader-on-direct3d-11x-hardware"></a><span data-ttu-id="203f4-128">Использование COMPUTE Shader на оборудовании Direct3D 11. x</span><span class="sxs-lookup"><span data-stu-id="203f4-128">Using Compute Shader on Direct3D 11.x Hardware</span></span>

<span data-ttu-id="203f4-129">Вычисление шейдера в Direct3D 11 также известно как DirectCompute 5,0.</span><span class="sxs-lookup"><span data-stu-id="203f4-129">A compute shader on Direct3D 11 is also known as DirectCompute 5.0.</span></span>

<span data-ttu-id="203f4-130">При использовании DirectCompute с \_ \_ [профилями](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-models)CS 5 0 учитывайте следующие пункты:</span><span class="sxs-lookup"><span data-stu-id="203f4-130">When you use DirectCompute with cs\_5\_0 [profiles](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-models), keep the following items in mind:</span></span>

-   <span data-ttu-id="203f4-131">Максимальное число потоков ограничено D3D11 \_ CS количество \_ \_ \_ \_ потоков \_ в группе \_ (1024) для каждой группы.</span><span class="sxs-lookup"><span data-stu-id="203f4-131">The maximum number of threads is limited to D3D11\_CS\_THREAD\_GROUP\_MAX\_THREADS\_PER\_GROUP (1024) per group.</span></span>
-   <span data-ttu-id="203f4-132">Размерность X и Y **numthreads** ограничена D3D11 CS для \_ \_ группы потоков \_ \_ Max \_ X (1024) и D3D11 \_ CS \_ \_ \_ Max \_ Y (1024).</span><span class="sxs-lookup"><span data-stu-id="203f4-132">The X and Y dimension of **numthreads** is limited to D3D11\_CS\_THREAD\_GROUP\_MAX\_X (1024) and D3D11\_CS\_THREAD\_GROUP\_MAX\_Y (1024).</span></span>
-   <span data-ttu-id="203f4-133">Измерение Z для **numthreads** ограничено \_ группой потоков D3D11 CS \_ \_ \_ Max \_ Z (64).</span><span class="sxs-lookup"><span data-stu-id="203f4-133">The Z dimension of **numthreads** is limited to D3D11\_CS\_THREAD\_GROUP\_MAX\_Z (64).</span></span>
-   <span data-ttu-id="203f4-134">Максимальная длина диспетчеризации ограничена D3D11 \_ CS \_ Максимальное количество \_ \_ \_ групп потоков \_ на \_ измерение (65535).</span><span class="sxs-lookup"><span data-stu-id="203f4-134">The maximum dimension of dispatch is limited to D3D11\_CS\_DISPATCH\_MAX\_THREAD\_GROUPS\_PER\_DIMENSION (65535).</span></span>
-   <span data-ttu-id="203f4-135">Максимальное число неупорядоченных представлений доступа, которые могут быть привязаны к шейдеру, — D3D11 \_ PS \_ CS \_ UAV \_ Register \_ (8).</span><span class="sxs-lookup"><span data-stu-id="203f4-135">The maximum number of unordered-access views that can be bound to a shader is D3D11\_PS\_CS\_UAV\_REGISTER\_COUNT (8).</span></span>
-   <span data-ttu-id="203f4-136">Поддерживает [рвструктуредбуффер](/windows/desktop/direct3dhlsl/sm5-object-rwstructuredbuffer)s, [рвбитеаддрессбуффер](/windows/desktop/direct3dhlsl/sm5-object-rwbyteaddressbuffer)и типизированные неупорядоченные представления доступа ([RWTexture1D](/windows/desktop/direct3dhlsl/sm5-object-rwtexture1d), [RWTexture2D](/windows/desktop/direct3dhlsl/sm5-object-rwtexture2d), [RWTexture3D](/windows/desktop/direct3dhlsl/sm5-object-rwtexture3d)и т. д.).</span><span class="sxs-lookup"><span data-stu-id="203f4-136">Supports [RWStructuredBuffer](/windows/desktop/direct3dhlsl/sm5-object-rwstructuredbuffer)s, [RWByteAddressBuffer](/windows/desktop/direct3dhlsl/sm5-object-rwbyteaddressbuffer)s, and typed unordered-access views ([RWTexture1D](/windows/desktop/direct3dhlsl/sm5-object-rwtexture1d), [RWTexture2D](/windows/desktop/direct3dhlsl/sm5-object-rwtexture2d), [RWTexture3D](/windows/desktop/direct3dhlsl/sm5-object-rwtexture3d), and so on).</span></span>
-   <span data-ttu-id="203f4-137">Доступны атомарные инструкции.</span><span class="sxs-lookup"><span data-stu-id="203f4-137">Atomic instructions are available.</span></span>
-   <span data-ttu-id="203f4-138">Может быть доступна поддержка двойной точности.</span><span class="sxs-lookup"><span data-stu-id="203f4-138">Double-precision support might be available.</span></span> <span data-ttu-id="203f4-139">Сведения о том, как определить, доступна ли двойная точность, см. в разделе [**D3D11- \_ функция \_ double**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_feature).</span><span class="sxs-lookup"><span data-stu-id="203f4-139">For information about how to determine whether double-precision is available, see [**D3D11\_FEATURE\_DOUBLES**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_feature).</span></span>

## <a name="in-this-section"></a><span data-ttu-id="203f4-140">В этом разделе</span><span class="sxs-lookup"><span data-stu-id="203f4-140">In this section</span></span>



| <span data-ttu-id="203f4-141">Раздел</span><span class="sxs-lookup"><span data-stu-id="203f4-141">Topic</span></span>                                                                              | <span data-ttu-id="203f4-142">Описание</span><span class="sxs-lookup"><span data-stu-id="203f4-142">Description</span></span>                                                                                                                                                                                                                                                           |
|------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="203f4-143">Новые типы ресурсов</span><span class="sxs-lookup"><span data-stu-id="203f4-143">New Resource Types</span></span>](direct3d-11-advanced-stages-cs-resources.md)<br/>      | <span data-ttu-id="203f4-144">В Direct3D 11 были добавлены несколько новых типов ресурсов.</span><span class="sxs-lookup"><span data-stu-id="203f4-144">Several new resource types have been added in Direct3D 11.</span></span><br/>                                                                                                                                                                                                 |
| [<span data-ttu-id="203f4-145">Доступ к ресурсам</span><span class="sxs-lookup"><span data-stu-id="203f4-145">Accessing Resources</span></span>](direct3d-11-advanced-stages-cs-access.md)<br/>        | <span data-ttu-id="203f4-146">Существует несколько способов доступа к [ресурсам](overviews-direct3d-11-resources-types.md).</span><span class="sxs-lookup"><span data-stu-id="203f4-146">There are several ways to access [resources](overviews-direct3d-11-resources-types.md).</span></span><br/>                                                                                                                                                                   |
| [<span data-ttu-id="203f4-147">Атомарные функции</span><span class="sxs-lookup"><span data-stu-id="203f4-147">Atomic Functions</span></span>](direct3d-11-advanced-stages-cs-atomic-functions.md)<br/> | <span data-ttu-id="203f4-148">Чтобы получить доступ к новому типу ресурса или общей памяти, используйте блокируемую встроенную функцию.</span><span class="sxs-lookup"><span data-stu-id="203f4-148">To access a new resource type or shared memory, use an interlocked intrinsic function.</span></span> <span data-ttu-id="203f4-149">Блокируемые функции гарантированно работают в атомарном режиме.</span><span class="sxs-lookup"><span data-stu-id="203f4-149">Interlocked functions are guaranteed to operate atomically.</span></span> <span data-ttu-id="203f4-150">То есть они гарантированно выполняются в запрограммированном порядке.</span><span class="sxs-lookup"><span data-stu-id="203f4-150">That is, they are guaranteed to occur in the order programmed.</span></span> <span data-ttu-id="203f4-151">В этом разделе перечислены атомарные функции.</span><span class="sxs-lookup"><span data-stu-id="203f4-151">This section lists the atomic functions.</span></span><br/> |



 

## <a name="related-topics"></a><span data-ttu-id="203f4-152">Связанные темы</span><span class="sxs-lookup"><span data-stu-id="203f4-152">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="203f4-153">Графический конвейер</span><span class="sxs-lookup"><span data-stu-id="203f4-153">Graphics Pipeline</span></span>](overviews-direct3d-11-graphics-pipeline.md)
</dt> <dt>

[<span data-ttu-id="203f4-154">Как создать вычисление шейдера</span><span class="sxs-lookup"><span data-stu-id="203f4-154">How To: Create a Compute Shader</span></span>](direct3d-11-advanced-stages-compute-create.md)
</dt> </dl>

 

