---
title: Вызов библиотек DLL расширения
description: Вызывает эти функции для каждого действительного пакета проверки подлинности или учета, полученного от сервера доступа к сети (NAS).
ms.assetid: 6d738ad7-cce5-4835-97d6-c57173c79a16
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8bc96fab078a982f23f5f5dd86d51dbed46d5541
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103987739"
---
# <a name="invoking-the-extension-dlls"></a><span data-ttu-id="99cb2-103">Вызов библиотек DLL расширения</span><span class="sxs-lookup"><span data-stu-id="99cb2-103">Invoking the Extension DLLs</span></span>

> [!Note]  
> <span data-ttu-id="99cb2-104">Служба проверки подлинности в Интернете (IAS) переименовала сервер политики сети (NPS), начиная с Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="99cb2-104">Internet Authentication Service (IAS) was renamed Network Policy Server (NPS) starting with Windows Server 2008.</span></span> <span data-ttu-id="99cb2-105">Содержимое этого раздела относится как к IAS, так и к NPS.</span><span class="sxs-lookup"><span data-stu-id="99cb2-105">The content of this topic applies to both IAS and NPS.</span></span> <span data-ttu-id="99cb2-106">По всему тексту NPS используется для ссылки на все версии службы, включая версии, изначально называемые IAS.</span><span class="sxs-lookup"><span data-stu-id="99cb2-106">Throughout the text, NPS is used to refer to all versions of the service, including the versions originally referred to as IAS.</span></span>

 

<span data-ttu-id="99cb2-107">Библиотеки расширения NPS должны экспортировать по крайней мере одну из следующих функций обратного вызова: [*радиусекстенсионпроцесс*](/windows/desktop/api/authif/nc-authif-pradius_extension_process), [*радиусекстенсионпроцессекс*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex)или [*RadiusExtensionProcess2*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2).</span><span class="sxs-lookup"><span data-stu-id="99cb2-107">NPS Extension DLLs must export at least one of the following callback functions: [*RadiusExtensionProcess*](/windows/desktop/api/authif/nc-authif-pradius_extension_process), [*RadiusExtensionProcessEx*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex), or [*RadiusExtensionProcess2*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2).</span></span> <span data-ttu-id="99cb2-108">Сервер политики сети вызывает эти функции для каждого действительного пакета проверки подлинности или учета, полученного от сервера доступа к сети (NAS).</span><span class="sxs-lookup"><span data-stu-id="99cb2-108">NPS calls these function for each valid authentication or accounting packet that it receives from the Network Access Server (NAS).</span></span> <span data-ttu-id="99cb2-109">NPS вызывает эти функции в каждой из библиотек DLL, перечисленных ниже [раздела Параметры реестра](/windows/desktop/Nps/ias-setting-up-the-extension-and-authorization-dlls)NPS.</span><span class="sxs-lookup"><span data-stu-id="99cb2-109">NPS calls these functions in each of the DLLs listed below the NPS' [Parameters registry key](/windows/desktop/Nps/ias-setting-up-the-extension-and-authorization-dlls).</span></span> <span data-ttu-id="99cb2-110">Библиотеки DLL вызываются в том порядке, в котором они перечислены.</span><span class="sxs-lookup"><span data-stu-id="99cb2-110">The DLLs are called in the order in which they are listed.</span></span>

<span data-ttu-id="99cb2-111">Если библиотека DLL расширения NPS экспортирует более одной из перечисленных выше функций, NPS вызывает только один из них: новейшая функция, поддерживаемая операционной системой.</span><span class="sxs-lookup"><span data-stu-id="99cb2-111">If an NPS Extension DLL exports more than one of the above functions, NPS invokes just one of them: the newest function that is supported by the operating system.</span></span>

> [!Note]  
> <span data-ttu-id="99cb2-112">Изначально служба IAS поддерживала только [*радиусекстенсионпроцесс*](/windows/desktop/api/authif/nc-authif-pradius_extension_process).</span><span class="sxs-lookup"><span data-stu-id="99cb2-112">IAS originally supported only [*RadiusExtensionProcess*](/windows/desktop/api/authif/nc-authif-pradius_extension_process).</span></span> <span data-ttu-id="99cb2-113">IAS поддерживает также [*радиусекстенсионпроцессекс*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex).</span><span class="sxs-lookup"><span data-stu-id="99cb2-113">IAS supports also [*RadiusExtensionProcessEx*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex).</span></span> <span data-ttu-id="99cb2-114">IAS (и более поздние версии NPS) поддерживает также [*RadiusExtensionProcess2*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2).</span><span class="sxs-lookup"><span data-stu-id="99cb2-114">IAS (and later NPS) supports also [*RadiusExtensionProcess2*](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2).</span></span>

 

<span data-ttu-id="99cb2-115">Библиотеки DLL расширения NPS также могут экспортировать функции [**радиусекстенсионинит**](/windows/desktop/api/authif/nc-authif-pradius_extension_init) и [**радиусекстенсионтерм**](/windows/desktop/api/authif/nc-authif-pradius_extension_term) .</span><span class="sxs-lookup"><span data-stu-id="99cb2-115">NPS Extension DLLs may also export [**RadiusExtensionInit**](/windows/desktop/api/authif/nc-authif-pradius_extension_init) and [**RadiusExtensionTerm**](/windows/desktop/api/authif/nc-authif-pradius_extension_term) functions.</span></span> <span data-ttu-id="99cb2-116">Если они есть, NPS вызывает эти функции при запуске и остановке службы соответственно.</span><span class="sxs-lookup"><span data-stu-id="99cb2-116">If they are present, NPS calls these functions when the service starts and stops, respectively.</span></span>

## <a name="radiusextensionprocess-callback-function"></a><span data-ttu-id="99cb2-117">Функция обратного вызова Радиусекстенсионпроцесс</span><span class="sxs-lookup"><span data-stu-id="99cb2-117">RadiusExtensionProcess Callback Function</span></span>

<span data-ttu-id="99cb2-118">В библиотеке DLL расширения проверки подлинности [*радиусекстенсионпроцесс*](/windows/desktop/api/authif/nc-authif-pradius_extension_process) получает все атрибуты, полученные NPS в запросе проверки подлинности или учета.</span><span class="sxs-lookup"><span data-stu-id="99cb2-118">In an Authentication Extension DLL, [*RadiusExtensionProcess*](/windows/desktop/api/authif/nc-authif-pradius_extension_process) receives all the attributes that are received by NPS in the authentication or accounting request.</span></span> <span data-ttu-id="99cb2-119">Используя эти атрибуты, функция может выполнять дополнительные проверки, проверять разрешения пользователя или передавать записи учета на центральный сервер состояний.</span><span class="sxs-lookup"><span data-stu-id="99cb2-119">Using these attributes, the function can perform additional validations, verify the user's authorizations, or send accounting records to a central state server.</span></span>

<span data-ttu-id="99cb2-120">В библиотеке DLL расширения авторизации **радиусекстенсионпроцесс** получает все атрибуты, созданные службой авторизации NPS.</span><span class="sxs-lookup"><span data-stu-id="99cb2-120">In an Authorization Extension DLL, **RadiusExtensionProcess** receives all the attributes generated by the NPS authorization service.</span></span> <span data-ttu-id="99cb2-121">Это атрибуты, возвращаемые в пакете Access-Accept.</span><span class="sxs-lookup"><span data-stu-id="99cb2-121">These are the attributes that are returned in the Access-Accept packet.</span></span>

<span data-ttu-id="99cb2-122">После вызова **радиусекстенсионпроцесс** действие, ВЫПОЛНЯЕМое NPS, зависит от возвращаемого значения **радиусекстенсионпроцесс** и значения, возвращаемого в параметре *пфактион* .</span><span class="sxs-lookup"><span data-stu-id="99cb2-122">After calling **RadiusExtensionProcess**, the action performed by NPS depends on the return value of **RadiusExtensionProcess**, and the value returned in the *pfAction* parameter.</span></span> <span data-ttu-id="99cb2-123">Эти значения перечислены в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="99cb2-123">These values are listed in the following table.</span></span>



| <span data-ttu-id="99cb2-124">*пфактион*</span><span class="sxs-lookup"><span data-stu-id="99cb2-124">*pfAction*</span></span> | <span data-ttu-id="99cb2-125">Библиотека DLL расширения проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="99cb2-125">Authentication Extension DLL</span></span>                                                                                                                                            | <span data-ttu-id="99cb2-126">Библиотека DLL расширения авторизации</span><span class="sxs-lookup"><span data-stu-id="99cb2-126">Authorization Extension DLL</span></span>                                                                                                                                 |
|------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="99cb2-127">Принять</span><span class="sxs-lookup"><span data-stu-id="99cb2-127">Accept</span></span>     | <span data-ttu-id="99cb2-128">Обходит все последующие библиотеки DLL расширения проверки подлинности, а также обходит механизм проверки подлинности NPS.</span><span class="sxs-lookup"><span data-stu-id="99cb2-128">Bypasses any further Authentication Extension DLLs and also bypasses the NPS authentication mechanism.</span></span>                                                                  | <span data-ttu-id="99cb2-129">Accept не разрешено.</span><span class="sxs-lookup"><span data-stu-id="99cb2-129">Accept not allowed.</span></span>                                                                                                                                         |
| <span data-ttu-id="99cb2-130">Reject</span><span class="sxs-lookup"><span data-stu-id="99cb2-130">Reject</span></span>     | <span data-ttu-id="99cb2-131">Обходит все последующие библиотеки DLL расширения проверки подлинности, а также обходит механизм проверки подлинности NPS.</span><span class="sxs-lookup"><span data-stu-id="99cb2-131">Bypasses any further Authentication Extension DLLs and also bypasses the NPS authentication mechanism.</span></span> <span data-ttu-id="99cb2-132">Отправлен пакет Access-Reject.</span><span class="sxs-lookup"><span data-stu-id="99cb2-132">Access-Reject packet is sent.</span></span>                                    | <span data-ttu-id="99cb2-133">Обход всех дальнейших библиотек DLL расширения авторизации.</span><span class="sxs-lookup"><span data-stu-id="99cb2-133">Bypasses any further Authorization Extension DLLs.</span></span>                                                                                                          |
| <span data-ttu-id="99cb2-134">Продолжить</span><span class="sxs-lookup"><span data-stu-id="99cb2-134">Continue</span></span>   | <span data-ttu-id="99cb2-135">Пакет отправляется следующей библиотеке DLL расширения проверки подлинности или механизму проверки подлинности NPS, если в реестре не указаны дополнительные библиотеки DLL расширения проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="99cb2-135">The packet is sent to the next Authentication Extension DLL or to the NPS authentication mechanism if no more Authentication Extension DLLs are listed in the registry.</span></span> | <span data-ttu-id="99cb2-136">Пакет отправляется в следующую библиотеку DLL расширения авторизации или в журнал учета NPS, если в реестре не указаны другие библиотеки DLL расширения авторизации.</span><span class="sxs-lookup"><span data-stu-id="99cb2-136">The packet is sent to the next Authorization Extension DLL or to the NPS accounting log if no more Authorization Extension DLLs are listed in the registry.</span></span> |



 

<span data-ttu-id="99cb2-137">Для всех DLL-библиотек расширения, если **радиусекстенсионпроцесс** возвращает ошибку, пакет отбрасывается.</span><span class="sxs-lookup"><span data-stu-id="99cb2-137">For all Extension DLLs, if **RadiusExtensionProcess** returns an error, the packet is discarded.</span></span> <span data-ttu-id="99cb2-138">Пакеты, которые отбрасываются из-за ошибки, не обрабатываются журналом учета NPS.</span><span class="sxs-lookup"><span data-stu-id="99cb2-138">Packets that are discarded because of an error are not processed by the NPS accounting log.</span></span>

<span data-ttu-id="99cb2-139">При возникновении ошибки NPS отправляет в журнал событий общую ошибку.</span><span class="sxs-lookup"><span data-stu-id="99cb2-139">If an error occurs, NPS posts a generic error event to the Event Log.</span></span> <span data-ttu-id="99cb2-140">Рекомендуется, чтобы библиотека DLL расширения предпредоставил дополнительные функции ведения журнала ошибок.</span><span class="sxs-lookup"><span data-stu-id="99cb2-140">It is recommended that the Extension DLL provide additional error logging.</span></span>

<span data-ttu-id="99cb2-141">Дополнительные сведения и схема, представляющая предыдущий процесс, см. в разделе [о расширениях NPS](/windows/desktop/Nps/ias-about-internet-authentication-service).</span><span class="sxs-lookup"><span data-stu-id="99cb2-141">For more information and a diagram that represents the preceding process, see [About NPS Extensions](/windows/desktop/Nps/ias-about-internet-authentication-service).</span></span>

<span data-ttu-id="99cb2-142">**Радиусекстенсионпроцесс** должен возвращать ошибку, если не может проверить принятие или отклонение пакета.</span><span class="sxs-lookup"><span data-stu-id="99cb2-142">**RadiusExtensionProcess** should return an error if it cannot verify the acceptance or rejection of the packet.</span></span> <span data-ttu-id="99cb2-143">Такая ситуация может возникать, если сетевая проблема не дает **радиусекстенсионпроцесс** взаимодействовать с базой данных проверки подлинности пользователей.</span><span class="sxs-lookup"><span data-stu-id="99cb2-143">This situation might arise if a network problem prevents **RadiusExtensionProcess** from communicating with its user authentication database.</span></span>

<span data-ttu-id="99cb2-144">При обработке пакета учета параметр *пфактион* имеет **значение NULL**, поэтому *пфактион* не может быть установлен.</span><span class="sxs-lookup"><span data-stu-id="99cb2-144">When processing an accounting packet, the *pfAction* parameter is **NULL**, so *pfAction* cannot be set.</span></span> <span data-ttu-id="99cb2-145">Возврат ошибки из функции **радиусекстенсионпроцесс** при обработке запроса учета приводит к отмене запроса сервером политики сети.</span><span class="sxs-lookup"><span data-stu-id="99cb2-145">Returning an error from the **RadiusExtensionProcess** function while processing an accounting request causes the request to be discarded by NPS.</span></span>

> [!Note]  
> <span data-ttu-id="99cb2-146">После получения согласия NPS не вызывает **радиусекстенсионпроцесс** в остальных библиотеках DLL в последовательности.</span><span class="sxs-lookup"><span data-stu-id="99cb2-146">After receiving an accept, NPS does not call **RadiusExtensionProcess** in the remaining DLLs in the sequence.</span></span> <span data-ttu-id="99cb2-147">Поскольку некоторые функции проверки подлинности также могут реализовывать авторизацию, пропуска таких функций проверки подлинности может привести к пропуску авторизации.</span><span class="sxs-lookup"><span data-stu-id="99cb2-147">Because some authentication functions may also implement authorizations, skipping such authentication functions may cause authorizations to be omitted.</span></span> <span data-ttu-id="99cb2-148">Если экземпляр [**радиусекстенсионпроцесс**](/windows/desktop/api/authif/nc-authif-pradius_extension_process) возвращает Accept, важно не делать никаких предположений о том, какие авторизации получены.</span><span class="sxs-lookup"><span data-stu-id="99cb2-148">If an instance of [**RadiusExtensionProcess**](/windows/desktop/api/authif/nc-authif-pradius_extension_process) returns Accept, it is important not to make any assumptions about the authorizations retrieved.</span></span>

 

<span data-ttu-id="99cb2-149">Если возвращается значение Continue или Accept, то профиль, соответствующий области, отправляется обратно в пакет Access-Accept.</span><span class="sxs-lookup"><span data-stu-id="99cb2-149">If Continue or Accept is returned, the profile corresponding to the realm is sent back in the Access-Accept packet.</span></span>

<span data-ttu-id="99cb2-150">Библиотеки DLL расширения проверки подлинности должны сосуществовать с встроенными поставщиками проверки подлинности NPS и с другими библиотеками DLL расширения.</span><span class="sxs-lookup"><span data-stu-id="99cb2-150">Authentication Extension DLLs should be designed to coexist with the built-in NPS authentication providers and with other Extension DLLs.</span></span> <span data-ttu-id="99cb2-151">Если расширение применимо только к определенной пользовательской базе данных (например, Windows Active Directory), то перед обработкой запроса необходимо проверить атрибут [**ратпровидер**](/windows/desktop/api/authif/ne-authif-radius_authentication_provider) , переданный в параметре *паттрс* .</span><span class="sxs-lookup"><span data-stu-id="99cb2-151">If an extension is only applicable to a certain user database (for example Windows Active Directory), then it should verify the [**ratProvider**](/windows/desktop/api/authif/ne-authif-radius_authentication_provider) attribute passed in the *pAttrs* parameter, before processing the request.</span></span> <span data-ttu-id="99cb2-152">Атрибут Ратпровидер должен быть одним из списка атрибутов, на который указывает параметр *паттрс* .</span><span class="sxs-lookup"><span data-stu-id="99cb2-152">The ratProvider attribute would be one of a list of attributes pointed to by the *pAttrs* parameter.</span></span>

<span data-ttu-id="99cb2-153">Библиотеки DLL расширения не должны отклонять запросы, так как отсутствуют необходимые атрибуты.</span><span class="sxs-lookup"><span data-stu-id="99cb2-153">Extension DLLs should not reject requests because required attributes are missing.</span></span> <span data-ttu-id="99cb2-154">Например, если для расширения проверки подлинности требуется атрибут User-Password, Ратусерпассворд, а атрибут отсутствует, расширение должно возвращать действие Раконтинуе, чтобы предоставить другим расширениям и поставщикам возможность обработать запрос.</span><span class="sxs-lookup"><span data-stu-id="99cb2-154">For example, if an authentication extension requires the User-Password attribute, ratUserPassword, and the attribute is not present, the extension should return an action of raContinue to give other extensions and providers a chance to process the request.</span></span>

<span data-ttu-id="99cb2-155">NPS вызывает функцию [**радиусекстенсионпроцесс**](/windows/desktop/api/authif/nc-authif-pradius_extension_process) после принятия решения об использовании определенной базы данных проверки подлинности, но до того, как пользователь прошел проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="99cb2-155">NPS calls the [**RadiusExtensionProcess**](/windows/desktop/api/authif/nc-authif-pradius_extension_process) function after the decision to use a particular authentication database is made, but before the user is authenticated.</span></span> <span data-ttu-id="99cb2-156">Таким образом, информация о том, какая база данных проверки подлинности должна использоваться, доступна для функции, чтобы функция могла проверить авторизацию пользователя в соответствующей базе данных проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="99cb2-156">Therefore, information about which authentication database to use is available to the function, so that the function can check for the user's authorizations in the appropriate authentication database.</span></span> <span data-ttu-id="99cb2-157">NPS поддерживает различные базы данных проверки подлинности, включая Active Directory Windows.</span><span class="sxs-lookup"><span data-stu-id="99cb2-157">NPS supports various authentication databases including the Windows Active Directory.</span></span>

## <a name="radiusextensionprocessex-callback-function"></a><span data-ttu-id="99cb2-158">Функция обратного вызова Радиусекстенсионпроцессекс</span><span class="sxs-lookup"><span data-stu-id="99cb2-158">RadiusExtensionProcessEx Callback Function</span></span>

<span data-ttu-id="99cb2-159">Библиотеки расширения NPS могут экспортировать [**радиусекстенсионпроцессекс**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) , а не или в дополнение к [**радиусекстенсионпроцесс**](/windows/desktop/api/authif/nc-authif-pradius_extension_process).</span><span class="sxs-lookup"><span data-stu-id="99cb2-159">NPS Extension DLLs may export [**RadiusExtensionProcessEx**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) instead of, or in addition to, [**RadiusExtensionProcess**](/windows/desktop/api/authif/nc-authif-pradius_extension_process).</span></span> <span data-ttu-id="99cb2-160">Эта функция позволяет библиотеке DLL добавлять дополнительные атрибуты авторизации в ответ проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="99cb2-160">This function enables the DLL to append additional authorization attributes to the authentication response.</span></span>

<span data-ttu-id="99cb2-161">Те же сведения, которые описаны в разделе *функции обратного вызова радиусекстенсионпроцесс* , относятся к функции [**радиусекстенсионпроцессекс**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) .</span><span class="sxs-lookup"><span data-stu-id="99cb2-161">The same information described in the *RadiusExtensionProcess Callback Function* section applies to the [**RadiusExtensionProcessEx**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) function.</span></span>

<span data-ttu-id="99cb2-162">[**Радиусекстенсионпроцессекс**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) не может изменять или удалять существующие атрибуты.</span><span class="sxs-lookup"><span data-stu-id="99cb2-162">[**RadiusExtensionProcessEx**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) cannot modify or remove any of the attributes that are present.</span></span> <span data-ttu-id="99cb2-163">Если возникает ситуация, когда библиотека DLL должна изменять или удалять атрибуты, единственным вариантом является использование пользовательского интерфейса NPS для обеспечения отсутствия атрибутов.</span><span class="sxs-lookup"><span data-stu-id="99cb2-163">If a scenario arises in which the DLL must modify or remove attributes, the only option is to use the NPS user interface to ensure that the attributes are not present.</span></span> <span data-ttu-id="99cb2-164">По умолчанию атрибуты авторизации отсутствуют.</span><span class="sxs-lookup"><span data-stu-id="99cb2-164">By default, no authorization attributes are present.</span></span> <span data-ttu-id="99cb2-165">Все существующие должны быть добавлены с помощью пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="99cb2-165">Any that are present must have been added through the user interface.</span></span>

<span data-ttu-id="99cb2-166">Если настроено несколько библиотек DLL авторизации и некоторые из этих библиотек DLL реализуют [**радиусекстенсионпроцессекс**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex), функция **радиусекстенсионпроцесс/ex** в заданной библиотеке DLL не получает атрибуты из ранее вызванных библиотек DLL авторизации.</span><span class="sxs-lookup"><span data-stu-id="99cb2-166">If multiple Authorization DLLs are configured and some of these DLLs implement [**RadiusExtensionProcessEx**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex), the **RadiusExtensionProcess/Ex** function in a given DLL does not receive the attributes from the previously called Authorization DLLs.</span></span> <span data-ttu-id="99cb2-167">Он получает только те атрибуты, которые созданы службой авторизации NPS.</span><span class="sxs-lookup"><span data-stu-id="99cb2-167">It receives only those attributes generated by the NPS authorization service.</span></span>

## <a name="radiusextensionprocess2-callback-function"></a><span data-ttu-id="99cb2-168">Функция обратного вызова RadiusExtensionProcess2</span><span class="sxs-lookup"><span data-stu-id="99cb2-168">RadiusExtensionProcess2 Callback Function</span></span>

<span data-ttu-id="99cb2-169">Библиотеки DLL расширения NPS также могут экспортировать [**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2) , а не [**радиусекстенсионпроцесс**](/windows/desktop/api/authif/nc-authif-pradius_extension_process) и **радиусекстенсионпроцессекс**.</span><span class="sxs-lookup"><span data-stu-id="99cb2-169">NPS Extension DLLs may also export [**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2) instead of, or in addition to, [**RadiusExtensionProcess**](/windows/desktop/api/authif/nc-authif-pradius_extension_process) and **RadiusExtensionProcessEx**.</span></span> <span data-ttu-id="99cb2-170">Эта функция позволяет библиотеке DLL добавлять, изменять и удалять атрибуты в запросе или ответе проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="99cb2-170">This function enables the DLL to add, modify, and remove attributes to and from the authentication request or response.</span></span>

<span data-ttu-id="99cb2-171">Те же сведения, которые описаны в разделе *функции обратного вызова радиусекстенсионпроцессекс* , применяются к функции [**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) со следующими исключениями.</span><span class="sxs-lookup"><span data-stu-id="99cb2-171">The same information described in the *RadiusExtensionProcessEx Callback Function* section applies to the [**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_ex) function, with the following exceptions:</span></span>

-   <span data-ttu-id="99cb2-172">В DLL-библиотеке авторизации **RadiusExtensionProcess2** получает атрибуты, созданные службой авторизации NPS, и атрибуты, созданные из ранее вызванных библиотек DLL авторизации.</span><span class="sxs-lookup"><span data-stu-id="99cb2-172">In an Authorization DLL, **RadiusExtensionProcess2** receives both the attributes generated by the NPS authorization service and the attributes generated from previously called Authorization DLLs.</span></span>
-   <span data-ttu-id="99cb2-173">[**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2) не имеет параметра *пфактион* .</span><span class="sxs-lookup"><span data-stu-id="99cb2-173">[**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2) does not have a *pfAction* parameter.</span></span> <span data-ttu-id="99cb2-174">**RadiusExtensionProcess2** задает окончательное расстановку запроса с помощью функции [**сетреспонсетипе**](/previous-versions/ms688462(v=vs.85)) , предоставленной в [**структуре \_ \_ управляющего \_ блока расширения RADIUS**](/windows/desktop/api/authif/ns-authif-radius_extension_control_block) .</span><span class="sxs-lookup"><span data-stu-id="99cb2-174">**RadiusExtensionProcess2** sets the final disposition of the request using the [**SetResponseType**](/previous-versions/ms688462(v=vs.85)) function provided in the [**RADIUS\_EXTENSION\_CONTROL\_BLOCK**](/windows/desktop/api/authif/ns-authif-radius_extension_control_block) structure.</span></span>
-   <span data-ttu-id="99cb2-175">Сервер политики сети всегда вызывает функцию [**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2) в любых оставшихся библиотеках DLL независимо от того, были ли возвращены функции в предыдущих библиотеках DLL.</span><span class="sxs-lookup"><span data-stu-id="99cb2-175">NPS always calls the [**RadiusExtensionProcess2**](/windows/desktop/api/authif/nc-authif-pradius_extension_process_2) function in any remaining DLLs regardless of whether functions in previous DLLs returned Accept.</span></span>

## <a name="related-topics"></a><span data-ttu-id="99cb2-176">См. также</span><span class="sxs-lookup"><span data-stu-id="99cb2-176">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="99cb2-177">Настройка библиотек DLL расширения</span><span class="sxs-lookup"><span data-stu-id="99cb2-177">Setting Up the Extension DLLs</span></span>](/windows/desktop/Nps/ias-setting-up-the-extension-and-authorization-dlls)
</dt> <dt>

[<span data-ttu-id="99cb2-178">Атрибуты идентификации пользователя</span><span class="sxs-lookup"><span data-stu-id="99cb2-178">User Identification Attributes</span></span>](/windows/desktop/Nps/ias-user-identification-attributes)
</dt> </dl>

 

 