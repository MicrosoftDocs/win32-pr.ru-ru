---
description: Если вы предоставляете счетчики на 64-разрядном компьютере, необходимо установить на компьютере и 32-разрядную, и 64-разрядную версию поставщика, если вы хотите поддерживать как 32-разрядные, так и 64-разрядные потребителей.
ms.assetid: 2dba2c46-0185-4ce6-a7cc-27cdd9b19b70
title: Поддержка 64-разрядных версий
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e465529f35d8a9becb2583e9d5c00ac19a74d3be
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105663263"
---
# <a name="64-bit-support"></a><span data-ttu-id="8c2bb-103">Поддержка 64-разрядных версий</span><span class="sxs-lookup"><span data-stu-id="8c2bb-103">64-bit Support</span></span>

<span data-ttu-id="8c2bb-104">Библиотека DLL поставщика данных о производительности 64-бит не может выполняться в 32-разрядном процессе, а библиотека DLL поставщика данных о производительности 32-bit не может выполняться в 64-разрядном процессе.</span><span class="sxs-lookup"><span data-stu-id="8c2bb-104">A 64-bit performance data provider DLL cannot run in a 32-bit consumer process and a 32-bit performance data provider DLL cannot run in a 64-bit process.</span></span> <span data-ttu-id="8c2bb-105">Регистрация поставщика поддерживает только одно `Library` значение пути к библиотеке DLL поставщика данных о производительности, поэтому нельзя предоставить разные пути для использования в 32-разрядных потребителях и 64-разрядных потребителях.</span><span class="sxs-lookup"><span data-stu-id="8c2bb-105">The provider registration only supports a single `Library` value for the path to your performance data provider DLL so you cannot supply different paths to be used by 32-bit consumers and 64-bit consumers.</span></span>

<span data-ttu-id="8c2bb-106">Для поддержки поставщиков v1 в 64-разрядных операционных системах доступны следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="8c2bb-106">The following options are available to support V1 providers on 64-bit operating systems:</span></span>

- <span data-ttu-id="8c2bb-107">**Рекомендуется:** Установите и зарегистрируйте путь к 32-разрядной версии библиотеки DLL поставщика.</span><span class="sxs-lookup"><span data-stu-id="8c2bb-107">**Recommended:** Install and register the path to the 32-bit version of your provider DLL.</span></span>
  - <span data-ttu-id="8c2bb-108">32-разрядные пользователи будут работать изначально: они загружают библиотеку DLL 32-разрядного поставщика в клиентский процесс 32-bit.</span><span class="sxs-lookup"><span data-stu-id="8c2bb-108">32-bit consumers will work natively: They will load your 32-bit provider DLL into the 32-bit consumer process.</span></span>
  - <span data-ttu-id="8c2bb-109">64-разрядные потребители будут работать косвенно: они не смогут загрузить DLL-библиотеку поставщика 32 в процесс 64-bit, но Windows автоматически вернется к созданию 32-разрядного процесса перфхост, загрузке библиотеки DLL-разрядного поставщика в процесс перфхост и отправке данных о производительности из перфхост процесса в 32-разрядный процесс потребителя.</span><span class="sxs-lookup"><span data-stu-id="8c2bb-109">64-bit consumers will work indirectly: They will be unable to load your 32-bit provider DLL into the 64-bit consumer process, but Windows will automatically fall back to creating a 32-bit perfhost process, loading your 32-bit provider DLL into the perfhost process, and sending performance data from the 32-bit perfhost process to the 64-bit consumer process.</span></span>
- <span data-ttu-id="8c2bb-110">**только 64-разрядная версия:** Установите и зарегистрируйте путь к 64-разрядной версии библиотеки DLL поставщика.</span><span class="sxs-lookup"><span data-stu-id="8c2bb-110">**64-bit only:** Install and register the path to the 64-bit version of your provider DLL.</span></span>
  - <span data-ttu-id="8c2bb-111">32-разрядные пользователи завершатся сбоем: они не смогут загрузить библиотеку DLL 64-разрядного поставщика в 32-разрядный процесс.</span><span class="sxs-lookup"><span data-stu-id="8c2bb-111">32-bit consumers will fail: They will be unable to load your 64-bit provider DLL into the 32-bit process.</span></span>
  - <span data-ttu-id="8c2bb-112">64-разрядные пользователи будут работать в собственном режиме: они будут загружать библиотеку DLL поставщика 32-bit.</span><span class="sxs-lookup"><span data-stu-id="8c2bb-112">64-bit consumers will work natively: They will load your 32-bit provider DLL in-process.</span></span>

> [!NOTE]
> <span data-ttu-id="8c2bb-113">Несколько встроенных поставщиков данных о производительности Windows устанавливают 32-разрядную библиотеку DLL в `%systemroot%\syswow64` , устанавливают 64-разрядную библиотеку DLL в `%systemroot%\system32` и зарегистрируют `Library` путь как `%systemroot%\system32\ProviderName.dll` , что позволяет перенаправление файловой системы разрешать путь к соответствующей библиотеке DLL.</span><span class="sxs-lookup"><span data-stu-id="8c2bb-113">Several built-in Windows performance data providers install a 32-bit DLL into `%systemroot%\syswow64`, install a 64-bit DLL into `%systemroot%\system32`, and register the `Library` path as `%systemroot%\system32\ProviderName.dll`, allowing filesystem redirection to resolve the path to the appropriate DLL.</span></span> <span data-ttu-id="8c2bb-114">Это поддерживается только для поставщиков данных о производительности, которые являются частью операционной системы Windows.</span><span class="sxs-lookup"><span data-stu-id="8c2bb-114">This is supported only for performance data providers that are part of the Windows operating system.</span></span> <span data-ttu-id="8c2bb-115">Поставщики, не являющиеся частью операционной системы Windows, не должны устанавливать файлы в `Windows` папку.</span><span class="sxs-lookup"><span data-stu-id="8c2bb-115">Providers that are not part of the Windows operating system must not install files into the `Windows` folder.</span></span> <span data-ttu-id="8c2bb-116">Нераспознанные файлы в `Windows` папке могут быть удалены во время обслуживания или обновления.</span><span class="sxs-lookup"><span data-stu-id="8c2bb-116">Unrecognized files in the `Windows` folder may be removed during servicing or upgrade.</span></span>
