---
description: Чтобы отобразить диалоговое окно со списком объектов производительности и счетчиков, определенных на компьютере, вызовите функцию Пдхбровсекаунтерс.
ms.assetid: f2fac1d3-f643-43c9-a445-112015baecdd
title: Просмотр счетчиков
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c63278e0a531ec882bad6e102c89f6db0e0946a0d2a0a14b8736e7ee3aef6a8f
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "119011412"
---
# <a name="browsing-counters"></a>Просмотр счетчиков

Чтобы отобразить диалоговое окно со списком объектов производительности и счетчиков, определенных на компьютере, вызовите функцию [**пдхбровсекаунтерс**](/windows/desktop/api/Pdh/nf-pdh-pdhbrowsecountersa) . Диалоговое окно позволяет пользователю просматривать и выбирать счетчики производительности. Для указания конфигурации диалогового окна используется структура [**\_ \_ \_ конфигурации PDH DLG**](/windows/win32/api/pdh/ns-pdh-pdh_browse_dlg_config_a) . Например, можно настроить диалоговое окно для возврата одного или нескольких выбранных элементов.

На входе элемент **сзретурнпасбуффер** содержит объект производительности по умолчанию и счетчик, выбранный в диалоговом окне. В выходных данных буфер содержит объект производительности и счетчик, выбранный пользователем. Можно также использовать элемент **пкаллбакк** , чтобы указать функцию обратного вызова для обработки имен счетчиков, возвращаемых этим диалоговым окном.

Обратите внимание, что это диалоговое окно может возвращать \_ диалоговое окно PDH \_ , если **Бсинглекаунтерпердиалог** имеет **значение false** , и пользователь нажимает кнопку Закрыть, поэтому обработка ошибок должна учитывать это.

Пример, в котором используется функция [**пдхбровсекаунтерс**](/windows/desktop/api/Pdh/nf-pdh-pdhbrowsecountersa) , см. в разделе [Просмотр счетчиков производительности](browsing-performance-counters.md).

Чтобы получить список объектов производительности на компьютере, можно также вызвать функцию [**пдхенумобжектс**](/windows/desktop/api/Pdh/nf-pdh-pdhenumobjectsa) . Чтобы получить список счетчиков и экземпляров для объекта производительности, вызовите функцию [**пдхенумобжектитемс**](/windows/desktop/api/Pdh/nf-pdh-pdhenumobjectitemsa) . Эти функции также можно использовать для обнаружения объектов производительности и счетчиков, содержащихся в файле журнала. Повторные вызовы **пдхенумобжектитемс** будут возвращать один и тот же список счетчиков и экземпляров до тех пор, пока не будет вызван **пдхенумобжектс** для первого обновления списка объектов производительности. Пример перечисления объектов и счетчиков см. в разделе [Перечисление объектов процессов](enumerating-process-objects.md).

## <a name="selecting-the-data-source"></a>Выбор источника данных

[**Пдхселектдатасаурце**](/windows/desktop/api/Pdh/nf-pdh-pdhselectdatasourcea) можно использовать в сочетании с [**пдхбровсекаунтерс**](/windows/desktop/api/Pdh/nf-pdh-pdhbrowsecountersa) , чтобы предложить пользователю указать, находится ли источник данных в режиме реального времени или из файла журнала, и, если это файл журнала, его имя. Если вы не хотите, чтобы диалоговое окно источника данных отображалось, можно вызвать **пдхселектдатасаурце** , чтобы отобразить только каталог обозревателя файлов. Для этого укажите \_ браузер файлов флагов \_ PDH \_ \_ только в качестве второго параметра вызова **пдхселектдатасаурце**.

 

 



