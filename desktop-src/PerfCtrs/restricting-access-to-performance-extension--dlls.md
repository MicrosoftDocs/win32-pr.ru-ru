---
description: Начиная с Windows Server 2003 группа "Пользователи системного монитора" и группа "Пользователи журнала производительности" были доступны разработчикам и пользователям библиотек DLL производительности и функций API для вспомогательных данных производительности (PDH).
ms.assetid: 423359be-9d41-4a5f-91cd-f6d7a6a91d9d
title: Ограниченный доступ к библиотекам расширений производительности
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dd433cad68ec3e50f6b17994da98164e2ae9f237
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "103909711"
---
# <a name="restricting-access-to-performance-extension-dlls"></a><span data-ttu-id="0f7cf-103">Ограниченный доступ к библиотекам расширений производительности</span><span class="sxs-lookup"><span data-stu-id="0f7cf-103">Restricting Access to Performance Extension DLLs</span></span>

<span data-ttu-id="0f7cf-104">Начиная с Windows Server 2003 группа "Пользователи системного монитора" и группа "Пользователи журнала производительности" были доступны разработчикам и пользователям библиотек DLL производительности и функций API для вспомогательных данных производительности (PDH).</span><span class="sxs-lookup"><span data-stu-id="0f7cf-104">Beginning with Windows Server 2003, the Performance Monitor Users group and the Performance Log Users group were made available to developers and users of performance DLLs and the Performance Data Helper (PDH) API functions.</span></span> <span data-ttu-id="0f7cf-105">Эти группы безопасности производительности предназначены для использования системными администраторами при ограничении доступа к информации, предоставляемой библиотеками DLL производительности, определенным списком пользователей.</span><span class="sxs-lookup"><span data-stu-id="0f7cf-105">These performance security groups are intended for use by system administrators in restricting access to the information exposed by performance DLLs to a specific list of users.</span></span>

<span data-ttu-id="0f7cf-106">Группа пользователей системного монитора предназначена для включения пользователей, которые просматривают данные счетчиков и не заменяют данные счетчиков с помощью службы журналы и оповещения производительности.</span><span class="sxs-lookup"><span data-stu-id="0f7cf-106">The Performance Monitor Users group is intended to include users that view counter data and do not log counter data using the Performance Logs and Alerts service.</span></span> <span data-ttu-id="0f7cf-107">Группа "Пользователи журнала производительности" должна включать пользователей, имеющих разрешение на использование службы "журналы и оповещения производительности" для записи счетчиков на локальном или удаленном сервере.</span><span class="sxs-lookup"><span data-stu-id="0f7cf-107">The Performance Log Users group should include users that have permission to use the Performance Logs and Alert service to log counters on the local or remote server.</span></span> <span data-ttu-id="0f7cf-108">Привилегии этой группы также включают создание файлов журналов в локальных или удаленных системах, использование службы "оповещения" и запуск программ в рамках службы.</span><span class="sxs-lookup"><span data-stu-id="0f7cf-108">Privileges of this group also include creating log files on local or remote systems, using the alerts service, and running programs as part of the service.</span></span>

<span data-ttu-id="0f7cf-109">Обратите внимание, что эти группы безопасности производительности не являются механизмом ограничения доступа.</span><span class="sxs-lookup"><span data-stu-id="0f7cf-109">Note that these performance security groups are not by themselves an access restriction mechanism.</span></span> <span data-ttu-id="0f7cf-110">Для этого необходимо использовать эти группы с моделью управления доступом для объектов Windows.</span><span class="sxs-lookup"><span data-stu-id="0f7cf-110">You must use these groups with the Windows object access-control model to do this.</span></span>

<span data-ttu-id="0f7cf-111">Большинство приложений взаимодействуют с БИБЛИОТЕКой производительности с помощью механизма IPC, обычно общей памяти.</span><span class="sxs-lookup"><span data-stu-id="0f7cf-111">Most applications communicate with the performance DLL through an IPC mechanism, typically shared memory.</span></span> <span data-ttu-id="0f7cf-112">Таким образом, можно добавить членов группы безопасности производительности в дескриптор безопасности объекта общей памяти, чтобы ограничить доступ к библиотеке DLL для этих членов группы безопасности.</span><span class="sxs-lookup"><span data-stu-id="0f7cf-112">Therefore, you can add the members of a performance security group to the security descriptor of the shared memory object to restrict access to the DLL to those members of the security group.</span></span> <span data-ttu-id="0f7cf-113">При этом необходимо также добавить членов группы в дескриптор безопасности системных объектов, к которым обращается DLL-библиотека производительности, чтобы предоставить данные счетчиков, например файлы журнала и папки.</span><span class="sxs-lookup"><span data-stu-id="0f7cf-113">When doing this, you must also add the group members to the security descriptor of the system objects that the performance DLL accesses in order to provide counter data, for example, log files and folders.</span></span> <span data-ttu-id="0f7cf-114">Дополнительные сведения о добавлении списков управления доступом к дескрипторам безопасности объектов см. в разделе [Изменение ACL объекта](/windows/desktop/SecAuthZ/modifying-the-acls-of-an-object-in-c--).</span><span class="sxs-lookup"><span data-stu-id="0f7cf-114">For more detailed information on adding ACLs to object security descriptors, refer to [Modifying an Object's ACL](/windows/desktop/SecAuthZ/modifying-the-acls-of-an-object-in-c--).</span></span>

<span data-ttu-id="0f7cf-115">Другой метод, который можно использовать для изменения данных ACL дескриптора безопасности системного объекта IPC, заключается в указании членов списка групп безопасности производительности с помощью языка определения дескрипторов безопасности (SDDL) и вызове [**конвертстрингсекуритидескриптортосекуритидескриптор**](/windows/desktop/api/sddl/nf-sddl-convertstringsecuritydescriptortosecuritydescriptora) для создания дескриптора безопасности.</span><span class="sxs-lookup"><span data-stu-id="0f7cf-115">Another method you can use to modify the ACL information of an IPC system object's security descriptor is to specify the members of the performance security group list with Security Descriptor Definition Language (SDDL) and call [**ConvertStringSecurityDescriptorToSecurityDescriptor**](/windows/desktop/api/sddl/nf-sddl-convertstringsecuritydescriptortosecuritydescriptora) to create the security descriptor.</span></span> <span data-ttu-id="0f7cf-116">Затем этот дескриптор безопасности присоединяется к системному объекту IPC.</span><span class="sxs-lookup"><span data-stu-id="0f7cf-116">This security descriptor is then attached to the IPC system object.</span></span> <span data-ttu-id="0f7cf-117">Ниже показана строка SDDL, которая включает в себя группу "Пользователи системного монитора", MU и группу "Пользователи журналов производительности", LU.</span><span class="sxs-lookup"><span data-stu-id="0f7cf-117">The following shows an SDDL string that includes the Performance Monitor Users group, MU, and the Performance Log Users group, LU.</span></span>

``` syntax
D:(A;OICI;GA;;;SY)(A;OICI;GA;;;BA)(A;OICI;FRFWFXSDRC;;;NS)(A;OICI;FRFWFXSDRC;;;LU)(A;OICI;FRFX;;;MU) 
```

 

 
