---
description: Возвращаемое значение функций PDH указывает на успешное или неуспешное выполнение вызова функции, которое отличается от состояния данных счетчика.
ms.assetid: 00ea5521-bc28-4a87-aba9-46c911631503
title: Проверка кодов состояния данных счетчика
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7daed51ba6e8df385170b9a23b419267409ef497
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105663250"
---
# <a name="checking-counter-data-status-codes"></a><span data-ttu-id="5c398-103">Проверка кодов состояния данных счетчика</span><span class="sxs-lookup"><span data-stu-id="5c398-103">Checking Counter Data Status Codes</span></span>

<span data-ttu-id="5c398-104">Возвращаемое значение функций PDH указывает на успешное или неуспешное выполнение вызова функции, которое отличается от состояния данных счетчика.</span><span class="sxs-lookup"><span data-stu-id="5c398-104">The return value of PDH functions indicates the success or failure of the function call, which is different from the status of the counter data.</span></span> <span data-ttu-id="5c398-105">Всегда проверяйте элемент **кстатус** значения счетчика, возвращенного в СТРУКТУРАх PDH, чтобы убедиться, что возвращаемые данные являются допустимыми, прежде чем использовать их.</span><span class="sxs-lookup"><span data-stu-id="5c398-105">Always check the **CStatus** member of a counter value returned in the PDH structures to ensure that the data returned is valid before you use it.</span></span> <span data-ttu-id="5c398-106">Если значение элемента **кстатус** не указывает на успешное выполнение, не используйте данные.</span><span class="sxs-lookup"><span data-stu-id="5c398-106">If the value of the **CStatus** member does not indicate success, do not use the data.</span></span> <span data-ttu-id="5c398-107">Ниже приведены возможные значения состояния счетчиков.</span><span class="sxs-lookup"><span data-stu-id="5c398-107">The following are the possible status values for counters:</span></span>



| <span data-ttu-id="5c398-108">Значение</span><span class="sxs-lookup"><span data-stu-id="5c398-108">Value</span></span>                              | <span data-ttu-id="5c398-109">Значение</span><span class="sxs-lookup"><span data-stu-id="5c398-109">Meaning</span></span>                                                                                                                                                                                                                                                                                                                                                                          |
|------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5c398-110">PDH \_ кстатус \_ нет \_ компьютера</span><span class="sxs-lookup"><span data-stu-id="5c398-110">PDH\_CSTATUS\_NO\_MACHINE</span></span>          | <span data-ttu-id="5c398-111">PDH не удалось подключиться к компьютеру, указанному в пути счетчика.</span><span class="sxs-lookup"><span data-stu-id="5c398-111">PDH was unable to connect to the computer specified in the counter path.</span></span> <span data-ttu-id="5c398-112">Если это состояние возвращается при добавлении счетчика, счетчик не инициализируется полностью.</span><span class="sxs-lookup"><span data-stu-id="5c398-112">If this status is returned when the counter is being added, the counter is not completely initialized.</span></span> <span data-ttu-id="5c398-113">При каждом обновлении запроса PDH повторяет попытку подключения.</span><span class="sxs-lookup"><span data-stu-id="5c398-113">Each time the query is updated, PDH retries the connection.</span></span> <span data-ttu-id="5c398-114">Если подключение установлено, возобновляется нормальная работа сбора данных.</span><span class="sxs-lookup"><span data-stu-id="5c398-114">When the connection is established, normal data collection resumes.</span></span>                                                                  |
| <span data-ttu-id="5c398-115">PDH \_ кстатус \_ нет \_ объекта</span><span class="sxs-lookup"><span data-stu-id="5c398-115">PDH\_CSTATUS\_NO\_OBJECT</span></span>           | <span data-ttu-id="5c398-116">Указанный компьютер найден, но на компьютере найден указанный объект производительности.</span><span class="sxs-lookup"><span data-stu-id="5c398-116">The specified computer was found, but the specified performance object was found on the computer.</span></span> <span data-ttu-id="5c398-117">Если это состояние возвращается при добавлении счетчика, указанный счетчик не включается в запрос.</span><span class="sxs-lookup"><span data-stu-id="5c398-117">If this status is returned when the counter is being added, the specified counter is not included in the query.</span></span> <span data-ttu-id="5c398-118">Если это состояние возвращается активным счетчиком, данные для этого счетчика являются недопустимыми.</span><span class="sxs-lookup"><span data-stu-id="5c398-118">If this status is returned by an active counter, the data for that counter is invalid.</span></span> <span data-ttu-id="5c398-119">При каждом запросе данных PDH пытается получить данные счетчика.</span><span class="sxs-lookup"><span data-stu-id="5c398-119">Each time the data is requested, PDH tries to obtain this counter data.</span></span> |
| <span data-ttu-id="5c398-120">PDH \_ кстатус \_ без \_ экземпляра</span><span class="sxs-lookup"><span data-stu-id="5c398-120">PDH\_CSTATUS\_NO\_INSTANCE</span></span>         | <span data-ttu-id="5c398-121">Указанный экземпляр не найден в объекте.</span><span class="sxs-lookup"><span data-stu-id="5c398-121">The specified instance was not found in the object.</span></span> <span data-ttu-id="5c398-122">Если это состояние возвращается при добавлении счетчика в запрос, то этот счетчик будет успешно добавлен в запрос, но данные не будут доступны до тех пор, пока не появится конкретный экземпляр и не будет возвращено состояние успешного выполнения.</span><span class="sxs-lookup"><span data-stu-id="5c398-122">If this status is returned while the counter is being added to the query, the counter is successfully added to the query, but no data is available until the specific instance appears and a successful status is returned.</span></span>                                                                                                  |
| <span data-ttu-id="5c398-123">PDH \_ кстатус \_ без \_ счетчика</span><span class="sxs-lookup"><span data-stu-id="5c398-123">PDH\_CSTATUS\_NO\_COUNTER</span></span>          | <span data-ttu-id="5c398-124">Указанный счетчик не найден в указанном объекте.</span><span class="sxs-lookup"><span data-stu-id="5c398-124">The specified counter was not found in the specified object.</span></span> <span data-ttu-id="5c398-125">Если это состояние возвращается при добавлении счетчика, то этот счетчик не добавляется в запрос.</span><span class="sxs-lookup"><span data-stu-id="5c398-125">If this status is returned when the counter is being added, then the counter is not added to the query.</span></span> <span data-ttu-id="5c398-126">Если это состояние возвращается после сбора данных, данные для этого счетчика являются недопустимыми.</span><span class="sxs-lookup"><span data-stu-id="5c398-126">If this status is returned after data collection, the data for that counter is invalid.</span></span> <span data-ttu-id="5c398-127">При каждом запросе данных PDH пытается получить данные счетчика.</span><span class="sxs-lookup"><span data-stu-id="5c398-127">Each time the data is requested, PDH tries to obtain this counter data.</span></span>                                             |
| <span data-ttu-id="5c398-128">\_ \_ недопустимые \_ данные кстатус PDH</span><span class="sxs-lookup"><span data-stu-id="5c398-128">PDH\_CSTATUS\_INVALID\_DATA</span></span>        | <span data-ttu-id="5c398-129">Счетчик успешно найден, но возвращенные данные недопустимы.</span><span class="sxs-lookup"><span data-stu-id="5c398-129">The counter was successfully found, but the data returned is not valid.</span></span> <span data-ttu-id="5c398-130">Эта ошибка может возникать, если значение счетчика меньше предыдущего значения.</span><span class="sxs-lookup"><span data-stu-id="5c398-130">This error can occur if the counter value is less than the previous value.</span></span> <span data-ttu-id="5c398-131">(Поскольку значения счетчика всегда увеличиваются, значение счетчика переводится в ноль, когда достигается его максимальное значение.) Другая возможная причина — Неверный системный таймер.</span><span class="sxs-lookup"><span data-stu-id="5c398-131">(Because counter values always increment, the counter value rolls over to zero when it reaches its maximum value.) Another possible cause is a system timer that is not correct.</span></span>                                              |
| <span data-ttu-id="5c398-132">\_ \_ допустимые данные кстатус PDH \_</span><span class="sxs-lookup"><span data-stu-id="5c398-132">PDH\_CSTATUS\_VALID\_DATA</span></span>          | <span data-ttu-id="5c398-133">Данные для счетчика успешно возвращены, но не изменялись с момента последнего считывания счетчика.</span><span class="sxs-lookup"><span data-stu-id="5c398-133">The data for the counter was returned successfully, but is unchanged from the last time the counter was read.</span></span>                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="5c398-134">PDH \_ кстатус \_ новые \_ данные</span><span class="sxs-lookup"><span data-stu-id="5c398-134">PDH\_CSTATUS\_NEW\_DATA</span></span>            | <span data-ttu-id="5c398-135">Данные для счетчика успешно возвращены и отличаются от времени последнего считывания счетчика.</span><span class="sxs-lookup"><span data-stu-id="5c398-135">The data for the counter was returned successfully and is different from the last time the counter was read.</span></span> <span data-ttu-id="5c398-136">PDH \_ кстатус \_ новые \_ данные могут возвращаться в счетчике скорости, даже если полученная скорость совпадает с последней выборкой.</span><span class="sxs-lookup"><span data-stu-id="5c398-136">PDH\_CSTATUS\_NEW\_DATA can be returned on a rate counter even if the resulting rate is the same as the last sample.</span></span> <span data-ttu-id="5c398-137">Это обусловлено тем, что значение необработанных данных, используемое при определении этого значения состояния, изменилось, а не на вычисленную скорость.</span><span class="sxs-lookup"><span data-stu-id="5c398-137">This is because the raw data value that is used in the determination of this status value has changed, not the computed rate.</span></span>                  |
| <span data-ttu-id="5c398-138">\_Дополнительные \_ данные PDH</span><span class="sxs-lookup"><span data-stu-id="5c398-138">PDH\_MORE\_DATA</span></span>                    | <span data-ttu-id="5c398-139">Указанный буфер недостаточно велик для хранения всех данных счетчиков.</span><span class="sxs-lookup"><span data-stu-id="5c398-139">The supplied buffer was not large enough to store all of the counter data.</span></span> <span data-ttu-id="5c398-140">Выделите буфер большего размера и снова выполните функцию.</span><span class="sxs-lookup"><span data-stu-id="5c398-140">Allocate a larger buffer and execute the function again.</span></span>                                                                                                                                                                                                                                              |
| <span data-ttu-id="5c398-141">\_элемент PDH \_ кстатус \_ не \_ проверен</span><span class="sxs-lookup"><span data-stu-id="5c398-141">PDH\_CSTATUS\_ITEM\_NOT\_VALIDATED</span></span> | <span data-ttu-id="5c398-142">Счетчик был добавлен в запрос, но не был проверен или недоступен.</span><span class="sxs-lookup"><span data-stu-id="5c398-142">The counter has been added to the query, but has not been validated nor accessed.</span></span> <span data-ttu-id="5c398-143">Дополнительные сведения о состоянии этого счетчика недоступны.</span><span class="sxs-lookup"><span data-stu-id="5c398-143">No additional status information on this counter is available.</span></span>                                                                                                                                                                                                                                 |
| <span data-ttu-id="5c398-144">PDH \_ кстатус \_ No \_ COUNTERNAME</span><span class="sxs-lookup"><span data-stu-id="5c398-144">PDH\_CSTATUS\_NO\_COUNTERNAME</span></span>      | <span data-ttu-id="5c398-145">В запросе не указано имя счетчика.</span><span class="sxs-lookup"><span data-stu-id="5c398-145">No counter name was specified in the query.</span></span>                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="5c398-146">PDH \_ кстатус \_ без \_ счетчика</span><span class="sxs-lookup"><span data-stu-id="5c398-146">PDH\_CSTATUS\_NO\_COUNTER</span></span>          | <span data-ttu-id="5c398-147">Не удалось найти указанное имя счетчика.</span><span class="sxs-lookup"><span data-stu-id="5c398-147">The specified counter name could not be found.</span></span>                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="5c398-148">PDH \_ кстатус \_ нет \_ объекта</span><span class="sxs-lookup"><span data-stu-id="5c398-148">PDH\_CSTATUS\_NO\_OBJECT</span></span>           | <span data-ttu-id="5c398-149">Не удалось найти указанный объект производительности.</span><span class="sxs-lookup"><span data-stu-id="5c398-149">The specified performance object could not be found.</span></span>                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="5c398-150">\_ \_ отрицательный знаменатель PDH Calc \_</span><span class="sxs-lookup"><span data-stu-id="5c398-150">PDH\_CALC\_NEGATIVE\_DENOMINATOR</span></span>   | <span data-ttu-id="5c398-151">Счетчик имеет отрицательное значение знаменателя.</span><span class="sxs-lookup"><span data-stu-id="5c398-151">A counter has a negative denominator value.</span></span>                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="5c398-152">\_ \_ базовое время отрицательного вычисления PDH \_</span><span class="sxs-lookup"><span data-stu-id="5c398-152">PDH\_CALC\_NEGATIVE\_TIMEBASE</span></span>      | <span data-ttu-id="5c398-153">Счетчик имеет отрицательное значение по базовому значению.</span><span class="sxs-lookup"><span data-stu-id="5c398-153">A counter has a negative timebase value.</span></span>                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="5c398-154">\_ \_ отрицательное значение PDH Calc \_</span><span class="sxs-lookup"><span data-stu-id="5c398-154">PDH\_CALC\_NEGATIVE\_VALUE</span></span>         | <span data-ttu-id="5c398-155">Счетчик имеет отрицательное значение.</span><span class="sxs-lookup"><span data-stu-id="5c398-155">A counter has a negative value.</span></span>                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="5c398-156">PDH \_ кстатус \_ No \_ COUNTERNAME</span><span class="sxs-lookup"><span data-stu-id="5c398-156">PDH\_CSTATUS\_NO\_COUNTERNAME</span></span>      | <span data-ttu-id="5c398-157">Не указан путь счетчика.</span><span class="sxs-lookup"><span data-stu-id="5c398-157">No counter path was specified.</span></span>                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="5c398-158">PDH \_ кстатус \_ Bad \_ COUNTERNAME</span><span class="sxs-lookup"><span data-stu-id="5c398-158">PDH\_CSTATUS\_BAD\_COUNTERNAME</span></span>     | <span data-ttu-id="5c398-159">Неверный формат пути счетчика.</span><span class="sxs-lookup"><span data-stu-id="5c398-159">The counter path format is incorrect.</span></span>                                                                                                                                                                                                                                                                                                                                            |



 

 

 



