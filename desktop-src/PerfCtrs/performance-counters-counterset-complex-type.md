---
description: Определяет список счетчиков, которые логически связаны.
ms.assetid: d094146a-389e-4053-8ee5-acd29254e817
title: Сложный тип CounterSet
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- kbSyntax
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: e753fab4308f1e981ab06e9470742ace46840a39
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105663198"
---
# <a name="counterset-complex-type"></a><span data-ttu-id="98300-103">Сложный тип CounterSet</span><span class="sxs-lookup"><span data-stu-id="98300-103">counterSet Complex Type</span></span>

<span data-ttu-id="98300-104">Определяет список счетчиков, которые логически связаны.</span><span class="sxs-lookup"><span data-stu-id="98300-104">Defines a list of counters that are logically related.</span></span>

``` syntax
<xs:complexType name="counterSet">
    <xs:sequence>
        <xs:element name="structs"
            type="man:structs"
            minOccurs="0"
            maxOccurs="1"
         />
        <xs:element name="counter"
            type="man:counter"
            minOccurs="1"
            maxOccurs="unbounded"
         />
    </xs:sequence>
    <xs:attribute name="symbol"
        type="man:CSymbolType"
        use="required"
     />
    <xs:attribute name="guid"
        type="man:GUIDType"
        use="required"
     />
    <xs:attribute name="uri"
        type="xs:anyURI"
        use="required"
     />
    <xs:attribute name="name"
        use="required"
    >
        <xs:simpleType>
            <xs:restriction
                base="xs:string"
            >
                <xs:maxLength
                    value="1023"
                 />
            </xs:restriction>
        </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="description"
        type="xs:string"
        use="required"
     />
    <xs:attribute name="instances"
        use="optional"
        default="single"
    >
        <xs:simpleType>
            <xs:restriction
                base="xs:string"
            >
                <xs:enumeration
                    value="single"
                 />
                <xs:enumeration
                    value="multiple"
                 />
                <xs:enumeration
                    value="globalAggregate"
                 />
                <xs:enumeration
                    value="multipleAggregate"
                 />
                <xs:enumeration
                    value="globalAggregateHistory"
                 />
            </xs:restriction>
        </xs:simpleType>
    </xs:attribute>
</xs:complexType>
```

## <a name="child-elements"></a><span data-ttu-id="98300-105">Дочерние элементы</span><span class="sxs-lookup"><span data-stu-id="98300-105">Child elements</span></span>



| <span data-ttu-id="98300-106">Элемент</span><span class="sxs-lookup"><span data-stu-id="98300-106">Element</span></span>     | <span data-ttu-id="98300-107">Тип</span><span class="sxs-lookup"><span data-stu-id="98300-107">Type</span></span>                                                             | <span data-ttu-id="98300-108">Описание</span><span class="sxs-lookup"><span data-stu-id="98300-108">Description</span></span>                                                                                            |
|-------------|------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="98300-109">**подписан**</span><span class="sxs-lookup"><span data-stu-id="98300-109">**counter**</span></span> | [<span data-ttu-id="98300-110">**Man: Счетчик**</span><span class="sxs-lookup"><span data-stu-id="98300-110">**man:counter**</span></span>](performance-counters-counter-complex-type.md) | <span data-ttu-id="98300-111">Определяет счетчик, предоставляемый поставщиком.</span><span class="sxs-lookup"><span data-stu-id="98300-111">Defines a counter that the provider provides.</span></span><br/>                                               |
| <span data-ttu-id="98300-112">**структуры**</span><span class="sxs-lookup"><span data-stu-id="98300-112">**structs**</span></span> | [<span data-ttu-id="98300-113">**Man: структуры**</span><span class="sxs-lookup"><span data-stu-id="98300-113">**man:structs**</span></span>](performance-counters-structs-complex-type.md) | <span data-ttu-id="98300-114">Список элементов структуры, содержащих значения для счетчиков, определенных в этом наборе счетчиков.</span><span class="sxs-lookup"><span data-stu-id="98300-114">A list of struct elements that contain values for the counters defined in this counter set.</span></span><br/> |



## <a name="attributes"></a><span data-ttu-id="98300-115">Атрибуты</span><span class="sxs-lookup"><span data-stu-id="98300-115">Attributes</span></span>



| <span data-ttu-id="98300-116">Имя</span><span class="sxs-lookup"><span data-stu-id="98300-116">Name</span></span>        | <span data-ttu-id="98300-117">Тип</span><span class="sxs-lookup"><span data-stu-id="98300-117">Type</span></span>                                                                    | <span data-ttu-id="98300-118">Описание</span><span class="sxs-lookup"><span data-stu-id="98300-118">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|-------------|-------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="98300-119">description</span><span class="sxs-lookup"><span data-stu-id="98300-119">description</span></span> | <span data-ttu-id="98300-120">**xs:string**</span><span class="sxs-lookup"><span data-stu-id="98300-120">**xs:string**</span></span>                                                           | <span data-ttu-id="98300-121">Краткое описание набора счетчиков.</span><span class="sxs-lookup"><span data-stu-id="98300-121">A short description of the counter set.</span></span> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="98300-122">guid</span><span class="sxs-lookup"><span data-stu-id="98300-122">guid</span></span>        | [<span data-ttu-id="98300-123">**мужчина: Гуидтипе**</span><span class="sxs-lookup"><span data-stu-id="98300-123">**man:GUIDType**</span></span>](performance-counters-guidtype-simple-type.md)       | <span data-ttu-id="98300-124">Идентификатор GUID, однозначно определяющий набор счетчиков.</span><span class="sxs-lookup"><span data-stu-id="98300-124">A GUID that uniquely identifies the counter set.</span></span> <span data-ttu-id="98300-125">Регистрация набора счетчиков завершается ошибкой, если идентификатор GUID уже зарегистрирован.</span><span class="sxs-lookup"><span data-stu-id="98300-125">The counter set registration fails if the GUID is already registered.</span></span> <span data-ttu-id="98300-126">Чтобы обновить зарегистрированный набор счетчиков, сначала необходимо удалить набор счетчиков, а затем снова зарегистрировать его.</span><span class="sxs-lookup"><span data-stu-id="98300-126">To update a counter set that is registered, you must first uninstall the counter set and then register it again.</span></span> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="98300-127">instances</span><span class="sxs-lookup"><span data-stu-id="98300-127">instances</span></span>   |                                                                         | <span data-ttu-id="98300-128">Определяет, может ли набор счетчиков содержать несколько экземпляров.</span><span class="sxs-lookup"><span data-stu-id="98300-128">Determines whether the counter set can contain multiple instances.</span></span> <span data-ttu-id="98300-129">Ниже перечислены возможные значения.</span><span class="sxs-lookup"><span data-stu-id="98300-129">The following lists the possible values:</span></span><br/> <dl> <span data-ttu-id="98300-130"><dt><span id="single"></span><span id="SINGLE"></span>один</dt></span><span class="sxs-lookup"><span data-stu-id="98300-130"><dt><span id="single"></span><span id="SINGLE"></span>single</dt></span></span> <dd> <span data-ttu-id="98300-131">Определяет набор счетчиков, в котором могут существовать только один экземпляр счетчиков в наборе счетчиков.</span><span class="sxs-lookup"><span data-stu-id="98300-131">Defines a counter set where only one instance of the counters in the counter set can exist.</span></span> <span data-ttu-id="98300-132">Укажите это значение, если счетчики предоставляют размеры на уровне системы, например физическую память.</span><span class="sxs-lookup"><span data-stu-id="98300-132">Specify this value if the counters provide system-wide measurements, such as physical memory.</span></span> <span data-ttu-id="98300-133">Это значение по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="98300-133">This is the default.</span></span><br/> </dd> <span data-ttu-id="98300-134"><dt><span id="multiple"></span><span id="MULTIPLE"></span>несколько</dt></span><span class="sxs-lookup"><span data-stu-id="98300-134"><dt><span id="multiple"></span><span id="MULTIPLE"></span>multiple</dt></span></span> <dd> <span data-ttu-id="98300-135">Определяет набор счетчиков, в котором могут существовать несколько экземпляров счетчиков в наборе счетчиков.</span><span class="sxs-lookup"><span data-stu-id="98300-135">Defines a counter set where multiple instances of the counters in the counter set can exist.</span></span> <span data-ttu-id="98300-136">Укажите это значение, если счетчики предоставляют измерения для каждого экземпляра, такие как процессорное время на процесс.</span><span class="sxs-lookup"><span data-stu-id="98300-136">Specify this value if the counters provide per-instance measurements, such as processor time per process.</span></span><br/> </dd> <span data-ttu-id="98300-137"><dt><span id="globalAggregate"></span><span id="globalaggregate"></span><span id="GLOBALAGGREGATE"></span>глобалаггрегате</dt></span><span class="sxs-lookup"><span data-stu-id="98300-137"><dt><span id="globalAggregate"></span><span id="globalaggregate"></span><span id="GLOBALAGGREGATE"></span>globalAggregate</dt></span></span> <dd> <span data-ttu-id="98300-138">Определяет набор счетчиков с одним экземпляром, в котором счетчики в наборе счетчиков должны быть агрегированы из различных активных источников.</span><span class="sxs-lookup"><span data-stu-id="98300-138">Defines a single instance counter set where the counters in the counter set must be aggregated from various active sources.</span></span> <span data-ttu-id="98300-139">Например, можно создать набор счетчиков, содержащий счетчик, который подсчитывает количество операций чтения с диска для жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="98300-139">For example, you could create a counter set that contains a counter that counts the number of disk reads for a hard disk.</span></span> <span data-ttu-id="98300-140">Если компьютер имеет три жестких диска, а потребитель запрашивает количество операций чтения с диска, то PERFLIB получит количество операций чтения с каждого диска и вычислит их отдельные значения.</span><span class="sxs-lookup"><span data-stu-id="98300-140">If the computer has three hard disks and a consumer queries for the number of disk reads, PERFLIB will obtain the number of reads from each disk and sum their individual values.</span></span> <br/> </dd> <span data-ttu-id="98300-141"><dt><span id="multipleAggregate"></span><span id="multipleaggregate"></span><span id="MULTIPLEAGGREGATE"></span>мултиплеаггрегате</dt></span><span class="sxs-lookup"><span data-stu-id="98300-141"><dt><span id="multipleAggregate"></span><span id="multipleaggregate"></span><span id="MULTIPLEAGGREGATE"></span>multipleAggregate</dt></span></span> <dd> <span data-ttu-id="98300-142">Определяет набор счетчиков с несколькими экземплярами, в котором счетчики в наборе счетчиков должны быть агрегированы по всем экземплярам этого счетчика.</span><span class="sxs-lookup"><span data-stu-id="98300-142">Defines a multiple instance counter set where the counters in the counter set must be aggregated across all instances of that counter.</span></span> <span data-ttu-id="98300-143">Например, можно создать набор счетчиков для многопоточного приложения, которое содержит счетчик, измеряющий производительность потоков (каждый поток будет ссылаться на экземпляр набора счетчиков).</span><span class="sxs-lookup"><span data-stu-id="98300-143">For example, you could create a counter set for a multi-threaded application that contains a counter that measures thread performance (each thread would refer to an instance of the counter set).</span></span> <span data-ttu-id="98300-144">Когда потребитель запрашивает общий счетчик времени выполнения потока, в PERFLIB будет суммироваться общее время выполнения потока от каждого экземпляра.</span><span class="sxs-lookup"><span data-stu-id="98300-144">When a consumer queries the total thread execution time counter, PERFLIB will sum the total thread execution time from each instance.</span></span><br/> </dd> <span data-ttu-id="98300-145"><dt><span id="globalAggregateHistory"></span><span id="globalaggregatehistory"></span><span id="GLOBALAGGREGATEHISTORY"></span>глобалаггрегатехистори</dt></span><span class="sxs-lookup"><span data-stu-id="98300-145"><dt><span id="globalAggregateHistory"></span><span id="globalaggregatehistory"></span><span id="GLOBALAGGREGATEHISTORY"></span>globalAggregateHistory</dt></span></span> <dd> <span data-ttu-id="98300-146">Определяет набор счетчиков с одним экземпляром, значения счетчиков которого кэшируются в течение времени существования потребителя.</span><span class="sxs-lookup"><span data-stu-id="98300-146">Defines a single instance counter set whose counter values are cached for the lifetime of the consumer.</span></span> <span data-ttu-id="98300-147">Обратите внимание, что кэшируются все счетчики в наборе счетчиков.</span><span class="sxs-lookup"><span data-stu-id="98300-147">Note that all counters in the counter set are cached.</span></span> <span data-ttu-id="98300-148">Чтобы кэшировать только определенные счетчики, необходимо снабдить эти счетчики атрибутом History.</span><span class="sxs-lookup"><span data-stu-id="98300-148">To cache only specific counters, decorate those counters with the history attribute.</span></span><br/> <span data-ttu-id="98300-149">Используя пример чтения с диска из Глобалаггрегате, все значения счетчиков в наборе счетчиков будут кэшироваться.</span><span class="sxs-lookup"><span data-stu-id="98300-149">Using the disk read example from globalAggregate, all counter values in the counter set would be cached.</span></span> <span data-ttu-id="98300-150">Если один диск стал недоступным, Последнее кэшированное значение общего числа байтов, считанное этим диском, будет по-прежнему доступно для приложения потребителя.</span><span class="sxs-lookup"><span data-stu-id="98300-150">If one disk became unavailable, the last cached value for total bytes read by that disk would still be available to the consumer application.</span></span><br/> </dd> </dl> |
| <span data-ttu-id="98300-151">name</span><span class="sxs-lookup"><span data-stu-id="98300-151">name</span></span>        |                                                                         | <span data-ttu-id="98300-152">Отображаемое имя набора счетчиков.</span><span class="sxs-lookup"><span data-stu-id="98300-152">The display name of the counter set.</span></span> <span data-ttu-id="98300-153">Длина должна быть меньше 1 024 символов.</span><span class="sxs-lookup"><span data-stu-id="98300-153">Must be less than 1,024 characters.</span></span> <span data-ttu-id="98300-154">В нем учитывается регистр.</span><span class="sxs-lookup"><span data-stu-id="98300-154">The name is case-sensitive.</span></span> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="98300-155">символ</span><span class="sxs-lookup"><span data-stu-id="98300-155">symbol</span></span>      | [<span data-ttu-id="98300-156">**мужчина: Ксимболтипе**</span><span class="sxs-lookup"><span data-stu-id="98300-156">**man:CSymbolType**</span></span>](performance-counters-csymboltype-simple-type.md) | <span data-ttu-id="98300-157">Символьное имя, идентифицирующее набор счетчиков.</span><span class="sxs-lookup"><span data-stu-id="98300-157">A symbolic name that identifies the counter set.</span></span> <span data-ttu-id="98300-158">Средство [КТРПП](ctrpp.md) создает переменную GUID, которую можно использовать при вызове функций, требующих идентификатора GUID набора счетчиков (например, [**перфкреатеинстанце**](/windows/desktop/api/Perflib/nf-perflib-perfcreateinstance)).</span><span class="sxs-lookup"><span data-stu-id="98300-158">The [CTRPP](ctrpp.md) tool creates a GUID variable that you can use when calling functions that require the counter set GUID (for example, [**PerfCreateInstance**](/windows/desktop/api/Perflib/nf-perflib-perfcreateinstance)).</span></span> <span data-ttu-id="98300-159">Имя переменной имеет вид *SymbolicName* GUID.</span><span class="sxs-lookup"><span data-stu-id="98300-159">The variable name is of the form, *symbolicname* Guid.</span></span> <br/> <span data-ttu-id="98300-160">При включении аргумента **-prefix** при вызове [КТРПП](ctrpp.md)Строка префикса добавляется в начало символьного имени.</span><span class="sxs-lookup"><span data-stu-id="98300-160">If you include the **-prefix** argument when calling [CTRPP](ctrpp.md), the prefix string is added to the beginning of the symbolic name.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="98300-161">uri</span><span class="sxs-lookup"><span data-stu-id="98300-161">uri</span></span>         | <span data-ttu-id="98300-162">**xs: anyURI**</span><span class="sxs-lookup"><span data-stu-id="98300-162">**xs:anyURI**</span></span>                                                           | <span data-ttu-id="98300-163">Уникальный универсальный идентификатор ресурса, который позволяет пользователям обращаться к счетчикам набора счетчиков из любого расположения.</span><span class="sxs-lookup"><span data-stu-id="98300-163">A unique uniform resource identifier that lets users access the counters in the counter set from any location.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |



## <a name="requirements"></a><span data-ttu-id="98300-164">Требования</span><span class="sxs-lookup"><span data-stu-id="98300-164">Requirements</span></span>



| <span data-ttu-id="98300-165">Требование</span><span class="sxs-lookup"><span data-stu-id="98300-165">Requirement</span></span> | <span data-ttu-id="98300-166">Значение</span><span class="sxs-lookup"><span data-stu-id="98300-166">Value</span></span> |
|-------------------------------------|------------------------------------------------------|
| <span data-ttu-id="98300-167">Минимальная версия клиента</span><span class="sxs-lookup"><span data-stu-id="98300-167">Minimum supported client</span></span><br/> | <span data-ttu-id="98300-168">Только для \[ классических приложений Windows Vista\]</span><span class="sxs-lookup"><span data-stu-id="98300-168">Windows Vista \[desktop apps only\]</span></span><br/>       |
| <span data-ttu-id="98300-169">Минимальная версия сервера</span><span class="sxs-lookup"><span data-stu-id="98300-169">Minimum supported server</span></span><br/> | <span data-ttu-id="98300-170">\[Только для настольных приложений Windows Server 2008\]</span><span class="sxs-lookup"><span data-stu-id="98300-170">Windows Server 2008 \[desktop apps only\]</span></span><br/> |



 

 




