---
description: Для освещения объектов в сцене используются источники света.
ms.assetid: 0751bb76-611a-41c4-aab2-aa6f68b61b0e
title: Индикаторы и материалы (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d6f44a12c1be1e7a14f7bfe176d7f391901d2dac
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104416408"
---
# <a name="lights-and-materials-direct3d-9"></a><span data-ttu-id="3558b-103">Индикаторы и материалы (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="3558b-103">Lights and Materials (Direct3D 9)</span></span>

<span data-ttu-id="3558b-104">Для освещения объектов в сцене используются источники света.</span><span class="sxs-lookup"><span data-stu-id="3558b-104">Lights are used to illuminate objects in a scene.</span></span> <span data-ttu-id="3558b-105">Если освещение включено, Direct3D вычисляет цвет каждой вершины объекта на основе сочетания:</span><span class="sxs-lookup"><span data-stu-id="3558b-105">When lighting is enabled, Direct3D calculates the color of each object vertex based on a combination of:</span></span>

> [!Note]  
> <span data-ttu-id="3558b-106">Этот раздел предназначен только для конвейера с фиксированной функцией.</span><span class="sxs-lookup"><span data-stu-id="3558b-106">This section is only for the fixed-function pipeline.</span></span> <span data-ttu-id="3558b-107">Программируемые шейдеры выполняют все функции освещения явным образом.</span><span class="sxs-lookup"><span data-stu-id="3558b-107">Programmable shaders perform all lighting explicitly.</span></span>

 

-   <span data-ttu-id="3558b-108">Текущий цвет материала и пикселей текстуры в связанной текстурной карте.</span><span class="sxs-lookup"><span data-stu-id="3558b-108">The current material color and the texels in an associated texture map.</span></span>
-   <span data-ttu-id="3558b-109">Диффузные и отраженные цвета на вершине, если они заданы.</span><span class="sxs-lookup"><span data-stu-id="3558b-109">The diffuse and specular colors at the vertex, if specified.</span></span>
-   <span data-ttu-id="3558b-110">Цвет и интенсивность света, производимого источниками света в сцене, или уровень фонового освещения сцены.</span><span class="sxs-lookup"><span data-stu-id="3558b-110">The color and intensity of light produced by light sources in the scene or the scene's ambient light level.</span></span>

<span data-ttu-id="3558b-111">При использовании освещения и материалов Direct3D вы разрешаете Direct3D обработку подробных сведений о освещения.</span><span class="sxs-lookup"><span data-stu-id="3558b-111">When you use Direct3D lighting and materials, you allow Direct3D to handle the details of illumination for you.</span></span> <span data-ttu-id="3558b-112">Опытные пользователи могут при необходимости заниматься освещением самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="3558b-112">Advanced users can perform lighting on their own, if desired.</span></span>

<span data-ttu-id="3558b-113">Способ работы с освещением и материалами сильно влияет на внешний вид отрисованной сцены.</span><span class="sxs-lookup"><span data-stu-id="3558b-113">How you work with lighting and materials makes a big difference in the appearance of the rendered scene.</span></span> <span data-ttu-id="3558b-114">Материалы определяют, как свет отражается от поверхности.</span><span class="sxs-lookup"><span data-stu-id="3558b-114">Materials define how light reflects off a surface.</span></span> <span data-ttu-id="3558b-115">Уровни прямого и фонового освещения определяют, какой свет отражается.</span><span class="sxs-lookup"><span data-stu-id="3558b-115">Direct light and ambient light levels define the light that is reflected.</span></span> <span data-ttu-id="3558b-116">Если освещение включено, для отрисовки сцены необходимо использовать материалы.</span><span class="sxs-lookup"><span data-stu-id="3558b-116">You must use materials to render a scene if lighting is enabled.</span></span> <span data-ttu-id="3558b-117">Для отрисовки сцены источники света не требуются, но компоненты в сцене без освещения не видны.</span><span class="sxs-lookup"><span data-stu-id="3558b-117">Lights are not required to render a scene, but details in a scene rendered without light are not visible.</span></span> <span data-ttu-id="3558b-118">В лучшем случае отрисовка неосвещенной сцены приведет к отображению силуэтов объектов сцены.</span><span class="sxs-lookup"><span data-stu-id="3558b-118">At best, rendering an unlit scene results in a silhouette of the objects in the scene.</span></span> <span data-ttu-id="3558b-119">Такой уровень детализации недостаточен для большинства целей.</span><span class="sxs-lookup"><span data-stu-id="3558b-119">This is not enough detail for most purposes.</span></span>

## <a name="direct-light-vs-ambient-light"></a><span data-ttu-id="3558b-120">Прямой и внешний свет</span><span class="sxs-lookup"><span data-stu-id="3558b-120">Direct Light vs. Ambient Light</span></span>

<span data-ttu-id="3558b-121">Несмотря на то что объекты в сцене получают и прямое, и фоновое освещение, они не зависят друг от друга, они оказывают очень различное действие и требуют совершенно различных подходов в работе.</span><span class="sxs-lookup"><span data-stu-id="3558b-121">Although both direct and ambient light illuminate objects in a scene, they are independent of one another, they have very different effects, and they require that you work with them in completely different ways.</span></span>

<span data-ttu-id="3558b-122">Прямой источник — это просто: Direct.</span><span class="sxs-lookup"><span data-stu-id="3558b-122">Direct light is just that: direct.</span></span> <span data-ttu-id="3558b-123">Прямое освещение всегда имеет направление и цвет, и это является важным фактором для алгоритмов заливки, например для заливки Гуро.</span><span class="sxs-lookup"><span data-stu-id="3558b-123">Direct light always has direction and color, and it is a factor for shading algorithms, such as Gouraud shading.</span></span> <span data-ttu-id="3558b-124">Различные типы источников света испускают прямой свет различными способами, создавая особые эффекты угасания.</span><span class="sxs-lookup"><span data-stu-id="3558b-124">Different types of lights emit direct light in different ways, creating special attenuation effects.</span></span> <span data-ttu-id="3558b-125">Вы создаете набор параметров освещения для прямого освещения, вызывая метод [**IDirect3DDevice9:: сетлигхт**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setlight) .</span><span class="sxs-lookup"><span data-stu-id="3558b-125">You create a set of light parameters for direct light by calling the [**IDirect3DDevice9::SetLight**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setlight) method.</span></span>

<span data-ttu-id="3558b-126">Фоновое освещение оказывает воздействие во всей сцене.</span><span class="sxs-lookup"><span data-stu-id="3558b-126">Ambient light is effectively everywhere in a scene.</span></span> <span data-ttu-id="3558b-127">Его можно представить как общий уровень освещения, который заполняет всю сцену независимо от объектов и их расположений в этой сцене.</span><span class="sxs-lookup"><span data-stu-id="3558b-127">You can think of it as a general level of light that fills an entire scene, regardless of the objects and their locations in that scene.</span></span> <span data-ttu-id="3558b-128">У фонового освещения нет расположения и направления, есть только цвет и интенсивность.</span><span class="sxs-lookup"><span data-stu-id="3558b-128">Ambient light has no position or direction, only color and intensity.</span></span> <span data-ttu-id="3558b-129">Каждый источник света усиливает общее фоновое освещение сцены.</span><span class="sxs-lookup"><span data-stu-id="3558b-129">Each light adds to the overall ambient light in a scene.</span></span> <span data-ttu-id="3558b-130">Задайте уровень окружающей среды с помощью вызова метода [**IDirect3DDevice9:: сетрендерстате**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate) , указав в \_ качестве параметра *State* окружающую среду D3DRS и желаемый цвет RGBA в качестве параметра значения.</span><span class="sxs-lookup"><span data-stu-id="3558b-130">Set the ambient light level with a call to the [**IDirect3DDevice9::SetRenderState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setrenderstate) method, specifying D3DRS\_AMBIENT as the *State* parameter, and the desired RGBA color as the Value parameter.</span></span>

<span data-ttu-id="3558b-131">Цвет фонового освещения принимает форму значения RGBA, где каждый компонент является целым числом от 0 до 255.</span><span class="sxs-lookup"><span data-stu-id="3558b-131">Ambient light color takes the form of an RGBA value, where each component is an integer value from 0 to 255.</span></span> <span data-ttu-id="3558b-132">Это отличает его от большинства значений цвета в Direct3D.</span><span class="sxs-lookup"><span data-stu-id="3558b-132">This is unlike most color values in Direct3D.</span></span>

<span data-ttu-id="3558b-133">Для создания значений RGBA можно использовать макрос [**D3DCOLOR \_ RGBA**](d3dcolor-rgba.md) .</span><span class="sxs-lookup"><span data-stu-id="3558b-133">You can use the [**D3DCOLOR\_RGBA**](d3dcolor-rgba.md) macro to generate RGBA values.</span></span> <span data-ttu-id="3558b-134">Красный, зеленый и синий компоненты сочетаются и создают окончательный цвет фонового освещения.</span><span class="sxs-lookup"><span data-stu-id="3558b-134">The red, green, and blue components combine to make the final color of the ambient light.</span></span> <span data-ttu-id="3558b-135">Альфа-компонент определяет прозрачность цвета.</span><span class="sxs-lookup"><span data-stu-id="3558b-135">The alpha component controls the transparency of the color.</span></span> <span data-ttu-id="3558b-136">При использовании аппаратного ускорения или эмуляции RGB альфа-компонент игнорируется.</span><span class="sxs-lookup"><span data-stu-id="3558b-136">When using hardware acceleration or RGB emulation, the alpha component is ignored.</span></span>

## <a name="direct3d-light-model-vs-nature"></a><span data-ttu-id="3558b-137">Модель Direct3D Light и природа</span><span class="sxs-lookup"><span data-stu-id="3558b-137">Direct3D Light Model vs. Nature</span></span>

<span data-ttu-id="3558b-138">По своей природе, когда свет испускается источником, он отражается от сотен, если не тысяч или миллионов объектов, перед тем как достичь глаз пользователя.</span><span class="sxs-lookup"><span data-stu-id="3558b-138">In nature, when light is emitted from a source, it is reflected off of hundreds, if not thousands or millions of objects before reaching the user's eye.</span></span> <span data-ttu-id="3558b-139">Каждый раз, когда свет отражается, какая-то его часть поглощается поверхностью, другая рассеивается в случайных направлениях, а оставшийся свет попадает на другую поверхность или попадает в глаза пользователя.</span><span class="sxs-lookup"><span data-stu-id="3558b-139">Each time it is reflected, some light is absorbed by a surface, some is scattered in random directions, and the rest goes on to another surface or to the user's eye.</span></span> <span data-ttu-id="3558b-140">Этот процесс продолжается, пока уровень освещения не ослабнет до нуля или до восприятия света пользователем.</span><span class="sxs-lookup"><span data-stu-id="3558b-140">This process continues until the light is reduced to nothing or a user perceives the light.</span></span>

<span data-ttu-id="3558b-141">Очевидно, что вычисления, необходимые для абсолютно точного моделирования естественного освещения слишком сложны, чтобы использовать их в графике Direct3D в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="3558b-141">Obviously, the calculations required to perfectly simulate the natural behavior of light are too time-consuming to use for real-time Direct3D graphics.</span></span> <span data-ttu-id="3558b-142">Таким образом, учитывая скорость обработки данных, модель освещения Direct3D приблизительно моделирует освещение реального мира.</span><span class="sxs-lookup"><span data-stu-id="3558b-142">Therefore, with speed in mind, the Direct3D light model approximates the way light works in the natural world.</span></span> <span data-ttu-id="3558b-143">Direct3D описывает свет с помощью красного, зеленого и синего компонентов, которые в сочетании образуют окончательный цвет.</span><span class="sxs-lookup"><span data-stu-id="3558b-143">Direct3D describes light in terms of red, green, and blue components that combine to create a final color.</span></span>

<span data-ttu-id="3558b-144">В Direct3D, когда свет отражается от поверхности, его цвет взаимодействует согласно математическим алгоритмам с самой этой поверхностью и создает цвет, который в конечном итоге отображается на экране.</span><span class="sxs-lookup"><span data-stu-id="3558b-144">In Direct3D, when light reflects off a surface, the light color interacts mathematically with the surface itself to create the color eventually displayed on the screen.</span></span> <span data-ttu-id="3558b-145">Конкретные сведения об алгоритмах, используемых Direct3D, см. в разделе [математика освещения (Direct3D 9)](mathematics-of-lighting.md).</span><span class="sxs-lookup"><span data-stu-id="3558b-145">For specific information about the algorithms Direct3D uses, see [Mathematics of Lighting (Direct3D 9)](mathematics-of-lighting.md).</span></span>

<span data-ttu-id="3558b-146">Модель освещения Direct3D разделяет свет на два типа: фоновое освещение и прямой свет.</span><span class="sxs-lookup"><span data-stu-id="3558b-146">The Direct3D light model generalizes light into two types: ambient light and direct light.</span></span> <span data-ttu-id="3558b-147">Каждому типу присущи различные характеристики, и каждый тип взаимодействует с материалом поверхности различными способами.</span><span class="sxs-lookup"><span data-stu-id="3558b-147">Each has different attributes, and each interacts with the material of a surface in different ways.</span></span> <span data-ttu-id="3558b-148">Фоновое освещение — это свет, который был настолько рассеян, что его направление и источник невозможно определить: он проникает повсюду с низким уровнем интенсивности.</span><span class="sxs-lookup"><span data-stu-id="3558b-148">Ambient light is light that has been scattered so much that its direction and source are indeterminate: it maintains a low level of intensity everywhere.</span></span> <span data-ttu-id="3558b-149">Отраженный свет, используемый фотографами, является хорошим примером фонового освещения.</span><span class="sxs-lookup"><span data-stu-id="3558b-149">The indirect lighting used by photographers is a good example of ambient light.</span></span> <span data-ttu-id="3558b-150">Фоновое освещение в Direct3D, как и в природе, не имеет направления или источника, а имеет лишь цвет и интенсивность.</span><span class="sxs-lookup"><span data-stu-id="3558b-150">Ambient light in Direct3D, as in nature, has no real direction or source, only a color and intensity.</span></span> <span data-ttu-id="3558b-151">На самом деле уровень фонового освещения совершенно независим от каких-либо объектов сцены, испускающих свет.</span><span class="sxs-lookup"><span data-stu-id="3558b-151">In fact, the ambient light level is completely independent of any objects in a scene that generate light.</span></span> <span data-ttu-id="3558b-152">Фоновое освещение не влияет на зеркальное отражение.</span><span class="sxs-lookup"><span data-stu-id="3558b-152">Ambient light does not contribute to specular reflection.</span></span>

<span data-ttu-id="3558b-153">Прямой свет — это свет, созданный каким-либо источником в сцене, он всегда имеет цвет и интенсивность, а также распространяется в заданном направлении.</span><span class="sxs-lookup"><span data-stu-id="3558b-153">Direct light is the light generated by a source within a scene; it always has color and intensity, and it travels in a specified direction.</span></span> <span data-ttu-id="3558b-154">Прямой свет взаимодействует с материалом поверхности и создает блики, а его направление используется в качестве коэффициента для алгоритмов заливки, включая заливку Гуро.</span><span class="sxs-lookup"><span data-stu-id="3558b-154">Direct light interacts with the material of a surface to create specular highlights, and its direction is used as a factor in shading algorithms, including Gouraud shading.</span></span> <span data-ttu-id="3558b-155">При отражении прямого света он не влияет на уровень фонового освещения в сцене.</span><span class="sxs-lookup"><span data-stu-id="3558b-155">When direct light is reflected, it does not contribute to the ambient light level in a scene.</span></span> <span data-ttu-id="3558b-156">Источники в сцене, создающие прямой свет, имеют различные характеристики, которые влияют на то, как они освещают сцену.</span><span class="sxs-lookup"><span data-stu-id="3558b-156">The sources in a scene that generate direct light have different characteristics that affect how they illuminate a scene.</span></span>

<span data-ttu-id="3558b-157">Кроме того, материал многоугольников имеет определенные свойства, которые влияют на то, как этот многоугольник отражает попадающий на него свет.</span><span class="sxs-lookup"><span data-stu-id="3558b-157">Additionally, a polygon's material has properties that affect how that polygon reflects the light it receives.</span></span> <span data-ttu-id="3558b-158">Вы задаете одно свойство отражения, которое определяет, как этот материал отражает фоновый свет, а также задаете индивидуальные особенности, чтобы определить зеркальное и рассеивающее отражающие свойства материала.</span><span class="sxs-lookup"><span data-stu-id="3558b-158">You set a single reflectance trait that describes how the material reflects ambient light, and you set individual traits to determine the material's specular and diffuse reflectance.</span></span> <span data-ttu-id="3558b-159">Дополнительные сведения см. в разделе [материалы (Direct3D 9)](materials.md).</span><span class="sxs-lookup"><span data-stu-id="3558b-159">For more information, see [Materials (Direct3D 9)](materials.md).</span></span>

## <a name="color-values-for-lights-and-materials"></a><span data-ttu-id="3558b-160">Цветовые значения для источников света и материалов</span><span class="sxs-lookup"><span data-stu-id="3558b-160">Color Values for Lights and Materials</span></span>

<span data-ttu-id="3558b-161">Direct3D описывает цвет с точки зрения четырех компонентов — красного, зеленого, синего и альфа-, который сочетается для создания окончательного цвета.</span><span class="sxs-lookup"><span data-stu-id="3558b-161">Direct3D describes color in terms of four components-red, green, blue, and alpha-that combine to make a final color.</span></span> <span data-ttu-id="3558b-162">Структура C++ [**D3DCOLORVALUE**](d3dcolorvalue.md) определена как содержащая значения для каждого компонента.</span><span class="sxs-lookup"><span data-stu-id="3558b-162">The [**D3DCOLORVALUE**](d3dcolorvalue.md) C++ structure is defined to contain values for each component.</span></span> <span data-ttu-id="3558b-163">Каждый элемент — это значение с плавающей запятой, которое обычно находится в диапазоне от 0,0 до 1,0 включительно.</span><span class="sxs-lookup"><span data-stu-id="3558b-163">Each member is a floating-point value that typically ranges from 0.0 to 1.0, inclusive.</span></span> <span data-ttu-id="3558b-164">Хотя оба индикатора и материала используют одну и ту же структуру для описания цвета, значения в структуре используются по-разному.</span><span class="sxs-lookup"><span data-stu-id="3558b-164">Although both lights and materials use the same structure to describe color, the values in the structure are used a little differently by each.</span></span>

<span data-ttu-id="3558b-165">Значения цвета для источников света определяют количество излучаемого им света.</span><span class="sxs-lookup"><span data-stu-id="3558b-165">Color values for light sources represent the amount of a particular light component it emits.</span></span> <span data-ttu-id="3558b-166">Поскольку для источников света не используется альфа-компонент, для них имеют значение только красный, зеленый и синий компоненты цвета.</span><span class="sxs-lookup"><span data-stu-id="3558b-166">Because lights don't use an alpha component, only the red, green, and blue components of the color are relevant.</span></span> <span data-ttu-id="3558b-167">Эти три компонента можно представить как линзы красного, зеленого и синего цвета на проекторе.</span><span class="sxs-lookup"><span data-stu-id="3558b-167">You can visualize the three components as the red, green, and blue lenses on a projection television.</span></span> <span data-ttu-id="3558b-168">Каждую линзу можно снять (значение 0,0 для соответствующего члена), также ее интенсивность может быть максимально яркой (значение 1,0) либо иметь значение где-то между двумя этими пределами.</span><span class="sxs-lookup"><span data-stu-id="3558b-168">Each lens might be off (a 0.0 value in the appropriate member), it might be as bright as possible (a 1.0 value), or it might be some level in between.</span></span> <span data-ttu-id="3558b-169">Цвета, проходящие через линзы, сочетаются и образуют окончательный цвет освещения.</span><span class="sxs-lookup"><span data-stu-id="3558b-169">The colors coming through the lenses combine to make the light's final color.</span></span> <span data-ttu-id="3558b-170">Сочетание R(1,0), G(1,0), B(1,0) создает белый свет, тогда как сочетание B(0,0), R(0,0), G(0.0) не производит света вообще.</span><span class="sxs-lookup"><span data-stu-id="3558b-170">A combination like R(1.0), G(1.0), B(1.0) creates a white light, where R(0.0), G(0.0), B(0.0) doesn't emit light at all.</span></span> <span data-ttu-id="3558b-171">Вы можете сделать источник света, излучающий только один компонент, что приведет к образованию чисто красного, зеленого или синего освещения; также можно использовать сочетания компонентов, чтобы образовать такие цвета, как, например, желтый или сиреневый.</span><span class="sxs-lookup"><span data-stu-id="3558b-171">You can make a light that emits only one component, resulting in a pure red, green, or blue light; or, the light could use combinations to emit colors like yellow or purple.</span></span> <span data-ttu-id="3558b-172">Вы можете даже задать отрицательное значение цвета для создания «темного света», который на самом деле ослабляет освещение в сцене.</span><span class="sxs-lookup"><span data-stu-id="3558b-172">You can even set negative color component values to create a "dark light" that actually removes light from a scene.</span></span> <span data-ttu-id="3558b-173">Также можно задать компонентам значение больше 1,0 для создания очень яркого света.</span><span class="sxs-lookup"><span data-stu-id="3558b-173">Or, you might set the components to some value larger than 1.0 to create an extremely bright light.</span></span>

<span data-ttu-id="3558b-174">С другой стороны, у материалов значения цвета определяют, насколько интенсивно световой компонент отражается от поверхности, которая отрисовывается с использованием этого материала.</span><span class="sxs-lookup"><span data-stu-id="3558b-174">With materials, on the other hand, color values represent how much of a light component is reflected by a surface that is rendered with that material.</span></span> <span data-ttu-id="3558b-175">Материал, цветовые компоненты которого имеют значения R(1,0), G(1,0), B(1,0), A(1,0), отражает весь попадающий на него свет.</span><span class="sxs-lookup"><span data-stu-id="3558b-175">A material whose color components are R(1.0), G(1.0), B(1.0), A(1.0) reflects all the light that comes its way.</span></span> <span data-ttu-id="3558b-176">В свою очередь материал со значениями R(0,0), G(1,0), B(0,0), A(1,0) отражает весь попадающий на него зеленый свет.</span><span class="sxs-lookup"><span data-stu-id="3558b-176">Likewise, a material with R(0.0), G(1.0), B(0.0), A(1.0) reflects all the green light that is directed at it.</span></span> <span data-ttu-id="3558b-177">Материалы имеют несколько значений отражающей способности для создания различных эффектов.</span><span class="sxs-lookup"><span data-stu-id="3558b-177">Materials have multiple reflectance values to create various types of effects.</span></span>

<span data-ttu-id="3558b-178">Дополнительные сведения содержатся в следующих [источниках: типы освещения (Direct3D 9)](light-types.md)и [Свойства освещения (Direct3D 9)](light-properties.md).</span><span class="sxs-lookup"><span data-stu-id="3558b-178">Additional information is contained in: [Light Types (Direct3D 9)](light-types.md), and [Light Properties (Direct3D 9)](light-properties.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="3558b-179">См. также</span><span class="sxs-lookup"><span data-stu-id="3558b-179">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3558b-180">Начало работы</span><span class="sxs-lookup"><span data-stu-id="3558b-180">Getting Started</span></span>](getting-started.md)
</dt> </dl>

 

 
