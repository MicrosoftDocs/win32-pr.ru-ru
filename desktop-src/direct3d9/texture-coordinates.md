---
description: Большинство текстур, например точечные рисунки, представляют собой двумерный массив значений цвета.
ms.assetid: vs|directx_sdk|~\texture_coordinates.htm
title: Координаты текстуры (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5dcf4c886c187aaa2218508a180e23644a544739
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104495771"
---
# <a name="texture-coordinates-direct3d-9"></a><span data-ttu-id="4cb09-103">Координаты текстуры (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="4cb09-103">Texture Coordinates (Direct3D 9)</span></span>

<span data-ttu-id="4cb09-104">Большинство текстур, например точечные рисунки, представляют собой двумерный массив значений цвета.</span><span class="sxs-lookup"><span data-stu-id="4cb09-104">Most textures, like bitmaps, are a two-dimensional array of color values.</span></span> <span data-ttu-id="4cb09-105">Текстура карт кубической среды является исключением.</span><span class="sxs-lookup"><span data-stu-id="4cb09-105">Cubic environment map textures are an exception.</span></span> <span data-ttu-id="4cb09-106">Дополнительные сведения см. в разделе [кубические сопоставления среды (Direct3D 9)](cubic-environment-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="4cb09-106">For details, see [Cubic Environment Mapping (Direct3D 9)](cubic-environment-mapping.md).</span></span> <span data-ttu-id="4cb09-107">Отдельные значения цвета называются элементом текстуры или шаг текселя.</span><span class="sxs-lookup"><span data-stu-id="4cb09-107">The individual color values are called a texture element, or texel.</span></span> <span data-ttu-id="4cb09-108">Каждый шаг текселя имеет уникальный адрес в текстуре.</span><span class="sxs-lookup"><span data-stu-id="4cb09-108">Each texel has a unique address in the texture.</span></span> <span data-ttu-id="4cb09-109">Адрес можно рассматривать как номер столбца и строки, который помечается с учетом и v соответственно на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="4cb09-109">The address can be thought of as a column and row number, which are labeled u and v respectively in the following illustration.</span></span>

![Иллюстрация адреса шаг текселя в виде номеров столбцов и строк](images/uvcoordinates.jpg)

<span data-ttu-id="4cb09-111">Координаты текстуры находятся в пространстве текстуры.</span><span class="sxs-lookup"><span data-stu-id="4cb09-111">Texture coordinates are in texture space.</span></span> <span data-ttu-id="4cb09-112">То есть они относительны относительно расположения (0,0) в текстуре.</span><span class="sxs-lookup"><span data-stu-id="4cb09-112">That is, they are relative to the location (0,0) in the texture.</span></span> <span data-ttu-id="4cb09-113">При применении текстуры к примитиву в трехмерном пространстве его шаг текселя адреса должны быть сопоставлены с координатами объекта.</span><span class="sxs-lookup"><span data-stu-id="4cb09-113">When a texture is applied to a primitive in 3D space, its texel addresses must be mapped into object coordinates.</span></span> <span data-ttu-id="4cb09-114">Затем их необходимо преобразовать в экранные координаты или расположение пикселей.</span><span class="sxs-lookup"><span data-stu-id="4cb09-114">They must then be translated into screen coordinates, or pixel locations.</span></span>

## <a name="mapping-texels-to-screen-space"></a><span data-ttu-id="4cb09-115">Сопоставление пикселей текстуры с пространством экрана</span><span class="sxs-lookup"><span data-stu-id="4cb09-115">Mapping Texels to Screen Space</span></span>

<span data-ttu-id="4cb09-116">Direct3D сопоставляет пикселей текстуры в пространстве текстур непосредственно с пикселями экрана, пропуская промежуточный шаг для повышения эффективности.</span><span class="sxs-lookup"><span data-stu-id="4cb09-116">Direct3D maps texels in texture space directly to pixels in screen space, skipping the intermediate step for greater efficiency.</span></span> <span data-ttu-id="4cb09-117">Этот процесс сопоставления на самом деле является обратным сопоставлением.</span><span class="sxs-lookup"><span data-stu-id="4cb09-117">This mapping process is actually an inverse mapping.</span></span> <span data-ttu-id="4cb09-118">То есть, для каждого пикселя в пространстве экрана вычисляется соответствующая шаг текселяная точка в пространстве текстуры.</span><span class="sxs-lookup"><span data-stu-id="4cb09-118">That is, for each pixel in screen space, the corresponding texel position in texture space is calculated.</span></span> <span data-ttu-id="4cb09-119">Цвет текстуры в этой точке или вокруг нее является выборкой.</span><span class="sxs-lookup"><span data-stu-id="4cb09-119">The texture color at or around that point is sampled.</span></span> <span data-ttu-id="4cb09-120">Процесс выборки называется фильтрацией текстур.</span><span class="sxs-lookup"><span data-stu-id="4cb09-120">The sampling process is called texture filtering.</span></span> <span data-ttu-id="4cb09-121">Дополнительные сведения см. в разделе [Фильтрация текстур (Direct3D 9)](texture-filtering.md).</span><span class="sxs-lookup"><span data-stu-id="4cb09-121">For more information, see [Texture Filtering (Direct3D 9)](texture-filtering.md).</span></span>

<span data-ttu-id="4cb09-122">Каждый шаг текселя в текстуре может быть задан своей координатой шаг текселя.</span><span class="sxs-lookup"><span data-stu-id="4cb09-122">Each texel in a texture can be specified by its texel coordinate.</span></span> <span data-ttu-id="4cb09-123">Однако для того, чтобы сопоставлять пикселей текстуры с примитивами, Direct3D требуется единообразный диапазон адресов для всех пикселей текстуры во всех текстурах.</span><span class="sxs-lookup"><span data-stu-id="4cb09-123">However, in order to map texels onto primitives, Direct3D requires a uniform address range for all texels in all textures.</span></span> <span data-ttu-id="4cb09-124">Поэтому он использует универсальную схему адресации, в которой все шаг текселя адреса находятся в диапазоне от 0,0 до 1,0 включительно.</span><span class="sxs-lookup"><span data-stu-id="4cb09-124">Therefore, it uses a generic addressing scheme in which all texel addresses are in the range of 0.0 to 1.0 inclusive.</span></span> <span data-ttu-id="4cb09-125">Приложения Direct3D указывают координаты текстуры с точки зрения, значения v, которые точно подобно координатам двухмерной Декарт, задаются в виде координат x, y.</span><span class="sxs-lookup"><span data-stu-id="4cb09-125">Direct3D applications specify texture coordinates in terms of u,v values, much like 2D Cartesian coordinates are specified in terms of x,y coordinates.</span></span> <span data-ttu-id="4cb09-126">Технически, система может фактически обрабатывать координаты текстуры за пределами диапазона 0,0 и 1,0. это можно сделать с помощью параметров, заданных для адресации текстуры.</span><span class="sxs-lookup"><span data-stu-id="4cb09-126">Technically, the system can actually process texture coordinates outside the range of 0.0 and 1.0, and does so by using the parameters you set for texture addressing.</span></span> <span data-ttu-id="4cb09-127">Дополнительные сведения см. в разделе [режимы адресации текстур (Direct3D 9)](texture-addressing-modes.md).</span><span class="sxs-lookup"><span data-stu-id="4cb09-127">For more information, see [Texture Addressing Modes (Direct3D 9)](texture-addressing-modes.md).</span></span>

<span data-ttu-id="4cb09-128">В результате идентичные адреса текстур могут сопоставляться с различными координатами шаг текселя в разных текстурах.</span><span class="sxs-lookup"><span data-stu-id="4cb09-128">A result of this is that identical texture addresses can map to different texel coordinates in different textures.</span></span> <span data-ttu-id="4cb09-129">На следующем рисунке адрес текстуры — (0,5, 1,0).</span><span class="sxs-lookup"><span data-stu-id="4cb09-129">In the following illustration, the texture address is (0.5,1.0).</span></span> <span data-ttu-id="4cb09-130">Однако, поскольку текстуры имеют разные размеры, адрес текстуры сопоставляется с различными пикселей текстуры.</span><span class="sxs-lookup"><span data-stu-id="4cb09-130">However, because the textures are different sizes, the texture address maps to different texels.</span></span> <span data-ttu-id="4cb09-131">Текстура 1 слева находится в виде 5x5.</span><span class="sxs-lookup"><span data-stu-id="4cb09-131">Texture 1, on the left, is 5x5.</span></span> <span data-ttu-id="4cb09-132">Адрес текстуры (0,5, 1.0) сопоставляется с шаг текселя (2, 4).</span><span class="sxs-lookup"><span data-stu-id="4cb09-132">The texture address (0.5,1.0) maps to texel (2,4).</span></span> <span data-ttu-id="4cb09-133">Текстура 2, справа, — 7x7.</span><span class="sxs-lookup"><span data-stu-id="4cb09-133">Texture 2, on the right, is 7x7.</span></span> <span data-ttu-id="4cb09-134">Адрес текстуры (0,5, 1.0) сопоставляется с шаг текселя (3, 6).</span><span class="sxs-lookup"><span data-stu-id="4cb09-134">The texture address (0.5,1.0) maps to texel (3,6).</span></span>

![Иллюстрация того же адреса текстуры, сопоставленного с различными пикселей текстуры на разных текстурах](images/texadr1.png)

<span data-ttu-id="4cb09-136">На следующем рисунке показана упрощенная версия процесса сопоставления шаг текселя.</span><span class="sxs-lookup"><span data-stu-id="4cb09-136">A simplified version of the texel mapping process is shown in the following illustration.</span></span> <span data-ttu-id="4cb09-137">Следует признать, что этот пример чрезвычайно прост.</span><span class="sxs-lookup"><span data-stu-id="4cb09-137">Admittedly, this example is extremely simple.</span></span> <span data-ttu-id="4cb09-138">Более подробные сведения см. [в разделе прямое сопоставление пикселей текстуры с пикселями (Direct3D 9)](directly-mapping-texels-to-pixels.md).</span><span class="sxs-lookup"><span data-stu-id="4cb09-138">For more detailed information, see [Directly Mapping Texels to Pixels (Direct3D 9)](directly-mapping-texels-to-pixels.md).</span></span>

![Иллюстрация пикселя (квадрат цвета), сопоставленного с пространством объектов](images/texadr2.png)

<span data-ttu-id="4cb09-140">В этом примере пиксель, показанный слева от иллюстрации, идеально подходит к квадрату цвета.</span><span class="sxs-lookup"><span data-stu-id="4cb09-140">For this example, a pixel, shown at the left of the illustration, is idealized into a square of color.</span></span> <span data-ttu-id="4cb09-141">Адреса четырех углов пикселей сопоставлены с трехмерным примитивом в пространстве объектов.</span><span class="sxs-lookup"><span data-stu-id="4cb09-141">The addresses of the four corners of the pixel are mapped into the 3D primitive in object space.</span></span> <span data-ttu-id="4cb09-142">Форма пикселя часто искажается из-за формы примитива в трехмерном пространстве и от угла обзора.</span><span class="sxs-lookup"><span data-stu-id="4cb09-142">The shape of the pixel is often distorted because of the shape of the primitive in 3D space and because of the viewing angle.</span></span> <span data-ttu-id="4cb09-143">Углы контактной зоны на примитиве, соответствующие углам пикселя, затем сопоставляются с пространством текстуры.</span><span class="sxs-lookup"><span data-stu-id="4cb09-143">The corners of the surface area on the primitive that correspond the corners of the pixel are then mapped into texture space.</span></span> <span data-ttu-id="4cb09-144">Процесс сопоставления снова искажает фигуру пикселя, что является общим.</span><span class="sxs-lookup"><span data-stu-id="4cb09-144">The mapping process distorts the pixel's shape again, which is common.</span></span> <span data-ttu-id="4cb09-145">Конечное значение цвета в пикселе высчитывается из пикселей текстуры в регионе, в котором сопоставляется пиксель.</span><span class="sxs-lookup"><span data-stu-id="4cb09-145">The final color value of the pixel is computed from the texels in the region to which the pixel maps.</span></span> <span data-ttu-id="4cb09-146">При задании метода фильтрации текстур определяется метод, который Direct3D использует для получения цвета пикселя.</span><span class="sxs-lookup"><span data-stu-id="4cb09-146">You determine the method that Direct3D uses to arrive at the pixel color when you set the texture filtering method.</span></span> <span data-ttu-id="4cb09-147">Дополнительные сведения см. в разделе [Фильтрация текстур (Direct3D 9)](texture-filtering.md).</span><span class="sxs-lookup"><span data-stu-id="4cb09-147">For more information, see [Texture Filtering (Direct3D 9)](texture-filtering.md).</span></span>

<span data-ttu-id="4cb09-148">Приложение может назначать координаты текстуры непосредственно в вершины.</span><span class="sxs-lookup"><span data-stu-id="4cb09-148">Your application can assign texture coordinates directly to vertices.</span></span> <span data-ttu-id="4cb09-149">Эта возможность позволяет контролировать, какая часть текстуры сопоставлена с примитивом.</span><span class="sxs-lookup"><span data-stu-id="4cb09-149">This capability gives you control over which portion of a texture is mapped into a primitive.</span></span> <span data-ttu-id="4cb09-150">Например, предположим, что вы создаете прямоугольный примитив, размер которого совпадает с размером текстуры, показанной на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="4cb09-150">For instance, suppose you create a rectangular primitive that is exactly the same size as the texture in the following illustration.</span></span> <span data-ttu-id="4cb09-151">В этом примере необходимо, чтобы приложение сопоставляло всю текстуру на всю стену.</span><span class="sxs-lookup"><span data-stu-id="4cb09-151">In this example, you want your application to map the whole texture onto the whole wall.</span></span> <span data-ttu-id="4cb09-152">Координаты текстуры, которые ваше приложение назначает вершинам примитива: (0,0, 0,0), (1,0, 0.0), (1.0, 1.0) и (0,0, 1.0).</span><span class="sxs-lookup"><span data-stu-id="4cb09-152">The texture coordinates your application assigns to the vertices of the primitive are (0.0,0.0), (1.0,0.0), (1.0,1.0), and (0.0,1.0).</span></span>

![Иллюстрация сопоставленной с текстурой стены](images/texadr3.png)

<span data-ttu-id="4cb09-154">Если вы решили уменьшить высоту стены на одну половину, можно искажать текстуру так, чтобы она поместилась в меньшую стенку, или можно назначить координаты текстуры, которые приводят к тому, что Direct3D будет использовать нижнюю половину текстуры.</span><span class="sxs-lookup"><span data-stu-id="4cb09-154">If you decide to decrease the height of the wall by one-half, you can distort the texture to fit onto the smaller wall, or you can assign texture coordinates that cause Direct3D to use the lower half of the texture.</span></span>

<span data-ttu-id="4cb09-155">Если вы решили искажать или масштабировать текстуру по размеру меньшей стены, используемый метод фильтрации текстур влияет на качество изображения.</span><span class="sxs-lookup"><span data-stu-id="4cb09-155">If you decide to distort or scale the texture to fit the smaller wall, the texture filtering method that you use will influence the quality of the image.</span></span> <span data-ttu-id="4cb09-156">Дополнительные сведения см. в разделе [Фильтрация текстур (Direct3D 9)](texture-filtering.md).</span><span class="sxs-lookup"><span data-stu-id="4cb09-156">For more information, see [Texture Filtering (Direct3D 9)](texture-filtering.md).</span></span>

<span data-ttu-id="4cb09-157">Если вместо этого вы решили назначить координаты текстуры для того, чтобы Direct3D использовал нижнюю половину текстуры для меньшей стены, координаты текстуры, которые приложение назначает в качестве вершин примитива в этом примере: (0,0, 0,5), (1,0, 0,5), (1.0, 1.0) и (0,0, 1.0).</span><span class="sxs-lookup"><span data-stu-id="4cb09-157">If, instead, you decide to assign texture coordinates to make Direct3D use the lower half of the texture for the smaller wall, the texture coordinates your application assigns to the vertices of the primitive in this example are (0.0,0.5), (1.0,0.5), (1.0,1.0), and (0.0,1.0).</span></span> <span data-ttu-id="4cb09-158">Direct3D применяет нижнюю половину текстуры к стене.</span><span class="sxs-lookup"><span data-stu-id="4cb09-158">Direct3D applies the lower half of the texture to the wall.</span></span>

<span data-ttu-id="4cb09-159">Координаты текстуры вершины могут быть больше 1,0.</span><span class="sxs-lookup"><span data-stu-id="4cb09-159">It is possible for texture coordinates of a vertex to be greater than 1.0.</span></span> <span data-ttu-id="4cb09-160">При назначении координат текстуры для вершины, которая не находится в диапазоне от 0,0 до 1,0 включительно, следует также задать режим адресации текстуры.</span><span class="sxs-lookup"><span data-stu-id="4cb09-160">When you assign texture coordinates to a vertex that are not in the range of 0.0 to 1.0 inclusive, you should also set the texture addressing mode.</span></span> <span data-ttu-id="4cb09-161">Дополнительные сведения см. в разделе [режимы адресации текстур (Direct3D 9)](texture-addressing-modes.md).</span><span class="sxs-lookup"><span data-stu-id="4cb09-161">For more information, see [Texture Addressing Modes (Direct3D 9)](texture-addressing-modes.md).</span></span>

## <a name="texture-coordinates-and-texture-stages"></a><span data-ttu-id="4cb09-162">Координаты текстуры и этапы текстуры</span><span class="sxs-lookup"><span data-stu-id="4cb09-162">Texture Coordinates and Texture Stages</span></span>

<span data-ttu-id="4cb09-163">Координаты текстуры связаны с текстурами с помощью стадий текстуры.</span><span class="sxs-lookup"><span data-stu-id="4cb09-163">Texture coordinates are associated with textures by way of texture stages.</span></span> <span data-ttu-id="4cb09-164">Текстуры назначаются стадиям текстуры с помощью Сеттекстуре (Стажеиндекс, Птекстуре).</span><span class="sxs-lookup"><span data-stu-id="4cb09-164">Textures get assigned to texture stages with SetTexture(stageIndex, pTexture).</span></span> <span data-ttu-id="4cb09-165">См. раздел [**IDirect3DDevice9:: сеттекстуре**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture).</span><span class="sxs-lookup"><span data-stu-id="4cb09-165">See [**IDirect3DDevice9::SetTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture).</span></span>

<span data-ttu-id="4cb09-166">В коде гибкого формата вершин (ФВФ) можно определить до восьми наборов координат текстуры.</span><span class="sxs-lookup"><span data-stu-id="4cb09-166">A Flexible Vertex Format(FVF) code can define up to eight sets of texture coordinates.</span></span> <span data-ttu-id="4cb09-167">Данные координаты текстуры предоставляются пользователем в данных вершин.</span><span class="sxs-lookup"><span data-stu-id="4cb09-167">The texture coordinate data is furnished by the user in the vertex data.</span></span> <span data-ttu-id="4cb09-168">Данные называются индексом, начинающимся с нуля: 0-7.</span><span class="sxs-lookup"><span data-stu-id="4cb09-168">The data is referred to with a zero based index: 0 - 7.</span></span> <span data-ttu-id="4cb09-169">Существует до восьми стадий смешения текстур.</span><span class="sxs-lookup"><span data-stu-id="4cb09-169">There are up to eight texture blending stages.</span></span> <span data-ttu-id="4cb09-170">Текстура связана с конкретным этапом с помощью Сеттекстуре (Стажеиндекс, Птекстуре).</span><span class="sxs-lookup"><span data-stu-id="4cb09-170">A texture is associated with a particular stage using SetTexture( stageIndex, pTexture).</span></span>

<span data-ttu-id="4cb09-171">После этого любой этап может использовать любой набор координат текстуры.</span><span class="sxs-lookup"><span data-stu-id="4cb09-171">Once this is done, any set of texture coordinates can be used by any stage.</span></span> <span data-ttu-id="4cb09-172">Каждый набор координат связан с стадией с помощью Сеттекстурестажестате (Стажеиндекс, D3DTSS \_ текскурдиндекс, текстурекурдинатеиндекс).</span><span class="sxs-lookup"><span data-stu-id="4cb09-172">Each set of coordinates is associated with a stage using SetTextureStageState( stageIndex, D3DTSS\_TEXCOORDINDEX, textureCoordinateIndex ).</span></span> <span data-ttu-id="4cb09-173">См. раздел [**IDirect3DDevice9:: сеттекстурестажестате**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexturestagestate).</span><span class="sxs-lookup"><span data-stu-id="4cb09-173">See [**IDirect3DDevice9::SetTextureStageState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexturestagestate).</span></span> <span data-ttu-id="4cb09-174">Таким образом, этапы смешивания можно настроить для использования любой текстуры и любых координат текстуры.</span><span class="sxs-lookup"><span data-stu-id="4cb09-174">This way, the blending stages can be set up to use any texture and any texture coordinates.</span></span> <span data-ttu-id="4cb09-175">Более одного этапа могут использовать одни и те же текстуры или координаты текстуры.</span><span class="sxs-lookup"><span data-stu-id="4cb09-175">More than one stage can use the same textures, or texture coordinates.</span></span>

<span data-ttu-id="4cb09-176">Дополнительные сведения содержатся в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="4cb09-176">Additional information is contained in the following topics.</span></span>

-   [<span data-ttu-id="4cb09-177">Форматы координат текстуры (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="4cb09-177">Texture Coordinate Formats (Direct3D 9)</span></span>](texture-coordinate-formats.md)
-   [<span data-ttu-id="4cb09-178">Обработка координат текстуры (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="4cb09-178">Texture Coordinate Processing (Direct3D 9)</span></span>](texture-coordinate-processing.md)

## <a name="related-topics"></a><span data-ttu-id="4cb09-179">См. также</span><span class="sxs-lookup"><span data-stu-id="4cb09-179">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4cb09-180">Текстуры Direct3D</span><span class="sxs-lookup"><span data-stu-id="4cb09-180">Direct3D Textures</span></span>](direct3d-textures.md)
</dt> </dl>

 

 
