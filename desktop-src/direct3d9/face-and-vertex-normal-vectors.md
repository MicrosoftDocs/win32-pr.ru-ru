---
description: Каждая грань в сетке имеет вектор перпендикулярного блока, как показано на следующем рисунке.
ms.assetid: 86e2a460-7b58-4612-8f72-5a4e864ceb58
title: Векторы лицевой стороны и вершины (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6e0ef6fd8eba85b770cbfe71477655ddbafd8ee7
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104560757"
---
# <a name="face-and-vertex-normal-vectors-direct3d-9"></a>Векторы лицевой стороны и вершины (Direct3D 9)

Каждая грань в сетке имеет вектор перпендикулярного блока, как показано на следующем рисунке. Направление вектора определяется порядком определения вершин и типом системы координат (правосторонняя или левосторонняя). Нормаль поверхности направлена от передней стороны поверхности. В Direct3D видима только передняя сторона поверхности. Передняя поверхность — та, на которой вершины определяются по часовой стрелке.

![Иллюстрация обычного вектора для лицевой стороны](images/nrmlvect.png)

Любая не передняя поверхность считается задней. Direct3D не всегда выполняет визуализацию задних граней; Поэтому говорят, что обратные грани исключаются. При необходимости можно изменить режим отбрасывания и включить отрисовку задних поверхностей. Дополнительные сведения см. в разделе [состояние отбора (Direct3D 9)](culling-state.md) .

Direct3D использует единичные нормали вершин для затенения по методу Гуро, освещения и эффектов материалов. На следующем рисунке показаны примеры обычных.

![Иллюстрация нормалей вершин](images/vertnrml.png)

При применении затенения по методу Гуро к полигону Direct3D использует нормали вершин для вычисления угла между источником света и поверхностью. При этом Direct3D вычисляет значения цвета и интенсивности для вершин и интерполирует их для каждой точки на всех поверхностях примитива. Direct3D вычисляет значение интенсивности света с помощью угла. Чем больше угол, тем меньше света попадает на поверхность.

При создании объекта, который является плоским, установите нормали вершин так, чтобы она указывала перпендикулярно поверхности, как показано на следующем рисунке.

![Иллюстрация плоской поверхности, состоящей из двух треугольников с нормальными вершинами](images/flatvert.png)

Однако более вероятно, что объект состоит из лент треугольников, а треугольники — не копланар. Существует простой способ добиться плавного затенения всех треугольников в полосе. Для этого нужно сначала рассчитать нормальный вектор поверхности для каждой полигональной поверхности, с которой связана вершина. Нормаль вершины можно настроить так, чтобы она образовывала равный угол с каждой нормалью поверхности. Однако этот метод может оказаться недостаточно эффективным для сложных примитивов.

Этот метод проиллюстрирован на следующей схеме, где показаны две поверхности, S1 и S2, с видом на их ребра сверху. Нормальные векторы поверхностей S1 и S2 показаны синим цветом. Нормальный вектор вершины показан красным цветом. Угол между нормальным вектором вершины и нормалью поверхности S1 идентичен углу между нормальную вершины и нормалью поверхности S2. При освещении и затенении этих двух поверхностей по методу Гуро между ними получается плавно затененное и закругленное ребро.

![схема двух поверхностей (S1 и S2) и их нормальных векторов и вектора нормали вершин](images/gvert.png)

Если нормаль вершины тяготеет в одной из поверхностей, с которой она связана, интенсивность света для точек на этой поверхности увеличивается или уменьшается в зависимости от угла между нормалью и источником света. На следующей схеме приведен пример. Опять же, эти поверхности видны по периметру. Нормаль вершины тяготеет к поверхности S1, поэтому угол между ней и источником света меньше, чем в том случае, если бы углы между нормалью вершины и нормалями поверхностей были равны.

![схема двух поверхностей (S1 и S2) с вектором нормали вершин, направленным в сторону одной грани](images/gvert2.png)

Вы можете использовать затенение по методу Гуро для отображения некоторых объектов с острыми ребрами в трехмерной сцене. Для этого следует дублировать векторы нормали вершин на любом пересечении лиц, где требуется острая кромка, как показано на следующем рисунке.

![Иллюстрация повторяющихся векторов нормали вершин на четких краях](images/shade1.png)

Если вы используете методы DrawPrimitive для отрисовки сцены, определите объект с острыми ребрами как список треугольников, а не полосу треугольников. Если объект определен как полоса треугольников, Direct3D считает его одним многоугольником, состоящим из нескольких треугольных поверхностей. Затенение по методу Гуро применяется как для каждой поверхности многоугольника, так и между смежными поверхностями. В результате получается объект, плавно затененный от поверхности к поверхности. Поскольку список треугольников — это многоугольник, состоящий из ряда несвязанных треугольных поверхностей, Direct3D применяет затенение по методу Гуро к каждой поверхности многоугольника. Однако оно не применяется от поверхности к поверхности. Если два или более треугольников в списке треугольников смежные, между ними видится острое ребро.

В качестве альтернативы можно перейти к плоскому затенению при отрисовке объектов с острыми ребрами. С точки зрения вычислений, это самый эффективный метод, но при его использовании некоторые объекты в сцене могут быть отрисованы не так реалистично, как объекты, затененные по методу Гуро.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Системы координат и геометрия](coordinate-systems-and-geometry.md)
</dt> </dl>

 

 



