---
description: Каждая грань в сетке имеет вектор перпендикулярного блока, как показано на следующем рисунке.
ms.assetid: 86e2a460-7b58-4612-8f72-5a4e864ceb58
title: Векторы лицевой стороны и вершины (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6e0ef6fd8eba85b770cbfe71477655ddbafd8ee7
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104560757"
---
# <a name="face-and-vertex-normal-vectors-direct3d-9"></a><span data-ttu-id="214de-103">Векторы лицевой стороны и вершины (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="214de-103">Face and Vertex Normal Vectors (Direct3D 9)</span></span>

<span data-ttu-id="214de-104">Каждая грань в сетке имеет вектор перпендикулярного блока, как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="214de-104">Each face in a mesh has a perpendicular unit normal vector, as shown in the following illustration.</span></span> <span data-ttu-id="214de-105">Направление вектора определяется порядком определения вершин и типом системы координат (правосторонняя или левосторонняя).</span><span class="sxs-lookup"><span data-stu-id="214de-105">The vector's direction is determined by the order in which the vertices are defined and by whether the coordinate system is right- or left-handed.</span></span> <span data-ttu-id="214de-106">Нормаль поверхности направлена от передней стороны поверхности.</span><span class="sxs-lookup"><span data-stu-id="214de-106">The face normal points away from the front side of the face.</span></span> <span data-ttu-id="214de-107">В Direct3D видима только передняя сторона поверхности.</span><span class="sxs-lookup"><span data-stu-id="214de-107">In Direct3D, only the front of a face is visible.</span></span> <span data-ttu-id="214de-108">Передняя поверхность — та, на которой вершины определяются по часовой стрелке.</span><span class="sxs-lookup"><span data-stu-id="214de-108">A front face is one in which vertices are defined in clockwise order.</span></span>

![Иллюстрация обычного вектора для лицевой стороны](images/nrmlvect.png)

<span data-ttu-id="214de-110">Любая не передняя поверхность считается задней.</span><span class="sxs-lookup"><span data-stu-id="214de-110">Any face that is not a front face is a back face.</span></span> <span data-ttu-id="214de-111">Direct3D не всегда выполняет визуализацию задних граней; Поэтому говорят, что обратные грани исключаются.</span><span class="sxs-lookup"><span data-stu-id="214de-111">Direct3D does not always render back faces; therefore, back faces are said to be culled.</span></span> <span data-ttu-id="214de-112">При необходимости можно изменить режим отбрасывания и включить отрисовку задних поверхностей.</span><span class="sxs-lookup"><span data-stu-id="214de-112">You can change the culling mode to render back faces if you want.</span></span> <span data-ttu-id="214de-113">Дополнительные сведения см. в разделе [состояние отбора (Direct3D 9)](culling-state.md) .</span><span class="sxs-lookup"><span data-stu-id="214de-113">See [Culling State (Direct3D 9)](culling-state.md) for more information.</span></span>

<span data-ttu-id="214de-114">Direct3D использует единичные нормали вершин для затенения по методу Гуро, освещения и эффектов материалов.</span><span class="sxs-lookup"><span data-stu-id="214de-114">Direct3D uses the vertex unit normals for Gouraud shading, lighting, and texturing effects.</span></span> <span data-ttu-id="214de-115">На следующем рисунке показаны примеры обычных.</span><span class="sxs-lookup"><span data-stu-id="214de-115">The following illustration shows example normals.</span></span>

![Иллюстрация нормалей вершин](images/vertnrml.png)

<span data-ttu-id="214de-117">При применении затенения по методу Гуро к полигону Direct3D использует нормали вершин для вычисления угла между источником света и поверхностью.</span><span class="sxs-lookup"><span data-stu-id="214de-117">When applying Gouraud shading to a polygon, Direct3D uses the vertex normals to calculate the angle between the light source and the surface.</span></span> <span data-ttu-id="214de-118">При этом Direct3D вычисляет значения цвета и интенсивности для вершин и интерполирует их для каждой точки на всех поверхностях примитива.</span><span class="sxs-lookup"><span data-stu-id="214de-118">It calculates the color and intensity values for the vertices and interpolates them for every point across all the primitive's surfaces.</span></span> <span data-ttu-id="214de-119">Direct3D вычисляет значение интенсивности света с помощью угла.</span><span class="sxs-lookup"><span data-stu-id="214de-119">Direct3D calculates the light intensity value by using the angle.</span></span> <span data-ttu-id="214de-120">Чем больше угол, тем меньше света попадает на поверхность.</span><span class="sxs-lookup"><span data-stu-id="214de-120">The greater the angle, the less light is shining on the surface.</span></span>

<span data-ttu-id="214de-121">При создании объекта, который является плоским, установите нормали вершин так, чтобы она указывала перпендикулярно поверхности, как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="214de-121">If you are creating an object that is flat, set the vertex normals to point perpendicular to the surface, as shown in the following illustration.</span></span>

![Иллюстрация плоской поверхности, состоящей из двух треугольников с нормальными вершинами](images/flatvert.png)

<span data-ttu-id="214de-123">Однако более вероятно, что объект состоит из лент треугольников, а треугольники — не копланар.</span><span class="sxs-lookup"><span data-stu-id="214de-123">It is more likely, however, that your object is made up of triangle strips and the triangles are not coplanar.</span></span> <span data-ttu-id="214de-124">Существует простой способ добиться плавного затенения всех треугольников в полосе. Для этого нужно сначала рассчитать нормальный вектор поверхности для каждой полигональной поверхности, с которой связана вершина.</span><span class="sxs-lookup"><span data-stu-id="214de-124">One simple way to achieve smooth shading across all the triangles in the strip is to first calculate the surface normal vector for each polygonal face with which the vertex is associated.</span></span> <span data-ttu-id="214de-125">Нормаль вершины можно настроить так, чтобы она образовывала равный угол с каждой нормалью поверхности.</span><span class="sxs-lookup"><span data-stu-id="214de-125">The vertex normal can be set to make an equal angle with each surface normal.</span></span> <span data-ttu-id="214de-126">Однако этот метод может оказаться недостаточно эффективным для сложных примитивов.</span><span class="sxs-lookup"><span data-stu-id="214de-126">However, this method might not be efficient enough for complex primitives.</span></span>

<span data-ttu-id="214de-127">Этот метод проиллюстрирован на следующей схеме, где показаны две поверхности, S1 и S2, с видом на их ребра сверху.</span><span class="sxs-lookup"><span data-stu-id="214de-127">This method is illustrated by the following diagram, which shows two surfaces, S1 and S2 seen edge-on from above.</span></span> <span data-ttu-id="214de-128">Нормальные векторы поверхностей S1 и S2 показаны синим цветом.</span><span class="sxs-lookup"><span data-stu-id="214de-128">The normal vectors for S1 and S2 are shown in blue.</span></span> <span data-ttu-id="214de-129">Нормальный вектор вершины показан красным цветом.</span><span class="sxs-lookup"><span data-stu-id="214de-129">The vertex normal vector is shown in red.</span></span> <span data-ttu-id="214de-130">Угол между нормальным вектором вершины и нормалью поверхности S1 идентичен углу между нормальную вершины и нормалью поверхности S2.</span><span class="sxs-lookup"><span data-stu-id="214de-130">The angle that the vertex normal vector makes with the surface normal of S1 is the same as the angle between the vertex normal and the surface normal of S2.</span></span> <span data-ttu-id="214de-131">При освещении и затенении этих двух поверхностей по методу Гуро между ними получается плавно затененное и закругленное ребро.</span><span class="sxs-lookup"><span data-stu-id="214de-131">When these two surfaces are lit and shaded with Gouraud shading, the result is a smoothly shaded, smoothly rounded edge between them.</span></span>

![схема двух поверхностей (S1 и S2) и их нормальных векторов и вектора нормали вершин](images/gvert.png)

<span data-ttu-id="214de-133">Если нормаль вершины тяготеет в одной из поверхностей, с которой она связана, интенсивность света для точек на этой поверхности увеличивается или уменьшается в зависимости от угла между нормалью и источником света.</span><span class="sxs-lookup"><span data-stu-id="214de-133">If the vertex normal leans toward one of the faces with which it is associated, it causes the light intensity to increase or decrease for points on that surface, depending on the angle it makes with the light source.</span></span> <span data-ttu-id="214de-134">На следующей схеме приведен пример.</span><span class="sxs-lookup"><span data-stu-id="214de-134">The following diagram shows an example.</span></span> <span data-ttu-id="214de-135">Опять же, эти поверхности видны по периметру.</span><span class="sxs-lookup"><span data-stu-id="214de-135">Again, these surfaces are seen edge-on.</span></span> <span data-ttu-id="214de-136">Нормаль вершины тяготеет к поверхности S1, поэтому угол между ней и источником света меньше, чем в том случае, если бы углы между нормалью вершины и нормалями поверхностей были равны.</span><span class="sxs-lookup"><span data-stu-id="214de-136">The vertex normal leans toward S1, causing it to have a smaller angle with the light source than if the vertex normal had equal angles with the surface normals.</span></span>

![схема двух поверхностей (S1 и S2) с вектором нормали вершин, направленным в сторону одной грани](images/gvert2.png)

<span data-ttu-id="214de-138">Вы можете использовать затенение по методу Гуро для отображения некоторых объектов с острыми ребрами в трехмерной сцене.</span><span class="sxs-lookup"><span data-stu-id="214de-138">You can use Gouraud shading to display some objects in a 3D scene with sharp edges.</span></span> <span data-ttu-id="214de-139">Для этого следует дублировать векторы нормали вершин на любом пересечении лиц, где требуется острая кромка, как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="214de-139">To do so, duplicate the vertex normal vectors at any intersection of faces where a sharp edge is required, as shown in the following illustration.</span></span>

![Иллюстрация повторяющихся векторов нормали вершин на четких краях](images/shade1.png)

<span data-ttu-id="214de-141">Если вы используете методы DrawPrimitive для отрисовки сцены, определите объект с острыми ребрами как список треугольников, а не полосу треугольников.</span><span class="sxs-lookup"><span data-stu-id="214de-141">If you use the DrawPrimitive methods to render your scene, define the object with sharp edges as a triangle list, rather than a triangle strip.</span></span> <span data-ttu-id="214de-142">Если объект определен как полоса треугольников, Direct3D считает его одним многоугольником, состоящим из нескольких треугольных поверхностей.</span><span class="sxs-lookup"><span data-stu-id="214de-142">When you define an object as a triangle strip, Direct3D treats it as a single polygon composed of multiple triangular faces.</span></span> <span data-ttu-id="214de-143">Затенение по методу Гуро применяется как для каждой поверхности многоугольника, так и между смежными поверхностями.</span><span class="sxs-lookup"><span data-stu-id="214de-143">Gouraud shading is applied both across each face of the polygon and between adjacent faces.</span></span> <span data-ttu-id="214de-144">В результате получается объект, плавно затененный от поверхности к поверхности.</span><span class="sxs-lookup"><span data-stu-id="214de-144">The result is an object that is smoothly shaded from face to face.</span></span> <span data-ttu-id="214de-145">Поскольку список треугольников — это многоугольник, состоящий из ряда несвязанных треугольных поверхностей, Direct3D применяет затенение по методу Гуро к каждой поверхности многоугольника.</span><span class="sxs-lookup"><span data-stu-id="214de-145">Because a triangle list is a polygon composed of a series of disjoint triangular faces, Direct3D applies Gouraud shading across each face of the polygon.</span></span> <span data-ttu-id="214de-146">Однако оно не применяется от поверхности к поверхности.</span><span class="sxs-lookup"><span data-stu-id="214de-146">However, it is not applied from face to face.</span></span> <span data-ttu-id="214de-147">Если два или более треугольников в списке треугольников смежные, между ними видится острое ребро.</span><span class="sxs-lookup"><span data-stu-id="214de-147">If two or more triangles of a triangle list are adjacent, they appear to have a sharp edge between them.</span></span>

<span data-ttu-id="214de-148">В качестве альтернативы можно перейти к плоскому затенению при отрисовке объектов с острыми ребрами.</span><span class="sxs-lookup"><span data-stu-id="214de-148">Another alternative is to change to flat shading when rendering objects with sharp edges.</span></span> <span data-ttu-id="214de-149">С точки зрения вычислений, это самый эффективный метод, но при его использовании некоторые объекты в сцене могут быть отрисованы не так реалистично, как объекты, затененные по методу Гуро.</span><span class="sxs-lookup"><span data-stu-id="214de-149">This is computationally the most efficient method, but it may result in objects in the scene that are not rendered as realistically as the objects that are Gouraud-shaded.</span></span>

## <a name="related-topics"></a><span data-ttu-id="214de-150">См. также</span><span class="sxs-lookup"><span data-stu-id="214de-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="214de-151">Системы координат и геометрия</span><span class="sxs-lookup"><span data-stu-id="214de-151">Coordinate Systems and Geometry</span></span>](coordinate-systems-and-geometry.md)
</dt> </dl>

 

 



