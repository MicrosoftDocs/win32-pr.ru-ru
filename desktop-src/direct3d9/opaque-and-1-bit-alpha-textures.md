---
description: Формат текстуры DXT1 предназначен для текстур, которые являются непрозрачными или имеют один прозрачный цвет.
ms.assetid: a890ed0a-1f68-45b8-93cb-b621d1908d9f
title: Непрозрачные и 1-разрядные текстуры Alpha (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bda620810e48cba519322f3f2426555443fb696f524f4fbe7752a8c7aaedba73
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "117728183"
---
# <a name="opaque-and-1-bit-alpha-textures-direct3d-9"></a>Непрозрачные и 1-разрядные текстуры Alpha (Direct3D 9)

Формат текстуры DXT1 предназначен для текстур, которые являются непрозрачными или имеют один прозрачный цвет.

Для каждого непрозрачного или 1-разрядного альфа-блока сохраняются два 16-разрядных значения (формат RGB 5:6:5) и битовая карта 4 x 4 с 2 битами на пиксель. Это в сумме составляет 64 бита для 16 текселей или четыре бита на тексель. В битовой карте блока предусматриваются 2 бита на тексель для выбора из четырех цветов, два из которых хранятся в закодированных данных. Другие два цвета являются производными от эти сохраненных цветов путем линейной интерполяции. Этом макет показан на следующей схеме.

![схема битовой карты](images/colors1.png)

Формат 1-разрядного альфа-значения может быть отличен от формата непрозрачного цвета путем сравнения двух 16-разрядных значений цвета, сохраненных в блоке. Они обрабатываются как целые числа без знака. Если первый цвет больше, чем второй, подразумевается, что определены только непрозрачные тексели. Это означает, что для представления текселей используются четыре цвета. В четырехцветном кодировании существует два производных цвета, а все четыре цвета распределяются равномерно в цветовом пространстве RGB. Этот формат аналогичен формату RGB 5:6:5. В противном случае для 1-разрядной альфа-прозрачности используются три цвета, а четвертый резервируется для представления прозрачных текселей.

В кодировке тремя цветами существует один производный цвет, а четвертый 2-разрядный код резервируется для указания прозрачного текселя (данные альфа-канала). Этот формат аналогичен RGBA 5:5:5:1, где заключительный разряд используется для кодирования альфа-маски.

В следующем примере кода показан алгоритм определения того, выбрано ли трех- или четырехцветовое кодирование.


```
if (color_0 > color_1) 
{
    // Four-color block: derive the other two colors.    
    // 00 = color_0, 01 = color_1, 10 = color_2, 11 = color_3
    // These 2-bit codes correspond to the 2-bit fields 
    // stored in the 64-bit block.
    color_2 = (2 * color_0 + color_1 + 1) / 3;
    color_3 = (color_0 + 2 * color_1 + 1) / 3;
}    
else
{ 
    // Three-color block: derive the other color.
    // 00 = color_0,  01 = color_1,  10 = color_2,  
    // 11 = transparent.
    // These 2-bit codes correspond to the 2-bit fields 
    // stored in the 64-bit block. 
    color_2 = (color_0 + color_1) / 2;    
    color_3 = transparent;    

}
```



Перед наложением рекомендуется установить компоненты RGBA для пикселя прозрачности равными нулю.

В следующих таблицах показана схема памяти для 8-байтового блока. Предполагается, что первый индекс соответствует координате по оси Y, а второй соответствует координате по оси X. Например, шаг текселя \[ 1 \] \[ 2 \] ссылается на пиксель текстуры на карте (x, y) = (2, 1).

Эта таблица содержит макет памяти для 8-байтового (64-разрядного) блока.



| Адрес слова | 16-разрядное слово    |
|--------------|----------------|
| 0            | Цвет \_ 0       |
| 1            | Цвет \_ 1       |
| 2            | Битовое слово \_ 0 |
| 3            | Битовое слово \_ 1 |



 

Цвет \_ 0 и цвет \_ 1, цвета с двумя крайними, размещаются следующим образом:



| Bits        | Color                 |
|-------------|-----------------------|
| 4:0 (ЛСБ \* ) | Компонент синего цвета  |
| 10:5        | Компонент зеленого цвета |
| 15:11       | Компонент красного цвета   |



 

\*Наименьший значащий бит

Битовое слово \_ 0 располагается следующим образом:



| Bits          | Тексель           |
|---------------|-----------------|
| 1:0 (LSB)     | Шаг текселя \[ 0 \] \[ 0\] |
| 3:2           | Шаг текселя \[ 0 \] \[ 1\] |
| 5:4           | Шаг текселя \[ 0 \] \[ 2\] |
| 7:6           | Шаг текселя \[ 0 \] \[ 3\] |
| 9:8           | Шаг текселя \[ 1 \] \[ 0\] |
| 11:10         | Шаг текселя \[ 1 \] \[ 1\] |
| 13:12         | Шаг текселя \[ 1 \] \[ 2\] |
| 15:14 (от старшего \* ) | Шаг текселя \[ 1 \] \[ 3\] |



 

\*наиболее значащий бит (старший)

Битовое слово \_ 1 размещается следующим образом:



| Bits        | Тексель           |
|-------------|-----------------|
| 1:0 (LSB)   | Шаг текселя \[ 2 \] \[ 0\] |
| 3:2         | Шаг текселя \[ 2 \] \[ 1\] |
| 5:4         | Шаг текселя \[ 2 \] \[ 2\] |
| 7:6         | Шаг текселя \[ 2 \] \[ 3\] |
| 9:8         | Шаг текселя \[ 3 \] \[ 0\] |
| 11:10       | Шаг текселя \[ 3 \] \[ 1\] |
| 13:12       | Шаг текселя \[ 3 \] \[ 2\] |
| 15:14 (MSB) | Шаг текселя \[ 3 \] \[ 3\] |



 

## <a name="example-of-opaque-color-encoding"></a>Пример непрозрачной кодировки цвета

В примере кодирования непрозрачного цвета предположим, что красный и черный цвета находятся на разных краях диапазона. Красный цвет — \_ 0, а черный — цвет \_ 1. Существует четыре интерполированных цвета, которые образуют равномерно распределенный между ними градиент. Чтобы определить значения для битовой карты 4 x 4, используются следующие расчеты.


```
00 ? color_0
01 ? color_1
10 ? 2/3 color_0 + 1/3 color_1
11 ? 1/3 color_0 + 2/3 color_1
```



Битовая карта выглядит согласно следующей схеме.

![Схема, показывающая развернутую разметку точечного рисунка.](images/colors2.png)

Это выглядит как следующий набор цветов на иллюстрации.

> [!Note]  
> В изображении в верхнем левом углу отображается пиксель (0, 0).

 

![иллюстрация непрозрачного закодированного градиента](images/redsquares.png)

## <a name="example-of-1-bit-alpha-encoding"></a>Пример 1-битовой кодировки Alpha

Этот формат выбирается, когда 16-разрядное целое число без знака, цвет \_ 0, меньше, чем 16-разрядное целое число без знака, цвет \_ 1. Пример использования этого формата — листья на дереве на фоне голубого неба. Некоторые тексели могут быть отмечены как прозрачные, и в то же время три оттенка зеленого по-прежнему доступны для листьев. Два цвета располагаются по краям, а третий является интерполированным цветом.

Ниже приведена иллюстрация с примером такого рисунка.

![иллюстрация кодирования 1-разрядного альфа-значения](images/greenthing.png)

Обратите внимание, что если изображение отображается белым, шаг текселя будет кодироваться как прозрачный. Также обратите внимание, что для компонентов RGBA прозрачного пикселей текстуры должно быть установлено значение 0 перед наложением.

Кодировка битовой карты для цветов и прозрачности определяется с помощью следующих вычислений.


```
00 ? color_0
01 ? color_1
10 ? 1/2 color_0 + 1/2 color_1
11   ?   Transparent
```



Битовая карта выглядит согласно следующей схеме.

![схема развернутой битовой карты](images/colors3.png)

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Сжатые ресурсы текстуры](compressed-texture-resources.md)
</dt> </dl>

 

 



