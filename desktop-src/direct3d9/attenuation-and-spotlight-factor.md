---
description: Компоненты рассеянного и зеркального света глобального уравнения света содержат термины, описывающие затухание света и конус вспышки. Эти термины описаны ниже.
ms.assetid: 960b5fc2-3074-4e51-b3de-5ed370379b01
title: Ослабление и отличительные коэффициенты (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 623bb3cb2b1c2a3ee9e0e5d9419ff71dd9a303b6
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104551590"
---
# <a name="attenuation-and-spotlight-factor-direct3d-9"></a>Ослабление и отличительные коэффициенты (Direct3D 9)

Компоненты рассеянного и зеркального света глобального уравнения света содержат термины, описывающие затухание света и конус вспышки. Эти термины описаны ниже.

## <a name="attenuation"></a>Затухание

Затухание света зависит от типа света и расстояния между светом и положением вершины. Чтобы вычислить затухание, используйте одну из следующих формул.

Аттен = 1/(att0<sub>i</sub> + Att1<sub>i</sub> + \* att2<sub>я</sub> \* d ²)

Где:



| Параметр        | Значение по умолчанию | Тип  | Description                                     | Диапазон          |
|------------------|---------------|-------|-------------------------------------------------|----------------|
| att0<sub>i</sub> | 0,0           | FLOAT | Константный коэффициент затухания                     | от 0 до +∞ |
| att1<sub>i</sub> | 0,0           | FLOAT | Линейный коэффициент затухания                       | от 0 до +∞ |
| att2<sub>i</sub> | 0,0           | FLOAT | Квадратический коэффициент затухания                    | от 0 до +∞ |
| d                | Н/Д           | FLOAT | Расстояние от положения вершины до положения света | Н/Д            |



 

-   Atten = 1, если свет является направленным светом.
-   Atten = 0, если расстояние между светом и вершиной превышает диапазон света.

Значения att0, Att1 и att2 задаются членами Attenuation0, Attenuation1 и Attenuation2 в [**D3DLIGHT9**](d3dlight9.md).

Расстояние между светом и положением вершины всегда положительное.

d = \| L<sub>dir</sub>\|

Где:



| Параметр       | Значение по умолчанию | Тип      | Описание                                                 |
|-----------------|---------------|-----------|-------------------------------------------------------------|
| L<sub>dir</sub> | Н/Д           | D3DVECTOR | Вектор направления от положения вершины до положения света |



 

Если значение d больше, чем диапазон освещения, то есть элемент Range структуры [**D3DLIGHT9**](d3dlight9.md) , то Direct3D не делает никаких дополнительных вычислений ослабления и не применяет эффекты с самого светлого к вершине.

Константы затухания функционируют в качестве коэффициентов в формуле: можно создать несколько кривых затухания, внеся в них простые коррективы. Можно настроить значение Attenuation1 равным 1,0, чтобы создать свет, который не затухает, но все равно ограничен диапазоном. Либо можно экспериментировать с разными значениями для достижения разных эффектов затухания.

Затухание в максимальном диапазоне света не равно 0,0. Чтобы не допустить случайного отображения света при нахождении в диапазоне света, приложение может увеличить диапазон света. Либо приложение может настроить константы затухания так, чтобы коэффициент затухания был близок к 0,0 в диапазоне света. Значение затухания умножается на компоненты красного, зеленого и синего цветов света, чтобы регулировать интенсивность света как коэффициент расстояния, которое свет проходит до вершины.

## <a name="spotlight-factor"></a>Коэффициент вспышки

Следующее уравнение задает коэффициент вспышки.

![Уравнение с коэффициентом вспышки](images/dx8light9.png)



| Параметр         | Значение по умолчанию | Тип  | Description                              | Диапазон                    |
|-------------------|---------------|-------|------------------------------------------|--------------------------|
| Ро<sub>i</sub>   | Н/Д           | FLOAT | cosine(угол) для i света            | Н/Д                      |
| phi<sub>i</sub>   | 0,0           | FLOAT | Угол мягкого затенения вспышки i в радиусе | \[тета<sub>i</sub>, PI) |
| theta<sub>i</sub> | 0,0           | FLOAT | Угол полной тени вспышки i в радиусе    | \[0, PI)                 |
| снижение           | 0,0           | FLOAT | Коэффициент снижения                           | (-∞ + ∞)   |



 

Где:

rho = norm(L<sub>dcs</sub>)<sup>.</sup>norm(L<sub>dir</sub>)

and:



| Параметр       | Значение по умолчанию | Тип      | Описание                                                 |
|-----------------|---------------|-----------|-------------------------------------------------------------|
| L<sub>dcs</sub> | Н/Д           | D3DVECTOR | Отрицательное значение направления света в пространстве камеры         |
| L<sub>dir</sub> | Н/Д           | D3DVECTOR | Вектор направления от положения вершины до положения света |



 

После вычисления ослабления яркости Direct3D также рассматривает эффекты Spotlight, если применимо, угол, который отразится на поверхности, и отражение текущего материала для вычисления рассеянных и отражающих компонентов для этой вершины. Дополнительные сведения см. в разделе [Spotlight](light-types.md).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Математика освещения](mathematics-of-lighting.md)
</dt> </dl>

 

 



