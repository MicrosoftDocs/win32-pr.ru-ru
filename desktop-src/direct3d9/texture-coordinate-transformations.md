---
description: Устройства Direct3D могут преобразовывать координаты текстуры для вершин, применяя матрицу 4x4.
ms.assetid: f36439de-e37a-457c-9485-a435847eb01e
title: Преобразования координат текстуры (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f45b8107f609348ae2367b1171ae7913797f4558
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104139963"
---
# <a name="texture-coordinate-transformations-direct3d-9"></a><span data-ttu-id="b32c9-103">Преобразования координат текстуры (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="b32c9-103">Texture Coordinate Transformations (Direct3D 9)</span></span>

<span data-ttu-id="b32c9-104">Устройства Direct3D могут преобразовывать координаты текстуры для вершин, применяя матрицу 4x4.</span><span class="sxs-lookup"><span data-stu-id="b32c9-104">Direct3D devices can transform the texture coordinates for vertices by applying a 4x4 matrix.</span></span> <span data-ttu-id="b32c9-105">Система применяет преобразования к текстурным координатам таким же образом, как и геометрия Geometry.</span><span class="sxs-lookup"><span data-stu-id="b32c9-105">The system applies transformations to texture coordinates in the same manner as geometry.</span></span> <span data-ttu-id="b32c9-106">Любое преобразование (масштабирование, вращение, перевод, проекция, наклон или любое сочетание этих значений) можно выполнить с матрицей 4x4.</span><span class="sxs-lookup"><span data-stu-id="b32c9-106">Any transformation (scale, rotation, translation, projection, shear, or any combination of these) can be done with a 4x4 matrix.</span></span>

> [!Note]  
> <span data-ttu-id="b32c9-107">Direct3D не изменяет преобразованные и освещенные вершины.</span><span class="sxs-lookup"><span data-stu-id="b32c9-107">Direct3D does not modify transformed and lit vertices.</span></span> <span data-ttu-id="b32c9-108">В результате приложение, использующее преобразованные и освещенные вершины, не может использовать Direct3D для преобразования координат текстуры вершин.</span><span class="sxs-lookup"><span data-stu-id="b32c9-108">As a result, an application using transformed and lit vertices cannot use Direct3D to transform the texture coordinates of the vertices.</span></span>

 

<span data-ttu-id="b32c9-109">Устройства, поддерживающие операции преобразования и освещения с аппаратным ускорением (T&L HAL), также ускоряют преобразование координат текстуры.</span><span class="sxs-lookup"><span data-stu-id="b32c9-109">Devices that support hardware-accelerated transformation and lighting operations (T&L HAL Device) also accelerate the transformation of texture coordinates.</span></span> <span data-ttu-id="b32c9-110">Если аппаратное ускорение преобразований недоступно, оптимизации для конкретной платформы в конвейере геометрии Direct3D применяются к преобразованиям координат текстуры.</span><span class="sxs-lookup"><span data-stu-id="b32c9-110">When hardware acceleration of transformations isn't available, platform-specific optimizations in the Direct3D geometry pipeline apply to texture coordinate transformations.</span></span>

<span data-ttu-id="b32c9-111">Преобразования координат текстуры полезны для создания специальных эффектов, при этом не нужно напрямую изменять координаты текстуры геометрического объекта.</span><span class="sxs-lookup"><span data-stu-id="b32c9-111">Texture coordinate transformations are useful for producing special effects while avoiding the need to directly modify the texture coordinates of your geometry.</span></span> <span data-ttu-id="b32c9-112">Можно использовать простые матрицы перевода или вращения, чтобы анимировать текстуры на объекте, или можно преобразовать координаты текстуры, которые автоматически создаются Direct3D для упрощения и, возможно, ускорения сложных эффектов, таких как прогнозируемые текстуры и динамическое освещение.</span><span class="sxs-lookup"><span data-stu-id="b32c9-112">You could use simple translation or rotation matrices to animate textures on an object, or you can transform texture coordinates that are automatically generated by Direct3D to simplify and perhaps accelerate advanced effects such as projected textures and dynamic light-mapping.</span></span> <span data-ttu-id="b32c9-113">Кроме того, преобразования координат текстуры можно использовать для повторного использования одного набора координат текстуры для нескольких целей на нескольких стадиях текстуры.</span><span class="sxs-lookup"><span data-stu-id="b32c9-113">Additionally, you might use texture coordinate transforms to reuse a single set of texture coordinates for multiple purposes, in multiple texture stages.</span></span>

## <a name="setting-and-retrieving-texture-coordinate-transformations"></a><span data-ttu-id="b32c9-114">Установка и извлечение преобразований координат текстуры</span><span class="sxs-lookup"><span data-stu-id="b32c9-114">Setting and Retrieving Texture Coordinate Transformations</span></span>

<span data-ttu-id="b32c9-115">Как и в случае с матрицами, используемыми приложением для геометрии, вы устанавливаете и получаете преобразования координат текстуры путем вызова методов [**IDirect3DDevice9:: сеттрансформ**](/windows/desktop/api) и [**IDirect3DDevice9:: Transform**](/windows/desktop/api) .</span><span class="sxs-lookup"><span data-stu-id="b32c9-115">Like the matrices that your application uses for geometry, you set and retrieve texture coordinate transformations by calling the [**IDirect3DDevice9::SetTransform**](/windows/desktop/api) and [**IDirect3DDevice9::GetTransform**](/windows/desktop/api) methods.</span></span> <span data-ttu-id="b32c9-116">Эти методы принимают D3DTS \_ TEXTURE0 через D3DTS \_ TEXTURE7-члены перечислимого типа [**D3DTRANSFORMSTATETYPE**](./d3dtransformstatetype.md) , чтобы находить матрицы преобразования для стадий текстуры от 0 до 7 соответственно.</span><span class="sxs-lookup"><span data-stu-id="b32c9-116">These methods accept the D3DTS\_TEXTURE0 through D3DTS\_TEXTURE7 members of the [**D3DTRANSFORMSTATETYPE**](./d3dtransformstatetype.md) enumerated type to identify the transformation matrices for texture stages 0 through 7, respectively.</span></span>

<span data-ttu-id="b32c9-117">Следующий код задает матрицу, применяемую к координатам текстуры для этапа текстуры 0.</span><span class="sxs-lookup"><span data-stu-id="b32c9-117">The following code sets a matrix to apply to the texture coordinates for texture stage 0.</span></span>


```
// For this example, assume the d3dDevice variable contains a 
//   valid pointer to an IDirect3DDevice9 interface.

D3DMATRIX matTrans = D3DXMatrixIdentity( NULL );

// Set up the matrix for the desired transformation.
d3dDevice->SetTransform( D3DTS_TEXTURE0, &matTrans );
```



## <a name="enabling-texture-coordinate-transformations"></a><span data-ttu-id="b32c9-118">Включение преобразования координат текстуры</span><span class="sxs-lookup"><span data-stu-id="b32c9-118">Enabling Texture Coordinate Transformations</span></span>

<span data-ttu-id="b32c9-119">\_Состояние этапа текстуры D3DTSS текстуретрансформфлагс управляет применением преобразований координат текстуры.</span><span class="sxs-lookup"><span data-stu-id="b32c9-119">The D3DTSS\_TEXTURETRANSFORMFLAGS texture stage state controls the application of texture coordinate transformations.</span></span> <span data-ttu-id="b32c9-120">Значения для этого состояния стадии текстуры определяются перечисляемым типом [**D3DTEXTURETRANSFORMFLAGS**](./d3dtexturetransformflags.md) .</span><span class="sxs-lookup"><span data-stu-id="b32c9-120">Values for this texture stage state are defined by the [**D3DTEXTURETRANSFORMFLAGS**](./d3dtexturetransformflags.md) enumerated type.</span></span>

<span data-ttu-id="b32c9-121">Преобразования координат текстуры отключаются, когда D3DTSS \_ текстуретрансформфлагс имеет значение D3DTTFF \_ Disable (значение по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="b32c9-121">Texture coordinate transformations are disabled when D3DTSS\_TEXTURETRANSFORMFLAGS is set to D3DTTFF\_DISABLE (the default value).</span></span> <span data-ttu-id="b32c9-122">При условии, что преобразование координат текстуры было включено для этапа 0, следующий код отключает их.</span><span class="sxs-lookup"><span data-stu-id="b32c9-122">Assuming that texture coordinate transformations were enabled for stage 0, the following code disables them.</span></span>


```
// For this example, assume the d3dDevice variable contains a 
// valid pointer to an IDirect3DDevice9 interface.

d3dDevice->SetTextureStageState( 0, D3DTSS_TEXTURETRANSFORMFLAGS, 
                                 D3DTTFF_DISABLE );
```



<span data-ttu-id="b32c9-123">Другие значения, определенные в [**D3DTEXTURETRANSFORMFLAGS**](./d3dtexturetransformflags.md) , используются для включения преобразования координат текстуры, а также для управления тем, сколько результирующих элементов координат текстуры передается в средство программной прорисовки.</span><span class="sxs-lookup"><span data-stu-id="b32c9-123">The other values defined in [**D3DTEXTURETRANSFORMFLAGS**](./d3dtexturetransformflags.md) are used to enable texture coordinate transformations, and to control how many resulting texture coordinate elements are passed to the rasterizer.</span></span> <span data-ttu-id="b32c9-124">Например, рассмотрим следующий код.</span><span class="sxs-lookup"><span data-stu-id="b32c9-124">For example, take the following code.</span></span>


```
// For this example, assume the d3dDevice variable contains a 
//   valid pointer to an IDirect3DDevice9 interface.

d3dDevice->SetTextureStageState( 0, D3DTSS_TEXTURETRANSFORMFLAGS, 
                                 D3DTTFF_COUNT2 );
```



<span data-ttu-id="b32c9-125">Значение D3DTTFF \_ COUNT2 предписывает системе применить матрицу преобразования, установленную для этапа текстуры 0, а затем передать первые два элемента измененных координат текстуры в средство программной прорисовки.</span><span class="sxs-lookup"><span data-stu-id="b32c9-125">The D3DTTFF\_COUNT2 value instructs the system to apply the transformation matrix set for texture stage 0, and then pass the first two elements of the modified texture coordinates to the rasterizer.</span></span>

<span data-ttu-id="b32c9-126">\_Флаг преобразования D3DTTFF проецируемая текстура указывает координаты проецируемой текстуры.</span><span class="sxs-lookup"><span data-stu-id="b32c9-126">The D3DTTFF\_PROJECTED texture transformation flag indicates coordinates for a projected texture.</span></span> <span data-ttu-id="b32c9-127">Если этот флаг указан, средство программной прорисовки делит элементы, переданные последним элементом.</span><span class="sxs-lookup"><span data-stu-id="b32c9-127">When this flag is specified, the rasterizer divides the elements passed-in by the last element.</span></span> <span data-ttu-id="b32c9-128">Возьмем, например, следующий код.</span><span class="sxs-lookup"><span data-stu-id="b32c9-128">Take the following code, for example.</span></span>


```
// For this example, assume the d3dDevice variable contains a 
//   valid pointer to an IDirect3DDevice9 interface.

d3dDevice->SetTextureStageState( 0, D3DTSS_TEXTURETRANSFORMFLAGS, 
                                 D3DTTFF_COUNT3 | D3DTTFF_PROJECTED );
```



<span data-ttu-id="b32c9-129">В этом примере система информирует систему о передаче трех элементов координат текстуры в средство программной прорисовки.</span><span class="sxs-lookup"><span data-stu-id="b32c9-129">This example informs the system to pass three texture coordinate elements to the rasterizer.</span></span> <span data-ttu-id="b32c9-130">Средство программной прорисовки делит первые два элемента на треть, создавая координаты двухмерной текстуры, необходимые для адресации текстуры.</span><span class="sxs-lookup"><span data-stu-id="b32c9-130">The rasterizer divides the first two elements by the third, producing the 2D texture coordinates needed to address the texture.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b32c9-131">См. также</span><span class="sxs-lookup"><span data-stu-id="b32c9-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b32c9-132">Обработка координат текстуры</span><span class="sxs-lookup"><span data-stu-id="b32c9-132">Texture Coordinate Processing</span></span>](texture-coordinate-processing.md)
</dt> </dl>

 

 
