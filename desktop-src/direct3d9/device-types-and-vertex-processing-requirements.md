---
description: Производительность операций обработки вершин, включая преобразование и освещение, зависит интенсивно от того, где находится буфер вершин в памяти и какой тип устройства отрисовки используется.
ms.assetid: 4f9ca83d-c9d6-4749-944d-78f831b0f44e
title: Типы устройств и требования к обработке вершин (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 590cf2f5423d9c3bdf3e19c91f30b3e8c0586687
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104537235"
---
# <a name="device-types-and-vertex-processing-requirements-direct3d-9"></a>Типы устройств и требования к обработке вершин (Direct3D 9)

Производительность операций обработки вершин, включая преобразование и освещение, зависит интенсивно от того, где находится буфер вершин в памяти и какой тип устройства отрисовки используется. Приложения управляют выделением памяти для буферов вершин при их создании. Если \_ установлен флаг D3DPOOL системмем Memory, буфер вершин создается в системной памяти. При \_ использовании флага памяти D3DPOOL по умолчанию драйвер устройства определяет, где лучше всего выделяется память для буфера вершин, часто называемую оптимальным для драйвера памятью. Оптимальным для драйвера памятью может быть локальная видеопамять, Нелокальная видеопамять или системная память.

Установка \_ константы СОФТВАРЕПРОЦЕССИНГ D3DUSAGE с [**IDirect3DDevice9:: креатевертексбуффер**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createvertexbuffer) позволяет выполнять обработку вершин программного обеспечения на данных буфера вершин. Этот флаг необходим для обработки вершин программного обеспечения в смешанном режиме. Этот флаг не может использоваться для аппаратного режима обработки вершин. Буферы вершин, используемые при обработке вершин программного обеспечения, включают следующее:

-   Все входные потоки для [**IDirect3DDevice9::P роцессвертицес**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices).
-   Все входные потоки для [**IDirect3DDevice9::D равпримитиве**](/windows/desktop/api) и [**IDirect3DDevice9::D равиндекседпримитиве**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive).

Причина, с помощью которой определяется расположение памяти (оптимальная система или драйвер) для буферов вершин, аналогична для текстур. Обработка вершин, включая преобразование и освещение, в оборудовании лучше всего подходит, когда буферы вершин выделяются в оптимальной для драйвера памяти, а обработка вершин программного обеспечения лучше всего подходит для буферов вершин, выделенных в системной памяти. Для текстур аппаратное растрирование лучше всего подходит, когда текстуры выделяются в оптимальной для драйвера памяти, в то время как растрирование программного обеспечения лучше всего работает с текстурами в памяти системы.

Microsoft Direct3D 9 поддерживает автономную обработку вершин, не выполняя отрисовку какого-либо примитива методом [**IDirect3DDevice9::P роцессвертицес**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices) . Эта автономная обработка вершин всегда выполняется в программном обеспечении процессора узла. По этой причине буферы вершин, используемые в качестве источников, заданных с помощью [**IDirect3DDevice9:: сетстреамсаурце**](/windows/desktop/api) , должны быть созданы с \_ флагом D3DUSAGE софтварепроцессинг. Функции, предоставляемые **IDirect3DDevice9::P роцессвертицес** , идентичны методам [**IDirect3DDevice9::D равпримитиве**](/windows/desktop/api) и [**IDirect3DDevice9::D равиндекседпримитиве**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive) при использовании обработки вершин программного обеспечения.

Если приложение выполняет собственную обработку вершин и передает преобразованные, освещенные и обрезанные вершины методам подготовки к просмотру, то приложение может напрямую записывать вершины в буфер вершин, выделенный в памяти, оптимальном для драйвера. Этот метод предотвращает избыточную операцию копирования на более позднем этапе. Обратите внимание, что этот метод не будет работать, если приложение считывает данные из буфера вершин, так как операции чтения, выполняемые узлом из-за оптимизации памяти с помощью драйвера, могут быть очень медленными. Таким образом, если приложению необходимо прочитать данные во время обработки или записи в буфер неустойчиво, лучше выбрать буфер вершин памяти системы.

При использовании функций обработки вершин на уровне Direct3D (путем передачи непреобразованных вершин в методы отрисовки буфера вершин) обработка может выполняться в аппаратном или программном обеспечении в зависимости от типа устройства и флагов создания устройств. Рекомендуется выделить буферы вершин в пуле D3DPOOL \_ по умолчанию для лучшей производительности практически во всех случаях. Если устройство использует аппаратную обработку вершин, существует ряд дополнительных оптимизаций, которые можно выполнить на основе флагов D3DUSAGE \_ dynamic и D3DUSAGE \_ WRITEONLY. Дополнительные сведения об использовании этих флагов см. в разделе IDirect3DDevice9:: Креатевертексбуффер.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Буферы вершин](vertex-buffers.md)
</dt> </dl>

 

 
