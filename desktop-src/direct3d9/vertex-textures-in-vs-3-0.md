---
description: Модель вершинного шейдера 3,0 поддерживает поиск текстур в шейдере вершин с помощью инструкции текслдл-VS текстуры Load.
ms.assetid: 595cb5c0-da12-4fe9-944c-a61d8ed990b4
title: Текстуры вершин в vs_3_0 (DirectX HLSL)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a4cbd4aa1e1830d29656fea2bc7b028191bee158eede119c9a47ae2457d10e99
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118519451"
---
# <a name="vertex-textures-in-vs_3_0-directx-hlsl"></a>Текстуры вершин в VS \_ 3 \_ 0 (DirectX HLSL)

Модель вершинного шейдера 3,0 поддерживает поиск текстур в шейдере вершин с помощью инструкции [текслдл-VS](../direct3dhlsl/texldl---vs.md) текстуры Load. Ядро вершин содержит четыре этапа образца текстуры, именуемые [D3DVERTEXTEXTURESAMPLER0](d3dvertextexturesampler.md), D3DVERTEXTEXTURESAMPLER1, D3DVERTEXTEXTURESAMPLER2 и D3DVERTEXTEXTURESAMPLER3. Они отличаются от образца карт смещения и выборки текстур в ядре пикселей.

Чтобы выбрать текстуры на этих четырех стадиях, можно использовать ядро вершин и программировать этапы с помощью метода [**чеккдевицеформат**](/windows/desktop/api) . Задайте текстуры на этих этапах с помощью [**сеттекстуре**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture), указав индекс промежуточного [D3DVERTEXTEXTURESAMPLER0](d3dvertextexturesampler.md) через D3DVERTEXTEXTURESAMPLER3. Новый регистр появился в шейдере вершин, регистр образцов (как в PS \_ 2 \_ 0), который представляет собой образец текстуры вершин. Этот регистр необходимо определить в шейдере перед его использованием.

Приложение может запросить, поддерживается ли формат в качестве текстуры вершин, вызвав [**чеккдевицеформат**](/windows/desktop/api) с [D3DUSAGE \_ Query \_ вертекстекстуре](d3dusage-query.md).

> [!Note]  
> Это флаг запроса, поэтому он не принимается ни в одной функции Креатекскскс. Текстуру вершин, созданную в пуле по умолчанию, можно задать как текстуру пикселей и наоборот. Однако, чтобы использовать обработку вершин программного обеспечения, текстуру вершин необходимо создать в вспомогательном пуле (независимо от того, является ли это устройство смешанного режима или устройством обработки вершин).

 

Функциональные возможности идентичны текстурам в пикселях, за исключением следующих:

-   Фильтрация по анизотропной текстуре не поддерживается, поэтому D3DSAMP \_ максанисотропи игнорируется, а D3DTEXF \_ анизотропию нельзя установить для увеличения или уменьшение для этих этапов.
-   Интенсивность сведений об изменениях недоступна, поэтому приложение должно вычислять уровень детализации и предоставлять эту информацию в качестве параметра для [текслдл-VS](../direct3dhlsl/texldl---vs.md).

К ним относятся указанные ниже ограничения.

-   Как и в шейдерах пикселей, если поддерживаются многоэлементные текстуры, D3DSAMP \_ елементиндекс используется для выяснения того, из какого элемента нужно выполнить выборку.
-   Состояние D3DSAMP \_ дмапоффсет игнорируется для этих этапов.
-   Используйте [**чеккдевицеформат**](/windows/desktop/api) с [D3DUSAGE \_ Query \_ вертекстекстуре "](d3dusage-query.md) , чтобы запросить текстуру, чтобы узнать, можно ли ее использовать в качестве текстуры вершин.
-   Вертекстекстурефилтеркапс указывает, какие виды фильтров разрешены для образцов текстур вершин. [D3DPTFILTERCAPS \_ МИНФАНИСОТРОПИК](d3dptfiltercaps.md) и D3DPTFILTERCAPS \_ магфанисотропик запрещены.

## <a name="sampling-stage-registers"></a>Регистры этапа выборки

Регистр этапа выборки определяет единицу выборки, которую можно использовать в операторах загрузки текстур. Единица выборки соответствует этапу выборки текстуры, в котором инкапсулировано состояние выборки, заданное в [**сетсамплерстате**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setsamplerstate).

Каждая выборка уникально определяет одну поверхность текстуры, для которой задан соответствующий образец с помощью [**сеттекстуре**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture). Однако одну и ту же поверхность текстуры можно задать в нескольких пробах.

Во время рисования текстуру нельзя одновременно задать как цель рендеринга и текстуру на этапе.

Поскольку VS \_ 3 \_ 0 поддерживает четыре пробы, можно считывать до четырех поверхностей текстуры из одного прохода шейдера. Регистр образца может отображаться только в качестве аргумента в операторе загрузки текстуры: [текслдл-VS](../direct3dhlsl/texldl---vs.md).

В VS \_ 3 \_ 0, если используется образец, он должен быть объявлен в начале программы шейдера с помощью [дкл \_ самплертипе (SM3-VS ASM)](../direct3dhlsl/dcl-samplertype---vs.md) (как в PS \_ 2 \_ 0).

## <a name="software-processing"></a>Обработка программного обеспечения

Эта функция будет поддерживаться в процессе обработки вершин программного обеспечения. Поддерживаемые типы фильтров можно проверить путем вызова [**жетдевицекапс**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getdevicecaps) и проверки вертекстекстурефилтеркапс. Все опубликованные форматы текстур будут поддерживаться в качестве текстур вершин в обработке вершин программного обеспечения.

Приложения могут проверить, поддерживается ли формат текстуры в режиме обработки вершин программного обеспечения, вызвав [**чеккдевицеформат**](/windows/desktop/api) и ПРЕДОСТАВИВ (D3DVERTEXTEXTURESAMPLER \| [**D3DUSAGE \_ софтварепроцессинг**](d3dusage.md)) в качестве использования. Для обработки вершин программного обеспечения поддерживаются все форматы. Для обработки вершин программного обеспечения требуется вспомогательный пул.

## <a name="api-changes"></a>Изменения API


```
   
// New define
#define D3DVERTEXTEXTURESAMPLER0 (D3DDMAPSAMPLER+1)
#define D3DVERTEXTEXTURESAMPLER1 (D3DDMAPSAMPLER+2)
#define D3DVERTEXTEXTURESAMPLER2 (D3DDMAPSAMPLER+3)
#define D3DVERTEXTEXTURESAMPLER3 (D3DDMAPSAMPLER+4)
    

#define D3DVERTEXTEXTURESAMPLER  (0x00100000L)

// New caps field in D3DCAPS9
DWORD VertexTextureFilterCaps;
```



## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Конвейер вершин](vertex-pipeline.md)
</dt> </dl>

 

 
