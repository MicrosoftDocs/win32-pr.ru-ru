---
description: Типы устройств (Direct3D 9)
ms.assetid: 860f3de2-beaf-4df1-82d0-a4b7508156c2
title: Типы устройств (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c84efe80c022403c36e760860893f3619e1c9356
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104341625"
---
# <a name="device-types-direct3d-9"></a><span data-ttu-id="9e5d3-103">Типы устройств (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="9e5d3-103">Device Types (Direct3D 9)</span></span>

## <a name="hal-device"></a><span data-ttu-id="9e5d3-104">Устройство слоя HAL</span><span class="sxs-lookup"><span data-stu-id="9e5d3-104">HAL Device</span></span>

<span data-ttu-id="9e5d3-105">Устройство слоя HAL — основной тип устройств. Оно поддерживает растеризацию с аппаратным ускорением, а также аппаратную и программную обработку вершин.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-105">The primary device type is the hal device, which supports hardware accelerated rasterization and both hardware and software vertex processing.</span></span> <span data-ttu-id="9e5d3-106">Если компьютер, на котором запущено приложение, оснащен видеоадаптером с поддержкой Direct3D, приложение должно использовать его для операций Direct3D.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-106">If the computer on which your application is running is equipped with a display adapter that supports Direct3D, your application should use it for Direct3D operations.</span></span> <span data-ttu-id="9e5d3-107">Устройства слоя HAL Direct3D полностью или целиком реализовывают модули преобразования, освещения или растеризации в оборудовании.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-107">Direct3D hal devices implement all or part of the transformation, lighting, and rasterizing modules in hardware.</span></span>

<span data-ttu-id="9e5d3-108">Приложения не обращаются к видеоадаптерам напрямую.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-108">Applications do not access graphics adapters directly.</span></span> <span data-ttu-id="9e5d3-109">Они вызывают функции и методы Direct3D.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-109">They call Direct3D functions and methods.</span></span> <span data-ttu-id="9e5d3-110">Direct3D обращается к оборудованию через слой HAL.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-110">Direct3D accesses the hardware through the hal.</span></span> <span data-ttu-id="9e5d3-111">Если компьютер, на котором запущено приложение, поддерживает слой HAL, максимальной производительности на нем можно достичь с помощью устройства слоя HAL.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-111">If the computer that your application is running on supports the hal, it will gain the best performance by using a hal device.</span></span>

<span data-ttu-id="9e5d3-112">Чтобы создать устройство HAL, вызовите [**креатедевице**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-createdevice) , используя D3DDEVTYPE \_ HAL в качестве типа устройства.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-112">To create a hal device, call [**CreateDevice**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-createdevice) using D3DDEVTYPE\_HAL as the device type.</span></span>

## <a name="reference-device"></a><span data-ttu-id="9e5d3-113">Эталонное устройство</span><span class="sxs-lookup"><span data-stu-id="9e5d3-113">Reference Device</span></span>

<span data-ttu-id="9e5d3-114">Direct3D поддерживает дополнительный тип устройств — эталонное устройство или средство программной прорисовки.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-114">Direct3D supports an additional device type called a reference device or reference rasterizer.</span></span> <span data-ttu-id="9e5d3-115">В отличие от программного устройства, средство программной прорисовки поддерживает все компоненты Direct3D.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-115">Unlike a software device, the reference rasterizer supports every Direct3D feature.</span></span> <span data-ttu-id="9e5d3-116">Это устройство предназначено для отладки, а потому доступно только на компьютерах с установленным пакетом SDK DirectX.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-116">This device is intended to be used for debugging purposes and is therefore only available on machines where the DirectX SDK has been installed.</span></span> <span data-ttu-id="9e5d3-117">Поскольку эти компоненты реализованы программно и в большей степени для высокой точности, а не скорости, получение результатов — процесс небыстрый.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-117">Because these features are implemented for accuracy rather than speed and are implemented in software, the results are not very fast.</span></span> <span data-ttu-id="9e5d3-118">Средство программной прорисовки использует особые инструкции ЦП при любой возможности, но оно не предназначено для розничных приложений.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-118">The reference rasterizer does make use of special CPU instructions whenever it can, but it is not intended for retail applications.</span></span> <span data-ttu-id="9e5d3-119">Средство программной прорисовки следует использовать только для тестирования компонентов или демонстрации.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-119">Use the reference rasterizer only for feature testing or demonstration purposes.</span></span> <span data-ttu-id="9e5d3-120">Чтобы создать эталонное устройство, вызовите метод [**креатедевице**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-createdevice) , используя D3DDEVTYPE \_ ref в качестве типа устройства.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-120">To create a reference device, call [**CreateDevice**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-createdevice) method using D3DDEVTYPE\_REF as the device type.</span></span>

## <a name="hal-vs-ref-devices"></a><span data-ttu-id="9e5d3-121">Устройства слоя HAL и устройства средства программной прорисовки</span><span class="sxs-lookup"><span data-stu-id="9e5d3-121">HAL vs. REF Devices</span></span>

<span data-ttu-id="9e5d3-122">Устройства слоя абстрагирования оборудования (HAL) и устройства средства программной прорисовки (REF) — это два основных типа устройств Direct3D. Первый тип основан на поддержке оборудования и отличается высокой производительностью, но может не поддерживать некоторые компоненты. Второй тип не использует аппаратное ускорение, а потому работает медленно, но гарантированно поддерживает весь набор компонентов Direct3D без каких-либо отклонений.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-122">HAL (Hardware Abstraction Layer) devices and REF (REFerence rasterizer) devices are the two main types of Direct3D device; the first is based around the hardware support, and is very fast but might not support everything; while the second uses no hardware acceleration, so is very slow, but is guaranteed to support the entire set of Direct3D features, in the correct way.</span></span> <span data-ttu-id="9e5d3-123">Как правило, вам потребуется использовать только устройства слоя HAL, но если вы используете расширенные возможности, не поддерживаемые вашим графическим адаптером, возможно, придется обратиться к средству программной прорисовки.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-123">In general you'll only ever need to use HAL devices, but if you're using some advanced feature that your graphics card does not support then you might need to fall back to REF.</span></span>

<span data-ttu-id="9e5d3-124">Вам также может потребоваться использовать средство программной прорисовки, если устройство слоя HAL выдает неверные результаты, то есть вы уверены в правильности кода, но результат не соответствует ожидаемому.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-124">The other time you might want to use REF is if the HAL device is producing strange results - that is, you're sure your code is correct, but the result is not what you're expecting.</span></span> <span data-ttu-id="9e5d3-125">Поведение устройства средства программной прорисовки гарантированно будет верным, поэтому есть смысл проверить приложение на этом устройстве и посмотреть, останутся ли ошибки в поведении.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-125">The REF device is guaranteed to behave correctly, so you may wish to test your application on the REF device and see if the strange behavior continues.</span></span> <span data-ttu-id="9e5d3-126">Если ошибки исчезли, то либо (а) приложение считает, что видеоадаптер поддерживает возможности, которые он на самом деле не поддерживает, либо (б) ошибка связана с драйверами.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-126">If it doesn't, it means that either (a) your application is assuming that the graphics card supports something that it doesn't, or (b) it's a driver bug.</span></span> <span data-ttu-id="9e5d3-127">Если приложение не работает даже с устройством средства программной прорисовки, ошибка кроется в самом приложении.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-127">If it still doesn't work with the REF device, then it's an application bug.</span></span>

## <a name="hardware-vs-software-vertex-processing"></a><span data-ttu-id="9e5d3-128">Аппаратная и программная обработка вершин</span><span class="sxs-lookup"><span data-stu-id="9e5d3-128">Hardware vs. Software Vertex Processing</span></span>

<span data-ttu-id="9e5d3-129">Фактически, аппаратная и программная обработка вершин применима только к устройствам слоя HAL.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-129">Hardware versus Software vertex processing only really applies to HAL devices.</span></span> <span data-ttu-id="9e5d3-130">При продвижении вершин по конвейеру их необходимо преобразовывать (с помощью матриц мира, представления и проекции поочередно) и освещать (с помощью встроенных источников света D3D). Этот этап обработки известен как T&L (преобразование и освещение).</span><span class="sxs-lookup"><span data-stu-id="9e5d3-130">When you push vertices through the pipeline, they need to be transformed (by the world, view, and projection matrices in turn) and lit (by D3D's built-in lights) - this processing stage is known as T&L (for Transformation & Lighting).</span></span> <span data-ttu-id="9e5d3-131">Аппаратная обработка вершин выполняется оборудованием, если оно поддерживает такой вид обработки. Следовательно, программная обработка вершин выполняется программным обеспечением.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-131">Hardware vertex processing means this is done in hardware, if the hardware supports it; ergo, Software vertex processing is done is software.</span></span> <span data-ttu-id="9e5d3-132">Рекомендуется сначала попробовать создать устройство аппаратного преобразования и освещения. В случае неудачи следует попробовать создать смешанное устройство, а если это также не удастся, попробуйте создать средство программной обработки.</span><span class="sxs-lookup"><span data-stu-id="9e5d3-132">The general practice is to try creating a Hardware T&L device first, and if that fails try Mixed, and if that fails try Software.</span></span> <span data-ttu-id="9e5d3-133">(Если программное обеспечение завершается сбоем, выдается сообщение об ошибке и завершается с ошибкой).</span><span class="sxs-lookup"><span data-stu-id="9e5d3-133">(If software fails, give up and exit with an error).</span></span>

## <a name="related-topics"></a><span data-ttu-id="9e5d3-134">См. также</span><span class="sxs-lookup"><span data-stu-id="9e5d3-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="9e5d3-135">Устройства Direct3D</span><span class="sxs-lookup"><span data-stu-id="9e5d3-135">Direct3D Devices</span></span>](direct3d-devices.md)
</dt> </dl>

 

 
