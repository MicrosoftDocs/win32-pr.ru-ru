---
description: Типы устройств (Direct3D 9)
ms.assetid: 860f3de2-beaf-4df1-82d0-a4b7508156c2
title: Типы устройств (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c84efe80c022403c36e760860893f3619e1c9356
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104341625"
---
# <a name="device-types-direct3d-9"></a>Типы устройств (Direct3D 9)

## <a name="hal-device"></a>Устройство слоя HAL

Устройство слоя HAL — основной тип устройств. Оно поддерживает растеризацию с аппаратным ускорением, а также аппаратную и программную обработку вершин. Если компьютер, на котором запущено приложение, оснащен видеоадаптером с поддержкой Direct3D, приложение должно использовать его для операций Direct3D. Устройства слоя HAL Direct3D полностью или целиком реализовывают модули преобразования, освещения или растеризации в оборудовании.

Приложения не обращаются к видеоадаптерам напрямую. Они вызывают функции и методы Direct3D. Direct3D обращается к оборудованию через слой HAL. Если компьютер, на котором запущено приложение, поддерживает слой HAL, максимальной производительности на нем можно достичь с помощью устройства слоя HAL.

Чтобы создать устройство HAL, вызовите [**креатедевице**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-createdevice) , используя D3DDEVTYPE \_ HAL в качестве типа устройства.

## <a name="reference-device"></a>Эталонное устройство

Direct3D поддерживает дополнительный тип устройств — эталонное устройство или средство программной прорисовки. В отличие от программного устройства, средство программной прорисовки поддерживает все компоненты Direct3D. Это устройство предназначено для отладки, а потому доступно только на компьютерах с установленным пакетом SDK DirectX. Поскольку эти компоненты реализованы программно и в большей степени для высокой точности, а не скорости, получение результатов — процесс небыстрый. Средство программной прорисовки использует особые инструкции ЦП при любой возможности, но оно не предназначено для розничных приложений. Средство программной прорисовки следует использовать только для тестирования компонентов или демонстрации. Чтобы создать эталонное устройство, вызовите метод [**креатедевице**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-createdevice) , используя D3DDEVTYPE \_ ref в качестве типа устройства.

## <a name="hal-vs-ref-devices"></a>Устройства слоя HAL и устройства средства программной прорисовки

Устройства слоя абстрагирования оборудования (HAL) и устройства средства программной прорисовки (REF) — это два основных типа устройств Direct3D. Первый тип основан на поддержке оборудования и отличается высокой производительностью, но может не поддерживать некоторые компоненты. Второй тип не использует аппаратное ускорение, а потому работает медленно, но гарантированно поддерживает весь набор компонентов Direct3D без каких-либо отклонений. Как правило, вам потребуется использовать только устройства слоя HAL, но если вы используете расширенные возможности, не поддерживаемые вашим графическим адаптером, возможно, придется обратиться к средству программной прорисовки.

Вам также может потребоваться использовать средство программной прорисовки, если устройство слоя HAL выдает неверные результаты, то есть вы уверены в правильности кода, но результат не соответствует ожидаемому. Поведение устройства средства программной прорисовки гарантированно будет верным, поэтому есть смысл проверить приложение на этом устройстве и посмотреть, останутся ли ошибки в поведении. Если ошибки исчезли, то либо (а) приложение считает, что видеоадаптер поддерживает возможности, которые он на самом деле не поддерживает, либо (б) ошибка связана с драйверами. Если приложение не работает даже с устройством средства программной прорисовки, ошибка кроется в самом приложении.

## <a name="hardware-vs-software-vertex-processing"></a>Аппаратная и программная обработка вершин

Фактически, аппаратная и программная обработка вершин применима только к устройствам слоя HAL. При продвижении вершин по конвейеру их необходимо преобразовывать (с помощью матриц мира, представления и проекции поочередно) и освещать (с помощью встроенных источников света D3D). Этот этап обработки известен как T&L (преобразование и освещение). Аппаратная обработка вершин выполняется оборудованием, если оно поддерживает такой вид обработки. Следовательно, программная обработка вершин выполняется программным обеспечением. Рекомендуется сначала попробовать создать устройство аппаратного преобразования и освещения. В случае неудачи следует попробовать создать смешанное устройство, а если это также не удастся, попробуйте создать средство программной обработки. (Если программное обеспечение завершается сбоем, выдается сообщение об ошибке и завершается с ошибкой).

## <a name="related-topics"></a>См. также

<dl> <dt>

[Устройства Direct3D](direct3d-devices.md)
</dt> </dl>

 

 
