---
description: Direct3D применяет следующие формулы к компонентам DU и DV в каждом пикселе схемы выпуклости.
ms.assetid: ae1de432-d1cc-45a5-b25f-b669cd30af3b
title: Формулы сопоставления выпуклости (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 86035a28966c841f7d593cb46c7c7d969f7b2addaacb6cf43e25ceebdca83ff2
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "118805868"
---
# <a name="bump-mapping-formulas-direct3d-9"></a>Формулы сопоставления выпуклости (Direct3D 9)

Direct3D применяет следующие формулы к компонентам<sub>d и d</sub> <sub>V</sub> в каждом пикселе схемы выпуклости.

![формулы в преобразованиях матрицы отображения рельефов](images/dudv-transform.png)

В этих формулах переменные D<sub>и d</sub> <sub>V</sub> берутся непосредственно из пикселя на карте выпуклости и преобразуются матрицей 2x2 для получения выходных значений разности<sub>d и d</sub><sub>V</sub>. Система использует выходные значения для изменения координат текстуры, которые соответствуют карте среды на следующей стадии текстуры. Коэффициенты матрицы преобразований задаются при D3DTSS \_ BUMPENVMAT00, D3DTSS \_ BUMPENVMAT10, D3DTSS \_ BUMPENVMAT01 и D3DTSS \_ BUMPENVMAT11 стадии текстуры.

В дополнение к разностным значениям и версии v система может вычислить значение светимости, используемое для модуляции цвета схемы среды на следующем этапе смешения, как показано в следующей формуле.

![Формула для яркости выходных данных, вычисленная по коэффициенту масштабирования и смещению](images/l-transform.png)

В этой формуле L — вычисляемая насыщенность выходных данных. Переменная L — это значение светимости, взятое из пиксела на карте выпуклости, умноженное на коэффициент масштабирования, S и смещение на значение переменной O. На \_ этапе текстуры D3DTSS бумпенвлскале и D3DTSS \_ бумпенвлоффсет определяются значения для переменных S и O в формуле. Эта формула применяется, только если операции смешения текстур для этапа, содержащего карту выпуклости, задано значение D3DTOP \_ бумпенвмаплуминанце. При использовании D3DTOP \_ бумпенвмап система использует значение 1,0 для L.

После вычисления Дельта выходных значений D<sub>U</sub>и d<sub>V</sub>система добавляет их в координаты текстуры на следующей стадии текстуры и производит модуляцию выбранного цвета с помощью светимости, чтобы получить цвет, применяемый к многоугольнику.

## <a name="related-topics"></a>Связанные темы

<dl> <dt>

[Сопоставление рельефов](bump-mapping.md)
</dt> </dl>

 

 



