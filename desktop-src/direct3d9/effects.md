---
description: Microsoft DirectX Effect позволяет интегрировать шейдеры вершин и пикселей с состоянием конвейера для отрисовки объектов. Эффекты — это следующий логический шаг в объединении шейдеров для создания уникальных условий рендеринга.
ms.assetid: vs|directx_sdk|~\effects.htm
title: Эффекты (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d48d2ff5548dff29ede4b360bd2c319f85fafa3e
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "105710641"
---
# <a name="effects-direct3d-9"></a><span data-ttu-id="3a4d1-104">Эффекты (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="3a4d1-104">Effects (Direct3D 9)</span></span>

<span data-ttu-id="3a4d1-105">Microsoft DirectX Effect позволяет интегрировать шейдеры вершин и пикселей с состоянием конвейера для отрисовки объектов.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-105">A Microsoft DirectX effect enables the integration of vertex and pixel shaders with pipeline state to render objects.</span></span> <span data-ttu-id="3a4d1-106">Эффекты — это следующий логический шаг в объединении шейдеров для создания уникальных условий рендеринга.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-106">Effects are the next logical step in combining shaders to produce unique render conditions.</span></span>

<span data-ttu-id="3a4d1-107">Эффекты также предоставляют удобный способ создания шейдеров для различных версий оборудования.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-107">Effects also provide a convenient way to write shaders for different hardware versions.</span></span> <span data-ttu-id="3a4d1-108">Поскольку различные видеоадаптеры поддерживают различные функциональные возможности, приложение может написать несколько методов, которые будут работать на различных устройствах.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-108">Because different video cards support different functionalities, an application can write several techniques that will run on a variety of devices.</span></span> <span data-ttu-id="3a4d1-109">Таким образом, если приложение выполняется на новейшем и максимальном оборудовании, приложение может запустить самый сложный способ воздействия.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-109">This way, if the application is running on the latest and greatest hardware, the application can run the most sophisticated effect technique.</span></span> <span data-ttu-id="3a4d1-110">С другой стороны, менее сложные методики эффектов могут быть автоматически выбраны для запуска на оборудовании с низким или меньшим объемом.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-110">On the other hand, less sophisticated effect techniques can automatically be chosen to run on less-expensive or less-capable hardware.</span></span>

<span data-ttu-id="3a4d1-111">Результат может заменить обработку вершин и часть обработки пикселей, выполняемую графическим конвейером.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-111">An effect can replace the vertex processing and part of the pixel processing performed by the graphics pipeline.</span></span> <span data-ttu-id="3a4d1-112">Примером влияния, которое использует шейдер вершин и шейдер пикселей, является пример Басичлсл.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-112">An example of an effect that uses a vertex shader and a pixel shader is in the BasicHLSL Sample.</span></span> <span data-ttu-id="3a4d1-113">Вы можете получить этот пример и узнать о нем из пакета SDK DirectX.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-113">You can get this sample and learn about it from the DirectX SDK.</span></span> <span data-ttu-id="3a4d1-114">Сведения о пакете SDK для DirectX см. в разделе [где находится пакет DirectX SDK?](../directx-sdk--august-2009-.md).</span><span class="sxs-lookup"><span data-stu-id="3a4d1-114">For info about the DirectX SDK, see [Where is the DirectX SDK?](../directx-sdk--august-2009-.md).</span></span>

<span data-ttu-id="3a4d1-115">Дополнительные сведения о влиянии см. в следующих разделах:</span><span class="sxs-lookup"><span data-stu-id="3a4d1-115">For more information about effects, see these topics:</span></span>

-   [<span data-ttu-id="3a4d1-116">Запись результата</span><span class="sxs-lookup"><span data-stu-id="3a4d1-116">Writing an Effect</span></span>](writing-an-effect.md)
-   [<span data-ttu-id="3a4d1-117">Использование действия</span><span class="sxs-lookup"><span data-stu-id="3a4d1-117">Using an Effect</span></span>](using-an-effect.md)

## <a name="effects-and-the-3d-pipeline"></a><span data-ttu-id="3a4d1-118">Эффекты и трехмерный конвейер</span><span class="sxs-lookup"><span data-stu-id="3a4d1-118">Effects and the 3D Pipeline</span></span>

<span data-ttu-id="3a4d1-119">На следующей схеме показан конвейер.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-119">The following diagram shows the pipeline.</span></span>

![Схема трехмерного конвейера](images/effects-block-diagram.png)

<span data-ttu-id="3a4d1-121">Конвейер преобразует входные данные в выходные Пиксели, которые заполняют буфер кадров.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-121">The pipeline transforms input data into output pixels that fill the frame buffer.</span></span> <span data-ttu-id="3a4d1-122">Входные данные поступают из объектов, которые состоят из вершин в пространстве объектов, или поверхностей более высокого порядка, созданные по N-исправлениям, обновлениям прямоугольников и исправлениям треугольников.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-122">The input data comes from objects that are made up of vertices in object space, or higher-order surfaces created from N-patches, rectangle patches, and triangle patches.</span></span> <span data-ttu-id="3a4d1-123">После тесселяции входных данных конвейер выполняет обработку вершин, примитивную обработку и обработку пикселей перед созданием конечных цветов пикселей.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-123">Once the input data has been tessellated, the pipeline performs vertex processing, primitive processing, and pixel processing before generating the final pixel colors.</span></span>

<span data-ttu-id="3a4d1-124">Обработка вершин и пикселей может осуществляться с помощью фиксированного конвейера функций или же может быть реализована с программируемыми шейдерами.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-124">Vertex and pixel processing can be performed by the fixed function pipeline, or can be implemented with programmable shaders.</span></span> <span data-ttu-id="3a4d1-125">Для управления тесселяцией входных данных, обработки примитивов и вывода данных используется состояние конвейера.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-125">The input data tessellation, primitive processing, and data outputs are controlled by pipeline state.</span></span> <span data-ttu-id="3a4d1-126">Все это можно интегрировать в действие.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-126">All this can be integrated into an effect.</span></span> <span data-ttu-id="3a4d1-127">Воздействие задает состояние, которое управляет процессом конвейера.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-127">An effect sets the state that controls how the pipeline functions.</span></span> <span data-ttu-id="3a4d1-128">Эффекты управляют программируемыми шейдерами, а также состоянием фиксированной функции.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-128">Effects manage programmable shaders as well as fixed function state.</span></span>

<span data-ttu-id="3a4d1-129">Эффекты могут сохранять и восстанавливать состояние, открывая устройство в том же состоянии, что и до запуска эффекта.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-129">Effects can save and restore state, leaving the device in the same state as before the effect was run.</span></span> <span data-ttu-id="3a4d1-130">Ниже перечислены типы состояний, которыми может управлять действие.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-130">The types of state that an effect can manage include:</span></span>

-   <span data-ttu-id="3a4d1-131">Состояние шейдера.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-131">Shader state.</span></span> <span data-ttu-id="3a4d1-132">Это включает создание и удаление шейдеров, настройку констант шейдера, настройку состояния шейдера и отрисовку с помощью шейдеров.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-132">This includes creating and deleting shaders, setting shader constants, setting shader state, and rendering with shaders.</span></span>
-   <span data-ttu-id="3a4d1-133">Состояние текстуры и образца.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-133">Texture and sampler state.</span></span> <span data-ttu-id="3a4d1-134">Сюда входит указание файлов текстур, инициализация стадий текстуры, создание объектов выборки и Настройка состояния образца.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-134">This includes specifying texture files, initializing texture stages, creating sampler objects, and setting sampler state.</span></span>
-   <span data-ttu-id="3a4d1-135">Другое состояние конвейера.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-135">Other pipeline state.</span></span> <span data-ttu-id="3a4d1-136">Сюда входят состояния для настройки преобразований, освещения, материалов и параметров подготовки к просмотру.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-136">This includes states for setting transformations, lighting, materials, and rendering options.</span></span> <span data-ttu-id="3a4d1-137">Это могут быть глобальные или локальные переменные.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-137">These can be global or local variables.</span></span> <span data-ttu-id="3a4d1-138">Переменные могут быть заданы либо самим действием, либо приложением.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-138">The variables can be set by either the effect itself or by the application.</span></span>

<span data-ttu-id="3a4d1-139">Эффекты содержат несколько параметров отрисовки, называемых методами.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-139">Effects contain multiple rendering options called techniques.</span></span> <span data-ttu-id="3a4d1-140">Каждый прием инкапсулирует глобальные переменные, состояние конвейера, состояние текстуры и образца и состояние шейдера.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-140">Each technique encapsulates global variables, pipeline state, texture and sampler state, and shader state.</span></span> <span data-ttu-id="3a4d1-141">В ходе подготовки к просмотру реализуется один стиль.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-141">A single style is implemented in a rendering pass.</span></span> <span data-ttu-id="3a4d1-142">Один или несколько проходов могут быть инкапсулированы в прием.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-142">One or more passes can be encapsulated in a technique.</span></span> <span data-ttu-id="3a4d1-143">Все проходы и методы можно проверить, чтобы определить, будет ли код действия выполняться на устройстве.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-143">All of the passes and techniques can be validated to see if the effect code will run on the hardware device.</span></span>

## <a name="effects-save-and-restore-state"></a><span data-ttu-id="3a4d1-144">Результаты сохранения и восстановления состояния</span><span class="sxs-lookup"><span data-stu-id="3a4d1-144">Effects Save and Restore State</span></span>

<span data-ttu-id="3a4d1-145">Эффекты управляют состоянием.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-145">Effects manage state.</span></span> <span data-ttu-id="3a4d1-146">Слово State («состояние») используется очень широко, так как включает все виды информации, которые должны быть указаны в конвейере для указания условий рендеринга.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-146">The word state is used very broadly here as it includes all kinds of information that the pipeline needs to specify the render conditions.</span></span> <span data-ttu-id="3a4d1-147">Сюда входят почти все функциональные области конвейера.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-147">This includes nearly all the functional areas of the pipeline.</span></span>

<span data-ttu-id="3a4d1-148">Параметры отрисовки управляются методами и передаются.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-148">Rendering options are controlled by techniques and passes.</span></span> <span data-ttu-id="3a4d1-149">Приложение визуализирует результат, установив один активный метод и выполнив один или несколько проходов.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-149">An application renders an effect by setting one active technique, and rendering one or more passes.</span></span> <span data-ttu-id="3a4d1-150">Все отрисовки в результате выполняются в соответствующей паре [**Begin**](id3dxeffect--begin.md) и [**End**](id3dxeffect--end.md) Calls.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-150">All rendering in an effect is done within a matching pair of [**Begin**](id3dxeffect--begin.md) and [**End**](id3dxeffect--end.md) calls.</span></span> <span data-ttu-id="3a4d1-151">При вызове **Begin** создается статеблокк и сохраняется состояние устройства (если не указано иное).</span><span class="sxs-lookup"><span data-stu-id="3a4d1-151">When **Begin** is called, a stateblock is created and device state is saved (unless you specify otherwise).</span></span> <span data-ttu-id="3a4d1-152">После того как метод отрисовывает проходы, которые отображаются в приложении, вызывается **End** , чтобы завершить активный метод.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-152">After a technique renders the passes that the application specifies to render, **End** is called to end the active technique.</span></span> <span data-ttu-id="3a4d1-153">Система влияния отвечает за счет автоматического восстановления состояния конвейера, которое было захвачено в блоке состояния (если вы не решили отключить эту функцию сохранения и восстановления).</span><span class="sxs-lookup"><span data-stu-id="3a4d1-153">The effect system responds by automatically restoring the pipeline state that was captured in the state block (unless you choose to disable this save and restore functionality).</span></span>

<span data-ttu-id="3a4d1-154">При программировании многопроходных последовательностей отрисовки, каждая из которых требует настройки собственного состояния, эффекты могут уменьшить номер обслуживания, необходимый для отслеживания изменений состояния.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-154">When programming multiple-pass rendering sequences, each of which requires its own state setup, effects can reduce the housekeeping required for tracking state changes.</span></span> <span data-ttu-id="3a4d1-155">Дополнительные сведения о состояниях, которые можно сохранить и восстановить с помощью эффектов, см. в разделе [состояния эффектов (Direct3D 9)](effect-states.md).</span><span class="sxs-lookup"><span data-stu-id="3a4d1-155">To see more information about the states that can be saved and restored by effects, see [Effect States (Direct3D 9)](effect-states.md).</span></span>

## <a name="effects-can-share-parameters"></a><span data-ttu-id="3a4d1-156">Эффекты могут совместно использовать параметры</span><span class="sxs-lookup"><span data-stu-id="3a4d1-156">Effects Can Share Parameters</span></span>

<span data-ttu-id="3a4d1-157">Параметры эффектов — это все нестатические переменные, объявленные в результате.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-157">Effect parameters are all the non-static variables declared in an effect.</span></span> <span data-ttu-id="3a4d1-158">Это могут быть глобальные переменные и заметки.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-158">This can include global variables and annotations.</span></span> <span data-ttu-id="3a4d1-159">Параметры эффектов могут совместно использоваться различными эффектами путем объявления параметров с помощью ключевого слова Shared и последующего создания эффекта с пулом эффектов.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-159">Effect parameters can be shared between different effects by declaring parameters with the shared keyword and then creating the effect with an effect pool.</span></span>

<span data-ttu-id="3a4d1-160">Клонированные эффекты используют тот же пул эффектов, что и результат клонирования.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-160">Cloned effects use the same effect pool as the effect from which they are cloned.</span></span> <span data-ttu-id="3a4d1-161">При клонировании действия создается точная копия результата, включая глобальные переменные, методы, проходы и заметки.</span><span class="sxs-lookup"><span data-stu-id="3a4d1-161">Cloning an effect makes an exact copy of an effect, including global variables, techniques, passes, and annotations.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3a4d1-162">См. также</span><span class="sxs-lookup"><span data-stu-id="3a4d1-162">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3a4d1-163">Руководством по программированию для Direct3D 9</span><span class="sxs-lookup"><span data-stu-id="3a4d1-163">Programming Guide for Direct3D 9</span></span>](dx9-graphics-programming-guide.md)
</dt> </dl>

 

 
