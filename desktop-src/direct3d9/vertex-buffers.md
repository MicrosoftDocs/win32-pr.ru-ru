---
description: Буферы вершин, представленные интерфейсом IDirect3DVertexBuffer9, представляют собой буферы памяти, содержащие данные вершин.
ms.assetid: vs|directx_sdk|~\vertex_buffers.htm
title: Буферы вершин (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8e38feb34e7b9f637f383bf451bff812d9ee6fb1
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "103805734"
---
# <a name="vertex-buffers-direct3d-9"></a><span data-ttu-id="aaaa5-103">Буферы вершин (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="aaaa5-103">Vertex Buffers (Direct3D 9)</span></span>

<span data-ttu-id="aaaa5-104">Буферы вершин, представленные интерфейсом [**IDirect3DVertexBuffer9**](/windows/desktop/api) , представляют собой буферы памяти, содержащие данные вершин.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-104">Vertex buffers, represented by the [**IDirect3DVertexBuffer9**](/windows/desktop/api) interface, are memory buffers that contain vertex data.</span></span> <span data-ttu-id="aaaa5-105">Буферы вершин могут содержать любой тип вершины — преобразованный или непреобразованный, горит или унлит, который может быть визуализирован с помощью методов отрисовки в интерфейсе [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) .</span><span class="sxs-lookup"><span data-stu-id="aaaa5-105">Vertex buffers can contain any vertex type - transformed or untransformed, lit or unlit - that can be rendered through the use of the rendering methods in the [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) interface.</span></span> <span data-ttu-id="aaaa5-106">Вершины в буфере вершин можно обрабатывать для выполнения таких операций, как преобразование, освещение или создание флагов кадрирования.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-106">You can process the vertices in a vertex buffer to perform operations such as transformation, lighting, or generating clipping flags.</span></span> <span data-ttu-id="aaaa5-107">Преобразование выполняется во всех случаях.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-107">Transformation is always performed.</span></span>

<span data-ttu-id="aaaa5-108">Гибкость буферов вершин делает их идеальным механизмом промежуточного хранения для многократного использования преобразованной геометрии.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-108">The flexibility of vertex buffers make them ideal staging points for reusing transformed geometry.</span></span> <span data-ttu-id="aaaa5-109">Можно создать один буфер вершин, преобразовать, осветить и кадрировать вершины в нем, а затем отрисовать модель в сцене столько раз, сколько нужно, — без повторного ее преобразования, даже если отрисовка перемежается с изменениями состояния отрисовки.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-109">You could create a single vertex buffer, transform, light, and clip the vertices in it, and render the model in the scene as many times as needed without re-transforming it, even with interleaved render state changes.</span></span> <span data-ttu-id="aaaa5-110">Это удобно делать при отрисовки моделей, в которых используется множество текстур: геометрия преобразовывается только один раз, после чего ее части можно отрисовывать по необходимости, перемежая отрисовку необходимыми изменениями текстур.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-110">This is useful when rendering models that use multiple textures: the geometry is transformed only once, and then portions of it can be rendered as needed, interleaved with the required texture changes.</span></span> <span data-ttu-id="aaaa5-111">Изменения состояния отрисовки, происходящие после обработки вершин, вступают в силу при следующей обработке вершин.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-111">Render state changes made after vertices are processed take effect the next time the vertices are processed.</span></span>

-   [<span data-ttu-id="aaaa5-112">Описание</span><span class="sxs-lookup"><span data-stu-id="aaaa5-112">Description</span></span>](#description)
-   [<span data-ttu-id="aaaa5-113">Пул памяти и использование</span><span class="sxs-lookup"><span data-stu-id="aaaa5-113">Memory Pool and Usage</span></span>](#memory-pool-and-usage)

## <a name="description"></a><span data-ttu-id="aaaa5-114">Описание</span><span class="sxs-lookup"><span data-stu-id="aaaa5-114">Description</span></span>

<span data-ttu-id="aaaa5-115">Буфер вершин описывается в терминах его возможностей:, если он может существовать только в системной памяти, если он используется только для операций записи, а также тип и количество вершин, которые он может содержать.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-115">A vertex buffer is described in terms of its capabilities: if it can exist only in system memory, if it is only used for write operations, and the type and number of vertices it can contain.</span></span> <span data-ttu-id="aaaa5-116">Все эти признаки хранятся в структуре [**D3DVERTEXBUFFER \_ DESC**](d3dvertexbuffer-desc.md) .</span><span class="sxs-lookup"><span data-stu-id="aaaa5-116">All these traits are held in a [**D3DVERTEXBUFFER\_DESC**](d3dvertexbuffer-desc.md) structure.</span></span>

<span data-ttu-id="aaaa5-117">Элементу Format присваивается значение D3DFMT \_ вертексдата, указывающее, что это буфер вершин.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-117">The Format member is set to D3DFMT\_VERTEXDATA to indicate that this is a vertex buffer.</span></span> <span data-ttu-id="aaaa5-118">Тип определяет тип ресурса для буфера вершин.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-118">The Type identifies the resource type of the vertex buffer.</span></span> <span data-ttu-id="aaaa5-119">Член структуры использования содержит общие флаги возможностей.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-119">The Usage structure member contains general capability flags.</span></span> <span data-ttu-id="aaaa5-120">Флаг D3DUSAGE \_ софтварепроцессинг указывает, что буфер вершин должен использоваться с обработкой вершин программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-120">The D3DUSAGE\_SOFTWAREPROCESSING flag indicates that the vertex buffer is to be used with software vertex processing.</span></span> <span data-ttu-id="aaaa5-121">Наличие \_ флага D3DUSAGE WRITEONLY в использовании указывает на то, что память буфера вершин используется только для операций записи.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-121">The presence of the D3DUSAGE\_WRITEONLY flag in Usage indicates that the vertex buffer memory is used only for write operations.</span></span> <span data-ttu-id="aaaa5-122">Это освобождает драйвер для размещения данных вершин в оптимальном расположении в памяти для быстрой обработки и подготовки к просмотру.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-122">This frees the driver to place the vertex data in the best memory location to enable fast processing and rendering.</span></span> <span data-ttu-id="aaaa5-123">Если флаг D3DUSAGE \_ WRITEONLY не используется, драйвер, скорее всего, поместит данные в расположение, неэффективное для операций чтения.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-123">If the D3DUSAGE\_WRITEONLY flag is not used, the driver is less likely to put the data in a location that is inefficient for read operations.</span></span> <span data-ttu-id="aaaa5-124">Это пожертвует некоторую скорость обработки и отрисовки.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-124">This sacrifices some processing and rendering speed.</span></span> <span data-ttu-id="aaaa5-125">Если этот флаг не указан, то предполагается, что приложения выполняют операции чтения и записи данных в буфере вершин.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-125">If this flag is not specified, it is assumed that applications perform read and write operations on the data within the vertex buffer.</span></span>

<span data-ttu-id="aaaa5-126">Pool указывает класс памяти, выделенный для буфера вершин.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-126">Pool specifies the memory class that is allocated for the vertex buffer.</span></span> <span data-ttu-id="aaaa5-127">Флаг D3DPOOL \_ системмем указывает, что система создала буфер вершин в системной памяти.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-127">The D3DPOOL\_SYSTEMMEM flag indicates that the system created the vertex buffer in system memory.</span></span>

<span data-ttu-id="aaaa5-128">Элемент size сохраняет размер данных буфера вершин в байтах.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-128">The Size member stores the size, in bytes, of the vertex buffer data.</span></span> <span data-ttu-id="aaaa5-129">Элемент ФВФ содержит сочетание [D3DFVF](d3dfvf.md) , которое определяет тип вершин, содержащихся в буфере.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-129">The FVF member contains a combination of [D3DFVF](d3dfvf.md) that identify the type of vertices that the buffer contains.</span></span>

## <a name="memory-pool-and-usage"></a><span data-ttu-id="aaaa5-130">Пул памяти и использование</span><span class="sxs-lookup"><span data-stu-id="aaaa5-130">Memory Pool and Usage</span></span>

<span data-ttu-id="aaaa5-131">Можно создавать буферы вершин с помощью метода [**IDirect3DDevice9:: креатевертексбуффер**](/windows/desktop/api) , принимающего параметры пула (класса памяти) и параметров использования.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-131">You can create vertex buffers with the [**IDirect3DDevice9::CreateVertexBuffer**](/windows/desktop/api) method, which takes pool (memory class) and usage parameters.</span></span> <span data-ttu-id="aaaa5-132">**IDirect3DDevice9:: креатевертексбуффер** можно также создать с помощью УКАЗАННОГО кода фвф для использования в фиксированной функции обработки вершин или в качестве выходных данных вершин процессов.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-132">**IDirect3DDevice9::CreateVertexBuffer** can also be created with a specified FVF code for use in fixed function vertex processing, or as the output of process vertices.</span></span> <span data-ttu-id="aaaa5-133">Дополнительные сведения см. в разделе [буферы вершин фвф (Direct3D 9)](fvf-vertex-buffers.md).</span><span class="sxs-lookup"><span data-stu-id="aaaa5-133">For details, see [FVF Vertex Buffers (Direct3D 9)](fvf-vertex-buffers.md).</span></span>

<span data-ttu-id="aaaa5-134">Флаг D3DUSAGE \_ софтварепроцессинг можно задать при обработке вершин в смешанном режиме или на уровне программного обеспечения (D3DCREATE \_ Mixed \_ вертекспроцессинг/D3DCREATE \_ Software \_ вертекспроцессинг) для этого устройства включена.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-134">The D3DUSAGE\_SOFTWAREPROCESSING flag can be set when mixed-mode or software vertex processing (D3DCREATE\_MIXED\_VERTEXPROCESSING / D3DCREATE\_SOFTWARE\_VERTEXPROCESSING) is enabled for that device.</span></span> <span data-ttu-id="aaaa5-135">D3DUSAGE \_ софтварепроцессинг должен быть установлен для использования буферов с обработкой вершин программного обеспечения в смешанном режиме, но не должен быть установлен для наилучшей производительности при использовании аппаратной обработки вершин в смешанном режиме. ( D3DCREATE \_ оборудование \_ вертекспроцессинг).</span><span class="sxs-lookup"><span data-stu-id="aaaa5-135">D3DUSAGE\_SOFTWAREPROCESSING must be set for buffers to be used with software vertex processing in mixed mode, but it should not be set for the best possible performance when using hardware vertex processing in mixed mode.(D3DCREATE\_HARDWARE\_VERTEXPROCESSING).</span></span> <span data-ttu-id="aaaa5-136">Однако параметр D3DUSAGE \_ софтварепроцессинг используется только в том случае, если один буфер используется одновременно с аппаратной и программной обработкой вершин.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-136">However, setting D3DUSAGE\_SOFTWAREPROCESSING is the only option when a single buffer is to be used with both hardware and software vertex processing.</span></span> <span data-ttu-id="aaaa5-137">D3DUSAGE \_ софтварепроцессинг разрешено использовать для смешанного, а также для программных устройств.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-137">D3DUSAGE\_SOFTWAREPROCESSING is allowed for mixed as well as for software devices.</span></span>

<span data-ttu-id="aaaa5-138">Можно принудительно использовать буферы вершин и индексов в системной памяти, указав D3DPOOL \_ системмем, даже если обработка вершин выполняется в оборудовании.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-138">It is possible to force vertex and index buffers into system memory by specifying D3DPOOL\_SYSTEMMEM, even when the vertex processing is done in hardware.</span></span> <span data-ttu-id="aaaa5-139">Это способ избежать чрезмерно больших объемов памяти, заблокированных страницей, когда драйвер помещает эти буферы в память AGP.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-139">This is a way to avoid overly large amounts of page-locked memory when a driver is putting these buffers into AGP memory.</span></span>

<span data-ttu-id="aaaa5-140">В этом разделе представлены основные понятия, необходимые для понимания и использования буферов вершин в приложении Direct3D.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-140">This section introduces the concepts necessary to understand and use vertex buffers in a Direct3D application.</span></span> <span data-ttu-id="aaaa5-141">Сведения делятся на следующие разделы.</span><span class="sxs-lookup"><span data-stu-id="aaaa5-141">Information is divided into the following sections.</span></span>

-   [<span data-ttu-id="aaaa5-142">Создание буфера вершин (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="aaaa5-142">Creating a Vertex Buffer (Direct3D 9)</span></span>](creating-a-vertex-buffer.md)
-   [<span data-ttu-id="aaaa5-143">Доступ к содержимому буфера вершин (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="aaaa5-143">Accessing the Contents of a Vertex Buffer (Direct3D 9)</span></span>](accessing-the-contents-of-a-vertex-buffer.md)
-   [<span data-ttu-id="aaaa5-144">Подготовка к просмотру из буфера вершин (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="aaaa5-144">Rendering from a Vertex Buffer (Direct3D 9)</span></span>](rendering-from-a-vertex-buffer.md)
-   [<span data-ttu-id="aaaa5-145">Буферы вершин ФВФ (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="aaaa5-145">FVF Vertex Buffers (Direct3D 9)</span></span>](fvf-vertex-buffers.md)
-   [<span data-ttu-id="aaaa5-146">Обработка вершин фиксированной функции (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="aaaa5-146">Fixed Function Vertex Processing (Direct3D 9)</span></span>](fixed-function-vertex-processing.md)
-   [<span data-ttu-id="aaaa5-147">Программируемая обработка вершин (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="aaaa5-147">Programmable Vertex Processing (Direct3D 9)</span></span>](programmable-vertex-processing.md)
-   [<span data-ttu-id="aaaa5-148">Типы устройств и требования к обработке вершин (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="aaaa5-148">Device Types and Vertex Processing Requirements (Direct3D 9)</span></span>](device-types-and-vertex-processing-requirements.md)

## <a name="related-topics"></a><span data-ttu-id="aaaa5-149">См. также</span><span class="sxs-lookup"><span data-stu-id="aaaa5-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="aaaa5-150">Ресурсы Direct3D</span><span class="sxs-lookup"><span data-stu-id="aaaa5-150">Direct3D Resources</span></span>](direct3d-resources.md)
</dt> <dt>

[<span data-ttu-id="aaaa5-151">Отрисовка из буферов вершин и индексов (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="aaaa5-151">Rendering from Vertex and Index Buffers (Direct3D 9)</span></span>](rendering-from-vertex-and-index-buffers.md)
</dt> <dt>

[<span data-ttu-id="aaaa5-152">Буферы индексов (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="aaaa5-152">Index Buffers (Direct3D 9)</span></span>](index-buffers.md)
</dt> </dl>

 

 
