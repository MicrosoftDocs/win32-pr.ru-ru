---
description: Свойство типа освещения определяет, какой тип источника света вы используете.
ms.assetid: 7718383a-6e49-4ad2-acc1-fc8fec0d4844
title: Типы освещения (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 39ae2c7fd5380b0f604181f36d784afe3f3fc3ff
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104072128"
---
# <a name="light-types-direct3d-9"></a><span data-ttu-id="c44b6-103">Типы освещения (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="c44b6-103">Light Types (Direct3D 9)</span></span>

<span data-ttu-id="c44b6-104">Свойство типа освещения определяет, какой тип источника света вы используете.</span><span class="sxs-lookup"><span data-stu-id="c44b6-104">The light type property defines which type of light source you're using.</span></span> <span data-ttu-id="c44b6-105">Тип освещения задается с помощью значения из перечисления C++ [**D3DLIGHTTYPE**](./d3dlighttype.md) в элементе Type структуры [**D3DLIGHT9**](d3dlight9.md) источника.</span><span class="sxs-lookup"><span data-stu-id="c44b6-105">The light type is set by using a value from the [**D3DLIGHTTYPE**](./d3dlighttype.md) C++ enumeration in the Type member of the light's [**D3DLIGHT9**](d3dlight9.md) structure.</span></span> <span data-ttu-id="c44b6-106">В Direct3D существует три типа источников света — точечные, прожекторные и направленные.</span><span class="sxs-lookup"><span data-stu-id="c44b6-106">There are three types of lights in Direct3D - point lights, spotlights, and directional lights.</span></span> <span data-ttu-id="c44b6-107">Каждый тип по-разному освещает объекты в сцене и вносит различные объемы вычислительной нагрузки.</span><span class="sxs-lookup"><span data-stu-id="c44b6-107">Each type illuminates objects in a scene differently, with varying levels of computational overhead.</span></span>

## <a name="point-light"></a><span data-ttu-id="c44b6-108">Точечный свет</span><span class="sxs-lookup"><span data-stu-id="c44b6-108">Point Light</span></span>

<span data-ttu-id="c44b6-109">Точечные источники света имеют цвет и расположение в сцене, но не имеют определенного направления.</span><span class="sxs-lookup"><span data-stu-id="c44b6-109">Point lights have color and position within a scene, but no single direction.</span></span> <span data-ttu-id="c44b6-110">Они излучают свет равномерно во всех направлениях, как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="c44b6-110">They give off light equally in all directions, as shown in the following illustration.</span></span>

![иллюстрация точечного источника света](images/ptlight.png)

<span data-ttu-id="c44b6-112">Хорошим примером точечного источника света является лампа накаливания.</span><span class="sxs-lookup"><span data-stu-id="c44b6-112">A light bulb is a good example of a point light.</span></span> <span data-ttu-id="c44b6-113">Точечные источники света обладают свойствами затухания и дальности действия и освещают сетку по принципу вершина за вершиной.</span><span class="sxs-lookup"><span data-stu-id="c44b6-113">Point lights are affected by attenuation and range, and illuminate a mesh on a vertex-by-vertex basis.</span></span> <span data-ttu-id="c44b6-114">Во время освещения Direct3D использует расположение точечного источника света в пространстве и координаты освещаемых вершин, чтобы рассчитать вектор направленности освещения и расстояние, которое свет преодолевает.</span><span class="sxs-lookup"><span data-stu-id="c44b6-114">During lighting, Direct3D uses the point light's position in world space and the coordinates of the vertex being lit to derive a vector for the direction of the light, and the distance that the light has traveled.</span></span> <span data-ttu-id="c44b6-115">Оба этих параметра используются вместе с нормалью вершины, чтобы вычислить вклад этого источника света в освещенность определенной поверхности.</span><span class="sxs-lookup"><span data-stu-id="c44b6-115">Both are used, along with the vertex normal, to calculate the contribution of the light to the illumination of the surface.</span></span>

## <a name="directional-light"></a><span data-ttu-id="c44b6-116">Направленный свет</span><span class="sxs-lookup"><span data-stu-id="c44b6-116">Directional Light</span></span>

<span data-ttu-id="c44b6-117">Направленные источники света имеют только цвет и направление и не имеют расположения.</span><span class="sxs-lookup"><span data-stu-id="c44b6-117">Directional lights have only color and direction, not position.</span></span> <span data-ttu-id="c44b6-118">Они излучают параллельный свет.</span><span class="sxs-lookup"><span data-stu-id="c44b6-118">They emit parallel light.</span></span> <span data-ttu-id="c44b6-119">Это означает, что весь излучаемый направленными источниками свет проходит через сцену в одном направлении.</span><span class="sxs-lookup"><span data-stu-id="c44b6-119">This means that all light generated by directional lights travels through a scene in the same direction.</span></span> <span data-ttu-id="c44b6-120">Представить себе направленный источник света можно как очень сильно удаленный источник света, такой как солнце.</span><span class="sxs-lookup"><span data-stu-id="c44b6-120">Imagine a directional light as a light source at near infinite distance, such as the sun.</span></span> <span data-ttu-id="c44b6-121">Направленные источники света не имеют свойств затухания и дальности действия, поэтому при расчете цветов вершин в качестве коэффициентов Direct3D использует только заданные вами свойства направления и цвета.</span><span class="sxs-lookup"><span data-stu-id="c44b6-121">Directional lights are not affected by attenuation or range, so the direction and color you specify are the only factors considered when Direct3D calculates vertex colors.</span></span> <span data-ttu-id="c44b6-122">Из-за небольшого количества коэффициентов освещения эти источники света являются наименее сложными в вычислениях.</span><span class="sxs-lookup"><span data-stu-id="c44b6-122">Because of the small number of illumination factors, these are the least computationally intensive lights to use.</span></span>

## <a name="spotlight"></a><span data-ttu-id="c44b6-123">SpotLight</span><span class="sxs-lookup"><span data-stu-id="c44b6-123">SpotLight</span></span>

<span data-ttu-id="c44b6-124">Прожекторные источники света имеют свойства цвета, расположения и направления, в котором они светят.</span><span class="sxs-lookup"><span data-stu-id="c44b6-124">Spotlights have color, position, and direction in which they emit light.</span></span> <span data-ttu-id="c44b6-125">Свет, излучаемый прожекторным источником, состоит из яркого внутреннего конуса и более крупного внешнего конуса, а интенсивность света уменьшается от одного к другому, как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="c44b6-125">Light emitted from a spotlight is made up of a bright inner cone and a larger outer cone, with the light intensity diminishing between the two, as shown in the following illustration.</span></span>

![иллюстрация прожектора с внутренним конусом и внешним конусом](images/spotlt.png)

<span data-ttu-id="c44b6-127">Прожекторы имеют свойства ослабления, затухания и дальности действия.</span><span class="sxs-lookup"><span data-stu-id="c44b6-127">Spotlights are affected by falloff, attenuation, and range.</span></span> <span data-ttu-id="c44b6-128">Эти факторы, а также расстояние, которое свет преодолевает до каждой вершины, учитываются при расчете эффектов освещения для объектов в сцене.</span><span class="sxs-lookup"><span data-stu-id="c44b6-128">These factors, as well as the distance light travels to each vertex, are figured in when computing lighting effects for objects in a scene.</span></span> <span data-ttu-id="c44b6-129">Вычисление этих эффектов для каждой вершины делает прожекторы наиболее сложными из всех источников света в Direct3D.</span><span class="sxs-lookup"><span data-stu-id="c44b6-129">Computing these effects for each vertex makes spotlights the most computationally time-consuming of all lights in Direct3D.</span></span>

<span data-ttu-id="c44b6-130">Структура C++ [**D3DLIGHT9**](d3dlight9.md) содержит три элемента, которые используются только в прожекторах.</span><span class="sxs-lookup"><span data-stu-id="c44b6-130">The [**D3DLIGHT9**](d3dlight9.md) C++ structure contains three members that are used only by spotlights.</span></span> <span data-ttu-id="c44b6-131">Эти члены — спады, тета и фи — контролируют, как крупные и малые конес объекта прожектора имеют вид внутреннего и внешнего, а также степень падения света между ними.</span><span class="sxs-lookup"><span data-stu-id="c44b6-131">These members - Falloff, Theta, and Phi - control how large or small a spotlight object's inner and outer cones are, and how light decreases between them.</span></span>

<span data-ttu-id="c44b6-132">Значение тета является углом радианы внутреннего конуса от прожектора, а значение фи — углом внешнего конуса света.</span><span class="sxs-lookup"><span data-stu-id="c44b6-132">The Theta value is the radian angle of the spotlight's inner cone, and the Phi value is the angle for the outer cone of light.</span></span> <span data-ttu-id="c44b6-133">Значение рассеивания определяет, как интенсивность освещения уменьшается между внешним краями внутреннего конуса и внутренней границей внешнего конуса.</span><span class="sxs-lookup"><span data-stu-id="c44b6-133">The Falloff value controls how light intensity decreases between the outer edge of the inner cone and the inner edge of the outer cone.</span></span> <span data-ttu-id="c44b6-134">В большинстве приложений задается значение ослабления 1,0 для создания равномерного ослабления на переходе между двумя конусами, но при необходимости можно задать другие значения.</span><span class="sxs-lookup"><span data-stu-id="c44b6-134">Most applications set Falloff to 1.0 to create falloff that occurs evenly between the two cones, but you can set other values as needed.</span></span>

<span data-ttu-id="c44b6-135">На следующем рисунке показана связь между значениями этих элементов и того, как они могут повлиять на внутреннее и внешнее конес света.</span><span class="sxs-lookup"><span data-stu-id="c44b6-135">The following illustration shows the relationship between the values for these members and how they can affect a spotlight's inner and outer cones of light.</span></span>

![иллюстрация связи значений фи и тета с конусами прожектора](images/spotlt2.png)

<span data-ttu-id="c44b6-137">Прожекторы излучают свет, состоящий из двух частей: яркий внутренний конус и внешний конус.</span><span class="sxs-lookup"><span data-stu-id="c44b6-137">Spotlights emit a cone of light that has two parts: a bright inner cone and an outer cone.</span></span> <span data-ttu-id="c44b6-138">Самый яркий свет попадает во внутренний конус, а за пределами внешнего конуса свет отсутствует; между этими двумя областями интенсивность света ослабляется.</span><span class="sxs-lookup"><span data-stu-id="c44b6-138">Light is brightest in the inner cone and isn't present outside the outer cone, with light intensity attenuating between the two areas.</span></span> <span data-ttu-id="c44b6-139">Этот тип снижения интенсивности обычно называется ослаблением.</span><span class="sxs-lookup"><span data-stu-id="c44b6-139">This type of attenuation is commonly referred to as falloff.</span></span>

<span data-ttu-id="c44b6-140">Количество света, который получает вершина, основано на расположении вершины во внутреннем или внешнем конусе.</span><span class="sxs-lookup"><span data-stu-id="c44b6-140">The amount of light a vertex receives is based on the vertex's location in the inner or outer cones.</span></span> <span data-ttu-id="c44b6-141">Direct3D вычисляет скалярное произведение вектора направления прожектора (L) и вектора от источника света до вершины (D).</span><span class="sxs-lookup"><span data-stu-id="c44b6-141">Direct3D computes the dot product of the spotlight's direction vector (L) and the vector from the light to the vertex (D).</span></span> <span data-ttu-id="c44b6-142">Это значение равно косинусу угла между двумя векторами и служит индикатором расположения вершины, его можно сравнить с углами конуса света, чтобы определить, находится ли вершина во внутреннем или внешнем конусе.</span><span class="sxs-lookup"><span data-stu-id="c44b6-142">This value is equal to the cosine of the angle between the two vectors, and serves as an indicator of the vertex's position that can be compared to the light's cone angles to determine where the vertex might lie in the inner or outer cones.</span></span> <span data-ttu-id="c44b6-143">На иллюстрации ниже представлено графическое изображение отношения между этими двумя векторами.</span><span class="sxs-lookup"><span data-stu-id="c44b6-143">The following illustration provides a graphical representation of the association between these two vectors.</span></span>

![изображение вектора направления прожектора и вектора от вершины до прожектора](images/spotalg1.png)

<span data-ttu-id="c44b6-145">Система сравнивает это значение с косинусом углов внутреннего и внешнего конусов прожектора.</span><span class="sxs-lookup"><span data-stu-id="c44b6-145">The system compares this value to the cosine of the spotlight's inner and outer cone angles.</span></span> <span data-ttu-id="c44b6-146">В структуре [**D3DLIGHT9ов**](d3dlight9.md) элементы тета и фи представляют собой общий угол конуса для внутреннего и внешнего конес.</span><span class="sxs-lookup"><span data-stu-id="c44b6-146">In the light's [**D3DLIGHT9**](d3dlight9.md) structure, the Theta and Phi members represent the total cone angles for the inner and outer cones.</span></span> <span data-ttu-id="c44b6-147">Поскольку ослабление происходит по мере удаления вершины от центра освещенности (а не по всему углу конуса), среда выполнения делит эти углы конуса пополам перед расчетом их косинусов.</span><span class="sxs-lookup"><span data-stu-id="c44b6-147">Because the attenuation occurs as the vertex becomes more distant from the center of illumination (rather than across the total cone angle), the runtime divides these cone angles in half before calculating their cosines.</span></span>

<span data-ttu-id="c44b6-148">Если скалярное произведение векторов L и D меньше либо равно косинусу угла внешнего конуса, вершина находится за пределами внешнего конуса и не получает света.</span><span class="sxs-lookup"><span data-stu-id="c44b6-148">If the dot product of vectors L and D is less than or equal to the cosine of the outer cone angle, the vertex lies beyond the outer cone and receives no light.</span></span> <span data-ttu-id="c44b6-149">Если скалярное произведение векторов L и D больше косинуса угла внутреннего конуса, значит, вершина находится в пределах внутреннего конуса и получает максимальное количество света с учетом затухания по мере удаления.</span><span class="sxs-lookup"><span data-stu-id="c44b6-149">If the dot product of L and D is greater than the cosine of the inner cone angle, then the vertex is within the inner cone and receives the maximum amount of light, still considering attenuation over distance.</span></span> <span data-ttu-id="c44b6-150">Если вершина находится где-то между двумя этими областями, ослабление рассчитывается по следующему уравнению.</span><span class="sxs-lookup"><span data-stu-id="c44b6-150">If the vertex is somewhere between the two regions, then falloff is calculated with the following equation.</span></span>

![формула интенсивности света на вершине после ослабления](images/falloff.png)

<span data-ttu-id="c44b6-152">Где:</span><span class="sxs-lookup"><span data-stu-id="c44b6-152">Where:</span></span>

-   <span data-ttu-id="c44b6-153">I <sub>f</sub> — интенсивность освещения после рассеивания</span><span class="sxs-lookup"><span data-stu-id="c44b6-153">I <sub>f</sub> is light intensity after falloff</span></span>
-   <span data-ttu-id="c44b6-154">Альфа — это угол между векторами L и D</span><span class="sxs-lookup"><span data-stu-id="c44b6-154">Alpha is the angle between vectors L and D</span></span>
-   <span data-ttu-id="c44b6-155">Тета — это угол внутреннего конуса</span><span class="sxs-lookup"><span data-stu-id="c44b6-155">Theta is the inner cone angle</span></span>
-   <span data-ttu-id="c44b6-156">Фи — это угол внешнего конуса</span><span class="sxs-lookup"><span data-stu-id="c44b6-156">Phi is the outer cone angle</span></span>
-   <span data-ttu-id="c44b6-157">p — значение ослабления</span><span class="sxs-lookup"><span data-stu-id="c44b6-157">p is the falloff</span></span>

<span data-ttu-id="c44b6-158">Эта формула выдает значение от 0,0 до 1,0, которое определяет интенсивность света на вершине с учетом ослабления.</span><span class="sxs-lookup"><span data-stu-id="c44b6-158">This formula generates a value between 0.0 and 1.0 that scales the light's intensity at the vertex to account for falloff.</span></span> <span data-ttu-id="c44b6-159">Также применяется значение затухания, которое зависит от расстояния между вершиной и источником света.</span><span class="sxs-lookup"><span data-stu-id="c44b6-159">Attenuation as a factor of the vertex's distance from the light is also applied.</span></span> <span data-ttu-id="c44b6-160">На следующем графике показано, как различные значения ослабления могут влиять на кривую ослабления.</span><span class="sxs-lookup"><span data-stu-id="c44b6-160">The following graph shows how different falloff values can affect the falloff curve.</span></span>

![график интенсивности света в зависимости от расстояние между вершиной и источником света](images/fallgraf.png)

<span data-ttu-id="c44b6-162">Влияние различных значений ослабления на фактическое освещение довольно умеренное, и небольшое снижение производительности вызывается при расчете кривой для значений ослабления, отличных от 1,0.</span><span class="sxs-lookup"><span data-stu-id="c44b6-162">The effect of various falloff values on the actual lighting is subtle, and a small performance penalty is incurred by shaping the falloff curve with falloff values other than 1.0.</span></span> <span data-ttu-id="c44b6-163">По этим причинам это значение обычно устанавливается равным 1,0.</span><span class="sxs-lookup"><span data-stu-id="c44b6-163">For these reasons, this value is typically set to 1.0.</span></span>

## <a name="related-topics"></a><span data-ttu-id="c44b6-164">См. также</span><span class="sxs-lookup"><span data-stu-id="c44b6-164">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c44b6-165">Индикаторы и материалы</span><span class="sxs-lookup"><span data-stu-id="c44b6-165">Lights and Materials</span></span>](lights-and-materials.md)
</dt> </dl>

 

 
