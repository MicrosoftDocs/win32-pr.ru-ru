---
description: D3DX — это служебная Библиотека, которая предоставляет вспомогательные службы. Это уровень выше компонента Direct3D.
ms.assetid: 34ad82f2-542c-4342-af02-a767d6d4c96c
title: Поддержка рисования линий в D3DX (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 974a0fdeb24dad1107f85e6c79603368776bce15
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "104422958"
---
# <a name="line-drawing-support-in-d3dx-direct3d-9"></a><span data-ttu-id="20f29-104">Поддержка рисования линий в D3DX (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="20f29-104">Line Drawing Support in D3DX (Direct3D 9)</span></span>

<span data-ttu-id="20f29-105">D3DX — это служебная Библиотека, которая предоставляет вспомогательные службы.</span><span class="sxs-lookup"><span data-stu-id="20f29-105">D3DX is a utility library that provides helper services.</span></span> <span data-ttu-id="20f29-106">Это уровень выше компонента Direct3D.</span><span class="sxs-lookup"><span data-stu-id="20f29-106">It is a layer above the Direct3D component.</span></span>

<span data-ttu-id="20f29-107">D3DX поддерживает сглаженные линии с одним пикселем.</span><span class="sxs-lookup"><span data-stu-id="20f29-107">D3DX supports single-pixel-wide antialiased lines.</span></span> <span data-ttu-id="20f29-108">Шаблоны линий больше не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="20f29-108">Line patterns are no longer supported.</span></span>

<span data-ttu-id="20f29-109">Библиотека рисования линий эмулирует линии с помощью треугольников текстуры и предполагает следующее:</span><span class="sxs-lookup"><span data-stu-id="20f29-109">The line drawing library emulates lines using texture triangles and assumes the following:</span></span>

-   <span data-ttu-id="20f29-110">Оборудование доступно через интерфейсы Direct3D 9.</span><span class="sxs-lookup"><span data-stu-id="20f29-110">Hardware is available through the Direct3D 9 interfaces.</span></span>
-   <span data-ttu-id="20f29-111">Доступен по крайней мере один этап текстуры.</span><span class="sxs-lookup"><span data-stu-id="20f29-111">At least one texture stage is available.</span></span>
-   <span data-ttu-id="20f29-112">используются текстуры 64 x 64.</span><span class="sxs-lookup"><span data-stu-id="20f29-112">64x64 textures are used.</span></span>
-   <span data-ttu-id="20f29-113">Доступны следующие режимы.</span><span class="sxs-lookup"><span data-stu-id="20f29-113">The following modes are available:</span></span>
    -   <span data-ttu-id="20f29-114">билинейная фильтрация;</span><span class="sxs-lookup"><span data-stu-id="20f29-114">Bilinear filtering</span></span>
    -   <span data-ttu-id="20f29-115">Режим адреса среза</span><span class="sxs-lookup"><span data-stu-id="20f29-115">Clamp address mode</span></span>
    -   <span data-ttu-id="20f29-116">Режим адреса для переноса</span><span class="sxs-lookup"><span data-stu-id="20f29-116">Wrap address mode</span></span>
    -   <span data-ttu-id="20f29-117">Альфа-операция модуляции</span><span class="sxs-lookup"><span data-stu-id="20f29-117">Alpha op modulate</span></span>
    -   <span data-ttu-id="20f29-118">Альфа-смешение (СРКБЛЕНД = SRC \_ альфа, дестбленд = Инв \_ src \_ Alpha)</span><span class="sxs-lookup"><span data-stu-id="20f29-118">Alpha blending (SRCBLEND = SRC\_ALPHA, DESTBLEND = INV\_SRC\_ALPHA)</span></span>
    -   <span data-ttu-id="20f29-119">Альфа-канал теста, если недоступно сочетание Alpha. более низкий результат качества</span><span class="sxs-lookup"><span data-stu-id="20f29-119">Alpha test if alpha blending is not available; lower quality result</span></span>

<span data-ttu-id="20f29-120">Для отображения сглаженных линий в многопримерных целевых объектах рендеринга используйте [**ID3DXLine**](id3dxline.md) , который создает текстурированные многоугольники.</span><span class="sxs-lookup"><span data-stu-id="20f29-120">For antialiased line rendering in multisample render targets, use [**ID3DXLine**](id3dxline.md) which generates textured polygons.</span></span> <span data-ttu-id="20f29-121">Значения покрытия пикселей, созданные сглаженной линией, обменяются альфа-значением пикселя, вычисленным шейдером пикселей.</span><span class="sxs-lookup"><span data-stu-id="20f29-121">The pixel coverage values, generated by antialiased line rasterization, modulate the pixel's alpha value computed by the pixel shader.</span></span> <span data-ttu-id="20f29-122">Чтобы нарисовать сглаженную линию, приложение должно включить альфа-смешение, а затем установить \_ состояние визуализации D3DRS антиалиаседлининабле в **значение true**.</span><span class="sxs-lookup"><span data-stu-id="20f29-122">To draw an antialiased line, an application must enable alpha blending and then it must set the D3DRS\_ANTIALIASEDLINEENABLE render state to **TRUE**.</span></span>

## <a name="functionality-description"></a><span data-ttu-id="20f29-123">Описание функциональности</span><span class="sxs-lookup"><span data-stu-id="20f29-123">Functionality Description</span></span>

<span data-ttu-id="20f29-124">Библиотека поддерживает Рисование цветных полос линий с помощью следующих функций строки, каждый из которых не зависит друг от друга:</span><span class="sxs-lookup"><span data-stu-id="20f29-124">The library supports drawing colored line strips with the following line features, each of which is independent of any other:</span></span>

-   <span data-ttu-id="20f29-125">Толщина линии</span><span class="sxs-lookup"><span data-stu-id="20f29-125">Line width</span></span>
-   <span data-ttu-id="20f29-126">Шаблон линии с повторением (счетчик шаблона линии сбрасывается при каждом вызове [**ID3DXLine::D RAW**](id3dxline--draw.md) или [**ID3DXLine::D равтрансформ**](id3dxline--drawtransform.md) .</span><span class="sxs-lookup"><span data-stu-id="20f29-126">Line pattern with repetition (the line pattern counter resets with each [**ID3DXLine::Draw**](id3dxline--draw.md) or [**ID3DXLine::DrawTransform**](id3dxline--drawtransform.md) call.</span></span> <span data-ttu-id="20f29-127">Он не сбрасывается с каждым сегментом линейки линий.)</span><span class="sxs-lookup"><span data-stu-id="20f29-127">It does not reset with each segment of the line strip.)</span></span>
-   <span data-ttu-id="20f29-128">Сглаживания</span><span class="sxs-lookup"><span data-stu-id="20f29-128">Antialiasing</span></span>
-   <span data-ttu-id="20f29-129">Линии в стиле OpenGL</span><span class="sxs-lookup"><span data-stu-id="20f29-129">OpenGL-style lines</span></span>

> [!Note]  
> <span data-ttu-id="20f29-130">Угловое соединение не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="20f29-130">No mitering is supported.</span></span>

 

<span data-ttu-id="20f29-131">Библиотека использует встроенную поддержку отрисовки линий оборудования (если она доступна на устройстве) только в том случае, если:</span><span class="sxs-lookup"><span data-stu-id="20f29-131">The library uses native hardware line drawing support (if available in the device) only if:</span></span>

-   <span data-ttu-id="20f29-132">Толщина линии — 1.</span><span class="sxs-lookup"><span data-stu-id="20f29-132">Line width is 1.</span></span>
-   <span data-ttu-id="20f29-133">Шаблон линии не включен.</span><span class="sxs-lookup"><span data-stu-id="20f29-133">No line pattern is enabled.</span></span>

<span data-ttu-id="20f29-134">В некоторых аппаратных устройствах поддерживаются сглаженные линии с одним пикселем, поэтому библиотека использует ее, если она доступна.</span><span class="sxs-lookup"><span data-stu-id="20f29-134">Single-pixel-wide antialiased lines are supported by some hardware, so the library uses that, if available.</span></span> <span data-ttu-id="20f29-135">Элемент Линекапс структуры [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) перечисляет аппаратные возможности для примитивов рисования линий.</span><span class="sxs-lookup"><span data-stu-id="20f29-135">The LineCaps member of the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure enumerates hardware capabilities for line-drawing primitives.</span></span>

<span data-ttu-id="20f29-136">При использовании программной прорисовки каждая строка разворачивается в прямоугольнике, а в драйвере отправляются четыре вершины.</span><span class="sxs-lookup"><span data-stu-id="20f29-136">When the software line drawing is used, each line is expanded into a rectangle and four vertices are sent down to the driver.</span></span>

<span data-ttu-id="20f29-137">Каждый сегмент линии рисуется с двумя треугольниками.</span><span class="sxs-lookup"><span data-stu-id="20f29-137">Each line segment is drawn with two triangles.</span></span> <span data-ttu-id="20f29-138">Ширина примитива равна заданной ширине плюс 1,0, что может привести к появлению дополнительной строки или столбца пикселей.</span><span class="sxs-lookup"><span data-stu-id="20f29-138">The width of the primitive is the specified width plus 1.0, which may result in an extra row or column of pixels.</span></span> <span data-ttu-id="20f29-139">По мере того, как линия расширяется, градиентная заливка текстуры становится более грубой, а более полностью непрозрачные пикселей текстуры реплицируются по середине.</span><span class="sxs-lookup"><span data-stu-id="20f29-139">As the line gets wider, the antialias gradient in the texture becomes more coarse, and more fully-opaque texels are replicated around the middle.</span></span> <span data-ttu-id="20f29-140">Градиент кодируется в соответствии с v-направлением текстуры и обычно реплицируется вдоль u-направления.</span><span class="sxs-lookup"><span data-stu-id="20f29-140">The gradient is encoded in the v-direction of the texture, and typically replicated along the u-direction.</span></span> <span data-ttu-id="20f29-141">Режим адресации текстуры для v — это зажим.</span><span class="sxs-lookup"><span data-stu-id="20f29-141">The texture addressing mode for v is clamp.</span></span>

<span data-ttu-id="20f29-142">Каждый сегмент строки в списке можно рассматривать как отдельную строку, которая начинается с предыдущей конечной точки.</span><span class="sxs-lookup"><span data-stu-id="20f29-142">Each line segment in the list can be considered to be a separate line that happens to start from the previous end point.</span></span>

<span data-ttu-id="20f29-143">Качество сглаживания по краям, параллельно с длиной исходной строки, снижается по мере того, как линия становится шире.</span><span class="sxs-lookup"><span data-stu-id="20f29-143">Antialiasing quality along the edges parallel to the length of the original line suffers as the line gets wider.</span></span> <span data-ttu-id="20f29-144">Ожидается, что ширина строк, превышающая 32,0, начнет демонстрировать артефакты на этих краях.</span><span class="sxs-lookup"><span data-stu-id="20f29-144">It is expected that line widths greater than 32.0 will start to exhibit artifacts along these edges.</span></span>

## <a name="related-topics"></a><span data-ttu-id="20f29-145">См. также</span><span class="sxs-lookup"><span data-stu-id="20f29-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="20f29-146">D3DX</span><span class="sxs-lookup"><span data-stu-id="20f29-146">D3DX</span></span>](d3dx.md)
</dt> </dl>

 

 



