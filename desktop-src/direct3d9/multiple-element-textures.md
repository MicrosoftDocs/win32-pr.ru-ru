---
description: Традиционные текстуры считаются текстурами с одним элементом.
ms.assetid: 8fe8da80-0879-413a-a7db-617d2f558b28
title: Многоэлементные текстуры (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 78a434d1e6c6a892c794551aa0caf34890f3def9
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "105691974"
---
# <a name="multiple-element-textures-direct3d-9"></a>Многоэлементные текстуры (Direct3D 9)

Традиционные текстуры считаются текстурами с одним элементом. Многоэлементные текстуры позволяют приложениям одновременно выполнять запись в несколько элементов текстуры из шейдера пикселей. Результатом следующего этапа подготовки к просмотру является то, что приложение может использовать один или несколько элементов как текстуру с одним элементом, то есть в качестве входных данных для шейдера пикселей. Эти дополнительные элементы можно рассматривать как временное хранилище для промежуточных результатов, которые будут использоваться в дальнейшем для передачи приложением.

Первое поколение оборудования, предоставляющего эту функцию, имеет следующие ограничения.

-   Все поверхностные текстуры с несколькими элементами будут выделены автоматически. Это ограничение устраняется путем того, что в нем рассматривается новый тип формата поверхности с чередованием нескольких каналов RGBA.
-   Все элементы текстуры с несколькими элементами могут иметь одинаковую битовую глубину. Это ограничение выражается именем новых форматов поверхностей.
-   Текстура с несколькими элементами не может быть основной или воспроизводимой. Иными словами, он должен быть только на экране. Это ограничение выражается перечислением в формате поверхности.
-   Не допускается дизеринг, Альфа-тестирование, фоггинг, смешение, точечная операция или маскирование. Обработка шейдера после построителя текстуры не выполняется, за исключением проверки z-теста и набора элементов.
-   Текстура не может быть mipmap. Создание цепочки MIP завершится ошибкой.
-   Один и тот же элемент нельзя задать в качестве текстуры в то же время, что и целевой объект прорисовки. Однако разные элементы одной и той же многоэлементной текстуры могут одновременно быть текстурой и целевыми объектами рендеринга.
-   Сглаживание не поддерживается.
-   Не удается отфильтровать поверхности текстуры с несколькими элементами, если они используются в качестве текстуры. Это ограничение можно проверить с помощью [**чеккдевицеформат**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdeviceformat).
-   Невозможно заблокировать поверхности текстуры с несколькими элементами.
-   Несколько многоэлементных текстурных поверхностей можно использовать одновременно, назначив каждую из них, как и обычные текстуры.
-   Поверхностные текстуры с несколькими элементами поддерживают преобразование гаммы из 2,2 в 1,0 для операции чтения, как и в случае с другими форматами текстуры.
-   Некоторые реализации не применяют маску выходной записи (D3DRS \_ колорвритинабле). Те, которые могут иметь независимые маски записи цвета. Это значение выражается с помощью нового бита возможностей. Количество доступных независимых цветовых масок записи будет равно максимальному числу элементов, которые поддерживает устройство.
-   [**Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) очищает все элементы текстуры с несколькими элементами, которая задается в качестве целевого объекта рендеринга.

Использование текстур с несколькими элементами выполняется следующим образом.

1.  Приложения поддерживают эту функцию путем проверки доступности форматов текстур с несколькими элементами.
2.  Приложение создает эти поверхности путем вызова [**креатетекстуре**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture).
3.  Приложение задает поверхность в качестве целевого объекта отрисовки с помощью вызова [**сетрендертаржет**](/windows/desktop/api) . Шейдер пикселей обеспечивает вывод на поверхности с помощью инструкции [MOV-PS](../direct3dhlsl/mov---ps.md) .
4.  [**Сеттекстуре**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) вызывается для установки поверхности текстуры с несколькими элементами на определенный этап. Как и в случае с другими текстурами, одну и ту же поверхность можно установить на несколько стадий одновременно.
5.  [**Сетсамплерстате**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setsamplerstate) вызывается для установки D3DSAMP \_ елементиндекс на соответствующий номер элемента в текстуре с несколькими элементами, из которой образцы образцов. Значение по умолчанию для этого состояния равно 0, что означает, что текстуры, не являющиеся многоэлементными, будут работать. Присвоение этому состоянию неверного числа приводит к неопределенному поведению, если текстура с несколькими элементами имеет ширину только два элемента, а в примере из четвертого элемента запрашивается выборка.

## <a name="api-support"></a>Поддержка API

Ниже приведена сводка элементов API, которые поддерживают многоэлементные текстуры.

-   Формат [D3DFMT \_ MULTI2 \_ ARGB8](d3dformat.md) Surface выражает характер формата с чередованием.
-   \_Состояние образца D3DSAMP елементиндекс указывает, какой индекс элемента использовать.
-   Следующие состояния отрисовки поддерживают многоэлементные текстуры:

    -   D3DRS \_ COLORWRITEENABLE1
    -   D3DRS \_ COLORWRITEENABLE2
    -   D3DRS \_ COLORWRITEENABLE3

    D3DRS \_ колорвритинабле применяется к нулевому целевому объекту отрисовки (или элементу).

-   Флаг [D3DPMISCCAPS \_ индепендентвритемаскс](d3dpmisccaps.md) указывает, что устройство поддерживает независимые маски записи для нескольких текстур элементов или нескольких целевых объектов рендеринга.

## <a name="related-topics"></a>См. также

<dl> <dt>

[Конвейер пикселей](pixel-pipeline.md)
</dt> </dl>

 

 
