---
description: Традиционные текстуры считаются текстурами с одним элементом.
ms.assetid: 8fe8da80-0879-413a-a7db-617d2f558b28
title: Многоэлементные текстуры (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 78a434d1e6c6a892c794551aa0caf34890f3def9
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "105691974"
---
# <a name="multiple-element-textures-direct3d-9"></a><span data-ttu-id="6dd1a-103">Многоэлементные текстуры (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="6dd1a-103">Multiple-element Textures (Direct3D 9)</span></span>

<span data-ttu-id="6dd1a-104">Традиционные текстуры считаются текстурами с одним элементом.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-104">Traditional textures are considered to be single-element textures.</span></span> <span data-ttu-id="6dd1a-105">Многоэлементные текстуры позволяют приложениям одновременно выполнять запись в несколько элементов текстуры из шейдера пикселей.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-105">Multiple-element textures enable applications to write simultaneously to multiple elements of a texture from the pixel shader.</span></span> <span data-ttu-id="6dd1a-106">Результатом следующего этапа подготовки к просмотру является то, что приложение может использовать один или несколько элементов как текстуру с одним элементом, то есть в качестве входных данных для шейдера пикселей.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-106">The result in the next rendering pass is that an application can use one or more of the elements as a single-element texture - that is, as inputs to the pixel shader.</span></span> <span data-ttu-id="6dd1a-107">Эти дополнительные элементы можно рассматривать как временное хранилище для промежуточных результатов, которые будут использоваться в дальнейшем для передачи приложением.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-107">These additional elements can be thought of as a temporary store for intermediate results that will be used in a later pass by the application.</span></span>

<span data-ttu-id="6dd1a-108">Первое поколение оборудования, предоставляющего эту функцию, имеет следующие ограничения.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-108">The first generation of hardware that exposes this feature has the following restrictions:</span></span>

-   <span data-ttu-id="6dd1a-109">Все поверхностные текстуры с несколькими элементами будут выделены автоматически.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-109">All multiple-element texture surfaces will be allocated automatically.</span></span> <span data-ttu-id="6dd1a-110">Это ограничение устраняется путем того, что в нем рассматривается новый тип формата поверхности с чередованием нескольких каналов RGBA.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-110">This limitation is addressed by treating this as a new type of surface format with multiple RGBA channels interleaved.</span></span>
-   <span data-ttu-id="6dd1a-111">Все элементы текстуры с несколькими элементами могут иметь одинаковую битовую глубину.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-111">All elements of the multiple element texture can have the same bit depth.</span></span> <span data-ttu-id="6dd1a-112">Это ограничение выражается именем новых форматов поверхностей.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-112">This limitation is expressed by the name of the new surface formats.</span></span>
-   <span data-ttu-id="6dd1a-113">Текстура с несколькими элементами не может быть основной или воспроизводимой.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-113">A multiple-element texture cannot be the primary/displayable.</span></span> <span data-ttu-id="6dd1a-114">Иными словами, он должен быть только на экране.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-114">In other words, it must be off-screen only.</span></span> <span data-ttu-id="6dd1a-115">Это ограничение выражается перечислением в формате поверхности.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-115">This limitation is expressed by the surface-format enumeration.</span></span>
-   <span data-ttu-id="6dd1a-116">Не допускается дизеринг, Альфа-тестирование, фоггинг, смешение, точечная операция или маскирование.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-116">No dithering, alpha test, fogging, blending, raster-op, or masking is allowed.</span></span> <span data-ttu-id="6dd1a-117">Обработка шейдера после построителя текстуры не выполняется, за исключением проверки z-теста и набора элементов.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-117">No post-pixel shader processing is done, except the z-test and stencil test.</span></span>
-   <span data-ttu-id="6dd1a-118">Текстура не может быть mipmap.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-118">The texture cannot be a mipmap.</span></span> <span data-ttu-id="6dd1a-119">Создание цепочки MIP завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-119">Creation of the mip chain will fail.</span></span>
-   <span data-ttu-id="6dd1a-120">Один и тот же элемент нельзя задать в качестве текстуры в то же время, что и целевой объект прорисовки.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-120">The same element cannot be set as a texture at the same time it is a render target.</span></span> <span data-ttu-id="6dd1a-121">Однако разные элементы одной и той же многоэлементной текстуры могут одновременно быть текстурой и целевыми объектами рендеринга.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-121">However, different elements of the same multiple-element texture surface can simultaneously be textures and render targets.</span></span>
-   <span data-ttu-id="6dd1a-122">Сглаживание не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-122">No antialiasing is supported.</span></span>
-   <span data-ttu-id="6dd1a-123">Не удается отфильтровать поверхности текстуры с несколькими элементами, если они используются в качестве текстуры.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-123">Multiple-element texture surfaces, when used as a texture, cannot be filtered.</span></span> <span data-ttu-id="6dd1a-124">Это ограничение можно проверить с помощью [**чеккдевицеформат**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdeviceformat).</span><span class="sxs-lookup"><span data-stu-id="6dd1a-124">This limitation can be verified using [**CheckDeviceFormat**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdeviceformat).</span></span>
-   <span data-ttu-id="6dd1a-125">Невозможно заблокировать поверхности текстуры с несколькими элементами.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-125">Multiple-element texture surfaces cannot be locked.</span></span>
-   <span data-ttu-id="6dd1a-126">Несколько многоэлементных текстурных поверхностей можно использовать одновременно, назначив каждую из них, как и обычные текстуры.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-126">More than one multiple-element texture surface can be used simultaneously by assigning each to various stages, just as with normal textures.</span></span>
-   <span data-ttu-id="6dd1a-127">Поверхностные текстуры с несколькими элементами поддерживают преобразование гаммы из 2,2 в 1,0 для операции чтения, как и в случае с другими форматами текстуры.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-127">Multiple-element texture surfaces support conversion of gamma from 2.2 to 1.0 conversion on a read operation, just as with other texture formats.</span></span>
-   <span data-ttu-id="6dd1a-128">Некоторые реализации не применяют маску выходной записи (D3DRS \_ колорвритинабле).</span><span class="sxs-lookup"><span data-stu-id="6dd1a-128">Some of the implementations do not apply the output write mask (D3DRS\_COLORWRITEENABLE).</span></span> <span data-ttu-id="6dd1a-129">Те, которые могут иметь независимые маски записи цвета.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-129">Those that can have independent color write masks.</span></span> <span data-ttu-id="6dd1a-130">Это значение выражается с помощью нового бита возможностей.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-130">This is expressed using a new capability bit.</span></span> <span data-ttu-id="6dd1a-131">Количество доступных независимых цветовых масок записи будет равно максимальному числу элементов, которые поддерживает устройство.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-131">The number of independent color write masks available will be equal to the maximum number of elements of which the device is capable.</span></span>
-   <span data-ttu-id="6dd1a-132">[**Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) очищает все элементы текстуры с несколькими элементами, которая задается в качестве целевого объекта рендеринга.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-132">[**Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) clears all elements of the multiple-element texture which is set as the render target.</span></span>

<span data-ttu-id="6dd1a-133">Использование текстур с несколькими элементами выполняется следующим образом.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-133">The usage of multiple-element textures follows these steps:</span></span>

1.  <span data-ttu-id="6dd1a-134">Приложения поддерживают эту функцию путем проверки доступности форматов текстур с несколькими элементами.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-134">Applications discover support for this feature by checking for the availability of multiple-element texture formats.</span></span>
2.  <span data-ttu-id="6dd1a-135">Приложение создает эти поверхности путем вызова [**креатетекстуре**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture).</span><span class="sxs-lookup"><span data-stu-id="6dd1a-135">The application creates these surfaces by calling [**CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture).</span></span>
3.  <span data-ttu-id="6dd1a-136">Приложение задает поверхность в качестве целевого объекта отрисовки с помощью вызова [**сетрендертаржет**](/windows/desktop/api) .</span><span class="sxs-lookup"><span data-stu-id="6dd1a-136">The application sets the surface as a render target using the [**SetRenderTarget**](/windows/desktop/api) call.</span></span> <span data-ttu-id="6dd1a-137">Шейдер пикселей обеспечивает вывод на поверхности с помощью инструкции [MOV-PS](../direct3dhlsl/mov---ps.md) .</span><span class="sxs-lookup"><span data-stu-id="6dd1a-137">The pixel shader provides output to the surfaces using the [mov - ps](../direct3dhlsl/mov---ps.md) instruction.</span></span>
4.  <span data-ttu-id="6dd1a-138">[**Сеттекстуре**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) вызывается для установки поверхности текстуры с несколькими элементами на определенный этап.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-138">[**SetTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) is called to set a multiple-element texture surface to a particular stage.</span></span> <span data-ttu-id="6dd1a-139">Как и в случае с другими текстурами, одну и ту же поверхность можно установить на несколько стадий одновременно.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-139">As with other textures, the same surface is allowed to be set to multiple stages at once.</span></span>
5.  <span data-ttu-id="6dd1a-140">[**Сетсамплерстате**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setsamplerstate) вызывается для установки D3DSAMP \_ елементиндекс на соответствующий номер элемента в текстуре с несколькими элементами, из которой образцы образцов.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-140">[**SetSamplerState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setsamplerstate) is called to set D3DSAMP\_ELEMENTINDEX to the appropriate element number in the multiple-element texture from which the sampler samples.</span></span> <span data-ttu-id="6dd1a-141">Значение по умолчанию для этого состояния равно 0, что означает, что текстуры, не являющиеся многоэлементными, будут работать.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-141">Default value for this state is 0, which means non-multiple-element textures will work.</span></span> <span data-ttu-id="6dd1a-142">Присвоение этому состоянию неверного числа приводит к неопределенному поведению, если текстура с несколькими элементами имеет ширину только два элемента, а в примере из четвертого элемента запрашивается выборка.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-142">Setting this state to an inappropriate number results in an undefined behavior - if the multiple-element texture is only two elements wide but the sampler is asked to sample from the fourth element, for example.</span></span>

## <a name="api-support"></a><span data-ttu-id="6dd1a-143">Поддержка API</span><span class="sxs-lookup"><span data-stu-id="6dd1a-143">API Support</span></span>

<span data-ttu-id="6dd1a-144">Ниже приведена сводка элементов API, которые поддерживают многоэлементные текстуры.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-144">The following is a summary of the API elements that support multiple-element textures:</span></span>

-   <span data-ttu-id="6dd1a-145">Формат [D3DFMT \_ MULTI2 \_ ARGB8](d3dformat.md) Surface выражает характер формата с чередованием.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-145">The [D3DFMT\_MULTI2\_ARGB8](d3dformat.md) surface format expresses the interleaved nature of the format.</span></span>
-   <span data-ttu-id="6dd1a-146">\_Состояние образца D3DSAMP елементиндекс указывает, какой индекс элемента использовать.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-146">The D3DSAMP\_ELEMENTINDEX sampler state indicates which element index to use.</span></span>
-   <span data-ttu-id="6dd1a-147">Следующие состояния отрисовки поддерживают многоэлементные текстуры:</span><span class="sxs-lookup"><span data-stu-id="6dd1a-147">The following render states support multiple-element textures:</span></span>

    -   <span data-ttu-id="6dd1a-148">D3DRS \_ COLORWRITEENABLE1</span><span class="sxs-lookup"><span data-stu-id="6dd1a-148">D3DRS\_COLORWRITEENABLE1</span></span>
    -   <span data-ttu-id="6dd1a-149">D3DRS \_ COLORWRITEENABLE2</span><span class="sxs-lookup"><span data-stu-id="6dd1a-149">D3DRS\_COLORWRITEENABLE2</span></span>
    -   <span data-ttu-id="6dd1a-150">D3DRS \_ COLORWRITEENABLE3</span><span class="sxs-lookup"><span data-stu-id="6dd1a-150">D3DRS\_COLORWRITEENABLE3</span></span>

    <span data-ttu-id="6dd1a-151">D3DRS \_ колорвритинабле применяется к нулевому целевому объекту отрисовки (или элементу).</span><span class="sxs-lookup"><span data-stu-id="6dd1a-151">D3DRS\_COLORWRITEENABLE applies to render target (or element) zero.</span></span>

-   <span data-ttu-id="6dd1a-152">Флаг [D3DPMISCCAPS \_ индепендентвритемаскс](d3dpmisccaps.md) указывает, что устройство поддерживает независимые маски записи для нескольких текстур элементов или нескольких целевых объектов рендеринга.</span><span class="sxs-lookup"><span data-stu-id="6dd1a-152">The [D3DPMISCCAPS\_INDEPENDENTWRITEMASKS](d3dpmisccaps.md) flag indicates that the device supports independent write masks for multiple element textures or multiple render targets.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6dd1a-153">См. также</span><span class="sxs-lookup"><span data-stu-id="6dd1a-153">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6dd1a-154">Конвейер пикселей</span><span class="sxs-lookup"><span data-stu-id="6dd1a-154">Pixel Pipeline</span></span>](pixel-pipeline.md)
</dt> </dl>

 

 
