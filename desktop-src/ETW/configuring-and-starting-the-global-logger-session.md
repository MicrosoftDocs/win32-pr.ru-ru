---
description: Сеанс трассировки глобального журнала событий регистрирует события, происходящие на ранних этапах процесса загрузки операционной системы.
ms.assetid: 1462bbef-ef32-4053-9930-5b4a0ab46b47
title: Настройка и запуск сеанса глобального журнала
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8692e1f7321acc163e48cda7e3323f3d24adc1c0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "104985721"
---
# <a name="configuring-and-starting-the-global-logger-session"></a><span data-ttu-id="39223-103">Настройка и запуск сеанса глобального журнала</span><span class="sxs-lookup"><span data-stu-id="39223-103">Configuring and Starting the Global Logger Session</span></span>

<span data-ttu-id="39223-104">Сеанс трассировки глобального журнала событий регистрирует события, происходящие на ранних этапах процесса загрузки операционной системы.</span><span class="sxs-lookup"><span data-stu-id="39223-104">The Global Logger event tracing session records events that occur early in the operating system boot process.</span></span> <span data-ttu-id="39223-105">Приложения и драйверы устройств могут использовать глобальный сеанс ведения журнала для записи трассировок перед входом пользователя в систему.</span><span class="sxs-lookup"><span data-stu-id="39223-105">Applications and device drivers can use the Global Logger session to capture traces before the user logs in.</span></span> <span data-ttu-id="39223-106">Обратите внимание, что некоторые драйверы устройств, например драйверы дисковых устройств, не загружаются при запуске глобального сеанса ведения журнала.</span><span class="sxs-lookup"><span data-stu-id="39223-106">Note that some device drivers, such as disk device drivers, are not loaded at the time the Global Logger session begins.</span></span>

> [!Note]  
> <span data-ttu-id="39223-107">Если вы создаете глобальный сеанс ведения журнала в Windows Vista, вместо него следует рассмотреть возможность создания [сеанса авторегистратора](configuring-and-starting-an-autologger-session.md) .</span><span class="sxs-lookup"><span data-stu-id="39223-107">If you are creating a Global Logger session on Windows Vista, you should consider creating an [AutoLogger session](configuring-and-starting-an-autologger-session.md) instead.</span></span>

 

<span data-ttu-id="39223-108">Для настройки сеанса глобального журнала используется реестр.</span><span class="sxs-lookup"><span data-stu-id="39223-108">You use the registry to configure the Global Logger session.</span></span> <span data-ttu-id="39223-109">Добавьте ключ **глобаллогжер** в следующий раздел реестра, если он еще не указан:</span><span class="sxs-lookup"><span data-stu-id="39223-109">Add the **GlobalLogger** key to the following registry key, if it is not already present:</span></span>

```
HKEY_LOCAL_MACHINE
   \SYSTEM
      \CurrentControlSet
         \Control
            \WMI
```

<span data-ttu-id="39223-110">В следующей таблице описаны значения, которые можно определить для ключа **глобаллогжер** .</span><span class="sxs-lookup"><span data-stu-id="39223-110">The following table describes the values that you can define for the **GlobalLogger** key.</span></span> <span data-ttu-id="39223-111">Для задания этих значений реестра необходимо иметь права администратора.</span><span class="sxs-lookup"><span data-stu-id="39223-111">You must have administrator privileges to specify these registry values.</span></span> <span data-ttu-id="39223-112">Значения реестра влияют на всех поставщиков, которые регистрируют события в сеансе глобального журнала.</span><span class="sxs-lookup"><span data-stu-id="39223-112">The registry values affect all providers that log events to the Global Logger session.</span></span> <span data-ttu-id="39223-113">**Начальное** значение — это единственное значение, необходимое для запуска глобального сеанса ведения журнала. все остальные значения имеют параметры по умолчанию, которые используются, если значение отсутствует в реестре.</span><span class="sxs-lookup"><span data-stu-id="39223-113">The **Start** value is the only value required to start the Global Logger session; all other values have default settings that are used if the value is not present in the registry.</span></span> <span data-ttu-id="39223-114">Как правило, следует использовать значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="39223-114">Typically, you should use the default values.</span></span> <span data-ttu-id="39223-115">Если указано значение, которое ETW не поддерживает, ETW переопределит это значение.</span><span class="sxs-lookup"><span data-stu-id="39223-115">If you specify a value that ETW cannot support, ETW will override the value.</span></span>



<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="39223-116">Значение</span><span class="sxs-lookup"><span data-stu-id="39223-116">Value</span></span></th>
<th><span data-ttu-id="39223-117">Тип</span><span class="sxs-lookup"><span data-stu-id="39223-117">Type</span></span></th>
<th><span data-ttu-id="39223-118">Описание</span><span class="sxs-lookup"><span data-stu-id="39223-118">Description</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="39223-119"><strong>Запуск</strong></span><span class="sxs-lookup"><span data-stu-id="39223-119"><strong>Start</strong></span></span></td>
<td><span data-ttu-id="39223-120"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="39223-120"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="39223-121">Присвойте этому параметру значение 1 (включено), чтобы запустить глобальный сеанс ведения журнала при следующем запуске системы.</span><span class="sxs-lookup"><span data-stu-id="39223-121">Set this value to 1 (on) to start the Global Logger session the next time the system starts.</span></span> <span data-ttu-id="39223-122">Чтобы предотвратить запуск сеанса, присвойте этому параметру значение 0 (выкл.).</span><span class="sxs-lookup"><span data-stu-id="39223-122">To stop the session from starting, set this value to 0 (off).</span></span> <br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="39223-123"><strong>BufferSize</strong></span><span class="sxs-lookup"><span data-stu-id="39223-123"><strong>BufferSize</strong></span></span></td>
<td><span data-ttu-id="39223-124"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="39223-124"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="39223-125">Размер каждого буфера в килобайтах.</span><span class="sxs-lookup"><span data-stu-id="39223-125">The size of each buffer, in kilobytes.</span></span> <span data-ttu-id="39223-126">Это значение должно быть меньше одного мегабайта.</span><span class="sxs-lookup"><span data-stu-id="39223-126">This value should be less than one megabyte.</span></span> <span data-ttu-id="39223-127">Для вычисления этого значения ETW использует размер физической памяти.</span><span class="sxs-lookup"><span data-stu-id="39223-127">ETW uses the size of physical memory to calculate this value.</span></span> <br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="39223-128"><strong>клокктипе</strong></span><span class="sxs-lookup"><span data-stu-id="39223-128"><strong>ClockType</strong></span></span></td>
<td><span data-ttu-id="39223-129"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="39223-129"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="39223-130">Таймер, используемый при записи отметки времени для каждого события.</span><span class="sxs-lookup"><span data-stu-id="39223-130">The timer to use when logging the time stamp for each event.</span></span>
<ul>
<li><span data-ttu-id="39223-131">1 = значение счетчика производительности (высокое разрешение)</span><span class="sxs-lookup"><span data-stu-id="39223-131">1 = Performance counter value (high resolution)</span></span></li>
<li><span data-ttu-id="39223-132">2 = системный таймер</span><span class="sxs-lookup"><span data-stu-id="39223-132">2 = System timer</span></span></li>
<li><span data-ttu-id="39223-133">3 = счетчик циклов ЦП</span><span class="sxs-lookup"><span data-stu-id="39223-133">3 = CPU cycle counter</span></span></li>
</ul>
<span data-ttu-id="39223-134">Описание каждого типа часов см. в описании элемента <strong>ClientContext</strong> в <a href="wnode-header.md"><strong>WNODE_HEADER</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="39223-134">For a description of each clock type, see the <strong>ClientContext</strong> member of <a href="wnode-header.md"><strong>WNODE_HEADER</strong></a>.</span></span><br/> <span data-ttu-id="39223-135">Значение по умолчанию — 1 (значение счетчика производительности) в Windows Vista и более поздних версиях.</span><span class="sxs-lookup"><span data-stu-id="39223-135">The default value is 1 (performance counter value) on Windows Vista and later.</span></span> <span data-ttu-id="39223-136">До Windows Vista значение по умолчанию — 2 (системный таймер).</span><span class="sxs-lookup"><span data-stu-id="39223-136">Prior to Windows Vista, the default value is 2 (system timer).</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="39223-137"><strong>енаблекернелфлагс</strong></span><span class="sxs-lookup"><span data-stu-id="39223-137"><strong>EnableKernelFlags</strong></span></span></td>
<td><span data-ttu-id="39223-138"><strong>REG_BINARY</strong></span><span class="sxs-lookup"><span data-stu-id="39223-138"><strong>REG_BINARY</strong></span></span></td>
<td><span data-ttu-id="39223-139">Используйте это значение для включения одного или нескольких поставщиков ядра.</span><span class="sxs-lookup"><span data-stu-id="39223-139">Use this value to enable one or more kernel providers.</span></span> <span data-ttu-id="39223-140">При включении поставщиков ядра глобальный сеанс ведения журнала будет переименован в средство ведения журнала ядра NT при запуске.</span><span class="sxs-lookup"><span data-stu-id="39223-140">If you enable kernel providers, the Global Logger session will rename itself to NT Kernel Logger when it starts.</span></span> <span data-ttu-id="39223-141">Возможные значения см. в разделе <strong>енаблефлагс</strong> элемента <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="39223-141">For possible values, see the <strong>EnableFlags</strong> member of <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES</strong></a>.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="39223-142"><strong>филекаунтер</strong></span><span class="sxs-lookup"><span data-stu-id="39223-142"><strong>FileCounter</strong></span></span></td>
<td><span data-ttu-id="39223-143"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="39223-143"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="39223-144">Число файлов журнала трассировки событий, создаваемых сеансами глобального журнала.</span><span class="sxs-lookup"><span data-stu-id="39223-144">The number of event trace log files generated by Global Logger sessions.</span></span> <span data-ttu-id="39223-145">Система увеличивает это значение до тех пор, пока не достигнет значения <strong>филемакс</strong>.</span><span class="sxs-lookup"><span data-stu-id="39223-145">The system increments this value until it reaches the value of <strong>FileMax</strong>.</span></span> <span data-ttu-id="39223-146">Затем он сбрасывает значение в 0.</span><span class="sxs-lookup"><span data-stu-id="39223-146">Then, it resets the value to 0.</span></span> <span data-ttu-id="39223-147">Этот счетчик не даст системе перезаписывать файл журнала трассировки глобального регистратора.</span><span class="sxs-lookup"><span data-stu-id="39223-147">This counter prevents the system from overwriting a Global Logger trace log file.</span></span> <br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="39223-148"><strong>филемакс</strong></span><span class="sxs-lookup"><span data-stu-id="39223-148"><strong>FileMax</strong></span></span></td>
<td><span data-ttu-id="39223-149"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="39223-149"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="39223-150">Максимальное число файлов журнала трассировки событий, разрешенных в системе.</span><span class="sxs-lookup"><span data-stu-id="39223-150">The maximum number of event trace log files permitted on the system.</span></span> <span data-ttu-id="39223-151">Когда количество журналов трассировки достигает заданного максимума, система начинает перезаписывать журналы, начиная с самого старого.</span><span class="sxs-lookup"><span data-stu-id="39223-151">When the number of trace logs reaches the specified maximum, the system begins to overwrite the logs, beginning with the oldest.</span></span> <br/> <span data-ttu-id="39223-152">Если файл журнала, указанный в файле <strong>filename</strong> , существует, ETW добавляет значение <strong>филекаунтер</strong> к имени файла.</span><span class="sxs-lookup"><span data-stu-id="39223-152">If the log file specified in <strong>FileName</strong> exists, ETW appends the <strong>FileCounter</strong> value to the file name.</span></span> <span data-ttu-id="39223-153">Например, если используется имя файла журнала по умолчанию, то это форма%SystemRoot%\System32\LogFiles\WMI\GlobalLogger.etl.NNNN.</span><span class="sxs-lookup"><span data-stu-id="39223-153">For example, if the default log file name is used, the form is %SystemRoot%\System32\LogFiles\WMI\GlobalLogger.etl.NNNN.</span></span> <br/> <span data-ttu-id="39223-154">Значение по умолчанию равно 0, то есть не имеет максимального значения.</span><span class="sxs-lookup"><span data-stu-id="39223-154">The default value is 0, meaning that there is no maximum.</span></span> <br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="39223-155"><strong>FileName</strong></span><span class="sxs-lookup"><span data-stu-id="39223-155"><strong>FileName</strong></span></span></td>
<td><span data-ttu-id="39223-156"><strong>REG_SZ</strong></span><span class="sxs-lookup"><span data-stu-id="39223-156"><strong>REG_SZ</strong></span></span></td>
<td><span data-ttu-id="39223-157">Полный путь к файлу журнала.</span><span class="sxs-lookup"><span data-stu-id="39223-157">Fully qualified path of the log file.</span></span> <span data-ttu-id="39223-158">Путь к этому файлу должен существовать.</span><span class="sxs-lookup"><span data-stu-id="39223-158">The path to this file must exist.</span></span> <span data-ttu-id="39223-159">Файл журнала является последовательным файлом журнала.</span><span class="sxs-lookup"><span data-stu-id="39223-159">The log file is a sequential log file.</span></span> <span data-ttu-id="39223-160">Обратите внимание, что все поставщики, записывающие события в сеанс глобального журнала, записывают события в этот файл журнала.</span><span class="sxs-lookup"><span data-stu-id="39223-160">Note that all providers writing events to the Global Logger session write events to this log file.</span></span> <span data-ttu-id="39223-161">Длина пути ограничена 1024 символами. Если <strong>имя файла</strong> не указано, события записываются в%systemroot%\System32\LogFiles\WMI\GlobalLogger.ETL..</span><span class="sxs-lookup"><span data-stu-id="39223-161">The path is limited to 1024 characters.If <strong>FileName</strong> is not specified, events are written to %SystemRoot%\System32\LogFiles\WMI\GlobalLogger.etl.</span></span> <span data-ttu-id="39223-162"><strong>До Windows Vista:</strong> Файл по умолчанию —%SystemRoot%\System32\LogFiles\WMI\Trace.log.</span><span class="sxs-lookup"><span data-stu-id="39223-162"><strong>Prior to Windows Vista:</strong> The default file is %SystemRoot%\System32\LogFiles\WMI\Trace.log.</span></span><br/> <br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="39223-163"><strong>флуштимер</strong></span><span class="sxs-lookup"><span data-stu-id="39223-163"><strong>FlushTimer</strong></span></span></td>
<td><span data-ttu-id="39223-164"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="39223-164"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="39223-165">Частота принудительного сброса буферов трассировки в секундах.</span><span class="sxs-lookup"><span data-stu-id="39223-165">How often, in seconds, the trace buffers are forcibly flushed.</span></span> <span data-ttu-id="39223-166">Минимальное время записи на диск — 1 секунда.</span><span class="sxs-lookup"><span data-stu-id="39223-166">The minimum flush time is 1 second.</span></span> <span data-ttu-id="39223-167">Этот принудительный сброс находится в дополнение к автоматическому сбросу, который происходит при заполнении буфера и остановке сеанса трассировки.</span><span class="sxs-lookup"><span data-stu-id="39223-167">This forced flush is in addition to the automatic flush that occurs when a buffer is full and when the trace session stops.</span></span> <br/> <span data-ttu-id="39223-168">В случае средства ведения журнала в реальном времени значение 0 (значение по умолчанию) означает, что время очистки будет равно 1 секунде.</span><span class="sxs-lookup"><span data-stu-id="39223-168">For the case of a real-time logger, a value of zero (the default value) means that the flush time will be set to 1 second.</span></span> <span data-ttu-id="39223-169">Средство ведения журнала в режиме реального времени используется, когда <strong>логфилемоде</strong> имеет значение <strong>EVENT_TRACE_REAL_TIME_MODE</strong>.</span><span class="sxs-lookup"><span data-stu-id="39223-169">A real-time logger is when <strong>LogFileMode</strong> is set to <strong>EVENT_TRACE_REAL_TIME_MODE</strong>.</span></span><br/> <span data-ttu-id="39223-170">Значение по умолчанию — 0.</span><span class="sxs-lookup"><span data-stu-id="39223-170">The default value is 0.</span></span> <span data-ttu-id="39223-171">По умолчанию буферы сбрасываются только в том случае, если они заполнены.</span><span class="sxs-lookup"><span data-stu-id="39223-171">By default, buffers are flushed only when they are full.</span></span> <br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="39223-172"><strong>логфилемоде</strong></span><span class="sxs-lookup"><span data-stu-id="39223-172"><strong>LogFileMode</strong></span></span></td>
<td><span data-ttu-id="39223-173"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="39223-173"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="39223-174">Задает параметры сеанса журнала.</span><span class="sxs-lookup"><span data-stu-id="39223-174">Specifies log session options.</span></span> <span data-ttu-id="39223-175">Значения см. в разделе <a href="logging-mode-constants.md">константы режима ведения журнала</a>.</span><span class="sxs-lookup"><span data-stu-id="39223-175">For values, see <a href="logging-mode-constants.md">Logging Mode Constants</a>.</span></span> <span data-ttu-id="39223-176">Эти значения поддерживаются в Windows Vista и более поздних версиях.</span><span class="sxs-lookup"><span data-stu-id="39223-176">This values is supported on Windows Vista and later.</span></span> <br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="39223-177"><strong>MaximumBuffers</strong></span><span class="sxs-lookup"><span data-stu-id="39223-177"><strong>MaximumBuffers</strong></span></span></td>
<td><span data-ttu-id="39223-178"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="39223-178"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="39223-179">Максимальное количество выделяемых буферов.</span><span class="sxs-lookup"><span data-stu-id="39223-179">The maximum number of buffers to allocate.</span></span> <span data-ttu-id="39223-180">Обычно это значение является минимальным числом буферов плюс двадцать.</span><span class="sxs-lookup"><span data-stu-id="39223-180">Typically, this value is the minimum number of buffers plus twenty.</span></span> <span data-ttu-id="39223-181">Для вычисления этого значения ETW использует размер буфера и размер физической памяти.</span><span class="sxs-lookup"><span data-stu-id="39223-181">ETW uses the buffer size and the size of physical memory to calculate this value.</span></span> <span data-ttu-id="39223-182">Это значение должно быть больше или равно значению для <strong>MinimumBuffers</strong>.</span><span class="sxs-lookup"><span data-stu-id="39223-182">This value must be greater than or equal to the value for <strong>MinimumBuffers</strong>.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="39223-183"><strong>MaxFileSize</strong></span><span class="sxs-lookup"><span data-stu-id="39223-183"><strong>MaxFileSize</strong></span></span></td>
<td><span data-ttu-id="39223-184"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="39223-184"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="39223-185">Максимальный размер файла журнала трассировки событий (в мегабайтах).</span><span class="sxs-lookup"><span data-stu-id="39223-185">The maximum size, in megabytes, of the event trace log file.</span></span> <span data-ttu-id="39223-186">По умолчанию максимальный размер файла отсутствует.</span><span class="sxs-lookup"><span data-stu-id="39223-186">By default, there is no maximum file size.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="39223-187"><strong>MinimumBuffers</strong></span><span class="sxs-lookup"><span data-stu-id="39223-187"><strong>MinimumBuffers</strong></span></span></td>
<td><span data-ttu-id="39223-188"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="39223-188"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="39223-189">Минимальное число буферов, выделяемых при запуске глобального сеанса ведения журнала.</span><span class="sxs-lookup"><span data-stu-id="39223-189">The minimum number of buffers to allocate when the Global Logger session starts.</span></span> <span data-ttu-id="39223-190">Минимальное число буферов, которые можно указать, — два буфера на процессор.</span><span class="sxs-lookup"><span data-stu-id="39223-190">The minimum number of buffers that you can specify is two buffers per processor.</span></span> <span data-ttu-id="39223-191">Например, на компьютере с одним процессором минимальное число буферов равно двум.</span><span class="sxs-lookup"><span data-stu-id="39223-191">For example, on a single processor computer, the minimum number of buffers is two.</span></span> <br/> <span data-ttu-id="39223-192">Значение по умолчанию в системе с одним процессором — 0x3.</span><span class="sxs-lookup"><span data-stu-id="39223-192">The default value on a single-processor system is 0x3.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="39223-193"><strong>Состояние</strong></span><span class="sxs-lookup"><span data-stu-id="39223-193"><strong>Status</strong></span></span></td>
<td><span data-ttu-id="39223-194"><strong>REG_DWORD</strong></span><span class="sxs-lookup"><span data-stu-id="39223-194"><strong>REG_DWORD</strong></span></span></td>
<td><span data-ttu-id="39223-195">Состояние запуска глобального средства ведения журнала.</span><span class="sxs-lookup"><span data-stu-id="39223-195">The startup status of the Global Logger.</span></span> <span data-ttu-id="39223-196">Если не удалось запустить глобальное средство ведения журнала, значением этого ключа является соответствующий код ошибки Win32.</span><span class="sxs-lookup"><span data-stu-id="39223-196">If the Global Logger failed to start, the value of this key is the appropriate Win32 error code.</span></span> <span data-ttu-id="39223-197">Если глобальное средство ведения журнала успешно запущено, значение этого параметра — ERROR_SUCCESS (0).</span><span class="sxs-lookup"><span data-stu-id="39223-197">If the Global Logger successfully started, the value of this key is ERROR_SUCCESS (0).</span></span><br/></td>
</tr>
</tbody>
</table>



 

<span data-ttu-id="39223-198">После изменения реестра и перезапуска компьютера глобальный сеанс ведения журнала запускается автоматически и используется так же, как любой другой сеанс с одним исключением: \_ \_ \_ для ссылки на глобальный сеанс ведения журнала используется идентификационный номер глобального средства ведения журнала WMI (определенный в вмистр. h).</span><span class="sxs-lookup"><span data-stu-id="39223-198">After the registry has been modified and the computer restarted, the Global Logger session starts automatically and is used like any other session with one exception: You use the WMI\_GLOBAL\_LOGGER\_ID constant handle (defined in Wmistr.h) to reference the Global Logger session.</span></span> <span data-ttu-id="39223-199">Эту константу можно использовать в качестве аргумента для любой функции трассировки событий, принимающей обработчик сеанса.</span><span class="sxs-lookup"><span data-stu-id="39223-199">This constant may be used as an argument to any event tracing function that accepts a session handle.</span></span> <span data-ttu-id="39223-200">В функциях, которые принимают имя сеанса, используйте глобальное \_ имя средства ведения журнала \_ .</span><span class="sxs-lookup"><span data-stu-id="39223-200">In functions that accept a session name, use GLOBAL\_LOGGER\_NAME.</span></span>

<span data-ttu-id="39223-201">Глобальный контроллер ведения журнала не вызывает функцию [**енаблетраце**](/windows/win32/api/evntrace/nf-evntrace-enabletrace) для включения поставщиков.</span><span class="sxs-lookup"><span data-stu-id="39223-201">The Global Logger controller does not call the [**EnableTrace**](/windows/win32/api/evntrace/nf-evntrace-enabletrace) function to enable providers.</span></span> <span data-ttu-id="39223-202">Поставщик отвечает за определение того, запущен ли глобальный сеанс ведения журнала, а затем включает сам его.</span><span class="sxs-lookup"><span data-stu-id="39223-202">The provider is responsible for determining if the Global Logger session is started and then enabling itself.</span></span>

<span data-ttu-id="39223-203">Чтобы определить, запущен ли глобальный сеанс ведения журнала, можно вызвать функцию [**контролтраце**](/windows/win32/api/evntrace/nf-evntrace-controltracea) , установив для *сессионхандле* \_ \_ идентификатор глобального регистратора WMI \_ и *контролкоде* в **\_ \_ управляющий \_ запрос трассировки событий**.</span><span class="sxs-lookup"><span data-stu-id="39223-203">To determine if the Global Logger session is started, you can call the [**ControlTrace**](/windows/win32/api/evntrace/nf-evntrace-controltracea) function, setting *SessionHandle* to WMI\_GLOBAL\_LOGGER\_ID and *ControlCode* to **EVENT\_TRACE\_CONTROL\_QUERY**.</span></span> <span data-ttu-id="39223-204">Если вызов **контролтраце** успешно выполнен, то существует глобальный сеанс регистратора, и поставщик может включить себя и регистрировать события в глобальном сеансе ведения журнала (функция **контролтраце** возвращает экземпляр WMI об ошибке, \_ \_ \_ не \_ найденный, если глобальное средство ведения журнала неактивно).</span><span class="sxs-lookup"><span data-stu-id="39223-204">If the **ControlTrace** call is successful, the Global Logger session exists and the provider can enable itself and log events to the Global Logger session (the **ControlTrace** function returns ERROR\_WMI\_INSTANCE\_NOT\_FOUND if the Global Logger is not active).</span></span>

<span data-ttu-id="39223-205">Как правило, контроллер отвечает за передачу флагов и уровней включения поставщику, когда он включает поставщик, но поскольку глобальный контроллер ведения журнала не включает поставщик, ответственность за передачу этих сведений в себя при необходимости несет поставщик.</span><span class="sxs-lookup"><span data-stu-id="39223-205">Typically, the controller is responsible for passing the enable flags and level to the provider when it enables the provider, but because the Global Logger controller does not enable the provider, it is the provider's responsibility to pass this information to itself, if needed.</span></span>

<span data-ttu-id="39223-206">Глобальный сеанс ведения журнала — это ограниченный ресурс, который следует использовать с осторожностью.</span><span class="sxs-lookup"><span data-stu-id="39223-206">The Global Logger session is a limited resource and should be used sparingly.</span></span> <span data-ttu-id="39223-207">Службы, которые хотят собирать информацию во время процесса загрузки, должны рассмотреть возможность добавления логики контроллера к себе вместо использования глобального сеанса ведения журнала.</span><span class="sxs-lookup"><span data-stu-id="39223-207">Services that want to capture information during the boot process should consider adding controller logic to itself instead of using the Global Logger session.</span></span>

<span data-ttu-id="39223-208">Дополнительные сведения о запуске сеанса трассировки событий см. в разделе [Настройка и запуск сеанса трассировки событий](configuring-and-starting-an-event-tracing-session.md).</span><span class="sxs-lookup"><span data-stu-id="39223-208">For details on starting an event tracing session, see [Configuring and Starting an Event Tracing Session](configuring-and-starting-an-event-tracing-session.md).</span></span>

<span data-ttu-id="39223-209">Дополнительные сведения о запуске закрытого сеанса ведения журнала см. в разделе [Настройка и запуск закрытого сеанса ведения журнала](configuring-and-starting-a-private-logger-session.md).</span><span class="sxs-lookup"><span data-stu-id="39223-209">For details on starting a private logger session, see [Configuring and Starting a Private Logger Session](configuring-and-starting-a-private-logger-session.md).</span></span>

<span data-ttu-id="39223-210">Дополнительные сведения о запуске сеанса ведения журнала ядра NT см. в разделе [Настройка и запуск сеанса ведения журнала ядра NT](configuring-and-starting-the-nt-kernel-logger-session.md).</span><span class="sxs-lookup"><span data-stu-id="39223-210">For details on starting an NT Kernel Logger session, see [Configuring and Starting the NT Kernel Logger Session](configuring-and-starting-the-nt-kernel-logger-session.md).</span></span>

