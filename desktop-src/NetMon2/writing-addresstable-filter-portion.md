---
description: Фильтр адресов уведомляет драйвер сетевой монитор, чтобы принимать кадры с одним из множества указанных типов MAC-адресов (Ethernet, Token Ring и FDDI).
ms.assetid: 23a38f49-2d63-4fc8-8113-29143493359c
title: Запись части фильтра АДДРЕССТАБЛЕ
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: efbf0a18f8004ea4c38607d6c1c7b8fa741315b41fefe5b4d31b103167d415eb
ms.sourcegitcommit: e6600f550f79bddfe58bd4696ac50dd52cb03d7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/11/2021
ms.locfileid: "120128794"
---
# <a name="writing-addresstable-filter-portion"></a>Запись части фильтра АДДРЕССТАБЛЕ

Фильтр адресов уведомляет драйвер сетевой монитор, чтобы принимать кадры с одним из множества указанных типов MAC-адресов (Ethernet, Token Ring и FDDI). Можно указать не более восьми пар адресов. В паре адресов можно указать источник, назначение, оба значения или ни одного.

Часть адреса фильтра состоит из двух структур: [**аддресстабле**](addresstable.md) и [**аддресспаир**](addresspair.md).

Если не указать адреса, то все кадры будут проходить фильтр адресов. Однако если указать какие бы то ни было адреса, то будут переданы только те кадры, которые прошли данный фильтр адресов.

Создание фильтра адресов включает в себя выделение структуры [**аддресстабле**](addresstable.md) и заполнение элементов структуры [**аддресспаир**](addresspair.md) .

**Построение части адреса фильтра записи**

1.  Используйте флаг **каптурефилтер \_ flags \_ Local \_ only** структуры [**каптурефилтер**](capturefilter.md) , чтобы ограничить захват трафика от локального компьютера.

    Установка этого флага не приводит к установке сетевого адаптера в неизбирательный режим. файл записи будет записывать только локальный трафик.

2.  Используйте следующий пример кода для определения структуры [**аддресстабле**](addresstable.md) :

    ``` syntax
    typedef struct _ADDRESSTABLE
    {
        DWORD           nAddressPairs;
        DWORD           nNonMacAddressPairs;
        ADDRESSPAIR     AddressPair[MAX_ADDRESS_PAIRS];
    } ADDRESSTABLE;

    typedef ADDRESSTABLE *LPADDRESSTABLE;
     
    typedef struct _ADDRESSPAIR
    {
        WORD        AddressFlags;
        WORD        NalReserved;
        ADDRESS     DstAddress;
        ADDRESS     SrcAddress;
    } ADDRESSPAIR;

    typedef ADDRESSPAIR *LPADDRESSPAIR;
    ```

3.  Используйте сведения, перечисленные в следующей таблице, чтобы выбрать тип флага [**аддресспаир**](addresspair.md) . 

    | Флаг                             | Значение                                                                               |
    |----------------------------------|---------------------------------------------------------------------------------------|
    | \_Флаги адреса \_ соответствуют \_ летнему времени       | Соответствует адресу назначения.                                                        |
    | \_Флаги адреса \_ совпадают с \_ src       | Соответствует адресу источника                                                              |
    | \_исключаемые флаги адреса \_          | Исключает кадр, если этот адрес найден (определенный источник или назначение). |
    | \_флаг адреса \_ адрес \_ группы \_ DST | Соответствует биту группы (адресу назначения) только для сообщений типа Broadcast.      |
    | \_Флаги адреса \_ совпадают \_      | Совпадает с адресами назначения и источника.                                    |

    

     

4.  Введите адрес назначения, который оценивается по выбранному флагу [**аддресспаир**](addresspair.md) .
5.  Введите адрес источника, который вычисляется по выбранному флагу [**аддресспаир**](addresspair.md) .
6.  Заполните структуру [**аддресстабле**](addresstable.md) массивом структур [**аддресспаир**](addresspair.md) , которые включают пары адресов, которые проверяет драйвер. Все пары адресов оцениваются как логический оператор или (АДДРЕССПАИР 1 \| \| аддресспаир 2). В фильтр записи можно включить не более восьми пар адресов.

 

 



