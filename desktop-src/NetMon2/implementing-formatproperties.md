---
description: Сетевой монитор вызывает функцию Форматпропертиес для форматирования данных, отображаемых в области сведений пользовательского интерфейса сетевой монитор.
ms.assetid: d0a58e1d-c867-4277-916e-f408627b5269
title: Реализация Форматпропертиес
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 660b581bf29fd8e5d40af65f5ff90e1e9223ad2e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "104144647"
---
# <a name="implementing-formatproperties"></a>Реализация Форматпропертиес

Сетевой монитор вызывает функцию [**форматпропертиес**](formatproperties.md) для форматирования данных, отображаемых в области сведений пользовательского интерфейса сетевой монитор. Как правило, **форматпропертиес** вызывается для форматирования строки сводки по протоколу, а затем для форматирования всех экземпляров свойств протокола внутри фрейма. Однако сетевой монитор не определяет, сколько раз вызывается **форматпропертиес** для конкретного средства синтаксического анализа.

При вызове [**форматпропертиес**](formatproperties.md)сетевой монитор предоставляет структуру [**пропертинст**](propertyinst.md) для каждого отображаемого свойства. Структура **пропертинст** предоставляет сведения о отображаемых данных, включая указатель на структуру [**PROPERTYINFO**](propertyinfo.md) , указывающую функцию, используемую для форматирования отображаемого свойства данных.

> [!Note]  
> Структура [**PROPERTYINFO**](propertyinfo.md) указывается при добавлении свойства в [*базу данных свойств*](p.md) средства синтаксического анализа.

 

Сетевой монитор идентифицирует функцию Format для вызова для каждого экземпляра свойства. Элемент **инстанцедата** структуры [**PROPERTYINFO**](propertyinfo.md) может указывать следующее:

-   Функция [**форматпропертинстанце**](formatpropertyinstance.md) для использования [*универсального модуля форматирования*](g.md) , предоставляемого сетевой монитор.

    — или —

-   Имя функции пользовательского формата, предоставляемой анализатором.

Функции [**форматпропертинстанце**](formatpropertyinstance.md) и пользовательского формата возвращают отформатированные данные, отображаемые в области сведений пользовательского интерфейса сетевой монитор.

На следующем рисунке показано, как сетевой монитор идентифицирует функцию, вызываемую для каждого экземпляра свойства.

![как сетевой монитор определяет вызываемую функцию](images/formatprop1.png)

Следующая процедура определяет шаги, необходимые для реализации [**форматпропертиес**](formatproperties.md).

**Реализация Форматпропертиес**

-   Используя структуру цикла, вызовите функцию Format для каждой структуры [**пропертинст**](propertyinst.md) , которая передается средству синтаксического анализа в параметре *лппропинст* функции [**форматпропертиес**](formatproperties.md) .

Ниже приведена базовая реализация [**форматпропертиес**](formatproperties.md).

``` syntax
#include <windows.h>

DWORD BHAPI MyProtocolFormatProperties( HFRAME hFrame,
                                        LPBYTE         pMacFrame,
                                        LPBYTE         pBLRPLATEFrame,
                                        DWORD          nPropertyInsts
                                        LPPROPERTYINST  p)
  {
    while( nPropertyInsts-- > 0)
      {
         ( (FORMAT) p->lpPropertyInfo->InstanceData) ) (p);
         p++;
      }
  return BHERR_SUCCESS;
  }
```

 

 



