---
description: Функция экспорта Аттачпропертиес сопоставляет свойства с расположением в пределах части распознанных данных. Аттачпропертиес должен быть реализован для каждого средства синтаксического анализа, поддерживаемого библиотекой DLL средства синтаксического анализа.
ms.assetid: ef28f571-8364-47d0-841c-580e89333afd
title: Функция обратного вызова Аттачпропертиес (Netmon. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- AttachProperties
api_type:
- UserDefined
api_location:
- Netmon.h
ms.openlocfilehash: 3b3cb4be93b8d960b39f0f5c5cf2b5a4809573cf
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "105673646"
---
# <a name="attachproperties-callback-function"></a>Функция обратного вызова Аттачпропертиес

Функция экспорта **аттачпропертиес** сопоставляет свойства с расположением в пределах части распознанных данных. **Аттачпропертиес** должен быть реализован для каждого средства синтаксического анализа, ПОДДЕРЖИВАЕМого библиотекой DLL средства синтаксического анализа.

## <a name="syntax"></a>Синтаксис


```C++
DWORD AttachProperties(
  _In_ HFRAME    hFrame,
  _In_ LPBYTE    lpFrame,
  _In_ LPBYTE    lpProtocol,
  _In_ DWORD     MacType,
  _In_ DWORD     BytesLeft,
  _In_ HPROTOCOL hPreviousProtocol,
  _In_ DWORD     nPreviousProtocolOffset,
  _In_ DWORD     lpInstData
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*хфраме* \[ окне\]
</dt> <dd>

Маркер анализируемого кадра.

</dd> <dt>

*лпфраме* \[ окне\]
</dt> <dd>

Указатель на первый байт в кадре.

</dd> <dt>

*лппротокол* \[ окне\]
</dt> <dd>

Указатель на начало распознанных данных.

</dd> <dt>

*MacType* \[ окне\]
</dt> <dd>

Значение MAC первого протокола в кадре. *MacType* может быть одним из следующих:



| Значение                                                                                                                                                                         | Значение                 |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
| <span id="MAC_TYPE_ETHERNET"></span><span id="mac_type_ethernet"></span><dl> <dt>**\_тип Mac \_ Ethernet**</dt> </dl>    | 802.3 <br/>       |
| <span id="MAC_TYPE_TOKENRING"></span><span id="mac_type_tokenring"></span><dl> <dt>**\_тип Mac \_ токенринг**</dt> </dl> | 802.5 <br/>       |
| <span id="MAC_TYPE_FDDI"></span><span id="mac_type_fddi"></span><dl> <dt>**\_тип Mac \_ FDDI**</dt> </dl>                | ANSI X3T 9,5 <br/> |



 

</dd> <dt>

*Битеслефт* \[ окне\]
</dt> <dd>

Оставшееся число байтов в кадре, начиная с начала распознанных данных.

</dd> <dt>

*хпревиауспротокол* \[ окне\]
</dt> <dd>

Обработчик предыдущего протокола.

</dd> <dt>

*нпревиауспротоколоффсет* \[ окне\]
</dt> <dd>

Смещение предыдущего протокола, начиная с начала кадра.

</dd> <dt>

*лпинстдата* \[ окне\]
</dt> <dd>

Указатель на данные экземпляра, которые предоставляет предыдущий протокол. Длина данных экземпляра не может превышать значение типа DWORD \_ .

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Если функция выполнена успешно, возвращаемое значение является указателем на первый байт после распознанных данных в кадре или **значение NULL** , если распознанные данные являются последним элементом данных в кадре.

Если функция завершается неудачно, возвращаемое значение является указателем на распознаваемые данные. Параметр *лппротокол* передает указатель на библиотеку DLL средства синтаксического анализа.

## <a name="remarks"></a>Комментарии

Сетевой монитор вызывает функцию **аттачпропертиес** для каждого средства синтаксического анализа, распознающего фрагмент данных в кадре. Обратите внимание, что средство синтаксического анализа определяет, какие свойства существуют в распознанных данных и где находится каждое свойство.

Во время реализации **аттачпропертиес** вызовите [аттачпропертинстанце](attachpropertyinstance.md) , чтобы использовать данные в том виде, в котором они существуют в записи. Можно также вызвать функцию [аттачпропертинстанцеекс](attachpropertyinstanceex.md) для изменения данных свойства. Однако рекомендуется использовать данные в том виде, в котором они существуют в записи.

Функции **аттачпропертинстанцеекс** и **аттачпропертинстанце** вызываются только для свойств, существующих в распознанных данных. Обратите внимание, что сетевой монитор имеет [*базу данных свойств*](p.md) для средства синтаксического анализа, которая содержит описание всех свойств, поддерживаемых синтаксическим анализатором.

**Данные экземпляров**

Данные экземпляра — это сведения, передаваемые из одного средства синтаксического анализа в другое. Данные экземпляра могут быть любыми данными, размер которых меньше или равен DWORD или \_ указателем на данные, например необработанные данные кадра, которые не должны выделяться или освобождаться анализатором. В параметре *лпинстдата* функций **аттачпропертиес** и [рекогнизефраме](recognizeframe.md) сетевой монитор предоставляет указатель на данные экземпляра предыдущего протокола. Вы можете задать данные экземпляра для средства синтаксического анализа во время реализации **рекогнизефраме**.



| Для получения информации о                                          | См.                                                                |
|-------------------------------------------------------------|--------------------------------------------------------------------|
| Какие анализаторы и как они работают с сетевой монитор.   | [Анализаторы](parsers.md)                                             |
| Какие точки входа включены в библиотеку DLL средства синтаксического анализа.           | [Архитектура библиотеки DLL средства синтаксического анализа](parser-dll-architecture.md)             |
| Распознавание данных.                                      | [Реализация Рекогнизефраме](implementing-recognizeframe.md)     |
| Создание базы данных свойств.                          | [Реализация регистра](implementing-register.md)                 |
| Реализация **аттачпропертиес**  включает пример. | [Реализация Аттачпропертиес](implementing-attachproperties.md) |



 

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|-------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | Windows 2000 Professional \[только классические приложения\]<br/>                          |
| Минимальная версия сервера<br/> | Windows 2000 Server \[только классические приложения\]<br/>                                |
| Заголовок<br/>                   | <dl> <dt>Netmon. h</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[аттачпропертинстанце](attachpropertyinstance.md)
</dt> <dt>

[аттачпропертинстанцеекс](attachpropertyinstanceex.md)
</dt> <dt>

[рекогнизефраме](recognizeframe.md)
</dt> </dl>

 

 




