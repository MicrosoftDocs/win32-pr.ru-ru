---
title: Функция Мпупдатестарт (Мпклиент. h)
description: Запускает операцию обновления сигнатур.
ms.assetid: BB056356-17E5-42F0-9636-9E1C254361E4
keywords:
- Функции Мпупдатестарт устаревшие функции среды Windows
topic_type:
- apiref
api_name:
- MpUpdateStart
api_location:
- MpClient.dll
api_type:
- DllExport
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 39867525529339c6b354ae771b070589ca52acfa
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/12/2020
ms.locfileid: "104492627"
---
# <a name="mpupdatestart-function"></a>Функция Мпупдатестарт

Запускает операцию обновления сигнатур.

## <a name="syntax"></a>Синтаксис


```C++
HRESULT WINAPI MpUpdateStart(
  _In_     MPHANDLE         hMpHandle,
  _In_     DWORD            dwUpdateOptions,
  _In_opt_ PMPCALLBACK_INFO pCallbackInfo,
  _Out_    PMPHANDLE        phUpdateHandle
);
```



## <a name="parameters"></a>Параметры

<dl> <dt>

*хмфандле* \[ окне\]
</dt> <dd>

Тип: **мфандле**

Обработчик для интерфейса диспетчера защиты от вредоносных программ. Этот маркер возвращается функцией [**мпманажеропен**](mpmanageropen.md) .

</dd> <dt>

*двупдатеоптионс* \[ окне\]
</dt> <dd>

Тип: **DWORD**

Задает параметр для операции обновления сигнатур. Может иметь одно из следующих значений.



| Значение                                                                                                                                                                                              | Значение                                                                                                                                                                                                                                                                                          |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="MPUPDATE_OPTION_NONE"></span><span id="mpupdate_option_none"></span><dl> <dt>**\_параметр MPUPDATE \_ None**</dt> </dl>                | Конкретный параметр не запрашивается.<br/>                                                                                                                                                                                                                                                      |
| <span id="MPUPDATE_OPTION_ASYNC"></span><span id="mpupdate_option_async"></span><dl> <dt>**\_параметр MPUPDATE \_ Async**</dt> </dl>             | Операция обновления должна быть асинхронной, где **мпупдатестарт** возвращается сразу после успешного инициации обновления сигнатуры. (По умолчанию операция обновления является синхронной, то есть **мпупдатестарт** будет возвращаться только после завершения обновления сигнатуры.)<br/> |
| <span id="MPUPDATE_OPTION_PROGRESS"></span><span id="mpupdate_option_progress"></span><dl> <dt>**\_ \_ ход выполнения параметра MPUPDATE**</dt> </dl>    | Вызывающий объект заинтересован в получении сведений о ходе обновления сигнатуры с помощью обратного вызова.<br/>                                                                                                                                                                                           |
| <span id="MPUPDATE_OPTION_HTTP"></span><span id="mpupdate_option_http"></span><dl> <dt>**\_ \_ http-параметр MPUPDATE**</dt> </dl>                | Обновление сигнатур выполняется путем загрузки полного пакета сигнатур с сайта Microsoft Security Portal. Это можно использовать в качестве варианта отката, если клиент испытывает проблемы с загрузкой сигнатур с помощью Центр обновления Майкрософт.<br/>                                           |
| <span id="MPUPDATE_OPTION_UNC"></span><span id="mpupdate_option_unc"></span><dl> <dt>**\_UNC-параметр MPUPDATE \_**</dt> </dl>                   | Выполняет обновление сигнатур с помощью прямого скачивания из общих UNC-папок.<br/>                                                                                                                                                                                                                      |
| <span id="MPUPDATE_OPTION_MANAGED"></span><span id="mpupdate_option_managed"></span><dl> <dt>**\_ \_ управляемый параметр MPUPDATE**</dt> </dl>       | Выполняет обновление сигнатур с помощью управляемой службы WSUS.<br/>                                                                                                                                                                                                                             |
| <span id="MPUPDATE_OPTION_UNMANAGED"></span><span id="mpupdate_option_unmanaged"></span><dl> <dt>**\_НЕуправляемый параметр MPUPDATE \_**</dt> </dl> | Выполняет обновление сигнатур с помощью неуправляемой службы MU/WU.<br/>                                                                                                                                                                                                                          |



 

</dd> <dt>

*пкаллбаккинфо* \[ в необязательное\]
</dt> <dd>

Тип: **пмпкаллбакк \_ info** .

Указатель на сведения о обратном вызове, используемые для передачи клиенту изменений состояния обновления подписи (например, запуск и завершение) и сведений о ходе выполнения. [**\_ Данные мпкаллбакк**](mpcallback-data.md) , переданные обратно в функцию обратного вызова, сообщают о фактическом состоянии обновления и сведения о ходе выполнения. Ниже приведен список возможных обратных вызовов.



| Значение                                                                                                                                                                                                                                | Значение                                                                                                                                                               |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="MPNOTIFY_SIGUPDATE_START"></span><span id="mpnotify_sigupdate_start"></span><dl> <dt>**\_Начало СИГУПДАТЕ \_ мпнотифи**</dt> </dl>                                      | Операция обновления запущена.<br/>                                                                                                                                  |
| <span id="MPNOTIFY_SIGUPDATE_COMPLETE"></span><span id="mpnotify_sigupdate_complete"></span><dl> <dt>**МПНОТИФИ \_ сигупдате \_ завершен**</dt> </dl>                             | Операция обновления завершена.<br/>                                                                                                                                |
| <span id="MPNOTIFY_SIGUPDATE_SEARCH_START"></span><span id="mpnotify_sigupdate_search_start"></span><dl> <dt>**\_ \_ Начало поиска мпнотифи \_ сигупдате**</dt> </dl>                | Поиск обновлений начат.<br/>                                                                                                                                |
| <span id="MPNOTIFY_SIGUPDATE_SEARCH_COMPLETE"></span><span id="mpnotify_sigupdate_search_complete"></span><dl> <dt>**\_Поиск мпнотифи \_ сигупдате \_ завершен**</dt> </dl>       | Поиск обновлений завершен. Дополнительные сведения можно получить с помощью структуры [**\_ данных мпсигупдате**](mpsigupdate-data.md) .<br/>                             |
| <span id="MPNOTIFY_SIGUPDATE_DOWNLOAD_START"></span><span id="mpnotify_sigupdate_download_start"></span><dl> <dt>**\_ \_ Начало загрузки сигупдате \_ мпнотифи**</dt> </dl>          | Загрузка для обновления начата.<br/>                                                                                                                               |
| <span id="MPNOTIFY_SIGUPDATE_DOWNLOAD_PROGRESS"></span><span id="mpnotify_sigupdate_download_progress"></span><dl> <dt>**\_ \_ ход загрузки сигупдате \_ мпнотифи**</dt> </dl> | Сведения о ходе загрузки. Дополнительные сведения можно получить с помощью структуры [**\_ данных мпсигупдате**](mpsigupdate-data.md) .<br/>                            |
| <span id="MPNOTIFY_SIGUPDATE_DOWNLOAD_COMPLETE"></span><span id="mpnotify_sigupdate_download_complete"></span><dl> <dt>**\_скачивание СИГУПДАТЕ \_ мпнотифи \_ завершено**</dt> </dl> | Загрузка для обновления завершена. Дополнительные сведения можно получить с помощью структуры [**\_ данных мпсигупдате**](mpsigupdate-data.md) .<br/>                             |
| <span id="MPNOTIFY_SIGUPDATE_INSTALL_START"></span><span id="mpnotify_sigupdate_install_start"></span><dl> <dt>**\_ \_ Запуск установки мпнотифи \_ сигупдате**</dt> </dl>             | Установка обновления начата.<br/>                                                                                                                            |
| <span id="MPNOTIFY_SIGUPDATE_INSTALL_PROGRESS"></span><span id="mpnotify_sigupdate_install_progress"></span><dl> <dt>**\_ \_ Ход установки мпнотифи \_ сигупдате**</dt> </dl>    | Сведения о ходе установки. Дополнительные сведения можно получить с помощью структуры [**\_ данных мпсигупдате**](mpsigupdate-data.md) .<br/>                        |
| <span id="MPNOTIFY_SIGUPDATE_INSTALL_COMPLETE"></span><span id="mpnotify_sigupdate_install_complete"></span><dl> <dt>**\_Установка СИГУПДАТЕ \_ мпнотифи \_ завершена**</dt> </dl>    | Установка обновления завершена. Дополнительные сведения можно получить с помощью структуры [**\_ данных мпсигупдате**](mpsigupdate-data.md) .<br/>                         |
| <span id="MPNOTIFY_SIGUPDATE_REQUEST_PROCESSED"></span><span id="mpnotify_sigupdate_request_processed"></span><dl> <dt>**\_запрос СИГУПДАТЕ \_ мпнотифи \_ обработан**</dt> </dl> | Служба защиты от вредоносных программ обработала запрос на обновление сигнатуры. Ошибка или успех обозначается *значением hResult* в [**\_ данных мпкаллбакк**](mpcallback-data.md).<br/> |
| <span id="MPNOTIFY_SIGUPDATE_REBOOT_REQUIRED"></span><span id="mpnotify_sigupdate_reboot_required"></span><dl> <dt>**\_ \_ требуется перезагрузка сигупдате мпнотифи \_**</dt> </dl>       | Для завершения операции обновления требуется перезагрузка. Ошибка или успех обозначается *значением hResult* в [**\_ данных мпкаллбакк**](mpcallback-data.md).<br/>             |
| <span id="MPNOTIFY_INTERNAL_FAILURE"></span><span id="mpnotify_internal_failure"></span><dl> <dt>**\_внутренний \_ сбой мпнотифи**</dt> </dl>                                   | Операция обновления сигнатуры обнаружила общий сбой. Значение *hResult* в [**мпкаллбакк \_ данных**](mpcallback-data.md) имеет конкретный код ошибки.<br/>    |



 

</dd> <dt>

*фупдатехандле* \[ заполняет\]
</dt> <dd>

Тип: **пмфандле**

Возвращенный обработчик обновления, который идентифицирует инициированную в данный момент операцию обновления сигнатуры. Этот маркер можно использовать в последующих вызовах функций, например для управления операцией обновления сигнатур. Этот маркер должен быть закрыт функцией [**мфандлеклосе**](mphandleclose.md) .

</dd> </dl>

## <a name="return-value"></a>Возвращаемое значение

Тип: **HRESULT**

Если функция выполнена успешно, возвращается значение **S \_**.

Если функция завершается ошибкой, возвращаемое значение является неудачным кодом **HRESULT** . Вызывающий объект может использовать функцию [**мперрормессажеформат**](mperrormessageformat.md) для получения общего описания сообщения об ошибке.

## <a name="requirements"></a>Требования



| Требование | Значение |
|-------------------------------------|-----------------------------------------------------------------------------------------|
| Минимальная версия клиента<br/> | \[Только классические приложения Windows 8\]<br/>                                              |
| Минимальная версия сервера<br/> | \[Только для настольных приложений Windows Server 2012\]<br/>                                    |
| Header<br/>                   | <dl> <dt>Мпклиент. h</dt> </dl>   |
| DLL<br/>                      | <dl> <dt>MpClient.dll</dt> </dl> |



## <a name="see-also"></a>См. также раздел

<dl> <dt>

[**мперрормессажеформат**](mperrormessageformat.md)
</dt> <dt>

[**мфандлеклосе**](mphandleclose.md)
</dt> <dt>

[**мпманажеропен**](mpmanageropen.md)
</dt> <dt>

[**\_данные мпкаллбакк**](mpcallback-data.md)
</dt> <dt>

[**\_данные мпсигупдате**](mpsigupdate-data.md)
</dt> </dl>

 

 





