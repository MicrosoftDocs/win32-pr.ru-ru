---
title: Анимация символа
description: Анимация символа
ms.assetid: ed42de30-acac-41e8-bacb-4caaff254724
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3ed47b30a9bcfcdb5e305b87ced5f02526ae0056
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "104069881"
---
# <a name="animating-a-character"></a><span data-ttu-id="d58ab-103">Анимация символа</span><span class="sxs-lookup"><span data-stu-id="d58ab-103">Animating a Character</span></span>

<span data-ttu-id="d58ab-104">\[Microsoft Agent является устаревшим в Windows 7 и может быть недоступен в последующих версиях Windows.\]</span><span class="sxs-lookup"><span data-stu-id="d58ab-104">\[Microsoft Agent is deprecated as of Windows 7, and may be unavailable in subsequent versions of Windows.\]</span></span>

<span data-ttu-id="d58ab-105">После загрузки символа можно использовать несколько методов Microsoft Agent для анимации символа.</span><span class="sxs-lookup"><span data-stu-id="d58ab-105">Once a character is loaded, you can use several of Microsoft Agent's methods for animating the character.</span></span> <span data-ttu-id="d58ab-106">Первый из них обычно является методом [**отображения**](show-method.md) .</span><span class="sxs-lookup"><span data-stu-id="d58ab-106">The first one you use is typically the [**Show**](show-method.md) method.</span></span> <span data-ttu-id="d58ab-107">**Показать** делает фрейм символа видимым и воспроизводит анимацию, назначенную **отображаемому** состоянию символа.</span><span class="sxs-lookup"><span data-stu-id="d58ab-107">**Show** makes the character's frame visible and plays the animation assigned to the character's **Showing** state.</span></span>

<span data-ttu-id="d58ab-108">После того как рамка символа будет видима, можно использовать метод [**Play**](play-method.md) , указав имя анимации, чтобы воспроизвести эту анимацию.</span><span class="sxs-lookup"><span data-stu-id="d58ab-108">Once the character's frame is visible, you can use the [**Play**](play-method.md) method, specifying the name of an animation, to play that animation.</span></span> <span data-ttu-id="d58ab-109">Имена анимаций относятся к определению символа.</span><span class="sxs-lookup"><span data-stu-id="d58ab-109">Animation names are specific to a character definition.</span></span> <span data-ttu-id="d58ab-110">При воспроизведении анимации форма его окна изменяется в соответствии с изображением в кадре.</span><span class="sxs-lookup"><span data-stu-id="d58ab-110">As an animation plays, the shape of its window changes to match the image in the frame.</span></span> <span data-ttu-id="d58ab-111">Это приводит к перемещению графического изображения или *спрайта*, отображаемого поверх рабочего стола, всех окон или *z-порядка*.</span><span class="sxs-lookup"><span data-stu-id="d58ab-111">This results in a movable graphic image, or *sprite*, displayed on top of the desktop and all windows, or *z-order*.</span></span>

<span data-ttu-id="d58ab-112">Если файл символа хранится локально, можно просто вызвать метод [**Play**](play-method.md) .</span><span class="sxs-lookup"><span data-stu-id="d58ab-112">If the character's file is stored locally, you can simply call the [**Play**](play-method.md) method.</span></span> <span data-ttu-id="d58ab-113">В других случаях, например при загрузке. ACF символ из HTTP-сервера. для первого извлечения данных анимации необходимо использовать метод [**Get**](get-method.md) (или [**Prepare**](/windows/desktop/lwef/iagentcharacter--prepare)).</span><span class="sxs-lookup"><span data-stu-id="d58ab-113">In other cases, such as when you have loaded an .ACF character from an HTTP server, you must use the [**Get**](get-method.md) (or [**Prepare**](/windows/desktop/lwef/iagentcharacter--prepare)) method to first retrieve the animation data.</span></span> <span data-ttu-id="d58ab-114">Это приведет к тому, что агент запросит файл анимации с сервера и сохранит его в буфере браузера на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="d58ab-114">This will cause Agent to request the animation file from the server and store it in the browser's buffer on the local machine.</span></span>

<span data-ttu-id="d58ab-115">Метод [**говорите**](speak-method.md) позволяет программировать символ, автоматически синхронизируя выходные данные с помощью пакета LIP.</span><span class="sxs-lookup"><span data-stu-id="d58ab-115">The [**Speak**](speak-method.md) method enables you to program the character to speak, automatically lip-syncing the output.</span></span> <span data-ttu-id="d58ab-116">Дополнительные сведения см. в разделе «выходные данные» этого документа.</span><span class="sxs-lookup"><span data-stu-id="d58ab-116">Further details are covered in the Output section of this document.</span></span>

<span data-ttu-id="d58ab-117">Для размещения символа в новом месте можно использовать метод [**MoveTo**](moveto-method.md) .</span><span class="sxs-lookup"><span data-stu-id="d58ab-117">You can use the [**MoveTo**](moveto-method.md) method to position the character at a new location.</span></span> <span data-ttu-id="d58ab-118">При вызове метода **MoveTo** Microsoft Agent автоматически воспроизводит соответствующую анимацию на основе текущего местоположения символа, а затем перемещает кадр символа.</span><span class="sxs-lookup"><span data-stu-id="d58ab-118">When you call the **MoveTo** method, Microsoft Agent automatically plays the appropriate animation based on the character's current location, then moves the character's frame.</span></span> <span data-ttu-id="d58ab-119">Аналогичным образом при вызове [**жестуреат**](gestureat-method.md)Microsoft Agent воспроизводит соответствующую анимацию жестуринг на основе расположения символа и расположения, указанного в вызове.</span><span class="sxs-lookup"><span data-stu-id="d58ab-119">Similarly, when you call [**GestureAt**](gestureat-method.md), Microsoft Agent plays the appropriate gesturing animation based on the character's location and the location specified in the call.</span></span>

<span data-ttu-id="d58ab-120">Чтобы скрыть символ, вызовите метод [Hide](hide-method.md) .</span><span class="sxs-lookup"><span data-stu-id="d58ab-120">To hide the character, call the [Hide](hide-method.md) method.</span></span> <span data-ttu-id="d58ab-121">При этом автоматически воспроизводится символ, связанный с состоянием **скрытия** символа, а затем рамка символа скрывается.</span><span class="sxs-lookup"><span data-stu-id="d58ab-121">This automatically plays the character associated with the character's **Hiding** state, then hides the character's frame.</span></span> <span data-ttu-id="d58ab-122">Однако можно также скрыть или показать символ, установив свойство [**Visible**](visible-property.md) символа.</span><span class="sxs-lookup"><span data-stu-id="d58ab-122">However, you can also hide or show a character by setting the character's [**Visible**](visible-property.md) property.</span></span>

<span data-ttu-id="d58ab-123">Microsoft Agent обрабатывает все вызовы *анимации или* асинхронно.</span><span class="sxs-lookup"><span data-stu-id="d58ab-123">Microsoft Agent processes all animation calls, or *requests*, asynchronously.</span></span> <span data-ttu-id="d58ab-124">Это позволяет коду приложения продолжать обработку других событий во время обработки запроса.</span><span class="sxs-lookup"><span data-stu-id="d58ab-124">This enables your application's code to continue handling other events while the request is being processed.</span></span> <span data-ttu-id="d58ab-125">Например, вызовы метода [**Play**](play-method.md) помещают анимацию в очередь для символа, чтобы анимация могла воспроизводиться последовательно.</span><span class="sxs-lookup"><span data-stu-id="d58ab-125">For example, calls to the [**Play**](play-method.md) method place the animation in a queue for the character so that the animations can be played sequentially.</span></span> <span data-ttu-id="d58ab-126">Однако это означает, что вы не можете предположить, что вызов других функций будет выполняться после анимации, приведенной в коде.</span><span class="sxs-lookup"><span data-stu-id="d58ab-126">However, this means you cannot assume that a call to other functions will necessarily execute after an animation it follows in your code.</span></span> <span data-ttu-id="d58ab-127">Например, оператор, следующий за вызовом **Play** или [**MoveTo**](moveto-method.md) , будет выполняться до завершения анимации.</span><span class="sxs-lookup"><span data-stu-id="d58ab-127">For example, typically, a statement following a call to **Play** or [**MoveTo**](moveto-method.md) will execute before the animation finishes.</span></span>

<span data-ttu-id="d58ab-128">Вы можете синхронизировать код с анимацией в очереди символов, создав ссылку на объект на запрос анимации, а при начале или завершении анимации — наблюдать за событиями [запросов](the-request-object.md) , которые сервер использует для уведомления клиентов символа.</span><span class="sxs-lookup"><span data-stu-id="d58ab-128">You can synchronize your code with animations in a character's queue by creating an object reference to the animation request, and, when the animation starts or completes, monitoring the [Request](the-request-object.md) events that the server uses to notify clients of the character.</span></span> <span data-ttu-id="d58ab-129">Например, если требуется, чтобы окно сообщения отображалось, когда символ завершает анимацию, можно поместить вызов окна сообщения в подпрограммы обработки событий [**рекуесткомплете**](requestcomplete-event.md) , проверив конкретный идентификатор запроса.</span><span class="sxs-lookup"><span data-stu-id="d58ab-129">For example, if you want a message box to appear when the character finishes an animation, you can put the message box call in your [**RequestComplete**](requestcomplete-event.md) event handling subroutine, checking for the particular request ID.</span></span>

<span data-ttu-id="d58ab-130">Если символ скрыт, сервер не воспроизводит анимацию. Однако он по-прежнему помещает и обрабатывает запрос анимации (воспроизводит анимацию) и передает клиенту состояние запроса.</span><span class="sxs-lookup"><span data-stu-id="d58ab-130">When a character is hidden, the server does not play animations; however, it still queues and processes the animation request (plays the animation) and passes a request status back to the client.</span></span> <span data-ttu-id="d58ab-131">В скрытом состоянии символ не может стать входным — активным.</span><span class="sxs-lookup"><span data-stu-id="d58ab-131">In the hidden state, the character cannot become input-active.</span></span> <span data-ttu-id="d58ab-132">Однако если пользователь говорит имя символа (при включенном речевом вводе), сервер автоматически отображает этот символ.</span><span class="sxs-lookup"><span data-stu-id="d58ab-132">However, if the user speaks the name of the character (when speech input is enabled), the server automatically shows the character.</span></span>

<span data-ttu-id="d58ab-133">Когда клиентское приложение загружает несколько символов одновременно, службы анимации Microsoft Agent позволяют анимировать символы независимо или использовать методы [**ожидания**](wait-method.md), [**прерывания**](interrupt-method.md)или [**остановки**](stop-method.md) для синхронизации анимации друг с другом.</span><span class="sxs-lookup"><span data-stu-id="d58ab-133">When your client application loads multiple characters at the same time, Microsoft Agent's animation services enable you to animate characters independently or use the [**Wait**](wait-method.md), [**Interrupt**](interrupt-method.md), or [**Stop**](stop-method.md) methods to synchronize their animation with each other.</span></span>

<span data-ttu-id="d58ab-134">Кроме того, Microsoft Agent автоматически воспроизводит другие анимации.</span><span class="sxs-lookup"><span data-stu-id="d58ab-134">Microsoft Agent also plays other animations automatically for you.</span></span> <span data-ttu-id="d58ab-135">Например, если состояние символа не изменилось в течение нескольких секунд, агент начнет воспроизводить анимацию, назначенную анимации **состояние простоя** символа.</span><span class="sxs-lookup"><span data-stu-id="d58ab-135">For example, if the character's state has not changed for several seconds, Agent begins playing animations assigned to the character's **Idling** animations.</span></span> <span data-ttu-id="d58ab-136">Аналогично, если речевой ввод включен, агент воспроизводит анимацию **прослушивания** символа, **а затем** прослушивает анимацию при обнаружении utterance.</span><span class="sxs-lookup"><span data-stu-id="d58ab-136">Similarly, when speech input is enabled, Agent plays the character's **Listening** animations and then **Hearing** animations when an utterance is detected.</span></span> <span data-ttu-id="d58ab-137">Эти управляемые сервером анимации называются *состояниями* и определяются при создании символа.</span><span class="sxs-lookup"><span data-stu-id="d58ab-137">These server-managed animations are called *states*, and are defined when a character is created.</span></span> <span data-ttu-id="d58ab-138">Дополнительные сведения см. в разделе [Разработка символов для Microsoft Agent](agent-states.md).</span><span class="sxs-lookup"><span data-stu-id="d58ab-138">For more information, see [Designing Characters for Microsoft Agent](agent-states.md).</span></span>

 

 