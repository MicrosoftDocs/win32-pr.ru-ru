---
title: Использование HLSL минимальной точности
description: Начиная с Windows 8, графические драйверы могут реализовывать скалярные типы данных с минимальной точностью HLSL, используя любую точность, большую или равную указанной точности.
ms.assetid: 422B0C45-5CEB-4235-AD05-62D36C36CFC6
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de7f66f35aef3e870edb4e8564a280be89ce34be
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/20/2020
ms.locfileid: "103792276"
---
# <a name="using-hlsl-minimum-precision"></a><span data-ttu-id="03822-103">Использование HLSL минимальной точности</span><span class="sxs-lookup"><span data-stu-id="03822-103">Using HLSL minimum precision</span></span>

<span data-ttu-id="03822-104">Начиная с Windows 8, графические драйверы могут реализовывать [скалярные типы данных](dx-graphics-hlsl-scalar.md) с минимальной точностью HLSL, используя любую точность, большую или равную указанной точности.</span><span class="sxs-lookup"><span data-stu-id="03822-104">Starting with Windows 8, graphics drivers can implement minimum precision [HLSL scalar data types](dx-graphics-hlsl-scalar.md) by using any precision greater than or equal to their specified bit precision.</span></span> <span data-ttu-id="03822-105">Если на оборудовании, реализующем минимальную точность HLSL, используется код шейдера минимальной точности, используется меньше пропускной способности памяти, и в результате уменьшается энергопотребление системы.</span><span class="sxs-lookup"><span data-stu-id="03822-105">When your HLSL minimum precision shader code is used on hardware that implements HLSL minimum precision, you use less memory bandwidth and as a result you also use less system power.</span></span>

<span data-ttu-id="03822-106">Вы можете запросить поддержку минимальной точности, предоставляемую графическим драйвером, вызвав [**ID3D11Device:: чеккфеатуресуппорт**](/windows/desktop/api/d3d11/nf-d3d11-id3d11device-checkfeaturesupport) с параметром [**\_ \_ \_ \_ \_ поддержки минимальной точности для шейдера функций D3D11**](/windows/desktop/api/d3d11/ne-d3d11-d3d11_feature) .</span><span class="sxs-lookup"><span data-stu-id="03822-106">You can query for the minimum precision support that the graphics driver provides by calling [**ID3D11Device::CheckFeatureSupport**](/windows/desktop/api/d3d11/nf-d3d11-id3d11device-checkfeaturesupport) with the [**D3D11\_FEATURE\_SHADER\_MIN\_PRECISION\_SUPPORT**](/windows/desktop/api/d3d11/ne-d3d11-d3d11_feature) value.</span></span> <span data-ttu-id="03822-107">Дополнительные сведения см. в разделе [Поддержка минимальной точности HLSL](/windows/desktop/direct3d11/direct3d-11-1-features).</span><span class="sxs-lookup"><span data-stu-id="03822-107">For more info, see [HLSL minimum precision support](/windows/desktop/direct3d11/direct3d-11-1-features).</span></span>

-   [<span data-ttu-id="03822-108">Объявите переменные с минимальными типами данных точности</span><span class="sxs-lookup"><span data-stu-id="03822-108">Declare variables with minimum precision data types</span></span>](#declare-variables-with-minimum-precision-data-types)
-   [<span data-ttu-id="03822-109">Проверка кода для шейдера с минимальными точностьми</span><span class="sxs-lookup"><span data-stu-id="03822-109">Testing your minimum precision shader code</span></span>](#testing-your-minimum-precision-shader-code)
-   [<span data-ttu-id="03822-110">См. также</span><span class="sxs-lookup"><span data-stu-id="03822-110">Related topics</span></span>](#related-topics)

## <a name="declare-variables-with-minimum-precision-data-types"></a><span data-ttu-id="03822-111">Объявите переменные с минимальными типами данных точности</span><span class="sxs-lookup"><span data-stu-id="03822-111">Declare variables with minimum precision data types</span></span>

<span data-ttu-id="03822-112">Чтобы использовать минимальную точность в коде шейдера HLSL, объявите отдельные переменные с такими типами, как **min16float** (**min16float4** для Vector), **min16int**, **min10float** и т. д.</span><span class="sxs-lookup"><span data-stu-id="03822-112">To use minimum precision in HLSL shader code, declare individual variables with types like **min16float** (**min16float4** for a vector), **min16int**, **min10float**, and so on.</span></span> <span data-ttu-id="03822-113">С помощью этих переменных код шейдера указывает, что для него не требуется больше точности, чем указывает переменная.</span><span class="sxs-lookup"><span data-stu-id="03822-113">With these variables, your shader code indicates that it doesn’t require more precision than what the variables indicate.</span></span> <span data-ttu-id="03822-114">Но оборудование может игнорировать минимальные индикаторы точности и выполнять их в полной 32-разрядной точности.</span><span class="sxs-lookup"><span data-stu-id="03822-114">But hardware can ignore the minimum precision indicators and run at full 32-bit precision.</span></span> <span data-ttu-id="03822-115">Если код шейдера используется на оборудовании, который использует преимущества минимальной точности, используется меньше пропускной способности памяти, и в результате уменьшается производительность системы, если для кода шейдера не требуется больше точности, чем указано.</span><span class="sxs-lookup"><span data-stu-id="03822-115">When your shader code is used on hardware that takes advantage of minimum precision, you use less memory bandwidth and as a result you also use less system power as long as your shader code doesn’t expect more precision than it specified.</span></span>

<span data-ttu-id="03822-116">Вам не нужно создавать несколько шейдеров, которые выполняют и не используют минимальную точность.</span><span class="sxs-lookup"><span data-stu-id="03822-116">You don't need to author multiple shaders that do and don't use minimum precision.</span></span> <span data-ttu-id="03822-117">Вместо этого создайте шейдер с минимальной точностью, и переменные точности с точностью работают при полной 32-разрядной точности, если графический драйвер сообщает о том, что он не поддерживает какую-либо минимальную точность.</span><span class="sxs-lookup"><span data-stu-id="03822-117">Instead, create shaders with minimum precision, and the minimum precision variables behave at full 32-bit precision if the graphics driver reports that it doesn't support any minimum precision.</span></span> <span data-ttu-id="03822-118">HLSLные шейдеры точности не работают в операционных системах, предшествующих Windows 8, поэтому если планируется ориентироваться на более ранние операционные системы, необходимо создать несколько шейдеров, некоторые из которых не используют минимальную точность.</span><span class="sxs-lookup"><span data-stu-id="03822-118">HLSL minimum precision shaders don't work on operating systems earlier than Windows 8 so if you plan to target earlier operating systems, you'll need to author multiple shaders, some that do and others that don't use minimum precision.</span></span>

> [!Note]  
> <span data-ttu-id="03822-119">Не делайте переключения данных между разными уровнями точности в шейдере, так как эти типы преобразований являются непроизводительна и снижают производительность.</span><span class="sxs-lookup"><span data-stu-id="03822-119">Don't make data switches between different precision levels within a shader because these types of conversions are wasteful and reduce performance.</span></span> <span data-ttu-id="03822-120">Исключением является то, что константы шейдеров по-прежнему всегда 32 бит, но поставщики могут создавать графические аппаратные средства, которые могут свободно преобразовываться в любую меньшую точность, а HLSL инструкция может использовать.</span><span class="sxs-lookup"><span data-stu-id="03822-120">The exception is that shader constants are still always 32 bit, but vendors can design graphics hardware that can freely down-convert to whatever lower precision the HLSL instruction reading might use.</span></span>

 

<span data-ttu-id="03822-121">С помощью минимальной точности можно управлять точностью вычислений в различных частях кода шейдера.</span><span class="sxs-lookup"><span data-stu-id="03822-121">By using minimum precision, you can control the precision of computations in various parts of your shader code.</span></span>

<span data-ttu-id="03822-122">Правила для HLSL минимальной точности похожи на C/C++, где типы в выражении определяют точность операции, а не тип, в который в конечном итоге записывается.</span><span class="sxs-lookup"><span data-stu-id="03822-122">The rules for HLSL minimum precision are similar to C/C++, where the types in an expression determine the precision of the operation, not the type being eventually written to.</span></span>

## <a name="testing-your-minimum-precision-shader-code"></a><span data-ttu-id="03822-123">Проверка кода для шейдера с минимальными точностьми</span><span class="sxs-lookup"><span data-stu-id="03822-123">Testing your minimum precision shader code</span></span>

<span data-ttu-id="03822-124">Справочное средство программной прорисовки ([**\_ \_ \_ ссылка на тип драйвера D3D**](/windows/desktop/api/d3dcommon/ne-d3dcommon-d3d_driver_type)) позволяет приблизительно понять, как минимальная точность в коде шейдера HLSL ведет себя, куантизинг каждую инструкцию HLSL до указанной точности.</span><span class="sxs-lookup"><span data-stu-id="03822-124">The reference rasterizer ([**D3D\_DRIVER\_TYPE\_REFERENCE**](/windows/desktop/api/d3dcommon/ne-d3dcommon-d3d_driver_type)) gives you a rough idea of how minimum precision in your HLSL shader code behaves by quantizing each HLSL instruction to the specified precision.</span></span> <span data-ttu-id="03822-125">Это помогает обнаружить код, который может случайно полагаться на больше, чем минимальная точность.</span><span class="sxs-lookup"><span data-stu-id="03822-125">This helps you discover code that might accidentally rely on more than the minimum precision.</span></span> <span data-ttu-id="03822-126">Средство программной прорисовки ссылок работает быстрее, если в коде шейдера HLSL используется минимальная точность, но его можно использовать для проверки правильности кода.</span><span class="sxs-lookup"><span data-stu-id="03822-126">The reference rasterizer doesn’t run any faster when your HLSL shader code uses minimum precision, but you can use it to verify the correctness of your code.</span></span> <span data-ttu-id="03822-127">[Деформация](/windows/desktop/direct3d11/overviews-direct3d-11-devices-create-warp) ([**\_ \_ \_ деформация типа драйвера D3D**](/windows/desktop/api/d3dcommon/ne-d3dcommon-d3d_driver_type)) не поддерживает использование минимальной точности в коде шейдера HLSL. ДЕФОРМАЦИЯ выполняется только при полной 32-разрядной точности.</span><span class="sxs-lookup"><span data-stu-id="03822-127">[WARP](/windows/desktop/direct3d11/overviews-direct3d-11-devices-create-warp) ([**D3D\_DRIVER\_TYPE\_WARP**](/windows/desktop/api/d3dcommon/ne-d3dcommon-d3d_driver_type)) doesn’t support using minimum precision in HLSL shader code; WARP just runs at full 32-bit precision.</span></span>

## <a name="related-topics"></a><span data-ttu-id="03822-128">См. также</span><span class="sxs-lookup"><span data-stu-id="03822-128">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="03822-129">Руководство по программированию для HLSL</span><span class="sxs-lookup"><span data-stu-id="03822-129">Programming Guide for HLSL</span></span>](dx-graphics-hlsl-pguide.md)
</dt> </dl>

 

 