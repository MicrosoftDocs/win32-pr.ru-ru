---
title: texm3x2depth-PS
description: Вычислите значение глубины, которое будет использоваться при тестировании глубины для этого пикселя.
ms.assetid: bacdd471-a6ee-4998-badd-93ffd4fd61d4
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- apiref
api_name: ''
api_type: ''
api_location: ''
ms.openlocfilehash: 26d2c3efd1a31681520828b18d606d618d8c900a
ms.sourcegitcommit: fe03c5d92ca6a0d66a114b2303e99c0a19241ffb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2019
ms.locfileid: "104983853"
---
# <a name="texm3x2depth---ps"></a>texm3x2depth-PS

Вычислите значение глубины, которое будет использоваться при тестировании глубины для этого пикселя.

## <a name="syntax"></a>Синтаксис



| texm3x2depth DST, src |
|-----------------------|



 

где

-   DST — это регистр назначения.
-   src является исходным регистром.

## <a name="remarks"></a>Примечания



| Версии шейдеров пикселей | 1\_1 | 1\_2 | 1 \_ 3 | 1\_4 | 2 \_ 0 | 2 \_ x | 2 \_ SW | 3 \_ 0 | 3 \_ SW |
|-----------------------|------|------|------|------|------|------|-------|------|-------|
| texm3x2depth          |      |      | x    |      |      |      |       |      |       |



 

Эта инструкция должна использоваться с инструкцией [texm3x2pad-PS](texm3x2pad---ps.md) .

При использовании этих двух инструкций регистры текстур должны использовать следующую последовательность.


```
 
tex t(n)                     // Define tn as a standard 3-vector.(tn must be 
                             // defined in some way before it is used
texm3x2pad   t(m),   t(n)    // Where m > n
                             // Calculate z value
texm3x2depth t(m+1), t(n)    // Calculate w value; use both z and w to
                             // find depth
```



Вычисление глубины выполняется после использования операции с продуктом с точкой для поиска z и w. Ниже приведены более подробные сведения о том, как выполняется вычисление глубины.

Инструкция texm3x2pad вычисляет z.

z = TextureCoordinates (этап m)<sub>УВВ</sub> \* t (n)<sub>RGB</sub>

Инструкция texm3x2depth вычисляет w.

w = TextureCoordinates (этап m + 1)<sub>УВВ</sub> \* t (n)<sub>RGB</sub>

Вычислите глубину и сохраните результат в t (m + 1).


```
 
if (w == 0)
  t(m+1) = 1.0
else
  t(m+1) = z/w
```



Вычисленная глубина помечена для использования в тесте глубины пикселя, заменяя существующее тестовое значение глубины для пикселя.

Не забудьте обозначить z/w в диапазоне (0-1). Если z/w находится за пределами этого диапазона, результат, хранящийся в буфере глубины, будет неопределенным.

После выполнения texm3x2depth регистр t (m + 1) больше недоступен для использования в шейдере.

При использовании множественной выборки использование этой инструкции исключает большую часть преимуществ буфера глубины более высокого разрешения. Так как шейдер пикселей выполняется один раз для каждого пикселя, для каждого из сравниваемых тестов глубины должно использоваться одно значение глубины, полученное texm3x2depth или [тексдепс-PS](texdepth---ps.md) .

## <a name="related-topics"></a>См. также

<dl> <dt>

[Инструкции шейдера пикселей](dx9-graphics-reference-asm-ps-instructions.md)
</dt> </dl>

 

 




