---
title: О курсорах
description: В этом разделе обсуждаются стандартные курсоры.
ms.assetid: 0ca8e51c-1159-47e9-ba3f-5ced0667cadb
keywords:
- ресурсы, курсоры
- курсоры, сведения
- курсоры, стандартные
- стандартные курсоры
- Функция Сетсистемкурсор
- курсоры, пользовательские
- пользовательские курсоры
- курсоры, горячие участки
- курсоры, создание
- создание курсоров
- курсоры, расположение
- курсоры, внешний вид
- уничтожение курсоров
- дублирование курсоров
- курсор класса
- ограничивать курсоры
- курсоры, уничтожение
- курсоры, дублирование
- курсоры, класс
- курсоры, ограничивать
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6f2d0b91ba4670d2510413240efd742b2e0ba69b
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "104069959"
---
# <a name="about-cursors"></a><span data-ttu-id="c6403-123">О курсорах</span><span class="sxs-lookup"><span data-stu-id="c6403-123">About Cursors</span></span>

<span data-ttu-id="c6403-124">Windows предоставляет набор стандартных курсоров, доступных для использования любым приложением в любое время.</span><span class="sxs-lookup"><span data-stu-id="c6403-124">Windows provides a set of standard cursors that are available for any application to use at any time.</span></span> <span data-ttu-id="c6403-125">Файлы заголовков SDK содержат идентификаторы для стандартных курсоров — идентификаторы начинаются с префикса **IDC \_** .</span><span class="sxs-lookup"><span data-stu-id="c6403-125">The SDK header files contain identifiers for the standard cursors—the identifiers begin with the **IDC\_** prefix.</span></span>

<span data-ttu-id="c6403-126">С каждым из стандартных указателей сопоставлено изображение по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="c6403-126">Each standard cursor has a corresponding default image associated with it.</span></span> <span data-ttu-id="c6403-127">Пользователь или приложение может заменить изображение по умолчанию, связанное с любым стандартным курсором, в любое время.</span><span class="sxs-lookup"><span data-stu-id="c6403-127">The user or an application can replace the default image associated with any standard cursor at any time.</span></span> <span data-ttu-id="c6403-128">Приложение заменяет образ по умолчанию с помощью функции [**сетсистемкурсор**](/windows/desktop/api/Winuser/nf-winuser-setsystemcursor) .</span><span class="sxs-lookup"><span data-stu-id="c6403-128">An application replaces a default image by using the [**SetSystemCursor**](/windows/desktop/api/Winuser/nf-winuser-setsystemcursor) function.</span></span> <span data-ttu-id="c6403-129">На следующем рисунке показано несколько стандартных курсоров из Windows Vista:</span><span class="sxs-lookup"><span data-stu-id="c6403-129">The following image shows several standard cursors from Windows Vista:</span></span>

![стандартные курсоры, включая руки, знак плюс с четырьмя стрелками, стрелка с вопросительным знаком, круг, перо](images/cursorsstandard.png)

<span data-ttu-id="c6403-131">Приложение может использовать функцию [**жетиконинфо**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo) для получения текущего изображения курсора и может нарисовать курсор с помощью функции [**дравиконекс**](/windows/desktop/api/Winuser/nf-winuser-drawiconex) .</span><span class="sxs-lookup"><span data-stu-id="c6403-131">An application can use the [**GetIconInfo**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo) function to retrieve the current image for a cursor and can draw the cursor by using the [**DrawIconEx**](/windows/desktop/api/Winuser/nf-winuser-drawiconex) function.</span></span> <span data-ttu-id="c6403-132">Чтобы нарисовать изображение по умолчанию для стандартного курсора, укажите флаг **\_ совместимости di** в вызове **дравиконекс**.</span><span class="sxs-lookup"><span data-stu-id="c6403-132">To draw the default image for a standard cursor, specify the **DI\_COMPAT** flag in the call to **DrawIconEx**.</span></span> <span data-ttu-id="c6403-133">Если не указать флаг совместимости с **di \_** , **дравиконекс** рисует стандартный курсор, используя изображение, указанное пользователем.</span><span class="sxs-lookup"><span data-stu-id="c6403-133">If you do not specify the **DI\_COMPAT** flag, **DrawIconEx** draws the standard cursor using the image that the user specified.</span></span>

<span data-ttu-id="c6403-134">Пользовательские курсоры предназначены для использования в определенном приложении и могут быть любой конструкцией, которую определяет разработчик.</span><span class="sxs-lookup"><span data-stu-id="c6403-134">Custom cursors are designed for use in a specific application and can be any design the developer defines.</span></span> <span data-ttu-id="c6403-135">На следующем рисунке показано несколько пользовательских курсоров.</span><span class="sxs-lookup"><span data-stu-id="c6403-135">The following illustration shows several custom cursors.</span></span>

![пользовательские курсоры, в том числе руки, полукруглые, барабаны, вристватч, метрономе](images/cursorscustom.png)

<span data-ttu-id="c6403-137">Курсоры могут быть либо монохромными, либо цветными, а также статическими или анимированными.</span><span class="sxs-lookup"><span data-stu-id="c6403-137">Cursors can be either monochrome or color, and either static or animated.</span></span> <span data-ttu-id="c6403-138">Тип курсора, используемого на конкретной компьютерной системе, зависит от отображаемой системы.</span><span class="sxs-lookup"><span data-stu-id="c6403-138">The type of cursor used on a particular computer system depends on the system's display.</span></span> <span data-ttu-id="c6403-139">Старые экраны, такие как VGA, не поддерживают цветные или анимированные курсоры.</span><span class="sxs-lookup"><span data-stu-id="c6403-139">Old displays such as VGA do not support color or animated cursors.</span></span> <span data-ttu-id="c6403-140">Новые дисплеи, драйверы отображения которых используют подсистему, не зависящую от устройства (DIB), поддерживают их.</span><span class="sxs-lookup"><span data-stu-id="c6403-140">New displays, whose display drivers use the device-independent bitmap (DIB) engine, do support them.</span></span>

<span data-ttu-id="c6403-141">Курсоры и значки похожи и могут использоваться в различных ситуациях.</span><span class="sxs-lookup"><span data-stu-id="c6403-141">Cursors and icons are similar and can be used interchangeably in many situations.</span></span> <span data-ttu-id="c6403-142">Единственное различие между ними заключается в том, что изображение, указанное в качестве курсора, должно иметь формат, который может поддерживаться дисплеем.</span><span class="sxs-lookup"><span data-stu-id="c6403-142">The only difference between them is that an image specified as a cursor must be in the format that the display can support.</span></span> <span data-ttu-id="c6403-143">Например, курсор должен быть монохромным для дисплея VGA.</span><span class="sxs-lookup"><span data-stu-id="c6403-143">For example, a cursor must be monochrome for a VGA display.</span></span>

<span data-ttu-id="c6403-144">В этом обзоре содержатся сведения по следующим темам:</span><span class="sxs-lookup"><span data-stu-id="c6403-144">This overview provides information on the following topics:</span></span>

-   [<span data-ttu-id="c6403-145">Активная разактивная области</span><span class="sxs-lookup"><span data-stu-id="c6403-145">The Hot Spot</span></span>](#the-hot-spot)
-   [<span data-ttu-id="c6403-146">Мышь и курсор</span><span class="sxs-lookup"><span data-stu-id="c6403-146">The Mouse and the Cursor</span></span>](#the-mouse-and-the-cursor)
-   [<span data-ttu-id="c6403-147">Создание курсора</span><span class="sxs-lookup"><span data-stu-id="c6403-147">Cursor Creation</span></span>](#cursor-creation)
-   [<span data-ttu-id="c6403-148">Расположение и внешний вид курсора</span><span class="sxs-lookup"><span data-stu-id="c6403-148">Cursor Location and Appearance</span></span>](#cursor-location-and-appearance)
-   [<span data-ttu-id="c6403-149">Конфинемент курсора</span><span class="sxs-lookup"><span data-stu-id="c6403-149">Cursor Confinement</span></span>](#cursor-confinement)
-   [<span data-ttu-id="c6403-150">Уничтожение курсора</span><span class="sxs-lookup"><span data-stu-id="c6403-150">Cursor Destruction</span></span>](#cursor-destruction)
-   [<span data-ttu-id="c6403-151">Дублирование курсора</span><span class="sxs-lookup"><span data-stu-id="c6403-151">Cursor Duplication</span></span>](#cursor-duplication)
-   [<span data-ttu-id="c6403-152">Курсор класса окна</span><span class="sxs-lookup"><span data-stu-id="c6403-152">The Window Class Cursor</span></span>](#the-window-class-cursor)

## <a name="the-hot-spot"></a><span data-ttu-id="c6403-153">Активная разактивная области</span><span class="sxs-lookup"><span data-stu-id="c6403-153">The Hot Spot</span></span>

<span data-ttu-id="c6403-154">В курсоре пиксел, именуемый *активной* точкой, отмечает точное расположение на экране, на которое влияет событие мыши, например нажатие кнопки мыши.</span><span class="sxs-lookup"><span data-stu-id="c6403-154">In the cursor, a pixel called the *hot spot* marks the exact screen location that is affected by a mouse event, such as clicking a mouse button.</span></span> <span data-ttu-id="c6403-155">Обычно активная точка является фокальной точкой курсора.</span><span class="sxs-lookup"><span data-stu-id="c6403-155">Typically, the hot spot is the focal point of the cursor.</span></span> <span data-ttu-id="c6403-156">Система отслеживает и распознает этот момент как позицию курсора.</span><span class="sxs-lookup"><span data-stu-id="c6403-156">The system tracks and recognizes this point as the position of the cursor.</span></span> <span data-ttu-id="c6403-157">Например, типичные гиперобъекты — это пиксел на кончике курсора в форме стрелки и пиксель в середине курсора в виде перекрестной формы.</span><span class="sxs-lookup"><span data-stu-id="c6403-157">For example, typical hot spots are the pixel at the tip of an arrow-shaped cursor and the pixel in the middle of a crosshair-shaped cursor.</span></span> <span data-ttu-id="c6403-158">На следующих изображениях показаны два курсора из программы рисования, в которых горячие участки связаны с кончиком кисти и перекрестной заливкой.</span><span class="sxs-lookup"><span data-stu-id="c6403-158">The following images shows two cursors from a drawing program, in which hot spots are associated with the tip of the brush and the crosshair of the paint can.</span></span>

![Гиперобъекты на двух курсорах](images/cursorhotspot.png)

<span data-ttu-id="c6403-160">При возникновении события ввода мыши драйвер мыши преобразует событие в соответствующее сообщение мыши, которое содержит координаты активной точки.</span><span class="sxs-lookup"><span data-stu-id="c6403-160">When a mouse input event occurs, the mouse driver translates the event into an appropriate mouse message that includes the coordinates of the hot spot.</span></span> <span data-ttu-id="c6403-161">Система отправляет сообщение мыши в окно, содержащее активную точку, или на окно, которое захватывает входные данные мыши.</span><span class="sxs-lookup"><span data-stu-id="c6403-161">The system sends the mouse message to the window that contains the hot spot or to the window that is capturing mouse input.</span></span> <span data-ttu-id="c6403-162">Дополнительные сведения см. в разделе Ввод с помощью [мыши](/windows/desktop/inputdev/mouse-input).</span><span class="sxs-lookup"><span data-stu-id="c6403-162">For more information, see [Mouse Input](/windows/desktop/inputdev/mouse-input).</span></span>

## <a name="the-mouse-and-the-cursor"></a><span data-ttu-id="c6403-163">Мышь и курсор</span><span class="sxs-lookup"><span data-stu-id="c6403-163">The Mouse and the Cursor</span></span>

<span data-ttu-id="c6403-164">Система отражает движение мыши, перемещая курсор на экране соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="c6403-164">The system reflects the movement of the mouse by moving the cursor on the screen accordingly.</span></span> <span data-ttu-id="c6403-165">Когда курсор перемещается над различными частями окна или в разные окна, система (или приложение) изменяет внешний вид курсора.</span><span class="sxs-lookup"><span data-stu-id="c6403-165">As the cursor moves over different parts of windows or into different windows, the system (or an application) changes the appearance of the cursor.</span></span> <span data-ttu-id="c6403-166">Например, когда курсор пересекается над гиперссылкой, система меняет курсор с стрелки на руки.</span><span class="sxs-lookup"><span data-stu-id="c6403-166">For example, when the cursor crosses over a hyperlink, the system changes the cursor from an arrow to a hand.</span></span>

![изменение стандартного курсора на руки при наведении на гиперссылку](images/cursorchangingstate.png)

<span data-ttu-id="c6403-168">Если в системе нет мыши, система отображает и перемещает курсор, только когда пользователь выбирает определенные системные команды, например, используемые для изменения размера или перемещения окна.</span><span class="sxs-lookup"><span data-stu-id="c6403-168">If the system does not have a mouse, the system displays and moves the cursor only when the user chooses certain system commands, such as those used to size or move a window.</span></span> <span data-ttu-id="c6403-169">Чтобы предоставить пользователю метод отображения и перемещения курсора, когда мышь недоступна, приложение может использовать функции курсора для имитации перемещения мыши.</span><span class="sxs-lookup"><span data-stu-id="c6403-169">To provide the user with a method of displaying and moving the cursor when a mouse is not available, an application can use the cursor functions to simulate mouse movement.</span></span> <span data-ttu-id="c6403-170">Учитывая эту возможность моделирования, пользователь может перемещать курсор с помощью клавиш со стрелками.</span><span class="sxs-lookup"><span data-stu-id="c6403-170">Given this simulation capability, the user can use the arrow keys to move the cursor.</span></span>

## <a name="cursor-creation"></a><span data-ttu-id="c6403-171">Создание курсора</span><span class="sxs-lookup"><span data-stu-id="c6403-171">Cursor Creation</span></span>

<span data-ttu-id="c6403-172">Поскольку стандартные курсоры заранее определены, их не нужно создавать.</span><span class="sxs-lookup"><span data-stu-id="c6403-172">Because standard cursors are predefined, it is not necessary to create them.</span></span> <span data-ttu-id="c6403-173">Чтобы использовать стандартный курсор, приложение получает маркер курсора с помощью функции [**лоадкурсор**](/windows/desktop/api/Winuser/nf-winuser-loadcursora) или [**лоадимаже**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) .</span><span class="sxs-lookup"><span data-stu-id="c6403-173">To use a standard cursor, an application retrieves a cursor handle by using the [**LoadCursor**](/windows/desktop/api/Winuser/nf-winuser-loadcursora) or [**LoadImage**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) function.</span></span> <span data-ttu-id="c6403-174">*Маркер курсора* — это уникальное значение типа **хкурсор** , определяющее стандартный или пользовательский курсор.</span><span class="sxs-lookup"><span data-stu-id="c6403-174">A *cursor handle* is a unique value of the **HCURSOR** type that identifies a standard or custom cursor.</span></span>

<span data-ttu-id="c6403-175">Чтобы создать настраиваемый курсор для приложения, обычно используется графическое приложение и курсор включается в качестве ресурса в файл определения ресурса приложения.</span><span class="sxs-lookup"><span data-stu-id="c6403-175">To create a custom cursor for an application, you typically use a graphics application and include the cursor as a resource in the application's resource-definition file.</span></span> <span data-ttu-id="c6403-176">Во время выполнения вызовите [**лоадкурсор**](/windows/desktop/api/Winuser/nf-winuser-loadcursora) , чтобы получить маркер курсора.</span><span class="sxs-lookup"><span data-stu-id="c6403-176">At run time, call [**LoadCursor**](/windows/desktop/api/Winuser/nf-winuser-loadcursora) to retrieve the cursor handle.</span></span> <span data-ttu-id="c6403-177">Ресурсы курсоров содержат данные для нескольких различных устройств вывода.</span><span class="sxs-lookup"><span data-stu-id="c6403-177">Cursor resources contain data for several different display devices.</span></span> <span data-ttu-id="c6403-178">Функция **лоадкурсор** автоматически выбирает наиболее подходящие данные для текущего устройства вывода.</span><span class="sxs-lookup"><span data-stu-id="c6403-178">The **LoadCursor** function automatically selects the most appropriate data for the current display device.</span></span> <span data-ttu-id="c6403-179">Для загрузки курсора непосредственно из. CUR или. ANI, используйте функцию [**лоадкурсорфромфиле**](/windows/desktop/api/Winuser/nf-winuser-loadcursorfromfilea) .</span><span class="sxs-lookup"><span data-stu-id="c6403-179">To load a cursor directly from a .CUR or .ANI file, use the [**LoadCursorFromFile**](/windows/desktop/api/Winuser/nf-winuser-loadcursorfromfilea) function.</span></span>

<span data-ttu-id="c6403-180">Можно также создать пользовательский курсор во время выполнения с помощью функции [**креатеикониндирект**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) , которая создает курсор на основе содержимого структуры [**иконинфо**](/windows/desktop/api/Winuser/ns-winuser-iconinfo) .</span><span class="sxs-lookup"><span data-stu-id="c6403-180">You can also create a custom cursor at run time by using the [**CreateIconIndirect**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) function, which creates a cursor based on the content of an [**ICONINFO**](/windows/desktop/api/Winuser/ns-winuser-iconinfo) structure.</span></span> <span data-ttu-id="c6403-181">Функция [**жетиконинфо**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo) заполняет эту структуру координатами горячей точки и информацией о связанной маске и цвете.</span><span class="sxs-lookup"><span data-stu-id="c6403-181">The [**GetIconInfo**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo) function fills this structure with hot spot coordinates and information concerning the associated mask and color.</span></span>

<span data-ttu-id="c6403-182">Приложения должны реализовывать пользовательские курсоры как ресурсы и использовать [**лоадкурсор**](/windows/desktop/api/Winuser/nf-winuser-loadcursora), [**лоадкурсорфромфиле**](/windows/desktop/api/Winuser/nf-winuser-loadcursorfromfilea)или [**лоадимаже**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) , а не создавать курсор во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="c6403-182">Applications should implement custom cursors as resources and use [**LoadCursor**](/windows/desktop/api/Winuser/nf-winuser-loadcursora), [**LoadCursorFromFile**](/windows/desktop/api/Winuser/nf-winuser-loadcursorfromfilea), or [**LoadImage**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) rather than create the cursor at run time.</span></span> <span data-ttu-id="c6403-183">Использование ресурсов курсора позволяет избежать зависимости устройств, упрощает локализацию и позволяет приложениям совместно использовать макеты курсоров.</span><span class="sxs-lookup"><span data-stu-id="c6403-183">Using cursor resources avoids device dependence, simplifies localization, and enables applications to share cursor designs.</span></span>

<span data-ttu-id="c6403-184">Функция [**креатеиконфромресаурцеекс**](/windows/desktop/api/Winuser/nf-winuser-createiconfromresourceex) позволяет приложению создавать значки и курсоры на основе данных ресурса.</span><span class="sxs-lookup"><span data-stu-id="c6403-184">The [**CreateIconFromResourceEx**](/windows/desktop/api/Winuser/nf-winuser-createiconfromresourceex) function enables an application to create icons and cursors based on resource data.</span></span> <span data-ttu-id="c6403-185">**Креатеиконфромресаурцеекс** создает курсор на основе данных двоичных ресурсов из других исполняемых файлов (exe) или библиотек DLL.</span><span class="sxs-lookup"><span data-stu-id="c6403-185">**CreateIconFromResourceEx** creates a cursor based on binary resource data from other executable (.exe) files or DLLs.</span></span> <span data-ttu-id="c6403-186">Перед ним должны стоять вызовы функции [**лукупиконидфромдиректорекс**](/windows/desktop/api/Winuser/nf-winuser-lookupiconidfromdirectoryex) , а также несколько функций ресурсов.</span><span class="sxs-lookup"><span data-stu-id="c6403-186">It must be preceded by calls to the [**LookupIconIdFromDirectoryEx**](/windows/desktop/api/Winuser/nf-winuser-lookupiconidfromdirectoryex) function, as well as several resource functions.</span></span> <span data-ttu-id="c6403-187">**Лукупиконидфромдиректорекс** определяет наиболее подходящие данные курсора для текущего устройства вывода.</span><span class="sxs-lookup"><span data-stu-id="c6403-187">**LookupIconIdFromDirectoryEx** identifies the most appropriate cursor data for the current display device.</span></span> <span data-ttu-id="c6403-188">Дополнительные сведения о функциях ресурсов см. в разделе [ресурсы](resources.md).</span><span class="sxs-lookup"><span data-stu-id="c6403-188">For more information about resource functions, see [Resources](resources.md).</span></span>

## <a name="cursor-location-and-appearance"></a><span data-ttu-id="c6403-189">Расположение и внешний вид курсора</span><span class="sxs-lookup"><span data-stu-id="c6403-189">Cursor Location and Appearance</span></span>

<span data-ttu-id="c6403-190">Система автоматически отображает курсор мыши и обновляет его позицию на экране.</span><span class="sxs-lookup"><span data-stu-id="c6403-190">The system automatically displays a cursor for the mouse and updates its position on the screen.</span></span> <span data-ttu-id="c6403-191">Вы можете получить текущие экранные координаты курсора и переместить курсор в любое место на экране с помощью функций [**жеткурсорпос**](/windows/desktop/api/Winuser/nf-winuser-getcursorpos) и [**сеткурсорпос**](/windows/desktop/api/Winuser/nf-winuser-setcursorpos) соответственно.</span><span class="sxs-lookup"><span data-stu-id="c6403-191">You can obtain current screen coordinates of the cursor and move the cursor to any location on the screen by using the [**GetCursorPos**](/windows/desktop/api/Winuser/nf-winuser-getcursorpos) and [**SetCursorPos**](/windows/desktop/api/Winuser/nf-winuser-setcursorpos) functions, respectively.</span></span>

<span data-ttu-id="c6403-192">Вы также можете получить маркер текущего курсора с помощью функции [**oncursor**](/windows/desktop/api/Winuser/nf-winuser-getcursor) , а также задать курсор с помощью функции [**сеткурсор**](/windows/desktop/api/Winuser/nf-winuser-setcursor) .</span><span class="sxs-lookup"><span data-stu-id="c6403-192">You can also retrieve the handle to the current cursor by using the [**GetCursor**](/windows/desktop/api/Winuser/nf-winuser-getcursor) function, and you can set the cursor by using the [**SetCursor**](/windows/desktop/api/Winuser/nf-winuser-setcursor) function.</span></span> <span data-ttu-id="c6403-193">После вызова **сеткурсор** внешний вид курсора не меняется до тех пор, пока указатель мыши не будет перемещен, курсор явно задается другим курсором или выполняется системная команда.</span><span class="sxs-lookup"><span data-stu-id="c6403-193">After you call **SetCursor**, the appearance of the cursor does not change until either the mouse moves, the cursor is explicitly set to a different cursor, or a system command is executed.</span></span>

<span data-ttu-id="c6403-194">Когда пользователь перемещает мышь, система перерисовывает курсор в новом месте.</span><span class="sxs-lookup"><span data-stu-id="c6403-194">When the user moves the mouse, the system redraws the cursor at the new location.</span></span> <span data-ttu-id="c6403-195">Система автоматически перерисовывает дизайн курсора, связанный с окном, на которое указывает курсор.</span><span class="sxs-lookup"><span data-stu-id="c6403-195">The system automatically redraws the cursor design associated with the window to which the cursor is pointing.</span></span>

<span data-ttu-id="c6403-196">Можно скрыть и снова отобразить курсор, не изменяя дизайн курсора с помощью функции [**шовкурсор**](/windows/desktop/api/Winuser/nf-winuser-showcursor) .</span><span class="sxs-lookup"><span data-stu-id="c6403-196">You can hide and redisplay the cursor, without changing the cursor design, by using the [**ShowCursor**](/windows/desktop/api/Winuser/nf-winuser-showcursor) function.</span></span> <span data-ttu-id="c6403-197">Эта функция использует внутренний счетчик, чтобы определить, когда следует скрывать или отображать курсор.</span><span class="sxs-lookup"><span data-stu-id="c6403-197">This function uses an internal counter to determine when to hide or display the cursor.</span></span> <span data-ttu-id="c6403-198">Попытка отобразить курсор увеличивает значение счетчика; попытка скрыть курсор уменьшает значение счетчика.</span><span class="sxs-lookup"><span data-stu-id="c6403-198">An attempt to show the cursor increments the counter; an attempt to hide the cursor decrements the counter.</span></span> <span data-ttu-id="c6403-199">Курсор отображается только в том случае, если этот счетчик больше или равен нулю.</span><span class="sxs-lookup"><span data-stu-id="c6403-199">The cursor is visible only if this counter is greater than or equal to zero.</span></span>

<span data-ttu-id="c6403-200">Функция [**жеткурсоринфо**](/windows/desktop/api/Winuser/nf-winuser-getcursorinfo) получает следующие сведения для глобального курсора: указывает, является ли курсор скрытым или отображается, маркером для курсора и координатами курсора.</span><span class="sxs-lookup"><span data-stu-id="c6403-200">The [**GetCursorInfo**](/windows/desktop/api/Winuser/nf-winuser-getcursorinfo) function gets the following information for the global cursor: whether the cursor is hidden or shown, the handle to the cursor, and the coordinates of the cursor.</span></span>

## <a name="cursor-confinement"></a><span data-ttu-id="c6403-201">Конфинемент курсора</span><span class="sxs-lookup"><span data-stu-id="c6403-201">Cursor Confinement</span></span>

<span data-ttu-id="c6403-202">Можно ограничить курсор на прямоугольную область экрана с помощью функции [**клипкурсор**](/windows/desktop/api/Winuser/nf-winuser-clipcursor) .</span><span class="sxs-lookup"><span data-stu-id="c6403-202">You can confine the cursor to a rectangular area on the screen by using the [**ClipCursor**](/windows/desktop/api/Winuser/nf-winuser-clipcursor) function.</span></span> <span data-ttu-id="c6403-203">Это полезно, когда пользователь должен ответить на определенное событие в пределах области прямоугольника.</span><span class="sxs-lookup"><span data-stu-id="c6403-203">This is useful for when the user must respond to a certain event within the confined area of the rectangle.</span></span> <span data-ttu-id="c6403-204">Например, **клипкурсор** можно использовать для ограничения курсора на модальное диалоговое окно, предотвращая взаимодействие пользователя с другими окнами, пока диалоговое окно не закроется.</span><span class="sxs-lookup"><span data-stu-id="c6403-204">For example, you might use **ClipCursor** to confine the cursor to a modal dialog box, preventing the user from interacting with other windows until the dialog box is closed.</span></span>

<span data-ttu-id="c6403-205">Функция [**жетклипкурсор**](/windows/desktop/api/Winuser/nf-winuser-getclipcursor) получает экранные координаты прямоугольной области, к которой курсор временно ограничен.</span><span class="sxs-lookup"><span data-stu-id="c6403-205">The [**GetClipCursor**](/windows/desktop/api/Winuser/nf-winuser-getclipcursor) function retrieves the screen coordinates of the rectangular area to which the cursor is temporarily confined.</span></span> <span data-ttu-id="c6403-206">Если необходимо ограничить курсор, можно также использовать эту функцию для сохранения координат исходной области, в которой курсор может перемещаться.</span><span class="sxs-lookup"><span data-stu-id="c6403-206">When it is necessary to confine the cursor, you can also use this function to save the coordinates of the original area in which the cursor can move.</span></span> <span data-ttu-id="c6403-207">Затем можно восстановить курсор в исходную область, когда новая конфинемент больше не нужна.</span><span class="sxs-lookup"><span data-stu-id="c6403-207">Then, you can restore the cursor to the original area when the new confinement is no longer necessary.</span></span>

## <a name="cursor-destruction"></a><span data-ttu-id="c6403-208">Уничтожение курсора</span><span class="sxs-lookup"><span data-stu-id="c6403-208">Cursor Destruction</span></span>

<span data-ttu-id="c6403-209">Вы можете уничтожить маркер курсора и освободить память, используемую курсором, вызвав функцию [**дестройкурсор**](/windows/desktop/api/Winuser/nf-winuser-destroycursor) .</span><span class="sxs-lookup"><span data-stu-id="c6403-209">You can destroy the cursor handle and free the memory the cursor used by calling the [**DestroyCursor**](/windows/desktop/api/Winuser/nf-winuser-destroycursor) function.</span></span> <span data-ttu-id="c6403-210">Однако эта функция не влияет на общий курсор.</span><span class="sxs-lookup"><span data-stu-id="c6403-210">However, this function has no effect on a shared cursor.</span></span> <span data-ttu-id="c6403-211">Общий курсор действителен, пока модуль, из которого он был загружен, остается в памяти.</span><span class="sxs-lookup"><span data-stu-id="c6403-211">A shared cursor is valid as long as the module from which it was loaded remains in memory.</span></span> <span data-ttu-id="c6403-212">Следующие функции получают общий курсор:</span><span class="sxs-lookup"><span data-stu-id="c6403-212">The following functions obtain a shared cursor:</span></span>

-   [<span data-ttu-id="c6403-213">**лоадкурсор**</span><span class="sxs-lookup"><span data-stu-id="c6403-213">**LoadCursor**</span></span>](/windows/desktop/api/Winuser/nf-winuser-loadcursora)
-   [<span data-ttu-id="c6403-214">**лоадкурсорфромфиле**</span><span class="sxs-lookup"><span data-stu-id="c6403-214">**LoadCursorFromFile**</span></span>](/windows/desktop/api/Winuser/nf-winuser-loadcursorfromfilea)
-   <span data-ttu-id="c6403-215">[**Лоадимаже**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) (при использовании **\_ общего** флага LR)</span><span class="sxs-lookup"><span data-stu-id="c6403-215">[**LoadImage**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) (if you use the **LR\_SHARED** flag)</span></span>
-   <span data-ttu-id="c6403-216">[**Копимаже**](/windows/desktop/api/Winuser/nf-winuser-copyimage) (если используется флаг **\_ Копиретурнорг LR** , а *химаже* является общим курсором)</span><span class="sxs-lookup"><span data-stu-id="c6403-216">[**CopyImage**](/windows/desktop/api/Winuser/nf-winuser-copyimage) (if you use the **LR\_COPYRETURNORG** flag and the *hImage* is a shared cursor)</span></span>

<span data-ttu-id="c6403-217">Если курсор, созданный с помощью функции [**креатеикониндирект**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) , больше не нужен, то следует уничтожить курсор.</span><span class="sxs-lookup"><span data-stu-id="c6403-217">When you no longer need a cursor you created by using the [**CreateIconIndirect**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) function, you should destroy the cursor.</span></span> <span data-ttu-id="c6403-218">Функция [**дестройикон**](/windows/desktop/api/Winuser/nf-winuser-destroyicon) уничтожает маркер курсора и освобождает память, используемую курсором.</span><span class="sxs-lookup"><span data-stu-id="c6403-218">The [**DestroyIcon**](/windows/desktop/api/Winuser/nf-winuser-destroyicon) function destroys the cursor handle and frees any memory the cursor used.</span></span> <span data-ttu-id="c6403-219">Используйте эту функцию только для курсоров, созданных с помощью **креатеикониндирект**.</span><span class="sxs-lookup"><span data-stu-id="c6403-219">Use this function only on cursors that were created with **CreateIconIndirect**.</span></span>

## <a name="cursor-duplication"></a><span data-ttu-id="c6403-220">Дублирование курсора</span><span class="sxs-lookup"><span data-stu-id="c6403-220">Cursor Duplication</span></span>

<span data-ttu-id="c6403-221">Функция [**копикурсор**](/windows/desktop/api/Winuser/nf-winuser-copycursor) копирует маркер курсора.</span><span class="sxs-lookup"><span data-stu-id="c6403-221">The [**CopyCursor**](/windows/desktop/api/Winuser/nf-winuser-copycursor) function copies a cursor handle.</span></span> <span data-ttu-id="c6403-222">Это позволяет коду приложения или библиотеки DLL получить маркер в курсор, принадлежащий другому модулю.</span><span class="sxs-lookup"><span data-stu-id="c6403-222">This enables application or DLL code to retrieve the handle to a cursor owned by another module.</span></span> <span data-ttu-id="c6403-223">Затем, при освобождении другого модуля, модуль, который скопировал курсор, может по-прежнему использовать конструкцию курсора.</span><span class="sxs-lookup"><span data-stu-id="c6403-223">Then, if the other module is freed, the module that copied the cursor can still use the cursor design.</span></span>

<span data-ttu-id="c6403-224">Сведения о том, как добавлять, удалять или заменять ресурсы курсора в исполняемых файлах, см. в разделе [ресурсы](resources.md).</span><span class="sxs-lookup"><span data-stu-id="c6403-224">For information on how to add, remove, or replace cursor resources in executable files, see [Resources](resources.md).</span></span>

## <a name="the-window-class-cursor"></a><span data-ttu-id="c6403-225">Курсор класса окна</span><span class="sxs-lookup"><span data-stu-id="c6403-225">The Window Class Cursor</span></span>

<span data-ttu-id="c6403-226">При регистрации класса окна с помощью функции [**registerClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) можно назначить ей курсор по умолчанию, известный как *курсор класса*.</span><span class="sxs-lookup"><span data-stu-id="c6403-226">When you register a window class, using the [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) function, you can assign it a default cursor, known as the *class cursor*.</span></span> <span data-ttu-id="c6403-227">После того как приложение регистрирует класс Window, каждое окно этого класса имеет указанный курсор класса.</span><span class="sxs-lookup"><span data-stu-id="c6403-227">After the application registers the window class, each window of that class has the specified class cursor.</span></span>

<span data-ttu-id="c6403-228">Чтобы переопределить курсор класса, обработайте сообщение [**WM \_ сеткурсор**](wm-setcursor.md) .</span><span class="sxs-lookup"><span data-stu-id="c6403-228">To override the class cursor, process the [**WM\_SETCURSOR**](wm-setcursor.md) message.</span></span> <span data-ttu-id="c6403-229">Можно также заменить курсор класса с помощью функции [**сеткласслонг**](/windows/desktop/api/winuser/nf-winuser-setclasslonga) .</span><span class="sxs-lookup"><span data-stu-id="c6403-229">You can also replace a class cursor by using the [**SetClassLong**](/windows/desktop/api/winuser/nf-winuser-setclasslonga) function.</span></span> <span data-ttu-id="c6403-230">Эта функция изменяет параметры окна по умолчанию для всех окон указанного класса.</span><span class="sxs-lookup"><span data-stu-id="c6403-230">This function changes the default window settings for all windows of a specified class.</span></span> <span data-ttu-id="c6403-231">Дополнительные сведения см. в разделе [курсор класса](/windows/desktop/winmsg/about-window-classes).</span><span class="sxs-lookup"><span data-stu-id="c6403-231">For more information, see [Class Cursor](/windows/desktop/winmsg/about-window-classes).</span></span>

 

 