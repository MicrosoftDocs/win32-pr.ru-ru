---
title: О значках
description: В этом разделе обсуждаются значки.
ms.assetid: 67867460-07f6-460f-9263-05bbf3474744
keywords:
- ресурсы, значки
- значки, горячие участки
- значки, стандартные
- стандартные значки
- значки, пользовательские
- пользовательские значки
- значки, размеры
- Создание значков
- значки, отображение
- значки, уничтожение
- значки, дублирование
- значки, создание
- отображение значков
- уничтожение значков
- дублирование значков
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4bda00540d613b6d0efd4a080251ebd6407560ed
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "104337300"
---
# <a name="about-icons"></a><span data-ttu-id="63582-118">О значках</span><span class="sxs-lookup"><span data-stu-id="63582-118">About Icons</span></span>

<span data-ttu-id="63582-119">Система использует значки во всем пользовательском интерфейсе для представления таких объектов, как файлы, папки, ярлыки, приложения и документы.</span><span class="sxs-lookup"><span data-stu-id="63582-119">The system uses icons throughout the user interface to represent objects such as files, folders, shortcuts, applications, and documents.</span></span> <span data-ttu-id="63582-120">Функции значков позволяют приложениям создавать, загружать, отображать, упорядочивать, анимировать и удалять значки.</span><span class="sxs-lookup"><span data-stu-id="63582-120">The icon functions enable applications to create, load, display, arrange, animate, and destroy icons.</span></span> <span data-ttu-id="63582-121">Сведения о задании значков для типов файлов см. в разделе [**екстрактикон**](/windows/desktop/api/Shellapi/nf-shellapi-extracticona).</span><span class="sxs-lookup"><span data-stu-id="63582-121">For information on specifying icons for file types, see [**ExtractIcon**](/windows/desktop/api/Shellapi/nf-shellapi-extracticona).</span></span>

<span data-ttu-id="63582-122">В этом обзоре содержатся сведения по следующим темам:</span><span class="sxs-lookup"><span data-stu-id="63582-122">This overview provides information on the following topics:</span></span>

-   [<span data-ttu-id="63582-123">Значок горячей точки</span><span class="sxs-lookup"><span data-stu-id="63582-123">Icon Hot Spot</span></span>](#icon-hot-spot)
-   [<span data-ttu-id="63582-124">Типы значков</span><span class="sxs-lookup"><span data-stu-id="63582-124">Icon Types</span></span>](#icon-types)
-   [<span data-ttu-id="63582-125">Размеры значков</span><span class="sxs-lookup"><span data-stu-id="63582-125">Icon Sizes</span></span>](#icon-sizes)
    -   [<span data-ttu-id="63582-126">Изменение размера небольшого значка системы</span><span class="sxs-lookup"><span data-stu-id="63582-126">To change the size of the system small icon</span></span>](#to-change-the-size-of-the-system-small-icon)
    -   [<span data-ttu-id="63582-127">Получение размера небольшого системного значка системы</span><span class="sxs-lookup"><span data-stu-id="63582-127">To retrieve the size of the system small icon</span></span>](#to-retrieve-the-size-of-the-system-small-icon)
    -   [<span data-ttu-id="63582-128">Получение размера системного значка системы</span><span class="sxs-lookup"><span data-stu-id="63582-128">To retrieve the size of the system large icon</span></span>](#to-retrieve-the-size-of-the-system-large-icon)
    -   [<span data-ttu-id="63582-129">Получение размера маленького значка оболочки</span><span class="sxs-lookup"><span data-stu-id="63582-129">To retrieve the size of the shell small icon</span></span>](#to-retrieve-the-size-of-the-shell-small-icon)
    -   [<span data-ttu-id="63582-130">Изменение размера крупного значка</span><span class="sxs-lookup"><span data-stu-id="63582-130">To change the size of the large icon</span></span>](#to-change-the-size-of-the-large-icon)
    -   [<span data-ttu-id="63582-131">Получение размера большого значка оболочки</span><span class="sxs-lookup"><span data-stu-id="63582-131">To retrieve the size of the shell large icon</span></span>](#to-retrieve-the-size-of-the-shell-large-icon)
-   [<span data-ttu-id="63582-132">Создание значка</span><span class="sxs-lookup"><span data-stu-id="63582-132">Icon Creation</span></span>](#icon-creation)
-   [<span data-ttu-id="63582-133">Отображение значков</span><span class="sxs-lookup"><span data-stu-id="63582-133">Icon Display</span></span>](#icon-display)
-   [<span data-ttu-id="63582-134">Уничтожение значка</span><span class="sxs-lookup"><span data-stu-id="63582-134">Icon Destruction</span></span>](#icon-destruction)
-   [<span data-ttu-id="63582-135">Дублирование значков</span><span class="sxs-lookup"><span data-stu-id="63582-135">Icon Duplication</span></span>](#icon-duplication)

## <a name="icon-hot-spot"></a><span data-ttu-id="63582-136">Значок горячей точки</span><span class="sxs-lookup"><span data-stu-id="63582-136">Icon Hot Spot</span></span>

<span data-ttu-id="63582-137">Один из пикселов значка обозначается как [Активная](#icon-hot-spot)точка, то есть система отслеживается и распознается как расположение значка.</span><span class="sxs-lookup"><span data-stu-id="63582-137">One of the pixels in an icon is designated as the [hot spot](#icon-hot-spot), which is the point the system tracks and recognizes as the position of the icon.</span></span> <span data-ttu-id="63582-138">Активной точкой значка обычно является пиксель, расположенный в центре значка.</span><span class="sxs-lookup"><span data-stu-id="63582-138">An icon's hot spot is typically the pixel located at the center of the icon.</span></span> <span data-ttu-id="63582-139">Если для создания значка используется функция [**креатеикониндирект**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) , можно указать любой пиксель в качестве горячей точки.</span><span class="sxs-lookup"><span data-stu-id="63582-139">If you use the [**CreateIconIndirect**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) function to create an icon, you can specify any pixel to be the hot spot.</span></span>

## <a name="icon-types"></a><span data-ttu-id="63582-140">Типы значков</span><span class="sxs-lookup"><span data-stu-id="63582-140">Icon Types</span></span>

<span data-ttu-id="63582-141">Операционная система предоставляет набор *стандартных значков* , доступных любому приложению для использования в любое время.</span><span class="sxs-lookup"><span data-stu-id="63582-141">The operating system provides a set of *standard icons* that are available for any application to use at any time.</span></span> <span data-ttu-id="63582-142">Файлы заголовков пакета средств разработки программного обеспечения (SDK) содержат идентификаторы стандартных значков — идентификаторы начинаются с префикса **иди \_** .</span><span class="sxs-lookup"><span data-stu-id="63582-142">The software development kit (SDK) header files contain identifiers for the standard icons—the identifiers begin with the **IDI\_** prefix.</span></span>

<span data-ttu-id="63582-143">С каждым стандартным значком связан соответствующий образ по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="63582-143">Each standard icon has a corresponding default image associated with it.</span></span> <span data-ttu-id="63582-144">Пользователь может в любое время заменить изображение по умолчанию, связанное с любым стандартным курсором.</span><span class="sxs-lookup"><span data-stu-id="63582-144">The user can replace the default image associated with any standard cursor at any time.</span></span>

<span data-ttu-id="63582-145">*Пользовательские значки* предназначены для использования в определенном приложении и могут быть любой конструкцией.</span><span class="sxs-lookup"><span data-stu-id="63582-145">*Custom icons* are designed for use in a particular application and can be any design.</span></span> <span data-ttu-id="63582-146">Ниже приведены несколько пользовательских значков.</span><span class="sxs-lookup"><span data-stu-id="63582-146">Following are several custom icons.</span></span>

![несколько пользовательских значков](images/csicn-02.png)

## <a name="icon-sizes"></a><span data-ttu-id="63582-148">Размеры значков</span><span class="sxs-lookup"><span data-stu-id="63582-148">Icon Sizes</span></span>

<span data-ttu-id="63582-149">Система использует четыре размера значков:</span><span class="sxs-lookup"><span data-stu-id="63582-149">The system uses four icon sizes:</span></span>

-   <span data-ttu-id="63582-150">Немалая система</span><span class="sxs-lookup"><span data-stu-id="63582-150">System small</span></span>
-   <span data-ttu-id="63582-151">Крупные системы</span><span class="sxs-lookup"><span data-stu-id="63582-151">System large</span></span>
-   <span data-ttu-id="63582-152">Малая оболочка</span><span class="sxs-lookup"><span data-stu-id="63582-152">Shell small</span></span>
-   <span data-ttu-id="63582-153">Оболочка — крупный</span><span class="sxs-lookup"><span data-stu-id="63582-153">Shell large</span></span>

<span data-ttu-id="63582-154">*Маленький значок системы* отображается в заголовке окна.</span><span class="sxs-lookup"><span data-stu-id="63582-154">The *system small icon* is displayed in the window caption.</span></span>

### <a name="to-change-the-size-of-the-system-small-icon"></a><span data-ttu-id="63582-155">Изменение размера небольшого значка системы</span><span class="sxs-lookup"><span data-stu-id="63582-155">To change the size of the system small icon</span></span>

1.  <span data-ttu-id="63582-156">В панели управления щелкните **Отображение**, а затем выберите вкладку **вид** .</span><span class="sxs-lookup"><span data-stu-id="63582-156">From Control Panel, click **Display**, then click the **Appearance** tab.</span></span>
2.  <span data-ttu-id="63582-157">В списке **элемент** выберите **кнопки заголовков** , а затем задайте поле **Размер** .</span><span class="sxs-lookup"><span data-stu-id="63582-157">Select **Caption Buttons** from the **Item** list, then set the **Size** field.</span></span>

### <a name="to-retrieve-the-size-of-the-system-small-icon"></a><span data-ttu-id="63582-158">Получение размера небольшого системного значка системы</span><span class="sxs-lookup"><span data-stu-id="63582-158">To retrieve the size of the system small icon</span></span>

-   <span data-ttu-id="63582-159">Вызовите функцию [**жетсистемметрикс**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) с **SM \_ ккссмикон** и **SM \_ цисмикон**.</span><span class="sxs-lookup"><span data-stu-id="63582-159">Call the [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) function with **SM\_CXSMICON** and **SM\_CYSMICON**.</span></span>

<span data-ttu-id="63582-160">*Системный значок системы* в основном используется приложениями, но он также отображается в диалоговом окне ALT + TAB.</span><span class="sxs-lookup"><span data-stu-id="63582-160">The *system large icon* is mainly used by applications, but it is also displayed in the Alt+Tab dialog.</span></span> <span data-ttu-id="63582-161">Функции [**креатеиконфромресаурце**](/windows/desktop/api/Winuser/nf-winuser-createiconfromresource), [**дравикон**](/windows/desktop/api/Winuser/nf-winuser-drawicon), [**екстрактассоЦиатедикон**](/windows/desktop/api/Shellapi/nf-shellapi-extractassociatedicona), [**екстрактикон**](/windows/desktop/api/Shellapi/nf-shellapi-extracticona), [**екстрактиконекс**](/windows/desktop/api/Shellapi/nf-shellapi-extracticonexa)и [**LoadIcon**](/windows/desktop/api/Winuser/nf-winuser-loadicona) используют крупные системные значки.</span><span class="sxs-lookup"><span data-stu-id="63582-161">The [**CreateIconFromResource**](/windows/desktop/api/Winuser/nf-winuser-createiconfromresource), [**DrawIcon**](/windows/desktop/api/Winuser/nf-winuser-drawicon), [**ExtractAssociatedIcon**](/windows/desktop/api/Shellapi/nf-shellapi-extractassociatedicona), [**ExtractIcon**](/windows/desktop/api/Shellapi/nf-shellapi-extracticona), [**ExtractIconEx**](/windows/desktop/api/Shellapi/nf-shellapi-extracticonexa), and [**LoadIcon**](/windows/desktop/api/Winuser/nf-winuser-loadicona) functions all use system large icons.</span></span> <span data-ttu-id="63582-162">Размер крупного системного значка определяется видеодрайвером, поэтому его нельзя изменить.</span><span class="sxs-lookup"><span data-stu-id="63582-162">The size of the system large icon is defined by the video driver, therefore it cannot be changed.</span></span>

### <a name="to-retrieve-the-size-of-the-system-large-icon"></a><span data-ttu-id="63582-163">Получение размера системного значка системы</span><span class="sxs-lookup"><span data-stu-id="63582-163">To retrieve the size of the system large icon</span></span>

-   <span data-ttu-id="63582-164">Вызовите [**жетсистемметрикс**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) с **SM \_ кксикон** и **SM \_ циикон**.</span><span class="sxs-lookup"><span data-stu-id="63582-164">Call [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) with **SM\_CXICON** and **SM\_CYICON**.</span></span>

<span data-ttu-id="63582-165">Функции [**креатеикон**](/windows/desktop/api/Winuser/nf-winuser-createicon), [**креатеиконфромресаурцеекс**](/windows/desktop/api/Winuser/nf-winuser-createiconfromresourceex), [**креатеикониндирект**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect)и [**шжетфилеинфо**](/windows/win32/api/shellapi/nf-shellapi-shgetfileinfoa) можно использовать для работы со значками в размерах, отличных от размера системы.</span><span class="sxs-lookup"><span data-stu-id="63582-165">The [**CreateIcon**](/windows/desktop/api/Winuser/nf-winuser-createicon), [**CreateIconFromResourceEx**](/windows/desktop/api/Winuser/nf-winuser-createiconfromresourceex), [**CreateIconIndirect**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect), and [**SHGetFileInfo**](/windows/win32/api/shellapi/nf-shellapi-shgetfileinfoa) functions can be used to work with icons in sizes other than system large.</span></span>

<span data-ttu-id="63582-166">*Маленький значок оболочки* используется в проводнике Windows и общих диалоговых окнах.</span><span class="sxs-lookup"><span data-stu-id="63582-166">The *shell small icon* is used in the Windows Explorer and the common dialogs.</span></span> <span data-ttu-id="63582-167">В настоящее время по умолчанию используется малый размер системы.</span><span class="sxs-lookup"><span data-stu-id="63582-167">Currently, this defaults to the system small size.</span></span>

### <a name="to-retrieve-the-size-of-the-shell-small-icon"></a><span data-ttu-id="63582-168">Получение размера маленького значка оболочки</span><span class="sxs-lookup"><span data-stu-id="63582-168">To retrieve the size of the shell small icon</span></span>

1.  <span data-ttu-id="63582-169">Используйте функцию [шжетфилеинфо](/windows/win32/api/shellapi/nf-shellapi-shgetfileinfoa) с параметром `SHGFI_SHELLICONSIZE | SHGFI_SMALLICON` для получения маркера в список системных образов.</span><span class="sxs-lookup"><span data-stu-id="63582-169">Use the [SHGetFileInfo](/windows/win32/api/shellapi/nf-shellapi-shgetfileinfoa) function with `SHGFI_SHELLICONSIZE | SHGFI_SMALLICON` to retrieve a handle to the system image list.</span></span>
2.  <span data-ttu-id="63582-170">Затем вызовите функцию [**ImageList \_ жетиконсизе**](/windows/win32/api/commctrl/nf-commctrl-imagelist_geticonsize) , чтобы получить размер значка.</span><span class="sxs-lookup"><span data-stu-id="63582-170">Then call the [**ImageList\_GetIconSize**](/windows/win32/api/commctrl/nf-commctrl-imagelist_geticonsize) function to get the icon size.</span></span>

<span data-ttu-id="63582-171">На рабочем столе используется крупный значок оболочки.</span><span class="sxs-lookup"><span data-stu-id="63582-171">The shell large icon is used on the desktop.</span></span>

### <a name="to-change-the-size-of-the-large-icon"></a><span data-ttu-id="63582-172">Изменение размера крупного значка</span><span class="sxs-lookup"><span data-stu-id="63582-172">To change the size of the large icon</span></span>

1.  <span data-ttu-id="63582-173">В панели управления нажмите кнопку **экран**, а затем выберите вкладку **вид** .</span><span class="sxs-lookup"><span data-stu-id="63582-173">From Control Panel , click **Display**, then click the **Appearance** tab,</span></span>
2.  <span data-ttu-id="63582-174">Выберите **значок** из списка **элемент** , а затем задайте значение поля **Размер** (этот размер хранится в реестре в разделе **hKey \_ текущий \_ пользователь \\ Панель управления — \\ \\ Размер значка оболочки рабочего стола виндовметрикс**).</span><span class="sxs-lookup"><span data-stu-id="63582-174">Select **Icon** from the **Item** list, then set the **Size** field (this size is stored in the registry, under **HKEY\_CURRENT\_USER\\Control Panel, Desktop\\WindowMetrics\\Shell Icon Size**).</span></span>
3.  <span data-ttu-id="63582-175">Щелкните **Plus!**</span><span class="sxs-lookup"><span data-stu-id="63582-175">Click the **Plus!**</span></span> <span data-ttu-id="63582-176">и установите флажок **использовать крупные значки** .</span><span class="sxs-lookup"><span data-stu-id="63582-176">tab and then select the **Use Large Icons** check box.</span></span>

### <a name="to-retrieve-the-size-of-the-shell-large-icon"></a><span data-ttu-id="63582-177">Получение размера большого значка оболочки</span><span class="sxs-lookup"><span data-stu-id="63582-177">To retrieve the size of the shell large icon</span></span>

1.  <span data-ttu-id="63582-178">Используйте функцию [**шжетфилеинфо**](/windows/win32/api/shellapi/nf-shellapi-shgetfileinfoa) с **шгфи \_ шелликонсизе** для получения маркера в список системных образов.</span><span class="sxs-lookup"><span data-stu-id="63582-178">Use the [**SHGetFileInfo**](/windows/win32/api/shellapi/nf-shellapi-shgetfileinfoa) function with **SHGFI\_SHELLICONSIZE** to retrieve a handle to the system image list.</span></span>
2.  <span data-ttu-id="63582-179">Затем вызовите функцию [**ImageList \_ жетиконсизе**](/windows/win32/api/commctrl/nf-commctrl-imagelist_geticonsize) , чтобы получить размер значка.</span><span class="sxs-lookup"><span data-stu-id="63582-179">Then call the [**ImageList\_GetIconSize**](/windows/win32/api/commctrl/nf-commctrl-imagelist_geticonsize) function to get the icon size.</span></span>

<span data-ttu-id="63582-180">В меню "Пуск" используются маленькие значки оболочки или крупные значки оболочки в зависимости от того, установлен ли флажок **использовать крупные значки** .</span><span class="sxs-lookup"><span data-stu-id="63582-180">The Start menu uses either shell small icons or shell large icons, depending on whether the **Use Large Icons** check box is selected.</span></span>

<span data-ttu-id="63582-181">Приложение должно предоставлять группы изображений значков в следующих размерах:</span><span class="sxs-lookup"><span data-stu-id="63582-181">Your application should supply groups of icon images in the following sizes:</span></span>

-   <span data-ttu-id="63582-182">48x48, цвет 256</span><span class="sxs-lookup"><span data-stu-id="63582-182">48x48, 256 color</span></span>
-   <span data-ttu-id="63582-183">32x32, 16 цветов</span><span class="sxs-lookup"><span data-stu-id="63582-183">32x32, 16 color</span></span>
-   <span data-ttu-id="63582-184">16x16 пикселей, 16 цветов</span><span class="sxs-lookup"><span data-stu-id="63582-184">16x16 pixels, 16 color</span></span>

<span data-ttu-id="63582-185">При заполнении структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) для использования при регистрации класса окна установите для элемента **Хикон** значок 32x32, а для элемента **хиконсм** — значок 16x16.</span><span class="sxs-lookup"><span data-stu-id="63582-185">When filling in the [**WNDCLASSEX**](/windows/win32/api/winuser/ns-winuser-wndclassexa) structure to be used in registering your window class, set the **hIcon** member to the 32x32 icon and the **hIconSm** member to the 16x16 icon.</span></span> <span data-ttu-id="63582-186">Дополнительные сведения о значках классов см. в разделе [значки классов](/windows/desktop/winmsg/about-window-classes).</span><span class="sxs-lookup"><span data-stu-id="63582-186">For more information about class icons, see [Class Icons](/windows/desktop/winmsg/about-window-classes).</span></span>

## <a name="icon-creation"></a><span data-ttu-id="63582-187">Создание значка</span><span class="sxs-lookup"><span data-stu-id="63582-187">Icon Creation</span></span>

<span data-ttu-id="63582-188">Стандартные значки являются стандартными, поэтому их не нужно создавать.</span><span class="sxs-lookup"><span data-stu-id="63582-188">Standard icons are predefined, so it is not necessary to create them.</span></span> <span data-ttu-id="63582-189">Чтобы использовать стандартный значок, приложение может получить свой обработчик с помощью функции [**лоадимаже**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) .</span><span class="sxs-lookup"><span data-stu-id="63582-189">To use a standard icon, an application can obtain its handle by using the [**LoadImage**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) function.</span></span> <span data-ttu-id="63582-190">*Маркер значка* — это уникальное значение типа **Хикон** , определяющее стандартный или пользовательский значок.</span><span class="sxs-lookup"><span data-stu-id="63582-190">An *icon handle* is a unique value of the **HICON** type that identifies a standard or custom icon.</span></span>

<span data-ttu-id="63582-191">Чтобы создать пользовательский значок для приложения, обычно используется графическое приложение и в файл определения ресурсов приложения включается [ресурс значка](./icon-resource.md) .</span><span class="sxs-lookup"><span data-stu-id="63582-191">To create a custom icon for an application, you would typically use a graphics application and include the [ICON Resource](./icon-resource.md) in the application's resource-definition file.</span></span> <span data-ttu-id="63582-192">Во время выполнения можно вызвать [**лоадикон**](/windows/desktop/api/Winuser/nf-winuser-loadicona) или [**лоадимаже**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) , чтобы получить маркер для значка.</span><span class="sxs-lookup"><span data-stu-id="63582-192">At run-time, you can call [**LoadIcon**](/windows/desktop/api/Winuser/nf-winuser-loadicona) or [**LoadImage**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) to retrieve a handle to the icon.</span></span> <span data-ttu-id="63582-193">Ресурс значка может содержать группу изображений для нескольких различных устройств вывода.</span><span class="sxs-lookup"><span data-stu-id="63582-193">An icon resource can contain a group of images for several different display devices.</span></span> <span data-ttu-id="63582-194">**Лоадикон** и **лоадимаже** автоматически выбирают наиболее подходящий значок из группы для текущего устройства вывода.</span><span class="sxs-lookup"><span data-stu-id="63582-194">**LoadIcon** and **LoadImage** automatically select the most appropriate icon from the group for the current display device.</span></span>

<span data-ttu-id="63582-195">Приложение может также создавать пользовательский значок во время выполнения с помощью функции [**креатеикониндирект**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) , которая создает значок на основе содержимого структуры [**иконинфо**](/windows/desktop/api/Winuser/ns-winuser-iconinfo) .</span><span class="sxs-lookup"><span data-stu-id="63582-195">An application can also create a custom icon at run-time by using the [**CreateIconIndirect**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) function, which creates an icon based on the contents of an [**ICONINFO**](/windows/desktop/api/Winuser/ns-winuser-iconinfo) structure.</span></span> <span data-ttu-id="63582-196">Функция [**жетиконинфо**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo) заполняет структуру с помощью координат горячей точки и сведений о битовой битовой маске и цветовой битовой карте для значка.</span><span class="sxs-lookup"><span data-stu-id="63582-196">The [**GetIconInfo**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo) function fills the structure with the hot-spot coordinates and information about the bitmask bitmap and color bitmap for the icon.</span></span>

<span data-ttu-id="63582-197">Приложения должны реализовывать пользовательские значки как ресурсы и использовать [**лоадикон**](/windows/desktop/api/Winuser/nf-winuser-loadicona) или [**лоадимаже**](/windows/desktop/api/Winuser/nf-winuser-loadimagea)вместо создания значка во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="63582-197">Applications should implement custom icons as resources and should use [**LoadIcon**](/windows/desktop/api/Winuser/nf-winuser-loadicona) or [**LoadImage**](/windows/desktop/api/Winuser/nf-winuser-loadimagea), rather than create the icon at run-time.</span></span> <span data-ttu-id="63582-198">Использование ресурсов значков позволяет избежать зависимости устройств, упрощает локализацию и позволяет приложениям совместно использовать фигуры значков.</span><span class="sxs-lookup"><span data-stu-id="63582-198">Using icon resources avoids device dependence, simplifies localization, and enables applications to share icon shapes.</span></span>

<span data-ttu-id="63582-199">Функция [**креатеиконфромресаурцеекс**](/windows/desktop/api/Winuser/nf-winuser-createiconfromresourceex) позволяет приложению просматривать ресурсы системы и создавать значки и курсоры на основе данных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="63582-199">The [**CreateIconFromResourceEx**](/windows/desktop/api/Winuser/nf-winuser-createiconfromresourceex) function enables an application to browse through the system's resources and create icons and cursors based on resource data.</span></span> <span data-ttu-id="63582-200">**Креатеиконфромресаурцеекс** создает значок на основе данных двоичных ресурсов из других исполняемых файлов или библиотек DLL.</span><span class="sxs-lookup"><span data-stu-id="63582-200">**CreateIconFromResourceEx** creates an icon based on binary resource data from other executable files or DLLs.</span></span> <span data-ttu-id="63582-201">Приложение должно предшествовать этой функции с вызовами функции [**лукупиконидфромдиректорекс**](/windows/desktop/api/Winuser/nf-winuser-lookupiconidfromdirectoryex) и несколькими функциями ресурсов.</span><span class="sxs-lookup"><span data-stu-id="63582-201">An application must precede this function with calls to the [**LookupIconIdFromDirectoryEx**](/windows/desktop/api/Winuser/nf-winuser-lookupiconidfromdirectoryex) function and several of the resource functions.</span></span> <span data-ttu-id="63582-202">**Лукупиконидфромдиректорекс** возвращает идентификатор наиболее подходящих данных значков для текущего устройства вывода.</span><span class="sxs-lookup"><span data-stu-id="63582-202">**LookupIconIdFromDirectoryEx** returns the identifier of the most appropriate icon data for the current display device.</span></span>

## <a name="icon-display"></a><span data-ttu-id="63582-203">Отображение значков</span><span class="sxs-lookup"><span data-stu-id="63582-203">Icon Display</span></span>

<span data-ttu-id="63582-204">Изображение для значка можно получить с помощью функции [**жетиконинфо**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo) и может нарисоваться с помощью функции [**дравиконекс**](/windows/desktop/api/Winuser/nf-winuser-drawiconex) .</span><span class="sxs-lookup"><span data-stu-id="63582-204">You can retrieve the image for an icon by using the [**GetIconInfo**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo) function, and can draw it by using the [**DrawIconEx**](/windows/desktop/api/Winuser/nf-winuser-drawiconex) function.</span></span> <span data-ttu-id="63582-205">Чтобы нарисовать изображение по умолчанию для значка, укажите флаг **\_ совместимости di** в вызове **дравиконекс**.</span><span class="sxs-lookup"><span data-stu-id="63582-205">To draw the default image for a icon, specify the **DI\_COMPAT** flag in the call to **DrawIconEx**.</span></span> <span data-ttu-id="63582-206">Если не указать флаг совместимости с **di \_** , **дравиконекс** Рисует значок с помощью изображения, указанного пользователем.</span><span class="sxs-lookup"><span data-stu-id="63582-206">If you do not specify the **DI\_COMPAT** flag, **DrawIconEx** draws the icon using the image that the user specified.</span></span>

<span data-ttu-id="63582-207">Когда система отображает значок, он должен извлечь соответствующее изображение значка из exe-или DLL-файла.</span><span class="sxs-lookup"><span data-stu-id="63582-207">When the system displays an icon, it must extract the appropriate icon image from the .exe or .dll file.</span></span> <span data-ttu-id="63582-208">Чтобы выбрать изображение значка, система использует следующие шаги:</span><span class="sxs-lookup"><span data-stu-id="63582-208">The system uses the following steps to select the icon image:</span></span>

1.  <span data-ttu-id="63582-209">Выберите ресурс **\_ \_ значка группы RT** .</span><span class="sxs-lookup"><span data-stu-id="63582-209">Select the **RT\_GROUP\_ICON** resource.</span></span> <span data-ttu-id="63582-210">Если существует более одного такого ресурса, система использует первый ресурс, указанный в ресурсе ценария.</span><span class="sxs-lookup"><span data-stu-id="63582-210">If more than one such resource exists, the system uses the first resource listed in the resource scrip.</span></span>
2.  <span data-ttu-id="63582-211">Выберите соответствующий образ **\_ значка RT** из ресурса **\_ \_ значка группы RT** .</span><span class="sxs-lookup"><span data-stu-id="63582-211">Select the appropriate **RT\_ICON** image from the **RT\_GROUP\_ICON** resource.</span></span> <span data-ttu-id="63582-212">Если существует более одного образа, система использует следующие критерии для выбора образа:</span><span class="sxs-lookup"><span data-stu-id="63582-212">If more than one image exists, the system uses the following criteria to choose an image:</span></span>
    -   -   <span data-ttu-id="63582-213">Выбирается изображение, ближайшее к запрошенному размеру.</span><span class="sxs-lookup"><span data-stu-id="63582-213">The image closest in size to the requested size is chosen.</span></span>
        -   <span data-ttu-id="63582-214">При наличии двух или более изображений такого размера выбирается тот, который соответствует глубине цвета отображения.</span><span class="sxs-lookup"><span data-stu-id="63582-214">If two or more images of that size are present, the one that matches the color depth of the display is chosen.</span></span>
        -   <span data-ttu-id="63582-215">Если изображения в точности не совпадают с глубиной цвета дисплея, выбирается изображение с наибольшей глубиной цвета, которая не превышает глубину цвета экрана.</span><span class="sxs-lookup"><span data-stu-id="63582-215">If no images exactly match the color depth of the display, the image with the greatest color depth that does not exceed the color depth of the display is chosen.</span></span> <span data-ttu-id="63582-216">Если все превышает глубину цвета, выбирается одна с наименьшей глубиной цвета.</span><span class="sxs-lookup"><span data-stu-id="63582-216">If all exceed the color depth, the one with the lowest color depth is chosen.</span></span>

> [!Note]  
> <span data-ttu-id="63582-217">Система рассматривает все глубину цвета, равную 8 или большему значению, равным.</span><span class="sxs-lookup"><span data-stu-id="63582-217">The system treats all color depths of 8 or more bpp as equal.</span></span> <span data-ttu-id="63582-218">Таким образом, не существует преимуществ включения изображения размером 16x16 256 и 16-цветного изображения в один и тот же ресурс — система просто выбирает первый из них.</span><span class="sxs-lookup"><span data-stu-id="63582-218">Therefore, there is no advantage of including a 16x16 256-color image and a 16x16 16-color image in the same resource—the system will simply choose the first one it encounters.</span></span> <span data-ttu-id="63582-219">Когда дисплей находится в режиме 8 бит, система выберет 16-цветный значок на значке 256-цвета и отобразит все значки с помощью системной палитры по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="63582-219">When the display is in 8-bpp mode, the system will choose a 16-color icon over a 256-color icon, and will display all icons using the system default palette.</span></span>

 

<span data-ttu-id="63582-220">Чтобы отобразить анимированный значок, используйте статический элемент управления, как показано в следующем фрагменте кода.</span><span class="sxs-lookup"><span data-stu-id="63582-220">To display an animated icon, use a static control as shown in the following code fragment.</span></span>


```
hIcon = LoadImage(NULL, "ico.ani", IMAGE_ICON, 0, 0, LR_LOADFROMFILE);
SendMessage( hStatic, STM_SETIMAGE, IMAGE_ICON, (LPARAM)(UINT)hIcon);
```



## <a name="icon-destruction"></a><span data-ttu-id="63582-221">Уничтожение значка</span><span class="sxs-lookup"><span data-stu-id="63582-221">Icon Destruction</span></span>

<span data-ttu-id="63582-222">Если приложению больше не нужен значок, созданный с помощью функции [**креатеикониндирект**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) , он должен уничтожить значок.</span><span class="sxs-lookup"><span data-stu-id="63582-222">When an application no longer needs an icon it created by using the [**CreateIconIndirect**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) function, it should destroy the icon.</span></span> <span data-ttu-id="63582-223">Функция [**дестройикон**](/windows/desktop/api/Winuser/nf-winuser-destroyicon) уничтожает маркер значка и освобождает память, используемую значком.</span><span class="sxs-lookup"><span data-stu-id="63582-223">The [**DestroyIcon**](/windows/desktop/api/Winuser/nf-winuser-destroyicon) function destroys the icon handle and frees any memory used by the icon.</span></span> <span data-ttu-id="63582-224">Приложения должны использовать эту функцию только для значков, созданных с помощью **креатеикониндирект**; нет необходимости уничтожать другие значки.</span><span class="sxs-lookup"><span data-stu-id="63582-224">Applications should use this function only for icons created with **CreateIconIndirect**; it is not necessary to destroy other icons.</span></span>

## <a name="icon-duplication"></a><span data-ttu-id="63582-225">Дублирование значков</span><span class="sxs-lookup"><span data-stu-id="63582-225">Icon Duplication</span></span>

<span data-ttu-id="63582-226">Функция [**копикон**](/windows/desktop/api/Winuser/nf-winuser-copyicon) копирует маркер значка.</span><span class="sxs-lookup"><span data-stu-id="63582-226">The [**CopyIcon**](/windows/desktop/api/Winuser/nf-winuser-copyicon) function copies an icon handle.</span></span> <span data-ttu-id="63582-227">Это позволяет приложению или библиотеке DLL получить собственный маркер для значка, принадлежащего другому модулю.</span><span class="sxs-lookup"><span data-stu-id="63582-227">This enables an application or DLL to get its own handle to an icon owned by another module.</span></span> <span data-ttu-id="63582-228">Затем, если другой модуль освобожден, приложение, которое скопировало этот значок, по-прежнему сможет использовать этот значок.</span><span class="sxs-lookup"><span data-stu-id="63582-228">Then, if the other module is freed, the application that copied the icon will still be able to use the icon.</span></span>

<span data-ttu-id="63582-229">Функция [**копимаже**](/windows/desktop/api/Winuser/nf-winuser-copyimage) создает новый значок на основе указанного значка источника.</span><span class="sxs-lookup"><span data-stu-id="63582-229">The [**CopyImage**](/windows/desktop/api/Winuser/nf-winuser-copyimage) function creates a new icon based on the specified source icon.</span></span> <span data-ttu-id="63582-230">Новый значок может быть больше или меньше, чем значок источника.</span><span class="sxs-lookup"><span data-stu-id="63582-230">The new icon can be larger or smaller than the source icon.</span></span>

<span data-ttu-id="63582-231">Дополнительные сведения о добавлении, удалении или замене ресурсов значков в исполняемых файлах (exe) см. в разделе [ресурсы](resources.md).</span><span class="sxs-lookup"><span data-stu-id="63582-231">For information about adding, removing, or replacing icon resources in executable (.exe) files, see [Resources](resources.md).</span></span>

<span data-ttu-id="63582-232">Функция [**дупликатеикон**](/windows/desktop/api/Shellapi/nf-shellapi-duplicateicon) создает фактическую копию значка.</span><span class="sxs-lookup"><span data-stu-id="63582-232">The [**DuplicateIcon**](/windows/desktop/api/Shellapi/nf-shellapi-duplicateicon) function makes an actual copy of the icon.</span></span>

 

 