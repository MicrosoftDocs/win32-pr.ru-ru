---
title: О значках
description: В этом разделе обсуждаются значки.
ms.assetid: 67867460-07f6-460f-9263-05bbf3474744
keywords:
- ресурсы, значки
- значки, горячие участки
- значки, стандартные
- стандартные значки
- значки, пользовательские
- пользовательские значки
- значки, размеры
- Создание значков
- значки, отображение
- значки, уничтожение
- значки, дублирование
- значки, создание
- отображение значков
- уничтожение значков
- дублирование значков
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4bda00540d613b6d0efd4a080251ebd6407560ed
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "104337300"
---
# <a name="about-icons"></a>О значках

Система использует значки во всем пользовательском интерфейсе для представления таких объектов, как файлы, папки, ярлыки, приложения и документы. Функции значков позволяют приложениям создавать, загружать, отображать, упорядочивать, анимировать и удалять значки. Сведения о задании значков для типов файлов см. в разделе [**екстрактикон**](/windows/desktop/api/Shellapi/nf-shellapi-extracticona).

В этом обзоре содержатся сведения по следующим темам:

-   [Значок горячей точки](#icon-hot-spot)
-   [Типы значков](#icon-types)
-   [Размеры значков](#icon-sizes)
    -   [Изменение размера небольшого значка системы](#to-change-the-size-of-the-system-small-icon)
    -   [Получение размера небольшого системного значка системы](#to-retrieve-the-size-of-the-system-small-icon)
    -   [Получение размера системного значка системы](#to-retrieve-the-size-of-the-system-large-icon)
    -   [Получение размера маленького значка оболочки](#to-retrieve-the-size-of-the-shell-small-icon)
    -   [Изменение размера крупного значка](#to-change-the-size-of-the-large-icon)
    -   [Получение размера большого значка оболочки](#to-retrieve-the-size-of-the-shell-large-icon)
-   [Создание значка](#icon-creation)
-   [Отображение значков](#icon-display)
-   [Уничтожение значка](#icon-destruction)
-   [Дублирование значков](#icon-duplication)

## <a name="icon-hot-spot"></a>Значок горячей точки

Один из пикселов значка обозначается как [Активная](#icon-hot-spot)точка, то есть система отслеживается и распознается как расположение значка. Активной точкой значка обычно является пиксель, расположенный в центре значка. Если для создания значка используется функция [**креатеикониндирект**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) , можно указать любой пиксель в качестве горячей точки.

## <a name="icon-types"></a>Типы значков

Операционная система предоставляет набор *стандартных значков* , доступных любому приложению для использования в любое время. Файлы заголовков пакета средств разработки программного обеспечения (SDK) содержат идентификаторы стандартных значков — идентификаторы начинаются с префикса **иди \_** .

С каждым стандартным значком связан соответствующий образ по умолчанию. Пользователь может в любое время заменить изображение по умолчанию, связанное с любым стандартным курсором.

*Пользовательские значки* предназначены для использования в определенном приложении и могут быть любой конструкцией. Ниже приведены несколько пользовательских значков.

![несколько пользовательских значков](images/csicn-02.png)

## <a name="icon-sizes"></a>Размеры значков

Система использует четыре размера значков:

-   Немалая система
-   Крупные системы
-   Малая оболочка
-   Оболочка — крупный

*Маленький значок системы* отображается в заголовке окна.

### <a name="to-change-the-size-of-the-system-small-icon"></a>Изменение размера небольшого значка системы

1.  В панели управления щелкните **Отображение**, а затем выберите вкладку **вид** .
2.  В списке **элемент** выберите **кнопки заголовков** , а затем задайте поле **Размер** .

### <a name="to-retrieve-the-size-of-the-system-small-icon"></a>Получение размера небольшого системного значка системы

-   Вызовите функцию [**жетсистемметрикс**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) с **SM \_ ккссмикон** и **SM \_ цисмикон**.

*Системный значок системы* в основном используется приложениями, но он также отображается в диалоговом окне ALT + TAB. Функции [**креатеиконфромресаурце**](/windows/desktop/api/Winuser/nf-winuser-createiconfromresource), [**дравикон**](/windows/desktop/api/Winuser/nf-winuser-drawicon), [**екстрактассоЦиатедикон**](/windows/desktop/api/Shellapi/nf-shellapi-extractassociatedicona), [**екстрактикон**](/windows/desktop/api/Shellapi/nf-shellapi-extracticona), [**екстрактиконекс**](/windows/desktop/api/Shellapi/nf-shellapi-extracticonexa)и [**LoadIcon**](/windows/desktop/api/Winuser/nf-winuser-loadicona) используют крупные системные значки. Размер крупного системного значка определяется видеодрайвером, поэтому его нельзя изменить.

### <a name="to-retrieve-the-size-of-the-system-large-icon"></a>Получение размера системного значка системы

-   Вызовите [**жетсистемметрикс**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) с **SM \_ кксикон** и **SM \_ циикон**.

Функции [**креатеикон**](/windows/desktop/api/Winuser/nf-winuser-createicon), [**креатеиконфромресаурцеекс**](/windows/desktop/api/Winuser/nf-winuser-createiconfromresourceex), [**креатеикониндирект**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect)и [**шжетфилеинфо**](/windows/win32/api/shellapi/nf-shellapi-shgetfileinfoa) можно использовать для работы со значками в размерах, отличных от размера системы.

*Маленький значок оболочки* используется в проводнике Windows и общих диалоговых окнах. В настоящее время по умолчанию используется малый размер системы.

### <a name="to-retrieve-the-size-of-the-shell-small-icon"></a>Получение размера маленького значка оболочки

1.  Используйте функцию [шжетфилеинфо](/windows/win32/api/shellapi/nf-shellapi-shgetfileinfoa) с параметром `SHGFI_SHELLICONSIZE | SHGFI_SMALLICON` для получения маркера в список системных образов.
2.  Затем вызовите функцию [**ImageList \_ жетиконсизе**](/windows/win32/api/commctrl/nf-commctrl-imagelist_geticonsize) , чтобы получить размер значка.

На рабочем столе используется крупный значок оболочки.

### <a name="to-change-the-size-of-the-large-icon"></a>Изменение размера крупного значка

1.  В панели управления нажмите кнопку **экран**, а затем выберите вкладку **вид** .
2.  Выберите **значок** из списка **элемент** , а затем задайте значение поля **Размер** (этот размер хранится в реестре в разделе **hKey \_ текущий \_ пользователь \\ Панель управления — \\ \\ Размер значка оболочки рабочего стола виндовметрикс**).
3.  Щелкните **Plus!** и установите флажок **использовать крупные значки** .

### <a name="to-retrieve-the-size-of-the-shell-large-icon"></a>Получение размера большого значка оболочки

1.  Используйте функцию [**шжетфилеинфо**](/windows/win32/api/shellapi/nf-shellapi-shgetfileinfoa) с **шгфи \_ шелликонсизе** для получения маркера в список системных образов.
2.  Затем вызовите функцию [**ImageList \_ жетиконсизе**](/windows/win32/api/commctrl/nf-commctrl-imagelist_geticonsize) , чтобы получить размер значка.

В меню "Пуск" используются маленькие значки оболочки или крупные значки оболочки в зависимости от того, установлен ли флажок **использовать крупные значки** .

Приложение должно предоставлять группы изображений значков в следующих размерах:

-   48x48, цвет 256
-   32x32, 16 цветов
-   16x16 пикселей, 16 цветов

При заполнении структуры [**вндклассекс**](/windows/win32/api/winuser/ns-winuser-wndclassexa) для использования при регистрации класса окна установите для элемента **Хикон** значок 32x32, а для элемента **хиконсм** — значок 16x16. Дополнительные сведения о значках классов см. в разделе [значки классов](/windows/desktop/winmsg/about-window-classes).

## <a name="icon-creation"></a>Создание значка

Стандартные значки являются стандартными, поэтому их не нужно создавать. Чтобы использовать стандартный значок, приложение может получить свой обработчик с помощью функции [**лоадимаже**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) . *Маркер значка* — это уникальное значение типа **Хикон** , определяющее стандартный или пользовательский значок.

Чтобы создать пользовательский значок для приложения, обычно используется графическое приложение и в файл определения ресурсов приложения включается [ресурс значка](./icon-resource.md) . Во время выполнения можно вызвать [**лоадикон**](/windows/desktop/api/Winuser/nf-winuser-loadicona) или [**лоадимаже**](/windows/desktop/api/Winuser/nf-winuser-loadimagea) , чтобы получить маркер для значка. Ресурс значка может содержать группу изображений для нескольких различных устройств вывода. **Лоадикон** и **лоадимаже** автоматически выбирают наиболее подходящий значок из группы для текущего устройства вывода.

Приложение может также создавать пользовательский значок во время выполнения с помощью функции [**креатеикониндирект**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) , которая создает значок на основе содержимого структуры [**иконинфо**](/windows/desktop/api/Winuser/ns-winuser-iconinfo) . Функция [**жетиконинфо**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo) заполняет структуру с помощью координат горячей точки и сведений о битовой битовой маске и цветовой битовой карте для значка.

Приложения должны реализовывать пользовательские значки как ресурсы и использовать [**лоадикон**](/windows/desktop/api/Winuser/nf-winuser-loadicona) или [**лоадимаже**](/windows/desktop/api/Winuser/nf-winuser-loadimagea)вместо создания значка во время выполнения. Использование ресурсов значков позволяет избежать зависимости устройств, упрощает локализацию и позволяет приложениям совместно использовать фигуры значков.

Функция [**креатеиконфромресаурцеекс**](/windows/desktop/api/Winuser/nf-winuser-createiconfromresourceex) позволяет приложению просматривать ресурсы системы и создавать значки и курсоры на основе данных ресурсов. **Креатеиконфромресаурцеекс** создает значок на основе данных двоичных ресурсов из других исполняемых файлов или библиотек DLL. Приложение должно предшествовать этой функции с вызовами функции [**лукупиконидфромдиректорекс**](/windows/desktop/api/Winuser/nf-winuser-lookupiconidfromdirectoryex) и несколькими функциями ресурсов. **Лукупиконидфромдиректорекс** возвращает идентификатор наиболее подходящих данных значков для текущего устройства вывода.

## <a name="icon-display"></a>Отображение значков

Изображение для значка можно получить с помощью функции [**жетиконинфо**](/windows/desktop/api/Winuser/nf-winuser-geticoninfo) и может нарисоваться с помощью функции [**дравиконекс**](/windows/desktop/api/Winuser/nf-winuser-drawiconex) . Чтобы нарисовать изображение по умолчанию для значка, укажите флаг **\_ совместимости di** в вызове **дравиконекс**. Если не указать флаг совместимости с **di \_** , **дравиконекс** Рисует значок с помощью изображения, указанного пользователем.

Когда система отображает значок, он должен извлечь соответствующее изображение значка из exe-или DLL-файла. Чтобы выбрать изображение значка, система использует следующие шаги:

1.  Выберите ресурс **\_ \_ значка группы RT** . Если существует более одного такого ресурса, система использует первый ресурс, указанный в ресурсе ценария.
2.  Выберите соответствующий образ **\_ значка RT** из ресурса **\_ \_ значка группы RT** . Если существует более одного образа, система использует следующие критерии для выбора образа:
    -   -   Выбирается изображение, ближайшее к запрошенному размеру.
        -   При наличии двух или более изображений такого размера выбирается тот, который соответствует глубине цвета отображения.
        -   Если изображения в точности не совпадают с глубиной цвета дисплея, выбирается изображение с наибольшей глубиной цвета, которая не превышает глубину цвета экрана. Если все превышает глубину цвета, выбирается одна с наименьшей глубиной цвета.

> [!Note]  
> Система рассматривает все глубину цвета, равную 8 или большему значению, равным. Таким образом, не существует преимуществ включения изображения размером 16x16 256 и 16-цветного изображения в один и тот же ресурс — система просто выбирает первый из них. Когда дисплей находится в режиме 8 бит, система выберет 16-цветный значок на значке 256-цвета и отобразит все значки с помощью системной палитры по умолчанию.

 

Чтобы отобразить анимированный значок, используйте статический элемент управления, как показано в следующем фрагменте кода.


```
hIcon = LoadImage(NULL, "ico.ani", IMAGE_ICON, 0, 0, LR_LOADFROMFILE);
SendMessage( hStatic, STM_SETIMAGE, IMAGE_ICON, (LPARAM)(UINT)hIcon);
```



## <a name="icon-destruction"></a>Уничтожение значка

Если приложению больше не нужен значок, созданный с помощью функции [**креатеикониндирект**](/windows/desktop/api/Winuser/nf-winuser-createiconindirect) , он должен уничтожить значок. Функция [**дестройикон**](/windows/desktop/api/Winuser/nf-winuser-destroyicon) уничтожает маркер значка и освобождает память, используемую значком. Приложения должны использовать эту функцию только для значков, созданных с помощью **креатеикониндирект**; нет необходимости уничтожать другие значки.

## <a name="icon-duplication"></a>Дублирование значков

Функция [**копикон**](/windows/desktop/api/Winuser/nf-winuser-copyicon) копирует маркер значка. Это позволяет приложению или библиотеке DLL получить собственный маркер для значка, принадлежащего другому модулю. Затем, если другой модуль освобожден, приложение, которое скопировало этот значок, по-прежнему сможет использовать этот значок.

Функция [**копимаже**](/windows/desktop/api/Winuser/nf-winuser-copyimage) создает новый значок на основе указанного значка источника. Новый значок может быть больше или меньше, чем значок источника.

Дополнительные сведения о добавлении, удалении или замене ресурсов значков в исполняемых файлах (exe) см. в разделе [ресурсы](resources.md).

Функция [**дупликатеикон**](/windows/desktop/api/Shellapi/nf-shellapi-duplicateicon) создает фактическую копию значка.

 

 