---
title: О меню
description: В этом разделе обсуждаются меню.
ms.assetid: fd0b26f1-93cd-421b-9097-8502ab7681e9
keywords:
- ресурсы, меню
- меню, сведения
- подменю
- строки меню
- меню верхнего уровня
- всплывающие меню
- раскрывающиеся меню
- меню, верхний уровень
- меню, всплывающее окно
- меню, раскрывающийся список
- имена меню
- меню, ярлык
- меню, окно
- меню, система
- меню, элемент управления
- контекстные меню
- Меню "Окно"
- Системное меню
- Меню управления
- идентификаторы справки
- дескрипторы меню
- пункты меню
- командные элементы
- идентификаторы элементов меню
- меню — позиция элемента
- Выбор пунктов меню
- Очистка пунктов меню
- меню, рисуемое владельцем
- меню, рисуемых владельцем
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ed5d42eb42aaaaa16eef0b5b118adcfe0f91156e
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "104412858"
---
# <a name="about-menus"></a><span data-ttu-id="e1d90-132">О меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-132">About Menus</span></span>

<span data-ttu-id="e1d90-133">*Меню* — это список элементов, в котором указываются параметры или группы параметров (подменю) для приложения.</span><span class="sxs-lookup"><span data-stu-id="e1d90-133">A *menu* is a list of items that specify options or groups of options (a submenu) for an application.</span></span> <span data-ttu-id="e1d90-134">При щелчке пункта меню открывается подменю или приложение выполняет команду.</span><span class="sxs-lookup"><span data-stu-id="e1d90-134">Clicking a menu item opens a submenu or causes the application to carry out a command.</span></span> <span data-ttu-id="e1d90-135">В этом разделе содержатся сведения по следующим темам:</span><span class="sxs-lookup"><span data-stu-id="e1d90-135">This section provides information on the following topics:</span></span>

-   [<span data-ttu-id="e1d90-136">Строки меню и меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-136">Menu Bars and Menus</span></span>](#menu-bars-and-menus)
    -   [<span data-ttu-id="e1d90-137">Контекстные меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-137">Shortcut Menus</span></span>](#shortcut-menus)
    -   [<span data-ttu-id="e1d90-138">Меню «окно»</span><span class="sxs-lookup"><span data-stu-id="e1d90-138">The Window Menu</span></span>](#the-window-menu)
    -   [<span data-ttu-id="e1d90-139">Идентификатор справки</span><span class="sxs-lookup"><span data-stu-id="e1d90-139">Help Identifier</span></span>](#help-identifier)
-   [<span data-ttu-id="e1d90-140">Доступ с клавиатуры к меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-140">Keyboard Access to Menus</span></span>](#keyboard-access-to-menus)
    -   [<span data-ttu-id="e1d90-141">Стандартный интерфейс клавиатуры</span><span class="sxs-lookup"><span data-stu-id="e1d90-141">Standard Keyboard Interface</span></span>](#standard-keyboard-interface)
    -   [<span data-ttu-id="e1d90-142">Ключи доступа к меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-142">Menu Access Keys</span></span>](#menu-access-keys)
    -   [<span data-ttu-id="e1d90-143">Сочетания клавиш для меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-143">Menu Shortcut Keys</span></span>](#menu-shortcut-keys)
-   [<span data-ttu-id="e1d90-144">Создание меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-144">Menu Creation</span></span>](#menu-creation)
    -   [<span data-ttu-id="e1d90-145">Ресурсы шаблона меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-145">Menu Template Resources</span></span>](#menu-template-resources)
    -   [<span data-ttu-id="e1d90-146">Шаблон меню в памяти</span><span class="sxs-lookup"><span data-stu-id="e1d90-146">Menu Template in Memory</span></span>](#menu-template-in-memory)
    -   [<span data-ttu-id="e1d90-147">Дескрипторы меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-147">Menu Handles</span></span>](#menu-handles)
    -   [<span data-ttu-id="e1d90-148">Функции создания меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-148">Menu Creation Functions</span></span>](#menu-creation-functions)
    -   [<span data-ttu-id="e1d90-149">Отображение меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-149">Menu Display</span></span>](#menu-display)
    -   [<span data-ttu-id="e1d90-150">Меню классов окон</span><span class="sxs-lookup"><span data-stu-id="e1d90-150">Window Class Menus</span></span>](#window-class-menus)
-   [<span data-ttu-id="e1d90-151">Пункты меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-151">Menu Items</span></span>](#menu-items)
    -   [<span data-ttu-id="e1d90-152">Элементы команд и элементы, открывающие подменю</span><span class="sxs-lookup"><span data-stu-id="e1d90-152">Command Items and Items that Open Submenus</span></span>](#command-items-and-items-that-open-submenus)
    -   [<span data-ttu-id="e1d90-153">Меню — идентификатор элемента</span><span class="sxs-lookup"><span data-stu-id="e1d90-153">Menu-Item Identifier</span></span>](#menu-item-identifier)
    -   [<span data-ttu-id="e1d90-154">Меню — позиция элемента</span><span class="sxs-lookup"><span data-stu-id="e1d90-154">Menu-Item Position</span></span>](#menu-item-position)
    -   [<span data-ttu-id="e1d90-155">Доступ к пунктам меню программным способом</span><span class="sxs-lookup"><span data-stu-id="e1d90-155">Accessing Menu Items Programmatically</span></span>](#accessing-menu-items-programmatically)
    -   [<span data-ttu-id="e1d90-156">Элементы меню по умолчанию</span><span class="sxs-lookup"><span data-stu-id="e1d90-156">Default Menu Items</span></span>](#default-menu-items)
    -   [<span data-ttu-id="e1d90-157">Выбранные и очищенные пункты меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-157">Selected and Clear Menu Items</span></span>](#selected-and-clear-menu-items)
    -   [<span data-ttu-id="e1d90-158">Включенные, серые и отключенные пункты меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-158">Enabled, Grayed, and Disabled Menu Items</span></span>](#enabled-grayed-and-disabled-menu-items)
    -   [<span data-ttu-id="e1d90-159">Выделенные пункты меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-159">Highlighted Menu Items</span></span>](#highlighted-menu-items)
    -   [<span data-ttu-id="e1d90-160">Элементы меню, рисуемые владельцем</span><span class="sxs-lookup"><span data-stu-id="e1d90-160">Owner-Drawn Menu Items</span></span>](#owner-drawn-menu-items)
    -   [<span data-ttu-id="e1d90-161">Разделители пунктов меню и разрывы строк</span><span class="sxs-lookup"><span data-stu-id="e1d90-161">Menu Item Separators and Line Breaks</span></span>](#menu-item-separators-and-line-breaks)
-   [<span data-ttu-id="e1d90-162">Сообщения, используемые с меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-162">Messages Used with Menus</span></span>](#messages-used-with-menus)
-   [<span data-ttu-id="e1d90-163">Уничтожение меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-163">Menu Destruction</span></span>](#menu-destruction)

## <a name="menu-bars-and-menus"></a><span data-ttu-id="e1d90-164">Строки меню и меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-164">Menu Bars and Menus</span></span>

<span data-ttu-id="e1d90-165">Меню упорядочивается в иерархии.</span><span class="sxs-lookup"><span data-stu-id="e1d90-165">A menu is arranged in a hierarchy.</span></span> <span data-ttu-id="e1d90-166">На верхнем уровне иерархии находится *строка меню*; , содержащий список *меню*, которые, в свою очередь, могут содержать *подменю*.</span><span class="sxs-lookup"><span data-stu-id="e1d90-166">At the top level of the hierarchy is the *menu bar*; which contains a list of *menus*, which in turn can contain *submenus*.</span></span> <span data-ttu-id="e1d90-167">Строка меню иногда называется *меню верхнего уровня*, а меню и подменю также называются *всплывающими меню*.</span><span class="sxs-lookup"><span data-stu-id="e1d90-167">A menu bar is sometimes called a *top-level menu*, and the menus and submenus are also known as *pop-up menus*.</span></span>

<span data-ttu-id="e1d90-168">Пункт меню может либо выполнить команду, либо открыть подменю.</span><span class="sxs-lookup"><span data-stu-id="e1d90-168">A menu item can either carry out a command or open a submenu.</span></span> <span data-ttu-id="e1d90-169">Элемент, выполняющий команду, называется *командным элементом* или *командой*.</span><span class="sxs-lookup"><span data-stu-id="e1d90-169">An item that carries out a command is called a *command item* or a *command*.</span></span>

<span data-ttu-id="e1d90-170">Элемент в строке меню почти всегда открывает меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-170">An item on the menu bar almost always opens a menu.</span></span> <span data-ttu-id="e1d90-171">Строки меню редко содержат элементы команд.</span><span class="sxs-lookup"><span data-stu-id="e1d90-171">Menu bars rarely contain command items.</span></span> <span data-ttu-id="e1d90-172">Меню, открываемое из строки меню, выпадает из строки меню и иногда называется раскрывающимся *меню*.</span><span class="sxs-lookup"><span data-stu-id="e1d90-172">A menu opened from the menu bar drops down from the menu bar and is sometimes called a *drop-down menu*.</span></span> <span data-ttu-id="e1d90-173">При отображении раскрывающегося меню оно прикрепляется к строке меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-173">When a drop-down menu is displayed, it is attached to the menu bar.</span></span> <span data-ttu-id="e1d90-174">Пункт меню в строке меню, открывающем раскрывающееся меню, также называется *именем меню*.</span><span class="sxs-lookup"><span data-stu-id="e1d90-174">A menu item on the menu bar that opens a drop-down menu is also called a *menu name*.</span></span>

<span data-ttu-id="e1d90-175">Имена меню в строке меню представляют основные категории команд, предоставляемых приложением.</span><span class="sxs-lookup"><span data-stu-id="e1d90-175">The menu names on a menu bar represent the main categories of commands that an application provides.</span></span> <span data-ttu-id="e1d90-176">При выборе имени меню в строке меню обычно открывается меню, пункты меню которого соответствуют командам в категории.</span><span class="sxs-lookup"><span data-stu-id="e1d90-176">Selecting a menu name from the menu bar typically opens a menu whose menu items correspond to the commands in a category.</span></span> <span data-ttu-id="e1d90-177">Например, строка меню может содержать имя меню « **файл** », которое при щелчке пользователем активирует меню с такими элементами меню, как « **создать**», « **Открыть**» и « **сохранить**».</span><span class="sxs-lookup"><span data-stu-id="e1d90-177">For example, a menu bar might contain a **File** menu name that, when clicked by the user, activates a menu with menu items such as **New**, **Open**, and **Save**.</span></span> <span data-ttu-id="e1d90-178">Чтобы получить сведения о строке меню, вызовите [**GetMenuBarInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenubarinfo).</span><span class="sxs-lookup"><span data-stu-id="e1d90-178">To get information about a menu bar, call [**GetMenuBarInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenubarinfo).</span></span>

<span data-ttu-id="e1d90-179">Только перекрывающиеся или всплывающие окна могут содержать строку меню; дочернее окно не может содержать одно.</span><span class="sxs-lookup"><span data-stu-id="e1d90-179">Only an overlapped or pop-up window can contain a menu bar; a child window cannot contain one.</span></span> <span data-ttu-id="e1d90-180">Если окно содержит заголовок, система размещает строку меню под ней.</span><span class="sxs-lookup"><span data-stu-id="e1d90-180">If the window has a title bar, the system positions the menu bar just below it.</span></span> <span data-ttu-id="e1d90-181">Строка меню всегда видна.</span><span class="sxs-lookup"><span data-stu-id="e1d90-181">A menu bar is always visible.</span></span> <span data-ttu-id="e1d90-182">Однако подменю не отображается, пока пользователь не выберет пункт меню, который его активирует.</span><span class="sxs-lookup"><span data-stu-id="e1d90-182">A submenu is not visible, however, until the user selects a menu item that activates it.</span></span> <span data-ttu-id="e1d90-183">Дополнительные сведения о перекрывающихся и всплывающих окнах см. в разделе [типы окон](/windows/desktop/winmsg/window-features).</span><span class="sxs-lookup"><span data-stu-id="e1d90-183">For more information about overlapped and pop-up windows, see [Window Types](/windows/desktop/winmsg/window-features).</span></span>

<span data-ttu-id="e1d90-184">Каждое меню должно иметь окно владельца.</span><span class="sxs-lookup"><span data-stu-id="e1d90-184">Each menu must have an owner window.</span></span> <span data-ttu-id="e1d90-185">Система отправляет сообщения в окно владельца меню, когда пользователь выбирает меню или выбирает элемент из меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-185">The system sends messages to a menu's owner window when the user selects the menu or chooses an item from the menu.</span></span>

<span data-ttu-id="e1d90-186">В этом разделе рассматриваются следующие темы.</span><span class="sxs-lookup"><span data-stu-id="e1d90-186">This section discusses the following topics.</span></span>

-   [<span data-ttu-id="e1d90-187">Контекстные меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-187">Shortcut Menus</span></span>](#shortcut-menus)
-   [<span data-ttu-id="e1d90-188">Меню «окно»</span><span class="sxs-lookup"><span data-stu-id="e1d90-188">The Window Menu</span></span>](#the-window-menu)
-   [<span data-ttu-id="e1d90-189">Идентификатор справки</span><span class="sxs-lookup"><span data-stu-id="e1d90-189">Help Identifier</span></span>](#help-identifier)

### <a name="shortcut-menus"></a><span data-ttu-id="e1d90-190">Контекстные меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-190">Shortcut Menus</span></span>

<span data-ttu-id="e1d90-191">Система также предоставляет *Контекстные меню*.</span><span class="sxs-lookup"><span data-stu-id="e1d90-191">The system also provides *shortcut menus*.</span></span> <span data-ttu-id="e1d90-192">Контекстное меню не присоединено к строке меню; Он может находиться в любом месте экрана.</span><span class="sxs-lookup"><span data-stu-id="e1d90-192">A shortcut menu is not attached to the menu bar; it can appear anywhere on the screen.</span></span> <span data-ttu-id="e1d90-193">Приложение обычно связывает контекстное меню с частью окна, например клиентской областью, или с конкретным объектом, например значком.</span><span class="sxs-lookup"><span data-stu-id="e1d90-193">An application typically associates a shortcut menu with a portion of a window, such as the client area, or with a specific object, such as an icon.</span></span> <span data-ttu-id="e1d90-194">По этой причине эти меню также называются *контекстными меню*.</span><span class="sxs-lookup"><span data-stu-id="e1d90-194">For this reason, these menus are also called *context menus*.</span></span>

<span data-ttu-id="e1d90-195">Контекстное меню остается скрытым до тех пор, пока пользователь не активирует его, обычно щелкнув правой кнопкой мыши выделенную область, панель инструментов или кнопку на панели задач.</span><span class="sxs-lookup"><span data-stu-id="e1d90-195">A shortcut menu remains hidden until the user activates it, typically by right-clicking a selection, a toolbar, or a taskbar button.</span></span> <span data-ttu-id="e1d90-196">Меню обычно отображается в положении курсора или курсора мыши.</span><span class="sxs-lookup"><span data-stu-id="e1d90-196">The menu is usually displayed at the position of the caret or mouse cursor.</span></span>

### <a name="the-window-menu"></a><span data-ttu-id="e1d90-197">Меню «окно»</span><span class="sxs-lookup"><span data-stu-id="e1d90-197">The Window Menu</span></span>

<span data-ttu-id="e1d90-198">Меню « **окно»** (также называемое **системным** меню или меню « **Управление** ») — это всплывающее меню, которое определяется и управляется практически исключительно операционной системой.</span><span class="sxs-lookup"><span data-stu-id="e1d90-198">The **Window** menu (also known as the **System** menu or **Control** menu) is a pop-up menu defined and managed almost exclusively by the operating system.</span></span> <span data-ttu-id="e1d90-199">Пользователь может открыть меню окно, щелкнув значок приложения в строке заголовка или щелкнув правой кнопкой мыши в любом месте заголовка окна.</span><span class="sxs-lookup"><span data-stu-id="e1d90-199">The user can open the window menu by clicking the application icon on the title bar or by right-clicking anywhere on the title bar.</span></span>

<span data-ttu-id="e1d90-200">Меню **окно** предоставляет стандартный набор элементов меню, которые пользователь может выбрать для изменения размера или расположения окна, или закрыть приложение.</span><span class="sxs-lookup"><span data-stu-id="e1d90-200">The **Window** menu provides a standard set of menu items that the user can choose to change a window's size or position, or close the application.</span></span> <span data-ttu-id="e1d90-201">Элементы в меню окно можно добавлять, удалять и изменять, но большинство приложений просто используют стандартный набор пунктов меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-201">Items on the window menu can be added, deleted, and modified, but most applications just use the standard set of menu items.</span></span> <span data-ttu-id="e1d90-202">Перекрывающиеся, всплывающие или дочерние окна могут иметь меню окон.</span><span class="sxs-lookup"><span data-stu-id="e1d90-202">An overlapped, pop-up, or child window can have a window menu.</span></span> <span data-ttu-id="e1d90-203">Часто перекрытие или всплывающее окно не включает меню окна.</span><span class="sxs-lookup"><span data-stu-id="e1d90-203">It is uncommon for an overlapped or pop-up window not to include a window menu.</span></span>

<span data-ttu-id="e1d90-204">Когда пользователь выбирает команду в меню " **окно** ", система отправляет сообщение [**WM \_ сискомманд**](wm-syscommand.md) в окно владельца меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-204">When the user chooses a command from the **Window** menu, the system sends a [**WM\_SYSCOMMAND**](wm-syscommand.md) message to the menu's owner window.</span></span> <span data-ttu-id="e1d90-205">В большинстве приложений процедура Window не обрабатывает сообщения из меню окно.</span><span class="sxs-lookup"><span data-stu-id="e1d90-205">In most applications, the window procedure does not process messages from the window menu.</span></span> <span data-ttu-id="e1d90-206">Вместо этого он просто передает сообщения в функцию [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) для обработки сообщения системой по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="e1d90-206">Instead, it simply passes the messages to the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function for system-default processing of the message.</span></span> <span data-ttu-id="e1d90-207">Если приложение добавляет команду в меню окно, процедура окна должна обработать команду.</span><span class="sxs-lookup"><span data-stu-id="e1d90-207">If an application adds a command to the window menu, the window procedure must process the command.</span></span>

<span data-ttu-id="e1d90-208">Приложение может использовать функцию [**жетсистеммену**](/windows/desktop/api/Winuser/nf-winuser-getsystemmenu) , чтобы создать копию меню окна по умолчанию для изменения.</span><span class="sxs-lookup"><span data-stu-id="e1d90-208">An application can use the [**GetSystemMenu**](/windows/desktop/api/Winuser/nf-winuser-getsystemmenu) function to create a copy of the default window menu to modify.</span></span> <span data-ttu-id="e1d90-209">Любое окно, не использующее функцию **жетсистеммену** для создания собственной копии меню «окно», получает стандартное меню «окно».</span><span class="sxs-lookup"><span data-stu-id="e1d90-209">Any window that does not use the **GetSystemMenu** function to make its own copy of the window menu receives the standard window menu.</span></span>

### <a name="help-identifier"></a><span data-ttu-id="e1d90-210">Идентификатор справки</span><span class="sxs-lookup"><span data-stu-id="e1d90-210">Help Identifier</span></span>

<span data-ttu-id="e1d90-211">Это идентификатор справки, связанный с каждой строкой меню, меню, подменю и контекстным меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-211">Associated with each menu bar, menu, submenu, and shortcut menu is a help identifier.</span></span> <span data-ttu-id="e1d90-212">Если пользователь нажимает клавишу F1, когда меню активно, это значение отправляется в окно "владелец" как часть [**\_ справочного сообщения WM**](../shell/wm-help.md) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-212">If the user presses the F1 key while the menu is active, this value is sent to the owner window as part of a [**WM\_HELP**](../shell/wm-help.md) message.</span></span>

## <a name="keyboard-access-to-menus"></a><span data-ttu-id="e1d90-213">Доступ с клавиатуры к меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-213">Keyboard Access to Menus</span></span>

<span data-ttu-id="e1d90-214">Система предоставляет стандартный интерфейс клавиатуры для меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-214">The system provides a standard keyboard interface for menus.</span></span> <span data-ttu-id="e1d90-215">Этот интерфейс можно расширить, предоставив назначенные клавиши доступа и сочетания клавиш (сочетания клавиш) для пунктов меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-215">You can enhance this interface by providing mnemonic access keys and shortcut (accelerator) keys for your menu items.</span></span>

<span data-ttu-id="e1d90-216">В следующих разделах описывается стандартный интерфейс клавиатуры, ключи доступа и сочетания клавиш:</span><span class="sxs-lookup"><span data-stu-id="e1d90-216">The following topics describe the standard keyboard interface, access keys, and shortcut keys:</span></span>

-   [<span data-ttu-id="e1d90-217">Стандартный интерфейс клавиатуры</span><span class="sxs-lookup"><span data-stu-id="e1d90-217">Standard Keyboard Interface</span></span>](#standard-keyboard-interface)
-   [<span data-ttu-id="e1d90-218">Ключи доступа к меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-218">Menu Access Keys</span></span>](#menu-access-keys)
-   [<span data-ttu-id="e1d90-219">Сочетания клавиш для меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-219">Menu Shortcut Keys</span></span>](#menu-shortcut-keys)

### <a name="standard-keyboard-interface"></a><span data-ttu-id="e1d90-220">Стандартный интерфейс клавиатуры</span><span class="sxs-lookup"><span data-stu-id="e1d90-220">Standard Keyboard Interface</span></span>

<span data-ttu-id="e1d90-221">Система разработана для работы с мышью или другими указывающими устройствами или без них.</span><span class="sxs-lookup"><span data-stu-id="e1d90-221">The system is designed to work with or without a mouse or other pointing device.</span></span> <span data-ttu-id="e1d90-222">Поскольку система предоставляет стандартный интерфейс клавиатуры, пользователь может использовать клавиатуру для выбора пунктов меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-222">Because the system provides a standard keyboard interface, the user can use the keyboard to select menu items.</span></span> <span data-ttu-id="e1d90-223">Этот интерфейс клавиатуры не требует специального кода.</span><span class="sxs-lookup"><span data-stu-id="e1d90-223">This keyboard interface does not need special code.</span></span> <span data-ttu-id="e1d90-224">Приложение получает сообщение команды о том, выбирает ли пользователь пункт меню с помощью клавиатуры или с помощью мыши.</span><span class="sxs-lookup"><span data-stu-id="e1d90-224">An application receives a command message whether the user selects a menu item through the keyboard or by using a mouse.</span></span> <span data-ttu-id="e1d90-225">Стандартный интерфейс клавиатуры обрабатывает следующие нажатия клавиш.</span><span class="sxs-lookup"><span data-stu-id="e1d90-225">The standard keyboard interface processes the following keystrokes.</span></span>



| <span data-ttu-id="e1d90-226">Клавиши</span><span class="sxs-lookup"><span data-stu-id="e1d90-226">Keystroke</span></span>              | <span data-ttu-id="e1d90-227">Действие</span><span class="sxs-lookup"><span data-stu-id="e1d90-227">Action</span></span>                                                                                                                                                                                                                                   |
|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e1d90-228">Алфавитный символ</span><span class="sxs-lookup"><span data-stu-id="e1d90-228">Alphabetical character</span></span> | <span data-ttu-id="e1d90-229">Выбирает первый элемент меню с указанным символом в качестве ключа доступа.</span><span class="sxs-lookup"><span data-stu-id="e1d90-229">Selects the first menu item with the specified character as its access key.</span></span> <span data-ttu-id="e1d90-230">Если выбранный элемент вызывает меню, отображается меню, и первый элемент выделяется.</span><span class="sxs-lookup"><span data-stu-id="e1d90-230">If the selected item invokes a menu, the menu is displayed and the first item is highlighted.</span></span> <span data-ttu-id="e1d90-231">В противном случае выбирается пункт меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-231">Otherwise, the menu item is chosen.</span></span>                            |
| <span data-ttu-id="e1d90-232">ALT</span><span class="sxs-lookup"><span data-stu-id="e1d90-232">ALT</span></span>                    | <span data-ttu-id="e1d90-233">Включает и выключает режим строки меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-233">Toggles in and out of menu bar mode.</span></span>                                                                                                                                                                                                     |
| <span data-ttu-id="e1d90-234">ALT + ПРОБЕЛ</span><span class="sxs-lookup"><span data-stu-id="e1d90-234">ALT+SPACEBAR</span></span>           | <span data-ttu-id="e1d90-235">Отображает меню окно.</span><span class="sxs-lookup"><span data-stu-id="e1d90-235">Displays the window menu.</span></span>                                                                                                                                                                                                                |
| <span data-ttu-id="e1d90-236">ВВОД</span><span class="sxs-lookup"><span data-stu-id="e1d90-236">ENTER</span></span>                  | <span data-ttu-id="e1d90-237">Активирует меню и выбирает первый пункт меню, если у элемента есть связанное с ним меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-237">Activates a menu and selects the first menu item if an item has a menu associated with it.</span></span> <span data-ttu-id="e1d90-238">В противном случае нажатие клавиши выбирает элемент, как если бы пользователь отпускает кнопку мыши во время выбора элемента.</span><span class="sxs-lookup"><span data-stu-id="e1d90-238">Otherwise, this keystroke chooses the item as if the user released the mouse button while the item was selected.</span></span>                              |
| <span data-ttu-id="e1d90-239">ESC</span><span class="sxs-lookup"><span data-stu-id="e1d90-239">ESC</span></span>                    | <span data-ttu-id="e1d90-240">Выход из режима меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-240">Exits menu mode.</span></span>                                                                                                                                                                                                                         |
| <span data-ttu-id="e1d90-241">СТРЕЛКА ВЛЕВО</span><span class="sxs-lookup"><span data-stu-id="e1d90-241">LEFT ARROW</span></span>             | <span data-ttu-id="e1d90-242">Циклический переход к предыдущему пункту меню верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="e1d90-242">Cycles to the previous top-level menu item.</span></span> <span data-ttu-id="e1d90-243">Пункты меню верхнего уровня включают имена меню и оконное меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-243">Top-level menu items include menu names and the window menu.</span></span> <span data-ttu-id="e1d90-244">Если выбранный элемент находится в меню, выбирается предыдущий столбец в меню или выбирается предыдущий пункт меню верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="e1d90-244">If the selected item is in a menu, the previous column in the menu is selected or the previous top-level menu item is selected.</span></span> |
| <span data-ttu-id="e1d90-245">СТРЕЛКА ВПРАВО</span><span class="sxs-lookup"><span data-stu-id="e1d90-245">RIGHT ARROW</span></span>            | <span data-ttu-id="e1d90-246">Работает как клавиша со стрелкой влево, за исключением обратного направления.</span><span class="sxs-lookup"><span data-stu-id="e1d90-246">Works like the LEFT ARROW key, except in the opposite direction.</span></span> <span data-ttu-id="e1d90-247">В меню это нажатие клавиши перемещается вперед на один столбец; когда текущий выбранный элемент находится в крайнем правом столбце, выбирается следующее меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-247">In menus, this keystroke moves forward one column; when the currently selected item is in the far-right column, the next menu is selected.</span></span>                              |
| <span data-ttu-id="e1d90-248">СТРЕЛКИ вверх или вниз</span><span class="sxs-lookup"><span data-stu-id="e1d90-248">UP or DOWN ARROWS</span></span>      | <span data-ttu-id="e1d90-249">Активирует меню при нажатии в имени меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-249">Activates a menu when pressed in a menu name.</span></span> <span data-ttu-id="e1d90-250">При нажатии в меню клавиша со стрелкой вверх выбирает предыдущий элемент. Нажатие клавиши со стрелкой вниз выбирает следующий элемент.</span><span class="sxs-lookup"><span data-stu-id="e1d90-250">When pressed in a menu, the UP ARROW keystroke selects the previous item; the DOWN ARROW keystroke selects the next item.</span></span>                                                                  |



 

### <a name="menu-access-keys"></a><span data-ttu-id="e1d90-251">Ключи доступа к меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-251">Menu Access Keys</span></span>

<span data-ttu-id="e1d90-252">Стандартный интерфейс клавиатуры для меню можно расширить, добавив клавиши доступа (назначенные клавиши) в пункты меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-252">The standard keyboard interface for menus can be enhanced by adding access keys (mnemonics) to menu items.</span></span> <span data-ttu-id="e1d90-253">Клавиша доступа — это подчеркнутая буква в тексте пункта меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-253">An access key is an underlined letter in the text of a menu item.</span></span> <span data-ttu-id="e1d90-254">Когда меню активно, пользователь может выбрать пункт меню, нажав клавишу, соответствующую подчеркнутой букве элемента.</span><span class="sxs-lookup"><span data-stu-id="e1d90-254">When a menu is active, the user can select a menu item by pressing the key that corresponds to the item's underlined letter.</span></span> <span data-ttu-id="e1d90-255">Пользователь делает строку меню активной, нажав клавишу ALT, чтобы выделить первый элемент в строке меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-255">The user makes the menu bar active by pressing the ALT key to highlight the first item on the menu bar.</span></span> <span data-ttu-id="e1d90-256">Меню активно, когда оно отображается.</span><span class="sxs-lookup"><span data-stu-id="e1d90-256">A menu is active when it is displayed.</span></span>

<span data-ttu-id="e1d90-257">Чтобы создать ключ доступа для пункта меню, перед любым символом в текстовой строке элемента введите амперсанд.</span><span class="sxs-lookup"><span data-stu-id="e1d90-257">To create an access key for a menu item, precede any character in the item's text string with an ampersand.</span></span> <span data-ttu-id="e1d90-258">Например, Текстовая строка "&Move" заставляет систему подчеркиванием буквы "M".</span><span class="sxs-lookup"><span data-stu-id="e1d90-258">For example, the text string "&Move" causes the system to underline the letter "M".</span></span>

### <a name="menu-shortcut-keys"></a><span data-ttu-id="e1d90-259">Сочетания клавиш для меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-259">Menu Shortcut Keys</span></span>

<span data-ttu-id="e1d90-260">В дополнение к клавише доступа, элементу меню может быть назначена комбинация клавиш.</span><span class="sxs-lookup"><span data-stu-id="e1d90-260">In addition to having an access key, a menu item can have a shortcut key associated with it.</span></span> <span data-ttu-id="e1d90-261">Сочетание клавиш отличается от клавиши доступа, поскольку меню не обязательно должно быть активным для работы сочетания клавиш.</span><span class="sxs-lookup"><span data-stu-id="e1d90-261">A shortcut key is different from an access key, because the menu does not have to be active for the shortcut key to work.</span></span> <span data-ttu-id="e1d90-262">Кроме того, клавиша доступа *всегда* связана с пунктом меню, а сочетание клавиш *обычно* (но не обязательно) связано с пунктом меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-262">Also, an access key is *always* associated with a menu item, while an shortcut key is *usually* (but does not have to be) associated with a menu item.</span></span>

<span data-ttu-id="e1d90-263">Текст, определяющий сочетание клавиш, добавляется в текстовую строку элемента меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-263">Text that identifies the shortcut key is added to the menu-item text string.</span></span> <span data-ttu-id="e1d90-264">Текст ярлыка отображается справа от имени элемента меню после обратной косой черты и символа табуляции ( \\ t).</span><span class="sxs-lookup"><span data-stu-id="e1d90-264">The shortcut text appears to the right of the menu item name, after a backslash and tab character (\\t).</span></span> <span data-ttu-id="e1d90-265">Например, "&Close \\ талт + F4" представляет команду "Закрыть" с сочетанием клавиш ALT + F4 в качестве сочетания клавиш и буквой "C" в качестве ключа доступа.</span><span class="sxs-lookup"><span data-stu-id="e1d90-265">For example, "&Close\\tAlt+F4" represents a Close command with the ALT+F4 key combination as its shortcut key and with the letter "C" as its access key.</span></span> <span data-ttu-id="e1d90-266">Дополнительные сведения см. в разделе [сочетания](keyboard-accelerators.md)клавиш.</span><span class="sxs-lookup"><span data-stu-id="e1d90-266">For more information, see [Keyboard Accelerators](keyboard-accelerators.md).</span></span>

## <a name="menu-creation"></a><span data-ttu-id="e1d90-267">Создание меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-267">Menu Creation</span></span>

<span data-ttu-id="e1d90-268">Меню можно создать с помощью шаблона меню или функций создания меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-268">You can create a menu using either a menu template or menu creation functions.</span></span> <span data-ttu-id="e1d90-269">Шаблоны меню обычно определяются как ресурсы.</span><span class="sxs-lookup"><span data-stu-id="e1d90-269">Menu templates are typically defined as resources.</span></span> <span data-ttu-id="e1d90-270">Меню — ресурсы шаблона можно загрузить явным образом или назначить в качестве меню по умолчанию для класса окна.</span><span class="sxs-lookup"><span data-stu-id="e1d90-270">Menu-template resources can be loaded explicitly or assigned as the default menu for a window class.</span></span> <span data-ttu-id="e1d90-271">Кроме того, в памяти можно динамически создавать шаблонные ресурсы меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-271">You can also create menu-template resources dynamically in memory.</span></span>

<span data-ttu-id="e1d90-272">В следующих разделах подробно описывается создание меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-272">The following topics describe menu creation in detail:</span></span>

-   [<span data-ttu-id="e1d90-273">Ресурсы шаблона меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-273">Menu Template Resources</span></span>](#menu-template-resources)
-   [<span data-ttu-id="e1d90-274">Шаблон меню в памяти</span><span class="sxs-lookup"><span data-stu-id="e1d90-274">Menu Template in Memory</span></span>](#menu-template-in-memory)
-   [<span data-ttu-id="e1d90-275">Дескрипторы меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-275">Menu Handles</span></span>](#menu-handles)
-   [<span data-ttu-id="e1d90-276">Функции создания меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-276">Menu Creation Functions</span></span>](#menu-creation-functions)
-   [<span data-ttu-id="e1d90-277">Отображение меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-277">Menu Display</span></span>](#menu-display)
-   [<span data-ttu-id="e1d90-278">Меню классов окон</span><span class="sxs-lookup"><span data-stu-id="e1d90-278">Window Class Menus</span></span>](#window-class-menus)

### <a name="menu-template-resources"></a><span data-ttu-id="e1d90-279">Ресурсы шаблона меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-279">Menu Template Resources</span></span>

<span data-ttu-id="e1d90-280">Большинство приложений создают меню с помощью контекстных ресурсов меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-280">Most applications create menus using menu-template resources.</span></span> <span data-ttu-id="e1d90-281">*Шаблон меню* определяет меню, включая элементы в строке меню и все меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-281">A *menu template* defines a menu, including the items in the menu bar and all menus.</span></span> <span data-ttu-id="e1d90-282">Сведения о создании ресурса шаблона меню см. в документации, входящей в состав средств разработки.</span><span class="sxs-lookup"><span data-stu-id="e1d90-282">For information about creating a menu-template resource, see the documentation included with your development tools.</span></span>

<span data-ttu-id="e1d90-283">После создания ресурса шаблона меню и добавления его в исполняемый файл приложения (exe) можно использовать функцию [**лоадмену**](/windows/desktop/api/Winuser/nf-winuser-loadmenua) для загрузки ресурса в память.</span><span class="sxs-lookup"><span data-stu-id="e1d90-283">After you create a menu-template resource and add it to your application's executable (.exe) file, you can use the [**LoadMenu**](/windows/desktop/api/Winuser/nf-winuser-loadmenua) function to load the resource into memory.</span></span> <span data-ttu-id="e1d90-284">Эта функция возвращает в меню маркер, который затем можно присвоить окну с помощью функции [**сетмену**](/windows/desktop/api/Winuser/nf-winuser-setmenu) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-284">This function returns a handle to the menu, which you can then assign to a window by using the [**SetMenu**](/windows/desktop/api/Winuser/nf-winuser-setmenu) function.</span></span> <span data-ttu-id="e1d90-285">Меню можно назначить любому окну, которое не является дочерним окном.</span><span class="sxs-lookup"><span data-stu-id="e1d90-285">You can assign a menu to any window that is not a child window.</span></span>

<span data-ttu-id="e1d90-286">Реализация меню в качестве ресурсов упрощает локализацию приложения для использования в нескольких странах и регионах.</span><span class="sxs-lookup"><span data-stu-id="e1d90-286">Implementing menus as resources makes an application easier to localize for use in multiple countries/regions.</span></span> <span data-ttu-id="e1d90-287">Только файл определения ресурса должен быть локализован для каждого языка, а не исходного кода приложения.</span><span class="sxs-lookup"><span data-stu-id="e1d90-287">Only the resource-definition file needs to be localized for each language, not the application's source code.</span></span>

### <a name="menu-template-in-memory"></a><span data-ttu-id="e1d90-288">Шаблон меню в памяти</span><span class="sxs-lookup"><span data-stu-id="e1d90-288">Menu Template in Memory</span></span>

<span data-ttu-id="e1d90-289">Меню можно создать из шаблона меню, который построен в памяти во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="e1d90-289">A menu can be created from a menu template that is built in memory at run time.</span></span> <span data-ttu-id="e1d90-290">Например, приложение, которое позволяет пользователю настраивать меню, может создать шаблон меню в памяти на основе предпочтений пользователя.</span><span class="sxs-lookup"><span data-stu-id="e1d90-290">For example, an application that allows a user to customize its menu might create a menu template in memory based on the user's preferences.</span></span> <span data-ttu-id="e1d90-291">Затем приложение может сохранить шаблон в файле или в реестре для последующего использования.</span><span class="sxs-lookup"><span data-stu-id="e1d90-291">The application could then save the template in a file or in the registry for future use.</span></span> <span data-ttu-id="e1d90-292">Чтобы создать меню из шаблона в памяти, используйте функцию [**лоадменуиндирект**](/windows/desktop/api/Winuser/nf-winuser-loadmenuindirecta) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-292">To create a menu from a template in memory, use the [**LoadMenuIndirect**](/windows/desktop/api/Winuser/nf-winuser-loadmenuindirecta) function.</span></span> <span data-ttu-id="e1d90-293">Описание форматов шаблонов меню см. в разделе [ресурсы шаблона меню](#menu-template-resources).</span><span class="sxs-lookup"><span data-stu-id="e1d90-293">For descriptions of menu-template formats, see [Menu Template Resources](#menu-template-resources).</span></span>

<span data-ttu-id="e1d90-294">Стандартный шаблон меню состоит из структуры [**менуитемтемплатехеадер**](/windows/desktop/api/Winuser/ns-winuser-menuitemtemplateheader) , за которой следует одна или несколько структур [**менуитемтемплате**](/windows/desktop/api/Winuser/ns-winuser-menuitemtemplate) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-294">A standard menu template consists of a [**MENUITEMTEMPLATEHEADER**](/windows/desktop/api/Winuser/ns-winuser-menuitemtemplateheader) structure followed by one or more [**MENUITEMTEMPLATE**](/windows/desktop/api/Winuser/ns-winuser-menuitemtemplate) structures.</span></span>

<span data-ttu-id="e1d90-295">Расширенный шаблон меню состоит из структуры [**\_ \_ заголовка шаблона менуекс**](menuex-template-header.md) , за которой следуют одна или несколько [**структур \_ \_ элементов шаблона менуекс**](menuex-template-item.md) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-295">An extended menu template consists of a [**MENUEX\_TEMPLATE\_HEADER**](menuex-template-header.md) structure followed by one or more [**MENUEX\_TEMPLATE\_ITEM**](menuex-template-item.md) structures.</span></span>

### <a name="menu-handles"></a><span data-ttu-id="e1d90-296">Дескрипторы меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-296">Menu Handles</span></span>

<span data-ttu-id="e1d90-297">Система создает уникальный маркер для каждого меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-297">The system generates a unique handle to each menu.</span></span> <span data-ttu-id="e1d90-298">*Маркер меню* — это значение типа **HMENU** .</span><span class="sxs-lookup"><span data-stu-id="e1d90-298">A *menu handle* is a value of the **HMENU** type.</span></span> <span data-ttu-id="e1d90-299">Приложение должно задавать маркер меню во многих функциях меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-299">An application must specify a menu handle in many of the menu functions.</span></span> <span data-ttu-id="e1d90-300">При создании меню или загрузке ресурса меню вы получаете маркер в строке меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-300">You receive a handle to a menu bar when you create the menu or load a menu resource.</span></span>

<span data-ttu-id="e1d90-301">Чтобы получить маркер в строке меню для созданного или загруженного меню, используйте функцию [**Menu**](/windows/desktop/api/Winuser/nf-winuser-getmenu) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-301">To retrieve a handle to the menu bar for a menu that has been created or loaded, use the [**GetMenu**](/windows/desktop/api/Winuser/nf-winuser-getmenu) function.</span></span> <span data-ttu-id="e1d90-302">Чтобы получить маркер в подменю, связанном с пунктом меню, используйте [**вложенное**](/windows/desktop/api/Winuser/nf-winuser-getsubmenu) меню или функцию [**жетменуитеминфо**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-302">To retrieve a handle to the submenu associated with a menu item, use the [**GetSubMenu**](/windows/desktop/api/Winuser/nf-winuser-getsubmenu) or [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) function.</span></span> <span data-ttu-id="e1d90-303">Чтобы получить маркер в меню окна, используйте функцию [**жетсистеммену**](/windows/desktop/api/Winuser/nf-winuser-getsystemmenu) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-303">To retrieve a handle to a window menu, use the [**GetSystemMenu**](/windows/desktop/api/Winuser/nf-winuser-getsystemmenu) function.</span></span>

### <a name="menu-creation-functions"></a><span data-ttu-id="e1d90-304">Функции создания меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-304">Menu Creation Functions</span></span>

<span data-ttu-id="e1d90-305">С помощью функций создания меню можно создавать меню во время выполнения или добавлять пункты меню в существующие меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-305">Using menu creation functions, you can create menus at run time or add menu items to existing menus.</span></span> <span data-ttu-id="e1d90-306">С помощью функции [**креатемену**](/windows/desktop/api/Winuser/nf-winuser-createmenu) можно создать пустую строку меню и функцию [**креатепопупмену**](/windows/desktop/api/Winuser/nf-winuser-createpopupmenu) , чтобы создать пустое меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-306">You can use the [**CreateMenu**](/windows/desktop/api/Winuser/nf-winuser-createmenu) function to create an empty menu bar and the [**CreatePopupMenu**](/windows/desktop/api/Winuser/nf-winuser-createpopupmenu) function to create an empty menu.</span></span> <span data-ttu-id="e1d90-307">Вы можете сохранить определенные сведения о параметрах меню с помощью структуры [**менуинфо**](/windows/win32/api/winuser/ns-winuser-menuinfo) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-307">You can save certain settings information for a menu by using the [**MENUINFO**](/windows/win32/api/winuser/ns-winuser-menuinfo) structure.</span></span> <span data-ttu-id="e1d90-308">Чтобы получить или получить параметры меню, используйте [**жетменуинфо**](/windows/desktop/api/Winuser/nf-winuser-getmenuinfo) или [**сетменуинфо**](/windows/desktop/api/Winuser/nf-winuser-setmenuinfo).</span><span class="sxs-lookup"><span data-stu-id="e1d90-308">To get or retrieve the settings of a menu, use [**GetMenuInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuinfo) or [**SetMenuInfo**](/windows/desktop/api/Winuser/nf-winuser-setmenuinfo).</span></span> <span data-ttu-id="e1d90-309">Чтобы добавить элементы в меню, используйте функцию [**инсертменуитем**](/windows/desktop/api/Winuser/nf-winuser-insertmenuitema) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-309">To add items to a menu, use the [**InsertMenuItem**](/windows/desktop/api/Winuser/nf-winuser-insertmenuitema) function.</span></span> <span data-ttu-id="e1d90-310">Старые функции [**аппендмену**](/windows/desktop/api/Winuser/nf-winuser-appendmenua) и [**инсертмену**](/windows/desktop/api/Winuser/nf-winuser-insertmenua) по-прежнему поддерживаются, но **инсертменуитем** следует использовать для новых приложений.</span><span class="sxs-lookup"><span data-stu-id="e1d90-310">The older [**AppendMenu**](/windows/desktop/api/Winuser/nf-winuser-appendmenua) and [**InsertMenu**](/windows/desktop/api/Winuser/nf-winuser-insertmenua) functions are still supported, but **InsertMenuItem** should be used for new applications.</span></span>

### <a name="menu-display"></a><span data-ttu-id="e1d90-311">Отображение меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-311">Menu Display</span></span>

<span data-ttu-id="e1d90-312">После того как меню загружено или создано, оно должно быть назначено окну, прежде чем система сможет отобразить его.</span><span class="sxs-lookup"><span data-stu-id="e1d90-312">After a menu has been loaded or created, it must be assigned to a window before the system can display it.</span></span> <span data-ttu-id="e1d90-313">Можно назначить меню, определив меню класса.</span><span class="sxs-lookup"><span data-stu-id="e1d90-313">You can assign a menu by defining a class menu.</span></span> <span data-ttu-id="e1d90-314">Дополнительные сведения см. в разделе [меню классов окон](#window-class-menus).</span><span class="sxs-lookup"><span data-stu-id="e1d90-314">For more information, see [Window Class Menus](#window-class-menus).</span></span> <span data-ttu-id="e1d90-315">Можно также назначить меню окну, указав его маркер в качестве параметра *HMENU* функции [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) или [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) или вызвав функцию [**сетмену**](/windows/desktop/api/Winuser/nf-winuser-setmenu) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-315">You can also assign a menu to a window by specifying a handle to the menu as the *hMenu* parameter of the [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) or [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function, or by calling the [**SetMenu**](/windows/desktop/api/Winuser/nf-winuser-setmenu) function.</span></span>

<span data-ttu-id="e1d90-316">Для вывода контекстного меню используйте функцию [**траккпопупменуекс**](/windows/desktop/api/Winuser/nf-winuser-trackpopupmenuex) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-316">To display a shortcut menu use the [**TrackPopupMenuEx**](/windows/desktop/api/Winuser/nf-winuser-trackpopupmenuex) function.</span></span> <span data-ttu-id="e1d90-317">Контекстные меню, называемые также плавающими всплывающими меню или контекстными меню, обычно отображаются при обработке сообщения [**WM \_ CONTEXTMENU**](wm-contextmenu.md) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-317">Shortcut menus, also called floating pop-up menus or context menus, are typically displayed when the [**WM\_CONTEXTMENU**](wm-contextmenu.md) message is processed.</span></span>

<span data-ttu-id="e1d90-318">Меню можно назначить любому окну, которое не является дочерним окном.</span><span class="sxs-lookup"><span data-stu-id="e1d90-318">You can assign a menu to any window that is not a child window.</span></span>

<span data-ttu-id="e1d90-319">Старая функция [**метод TrackPopupMenu**](/windows/desktop/api/Winuser/nf-winuser-trackpopupmenu) по-прежнему поддерживается, но новые приложения должны использовать функцию [**траккпопупменуекс**](/windows/desktop/api/Winuser/nf-winuser-trackpopupmenuex) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-319">The older [**TrackPopupMenu**](/windows/desktop/api/Winuser/nf-winuser-trackpopupmenu) function is still supported, but new applications should use the [**TrackPopupMenuEx**](/windows/desktop/api/Winuser/nf-winuser-trackpopupmenuex) function.</span></span>

### <a name="window-class-menus"></a><span data-ttu-id="e1d90-320">Меню классов окон</span><span class="sxs-lookup"><span data-stu-id="e1d90-320">Window Class Menus</span></span>

<span data-ttu-id="e1d90-321">При регистрации класса окна можно указать меню по умолчанию, называемое *меню класса* .</span><span class="sxs-lookup"><span data-stu-id="e1d90-321">You can specify a default menu, called a *class menu,* when you register a window class.</span></span> <span data-ttu-id="e1d90-322">Для этого необходимо назначить имя ресурса шаблона меню элементу **лпсзменунаме** структуры [**вндкласс**](/windows/win32/api/winuser/ns-winuser-wndclassa) , используемой для регистрации класса.</span><span class="sxs-lookup"><span data-stu-id="e1d90-322">To do so, you assign the name of the menu-template resource to the **lpszMenuName** member of the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure used to register the class.</span></span>

<span data-ttu-id="e1d90-323">По умолчанию каждому окну присваивается меню класс для своего класса Window, поэтому вам не нужно явно загружать меню и присваивать его каждому окну.</span><span class="sxs-lookup"><span data-stu-id="e1d90-323">By default, every window is assigned the class menu for its window class so you do not need to explicitly load the menu and assign it to each window.</span></span> <span data-ttu-id="e1d90-324">Можно переопределить меню класса, указав другой маркер меню в вызове функции [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-324">You can override the class menu by specifying a different menu handle in a call to the [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function.</span></span> <span data-ttu-id="e1d90-325">Можно также изменить меню окна после его создания с помощью функции [**сетмену**](/windows/desktop/api/Winuser/nf-winuser-setmenu) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-325">You can also change a window's menu after it is created by using the [**SetMenu**](/windows/desktop/api/Winuser/nf-winuser-setmenu) function.</span></span> <span data-ttu-id="e1d90-326">Дополнительные сведения см. в разделе [классы окон](/windows/desktop/winmsg/window-classes).</span><span class="sxs-lookup"><span data-stu-id="e1d90-326">For more information, see [Window Classes](/windows/desktop/winmsg/window-classes).</span></span>

## <a name="menu-items"></a><span data-ttu-id="e1d90-327">Пункты меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-327">Menu Items</span></span>

<span data-ttu-id="e1d90-328">В следующих разделах рассматриваются действия, выполняемые системой, когда пользователь выбирает пункт меню, а также способы, которыми приложение может управлять внешним видом и функциональностью элемента.</span><span class="sxs-lookup"><span data-stu-id="e1d90-328">The following topics discuss what the system does when the user chooses a menu item, and the ways an application can control an item's appearance and functionality:</span></span>

-   [<span data-ttu-id="e1d90-329">Элементы команд и элементы, открывающие подменю</span><span class="sxs-lookup"><span data-stu-id="e1d90-329">Command Items and Items that Open Submenus</span></span>](#command-items-and-items-that-open-submenus)
-   [<span data-ttu-id="e1d90-330">Меню — идентификатор элемента</span><span class="sxs-lookup"><span data-stu-id="e1d90-330">Menu-Item Identifier</span></span>](#menu-item-identifier)
-   [<span data-ttu-id="e1d90-331">Меню — позиция элемента</span><span class="sxs-lookup"><span data-stu-id="e1d90-331">Menu-Item Position</span></span>](#menu-item-position)
-   [<span data-ttu-id="e1d90-332">Доступ к пунктам меню программным способом</span><span class="sxs-lookup"><span data-stu-id="e1d90-332">Accessing Menu Items Programmatically</span></span>](#accessing-menu-items-programmatically)
-   [<span data-ttu-id="e1d90-333">Элементы меню по умолчанию</span><span class="sxs-lookup"><span data-stu-id="e1d90-333">Default Menu Items</span></span>](#default-menu-items)
-   [<span data-ttu-id="e1d90-334">Выбранные и очищенные пункты меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-334">Selected and Clear Menu Items</span></span>](#selected-and-clear-menu-items)
-   [<span data-ttu-id="e1d90-335">Включенные, серые и отключенные пункты меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-335">Enabled, Grayed, and Disabled Menu Items</span></span>](#enabled-grayed-and-disabled-menu-items)
-   [<span data-ttu-id="e1d90-336">Выделенные пункты меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-336">Highlighted Menu Items</span></span>](#highlighted-menu-items)
-   [<span data-ttu-id="e1d90-337">Элементы меню, рисуемые владельцем</span><span class="sxs-lookup"><span data-stu-id="e1d90-337">Owner-Drawn Menu Items</span></span>](#owner-drawn-menu-items)
-   [<span data-ttu-id="e1d90-338">Разделители пунктов меню и разрывы строк</span><span class="sxs-lookup"><span data-stu-id="e1d90-338">Menu Item Separators and Line Breaks</span></span>](#menu-item-separators-and-line-breaks)

### <a name="command-items-and-items-that-open-submenus"></a><span data-ttu-id="e1d90-339">Элементы команд и элементы, открывающие подменю</span><span class="sxs-lookup"><span data-stu-id="e1d90-339">Command Items and Items that Open Submenus</span></span>

<span data-ttu-id="e1d90-340">Когда пользователь выбирает элемент команды, система отправляет командное сообщение в окно, которому принадлежит меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-340">When the user chooses a command item, the system sends a command message to the window that owns the menu.</span></span> <span data-ttu-id="e1d90-341">Если командный элемент находится в меню окно, система отправляет сообщение [**WM \_ сискомманд**](wm-syscommand.md) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-341">If the command item is on the window menu, the system sends the [**WM\_SYSCOMMAND**](wm-syscommand.md) message.</span></span> <span data-ttu-id="e1d90-342">В противном случае отправляется [**\_ командное сообщение WM**](wm-command.md) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-342">Otherwise, it sends the [**WM\_COMMAND**](wm-command.md) message.</span></span>

<span data-ttu-id="e1d90-343">Связанный с каждым пунктом меню, открывающим подменю, является маркером соответствующего подменю.</span><span class="sxs-lookup"><span data-stu-id="e1d90-343">Associated with each menu item that opens a submenu is a handle to the corresponding submenu.</span></span> <span data-ttu-id="e1d90-344">Когда пользователь указывает на такой элемент, система открывает подменю.</span><span class="sxs-lookup"><span data-stu-id="e1d90-344">When the user points to such an item, the system opens the submenu.</span></span> <span data-ttu-id="e1d90-345">В окно "владелец" не отправляется командное сообщение.</span><span class="sxs-lookup"><span data-stu-id="e1d90-345">No command message is sent to the owner window.</span></span> <span data-ttu-id="e1d90-346">Однако система перед отображением подменю отправляет сообщение [**WM \_ инитменупопуп**](wm-initmenupopup.md) в окно владельца.</span><span class="sxs-lookup"><span data-stu-id="e1d90-346">However, the system sends a [**WM\_INITMENUPOPUP**](wm-initmenupopup.md) message to the owner window before displaying the submenu.</span></span> <span data-ttu-id="e1d90-347">Вы можете получить маркер для подменю, связанного с элементом, используя [**вложенное меню**](/windows/desktop/api/Winuser/nf-winuser-getsubmenu) или функцию [**жетменуитеминфо**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-347">You can get a handle to the submenu associated with an item by using the [**GetSubMenu**](/windows/desktop/api/Winuser/nf-winuser-getsubmenu) or [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) function.</span></span>

<span data-ttu-id="e1d90-348">Строка меню обычно содержит имена меню, но она также может содержать командные элементы.</span><span class="sxs-lookup"><span data-stu-id="e1d90-348">A menu bar typically contains menu names, but it can also contain command items.</span></span> <span data-ttu-id="e1d90-349">Подменю обычно содержит командные элементы, но также может содержать элементы, открывающие вложенные подменю.</span><span class="sxs-lookup"><span data-stu-id="e1d90-349">A submenu typically contains command items, but it can also contain items that open nested submenus.</span></span> <span data-ttu-id="e1d90-350">Добавляя такие элементы в подменю, можно вкладывать меню в любую глубину.</span><span class="sxs-lookup"><span data-stu-id="e1d90-350">By adding such items to submenus, you can nest menus to any depth.</span></span> <span data-ttu-id="e1d90-351">Чтобы предоставить визуальную подсказку для пользователя, система автоматически отображает маленькую стрелку справа от текста пункта меню, открывающего подменю.</span><span class="sxs-lookup"><span data-stu-id="e1d90-351">To provide a visual cue for the user, the system automatically displays a small arrow to the right of the text of a menu item that opens a submenu.</span></span>

### <a name="menu-item-identifier"></a><span data-ttu-id="e1d90-352">Идентификатор Menu-Item</span><span class="sxs-lookup"><span data-stu-id="e1d90-352">Menu-Item Identifier</span></span>

<span data-ttu-id="e1d90-353">Связанный с каждым пунктом меню — это уникальное, определяемое приложением целое число, именуемое *идентификатором элемента меню*.</span><span class="sxs-lookup"><span data-stu-id="e1d90-353">Associated with each menu item is a unique, application-defined integer, called a *menu-item identifier*.</span></span> <span data-ttu-id="e1d90-354">Когда пользователь выбирает элемент команды из меню, система отправляет идентификатор элемента в окно владельца как часть [**\_ командного сообщения WM**](wm-command.md) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-354">When the user chooses a command item from a menu, the system sends the item's identifier to the owner window as part of a [**WM\_COMMAND**](wm-command.md) message.</span></span> <span data-ttu-id="e1d90-355">Процедура окна проверяет идентификатор, чтобы определить источник сообщения, и обрабатывает сообщение соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="e1d90-355">The window procedure examines the identifier to determine the source of the message, and processes the message accordingly.</span></span> <span data-ttu-id="e1d90-356">Кроме того, при вызове функций меню можно указать пункт меню, используя его идентификатор. Например, чтобы включить или отключить пункт меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-356">In addition, you can specify a menu item using its identifier when you call menu functions; for example, to enable or disable a menu item.</span></span>

<span data-ttu-id="e1d90-357">Элементы меню, открывающие подменю, имеют идентификаторы так же, как и элементы команд.</span><span class="sxs-lookup"><span data-stu-id="e1d90-357">Menu items that open submenus have identifiers just as command items do.</span></span> <span data-ttu-id="e1d90-358">Однако система не отправляет командное сообщение при выборе такого элемента из меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-358">However, the system does not send a command message when such an item is selected from a menu.</span></span> <span data-ttu-id="e1d90-359">Вместо этого система открывает подменю, связанное с пунктом меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-359">Instead, the system opens the submenu associated with the menu item.</span></span>

<span data-ttu-id="e1d90-360">Чтобы получить идентификатор элемента меню в указанной позиции, используйте функцию [**жетменуитемид**](/windows/desktop/api/Winuser/nf-winuser-getmenuitemid) или [**жетменуитеминфо**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-360">To retrieve the identifier of the menu item at a specified position, use the [**GetMenuItemID**](/windows/desktop/api/Winuser/nf-winuser-getmenuitemid) or [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) function.</span></span>

### <a name="menu-item-position"></a><span data-ttu-id="e1d90-361">Menu-Itemное расположение</span><span class="sxs-lookup"><span data-stu-id="e1d90-361">Menu-Item Position</span></span>

<span data-ttu-id="e1d90-362">Помимо уникального идентификатора, каждый пункт меню в строке меню или меню имеет уникальное значение позиции.</span><span class="sxs-lookup"><span data-stu-id="e1d90-362">In addition to having a unique identifier, each menu item in a menu bar or menu has a unique position value.</span></span> <span data-ttu-id="e1d90-363">Крайний левый элемент в строке меню или верхний элемент меню имеет нулевую позицию.</span><span class="sxs-lookup"><span data-stu-id="e1d90-363">The leftmost item in a menu bar, or the top item in a menu, has position zero.</span></span> <span data-ttu-id="e1d90-364">Значение позиции увеличивается для последующих пунктов меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-364">The position value is incremented for subsequent menu items.</span></span> <span data-ttu-id="e1d90-365">Система присваивает значение позиции всем элементам меню, включая разделители.</span><span class="sxs-lookup"><span data-stu-id="e1d90-365">The system assigns a position value to all items in a menu, including separators.</span></span> <span data-ttu-id="e1d90-366">На следующем рисунке показаны значения позиции элементов в строке меню и в меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-366">The following illustration shows the position values of items in a menu bar and in a menu.</span></span>

![Строка меню и меню](images/csemn-01.png)

<span data-ttu-id="e1d90-368">При вызове функции меню, которая изменяет или извлекает сведения о конкретном пункте меню, можно указать элемент, используя его идентификатор или его позицию.</span><span class="sxs-lookup"><span data-stu-id="e1d90-368">When calling a menu function that modifies or retrieves information about a specific menu item, you can specify the item using either its identifier or its position.</span></span> <span data-ttu-id="e1d90-369">Дополнительные сведения см. в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="e1d90-369">For more information, see the next section.</span></span>

### <a name="accessing-menu-items-programmatically"></a><span data-ttu-id="e1d90-370">Доступ к пунктам меню программным способом</span><span class="sxs-lookup"><span data-stu-id="e1d90-370">Accessing Menu Items Programmatically</span></span>

<span data-ttu-id="e1d90-371">Большинство функций меню позволяют указать пункт меню либо по позиции, либо по команде.</span><span class="sxs-lookup"><span data-stu-id="e1d90-371">Most menu functions allow you to specify a menu item either by position or by command.</span></span> <span data-ttu-id="e1d90-372">Некоторые функции используют флаги **MF \_ Бипоситион** и **MF \_ бикомманд** для указания алгоритма поиска. другие имеют явный параметр *фбипоситион* .</span><span class="sxs-lookup"><span data-stu-id="e1d90-372">Some functions use the **MF\_BYPOSITION** and **MF\_BYCOMMAND** flags to indicate the search algorithm; others have an explicit *fByPosition* parameter.</span></span> <span data-ttu-id="e1d90-373">Если указать пункт меню по позиции, то номер элемента будет содержать Отсчитываемый от нуля индекс в меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-373">If you specify the menu item by position, the item number is a zero-based index into the menu.</span></span> <span data-ttu-id="e1d90-374">Если указать пункт меню с помощью команды, в меню и его подменю будет выполнен поиск элемента, идентификатор меню которого равен указанному номеру товара.</span><span class="sxs-lookup"><span data-stu-id="e1d90-374">If you specify the menu item by command, the menu and its submenus are searched for an item whose menu identifier equals the item number provided.</span></span> <span data-ttu-id="e1d90-375">Если число элементов в иерархии меню совпадает с номером элемента, не указывается, какой из них используется.</span><span class="sxs-lookup"><span data-stu-id="e1d90-375">If more than one item in the menu hierarchy matches the item number, it is unspecified which one is used.</span></span> <span data-ttu-id="e1d90-376">Если меню содержат дублирующиеся идентификаторы меню, следует использовать операции меню на основе позиций, чтобы избежать этой неоднозначности.</span><span class="sxs-lookup"><span data-stu-id="e1d90-376">If your menus contain duplicate menu identifiers, you should use position-based menu operations to avoid this ambiguity.</span></span>

### <a name="default-menu-items"></a><span data-ttu-id="e1d90-377">Элементы меню по умолчанию</span><span class="sxs-lookup"><span data-stu-id="e1d90-377">Default Menu Items</span></span>

<span data-ttu-id="e1d90-378">Подменю может содержать один пункт меню по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="e1d90-378">A submenu can contain one default menu item.</span></span> <span data-ttu-id="e1d90-379">Когда пользователь открывает подменю двойным щелчком, система отправляет командное сообщение окну-владельцу меню и закрывает меню так, как если бы был выбран элемент команд по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="e1d90-379">When the user opens a submenu by double-clicking, the system sends a command message to the menu's owner window and closes the menu as if the default command item had been chosen.</span></span> <span data-ttu-id="e1d90-380">Если элемент команды по умолчанию отсутствует, подменю остается открытым.</span><span class="sxs-lookup"><span data-stu-id="e1d90-380">If there is no default command item, the submenu remains open.</span></span> <span data-ttu-id="e1d90-381">Чтобы получить и задать элемент по умолчанию для подменю, используйте функции [**жетменудефаултитем**](/windows/desktop/api/Winuser/nf-winuser-getmenudefaultitem) и [**сетменудефаултитем**](/windows/desktop/api/Winuser/nf-winuser-setmenudefaultitem) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-381">To retrieve and set the default item for a submenu, use the [**GetMenuDefaultItem**](/windows/desktop/api/Winuser/nf-winuser-getmenudefaultitem) and [**SetMenuDefaultItem**](/windows/desktop/api/Winuser/nf-winuser-setmenudefaultitem) functions.</span></span>

### <a name="selected-and-clear-menu-items"></a><span data-ttu-id="e1d90-382">Выбранные и очищенные пункты меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-382">Selected and Clear Menu Items</span></span>

<span data-ttu-id="e1d90-383">Пункт меню можно либо выбрать, либо очистить.</span><span class="sxs-lookup"><span data-stu-id="e1d90-383">A menu item can be either selected or clear.</span></span> <span data-ttu-id="e1d90-384">Система отображает точечный рисунок рядом с выбранными элементами меню, чтобы показать их выбранное состояние.</span><span class="sxs-lookup"><span data-stu-id="e1d90-384">The system displays a bitmap next to selected menu items to indicate their selected state.</span></span> <span data-ttu-id="e1d90-385">Система не отображает точечный рисунок рядом с пунктом очистить элементы, если не задано определенное приложением точечное изображение "Clear".</span><span class="sxs-lookup"><span data-stu-id="e1d90-385">The system does not display a bitmap next to clear items, unless an application-defined "clear" bitmap is specified.</span></span> <span data-ttu-id="e1d90-386">Можно выбрать только пункты меню. нельзя выбрать элементы в строке меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-386">Only menu items in a menu can be selected; items in a menu bar cannot be selected.</span></span>

<span data-ttu-id="e1d90-387">Приложения обычно проверяют или очищают пункт меню, чтобы указать, действует ли параметр.</span><span class="sxs-lookup"><span data-stu-id="e1d90-387">Applications typically check or clear a menu item to indicate whether an option is in effect.</span></span> <span data-ttu-id="e1d90-388">Например, предположим, что приложение содержит панель инструментов, которую пользователь может отображать или скрывать с помощью команды **панели инструментов** в меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-388">For example, suppose an application has a toolbar that the user can show or hide by using a **Toolbar** command on a menu.</span></span> <span data-ttu-id="e1d90-389">Если панель инструментов скрыта, пункт меню **панели инструментов** становится четким.</span><span class="sxs-lookup"><span data-stu-id="e1d90-389">When the toolbar is hidden, the **Toolbar** menu item is clear.</span></span> <span data-ttu-id="e1d90-390">Когда пользователь выбирает команду, приложение проверяет пункт меню и отображает панель инструментов.</span><span class="sxs-lookup"><span data-stu-id="e1d90-390">When the user chooses the command, the application checks the menu item and shows the toolbar.</span></span>

<span data-ttu-id="e1d90-391">Атрибут галочки определяет, выбран ли пункт меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-391">A check mark attribute controls whether a menu item is selected.</span></span> <span data-ttu-id="e1d90-392">Можно задать атрибут галочки пункта меню с помощью функции [**чеккменуитем**](/windows/desktop/api/Winuser/nf-winuser-checkmenuitem) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-392">You can set a menu item's check mark attribute by using the [**CheckMenuItem**](/windows/desktop/api/Winuser/nf-winuser-checkmenuitem) function.</span></span> <span data-ttu-id="e1d90-393">Функцию [**жетменустате**](/windows/desktop/api/Winuser/nf-winuser-getmenustate) можно использовать, чтобы определить, выбран ли в данный момент пункт меню или снят.</span><span class="sxs-lookup"><span data-stu-id="e1d90-393">You can use the [**GetMenuState**](/windows/desktop/api/Winuser/nf-winuser-getmenustate) function to determine whether a menu item is currently selected or cleared.</span></span>

<span data-ttu-id="e1d90-394">Вместо [**чеккменуитем**](/windows/desktop/api/Winuser/nf-winuser-checkmenuitem) и [**жетменустате**](/windows/desktop/api/Winuser/nf-winuser-getmenustate)можно использовать функции [**жетменуитеминфо**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) и [**сетменуитеминфо**](/windows/desktop/api/Winuser/nf-winuser-setmenuiteminfoa) для получения и установки состояния проверки пункта меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-394">Instead of [**CheckMenuItem**](/windows/desktop/api/Winuser/nf-winuser-checkmenuitem) and [**GetMenuState**](/windows/desktop/api/Winuser/nf-winuser-getmenustate), you can use the [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) and [**SetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-setmenuiteminfoa) functions to retrieve and set the check state of a menu item.</span></span>

<span data-ttu-id="e1d90-395">Иногда группа элементов меню соответствует набору взаимоисключающих параметров.</span><span class="sxs-lookup"><span data-stu-id="e1d90-395">Sometimes, a group of menu items corresponds to a set of mutually exclusive options.</span></span> <span data-ttu-id="e1d90-396">В этом случае можно указать выбранный параметр с помощью выбранного пункта меню переключателя (аналогично элементу управления "переключатель").</span><span class="sxs-lookup"><span data-stu-id="e1d90-396">In this case, you can indicate the selected option by using a selected radio menu item (analogous to a radio button control).</span></span> <span data-ttu-id="e1d90-397">Выбранные переключатели отображаются с помощью точечного рисунка, а не точечного рисунка галочки.</span><span class="sxs-lookup"><span data-stu-id="e1d90-397">Selected radio items are displayed with a bullet bitmap instead of a check mark bitmap.</span></span> <span data-ttu-id="e1d90-398">Чтобы проверить пункт меню и сделать его элементом Радио, используйте функцию [**чеккменурадиоитем**](/windows/desktop/api/Winuser/nf-winuser-checkmenuradioitem) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-398">To check a menu item and make it a radio item, use the [**CheckMenuRadioItem**](/windows/desktop/api/Winuser/nf-winuser-checkmenuradioitem) function.</span></span>

<span data-ttu-id="e1d90-399">По умолчанию система отображает флажок или точечный рисунок рядом с выбранными пунктами меню и без точечного рисунка рядом с пунктом снятые пункты меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-399">By default, the system displays a check mark or bullet bitmap next to selected menu items and no bitmap next to cleared menu items.</span></span> <span data-ttu-id="e1d90-400">Однако функцию [**сетменуитембитмапс**](/windows/desktop/api/Winuser/nf-winuser-setmenuitembitmaps) можно использовать для связывания выбранных приложением и снятых растровых изображений с пунктом меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-400">However, you can use the [**SetMenuItemBitmaps**](/windows/desktop/api/Winuser/nf-winuser-setmenuitembitmaps) function to associate application-defined selected and cleared bitmaps with a menu item.</span></span> <span data-ttu-id="e1d90-401">Затем система использует указанные растровые изображения для указания выбранного или выключенного состояния элемента меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-401">The system then uses the specified bitmaps to indicate the menu item's selected or cleared state.</span></span>

<span data-ttu-id="e1d90-402">Определяемые приложением точечные рисунки, связанные с пунктом меню, должны иметь тот же размер, что и точечный рисунок флажка по умолчанию. размеры могут различаться в зависимости от разрешения экрана.</span><span class="sxs-lookup"><span data-stu-id="e1d90-402">Application-defined bitmaps associated with a menu item must be the same size as the default check mark bitmap, the dimensions of which may vary depending on screen resolution.</span></span> <span data-ttu-id="e1d90-403">Чтобы получить правильные размеры, используйте функцию [**жетсистемметрикс**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-403">To retrieve the correct dimensions, use the [**GetSystemMetrics**](/windows/desktop/api/winuser/nf-winuser-getsystemmetrics) function.</span></span> <span data-ttu-id="e1d90-404">Можно создать несколько растровых ресурсов для различных разрешений экрана. Создайте один ресурс Bitmap и при необходимости измените его масштаб. или создать точечный рисунок во время выполнения и нарисовать в нем изображение.</span><span class="sxs-lookup"><span data-stu-id="e1d90-404">You can create multiple bitmap resources for different screen resolutions; create one bitmap resource and scale it, if necessary; or create a bitmap at run time and draw an image in it.</span></span> <span data-ttu-id="e1d90-405">Точечные рисунки могут быть либо монохромными, либо цветными.</span><span class="sxs-lookup"><span data-stu-id="e1d90-405">The bitmaps may be either monochrome or color.</span></span> <span data-ttu-id="e1d90-406">Однако, поскольку элементы меню инвертированы при выделении, внешний вид некоторых инвертированных цветных растровых изображений может оказаться нежелательным.</span><span class="sxs-lookup"><span data-stu-id="e1d90-406">However, because menu items are inverted when highlighted, the appearance of certain inverted color bitmaps may be undesirable.</span></span> <span data-ttu-id="e1d90-407">Дополнительные сведения см. в разделе [точечные рисунки](/windows/desktop/gdi/bitmaps).</span><span class="sxs-lookup"><span data-stu-id="e1d90-407">For more information, see [Bitmaps](/windows/desktop/gdi/bitmaps).</span></span>

### <a name="enabled-grayed-and-disabled-menu-items"></a><span data-ttu-id="e1d90-408">Включенные, серые и отключенные пункты меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-408">Enabled, Grayed, and Disabled Menu Items</span></span>

<span data-ttu-id="e1d90-409">Пункт меню может быть включен, серым или отключен.</span><span class="sxs-lookup"><span data-stu-id="e1d90-409">A menu item can be enabled, grayed, or disabled.</span></span> <span data-ttu-id="e1d90-410">По умолчанию пункт меню включен.</span><span class="sxs-lookup"><span data-stu-id="e1d90-410">By default, a menu item is enabled.</span></span> <span data-ttu-id="e1d90-411">Когда пользователь выбирает включенный пункт меню, система отправляет командное сообщение окну-владельцу или отображает соответствующее подменю в зависимости от того, какой вид его пункта меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-411">When the user chooses an enabled menu item, the system sends a command message to the owner window or displays the corresponding submenu, depending on what kind of menu item it is.</span></span>

<span data-ttu-id="e1d90-412">Когда пункты меню недоступны для пользователя, они должны быть серыми или отключенными.</span><span class="sxs-lookup"><span data-stu-id="e1d90-412">When menu items are not available to the user, they should be grayed or disabled.</span></span> <span data-ttu-id="e1d90-413">Невозможно выбрать элементы меню серым и отключено.</span><span class="sxs-lookup"><span data-stu-id="e1d90-413">Grayed and disabled menu items cannot be chosen.</span></span> <span data-ttu-id="e1d90-414">Отключенный элемент выглядит так же, как и включенный элемент.</span><span class="sxs-lookup"><span data-stu-id="e1d90-414">A disabled item looks just like an enabled item.</span></span> <span data-ttu-id="e1d90-415">Когда пользователь щелкает отключенный элемент, этот элемент не выбирается и ничего не происходит.</span><span class="sxs-lookup"><span data-stu-id="e1d90-415">When the user clicks on a disabled item, the item is not selected, and nothing happens.</span></span> <span data-ttu-id="e1d90-416">Отключенные элементы могут быть полезны в, например, в учебнике, в котором отображается активное меню, но нет.</span><span class="sxs-lookup"><span data-stu-id="e1d90-416">Disabled items can be useful in, for example, a tutorial that presents a menu that looks active but isn't.</span></span>

<span data-ttu-id="e1d90-417">Приложение серого элемента меню недоступно, чтобы предоставить пользователю визуальную подсказку о том, что команда недоступна.</span><span class="sxs-lookup"><span data-stu-id="e1d90-417">An application grays an unavailable menu item to provide a visual cue to the user that a command is not available.</span></span> <span data-ttu-id="e1d90-418">Если действие не подходит, можно использовать серый элемент (например, если в системе не установлен принтер, в меню « **файл** » может быть серая команда « **Печать** »).</span><span class="sxs-lookup"><span data-stu-id="e1d90-418">You can use a grayed item when an action is not appropriate (for example, you can gray the **Print** command in the **File** menu when the system does not have a printer installed).</span></span>

<span data-ttu-id="e1d90-419">Функция [**енаблеменуитем**](/windows/desktop/api/Winuser/nf-winuser-enablemenuitem) включает, серый или отключает пункт меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-419">The [**EnableMenuItem**](/windows/desktop/api/Winuser/nf-winuser-enablemenuitem) function enables, grays, or disables a menu item.</span></span> <span data-ttu-id="e1d90-420">Чтобы определить, включен ли пункт меню (серый или отключен), используйте функцию [**жетменуитеминфо**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-420">To determine whether a menu item is enabled, grayed, or disabled, use the [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa) function.</span></span>

<span data-ttu-id="e1d90-421">Вместо [**жетменуитеминфо**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa)можно также использовать функцию [**жетменустате**](/windows/desktop/api/Winuser/nf-winuser-getmenustate) , чтобы определить, включен ли элемент меню, серый или отключен.</span><span class="sxs-lookup"><span data-stu-id="e1d90-421">Instead of [**GetMenuItemInfo**](/windows/desktop/api/Winuser/nf-winuser-getmenuiteminfoa), you can also use the [**GetMenuState**](/windows/desktop/api/Winuser/nf-winuser-getmenustate) function to determine whether a menu item is enabled, grayed, or disabled.</span></span>

### <a name="highlighted-menu-items"></a><span data-ttu-id="e1d90-422">Выделенные пункты меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-422">Highlighted Menu Items</span></span>

<span data-ttu-id="e1d90-423">Система автоматически выделяет пункты меню в меню по мере их выбора пользователем.</span><span class="sxs-lookup"><span data-stu-id="e1d90-423">The system automatically highlights menu items on menus as the user selects them.</span></span> <span data-ttu-id="e1d90-424">Однако выделение можно явно добавить или удалить из имени меню в строке меню с помощью функции [**хилитеменуитем**](/windows/desktop/api/Winuser/nf-winuser-hilitemenuitem) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-424">However, highlighting can be explicitly added or removed from a menu name on the menu bar by using the [**HiliteMenuItem**](/windows/desktop/api/Winuser/nf-winuser-hilitemenuitem) function.</span></span> <span data-ttu-id="e1d90-425">Эта функция не влияет на пункты меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-425">This function has no effect on menu items on menus.</span></span> <span data-ttu-id="e1d90-426">Если **хилитеменуитем** используется для выделения имени меню, то отображается только выбранное имя.</span><span class="sxs-lookup"><span data-stu-id="e1d90-426">When **HiliteMenuItem** is used to highlight a menu name, though, the name only appears to be selected.</span></span> <span data-ttu-id="e1d90-427">Если пользователь нажмет клавишу ВВОД, выделенный элемент не выбирается.</span><span class="sxs-lookup"><span data-stu-id="e1d90-427">If the user presses the ENTER key, the highlighted item is not chosen.</span></span> <span data-ttu-id="e1d90-428">Эта функция может быть полезной в, например, в обучающем приложении, которое демонстрирует использование меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-428">This feature might be useful in, for example, a training application that demonstrates the use of menus.</span></span>

### <a name="owner-drawn-menu-items"></a><span data-ttu-id="e1d90-429">Owner-Drawn пункты меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-429">Owner-Drawn Menu Items</span></span>

<span data-ttu-id="e1d90-430">Приложение может полностью управлять внешним видом элемента меню с помощью *рисуемого владельцем элемента*.</span><span class="sxs-lookup"><span data-stu-id="e1d90-430">An application can completely control the appearance of a menu item by using an *owner-drawn item*.</span></span> <span data-ttu-id="e1d90-431">Для элементов, рисуемых владельцем, требуется, чтобы приложение занимало общую ответственность за рисование выбранных (выделенных), выбранных и сброшенных состояний.</span><span class="sxs-lookup"><span data-stu-id="e1d90-431">Owner-drawn items require an application to take total responsibility for drawing selected (highlighted), selected, and cleared states.</span></span> <span data-ttu-id="e1d90-432">Например, если приложение предоставляет меню шрифтов, оно может нарисовать каждый пункт меню с помощью соответствующего шрифта. элемент для Roman будет нарисован с помощью латиницы, а элемент для наклона будет нарисован курсивом и т. д.</span><span class="sxs-lookup"><span data-stu-id="e1d90-432">For example, if an application provided a font menu, it could draw each menu item by using the corresponding font; the item for Roman would be drawn with roman, the item for Italic would be drawn in italic, and so on.</span></span> <span data-ttu-id="e1d90-433">Дополнительные сведения см. в разделе [создание Owner-Drawn пунктов меню](using-menus.md).</span><span class="sxs-lookup"><span data-stu-id="e1d90-433">For more information, see [Creating Owner-Drawn Menu Items](using-menus.md).</span></span>

### <a name="menu-item-separators-and-line-breaks"></a><span data-ttu-id="e1d90-434">Разделители пунктов меню и разрывы строк</span><span class="sxs-lookup"><span data-stu-id="e1d90-434">Menu Item Separators and Line Breaks</span></span>

<span data-ttu-id="e1d90-435">Система предоставляет специальный тип пункта меню, называемый *разделителем*, который отображается горизонтальной линией.</span><span class="sxs-lookup"><span data-stu-id="e1d90-435">The system provides a special type of menu item, called a *separator*, that appears as a horizontal line.</span></span> <span data-ttu-id="e1d90-436">Можно использовать разделитель, чтобы разделить меню на группы связанных элементов.</span><span class="sxs-lookup"><span data-stu-id="e1d90-436">You can use a separator to divide a menu into groups of related items.</span></span> <span data-ttu-id="e1d90-437">Разделитель не может быть использован в строке меню, и пользователь не может выбрать разделитель.</span><span class="sxs-lookup"><span data-stu-id="e1d90-437">A separator cannot be used in a menu bar, and the user cannot select a separator.</span></span>

<span data-ttu-id="e1d90-438">Если строка меню содержит больше названий меню, чем помещается на одной строке, система переносит строку меню, автоматически разбивая ее на две или несколько строк.</span><span class="sxs-lookup"><span data-stu-id="e1d90-438">When a menu bar contains more menu names than will fit on one line, the system wraps the menu bar by automatically breaking it into two or more lines.</span></span> <span data-ttu-id="e1d90-439">Можно вызвать разрыв строки в определенном элементе строки меню, назначив этому элементу флаг типа **MFT \_ менубреак** .</span><span class="sxs-lookup"><span data-stu-id="e1d90-439">You can cause a line break to occur at a specific item on a menu bar by assigning the **MFT\_MENUBREAK** type flag to the item.</span></span> <span data-ttu-id="e1d90-440">Система размещает этот элемент и все последующие элементы на новой строке.</span><span class="sxs-lookup"><span data-stu-id="e1d90-440">The system places that item and all subsequent items on a new line.</span></span>

<span data-ttu-id="e1d90-441">Если меню содержит больше элементов, чем помещается в одном столбце, меню будет обрезано.</span><span class="sxs-lookup"><span data-stu-id="e1d90-441">When a menu contains more items than will fit in one column, the menu will be truncated.</span></span> <span data-ttu-id="e1d90-442">Можно вызвать разрыв столбца в определенном элементе меню, назначив флаг типа **MFT \_ менубреак** для элемента или используя параметр Менубреак в инструкции [MenuItem](/windows/desktop/menurc/menuitem-statement) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-442">You can cause a column break to occur at a specific item in a menu by assigning the **MFT\_MENUBREAK** type flag to the item or using the MENUBREAK option in the [MENUITEM](/windows/desktop/menurc/menuitem-statement) statement.</span></span> <span data-ttu-id="e1d90-443">Система размещает этот элемент и все последующие элементы в новом столбце.</span><span class="sxs-lookup"><span data-stu-id="e1d90-443">The system places that item and all subsequent items in a new column.</span></span> <span data-ttu-id="e1d90-444">Флаг типа **MFT \_ менубарбреак** имеет тот же результат, за исключением того, что между новым и старым столбцами отображается вертикальная линия.</span><span class="sxs-lookup"><span data-stu-id="e1d90-444">The **MFT\_MENUBARBREAK** type flag has the same effect, except that a vertical line appears between the new column and the old.</span></span>

<span data-ttu-id="e1d90-445">Если для назначения разрывов строк используются функции [**аппендмену**](/windows/desktop/api/Winuser/nf-winuser-appendmenua), [**инсертмену**](/windows/desktop/api/Winuser/nf-winuser-insertmenua)или [**модифимену**](/windows/desktop/api/Winuser/nf-winuser-modifymenua) , следует назначить флаги типа **MF \_ менубреак** или **MF \_ менубарбреак**.</span><span class="sxs-lookup"><span data-stu-id="e1d90-445">If you use the [**AppendMenu**](/windows/desktop/api/Winuser/nf-winuser-appendmenua), [**InsertMenu**](/windows/desktop/api/Winuser/nf-winuser-insertmenua), or [**ModifyMenu**](/windows/desktop/api/Winuser/nf-winuser-modifymenua) functions to assign line breaks, you should assign the type flags **MF\_MENUBREAK** or **MF\_MENUBARBREAK**.</span></span>

## <a name="messages-used-with-menus"></a><span data-ttu-id="e1d90-446">Сообщения, используемые с меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-446">Messages Used with Menus</span></span>

<span data-ttu-id="e1d90-447">Действие системы, связанное с меню, отправляет сообщения в процедуру окна окна, которому принадлежит меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-447">The system reports menu-related activity by sending messages to the window procedure of the window that owns the menu.</span></span> <span data-ttu-id="e1d90-448">Система отправляет ряд сообщений, когда пользователь выбирает элементы в строке меню или нажимает правую кнопку мыши для вывода контекстного меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-448">The system sends a series of messages when the user selects items on the menu bar or clicks the right mouse button to display a shortcut menu.</span></span>

<span data-ttu-id="e1d90-449">Когда пользователь активирует элемент в строке меню, окно владельца сначала получает сообщение [**WM \_ сискомманд**](wm-syscommand.md) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-449">When the user activates an item on the menu bar, the owner window first receives a [**WM\_SYSCOMMAND**](wm-syscommand.md) message.</span></span> <span data-ttu-id="e1d90-450">Это сообщение содержит флаг, указывающий, активировало ли пользователь меню с помощью клавиатуры (SC \_ кэймену) или мыши (SC \_ маусемену).</span><span class="sxs-lookup"><span data-stu-id="e1d90-450">This message includes a flag that indicates whether the user activated the menu by using the keyboard (SC\_KEYMENU) or the mouse (SC\_MOUSEMENU).</span></span> <span data-ttu-id="e1d90-451">Дополнительные сведения см. [в разделе доступ с клавиатуры к меню](#keyboard-access-to-menus).</span><span class="sxs-lookup"><span data-stu-id="e1d90-451">For more information, see [Keyboard Access to Menus](#keyboard-access-to-menus).</span></span>

<span data-ttu-id="e1d90-452">Далее, перед отображением меню система отправляет сообщение [**WM \_ инитмену**](wm-initmenu.md) в процедуру окна, чтобы приложение может изменить меню до того, как пользователь увидит их.</span><span class="sxs-lookup"><span data-stu-id="e1d90-452">Next, before displaying any menus, the system sends the [**WM\_INITMENU**](wm-initmenu.md) message to the window procedure so that an application can modify the menus before the user sees them.</span></span> <span data-ttu-id="e1d90-453">Система отправляет сообщение **WM \_ инитмену** только один раз для активации меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-453">The system sends the **WM\_INITMENU** message only once per menu activation.</span></span>

<span data-ttu-id="e1d90-454">Когда пользователь указывает на пункт меню, открывающий подменю, система отправляет окну-владельцу сообщение [**WM \_ инитменупопуп**](wm-initmenupopup.md) перед отображением подменю.</span><span class="sxs-lookup"><span data-stu-id="e1d90-454">When the user points to a menu item that opens a submenu, the system sends the owner window the [**WM\_INITMENUPOPUP**](wm-initmenupopup.md) message before displaying the submenu.</span></span> <span data-ttu-id="e1d90-455">Это сообщение дает приложению возможность изменить подменю перед его отображением.</span><span class="sxs-lookup"><span data-stu-id="e1d90-455">This message gives the application an opportunity to modify the submenu before it is displayed.</span></span>

<span data-ttu-id="e1d90-456">Каждый раз, когда пользователь перемещает выделение с одного элемента на другой, система отправляет сообщение [**WM \_ менуселект**](wm-menuselect.md) в оконную процедуру окна "владелец" меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-456">Each time the user moves the highlighting from one item to another, the system sends a [**WM\_MENUSELECT**](wm-menuselect.md) message to the window procedure of the menu's owner window.</span></span> <span data-ttu-id="e1d90-457">Это сообщение обозначает выбранный в данный момент пункт меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-457">This message identifies the currently selected menu item.</span></span> <span data-ttu-id="e1d90-458">Многие приложения предоставляют информационную область в нижней части их основных окон и используют это сообщение для вывода дополнительных сведений о выбранном пункте меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-458">Many applications provide an information area at the bottom of their main windows and use this message to display additional information about the selected menu item.</span></span>

<span data-ttu-id="e1d90-459">Когда пользователь выбирает элемент команды из меню, система отправляет [**\_ командное сообщение WM**](wm-command.md) в процедуру окна.</span><span class="sxs-lookup"><span data-stu-id="e1d90-459">When the user chooses a command item from a menu, the system sends a [**WM\_COMMAND**](wm-command.md) message to the window procedure.</span></span> <span data-ttu-id="e1d90-460">Слово низкого порядка в параметре wParam **\_ командного** сообщения WM  содержит идентификатор выбранного элемента.</span><span class="sxs-lookup"><span data-stu-id="e1d90-460">The low-order word of the **WM\_COMMAND** message's *wParam* parameter contains the identifier of the chosen item.</span></span> <span data-ttu-id="e1d90-461">Процедура окна должна проверить идентификатор и соответствующим образом обработать сообщение.</span><span class="sxs-lookup"><span data-stu-id="e1d90-461">The window procedure should examine the identifier and process the message accordingly.</span></span>

<span data-ttu-id="e1d90-462">Сведения о меню можно сохранить с помощью структуры [**менуинфо**](/windows/win32/api/winuser/ns-winuser-menuinfo) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-462">You can save information for a menu using the [**MENUINFO**](/windows/win32/api/winuser/ns-winuser-menuinfo) structure.</span></span> <span data-ttu-id="e1d90-463">Если меню определено с помощью **менуинфо**. **двстиле** значение MNS \_ нотифибипос, система отправляет [**WM \_ MENUCOMMAND**](wm-menucommand.md) вместо [**\_ команды WM**](wm-command.md) при выборе элемента.</span><span class="sxs-lookup"><span data-stu-id="e1d90-463">If the menu is defined with a **MENUINFO**.**dwStyle** value of MNS\_NOTIFYBYPOS, the system sends [**WM\_MENUCOMMAND**](wm-menucommand.md) instead of the [**WM\_COMMAND**](wm-command.md) when an item is selected.</span></span> <span data-ttu-id="e1d90-464">Это позволяет получить доступ к информации в структуре **менуинфо** , а также напрямую предоставить индекс выбранного элемента.</span><span class="sxs-lookup"><span data-stu-id="e1d90-464">This allows you to access the information in the **MENUINFO** structure and also provides the index of the selected item directly.</span></span>

<span data-ttu-id="e1d90-465">Не все меню доступны в строке меню окна.</span><span class="sxs-lookup"><span data-stu-id="e1d90-465">Not all menus are accessible through a window's menu bar.</span></span> <span data-ttu-id="e1d90-466">Во многих приложениях контекстное меню отображается, когда пользователь нажимает правую кнопку мыши в определенном месте.</span><span class="sxs-lookup"><span data-stu-id="e1d90-466">Many applications display shortcut menus when the user clicks the right mouse button at a specific location.</span></span> <span data-ttu-id="e1d90-467">Такие приложения должны обрабатывать сообщение [**WM \_ CONTEXTMENU**](wm-contextmenu.md) и отображать контекстное меню, если это необходимо.</span><span class="sxs-lookup"><span data-stu-id="e1d90-467">Such applications should process the [**WM\_CONTEXTMENU**](wm-contextmenu.md) message and display a shortcut menu, if appropriate.</span></span> <span data-ttu-id="e1d90-468">Если в приложении не отображается контекстное меню, оно должно передать сообщение **WM \_ CONTEXTMENU** функции [**дефвиндовпрок**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) для обработки по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="e1d90-468">If an application does not display a shortcut menu, it should pass the **WM\_CONTEXTMENU** message to the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function for default processing.</span></span>

<span data-ttu-id="e1d90-469">Сообщение [**WM \_ менурбуттонуп**](wm-menurbuttonup.md) отправляется, когда пользователь отпускает правую кнопку мыши, когда курсор находится над пунктом меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-469">The [**WM\_MENURBUTTONUP**](wm-menurbuttonup.md) message is sent when the user releases the right mouse button while the cursor is on a menu item.</span></span> <span data-ttu-id="e1d90-470">Это сообщение предоставляется таким образом, чтобы приложения могли отобразить контекстное меню или контекстное меню для пункта меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-470">This message is provided so that applications can display a context-sensitive or shortcut menu for a menu item.</span></span>

<span data-ttu-id="e1d90-471">Существует несколько сообщений, использующих только меню перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="e1d90-471">There are a few messages that only involve drag-and-drop menus.</span></span> <span data-ttu-id="e1d90-472">[**WM \_ менужетобжект**](wm-menugetobject.md) отправляется владельцу меню перетаскивания, когда курсор мыши попадает в пункт меню или перемещается от центра элемента к верхнему или нижнему краю элемента.</span><span class="sxs-lookup"><span data-stu-id="e1d90-472">The [**WM\_MENUGETOBJECT**](wm-menugetobject.md) is sent to the owner of a drag-and-drop menu when the mouse cursor enters a menu item or moves from the center of an item to the top or the bottom of an item.</span></span> <span data-ttu-id="e1d90-473">Сообщение [**WM \_ менудраг**](wm-menudrag.md) отправляется, когда пользователь фактически перетаскивает пункт меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-473">The [**WM\_MENUDRAG**](wm-menudrag.md) message is sent when the user actually drags a menu item.</span></span>

<span data-ttu-id="e1d90-474">При удалении раскрывающегося меню или подменю система отправляет сообщение [**WM \_ унинитменупопуп**](wm-uninitmenupopup.md) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-474">When a drop-down menu or a submenu has been destroyed, the system sends a [**WM\_UNINITMENUPOPUP**](wm-uninitmenupopup.md) message.</span></span>

## <a name="menu-destruction"></a><span data-ttu-id="e1d90-475">Уничтожение меню</span><span class="sxs-lookup"><span data-stu-id="e1d90-475">Menu Destruction</span></span>

<span data-ttu-id="e1d90-476">Если меню назначено окну и это окно уничтожается, система автоматически уничтожает меню и его подменю, освобождая маркер меню и память, занятую меню.</span><span class="sxs-lookup"><span data-stu-id="e1d90-476">If a menu is assigned to a window and that window is destroyed, the system automatically destroys the menu and its submenus, freeing the menu's handle and the memory occupied by the menu.</span></span> <span data-ttu-id="e1d90-477">Система не удаляет автоматически меню, которое не назначено окну.</span><span class="sxs-lookup"><span data-stu-id="e1d90-477">The system does not automatically destroy a menu that is not assigned to a window.</span></span> <span data-ttu-id="e1d90-478">Приложение должно уничтожить Неназначенное меню, вызвав функцию [**дестроймену**](/windows/desktop/api/Winuser/nf-winuser-destroymenu) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-478">An application must destroy the unassigned menu by calling the [**DestroyMenu**](/windows/desktop/api/Winuser/nf-winuser-destroymenu) function.</span></span> <span data-ttu-id="e1d90-479">В противном случае меню останется в памяти даже после закрытия приложения.</span><span class="sxs-lookup"><span data-stu-id="e1d90-479">Otherwise, the menu continues to exist in memory even after the application closes.</span></span> <span data-ttu-id="e1d90-480">Чтобы завершить активное меню вызывающего потока, используйте [**ендмену**](/windows/desktop/api/Winuser/nf-winuser-endmenu).</span><span class="sxs-lookup"><span data-stu-id="e1d90-480">To end the calling thread's active menu, use [**EndMenu**](/windows/desktop/api/Winuser/nf-winuser-endmenu).</span></span> <span data-ttu-id="e1d90-481">Если платформа не поддерживает **ендмену**, отправляйте владельцу активного меню сообщение [**WM \_ канцелмоде**](/windows/desktop/winmsg/wm-cancelmode) .</span><span class="sxs-lookup"><span data-stu-id="e1d90-481">If a platform does not support **EndMenu**, send the owner of the active menu a [**WM\_CANCELMODE**](/windows/desktop/winmsg/wm-cancelmode) message.</span></span>

 

 