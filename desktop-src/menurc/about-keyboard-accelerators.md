---
title: О сочетаниях клавиш
description: В этом разделе обсуждаются сочетания клавиш.
ms.assetid: cbf7619d-289d-40c9-9a06-6ce47026d43f
keywords:
- Пользовательский интерфейс Windows, ввод данных пользователем
- Пользовательский интерфейс Windows, сочетания клавиш
- Ввод данных пользователем, сочетания клавиш
- захват вводимых пользователем данных, сочетания клавиш
- сочетания клавиш
- Accelerator
- Сообщение WM_COMMAND
- Сообщение команды WM_SYS
- таблицы сочетаний клавиш
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: be9c89301f58d7d76b5d9b28dd6835850c0674db
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "103987392"
---
# <a name="about-keyboard-accelerators"></a><span data-ttu-id="6096a-112">О сочетаниях клавиш</span><span class="sxs-lookup"><span data-stu-id="6096a-112">About Keyboard Accelerators</span></span>

<span data-ttu-id="6096a-113">Сочетания клавиш тесно связаны с меню — они предоставляют пользователю доступ к набору команд приложения.</span><span class="sxs-lookup"><span data-stu-id="6096a-113">Accelerators are closely related to menus — both provide the user with access to an application's command set.</span></span> <span data-ttu-id="6096a-114">Как правило, пользователи полагаются на меню приложения, чтобы узнать набор команд, а затем переключиться на использование ускорителей, так как они станут более хорошо подработаны с приложением.</span><span class="sxs-lookup"><span data-stu-id="6096a-114">Typically, users rely on an application's menus to learn the command set and then switch over to using accelerators as they become more proficient with the application.</span></span> <span data-ttu-id="6096a-115">Ускорители обеспечивают более быстрый и непосредственный доступ к командам по сравнению с меню.</span><span class="sxs-lookup"><span data-stu-id="6096a-115">Accelerators provide faster, more direct access to commands than menus do.</span></span> <span data-ttu-id="6096a-116">Как минимум, приложение должно предоставлять ускорители для наиболее часто используемых команд.</span><span class="sxs-lookup"><span data-stu-id="6096a-116">At a minimum, an application should provide accelerators for the more commonly used commands.</span></span> <span data-ttu-id="6096a-117">Хотя ускорители обычно создают команды, которые существуют как пункты меню, они также могут формировать команды, не имеющие эквивалентных пунктов меню.</span><span class="sxs-lookup"><span data-stu-id="6096a-117">Although accelerators typically generate commands that exist as menu items, they can also generate commands that have no equivalent menu items.</span></span>

<span data-ttu-id="6096a-118">В этом разделе рассматриваются следующие темы.</span><span class="sxs-lookup"><span data-stu-id="6096a-118">This section covers the following topics.</span></span>

-   [<span data-ttu-id="6096a-119">Таблицы сочетаний клавиш</span><span class="sxs-lookup"><span data-stu-id="6096a-119">Accelerator Tables</span></span>](#accelerator-tables)
-   [<span data-ttu-id="6096a-120">Ускоритель — создание таблицы</span><span class="sxs-lookup"><span data-stu-id="6096a-120">Accelerator-Table Creation</span></span>](#accelerator-table-creation)
-   [<span data-ttu-id="6096a-121">Назначение сочетаний клавиш</span><span class="sxs-lookup"><span data-stu-id="6096a-121">Accelerator Keystroke Assignments</span></span>](#accelerator-keystroke-assignments)
-   [<span data-ttu-id="6096a-122">Сочетания клавиш и меню</span><span class="sxs-lookup"><span data-stu-id="6096a-122">Accelerators and Menus</span></span>](#accelerators-and-menus)
-   [<span data-ttu-id="6096a-123">Состояние пользовательского интерфейса</span><span class="sxs-lookup"><span data-stu-id="6096a-123">UI State</span></span>](#ui-state)

## <a name="accelerator-tables"></a><span data-ttu-id="6096a-124">Таблицы сочетаний клавиш</span><span class="sxs-lookup"><span data-stu-id="6096a-124">Accelerator Tables</span></span>

<span data-ttu-id="6096a-125">Таблица сочетаний клавиш состоит из массива несамостоятельных [**структур, каждый из которых**](/windows/win32/api/winuser/ns-winuser-accel) определяет отдельный ускоритель.</span><span class="sxs-lookup"><span data-stu-id="6096a-125">An accelerator table consists of an array of [**ACCEL**](/windows/win32/api/winuser/ns-winuser-accel) structures, each defining an individual accelerator.</span></span> <span data-ttu-id="6096a-126">Каждая **Структура** предоставляет следующие сведения:</span><span class="sxs-lookup"><span data-stu-id="6096a-126">Each **ACCEL** structure includes the following information:</span></span>

-   <span data-ttu-id="6096a-127">Сочетание клавиш ускорителя.</span><span class="sxs-lookup"><span data-stu-id="6096a-127">The accelerator's keystroke combination.</span></span>
-   <span data-ttu-id="6096a-128">Идентификатор ускорителя.</span><span class="sxs-lookup"><span data-stu-id="6096a-128">The accelerator's identifier.</span></span>
-   <span data-ttu-id="6096a-129">Различные флаги.</span><span class="sxs-lookup"><span data-stu-id="6096a-129">Various flags.</span></span> <span data-ttu-id="6096a-130">Сюда входит один из них, который определяет, должна ли система предоставлять визуальную обратную связь, выделяя соответствующий пункт меню (если он есть) при использовании сочетания клавиш.</span><span class="sxs-lookup"><span data-stu-id="6096a-130">This includes one that specifies whether the system is to provide visual feedback by highlighting the corresponding menu item, if any, when the accelerator is used</span></span>

<span data-ttu-id="6096a-131">Чтобы обработать нажатия клавиш быстрого вызова для указанного потока, разработчик должен вызвать функцию [**TranslateAccelerator**](/windows/desktop/api/Winuser/nf-winuser-translateacceleratora) в цикле обработки сообщений, связанном с очередью сообщений потока.</span><span class="sxs-lookup"><span data-stu-id="6096a-131">To process accelerator keystrokes for a specified thread, the developer must call the [**TranslateAccelerator**](/windows/desktop/api/Winuser/nf-winuser-translateacceleratora) function in the message loop associated with the thread's message queue.</span></span> <span data-ttu-id="6096a-132">Функция **TranslateAccelerator** отслеживает ввод с клавиатуры в очереди сообщений, проверяя сочетания клавиш, соответствующие записи в таблице сочетаний клавиш.</span><span class="sxs-lookup"><span data-stu-id="6096a-132">The **TranslateAccelerator** function monitors keyboard input to the message queue, checking for key combinations that match an entry in the accelerator table.</span></span> <span data-ttu-id="6096a-133">Когда **TranslateAccelerator** находит совпадение, он преобразует ввод с клавиатуры (то есть сообщения [**WM \_ KEYUP**](/windows/desktop/inputdev/wm-keyup) и [**WM \_ KeyDown**](/windows/desktop/inputdev/wm-keydown) ) в [**\_ команду WM**](wm-command.md) или сообщение [**WM \_ сискомманд**](wm-syscommand.md) , а затем отправляет сообщение в процедуру окна указанного окна.</span><span class="sxs-lookup"><span data-stu-id="6096a-133">When **TranslateAccelerator** finds a match, it translates the keyboard input (that is, the [**WM\_KEYUP**](/windows/desktop/inputdev/wm-keyup) and [**WM\_KEYDOWN**](/windows/desktop/inputdev/wm-keydown) messages) into a [**WM\_COMMAND**](wm-command.md) or [**WM\_SYSCOMMAND**](wm-syscommand.md) message and then sends the message to the window procedure of the specified window.</span></span> <span data-ttu-id="6096a-134">На следующем рисунке показано, как обрабатываются ускорители.</span><span class="sxs-lookup"><span data-stu-id="6096a-134">The following illustration shows how accelerators are processed.</span></span>

![модель обработки сочетаний клавиш](images/cskac-01.png)

<span data-ttu-id="6096a-136">[**\_ Командное сообщение WM**](wm-command.md) содержит идентификатор ускорителя, вызвавший [**TranslateAccelerator**](/windows/desktop/api/Winuser/nf-winuser-translateacceleratora) создание сообщения.</span><span class="sxs-lookup"><span data-stu-id="6096a-136">The [**WM\_COMMAND**](wm-command.md) message includes the identifier of the accelerator that caused [**TranslateAccelerator**](/windows/desktop/api/Winuser/nf-winuser-translateacceleratora) to generate the message.</span></span> <span data-ttu-id="6096a-137">Процедура окна проверяет идентификатор, чтобы определить источник сообщения, а затем обрабатывает сообщение соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="6096a-137">The window procedure examines the identifier to determine the source of the message and then processes the message accordingly.</span></span>

<span data-ttu-id="6096a-138">Таблицы сочетаний клавиш существуют на двух разных уровнях.</span><span class="sxs-lookup"><span data-stu-id="6096a-138">Accelerator tables exist at two different levels.</span></span> <span data-ttu-id="6096a-139">Система поддерживает единую системную таблицу сочетаний клавиш, которая применяется ко всем приложениям.</span><span class="sxs-lookup"><span data-stu-id="6096a-139">The system maintains a single, system-wide accelerator table that applies to all applications.</span></span> <span data-ttu-id="6096a-140">Приложение не может изменить таблицу системных ускорителей.</span><span class="sxs-lookup"><span data-stu-id="6096a-140">An application cannot modify the system accelerator table.</span></span> <span data-ttu-id="6096a-141">Описание сочетаний клавиш, предоставляемых таблицей системного ускорителя, см. в разделе [сочетания клавиш ускорителя](#accelerator-keystroke-assignments).</span><span class="sxs-lookup"><span data-stu-id="6096a-141">For a description of the accelerators provided by the system accelerator table, see [Accelerator Keystroke Assignments](#accelerator-keystroke-assignments).</span></span>

<span data-ttu-id="6096a-142">Система также поддерживает таблицы ускорителей для каждого приложения.</span><span class="sxs-lookup"><span data-stu-id="6096a-142">The system also maintains accelerator tables for each application.</span></span> <span data-ttu-id="6096a-143">Приложение может определить любое количество таблиц сочетаний клавиш для использования с собственными окнами.</span><span class="sxs-lookup"><span data-stu-id="6096a-143">An application can define any number of accelerator tables for use with its own windows.</span></span> <span data-ttu-id="6096a-144">Уникальный 32-разрядный маркер (**хакцел**) определяет каждую таблицу.</span><span class="sxs-lookup"><span data-stu-id="6096a-144">A unique 32-bit handle (**HACCEL**) identifies each table.</span></span> <span data-ttu-id="6096a-145">Однако для указанного потока может быть активна только одна таблица сочетаний клавиш.</span><span class="sxs-lookup"><span data-stu-id="6096a-145">However, only one accelerator table can be active at a time for a specified thread.</span></span> <span data-ttu-id="6096a-146">Маркер для таблицы сочетаний клавиш, переданный функции [**TranslateAccelerator**](/windows/desktop/api/Winuser/nf-winuser-translateacceleratora) , определяет, какая таблица сочетаний клавиш активна для потока.</span><span class="sxs-lookup"><span data-stu-id="6096a-146">The handle to the accelerator table passed to the [**TranslateAccelerator**](/windows/desktop/api/Winuser/nf-winuser-translateacceleratora) function determines which accelerator table is active for a thread.</span></span> <span data-ttu-id="6096a-147">Таблицу активных сочетаний клавиш можно изменить в любое время, передав другой маркер-таблицу ускорителя в **TranslateAccelerator**.</span><span class="sxs-lookup"><span data-stu-id="6096a-147">The active accelerator table can be changed at any time by passing a different accelerator-table handle to **TranslateAccelerator**.</span></span>

## <a name="accelerator-table-creation"></a><span data-ttu-id="6096a-148">Создание Accelerator-Table</span><span class="sxs-lookup"><span data-stu-id="6096a-148">Accelerator-Table Creation</span></span>

<span data-ttu-id="6096a-149">Для создания таблицы сочетаний клавиш для приложения необходимо выполнить несколько действий.</span><span class="sxs-lookup"><span data-stu-id="6096a-149">Several steps are required to create an accelerator table for an application.</span></span> <span data-ttu-id="6096a-150">Во-первых, компилятор ресурсов используется для создания ресурсов таблицы ускорителя и их добавления в исполняемый файл приложения.</span><span class="sxs-lookup"><span data-stu-id="6096a-150">First, a resource compiler is used to create accelerator-table resources and to add them to the application's executable file.</span></span> <span data-ttu-id="6096a-151">Во время выполнения функция [**лоадакцелераторс**](/windows/desktop/api/Winuser/nf-winuser-loadacceleratorsa) используется для загрузки таблицы ускорителя в память и получения маркера в таблицу сочетаний клавиш.</span><span class="sxs-lookup"><span data-stu-id="6096a-151">At run time, the [**LoadAccelerators**](/windows/desktop/api/Winuser/nf-winuser-loadacceleratorsa) function is used to load the accelerator table into memory and retrieve the handle to the accelerator table.</span></span> <span data-ttu-id="6096a-152">Этот обработчик передается функции [**TranslateAccelerator**](/windows/desktop/api/Winuser/nf-winuser-translateacceleratora) для активации таблицы сочетаний клавиш.</span><span class="sxs-lookup"><span data-stu-id="6096a-152">This handle is passed to the [**TranslateAccelerator**](/windows/desktop/api/Winuser/nf-winuser-translateacceleratora) function to activate the accelerator table.</span></span>

<span data-ttu-id="6096a-153">Таблицу сочетаний клавиш можно также создать для приложения во время выполнения, передав массив [**неиспользуемых структур**](/windows/win32/api/winuser/ns-winuser-accel) в функцию [**креатеакцелератортабле**](/windows/desktop/api/Winuser/nf-winuser-createacceleratortablea) .</span><span class="sxs-lookup"><span data-stu-id="6096a-153">An accelerator table can also be created for an application at run time by passing an array of [**ACCEL**](/windows/win32/api/winuser/ns-winuser-accel) structures to the [**CreateAcceleratorTable**](/windows/desktop/api/Winuser/nf-winuser-createacceleratortablea) function.</span></span> <span data-ttu-id="6096a-154">Этот метод поддерживает пользовательские ускорители в приложении.</span><span class="sxs-lookup"><span data-stu-id="6096a-154">This method supports user-defined accelerators in the application.</span></span> <span data-ttu-id="6096a-155">Как и функция [**лоадакцелераторс**](/windows/desktop/api/Winuser/nf-winuser-loadacceleratorsa) , **креатеакцелератортабле** возвращает маркер ускорителя, который можно передать в [**TranslateAccelerator**](/windows/desktop/api/Winuser/nf-winuser-translateacceleratora) для активации таблицы ускорителя.</span><span class="sxs-lookup"><span data-stu-id="6096a-155">Like the [**LoadAccelerators**](/windows/desktop/api/Winuser/nf-winuser-loadacceleratorsa) function, **CreateAcceleratorTable** returns an accelerator-table handle that can be passed to [**TranslateAccelerator**](/windows/desktop/api/Winuser/nf-winuser-translateacceleratora) to activate the accelerator table.</span></span>

<span data-ttu-id="6096a-156">Система автоматически уничтожает таблицы ускорителя, загруженные [**лоадакцелераторс**](/windows/desktop/api/Winuser/nf-winuser-loadacceleratorsa) или созданными [**креатеакцелератортабле**](/windows/desktop/api/Winuser/nf-winuser-createacceleratortablea).</span><span class="sxs-lookup"><span data-stu-id="6096a-156">The system automatically destroys accelerator tables loaded by [**LoadAccelerators**](/windows/desktop/api/Winuser/nf-winuser-loadacceleratorsa) or created by [**CreateAcceleratorTable**](/windows/desktop/api/Winuser/nf-winuser-createacceleratortablea).</span></span> <span data-ttu-id="6096a-157">Однако приложение может освобождать ресурсы во время работы, уничтожая ненужные таблицы ускорителя, вызывая функцию [**дестройакцелератортабле**](/windows/desktop/api/Winuser/nf-winuser-destroyacceleratortable) .</span><span class="sxs-lookup"><span data-stu-id="6096a-157">However, an application can free resources while it is running by destroying accelerator tables no longer needed by calling the [**DestroyAcceleratorTable**](/windows/desktop/api/Winuser/nf-winuser-destroyacceleratortable) function.</span></span>

<span data-ttu-id="6096a-158">Можно скопировать и изменить существующую таблицу сочетаний клавиш.</span><span class="sxs-lookup"><span data-stu-id="6096a-158">An existing accelerator table can be copied and modified.</span></span> <span data-ttu-id="6096a-159">Существующая таблица сочетаний клавиш копируется с помощью функции [**копякцелератортабле**](/windows/desktop/api/Winuser/nf-winuser-copyacceleratortablea) .</span><span class="sxs-lookup"><span data-stu-id="6096a-159">The existing accelerator table is copied by using the [**CopyAcceleratorTable**](/windows/desktop/api/Winuser/nf-winuser-copyacceleratortablea) function.</span></span> <span data-ttu-id="6096a-160">После изменения копии происходит получение маркера новой таблицы сочетаний клавиш путем вызова [**креатеакцелератортабле**](/windows/desktop/api/Winuser/nf-winuser-createacceleratortablea).</span><span class="sxs-lookup"><span data-stu-id="6096a-160">After the copy is modified, a handle to the new accelerator table is retrieved by calling [**CreateAcceleratorTable**](/windows/desktop/api/Winuser/nf-winuser-createacceleratortablea).</span></span> <span data-ttu-id="6096a-161">Наконец, этот маркер передается в [**TranslateAccelerator**](/windows/desktop/api/Winuser/nf-winuser-translateacceleratora) для активации новой таблицы.</span><span class="sxs-lookup"><span data-stu-id="6096a-161">Finally, the handle is passed to [**TranslateAccelerator**](/windows/desktop/api/Winuser/nf-winuser-translateacceleratora) to activate the new table.</span></span>

## <a name="accelerator-keystroke-assignments"></a><span data-ttu-id="6096a-162">Назначение сочетаний клавиш</span><span class="sxs-lookup"><span data-stu-id="6096a-162">Accelerator Keystroke Assignments</span></span>

<span data-ttu-id="6096a-163">Для определения сочетания клавиш можно использовать код символа ASCII или код виртуального ключа.</span><span class="sxs-lookup"><span data-stu-id="6096a-163">An ASCII character code or a virtual-key code can be used to define the accelerator.</span></span> <span data-ttu-id="6096a-164">Код символа ASCII позволяет учитывать регистр сочетаний клавиш.</span><span class="sxs-lookup"><span data-stu-id="6096a-164">An ASCII character code makes the accelerator case sensitive.</span></span> <span data-ttu-id="6096a-165">Таким образом, использование символа ASCII "C" определяет ускоритель как ALT + C, а не ALT + c.</span><span class="sxs-lookup"><span data-stu-id="6096a-165">Thus, using the ASCII "C" character defines the accelerator as ALT+C rather than ALT+c.</span></span> <span data-ttu-id="6096a-166">Однако сочетания клавиш с учетом регистра могут быть непонятны для использования.</span><span class="sxs-lookup"><span data-stu-id="6096a-166">However, case-sensitive accelerators can be confusing to use.</span></span> <span data-ttu-id="6096a-167">Например, сочетание клавиш ALT + C будет создано, если клавиша CAPS LOCK не нажата или нажата клавиша SHIFT, но не работает.</span><span class="sxs-lookup"><span data-stu-id="6096a-167">For example, the ALT+C accelerator will be generated if the CAPS LOCK key is down or if the SHIFT key is down, but not if both are down.</span></span>

<span data-ttu-id="6096a-168">Как правило, сочетания клавиш не требуют учета регистра, поэтому большинство приложений используют коды виртуальных клавиш для ускорителей, а не кодов символов ASCII.</span><span class="sxs-lookup"><span data-stu-id="6096a-168">Typically, accelerators don't need to be case sensitive, so most applications use virtual-key codes for accelerators rather than ASCII character codes.</span></span>

<span data-ttu-id="6096a-169">Избегайте использования ускорителей, которые конфликтуют с назначенными меню приложения, так как ускоритель переопределяет сочетание клавиш, которое может запутать пользователя.</span><span class="sxs-lookup"><span data-stu-id="6096a-169">Avoid accelerators that conflict with an application's menu mnemonics, because the accelerator overrides the mnemonic, which can confuse the user.</span></span> <span data-ttu-id="6096a-170">Дополнительные сведения о назначении клавиш меню см. в разделе [меню](menus.md).</span><span class="sxs-lookup"><span data-stu-id="6096a-170">For more information about menu mnemonics, see [Menus](menus.md).</span></span>

<span data-ttu-id="6096a-171">Если приложение определяет ускоритель, который также определен в таблице системного ускорителя, то ускоритель, определяемый приложением, переопределяет системный ускоритель, но только в контексте приложения.</span><span class="sxs-lookup"><span data-stu-id="6096a-171">If an application defines an accelerator that is also defined in the system accelerator table, the application-defined accelerator overrides the system accelerator, but only within the context of the application.</span></span> <span data-ttu-id="6096a-172">Тем не менее, не рекомендуется использовать этот подход, так как он не позволяет системному ускорителю выполнять свою стандартную роль в пользовательском интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="6096a-172">Avoid this practice, however, because it prevents the system accelerator from performing its standard role in the user interface.</span></span> <span data-ttu-id="6096a-173">В следующем списке описаны сочетания клавиш для всей системы.</span><span class="sxs-lookup"><span data-stu-id="6096a-173">The system-wide accelerators are described in the following list:</span></span>



|                  |                                                                                                       |
|------------------|-------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="6096a-174">ALT + ESC</span><span class="sxs-lookup"><span data-stu-id="6096a-174">ALT+ESC</span></span>          | <span data-ttu-id="6096a-175">Переключается на следующее приложение.</span><span class="sxs-lookup"><span data-stu-id="6096a-175">Switches to the next application.</span></span>                                                                     |
| <span data-ttu-id="6096a-176">ALT+F4</span><span class="sxs-lookup"><span data-stu-id="6096a-176">ALT+F4</span></span>           | <span data-ttu-id="6096a-177">Закрывает приложение или окно.</span><span class="sxs-lookup"><span data-stu-id="6096a-177">Closes an application or a window.</span></span>                                                                    |
| <span data-ttu-id="6096a-178">ALT + ДЕФИС</span><span class="sxs-lookup"><span data-stu-id="6096a-178">ALT+HYPHEN</span></span>       | <span data-ttu-id="6096a-179">Открывает меню **окно** для окна документа.</span><span class="sxs-lookup"><span data-stu-id="6096a-179">Opens the **Window** menu for a document window.</span></span>                                                      |
| <span data-ttu-id="6096a-180">ALT + ЭКРАН ПЕЧАТИ</span><span class="sxs-lookup"><span data-stu-id="6096a-180">ALT+PRINT SCREEN</span></span> | <span data-ttu-id="6096a-181">Копирует изображение из активного окна в буфер обмена.</span><span class="sxs-lookup"><span data-stu-id="6096a-181">Copies an image in the active window onto the clipboard.</span></span>                                              |
| <span data-ttu-id="6096a-182">ALT + ПРОБЕЛ</span><span class="sxs-lookup"><span data-stu-id="6096a-182">ALT+SPACEBAR</span></span>     | <span data-ttu-id="6096a-183">Открывает меню **окно** для главного окна приложения.</span><span class="sxs-lookup"><span data-stu-id="6096a-183">Opens the **Window** menu for the application's main window.</span></span>                                          |
| <span data-ttu-id="6096a-184">ALT+TAB</span><span class="sxs-lookup"><span data-stu-id="6096a-184">ALT+TAB</span></span>          | <span data-ttu-id="6096a-185">Переключается на следующее приложение.</span><span class="sxs-lookup"><span data-stu-id="6096a-185">Switches to the next application.</span></span>                                                                     |
| <span data-ttu-id="6096a-186">CTRL + ESC</span><span class="sxs-lookup"><span data-stu-id="6096a-186">CTRL+ESC</span></span>         | <span data-ttu-id="6096a-187">Переключиться в меню " **Пуск** ".</span><span class="sxs-lookup"><span data-stu-id="6096a-187">Switches to the **Start** menu.</span></span>                                                                       |
| <span data-ttu-id="6096a-188">CTRL + F4</span><span class="sxs-lookup"><span data-stu-id="6096a-188">CTRL+F4</span></span>          | <span data-ttu-id="6096a-189">Закрывает окно активной группы или документа.</span><span class="sxs-lookup"><span data-stu-id="6096a-189">Closes the active group or document window.</span></span>                                                           |
| <span data-ttu-id="6096a-190">F1</span><span class="sxs-lookup"><span data-stu-id="6096a-190">F1</span></span>               | <span data-ttu-id="6096a-191">Запускает файл справки приложения, если он существует.</span><span class="sxs-lookup"><span data-stu-id="6096a-191">Starts the application's help file, if one exists.</span></span>                                                    |
| <span data-ttu-id="6096a-192">ПЕЧАТЬ ЭКРАНА</span><span class="sxs-lookup"><span data-stu-id="6096a-192">PRINT SCREEN</span></span>     | <span data-ttu-id="6096a-193">Копирует изображение с экрана на экран в буфер обмена.</span><span class="sxs-lookup"><span data-stu-id="6096a-193">Copies an image on the screen onto the clipboard.</span></span>                                                     |
| <span data-ttu-id="6096a-194">SHIFT + ALT + TAB</span><span class="sxs-lookup"><span data-stu-id="6096a-194">SHIFT+ALT+TAB</span></span>    | <span data-ttu-id="6096a-195">Переключиться на предыдущее приложение.</span><span class="sxs-lookup"><span data-stu-id="6096a-195">Switches to the previous application.</span></span> <span data-ttu-id="6096a-196">Пользователь должен нажать и удерживать клавиши ALT + SHIFT при нажатии клавиши TAB.</span><span class="sxs-lookup"><span data-stu-id="6096a-196">The user must press and hold down ALT+SHIFT while pressing TAB.</span></span> |



 

## <a name="accelerators-and-menus"></a><span data-ttu-id="6096a-197">Сочетания клавиш и меню</span><span class="sxs-lookup"><span data-stu-id="6096a-197">Accelerators and Menus</span></span>

<span data-ttu-id="6096a-198">Использование ускорителя аналогично выбору пункта меню: оба действия приводят к тому, что система отправляет [**\_ команду WM**](wm-command.md) или сообщение [**WM \_ сискомманд**](wm-syscommand.md) в соответствующую процедуру окна.</span><span class="sxs-lookup"><span data-stu-id="6096a-198">Using an accelerator is the same as choosing a menu item: Both actions cause the system to send a [**WM\_COMMAND**](wm-command.md) or [**WM\_SYSCOMMAND**](wm-syscommand.md) message to the corresponding window procedure.</span></span> <span data-ttu-id="6096a-199">**\_ Командное сообщение WM** содержит идентификатор, который процедура Window проверяет для определения источника сообщения.</span><span class="sxs-lookup"><span data-stu-id="6096a-199">The **WM\_COMMAND** message includes an identifier that the window procedure examines to determine the source of the message.</span></span> <span data-ttu-id="6096a-200">Если ускоритель создал **\_ командное сообщение WM** , идентификатором является ускоритель.</span><span class="sxs-lookup"><span data-stu-id="6096a-200">If an accelerator generated the **WM\_COMMAND** message, the identifier is that of the accelerator.</span></span> <span data-ttu-id="6096a-201">Аналогично, если пункт меню сгенерировал **\_ командное сообщение WM** , идентификатором является элемент меню.</span><span class="sxs-lookup"><span data-stu-id="6096a-201">Similarly, if a menu item generated the **WM\_COMMAND** message, the identifier is that of the menu item.</span></span> <span data-ttu-id="6096a-202">Так как ускоритель предоставляет ярлык для выбора команды из меню, приложение обычно присваивает этому же идентификатору сочетание клавиш и соответствующий пункт меню.</span><span class="sxs-lookup"><span data-stu-id="6096a-202">Because an accelerator provides a shortcut for choosing a command from a menu, an application usually assigns the same identifier to the accelerator and the corresponding menu item.</span></span>

<span data-ttu-id="6096a-203">Приложение обрабатывает [**\_ командное сообщение WM**](wm-command.md) в точно так же, как и соответствующий пункт меню **\_ командное сообщение WM** .</span><span class="sxs-lookup"><span data-stu-id="6096a-203">An application processes an accelerator [**WM\_COMMAND**](wm-command.md) message in exactly the same way as the corresponding menu item **WM\_COMMAND** message.</span></span> <span data-ttu-id="6096a-204">Однако **\_ командное сообщение WM** содержит флаг, указывающий, порождено ли сообщение от ускорителя или пункта меню. в противном случае ускорители должны обрабатываться иначе, чем в соответствующих пунктах меню.</span><span class="sxs-lookup"><span data-stu-id="6096a-204">However, the **WM\_COMMAND** message contains a flag that specifies whether the message originated from an accelerator or a menu item, in case accelerators must be processed differently from their corresponding menu items.</span></span> <span data-ttu-id="6096a-205">Сообщение [**WM \_ сискомманд**](wm-syscommand.md) не содержит этот флаг.</span><span class="sxs-lookup"><span data-stu-id="6096a-205">The [**WM\_SYSCOMMAND**](wm-syscommand.md) message does not contain this flag.</span></span>

<span data-ttu-id="6096a-206">Идентификатор определяет, создает ли ускоритель [**\_ команду WM**](wm-command.md) или сообщение [**WM \_ сискомманд**](wm-syscommand.md) .</span><span class="sxs-lookup"><span data-stu-id="6096a-206">The identifier determines whether an accelerator generates a [**WM\_COMMAND**](wm-command.md) or [**WM\_SYSCOMMAND**](wm-syscommand.md) message.</span></span> <span data-ttu-id="6096a-207">Если идентификатор имеет то же значение, что и пункт меню в системном меню, ускоритель создает сообщение **WM \_ сискомманд** .</span><span class="sxs-lookup"><span data-stu-id="6096a-207">If the identifier has the same value as a menu item in the System menu, the accelerator generates a **WM\_SYSCOMMAND** message.</span></span> <span data-ttu-id="6096a-208">В противном случае ускоритель создает **\_ командное сообщение WM** .</span><span class="sxs-lookup"><span data-stu-id="6096a-208">Otherwise, the accelerator generates a **WM\_COMMAND** message.</span></span>

<span data-ttu-id="6096a-209">Если сочетание клавиш имеет тот же идентификатор, что и элемент меню, и элемент меню является серым или отключенным, ускоритель отключается и не создает [**\_ команду WM**](wm-command.md) или сообщение [**\_ сискомманд WM**](wm-syscommand.md) .</span><span class="sxs-lookup"><span data-stu-id="6096a-209">If an accelerator has the same identifier as a menu item and the menu item is grayed or disabled, the accelerator is disabled and does not generate a [**WM\_COMMAND**](wm-command.md) or [**WM\_SYSCOMMAND**](wm-syscommand.md) message.</span></span> <span data-ttu-id="6096a-210">Кроме того, при сворачивании соответствующего окна ускоритель не создает командное сообщение.</span><span class="sxs-lookup"><span data-stu-id="6096a-210">Also, an accelerator does not generate a command message if the corresponding window is minimized.</span></span>

<span data-ttu-id="6096a-211">Когда пользователь использует ускоритель, соответствующий пункту меню, процедура окна получает сообщения [**WM \_ Инитмену**](wm-initmenu.md) и [**WM \_ инитменупопуп**](wm-initmenupopup.md) , как будто пользователь выбрал пункт меню.</span><span class="sxs-lookup"><span data-stu-id="6096a-211">When the user uses an accelerator that corresponds to a menu item, the window procedure receives the [**WM\_INITMENU**](wm-initmenu.md) and [**WM\_INITMENUPOPUP**](wm-initmenupopup.md) messages as though the user had selected the menu item.</span></span> <span data-ttu-id="6096a-212">Сведения о том, как обрабатывать эти сообщения, см. в разделе [меню](menus.md).</span><span class="sxs-lookup"><span data-stu-id="6096a-212">For information about how to process these messages, see [Menus](menus.md).</span></span>

<span data-ttu-id="6096a-213">Ускоритель, соответствующий пункту меню, должен быть добавлен в текст элемента меню.</span><span class="sxs-lookup"><span data-stu-id="6096a-213">An accelerator that corresponds to a menu item should be included in the text of the menu item.</span></span>

## <a name="ui-state"></a><span data-ttu-id="6096a-214">Состояние пользовательского интерфейса</span><span class="sxs-lookup"><span data-stu-id="6096a-214">UI State</span></span>

<span data-ttu-id="6096a-215">Windows позволяет приложениям скрывать или отображать различные функции в пользовательском интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="6096a-215">Windows enables applications to hide or show various features in its UI.</span></span> <span data-ttu-id="6096a-216">Эти параметры называются состоянием пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="6096a-216">These settings are known as the UI state.</span></span> <span data-ttu-id="6096a-217">Состояние пользовательского интерфейса включает следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="6096a-217">The UI state includes the following settings:</span></span>

-   <span data-ttu-id="6096a-218">индикаторы фокуса (например, прямоугольники фокуса на кнопках)</span><span class="sxs-lookup"><span data-stu-id="6096a-218">focus indicators (such as focus rectangles on buttons)</span></span>
-   <span data-ttu-id="6096a-219">сочетания клавиш (обозначены подчеркиванием в метках элементов управления)</span><span class="sxs-lookup"><span data-stu-id="6096a-219">keyboard accelerators (indicated by underlines in control labels)</span></span>

<span data-ttu-id="6096a-220">Окно может отправлять сообщения для запроса изменения состояния пользовательского интерфейса, может запрашивать состояние пользовательского интерфейса или принудительно применять определенное состояние для своих дочерних окон.</span><span class="sxs-lookup"><span data-stu-id="6096a-220">A window can send messages to request a change in the UI state, can query the UI state, or enforce a certain state for its child windows.</span></span> <span data-ttu-id="6096a-221">Эти сообщения выглядят следующим образом.</span><span class="sxs-lookup"><span data-stu-id="6096a-221">These messages are as follows.</span></span>



| <span data-ttu-id="6096a-222">Сообщение</span><span class="sxs-lookup"><span data-stu-id="6096a-222">Message</span></span>                                       | <span data-ttu-id="6096a-223">Описание</span><span class="sxs-lookup"><span data-stu-id="6096a-223">Description</span></span>                                |
|-----------------------------------------------|--------------------------------------------|
| [<span data-ttu-id="6096a-224">**WM \_ чанжеуистате**</span><span class="sxs-lookup"><span data-stu-id="6096a-224">**WM\_CHANGEUISTATE**</span></span>](wm-changeuistate.md) | <span data-ttu-id="6096a-225">Указывает, что состояние пользовательского интерфейса должно измениться.</span><span class="sxs-lookup"><span data-stu-id="6096a-225">Indicates that the UI state should change.</span></span> |
| [<span data-ttu-id="6096a-226">**WM \_ куерюистате**</span><span class="sxs-lookup"><span data-stu-id="6096a-226">**WM\_QUERYUISTATE**</span></span>](wm-queryuistate.md)   | <span data-ttu-id="6096a-227">Возвращает состояние пользовательского интерфейса для окна.</span><span class="sxs-lookup"><span data-stu-id="6096a-227">Retrieves the UI state for a window.</span></span>       |
| [<span data-ttu-id="6096a-228">**WM \_ упдатеуистате**</span><span class="sxs-lookup"><span data-stu-id="6096a-228">**WM\_UPDATEUISTATE**</span></span>](wm-updateuistate.md) | <span data-ttu-id="6096a-229">Изменяет состояние пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="6096a-229">Changes the UI state.</span></span>                      |



 

<span data-ttu-id="6096a-230">По умолчанию все дочерние окна окна верхнего уровня создаются с тем же состоянием пользовательского интерфейса, что и их родительский элемент.</span><span class="sxs-lookup"><span data-stu-id="6096a-230">By default, all child windows of a top-level window are created with the same UI state as their parent.</span></span>

<span data-ttu-id="6096a-231">Система обрабатывает состояние пользовательского интерфейса для элементов управления в диалоговых окнах.</span><span class="sxs-lookup"><span data-stu-id="6096a-231">The system handles the UI state for controls in dialog boxes.</span></span> <span data-ttu-id="6096a-232">При создании диалогового окна система соответствующим образом Инициализирует состояние пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="6096a-232">At dialog box creation, the system initializes the UI state accordingly.</span></span> <span data-ttu-id="6096a-233">Все дочерние элементы управления наследуют это состояние.</span><span class="sxs-lookup"><span data-stu-id="6096a-233">All child controls inherit this state.</span></span> <span data-ttu-id="6096a-234">После создания диалогового окна система отслеживает нажатия клавиш пользователя.</span><span class="sxs-lookup"><span data-stu-id="6096a-234">After the dialog box is created, the system monitors the user's keystrokes.</span></span> <span data-ttu-id="6096a-235">Если параметры состояния пользовательского интерфейса скрыты и пользователь переходит с помощью клавиатуры, система обновляет состояние пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="6096a-235">If the UI state settings are hidden and the user navigates using the keyboard, the system updates the UI state.</span></span> <span data-ttu-id="6096a-236">Например, если пользователь нажимает клавишу TAB для перемещения фокуса на следующий элемент управления, система вызывает [**WM \_ чанжеуистате**](wm-changeuistate.md) , чтобы сделать индикаторы фокуса видимыми.</span><span class="sxs-lookup"><span data-stu-id="6096a-236">For example, if the user presses the Tab key to move the focus to the next control, the system calls [**WM\_CHANGEUISTATE**](wm-changeuistate.md) to make the focus indicators visible.</span></span> <span data-ttu-id="6096a-237">Если пользователь нажимает клавишу Alt, система вызывает **WM \_ чанжеуистате** для отображения сочетаний клавиш.</span><span class="sxs-lookup"><span data-stu-id="6096a-237">If the user presses the Alt key, the system calls **WM\_CHANGEUISTATE** to make the keyboard accelerators visible.</span></span>

<span data-ttu-id="6096a-238">Если элемент управления поддерживает навигацию между элементами пользовательского интерфейса, которые он содержит, он может обновить собственное состояние пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="6096a-238">If a control supports navigation between the UI elements it contains, it can update its own UI state.</span></span> <span data-ttu-id="6096a-239">Элемент управления может вызывать [**WM \_ куерюистате**](wm-queryuistate.md) для извлечения и кэширования ИСХОДНОГО состояния пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="6096a-239">The control can call [**WM\_QUERYUISTATE**](wm-queryuistate.md) to retrieve and cache the initial UI state.</span></span> <span data-ttu-id="6096a-240">Каждый раз, когда элемент управления получает сообщение [**WM \_ упдатеуистате**](wm-updateuistate.md) , он может обновить состояние пользовательского интерфейса и отправить сообщение [**WM \_ чанжеуистате**](wm-changeuistate.md) в родительский объект.</span><span class="sxs-lookup"><span data-stu-id="6096a-240">Whenever the control receives an [**WM\_UPDATEUISTATE**](wm-updateuistate.md) message, it can update its UI state and send a [**WM\_CHANGEUISTATE**](wm-changeuistate.md) message to its parent.</span></span> <span data-ttu-id="6096a-241">Каждое окно продолжает отсылать сообщение родительскому окну, пока не достигнет окна верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="6096a-241">Each window will continue to send the message to its parent until it reaches the top-level window.</span></span> <span data-ttu-id="6096a-242">Окно верхнего уровня отправляет сообщение **WM \_ упдатеуистате** в окна в дереве окна.</span><span class="sxs-lookup"><span data-stu-id="6096a-242">The top-level window sends the **WM\_UPDATEUISTATE** message to the windows in the window tree.</span></span> <span data-ttu-id="6096a-243">Если окно не передает сообщение **\_ чанжеуистате WM** , оно не будет достигнуто на окно верхнего уровня, а состояние пользовательского интерфейса не будет обновлено.</span><span class="sxs-lookup"><span data-stu-id="6096a-243">If a window does not pass on the **WM\_CHANGEUISTATE** message, it will not reach the top-level window and the UI state will not be updated.</span></span>

 

 