---
title: Форматы файлов ресурсов
description: В этом разделе описывается формат двоичного файла ресурсов, создаваемого компилятором ресурсов на основе содержимого файла определения ресурса.
ms.assetid: a0b17555-f50a-4d58-b2bc-760843dd67eb
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b90c789cd1684c1f5ca31af0e2d60a31052ca03f
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/19/2020
ms.locfileid: "103890621"
---
# <a name="resource-file-formats"></a><span data-ttu-id="f8f08-103">Форматы файлов ресурсов</span><span class="sxs-lookup"><span data-stu-id="f8f08-103">Resource File Formats</span></span>

<span data-ttu-id="f8f08-104">В этом разделе описывается формат двоичного файла ресурсов, создаваемого компилятором ресурсов на основе содержимого файла определения ресурса.</span><span class="sxs-lookup"><span data-stu-id="f8f08-104">This section describes the format of the binary resource file that the resource compiler creates based on the contents of the resource-definition file.</span></span> <span data-ttu-id="f8f08-105">Этот файл обычно имеет расширение. Res.</span><span class="sxs-lookup"><span data-stu-id="f8f08-105">This file usually has an .res extension.</span></span> <span data-ttu-id="f8f08-106">Компоновщик переформатирует RES-файл в файл объекта ресурса, а затем связывает его с исполняемым файлом приложения.</span><span class="sxs-lookup"><span data-stu-id="f8f08-106">The linker reformats the .res file into a resource object file and then links it to the executable file of an application.</span></span>

<span data-ttu-id="f8f08-107">Файл двоичных ресурсов состоит из нескольких Объединенных записей ресурсов.</span><span class="sxs-lookup"><span data-stu-id="f8f08-107">A binary resource file consists of a number of concatenated resource entries.</span></span> <span data-ttu-id="f8f08-108">Каждая запись состоит из заголовка ресурса и данных для этого ресурса.</span><span class="sxs-lookup"><span data-stu-id="f8f08-108">Each entry consists of a resource header and the data for that resource.</span></span> <span data-ttu-id="f8f08-109">Заголовок ресурса в файле выстраивается по **значению DWORD** и состоит из следующих элементов:</span><span class="sxs-lookup"><span data-stu-id="f8f08-109">A resource header is **DWORD**-aligned in the file and consists of the following:</span></span>

-   <span data-ttu-id="f8f08-110">Значение **типа DWORD** , содержащее размер заголовка ресурса</span><span class="sxs-lookup"><span data-stu-id="f8f08-110">A **DWORD** that contains the size of the resource header</span></span>
-   <span data-ttu-id="f8f08-111">Значение **типа DWORD** , содержащее размер данных ресурса</span><span class="sxs-lookup"><span data-stu-id="f8f08-111">A **DWORD** that contains the size of the resource data</span></span>
-   <span data-ttu-id="f8f08-112">Тип ресурса</span><span class="sxs-lookup"><span data-stu-id="f8f08-112">The resource type</span></span>
-   <span data-ttu-id="f8f08-113">Имя ресурса</span><span class="sxs-lookup"><span data-stu-id="f8f08-113">The resource name</span></span>
-   <span data-ttu-id="f8f08-114">Дополнительные сведения о ресурсах</span><span class="sxs-lookup"><span data-stu-id="f8f08-114">Additional resource information</span></span>

<span data-ttu-id="f8f08-115">Структура [**ресаурцехеадер**](resourceheader.md) описывает формат этого заголовка.</span><span class="sxs-lookup"><span data-stu-id="f8f08-115">The [**RESOURCEHEADER**](resourceheader.md) structure describes the format of this header.</span></span> <span data-ttu-id="f8f08-116">Данные ресурса следуют заголовку ресурса и относятся к каждому типу ресурса.</span><span class="sxs-lookup"><span data-stu-id="f8f08-116">The data for the resource follows the resource header and is specific to each type of resource.</span></span> <span data-ttu-id="f8f08-117">Некоторые ресурсы также используют структуру заголовков групп, связанных с ресурсами, для предоставления сведений о группе ресурсов.</span><span class="sxs-lookup"><span data-stu-id="f8f08-117">Some resources also employ a resource-specific group header structure to provide information about a group of resources.</span></span>

## <a name="accelerator-table-resources"></a><span data-ttu-id="f8f08-118">Ресурсы таблицы ускорителя</span><span class="sxs-lookup"><span data-stu-id="f8f08-118">Accelerator Table Resources</span></span>

<span data-ttu-id="f8f08-119">Таблица сочетаний клавиш — это одна запись ресурса в файле ресурсов.</span><span class="sxs-lookup"><span data-stu-id="f8f08-119">An accelerator table is one resource entry in a resource file.</span></span> <span data-ttu-id="f8f08-120">У него нет заголовка группы.</span><span class="sxs-lookup"><span data-stu-id="f8f08-120">It does not have a group header.</span></span> <span data-ttu-id="f8f08-121">Структура [**акцелтаблинтри**](acceltableentry.md) описывает каждую запись в таблице сочетаний клавиш.</span><span class="sxs-lookup"><span data-stu-id="f8f08-121">An [**ACCELTABLEENTRY**](acceltableentry.md) structure describes each entry in the accelerator table.</span></span> <span data-ttu-id="f8f08-122">Разрешено использовать несколько таблиц ускорителя.</span><span class="sxs-lookup"><span data-stu-id="f8f08-122">Multiple accelerator tables are permitted.</span></span>

## <a name="cursor-and-icon-resources"></a><span data-ttu-id="f8f08-123">Ресурсы курсора и значков</span><span class="sxs-lookup"><span data-stu-id="f8f08-123">Cursor and Icon Resources</span></span>

<span data-ttu-id="f8f08-124">Система обрабатывает каждый значок и курсор как один файл.</span><span class="sxs-lookup"><span data-stu-id="f8f08-124">The system handles each icon and cursor as a single file.</span></span> <span data-ttu-id="f8f08-125">Однако они хранятся в RES-файлах и исполняемых файлах в виде группы ресурсов значков или группы ресурсов курсора.</span><span class="sxs-lookup"><span data-stu-id="f8f08-125">However, these are stored in .res files and in executable files as a group of icon resources or a group of cursor resources.</span></span> <span data-ttu-id="f8f08-126">Формат файлов ресурсов значков и курсоров аналогичен.</span><span class="sxs-lookup"><span data-stu-id="f8f08-126">The file formats of icon and cursor resources are similar.</span></span> <span data-ttu-id="f8f08-127">В RES-файле заголовок группы ресурсов соответствует всем отдельным компонентам значков или групп курсоров.</span><span class="sxs-lookup"><span data-stu-id="f8f08-127">In the .res file a resource group header follows all of the individual icon or cursor group components.</span></span>

<span data-ttu-id="f8f08-128">Формат каждого компонента значка во многом напоминает формат файла ICO.</span><span class="sxs-lookup"><span data-stu-id="f8f08-128">The format of each icon component closely resembles the format of the .ico file.</span></span> <span data-ttu-id="f8f08-129">Каждый образ значка хранится в структуре [**битмапинфо**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) , за которой следует цвет битовой маски **XOR** значка (DIB), не зависящей от устройства.</span><span class="sxs-lookup"><span data-stu-id="f8f08-129">Each icon image is stored in a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure followed by the color device-independent bitmap (DIB) bits of the icon's **XOR** mask.</span></span> <span data-ttu-id="f8f08-130">Монохромный DIB бит значка **и** маски соответствует цвету DIB.</span><span class="sxs-lookup"><span data-stu-id="f8f08-130">The monochrome DIB bits of the icon's **AND** mask follow the color DIB bits.</span></span>

<span data-ttu-id="f8f08-131">Формат каждого компонента курсора напоминает формат файла cur.</span><span class="sxs-lookup"><span data-stu-id="f8f08-131">The format of each cursor component resembles the format of the .cur file.</span></span> <span data-ttu-id="f8f08-132">Каждый образ курсора хранится в структуре [**битмапинфо**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) , за которой следуют МОНОХРОМные DIB-биты маски **XOR** курсора, а затем — монохромные DIB-биты курсора **и** маски.</span><span class="sxs-lookup"><span data-stu-id="f8f08-132">Each cursor image is stored in a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure followed by the monochrome DIB bits of the cursor's **XOR** mask, and then by the monochrome DIB bits of the cursor's **AND** mask.</span></span> <span data-ttu-id="f8f08-133">Обратите внимание, что существует разница в точечных рисунках двух ресурсов: в отличие от значков, маски XOR для курсора не имеют цветового DIB-бита.</span><span class="sxs-lookup"><span data-stu-id="f8f08-133">Note that there is a difference in the bitmaps of the two resources: Unlike icons, cursor XOR masks do not have color DIB bits.</span></span> <span data-ttu-id="f8f08-134">Несмотря на то, что точечные рисунки масок курсоров являются монохромными и не имеют заголовков DIB или цветных таблиц, они по-прежнему имеют формат DIB в соответствии с выравниванием и направлением.</span><span class="sxs-lookup"><span data-stu-id="f8f08-134">Although the bitmaps of the cursor masks are monochrome and do not have DIB headers or color tables, the bits are still in DIB format with respect to alignment and direction.</span></span> <span data-ttu-id="f8f08-135">Еще одно существенное различие между курсорами и значками заключается в том, что курсоры имеют активную точку, а значки — нет.</span><span class="sxs-lookup"><span data-stu-id="f8f08-135">Another significant difference between cursors and icons is that cursors have a hotspot and icons do not.</span></span>

<span data-ttu-id="f8f08-136">Заголовок группы для ресурсов значков и курсоров состоит из структуры [**невхеадер**](newheader.md) и одной или нескольких структур [**ресдир**](resdir.md) .</span><span class="sxs-lookup"><span data-stu-id="f8f08-136">The group header for both icon and cursor resources consists of a [**NEWHEADER**](newheader.md) structure plus one or more [**RESDIR**](resdir.md) structures.</span></span> <span data-ttu-id="f8f08-137">Для каждого значка или курсора существует одна структура **ресдир** .</span><span class="sxs-lookup"><span data-stu-id="f8f08-137">There is one **RESDIR** structure for each icon or cursor.</span></span> <span data-ttu-id="f8f08-138">Заголовок группы содержит сведения, необходимые приложению для выбора правильного значка или курсора для показа.</span><span class="sxs-lookup"><span data-stu-id="f8f08-138">The group header contains the information an application needs to select the correct icon or cursor to display.</span></span> <span data-ttu-id="f8f08-139">Заголовок группы и данные, повторяющиеся для каждого значка или курсора в группе, имеют фиксированную длину.</span><span class="sxs-lookup"><span data-stu-id="f8f08-139">Both the group header and the data that repeats for each icon or cursor in the group have a fixed length.</span></span> <span data-ttu-id="f8f08-140">Это позволяет приложению получить случайный доступ к данным.</span><span class="sxs-lookup"><span data-stu-id="f8f08-140">This allows the application to randomly access the information.</span></span>

## <a name="dialog-box-resources"></a><span data-ttu-id="f8f08-141">Ресурсы диалоговых окон</span><span class="sxs-lookup"><span data-stu-id="f8f08-141">Dialog Box Resources</span></span>

<span data-ttu-id="f8f08-142">Диалоговое окно также является одной записью ресурса в файле ресурсов.</span><span class="sxs-lookup"><span data-stu-id="f8f08-142">A dialog box is also one resource entry in the resource file.</span></span> <span data-ttu-id="f8f08-143">Он состоит из одной структуры заголовка диалогового окна [**длгтемплате**](/windows/desktop/api/winuser/ns-winuser-dlgtemplate) и одной структуры [**длгитемтемплате**](/windows/desktop/api/winuser/ns-winuser-dlgitemtemplate) для каждого элемента управления в диалоговом окне.</span><span class="sxs-lookup"><span data-stu-id="f8f08-143">It consists of one [**DLGTEMPLATE**](/windows/desktop/api/winuser/ns-winuser-dlgtemplate) dialog box header structure plus one [**DLGITEMTEMPLATE**](/windows/desktop/api/winuser/ns-winuser-dlgitemtemplate) structure for each control in the dialog box.</span></span> <span data-ttu-id="f8f08-144">Структуры [**длгтемплатикс**](/windows/desktop/dlgbox/dlgtemplateex) и [**длгитемтемплатикс**](/windows/desktop/dlgbox/dlgitemtemplateex) описывают формат расширенных ресурсов диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="f8f08-144">The [**DLGTEMPLATEEX**](/windows/desktop/dlgbox/dlgtemplateex) and the [**DLGITEMTEMPLATEEX**](/windows/desktop/dlgbox/dlgitemtemplateex) structures describe the format of extended dialog box resources.</span></span>

## <a name="font-resources"></a><span data-ttu-id="f8f08-145">Ресурсы шрифтов</span><span class="sxs-lookup"><span data-stu-id="f8f08-145">Font Resources</span></span>

<span data-ttu-id="f8f08-146">Шрифты хранятся в файле ресурсов как группа ресурсов.</span><span class="sxs-lookup"><span data-stu-id="f8f08-146">Fonts are stored in the resource file as a group of resources.</span></span> <span data-ttu-id="f8f08-147">Отдельные шрифты составляют группу шрифтов.</span><span class="sxs-lookup"><span data-stu-id="f8f08-147">Individual fonts make up a font group.</span></span> <span data-ttu-id="f8f08-148">Инструкция определения ресурса в [инструкции Font](./font-statement.md) в. В файле RC определяется каждый шрифт.</span><span class="sxs-lookup"><span data-stu-id="f8f08-148">A [FONT Statement](./font-statement.md) resource definition statement in the .RC file defines each font.</span></span> <span data-ttu-id="f8f08-149">Каждый отдельный шрифт в ресурсе состоит из полного содержимого связанного фнт файла.</span><span class="sxs-lookup"><span data-stu-id="f8f08-149">Each individual font in the resource consists of the complete contents of the related .fnt file.</span></span> <span data-ttu-id="f8f08-150">Структура [**фонтграуфдр**](fontgrouphdr.md) соответствует всем отдельным компонентам Font в RES-файле.</span><span class="sxs-lookup"><span data-stu-id="f8f08-150">A [**FONTGROUPHDR**](fontgrouphdr.md) structure follows all the individual font components in the .res file.</span></span>

<span data-ttu-id="f8f08-151">Ресурсы шрифтов не добавляются в ресурсы конкретного приложения.</span><span class="sxs-lookup"><span data-stu-id="f8f08-151">Font resources are not added to the resources of a specific application.</span></span> <span data-ttu-id="f8f08-152">Вместо этого они обычно добавляются в исполняемые файлы с расширением FON.</span><span class="sxs-lookup"><span data-stu-id="f8f08-152">Instead, they are normally added to executable files that have a .fon extension.</span></span> <span data-ttu-id="f8f08-153">Эти файлы обычно являются библиотеками DLL только для ресурсов, а не приложениями.</span><span class="sxs-lookup"><span data-stu-id="f8f08-153">These files are usually resource-only DLLs rather than applications.</span></span>

## <a name="menu-resources"></a><span data-ttu-id="f8f08-154">Ресурсы меню</span><span class="sxs-lookup"><span data-stu-id="f8f08-154">Menu Resources</span></span>

<span data-ttu-id="f8f08-155">*Ресурс меню* состоит из структуры [**менухеадер**](menuheader.md) , за которой следует одна или несколько структур [**нормалменуитем**](normalmenuitem.md) или [**попупменуитем**](popupmenuitem.md) , по одному для каждого пункта меню в шаблоне меню.</span><span class="sxs-lookup"><span data-stu-id="f8f08-155">A *menu resource* consists of a [**MENUHEADER**](menuheader.md) structure followed by one or more [**NORMALMENUITEM**](normalmenuitem.md) or [**POPUPMENUITEM**](popupmenuitem.md) structures, one for each menu item in the menu template.</span></span> <span data-ttu-id="f8f08-156">[**\_ \_ Заголовок шаблона менуекс**](menuex-template-header.md) и структуры [**\_ \_ элементов шаблона менуекс**](menuex-template-item.md) описывают формат ресурсов расширенного меню.</span><span class="sxs-lookup"><span data-stu-id="f8f08-156">The [**MENUEX\_TEMPLATE\_HEADER**](menuex-template-header.md) and the [**MENUEX\_TEMPLATE\_ITEM**](menuex-template-item.md) structures describe the format of extended menu resources.</span></span>

## <a name="message-table-resources"></a><span data-ttu-id="f8f08-157">Ресурсы таблицы сообщений</span><span class="sxs-lookup"><span data-stu-id="f8f08-157">Message Table Resources</span></span>

<span data-ttu-id="f8f08-158">*Таблица сообщений* — это ресурс, который содержит форматированный текст, отображаемый в виде сообщения об ошибке или в окне сообщения.</span><span class="sxs-lookup"><span data-stu-id="f8f08-158">A *message table* is a resource that contains formatted text for display as an error message or in a message box.</span></span> <span data-ttu-id="f8f08-159">Основной структурой в ресурсе таблицы сообщений является структура [**\_ \_ данных ресурса сообщения**](/windows/desktop/api/Winnt/ns-winnt-message_resource_data) .</span><span class="sxs-lookup"><span data-stu-id="f8f08-159">The main structure in a message table resource is the [**MESSAGE\_RESOURCE\_DATA**](/windows/desktop/api/Winnt/ns-winnt-message_resource_data) structure.</span></span>

## <a name="version-resources"></a><span data-ttu-id="f8f08-160">Ресурсы версии</span><span class="sxs-lookup"><span data-stu-id="f8f08-160">Version Resources</span></span>

<span data-ttu-id="f8f08-161">Основной структурой в ресурсе версии является структура [**VS \_ FIXEDFILEINFO**](/windows/win32/api/verrsrc/ns-verrsrc-vs_fixedfileinfo) .</span><span class="sxs-lookup"><span data-stu-id="f8f08-161">The main structure in a version resource is the [**VS\_FIXEDFILEINFO**](/windows/win32/api/verrsrc/ns-verrsrc-vs_fixedfileinfo) structure.</span></span> <span data-ttu-id="f8f08-162">К дополнительным структурам относится структура [**варфилеинфо**](varfileinfo.md) для хранения данных о языке, а также [**стрингфилеинфо**](stringfileinfo.md) для определяемой пользователем строки.</span><span class="sxs-lookup"><span data-stu-id="f8f08-162">Additional structures include the [**VarFileInfo**](varfileinfo.md) structure to store language information data, and [**StringFileInfo**](stringfileinfo.md) for user-defined string information.</span></span> <span data-ttu-id="f8f08-163">Все строки в ресурсе версии имеют формат Юникода.</span><span class="sxs-lookup"><span data-stu-id="f8f08-163">All strings in a version resource are in Unicode format.</span></span> <span data-ttu-id="f8f08-164">Каждый блок данных выдается по границе **DWORD** .</span><span class="sxs-lookup"><span data-stu-id="f8f08-164">Each block of information is aligned on a **DWORD** boundary.</span></span>

 

 